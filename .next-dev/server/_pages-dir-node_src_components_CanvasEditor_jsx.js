"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_src_components_CanvasEditor_jsx";
exports.ids = ["_pages-dir-node_src_components_CanvasEditor_jsx"];
exports.modules = {

/***/ "(pages-dir-node)/./src/components/CanvasEditor.jsx":
/*!*****************************************!*\
  !*** ./src/components/CanvasEditor.jsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CanvasEditor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _ElementoCanvas__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ElementoCanvas */ \"(pages-dir-node)/./src/components/ElementoCanvas.jsx\");\n/* harmony import */ var _LineControls__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LineControls */ \"(pages-dir-node)/./src/components/LineControls.jsx\");\n/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom/server */ \"react-dom/server\");\n/* harmony import */ var react_dom_server__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_dom_server__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n/* harmony import */ var _models_estructuraInicial__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/models/estructuraInicial */ \"(pages-dir-node)/./src/models/estructuraInicial.js\");\n/* harmony import */ var _hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/hooks/usePlantillasDeSeccion */ \"(pages-dir-node)/./src/hooks/usePlantillasDeSeccion.js\");\n/* harmony import */ var _hooks_useImperativeObjects__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/hooks/useImperativeObjects */ \"(pages-dir-node)/./src/hooks/useImperativeObjects.js\");\n/* harmony import */ var _SelectionBounds__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./SelectionBounds */ \"(pages-dir-node)/./src/components/SelectionBounds.jsx\");\n/* harmony import */ var _HoverIndicator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./HoverIndicator */ \"(pages-dir-node)/./src/components/HoverIndicator.jsx\");\n/* harmony import */ var _LineToolbar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./LineToolbar */ \"(pages-dir-node)/./src/components/LineToolbar.jsx\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! use-image */ \"use-image\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _hooks_useKeyboardShortcuts__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/hooks/useKeyboardShortcuts */ \"(pages-dir-node)/./src/hooks/useKeyboardShortcuts.js\");\n/* harmony import */ var _utils_fontManager__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../utils/fontManager */ \"(pages-dir-node)/./src/utils/fontManager.js\");\n/* harmony import */ var _hooks_useInlineEditor__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/hooks/useInlineEditor */ \"(pages-dir-node)/./src/hooks/useInlineEditor.js\");\n/* harmony import */ var _ShapeToolbar__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./ShapeToolbar */ \"(pages-dir-node)/./src/components/ShapeToolbar.jsx\");\n/* harmony import */ var _hooks_useEditorHandlers__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @/hooks/useEditorHandlers */ \"(pages-dir-node)/./src/hooks/useEditorHandlers.js\");\n/* harmony import */ var _InlineTextEditor__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./InlineTextEditor */ \"(pages-dir-node)/./src/components/InlineTextEditor.jsx\");\n/* harmony import */ var _FontSelector__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./FontSelector */ \"(pages-dir-node)/./src/components/FontSelector.jsx\");\n/* harmony import */ var _utils_accionesFondo__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @/utils/accionesFondo */ \"(pages-dir-node)/./src/utils/accionesFondo.js\");\n/* harmony import */ var _utils_editorSecciones__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @/utils/editorSecciones */ \"(pages-dir-node)/./src/utils/editorSecciones.js\");\n/* harmony import */ var _editor_selection_selectionUtils__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./editor/selection/selectionUtils */ \"(pages-dir-node)/./src/components/editor/selection/selectionUtils.js\");\n/* harmony import */ var _utils_plantillas__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @/utils/plantillas */ \"(pages-dir-node)/./src/utils/plantillas.js\");\n/* harmony import */ var _components_editor_GaleriaKonva__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @/components/editor/GaleriaKonva */ \"(pages-dir-node)/./src/components/editor/GaleriaKonva.jsx\");\n/* harmony import */ var _editor_FondoSeccion__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./editor/FondoSeccion */ \"(pages-dir-node)/./src/components/editor/FondoSeccion.jsx\");\n/* harmony import */ var _MenuOpcionesElemento__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./MenuOpcionesElemento */ \"(pages-dir-node)/./src/components/MenuOpcionesElemento.jsx\");\n/* harmony import */ var _utils_calcGrid__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @/utils/calcGrid */ \"(pages-dir-node)/./src/utils/calcGrid.js\");\n/* harmony import */ var _components_editor_countdown_CountdownKonva__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @/components/editor/countdown/CountdownKonva */ \"(pages-dir-node)/./src/components/editor/countdown/CountdownKonva.jsx\");\n/* harmony import */ var _hooks_useGuiasCentrado__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @/hooks/useGuiasCentrado */ \"(pages-dir-node)/./src/hooks/useGuiasCentrado.js\");\n/* harmony import */ var _components_editor_toolbar_FloatingTextToolbar__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @/components/editor/toolbar/FloatingTextToolbar */ \"(pages-dir-node)/./src/components/editor/toolbar/FloatingTextToolbar.jsx\");\n/* harmony import */ var _SelectorColorSeccion__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./SelectorColorSeccion */ \"(pages-dir-node)/./src/components/SelectorColorSeccion.jsx\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! konva */ \"konva\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_34__);\n/* harmony import */ var _config_fonts__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../config/fonts */ \"(pages-dir-node)/./src/config/fonts.js\");\n/* harmony import */ var _hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @/hooks/useAuthClaims */ \"(pages-dir-node)/./src/hooks/useAuthClaims.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_Check_ClipboardPaste_Copy_Layers_MoveDown_MoveUp_PlusCircle_RotateCcw_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,Check,ClipboardPaste,Copy,Layers,MoveDown,MoveUp,PlusCircle,RotateCcw,Trash2!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,Check,ClipboardPaste,Copy,Layers,MoveDown,MoveUp,PlusCircle,RotateCcw,Trash2!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./editor/persistence/useBorradorSync */ \"(pages-dir-node)/./src/components/editor/persistence/useBorradorSync.js\");\n/* harmony import */ var _editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./editor/sections/useSectionsManager */ \"(pages-dir-node)/./src/components/editor/sections/useSectionsManager.js\");\n/* harmony import */ var _components_editor_sections_ConfirmDeleteSectionModal__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @/components/editor/sections/ConfirmDeleteSectionModal */ \"(pages-dir-node)/./src/components/editor/sections/ConfirmDeleteSectionModal.jsx\");\n/* harmony import */ var _editor_events_useEditorEvents__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./editor/events/useEditorEvents */ \"(pages-dir-node)/./src/components/editor/events/useEditorEvents.js\");\n/* harmony import */ var _editor_window_useEditorWindowBridge__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./editor/window/useEditorWindowBridge */ \"(pages-dir-node)/./src/components/editor/window/useEditorWindowBridge.js\");\n/* harmony import */ var _editor_history_useHistoryManager__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./editor/history/useHistoryManager */ \"(pages-dir-node)/./src/components/editor/history/useHistoryManager.js\");\n/* harmony import */ var _components_editor_mobile_useCanvasScaleLayout__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @/components/editor/mobile/useCanvasScaleLayout */ \"(pages-dir-node)/./src/components/editor/mobile/useCanvasScaleLayout.js\");\n/* harmony import */ var _components_editor_mobile_useCanvasInteractionState__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @/components/editor/mobile/useCanvasInteractionState */ \"(pages-dir-node)/./src/components/editor/mobile/useCanvasInteractionState.js\");\n/* harmony import */ var _editor_mobile_useStageGestures__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./editor/mobile/useStageGestures */ \"(pages-dir-node)/./src/components/editor/mobile/useStageGestures.js\");\n/* harmony import */ var _components_editor_overlays_useOptionButtonPosition__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @/components/editor/overlays/useOptionButtonPosition */ \"(pages-dir-node)/./src/components/editor/overlays/useOptionButtonPosition.js\");\n/* harmony import */ var _components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @/components/canvas/CanvasElementsLayer */ \"(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx\");\n/* harmony import */ var _components_canvas_DividersOverlayStage__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @/components/canvas/DividersOverlayStage */ \"(pages-dir-node)/./src/components/canvas/DividersOverlayStage.jsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_9__, _utils_editorSecciones__WEBPACK_IMPORTED_MODULE_23__, _utils_plantillas__WEBPACK_IMPORTED_MODULE_25__, _hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_36__, _editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_37__, _editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_38__]);\n([_hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_9__, _utils_editorSecciones__WEBPACK_IMPORTED_MODULE_23__, _utils_plantillas__WEBPACK_IMPORTED_MODULE_25__, _hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_36__, _editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_37__, _editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_38__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// components/CanvasEditor.jsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n(konva__WEBPACK_IMPORTED_MODULE_34___default().dragDistance) = 8;\nconst ALTURA_REFERENCIA_PANTALLA = 500;\nconst ALTURA_PANTALLA_EDITOR = 500;\nfunction normalizarAltoModo(modo) {\n    const m = String(modo || \"fijo\").toLowerCase();\n    return m === \"pantalla\" ? \"pantalla\" : \"fijo\";\n}\n// ??? FUNCIÓN HELPER PARA LIMPIAR UNDEFINED\nconst limpiarObjetoUndefined = (obj)=>{\n    if (Array.isArray(obj)) {\n        return obj.map(limpiarObjetoUndefined);\n    }\n    if (obj !== null && typeof obj === 'object') {\n        const objLimpio = {};\n        Object.keys(obj).forEach((key)=>{\n            const valor = obj[key];\n            if (valor !== undefined) {\n                objLimpio[key] = limpiarObjetoUndefined(valor);\n            }\n        });\n        return objLimpio;\n    }\n    return obj;\n};\nconst iconoRotacion = react_dom_server__WEBPACK_IMPORTED_MODULE_6___default().renderToStaticMarkup(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_Check_ClipboardPaste_Copy_Layers_MoveDown_MoveUp_PlusCircle_RotateCcw_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_49__.RotateCcw, {\n    color: \"black\"\n}, void 0, false, {\n    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n    lineNumber: 98,\n    columnNumber: 59\n}, undefined));\nconst urlData = \"data:image/svg+xml;base64,\" + btoa(iconoRotacion);\n// Utils de cursor global (arriba del componente)\nfunction setGlobalCursor(cursor = '', stageRef = null) {\n    try {\n        document.body.style.cursor = cursor || '';\n        // ?? limpiamos también el contenedor del Stage si existe\n        const stage = stageRef?.current?.container?.() || null;\n        if (stage) stage.style.cursor = cursor || '';\n        // fallback: canvas principal\n        const canvas = document.querySelector('canvas');\n        if (canvas && canvas.parentElement) canvas.parentElement.style.cursor = cursor || '';\n    } catch  {}\n}\nfunction clearGlobalCursor(stageRef = null) {\n    setGlobalCursor('', stageRef);\n}\nfunction isInlineDebugEnabled() {\n    return  false && 0;\n}\nfunction formatInlineLogPayload(payload = {}) {\n    try {\n        return JSON.stringify(payload, null, 2);\n    } catch (error) {\n        return String(error || payload);\n    }\n}\nfunction inlineDebugLog(event, payload = {}) {\n    if (!isInlineDebugEnabled()) return;\n    const essentialEvents = new Set([\n        \"start-inline-edit\",\n        \"linebreak-model-sync\",\n        \"linebreak-transformer\"\n    ]);\n    if (!essentialEvents.has(event)) return;\n    const ts = new Date().toISOString();\n    const body = formatInlineLogPayload(payload);\n    console.log(`[INLINE][${ts}] ${event}\\n${body}`);\n}\nfunction nextInlineFrameMeta() {\n    if (true) {\n        return {\n            frame: null,\n            perfMs: null\n        };\n    }\n    const prev = Number(window.__INLINE_FRAME_SEQ || 0);\n    const next = prev + 1;\n    window.__INLINE_FRAME_SEQ = next;\n    const perfMs = typeof window.performance?.now === \"function\" ? Number(window.performance.now().toFixed(3)) : null;\n    return {\n        frame: next,\n        perfMs\n    };\n}\nfunction getInlineLineStats(value) {\n    const normalized = String(value ?? \"\").replace(/\\r\\n/g, \"\\n\");\n    const trailing = normalized.match(/\\n+$/)?.[0];\n    return {\n        normalized,\n        length: normalized.length,\n        lineCount: normalized === \"\" ? 1 : normalized.split(\"\\n\").length,\n        trailingNewlines: trailing ? trailing.length : 0\n    };\n}\nfunction normalizeInlineDebugAB(rawConfig) {\n    const raw = rawConfig && typeof rawConfig === \"object\" ? rawConfig : {};\n    const visibilitySource = raw.visibilitySource === \"window\" ? \"window\" : \"reactive\";\n    const finishMode = raw.finishMode === \"immediate\" || raw.finishMode === \"raf\" || raw.finishMode === \"timeout100\" ? raw.finishMode : \"raf\";\n    const overlayWidthMode = raw.overlayWidthMode === \"fit-content\" ? \"fit-content\" : \"measured\";\n    return {\n        visibilitySource,\n        finishMode,\n        overlayWidthMode\n    };\n}\nfunction CanvasEditor({ slug, zoom = 1, onHistorialChange, onFuturosChange, userId }) {\n    const [objetos, setObjetos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [celdaGaleriaActiva, setCeldaGaleriaActiva] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [secciones, setSecciones] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [historial, setHistorial] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [futuros, setFuturos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [elementosSeleccionados, setElementosSeleccionados] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [cargado, setCargado] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const stageRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { dragStartPos, hasDragged, isDragging, setIsDragging } = (0,_components_editor_mobile_useCanvasInteractionState__WEBPACK_IMPORTED_MODULE_44__[\"default\"])();\n    const imperativeObjects = (0,_hooks_useImperativeObjects__WEBPACK_IMPORTED_MODULE_10__.useImperativeObjects)();\n    const [animandoSeccion, setAnimandoSeccion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [seccionActivaId, setSeccionActivaId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [seleccionActiva, setSeleccionActiva] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inicioSeleccion, setInicioSeleccion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [areaSeleccion, setAreaSeleccion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [elementosPreSeleccionados, setElementosPreSeleccionados] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const guiaLayerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [hoverId, setHoverId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const altoCanvas = secciones.reduce((acc, s)=>acc + s.altura, 0) || 800;\n    const [seccionesAnimando, setSeccionesAnimando] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const { refrescar: refrescarPlantillasDeSeccion } = (0,_hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_9__[\"default\"])();\n    const [elementoCopiado, setElementoCopiado] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const elementRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    const inlineEditPreviewRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        id: null,\n        centerX: null\n    });\n    const inlineCommitDebugRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        id: null\n    });\n    const prevEditingIdRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const inlineRenderValueRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        id: null,\n        value: \"\"\n    });\n    const [inlineOverlayMountedId, setInlineOverlayMountedId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const contenedorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const ignoreNextUpdateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const [anchoStage, setAnchoStage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(800);\n    const [mostrarSelectorFuente, setMostrarSelectorFuente] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mostrarSubmenuCapa, setMostrarSubmenuCapa] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fuentesDisponibles = _config_fonts__WEBPACK_IMPORTED_MODULE_35__.ALL_FONTS;\n    const { esAdmin, loadingClaims } = (0,_hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_36__.useAuthClaims)();\n    const [mobileBackgroundEditSectionId, setMobileBackgroundEditSectionId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [deleteSectionModal, setDeleteSectionModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        sectionId: null\n    });\n    const [isDeletingSection, setIsDeletingSection] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,_editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_37__[\"default\"])({\n        slug,\n        userId,\n        objetos,\n        secciones,\n        cargado,\n        setObjetos,\n        setSecciones,\n        setCargado,\n        setSeccionActivaId,\n        ignoreNextUpdateRef,\n        stageRef,\n        normalizarAltoModo,\n        validarPuntosLinea: _editor_selection_selectionUtils__WEBPACK_IMPORTED_MODULE_24__.validarPuntosLinea,\n        ALTURA_PANTALLA_EDITOR\n    });\n    const { controlandoAltura, iniciarControlAltura, finalizarControlAltura, togglePantallaCompletaSeccion, handleCrearSeccion } = (0,_editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_38__[\"default\"])({\n        slug,\n        secciones,\n        setSecciones,\n        objetos,\n        setObjetos,\n        seccionActivaId,\n        setSeccionActivaId,\n        crearSeccion: _models_estructuraInicial__WEBPACK_IMPORTED_MODULE_8__.crearSeccion,\n        normalizarAltoModo,\n        limpiarObjetoUndefined,\n        ALTURA_REFERENCIA_PANTALLA,\n        stageRef,\n        setGlobalCursor,\n        clearGlobalCursor\n    });\n    const nuevoTextoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,_editor_events_useEditorEvents__WEBPACK_IMPORTED_MODULE_40__[\"default\"])({\n        celdaGaleriaActiva,\n        setCeldaGaleriaActiva,\n        setObjetos,\n        secciones,\n        seccionActivaId,\n        setElementosSeleccionados,\n        normalizarAltoModo,\n        ALTURA_PANTALLA_EDITOR,\n        nuevoTextoRef\n    });\n    const seccionesOrdenadas = [\n        ...secciones\n    ].sort((a, b)=>a.orden - b.orden);\n    const seccionPendienteEliminar = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[seccionPendienteEliminar]\": ()=>secciones.find({\n                \"CanvasEditor.useMemo[seccionPendienteEliminar]\": (seccion)=>seccion.id === deleteSectionModal.sectionId\n            }[\"CanvasEditor.useMemo[seccionPendienteEliminar]\"]) || null\n    }[\"CanvasEditor.useMemo[seccionPendienteEliminar]\"], [\n        secciones,\n        deleteSectionModal.sectionId\n    ]);\n    const cantidadElementosSeccionPendiente = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\": ()=>{\n            if (!seccionPendienteEliminar?.id) return 0;\n            return objetos.filter({\n                \"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\": (obj)=>obj.seccionId === seccionPendienteEliminar.id\n            }[\"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\"]).length;\n        }\n    }[\"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\"], [\n        objetos,\n        seccionPendienteEliminar\n    ]);\n    const { editing, startEdit, updateEdit, finishEdit// () => void\n     } = (0,_hooks_useInlineEditor__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n    const obtenerMetricasNodoInline = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[obtenerMetricasNodoInline]\": (node)=>{\n            if (!node) return null;\n            try {\n                const className = node.getClassName?.() || null;\n                const x = typeof node.x === \"function\" ? node.x() : null;\n                const y = typeof node.y === \"function\" ? node.y() : null;\n                const textWidth = className === \"Text\" && typeof node.getTextWidth === \"function\" ? Math.ceil(node.getTextWidth() || 0) : null;\n                const rect = typeof node.getClientRect === \"function\" ? node.getClientRect({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                }) : null;\n                return {\n                    className,\n                    x,\n                    y,\n                    textWidth,\n                    rect: rect ? {\n                        x: rect.x,\n                        y: rect.y,\n                        width: rect.width,\n                        height: rect.height\n                    } : null\n                };\n            } catch (error) {\n                return {\n                    error: String(error)\n                };\n            }\n        }\n    }[\"CanvasEditor.useCallback[obtenerMetricasNodoInline]\"], []);\n    const cerrarMenusFlotantes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[cerrarMenusFlotantes]\": ()=>{\n            setMostrarPanelZ(false);\n            setMostrarSubmenuCapa(false);\n            setMostrarSelectorFuente(false);\n            setMostrarSelectorTamano(false);\n            setHoverId(null);\n        }\n    }[\"CanvasEditor.useCallback[cerrarMenusFlotantes]\"], []);\n    // ???Elemento actualmente seleccionado (o null)\n    const objetoSeleccionado = elementosSeleccionados.length === 1 ? objetos.find((o)=>o.id === elementosSeleccionados[0]) : null;\n    const [mostrarSelectorTamano, setMostrarSelectorTamano] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const tamaniosDisponibles = Array.from({\n        length: (120 - 6) / 2 + 1\n    }, (_, i)=>6 + i * 2);\n    const [icono] = use_image__WEBPACK_IMPORTED_MODULE_14___default()(urlData);\n    const botonOpcionesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const _refEventQueued = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const registerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[registerRef]\": (id, node)=>{\n            if (!node) {\n                delete elementRefs.current[id];\n                imperativeObjects.registerObject(id, null);\n                return;\n            }\n            elementRefs.current[id] = node;\n            imperativeObjects.registerObject(id, node);\n            // ? Debounce por frame para evitar ráfagas de re-attach del Transformer\n            if (_refEventQueued.current.has(id)) return;\n            _refEventQueued.current.add(id);\n            requestAnimationFrame({\n                \"CanvasEditor.useCallback[registerRef]\": ()=>{\n                    _refEventQueued.current.delete(id);\n                    try {\n                        window.dispatchEvent(new CustomEvent(\"element-ref-registrado\", {\n                            detail: {\n                                id\n                            }\n                        }));\n                    } catch  {}\n                }\n            }[\"CanvasEditor.useCallback[registerRef]\"]);\n        }\n    }[\"CanvasEditor.useCallback[registerRef]\"], [\n        imperativeObjects\n    ]);\n    const loadedFontFamiliesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const { isMobile, isMobilePortrait, scale, anchoContenedor, escalaActiva, escalaVisual, wrapperBaseWidth, escalaFitMobilePortrait } = (0,_components_editor_mobile_useCanvasScaleLayout__WEBPACK_IMPORTED_MODULE_43__[\"default\"])({\n        contenedorRef,\n        zoom\n    });\n    const inlineDebugAB = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[inlineDebugAB]\": ()=>{\n            if (true) {\n                return normalizeInlineDebugAB(null);\n            }\n            return normalizeInlineDebugAB(window.__INLINE_AB);\n        }\n    }[\"CanvasEditor.useMemo[inlineDebugAB]\"], [\n        editing.id,\n        editing.value\n    ]);\n    const handleInlineOverlayMountChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[handleInlineOverlayMountChange]\": (id, mounted)=>{\n            const safeId = id || null;\n            if (!safeId) return;\n            setInlineOverlayMountedId({\n                \"CanvasEditor.useCallback[handleInlineOverlayMountChange]\": (previous)=>{\n                    const next = mounted ? safeId : previous === safeId ? null : previous;\n                    inlineDebugLog(\"overlay-mounted-state\", {\n                        id: safeId,\n                        mounted,\n                        previousOverlayMountedId: previous,\n                        nextOverlayMountedId: next\n                    });\n                    return next;\n                }\n            }[\"CanvasEditor.useCallback[handleInlineOverlayMountChange]\"]);\n        }\n    }[\"CanvasEditor.useCallback[handleInlineOverlayMountChange]\"], []);\n    const captureInlineSnapshot = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[captureInlineSnapshot]\": (eventName, extra = {})=>{\n            if (true) return;\n            if (!isInlineDebugEnabled()) return;\n            if (window.__INLINE_SNAPSHOT !== true) return;\n            const snapshotAllowlist = new Set([\n                \"enter: pre-start\",\n                \"enter: after-start-sync\",\n                \"finish: blur\",\n                \"finish: after-finishEdit\",\n                \"exit: immediate\"\n            ]);\n            if (!snapshotAllowlist.has(eventName)) return;\n            const frameMeta = nextInlineFrameMeta();\n            const snapshotId = extra.id || editing.id || inlineCommitDebugRef.current?.id || prevEditingIdRef.current || null;\n            const node = snapshotId ? elementRefs.current[snapshotId] : null;\n            const nodeMetrics = obtenerMetricasNodoInline(node);\n            const objMetrics = snapshotId ? ({\n                \"CanvasEditor.useCallback[captureInlineSnapshot]\": ()=>{\n                    const obj = objetos.find({\n                        \"CanvasEditor.useCallback[captureInlineSnapshot].obj\": (o)=>o.id === snapshotId\n                    }[\"CanvasEditor.useCallback[captureInlineSnapshot].obj\"]);\n                    if (!obj) return null;\n                    return {\n                        id: obj.id,\n                        tipo: obj.tipo || null,\n                        x: Number.isFinite(obj.x) ? obj.x : null,\n                        y: Number.isFinite(obj.y) ? obj.y : null,\n                        textoLength: String(obj.texto ?? \"\").length,\n                        fontSize: Number.isFinite(obj.fontSize) ? obj.fontSize : null,\n                        lineHeight: Number.isFinite(obj.lineHeight) && obj.lineHeight > 0 ? obj.lineHeight : null\n                    };\n                }\n            })[\"CanvasEditor.useCallback[captureInlineSnapshot]\"]() : null;\n            const stage = stageRef.current?.getStage?.() || stageRef.current || null;\n            let stageRect = null;\n            try {\n                const r = stage?.container?.()?.getBoundingClientRect?.();\n                if (r) {\n                    stageRect = {\n                        x: r.x,\n                        y: r.y,\n                        width: r.width,\n                        height: r.height\n                    };\n                }\n            } catch  {\n                stageRect = null;\n            }\n            let inlineRect = null;\n            let inlineStyle = null;\n            let inlineContentRect = null;\n            let inlineContentMetrics = null;\n            if (snapshotId) {\n                const safeId = String(snapshotId).replace(/\"/g, '\\\\\"');\n                const overlayEl = document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`);\n                if (overlayEl) {\n                    const r = overlayEl.getBoundingClientRect();\n                    inlineRect = {\n                        x: r.x,\n                        y: r.y,\n                        width: r.width,\n                        height: r.height\n                    };\n                    inlineStyle = {\n                        left: overlayEl.style.left,\n                        top: overlayEl.style.top,\n                        minWidth: overlayEl.style.minWidth,\n                        maxWidth: overlayEl.style.maxWidth,\n                        width: overlayEl.style.width\n                    };\n                    const contentEl = overlayEl.querySelector('[contenteditable=\"true\"]');\n                    const contentRect = contentEl?.getBoundingClientRect?.();\n                    if (contentRect) {\n                        inlineContentRect = {\n                            x: contentRect.x,\n                            y: contentRect.y,\n                            width: contentRect.width,\n                            height: contentRect.height\n                        };\n                    }\n                    inlineContentMetrics = contentEl ? {\n                        scrollWidth: contentEl.scrollWidth,\n                        clientWidth: contentEl.clientWidth,\n                        isFocused: document.activeElement === contentEl\n                    } : null;\n                }\n            }\n            let transformerRect = null;\n            try {\n                const transformer = stage?.findOne?.(\"Transformer\");\n                if (transformer) {\n                    const trRect = transformer.getClientRect({\n                        skipTransform: false,\n                        skipShadow: true,\n                        skipStroke: true\n                    });\n                    const nodes = transformer.nodes?.() || [];\n                    transformerRect = trRect ? {\n                        x: trRect.x,\n                        y: trRect.y,\n                        width: trRect.width,\n                        height: trRect.height,\n                        nodesCount: nodes.length,\n                        includesSnapshotNode: !!(node && nodes.includes(node))\n                    } : null;\n                }\n            } catch  {\n                transformerRect = null;\n            }\n            inlineDebugLog(`snapshot-${eventName}`, {\n                ...frameMeta,\n                ...extra,\n                id: snapshotId,\n                eventName,\n                editingId: editing.id ?? null,\n                currentEditingId: window._currentEditingId ?? null,\n                overlayMountedId: inlineOverlayMountedId ?? null,\n                inlineAB: inlineDebugAB,\n                escalaVisual,\n                stageRect,\n                nodeMetrics,\n                objMetrics,\n                transformerRect,\n                inlineRect,\n                inlineStyle,\n                inlineContentRect,\n                inlineContentMetrics,\n                scrollX: window.scrollX,\n                scrollY: window.scrollY,\n                innerWidth: window.innerWidth,\n                innerHeight: window.innerHeight\n            });\n        }\n    }[\"CanvasEditor.useCallback[captureInlineSnapshot]\"], [\n        editing.id,\n        escalaVisual,\n        inlineDebugAB,\n        inlineOverlayMountedId,\n        objetos,\n        obtenerMetricasNodoInline\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const currentId = editing.id || null;\n            const currentValue = String(editing.value ?? \"\");\n            const prev = inlineRenderValueRef.current;\n            if (currentId && prev.id === currentId && prev.value !== currentValue) {\n                const prevStats = getInlineLineStats(prev.value);\n                const nextStats = getInlineLineStats(currentValue);\n                const linebreakChanged = prevStats.lineCount !== nextStats.lineCount || prevStats.trailingNewlines !== nextStats.trailingNewlines;\n                if (linebreakChanged) {\n                    const frameMeta = nextInlineFrameMeta();\n                    const node = elementRefs.current[currentId] || null;\n                    const nodeMetrics = obtenerMetricasNodoInline(node);\n                    const stage = stageRef.current?.getStage?.() || stageRef.current || null;\n                    let transformerRect = null;\n                    try {\n                        const transformer = stage?.findOne?.(\"Transformer\");\n                        if (transformer) {\n                            const trRect = transformer.getClientRect({\n                                skipTransform: false,\n                                skipShadow: true,\n                                skipStroke: true\n                            });\n                            const nodes = transformer.nodes?.() || [];\n                            transformerRect = trRect ? {\n                                x: trRect.x,\n                                y: trRect.y,\n                                width: trRect.width,\n                                height: trRect.height,\n                                nodesCount: nodes.length,\n                                includesEditingNode: !!(node && nodes.includes(node))\n                            } : null;\n                        }\n                    } catch  {\n                        transformerRect = null;\n                    }\n                    let overlayRect = null;\n                    let contentRect = null;\n                    const safeId = String(currentId).replace(/\"/g, '\\\\\"');\n                    const overlayEl = document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`);\n                    if (overlayEl) {\n                        const r = overlayEl.getBoundingClientRect();\n                        overlayRect = {\n                            x: r.x,\n                            y: r.y,\n                            width: r.width,\n                            height: r.height\n                        };\n                        const contentEl = overlayEl.querySelector('[contenteditable=\"true\"]');\n                        const cr = contentEl?.getBoundingClientRect?.();\n                        if (cr) {\n                            contentRect = {\n                                x: cr.x,\n                                y: cr.y,\n                                width: cr.width,\n                                height: cr.height\n                            };\n                        }\n                    }\n                    inlineDebugLog(\"linebreak-transformer\", {\n                        ...frameMeta,\n                        id: currentId,\n                        prevLength: prevStats.length,\n                        nextLength: nextStats.length,\n                        prevLineCount: prevStats.lineCount,\n                        nextLineCount: nextStats.lineCount,\n                        prevTrailingNewlines: prevStats.trailingNewlines,\n                        nextTrailingNewlines: nextStats.trailingNewlines,\n                        overlayMountedId: inlineOverlayMountedId ?? null,\n                        overlayRect,\n                        contentRect,\n                        nodeMetrics,\n                        transformerRect\n                    });\n                }\n                captureInlineSnapshot(\"input: after-render\", {\n                    id: currentId,\n                    previousLength: prev.value.length,\n                    valueLength: currentValue.length\n                });\n            }\n            inlineRenderValueRef.current = {\n                id: currentId,\n                value: currentValue\n            };\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        editing.value,\n        captureInlineSnapshot,\n        inlineOverlayMountedId,\n        obtenerMetricasNodoInline\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return;\n            if (window.__INLINE_DEBUG === undefined) {\n                window.__INLINE_DEBUG = true;\n            }\n            if (window.__INLINE_FRAME_SEQ === undefined) {\n                window.__INLINE_FRAME_SEQ = 0;\n            }\n            const normalizedAB = normalizeInlineDebugAB(window.__INLINE_AB);\n            window.__INLINE_AB = {\n                ...normalizedAB\n            };\n            inlineDebugLog(\"debug-enabled\", {\n                enabled: window.__INLINE_DEBUG,\n                inlineAB: window.__INLINE_AB,\n                frameSeq: window.__INLINE_FRAME_SEQ\n            });\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const currentId = editing.id || null;\n            const previousId = prevEditingIdRef.current;\n            if (currentId && currentId !== previousId) {\n                requestAnimationFrame({\n                    \"CanvasEditor.useEffect\": ()=>{\n                        captureInlineSnapshot(\"enter: raf1\", {\n                            id: currentId,\n                            previousId\n                        });\n                        requestAnimationFrame({\n                            \"CanvasEditor.useEffect\": ()=>{\n                                captureInlineSnapshot(\"enter: raf2\", {\n                                    id: currentId,\n                                    previousId\n                                });\n                            }\n                        }[\"CanvasEditor.useEffect\"]);\n                    }\n                }[\"CanvasEditor.useEffect\"]);\n            }\n            if (!currentId && previousId) {\n                captureInlineSnapshot(\"exit: immediate\", {\n                    id: previousId\n                });\n                requestAnimationFrame({\n                    \"CanvasEditor.useEffect\": ()=>{\n                        captureInlineSnapshot(\"exit: raf1\", {\n                            id: previousId\n                        });\n                        requestAnimationFrame({\n                            \"CanvasEditor.useEffect\": ()=>{\n                                captureInlineSnapshot(\"exit: raf2\", {\n                                    id: previousId\n                                });\n                            }\n                        }[\"CanvasEditor.useEffect\"]);\n                    }\n                }[\"CanvasEditor.useEffect\"]);\n            }\n            prevEditingIdRef.current = currentId;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        captureInlineSnapshot\n    ]);\n    const fuentesNecesarias = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[fuentesNecesarias]\": ()=>{\n            // fuentes usadas en textos + countdown (si aplica) + formas con texto (rect)\n            const fonts = (objetos || []).filter({\n                \"CanvasEditor.useMemo[fuentesNecesarias].fonts\": (o)=>(o.tipo === \"texto\" || o.tipo === \"countdown\" || o.tipo === \"forma\" && o.figura === \"rect\") && o.fontFamily\n            }[\"CanvasEditor.useMemo[fuentesNecesarias].fonts\"]).map({\n                \"CanvasEditor.useMemo[fuentesNecesarias].fonts\": (o)=>String(o.fontFamily).replace(/['\"]/g, \"\").split(\",\")[0].trim()\n            }[\"CanvasEditor.useMemo[fuentesNecesarias].fonts\"]).filter(Boolean);\n            return [\n                ...new Set(fonts)\n            ];\n        }\n    }[\"CanvasEditor.useMemo[fuentesNecesarias]\"], [\n        objetos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return;\n            window.editing = editing;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        editing.value\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return;\n            const previousCurrentEditingId = window._currentEditingId ?? null;\n            window._currentEditingId = editing?.id || null;\n            inlineDebugLog(\"sync-global-editing\", {\n                editingId: editing?.id || null,\n                valueLength: String(editing?.value ?? \"\").length,\n                previousCurrentEditingId,\n                nextCurrentEditingId: window._currentEditingId\n            });\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    inlineDebugLog(\"sync-global-editing-cleanup\", {\n                        editingId: editing?.id || null,\n                        currentEditingId: window._currentEditingId ?? null\n                    });\n                    if (window.editing && window.editing.id === editing.id) {\n                        delete window.editing;\n                    }\n                    if (window._currentEditingId === editing.id) {\n                        window._currentEditingId = null;\n                    }\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id\n    ]);\n    // ?? Función para actualizar offsets de imagen de fondo (SIN UNDEFINED)\n    const actualizarOffsetFondo = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[actualizarOffsetFondo]\": (seccionId, nuevosOffsets, esPreview = false)=>{\n            setSecciones({\n                \"CanvasEditor.useCallback[actualizarOffsetFondo]\": (prev)=>prev.map({\n                        \"CanvasEditor.useCallback[actualizarOffsetFondo]\": (s)=>{\n                            if (s.id !== seccionId) return s;\n                            // ?? CREAR OBJETO LIMPIO\n                            const seccionActualizada = {\n                                ...s\n                            };\n                            // ?? SOLO AGREGAR CAMPOS SI TIENEN VALORES VÁLIDOS\n                            if (nuevosOffsets.offsetX !== undefined && nuevosOffsets.offsetX !== null) {\n                                seccionActualizada.fondoImagenOffsetX = nuevosOffsets.offsetX;\n                            }\n                            if (nuevosOffsets.offsetY !== undefined && nuevosOffsets.offsetY !== null) {\n                                seccionActualizada.fondoImagenOffsetY = nuevosOffsets.offsetY;\n                            }\n                            return seccionActualizada;\n                        }\n                    }[\"CanvasEditor.useCallback[actualizarOffsetFondo]\"])\n            }[\"CanvasEditor.useCallback[actualizarOffsetFondo]\"]);\n        }\n    }[\"CanvasEditor.useCallback[actualizarOffsetFondo]\"], [\n        setSecciones\n    ]);\n    // Asigna una imagen (por URL) a la celda activa\n    function asignarImagenAGaleria(url) {\n        setObjetos((prev)=>{\n            if (!celdaGaleriaActiva) return prev;\n            const { objId, index } = celdaGaleriaActiva;\n            const i = prev.findIndex((o)=>o.id === objId && o.tipo === \"galeria\");\n            if (i === -1) return prev;\n            const copia = structuredClone(prev);\n            const g = copia[i];\n            // Seguridad: que exista y que haya cells[index]\n            if (!g?.cells || !g.cells[index]) return prev;\n            g.cells[index] = {\n                ...g.cells[index] ?? {},\n                mediaUrl: url,\n                fit: g.cells[index]?.fit ?? \"cover\",\n                bg: g.cells[index]?.bg ?? \"#eee\"\n            };\n            return copia;\n        });\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            // Limpiar flag de resize al montar el componente\n            window._resizeData = null;\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    const [mostrarPanelZ, setMostrarPanelZ] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const moverElemento = (accion)=>{\n        const index = objetos.findIndex((o)=>o.id === elementosSeleccionados[0]);\n        if (index === -1) return;\n        const nuevos = [\n            ...objetos\n        ];\n        const [elemento] = nuevos.splice(index, 1);\n        if (accion === \"al-frente\") {\n            nuevos.push(elemento);\n        } else if (accion === \"al-fondo\") {\n            nuevos.unshift(elemento);\n        } else if (accion === \"subir\" && index < objetos.length - 1) {\n            nuevos.splice(index + 1, 0, elemento);\n        } else if (accion === \"bajar\" && index > 0) {\n            nuevos.splice(index - 1, 0, elemento);\n        } else {\n            nuevos.splice(index, 0, elemento); // sin cambios\n        }\n        setObjetos(nuevos);\n        setMostrarPanelZ(false);\n    };\n    const { onDeshacer, onRehacer, onDuplicar, onEliminar, onCopiar, onPegar, onCambiarAlineacion } = (0,_hooks_useEditorHandlers__WEBPACK_IMPORTED_MODULE_19__[\"default\"])({\n        objetos,\n        setObjetos,\n        elementosSeleccionados,\n        setElementosSeleccionados,\n        historial,\n        setHistorial,\n        futuros,\n        setFuturos,\n        setSecciones,\n        ignoreNextUpdateRef,\n        setMostrarPanelZ\n    });\n    (0,_editor_history_useHistoryManager__WEBPACK_IMPORTED_MODULE_42__[\"default\"])({\n        cargado,\n        objetos,\n        secciones,\n        setHistorial,\n        setFuturos,\n        ignoreNextUpdateRef\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const stage = stageRef.current?.getStage?.();\n            if (!stage) return;\n            const content = stage.content;\n            if (!content) return;\n            // ? Estado base: scroll vertical permitido sobre canvas vacío\n            const setScrollMode = {\n                \"CanvasEditor.useEffect.setScrollMode\": ()=>{\n                    content.style.touchAction = \"pan-y\";\n                }\n            }[\"CanvasEditor.useEffect.setScrollMode\"];\n            // ? Durante drag: bloquear scroll para editar fino\n            const setEditMode = {\n                \"CanvasEditor.useEffect.setEditMode\": ()=>{\n                    content.style.touchAction = \"none\";\n                }\n            }[\"CanvasEditor.useEffect.setEditMode\"];\n            // ? NUEVO: estado React confiable para UI (Transformer/hover/etc.)\n            const onDragStart = {\n                \"CanvasEditor.useEffect.onDragStart\": ()=>{\n                    setIsDragging(true);\n                }\n            }[\"CanvasEditor.useEffect.onDragStart\"];\n            const onDragEnd = {\n                \"CanvasEditor.useEffect.onDragEnd\": ()=>{\n                    setIsDragging(false);\n                }\n            }[\"CanvasEditor.useEffect.onDragEnd\"];\n            // ? Failsafe: por si termina “raro” (touch cancel, pointer up, etc.)\n            const stopDragging = {\n                \"CanvasEditor.useEffect.stopDragging\": ()=>{\n                    setIsDragging(false);\n                    setScrollMode();\n                }\n            }[\"CanvasEditor.useEffect.stopDragging\"];\n            // Inicial\n            setScrollMode();\n            setIsDragging(false); // ?? por las dudas, al montar\n            content.style.WebkitUserSelect = \"none\";\n            content.style.WebkitTouchCallout = \"none\";\n            // Konva events\n            stage.on(\"dragstart\", setEditMode);\n            stage.on(\"dragend\", setScrollMode);\n            // ? NUEVO (UI state)\n            stage.on(\"dragstart\", onDragStart);\n            stage.on(\"dragend\", onDragEnd);\n            // Failsafes (si el drag termina raro)\n            stage.on(\"touchend\", stopDragging);\n            stage.on(\"pointerup\", stopDragging);\n            stage.on(\"mouseup\", stopDragging);\n            stage.on(\"touchcancel\", stopDragging);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    stage.off(\"dragstart\", setEditMode);\n                    stage.off(\"dragend\", setScrollMode);\n                    stage.off(\"dragstart\", onDragStart);\n                    stage.off(\"dragend\", onDragEnd);\n                    stage.off(\"touchend\", stopDragging);\n                    stage.off(\"pointerup\", stopDragging);\n                    stage.off(\"mouseup\", stopDragging);\n                    stage.off(\"touchcancel\", stopDragging);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        setIsDragging\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const stage = stageRef.current?.getStage?.() || stageRef.current;\n            const content = stage?.content || stage?.container?.();\n            if (!content) return;\n            const setDragDistanceForInput = {\n                \"CanvasEditor.useEffect.setDragDistanceForInput\": (pointerType)=>{\n                    const isTouchLike = pointerType === \"touch\" || pointerType === \"pen\" || typeof pointerType !== \"string\" && isMobile;\n                    (konva__WEBPACK_IMPORTED_MODULE_34___default().dragDistance) = isTouchLike ? 14 : 5;\n                }\n            }[\"CanvasEditor.useEffect.setDragDistanceForInput\"];\n            const onPointerDown = {\n                \"CanvasEditor.useEffect.onPointerDown\": (event)=>setDragDistanceForInput(event.pointerType)\n            }[\"CanvasEditor.useEffect.onPointerDown\"];\n            const onTouchStart = {\n                \"CanvasEditor.useEffect.onTouchStart\": ()=>setDragDistanceForInput(\"touch\")\n            }[\"CanvasEditor.useEffect.onTouchStart\"];\n            const onMouseDown = {\n                \"CanvasEditor.useEffect.onMouseDown\": ()=>setDragDistanceForInput(\"mouse\")\n            }[\"CanvasEditor.useEffect.onMouseDown\"];\n            setDragDistanceForInput(isMobile ? \"touch\" : \"mouse\");\n            content.addEventListener(\"pointerdown\", onPointerDown, {\n                passive: true\n            });\n            content.addEventListener(\"touchstart\", onTouchStart, {\n                passive: true\n            });\n            content.addEventListener(\"mousedown\", onMouseDown, {\n                passive: true\n            });\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    content.removeEventListener(\"pointerdown\", onPointerDown);\n                    content.removeEventListener(\"touchstart\", onTouchStart);\n                    content.removeEventListener(\"mousedown\", onMouseDown);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        isMobile\n    ]);\n    // Recordar última sección activa\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (seccionActivaId) window._lastSeccionActivaId = seccionActivaId;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        seccionActivaId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!mobileBackgroundEditSectionId) {\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n                return;\n            }\n            window.dispatchEvent(new CustomEvent(\"activar-modo-mover-fondo\", {\n                detail: {\n                    sectionId: mobileBackgroundEditSectionId\n                }\n            }));\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        mobileBackgroundEditSectionId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!nuevoTextoRef.current) return;\n            const obj = objetos.find({\n                \"CanvasEditor.useEffect.obj\": (o)=>o.id === nuevoTextoRef.current\n            }[\"CanvasEditor.useEffect.obj\"]);\n            if (obj) {\n                setElementosSeleccionados([\n                    obj.id\n                ]);\n                // NO iniciar edición automáticamente - solo seleccionar\n                nuevoTextoRef.current = null;\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        objetos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const handleClickFuera = {\n                \"CanvasEditor.useEffect.handleClickFuera\": (e)=>{\n                    if (!e.target.closest(\".popup-fuente\")) {\n                        setMostrarSelectorFuente(false);\n                    }\n                }\n            }[\"CanvasEditor.useEffect.handleClickFuera\"];\n            document.addEventListener(\"mousedown\", handleClickFuera);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickFuera)\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (onHistorialChange) {\n                onHistorialChange(historial);\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        historial,\n        onHistorialChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (onFuturosChange) {\n                onFuturosChange(futuros);\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        futuros,\n        onFuturosChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            // Pre-cargar fuentes populares al iniciar\n            _utils_fontManager__WEBPACK_IMPORTED_MODULE_16__.fontManager.preloadPopularFonts();\n            // Escuchar evento de fuentes cargadas para redibujar\n            const handleFontsLoaded = {\n                \"CanvasEditor.useEffect.handleFontsLoaded\": ()=>{\n                    if (stageRef.current) {\n                        stageRef.current.batchDraw();\n                    }\n                }\n            }[\"CanvasEditor.useEffect.handleFontsLoaded\"];\n            window.addEventListener('fonts-loaded', handleFontsLoaded);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    window.removeEventListener('fonts-loaded', handleFontsLoaded);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            let alive = true;\n            async function precargar() {\n                // Solo precargar fuentes nuevas para evitar re-renders globales del stage\n                if (!fuentesNecesarias.length) return;\n                const pendientes = fuentesNecesarias.filter({\n                    \"CanvasEditor.useEffect.precargar.pendientes\": (fontName)=>!loadedFontFamiliesRef.current.has(fontName)\n                }[\"CanvasEditor.useEffect.precargar.pendientes\"]);\n                if (!pendientes.length) return;\n                try {\n                    // ? Ideal: que fontManager.loadFonts devuelva Promise\n                    // Si hoy no devuelve, igual lo resolvemos con document.fonts más abajo.\n                    const maybePromise = _utils_fontManager__WEBPACK_IMPORTED_MODULE_16__.fontManager.loadFonts?.(pendientes);\n                    // Si devuelve promise, esperamos\n                    if (maybePromise && typeof maybePromise.then === \"function\") {\n                        await maybePromise;\n                    }\n                    // ? Segundo seguro: esperar a que el browser confirme\n                    // (esto garantiza que no haya fallback)\n                    if (document?.fonts?.load) {\n                        await Promise.all(pendientes.map({\n                            \"CanvasEditor.useEffect.precargar\": (f)=>document.fonts.load(`16px \"${f}\"`)\n                        }[\"CanvasEditor.useEffect.precargar\"]));\n                    }\n                    if (!alive) return;\n                    pendientes.forEach({\n                        \"CanvasEditor.useEffect.precargar\": (fontName)=>loadedFontFamiliesRef.current.add(fontName)\n                    }[\"CanvasEditor.useEffect.precargar\"]);\n                    // Redraw por si acaso\n                    requestAnimationFrame({\n                        \"CanvasEditor.useEffect.precargar\": ()=>{\n                            stageRef.current?.batchDraw?.();\n                        }\n                    }[\"CanvasEditor.useEffect.precargar\"]);\n                } catch (e) {\n                    console.warn(\"?? Error precargando fuentes:\", e);\n                }\n            }\n            // Solo precargar cuando ya cargaste el borrador (para evitar overlay raro)\n            if (cargado) precargar();\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    alive = false;\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        cargado,\n        fuentesNecesarias\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{}\n    }[\"CanvasEditor.useEffect\"], [\n        seleccionActiva,\n        areaSeleccion,\n        inicioSeleccion\n    ]);\n    const actualizarObjeto = (index, nuevo)=>{\n        const nuevos = [\n            ...objetos\n        ];\n        const { fromTransform, ...cleanNuevo } = nuevo;\n        // Preservar datos específicos según el tipo de objeto\n        if (nuevos[index].tipo === 'forma' && nuevos[index].figura === 'line') {\n            // Para líneas, asegurar que los puntos se preserven\n            nuevos[index] = {\n                ...nuevos[index],\n                ...cleanNuevo,\n                points: cleanNuevo.points || nuevos[index].points || [\n                    0,\n                    0,\n                    100,\n                    0\n                ]\n            };\n        } else {\n            nuevos[index] = {\n                ...nuevos[index],\n                ...cleanNuevo\n            };\n        }\n        setObjetos(nuevos);\n    };\n    const actualizarObjetoPorId = (id, cambios)=>{\n        const index = objetos.findIndex((o)=>o.id === id);\n        if (index === -1) return console.warn(\"? No se encontró el objeto con ID:\", id);\n        actualizarObjeto(index, cambios);\n    };\n    const normalizarMedidasGaleria = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[normalizarMedidasGaleria]\": (galeria, widthCandidate, xCandidate)=>{\n            const canvasWidth = 800;\n            const rows = Math.max(1, Number(galeria?.rows) || 1);\n            const cols = Math.max(1, Number(galeria?.cols) || 1);\n            const gap = Math.max(0, Number(galeria?.gap) || 0);\n            const cellRatio = galeria?.ratio === \"4:3\" ? 3 / 4 : galeria?.ratio === \"16:9\" ? 9 / 16 : 1;\n            const minGridWidth = gap * (cols - 1) + cols;\n            let widthPct = Number(widthCandidate) / canvasWidth * 100;\n            if (!Number.isFinite(widthPct)) widthPct = Number(galeria?.widthPct);\n            if (!Number.isFinite(widthPct)) widthPct = 70;\n            widthPct = Math.max(10, Math.min(100, widthPct));\n            let width = canvasWidth * widthPct / 100;\n            width = Math.min(canvasWidth, Math.max(minGridWidth, width));\n            widthPct = Math.max(10, Math.min(100, width / canvasWidth * 100));\n            const maxX = Math.max(0, canvasWidth - width);\n            const fallbackX = Number.isFinite(Number(galeria?.x)) ? Number(galeria.x) : 0;\n            const rawX = Number.isFinite(Number(xCandidate)) ? Number(xCandidate) : fallbackX;\n            const x = Math.max(0, Math.min(rawX, maxX));\n            const cellW = Math.max(1, (width - gap * (cols - 1)) / cols);\n            const cellH = cellW * cellRatio;\n            const height = rows * cellH + gap * (rows - 1);\n            return {\n                width,\n                height,\n                widthPct,\n                x\n            };\n        }\n    }[\"CanvasEditor.useCallback[normalizarMedidasGaleria]\"], []);\n    const actualizarLinea = (lineId, nuevaData)=>{\n        const index = objetos.findIndex((obj)=>obj.id === lineId);\n        if (index === -1) {\n            return;\n        }\n        if (nuevaData.isPreview) {\n            // Preview: Solo actualización visual sin historial\n            setObjetos((prev)=>{\n                const nuevos = [\n                    ...prev\n                ];\n                const { isPreview, ...cleanData } = nuevaData;\n                // Asegurar que los puntos siempre sean un array válido\n                if (cleanData.points) {\n                    cleanData.points = cleanData.points.map((p)=>parseFloat(p) || 0);\n                }\n                // ?? PRESERVAR strokeWidth si existe\n                if (cleanData.strokeWidth !== undefined) {\n                    cleanData.strokeWidth = parseInt(cleanData.strokeWidth) || 2;\n                }\n                nuevos[index] = {\n                    ...nuevos[index],\n                    ...cleanData\n                };\n                return nuevos;\n            });\n        } else if (nuevaData.isFinal) {\n            // Final: Guardar en historial\n            setObjetos((prev)=>{\n                const nuevos = [\n                    ...prev\n                ];\n                const { isFinal, ...cleanData } = nuevaData;\n                // Asegurar que los puntos siempre sean un array válido\n                if (cleanData.points) {\n                    cleanData.points = cleanData.points.map((p)=>parseFloat(p) || 0);\n                }\n                // ?? PRESERVAR strokeWidth si existe\n                if (cleanData.strokeWidth !== undefined) {\n                    cleanData.strokeWidth = parseInt(cleanData.strokeWidth) || 2;\n                }\n                nuevos[index] = {\n                    ...nuevos[index],\n                    ...cleanData\n                };\n                return nuevos;\n            });\n        }\n    };\n    // ?? Métricas de texto consistentes con el render de ElementoCanvas\n    const obtenerMetricasTexto = (texto, { fontSize = 24, fontFamily = \"sans-serif\", fontWeight = \"normal\", fontStyle = \"normal\", lineHeight = 1.2 } = {})=>{\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n            const fallbackSize = Number.isFinite(fontSize) && fontSize > 0 ? fontSize : 24;\n            return {\n                width: Math.max(20, String(texto ?? \"\").length * (fallbackSize * 0.55)),\n                height: fallbackSize * lineHeight\n            };\n        }\n        const safeFontSize = Number.isFinite(fontSize) && fontSize > 0 ? fontSize : 24;\n        const safeLineHeight = Number.isFinite(lineHeight) && lineHeight > 0 ? lineHeight : 1.2;\n        const safeFamily = String(fontFamily || \"sans-serif\");\n        const fontForCanvas = safeFamily.includes(\",\") ? safeFamily : /\\s/.test(safeFamily) ? `\"${safeFamily}\"` : safeFamily;\n        ctx.font = `${fontStyle || \"normal\"} ${fontWeight || \"normal\"} ${safeFontSize}px ${fontForCanvas}`;\n        const rawText = String(texto ?? \"\");\n        const safeText = rawText.replace(/[ \\t]+$/gm, \"\");\n        const lines = safeText.split(/\\r?\\n/);\n        const maxLineWidth = Math.max(...lines.map((line)=>ctx.measureText(line).width), 20);\n        return {\n            width: maxLineWidth,\n            height: safeFontSize * safeLineHeight * Math.max(lines.length, 1)\n        };\n    };\n    const medirAnchoTextoKonva = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[medirAnchoTextoKonva]\": (objTexto, textoObjetivo)=>{\n            if (!objTexto || \"undefined\" === \"undefined\") return null;\n            try {\n                const safeText = String(textoObjetivo ?? \"\").replace(/[ \\t]+$/gm, \"\");\n                const safeFontFamily = _utils_fontManager__WEBPACK_IMPORTED_MODULE_16__.fontManager.isFontAvailable(objTexto.fontFamily) ? objTexto.fontFamily : \"sans-serif\";\n                const safeFontSize = Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n                const baseLineHeight = Number.isFinite(objTexto.lineHeight) && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n                const probe = new (konva__WEBPACK_IMPORTED_MODULE_34___default().Text)({\n                    text: safeText,\n                    fontSize: safeFontSize,\n                    fontFamily: safeFontFamily,\n                    fontWeight: objTexto.fontWeight || \"normal\",\n                    fontStyle: objTexto.fontStyle || \"normal\",\n                    lineHeight: baseLineHeight * 0.92,\n                    padding: 0,\n                    wrap: \"none\"\n                });\n                const width = Number(probe.getTextWidth?.() || 0);\n                probe.destroy();\n                return Number.isFinite(width) && width > 0 ? width : null;\n            } catch  {\n                return null;\n            }\n        }\n    }[\"CanvasEditor.useCallback[medirAnchoTextoKonva]\"], []);\n    const calcularXTextoCentrado = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[calcularXTextoCentrado]\": (objTexto, textoObjetivo)=>{\n            if (!objTexto || objTexto.tipo !== \"texto\") return Number.isFinite(objTexto?.x) ? objTexto.x : 0;\n            const baseLineHeight = typeof objTexto.lineHeight === \"number\" && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n            const previousMetrics = obtenerMetricasTexto(objTexto.texto, {\n                fontSize: objTexto.fontSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const nextMetrics = obtenerMetricasTexto(textoObjetivo, {\n                fontSize: objTexto.fontSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const previousWidthFromKonva = medirAnchoTextoKonva(objTexto, objTexto.texto);\n            const nextWidthFromKonva = medirAnchoTextoKonva(objTexto, textoObjetivo);\n            const previousWidth = Number.isFinite(previousWidthFromKonva) && previousWidthFromKonva > 0 ? previousWidthFromKonva : previousMetrics.width;\n            const nextWidth = Number.isFinite(nextWidthFromKonva) && nextWidthFromKonva > 0 ? nextWidthFromKonva : nextMetrics.width;\n            const currentX = Number.isFinite(objTexto.x) ? objTexto.x : 0;\n            const centerX = currentX + previousWidth / 2;\n            return centerX - nextWidth / 2;\n        }\n    }[\"CanvasEditor.useCallback[calcularXTextoCentrado]\"], [\n        obtenerMetricasTexto,\n        medirAnchoTextoKonva\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const handleClickOutside = {\n                \"CanvasEditor.useEffect.handleClickOutside\": (e)=>{\n                    if (!e.target.closest(\".menu-z-index\")) {\n                        setMostrarPanelZ(false);\n                    }\n                }\n            }[\"CanvasEditor.useEffect.handleClickOutside\"];\n            document.addEventListener(\"mousedown\", handleClickOutside);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickOutside)\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    const actualizarFondoSeccion = (id, nuevoFondo)=>{\n        setSecciones((prev)=>prev.map((s)=>s.id === id ? {\n                    ...s,\n                    fondo: nuevoFondo\n                } : s));\n    };\n    (0,_hooks_useKeyboardShortcuts__WEBPACK_IMPORTED_MODULE_15__[\"default\"])({\n        onDeshacer,\n        onRehacer,\n        onDuplicar,\n        onEliminar,\n        onDeseleccionar: {\n            \"CanvasEditor.useKeyboardShortcuts\": ()=>{\n                if (elementosSeleccionados.length > 0) {\n                    setElementosSeleccionados([]);\n                    setMostrarPanelZ(false);\n                    setMostrarSubmenuCapa(false);\n                    setMostrarSelectorFuente(false);\n                    setMostrarSelectorTamano(false);\n                    setHoverId(null);\n                }\n            }\n        }[\"CanvasEditor.useKeyboardShortcuts\"],\n        onCopiar,\n        onPegar,\n        onCambiarAlineacion,\n        isEditing: !!editing.id,\n        tieneSeleccion: elementosSeleccionados.length > 0\n    });\n    const cambiarColorFondoSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[cambiarColorFondoSeccion]\": (seccionId, nuevoColor)=>{\n            setSecciones({\n                \"CanvasEditor.useCallback[cambiarColorFondoSeccion]\": (prev)=>prev.map({\n                        \"CanvasEditor.useCallback[cambiarColorFondoSeccion]\": (s)=>{\n                            if (s.id !== seccionId) return s;\n                            return {\n                                ...s,\n                                fondo: nuevoColor\n                            };\n                        }\n                    }[\"CanvasEditor.useCallback[cambiarColorFondoSeccion]\"])\n            }[\"CanvasEditor.useCallback[cambiarColorFondoSeccion]\"]);\n        }\n    }[\"CanvasEditor.useCallback[cambiarColorFondoSeccion]\"], [\n        setSecciones\n    ]);\n    (0,_editor_window_useEditorWindowBridge__WEBPACK_IMPORTED_MODULE_41__[\"default\"])({\n        seccionesOrdenadas,\n        secciones,\n        seccionActivaId,\n        objetos,\n        altoCanvas,\n        calcularOffsetY: _utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY,\n        cambiarColorFondoSeccion,\n        onDeshacer,\n        onRehacer,\n        historialLength: historial.length,\n        futurosLength: futuros.length,\n        stageRef\n    });\n    const esSeccionPantallaById = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[esSeccionPantallaById]\": (seccionId)=>{\n            const s = seccionesOrdenadas.find({\n                \"CanvasEditor.useCallback[esSeccionPantallaById].s\": (x)=>x.id === seccionId\n            }[\"CanvasEditor.useCallback[esSeccionPantallaById].s\"]);\n            return s && normalizarAltoModo(s.altoModo) === \"pantalla\";\n        }\n    }[\"CanvasEditor.useCallback[esSeccionPantallaById]\"], [\n        seccionesOrdenadas\n    ]);\n    const altoCanvasDinamico = seccionesOrdenadas.reduce((acc, s)=>acc + s.altura, 0) || 800;\n    const abrirModalBorrarSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[abrirModalBorrarSeccion]\": (seccionId)=>{\n            if (!seccionId || isDeletingSection) return;\n            setDeleteSectionModal({\n                isOpen: true,\n                sectionId: seccionId\n            });\n        }\n    }[\"CanvasEditor.useCallback[abrirModalBorrarSeccion]\"], [\n        isDeletingSection\n    ]);\n    const cerrarModalBorrarSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[cerrarModalBorrarSeccion]\": ()=>{\n            if (isDeletingSection) return;\n            setDeleteSectionModal({\n                isOpen: false,\n                sectionId: null\n            });\n        }\n    }[\"CanvasEditor.useCallback[cerrarModalBorrarSeccion]\"], [\n        isDeletingSection\n    ]);\n    const confirmarBorrarSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[confirmarBorrarSeccion]\": async ()=>{\n            const seccionId = deleteSectionModal.sectionId;\n            if (!seccionId || isDeletingSection) return;\n            setIsDeletingSection(true);\n            try {\n                await (0,_utils_editorSecciones__WEBPACK_IMPORTED_MODULE_23__.borrarSeccion)({\n                    seccionId,\n                    secciones,\n                    objetos,\n                    slug,\n                    seccionActivaId,\n                    setSecciones,\n                    setObjetos,\n                    setSeccionActivaId\n                });\n                setDeleteSectionModal({\n                    isOpen: false,\n                    sectionId: null\n                });\n            } finally{\n                setIsDeletingSection(false);\n            }\n        }\n    }[\"CanvasEditor.useCallback[confirmarBorrarSeccion]\"], [\n        deleteSectionModal.sectionId,\n        isDeletingSection,\n        secciones,\n        objetos,\n        slug,\n        seccionActivaId,\n        setSecciones,\n        setObjetos,\n        setSeccionActivaId\n    ]);\n    // 3) Cada vez que el usuario selecciona una sección, actualizamos global y notificamos\n    const onSelectSeccion = (id)=>{\n        try {\n            // si ya tenés un setSeccionActivaId, llamalo acá:\n            setSeccionActivaId(id);\n            window._seccionActivaId = id;\n            window.dispatchEvent(new CustomEvent(\"seccion-activa\", {\n                detail: {\n                    id\n                }\n            }));\n        } catch (e) {\n            console.warn(\"No pude emitir seccion-activa:\", e);\n        }\n    };\n    // Ejemplo de uso: en el handler de click de la sección\n    // <Rect onClick={() => onSelectSeccion(seccion.id)} ... />\n    // ?? NUEVO HOOK PARA GUÍAS\n    const { guiaLineas, mostrarGuias, limpiarGuias, configurarDragEnd } = (0,_hooks_useGuiasCentrado__WEBPACK_IMPORTED_MODULE_31__[\"default\"])({\n        anchoCanvas: 800,\n        altoCanvas: altoCanvasDinamico,\n        // UX: guía de sección solo al centrar, con imán sutil.\n        margenSensibilidad: 8,\n        magnetRadius: 10,\n        sectionMagnetRadius: 6,\n        snapStrength: 0.8,\n        sectionSnapStrength: 1,\n        sectionLineTolerance: 0.75,\n        snapToEdges: true,\n        snapToCenters: true,\n        seccionesOrdenadas\n    });\n    // ?? Función para actualizar posición del botón SIN re-render\n    const { actualizarPosicionBotonOpciones } = (0,_components_editor_overlays_useOptionButtonPosition__WEBPACK_IMPORTED_MODULE_46__[\"default\"])({\n        botonOpcionesRef,\n        elementRefs,\n        elementosSeleccionados,\n        stageRef,\n        escalaVisual,\n        escalaActiva\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const onDragStartGlobal = {\n                \"CanvasEditor.useEffect.onDragStartGlobal\": ()=>{\n                    // limpiar hover/preselección inmediatamente para evitar \"flash\" visual\n                    (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)({\n                        \"CanvasEditor.useEffect.onDragStartGlobal\": ()=>{\n                            setHoverId(null);\n                            setElementosPreSeleccionados([]);\n                            setIsDragging(true);\n                        }\n                    }[\"CanvasEditor.useEffect.onDragStartGlobal\"]);\n                }\n            }[\"CanvasEditor.useEffect.onDragStartGlobal\"];\n            const onDragEndGlobal = {\n                \"CanvasEditor.useEffect.onDragEndGlobal\": ()=>{\n                // nada por ahora; si quisieras, podrías recalcular algo acá\n                }\n            }[\"CanvasEditor.useEffect.onDragEndGlobal\"];\n            window.addEventListener(\"dragging-start\", onDragStartGlobal);\n            window.addEventListener(\"dragging-end\", onDragEndGlobal);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    window.removeEventListener(\"dragging-start\", onDragStartGlobal);\n                    window.removeEventListener(\"dragging-end\", onDragEndGlobal);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    // ?? OPTIMIZACIÓN: Limpiar cache de intersección al cambiar selección\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            // Limpiar cache cuando cambia la selección\n            if (window._lineIntersectionCache) {\n                window._lineIntersectionCache = {};\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        elementosSeleccionados.length\n    ]);\n    // ?? OPTIMIZACIÓN: Forzar actualización de líneas después de drag grupal\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (window._grupoLider || elementosSeleccionados.length === 0) return;\n            // Solo correr esta optimización cuando acaba de finalizar un drag grupal.\n            const now = typeof performance !== \"undefined\" && typeof performance.now === \"function\" ? performance.now() : Date.now();\n            const recentlyEndedGroupDrag = Number.isFinite(window._skipUntil) && window._skipUntil > now;\n            if (!recentlyEndedGroupDrag) return;\n            const hayLineas = objetos.some({\n                \"CanvasEditor.useEffect.hayLineas\": (obj)=>elementosSeleccionados.includes(obj.id) && obj.tipo === 'forma' && obj.figura === 'line'\n            }[\"CanvasEditor.useEffect.hayLineas\"]);\n            if (!hayLineas) return;\n            const timer = setTimeout({\n                \"CanvasEditor.useEffect.timer\": ()=>{\n                    elementosSeleccionados.forEach({\n                        \"CanvasEditor.useEffect.timer\": (id)=>{\n                            const node = elementRefs.current[id];\n                            if (node && node.getLayer) {\n                                node.getLayer()?.batchDraw();\n                            }\n                        }\n                    }[\"CanvasEditor.useEffect.timer\"]);\n                }\n            }[\"CanvasEditor.useEffect.timer\"], 50);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>clearTimeout(timer)\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        elementosSeleccionados,\n        objetos\n    ]);\n    const detectarInterseccionLinea = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[detectarInterseccionLinea]\": ()=>{\n            return ({\n                \"CanvasEditor.useMemo[detectarInterseccionLinea]\": (lineObj, area, stage)=>{\n                    try {\n                        if (!lineObj || !area || !lineObj.points) return false;\n                        let points = lineObj.points;\n                        if (!Array.isArray(points) || points.length < 4) {\n                            points = [\n                                0,\n                                0,\n                                100,\n                                0\n                            ];\n                        }\n                        const puntosLimpios = [\n                            parseFloat(points[0]) || 0,\n                            parseFloat(points[1]) || 0,\n                            parseFloat(points[2]) || 100,\n                            parseFloat(points[3]) || 0\n                        ];\n                        // ?? USAR LA POSICIÓN DEL NODO REAL EN EL STAGE\n                        const node = window._elementRefs?.[lineObj.id];\n                        const lineX = node ? node.x() : lineObj.x || 0;\n                        const lineY = node ? node.y() : lineObj.y || 0;\n                        // Coordenadas absolutas de los puntos\n                        const startX = lineX + puntosLimpios[0];\n                        const startY = lineY + puntosLimpios[1];\n                        const endX = lineX + puntosLimpios[2];\n                        const endY = lineY + puntosLimpios[3];\n                        // ?? MÉTODO 1: Verificar si algún punto está dentro del área\n                        const startDentro = startX >= area.x && startX <= area.x + area.width && startY >= area.y && startY <= area.y + area.height;\n                        const endDentro = endX >= area.x && endX <= area.x + area.width && endY >= area.y && endY <= area.y + area.height;\n                        if (startDentro || endDentro) {\n                            return true;\n                        }\n                        // ?? MÉTODO 2: Verificar intersección línea-rectángulo\n                        const intersecta = lineIntersectsRect(startX, startY, endX, endY, area.x, area.y, area.x + area.width, area.y + area.height);\n                        if (intersecta) {\n                            return true;\n                        }\n                        return false;\n                    } catch (error) {\n                        return false;\n                    }\n                }\n            })[\"CanvasEditor.useMemo[detectarInterseccionLinea]\"];\n        }\n    }[\"CanvasEditor.useMemo[detectarInterseccionLinea]\"], []);\n    // Función auxiliar para verificar intersección línea-rectángulo\n    function lineIntersectsRect(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectBottom) {\n        // Verificar si la línea intersecta con alguno de los 4 lados del rectángulo\n        return lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectTop) || // Top\n        lineIntersectsLine(x1, y1, x2, y2, rectRight, rectTop, rectRight, rectBottom) || // Right\n        lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectBottom, rectRight, rectBottom) || // Bottom\n        lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectLeft, rectBottom) // Left\n        ;\n    }\n    // Función auxiliar para verificar intersección línea-línea\n    function lineIntersectsLine(x1, y1, x2, y2, x3, y3, x4, y4) {\n        const denom = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n        if (Math.abs(denom) < 0.0001) return false;\n        const t = ((x1 - x3) * (y3 - y4) - (y1 - y3) * (x3 - x4)) / denom;\n        const u = -((x1 - x2) * (y1 - y3) - (y1 - y2) * (x1 - x3)) / denom;\n        return t >= 0 && t <= 1 && u >= 0 && u <= 1;\n    }\n    // ?? Ajustar el transformer cuando cambia el texto inline\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!editing.id || !elementRefs.current[editing.id]) return;\n            const node = elementRefs.current[editing.id];\n            const objetoEnEdicion = objetos.find({\n                \"CanvasEditor.useEffect.objetoEnEdicion\": (o)=>o.id === editing.id\n            }[\"CanvasEditor.useEffect.objetoEnEdicion\"]);\n            if (!objetoEnEdicion) return;\n            const nodeClass = node.getClassName?.();\n            const beforeMetrics = obtenerMetricasNodoInline(node);\n            const editingValue = String(editing.value ?? \"\");\n            const shouldKeepCenterPreview = objetoEnEdicion.tipo === \"texto\" && !objetoEnEdicion.__groupAlign && !Number.isFinite(objetoEnEdicion.width) && objetoEnEdicion.__autoWidth !== false;\n            const expectedX = shouldKeepCenterPreview ? calcularXTextoCentrado(objetoEnEdicion, editingValue) : Number.isFinite(objetoEnEdicion.x) ? objetoEnEdicion.x : null;\n            inlineDebugLog(\"preview-effect-start\", {\n                id: editing.id,\n                valueLength: editingValue.length,\n                nodeClass,\n                objX: objetoEnEdicion.x ?? null,\n                objY: objetoEnEdicion.y ?? null,\n                shouldKeepCenterPreview,\n                expectedX,\n                beforeMetrics\n            });\n            // ?? Actualizar el transformer si está presente\n            const transformer = node.getStage()?.findOne('Transformer');\n            if (transformer && transformer.nodes && transformer.nodes().includes(node)) {\n                transformer.forceUpdate(); // Actualiza manualmente el transformer\n                transformer.getLayer()?.batchDraw(); // Redibuja\n                let transformerRect = null;\n                try {\n                    transformerRect = transformer.getClientRect({\n                        skipTransform: false,\n                        skipShadow: true,\n                        skipStroke: true\n                    });\n                } catch  {\n                    transformerRect = null;\n                }\n                inlineDebugLog(\"preview-transformer-updated\", {\n                    id: editing.id,\n                    transformerRect: transformerRect ? {\n                        x: transformerRect.x,\n                        y: transformerRect.y,\n                        width: transformerRect.width,\n                        height: transformerRect.height\n                    } : null\n                });\n            }\n            const afterMetrics = obtenerMetricasNodoInline(node);\n            const afterX = typeof node.x === \"function\" ? node.x() : afterMetrics?.x ?? null;\n            inlineDebugLog(\"preview-props-sync\", {\n                id: editing.id,\n                valueLength: editingValue.length,\n                expectedX,\n                afterX,\n                deltaX: Number.isFinite(afterX) && Number.isFinite(expectedX) ? afterX - expectedX : null,\n                beforeMetrics,\n                afterMetrics\n            });\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        editing.value,\n        objetos,\n        obtenerMetricasNodoInline,\n        calcularXTextoCentrado\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const pending = inlineCommitDebugRef.current;\n            if (!pending?.id) return;\n            if (editing.id) return;\n            const finalObj = objetos.find({\n                \"CanvasEditor.useEffect.finalObj\": (o)=>o.id === pending.id\n            }[\"CanvasEditor.useEffect.finalObj\"]);\n            const finalNode = elementRefs.current[pending.id];\n            const finalNodeMetrics = obtenerMetricasNodoInline(finalNode);\n            const finalX = Number.isFinite(finalObj?.x) ? finalObj.x : null;\n            const deltaFinalVsExpected = Number.isFinite(finalX) && Number.isFinite(pending.expectedX) ? finalX - pending.expectedX : null;\n            inlineDebugLog(\"finish-post-commit\", {\n                ...pending,\n                finalX,\n                deltaFinalVsExpected,\n                finalNodeMetrics\n            });\n            inlineCommitDebugRef.current = {\n                id: null\n            };\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        objetos,\n        obtenerMetricasNodoInline\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            window._elementosSeleccionados = elementosSeleccionados;\n            window._objetosActuales = objetos;\n            window._elementRefs = elementRefs.current;\n            window._seccionesOrdenadas = [\n                ...secciones\n            ].sort({\n                \"CanvasEditor.useEffect\": (a, b)=>a.orden - b.orden\n            }[\"CanvasEditor.useEffect\"]);\n            window._altoCanvas = altoCanvas;\n            window.dispatchEvent(new CustomEvent(\"editor-selection-change\", {\n                detail: {\n                    ids: [\n                        ...elementosSeleccionados\n                    ],\n                    activeSectionId: seccionActivaId || null\n                }\n            }));\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        elementosSeleccionados,\n        objetos,\n        secciones,\n        altoCanvas,\n        seccionActivaId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            window.dispatchEvent(new CustomEvent(\"seccion-activa\", {\n                detail: {\n                    id: seccionActivaId || null\n                }\n            }));\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        seccionActivaId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return undefined;\n            window.setHoverIdGlobal = setHoverId;\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    if (window.setHoverIdGlobal === setHoverId) {\n                        delete window.setHoverIdGlobal;\n                    }\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!hoverId) return;\n            const exists = objetos.some({\n                \"CanvasEditor.useEffect.exists\": (o)=>o.id === hoverId\n            }[\"CanvasEditor.useEffect.exists\"]);\n            if (!exists) setHoverId(null);\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        hoverId,\n        objetos\n    ]);\n    // Cleanup del sistema imperativo\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    imperativeObjects.cleanup();\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    const stageGestures = (0,_editor_mobile_useStageGestures__WEBPACK_IMPORTED_MODULE_45__[\"default\"])({\n        secciones,\n        objetos,\n        elementRefs,\n        dragStartPos,\n        hasDragged,\n        seleccionActiva,\n        inicioSeleccion,\n        areaSeleccion,\n        detectarInterseccionLinea,\n        setElementosSeleccionados,\n        setElementosPreSeleccionados,\n        setSeleccionActiva,\n        setInicioSeleccion,\n        setAreaSeleccion,\n        onSelectSeccion,\n        cerrarMenusFlotantes\n    });\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex justify-center\",\n        style: {\n            // ? Dejamos que el scroll lo maneje el <main> del DashboardLayout (un solo scroll)\n            marginTop: 0,\n            overflowX: \"hidden\",\n            // ? UX mobile: permitir scroll vertical natural alrededor del canvas\n            touchAction: \"pan-y\",\n            WebkitOverflowScrolling: \"touch\",\n            // ? espacio para que no “choque” con header / barras\n            paddingTop: 12,\n            paddingBottom: \"calc(96px + env(safe-area-inset-bottom, 0px))\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: contenedorRef,\n                style: {\n                    width: \"100%\",\n                    maxWidth: \"1200px\",\n                    backgroundColor: \"#f5f5f5\",\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    paddingTop: \"20px\",\n                    paddingBottom: \"calc(40px + env(safe-area-inset-bottom, 0px))\"\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        transform: `scale(${escalaVisual})`,\n                        transformOrigin: 'top center',\n                        width: zoom === 0.8 ? \"1220px\" : \"1000px\",\n                        position: \"relative\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative\",\n                        style: {\n                            width: zoom === 0.8 ? \"1220px\" : \"1000px\",\n                            display: \"flex\",\n                            justifyContent: \"center\"\n                        },\n                        children: [\n                            seccionActivaId && seccionesOrdenadas.map((seccion, index)=>{\n                                if (seccion.id !== seccionActivaId) return null;\n                                const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                const esPrimera = index === 0;\n                                const esUltima = index === seccionesOrdenadas.length - 1;\n                                const estaAnimando = seccionesAnimando.includes(seccion.id);\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute flex flex-col gap-2\",\n                                    style: {\n                                        top: isMobile ? Math.max(8, offsetY + 8) : offsetY + 20,\n                                        right: isMobile ? 8 : -150,\n                                        zIndex: 25,\n                                        maxWidth: isMobile ? 190 : 260\n                                    },\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>(0,_utils_editorSecciones__WEBPACK_IMPORTED_MODULE_23__.moverSeccion)({\n                                                    seccionId: seccion.id,\n                                                    direccion: \"subir\",\n                                                    secciones,\n                                                    slug,\n                                                    setSecciones,\n                                                    setSeccionesAnimando\n                                                }),\n                                            disabled: esPrimera || estaAnimando,\n                                            className: `px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200 ${esPrimera || estaAnimando ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-purple-600 text-white hover:bg-purple-700 hover:scale-105 shadow-md hover:shadow-lg'} ${estaAnimando ? 'animate-pulse shadow-xl' : ''}`,\n                                            title: esPrimera ? 'Ya es la primera sección' : 'Subir sección',\n                                            children: \"? Subir secci\\xf3n\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 1945,\n                                            columnNumber: 19\n                                        }, this),\n                                        !loadingClaims && esAdmin && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>(0,_utils_plantillas__WEBPACK_IMPORTED_MODULE_25__.guardarSeccionComoPlantilla)({\n                                                    seccionId: seccion.id,\n                                                    secciones,\n                                                    objetos,\n                                                    refrescarPlantillasDeSeccion\n                                                }),\n                                            disabled: estaAnimando,\n                                            className: `px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200 ${estaAnimando ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-green-600 text-white hover:bg-green-700 hover:scale-105 shadow-md hover:shadow-lg'} ${estaAnimando ? 'animate-pulse shadow-xl' : ''}`,\n                                            title: \"Guardar esta secci\\xf3n como plantilla\",\n                                            children: \"?? Plantilla\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 1968,\n                                            columnNumber: 21\n                                        }, this),\n                                        (()=>{\n                                            const modoSeccion = normalizarAltoModo(seccion.altoModo);\n                                            const esPantalla = modoSeccion === \"pantalla\";\n                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-2\",\n                                                children: [\n                                                    seccion.fondoTipo === \"imagen\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>(0,_utils_accionesFondo__WEBPACK_IMPORTED_MODULE_22__.desanclarImagenDeFondo)({\n                                                                seccionId: seccion.id,\n                                                                secciones,\n                                                                objetos,\n                                                                setSecciones,\n                                                                setObjetos,\n                                                                setElementosSeleccionados\n                                                            }),\n                                                        className: \"px-3 py-2 rounded-lg text-xs font-semibold bg-white border border-gray-200 hover:bg-gray-50 shadow-sm\",\n                                                        title: \"Desanclar imagen de fondo\",\n                                                        children: \"?? Desanclar fondo\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 1997,\n                                                        columnNumber: 27\n                                                    }, this),\n                                                    seccion.fondoTipo === \"imagen\" && isMobile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>{\n                                                            setMobileBackgroundEditSectionId((prev)=>prev === seccion.id ? null : seccion.id);\n                                                        },\n                                                        className: `px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200 ${mobileBackgroundEditSectionId === seccion.id ? \"bg-indigo-600 text-white hover:bg-indigo-700\" : \"bg-white text-gray-800 border border-gray-200 hover:bg-gray-50\"}`,\n                                                        title: \"Modo mover fondo en mobile\",\n                                                        children: mobileBackgroundEditSectionId === seccion.id ? \"Mover fondo: ON\" : \"Mover fondo\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2016,\n                                                        columnNumber: 27\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>togglePantallaCompletaSeccion(seccion.id),\n                                                        className: `px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200 ${esPantalla ? \"bg-purple-600 text-white hover:bg-purple-700 shadow-md\" : \"bg-white text-gray-800 border border-gray-200 hover:bg-gray-50 shadow-sm\"}`,\n                                                        title: \"Hace que esta secci\\xf3n sea de pantalla completa (100vh) al publicar\",\n                                                        children: esPantalla ? \"?? Pantalla: ON\" : \"?? Pantalla: OFF\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2036,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 1994,\n                                                columnNumber: 23\n                                            }, this);\n                                        })(),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>abrirModalBorrarSeccion(seccion.id),\n                                            disabled: estaAnimando || isDeletingSection,\n                                            className: `px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200 ${estaAnimando || isDeletingSection ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-red-600 text-white hover:bg-red-700 hover:scale-105 shadow-md hover:shadow-lg'} ${estaAnimando || isDeletingSection ? 'animate-pulse shadow-xl' : ''}`,\n                                            title: \"Borrar esta secci\\xf3n y todos sus elementos\",\n                                            children: \"??? Borrar secci\\xf3n\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2051,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>(0,_utils_editorSecciones__WEBPACK_IMPORTED_MODULE_23__.moverSeccion)({\n                                                    seccionId: seccion.id,\n                                                    direccion: \"bajar\",\n                                                    secciones,\n                                                    slug,\n                                                    setSecciones,\n                                                    setSeccionesAnimando\n                                                }),\n                                            disabled: esUltima || estaAnimando,\n                                            className: `px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200 ${esUltima || estaAnimando ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-purple-600 text-white hover:bg-purple-700 hover:scale-105 shadow-md hover:shadow-lg'} ${estaAnimando ? 'animate-pulse shadow-xl' : ''}`,\n                                            title: esUltima ? 'Ya es la última sección' : 'Bajar sección',\n                                            children: \"? Bajar secci\\xf3n\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2065,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleCrearSeccion,\n                                            disabled: estaAnimando,\n                                            className: `px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200\n    ${estaAnimando ? 'bg-gray-200 text-gray-400 cursor-not-allowed animate-pulse shadow-xl' : 'bg-purple-600 text-white hover:bg-purple-700 hover:scale-105 shadow-md hover:shadow-lg'}`,\n                                            title: \"A\\xf1adir una nueva secci\\xf3n debajo\",\n                                            children: \"A\\xf1adir secci\\xf3n\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2087,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, `orden-${seccion.id}`, true, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                    lineNumber: 1934,\n                                    columnNumber: 17\n                                }, this);\n                            }),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                style: {\n                                    position: \"relative\",\n                                    width: 800,\n                                    height: altoCanvasDinamico\n                                },\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Stage, {\n                                    ref: stageRef,\n                                    width: 800,\n                                    height: altoCanvasDinamico,\n                                    perfectDrawEnabled: false,\n                                    listening: true,\n                                    imageSmoothingEnabled: false,\n                                    preventDefault: false,\n                                    hitGraphEnabled: true,\n                                    style: {\n                                        background: \"white\",\n                                        overflow: \"visible\",\n                                        position: \"relative\",\n                                        boxShadow: \"0 4px 20px rgba(0,0,0,0.5)\"\n                                    },\n                                    onMouseDown: stageGestures.onMouseDown,\n                                    onTouchStart: stageGestures.onTouchStart,\n                                    onTouchMove: stageGestures.onTouchMove,\n                                    onTouchEnd: stageGestures.onTouchEnd,\n                                    onMouseMove: stageGestures.onMouseMove,\n                                    onMouseUp: stageGestures.onMouseUp,\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_47__[\"default\"], {\n                                            children: [\n                                                seccionesOrdenadas.flatMap((seccion, index)=>{\n                                                    const alturaPx = seccion.altura;\n                                                    const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                    const esActiva = seccion.id === seccionActivaId;\n                                                    const estaAnimando = seccionesAnimando.includes(seccion.id);\n                                                    if (estaAnimando) {\n                                                        console.log(\"?? SECCIÓN ANIMANDO:\", seccion.id);\n                                                    }\n                                                    const elementos = [\n                                                        // Fondo de sección - puede ser color o imagen\n                                                        seccion.fondoTipo === \"imagen\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_editor_FondoSeccion__WEBPACK_IMPORTED_MODULE_27__[\"default\"], {\n                                                            seccion: seccion,\n                                                            offsetY: offsetY,\n                                                            alturaPx: alturaPx,\n                                                            onSelect: ()=>onSelectSeccion(seccion.id),\n                                                            onUpdateFondoOffset: actualizarOffsetFondo,\n                                                            isMobile: isMobile,\n                                                            mobileBackgroundEditEnabled: mobileBackgroundEditSectionId === seccion.id\n                                                        }, `fondo-${seccion.id}`, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2158,\n                                                            columnNumber: 25\n                                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                            id: seccion.id,\n                                                            x: 0,\n                                                            y: offsetY,\n                                                            width: 800,\n                                                            height: alturaPx,\n                                                            fill: seccion.fondo || \"#ffffff\",\n                                                            stroke: \"transparent\",\n                                                            strokeWidth: 0,\n                                                            listening: true,\n                                                            onClick: ()=>onSelectSeccion(seccion.id),\n                                                            onTap: ()=>onSelectSeccion(seccion.id)\n                                                        }, `seccion-${seccion.id}`, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2169,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    ];\n                                                    return elementos;\n                                                }),\n                                                seccionActivaId && seccionesOrdenadas.map((seccion, index)=>{\n                                                    if (seccion.id !== seccionActivaId) return null;\n                                                    const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                    const controlY = offsetY + seccion.altura - 5; // 5px antes del final\n                                                    const modoSeccion = normalizarAltoModo(seccion.altoModo);\n                                                    const permiteResizeAltura = modoSeccion !== \"pantalla\";\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                        name: \"ui\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Line, {\n                                                                name: \"ui\",\n                                                                points: [\n                                                                    50,\n                                                                    controlY,\n                                                                    750,\n                                                                    controlY\n                                                                ],\n                                                                stroke: \"#773dbe\",\n                                                                strokeWidth: 2,\n                                                                dash: [\n                                                                    5,\n                                                                    5\n                                                                ],\n                                                                listening: false\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 2205,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                                x: 400,\n                                                                y: controlY,\n                                                                listening: permiteResizeAltura,\n                                                                opacity: permiteResizeAltura ? 1 : 0.25,\n                                                                onMouseDown: permiteResizeAltura ? (e)=>iniciarControlAltura(e, seccion.id) : undefined,\n                                                                onTouchStart: permiteResizeAltura ? (e)=>iniciarControlAltura(e, seccion.id) : undefined,\n                                                                onPointerDown: permiteResizeAltura ? (e)=>iniciarControlAltura(e, seccion.id) : undefined,\n                                                                onMouseEnter: ()=>{\n                                                                    if (!controlandoAltura && permiteResizeAltura) setGlobalCursor(\"ns-resize\", stageRef);\n                                                                },\n                                                                onMouseLeave: ()=>{\n                                                                    if (!controlandoAltura && permiteResizeAltura) clearGlobalCursor(stageRef);\n                                                                },\n                                                                draggable: false,\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: -45,\n                                                                        y: -22,\n                                                                        width: 90,\n                                                                        height: 44,\n                                                                        fill: \"transparent\",\n                                                                        listening: true\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2234,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: -25,\n                                                                        y: -6,\n                                                                        width: 50,\n                                                                        height: 12,\n                                                                        fill: controlandoAltura === seccion.id ? \"#773dbe\" : \"rgba(119, 61, 190, 0.9)\",\n                                                                        cornerRadius: 6,\n                                                                        shadowColor: \"rgba(0,0,0,0.3)\",\n                                                                        shadowBlur: controlandoAltura === seccion.id ? 8 : 6,\n                                                                        shadowOffset: {\n                                                                            x: 0,\n                                                                            y: controlandoAltura === seccion.id ? 4 : 3\n                                                                        },\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2244,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    controlandoAltura === seccion.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: -30,\n                                                                        y: -8,\n                                                                        width: 60,\n                                                                        height: 16,\n                                                                        fill: \"transparent\",\n                                                                        stroke: \"#773dbe\",\n                                                                        strokeWidth: 2,\n                                                                        cornerRadius: 8,\n                                                                        opacity: 0.6,\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2259,\n                                                                        columnNumber: 29\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                                                                        x: -6,\n                                                                        y: -3,\n                                                                        text: \"??\",\n                                                                        fontSize: 10,\n                                                                        fill: \"white\",\n                                                                        fontFamily: \"Arial\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2274,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: -15,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2285,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: -10,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2286,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: 10,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2287,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: 15,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2288,\n                                                                        columnNumber: 27\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 2215,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                x: 755,\n                                                                y: controlY - 10,\n                                                                width: 40,\n                                                                height: 20,\n                                                                fill: \"rgba(119, 61, 190, 0.1)\",\n                                                                stroke: \"rgba(119, 61, 190, 0.3)\",\n                                                                strokeWidth: 1,\n                                                                cornerRadius: 4,\n                                                                listening: false\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 2293,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                                                                x: 760,\n                                                                y: controlY - 6,\n                                                                text: `${Math.round(seccion.altura)}px`,\n                                                                fontSize: 11,\n                                                                fill: \"#773dbe\",\n                                                                fontFamily: \"Arial\",\n                                                                fontWeight: \"bold\",\n                                                                listening: false\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 2306,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        ]\n                                                    }, `control-altura-${seccion.id}`, true, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2203,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                }),\n                                                controlandoAltura && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                    name: \"ui\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                            x: 0,\n                                                            y: 0,\n                                                            width: 800,\n                                                            height: altoCanvasDinamico,\n                                                            fill: \"rgba(119, 61, 190, 0.05)\",\n                                                            listening: false\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2324,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        seccionesOrdenadas.map((seccion, index)=>{\n                                                            const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                            const modoSeccion = normalizarAltoModo(seccion.altoModo);\n                                                            const permiteResizeAltura = modoSeccion !== \"pantalla\";\n                                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: 0,\n                                                                        y: offsetY,\n                                                                        width: 800,\n                                                                        height: seccion.altura,\n                                                                        fill: seccion.fondo || \"transparent\",\n                                                                        onClick: ()=>onSelectSeccion(seccion.id)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2343,\n                                                                        columnNumber: 29\n                                                                    }, this),\n                                                                    seccion.id === controlandoAltura && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: 0,\n                                                                        y: offsetY,\n                                                                        width: 800,\n                                                                        height: seccion.altura,\n                                                                        fill: \"transparent\",\n                                                                        stroke: \"#773dbe\",\n                                                                        strokeWidth: 3,\n                                                                        dash: [\n                                                                            8,\n                                                                            4\n                                                                        ],\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 2354,\n                                                                        columnNumber: 31\n                                                                    }, this)\n                                                                ]\n                                                            }, seccion.id, true, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 2341,\n                                                                columnNumber: 27\n                                                            }, this);\n                                                        })\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 2322,\n                                                    columnNumber: 21\n                                                }, this),\n                                                objetos.map((obj, i)=>{\n                                                    // ?? Determinar si está en modo edición\n                                                    const isInEditMode = editing.id === obj.id && elementosSeleccionados[0] === obj.id;\n                                                    // ??? Caso especial: la galería la renderizamos acá (no usa ElementoCanvas)\n                                                    if (obj.tipo === \"galeria\") {\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_GaleriaKonva__WEBPACK_IMPORTED_MODULE_26__[\"default\"], {\n                                                            obj: obj,\n                                                            registerRef: registerRef,\n                                                            onHover: setHoverId,\n                                                            isSelected: elementosSeleccionados.includes(obj.id),\n                                                            celdaGaleriaActiva: celdaGaleriaActiva,\n                                                            onPickCell: (info)=>setCeldaGaleriaActiva(info),\n                                                            seccionesOrdenadas: seccionesOrdenadas,\n                                                            altoCanvas: altoCanvas,\n                                                            onSelect: (id, e)=>{\n                                                                e?.evt && (e.evt.cancelBubble = true);\n                                                                setElementosSeleccionados([\n                                                                    id\n                                                                ]);\n                                                            },\n                                                            onDragMovePersonalizado: (pos, id)=>{\n                                                                window._isDragging = true;\n                                                                if (!window._grupoLider) {\n                                                                    mostrarGuias(pos, id, objetos, elementRefs);\n                                                                }\n                                                                requestAnimationFrame(()=>{\n                                                                    if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                        actualizarPosicionBotonOpciones();\n                                                                    }\n                                                                });\n                                                            },\n                                                            onDragStartPersonalizado: (dragId = obj.id)=>{\n                                                                if (!elementosSeleccionados.includes(dragId)) {\n                                                                    setElementosSeleccionados([\n                                                                        dragId\n                                                                    ]);\n                                                                }\n                                                                setHoverId(null);\n                                                                setIsDragging(true);\n                                                            },\n                                                            onDragEndPersonalizado: ()=>{\n                                                                setIsDragging(false);\n                                                                limpiarGuias();\n                                                                if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                    actualizarPosicionBotonOpciones();\n                                                                }\n                                                            },\n                                                            onChange: (id, nuevo)=>{\n                                                                setObjetos((prev)=>{\n                                                                    const i = prev.findIndex((o)=>o.id === id);\n                                                                    if (i === -1) return prev;\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    updated[i] = {\n                                                                        ...updated[i],\n                                                                        ...nuevo\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                            }\n                                                        }, obj.id, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2383,\n                                                            columnNumber: 25\n                                                        }, this);\n                                                    }\n                                                    if (obj.tipo === \"countdown\") {\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_countdown_CountdownKonva__WEBPACK_IMPORTED_MODULE_30__[\"default\"], {\n                                                            obj: obj,\n                                                            registerRef: registerRef,\n                                                            onHover: setHoverId,\n                                                            isSelected: elementosSeleccionados.includes(obj.id),\n                                                            seccionesOrdenadas: seccionesOrdenadas,\n                                                            altoCanvas: altoCanvas,\n                                                            // ? selección\n                                                            onSelect: (id, e)=>{\n                                                                e?.evt && (e.evt.cancelBubble = true);\n                                                                setElementosSeleccionados([\n                                                                    id\n                                                                ]);\n                                                            },\n                                                            // ? PREVIEW liviano (no tocar estado del objeto para que no haya lag)\n                                                            onDragStartPersonalizado: (dragId = obj.id)=>{\n                                                                if (!elementosSeleccionados.includes(dragId)) {\n                                                                    setElementosSeleccionados([\n                                                                        dragId\n                                                                    ]);\n                                                                }\n                                                                setHoverId(null);\n                                                                setIsDragging(true);\n                                                            },\n                                                            onDragMovePersonalizado: (pos, id)=>{\n                                                                if (!window._grupoLider) {\n                                                                    mostrarGuias(pos, id, objetos, elementRefs);\n                                                                }\n                                                                requestAnimationFrame(()=>{\n                                                                    if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                        actualizarPosicionBotonOpciones();\n                                                                    }\n                                                                });\n                                                            },\n                                                            // ? FIN de drag: limpiar guías / UI auxiliar\n                                                            onDragEndPersonalizado: ()=>{\n                                                                setIsDragging(false);\n                                                                limpiarGuias();\n                                                                if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                    actualizarPosicionBotonOpciones();\n                                                                }\n                                                            },\n                                                            // ? refs para el motor de drag\n                                                            dragStartPos: dragStartPos,\n                                                            hasDragged: hasDragged,\n                                                            // ? ¡Clave! Al finalizar, tratamos x/y absolutas como en ElementoCanvas:\n                                                            onChange: (id, cambios)=>{\n                                                                setObjetos((prev)=>{\n                                                                    const i = prev.findIndex((o)=>o.id === id);\n                                                                    if (i === -1) return prev;\n                                                                    const objOriginal = prev[i];\n                                                                    // ?? Si no es final de drag, mergeamos sin más (no tocar coords)\n                                                                    if (!cambios.finalizoDrag) {\n                                                                        const updated = [\n                                                                            ...prev\n                                                                        ];\n                                                                        updated[i] = {\n                                                                            ...updated[i],\n                                                                            ...cambios\n                                                                        };\n                                                                        return updated;\n                                                                    }\n                                                                    // ?? Final de drag: 'cambios.y' viene ABSOLUTA (Stage coords)\n                                                                    const { nuevaSeccion, coordenadasAjustadas } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.determinarNuevaSeccion)(cambios.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                    let next = {\n                                                                        ...cambios\n                                                                    };\n                                                                    delete next.finalizoDrag;\n                                                                    if (nuevaSeccion) {\n                                                                        next = {\n                                                                            ...next,\n                                                                            ...coordenadasAjustadas,\n                                                                            seccionId: nuevaSeccion\n                                                                        };\n                                                                    } else {\n                                                                        // convertir y absoluta ? y relativa a la sección actual\n                                                                        next.y = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.convertirAbsARel)(cambios.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                    }\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    updated[i] = {\n                                                                        ...updated[i],\n                                                                        ...next\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                            }\n                                                        }, obj.id, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2439,\n                                                            columnNumber: 25\n                                                        }, this);\n                                                    }\n                                                    const objPreview = editing.id === obj.id && obj.tipo === \"texto\" ? (()=>{\n                                                        const textoPreview = String(editing.value ?? \"\");\n                                                        const previewObj = {\n                                                            ...obj,\n                                                            texto: textoPreview\n                                                        };\n                                                        const shouldKeepCenterPreview = !obj.__groupAlign && !Number.isFinite(obj.width) && obj.__autoWidth !== false;\n                                                        if (shouldKeepCenterPreview) {\n                                                            const previewX = calcularXTextoCentrado(obj, textoPreview);\n                                                            if (Number.isFinite(previewX)) {\n                                                                previewObj.x = previewX;\n                                                            }\n                                                        }\n                                                        return previewObj;\n                                                    })() : obj;\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ElementoCanvas__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                        obj: {\n                                                            ...objPreview,\n                                                            // ?? yLocal: en sección pantalla usamos yNorm * 500\n                                                            // fallback legacy: si no hay yNorm, usamos obj.y\n                                                            y: (()=>{\n                                                                const idxSec = seccionesOrdenadas.findIndex((s)=>s.id === objPreview.seccionId);\n                                                                const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY)(seccionesOrdenadas, idxSec);\n                                                                const yLocal = esSeccionPantallaById(objPreview.seccionId) ? Number.isFinite(objPreview.yNorm) ? objPreview.yNorm * ALTURA_PANTALLA_EDITOR : objPreview.y : objPreview.y;\n                                                                return yLocal + offsetY;\n                                                            })()\n                                                        },\n                                                        anchoCanvas: 800,\n                                                        isSelected: !isInEditMode && elementosSeleccionados.includes(obj.id),\n                                                        preSeleccionado: !isInEditMode && elementosPreSeleccionados.includes(obj.id),\n                                                        isInEditMode: isInEditMode,\n                                                        onHover: isInEditMode ? null : setHoverId,\n                                                        registerRef: registerRef,\n                                                        onStartTextEdit: isInEditMode ? null : (id, texto)=>{\n                                                            const node = elementRefs.current[id];\n                                                            const nodeMetrics = obtenerMetricasNodoInline(node);\n                                                            const previousCurrentEditingId = window._currentEditingId ?? null;\n                                                            setInlineOverlayMountedId(null);\n                                                            captureInlineSnapshot(\"enter: pre-start\", {\n                                                                id,\n                                                                previousId: previousCurrentEditingId,\n                                                                textoLength: String(texto ?? \"\").length\n                                                            });\n                                                            window._currentEditingId = id;\n                                                            inlineEditPreviewRef.current = {\n                                                                id: null,\n                                                                centerX: null\n                                                            };\n                                                            inlineDebugLog(\"start-inline-edit\", {\n                                                                id,\n                                                                textoLength: String(texto ?? \"\").length,\n                                                                objectX: obj?.x ?? null,\n                                                                objectY: obj?.y ?? null,\n                                                                previousCurrentEditingId,\n                                                                nextCurrentEditingId: window._currentEditingId,\n                                                                nodeMetrics\n                                                            });\n                                                            startEdit(id, texto);\n                                                            node?.draggable(false);\n                                                            node?.getLayer?.()?.batchDraw?.();\n                                                            captureInlineSnapshot(\"enter: after-start-sync\", {\n                                                                id,\n                                                                previousId: previousCurrentEditingId,\n                                                                nextCurrentEditingId: window._currentEditingId ?? null\n                                                            });\n                                                        },\n                                                        editingId: editing.id,\n                                                        inlineOverlayMountedId: inlineOverlayMountedId,\n                                                        inlineVisibilityMode: inlineDebugAB.visibilitySource,\n                                                        finishInlineEdit: finishEdit,\n                                                        onSelect: isInEditMode ? null : (id, obj, e)=>{\n                                                            console.log(\"?? [CANVAS EDITOR] onSelect disparado:\", {\n                                                                id,\n                                                                tipo: obj?.tipo,\n                                                                figura: obj?.figura,\n                                                                shiftKey: e?.evt?.shiftKey,\n                                                                seleccionActual: elementosSeleccionados\n                                                            });\n                                                            if (obj.tipo === \"rsvp-boton\") {\n                                                                console.log(\"?? Click en botón RSVP\");\n                                                                return;\n                                                            }\n                                                            if (editing.id && editing.id !== id) {\n                                                                finishEdit();\n                                                            }\n                                                            e?.evt && (e.evt.cancelBubble = true);\n                                                            const esShift = e?.evt?.shiftKey;\n                                                            setElementosSeleccionados((prev)=>{\n                                                                if (esShift) {\n                                                                    console.log(\"? [CANVAS EDITOR] Modo Shift: agregando/quitando elemento\");\n                                                                    if (prev.includes(id)) {\n                                                                        const nueva = prev.filter((x)=>x !== id);\n                                                                        console.log(\"? [CANVAS EDITOR] Elemento removido. Nueva selección:\", nueva);\n                                                                        return nueva;\n                                                                    } else {\n                                                                        const nueva = [\n                                                                            ...prev,\n                                                                            id\n                                                                        ];\n                                                                        return nueva;\n                                                                    }\n                                                                } else {\n                                                                    return [\n                                                                        id\n                                                                    ];\n                                                                }\n                                                            });\n                                                        },\n                                                        onChange: (id, nuevo)=>{\n                                                            // ?? NUEVO: Manejar preview inmediato de drag grupal\n                                                            if (nuevo.isDragPreview) {\n                                                                setObjetos((prev)=>{\n                                                                    const index = prev.findIndex((o)=>o.id === id);\n                                                                    if (index === -1) return prev;\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    const { isDragPreview, skipHistorial, ...cleanNuevo } = nuevo;\n                                                                    updated[index] = {\n                                                                        ...updated[index],\n                                                                        ...cleanNuevo\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                                return;\n                                                            }\n                                                            // ?? MANEJAR SOLO batch update final de drag grupal\n                                                            if (nuevo.isBatchUpdateFinal && id === 'BATCH_UPDATE_GROUP_FINAL') {\n                                                                const { elementos, dragInicial, deltaX, deltaY } = nuevo;\n                                                                setObjetos((prev)=>{\n                                                                    return prev.map((objeto)=>{\n                                                                        if (elementos.includes(objeto.id)) {\n                                                                            if (dragInicial && dragInicial[objeto.id]) {\n                                                                                const posInicial = dragInicial[objeto.id];\n                                                                                return {\n                                                                                    ...objeto,\n                                                                                    x: posInicial.x + deltaX,\n                                                                                    y: posInicial.y + deltaY\n                                                                                };\n                                                                            }\n                                                                        }\n                                                                        return objeto;\n                                                                    });\n                                                                });\n                                                                return;\n                                                            }\n                                                            // ?? NO procesar si viene del Transform\n                                                            if (nuevo.fromTransform) {\n                                                                return;\n                                                            }\n                                                            const objOriginal = objetos.find((o)=>o.id === id);\n                                                            if (!objOriginal) return;\n                                                            // ?? Para drag final, procesar inmediatamente\n                                                            if (nuevo.finalizoDrag) {\n                                                                const { nuevaSeccion, coordenadasAjustadas } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.determinarNuevaSeccion)(nuevo.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                let coordenadasFinales = {\n                                                                    ...nuevo\n                                                                };\n                                                                delete coordenadasFinales.finalizoDrag;\n                                                                if (nuevaSeccion) {\n                                                                    coordenadasFinales = {\n                                                                        ...coordenadasFinales,\n                                                                        ...coordenadasAjustadas,\n                                                                        seccionId: nuevaSeccion\n                                                                    };\n                                                                } else {\n                                                                    coordenadasFinales.y = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.convertirAbsARel)(nuevo.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                }\n                                                                // 1) Determinar sección final\n                                                                const seccionFinalId = coordenadasFinales.seccionId || objOriginal.seccionId;\n                                                                // 2) Obtener yRelPx (y relativa dentro de la sección en px)\n                                                                let yRelPx;\n                                                                if (nuevaSeccion) {\n                                                                    // coordenadasAjustadas normalmente ya trae y relativa\n                                                                    yRelPx = Number.isFinite(coordenadasFinales.y) ? coordenadasFinales.y : 0;\n                                                                } else {\n                                                                    // si no cambió de sección, convertimos desde y absoluta\n                                                                    yRelPx = Number.isFinite(coordenadasFinales.y) ? coordenadasFinales.y : 0;\n                                                                }\n                                                                // 3) Aplicar política pantalla: guardar yNorm\n                                                                if (esSeccionPantallaById(seccionFinalId)) {\n                                                                    const yNorm = Math.max(0, Math.min(1, yRelPx / ALTURA_PANTALLA_EDITOR));\n                                                                    coordenadasFinales.yNorm = yNorm;\n                                                                    delete coordenadasFinales.y; // ? clave: evitamos mezclar sistemas\n                                                                } else {\n                                                                    // fijo: guardar y en px\n                                                                    coordenadasFinales.y = yRelPx;\n                                                                    delete coordenadasFinales.yNorm;\n                                                                }\n                                                                // Actualizar inmediatamente\n                                                                setObjetos((prev)=>{\n                                                                    const index = prev.findIndex((o)=>o.id === id);\n                                                                    if (index === -1) return prev;\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    updated[index] = {\n                                                                        ...updated[index],\n                                                                        ...coordenadasFinales\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                                return;\n                                                            }\n                                                            // ?? Para otros cambios (transform, etc.)\n                                                            const hayDiferencias = Object.keys(nuevo).some((key)=>{\n                                                                const valorAnterior = objOriginal[key];\n                                                                const valorNuevo = nuevo[key];\n                                                                if (typeof valorAnterior === 'number' && typeof valorNuevo === 'number') {\n                                                                    return Math.abs(valorAnterior - valorNuevo) > 0.01;\n                                                                }\n                                                                return valorAnterior !== valorNuevo;\n                                                            });\n                                                            if (!hayDiferencias) return;\n                                                            const seccionId = nuevo.seccionId || objOriginal.seccionId;\n                                                            const seccion = seccionesOrdenadas.find((s)=>s.id === seccionId);\n                                                            if (!seccion) return;\n                                                            setObjetos((prev)=>{\n                                                                const index = prev.findIndex((o)=>o.id === id);\n                                                                if (index === -1) return prev;\n                                                                const updated = [\n                                                                    ...prev\n                                                                ];\n                                                                updated[index] = {\n                                                                    ...updated[index],\n                                                                    ...nuevo\n                                                                };\n                                                                return updated;\n                                                            });\n                                                        },\n                                                        onDragStartPersonalizado: isInEditMode ? null : (dragId = obj.id, e)=>{\n                                                            const seleccionActual = Array.isArray(window._elementosSeleccionados) ? window._elementosSeleccionados : elementosSeleccionados;\n                                                            const isGroupCandidate = seleccionActual.length > 1 && seleccionActual.includes(dragId);\n                                                            const stage = e?.target?.getStage?.();\n                                                            const hoverCountBefore = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n                                                            if (!seleccionActual.includes(dragId)) {\n                                                                setElementosSeleccionados([\n                                                                    dragId\n                                                                ]);\n                                                            }\n                                                            (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)(()=>{\n                                                                setHoverId(null);\n                                                                setElementosPreSeleccionados([]);\n                                                                setIsDragging(true);\n                                                            });\n                                                            if (isGroupCandidate) {\n                                                                const now = typeof performance !== \"undefined\" && performance.now ? Number(performance.now().toFixed(2)) : Date.now();\n                                                                const hoverCountAfterSync = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n                                                                console.log(\"?? [HOVER][GROUP-DRAG-START]\", {\n                                                                    t: now,\n                                                                    dragId,\n                                                                    seleccionSize: seleccionActual.length,\n                                                                    hoverIdBefore: hoverId,\n                                                                    preSeleccionadosBefore: elementosPreSeleccionados.length,\n                                                                    hoverCountBefore,\n                                                                    hoverCountAfterSync,\n                                                                    windowIsDragging: window._isDragging,\n                                                                    isDraggingState: isDragging,\n                                                                    grupoLider: window._grupoLider || null\n                                                                });\n                                                                requestAnimationFrame(()=>{\n                                                                    const hoverCountRaf = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n                                                                    console.log(\"?? [HOVER][GROUP-DRAG-START][RAF]\", {\n                                                                        dragId,\n                                                                        hoverCountRaf,\n                                                                        windowIsDragging: window._isDragging,\n                                                                        grupoLider: window._grupoLider || null\n                                                                    });\n                                                                });\n                                                            }\n                                                        },\n                                                        onDragEndPersonalizado: isInEditMode ? null : ()=>{\n                                                            setIsDragging(false);\n                                                            configurarDragEnd([]);\n                                                        },\n                                                        onDragMovePersonalizado: isInEditMode ? null : (pos, elementId)=>{\n                                                            // ?? NO mostrar guías durante drag grupal\n                                                            if (!window._grupoLider) {\n                                                                mostrarGuias(pos, elementId, objetos, elementRefs);\n                                                            }\n                                                            if (elementosSeleccionados.includes(elementId)) {\n                                                                requestAnimationFrame(()=>{\n                                                                    if (typeof actualizarPosicionBotonOpciones === 'function') {\n                                                                        actualizarPosicionBotonOpciones();\n                                                                    }\n                                                                });\n                                                            }\n                                                        },\n                                                        dragStartPos: dragStartPos,\n                                                        hasDragged: hasDragged\n                                                    }, obj.id, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2553,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                }),\n                                                seleccionActiva && areaSeleccion && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                    name: \"ui\",\n                                                    x: areaSeleccion.x,\n                                                    y: areaSeleccion.y,\n                                                    width: areaSeleccion.width,\n                                                    height: areaSeleccion.height,\n                                                    fill: \"rgba(119, 61, 190, 0.1)\" // violeta claro\n                                                    ,\n                                                    stroke: \"#773dbe\",\n                                                    strokeWidth: 1,\n                                                    dash: [\n                                                        4,\n                                                        4\n                                                    ]\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 2870,\n                                                    columnNumber: 21\n                                                }, this),\n                                                elementosSeleccionados.length > 0 && (()=>{\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SelectionBounds__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                        selectedElements: elementosSeleccionados,\n                                                        elementRefs: elementRefs,\n                                                        objetos: objetos,\n                                                        isDragging: isDragging,\n                                                        onTransform: (newAttrs)=>{\n                                                            console.log(\"?? Transform detectado:\", newAttrs);\n                                                            if (elementosSeleccionados.length === 1) {\n                                                                const id = elementosSeleccionados[0];\n                                                                const objIndex = objetos.findIndex((o)=>o.id === id); // ?? DEFINIR PRIMERO\n                                                                // ?? MOVER EL LOG AQUÍ (después de definir objIndex)\n                                                                if (newAttrs.isFinal) {\n                                                                    console.log(\"?? FINAL TRANSFORM:\", {\n                                                                        originalY: newAttrs.y,\n                                                                        elementIndex: objIndex,\n                                                                        elementId: elementosSeleccionados[0]\n                                                                    });\n                                                                }\n                                                                if (objIndex !== -1) {\n                                                                    if (newAttrs.isPreview) {\n                                                                        // Preview: actualización sin historial\n                                                                        setObjetos((prev)=>{\n                                                                            const nuevos = [\n                                                                                ...prev\n                                                                            ];\n                                                                            const elemento = nuevos[objIndex];\n                                                                            // Countdown: durante preview dejamos que Konva escale el nodo\n                                                                            // sin tocar estado React para evitar desincronización con Transformer.\n                                                                            if (elemento.tipo === \"countdown\" || elemento.tipo === \"forma\" && (elemento.figura === \"circle\" || elemento.figura === \"triangle\")) {\n                                                                                return prev;\n                                                                            }\n                                                                            const updatedElement = {\n                                                                                ...elemento,\n                                                                                // ?? NO actualizar X,Y durante preview - solo dimensiones\n                                                                                rotation: newAttrs.rotation || elemento.rotation || 0\n                                                                            };\n                                                                            if (elemento.tipo === 'texto' && newAttrs.fontSize) {\n                                                                                updatedElement.fontSize = newAttrs.fontSize;\n                                                                                updatedElement.scaleX = 1;\n                                                                                updatedElement.scaleY = 1;\n                                                                            } else if (elemento.tipo === \"galeria\") {\n                                                                                const galleryMetrics = normalizarMedidasGaleria(elemento, newAttrs.width, newAttrs.x);\n                                                                                updatedElement.width = galleryMetrics.width;\n                                                                                updatedElement.height = galleryMetrics.height;\n                                                                                updatedElement.widthPct = galleryMetrics.widthPct;\n                                                                                updatedElement.x = galleryMetrics.x;\n                                                                                updatedElement.rotation = elemento.rotation || 0;\n                                                                                updatedElement.scaleX = 1;\n                                                                                updatedElement.scaleY = 1;\n                                                                            } else {\n                                                                                if (newAttrs.width !== undefined) updatedElement.width = newAttrs.width;\n                                                                                if (newAttrs.height !== undefined) updatedElement.height = newAttrs.height;\n                                                                                if (newAttrs.radius !== undefined) updatedElement.radius = newAttrs.radius;\n                                                                                updatedElement.scaleX = 1;\n                                                                                updatedElement.scaleY = 1;\n                                                                            }\n                                                                            nuevos[objIndex] = updatedElement;\n                                                                            return nuevos;\n                                                                        });\n                                                                        // ?? ACTUALIZAR POSICIÓN DEL BOTÓN DURANTE TRANSFORM\n                                                                        requestAnimationFrame(()=>{\n                                                                            if (typeof actualizarPosicionBotonOpciones === 'function') {\n                                                                                actualizarPosicionBotonOpciones();\n                                                                            }\n                                                                        });\n                                                                    } else if (newAttrs.isFinal) {\n                                                                        // Final: actualización completa\n                                                                        console.log('?? Guardando estado final para historial');\n                                                                        window._resizeData = {\n                                                                            isResizing: false\n                                                                        };\n                                                                        const { isPreview, isFinal, ...cleanAttrs } = newAttrs;\n                                                                        // ?? CONVERTIR coordenadas absolutas a relativas ANTES de guardar\n                                                                        const objOriginal = objetos[objIndex];\n                                                                        let finalAttrs = {\n                                                                            ...cleanAttrs,\n                                                                            y: (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.convertirAbsARel)(cleanAttrs.y, objOriginal.seccionId, seccionesOrdenadas),\n                                                                            fromTransform: true\n                                                                        };\n                                                                        // ? COUNTDOWN: conservar escala final del drag (sin reconversión a chipWidth)\n                                                                        // para que el tamaño final coincida exactamente con lo soltado.\n                                                                        if (objOriginal.tipo === \"countdown\") {\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                scaleX: Number.isFinite(cleanAttrs.scaleX) ? cleanAttrs.scaleX : objOriginal.scaleX ?? 1,\n                                                                                scaleY: Number.isFinite(cleanAttrs.scaleY) ? cleanAttrs.scaleY : objOriginal.scaleY ?? 1\n                                                                            };\n                                                                            delete finalAttrs.width;\n                                                                            delete finalAttrs.height;\n                                                                        } else if (objOriginal.tipo === \"forma\" && objOriginal.figura === \"circle\") {\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                x: Number.isFinite(cleanAttrs.x) ? cleanAttrs.x : objOriginal.x || 0,\n                                                                                radius: Number.isFinite(cleanAttrs.radius) ? cleanAttrs.radius : objOriginal.radius || 50,\n                                                                                scaleX: 1,\n                                                                                scaleY: 1\n                                                                            };\n                                                                            delete finalAttrs.width;\n                                                                            delete finalAttrs.height;\n                                                                        } else if (objOriginal.tipo === \"forma\" && objOriginal.figura === \"triangle\") {\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                x: Number.isFinite(cleanAttrs.x) ? cleanAttrs.x : objOriginal.x || 0,\n                                                                                radius: Number.isFinite(cleanAttrs.radius) ? cleanAttrs.radius : objOriginal.radius || 60,\n                                                                                scaleX: 1,\n                                                                                scaleY: 1\n                                                                            };\n                                                                            delete finalAttrs.width;\n                                                                            delete finalAttrs.height;\n                                                                        } else if (objOriginal.tipo === \"galeria\") {\n                                                                            const galleryMetrics = normalizarMedidasGaleria(objOriginal, cleanAttrs.width, cleanAttrs.x);\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                x: galleryMetrics.x,\n                                                                                width: galleryMetrics.width,\n                                                                                height: galleryMetrics.height,\n                                                                                widthPct: galleryMetrics.widthPct,\n                                                                                rotation: objOriginal.rotation || 0,\n                                                                                scaleX: 1,\n                                                                                scaleY: 1\n                                                                            };\n                                                                        }\n                                                                        // ? offsetY solo para debug (evita ReferenceError)\n                                                                        let offsetY = 0;\n                                                                        try {\n                                                                            const idx = seccionesOrdenadas.findIndex((s)=>s.id === objOriginal.seccionId);\n                                                                            const safe = idx >= 0 ? idx : 0;\n                                                                            // Nota: en tu código lo llamás a veces con 2 params, a veces con 3.\n                                                                            // Acá usamos 3, consistente con otras partes del archivo.\n                                                                            offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY)(seccionesOrdenadas, safe, altoCanvas) || 0;\n                                                                        } catch  {\n                                                                            offsetY = 0;\n                                                                        }\n                                                                        console.log(\"?? Convirtiendo coordenadas:\", {\n                                                                            yAbsoluta: cleanAttrs.y,\n                                                                            offsetY,\n                                                                            yRelativa: finalAttrs.y\n                                                                        });\n                                                                        if (objOriginal.tipo === \"countdown\") {\n                                                                            actualizarObjeto(objIndex, finalAttrs);\n                                                                        } else {\n                                                                            requestAnimationFrame(()=>{\n                                                                                actualizarObjeto(objIndex, finalAttrs);\n                                                                            });\n                                                                        }\n                                                                    }\n                                                                }\n                                                            }\n                                                        }\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2886,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                })(),\n                                                !window._resizeData?.isResizing && !isDragging && !window._isDragging && !window._grupoLider && !editing.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_HoverIndicator__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                                    hoveredElement: hoverId,\n                                                    elementRefs: elementRefs,\n                                                    objetos: objetos\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 3072,\n                                                    columnNumber: 21\n                                                }, this),\n                                                elementosSeleccionados.length === 1 && (()=>{\n                                                    const elementoSeleccionado = objetos.find((obj)=>obj.id === elementosSeleccionados[0]);\n                                                    if (elementoSeleccionado?.tipo === 'forma' && elementoSeleccionado?.figura === 'line') {\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_LineControls__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                                            name: \"ui\",\n                                                            lineElement: elementoSeleccionado,\n                                                            elementRefs: elementRefs,\n                                                            onUpdateLine: actualizarLinea,\n                                                            altoCanvas: altoCanvasDinamico,\n                                                            isMobile: isMobile,\n                                                            // ?? NUEVA PROP: Pasar información sobre drag grupal\n                                                            isDragGrupalActive: window._grupoLider !== null,\n                                                            elementosSeleccionados: elementosSeleccionados\n                                                        }, `line-controls-${elementoSeleccionado.id}-${JSON.stringify(elementoSeleccionado.points)}`, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 3082,\n                                                            columnNumber: 25\n                                                        }, this);\n                                                    }\n                                                    return null;\n                                                })(),\n                                                guiaLineas.map((linea, i)=>{\n                                                    // Determinar el estilo visual según el tipo\n                                                    const esLineaSeccion = linea.priority === 'seccion';\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Line, {\n                                                        name: \"ui\",\n                                                        points: linea.points,\n                                                        stroke: esLineaSeccion ? \"#773dbe\" : \"#9333ea\",\n                                                        strokeWidth: esLineaSeccion ? 2 : 1,\n                                                        dash: linea.style === 'dashed' ? [\n                                                            8,\n                                                            6\n                                                        ] : undefined,\n                                                        opacity: esLineaSeccion ? 0.9 : 0.7,\n                                                        listening: false,\n                                                        perfectDrawEnabled: false,\n                                                        // Efecto sutil de resplandor para líneas de sección\n                                                        shadowColor: esLineaSeccion ? \"rgba(119, 61, 190, 0.3)\" : undefined,\n                                                        shadowBlur: esLineaSeccion ? 4 : 0,\n                                                        shadowEnabled: esLineaSeccion\n                                                    }, `${linea.type}-${i}`, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 3109,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                })\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2143,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_47__[\"default\"], {\n                                            children: (()=>{\n                                                if (!seccionActivaId) return null;\n                                                const index = seccionesOrdenadas.findIndex((s)=>s.id === seccionActivaId);\n                                                if (index === -1) return null;\n                                                const seccion = seccionesOrdenadas[index];\n                                                const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_7__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                const estaAnimando = seccionesAnimando.includes(seccion.id);\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                    x: 0,\n                                                    y: offsetY,\n                                                    width: 800,\n                                                    height: seccion.altura,\n                                                    fill: \"transparent\",\n                                                    stroke: \"#773dbe\",\n                                                    strokeWidth: estaAnimando ? 4 : 3,\n                                                    cornerRadius: 0,\n                                                    shadowColor: estaAnimando ? \"rgba(119, 61, 190, 0.4)\" : \"rgba(119, 61, 190, 0.25)\",\n                                                    shadowBlur: estaAnimando ? 16 : 12,\n                                                    shadowOffset: {\n                                                        x: 0,\n                                                        y: estaAnimando ? 4 : 3\n                                                    },\n                                                    listening: false\n                                                }, `overlay-border-seccion-${seccion.id}`, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 3143,\n                                                    columnNumber: 23\n                                                }, this);\n                                            })()\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 3131,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                    lineNumber: 2114,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                lineNumber: 2106,\n                                columnNumber: 13\n                            }, this),\n                            editing.id && elementRefs.current[editing.id] && (()=>{\n                                const objetoEnEdicion = objetos.find((o)=>o.id === editing.id);\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_InlineTextEditor__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                    editingId: editing.id,\n                                    node: elementRefs.current[editing.id],\n                                    value: editing.value,\n                                    textAlign: objetoEnEdicion?.align || 'left',\n                                    onOverlayMountChange: handleInlineOverlayMountChange,\n                                    onChange: (nextValue)=>{\n                                        const nextText = String(nextValue ?? \"\");\n                                        const prevStats = getInlineLineStats(editing.value);\n                                        const nextStats = getInlineLineStats(nextText);\n                                        if (prevStats.lineCount !== nextStats.lineCount || prevStats.trailingNewlines !== nextStats.trailingNewlines) {\n                                            inlineDebugLog(\"linebreak-model-sync\", {\n                                                id: editing.id || window._currentEditingId || null,\n                                                prevLength: prevStats.length,\n                                                nextLength: nextStats.length,\n                                                prevLineCount: prevStats.lineCount,\n                                                nextLineCount: nextStats.lineCount,\n                                                prevTrailingNewlines: prevStats.trailingNewlines,\n                                                nextTrailingNewlines: nextStats.trailingNewlines\n                                            });\n                                        }\n                                        captureInlineSnapshot(\"input: before-render\", {\n                                            id: editing.id || window._currentEditingId || null,\n                                            valueLength: nextText.length\n                                        });\n                                        updateEdit(nextValue);\n                                    },\n                                    onDebugEvent: (eventName, payload = {})=>{\n                                        captureInlineSnapshot(eventName, {\n                                            id: payload?.id || editing.id || null,\n                                            ...payload\n                                        });\n                                    },\n                                    onFinish: ()=>{\n                                        const finishId = editing.id;\n                                        captureInlineSnapshot(\"finish: blur\", {\n                                            id: finishId,\n                                            valueLength: String(editing.value ?? \"\").length\n                                        });\n                                        const textoNuevoRaw = String(editing.value ?? \"\");\n                                        const textoNuevoValidado = textoNuevoRaw.trim();\n                                        const index = objetos.findIndex((o)=>o.id === finishId);\n                                        const objeto = objetos[index];\n                                        const liveNodeAtFinish = elementRefs.current[finishId];\n                                        const liveMetricsAtFinish = obtenerMetricasNodoInline(liveNodeAtFinish);\n                                        inlineDebugLog(\"finish-start\", {\n                                            id: finishId,\n                                            rawLength: textoNuevoRaw.length,\n                                            trimmedLength: textoNuevoValidado.length,\n                                            objectX: objeto?.x ?? null,\n                                            objectY: objeto?.y ?? null,\n                                            previewRef: {\n                                                ...inlineEditPreviewRef.current\n                                            },\n                                            liveMetricsAtFinish\n                                        });\n                                        if (index === -1) {\n                                            console.warn(\"? El objeto ya no existe. Cancelando guardado.\");\n                                            inlineDebugLog(\"finish-abort-missing-object\", {\n                                                id: finishId\n                                            });\n                                            inlineCommitDebugRef.current = {\n                                                id: null\n                                            };\n                                            finishEdit();\n                                            return;\n                                        }\n                                        // ?? Podés permitir texto vacío en formas si querés (yo lo permitiría)\n                                        if (textoNuevoValidado === \"\" && objeto.tipo === \"texto\") {\n                                            console.warn(\"?? El texto está vacío. No se actualiza.\");\n                                            inlineDebugLog(\"finish-abort-empty\", {\n                                                id: finishId,\n                                                rawLength: textoNuevoRaw.length,\n                                                trimmedLength: textoNuevoValidado.length\n                                            });\n                                            inlineCommitDebugRef.current = {\n                                                id: null\n                                            };\n                                            inlineEditPreviewRef.current = {\n                                                id: null,\n                                                centerX: null\n                                            };\n                                            finishEdit();\n                                            return;\n                                        }\n                                        const actualizado = [\n                                            ...objetos\n                                        ];\n                                        const patch = {\n                                            texto: textoNuevoRaw\n                                        };\n                                        const shouldKeepCenterX = objeto.tipo === \"texto\" && !objeto.__groupAlign && !Number.isFinite(objeto.width) && objeto.__autoWidth !== false;\n                                        if (shouldKeepCenterX) {\n                                            const nextX = calcularXTextoCentrado(objeto, textoNuevoRaw);\n                                            const currentX = Number.isFinite(objeto.x) ? objeto.x : 0;\n                                            if (Number.isFinite(nextX) && Math.abs(nextX - currentX) > 0.01) {\n                                                patch.x = nextX;\n                                            }\n                                            inlineDebugLog(\"finish-center-computed\", {\n                                                id: finishId,\n                                                shouldKeepCenterX,\n                                                currentX,\n                                                nextX,\n                                                patchX: patch.x ?? null\n                                            });\n                                        }\n                                        actualizado[index] = {\n                                            ...actualizado[index],\n                                            ...patch\n                                        };\n                                        const expectedX = Number.isFinite(patch.x) ? patch.x : Number.isFinite(objeto.x) ? objeto.x : null;\n                                        inlineCommitDebugRef.current = {\n                                            id: finishId,\n                                            expectedX,\n                                            objectXBeforeCommit: Number.isFinite(objeto.x) ? objeto.x : null,\n                                            liveNodeXAtFinish: Number.isFinite(liveMetricsAtFinish?.x) ? liveMetricsAtFinish.x : null,\n                                            previewCenterX: null,\n                                            textLength: textoNuevoRaw.length\n                                        };\n                                        inlineDebugLog(\"finish-apply-patch\", {\n                                            id: finishId,\n                                            patch,\n                                            expectedX\n                                        });\n                                        const logFinishVisibilityCheck = (phase)=>{\n                                            const safeId = String(finishId || \"\").replace(/\"/g, '\\\\\"');\n                                            const overlayDomPresent = safeId ? Boolean(document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`)) : false;\n                                            const liveNode = elementRefs.current[finishId];\n                                            inlineDebugLog(\"finish-visibility-check\", {\n                                                phase,\n                                                id: finishId,\n                                                reactiveEditingId: editing.id || null,\n                                                globalEditingId: window.editing?.id ?? null,\n                                                currentEditingId: window._currentEditingId ?? null,\n                                                overlayMountedId: inlineOverlayMountedId ?? null,\n                                                overlayDomPresent,\n                                                nodeOpacity: typeof liveNode?.opacity === \"function\" ? liveNode.opacity() : null,\n                                                nodeVisible: typeof liveNode?.visible === \"function\" ? liveNode.visible() : null,\n                                                nodeMetrics: obtenerMetricasNodoInline(liveNode)\n                                            });\n                                        };\n                                        logFinishVisibilityCheck(\"before-commit\");\n                                        captureInlineSnapshot(\"finish: before-flush\", {\n                                            id: finishId,\n                                            expectedX,\n                                            patchX: patch.x ?? null\n                                        });\n                                        (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)(()=>{\n                                            setObjetos(actualizado);\n                                        });\n                                        captureInlineSnapshot(\"finish: after-flush\", {\n                                            id: finishId,\n                                            expectedX,\n                                            patchX: patch.x ?? null\n                                        });\n                                        logFinishVisibilityCheck(\"after-commit-before-finishEdit\");\n                                        inlineEditPreviewRef.current = {\n                                            id: null,\n                                            centerX: null\n                                        };\n                                        (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)(()=>{\n                                            finishEdit();\n                                        });\n                                        const stageAfterFinishEdit = stageRef.current?.getStage?.() || stageRef.current || null;\n                                        if (typeof stageAfterFinishEdit?.batchDraw === \"function\") {\n                                            stageAfterFinishEdit.batchDraw();\n                                        }\n                                        logFinishVisibilityCheck(\"after-finishEdit-sync\");\n                                        if (window._currentEditingId === finishId) {\n                                            window._currentEditingId = null;\n                                        }\n                                        captureInlineSnapshot(\"finish: after-finishEdit\", {\n                                            id: finishId,\n                                            expectedX,\n                                            patchX: patch.x ?? null\n                                        });\n                                        requestAnimationFrame(()=>{\n                                            logFinishVisibilityCheck(\"after-finishEdit-raf1\");\n                                            captureInlineSnapshot(\"finish: raf1\", {\n                                                id: finishId,\n                                                expectedX,\n                                                patchX: patch.x ?? null\n                                            });\n                                            requestAnimationFrame(()=>{\n                                                captureInlineSnapshot(\"finish: raf2\", {\n                                                    id: finishId,\n                                                    expectedX,\n                                                    patchX: patch.x ?? null\n                                                });\n                                            });\n                                        });\n                                    },\n                                    scaleVisual: escalaVisual,\n                                    finishMode: inlineDebugAB.finishMode,\n                                    widthMode: inlineDebugAB.overlayWidthMode\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                    lineNumber: 3171,\n                                    columnNumber: 17\n                                }, this);\n                            })(),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_DividersOverlayStage__WEBPACK_IMPORTED_MODULE_48__[\"default\"], {\n                                zoom: zoom,\n                                altoCanvasDinamico: altoCanvasDinamico,\n                                seccionesOrdenadas: seccionesOrdenadas\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                lineNumber: 3386,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                        lineNumber: 1915,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                    lineNumber: 1906,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 1893,\n                columnNumber: 7\n            }, this),\n            elementosSeleccionados.length === 1 && !editing.id && (()=>{\n                const elementoSeleccionado = objetos.find((o)=>o.id === elementosSeleccionados[0]);\n                const nodeRef = elementRefs.current[elementosSeleccionados[0]];\n                if (!nodeRef || !elementoSeleccionado) return null;\n                const contenedor = contenedorRef.current;\n                const stage = stageRef.current;\n                if (!contenedor || !stage) return null;\n                // ?? OBTENER POSICIÓN REAL DEL ELEMENTO EN EL STAGE\n                let box = nodeRef.getClientRect();\n                if (elementoSeleccionado?.tipo === \"galeria\" && Number.isFinite(Number(elementoSeleccionado.width)) && Number.isFinite(Number(elementoSeleccionado.height))) {\n                    const absPos = typeof nodeRef.getAbsolutePosition === \"function\" ? nodeRef.getAbsolutePosition() : {\n                        x: typeof nodeRef.x === \"function\" ? nodeRef.x() : 0,\n                        y: typeof nodeRef.y === \"function\" ? nodeRef.y() : 0\n                    };\n                    box = {\n                        x: absPos.x,\n                        y: absPos.y,\n                        width: Number(elementoSeleccionado.width),\n                        height: Number(elementoSeleccionado.height)\n                    };\n                }\n                // ?? OBTENER COORDENADAS DEL STAGE RELATIVAS AL VIEWPORT\n                const stageContainer = stage.container();\n                const stageRect = stageContainer.getBoundingClientRect();\n                // ?? CALCULAR POSICIÓN EXACTA DEL ELEMENTO EN PANTALLA\n                const elementoEnPantallaX = stageRect.left + box.x * escalaActiva;\n                const elementoEnPantallaY = stageRect.top + box.y * escalaActiva;\n                const anchoElemento = box.width * escalaActiva;\n                // ?? POSICIÓN MUY CERCA: Esquina superior derecha pegada al elemento\n                const botonX = elementoEnPantallaX + anchoElemento - 8; // Solo -8px para que se superponga un poco\n                const botonY = elementoEnPantallaY - 8; // -8px arriba del elemento\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    ref: botonOpcionesRef,\n                    className: \"fixed z-50 bg-white border-2 border-purple-500 rounded-full shadow-lg hover:shadow-xl transition-shadow duration-200\",\n                    style: {\n                        left: \"0px\",\n                        top: \"0px\",\n                        width: \"24px\",\n                        height: \"24px\",\n                        display: \"none\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        pointerEvents: \"auto\",\n                        transition: \"none\",\n                        backgroundColor: \"rgba(255, 255, 255, 0.95)\",\n                        backdropFilter: \"blur(4px)\",\n                        border: \"2px solid #773dbe\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: (e)=>{\n                            e.stopPropagation();\n                            setMostrarPanelZ((prev)=>!prev);\n                        },\n                        className: \"hover:bg-purple-50 w-full h-full rounded-full flex items-center justify-center transition-colors text-xs\",\n                        title: \"Opciones del elemento\",\n                        children: \"??\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                        lineNumber: 3469,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                    lineNumber: 3451,\n                    columnNumber: 11\n                }, this);\n            })(),\n            mostrarPanelZ && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MenuOpcionesElemento__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n                isOpen: mostrarPanelZ,\n                botonOpcionesRef: botonOpcionesRef,\n                elementoSeleccionado: objetos.find((o)=>o.id === elementosSeleccionados[0]),\n                onCopiar: onCopiar,\n                onPegar: onPegar,\n                onDuplicar: onDuplicar,\n                onEliminar: onEliminar,\n                moverElemento: moverElemento,\n                onCerrar: ()=>setMostrarPanelZ(false),\n                reemplazarFondo: _utils_accionesFondo__WEBPACK_IMPORTED_MODULE_22__.reemplazarFondoSeccion,\n                secciones: secciones,\n                objetos: objetos,\n                setSecciones: setSecciones,\n                setObjetos: setObjetos,\n                setElementosSeleccionados: setElementosSeleccionados\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 3486,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_toolbar_FloatingTextToolbar__WEBPACK_IMPORTED_MODULE_32__[\"default\"], {\n                objetoSeleccionado: objetoSeleccionado,\n                setObjetos: setObjetos,\n                elementosSeleccionados: elementosSeleccionados,\n                mostrarSelectorFuente: mostrarSelectorFuente,\n                setMostrarSelectorFuente: setMostrarSelectorFuente,\n                mostrarSelectorTamano: mostrarSelectorTamano,\n                setMostrarSelectorTamano: setMostrarSelectorTamano,\n                ALL_FONTS: _config_fonts__WEBPACK_IMPORTED_MODULE_35__.ALL_FONTS,\n                fontManager: _utils_fontManager__WEBPACK_IMPORTED_MODULE_16__.fontManager,\n                tamaniosDisponibles: tamaniosDisponibles,\n                onCambiarAlineacion: onCambiarAlineacion\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 3506,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_sections_ConfirmDeleteSectionModal__WEBPACK_IMPORTED_MODULE_39__[\"default\"], {\n                isOpen: deleteSectionModal.isOpen,\n                sectionName: seccionPendienteEliminar?.tipo,\n                itemCount: cantidadElementosSeccionPendiente,\n                isDeleting: isDeletingSection,\n                onCancel: cerrarModalBorrarSeccion,\n                onConfirm: confirmarBorrarSeccion\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 3520,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n        lineNumber: 1875,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0NhbnZhc0VkaXRvci5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhCQUE4Qjs7QUFDNEM7QUFDcEM7QUFDb0Q7QUFDNUM7QUFDSjtBQUNJO0FBQzZDO0FBQ2pDO0FBQ1U7QUFDQTtBQUNwQjtBQUNGO0FBQ047QUFDUDtBQUMrQjtBQUNiO0FBQ0c7QUFDWjtBQUNnQjtBQUNSO0FBQ1I7QUFDd0M7QUFDRDtBQUNBO0FBQ0Y7QUFDbUI7QUFDakM7QUFDTDtBQUNYO0FBQ1M7QUFDTDtBQUNxQjtBQUNsQjtBQUMwQjtBQUN4QjtBQUNoQztBQUNrQjtBQUNVO0FBYWhDO0FBQzZDO0FBQ0c7QUFDeUI7QUFDakM7QUFDWTtBQUNQO0FBQ2dCO0FBQ1U7QUFDN0I7QUFDMkI7QUFDakI7QUFDRTtBQUk1RXFELDREQUFrQixHQUFHO0FBRXJCLE1BQU0yQiw2QkFBNkI7QUFDbkMsTUFBTUMseUJBQXlCO0FBRS9CLFNBQVNDLG1CQUFtQkMsSUFBSTtJQUM5QixNQUFNQyxJQUFJQyxPQUFPRixRQUFRLFFBQVFHLFdBQVc7SUFDNUMsT0FBTyxNQUFPLGFBQWMsYUFBYTtBQUMzQztBQUVBLDRDQUE0QztBQUM1QyxNQUFNQyx5QkFBeUIsQ0FBQ0M7SUFDOUIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixNQUFNO1FBQ3RCLE9BQU9BLElBQUlHLEdBQUcsQ0FBQ0o7SUFDakI7SUFFQSxJQUFJQyxRQUFRLFFBQVEsT0FBT0EsUUFBUSxVQUFVO1FBQzNDLE1BQU1JLFlBQVksQ0FBQztRQUNuQkMsT0FBT0MsSUFBSSxDQUFDTixLQUFLTyxPQUFPLENBQUNDLENBQUFBO1lBQ3ZCLE1BQU1DLFFBQVFULEdBQUcsQ0FBQ1EsSUFBSTtZQUN0QixJQUFJQyxVQUFVQyxXQUFXO2dCQUN2Qk4sU0FBUyxDQUFDSSxJQUFJLEdBQUdULHVC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QU1oa0IsaUJBQWlCO2dCQUNqQ3BQLGlCQUFpQkEseUVBQWVBO2dCQUNoQ3dJLFdBQVdBO2dCQUNYSixTQUFTQTtnQkFDVEssY0FBY0E7Z0JBQ2RKLFlBQVlBO2dCQUNaVSwyQkFBMkJBOzs7Ozs7MEJBSy9CLDhEQUFDL0gsdUZBQW1CQTtnQkFDbEJzTyxvQkFBb0JBO2dCQUNwQmpILFlBQVlBO2dCQUNaUyx3QkFBd0JBO2dCQUN4QmdELHVCQUF1QkE7Z0JBQ3ZCQywwQkFBMEJBO2dCQUMxQnlELHVCQUF1QkE7Z0JBQ3ZCSCwwQkFBMEJBO2dCQUMxQmxPLFdBQVdBLHFEQUFTQTtnQkFDcEIxQixhQUFhQSw0REFBV0E7Z0JBQ3hCZ1EscUJBQXFCQTtnQkFDckJrSixxQkFBcUJBOzs7Ozs7MEJBR3ZCLDhEQUFDelcsOEZBQXlCQTtnQkFDeEJ1SyxRQUFRRixtQkFBbUJFLE1BQU07Z0JBQ2pDNG1CLGFBQWE3bEIsMEJBQTBCMEU7Z0JBQ3ZDb2hCLFdBQVczbEI7Z0JBQ1g0bEIsWUFBWTVtQjtnQkFDWjZtQixVQUFVMVM7Z0JBQ1YyUyxXQUFXMVM7Ozs7Ozs7Ozs7OztBQVFuQiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxDYW52YXNFZGl0b3IuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvQ2FudmFzRWRpdG9yLmpzeFxyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IGZsdXNoU3luYyB9IGZyb20gXCJyZWFjdC1kb21cIjtcclxuaW1wb3J0IHsgU3RhZ2UsIExpbmUsIFJlY3QsIFRleHQsIEltYWdlIGFzIEtvbnZhSW1hZ2UsIEdyb3VwLCBDaXJjbGUgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcclxuaW1wb3J0IEVsZW1lbnRvQ2FudmFzIGZyb20gXCIuL0VsZW1lbnRvQ2FudmFzXCI7XHJcbmltcG9ydCBMaW5lQ29udHJvbHMgZnJvbSBcIi4vTGluZUNvbnRyb2xzXCI7XHJcbmltcG9ydCBSZWFjdERPTVNlcnZlciBmcm9tIFwicmVhY3QtZG9tL3NlcnZlclwiO1xyXG5pbXBvcnQgeyBjYWxjdWxhck9mZnNldFksIGNvbnZlcnRpckFic0FSZWwsIGRldGVybWluYXJOdWV2YVNlY2Npb24gfSBmcm9tIFwiQC91dGlscy9sYXlvdXRcIjtcclxuaW1wb3J0IHsgY3JlYXJTZWNjaW9uIH0gZnJvbSBcIkAvbW9kZWxzL2VzdHJ1Y3R1cmFJbmljaWFsXCI7XHJcbmltcG9ydCB1c2VQbGFudGlsbGFzRGVTZWNjaW9uIGZyb20gXCJAL2hvb2tzL3VzZVBsYW50aWxsYXNEZVNlY2Npb25cIjtcclxuaW1wb3J0IHsgdXNlSW1wZXJhdGl2ZU9iamVjdHMgfSBmcm9tICdAL2hvb2tzL3VzZUltcGVyYXRpdmVPYmplY3RzJztcclxuaW1wb3J0IFNlbGVjdGlvbkJvdW5kcyBmcm9tICcuL1NlbGVjdGlvbkJvdW5kcyc7XHJcbmltcG9ydCBIb3ZlckluZGljYXRvciBmcm9tICcuL0hvdmVySW5kaWNhdG9yJztcclxuaW1wb3J0IExpbmVUb29sYmFyIGZyb20gXCIuL0xpbmVUb29sYmFyXCI7XHJcbmltcG9ydCB1c2VJbWFnZSBmcm9tIFwidXNlLWltYWdlXCI7XHJcbmltcG9ydCB1c2VLZXlib2FyZFNob3J0Y3V0cyBmcm9tICdAL2hvb2tzL3VzZUtleWJvYXJkU2hvcnRjdXRzJztcclxuaW1wb3J0IHsgZm9udE1hbmFnZXIgfSBmcm9tICcuLi91dGlscy9mb250TWFuYWdlcic7XHJcbmltcG9ydCB1c2VJbmxpbmVFZGl0b3IgZnJvbSBcIkAvaG9va3MvdXNlSW5saW5lRWRpdG9yXCI7XHJcbmltcG9ydCBTaGFwZVRvb2xiYXIgZnJvbSAnLi9TaGFwZVRvb2xiYXInO1xyXG5pbXBvcnQgdXNlRWRpdG9ySGFuZGxlcnMgZnJvbSAnQC9ob29rcy91c2VFZGl0b3JIYW5kbGVycyc7XHJcbmltcG9ydCBJbmxpbmVUZXh0RWRpdG9yIGZyb20gXCIuL0lubGluZVRleHRFZGl0b3JcIjtcclxuaW1wb3J0IEZvbnRTZWxlY3RvciBmcm9tICcuL0ZvbnRTZWxlY3Rvcic7XHJcbmltcG9ydCB7IHJlZW1wbGF6YXJGb25kb1NlY2Npb24gYXMgcmVlbXBsYXphckZvbmRvIH0gZnJvbSBcIkAvdXRpbHMvYWNjaW9uZXNGb25kb1wiO1xyXG5pbXBvcnQgeyBkZXNhbmNsYXJJbWFnZW5EZUZvbmRvIGFzIGRlc2FuY2xhckZvbmRvIH0gZnJvbSBcIkAvdXRpbHMvYWNjaW9uZXNGb25kb1wiO1xyXG5pbXBvcnQgeyBib3JyYXJTZWNjaW9uIGFzIGJvcnJhclNlY2Npb25FeHRlcm5hbCB9IGZyb20gXCJAL3V0aWxzL2VkaXRvclNlY2Npb25lc1wiO1xyXG5pbXBvcnQgeyBtb3ZlclNlY2Npb24gYXMgbW92ZXJTZWNjaW9uRXh0ZXJuYWwgfSBmcm9tIFwiQC91dGlscy9lZGl0b3JTZWNjaW9uZXNcIjtcclxuaW1wb3J0IHsgdmFsaWRhclB1bnRvc0xpbmVhLCBkZXRlY3RhckludGVyc2VjY2lvbkxpbmVhIH0gZnJvbSBcIi4vZWRpdG9yL3NlbGVjdGlvbi9zZWxlY3Rpb25VdGlsc1wiO1xyXG5pbXBvcnQgeyBndWFyZGFyU2VjY2lvbkNvbW9QbGFudGlsbGEgfSBmcm9tIFwiQC91dGlscy9wbGFudGlsbGFzXCI7XHJcbmltcG9ydCBHYWxlcmlhS29udmEgZnJvbSBcIkAvY29tcG9uZW50cy9lZGl0b3IvR2FsZXJpYUtvbnZhXCI7XHJcbmltcG9ydCBGb25kb1NlY2Npb24gZnJvbSAnLi9lZGl0b3IvRm9uZG9TZWNjaW9uJztcclxuaW1wb3J0IE1lbnVPcGNpb25lc0VsZW1lbnRvIGZyb20gXCIuL01lbnVPcGNpb25lc0VsZW1lbnRvXCI7XHJcbmltcG9ydCB7IGNhbGNHYWxsZXJ5TGF5b3V0IH0gZnJvbSBcIkAvdXRpbHMvY2FsY0dyaWRcIjtcclxuaW1wb3J0IENvdW50ZG93bktvbnZhIGZyb20gXCJAL2NvbXBvbmVudHMvZWRpdG9yL2NvdW50ZG93bi9Db3VudGRvd25Lb252YVwiO1xyXG5pbXBvcnQgdXNlR3VpYXNDZW50cmFkbyBmcm9tICdAL2hvb2tzL3VzZUd1aWFzQ2VudHJhZG8nO1xyXG5pbXBvcnQgRmxvYXRpbmdUZXh0VG9vbGJhciBmcm9tIFwiQC9jb21wb25lbnRzL2VkaXRvci90b29sYmFyL0Zsb2F0aW5nVGV4dFRvb2xiYXJcIjtcclxuaW1wb3J0IFNlbGVjdG9yQ29sb3JTZWNjaW9uIGZyb20gXCIuL1NlbGVjdG9yQ29sb3JTZWNjaW9uXCI7XHJcbmltcG9ydCBLb252YSBmcm9tIFwia29udmFcIjtcclxuaW1wb3J0IHsgQUxMX0ZPTlRTIH0gZnJvbSAnLi4vY29uZmlnL2ZvbnRzJztcclxuaW1wb3J0IHsgdXNlQXV0aENsYWltcyB9IGZyb20gXCJAL2hvb2tzL3VzZUF1dGhDbGFpbXNcIjtcclxuaW1wb3J0IHtcclxuICBDaGVjayxcclxuICBSb3RhdGVDY3csXHJcbiAgQ29weSxcclxuICBUcmFzaDIsXHJcbiAgTGF5ZXJzLFxyXG4gIEFycm93RG93bixcclxuICBBcnJvd1VwLFxyXG4gIE1vdmVVcCxcclxuICBNb3ZlRG93bixcclxuICBQbHVzQ2lyY2xlLFxyXG4gIENsaXBib2FyZFBhc3RlLFxyXG59IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcclxuaW1wb3J0IHVzZUJvcnJhZG9yU3luYyBmcm9tIFwiLi9lZGl0b3IvcGVyc2lzdGVuY2UvdXNlQm9ycmFkb3JTeW5jXCI7XHJcbmltcG9ydCB1c2VTZWN0aW9uc01hbmFnZXIgZnJvbSBcIi4vZWRpdG9yL3NlY3Rpb25zL3VzZVNlY3Rpb25zTWFuYWdlclwiO1xyXG5pbXBvcnQgQ29uZmlybURlbGV0ZVNlY3Rpb25Nb2RhbCBmcm9tIFwiQC9jb21wb25lbnRzL2VkaXRvci9zZWN0aW9ucy9Db25maXJtRGVsZXRlU2VjdGlvbk1vZGFsXCI7XHJcbmltcG9ydCB1c2VFZGl0b3JFdmVudHMgZnJvbSBcIi4vZWRpdG9yL2V2ZW50cy91c2VFZGl0b3JFdmVudHNcIjtcbmltcG9ydCB1c2VFZGl0b3JXaW5kb3dCcmlkZ2UgZnJvbSBcIi4vZWRpdG9yL3dpbmRvdy91c2VFZGl0b3JXaW5kb3dCcmlkZ2VcIjtcbmltcG9ydCB1c2VIaXN0b3J5TWFuYWdlciBmcm9tIFwiLi9lZGl0b3IvaGlzdG9yeS91c2VIaXN0b3J5TWFuYWdlclwiO1xuaW1wb3J0IHVzZUNhbnZhc1NjYWxlTGF5b3V0IGZyb20gXCJAL2NvbXBvbmVudHMvZWRpdG9yL21vYmlsZS91c2VDYW52YXNTY2FsZUxheW91dFwiO1xuaW1wb3J0IHVzZUNhbnZhc0ludGVyYWN0aW9uU3RhdGUgZnJvbSBcIkAvY29tcG9uZW50cy9lZGl0b3IvbW9iaWxlL3VzZUNhbnZhc0ludGVyYWN0aW9uU3RhdGVcIjtcbmltcG9ydCB1c2VTdGFnZUdlc3R1cmVzIGZyb20gXCIuL2VkaXRvci9tb2JpbGUvdXNlU3RhZ2VHZXN0dXJlc1wiO1xuaW1wb3J0IHVzZU9wdGlvbkJ1dHRvblBvc2l0aW9uIGZyb20gXCJAL2NvbXBvbmVudHMvZWRpdG9yL292ZXJsYXlzL3VzZU9wdGlvbkJ1dHRvblBvc2l0aW9uXCI7XG5pbXBvcnQgQ2FudmFzRWxlbWVudHNMYXllciBmcm9tIFwiQC9jb21wb25lbnRzL2NhbnZhcy9DYW52YXNFbGVtZW50c0xheWVyXCI7XG5pbXBvcnQgRGl2aWRlcnNPdmVybGF5U3RhZ2UgZnJvbSBcIkAvY29tcG9uZW50cy9jYW52YXMvRGl2aWRlcnNPdmVybGF5U3RhZ2VcIjtcblxyXG5cclxuXHJcbktvbnZhLmRyYWdEaXN0YW5jZSA9IDg7XG5cclxuY29uc3QgQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEEgPSA1MDA7XHJcbmNvbnN0IEFMVFVSQV9QQU5UQUxMQV9FRElUT1IgPSA1MDA7XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemFyQWx0b01vZG8obW9kbykge1xyXG4gIGNvbnN0IG0gPSBTdHJpbmcobW9kbyB8fCBcImZpam9cIikudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gKG0gPT09IFwicGFudGFsbGFcIikgPyBcInBhbnRhbGxhXCIgOiBcImZpam9cIjtcclxufVxyXG5cclxuLy8gPz8/IEZVTkNJw5NOIEhFTFBFUiBQQVJBIExJTVBJQVIgVU5ERUZJTkVEXHJcbmNvbnN0IGxpbXBpYXJPYmpldG9VbmRlZmluZWQgPSAob2JqKSA9PiB7XHJcbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xyXG4gICAgcmV0dXJuIG9iai5tYXAobGltcGlhck9iamV0b1VuZGVmaW5lZCk7XHJcbiAgfVxyXG5cclxuICBpZiAob2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XHJcbiAgICBjb25zdCBvYmpMaW1waW8gPSB7fTtcclxuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICBjb25zdCB2YWxvciA9IG9ialtrZXldO1xyXG4gICAgICBpZiAodmFsb3IgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG9iakxpbXBpb1trZXldID0gbGltcGlhck9iamV0b1VuZGVmaW5lZCh2YWxvcik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iakxpbXBpbztcclxuICB9XHJcblxyXG4gIHJldHVybiBvYmo7XHJcbn07XHJcblxyXG5jb25zdCBpY29ub1JvdGFjaW9uID0gUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdGF0aWNNYXJrdXAoPFJvdGF0ZUNjdyBjb2xvcj1cImJsYWNrXCIgLz4pO1xyXG5jb25zdCB1cmxEYXRhID0gXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFwiICsgYnRvYShpY29ub1JvdGFjaW9uKTtcclxuXHJcblxyXG4vLyBVdGlscyBkZSBjdXJzb3IgZ2xvYmFsIChhcnJpYmEgZGVsIGNvbXBvbmVudGUpXHJcbmZ1bmN0aW9uIHNldEdsb2JhbEN1cnNvcihjdXJzb3IgPSAnJywgc3RhZ2VSZWYgPSBudWxsKSB7XHJcbiAgdHJ5IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gY3Vyc29yIHx8ICcnO1xyXG4gICAgLy8gPz8gbGltcGlhbW9zIHRhbWJpw6luIGVsIGNvbnRlbmVkb3IgZGVsIFN0YWdlIHNpIGV4aXN0ZVxyXG4gICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZj8uY3VycmVudD8uY29udGFpbmVyPy4oKSB8fCBudWxsO1xyXG4gICAgaWYgKHN0YWdlKSBzdGFnZS5zdHlsZS5jdXJzb3IgPSBjdXJzb3IgfHwgJyc7XHJcbiAgICAvLyBmYWxsYmFjazogY2FudmFzIHByaW5jaXBhbFxyXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XHJcbiAgICBpZiAoY2FudmFzICYmIGNhbnZhcy5wYXJlbnRFbGVtZW50KSBjYW52YXMucGFyZW50RWxlbWVudC5zdHlsZS5jdXJzb3IgPSBjdXJzb3IgfHwgJyc7XHJcbiAgfSBjYXRjaCB7IH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJHbG9iYWxDdXJzb3Ioc3RhZ2VSZWYgPSBudWxsKSB7XHJcbiAgc2V0R2xvYmFsQ3Vyc29yKCcnLCBzdGFnZVJlZik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzSW5saW5lRGVidWdFbmFibGVkKCkge1xyXG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5fX0lOTElORV9ERUJVRyAhPT0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdElubGluZUxvZ1BheWxvYWQocGF5bG9hZCA9IHt9KSB7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwYXlsb2FkLCBudWxsLCAyKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIFN0cmluZyhlcnJvciB8fCBwYXlsb2FkKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlubGluZURlYnVnTG9nKGV2ZW50LCBwYXlsb2FkID0ge30pIHtcclxuICBpZiAoIWlzSW5saW5lRGVidWdFbmFibGVkKCkpIHJldHVybjtcclxuICBjb25zdCBlc3NlbnRpYWxFdmVudHMgPSBuZXcgU2V0KFtcclxuICAgIFwic3RhcnQtaW5saW5lLWVkaXRcIixcclxuICAgIFwibGluZWJyZWFrLW1vZGVsLXN5bmNcIixcclxuICAgIFwibGluZWJyZWFrLXRyYW5zZm9ybWVyXCIsXHJcbiAgXSk7XHJcbiAgaWYgKCFlc3NlbnRpYWxFdmVudHMuaGFzKGV2ZW50KSkgcmV0dXJuO1xyXG4gIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gIGNvbnN0IGJvZHkgPSBmb3JtYXRJbmxpbmVMb2dQYXlsb2FkKHBheWxvYWQpO1xyXG4gIGNvbnNvbGUubG9nKGBbSU5MSU5FXVske3RzfV0gJHtldmVudH1cXG4ke2JvZHl9YCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5leHRJbmxpbmVGcmFtZU1ldGEoKSB7XHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgIHJldHVybiB7IGZyYW1lOiBudWxsLCBwZXJmTXM6IG51bGwgfTtcclxuICB9XHJcbiAgY29uc3QgcHJldiA9IE51bWJlcih3aW5kb3cuX19JTkxJTkVfRlJBTUVfU0VRIHx8IDApO1xyXG4gIGNvbnN0IG5leHQgPSBwcmV2ICsgMTtcclxuICB3aW5kb3cuX19JTkxJTkVfRlJBTUVfU0VRID0gbmV4dDtcclxuICBjb25zdCBwZXJmTXMgPVxyXG4gICAgdHlwZW9mIHdpbmRvdy5wZXJmb3JtYW5jZT8ubm93ID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgPyBOdW1iZXIod2luZG93LnBlcmZvcm1hbmNlLm5vdygpLnRvRml4ZWQoMykpXHJcbiAgICAgIDogbnVsbDtcclxuICByZXR1cm4geyBmcmFtZTogbmV4dCwgcGVyZk1zIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldElubGluZUxpbmVTdGF0cyh2YWx1ZSkge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBTdHJpbmcodmFsdWUgPz8gXCJcIikucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xyXG4gIGNvbnN0IHRyYWlsaW5nID0gbm9ybWFsaXplZC5tYXRjaCgvXFxuKyQvKT8uWzBdO1xyXG4gIHJldHVybiB7XHJcbiAgICBub3JtYWxpemVkLFxyXG4gICAgbGVuZ3RoOiBub3JtYWxpemVkLmxlbmd0aCxcclxuICAgIGxpbmVDb3VudDogbm9ybWFsaXplZCA9PT0gXCJcIiA/IDEgOiBub3JtYWxpemVkLnNwbGl0KFwiXFxuXCIpLmxlbmd0aCxcclxuICAgIHRyYWlsaW5nTmV3bGluZXM6IHRyYWlsaW5nID8gdHJhaWxpbmcubGVuZ3RoIDogMCxcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVJbmxpbmVEZWJ1Z0FCKHJhd0NvbmZpZykge1xyXG4gIGNvbnN0IHJhdyA9IHJhd0NvbmZpZyAmJiB0eXBlb2YgcmF3Q29uZmlnID09PSBcIm9iamVjdFwiID8gcmF3Q29uZmlnIDoge307XHJcblxyXG4gIGNvbnN0IHZpc2liaWxpdHlTb3VyY2UgPVxyXG4gICAgcmF3LnZpc2liaWxpdHlTb3VyY2UgPT09IFwid2luZG93XCIgPyBcIndpbmRvd1wiIDogXCJyZWFjdGl2ZVwiO1xyXG5cclxuICBjb25zdCBmaW5pc2hNb2RlID1cclxuICAgIHJhdy5maW5pc2hNb2RlID09PSBcImltbWVkaWF0ZVwiIHx8XHJcbiAgICByYXcuZmluaXNoTW9kZSA9PT0gXCJyYWZcIiB8fFxyXG4gICAgcmF3LmZpbmlzaE1vZGUgPT09IFwidGltZW91dDEwMFwiXHJcbiAgICAgID8gcmF3LmZpbmlzaE1vZGVcclxuICAgICAgOiBcInJhZlwiO1xyXG5cclxuICBjb25zdCBvdmVybGF5V2lkdGhNb2RlID1cclxuICAgIHJhdy5vdmVybGF5V2lkdGhNb2RlID09PSBcImZpdC1jb250ZW50XCIgPyBcImZpdC1jb250ZW50XCIgOiBcIm1lYXN1cmVkXCI7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICB2aXNpYmlsaXR5U291cmNlLFxyXG4gICAgZmluaXNoTW9kZSxcclxuICAgIG92ZXJsYXlXaWR0aE1vZGUsXHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENhbnZhc0VkaXRvcih7IHNsdWcsIHpvb20gPSAxLCBvbkhpc3RvcmlhbENoYW5nZSwgb25GdXR1cm9zQ2hhbmdlLCB1c2VySWQgfSkge1xyXG4gIGNvbnN0IFtvYmpldG9zLCBzZXRPYmpldG9zXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbY2VsZGFHYWxlcmlhQWN0aXZhLCBzZXRDZWxkYUdhbGVyaWFBY3RpdmFdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgW3NlY2Npb25lcywgc2V0U2VjY2lvbmVzXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbaGlzdG9yaWFsLCBzZXRIaXN0b3JpYWxdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtmdXR1cm9zLCBzZXRGdXR1cm9zXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtjYXJnYWRvLCBzZXRDYXJnYWRvXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3Qgc3RhZ2VSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHsgZHJhZ1N0YXJ0UG9zLCBoYXNEcmFnZ2VkLCBpc0RyYWdnaW5nLCBzZXRJc0RyYWdnaW5nIH0gPSB1c2VDYW52YXNJbnRlcmFjdGlvblN0YXRlKCk7XG4gIGNvbnN0IGltcGVyYXRpdmVPYmplY3RzID0gdXNlSW1wZXJhdGl2ZU9iamVjdHMoKTtcbiAgY29uc3QgW2FuaW1hbmRvU2VjY2lvbiwgc2V0QW5pbWFuZG9TZWNjaW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbc2VjY2lvbkFjdGl2YUlkLCBzZXRTZWNjaW9uQWN0aXZhSWRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtzZWxlY2Npb25BY3RpdmEsIHNldFNlbGVjY2lvbkFjdGl2YV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2luaWNpb1NlbGVjY2lvbiwgc2V0SW5pY2lvU2VsZWNjaW9uXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFthcmVhU2VsZWNjaW9uLCBzZXRBcmVhU2VsZWNjaW9uXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtlbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zLCBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBndWlhTGF5ZXJSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgW2hvdmVySWQsIHNldEhvdmVySWRdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgYWx0b0NhbnZhcyA9IHNlY2Npb25lcy5yZWR1Y2UoKGFjYywgcykgPT4gYWNjICsgcy5hbHR1cmEsIDApIHx8IDgwMDtcclxuICBjb25zdCBbc2VjY2lvbmVzQW5pbWFuZG8sIHNldFNlY2Npb25lc0FuaW1hbmRvXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCB7IHJlZnJlc2NhcjogcmVmcmVzY2FyUGxhbnRpbGxhc0RlU2VjY2lvbiB9ID0gdXNlUGxhbnRpbGxhc0RlU2VjY2lvbigpO1xyXG4gIGNvbnN0IFtlbGVtZW50b0NvcGlhZG8sIHNldEVsZW1lbnRvQ29waWFkb10gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBlbGVtZW50UmVmcyA9IHVzZVJlZih7fSk7XHJcbiAgY29uc3QgaW5saW5lRWRpdFByZXZpZXdSZWYgPSB1c2VSZWYoeyBpZDogbnVsbCwgY2VudGVyWDogbnVsbCB9KTtcclxuICBjb25zdCBpbmxpbmVDb21taXREZWJ1Z1JlZiA9IHVzZVJlZih7IGlkOiBudWxsIH0pO1xyXG4gIGNvbnN0IHByZXZFZGl0aW5nSWRSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgaW5saW5lUmVuZGVyVmFsdWVSZWYgPSB1c2VSZWYoeyBpZDogbnVsbCwgdmFsdWU6IFwiXCIgfSk7XHJcbiAgY29uc3QgW2lubGluZU92ZXJsYXlNb3VudGVkSWQsIHNldElubGluZU92ZXJsYXlNb3VudGVkSWRdID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgY29udGVuZWRvclJlZiA9IHVzZVJlZihudWxsKTtcclxuICBjb25zdCBpZ25vcmVOZXh0VXBkYXRlUmVmID0gdXNlUmVmKDApO1xyXG4gIGNvbnN0IFthbmNob1N0YWdlLCBzZXRBbmNob1N0YWdlXSA9IHVzZVN0YXRlKDgwMCk7XHJcbiAgY29uc3QgW21vc3RyYXJTZWxlY3RvckZ1ZW50ZSwgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbbW9zdHJhclN1Ym1lbnVDYXBhLCBzZXRNb3N0cmFyU3VibWVudUNhcGFdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBmdWVudGVzRGlzcG9uaWJsZXMgPSBBTExfRk9OVFM7XG4gIGNvbnN0IHsgZXNBZG1pbiwgbG9hZGluZ0NsYWltcyB9ID0gdXNlQXV0aENsYWltcygpO1xuICBjb25zdCBbbW9iaWxlQmFja2dyb3VuZEVkaXRTZWN0aW9uSWQsIHNldE1vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbZGVsZXRlU2VjdGlvbk1vZGFsLCBzZXREZWxldGVTZWN0aW9uTW9kYWxdID0gdXNlU3RhdGUoeyBpc09wZW46IGZhbHNlLCBzZWN0aW9uSWQ6IG51bGwgfSk7XG4gIGNvbnN0IFtpc0RlbGV0aW5nU2VjdGlvbiwgc2V0SXNEZWxldGluZ1NlY3Rpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuXHJcblxyXG5cclxuXHJcbiAgdXNlQm9ycmFkb3JTeW5jKHtcclxuICAgIHNsdWcsXHJcbiAgICB1c2VySWQsXHJcblxyXG4gICAgb2JqZXRvcyxcclxuICAgIHNlY2Npb25lcyxcclxuICAgIGNhcmdhZG8sXHJcblxyXG4gICAgc2V0T2JqZXRvcyxcclxuICAgIHNldFNlY2Npb25lcyxcclxuICAgIHNldENhcmdhZG8sXHJcbiAgICBzZXRTZWNjaW9uQWN0aXZhSWQsXHJcblxyXG4gICAgaWdub3JlTmV4dFVwZGF0ZVJlZixcclxuICAgIHN0YWdlUmVmLFxyXG5cclxuICAgIG5vcm1hbGl6YXJBbHRvTW9kbyxcclxuICAgIHZhbGlkYXJQdW50b3NMaW5lYSxcclxuXHJcbiAgICBBTFRVUkFfUEFOVEFMTEFfRURJVE9SLFxyXG4gIH0pO1xyXG4gIGNvbnN0IHtcclxuICAgIGNvbnRyb2xhbmRvQWx0dXJhLFxyXG4gICAgaW5pY2lhckNvbnRyb2xBbHR1cmEsXHJcbiAgICBmaW5hbGl6YXJDb250cm9sQWx0dXJhLFxyXG4gICAgdG9nZ2xlUGFudGFsbGFDb21wbGV0YVNlY2Npb24sXHJcbiAgICBoYW5kbGVDcmVhclNlY2Npb24sXHJcbiAgfSA9IHVzZVNlY3Rpb25zTWFuYWdlcih7XHJcbiAgICBzbHVnLFxyXG4gICAgc2VjY2lvbmVzLFxyXG4gICAgc2V0U2VjY2lvbmVzLFxyXG4gICAgb2JqZXRvcyxcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZWNjaW9uQWN0aXZhSWQsXHJcbiAgICBzZXRTZWNjaW9uQWN0aXZhSWQsXHJcblxyXG4gICAgY3JlYXJTZWNjaW9uLFxyXG4gICAgbm9ybWFsaXphckFsdG9Nb2RvLFxyXG4gICAgbGltcGlhck9iamV0b1VuZGVmaW5lZCxcclxuXHJcbiAgICBBTFRVUkFfUkVGRVJFTkNJQV9QQU5UQUxMQSxcclxuXHJcbiAgICBzdGFnZVJlZixcclxuICAgIHNldEdsb2JhbEN1cnNvcixcclxuICAgIGNsZWFyR2xvYmFsQ3Vyc29yLFxyXG4gIH0pO1xyXG4gIGNvbnN0IG51ZXZvVGV4dG9SZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgdXNlRWRpdG9yRXZlbnRzKHtcclxuICAgIGNlbGRhR2FsZXJpYUFjdGl2YSxcclxuICAgIHNldENlbGRhR2FsZXJpYUFjdGl2YSxcclxuICAgIHNldE9iamV0b3MsXHJcblxyXG4gICAgc2VjY2lvbmVzLFxyXG4gICAgc2VjY2lvbkFjdGl2YUlkLFxyXG5cclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcblxyXG4gICAgbm9ybWFsaXphckFsdG9Nb2RvLFxyXG4gICAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcclxuXHJcbiAgICBudWV2b1RleHRvUmVmLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBzZWNjaW9uZXNPcmRlbmFkYXMgPSBbLi4uc2VjY2lvbmVzXS5zb3J0KChhLCBiKSA9PiBhLm9yZGVuIC0gYi5vcmRlbik7XHJcblxyXG4gIGNvbnN0IHNlY2Npb25QZW5kaWVudGVFbGltaW5hciA9IHVzZU1lbW8oXHJcbiAgICAoKSA9PiBzZWNjaW9uZXMuZmluZCgoc2VjY2lvbikgPT4gc2VjY2lvbi5pZCA9PT0gZGVsZXRlU2VjdGlvbk1vZGFsLnNlY3Rpb25JZCkgfHwgbnVsbCxcclxuICAgIFtzZWNjaW9uZXMsIGRlbGV0ZVNlY3Rpb25Nb2RhbC5zZWN0aW9uSWRdXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgY2FudGlkYWRFbGVtZW50b3NTZWNjaW9uUGVuZGllbnRlID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBpZiAoIXNlY2Npb25QZW5kaWVudGVFbGltaW5hcj8uaWQpIHJldHVybiAwO1xyXG4gICAgcmV0dXJuIG9iamV0b3MuZmlsdGVyKChvYmopID0+IG9iai5zZWNjaW9uSWQgPT09IHNlY2Npb25QZW5kaWVudGVFbGltaW5hci5pZCkubGVuZ3RoO1xyXG4gIH0sIFtvYmpldG9zLCBzZWNjaW9uUGVuZGllbnRlRWxpbWluYXJdKTtcclxuXHJcbiAgY29uc3Qge1xyXG4gICAgZWRpdGluZywgICAgICAvLyB7IGlkLCB2YWx1ZSB9XHJcbiAgICBzdGFydEVkaXQsICAgIC8vIChpZCwgaW5pdGlhbClcclxuICAgIHVwZGF0ZUVkaXQsICAgLy8gKG51ZXZvVmFsb3IpXHJcbiAgICBmaW5pc2hFZGl0ICAgIC8vICgpID0+IHZvaWRcclxuICB9ID0gdXNlSW5saW5lRWRpdG9yKCk7XHJcblxyXG4gIGNvbnN0IG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUgPSB1c2VDYWxsYmFjaygobm9kZSkgPT4ge1xyXG4gICAgaWYgKCFub2RlKSByZXR1cm4gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IG5vZGUuZ2V0Q2xhc3NOYW1lPy4oKSB8fCBudWxsO1xyXG4gICAgICBjb25zdCB4ID0gdHlwZW9mIG5vZGUueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiBudWxsO1xyXG4gICAgICBjb25zdCB5ID0gdHlwZW9mIG5vZGUueSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS55KCkgOiBudWxsO1xyXG4gICAgICBjb25zdCB0ZXh0V2lkdGggPVxyXG4gICAgICAgIGNsYXNzTmFtZSA9PT0gXCJUZXh0XCIgJiYgdHlwZW9mIG5vZGUuZ2V0VGV4dFdpZHRoID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgID8gTWF0aC5jZWlsKG5vZGUuZ2V0VGV4dFdpZHRoKCkgfHwgMClcclxuICAgICAgICAgIDogbnVsbDtcclxuICAgICAgY29uc3QgcmVjdCA9XHJcbiAgICAgICAgdHlwZW9mIG5vZGUuZ2V0Q2xpZW50UmVjdCA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgICA/IG5vZGUuZ2V0Q2xpZW50UmVjdCh7XHJcbiAgICAgICAgICAgICAgc2tpcFRyYW5zZm9ybTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICBza2lwU3Ryb2tlOiB0cnVlLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgOiBudWxsO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGNsYXNzTmFtZSxcclxuICAgICAgICB4LFxyXG4gICAgICAgIHksXHJcbiAgICAgICAgdGV4dFdpZHRoLFxyXG4gICAgICAgIHJlY3Q6IHJlY3RcclxuICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgIHg6IHJlY3QueCxcclxuICAgICAgICAgICAgICB5OiByZWN0LnksXHJcbiAgICAgICAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgOiBudWxsLFxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHsgZXJyb3I6IFN0cmluZyhlcnJvcikgfTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGNlcnJhck1lbnVzRmxvdGFudGVzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgc2V0TW9zdHJhclBhbmVsWihmYWxzZSk7XHJcbiAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoZmFsc2UpO1xyXG4gICAgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKGZhbHNlKTtcclxuICAgIHNldE1vc3RyYXJTZWxlY3RvclRhbWFubyhmYWxzZSk7XG4gICAgc2V0SG92ZXJJZChudWxsKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vID8/P0VsZW1lbnRvIGFjdHVhbG1lbnRlIHNlbGVjY2lvbmFkbyAobyBudWxsKVxuICBjb25zdCBvYmpldG9TZWxlY2Npb25hZG8gPVxyXG4gICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPT09IDFcclxuICAgICAgPyBvYmpldG9zLmZpbmQobyA9PiBvLmlkID09PSBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdKVxyXG4gICAgICA6IG51bGw7XHJcblxyXG4gIGNvbnN0IFttb3N0cmFyU2VsZWN0b3JUYW1hbm8sIHNldE1vc3RyYXJTZWxlY3RvclRhbWFub10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHRhbWFuaW9zRGlzcG9uaWJsZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAoMTIwIC0gNikgLyAyICsgMSB9LCAoXywgaSkgPT4gNiArIGkgKiAyKTtcclxuICBjb25zdCBbaWNvbm9dID0gdXNlSW1hZ2UodXJsRGF0YSk7XHJcbiAgY29uc3QgYm90b25PcGNpb25lc1JlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgY29uc3QgX3JlZkV2ZW50UXVldWVkID0gdXNlUmVmKG5ldyBTZXQoKSk7XHJcblxyXG4gIGNvbnN0IHJlZ2lzdGVyUmVmID0gdXNlQ2FsbGJhY2soKGlkLCBub2RlKSA9PiB7XHJcbiAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgZGVsZXRlIGVsZW1lbnRSZWZzLmN1cnJlbnRbaWRdO1xyXG4gICAgICBpbXBlcmF0aXZlT2JqZWN0cy5yZWdpc3Rlck9iamVjdChpZCwgbnVsbCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBlbGVtZW50UmVmcy5jdXJyZW50W2lkXSA9IG5vZGU7XHJcbiAgICBpbXBlcmF0aXZlT2JqZWN0cy5yZWdpc3Rlck9iamVjdChpZCwgbm9kZSk7XHJcblxyXG4gICAgLy8gPyBEZWJvdW5jZSBwb3IgZnJhbWUgcGFyYSBldml0YXIgcsOhZmFnYXMgZGUgcmUtYXR0YWNoIGRlbCBUcmFuc2Zvcm1lclxyXG4gICAgaWYgKF9yZWZFdmVudFF1ZXVlZC5jdXJyZW50LmhhcyhpZCkpIHJldHVybjtcclxuICAgIF9yZWZFdmVudFF1ZXVlZC5jdXJyZW50LmFkZChpZCk7XHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgX3JlZkV2ZW50UXVldWVkLmN1cnJlbnQuZGVsZXRlKGlkKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgIG5ldyBDdXN0b21FdmVudChcImVsZW1lbnQtcmVmLXJlZ2lzdHJhZG9cIiwgeyBkZXRhaWw6IHsgaWQgfSB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gY2F0Y2ggeyB9XHJcbiAgICB9KTtcclxuICB9LCBbaW1wZXJhdGl2ZU9iamVjdHNdKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gIGNvbnN0IGxvYWRlZEZvbnRGYW1pbGllc1JlZiA9IHVzZVJlZihuZXcgU2V0KCkpO1xyXG5cclxuXHJcbiAgY29uc3Qge1xyXG4gICAgaXNNb2JpbGUsXHJcbiAgICBpc01vYmlsZVBvcnRyYWl0LFxyXG4gICAgc2NhbGUsXHJcbiAgICBhbmNob0NvbnRlbmVkb3IsXHJcbiAgICBlc2NhbGFBY3RpdmEsXHJcbiAgICBlc2NhbGFWaXN1YWwsXHJcbiAgICB3cmFwcGVyQmFzZVdpZHRoLFxyXG4gICAgZXNjYWxhRml0TW9iaWxlUG9ydHJhaXQsXHJcbiAgfSA9IHVzZUNhbnZhc1NjYWxlTGF5b3V0KHtcbiAgICBjb250ZW5lZG9yUmVmLFxuICAgIHpvb20sXG4gIH0pO1xuXHJcbiAgY29uc3QgaW5saW5lRGVidWdBQiA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgcmV0dXJuIG5vcm1hbGl6ZUlubGluZURlYnVnQUIobnVsbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9ybWFsaXplSW5saW5lRGVidWdBQih3aW5kb3cuX19JTkxJTkVfQUIpO1xyXG4gIH0sIFtlZGl0aW5nLmlkLCBlZGl0aW5nLnZhbHVlXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUlubGluZU92ZXJsYXlNb3VudENoYW5nZSA9IHVzZUNhbGxiYWNrKChpZCwgbW91bnRlZCkgPT4ge1xyXG4gICAgY29uc3Qgc2FmZUlkID0gaWQgfHwgbnVsbDtcclxuICAgIGlmICghc2FmZUlkKSByZXR1cm47XHJcblxyXG4gICAgc2V0SW5saW5lT3ZlcmxheU1vdW50ZWRJZCgocHJldmlvdXMpID0+IHtcclxuICAgICAgY29uc3QgbmV4dCA9IG1vdW50ZWQgPyBzYWZlSWQgOiAocHJldmlvdXMgPT09IHNhZmVJZCA/IG51bGwgOiBwcmV2aW91cyk7XHJcbiAgICAgIGlubGluZURlYnVnTG9nKFwib3ZlcmxheS1tb3VudGVkLXN0YXRlXCIsIHtcclxuICAgICAgICBpZDogc2FmZUlkLFxyXG4gICAgICAgIG1vdW50ZWQsXHJcbiAgICAgICAgcHJldmlvdXNPdmVybGF5TW91bnRlZElkOiBwcmV2aW91cyxcclxuICAgICAgICBuZXh0T3ZlcmxheU1vdW50ZWRJZDogbmV4dCxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBuZXh0O1xyXG4gICAgfSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBjYXB0dXJlSW5saW5lU25hcHNob3QgPSB1c2VDYWxsYmFjaygoZXZlbnROYW1lLCBleHRyYSA9IHt9KSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG4gICAgaWYgKCFpc0lubGluZURlYnVnRW5hYmxlZCgpKSByZXR1cm47XHJcbiAgICBpZiAod2luZG93Ll9fSU5MSU5FX1NOQVBTSE9UICE9PSB0cnVlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qgc25hcHNob3RBbGxvd2xpc3QgPSBuZXcgU2V0KFtcclxuICAgICAgXCJlbnRlcjogcHJlLXN0YXJ0XCIsXHJcbiAgICAgIFwiZW50ZXI6IGFmdGVyLXN0YXJ0LXN5bmNcIixcclxuICAgICAgXCJmaW5pc2g6IGJsdXJcIixcclxuICAgICAgXCJmaW5pc2g6IGFmdGVyLWZpbmlzaEVkaXRcIixcclxuICAgICAgXCJleGl0OiBpbW1lZGlhdGVcIixcclxuICAgIF0pO1xyXG4gICAgaWYgKCFzbmFwc2hvdEFsbG93bGlzdC5oYXMoZXZlbnROYW1lKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGZyYW1lTWV0YSA9IG5leHRJbmxpbmVGcmFtZU1ldGEoKTtcclxuICAgIGNvbnN0IHNuYXBzaG90SWQgPVxyXG4gICAgICBleHRyYS5pZCB8fFxyXG4gICAgICBlZGl0aW5nLmlkIHx8XHJcbiAgICAgIGlubGluZUNvbW1pdERlYnVnUmVmLmN1cnJlbnQ/LmlkIHx8XHJcbiAgICAgIHByZXZFZGl0aW5nSWRSZWYuY3VycmVudCB8fFxyXG4gICAgICBudWxsO1xyXG5cclxuICAgIGNvbnN0IG5vZGUgPSBzbmFwc2hvdElkID8gZWxlbWVudFJlZnMuY3VycmVudFtzbmFwc2hvdElkXSA6IG51bGw7XHJcbiAgICBjb25zdCBub2RlTWV0cmljcyA9IG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUobm9kZSk7XHJcbiAgICBjb25zdCBvYmpNZXRyaWNzID0gc25hcHNob3RJZFxyXG4gICAgICA/ICgoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBvYmogPSBvYmpldG9zLmZpbmQoKG8pID0+IG8uaWQgPT09IHNuYXBzaG90SWQpO1xyXG4gICAgICAgICAgaWYgKCFvYmopIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IG9iai5pZCxcclxuICAgICAgICAgICAgdGlwbzogb2JqLnRpcG8gfHwgbnVsbCxcclxuICAgICAgICAgICAgeDogTnVtYmVyLmlzRmluaXRlKG9iai54KSA/IG9iai54IDogbnVsbCxcclxuICAgICAgICAgICAgeTogTnVtYmVyLmlzRmluaXRlKG9iai55KSA/IG9iai55IDogbnVsbCxcclxuICAgICAgICAgICAgdGV4dG9MZW5ndGg6IFN0cmluZyhvYmoudGV4dG8gPz8gXCJcIikubGVuZ3RoLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogTnVtYmVyLmlzRmluaXRlKG9iai5mb250U2l6ZSkgPyBvYmouZm9udFNpemUgOiBudWxsLFxyXG4gICAgICAgICAgICBsaW5lSGVpZ2h0OlxyXG4gICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShvYmoubGluZUhlaWdodCkgJiYgb2JqLmxpbmVIZWlnaHQgPiAwXHJcbiAgICAgICAgICAgICAgICA/IG9iai5saW5lSGVpZ2h0XHJcbiAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKClcclxuICAgICAgOiBudWxsO1xyXG5cclxuICAgIGNvbnN0IHN0YWdlID0gc3RhZ2VSZWYuY3VycmVudD8uZ2V0U3RhZ2U/LigpIHx8IHN0YWdlUmVmLmN1cnJlbnQgfHwgbnVsbDtcclxuICAgIGxldCBzdGFnZVJlY3QgPSBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgciA9IHN0YWdlPy5jb250YWluZXI/LigpPy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpO1xyXG4gICAgICBpZiAocikge1xyXG4gICAgICAgIHN0YWdlUmVjdCA9IHtcclxuICAgICAgICAgIHg6IHIueCxcclxuICAgICAgICAgIHk6IHIueSxcclxuICAgICAgICAgIHdpZHRoOiByLndpZHRoLFxyXG4gICAgICAgICAgaGVpZ2h0OiByLmhlaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgc3RhZ2VSZWN0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaW5saW5lUmVjdCA9IG51bGw7XHJcbiAgICBsZXQgaW5saW5lU3R5bGUgPSBudWxsO1xyXG4gICAgbGV0IGlubGluZUNvbnRlbnRSZWN0ID0gbnVsbDtcclxuICAgIGxldCBpbmxpbmVDb250ZW50TWV0cmljcyA9IG51bGw7XHJcbiAgICBpZiAoc25hcHNob3RJZCkge1xyXG4gICAgICBjb25zdCBzYWZlSWQgPSBTdHJpbmcoc25hcHNob3RJZCkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG4gICAgICBjb25zdCBvdmVybGF5RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmxpbmUtZWRpdG9yLWlkPVwiJHtzYWZlSWR9XCJdYCk7XHJcbiAgICAgIGlmIChvdmVybGF5RWwpIHtcclxuICAgICAgICBjb25zdCByID0gb3ZlcmxheUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlubGluZVJlY3QgPSB7XHJcbiAgICAgICAgICB4OiByLngsXHJcbiAgICAgICAgICB5OiByLnksXHJcbiAgICAgICAgICB3aWR0aDogci53aWR0aCxcclxuICAgICAgICAgIGhlaWdodDogci5oZWlnaHQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbmxpbmVTdHlsZSA9IHtcclxuICAgICAgICAgIGxlZnQ6IG92ZXJsYXlFbC5zdHlsZS5sZWZ0LFxyXG4gICAgICAgICAgdG9wOiBvdmVybGF5RWwuc3R5bGUudG9wLFxyXG4gICAgICAgICAgbWluV2lkdGg6IG92ZXJsYXlFbC5zdHlsZS5taW5XaWR0aCxcclxuICAgICAgICAgIG1heFdpZHRoOiBvdmVybGF5RWwuc3R5bGUubWF4V2lkdGgsXHJcbiAgICAgICAgICB3aWR0aDogb3ZlcmxheUVsLnN0eWxlLndpZHRoLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IG92ZXJsYXlFbC5xdWVyeVNlbGVjdG9yKCdbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXScpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRSZWN0ID0gY29udGVudEVsPy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpO1xyXG4gICAgICAgIGlmIChjb250ZW50UmVjdCkge1xyXG4gICAgICAgICAgaW5saW5lQ29udGVudFJlY3QgPSB7XHJcbiAgICAgICAgICAgIHg6IGNvbnRlbnRSZWN0LngsXHJcbiAgICAgICAgICAgIHk6IGNvbnRlbnRSZWN0LnksXHJcbiAgICAgICAgICAgIHdpZHRoOiBjb250ZW50UmVjdC53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjb250ZW50UmVjdC5oZWlnaHQsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbmxpbmVDb250ZW50TWV0cmljcyA9IGNvbnRlbnRFbFxyXG4gICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgc2Nyb2xsV2lkdGg6IGNvbnRlbnRFbC5zY3JvbGxXaWR0aCxcclxuICAgICAgICAgICAgICBjbGllbnRXaWR0aDogY29udGVudEVsLmNsaWVudFdpZHRoLFxyXG4gICAgICAgICAgICAgIGlzRm9jdXNlZDogZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gY29udGVudEVsLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA6IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgdHJhbnNmb3JtZXJSZWN0ID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVyID0gc3RhZ2U/LmZpbmRPbmU/LihcIlRyYW5zZm9ybWVyXCIpO1xyXG4gICAgICBpZiAodHJhbnNmb3JtZXIpIHtcclxuICAgICAgICBjb25zdCB0clJlY3QgPSB0cmFuc2Zvcm1lci5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB0cmFuc2Zvcm1lci5ub2Rlcz8uKCkgfHwgW107XHJcbiAgICAgICAgdHJhbnNmb3JtZXJSZWN0ID0gdHJSZWN0XHJcbiAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICB4OiB0clJlY3QueCxcclxuICAgICAgICAgICAgICB5OiB0clJlY3QueSxcclxuICAgICAgICAgICAgICB3aWR0aDogdHJSZWN0LndpZHRoLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogdHJSZWN0LmhlaWdodCxcclxuICAgICAgICAgICAgICBub2Rlc0NvdW50OiBub2Rlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgaW5jbHVkZXNTbmFwc2hvdE5vZGU6ICEhKG5vZGUgJiYgbm9kZXMuaW5jbHVkZXMobm9kZSkpLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA6IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICB0cmFuc2Zvcm1lclJlY3QgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlubGluZURlYnVnTG9nKGBzbmFwc2hvdC0ke2V2ZW50TmFtZX1gLCB7XHJcbiAgICAgIC4uLmZyYW1lTWV0YSxcclxuICAgICAgLi4uZXh0cmEsXHJcbiAgICAgIGlkOiBzbmFwc2hvdElkLFxyXG4gICAgICBldmVudE5hbWUsXHJcbiAgICAgIGVkaXRpbmdJZDogZWRpdGluZy5pZCA/PyBudWxsLFxyXG4gICAgICBjdXJyZW50RWRpdGluZ0lkOiB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbCxcclxuICAgICAgb3ZlcmxheU1vdW50ZWRJZDogaW5saW5lT3ZlcmxheU1vdW50ZWRJZCA/PyBudWxsLFxyXG4gICAgICBpbmxpbmVBQjogaW5saW5lRGVidWdBQixcclxuICAgICAgZXNjYWxhVmlzdWFsLFxyXG4gICAgICBzdGFnZVJlY3QsXHJcbiAgICAgIG5vZGVNZXRyaWNzLFxyXG4gICAgICBvYmpNZXRyaWNzLFxyXG4gICAgICB0cmFuc2Zvcm1lclJlY3QsXHJcbiAgICAgIGlubGluZVJlY3QsXHJcbiAgICAgIGlubGluZVN0eWxlLFxyXG4gICAgICBpbmxpbmVDb250ZW50UmVjdCxcclxuICAgICAgaW5saW5lQ29udGVudE1ldHJpY3MsXHJcbiAgICAgIHNjcm9sbFg6IHdpbmRvdy5zY3JvbGxYLFxyXG4gICAgICBzY3JvbGxZOiB3aW5kb3cuc2Nyb2xsWSxcclxuICAgICAgaW5uZXJXaWR0aDogd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgIGlubmVySGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICB9KTtcclxuICB9LCBbZWRpdGluZy5pZCwgZXNjYWxhVmlzdWFsLCBpbmxpbmVEZWJ1Z0FCLCBpbmxpbmVPdmVybGF5TW91bnRlZElkLCBvYmpldG9zLCBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50SWQgPSBlZGl0aW5nLmlkIHx8IG51bGw7XHJcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBTdHJpbmcoZWRpdGluZy52YWx1ZSA/PyBcIlwiKTtcclxuICAgIGNvbnN0IHByZXYgPSBpbmxpbmVSZW5kZXJWYWx1ZVJlZi5jdXJyZW50O1xyXG5cclxuICAgIGlmIChjdXJyZW50SWQgJiYgcHJldi5pZCA9PT0gY3VycmVudElkICYmIHByZXYudmFsdWUgIT09IGN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICBjb25zdCBwcmV2U3RhdHMgPSBnZXRJbmxpbmVMaW5lU3RhdHMocHJldi52YWx1ZSk7XHJcbiAgICAgIGNvbnN0IG5leHRTdGF0cyA9IGdldElubGluZUxpbmVTdGF0cyhjdXJyZW50VmFsdWUpO1xyXG4gICAgICBjb25zdCBsaW5lYnJlYWtDaGFuZ2VkID1cclxuICAgICAgICBwcmV2U3RhdHMubGluZUNvdW50ICE9PSBuZXh0U3RhdHMubGluZUNvdW50IHx8XHJcbiAgICAgICAgcHJldlN0YXRzLnRyYWlsaW5nTmV3bGluZXMgIT09IG5leHRTdGF0cy50cmFpbGluZ05ld2xpbmVzO1xyXG5cclxuICAgICAgaWYgKGxpbmVicmVha0NoYW5nZWQpIHtcclxuICAgICAgICBjb25zdCBmcmFtZU1ldGEgPSBuZXh0SW5saW5lRnJhbWVNZXRhKCk7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbY3VycmVudElkXSB8fCBudWxsO1xyXG4gICAgICAgIGNvbnN0IG5vZGVNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZShub2RlKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCkgfHwgc3RhZ2VSZWYuY3VycmVudCB8fCBudWxsO1xyXG4gICAgICAgIGxldCB0cmFuc2Zvcm1lclJlY3QgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lciA9IHN0YWdlPy5maW5kT25lPy4oXCJUcmFuc2Zvcm1lclwiKTtcclxuICAgICAgICAgIGlmICh0cmFuc2Zvcm1lcikge1xyXG4gICAgICAgICAgICBjb25zdCB0clJlY3QgPSB0cmFuc2Zvcm1lci5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiBmYWxzZSxcclxuICAgICAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxyXG4gICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IHRyYW5zZm9ybWVyLm5vZGVzPy4oKSB8fCBbXTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtZXJSZWN0ID0gdHJSZWN0XHJcbiAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgIHg6IHRyUmVjdC54LFxyXG4gICAgICAgICAgICAgICAgICB5OiB0clJlY3QueSxcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6IHRyUmVjdC53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0clJlY3QuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICBub2Rlc0NvdW50OiBub2Rlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzRWRpdGluZ05vZGU6ICEhKG5vZGUgJiYgbm9kZXMuaW5jbHVkZXMobm9kZSkpLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIHRyYW5zZm9ybWVyUmVjdCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgb3ZlcmxheVJlY3QgPSBudWxsO1xyXG4gICAgICAgIGxldCBjb250ZW50UmVjdCA9IG51bGw7XHJcbiAgICAgICAgY29uc3Qgc2FmZUlkID0gU3RyaW5nKGN1cnJlbnRJZCkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG4gICAgICAgIGNvbnN0IG92ZXJsYXlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlubGluZS1lZGl0b3ItaWQ9XCIke3NhZmVJZH1cIl1gKTtcclxuICAgICAgICBpZiAob3ZlcmxheUVsKSB7XHJcbiAgICAgICAgICBjb25zdCByID0gb3ZlcmxheUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgb3ZlcmxheVJlY3QgPSB7XHJcbiAgICAgICAgICAgIHg6IHIueCxcclxuICAgICAgICAgICAgeTogci55LFxyXG4gICAgICAgICAgICB3aWR0aDogci53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiByLmhlaWdodCxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBvdmVybGF5RWwucXVlcnlTZWxlY3RvcignW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0nKTtcclxuICAgICAgICAgIGNvbnN0IGNyID0gY29udGVudEVsPy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpO1xyXG4gICAgICAgICAgaWYgKGNyKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnRSZWN0ID0ge1xyXG4gICAgICAgICAgICAgIHg6IGNyLngsXHJcbiAgICAgICAgICAgICAgeTogY3IueSxcclxuICAgICAgICAgICAgICB3aWR0aDogY3Iud2lkdGgsXHJcbiAgICAgICAgICAgICAgaGVpZ2h0OiBjci5oZWlnaHQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbmxpbmVEZWJ1Z0xvZyhcImxpbmVicmVhay10cmFuc2Zvcm1lclwiLCB7XHJcbiAgICAgICAgICAuLi5mcmFtZU1ldGEsXHJcbiAgICAgICAgICBpZDogY3VycmVudElkLFxyXG4gICAgICAgICAgcHJldkxlbmd0aDogcHJldlN0YXRzLmxlbmd0aCxcclxuICAgICAgICAgIG5leHRMZW5ndGg6IG5leHRTdGF0cy5sZW5ndGgsXHJcbiAgICAgICAgICBwcmV2TGluZUNvdW50OiBwcmV2U3RhdHMubGluZUNvdW50LFxyXG4gICAgICAgICAgbmV4dExpbmVDb3VudDogbmV4dFN0YXRzLmxpbmVDb3VudCxcclxuICAgICAgICAgIHByZXZUcmFpbGluZ05ld2xpbmVzOiBwcmV2U3RhdHMudHJhaWxpbmdOZXdsaW5lcyxcclxuICAgICAgICAgIG5leHRUcmFpbGluZ05ld2xpbmVzOiBuZXh0U3RhdHMudHJhaWxpbmdOZXdsaW5lcyxcclxuICAgICAgICAgIG92ZXJsYXlNb3VudGVkSWQ6IGlubGluZU92ZXJsYXlNb3VudGVkSWQgPz8gbnVsbCxcclxuICAgICAgICAgIG92ZXJsYXlSZWN0LFxyXG4gICAgICAgICAgY29udGVudFJlY3QsXHJcbiAgICAgICAgICBub2RlTWV0cmljcyxcclxuICAgICAgICAgIHRyYW5zZm9ybWVyUmVjdCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiaW5wdXQ6IGFmdGVyLXJlbmRlclwiLCB7XHJcbiAgICAgICAgaWQ6IGN1cnJlbnRJZCxcclxuICAgICAgICBwcmV2aW91c0xlbmd0aDogcHJldi52YWx1ZS5sZW5ndGgsXHJcbiAgICAgICAgdmFsdWVMZW5ndGg6IGN1cnJlbnRWYWx1ZS5sZW5ndGgsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlubGluZVJlbmRlclZhbHVlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgIGlkOiBjdXJyZW50SWQsXHJcbiAgICAgIHZhbHVlOiBjdXJyZW50VmFsdWUsXHJcbiAgICB9O1xyXG4gIH0sIFtcclxuICAgIGVkaXRpbmcuaWQsXHJcbiAgICBlZGl0aW5nLnZhbHVlLFxyXG4gICAgY2FwdHVyZUlubGluZVNuYXBzaG90LFxyXG4gICAgaW5saW5lT3ZlcmxheU1vdW50ZWRJZCxcclxuICAgIG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUsXHJcbiAgXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG4gICAgaWYgKHdpbmRvdy5fX0lOTElORV9ERUJVRyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHdpbmRvdy5fX0lOTElORV9ERUJVRyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAod2luZG93Ll9fSU5MSU5FX0ZSQU1FX1NFUSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHdpbmRvdy5fX0lOTElORV9GUkFNRV9TRVEgPSAwO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm9ybWFsaXplZEFCID0gbm9ybWFsaXplSW5saW5lRGVidWdBQih3aW5kb3cuX19JTkxJTkVfQUIpO1xyXG4gICAgd2luZG93Ll9fSU5MSU5FX0FCID0geyAuLi5ub3JtYWxpemVkQUIgfTtcclxuICAgIGlubGluZURlYnVnTG9nKFwiZGVidWctZW5hYmxlZFwiLCB7XHJcbiAgICAgIGVuYWJsZWQ6IHdpbmRvdy5fX0lOTElORV9ERUJVRyxcclxuICAgICAgaW5saW5lQUI6IHdpbmRvdy5fX0lOTElORV9BQixcclxuICAgICAgZnJhbWVTZXE6IHdpbmRvdy5fX0lOTElORV9GUkFNRV9TRVEsXHJcbiAgICB9KTtcclxuICB9LCBbXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50SWQgPSBlZGl0aW5nLmlkIHx8IG51bGw7XHJcbiAgICBjb25zdCBwcmV2aW91c0lkID0gcHJldkVkaXRpbmdJZFJlZi5jdXJyZW50O1xyXG5cclxuICAgIGlmIChjdXJyZW50SWQgJiYgY3VycmVudElkICE9PSBwcmV2aW91c0lkKSB7XHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZW50ZXI6IHJhZjFcIiwgeyBpZDogY3VycmVudElkLCBwcmV2aW91c0lkIH0pO1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoXCJlbnRlcjogcmFmMlwiLCB7IGlkOiBjdXJyZW50SWQsIHByZXZpb3VzSWQgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghY3VycmVudElkICYmIHByZXZpb3VzSWQpIHtcclxuICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZXhpdDogaW1tZWRpYXRlXCIsIHsgaWQ6IHByZXZpb3VzSWQgfSk7XHJcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZXhpdDogcmFmMVwiLCB7IGlkOiBwcmV2aW91c0lkIH0pO1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoXCJleGl0OiByYWYyXCIsIHsgaWQ6IHByZXZpb3VzSWQgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXZFZGl0aW5nSWRSZWYuY3VycmVudCA9IGN1cnJlbnRJZDtcclxuICB9LCBbZWRpdGluZy5pZCwgY2FwdHVyZUlubGluZVNuYXBzaG90XSk7XHJcblxyXG4gIGNvbnN0IGZ1ZW50ZXNOZWNlc2FyaWFzID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICAvLyBmdWVudGVzIHVzYWRhcyBlbiB0ZXh0b3MgKyBjb3VudGRvd24gKHNpIGFwbGljYSkgKyBmb3JtYXMgY29uIHRleHRvIChyZWN0KVxyXG4gICAgY29uc3QgZm9udHMgPSAob2JqZXRvcyB8fCBbXSlcclxuICAgICAgLmZpbHRlcihvID0+IChvLnRpcG8gPT09IFwidGV4dG9cIiB8fCBvLnRpcG8gPT09IFwiY291bnRkb3duXCIgfHwgKG8udGlwbyA9PT0gXCJmb3JtYVwiICYmIG8uZmlndXJhID09PSBcInJlY3RcIikpICYmIG8uZm9udEZhbWlseSlcclxuICAgICAgLm1hcChvID0+IFN0cmluZyhvLmZvbnRGYW1pbHkpLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpLnNwbGl0KFwiLFwiKVswXS50cmltKCkpXHJcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XHJcblxyXG4gICAgcmV0dXJuIFsuLi5uZXcgU2V0KGZvbnRzKV07XHJcbiAgfSwgW29iamV0b3NdKTtcclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG4gICAgd2luZG93LmVkaXRpbmcgPSBlZGl0aW5nO1xyXG4gIH0sIFtlZGl0aW5nLmlkLCBlZGl0aW5nLnZhbHVlXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHByZXZpb3VzQ3VycmVudEVkaXRpbmdJZCA9IHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCA/PyBudWxsO1xyXG4gICAgd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkID0gZWRpdGluZz8uaWQgfHwgbnVsbDtcclxuXHJcbiAgICBpbmxpbmVEZWJ1Z0xvZyhcInN5bmMtZ2xvYmFsLWVkaXRpbmdcIiwge1xyXG4gICAgICBlZGl0aW5nSWQ6IGVkaXRpbmc/LmlkIHx8IG51bGwsXHJcbiAgICAgIHZhbHVlTGVuZ3RoOiBTdHJpbmcoZWRpdGluZz8udmFsdWUgPz8gXCJcIikubGVuZ3RoLFxyXG4gICAgICBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQsXHJcbiAgICAgIG5leHRDdXJyZW50RWRpdGluZ0lkOiB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpbmxpbmVEZWJ1Z0xvZyhcInN5bmMtZ2xvYmFsLWVkaXRpbmctY2xlYW51cFwiLCB7XHJcbiAgICAgICAgZWRpdGluZ0lkOiBlZGl0aW5nPy5pZCB8fCBudWxsLFxyXG4gICAgICAgIGN1cnJlbnRFZGl0aW5nSWQ6IHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCA/PyBudWxsLFxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHdpbmRvdy5lZGl0aW5nICYmIHdpbmRvdy5lZGl0aW5nLmlkID09PSBlZGl0aW5nLmlkKSB7XHJcbiAgICAgICAgZGVsZXRlIHdpbmRvdy5lZGl0aW5nO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPT09IGVkaXRpbmcuaWQpIHtcclxuICAgICAgICB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFtlZGl0aW5nLmlkXSk7XHJcblxyXG5cclxuICAvLyA/PyBGdW5jacOzbiBwYXJhIGFjdHVhbGl6YXIgb2Zmc2V0cyBkZSBpbWFnZW4gZGUgZm9uZG8gKFNJTiBVTkRFRklORUQpXHJcbiAgY29uc3QgYWN0dWFsaXphck9mZnNldEZvbmRvID0gdXNlQ2FsbGJhY2soKHNlY2Npb25JZCwgbnVldm9zT2Zmc2V0cywgZXNQcmV2aWV3ID0gZmFsc2UpID0+IHtcclxuICAgIHNldFNlY2Npb25lcyhwcmV2ID0+XHJcbiAgICAgIHByZXYubWFwKHMgPT4ge1xyXG4gICAgICAgIGlmIChzLmlkICE9PSBzZWNjaW9uSWQpIHJldHVybiBzO1xyXG5cclxuICAgICAgICAvLyA/PyBDUkVBUiBPQkpFVE8gTElNUElPXHJcbiAgICAgICAgY29uc3Qgc2VjY2lvbkFjdHVhbGl6YWRhID0geyAuLi5zIH07XHJcblxyXG4gICAgICAgIC8vID8/IFNPTE8gQUdSRUdBUiBDQU1QT1MgU0kgVElFTkVOIFZBTE9SRVMgVsOBTElET1NcclxuICAgICAgICBpZiAobnVldm9zT2Zmc2V0cy5vZmZzZXRYICE9PSB1bmRlZmluZWQgJiYgbnVldm9zT2Zmc2V0cy5vZmZzZXRYICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBzZWNjaW9uQWN0dWFsaXphZGEuZm9uZG9JbWFnZW5PZmZzZXRYID0gbnVldm9zT2Zmc2V0cy5vZmZzZXRYO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobnVldm9zT2Zmc2V0cy5vZmZzZXRZICE9PSB1bmRlZmluZWQgJiYgbnVldm9zT2Zmc2V0cy5vZmZzZXRZICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBzZWNjaW9uQWN0dWFsaXphZGEuZm9uZG9JbWFnZW5PZmZzZXRZID0gbnVldm9zT2Zmc2V0cy5vZmZzZXRZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNlY2Npb25BY3R1YWxpemFkYTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfSwgW3NldFNlY2Npb25lc10pO1xyXG5cclxuICAvLyBBc2lnbmEgdW5hIGltYWdlbiAocG9yIFVSTCkgYSBsYSBjZWxkYSBhY3RpdmFcclxuICBmdW5jdGlvbiBhc2lnbmFySW1hZ2VuQUdhbGVyaWEodXJsKSB7XHJcbiAgICBzZXRPYmpldG9zKChwcmV2KSA9PiB7XHJcbiAgICAgIGlmICghY2VsZGFHYWxlcmlhQWN0aXZhKSByZXR1cm4gcHJldjtcclxuICAgICAgY29uc3QgeyBvYmpJZCwgaW5kZXggfSA9IGNlbGRhR2FsZXJpYUFjdGl2YTtcclxuICAgICAgY29uc3QgaSA9IHByZXYuZmluZEluZGV4KG8gPT4gby5pZCA9PT0gb2JqSWQgJiYgby50aXBvID09PSBcImdhbGVyaWFcIik7XHJcbiAgICAgIGlmIChpID09PSAtMSkgcmV0dXJuIHByZXY7XHJcblxyXG4gICAgICBjb25zdCBjb3BpYSA9IHN0cnVjdHVyZWRDbG9uZShwcmV2KTtcclxuICAgICAgY29uc3QgZyA9IGNvcGlhW2ldO1xyXG4gICAgICAvLyBTZWd1cmlkYWQ6IHF1ZSBleGlzdGEgeSBxdWUgaGF5YSBjZWxsc1tpbmRleF1cclxuICAgICAgaWYgKCFnPy5jZWxscyB8fCAhZy5jZWxsc1tpbmRleF0pIHJldHVybiBwcmV2O1xyXG5cclxuICAgICAgZy5jZWxsc1tpbmRleF0gPSB7XHJcbiAgICAgICAgLi4uKGcuY2VsbHNbaW5kZXhdID8/IHt9KSxcclxuICAgICAgICBtZWRpYVVybDogdXJsLFxyXG4gICAgICAgIGZpdDogZy5jZWxsc1tpbmRleF0/LmZpdCA/PyBcImNvdmVyXCIsXHJcbiAgICAgICAgYmc6IGcuY2VsbHNbaW5kZXhdPy5iZyA/PyBcIiNlZWVcIixcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIGNvcGlhO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBMaW1waWFyIGZsYWcgZGUgcmVzaXplIGFsIG1vbnRhciBlbCBjb21wb25lbnRlXHJcbiAgICB3aW5kb3cuX3Jlc2l6ZURhdGEgPSBudWxsO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgW21vc3RyYXJQYW5lbFosIHNldE1vc3RyYXJQYW5lbFpdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICBjb25zdCBtb3ZlckVsZW1lbnRvID0gKGFjY2lvbikgPT4ge1xyXG4gICAgY29uc3QgaW5kZXggPSBvYmpldG9zLmZpbmRJbmRleCgobykgPT4gby5pZCA9PT0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc1swXSk7XHJcbiAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgbnVldm9zID0gWy4uLm9iamV0b3NdO1xyXG4gICAgY29uc3QgW2VsZW1lbnRvXSA9IG51ZXZvcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cclxuICAgIGlmIChhY2Npb24gPT09IFwiYWwtZnJlbnRlXCIpIHtcclxuICAgICAgbnVldm9zLnB1c2goZWxlbWVudG8pO1xyXG4gICAgfSBlbHNlIGlmIChhY2Npb24gPT09IFwiYWwtZm9uZG9cIikge1xyXG4gICAgICBudWV2b3MudW5zaGlmdChlbGVtZW50byk7XHJcbiAgICB9IGVsc2UgaWYgKGFjY2lvbiA9PT0gXCJzdWJpclwiICYmIGluZGV4IDwgb2JqZXRvcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgIG51ZXZvcy5zcGxpY2UoaW5kZXggKyAxLCAwLCBlbGVtZW50byk7XHJcbiAgICB9IGVsc2UgaWYgKGFjY2lvbiA9PT0gXCJiYWphclwiICYmIGluZGV4ID4gMCkge1xyXG4gICAgICBudWV2b3Muc3BsaWNlKGluZGV4IC0gMSwgMCwgZWxlbWVudG8pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbnVldm9zLnNwbGljZShpbmRleCwgMCwgZWxlbWVudG8pOyAvLyBzaW4gY2FtYmlvc1xyXG4gICAgfVxyXG5cclxuICAgIHNldE9iamV0b3MobnVldm9zKTtcclxuICAgIHNldE1vc3RyYXJQYW5lbFooZmFsc2UpO1xyXG4gIH07XHJcblxyXG5cclxuXHJcblxyXG4gIGNvbnN0IHtcclxuICAgIG9uRGVzaGFjZXIsXHJcbiAgICBvblJlaGFjZXIsXHJcbiAgICBvbkR1cGxpY2FyLFxyXG4gICAgb25FbGltaW5hcixcclxuICAgIG9uQ29waWFyLFxyXG4gICAgb25QZWdhcixcclxuICAgIG9uQ2FtYmlhckFsaW5lYWNpb25cclxuICB9ID0gdXNlRWRpdG9ySGFuZGxlcnMoe1xyXG4gICAgb2JqZXRvcyxcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICAgIGhpc3RvcmlhbCxcclxuICAgIHNldEhpc3RvcmlhbCxcclxuICAgIGZ1dHVyb3MsXHJcbiAgICBzZXRGdXR1cm9zLFxyXG4gICAgc2V0U2VjY2lvbmVzLFxyXG4gICAgaWdub3JlTmV4dFVwZGF0ZVJlZixcclxuICAgIHNldE1vc3RyYXJQYW5lbFpcclxuICB9KTtcclxuXHJcblxyXG4gIHVzZUhpc3RvcnlNYW5hZ2VyKHtcclxuICAgIGNhcmdhZG8sXHJcbiAgICBvYmpldG9zLFxyXG4gICAgc2VjY2lvbmVzLFxyXG4gICAgc2V0SGlzdG9yaWFsLFxyXG4gICAgc2V0RnV0dXJvcyxcclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYsXHJcbiAgfSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBzdGFnZSA9IHN0YWdlUmVmLmN1cnJlbnQ/LmdldFN0YWdlPy4oKTtcclxuICAgIGlmICghc3RhZ2UpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBjb250ZW50ID0gc3RhZ2UuY29udGVudDtcclxuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xyXG5cclxuICAgIC8vID8gRXN0YWRvIGJhc2U6IHNjcm9sbCB2ZXJ0aWNhbCBwZXJtaXRpZG8gc29icmUgY2FudmFzIHZhY8Otb1xyXG4gICAgY29uc3Qgc2V0U2Nyb2xsTW9kZSA9ICgpID0+IHtcclxuICAgICAgY29udGVudC5zdHlsZS50b3VjaEFjdGlvbiA9IFwicGFuLXlcIjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gPyBEdXJhbnRlIGRyYWc6IGJsb3F1ZWFyIHNjcm9sbCBwYXJhIGVkaXRhciBmaW5vXHJcbiAgICBjb25zdCBzZXRFZGl0TW9kZSA9ICgpID0+IHtcclxuICAgICAgY29udGVudC5zdHlsZS50b3VjaEFjdGlvbiA9IFwibm9uZVwiO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyA/IE5VRVZPOiBlc3RhZG8gUmVhY3QgY29uZmlhYmxlIHBhcmEgVUkgKFRyYW5zZm9ybWVyL2hvdmVyL2V0Yy4pXHJcbiAgICBjb25zdCBvbkRyYWdTdGFydCA9ICgpID0+IHtcclxuICAgICAgc2V0SXNEcmFnZ2luZyh0cnVlKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25EcmFnRW5kID0gKCkgPT4ge1xyXG4gICAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gPyBGYWlsc2FmZTogcG9yIHNpIHRlcm1pbmEg4oCccmFyb+KAnSAodG91Y2ggY2FuY2VsLCBwb2ludGVyIHVwLCBldGMuKVxyXG4gICAgY29uc3Qgc3RvcERyYWdnaW5nID0gKCkgPT4ge1xyXG4gICAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcclxuICAgICAgc2V0U2Nyb2xsTW9kZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBJbmljaWFsXHJcbiAgICBzZXRTY3JvbGxNb2RlKCk7XHJcbiAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTsgLy8gPz8gcG9yIGxhcyBkdWRhcywgYWwgbW9udGFyXHJcbiAgICBjb250ZW50LnN0eWxlLldlYmtpdFVzZXJTZWxlY3QgPSBcIm5vbmVcIjtcclxuICAgIGNvbnRlbnQuc3R5bGUuV2Via2l0VG91Y2hDYWxsb3V0ID0gXCJub25lXCI7XHJcblxyXG4gICAgLy8gS29udmEgZXZlbnRzXHJcbiAgICBzdGFnZS5vbihcImRyYWdzdGFydFwiLCBzZXRFZGl0TW9kZSk7XHJcbiAgICBzdGFnZS5vbihcImRyYWdlbmRcIiwgc2V0U2Nyb2xsTW9kZSk7XHJcblxyXG4gICAgLy8gPyBOVUVWTyAoVUkgc3RhdGUpXHJcbiAgICBzdGFnZS5vbihcImRyYWdzdGFydFwiLCBvbkRyYWdTdGFydCk7XHJcbiAgICBzdGFnZS5vbihcImRyYWdlbmRcIiwgb25EcmFnRW5kKTtcclxuXHJcbiAgICAvLyBGYWlsc2FmZXMgKHNpIGVsIGRyYWcgdGVybWluYSByYXJvKVxyXG4gICAgc3RhZ2Uub24oXCJ0b3VjaGVuZFwiLCBzdG9wRHJhZ2dpbmcpO1xyXG4gICAgc3RhZ2Uub24oXCJwb2ludGVydXBcIiwgc3RvcERyYWdnaW5nKTtcclxuICAgIHN0YWdlLm9uKFwibW91c2V1cFwiLCBzdG9wRHJhZ2dpbmcpO1xyXG4gICAgc3RhZ2Uub24oXCJ0b3VjaGNhbmNlbFwiLCBzdG9wRHJhZ2dpbmcpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHN0YWdlLm9mZihcImRyYWdzdGFydFwiLCBzZXRFZGl0TW9kZSk7XHJcbiAgICAgIHN0YWdlLm9mZihcImRyYWdlbmRcIiwgc2V0U2Nyb2xsTW9kZSk7XHJcblxyXG4gICAgICBzdGFnZS5vZmYoXCJkcmFnc3RhcnRcIiwgb25EcmFnU3RhcnQpO1xyXG4gICAgICBzdGFnZS5vZmYoXCJkcmFnZW5kXCIsIG9uRHJhZ0VuZCk7XHJcblxyXG4gICAgICBzdGFnZS5vZmYoXCJ0b3VjaGVuZFwiLCBzdG9wRHJhZ2dpbmcpO1xyXG4gICAgICBzdGFnZS5vZmYoXCJwb2ludGVydXBcIiwgc3RvcERyYWdnaW5nKTtcclxuICAgICAgc3RhZ2Uub2ZmKFwibW91c2V1cFwiLCBzdG9wRHJhZ2dpbmcpO1xyXG4gICAgICBzdGFnZS5vZmYoXCJ0b3VjaGNhbmNlbFwiLCBzdG9wRHJhZ2dpbmcpO1xyXG4gICAgfTtcclxuICB9LCBbc2V0SXNEcmFnZ2luZ10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCkgfHwgc3RhZ2VSZWYuY3VycmVudDtcbiAgICBjb25zdCBjb250ZW50ID0gc3RhZ2U/LmNvbnRlbnQgfHwgc3RhZ2U/LmNvbnRhaW5lcj8uKCk7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG5cbiAgICBjb25zdCBzZXREcmFnRGlzdGFuY2VGb3JJbnB1dCA9IChwb2ludGVyVHlwZSkgPT4ge1xuICAgICAgY29uc3QgaXNUb3VjaExpa2UgPVxuICAgICAgICBwb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiIHx8XG4gICAgICAgIHBvaW50ZXJUeXBlID09PSBcInBlblwiIHx8XG4gICAgICAgICh0eXBlb2YgcG9pbnRlclR5cGUgIT09IFwic3RyaW5nXCIgJiYgaXNNb2JpbGUpO1xuICAgICAgS29udmEuZHJhZ0Rpc3RhbmNlID0gaXNUb3VjaExpa2UgPyAxNCA6IDU7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uUG9pbnRlckRvd24gPSAoZXZlbnQpID0+IHNldERyYWdEaXN0YW5jZUZvcklucHV0KGV2ZW50LnBvaW50ZXJUeXBlKTtcbiAgICBjb25zdCBvblRvdWNoU3RhcnQgPSAoKSA9PiBzZXREcmFnRGlzdGFuY2VGb3JJbnB1dChcInRvdWNoXCIpO1xuICAgIGNvbnN0IG9uTW91c2VEb3duID0gKCkgPT4gc2V0RHJhZ0Rpc3RhbmNlRm9ySW5wdXQoXCJtb3VzZVwiKTtcblxuICAgIHNldERyYWdEaXN0YW5jZUZvcklucHV0KGlzTW9iaWxlID8gXCJ0b3VjaFwiIDogXCJtb3VzZVwiKTtcblxuICAgIGNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIG9uUG9pbnRlckRvd24sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICBjb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIG9uVG91Y2hTdGFydCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgIGNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBvbk1vdXNlRG93biwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnRlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIG9uUG9pbnRlckRvd24pO1xuICAgICAgY29udGVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBvblRvdWNoU3RhcnQpO1xuICAgICAgY29udGVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uTW91c2VEb3duKTtcbiAgICB9O1xuICB9LCBbaXNNb2JpbGVdKTtcblxyXG5cclxuXHJcblxyXG4gIC8vIFJlY29yZGFyIMO6bHRpbWEgc2VjY2nDs24gYWN0aXZhXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHNlY2Npb25BY3RpdmFJZCkgd2luZG93Ll9sYXN0U2VjY2lvbkFjdGl2YUlkID0gc2VjY2lvbkFjdGl2YUlkO1xuICB9LCBbc2VjY2lvbkFjdGl2YUlkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkKSB7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJzYWxpci1tb2RvLW1vdmVyLWZvbmRvXCIpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcImFjdGl2YXItbW9kby1tb3Zlci1mb25kb1wiLCB7XG4gICAgICAgIGRldGFpbDogeyBzZWN0aW9uSWQ6IG1vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkIH0sXG4gICAgICB9KVxuICAgICk7XG4gIH0sIFttb2JpbGVCYWNrZ3JvdW5kRWRpdFNlY3Rpb25JZF0pO1xuXHJcblxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFudWV2b1RleHRvUmVmLmN1cnJlbnQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBvYmogPSBvYmpldG9zLmZpbmQoKG8pID0+IG8uaWQgPT09IG51ZXZvVGV4dG9SZWYuY3VycmVudCk7XHJcbiAgICBpZiAob2JqKSB7XHJcbiAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW29iai5pZF0pO1xyXG4gICAgICAvLyBOTyBpbmljaWFyIGVkaWNpw7NuIGF1dG9tw6F0aWNhbWVudGUgLSBzb2xvIHNlbGVjY2lvbmFyXHJcbiAgICAgIG51ZXZvVGV4dG9SZWYuY3VycmVudCA9IG51bGw7XHJcbiAgICB9XHJcbiAgfSwgW29iamV0b3NdKTtcclxuXHJcblxyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUNsaWNrRnVlcmEgPSAoZSkgPT4ge1xyXG4gICAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoXCIucG9wdXAtZnVlbnRlXCIpKSB7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tGdWVyYSk7XHJcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja0Z1ZXJhKTtcclxuICB9LCBbXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAob25IaXN0b3JpYWxDaGFuZ2UpIHtcclxuXHJcbiAgICAgIG9uSGlzdG9yaWFsQ2hhbmdlKGhpc3RvcmlhbCk7XHJcbiAgICB9XHJcbiAgfSwgW2hpc3RvcmlhbCwgb25IaXN0b3JpYWxDaGFuZ2VdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChvbkZ1dHVyb3NDaGFuZ2UpIHtcclxuXHJcbiAgICAgIG9uRnV0dXJvc0NoYW5nZShmdXR1cm9zKTtcclxuICAgIH1cclxuICB9LCBbZnV0dXJvcywgb25GdXR1cm9zQ2hhbmdlXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBQcmUtY2FyZ2FyIGZ1ZW50ZXMgcG9wdWxhcmVzIGFsIGluaWNpYXJcclxuICAgIGZvbnRNYW5hZ2VyLnByZWxvYWRQb3B1bGFyRm9udHMoKTtcclxuXHJcbiAgICAvLyBFc2N1Y2hhciBldmVudG8gZGUgZnVlbnRlcyBjYXJnYWRhcyBwYXJhIHJlZGlidWphclxyXG4gICAgY29uc3QgaGFuZGxlRm9udHNMb2FkZWQgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChzdGFnZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgc3RhZ2VSZWYuY3VycmVudC5iYXRjaERyYXcoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9udHMtbG9hZGVkJywgaGFuZGxlRm9udHNMb2FkZWQpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb250cy1sb2FkZWQnLCBoYW5kbGVGb250c0xvYWRlZCk7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBhbGl2ZSA9IHRydWU7XHJcblxyXG4gICAgYXN5bmMgZnVuY3Rpb24gcHJlY2FyZ2FyKCkge1xyXG4gICAgICAvLyBTb2xvIHByZWNhcmdhciBmdWVudGVzIG51ZXZhcyBwYXJhIGV2aXRhciByZS1yZW5kZXJzIGdsb2JhbGVzIGRlbCBzdGFnZVxyXG4gICAgICBpZiAoIWZ1ZW50ZXNOZWNlc2FyaWFzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICBjb25zdCBwZW5kaWVudGVzID0gZnVlbnRlc05lY2VzYXJpYXMuZmlsdGVyKFxyXG4gICAgICAgIChmb250TmFtZSkgPT4gIWxvYWRlZEZvbnRGYW1pbGllc1JlZi5jdXJyZW50Lmhhcyhmb250TmFtZSlcclxuICAgICAgKTtcclxuICAgICAgaWYgKCFwZW5kaWVudGVzLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyA/IElkZWFsOiBxdWUgZm9udE1hbmFnZXIubG9hZEZvbnRzIGRldnVlbHZhIFByb21pc2VcclxuICAgICAgICAvLyBTaSBob3kgbm8gZGV2dWVsdmUsIGlndWFsIGxvIHJlc29sdmVtb3MgY29uIGRvY3VtZW50LmZvbnRzIG3DoXMgYWJham8uXHJcbiAgICAgICAgY29uc3QgbWF5YmVQcm9taXNlID0gZm9udE1hbmFnZXIubG9hZEZvbnRzPy4ocGVuZGllbnRlcyk7XHJcblxyXG4gICAgICAgIC8vIFNpIGRldnVlbHZlIHByb21pc2UsIGVzcGVyYW1vc1xyXG4gICAgICAgIGlmIChtYXliZVByb21pc2UgJiYgdHlwZW9mIG1heWJlUHJvbWlzZS50aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgIGF3YWl0IG1heWJlUHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID8gU2VndW5kbyBzZWd1cm86IGVzcGVyYXIgYSBxdWUgZWwgYnJvd3NlciBjb25maXJtZVxyXG4gICAgICAgIC8vIChlc3RvIGdhcmFudGl6YSBxdWUgbm8gaGF5YSBmYWxsYmFjaylcclxuICAgICAgICBpZiAoZG9jdW1lbnQ/LmZvbnRzPy5sb2FkKSB7XHJcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgcGVuZGllbnRlcy5tYXAoZiA9PlxyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmxvYWQoYDE2cHggXCIke2Z9XCJgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFsaXZlKSByZXR1cm47XHJcbiAgICAgICAgcGVuZGllbnRlcy5mb3JFYWNoKChmb250TmFtZSkgPT4gbG9hZGVkRm9udEZhbWlsaWVzUmVmLmN1cnJlbnQuYWRkKGZvbnROYW1lKSk7XHJcblxyXG4gICAgICAgIC8vIFJlZHJhdyBwb3Igc2kgYWNhc29cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgc3RhZ2VSZWYuY3VycmVudD8uYmF0Y2hEcmF3Py4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIj8/IEVycm9yIHByZWNhcmdhbmRvIGZ1ZW50ZXM6XCIsIGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU29sbyBwcmVjYXJnYXIgY3VhbmRvIHlhIGNhcmdhc3RlIGVsIGJvcnJhZG9yIChwYXJhIGV2aXRhciBvdmVybGF5IHJhcm8pXHJcbiAgICBpZiAoY2FyZ2FkbykgcHJlY2FyZ2FyKCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHsgYWxpdmUgPSBmYWxzZTsgfTtcclxuICB9LCBbY2FyZ2FkbywgZnVlbnRlc05lY2VzYXJpYXNdKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcblxyXG4gIH0sIFtzZWxlY2Npb25BY3RpdmEsIGFyZWFTZWxlY2Npb24sIGluaWNpb1NlbGVjY2lvbl0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICBjb25zdCBhY3R1YWxpemFyT2JqZXRvID0gKGluZGV4LCBudWV2bykgPT4ge1xyXG4gICAgY29uc3QgbnVldm9zID0gWy4uLm9iamV0b3NdO1xyXG4gICAgY29uc3QgeyBmcm9tVHJhbnNmb3JtLCAuLi5jbGVhbk51ZXZvIH0gPSBudWV2bztcclxuXHJcbiAgICAvLyBQcmVzZXJ2YXIgZGF0b3MgZXNwZWPDrWZpY29zIHNlZ8O6biBlbCB0aXBvIGRlIG9iamV0b1xyXG4gICAgaWYgKG51ZXZvc1tpbmRleF0udGlwbyA9PT0gJ2Zvcm1hJyAmJiBudWV2b3NbaW5kZXhdLmZpZ3VyYSA9PT0gJ2xpbmUnKSB7XHJcbiAgICAgIC8vIFBhcmEgbMOtbmVhcywgYXNlZ3VyYXIgcXVlIGxvcyBwdW50b3Mgc2UgcHJlc2VydmVuXHJcbiAgICAgIG51ZXZvc1tpbmRleF0gPSB7XHJcbiAgICAgICAgLi4ubnVldm9zW2luZGV4XSxcclxuICAgICAgICAuLi5jbGVhbk51ZXZvLFxyXG4gICAgICAgIHBvaW50czogY2xlYW5OdWV2by5wb2ludHMgfHwgbnVldm9zW2luZGV4XS5wb2ludHMgfHwgWzAsIDAsIDEwMCwgMF1cclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG51ZXZvc1tpbmRleF0gPSB7IC4uLm51ZXZvc1tpbmRleF0sIC4uLmNsZWFuTnVldm8gfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRPYmpldG9zKG51ZXZvcyk7XHJcbiAgfTtcclxuXHJcblxyXG4gIGNvbnN0IGFjdHVhbGl6YXJPYmpldG9Qb3JJZCA9IChpZCwgY2FtYmlvcykgPT4ge1xyXG4gICAgY29uc3QgaW5kZXggPSBvYmpldG9zLmZpbmRJbmRleCgobykgPT4gby5pZCA9PT0gaWQpO1xyXG4gICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGNvbnNvbGUud2FybihcIj8gTm8gc2UgZW5jb250csOzIGVsIG9iamV0byBjb24gSUQ6XCIsIGlkKTtcclxuICAgIGFjdHVhbGl6YXJPYmpldG8oaW5kZXgsIGNhbWJpb3MpO1xyXG4gIH07XHJcblxyXG5cclxuXHJcblxyXG4gIGNvbnN0IG5vcm1hbGl6YXJNZWRpZGFzR2FsZXJpYSA9IHVzZUNhbGxiYWNrKChnYWxlcmlhLCB3aWR0aENhbmRpZGF0ZSwgeENhbmRpZGF0ZSkgPT4ge1xyXG4gICAgY29uc3QgY2FudmFzV2lkdGggPSA4MDA7XHJcbiAgICBjb25zdCByb3dzID0gTWF0aC5tYXgoMSwgTnVtYmVyKGdhbGVyaWE/LnJvd3MpIHx8IDEpO1xyXG4gICAgY29uc3QgY29scyA9IE1hdGgubWF4KDEsIE51bWJlcihnYWxlcmlhPy5jb2xzKSB8fCAxKTtcclxuICAgIGNvbnN0IGdhcCA9IE1hdGgubWF4KDAsIE51bWJlcihnYWxlcmlhPy5nYXApIHx8IDApO1xyXG4gICAgY29uc3QgY2VsbFJhdGlvID1cclxuICAgICAgZ2FsZXJpYT8ucmF0aW8gPT09IFwiNDozXCJcclxuICAgICAgICA/IDMgLyA0XHJcbiAgICAgICAgOiBnYWxlcmlhPy5yYXRpbyA9PT0gXCIxNjo5XCJcclxuICAgICAgICAgID8gOSAvIDE2XHJcbiAgICAgICAgICA6IDE7XHJcblxyXG4gICAgY29uc3QgbWluR3JpZFdpZHRoID0gZ2FwICogKGNvbHMgLSAxKSArIGNvbHM7XHJcbiAgICBsZXQgd2lkdGhQY3QgPSAoTnVtYmVyKHdpZHRoQ2FuZGlkYXRlKSAvIGNhbnZhc1dpZHRoKSAqIDEwMDtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHdpZHRoUGN0KSkgd2lkdGhQY3QgPSBOdW1iZXIoZ2FsZXJpYT8ud2lkdGhQY3QpO1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUod2lkdGhQY3QpKSB3aWR0aFBjdCA9IDcwO1xyXG4gICAgd2lkdGhQY3QgPSBNYXRoLm1heCgxMCwgTWF0aC5taW4oMTAwLCB3aWR0aFBjdCkpO1xyXG5cclxuICAgIGxldCB3aWR0aCA9IChjYW52YXNXaWR0aCAqIHdpZHRoUGN0KSAvIDEwMDtcclxuICAgIHdpZHRoID0gTWF0aC5taW4oY2FudmFzV2lkdGgsIE1hdGgubWF4KG1pbkdyaWRXaWR0aCwgd2lkdGgpKTtcclxuICAgIHdpZHRoUGN0ID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDEwMCwgKHdpZHRoIC8gY2FudmFzV2lkdGgpICogMTAwKSk7XHJcblxyXG4gICAgY29uc3QgbWF4WCA9IE1hdGgubWF4KDAsIGNhbnZhc1dpZHRoIC0gd2lkdGgpO1xyXG4gICAgY29uc3QgZmFsbGJhY2tYID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcihnYWxlcmlhPy54KSkgPyBOdW1iZXIoZ2FsZXJpYS54KSA6IDA7XHJcbiAgICBjb25zdCByYXdYID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcih4Q2FuZGlkYXRlKSkgPyBOdW1iZXIoeENhbmRpZGF0ZSkgOiBmYWxsYmFja1g7XHJcbiAgICBjb25zdCB4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocmF3WCwgbWF4WCkpO1xyXG5cclxuICAgIGNvbnN0IGNlbGxXID0gTWF0aC5tYXgoMSwgKHdpZHRoIC0gZ2FwICogKGNvbHMgLSAxKSkgLyBjb2xzKTtcclxuICAgIGNvbnN0IGNlbGxIID0gY2VsbFcgKiBjZWxsUmF0aW87XHJcbiAgICBjb25zdCBoZWlnaHQgPSByb3dzICogY2VsbEggKyBnYXAgKiAocm93cyAtIDEpO1xyXG5cclxuICAgIHJldHVybiB7IHdpZHRoLCBoZWlnaHQsIHdpZHRoUGN0LCB4IH07XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBhY3R1YWxpemFyTGluZWEgPSAobGluZUlkLCBudWV2YURhdGEpID0+IHtcclxuICAgIGNvbnN0IGluZGV4ID0gb2JqZXRvcy5maW5kSW5kZXgob2JqID0+IG9iai5pZCA9PT0gbGluZUlkKTtcclxuXHJcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobnVldmFEYXRhLmlzUHJldmlldykge1xyXG4gICAgICAvLyBQcmV2aWV3OiBTb2xvIGFjdHVhbGl6YWNpw7NuIHZpc3VhbCBzaW4gaGlzdG9yaWFsXHJcbiAgICAgIHNldE9iamV0b3MocHJldiA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9zID0gWy4uLnByZXZdO1xyXG4gICAgICAgIGNvbnN0IHsgaXNQcmV2aWV3LCAuLi5jbGVhbkRhdGEgfSA9IG51ZXZhRGF0YTtcclxuXHJcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxvcyBwdW50b3Mgc2llbXByZSBzZWFuIHVuIGFycmF5IHbDoWxpZG9cclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnBvaW50cykge1xyXG4gICAgICAgICAgY2xlYW5EYXRhLnBvaW50cyA9IGNsZWFuRGF0YS5wb2ludHMubWFwKHAgPT4gcGFyc2VGbG9hdChwKSB8fCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID8/IFBSRVNFUlZBUiBzdHJva2VXaWR0aCBzaSBleGlzdGVcclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnN0cm9rZVdpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGNsZWFuRGF0YS5zdHJva2VXaWR0aCA9IHBhcnNlSW50KGNsZWFuRGF0YS5zdHJva2VXaWR0aCkgfHwgMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG51ZXZvc1tpbmRleF0gPSB7IC4uLm51ZXZvc1tpbmRleF0sIC4uLmNsZWFuRGF0YSB9O1xyXG4gICAgICAgIHJldHVybiBudWV2b3M7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChudWV2YURhdGEuaXNGaW5hbCkge1xyXG4gICAgICAvLyBGaW5hbDogR3VhcmRhciBlbiBoaXN0b3JpYWxcclxuICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICBjb25zdCBudWV2b3MgPSBbLi4ucHJldl07XHJcbiAgICAgICAgY29uc3QgeyBpc0ZpbmFsLCAuLi5jbGVhbkRhdGEgfSA9IG51ZXZhRGF0YTtcclxuXHJcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxvcyBwdW50b3Mgc2llbXByZSBzZWFuIHVuIGFycmF5IHbDoWxpZG9cclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnBvaW50cykge1xyXG4gICAgICAgICAgY2xlYW5EYXRhLnBvaW50cyA9IGNsZWFuRGF0YS5wb2ludHMubWFwKHAgPT4gcGFyc2VGbG9hdChwKSB8fCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID8/IFBSRVNFUlZBUiBzdHJva2VXaWR0aCBzaSBleGlzdGVcclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnN0cm9rZVdpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGNsZWFuRGF0YS5zdHJva2VXaWR0aCA9IHBhcnNlSW50KGNsZWFuRGF0YS5zdHJva2VXaWR0aCkgfHwgMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG51ZXZvc1tpbmRleF0gPSB7IC4uLm51ZXZvc1tpbmRleF0sIC4uLmNsZWFuRGF0YSB9O1xyXG4gICAgICAgIHJldHVybiBudWV2b3M7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAvLyA/PyBNw6l0cmljYXMgZGUgdGV4dG8gY29uc2lzdGVudGVzIGNvbiBlbCByZW5kZXIgZGUgRWxlbWVudG9DYW52YXNcclxuICBjb25zdCBvYnRlbmVyTWV0cmljYXNUZXh0byA9ICh0ZXh0bywge1xyXG4gICAgZm9udFNpemUgPSAyNCxcclxuICAgIGZvbnRGYW1pbHkgPSBcInNhbnMtc2VyaWZcIixcclxuICAgIGZvbnRXZWlnaHQgPSBcIm5vcm1hbFwiLFxyXG4gICAgZm9udFN0eWxlID0gXCJub3JtYWxcIixcclxuICAgIGxpbmVIZWlnaHQgPSAxLjIsXHJcbiAgfSA9IHt9KSA9PiB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIGlmICghY3R4KSB7XHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrU2l6ZSA9IE51bWJlci5pc0Zpbml0ZShmb250U2l6ZSkgJiYgZm9udFNpemUgPiAwID8gZm9udFNpemUgOiAyNDtcclxuICAgICAgcmV0dXJuIHsgd2lkdGg6IE1hdGgubWF4KDIwLCBTdHJpbmcodGV4dG8gPz8gXCJcIikubGVuZ3RoICogKGZhbGxiYWNrU2l6ZSAqIDAuNTUpKSwgaGVpZ2h0OiBmYWxsYmFja1NpemUgKiBsaW5lSGVpZ2h0IH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FmZUZvbnRTaXplID0gTnVtYmVyLmlzRmluaXRlKGZvbnRTaXplKSAmJiBmb250U2l6ZSA+IDAgPyBmb250U2l6ZSA6IDI0O1xyXG4gICAgY29uc3Qgc2FmZUxpbmVIZWlnaHQgPSBOdW1iZXIuaXNGaW5pdGUobGluZUhlaWdodCkgJiYgbGluZUhlaWdodCA+IDAgPyBsaW5lSGVpZ2h0IDogMS4yO1xyXG4gICAgY29uc3Qgc2FmZUZhbWlseSA9IFN0cmluZyhmb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwiKTtcclxuICAgIGNvbnN0IGZvbnRGb3JDYW52YXMgPSBzYWZlRmFtaWx5LmluY2x1ZGVzKFwiLFwiKVxyXG4gICAgICA/IHNhZmVGYW1pbHlcclxuICAgICAgOiAoL1xccy8udGVzdChzYWZlRmFtaWx5KSA/IGBcIiR7c2FmZUZhbWlseX1cImAgOiBzYWZlRmFtaWx5KTtcclxuXHJcbiAgICBjdHguZm9udCA9IGAke2ZvbnRTdHlsZSB8fCBcIm5vcm1hbFwifSAke2ZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn0gJHtzYWZlRm9udFNpemV9cHggJHtmb250Rm9yQ2FudmFzfWA7XHJcblxyXG4gICAgY29uc3QgcmF3VGV4dCA9IFN0cmluZyh0ZXh0byA/PyBcIlwiKTtcclxuICAgIGNvbnN0IHNhZmVUZXh0ID0gcmF3VGV4dC5yZXBsYWNlKC9bIFxcdF0rJC9nbSwgXCJcIik7XHJcbiAgICBjb25zdCBsaW5lcyA9IHNhZmVUZXh0LnNwbGl0KC9cXHI/XFxuLyk7XHJcbiAgICBjb25zdCBtYXhMaW5lV2lkdGggPSBNYXRoLm1heCguLi5saW5lcy5tYXAoKGxpbmUpID0+IGN0eC5tZWFzdXJlVGV4dChsaW5lKS53aWR0aCksIDIwKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWR0aDogbWF4TGluZVdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHNhZmVGb250U2l6ZSAqIHNhZmVMaW5lSGVpZ2h0ICogTWF0aC5tYXgobGluZXMubGVuZ3RoLCAxKSxcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbWVkaXJBbmNob1RleHRvS29udmEgPSB1c2VDYWxsYmFjaygob2JqVGV4dG8sIHRleHRvT2JqZXRpdm8pID0+IHtcclxuICAgIGlmICghb2JqVGV4dG8gfHwgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2FmZVRleHQgPSBTdHJpbmcodGV4dG9PYmpldGl2byA/PyBcIlwiKS5yZXBsYWNlKC9bIFxcdF0rJC9nbSwgXCJcIik7XHJcbiAgICAgIGNvbnN0IHNhZmVGb250RmFtaWx5ID0gZm9udE1hbmFnZXIuaXNGb250QXZhaWxhYmxlKG9ialRleHRvLmZvbnRGYW1pbHkpXHJcbiAgICAgICAgPyBvYmpUZXh0by5mb250RmFtaWx5XHJcbiAgICAgICAgOiBcInNhbnMtc2VyaWZcIjtcclxuICAgICAgY29uc3Qgc2FmZUZvbnRTaXplID1cclxuICAgICAgICBOdW1iZXIuaXNGaW5pdGUob2JqVGV4dG8uZm9udFNpemUpICYmIG9ialRleHRvLmZvbnRTaXplID4gMFxyXG4gICAgICAgICAgPyBvYmpUZXh0by5mb250U2l6ZVxyXG4gICAgICAgICAgOiAyNDtcclxuICAgICAgY29uc3QgYmFzZUxpbmVIZWlnaHQgPVxyXG4gICAgICAgIE51bWJlci5pc0Zpbml0ZShvYmpUZXh0by5saW5lSGVpZ2h0KSAmJiBvYmpUZXh0by5saW5lSGVpZ2h0ID4gMFxyXG4gICAgICAgICAgPyBvYmpUZXh0by5saW5lSGVpZ2h0XHJcbiAgICAgICAgICA6IDEuMjtcclxuXHJcbiAgICAgIGNvbnN0IHByb2JlID0gbmV3IEtvbnZhLlRleHQoe1xyXG4gICAgICAgIHRleHQ6IHNhZmVUZXh0LFxyXG4gICAgICAgIGZvbnRTaXplOiBzYWZlRm9udFNpemUsXHJcbiAgICAgICAgZm9udEZhbWlseTogc2FmZUZvbnRGYW1pbHksXHJcbiAgICAgICAgZm9udFdlaWdodDogb2JqVGV4dG8uZm9udFdlaWdodCB8fCBcIm5vcm1hbFwiLFxyXG4gICAgICAgIGZvbnRTdHlsZTogb2JqVGV4dG8uZm9udFN0eWxlIHx8IFwibm9ybWFsXCIsXHJcbiAgICAgICAgbGluZUhlaWdodDogYmFzZUxpbmVIZWlnaHQgKiAwLjkyLFxyXG4gICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgd3JhcDogXCJub25lXCIsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3Qgd2lkdGggPSBOdW1iZXIocHJvYmUuZ2V0VGV4dFdpZHRoPy4oKSB8fCAwKTtcclxuICAgICAgcHJvYmUuZGVzdHJveSgpO1xyXG5cclxuICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZSh3aWR0aCkgJiYgd2lkdGggPiAwID8gd2lkdGggOiBudWxsO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgY2FsY3VsYXJYVGV4dG9DZW50cmFkbyA9IHVzZUNhbGxiYWNrKChvYmpUZXh0bywgdGV4dG9PYmpldGl2bykgPT4ge1xyXG4gICAgaWYgKCFvYmpUZXh0byB8fCBvYmpUZXh0by50aXBvICE9PSBcInRleHRvXCIpIHJldHVybiBOdW1iZXIuaXNGaW5pdGUob2JqVGV4dG8/LngpID8gb2JqVGV4dG8ueCA6IDA7XHJcblxyXG4gICAgY29uc3QgYmFzZUxpbmVIZWlnaHQgPVxyXG4gICAgICB0eXBlb2Ygb2JqVGV4dG8ubGluZUhlaWdodCA9PT0gXCJudW1iZXJcIiAmJiBvYmpUZXh0by5saW5lSGVpZ2h0ID4gMFxyXG4gICAgICAgID8gb2JqVGV4dG8ubGluZUhlaWdodFxyXG4gICAgICAgIDogMS4yO1xyXG5cclxuICAgIGNvbnN0IHByZXZpb3VzTWV0cmljcyA9IG9idGVuZXJNZXRyaWNhc1RleHRvKG9ialRleHRvLnRleHRvLCB7XHJcbiAgICAgIGZvbnRTaXplOiBvYmpUZXh0by5mb250U2l6ZSxcclxuICAgICAgZm9udEZhbWlseTogb2JqVGV4dG8uZm9udEZhbWlseSxcclxuICAgICAgZm9udFdlaWdodDogb2JqVGV4dG8uZm9udFdlaWdodCxcclxuICAgICAgZm9udFN0eWxlOiBvYmpUZXh0by5mb250U3R5bGUsXHJcbiAgICAgIGxpbmVIZWlnaHQ6IGJhc2VMaW5lSGVpZ2h0ICogMC45MixcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IG5leHRNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzVGV4dG8odGV4dG9PYmpldGl2bywge1xyXG4gICAgICBmb250U2l6ZTogb2JqVGV4dG8uZm9udFNpemUsXHJcbiAgICAgIGZvbnRGYW1pbHk6IG9ialRleHRvLmZvbnRGYW1pbHksXHJcbiAgICAgIGZvbnRXZWlnaHQ6IG9ialRleHRvLmZvbnRXZWlnaHQsXHJcbiAgICAgIGZvbnRTdHlsZTogb2JqVGV4dG8uZm9udFN0eWxlLFxyXG4gICAgICBsaW5lSGVpZ2h0OiBiYXNlTGluZUhlaWdodCAqIDAuOTIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwcmV2aW91c1dpZHRoRnJvbUtvbnZhID0gbWVkaXJBbmNob1RleHRvS29udmEob2JqVGV4dG8sIG9ialRleHRvLnRleHRvKTtcclxuICAgIGNvbnN0IG5leHRXaWR0aEZyb21Lb252YSA9IG1lZGlyQW5jaG9UZXh0b0tvbnZhKG9ialRleHRvLCB0ZXh0b09iamV0aXZvKTtcclxuXHJcbiAgICBjb25zdCBwcmV2aW91c1dpZHRoID1cclxuICAgICAgTnVtYmVyLmlzRmluaXRlKHByZXZpb3VzV2lkdGhGcm9tS29udmEpICYmIHByZXZpb3VzV2lkdGhGcm9tS29udmEgPiAwXHJcbiAgICAgICAgPyBwcmV2aW91c1dpZHRoRnJvbUtvbnZhXHJcbiAgICAgICAgOiBwcmV2aW91c01ldHJpY3Mud2lkdGg7XHJcbiAgICBjb25zdCBuZXh0V2lkdGggPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUobmV4dFdpZHRoRnJvbUtvbnZhKSAmJiBuZXh0V2lkdGhGcm9tS29udmEgPiAwXHJcbiAgICAgICAgPyBuZXh0V2lkdGhGcm9tS29udmFcclxuICAgICAgICA6IG5leHRNZXRyaWNzLndpZHRoO1xyXG5cclxuICAgIGNvbnN0IGN1cnJlbnRYID0gTnVtYmVyLmlzRmluaXRlKG9ialRleHRvLngpID8gb2JqVGV4dG8ueCA6IDA7XHJcbiAgICBjb25zdCBjZW50ZXJYID0gY3VycmVudFggKyAocHJldmlvdXNXaWR0aCAvIDIpO1xyXG4gICAgcmV0dXJuIGNlbnRlclggLSAobmV4dFdpZHRoIC8gMik7XHJcbiAgfSwgW29idGVuZXJNZXRyaWNhc1RleHRvLCBtZWRpckFuY2hvVGV4dG9Lb252YV0pO1xyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9IChlKSA9PiB7XHJcbiAgICAgIGlmICghZS50YXJnZXQuY2xvc2VzdChcIi5tZW51LXotaW5kZXhcIikpIHtcclxuICAgICAgICBzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcclxuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XHJcbiAgfSwgW10pO1xyXG5cclxuXHJcblxyXG4gIGNvbnN0IGFjdHVhbGl6YXJGb25kb1NlY2Npb24gPSAoaWQsIG51ZXZvRm9uZG8pID0+IHtcclxuICAgIHNldFNlY2Npb25lcygocHJldikgPT5cclxuICAgICAgcHJldi5tYXAoKHMpID0+IHMuaWQgPT09IGlkID8geyAuLi5zLCBmb25kbzogbnVldm9Gb25kbyB9IDogcylcclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgdXNlS2V5Ym9hcmRTaG9ydGN1dHMoe1xyXG4gICAgb25EZXNoYWNlcixcclxuICAgIG9uUmVoYWNlcixcclxuICAgIG9uRHVwbGljYXIsXHJcbiAgICBvbkVsaW1pbmFyLFxyXG4gICAgb25EZXNlbGVjY2lvbmFyOiAoKSA9PiB7XHJcbiAgICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtdKTtcclxuICAgICAgICBzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKTtcclxuICAgICAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoZmFsc2UpO1xyXG4gICAgICAgIHNldE1vc3RyYXJTZWxlY3RvckZ1ZW50ZShmYWxzZSk7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vKGZhbHNlKTtcbiAgICAgICAgc2V0SG92ZXJJZChudWxsKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uQ29waWFyLFxyXG4gICAgb25QZWdhcixcclxuICAgIG9uQ2FtYmlhckFsaW5lYWNpb24sXHJcbiAgICBpc0VkaXRpbmc6ICEhZWRpdGluZy5pZCxcclxuICAgIHRpZW5lU2VsZWNjaW9uOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCA+IDBcclxuICB9KTtcclxuXHJcblxyXG4gIGNvbnN0IGNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbiA9IHVzZUNhbGxiYWNrKChzZWNjaW9uSWQsIG51ZXZvQ29sb3IpID0+IHtcclxuXHJcbiAgICBzZXRTZWNjaW9uZXMocHJldiA9PlxyXG4gICAgICBwcmV2Lm1hcChzID0+IHtcclxuICAgICAgICBpZiAocy5pZCAhPT0gc2VjY2lvbklkKSByZXR1cm4gcztcclxuICAgICAgICByZXR1cm4geyAuLi5zLCBmb25kbzogbnVldm9Db2xvciB9O1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9LCBbc2V0U2VjY2lvbmVzXSk7XHJcblxyXG5cclxuICB1c2VFZGl0b3JXaW5kb3dCcmlkZ2Uoe1xyXG4gICAgc2VjY2lvbmVzT3JkZW5hZGFzLFxyXG4gICAgc2VjY2lvbmVzLFxyXG4gICAgc2VjY2lvbkFjdGl2YUlkLFxyXG4gICAgb2JqZXRvcyxcclxuICAgIGFsdG9DYW52YXMsXHJcbiAgICBjYWxjdWxhck9mZnNldFksXHJcblxyXG4gICAgY2FtYmlhckNvbG9yRm9uZG9TZWNjaW9uLFxyXG5cclxuICAgIG9uRGVzaGFjZXIsXHJcbiAgICBvblJlaGFjZXIsXHJcbiAgICBoaXN0b3JpYWxMZW5ndGg6IGhpc3RvcmlhbC5sZW5ndGgsXHJcbiAgICBmdXR1cm9zTGVuZ3RoOiBmdXR1cm9zLmxlbmd0aCxcclxuXHJcbiAgICBzdGFnZVJlZixcclxuICB9KTtcclxuXHJcblxyXG4gIGNvbnN0IGVzU2VjY2lvblBhbnRhbGxhQnlJZCA9IHVzZUNhbGxiYWNrKChzZWNjaW9uSWQpID0+IHtcclxuICAgIGNvbnN0IHMgPSBzZWNjaW9uZXNPcmRlbmFkYXMuZmluZCh4ID0+IHguaWQgPT09IHNlY2Npb25JZCk7XHJcbiAgICByZXR1cm4gcyAmJiBub3JtYWxpemFyQWx0b01vZG8ocy5hbHRvTW9kbykgPT09IFwicGFudGFsbGFcIjtcclxuICB9LCBbc2VjY2lvbmVzT3JkZW5hZGFzXSk7XHJcblxyXG5cclxuICBjb25zdCBhbHRvQ2FudmFzRGluYW1pY28gPSBzZWNjaW9uZXNPcmRlbmFkYXMucmVkdWNlKChhY2MsIHMpID0+IGFjYyArIHMuYWx0dXJhLCAwKSB8fCA4MDA7XHJcblxyXG4gIGNvbnN0IGFicmlyTW9kYWxCb3JyYXJTZWNjaW9uID0gdXNlQ2FsbGJhY2soKHNlY2Npb25JZCkgPT4ge1xyXG4gICAgaWYgKCFzZWNjaW9uSWQgfHwgaXNEZWxldGluZ1NlY3Rpb24pIHJldHVybjtcclxuICAgIHNldERlbGV0ZVNlY3Rpb25Nb2RhbCh7IGlzT3BlbjogdHJ1ZSwgc2VjdGlvbklkOiBzZWNjaW9uSWQgfSk7XHJcbiAgfSwgW2lzRGVsZXRpbmdTZWN0aW9uXSk7XHJcblxyXG4gIGNvbnN0IGNlcnJhck1vZGFsQm9ycmFyU2VjY2lvbiA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmIChpc0RlbGV0aW5nU2VjdGlvbikgcmV0dXJuO1xyXG4gICAgc2V0RGVsZXRlU2VjdGlvbk1vZGFsKHsgaXNPcGVuOiBmYWxzZSwgc2VjdGlvbklkOiBudWxsIH0pO1xyXG4gIH0sIFtpc0RlbGV0aW5nU2VjdGlvbl0pO1xyXG5cclxuICBjb25zdCBjb25maXJtYXJCb3JyYXJTZWNjaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2VjY2lvbklkID0gZGVsZXRlU2VjdGlvbk1vZGFsLnNlY3Rpb25JZDtcclxuICAgIGlmICghc2VjY2lvbklkIHx8IGlzRGVsZXRpbmdTZWN0aW9uKSByZXR1cm47XHJcblxyXG4gICAgc2V0SXNEZWxldGluZ1NlY3Rpb24odHJ1ZSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBib3JyYXJTZWNjaW9uRXh0ZXJuYWwoe1xyXG4gICAgICAgIHNlY2Npb25JZCxcclxuICAgICAgICBzZWNjaW9uZXMsXHJcbiAgICAgICAgb2JqZXRvcyxcclxuICAgICAgICBzbHVnLFxyXG4gICAgICAgIHNlY2Npb25BY3RpdmFJZCxcclxuICAgICAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICAgICAgc2V0T2JqZXRvcyxcclxuICAgICAgICBzZXRTZWNjaW9uQWN0aXZhSWQsXHJcbiAgICAgIH0pO1xyXG4gICAgICBzZXREZWxldGVTZWN0aW9uTW9kYWwoeyBpc09wZW46IGZhbHNlLCBzZWN0aW9uSWQ6IG51bGwgfSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc0RlbGV0aW5nU2VjdGlvbihmYWxzZSk7XHJcbiAgICB9XHJcbiAgfSwgW1xyXG4gICAgZGVsZXRlU2VjdGlvbk1vZGFsLnNlY3Rpb25JZCxcclxuICAgIGlzRGVsZXRpbmdTZWN0aW9uLFxyXG4gICAgc2VjY2lvbmVzLFxyXG4gICAgb2JqZXRvcyxcclxuICAgIHNsdWcsXHJcbiAgICBzZWNjaW9uQWN0aXZhSWQsXHJcbiAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICBzZXRPYmpldG9zLFxyXG4gICAgc2V0U2VjY2lvbkFjdGl2YUlkLFxyXG4gIF0pO1xyXG5cclxuXHJcbiAgLy8gMykgQ2FkYSB2ZXogcXVlIGVsIHVzdWFyaW8gc2VsZWNjaW9uYSB1bmEgc2VjY2nDs24sIGFjdHVhbGl6YW1vcyBnbG9iYWwgeSBub3RpZmljYW1vc1xyXG4gIGNvbnN0IG9uU2VsZWN0U2VjY2lvbiA9IChpZCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gc2kgeWEgdGVuw6lzIHVuIHNldFNlY2Npb25BY3RpdmFJZCwgbGxhbWFsbyBhY8OhOlxyXG4gICAgICBzZXRTZWNjaW9uQWN0aXZhSWQoaWQpO1xyXG5cclxuICAgICAgd2luZG93Ll9zZWNjaW9uQWN0aXZhSWQgPSBpZDtcclxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwic2VjY2lvbi1hY3RpdmFcIiwgeyBkZXRhaWw6IHsgaWQgfSB9KSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIk5vIHB1ZGUgZW1pdGlyIHNlY2Npb24tYWN0aXZhOlwiLCBlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBFamVtcGxvIGRlIHVzbzogZW4gZWwgaGFuZGxlciBkZSBjbGljayBkZSBsYSBzZWNjacOzblxyXG4gIC8vIDxSZWN0IG9uQ2xpY2s9eygpID0+IG9uU2VsZWN0U2VjY2lvbihzZWNjaW9uLmlkKX0gLi4uIC8+XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAvLyA/PyBOVUVWTyBIT09LIFBBUkEgR1XDjUFTXHJcbiAgY29uc3Qge1xyXG4gICAgZ3VpYUxpbmVhcyxcclxuICAgIG1vc3RyYXJHdWlhcyxcclxuICAgIGxpbXBpYXJHdWlhcyxcclxuICAgIGNvbmZpZ3VyYXJEcmFnRW5kXHJcbiAgfSA9IHVzZUd1aWFzQ2VudHJhZG8oe1xyXG4gICAgYW5jaG9DYW52YXM6IDgwMCxcclxuICAgIGFsdG9DYW52YXM6IGFsdG9DYW52YXNEaW5hbWljbyxcclxuICAgIC8vIFVYOiBndcOtYSBkZSBzZWNjacOzbiBzb2xvIGFsIGNlbnRyYXIsIGNvbiBpbcOhbiBzdXRpbC5cclxuICAgIG1hcmdlblNlbnNpYmlsaWRhZDogOCxcclxuICAgIG1hZ25ldFJhZGl1czogMTAsXHJcbiAgICBzZWN0aW9uTWFnbmV0UmFkaXVzOiA2LFxyXG4gICAgc25hcFN0cmVuZ3RoOiAwLjgsXHJcbiAgICBzZWN0aW9uU25hcFN0cmVuZ3RoOiAxLFxyXG4gICAgc2VjdGlvbkxpbmVUb2xlcmFuY2U6IDAuNzUsXHJcbiAgICBzbmFwVG9FZGdlczogdHJ1ZSxcclxuICAgIHNuYXBUb0NlbnRlcnM6IHRydWUsXHJcbiAgICBzZWNjaW9uZXNPcmRlbmFkYXNcclxuICB9KTtcclxuXHJcbiAgLy8gPz8gRnVuY2nDs24gcGFyYSBhY3R1YWxpemFyIHBvc2ljacOzbiBkZWwgYm90w7NuIFNJTiByZS1yZW5kZXJcclxuICBjb25zdCB7IGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgfSA9IHVzZU9wdGlvbkJ1dHRvblBvc2l0aW9uKHtcbiAgICBib3Rvbk9wY2lvbmVzUmVmLFxuICAgIGVsZW1lbnRSZWZzLFxuICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgc3RhZ2VSZWYsXG4gICAgZXNjYWxhVmlzdWFsLFxuICAgIGVzY2FsYUFjdGl2YSxcbiAgfSk7XG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBvbkRyYWdTdGFydEdsb2JhbCA9ICgpID0+IHtcclxuICAgICAgLy8gbGltcGlhciBob3Zlci9wcmVzZWxlY2Npw7NuIGlubWVkaWF0YW1lbnRlIHBhcmEgZXZpdGFyIFwiZmxhc2hcIiB2aXN1YWxcclxuICAgICAgZmx1c2hTeW5jKCgpID0+IHtcclxuICAgICAgICBzZXRIb3ZlcklkKG51bGwpO1xyXG4gICAgICAgIHNldEVsZW1lbnRvc1ByZVNlbGVjY2lvbmFkb3MoW10pO1xyXG4gICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IG9uRHJhZ0VuZEdsb2JhbCA9ICgpID0+IHtcclxuICAgICAgLy8gbmFkYSBwb3IgYWhvcmE7IHNpIHF1aXNpZXJhcywgcG9kcsOtYXMgcmVjYWxjdWxhciBhbGdvIGFjw6FcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZ2luZy1zdGFydFwiLCBvbkRyYWdTdGFydEdsb2JhbCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdnaW5nLWVuZFwiLCBvbkRyYWdFbmRHbG9iYWwpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnZ2luZy1zdGFydFwiLCBvbkRyYWdTdGFydEdsb2JhbCk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ2dpbmctZW5kXCIsIG9uRHJhZ0VuZEdsb2JhbCk7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gIC8vID8/IE9QVElNSVpBQ0nDk046IExpbXBpYXIgY2FjaGUgZGUgaW50ZXJzZWNjacOzbiBhbCBjYW1iaWFyIHNlbGVjY2nDs25cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gTGltcGlhciBjYWNoZSBjdWFuZG8gY2FtYmlhIGxhIHNlbGVjY2nDs25cclxuICAgIGlmICh3aW5kb3cuX2xpbmVJbnRlcnNlY3Rpb25DYWNoZSkge1xyXG4gICAgICB3aW5kb3cuX2xpbmVJbnRlcnNlY3Rpb25DYWNoZSA9IHt9O1xyXG4gICAgfVxyXG4gIH0sIFtlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aF0pO1xyXG5cclxuICAvLyA/PyBPUFRJTUlaQUNJw5NOOiBGb3J6YXIgYWN0dWFsaXphY2nDs24gZGUgbMOtbmVhcyBkZXNwdcOpcyBkZSBkcmFnIGdydXBhbFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAod2luZG93Ll9ncnVwb0xpZGVyIHx8IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgLy8gU29sbyBjb3JyZXIgZXN0YSBvcHRpbWl6YWNpw7NuIGN1YW5kbyBhY2FiYSBkZSBmaW5hbGl6YXIgdW4gZHJhZyBncnVwYWwuXHJcbiAgICBjb25zdCBub3cgPVxyXG4gICAgICB0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgPyBwZXJmb3JtYW5jZS5ub3coKVxyXG4gICAgICAgIDogRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IHJlY2VudGx5RW5kZWRHcm91cERyYWcgPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUod2luZG93Ll9za2lwVW50aWwpICYmIHdpbmRvdy5fc2tpcFVudGlsID4gbm93O1xyXG4gICAgaWYgKCFyZWNlbnRseUVuZGVkR3JvdXBEcmFnKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaGF5TGluZWFzID0gb2JqZXRvcy5zb21lKG9iaiA9PlxyXG4gICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG9iai5pZCkgJiZcclxuICAgICAgb2JqLnRpcG8gPT09ICdmb3JtYScgJiZcclxuICAgICAgb2JqLmZpZ3VyYSA9PT0gJ2xpbmUnXHJcbiAgICApO1xyXG4gICAgaWYgKCFoYXlMaW5lYXMpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50W2lkXTtcclxuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmdldExheWVyKSB7XHJcbiAgICAgICAgICBub2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LCA1MCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgfSwgW2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MsIG9iamV0b3NdKTtcclxuXHJcblxyXG4gIGNvbnN0IGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiAobGluZU9iaiwgYXJlYSwgc3RhZ2UpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBpZiAoIWxpbmVPYmogfHwgIWFyZWEgfHwgIWxpbmVPYmoucG9pbnRzKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBwb2ludHMgPSBsaW5lT2JqLnBvaW50cztcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocG9pbnRzKSB8fCBwb2ludHMubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgcG9pbnRzID0gWzAsIDAsIDEwMCwgMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwdW50b3NMaW1waW9zID0gW1xyXG4gICAgICAgICAgcGFyc2VGbG9hdChwb2ludHNbMF0pIHx8IDAsXHJcbiAgICAgICAgICBwYXJzZUZsb2F0KHBvaW50c1sxXSkgfHwgMCxcclxuICAgICAgICAgIHBhcnNlRmxvYXQocG9pbnRzWzJdKSB8fCAxMDAsXHJcbiAgICAgICAgICBwYXJzZUZsb2F0KHBvaW50c1szXSkgfHwgMFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vID8/IFVTQVIgTEEgUE9TSUNJw5NOIERFTCBOT0RPIFJFQUwgRU4gRUwgU1RBR0VcclxuICAgICAgICBjb25zdCBub2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2xpbmVPYmouaWRdO1xyXG4gICAgICAgIGNvbnN0IGxpbmVYID0gbm9kZSA/IG5vZGUueCgpIDogKGxpbmVPYmoueCB8fCAwKTtcclxuICAgICAgICBjb25zdCBsaW5lWSA9IG5vZGUgPyBub2RlLnkoKSA6IChsaW5lT2JqLnkgfHwgMCk7XHJcblxyXG4gICAgICAgIC8vIENvb3JkZW5hZGFzIGFic29sdXRhcyBkZSBsb3MgcHVudG9zXHJcbiAgICAgICAgY29uc3Qgc3RhcnRYID0gbGluZVggKyBwdW50b3NMaW1waW9zWzBdO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0WSA9IGxpbmVZICsgcHVudG9zTGltcGlvc1sxXTtcclxuICAgICAgICBjb25zdCBlbmRYID0gbGluZVggKyBwdW50b3NMaW1waW9zWzJdO1xyXG4gICAgICAgIGNvbnN0IGVuZFkgPSBsaW5lWSArIHB1bnRvc0xpbXBpb3NbM107XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gPz8gTcOJVE9ETyAxOiBWZXJpZmljYXIgc2kgYWxnw7puIHB1bnRvIGVzdMOhIGRlbnRybyBkZWwgw6FyZWFcclxuICAgICAgICBjb25zdCBzdGFydERlbnRybyA9IChcclxuICAgICAgICAgIHN0YXJ0WCA+PSBhcmVhLnggJiYgc3RhcnRYIDw9IGFyZWEueCArIGFyZWEud2lkdGggJiZcclxuICAgICAgICAgIHN0YXJ0WSA+PSBhcmVhLnkgJiYgc3RhcnRZIDw9IGFyZWEueSArIGFyZWEuaGVpZ2h0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZW5kRGVudHJvID0gKFxyXG4gICAgICAgICAgZW5kWCA+PSBhcmVhLnggJiYgZW5kWCA8PSBhcmVhLnggKyBhcmVhLndpZHRoICYmXHJcbiAgICAgICAgICBlbmRZID49IGFyZWEueSAmJiBlbmRZIDw9IGFyZWEueSArIGFyZWEuaGVpZ2h0XHJcbiAgICAgICAgKTtcclxuXHJcblxyXG4gICAgICAgIGlmIChzdGFydERlbnRybyB8fCBlbmREZW50cm8pIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gPz8gTcOJVE9ETyAyOiBWZXJpZmljYXIgaW50ZXJzZWNjacOzbiBsw61uZWEtcmVjdMOhbmd1bG9cclxuICAgICAgICBjb25zdCBpbnRlcnNlY3RhID0gbGluZUludGVyc2VjdHNSZWN0KFxyXG4gICAgICAgICAgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksXHJcbiAgICAgICAgICBhcmVhLngsIGFyZWEueSwgYXJlYS54ICsgYXJlYS53aWR0aCwgYXJlYS55ICsgYXJlYS5oZWlnaHRcclxuICAgICAgICApO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKGludGVyc2VjdGEpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBGdW5jacOzbiBhdXhpbGlhciBwYXJhIHZlcmlmaWNhciBpbnRlcnNlY2Npw7NuIGzDrW5lYS1yZWN0w6FuZ3Vsb1xyXG4gIGZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzUmVjdCh4MSwgeTEsIHgyLCB5MiwgcmVjdExlZnQsIHJlY3RUb3AsIHJlY3RSaWdodCwgcmVjdEJvdHRvbSkge1xyXG4gICAgLy8gVmVyaWZpY2FyIHNpIGxhIGzDrW5lYSBpbnRlcnNlY3RhIGNvbiBhbGd1bm8gZGUgbG9zIDQgbGFkb3MgZGVsIHJlY3TDoW5ndWxvXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0VG9wLCByZWN0UmlnaHQsIHJlY3RUb3ApIHx8IC8vIFRvcFxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RSaWdodCwgcmVjdFRvcCwgcmVjdFJpZ2h0LCByZWN0Qm90dG9tKSB8fCAvLyBSaWdodFxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0Qm90dG9tLCByZWN0UmlnaHQsIHJlY3RCb3R0b20pIHx8IC8vIEJvdHRvbVxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0VG9wLCByZWN0TGVmdCwgcmVjdEJvdHRvbSkgLy8gTGVmdFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIEZ1bmNpw7NuIGF1eGlsaWFyIHBhcmEgdmVyaWZpY2FyIGludGVyc2VjY2nDs24gbMOtbmVhLWzDrW5lYVxyXG4gIGZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzTGluZSh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpIHtcclxuICAgIGNvbnN0IGRlbm9tID0gKHgxIC0geDIpICogKHkzIC0geTQpIC0gKHkxIC0geTIpICogKHgzIC0geDQpO1xyXG4gICAgaWYgKE1hdGguYWJzKGRlbm9tKSA8IDAuMDAwMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IHQgPSAoKHgxIC0geDMpICogKHkzIC0geTQpIC0gKHkxIC0geTMpICogKHgzIC0geDQpKSAvIGRlbm9tO1xyXG4gICAgY29uc3QgdSA9IC0oKHgxIC0geDIpICogKHkxIC0geTMpIC0gKHkxIC0geTIpICogKHgxIC0geDMpKSAvIGRlbm9tO1xyXG5cclxuICAgIHJldHVybiB0ID49IDAgJiYgdCA8PSAxICYmIHUgPj0gMCAmJiB1IDw9IDE7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gPz8gQWp1c3RhciBlbCB0cmFuc2Zvcm1lciBjdWFuZG8gY2FtYmlhIGVsIHRleHRvIGlubGluZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWVkaXRpbmcuaWQgfHwgIWVsZW1lbnRSZWZzLmN1cnJlbnRbZWRpdGluZy5pZF0pIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBub2RlID0gZWxlbWVudFJlZnMuY3VycmVudFtlZGl0aW5nLmlkXTtcclxuICAgIGNvbnN0IG9iamV0b0VuRWRpY2lvbiA9IG9iamV0b3MuZmluZCgobykgPT4gby5pZCA9PT0gZWRpdGluZy5pZCk7XHJcbiAgICBpZiAoIW9iamV0b0VuRWRpY2lvbikgcmV0dXJuO1xyXG4gICAgY29uc3Qgbm9kZUNsYXNzID0gbm9kZS5nZXRDbGFzc05hbWU/LigpO1xyXG4gICAgY29uc3QgYmVmb3JlTWV0cmljcyA9IG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUobm9kZSk7XHJcbiAgICBjb25zdCBlZGl0aW5nVmFsdWUgPSBTdHJpbmcoZWRpdGluZy52YWx1ZSA/PyBcIlwiKTtcclxuXHJcbiAgICBjb25zdCBzaG91bGRLZWVwQ2VudGVyUHJldmlldyA9XHJcbiAgICAgIG9iamV0b0VuRWRpY2lvbi50aXBvID09PSBcInRleHRvXCIgJiZcclxuICAgICAgIW9iamV0b0VuRWRpY2lvbi5fX2dyb3VwQWxpZ24gJiZcclxuICAgICAgIU51bWJlci5pc0Zpbml0ZShvYmpldG9FbkVkaWNpb24ud2lkdGgpICYmXHJcbiAgICAgIG9iamV0b0VuRWRpY2lvbi5fX2F1dG9XaWR0aCAhPT0gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgZXhwZWN0ZWRYID0gc2hvdWxkS2VlcENlbnRlclByZXZpZXdcclxuICAgICAgPyBjYWxjdWxhclhUZXh0b0NlbnRyYWRvKG9iamV0b0VuRWRpY2lvbiwgZWRpdGluZ1ZhbHVlKVxyXG4gICAgICA6IChOdW1iZXIuaXNGaW5pdGUob2JqZXRvRW5FZGljaW9uLngpID8gb2JqZXRvRW5FZGljaW9uLnggOiBudWxsKTtcclxuXHJcbiAgICBpbmxpbmVEZWJ1Z0xvZyhcInByZXZpZXctZWZmZWN0LXN0YXJ0XCIsIHtcclxuICAgICAgaWQ6IGVkaXRpbmcuaWQsXHJcbiAgICAgIHZhbHVlTGVuZ3RoOiBlZGl0aW5nVmFsdWUubGVuZ3RoLFxyXG4gICAgICBub2RlQ2xhc3MsXHJcbiAgICAgIG9ialg6IG9iamV0b0VuRWRpY2lvbi54ID8/IG51bGwsXHJcbiAgICAgIG9ialk6IG9iamV0b0VuRWRpY2lvbi55ID8/IG51bGwsXHJcbiAgICAgIHNob3VsZEtlZXBDZW50ZXJQcmV2aWV3LFxyXG4gICAgICBleHBlY3RlZFgsXHJcbiAgICAgIGJlZm9yZU1ldHJpY3MsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyA/PyBBY3R1YWxpemFyIGVsIHRyYW5zZm9ybWVyIHNpIGVzdMOhIHByZXNlbnRlXHJcbiAgICBjb25zdCB0cmFuc2Zvcm1lciA9IG5vZGUuZ2V0U3RhZ2UoKT8uZmluZE9uZSgnVHJhbnNmb3JtZXInKTtcclxuICAgIGlmICh0cmFuc2Zvcm1lciAmJiB0cmFuc2Zvcm1lci5ub2RlcyAmJiB0cmFuc2Zvcm1lci5ub2RlcygpLmluY2x1ZGVzKG5vZGUpKSB7XHJcbiAgICAgIHRyYW5zZm9ybWVyLmZvcmNlVXBkYXRlKCk7IC8vIEFjdHVhbGl6YSBtYW51YWxtZW50ZSBlbCB0cmFuc2Zvcm1lclxyXG4gICAgICB0cmFuc2Zvcm1lci5nZXRMYXllcigpPy5iYXRjaERyYXcoKTsgLy8gUmVkaWJ1amFcclxuXHJcbiAgICAgIGxldCB0cmFuc2Zvcm1lclJlY3QgPSBudWxsO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHRyYW5zZm9ybWVyUmVjdCA9IHRyYW5zZm9ybWVyLmdldENsaWVudFJlY3Qoe1xyXG4gICAgICAgICAgc2tpcFRyYW5zZm9ybTogZmFsc2UsXHJcbiAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxyXG4gICAgICAgICAgc2tpcFN0cm9rZTogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJSZWN0ID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaW5saW5lRGVidWdMb2coXCJwcmV2aWV3LXRyYW5zZm9ybWVyLXVwZGF0ZWRcIiwge1xyXG4gICAgICAgIGlkOiBlZGl0aW5nLmlkLFxyXG4gICAgICAgIHRyYW5zZm9ybWVyUmVjdDogdHJhbnNmb3JtZXJSZWN0XHJcbiAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICB4OiB0cmFuc2Zvcm1lclJlY3QueCxcclxuICAgICAgICAgICAgICB5OiB0cmFuc2Zvcm1lclJlY3QueSxcclxuICAgICAgICAgICAgICB3aWR0aDogdHJhbnNmb3JtZXJSZWN0LndpZHRoLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogdHJhbnNmb3JtZXJSZWN0LmhlaWdodCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgOiBudWxsLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhZnRlck1ldHJpY3MgPSBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lKG5vZGUpO1xyXG4gICAgY29uc3QgYWZ0ZXJYID1cclxuICAgICAgdHlwZW9mIG5vZGUueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiBhZnRlck1ldHJpY3M/LnggPz8gbnVsbDtcclxuICAgIGlubGluZURlYnVnTG9nKFwicHJldmlldy1wcm9wcy1zeW5jXCIsIHtcclxuICAgICAgaWQ6IGVkaXRpbmcuaWQsXHJcbiAgICAgIHZhbHVlTGVuZ3RoOiBlZGl0aW5nVmFsdWUubGVuZ3RoLFxyXG4gICAgICBleHBlY3RlZFgsXHJcbiAgICAgIGFmdGVyWCxcclxuICAgICAgZGVsdGFYOlxyXG4gICAgICAgIE51bWJlci5pc0Zpbml0ZShhZnRlclgpICYmIE51bWJlci5pc0Zpbml0ZShleHBlY3RlZFgpXHJcbiAgICAgICAgICA/IGFmdGVyWCAtIGV4cGVjdGVkWFxyXG4gICAgICAgICAgOiBudWxsLFxyXG4gICAgICBiZWZvcmVNZXRyaWNzLFxyXG4gICAgICBhZnRlck1ldHJpY3MsXHJcbiAgICB9KTtcclxuICB9LCBbZWRpdGluZy5pZCwgZWRpdGluZy52YWx1ZSwgb2JqZXRvcywgb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZSwgY2FsY3VsYXJYVGV4dG9DZW50cmFkb10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgcGVuZGluZyA9IGlubGluZUNvbW1pdERlYnVnUmVmLmN1cnJlbnQ7XHJcbiAgICBpZiAoIXBlbmRpbmc/LmlkKSByZXR1cm47XHJcbiAgICBpZiAoZWRpdGluZy5pZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGZpbmFsT2JqID0gb2JqZXRvcy5maW5kKChvKSA9PiBvLmlkID09PSBwZW5kaW5nLmlkKTtcclxuICAgIGNvbnN0IGZpbmFsTm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbcGVuZGluZy5pZF07XHJcbiAgICBjb25zdCBmaW5hbE5vZGVNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZShmaW5hbE5vZGUpO1xyXG4gICAgY29uc3QgZmluYWxYID0gTnVtYmVyLmlzRmluaXRlKGZpbmFsT2JqPy54KSA/IGZpbmFsT2JqLnggOiBudWxsO1xyXG4gICAgY29uc3QgZGVsdGFGaW5hbFZzRXhwZWN0ZWQgPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUoZmluYWxYKSAmJiBOdW1iZXIuaXNGaW5pdGUocGVuZGluZy5leHBlY3RlZFgpXHJcbiAgICAgICAgPyBmaW5hbFggLSBwZW5kaW5nLmV4cGVjdGVkWFxyXG4gICAgICAgIDogbnVsbDtcclxuXHJcbiAgICBpbmxpbmVEZWJ1Z0xvZyhcImZpbmlzaC1wb3N0LWNvbW1pdFwiLCB7XHJcbiAgICAgIC4uLnBlbmRpbmcsXHJcbiAgICAgIGZpbmFsWCxcclxuICAgICAgZGVsdGFGaW5hbFZzRXhwZWN0ZWQsXHJcbiAgICAgIGZpbmFsTm9kZU1ldHJpY3MsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpbmxpbmVDb21taXREZWJ1Z1JlZi5jdXJyZW50ID0geyBpZDogbnVsbCB9O1xyXG4gIH0sIFtlZGl0aW5nLmlkLCBvYmpldG9zLCBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgd2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zID0gZWxlbWVudG9zU2VsZWNjaW9uYWRvcztcbiAgICB3aW5kb3cuX29iamV0b3NBY3R1YWxlcyA9IG9iamV0b3M7XG4gICAgd2luZG93Ll9lbGVtZW50UmVmcyA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ7XG4gICAgd2luZG93Ll9zZWNjaW9uZXNPcmRlbmFkYXMgPSBbLi4uc2VjY2lvbmVzXS5zb3J0KChhLCBiKSA9PiBhLm9yZGVuIC0gYi5vcmRlbik7XG4gICAgd2luZG93Ll9hbHRvQ2FudmFzID0gYWx0b0NhbnZhcztcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcImVkaXRvci1zZWxlY3Rpb24tY2hhbmdlXCIsIHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgaWRzOiBbLi4uZWxlbWVudG9zU2VsZWNjaW9uYWRvc10sXG4gICAgICAgICAgYWN0aXZlU2VjdGlvbklkOiBzZWNjaW9uQWN0aXZhSWQgfHwgbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSwgW2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MsIG9iamV0b3MsIHNlY2Npb25lcywgYWx0b0NhbnZhcywgc2VjY2lvbkFjdGl2YUlkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInNlY2Npb24tYWN0aXZhXCIsIHtcbiAgICAgICAgZGV0YWlsOiB7IGlkOiBzZWNjaW9uQWN0aXZhSWQgfHwgbnVsbCB9LFxuICAgICAgfSlcbiAgICApO1xuICB9LCBbc2VjY2lvbkFjdGl2YUlkXSk7XG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB3aW5kb3cuc2V0SG92ZXJJZEdsb2JhbCA9IHNldEhvdmVySWQ7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAod2luZG93LnNldEhvdmVySWRHbG9iYWwgPT09IHNldEhvdmVySWQpIHtcclxuICAgICAgICBkZWxldGUgd2luZG93LnNldEhvdmVySWRHbG9iYWw7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFob3ZlcklkKSByZXR1cm47XHJcbiAgICBjb25zdCBleGlzdHMgPSBvYmpldG9zLnNvbWUoKG8pID0+IG8uaWQgPT09IGhvdmVySWQpO1xyXG4gICAgaWYgKCFleGlzdHMpIHNldEhvdmVySWQobnVsbCk7XHJcbiAgfSwgW2hvdmVySWQsIG9iamV0b3NdKTtcclxuXHJcblxyXG5cclxuICAvLyBDbGVhbnVwIGRlbCBzaXN0ZW1hIGltcGVyYXRpdm9cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaW1wZXJhdGl2ZU9iamVjdHMuY2xlYW51cCgpO1xyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcbiAgY29uc3Qgc3RhZ2VHZXN0dXJlcyA9IHVzZVN0YWdlR2VzdHVyZXMoe1xuICAgIHNlY2Npb25lcyxcbiAgICBvYmpldG9zLFxuICAgIGVsZW1lbnRSZWZzLFxuICAgIGRyYWdTdGFydFBvcyxcbiAgICBoYXNEcmFnZ2VkLFxuICAgIHNlbGVjY2lvbkFjdGl2YSxcbiAgICBpbmljaW9TZWxlY2Npb24sXG4gICAgYXJlYVNlbGVjY2lvbixcbiAgICBkZXRlY3RhckludGVyc2VjY2lvbkxpbmVhLFxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgc2V0RWxlbWVudG9zUHJlU2VsZWNjaW9uYWRvcyxcbiAgICBzZXRTZWxlY2Npb25BY3RpdmEsXG4gICAgc2V0SW5pY2lvU2VsZWNjaW9uLFxuICAgIHNldEFyZWFTZWxlY2Npb24sXG4gICAgb25TZWxlY3RTZWNjaW9uLFxuICAgIGNlcnJhck1lbnVzRmxvdGFudGVzLFxuICB9KTtcblxuXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XHJcbiAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIlxyXG4gICAgICBzdHlsZT17e1xyXG4gICAgICAgIC8vID8gRGVqYW1vcyBxdWUgZWwgc2Nyb2xsIGxvIG1hbmVqZSBlbCA8bWFpbj4gZGVsIERhc2hib2FyZExheW91dCAodW4gc29sbyBzY3JvbGwpXHJcbiAgICAgICAgbWFyZ2luVG9wOiAwLFxyXG4gICAgICAgIG92ZXJmbG93WDogXCJoaWRkZW5cIixcclxuXHJcbiAgICAgICAgLy8gPyBVWCBtb2JpbGU6IHBlcm1pdGlyIHNjcm9sbCB2ZXJ0aWNhbCBuYXR1cmFsIGFscmVkZWRvciBkZWwgY2FudmFzXHJcbiAgICAgICAgdG91Y2hBY3Rpb246IFwicGFuLXlcIixcclxuICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogXCJ0b3VjaFwiLFxyXG5cclxuICAgICAgICAvLyA/IGVzcGFjaW8gcGFyYSBxdWUgbm8g4oCcY2hvcXVl4oCdIGNvbiBoZWFkZXIgLyBiYXJyYXNcbiAgICAgICAgcGFkZGluZ1RvcDogMTIsXG4gICAgICAgIHBhZGRpbmdCb3R0b206IFwiY2FsYyg5NnB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20sIDBweCkpXCIsXG4gICAgICB9fVxuICAgID5cblxyXG5cclxuICAgICAgPGRpdlxyXG4gICAgICAgIHJlZj17Y29udGVuZWRvclJlZn1cclxuICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgbWF4V2lkdGg6IFwiMTIwMHB4XCIsXHJcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI2Y1ZjVmNVwiLFxyXG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXHJcbiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgICBwYWRkaW5nVG9wOiBcIjIwcHhcIiwgLy8gPyBNRU5PUyBQQURESU5HIElOVEVSTk9cbiAgICAgICAgICBwYWRkaW5nQm90dG9tOiBcImNhbGMoNDBweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tLCAwcHgpKVwiLCAvLyA/IEVTUEFDSU8gSU5GRVJJT1JcbiAgICAgICAgfX1cbiAgICAgID5cblxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHNjYWxlKCR7ZXNjYWxhVmlzdWFsfSlgLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICd0b3AgY2VudGVyJyxcclxuICAgICAgICAgICAgd2lkdGg6IHpvb20gPT09IDAuOCA/IFwiMTIyMHB4XCIgOiBcIjEwMDBweFwiLCAvLyA/IDkyMHB4IGNhbnZhcyArIDE1MHB4IGNhZGEgbGFkb1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+XHJcblxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiXHJcbiAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IHpvb20gPT09IDAuOCA/IFwiMTIyMHB4XCIgOiBcIjEwMDBweFwiLCAvLyA/IEFKVVNUQVIgU0VHw5pOIFpPT01cclxuICAgICAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcclxuICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuXHJcbiAgICAgICAgICAgIHsvKiBCb3RvbmVzIGRlIG9yZGVuIGRlIHNlY2Npw7NuICovfVxyXG4gICAgICAgICAgICB7c2VjY2lvbkFjdGl2YUlkICYmIHNlY2Npb25lc09yZGVuYWRhcy5tYXAoKHNlY2Npb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHNlY2Npb24uaWQgIT09IHNlY2Npb25BY3RpdmFJZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSBjYWxjdWxhck9mZnNldFkoc2VjY2lvbmVzT3JkZW5hZGFzLCBpbmRleCwgYWx0b0NhbnZhcyk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXNQcmltZXJhID0gaW5kZXggPT09IDA7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXNVbHRpbWEgPSBpbmRleCA9PT0gc2VjY2lvbmVzT3JkZW5hZGFzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXN0YUFuaW1hbmRvID0gc2VjY2lvbmVzQW5pbWFuZG8uaW5jbHVkZXMoc2VjY2lvbi5pZCk7XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBrZXk9e2BvcmRlbi0ke3NlY2Npb24uaWR9YH1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGZsZXggZmxleC1jb2wgZ2FwLTJcIlxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBpc01vYmlsZSA/IE1hdGgubWF4KDgsIG9mZnNldFkgKyA4KSA6IG9mZnNldFkgKyAyMCxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IGlzTW9iaWxlID8gOCA6IC0xNTAsXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogMjUsXG4gICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBpc01vYmlsZSA/IDE5MCA6IDI2MCxcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgey8qIEJvdMOzbiBTdWJpciAqL31cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICBtb3ZlclNlY2Npb25FeHRlcm5hbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25JZDogc2VjY2lvbi5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWNjaW9uOiBcInN1YmlyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2x1ZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2VjY2lvbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWNjaW9uZXNBbmltYW5kbyxcclxuICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtlc1ByaW1lcmEgfHwgZXN0YUFuaW1hbmRvfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTMgcHktMiByb3VuZGVkLWxnIHRleHQteHMgZm9udC1zZW1pYm9sZCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgJHtlc1ByaW1lcmEgfHwgZXN0YUFuaW1hbmRvXHJcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNDAwIGN1cnNvci1ub3QtYWxsb3dlZCdcclxuICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1wdXJwbGUtNzAwIGhvdmVyOnNjYWxlLTEwNSBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LWxnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSAke2VzdGFBbmltYW5kbyA/ICdhbmltYXRlLXB1bHNlIHNoYWRvdy14bCcgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtlc1ByaW1lcmEgPyAnWWEgZXMgbGEgcHJpbWVyYSBzZWNjacOzbicgOiAnU3ViaXIgc2VjY2nDs24nfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPyBTdWJpciBzZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBCb3TDs24gR3VhcmRhciBjb21vIHBsYW50aWxsYSAqL31cclxuICAgICAgICAgICAgICAgICAgeyFsb2FkaW5nQ2xhaW1zICYmIGVzQWRtaW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkYXJTZWNjaW9uQ29tb1BsYW50aWxsYSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpldG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZXN0YUFuaW1hbmRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMyBweS0yIHJvdW5kZWQtbGcgdGV4dC14cyBmb250LXNlbWlib2xkIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCAke2VzdGFBbmltYW5kb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNDAwIGN1cnNvci1ub3QtYWxsb3dlZCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgaG92ZXI6YmctZ3JlZW4tNzAwIGhvdmVyOnNjYWxlLTEwNSBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LWxnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICR7ZXN0YUFuaW1hbmRvID8gJ2FuaW1hdGUtcHVsc2Ugc2hhZG93LXhsJyA6ICcnfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkd1YXJkYXIgZXN0YSBzZWNjacOzbiBjb21vIHBsYW50aWxsYVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPz8gUGxhbnRpbGxhXHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgeygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb1NlY2Npb24gPSBub3JtYWxpemFyQWx0b01vZG8oc2VjY2lvbi5hbHRvTW9kbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNQYW50YWxsYSA9IG1vZG9TZWNjaW9uID09PSBcInBhbnRhbGxhXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBCb3TDs24gRGVzYW5jbGFyIGZvbmRvICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VjY2lvbi5mb25kb1RpcG8gPT09IFwiaW1hZ2VuXCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYW5jbGFyRm9uZG8oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25JZDogc2VjY2lvbi5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNjaW9uZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZXRvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T2JqZXRvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMyBweS0yIHJvdW5kZWQtbGcgdGV4dC14cyBmb250LXNlbWlib2xkIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgaG92ZXI6YmctZ3JheS01MCBzaGFkb3ctc21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJEZXNhbmNsYXIgaW1hZ2VuIGRlIGZvbmRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/PyBEZXNhbmNsYXIgZm9uZG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzZWNjaW9uLmZvbmRvVGlwbyA9PT0gXCJpbWFnZW5cIiAmJiBpc01vYmlsZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNb2JpbGVCYWNrZ3JvdW5kRWRpdFNlY3Rpb25JZCgocHJldikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9PT0gc2VjY2lvbi5pZCA/IG51bGwgOiBzZWNjaW9uLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMyBweS0yIHJvdW5kZWQtbGcgdGV4dC14cyBmb250LXNlbWlib2xkIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlQmFja2dyb3VuZEVkaXRTZWN0aW9uSWQgPT09IHNlY2Npb24uaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJnLWluZGlnby02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1pbmRpZ28tNzAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJnLXdoaXRlIHRleHQtZ3JheS04MDAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vZG8gbW92ZXIgZm9uZG8gZW4gbW9iaWxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb2JpbGVCYWNrZ3JvdW5kRWRpdFNlY3Rpb25JZCA9PT0gc2VjY2lvbi5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIk1vdmVyIGZvbmRvOiBPTlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiTW92ZXIgZm9uZG9cIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBUb2dnbGUgUGFudGFsbGEgY29tcGxldGEgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0b2dnbGVQYW50YWxsYUNvbXBsZXRhU2VjY2lvbihzZWNjaW9uLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0zIHB5LTIgcm91bmRlZC1sZyB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwICR7ZXNQYW50YWxsYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1wdXJwbGUtNzAwIHNoYWRvdy1tZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctd2hpdGUgdGV4dC1ncmF5LTgwMCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIGhvdmVyOmJnLWdyYXktNTAgc2hhZG93LXNtXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiSGFjZSBxdWUgZXN0YSBzZWNjacOzbiBzZWEgZGUgcGFudGFsbGEgY29tcGxldGEgKDEwMHZoKSBhbCBwdWJsaWNhclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXNQYW50YWxsYSA/IFwiPz8gUGFudGFsbGE6IE9OXCIgOiBcIj8/IFBhbnRhbGxhOiBPRkZcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9KSgpfVxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIEJvdMOzbiBCb3JyYXIgc2VjY2nDs24gKi99XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBhYnJpck1vZGFsQm9ycmFyU2VjY2lvbihzZWNjaW9uLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZXN0YUFuaW1hbmRvIHx8IGlzRGVsZXRpbmdTZWN0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTMgcHktMiByb3VuZGVkLWxnIHRleHQteHMgZm9udC1zZW1pYm9sZCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgJHtlc3RhQW5pbWFuZG8gfHwgaXNEZWxldGluZ1NlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYXktMjAwIHRleHQtZ3JheS00MDAgY3Vyc29yLW5vdC1hbGxvd2VkJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgOiAnYmctcmVkLTYwMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLXJlZC03MDAgaG92ZXI6c2NhbGUtMTA1IHNoYWRvdy1tZCBob3ZlcjpzaGFkb3ctbGcnXHJcbiAgICAgICAgICAgICAgICAgICAgICB9ICR7ZXN0YUFuaW1hbmRvIHx8IGlzRGVsZXRpbmdTZWN0aW9uID8gJ2FuaW1hdGUtcHVsc2Ugc2hhZG93LXhsJyA6ICcnfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJCb3JyYXIgZXN0YSBzZWNjacOzbiB5IHRvZG9zIHN1cyBlbGVtZW50b3NcIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPz8/IEJvcnJhciBzZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICB7LyogQm90w7NuIEJhamFyICovfVxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgIG1vdmVyU2VjY2lvbkV4dGVybmFsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY2Npb246IFwiYmFqYXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbHVnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlY2Npb25lc0FuaW1hbmRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2VzVWx0aW1hIHx8IGVzdGFBbmltYW5kb31cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0zIHB5LTIgcm91bmRlZC1sZyB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwICR7ZXNVbHRpbWEgfHwgZXN0YUFuaW1hbmRvXHJcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNDAwIGN1cnNvci1ub3QtYWxsb3dlZCdcclxuICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1wdXJwbGUtNzAwIGhvdmVyOnNjYWxlLTEwNSBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LWxnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSAke2VzdGFBbmltYW5kbyA/ICdhbmltYXRlLXB1bHNlIHNoYWRvdy14bCcgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtlc1VsdGltYSA/ICdZYSBlcyBsYSDDumx0aW1hIHNlY2Npw7NuJyA6ICdCYWphciBzZWNjacOzbid9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA/IEJhamFyIHNlY2Npw7NuXHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIEJvdMOzbiBBw7FhZGlyIHNlY2Npw7NuICovfVxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ3JlYXJTZWNjaW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtlc3RhQW5pbWFuZG99XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcHgtMyBweS0yIHJvdW5kZWQtbGcgdGV4dC14cyBmb250LXNlbWlib2xkIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMFxyXG4gICAgJHtlc3RhQW5pbWFuZG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTQwMCBjdXJzb3Itbm90LWFsbG93ZWQgYW5pbWF0ZS1wdWxzZSBzaGFkb3cteGwnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1wdXJwbGUtNzAwIGhvdmVyOnNjYWxlLTEwNSBzaGFkb3ctbWQgaG92ZXI6c2hhZG93LWxnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBw7FhZGlyIHVuYSBudWV2YSBzZWNjacOzbiBkZWJham9cIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgQcOxYWRpciBzZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSl9XHJcblxyXG5cclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IDgwMCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogYWx0b0NhbnZhc0RpbmFtaWNvLFxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuXHJcbiAgICAgICAgICAgICAgPFN0YWdlXHJcbiAgICAgICAgICAgICAgICByZWY9e3N0YWdlUmVmfVxyXG4gICAgICAgICAgICAgICAgd2lkdGg9ezgwMH1cclxuICAgICAgICAgICAgICAgIGhlaWdodD17YWx0b0NhbnZhc0RpbmFtaWNvfVxyXG4gICAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIGxpc3RlbmluZz17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIGltYWdlU21vb3RoaW5nRW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICBoaXRHcmFwaEVuYWJsZWQ9e3RydWV9XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIndoaXRlXCIsXHJcbiAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBcInZpc2libGVcIixcclxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgYm94U2hhZG93OiBcIjAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjUpXCIsXHJcbiAgICAgICAgICAgICAgICB9fVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17c3RhZ2VHZXN0dXJlcy5vbk1vdXNlRG93bn1cclxuXHJcbiAgICAgICAgICAgICAgICBvblRvdWNoU3RhcnQ9e3N0YWdlR2VzdHVyZXMub25Ub3VjaFN0YXJ0fVxyXG5cclxuICAgICAgICAgICAgICAgIG9uVG91Y2hNb3ZlPXtzdGFnZUdlc3R1cmVzLm9uVG91Y2hNb3ZlfVxyXG5cclxuICAgICAgICAgICAgICAgIG9uVG91Y2hFbmQ9e3N0YWdlR2VzdHVyZXMub25Ub3VjaEVuZH1cclxuXHJcbiAgICAgICAgICAgICAgICBvbk1vdXNlTW92ZT17c3RhZ2VHZXN0dXJlcy5vbk1vdXNlTW92ZX1cclxuXHJcbiAgICAgICAgICAgICAgICBvbk1vdXNlVXA9e3N0YWdlR2VzdHVyZXMub25Nb3VzZVVwfVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxDYW52YXNFbGVtZW50c0xheWVyPlxyXG5cclxuICAgICAgICAgICAgICAgICAge3NlY2Npb25lc09yZGVuYWRhcy5mbGF0TWFwKChzZWNjaW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdHVyYVB4ID0gc2VjY2lvbi5hbHR1cmE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXNPcmRlbmFkYXMsIGluZGV4LCBhbHRvQ2FudmFzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlc0FjdGl2YSA9IHNlY2Npb24uaWQgPT09IHNlY2Npb25BY3RpdmFJZDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlc3RhQW5pbWFuZG8gPSBzZWNjaW9uZXNBbmltYW5kby5pbmNsdWRlcyhzZWNjaW9uLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVzdGFBbmltYW5kbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI/PyBTRUNDScOTTiBBTklNQU5ETzpcIiwgc2VjY2lvbi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50b3MgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGb25kbyBkZSBzZWNjacOzbiAtIHB1ZWRlIHNlciBjb2xvciBvIGltYWdlblxyXG4gICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbi5mb25kb1RpcG8gPT09IFwiaW1hZ2VuXCIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb25kb1NlY2Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgZm9uZG8tJHtzZWNjaW9uLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb249e3NlY2Npb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFk9e29mZnNldFl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdHVyYVB4PXthbHR1cmFQeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9eygpID0+IG9uU2VsZWN0U2VjY2lvbihzZWNjaW9uLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVGb25kb09mZnNldD17YWN0dWFsaXphck9mZnNldEZvbmRvfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc01vYmlsZT17aXNNb2JpbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vYmlsZUJhY2tncm91bmRFZGl0RW5hYmxlZD17bW9iaWxlQmFja2dyb3VuZEVkaXRTZWN0aW9uSWQgPT09IHNlY2Npb24uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8UmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2BzZWNjaW9uLSR7c2VjY2lvbi5pZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtzZWNjaW9uLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHg9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeT17b2Zmc2V0WX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17ODAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17YWx0dXJhUHh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD17c2VjY2lvbi5mb25kbyB8fCBcIiNmZmZmZmZcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwidHJhbnNwYXJlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdFNlY2Npb24oc2VjY2lvbi5pZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFwPXsoKSA9PiBvblNlbGVjdFNlY2Npb24oc2VjY2lvbi5pZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgXTtcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudG9zO1xyXG4gICAgICAgICAgICAgICAgICB9KX1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICB7LyogQ29udHJvbCBkZSBhbHR1cmEgcGFyYSBzZWNjacOzbiBhY3RpdmEgKi99XHJcbiAgICAgICAgICAgICAgICAgIHtzZWNjaW9uQWN0aXZhSWQgJiYgc2VjY2lvbmVzT3JkZW5hZGFzLm1hcCgoc2VjY2lvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjY2lvbi5pZCAhPT0gc2VjY2lvbkFjdGl2YUlkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXNPcmRlbmFkYXMsIGluZGV4LCBhbHRvQ2FudmFzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sWSA9IG9mZnNldFkgKyBzZWNjaW9uLmFsdHVyYSAtIDU7IC8vIDVweCBhbnRlcyBkZWwgZmluYWxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb1NlY2Npb24gPSBub3JtYWxpemFyQWx0b01vZG8oc2VjY2lvbi5hbHRvTW9kbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVybWl0ZVJlc2l6ZUFsdHVyYSA9IChtb2RvU2VjY2lvbiAhPT0gXCJwYW50YWxsYVwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgbmFtZT1cInVpXCIga2V5PXtgY29udHJvbC1hbHR1cmEtJHtzZWNjaW9uLmlkfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogTMOtbmVhIGluZGljYWRvcmEgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInVpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM9e1s1MCwgY29udHJvbFksIDc1MCwgY29udHJvbFldfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM3NzNkYmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2g9e1s1LCA1XX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIENvbnRyb2wgY2VudHJhbCBtZWpvcmFkbyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHg9ezQwMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgeT17Y29udHJvbFl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17cGVybWl0ZVJlc2l6ZUFsdHVyYX0gICAgICAgICAgICAgICAgIC8vID8gY2xhdmU6IHNpIGVzIGZhbHNlLCBubyBjYXB0dXJhIGV2ZW50b3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eT17cGVybWl0ZVJlc2l6ZUFsdHVyYSA/IDEgOiAwLjI1fSAgICAgICAgLy8gPyB2aXN1YWwgZGVzaGFiaWxpdGFkb1xuICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17cGVybWl0ZVJlc2l6ZUFsdHVyYSA/IChlKSA9PiBpbmljaWFyQ29udHJvbEFsdHVyYShlLCBzZWNjaW9uLmlkKSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ub3VjaFN0YXJ0PXtwZXJtaXRlUmVzaXplQWx0dXJhID8gKGUpID0+IGluaWNpYXJDb250cm9sQWx0dXJhKGUsIHNlY2Npb24uaWQpIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvblBvaW50ZXJEb3duPXtwZXJtaXRlUmVzaXplQWx0dXJhID8gKGUpID0+IGluaWNpYXJDb250cm9sQWx0dXJhKGUsIHNlY2Npb24uaWQpIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRyb2xhbmRvQWx0dXJhICYmIHBlcm1pdGVSZXNpemVBbHR1cmEpIHNldEdsb2JhbEN1cnNvcihcIm5zLXJlc2l6ZVwiLCBzdGFnZVJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250cm9sYW5kb0FsdHVyYSAmJiBwZXJtaXRlUmVzaXplQWx0dXJhKSBjbGVhckdsb2JhbEN1cnNvcihzdGFnZVJlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Lyogw4FyZWEgZGUgZGV0ZWNjacOzbiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9ey00NX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PXstMjJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezkwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17NDR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD1cInRyYW5zcGFyZW50XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogRm9uZG8gZGVsIGNvbnRyb2wgY29uIGVzdGFkbyBhY3Rpdm8gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9ey0yNX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9ey02fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezUwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXsxMn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9e2NvbnRyb2xhbmRvQWx0dXJhID09PSBzZWNjaW9uLmlkID8gXCIjNzczZGJlXCIgOiBcInJnYmEoMTE5LCA2MSwgMTkwLCAwLjkpXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JuZXJSYWRpdXM9ezZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcj1cInJnYmEoMCwwLDAsMC4zKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dCbHVyPXtjb250cm9sYW5kb0FsdHVyYSA9PT0gc2VjY2lvbi5pZCA/IDggOiA2fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IGNvbnRyb2xhbmRvQWx0dXJhID09PSBzZWNjaW9uLmlkID8gNCA6IDMgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEFuaW1hY2nDs24gZGUgcHVsc28gZHVyYW50ZSBlbCBjb250cm9sICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHtjb250cm9sYW5kb0FsdHVyYSA9PT0gc2VjY2lvbi5pZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PXstMzB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9ey04fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17NjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MTZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM3NzNkYmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17Mn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUmFkaXVzPXs4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5PXswLjZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBJbmRpY2Fkb3IgdmlzdWFsICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PXstNn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9ey0zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1cIj8/XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPXsxMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ3aGl0ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5PVwiQXJpYWxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogUHVudG9zIGRlIGFnYXJyZSAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2lyY2xlIHg9ey0xNX0geT17MH0gcmFkaXVzPXsxLjV9IGZpbGw9XCJyZ2JhKDI1NSwyNTUsMjU1LDAuOClcIiBsaXN0ZW5pbmc9e2ZhbHNlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaXJjbGUgeD17LTEwfSB5PXswfSByYWRpdXM9ezEuNX0gZmlsbD1cInJnYmEoMjU1LDI1NSwyNTUsMC44KVwiIGxpc3RlbmluZz17ZmFsc2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENpcmNsZSB4PXsxMH0geT17MH0gcmFkaXVzPXsxLjV9IGZpbGw9XCJyZ2JhKDI1NSwyNTUsMjU1LDAuOClcIiBsaXN0ZW5pbmc9e2ZhbHNlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaXJjbGUgeD17MTV9IHk9ezB9IHJhZGl1cz17MS41fSBmaWxsPVwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIgbGlzdGVuaW5nPXtmYWxzZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogRm9uZG8gZGVsIGluZGljYWRvciAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB4PXs3NTV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeT17Y29udHJvbFkgLSAxMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17NDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXsyMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwicmdiYSgxMTksIDYxLCAxOTAsIDAuMSlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cInJnYmEoMTE5LCA2MSwgMTkwLCAwLjMpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JuZXJSYWRpdXM9ezR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBUZXh0byBkZWwgaW5kaWNhZG9yICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHg9ezc2MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB5PXtjb250cm9sWSAtIDZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD17YCR7TWF0aC5yb3VuZChzZWNjaW9uLmFsdHVyYSl9cHhgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPXsxMX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwiIzc3M2RiZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseT1cIkFyaWFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0PVwiYm9sZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfSl9XHJcblxyXG4gICAgICAgICAgICAgICAgICB7LyogT3ZlcmxheSBtZWpvcmFkbyBkdXJhbnRlIGNvbnRyb2wgZGUgYWx0dXJhICovfVxyXG4gICAgICAgICAgICAgICAgICB7Y29udHJvbGFuZG9BbHR1cmEgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxHcm91cCBuYW1lPVwidWlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBPdmVybGF5IHN1dGlsICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPFJlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgeD17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgeT17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezgwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXthbHRvQ2FudmFzRGluYW1pY299XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJyZ2JhKDExOSwgNjEsIDE5MCwgMC4wNSlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICB7LyogSW5kaWNhZG9yIGRlIGxhIHNlY2Npw7NuIHF1ZSBzZSBlc3TDoSBtb2RpZmljYW5kbyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgIHtzZWNjaW9uZXNPcmRlbmFkYXMubWFwKChzZWNjaW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgaW5kZXgsIGFsdG9DYW52YXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb1NlY2Npb24gPSBub3JtYWxpemFyQWx0b01vZG8oc2VjY2lvbi5hbHRvTW9kbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcm1pdGVSZXNpemVBbHR1cmEgPSAobW9kb1NlY2Npb24gIT09IFwicGFudGFsbGFcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cCBrZXk9e3NlY2Npb24uaWR9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFJlY3Qg4oCcZm9uZG/igJ0gY2xpY2tlYWJsZSAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9e29mZnNldFl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs4MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17c2VjY2lvbi5hbHR1cmF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9e3NlY2Npb24uZm9uZG8gfHwgXCJ0cmFuc3BhcmVudFwifSAvLyBwb2TDqXMgcG9uZXIgYmxhbmNvIHUgb3RybyBjb2xvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdFNlY2Npb24oc2VjY2lvbi5pZCl9ICAgLy8gPz8gZGlzcGFyYSBlbCBldmVudG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFJlY3QgaGlnaGxpZ2h0IHNpIGVzdMOhcyBjb250cm9sYW5kbyBsYSBhbHR1cmEgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VjY2lvbi5pZCA9PT0gY29udHJvbGFuZG9BbHR1cmEgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeT17b2Zmc2V0WX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17ODAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17c2VjY2lvbi5hbHR1cmF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD1cInRyYW5zcGFyZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCIjNzczZGJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17M31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXNoPXtbOCwgNF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxyXG4gICAgICAgICAgICAgICAgICApfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICB7b2JqZXRvcy5tYXAoKG9iaiwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vID8/IERldGVybWluYXIgc2kgZXN0w6EgZW4gbW9kbyBlZGljacOzblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5FZGl0TW9kZSA9IGVkaXRpbmcuaWQgPT09IG9iai5pZCAmJiBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdID09PSBvYmouaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vID8/PyBDYXNvIGVzcGVjaWFsOiBsYSBnYWxlcsOtYSBsYSByZW5kZXJpemFtb3MgYWPDoSAobm8gdXNhIEVsZW1lbnRvQ2FudmFzKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJnYWxlcmlhXCIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8R2FsZXJpYUtvbnZhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvYmouaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqPXtvYmp9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWY9e3JlZ2lzdGVyUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uSG92ZXI9e3NldEhvdmVySWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17ZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvYmouaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGRhR2FsZXJpYUFjdGl2YT17Y2VsZGFHYWxlcmlhQWN0aXZhfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uUGlja0NlbGw9eyhpbmZvKSA9PiBzZXRDZWxkYUdhbGVyaWFBY3RpdmEoaW5mbyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzT3JkZW5hZGFzPXtzZWNjaW9uZXNPcmRlbmFkYXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0b0NhbnZhcz17YWx0b0NhbnZhc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdD17KGlkLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlPy5ldnQgJiYgKGUuZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyhbaWRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvPXsocG9zLCBpZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Ll9pc0RyYWdnaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Ll9ncnVwb0xpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RyYXJHdWlhcyhwb3MsIGlkLCBvYmpldG9zLCBlbGVtZW50UmVmcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG89eyhkcmFnSWQgPSBvYmouaWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhkcmFnSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW2RyYWdJZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SG92ZXJJZChudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmRQZXJzb25hbGl6YWRvPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbXBpYXJHdWlhcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhpZCwgbnVldm8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MoKHByZXYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHByZXYuZmluZEluZGV4KChvKSA9PiBvLmlkID09PSBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAtMSkgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRbaV0gPSB7IC4uLnVwZGF0ZWRbaV0sIC4uLm51ZXZvIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJjb3VudGRvd25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPENvdW50ZG93bktvbnZhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvYmouaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqPXtvYmp9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWY9e3JlZ2lzdGVyUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uSG92ZXI9e3NldEhvdmVySWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17ZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvYmouaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhcz17c2VjY2lvbmVzT3JkZW5hZGFzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdG9DYW52YXM9e2FsdG9DYW52YXN9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gc2VsZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoaWQsIGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU/LmV2dCAmJiAoZS5ldnQuY2FuY2VsQnViYmxlID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtpZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gUFJFVklFVyBsaXZpYW5vIChubyB0b2NhciBlc3RhZG8gZGVsIG9iamV0byBwYXJhIHF1ZSBubyBoYXlhIGxhZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG89eyhkcmFnSWQgPSBvYmouaWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhkcmFnSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW2RyYWdJZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SG92ZXJJZChudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbz17KHBvcywgaWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Ll9ncnVwb0xpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RyYXJHdWlhcyhwb3MsIGlkLCBvYmpldG9zLCBlbGVtZW50UmVmcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPyBGSU4gZGUgZHJhZzogbGltcGlhciBndcOtYXMgLyBVSSBhdXhpbGlhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG89eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzRHJhZ2dpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltcGlhckd1aWFzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPyByZWZzIHBhcmEgZWwgbW90b3IgZGUgZHJhZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdTdGFydFBvcz17ZHJhZ1N0YXJ0UG9zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0RyYWdnZWQ9e2hhc0RyYWdnZWR9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gwqFDbGF2ZSEgQWwgZmluYWxpemFyLCB0cmF0YW1vcyB4L3kgYWJzb2x1dGFzIGNvbW8gZW4gRWxlbWVudG9DYW52YXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhpZCwgY2FtYmlvcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHByZXYuZmluZEluZGV4KG8gPT4gby5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gLTEpIHJldHVybiBwcmV2O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqT3JpZ2luYWwgPSBwcmV2W2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gU2kgbm8gZXMgZmluYWwgZGUgZHJhZywgbWVyZ2VhbW9zIHNpbiBtw6FzIChubyB0b2NhciBjb29yZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FtYmlvcy5maW5hbGl6b0RyYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRbaV0gPSB7IC4uLnVwZGF0ZWRbaV0sIC4uLmNhbWJpb3MgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gRmluYWwgZGUgZHJhZzogJ2NhbWJpb3MueScgdmllbmUgQUJTT0xVVEEgKFN0YWdlIGNvb3JkcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBudWV2YVNlY2Npb24sIGNvb3JkZW5hZGFzQWp1c3RhZGFzIH0gPSBkZXRlcm1pbmFyTnVldmFTZWNjaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbWJpb3MueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpPcmlnaW5hbC5zZWNjaW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzT3JkZW5hZGFzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHsgLi4uY2FtYmlvcyB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV4dC5maW5hbGl6b0RyYWc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVldmFTZWNjaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IHsgLi4ubmV4dCwgLi4uY29vcmRlbmFkYXNBanVzdGFkYXMsIHNlY2Npb25JZDogbnVldmFTZWNjaW9uIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydGlyIHkgYWJzb2x1dGEgPyB5IHJlbGF0aXZhIGEgbGEgc2VjY2nDs24gYWN0dWFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC55ID0gY29udmVydGlyQWJzQVJlbChjYW1iaW9zLnksIG9iak9yaWdpbmFsLnNlY2Npb25JZCwgc2VjY2lvbmVzT3JkZW5hZGFzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IFsuLi5wcmV2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFtpXSA9IHsgLi4udXBkYXRlZFtpXSwgLi4ubmV4dCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9ialByZXZpZXcgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgZWRpdGluZy5pZCA9PT0gb2JqLmlkICYmIG9iai50aXBvID09PSBcInRleHRvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvUHJldmlldyA9IFN0cmluZyhlZGl0aW5nLnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpZXdPYmogPSB7IC4uLm9iaiwgdGV4dG86IHRleHRvUHJldmlldyB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZEtlZXBDZW50ZXJQcmV2aWV3ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFvYmouX19ncm91cEFsaWduICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhTnVtYmVyLmlzRmluaXRlKG9iai53aWR0aCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5fX2F1dG9XaWR0aCAhPT0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRLZWVwQ2VudGVyUHJldmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmlld1ggPSBjYWxjdWxhclhUZXh0b0NlbnRyYWRvKG9iaiwgdGV4dG9QcmV2aWV3KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUocHJldmlld1gpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdPYmoueCA9IHByZXZpZXdYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXZpZXdPYmo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBvYmo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8RWxlbWVudG9DYW52YXNcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvYmouaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaj17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9ialByZXZpZXcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8geUxvY2FsOiBlbiBzZWNjacOzbiBwYW50YWxsYSB1c2Ftb3MgeU5vcm0gKiA1MDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmYWxsYmFjayBsZWdhY3k6IHNpIG5vIGhheSB5Tm9ybSwgdXNhbW9zIG9iai55XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeTogKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeFNlYyA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBvYmpQcmV2aWV3LnNlY2Npb25JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgaWR4U2VjKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5TG9jYWwgPSBlc1NlY2Npb25QYW50YWxsYUJ5SWQob2JqUHJldmlldy5zZWNjaW9uSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKE51bWJlci5pc0Zpbml0ZShvYmpQcmV2aWV3LnlOb3JtKSA/IChvYmpQcmV2aWV3LnlOb3JtICogQUxUVVJBX1BBTlRBTExBX0VESVRPUikgOiBvYmpQcmV2aWV3LnkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogb2JqUHJldmlldy55O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5TG9jYWwgKyBvZmZzZXRZO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvQ2FudmFzPXs4MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9eyFpc0luRWRpdE1vZGUgJiYgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvYmouaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVTZWxlY2Npb25hZG89eyFpc0luRWRpdE1vZGUgJiYgZWxlbWVudG9zUHJlU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvYmouaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0luRWRpdE1vZGU9e2lzSW5FZGl0TW9kZX0gLy8gPz8gTlVFVkEgUFJPUFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkhvdmVyPXtpc0luRWRpdE1vZGUgPyBudWxsIDogc2V0SG92ZXJJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWY9e3JlZ2lzdGVyUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0VGV4dEVkaXQ9e2lzSW5FZGl0TW9kZSA/IG51bGwgOiAoaWQsIHRleHRvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZShub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQgPSB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbmxpbmVPdmVybGF5TW91bnRlZElkKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImVudGVyOiBwcmUtc3RhcnRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0lkOiBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0b0xlbmd0aDogU3RyaW5nKHRleHRvID8/IFwiXCIpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPSBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVFZGl0UHJldmlld1JlZi5jdXJyZW50ID0geyBpZDogbnVsbCwgY2VudGVyWDogbnVsbCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwic3RhcnQtaW5saW5lLWVkaXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0b0xlbmd0aDogU3RyaW5nKHRleHRvID8/IFwiXCIpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFg6IG9iaj8ueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0WTogb2JqPy55ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q3VycmVudEVkaXRpbmdJZDogd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZU1ldHJpY3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RWRpdChpZCwgdGV4dG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU/LmRyYWdnYWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZT8uZ2V0TGF5ZXI/LigpPy5iYXRjaERyYXc/LigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImVudGVyOiBhZnRlci1zdGFydC1zeW5jXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJZDogcHJldmlvdXNDdXJyZW50RWRpdGluZ0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEN1cnJlbnRFZGl0aW5nSWQ6IHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nSWQ9e2VkaXRpbmcuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZU92ZXJsYXlNb3VudGVkSWQ9e2lubGluZU92ZXJsYXlNb3VudGVkSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZVZpc2liaWxpdHlNb2RlPXtpbmxpbmVEZWJ1Z0FCLnZpc2liaWxpdHlTb3VyY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaElubGluZUVkaXQ9e2ZpbmlzaEVkaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXtpc0luRWRpdE1vZGUgPyBudWxsIDogKGlkLCBvYmosIGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj8/IFtDQU5WQVMgRURJVE9SXSBvblNlbGVjdCBkaXNwYXJhZG86XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlwbzogb2JqPy50aXBvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlndXJhOiBvYmo/LmZpZ3VyYSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoaWZ0S2V5OiBlPy5ldnQ/LnNoaWZ0S2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWNjaW9uQWN0dWFsOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJyc3ZwLWJvdG9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPz8gQ2xpY2sgZW4gYm90w7NuIFJTVlBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdGluZy5pZCAmJiBlZGl0aW5nLmlkICE9PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoRWRpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZT8uZXZ0ICYmIChlLmV2dC5jYW5jZWxCdWJibGUgPSB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNTaGlmdCA9IGU/LmV2dD8uc2hpZnRLZXk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoKHByZXYpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXNTaGlmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj8gW0NBTlZBUyBFRElUT1JdIE1vZG8gU2hpZnQ6IGFncmVnYW5kby9xdWl0YW5kbyBlbGVtZW50b1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2LmluY2x1ZGVzKGlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZhID0gcHJldi5maWx0ZXIoKHgpID0+IHggIT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj8gW0NBTlZBUyBFRElUT1JdIEVsZW1lbnRvIHJlbW92aWRvLiBOdWV2YSBzZWxlY2Npw7NuOlwiLCBudWV2YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51ZXZhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZhID0gWy4uLnByZXYsIGlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVldmE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoaWQsIG51ZXZvKSA9PiB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/PyBOVUVWTzogTWFuZWphciBwcmV2aWV3IGlubWVkaWF0byBkZSBkcmFnIGdydXBhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWV2by5pc0RyYWdQcmV2aWV3KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwcmV2LmZpbmRJbmRleChvID0+IG8uaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIHByZXY7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGlzRHJhZ1ByZXZpZXcsIHNraXBIaXN0b3JpYWwsIC4uLmNsZWFuTnVldm8gfSA9IG51ZXZvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkW2luZGV4XSA9IHsgLi4udXBkYXRlZFtpbmRleF0sIC4uLmNsZWFuTnVldm8gfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IE1BTkVKQVIgU09MTyBiYXRjaCB1cGRhdGUgZmluYWwgZGUgZHJhZyBncnVwYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVldm8uaXNCYXRjaFVwZGF0ZUZpbmFsICYmIGlkID09PSAnQkFUQ0hfVVBEQVRFX0dST1VQX0ZJTkFMJykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZWxlbWVudG9zLCBkcmFnSW5pY2lhbCwgZGVsdGFYLCBkZWx0YVkgfSA9IG51ZXZvO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MocHJldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2Lm1hcChvYmpldG8gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50b3MuaW5jbHVkZXMob2JqZXRvLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRyYWdJbmljaWFsICYmIGRyYWdJbmljaWFsW29iamV0by5pZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zSW5pY2lhbCA9IGRyYWdJbmljaWFsW29iamV0by5pZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ub2JqZXRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHBvc0luaWNpYWwueCArIGRlbHRhWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBwb3NJbmljaWFsLnkgKyBkZWx0YVlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamV0bztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IE5PIHByb2Nlc2FyIHNpIHZpZW5lIGRlbCBUcmFuc2Zvcm1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVldm8uZnJvbVRyYW5zZm9ybSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iak9yaWdpbmFsID0gb2JqZXRvcy5maW5kKChvKSA9PiBvLmlkID09PSBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmpPcmlnaW5hbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/PyBQYXJhIGRyYWcgZmluYWwsIHByb2Nlc2FyIGlubWVkaWF0YW1lbnRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51ZXZvLmZpbmFsaXpvRHJhZykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbnVldmFTZWNjaW9uLCBjb29yZGVuYWRhc0FqdXN0YWRhcyB9ID0gZGV0ZXJtaW5hck51ZXZhU2VjY2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVldm8ueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqT3JpZ2luYWwuc2VjY2lvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNjaW9uZXNPcmRlbmFkYXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvb3JkZW5hZGFzRmluYWxlcyA9IHsgLi4ubnVldm8gfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb29yZGVuYWRhc0ZpbmFsZXMuZmluYWxpem9EcmFnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWV2YVNlY2Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRlbmFkYXNGaW5hbGVzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvb3JkZW5hZGFzRmluYWxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5jb29yZGVuYWRhc0FqdXN0YWRhcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNjaW9uSWQ6IG51ZXZhU2VjY2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRlbmFkYXNGaW5hbGVzLnkgPSBjb252ZXJ0aXJBYnNBUmVsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51ZXZvLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqT3JpZ2luYWwuc2VjY2lvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEpIERldGVybWluYXIgc2VjY2nDs24gZmluYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY2Npb25GaW5hbElkID0gY29vcmRlbmFkYXNGaW5hbGVzLnNlY2Npb25JZCB8fCBvYmpPcmlnaW5hbC5zZWNjaW9uSWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMikgT2J0ZW5lciB5UmVsUHggKHkgcmVsYXRpdmEgZGVudHJvIGRlIGxhIHNlY2Npw7NuIGVuIHB4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHlSZWxQeDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVldmFTZWNjaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvb3JkZW5hZGFzQWp1c3RhZGFzIG5vcm1hbG1lbnRlIHlhIHRyYWUgeSByZWxhdGl2YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5UmVsUHggPSBOdW1iZXIuaXNGaW5pdGUoY29vcmRlbmFkYXNGaW5hbGVzLnkpID8gY29vcmRlbmFkYXNGaW5hbGVzLnkgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2kgbm8gY2FtYmnDsyBkZSBzZWNjacOzbiwgY29udmVydGltb3MgZGVzZGUgeSBhYnNvbHV0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5UmVsUHggPSBOdW1iZXIuaXNGaW5pdGUoY29vcmRlbmFkYXNGaW5hbGVzLnkpID8gY29vcmRlbmFkYXNGaW5hbGVzLnkgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDMpIEFwbGljYXIgcG9sw610aWNhIHBhbnRhbGxhOiBndWFyZGFyIHlOb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXNTZWNjaW9uUGFudGFsbGFCeUlkKHNlY2Npb25GaW5hbElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5Tm9ybSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHlSZWxQeCAvIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRlbmFkYXNGaW5hbGVzLnlOb3JtID0geU5vcm07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb29yZGVuYWRhc0ZpbmFsZXMueTsgLy8gPyBjbGF2ZTogZXZpdGFtb3MgbWV6Y2xhciBzaXN0ZW1hc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlqbzogZ3VhcmRhciB5IGVuIHB4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkZW5hZGFzRmluYWxlcy55ID0geVJlbFB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29vcmRlbmFkYXNGaW5hbGVzLnlOb3JtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBpbm1lZGlhdGFtZW50ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwcmV2LmZpbmRJbmRleChvID0+IG8uaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIHByZXY7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkW2luZGV4XSA9IHsgLi4udXBkYXRlZFtpbmRleF0sIC4uLmNvb3JkZW5hZGFzRmluYWxlcyB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IFBhcmEgb3Ryb3MgY2FtYmlvcyAodHJhbnNmb3JtLCBldGMuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhheURpZmVyZW5jaWFzID0gT2JqZWN0LmtleXMobnVldm8pLnNvbWUoa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbG9yQW50ZXJpb3IgPSBvYmpPcmlnaW5hbFtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsb3JOdWV2byA9IG51ZXZvW2tleV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWxvckFudGVyaW9yID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgdmFsb3JOdWV2byA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKHZhbG9yQW50ZXJpb3IgLSB2YWxvck51ZXZvKSA+IDAuMDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbG9yQW50ZXJpb3IgIT09IHZhbG9yTnVldm87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGF5RGlmZXJlbmNpYXMpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VjY2lvbklkID0gbnVldm8uc2VjY2lvbklkIHx8IG9iak9yaWdpbmFsLnNlY2Npb25JZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNjaW9uID0gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmQoKHMpID0+IHMuaWQgPT09IHNlY2Npb25JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWNjaW9uKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MocHJldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHByZXYuZmluZEluZGV4KG8gPT4gby5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIHByZXY7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IFsuLi5wcmV2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRbaW5kZXhdID0geyAuLi51cGRhdGVkW2luZGV4XSwgLi4ubnVldm8gfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG89e2lzSW5FZGl0TW9kZSA/IG51bGwgOiAoZHJhZ0lkID0gb2JqLmlkLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWNjaW9uQWN0dWFsID0gQXJyYXkuaXNBcnJheSh3aW5kb3cuX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHdpbmRvdy5fZWxlbWVudG9zU2VsZWNjaW9uYWRvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzR3JvdXBDYW5kaWRhdGUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWNjaW9uQWN0dWFsLmxlbmd0aCA+IDEgJiYgc2VsZWNjaW9uQWN0dWFsLmluY2x1ZGVzKGRyYWdJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhZ2UgPSBlPy50YXJnZXQ/LmdldFN0YWdlPy4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3ZlckNvdW50QmVmb3JlID0gc3RhZ2U/LmZpbmQ/LihcIi51aS1ob3Zlci1pbmRpY2F0b3JcIik/Lmxlbmd0aCA/PyAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbkFjdHVhbC5pbmNsdWRlcyhkcmFnSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtkcmFnSWRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZsdXNoU3luYygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRIb3ZlcklkKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RWxlbWVudG9zUHJlU2VsZWNjaW9uYWRvcyhbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0RyYWdnaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNHcm91cENhbmRpZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHBlcmZvcm1hbmNlICE9PSBcInVuZGVmaW5lZFwiICYmIHBlcmZvcm1hbmNlLm5vd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gTnVtYmVyKHBlcmZvcm1hbmNlLm5vdygpLnRvRml4ZWQoMikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaG92ZXJDb3VudEFmdGVyU3luYyA9IHN0YWdlPy5maW5kPy4oXCIudWktaG92ZXItaW5kaWNhdG9yXCIpPy5sZW5ndGggPz8gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPz8gW0hPVkVSXVtHUk9VUC1EUkFHLVNUQVJUXVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQ6IG5vdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY2Npb25TaXplOiBzZWxlY2Npb25BY3R1YWwubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3ZlcklkQmVmb3JlOiBob3ZlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVTZWxlY2Npb25hZG9zQmVmb3JlOiBlbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJDb3VudEJlZm9yZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJDb3VudEFmdGVyU3luYyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93SXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RyYWdnaW5nU3RhdGU6IGlzRHJhZ2dpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdydXBvTGlkZXI6IHdpbmRvdy5fZ3J1cG9MaWRlciB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3ZlckNvdW50UmFmID0gc3RhZ2U/LmZpbmQ/LihcIi51aS1ob3Zlci1pbmRpY2F0b3JcIik/Lmxlbmd0aCA/PyAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj8/IFtIT1ZFUl1bR1JPVVAtRFJBRy1TVEFSVF1bUkFGXVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdmVyQ291bnRSYWYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93SXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdydXBvTGlkZXI6IHdpbmRvdy5fZ3J1cG9MaWRlciB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnRW5kUGVyc29uYWxpemFkbz17aXNJbkVkaXRNb2RlID8gbnVsbCA6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFyRHJhZ0VuZChbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvPXtpc0luRWRpdE1vZGUgPyBudWxsIDogKHBvcywgZWxlbWVudElkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gTk8gbW9zdHJhciBndcOtYXMgZHVyYW50ZSBkcmFnIGdydXBhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Ll9ncnVwb0xpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0cmFyR3VpYXMocG9zLCBlbGVtZW50SWQsIG9iamV0b3MsIGVsZW1lbnRSZWZzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoZWxlbWVudElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdTdGFydFBvcz17ZHJhZ1N0YXJ0UG9zfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNEcmFnZ2VkPXtoYXNEcmFnZ2VkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9KX1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAge3NlbGVjY2lvbkFjdGl2YSAmJiBhcmVhU2VsZWNjaW9uICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInVpXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHg9e2FyZWFTZWxlY2Npb24ueH1cclxuICAgICAgICAgICAgICAgICAgICAgIHk9e2FyZWFTZWxlY2Npb24ueX1cclxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXthcmVhU2VsZWNjaW9uLndpZHRofVxyXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXthcmVhU2VsZWNjaW9uLmhlaWdodH1cclxuICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJyZ2JhKDExOSwgNjEsIDE5MCwgMC4xKVwiIC8vIHZpb2xldGEgY2xhcm9cclxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM3NzNkYmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXNoPXtbNCwgNF19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICB7ZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPiAwICYmICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgIDxTZWxlY3Rpb25Cb3VuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudHM9e2VsZW1lbnRvc1NlbGVjY2lvbmFkb3N9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50UmVmcz17ZWxlbWVudFJlZnN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpldG9zPXtvYmpldG9zfVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEcmFnZ2luZz17aXNEcmFnZ2luZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhbnNmb3JtPXsobmV3QXR0cnMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI/PyBUcmFuc2Zvcm0gZGV0ZWN0YWRvOlwiLCBuZXdBdHRycyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqSW5kZXggPSBvYmpldG9zLmZpbmRJbmRleChvID0+IG8uaWQgPT09IGlkKTsgLy8gPz8gREVGSU5JUiBQUklNRVJPXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gTU9WRVIgRUwgTE9HIEFRVcONIChkZXNwdcOpcyBkZSBkZWZpbmlyIG9iakluZGV4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0F0dHJzLmlzRmluYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI/PyBGSU5BTCBUUkFOU0ZPUk06XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFk6IG5ld0F0dHJzLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudEluZGV4OiBvYmpJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50SWQ6IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NbMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iakluZGV4ICE9PSAtMSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0F0dHJzLmlzUHJldmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZpZXc6IGFjdHVhbGl6YWNpw7NuIHNpbiBoaXN0b3JpYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRPYmpldG9zKHByZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVldm9zID0gWy4uLnByZXZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudG8gPSBudWV2b3Nbb2JqSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bnRkb3duOiBkdXJhbnRlIHByZXZpZXcgZGVqYW1vcyBxdWUgS29udmEgZXNjYWxlIGVsIG5vZG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNpbiB0b2NhciBlc3RhZG8gUmVhY3QgcGFyYSBldml0YXIgZGVzaW5jcm9uaXphY2nDs24gY29uIFRyYW5zZm9ybWVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by50aXBvID09PSBcImNvdW50ZG93blwiIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by50aXBvID09PSBcImZvcm1hXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZWxlbWVudG8uZmlndXJhID09PSBcImNpcmNsZVwiIHx8IGVsZW1lbnRvLmZpZ3VyYSA9PT0gXCJ0cmlhbmdsZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZEVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVsZW1lbnRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/PyBOTyBhY3R1YWxpemFyIFgsWSBkdXJhbnRlIHByZXZpZXcgLSBzb2xvIGRpbWVuc2lvbmVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBuZXdBdHRycy5yb3RhdGlvbiB8fCBlbGVtZW50by5yb3RhdGlvbiB8fCAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50by50aXBvID09PSAndGV4dG8nICYmIG5ld0F0dHJzLmZvbnRTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbGVtZW50LmZvbnRTaXplID0gbmV3QXR0cnMuZm9udFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbGVtZW50LnNjYWxlWCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbGVtZW50LnNjYWxlWSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRvLnRpcG8gPT09IFwiZ2FsZXJpYVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdhbGxlcnlNZXRyaWNzID0gbm9ybWFsaXphck1lZGlkYXNHYWxlcmlhKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0F0dHJzLnhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEVsZW1lbnQud2lkdGggPSBnYWxsZXJ5TWV0cmljcy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEVsZW1lbnQuaGVpZ2h0ID0gZ2FsbGVyeU1ldHJpY3MuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC53aWR0aFBjdCA9IGdhbGxlcnlNZXRyaWNzLndpZHRoUGN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC54ID0gZ2FsbGVyeU1ldHJpY3MueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEVsZW1lbnQucm90YXRpb24gPSBlbGVtZW50by5yb3RhdGlvbiB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC5zY2FsZVggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC5zY2FsZVkgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0F0dHJzLndpZHRoICE9PSB1bmRlZmluZWQpIHVwZGF0ZWRFbGVtZW50LndpZHRoID0gbmV3QXR0cnMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdBdHRycy5oZWlnaHQgIT09IHVuZGVmaW5lZCkgdXBkYXRlZEVsZW1lbnQuaGVpZ2h0ID0gbmV3QXR0cnMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3QXR0cnMucmFkaXVzICE9PSB1bmRlZmluZWQpIHVwZGF0ZWRFbGVtZW50LnJhZGl1cyA9IG5ld0F0dHJzLnJhZGl1cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEVsZW1lbnQuc2NhbGVYID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZEVsZW1lbnQuc2NhbGVZID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWV2b3Nbb2JqSW5kZXhdID0gdXBkYXRlZEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVldm9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/PyBBQ1RVQUxJWkFSIFBPU0lDScOTTiBERUwgQk9Uw5NOIERVUkFOVEUgVFJBTlNGT1JNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0F0dHJzLmlzRmluYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbDogYWN0dWFsaXphY2nDs24gY29tcGxldGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnPz8gR3VhcmRhbmRvIGVzdGFkbyBmaW5hbCBwYXJhIGhpc3RvcmlhbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5fcmVzaXplRGF0YSA9IHsgaXNSZXNpemluZzogZmFsc2UgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBpc1ByZXZpZXcsIGlzRmluYWwsIC4uLmNsZWFuQXR0cnMgfSA9IG5ld0F0dHJzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/PyBDT05WRVJUSVIgY29vcmRlbmFkYXMgYWJzb2x1dGFzIGEgcmVsYXRpdmFzIEFOVEVTIGRlIGd1YXJkYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmpPcmlnaW5hbCA9IG9iamV0b3Nbb2JqSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbEF0dHJzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2xlYW5BdHRycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGNvbnZlcnRpckFic0FSZWwoY2xlYW5BdHRycy55LCBvYmpPcmlnaW5hbC5zZWNjaW9uSWQsIHNlY2Npb25lc09yZGVuYWRhcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tVHJhbnNmb3JtOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPyBDT1VOVERPV046IGNvbnNlcnZhciBlc2NhbGEgZmluYWwgZGVsIGRyYWcgKHNpbiByZWNvbnZlcnNpw7NuIGEgY2hpcFdpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcmEgcXVlIGVsIHRhbWHDsW8gZmluYWwgY29pbmNpZGEgZXhhY3RhbWVudGUgY29uIGxvIHNvbHRhZG8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iak9yaWdpbmFsLnRpcG8gPT09IFwiY291bnRkb3duXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsQXR0cnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZpbmFsQXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWDogTnVtYmVyLmlzRmluaXRlKGNsZWFuQXR0cnMuc2NhbGVYKSA/IGNsZWFuQXR0cnMuc2NhbGVYIDogKG9iak9yaWdpbmFsLnNjYWxlWCA/PyAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiBOdW1iZXIuaXNGaW5pdGUoY2xlYW5BdHRycy5zY2FsZVkpID8gY2xlYW5BdHRycy5zY2FsZVkgOiAob2JqT3JpZ2luYWwuc2NhbGVZID8/IDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbEF0dHJzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsQXR0cnMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqT3JpZ2luYWwudGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iak9yaWdpbmFsLmZpZ3VyYSA9PT0gXCJjaXJjbGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxBdHRycyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZmluYWxBdHRycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogTnVtYmVyLmlzRmluaXRlKGNsZWFuQXR0cnMueCkgPyBjbGVhbkF0dHJzLnggOiAob2JqT3JpZ2luYWwueCB8fCAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiBOdW1iZXIuaXNGaW5pdGUoY2xlYW5BdHRycy5yYWRpdXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjbGVhbkF0dHJzLnJhZGl1c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKG9iak9yaWdpbmFsLnJhZGl1cyB8fCA1MCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbEF0dHJzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsQXR0cnMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqT3JpZ2luYWwudGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iak9yaWdpbmFsLmZpZ3VyYSA9PT0gXCJ0cmlhbmdsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbEF0dHJzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5maW5hbEF0dHJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBOdW1iZXIuaXNGaW5pdGUoY2xlYW5BdHRycy54KSA/IGNsZWFuQXR0cnMueCA6IChvYmpPcmlnaW5hbC54IHx8IDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM6IE51bWJlci5pc0Zpbml0ZShjbGVhbkF0dHJzLnJhZGl1cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNsZWFuQXR0cnMucmFkaXVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAob2JqT3JpZ2luYWwucmFkaXVzIHx8IDYwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsQXR0cnMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmluYWxBdHRycy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmpPcmlnaW5hbC50aXBvID09PSBcImdhbGVyaWFcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FsbGVyeU1ldHJpY3MgPSBub3JtYWxpemFyTWVkaWRhc0dhbGVyaWEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iak9yaWdpbmFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbkF0dHJzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbkF0dHJzLnhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbEF0dHJzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5maW5hbEF0dHJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBnYWxsZXJ5TWV0cmljcy54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogZ2FsbGVyeU1ldHJpY3Mud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogZ2FsbGVyeU1ldHJpY3MuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aFBjdDogZ2FsbGVyeU1ldHJpY3Mud2lkdGhQY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBvYmpPcmlnaW5hbC5yb3RhdGlvbiB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/IG9mZnNldFkgc29sbyBwYXJhIGRlYnVnIChldml0YSBSZWZlcmVuY2VFcnJvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBvYmpPcmlnaW5hbC5zZWNjaW9uSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FmZSA9IGlkeCA+PSAwID8gaWR4IDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGE6IGVuIHR1IGPDs2RpZ28gbG8gbGxhbcOhcyBhIHZlY2VzIGNvbiAyIHBhcmFtcywgYSB2ZWNlcyBjb24gMy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFjw6EgdXNhbW9zIDMsIGNvbnNpc3RlbnRlIGNvbiBvdHJhcyBwYXJ0ZXMgZGVsIGFyY2hpdm8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgc2FmZSwgYWx0b0NhbnZhcykgfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCI/PyBDb252aXJ0aWVuZG8gY29vcmRlbmFkYXM6XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlBYnNvbHV0YTogY2xlYW5BdHRycy55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlSZWxhdGl2YTogZmluYWxBdHRycy55XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmpPcmlnaW5hbC50aXBvID09PSBcImNvdW50ZG93blwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxpemFyT2JqZXRvKG9iakluZGV4LCBmaW5hbEF0dHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsaXphck9iamV0byhvYmpJbmRleCwgZmluYWxBdHRycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9KSgpfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBObyBtb3N0cmFyIGhvdmVyIGR1cmFudGUgZHJhZy9yZXNpemUvZWRpY2nDs24gTkkgY3VhbmRvIGhheSBsw61kZXIgZGUgZ3J1cG8gKi99XHJcbiAgICAgICAgICAgICAgICAgIHshd2luZG93Ll9yZXNpemVEYXRhPy5pc1Jlc2l6aW5nICYmICFpc0RyYWdnaW5nICYmICF3aW5kb3cuX2lzRHJhZ2dpbmcgJiYgIXdpbmRvdy5fZ3J1cG9MaWRlciAmJiAhZWRpdGluZy5pZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEhvdmVySW5kaWNhdG9yIGhvdmVyZWRFbGVtZW50PXtob3ZlcklkfSBlbGVtZW50UmVmcz17ZWxlbWVudFJlZnN9IG9iamV0b3M9e29iamV0b3N9IC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiA/PyBDb250cm9sZXMgZXNwZWNpYWxlcyBwYXJhIGzDrW5lYXMgc2VsZWNjaW9uYWRhcyAqL31cclxuICAgICAgICAgICAgICAgICAge2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAxICYmICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudG9TZWxlY2Npb25hZG8gPSBvYmpldG9zLmZpbmQob2JqID0+IG9iai5pZCA9PT0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRvU2VsZWNjaW9uYWRvPy50aXBvID09PSAnZm9ybWEnICYmIGVsZW1lbnRvU2VsZWNjaW9uYWRvPy5maWd1cmEgPT09ICdsaW5lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmVDb250cm9sc1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidWlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2BsaW5lLWNvbnRyb2xzLSR7ZWxlbWVudG9TZWxlY2Npb25hZG8uaWR9LSR7SlNPTi5zdHJpbmdpZnkoZWxlbWVudG9TZWxlY2Npb25hZG8ucG9pbnRzKX1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lRWxlbWVudD17ZWxlbWVudG9TZWxlY2Npb25hZG99XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRSZWZzPXtlbGVtZW50UmVmc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVMaW5lPXthY3R1YWxpemFyTGluZWF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdG9DYW52YXM9e2FsdG9DYW52YXNEaW5hbWljb31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGU9e2lzTW9iaWxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/PyBOVUVWQSBQUk9QOiBQYXNhciBpbmZvcm1hY2nDs24gc29icmUgZHJhZyBncnVwYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEcmFnR3J1cGFsQWN0aXZlPXt3aW5kb3cuX2dydXBvTGlkZXIgIT09IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3M9e2VsZW1lbnRvc1NlbGVjY2lvbmFkb3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgIH0pKCl9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIEzDrW5lYXMgZGUgZ3XDrWEgZGluw6FtaWNhcyBtZWpvcmFkYXMgKi99XHJcbiAgICAgICAgICAgICAgICAgIHtndWlhTGluZWFzLm1hcCgobGluZWEsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmFyIGVsIGVzdGlsbyB2aXN1YWwgc2Vnw7puIGVsIHRpcG9cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlc0xpbmVhU2VjY2lvbiA9IGxpbmVhLnByaW9yaXR5ID09PSAnc2VjY2lvbic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8TGluZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwidWlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake2xpbmVhLnR5cGV9LSR7aX1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM9e2xpbmVhLnBvaW50c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPXtlc0xpbmVhU2VjY2lvbiA/IFwiIzc3M2RiZVwiIDogXCIjOTMzM2VhXCJ9IC8vIFZpb2xldGEgbcOhcyBpbnRlbnNvIHBhcmEgc2VjY2nDs25cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9e2VzTGluZWFTZWNjaW9uID8gMiA6IDF9IC8vIEzDrW5lYXMgZGUgc2VjY2nDs24gbcOhcyBncnVlc2FzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhc2g9e2xpbmVhLnN0eWxlID09PSAnZGFzaGVkJyA/IFs4LCA2XSA6IHVuZGVmaW5lZH0gLy8gUHVudGVhZG8gcGFyYSBlbGVtZW50b3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eT17ZXNMaW5lYVNlY2Npb24gPyAwLjkgOiAwLjd9IC8vIEzDrW5lYXMgZGUgc2VjY2nDs24gbcOhcyBvcGFjYXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWZlY3RvIHN1dGlsIGRlIHJlc3BsYW5kb3IgcGFyYSBsw61uZWFzIGRlIHNlY2Npw7NuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0NvbG9yPXtlc0xpbmVhU2VjY2lvbiA/IFwicmdiYSgxMTksIDYxLCAxOTAsIDAuMylcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Qmx1cj17ZXNMaW5lYVNlY2Npb24gPyA0IDogMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93RW5hYmxlZD17ZXNMaW5lYVNlY2Npb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH0pfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICA8L0NhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qID8gT3ZlcmxheSBzdXBlcmlvcjogYm9yZGUgZGUgc2VjY2nDs24gYWN0aXZhIFNJRU1QUkUgYXJyaWJhIGRlIHRvZG8gKi99XHJcbiAgICAgICAgICAgICAgICA8Q2FudmFzRWxlbWVudHNMYXllcj5cclxuICAgICAgICAgICAgICAgICAgeygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWNjaW9uQWN0aXZhSWQpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBzZWNjaW9uQWN0aXZhSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNjaW9uID0gc2VjY2lvbmVzT3JkZW5hZGFzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgaW5kZXgsIGFsdG9DYW52YXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzdGFBbmltYW5kbyA9IHNlY2Npb25lc0FuaW1hbmRvLmluY2x1ZGVzKHNlY2Npb24uaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPFJlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgb3ZlcmxheS1ib3JkZXItc2VjY2lvbi0ke3NlY2Npb24uaWR9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgeD17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgeT17b2Zmc2V0WX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezgwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXtzZWNjaW9uLmFsdHVyYX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD1cInRyYW5zcGFyZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiIzc3M2RiZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtlc3RhQW5pbWFuZG8gPyA0IDogM31cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUmFkaXVzPXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcj17ZXN0YUFuaW1hbmRvID8gXCJyZ2JhKDExOSwgNjEsIDE5MCwgMC40KVwiIDogXCJyZ2JhKDExOSwgNjEsIDE5MCwgMC4yNSlcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Qmx1cj17ZXN0YUFuaW1hbmRvID8gMTYgOiAxMn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IGVzdGFBbmltYW5kbyA/IDQgOiAzIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH0pKCl9XHJcbiAgICAgICAgICAgICAgICA8L0NhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcblxyXG4gICAgICAgICAgICAgIDwvU3RhZ2U+XHJcblxyXG5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7ZWRpdGluZy5pZCAmJiBlbGVtZW50UmVmcy5jdXJyZW50W2VkaXRpbmcuaWRdICYmICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgb2JqZXRvRW5FZGljaW9uID0gb2JqZXRvcy5maW5kKG8gPT4gby5pZCA9PT0gZWRpdGluZy5pZCk7XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8SW5saW5lVGV4dEVkaXRvclxyXG4gICAgICAgICAgICAgICAgICBlZGl0aW5nSWQ9e2VkaXRpbmcuaWR9XHJcbiAgICAgICAgICAgICAgICAgIG5vZGU9e2VsZW1lbnRSZWZzLmN1cnJlbnRbZWRpdGluZy5pZF19XHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtlZGl0aW5nLnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICB0ZXh0QWxpZ249e29iamV0b0VuRWRpY2lvbj8uYWxpZ24gfHwgJ2xlZnQnfSAvLyA/PyBTb2xvIHBhc2FyIGFsaW5lYWNpw7NuXHJcbiAgICAgICAgICAgICAgICAgIG9uT3ZlcmxheU1vdW50Q2hhbmdlPXtoYW5kbGVJbmxpbmVPdmVybGF5TW91bnRDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsobmV4dFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFRleHQgPSBTdHJpbmcobmV4dFZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZTdGF0cyA9IGdldElubGluZUxpbmVTdGF0cyhlZGl0aW5nLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0U3RhdHMgPSBnZXRJbmxpbmVMaW5lU3RhdHMobmV4dFRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgIHByZXZTdGF0cy5saW5lQ291bnQgIT09IG5leHRTdGF0cy5saW5lQ291bnQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgIHByZXZTdGF0cy50cmFpbGluZ05ld2xpbmVzICE9PSBuZXh0U3RhdHMudHJhaWxpbmdOZXdsaW5lc1xyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaW5saW5lRGVidWdMb2coXCJsaW5lYnJlYWstbW9kZWwtc3luY1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlZGl0aW5nLmlkIHx8IHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2TGVuZ3RoOiBwcmV2U3RhdHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0TGVuZ3RoOiBuZXh0U3RhdHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2TGluZUNvdW50OiBwcmV2U3RhdHMubGluZUNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0TGluZUNvdW50OiBuZXh0U3RhdHMubGluZUNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VHJhaWxpbmdOZXdsaW5lczogcHJldlN0YXRzLnRyYWlsaW5nTmV3bGluZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRUcmFpbGluZ05ld2xpbmVzOiBuZXh0U3RhdHMudHJhaWxpbmdOZXdsaW5lcyxcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoXCJpbnB1dDogYmVmb3JlLXJlbmRlclwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogZWRpdGluZy5pZCB8fCB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlTGVuZ3RoOiBuZXh0VGV4dC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRWRpdChuZXh0VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICBvbkRlYnVnRXZlbnQ9eyhldmVudE5hbWUsIHBheWxvYWQgPSB7fSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChldmVudE5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBwYXlsb2FkPy5pZCB8fCBlZGl0aW5nLmlkIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICBvbkZpbmlzaD17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmlzaElkID0gZWRpdGluZy5pZDtcclxuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoXCJmaW5pc2g6IGJsdXJcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWVMZW5ndGg6IFN0cmluZyhlZGl0aW5nLnZhbHVlID8/IFwiXCIpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b051ZXZvUmF3ID0gU3RyaW5nKGVkaXRpbmcudmFsdWUgPz8gXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dG9OdWV2b1ZhbGlkYWRvID0gdGV4dG9OdWV2b1Jhdy50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBvYmpldG9zLmZpbmRJbmRleChvID0+IG8uaWQgPT09IGZpbmlzaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmpldG8gPSBvYmpldG9zW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXZlTm9kZUF0RmluaXNoID0gZWxlbWVudFJlZnMuY3VycmVudFtmaW5pc2hJZF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGl2ZU1ldHJpY3NBdEZpbmlzaCA9IG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUobGl2ZU5vZGVBdEZpbmlzaCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwiZmluaXNoLXN0YXJ0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgIHJhd0xlbmd0aDogdGV4dG9OdWV2b1Jhdy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0cmltbWVkTGVuZ3RoOiB0ZXh0b051ZXZvVmFsaWRhZG8ubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb2JqZWN0WDogb2JqZXRvPy54ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3RZOiBvYmpldG8/LnkgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdSZWY6IHsgLi4uaW5saW5lRWRpdFByZXZpZXdSZWYuY3VycmVudCB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGl2ZU1ldHJpY3NBdEZpbmlzaCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiPyBFbCBvYmpldG8geWEgbm8gZXhpc3RlLiBDYW5jZWxhbmRvIGd1YXJkYWRvLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwiZmluaXNoLWFib3J0LW1pc3Npbmctb2JqZWN0XCIsIHsgaWQ6IGZpbmlzaElkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ29tbWl0RGVidWdSZWYuY3VycmVudCA9IHsgaWQ6IG51bGwgfTtcclxuICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEVkaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vID8/IFBvZMOpcyBwZXJtaXRpciB0ZXh0byB2YWPDrW8gZW4gZm9ybWFzIHNpIHF1ZXLDqXMgKHlvIGxvIHBlcm1pdGlyw61hKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0b051ZXZvVmFsaWRhZG8gPT09IFwiXCIgJiYgb2JqZXRvLnRpcG8gPT09IFwidGV4dG9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiPz8gRWwgdGV4dG8gZXN0w6EgdmFjw61vLiBObyBzZSBhY3R1YWxpemEuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaW5saW5lRGVidWdMb2coXCJmaW5pc2gtYWJvcnQtZW1wdHlcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd0xlbmd0aDogdGV4dG9OdWV2b1Jhdy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaW1tZWRMZW5ndGg6IHRleHRvTnVldm9WYWxpZGFkby5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNvbW1pdERlYnVnUmVmLmN1cnJlbnQgPSB7IGlkOiBudWxsIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVFZGl0UHJldmlld1JlZi5jdXJyZW50ID0geyBpZDogbnVsbCwgY2VudGVyWDogbnVsbCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgZmluaXNoRWRpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsaXphZG8gPSBbLi4ub2JqZXRvc107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0Y2ggPSB7IHRleHRvOiB0ZXh0b051ZXZvUmF3IH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZEtlZXBDZW50ZXJYID1cclxuICAgICAgICAgICAgICAgICAgICAgIG9iamV0by50aXBvID09PSBcInRleHRvXCIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICFvYmpldG8uX19ncm91cEFsaWduICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAhTnVtYmVyLmlzRmluaXRlKG9iamV0by53aWR0aCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgIG9iamV0by5fX2F1dG9XaWR0aCAhPT0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRLZWVwQ2VudGVyWCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFggPSBjYWxjdWxhclhUZXh0b0NlbnRyYWRvKG9iamV0bywgdGV4dG9OdWV2b1Jhdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WCA9IE51bWJlci5pc0Zpbml0ZShvYmpldG8ueCkgPyBvYmpldG8ueCA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKG5leHRYKSAmJiBNYXRoLmFicyhuZXh0WCAtIGN1cnJlbnRYKSA+IDAuMDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2gueCA9IG5leHRYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwiZmluaXNoLWNlbnRlci1jb21wdXRlZFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkS2VlcENlbnRlclgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0WCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hYOiBwYXRjaC54ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbGl6YWRvW2luZGV4XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgIC4uLmFjdHVhbGl6YWRvW2luZGV4XSxcclxuICAgICAgICAgICAgICAgICAgICAgIC4uLnBhdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRYID0gTnVtYmVyLmlzRmluaXRlKHBhdGNoLngpXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IHBhdGNoLnhcclxuICAgICAgICAgICAgICAgICAgICAgIDogKE51bWJlci5pc0Zpbml0ZShvYmpldG8ueCkgPyBvYmpldG8ueCA6IG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlubGluZUNvbW1pdERlYnVnUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZFgsXHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3RYQmVmb3JlQ29tbWl0OiBOdW1iZXIuaXNGaW5pdGUob2JqZXRvLngpID8gb2JqZXRvLnggOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbGl2ZU5vZGVYQXRGaW5pc2g6IE51bWJlci5pc0Zpbml0ZShsaXZlTWV0cmljc0F0RmluaXNoPy54KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGxpdmVNZXRyaWNzQXRGaW5pc2gueFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3Q2VudGVyWDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIHRleHRMZW5ndGg6IHRleHRvTnVldm9SYXcubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwiZmluaXNoLWFwcGx5LXBhdGNoXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgIHBhdGNoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRYLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvZ0ZpbmlzaFZpc2liaWxpdHlDaGVjayA9IChwaGFzZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FmZUlkID0gU3RyaW5nKGZpbmlzaElkIHx8IFwiXCIpLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXlEb21QcmVzZW50ID0gc2FmZUlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gQm9vbGVhbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmxpbmUtZWRpdG9yLWlkPVwiJHtzYWZlSWR9XCJdYCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXZlTm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbZmluaXNoSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaW5saW5lRGVidWdMb2coXCJmaW5pc2gtdmlzaWJpbGl0eS1jaGVja1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBoYXNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0aXZlRWRpdGluZ0lkOiBlZGl0aW5nLmlkIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbEVkaXRpbmdJZDogd2luZG93LmVkaXRpbmc/LmlkID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFZGl0aW5nSWQ6IHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5TW91bnRlZElkOiBpbmxpbmVPdmVybGF5TW91bnRlZElkID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXlEb21QcmVzZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlT3BhY2l0eTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgbGl2ZU5vZGU/Lm9wYWNpdHkgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBsaXZlTm9kZS5vcGFjaXR5KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVZpc2libGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGxpdmVOb2RlPy52aXNpYmxlID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbGl2ZU5vZGUudmlzaWJsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVNZXRyaWNzOiBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lKGxpdmVOb2RlKSxcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nRmluaXNoVmlzaWJpbGl0eUNoZWNrKFwiYmVmb3JlLWNvbW1pdFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZmluaXNoOiBiZWZvcmUtZmx1c2hcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcGF0Y2hYOiBwYXRjaC54ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hTeW5jKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MoYWN0dWFsaXphZG8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImZpbmlzaDogYWZ0ZXItZmx1c2hcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcGF0Y2hYOiBwYXRjaC54ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nRmluaXNoVmlzaWJpbGl0eUNoZWNrKFwiYWZ0ZXItY29tbWl0LWJlZm9yZS1maW5pc2hFZGl0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlubGluZUVkaXRQcmV2aWV3UmVmLmN1cnJlbnQgPSB7IGlkOiBudWxsLCBjZW50ZXJYOiBudWxsIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hTeW5jKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEVkaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFnZUFmdGVyRmluaXNoRWRpdCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICBzdGFnZVJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCkgfHwgc3RhZ2VSZWYuY3VycmVudCB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhZ2VBZnRlckZpbmlzaEVkaXQ/LmJhdGNoRHJhdyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzdGFnZUFmdGVyRmluaXNoRWRpdC5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nRmluaXNoVmlzaWJpbGl0eUNoZWNrKFwiYWZ0ZXItZmluaXNoRWRpdC1zeW5jXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPT09IGZpbmlzaElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoXCJmaW5pc2g6IGFmdGVyLWZpbmlzaEVkaXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcGF0Y2hYOiBwYXRjaC54ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxvZ0ZpbmlzaFZpc2liaWxpdHlDaGVjayhcImFmdGVyLWZpbmlzaEVkaXQtcmFmMVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImZpbmlzaDogcmFmMVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaFg6IHBhdGNoLnggPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZmluaXNoOiByYWYyXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoWDogcGF0Y2gueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICBzY2FsZVZpc3VhbD17ZXNjYWxhVmlzdWFsfVxyXG4gICAgICAgICAgICAgICAgICBmaW5pc2hNb2RlPXtpbmxpbmVEZWJ1Z0FCLmZpbmlzaE1vZGV9XHJcbiAgICAgICAgICAgICAgICAgIHdpZHRoTW9kZT17aW5saW5lRGVidWdBQi5vdmVybGF5V2lkdGhNb2RlfVxyXG5cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSkoKX1cclxuXHJcblxyXG4gICAgICAgICAgICB7LyogPz8gU1RBR0UgQURJQ0lPTkFMIFNPTE8gUEFSQSBMw41ORUFTIERJVklTT1JJQVMgKi99XHJcbiAgICAgICAgICAgIDxEaXZpZGVyc092ZXJsYXlTdGFnZVxyXG4gICAgICAgICAgICAgIHpvb209e3pvb219XHJcbiAgICAgICAgICAgICAgYWx0b0NhbnZhc0RpbmFtaWNvPXthbHRvQ2FudmFzRGluYW1pY299XHJcbiAgICAgICAgICAgICAgc2VjY2lvbmVzT3JkZW5hZGFzPXtzZWNjaW9uZXNPcmRlbmFkYXN9XHJcbiAgICAgICAgICAgIC8+XHJcblxyXG5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuXHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG5cclxuICAgICAgPC9kaXY+XHJcblxyXG5cclxuXHJcbiAgICAgIHsvKiA/IEJvdMOzbiBkZSBvcGNpb25lcyBQRUdBRE8gYSBsYSBlc3F1aW5hIHN1cGVyaW9yIGRlcmVjaGEgZGVsIGVsZW1lbnRvICovfVxyXG4gICAgICB7ZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPT09IDEgJiYgIWVkaXRpbmcuaWQgJiYgKCgpID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtZW50b1NlbGVjY2lvbmFkbyA9IG9iamV0b3MuZmluZChvID0+IG8uaWQgPT09IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NbMF0pO1xyXG4gICAgICAgIGNvbnN0IG5vZGVSZWYgPSBlbGVtZW50UmVmcy5jdXJyZW50W2VsZW1lbnRvc1NlbGVjY2lvbmFkb3NbMF1dO1xyXG5cclxuICAgICAgICBpZiAoIW5vZGVSZWYgfHwgIWVsZW1lbnRvU2VsZWNjaW9uYWRvKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGVuZWRvciA9IGNvbnRlbmVkb3JSZWYuY3VycmVudDtcclxuICAgICAgICBjb25zdCBzdGFnZSA9IHN0YWdlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKCFjb250ZW5lZG9yIHx8ICFzdGFnZSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIC8vID8/IE9CVEVORVIgUE9TSUNJw5NOIFJFQUwgREVMIEVMRU1FTlRPIEVOIEVMIFNUQUdFXHJcbiAgICAgICAgbGV0IGJveCA9IG5vZGVSZWYuZ2V0Q2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGVsZW1lbnRvU2VsZWNjaW9uYWRvPy50aXBvID09PSBcImdhbGVyaWFcIiAmJlxyXG4gICAgICAgICAgTnVtYmVyLmlzRmluaXRlKE51bWJlcihlbGVtZW50b1NlbGVjY2lvbmFkby53aWR0aCkpICYmXHJcbiAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKGVsZW1lbnRvU2VsZWNjaW9uYWRvLmhlaWdodCkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBhYnNQb3MgPVxyXG4gICAgICAgICAgICB0eXBlb2Ygbm9kZVJlZi5nZXRBYnNvbHV0ZVBvc2l0aW9uID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICA/IG5vZGVSZWYuZ2V0QWJzb2x1dGVQb3NpdGlvbigpXHJcbiAgICAgICAgICAgICAgOiB7XHJcbiAgICAgICAgICAgICAgICB4OiB0eXBlb2Ygbm9kZVJlZi54ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlUmVmLngoKSA6IDAsXHJcbiAgICAgICAgICAgICAgICB5OiB0eXBlb2Ygbm9kZVJlZi55ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlUmVmLnkoKSA6IDAsXHJcbiAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICBib3ggPSB7XHJcbiAgICAgICAgICAgIHg6IGFic1Bvcy54LFxyXG4gICAgICAgICAgICB5OiBhYnNQb3MueSxcclxuICAgICAgICAgICAgd2lkdGg6IE51bWJlcihlbGVtZW50b1NlbGVjY2lvbmFkby53aWR0aCksXHJcbiAgICAgICAgICAgIGhlaWdodDogTnVtYmVyKGVsZW1lbnRvU2VsZWNjaW9uYWRvLmhlaWdodCksXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gPz8gT0JURU5FUiBDT09SREVOQURBUyBERUwgU1RBR0UgUkVMQVRJVkFTIEFMIFZJRVdQT1JUXHJcbiAgICAgICAgY29uc3Qgc3RhZ2VDb250YWluZXIgPSBzdGFnZS5jb250YWluZXIoKTtcclxuICAgICAgICBjb25zdCBzdGFnZVJlY3QgPSBzdGFnZUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgLy8gPz8gQ0FMQ1VMQVIgUE9TSUNJw5NOIEVYQUNUQSBERUwgRUxFTUVOVE8gRU4gUEFOVEFMTEFcclxuICAgICAgICBjb25zdCBlbGVtZW50b0VuUGFudGFsbGFYID0gc3RhZ2VSZWN0LmxlZnQgKyAoYm94LnggKiBlc2NhbGFBY3RpdmEpO1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRvRW5QYW50YWxsYVkgPSBzdGFnZVJlY3QudG9wICsgKGJveC55ICogZXNjYWxhQWN0aXZhKTtcclxuICAgICAgICBjb25zdCBhbmNob0VsZW1lbnRvID0gYm94LndpZHRoICogZXNjYWxhQWN0aXZhO1xyXG5cclxuICAgICAgICAvLyA/PyBQT1NJQ0nDk04gTVVZIENFUkNBOiBFc3F1aW5hIHN1cGVyaW9yIGRlcmVjaGEgcGVnYWRhIGFsIGVsZW1lbnRvXHJcbiAgICAgICAgY29uc3QgYm90b25YID0gZWxlbWVudG9FblBhbnRhbGxhWCArIGFuY2hvRWxlbWVudG8gLSA4OyAvLyBTb2xvIC04cHggcGFyYSBxdWUgc2Ugc3VwZXJwb25nYSB1biBwb2NvXHJcbiAgICAgICAgY29uc3QgYm90b25ZID0gZWxlbWVudG9FblBhbnRhbGxhWSAtIDg7IC8vIC04cHggYXJyaWJhIGRlbCBlbGVtZW50b1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICByZWY9e2JvdG9uT3BjaW9uZXNSZWZ9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIHotNTAgYmctd2hpdGUgYm9yZGVyLTIgYm9yZGVyLXB1cnBsZS01MDAgcm91bmRlZC1mdWxsIHNoYWRvdy1sZyBob3ZlcjpzaGFkb3cteGwgdHJhbnNpdGlvbi1zaGFkb3cgZHVyYXRpb24tMjAwXCJcclxuICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICBsZWZ0OiBcIjBweFwiLCAvLyA/PyBQT1NJQ0nDk04gSU5JQ0lBTCAtIHNlcsOhIGFjdHVhbGl6YWRhIHBvciBsYSBmdW5jacOzblxyXG4gICAgICAgICAgICAgIHRvcDogXCIwcHhcIixcclxuICAgICAgICAgICAgICB3aWR0aDogXCIyNHB4XCIsXHJcbiAgICAgICAgICAgICAgaGVpZ2h0OiBcIjI0cHhcIixcclxuICAgICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIixcclxuICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6IFwiYXV0b1wiLFxyXG4gICAgICAgICAgICAgIHRyYW5zaXRpb246IFwibm9uZVwiLFxyXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOTUpXCIsXHJcbiAgICAgICAgICAgICAgYmFja2Ryb3BGaWx0ZXI6IFwiYmx1cig0cHgpXCIsXHJcbiAgICAgICAgICAgICAgYm9yZGVyOiBcIjJweCBzb2xpZCAjNzczZGJlXCIsXHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHNldE1vc3RyYXJQYW5lbFooKHByZXYpID0+ICFwcmV2KTtcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhvdmVyOmJnLXB1cnBsZS01MCB3LWZ1bGwgaC1mdWxsIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0cmFuc2l0aW9uLWNvbG9ycyB0ZXh0LXhzXCJcclxuICAgICAgICAgICAgICB0aXRsZT1cIk9wY2lvbmVzIGRlbCBlbGVtZW50b1wiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA/P1xyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pKCl9XHJcblxyXG5cclxuXHJcbiAgICAgIHttb3N0cmFyUGFuZWxaICYmIChcclxuICAgICAgICA8TWVudU9wY2lvbmVzRWxlbWVudG9cclxuICAgICAgICAgIGlzT3Blbj17bW9zdHJhclBhbmVsWn1cclxuICAgICAgICAgIGJvdG9uT3BjaW9uZXNSZWY9e2JvdG9uT3BjaW9uZXNSZWZ9XHJcbiAgICAgICAgICBlbGVtZW50b1NlbGVjY2lvbmFkbz17b2JqZXRvcy5maW5kKG8gPT4gby5pZCA9PT0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc1swXSl9XHJcbiAgICAgICAgICBvbkNvcGlhcj17b25Db3BpYXJ9XHJcbiAgICAgICAgICBvblBlZ2FyPXtvblBlZ2FyfVxyXG4gICAgICAgICAgb25EdXBsaWNhcj17b25EdXBsaWNhcn1cclxuICAgICAgICAgIG9uRWxpbWluYXI9e29uRWxpbWluYXJ9XHJcbiAgICAgICAgICBtb3ZlckVsZW1lbnRvPXttb3ZlckVsZW1lbnRvfVxyXG4gICAgICAgICAgb25DZXJyYXI9eygpID0+IHNldE1vc3RyYXJQYW5lbFooZmFsc2UpfVxyXG4gICAgICAgICAgcmVlbXBsYXphckZvbmRvPXtyZWVtcGxhemFyRm9uZG99XHJcbiAgICAgICAgICBzZWNjaW9uZXM9e3NlY2Npb25lc31cclxuICAgICAgICAgIG9iamV0b3M9e29iamV0b3N9XHJcbiAgICAgICAgICBzZXRTZWNjaW9uZXM9e3NldFNlY2Npb25lc31cclxuICAgICAgICAgIHNldE9iamV0b3M9e3NldE9iamV0b3N9XHJcbiAgICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zPXtzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcblxyXG5cclxuICAgICAgPEZsb2F0aW5nVGV4dFRvb2xiYXJcclxuICAgICAgICBvYmpldG9TZWxlY2Npb25hZG89e29iamV0b1NlbGVjY2lvbmFkb31cclxuICAgICAgICBzZXRPYmpldG9zPXtzZXRPYmpldG9zfVxyXG4gICAgICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3M9e2VsZW1lbnRvc1NlbGVjY2lvbmFkb3N9XHJcbiAgICAgICAgbW9zdHJhclNlbGVjdG9yRnVlbnRlPXttb3N0cmFyU2VsZWN0b3JGdWVudGV9XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlPXtzZXRNb3N0cmFyU2VsZWN0b3JGdWVudGV9XHJcbiAgICAgICAgbW9zdHJhclNlbGVjdG9yVGFtYW5vPXttb3N0cmFyU2VsZWN0b3JUYW1hbm99XG4gICAgICAgIHNldE1vc3RyYXJTZWxlY3RvclRhbWFubz17c2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vfVxuICAgICAgICBBTExfRk9OVFM9e0FMTF9GT05UU31cclxuICAgICAgICBmb250TWFuYWdlcj17Zm9udE1hbmFnZXJ9XHJcbiAgICAgICAgdGFtYW5pb3NEaXNwb25pYmxlcz17dGFtYW5pb3NEaXNwb25pYmxlc31cclxuICAgICAgICBvbkNhbWJpYXJBbGluZWFjaW9uPXtvbkNhbWJpYXJBbGluZWFjaW9ufVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgPENvbmZpcm1EZWxldGVTZWN0aW9uTW9kYWxcclxuICAgICAgICBpc09wZW49e2RlbGV0ZVNlY3Rpb25Nb2RhbC5pc09wZW59XHJcbiAgICAgICAgc2VjdGlvbk5hbWU9e3NlY2Npb25QZW5kaWVudGVFbGltaW5hcj8udGlwb31cclxuICAgICAgICBpdGVtQ291bnQ9e2NhbnRpZGFkRWxlbWVudG9zU2VjY2lvblBlbmRpZW50ZX1cclxuICAgICAgICBpc0RlbGV0aW5nPXtpc0RlbGV0aW5nU2VjdGlvbn1cclxuICAgICAgICBvbkNhbmNlbD17Y2VycmFyTW9kYWxCb3JyYXJTZWNjaW9ufVxyXG4gICAgICAgIG9uQ29uZmlybT17Y29uZmlybWFyQm9ycmFyU2VjY2lvbn1cclxuICAgICAgLz5cclxuXHJcblxyXG5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcblxyXG59XHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZU1lbW8iLCJ1c2VDYWxsYmFjayIsImZsdXNoU3luYyIsIlN0YWdlIiwiTGluZSIsIlJlY3QiLCJUZXh0IiwiSW1hZ2UiLCJLb252YUltYWdlIiwiR3JvdXAiLCJDaXJjbGUiLCJFbGVtZW50b0NhbnZhcyIsIkxpbmVDb250cm9scyIsIlJlYWN0RE9NU2VydmVyIiwiY2FsY3VsYXJPZmZzZXRZIiwiY29udmVydGlyQWJzQVJlbCIsImRldGVybWluYXJOdWV2YVNlY2Npb24iLCJjcmVhclNlY2Npb24iLCJ1c2VQbGFudGlsbGFzRGVTZWNjaW9uIiwidXNlSW1wZXJhdGl2ZU9iamVjdHMiLCJTZWxlY3Rpb25Cb3VuZHMiLCJIb3ZlckluZGljYXRvciIsIkxpbmVUb29sYmFyIiwidXNlSW1hZ2UiLCJ1c2VLZXlib2FyZFNob3J0Y3V0cyIsImZvbnRNYW5hZ2VyIiwidXNlSW5saW5lRWRpdG9yIiwiU2hhcGVUb29sYmFyIiwidXNlRWRpdG9ySGFuZGxlcnMiLCJJbmxpbmVUZXh0RWRpdG9yIiwiRm9udFNlbGVjdG9yIiwicmVlbXBsYXphckZvbmRvU2VjY2lvbiIsInJlZW1wbGF6YXJGb25kbyIsImRlc2FuY2xhckltYWdlbkRlRm9uZG8iLCJkZXNhbmNsYXJGb25kbyIsImJvcnJhclNlY2Npb24iLCJib3JyYXJTZWNjaW9uRXh0ZXJuYWwiLCJtb3ZlclNlY2Npb24iLCJtb3ZlclNlY2Npb25FeHRlcm5hbCIsInZhbGlkYXJQdW50b3NMaW5lYSIsImRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEiLCJndWFyZGFyU2VjY2lvbkNvbW9QbGFudGlsbGEiLCJHYWxlcmlhS29udmEiLCJGb25kb1NlY2Npb24iLCJNZW51T3BjaW9uZXNFbGVtZW50byIsImNhbGNHYWxsZXJ5TGF5b3V0IiwiQ291bnRkb3duS29udmEiLCJ1c2VHdWlhc0NlbnRyYWRvIiwiRmxvYXRpbmdUZXh0VG9vbGJhciIsIlNlbGVjdG9yQ29sb3JTZWNjaW9uIiwiS29udmEiLCJBTExfRk9OVFMiLCJ1c2VBdXRoQ2xhaW1zIiwiQ2hlY2siLCJSb3RhdGVDY3ciLCJDb3B5IiwiVHJhc2gyIiwiTGF5ZXJzIiwiQXJyb3dEb3duIiwiQXJyb3dVcCIsIk1vdmVVcCIsIk1vdmVEb3duIiwiUGx1c0NpcmNsZSIsIkNsaXBib2FyZFBhc3RlIiwidXNlQm9ycmFkb3JTeW5jIiwidXNlU2VjdGlvbnNNYW5hZ2VyIiwiQ29uZmlybURlbGV0ZVNlY3Rpb25Nb2RhbCIsInVzZUVkaXRvckV2ZW50cyIsInVzZUVkaXRvcldpbmRvd0JyaWRnZSIsInVzZUhpc3RvcnlNYW5hZ2VyIiwidXNlQ2FudmFzU2NhbGVMYXlvdXQiLCJ1c2VDYW52YXNJbnRlcmFjdGlvblN0YXRlIiwidXNlU3RhZ2VHZXN0dXJlcyIsInVzZU9wdGlvbkJ1dHRvblBvc2l0aW9uIiwiQ2FudmFzRWxlbWVudHNMYXllciIsIkRpdmlkZXJzT3ZlcmxheVN0YWdlIiwiZHJhZ0Rpc3RhbmNlIiwiQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEEiLCJBTFRVUkFfUEFOVEFMTEFfRURJVE9SIiwibm9ybWFsaXphckFsdG9Nb2RvIiwibW9kbyIsIm0iLCJTdHJpbmciLCJ0b0xvd2VyQ2FzZSIsImxpbXBpYXJPYmpldG9VbmRlZmluZWQiLCJvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJvYmpMaW1waW8iLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInZhbG9yIiwidW5kZWZpbmVkIiwiaWNvbm9Sb3RhY2lvbiIsInJlbmRlclRvU3RhdGljTWFya3VwIiwiY29sb3IiLCJ1cmxEYXRhIiwiYnRvYSIsInNldEdsb2JhbEN1cnNvciIsImN1cnNvciIsInN0YWdlUmVmIiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJzdGFnZSIsImN1cnJlbnQiLCJjb250YWluZXIiLCJjYW52YXMiLCJxdWVyeVNlbGVjdG9yIiwicGFyZW50RWxlbWVudCIsImNsZWFyR2xvYmFsQ3Vyc29yIiwiaXNJbmxpbmVEZWJ1Z0VuYWJsZWQiLCJ3aW5kb3ciLCJfX0lOTElORV9ERUJVRyIsImZvcm1hdElubGluZUxvZ1BheWxvYWQiLCJwYXlsb2FkIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiaW5saW5lRGVidWdMb2ciLCJldmVudCIsImVzc2VudGlhbEV2ZW50cyIsIlNldCIsImhhcyIsInRzIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29uc29sZSIsImxvZyIsIm5leHRJbmxpbmVGcmFtZU1ldGEiLCJmcmFtZSIsInBlcmZNcyIsInByZXYiLCJOdW1iZXIiLCJfX0lOTElORV9GUkFNRV9TRVEiLCJuZXh0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJ0b0ZpeGVkIiwiZ2V0SW5saW5lTGluZVN0YXRzIiwidmFsdWUiLCJub3JtYWxpemVkIiwicmVwbGFjZSIsInRyYWlsaW5nIiwibWF0Y2giLCJsZW5ndGgiLCJsaW5lQ291bnQiLCJzcGxpdCIsInRyYWlsaW5nTmV3bGluZXMiLCJub3JtYWxpemVJbmxpbmVEZWJ1Z0FCIiwicmF3Q29uZmlnIiwicmF3IiwidmlzaWJpbGl0eVNvdXJjZSIsImZpbmlzaE1vZGUiLCJvdmVybGF5V2lkdGhNb2RlIiwiQ2FudmFzRWRpdG9yIiwic2x1ZyIsInpvb20iLCJvbkhpc3RvcmlhbENoYW5nZSIsIm9uRnV0dXJvc0NoYW5nZSIsInVzZXJJZCIsIm9iamV0b3MiLCJzZXRPYmpldG9zIiwiY2VsZGFHYWxlcmlhQWN0aXZhIiwic2V0Q2VsZGFHYWxlcmlhQWN0aXZhIiwic2VjY2lvbmVzIiwic2V0U2VjY2lvbmVzIiwiaGlzdG9yaWFsIiwic2V0SGlzdG9yaWFsIiwiZnV0dXJvcyIsInNldEZ1dHVyb3MiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsImNhcmdhZG8iLCJzZXRDYXJnYWRvIiwiZHJhZ1N0YXJ0UG9zIiwiaGFzRHJhZ2dlZCIsImlzRHJhZ2dpbmciLCJzZXRJc0RyYWdnaW5nIiwiaW1wZXJhdGl2ZU9iamVjdHMiLCJhbmltYW5kb1NlY2Npb24iLCJzZXRBbmltYW5kb1NlY2Npb24iLCJzZWNjaW9uQWN0aXZhSWQiLCJzZXRTZWNjaW9uQWN0aXZhSWQiLCJzZWxlY2Npb25BY3RpdmEiLCJzZXRTZWxlY2Npb25BY3RpdmEiLCJpbmljaW9TZWxlY2Npb24iLCJzZXRJbmljaW9TZWxlY2Npb24iLCJhcmVhU2VsZWNjaW9uIiwic2V0QXJlYVNlbGVjY2lvbiIsImVsZW1lbnRvc1ByZVNlbGVjY2lvbmFkb3MiLCJzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zIiwiZ3VpYUxheWVyUmVmIiwiaG92ZXJJZCIsInNldEhvdmVySWQiLCJhbHRvQ2FudmFzIiwicmVkdWNlIiwiYWNjIiwicyIsImFsdHVyYSIsInNlY2Npb25lc0FuaW1hbmRvIiwic2V0U2VjY2lvbmVzQW5pbWFuZG8iLCJyZWZyZXNjYXIiLCJyZWZyZXNjYXJQbGFudGlsbGFzRGVTZWNjaW9uIiwiZWxlbWVudG9Db3BpYWRvIiwic2V0RWxlbWVudG9Db3BpYWRvIiwiZWxlbWVudFJlZnMiLCJpbmxpbmVFZGl0UHJldmlld1JlZiIsImlkIiwiY2VudGVyWCIsImlubGluZUNvbW1pdERlYnVnUmVmIiwicHJldkVkaXRpbmdJZFJlZiIsImlubGluZVJlbmRlclZhbHVlUmVmIiwiaW5saW5lT3ZlcmxheU1vdW50ZWRJZCIsInNldElubGluZU92ZXJsYXlNb3VudGVkSWQiLCJjb250ZW5lZG9yUmVmIiwiaWdub3JlTmV4dFVwZGF0ZVJlZiIsImFuY2hvU3RhZ2UiLCJzZXRBbmNob1N0YWdlIiwibW9zdHJhclNlbGVjdG9yRnVlbnRlIiwic2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlIiwibW9zdHJhclN1Ym1lbnVDYXBhIiwic2V0TW9zdHJhclN1Ym1lbnVDYXBhIiwiZnVlbnRlc0Rpc3BvbmlibGVzIiwiZXNBZG1pbiIsImxvYWRpbmdDbGFpbXMiLCJtb2JpbGVCYWNrZ3JvdW5kRWRpdFNlY3Rpb25JZCIsInNldE1vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkIiwiZGVsZXRlU2VjdGlvbk1vZGFsIiwic2V0RGVsZXRlU2VjdGlvbk1vZGFsIiwiaXNPcGVuIiwic2VjdGlvbklkIiwiaXNEZWxldGluZ1NlY3Rpb24iLCJzZXRJc0RlbGV0aW5nU2VjdGlvbiIsImNvbnRyb2xhbmRvQWx0dXJhIiwiaW5pY2lhckNvbnRyb2xBbHR1cmEiLCJmaW5hbGl6YXJDb250cm9sQWx0dXJhIiwidG9nZ2xlUGFudGFsbGFDb21wbGV0YVNlY2Npb24iLCJoYW5kbGVDcmVhclNlY2Npb24iLCJudWV2b1RleHRvUmVmIiwic2VjY2lvbmVzT3JkZW5hZGFzIiwic29ydCIsImEiLCJiIiwib3JkZW4iLCJzZWNjaW9uUGVuZGllbnRlRWxpbWluYXIiLCJmaW5kIiwic2VjY2lvbiIsImNhbnRpZGFkRWxlbWVudG9zU2VjY2lvblBlbmRpZW50ZSIsImZpbHRlciIsInNlY2Npb25JZCIsImVkaXRpbmciLCJzdGFydEVkaXQiLCJ1cGRhdGVFZGl0IiwiZmluaXNoRWRpdCIsIm9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUiLCJub2RlIiwiY2xhc3NOYW1lIiwiZ2V0Q2xhc3NOYW1lIiwieCIsInkiLCJ0ZXh0V2lkdGgiLCJnZXRUZXh0V2lkdGgiLCJNYXRoIiwiY2VpbCIsInJlY3QiLCJnZXRDbGllbnRSZWN0Iiwic2tpcFRyYW5zZm9ybSIsInNraXBTaGFkb3ciLCJza2lwU3Ryb2tlIiwid2lkdGgiLCJoZWlnaHQiLCJjZXJyYXJNZW51c0Zsb3RhbnRlcyIsInNldE1vc3RyYXJQYW5lbFoiLCJzZXRNb3N0cmFyU2VsZWN0b3JUYW1hbm8iLCJvYmpldG9TZWxlY2Npb25hZG8iLCJvIiwibW9zdHJhclNlbGVjdG9yVGFtYW5vIiwidGFtYW5pb3NEaXNwb25pYmxlcyIsImZyb20iLCJfIiwiaSIsImljb25vIiwiYm90b25PcGNpb25lc1JlZiIsIl9yZWZFdmVudFF1ZXVlZCIsInJlZ2lzdGVyUmVmIiwicmVnaXN0ZXJPYmplY3QiLCJhZGQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkZWxldGUiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJsb2FkZWRGb250RmFtaWxpZXNSZWYiLCJpc01vYmlsZSIsImlzTW9iaWxlUG9ydHJhaXQiLCJzY2FsZSIsImFuY2hvQ29udGVuZWRvciIsImVzY2FsYUFjdGl2YSIsImVzY2FsYVZpc3VhbCIsIndyYXBwZXJCYXNlV2lkdGgiLCJlc2NhbGFGaXRNb2JpbGVQb3J0cmFpdCIsImlubGluZURlYnVnQUIiLCJfX0lOTElORV9BQiIsImhhbmRsZUlubGluZU92ZXJsYXlNb3VudENoYW5nZSIsIm1vdW50ZWQiLCJzYWZlSWQiLCJwcmV2aW91cyIsInByZXZpb3VzT3ZlcmxheU1vdW50ZWRJZCIsIm5leHRPdmVybGF5TW91bnRlZElkIiwiY2FwdHVyZUlubGluZVNuYXBzaG90IiwiZXZlbnROYW1lIiwiZXh0cmEiLCJfX0lOTElORV9TTkFQU0hPVCIsInNuYXBzaG90QWxsb3dsaXN0IiwiZnJhbWVNZXRhIiwic25hcHNob3RJZCIsIm5vZGVNZXRyaWNzIiwib2JqTWV0cmljcyIsInRpcG8iLCJpc0Zpbml0ZSIsInRleHRvTGVuZ3RoIiwidGV4dG8iLCJmb250U2l6ZSIsImxpbmVIZWlnaHQiLCJnZXRTdGFnZSIsInN0YWdlUmVjdCIsInIiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpbmxpbmVSZWN0IiwiaW5saW5lU3R5bGUiLCJpbmxpbmVDb250ZW50UmVjdCIsImlubGluZUNvbnRlbnRNZXRyaWNzIiwib3ZlcmxheUVsIiwibGVmdCIsInRvcCIsIm1pbldpZHRoIiwibWF4V2lkdGgiLCJjb250ZW50RWwiLCJjb250ZW50UmVjdCIsInNjcm9sbFdpZHRoIiwiY2xpZW50V2lkdGgiLCJpc0ZvY3VzZWQiLCJhY3RpdmVFbGVtZW50IiwidHJhbnNmb3JtZXJSZWN0IiwidHJhbnNmb3JtZXIiLCJmaW5kT25lIiwidHJSZWN0Iiwibm9kZXMiLCJub2Rlc0NvdW50IiwiaW5jbHVkZXNTbmFwc2hvdE5vZGUiLCJpbmNsdWRlcyIsImVkaXRpbmdJZCIsImN1cnJlbnRFZGl0aW5nSWQiLCJfY3VycmVudEVkaXRpbmdJZCIsIm92ZXJsYXlNb3VudGVkSWQiLCJpbmxpbmVBQiIsInNjcm9sbFgiLCJzY3JvbGxZIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiY3VycmVudElkIiwiY3VycmVudFZhbHVlIiwicHJldlN0YXRzIiwibmV4dFN0YXRzIiwibGluZWJyZWFrQ2hhbmdlZCIsImluY2x1ZGVzRWRpdGluZ05vZGUiLCJvdmVybGF5UmVjdCIsImNyIiwicHJldkxlbmd0aCIsIm5leHRMZW5ndGgiLCJwcmV2TGluZUNvdW50IiwibmV4dExpbmVDb3VudCIsInByZXZUcmFpbGluZ05ld2xpbmVzIiwibmV4dFRyYWlsaW5nTmV3bGluZXMiLCJwcmV2aW91c0xlbmd0aCIsInZhbHVlTGVuZ3RoIiwibm9ybWFsaXplZEFCIiwiZW5hYmxlZCIsImZyYW1lU2VxIiwicHJldmlvdXNJZCIsImZ1ZW50ZXNOZWNlc2FyaWFzIiwiZm9udHMiLCJmaWd1cmEiLCJmb250RmFtaWx5IiwidHJpbSIsIkJvb2xlYW4iLCJwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQiLCJuZXh0Q3VycmVudEVkaXRpbmdJZCIsImFjdHVhbGl6YXJPZmZzZXRGb25kbyIsIm51ZXZvc09mZnNldHMiLCJlc1ByZXZpZXciLCJzZWNjaW9uQWN0dWFsaXphZGEiLCJvZmZzZXRYIiwiZm9uZG9JbWFnZW5PZmZzZXRYIiwib2Zmc2V0WSIsImZvbmRvSW1hZ2VuT2Zmc2V0WSIsImFzaWduYXJJbWFnZW5BR2FsZXJpYSIsInVybCIsIm9iaklkIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJjb3BpYSIsInN0cnVjdHVyZWRDbG9uZSIsImciLCJjZWxscyIsIm1lZGlhVXJsIiwiZml0IiwiYmciLCJfcmVzaXplRGF0YSIsIm1vc3RyYXJQYW5lbFoiLCJtb3ZlckVsZW1lbnRvIiwiYWNjaW9uIiwibnVldm9zIiwiZWxlbWVudG8iLCJzcGxpY2UiLCJwdXNoIiwidW5zaGlmdCIsIm9uRGVzaGFjZXIiLCJvblJlaGFjZXIiLCJvbkR1cGxpY2FyIiwib25FbGltaW5hciIsIm9uQ29waWFyIiwib25QZWdhciIsIm9uQ2FtYmlhckFsaW5lYWNpb24iLCJjb250ZW50Iiwic2V0U2Nyb2xsTW9kZSIsInRvdWNoQWN0aW9uIiwic2V0RWRpdE1vZGUiLCJvbkRyYWdTdGFydCIsIm9uRHJhZ0VuZCIsInN0b3BEcmFnZ2luZyIsIldlYmtpdFVzZXJTZWxlY3QiLCJXZWJraXRUb3VjaENhbGxvdXQiLCJvbiIsIm9mZiIsInNldERyYWdEaXN0YW5jZUZvcklucHV0IiwicG9pbnRlclR5cGUiLCJpc1RvdWNoTGlrZSIsIm9uUG9pbnRlckRvd24iLCJvblRvdWNoU3RhcnQiLCJvbk1vdXNlRG93biIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9sYXN0U2VjY2lvbkFjdGl2YUlkIiwiRXZlbnQiLCJoYW5kbGVDbGlja0Z1ZXJhIiwiZSIsInRhcmdldCIsImNsb3Nlc3QiLCJwcmVsb2FkUG9wdWxhckZvbnRzIiwiaGFuZGxlRm9udHNMb2FkZWQiLCJiYXRjaERyYXciLCJhbGl2ZSIsInByZWNhcmdhciIsInBlbmRpZW50ZXMiLCJmb250TmFtZSIsIm1heWJlUHJvbWlzZSIsImxvYWRGb250cyIsInRoZW4iLCJsb2FkIiwiUHJvbWlzZSIsImFsbCIsImYiLCJ3YXJuIiwiYWN0dWFsaXphck9iamV0byIsIm51ZXZvIiwiZnJvbVRyYW5zZm9ybSIsImNsZWFuTnVldm8iLCJwb2ludHMiLCJhY3R1YWxpemFyT2JqZXRvUG9ySWQiLCJjYW1iaW9zIiwibm9ybWFsaXphck1lZGlkYXNHYWxlcmlhIiwiZ2FsZXJpYSIsIndpZHRoQ2FuZGlkYXRlIiwieENhbmRpZGF0ZSIsImNhbnZhc1dpZHRoIiwicm93cyIsIm1heCIsImNvbHMiLCJnYXAiLCJjZWxsUmF0aW8iLCJyYXRpbyIsIm1pbkdyaWRXaWR0aCIsIndpZHRoUGN0IiwibWluIiwibWF4WCIsImZhbGxiYWNrWCIsInJhd1giLCJjZWxsVyIsImNlbGxIIiwiYWN0dWFsaXphckxpbmVhIiwibGluZUlkIiwibnVldmFEYXRhIiwiaXNQcmV2aWV3IiwiY2xlYW5EYXRhIiwicCIsInBhcnNlRmxvYXQiLCJzdHJva2VXaWR0aCIsInBhcnNlSW50IiwiaXNGaW5hbCIsIm9idGVuZXJNZXRyaWNhc1RleHRvIiwiZm9udFdlaWdodCIsImZvbnRTdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZmFsbGJhY2tTaXplIiwic2FmZUZvbnRTaXplIiwic2FmZUxpbmVIZWlnaHQiLCJzYWZlRmFtaWx5IiwiZm9udEZvckNhbnZhcyIsInRlc3QiLCJmb250IiwicmF3VGV4dCIsInNhZmVUZXh0IiwibGluZXMiLCJtYXhMaW5lV2lkdGgiLCJsaW5lIiwibWVhc3VyZVRleHQiLCJtZWRpckFuY2hvVGV4dG9Lb252YSIsIm9ialRleHRvIiwidGV4dG9PYmpldGl2byIsInNhZmVGb250RmFtaWx5IiwiaXNGb250QXZhaWxhYmxlIiwiYmFzZUxpbmVIZWlnaHQiLCJwcm9iZSIsInRleHQiLCJwYWRkaW5nIiwid3JhcCIsImRlc3Ryb3kiLCJjYWxjdWxhclhUZXh0b0NlbnRyYWRvIiwicHJldmlvdXNNZXRyaWNzIiwibmV4dE1ldHJpY3MiLCJwcmV2aW91c1dpZHRoRnJvbUtvbnZhIiwibmV4dFdpZHRoRnJvbUtvbnZhIiwicHJldmlvdXNXaWR0aCIsIm5leHRXaWR0aCIsImN1cnJlbnRYIiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiYWN0dWFsaXphckZvbmRvU2VjY2lvbiIsIm51ZXZvRm9uZG8iLCJmb25kbyIsIm9uRGVzZWxlY2Npb25hciIsImlzRWRpdGluZyIsInRpZW5lU2VsZWNjaW9uIiwiY2FtYmlhckNvbG9yRm9uZG9TZWNjaW9uIiwibnVldm9Db2xvciIsImhpc3RvcmlhbExlbmd0aCIsImZ1dHVyb3NMZW5ndGgiLCJlc1NlY2Npb25QYW50YWxsYUJ5SWQiLCJhbHRvTW9kbyIsImFsdG9DYW52YXNEaW5hbWljbyIsImFicmlyTW9kYWxCb3JyYXJTZWNjaW9uIiwiY2VycmFyTW9kYWxCb3JyYXJTZWNjaW9uIiwiY29uZmlybWFyQm9ycmFyU2VjY2lvbiIsIm9uU2VsZWN0U2VjY2lvbiIsIl9zZWNjaW9uQWN0aXZhSWQiLCJndWlhTGluZWFzIiwibW9zdHJhckd1aWFzIiwibGltcGlhckd1aWFzIiwiY29uZmlndXJhckRyYWdFbmQiLCJhbmNob0NhbnZhcyIsIm1hcmdlblNlbnNpYmlsaWRhZCIsIm1hZ25ldFJhZGl1cyIsInNlY3Rpb25NYWduZXRSYWRpdXMiLCJzbmFwU3RyZW5ndGgiLCJzZWN0aW9uU25hcFN0cmVuZ3RoIiwic2VjdGlvbkxpbmVUb2xlcmFuY2UiLCJzbmFwVG9FZGdlcyIsInNuYXBUb0NlbnRlcnMiLCJhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzIiwib25EcmFnU3RhcnRHbG9iYWwiLCJvbkRyYWdFbmRHbG9iYWwiLCJfbGluZUludGVyc2VjdGlvbkNhY2hlIiwiX2dydXBvTGlkZXIiLCJyZWNlbnRseUVuZGVkR3JvdXBEcmFnIiwiX3NraXBVbnRpbCIsImhheUxpbmVhcyIsInNvbWUiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJnZXRMYXllciIsImNsZWFyVGltZW91dCIsImxpbmVPYmoiLCJhcmVhIiwicHVudG9zTGltcGlvcyIsIl9lbGVtZW50UmVmcyIsImxpbmVYIiwibGluZVkiLCJzdGFydFgiLCJzdGFydFkiLCJlbmRYIiwiZW5kWSIsInN0YXJ0RGVudHJvIiwiZW5kRGVudHJvIiwiaW50ZXJzZWN0YSIsImxpbmVJbnRlcnNlY3RzUmVjdCIsIngxIiwieTEiLCJ4MiIsInkyIiwicmVjdExlZnQiLCJyZWN0VG9wIiwicmVjdFJpZ2h0IiwicmVjdEJvdHRvbSIsImxpbmVJbnRlcnNlY3RzTGluZSIsIngzIiwieTMiLCJ4NCIsInk0IiwiZGVub20iLCJhYnMiLCJ0IiwidSIsIm9iamV0b0VuRWRpY2lvbiIsIm5vZGVDbGFzcyIsImJlZm9yZU1ldHJpY3MiLCJlZGl0aW5nVmFsdWUiLCJzaG91bGRLZWVwQ2VudGVyUHJldmlldyIsIl9fZ3JvdXBBbGlnbiIsIl9fYXV0b1dpZHRoIiwiZXhwZWN0ZWRYIiwib2JqWCIsIm9ialkiLCJmb3JjZVVwZGF0ZSIsImFmdGVyTWV0cmljcyIsImFmdGVyWCIsImRlbHRhWCIsInBlbmRpbmciLCJmaW5hbE9iaiIsImZpbmFsTm9kZSIsImZpbmFsTm9kZU1ldHJpY3MiLCJmaW5hbFgiLCJkZWx0YUZpbmFsVnNFeHBlY3RlZCIsIl9lbGVtZW50b3NTZWxlY2Npb25hZG9zIiwiX29iamV0b3NBY3R1YWxlcyIsIl9zZWNjaW9uZXNPcmRlbmFkYXMiLCJfYWx0b0NhbnZhcyIsImlkcyIsImFjdGl2ZVNlY3Rpb25JZCIsInNldEhvdmVySWRHbG9iYWwiLCJleGlzdHMiLCJjbGVhbnVwIiwic3RhZ2VHZXN0dXJlcyIsImRpdiIsIm1hcmdpblRvcCIsIm92ZXJmbG93WCIsIldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJyZWYiLCJiYWNrZ3JvdW5kQ29sb3IiLCJkaXNwbGF5IiwianVzdGlmeUNvbnRlbnQiLCJ0cmFuc2Zvcm0iLCJ0cmFuc2Zvcm1PcmlnaW4iLCJwb3NpdGlvbiIsImVzUHJpbWVyYSIsImVzVWx0aW1hIiwiZXN0YUFuaW1hbmRvIiwicmlnaHQiLCJ6SW5kZXgiLCJidXR0b24iLCJvbkNsaWNrIiwiZGlyZWNjaW9uIiwiZGlzYWJsZWQiLCJ0aXRsZSIsIm1vZG9TZWNjaW9uIiwiZXNQYW50YWxsYSIsImZvbmRvVGlwbyIsInBlcmZlY3REcmF3RW5hYmxlZCIsImxpc3RlbmluZyIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsInByZXZlbnREZWZhdWx0IiwiaGl0R3JhcGhFbmFibGVkIiwiYmFja2dyb3VuZCIsIm92ZXJmbG93IiwiYm94U2hhZG93Iiwib25Ub3VjaE1vdmUiLCJvblRvdWNoRW5kIiwib25Nb3VzZU1vdmUiLCJvbk1vdXNlVXAiLCJmbGF0TWFwIiwiYWx0dXJhUHgiLCJlc0FjdGl2YSIsImVsZW1lbnRvcyIsIm9uU2VsZWN0Iiwib25VcGRhdGVGb25kb09mZnNldCIsIm1vYmlsZUJhY2tncm91bmRFZGl0RW5hYmxlZCIsImZpbGwiLCJzdHJva2UiLCJvblRhcCIsImNvbnRyb2xZIiwicGVybWl0ZVJlc2l6ZUFsdHVyYSIsIm5hbWUiLCJkYXNoIiwib3BhY2l0eSIsIm9uTW91c2VFbnRlciIsIm9uTW91c2VMZWF2ZSIsImRyYWdnYWJsZSIsImNvcm5lclJhZGl1cyIsInNoYWRvd0NvbG9yIiwic2hhZG93Qmx1ciIsInNoYWRvd09mZnNldCIsInJhZGl1cyIsInJvdW5kIiwiaXNJbkVkaXRNb2RlIiwib25Ib3ZlciIsImlzU2VsZWN0ZWQiLCJvblBpY2tDZWxsIiwiaW5mbyIsImV2dCIsImNhbmNlbEJ1YmJsZSIsIm9uRHJhZ01vdmVQZXJzb25hbGl6YWRvIiwicG9zIiwiX2lzRHJhZ2dpbmciLCJvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8iLCJkcmFnSWQiLCJvbkRyYWdFbmRQZXJzb25hbGl6YWRvIiwib25DaGFuZ2UiLCJ1cGRhdGVkIiwib2JqT3JpZ2luYWwiLCJmaW5hbGl6b0RyYWciLCJudWV2YVNlY2Npb24iLCJjb29yZGVuYWRhc0FqdXN0YWRhcyIsIm9ialByZXZpZXciLCJ0ZXh0b1ByZXZpZXciLCJwcmV2aWV3T2JqIiwicHJldmlld1giLCJpZHhTZWMiLCJ5TG9jYWwiLCJ5Tm9ybSIsInByZVNlbGVjY2lvbmFkbyIsIm9uU3RhcnRUZXh0RWRpdCIsIm9iamVjdFgiLCJvYmplY3RZIiwiaW5saW5lVmlzaWJpbGl0eU1vZGUiLCJmaW5pc2hJbmxpbmVFZGl0Iiwic2hpZnRLZXkiLCJzZWxlY2Npb25BY3R1YWwiLCJlc1NoaWZ0IiwibnVldmEiLCJpc0RyYWdQcmV2aWV3Iiwic2tpcEhpc3RvcmlhbCIsImlzQmF0Y2hVcGRhdGVGaW5hbCIsImRyYWdJbmljaWFsIiwiZGVsdGFZIiwib2JqZXRvIiwicG9zSW5pY2lhbCIsImNvb3JkZW5hZGFzRmluYWxlcyIsInNlY2Npb25GaW5hbElkIiwieVJlbFB4IiwiaGF5RGlmZXJlbmNpYXMiLCJ2YWxvckFudGVyaW9yIiwidmFsb3JOdWV2byIsImlzR3JvdXBDYW5kaWRhdGUiLCJob3ZlckNvdW50QmVmb3JlIiwiaG92ZXJDb3VudEFmdGVyU3luYyIsInNlbGVjY2lvblNpemUiLCJob3ZlcklkQmVmb3JlIiwicHJlU2VsZWNjaW9uYWRvc0JlZm9yZSIsIndpbmRvd0lzRHJhZ2dpbmciLCJpc0RyYWdnaW5nU3RhdGUiLCJncnVwb0xpZGVyIiwiaG92ZXJDb3VudFJhZiIsImVsZW1lbnRJZCIsInNlbGVjdGVkRWxlbWVudHMiLCJvblRyYW5zZm9ybSIsIm5ld0F0dHJzIiwib2JqSW5kZXgiLCJvcmlnaW5hbFkiLCJlbGVtZW50SW5kZXgiLCJ1cGRhdGVkRWxlbWVudCIsInJvdGF0aW9uIiwic2NhbGVYIiwic2NhbGVZIiwiZ2FsbGVyeU1ldHJpY3MiLCJpc1Jlc2l6aW5nIiwiY2xlYW5BdHRycyIsImZpbmFsQXR0cnMiLCJpZHgiLCJzYWZlIiwieUFic29sdXRhIiwieVJlbGF0aXZhIiwiaG92ZXJlZEVsZW1lbnQiLCJlbGVtZW50b1NlbGVjY2lvbmFkbyIsImxpbmVFbGVtZW50Iiwib25VcGRhdGVMaW5lIiwiaXNEcmFnR3J1cGFsQWN0aXZlIiwibGluZWEiLCJlc0xpbmVhU2VjY2lvbiIsInByaW9yaXR5Iiwic2hhZG93RW5hYmxlZCIsInR5cGUiLCJ0ZXh0QWxpZ24iLCJhbGlnbiIsIm9uT3ZlcmxheU1vdW50Q2hhbmdlIiwibmV4dFZhbHVlIiwibmV4dFRleHQiLCJvbkRlYnVnRXZlbnQiLCJvbkZpbmlzaCIsImZpbmlzaElkIiwidGV4dG9OdWV2b1JhdyIsInRleHRvTnVldm9WYWxpZGFkbyIsImxpdmVOb2RlQXRGaW5pc2giLCJsaXZlTWV0cmljc0F0RmluaXNoIiwicmF3TGVuZ3RoIiwidHJpbW1lZExlbmd0aCIsInByZXZpZXdSZWYiLCJhY3R1YWxpemFkbyIsInBhdGNoIiwic2hvdWxkS2VlcENlbnRlclgiLCJuZXh0WCIsInBhdGNoWCIsIm9iamVjdFhCZWZvcmVDb21taXQiLCJsaXZlTm9kZVhBdEZpbmlzaCIsInByZXZpZXdDZW50ZXJYIiwidGV4dExlbmd0aCIsImxvZ0ZpbmlzaFZpc2liaWxpdHlDaGVjayIsInBoYXNlIiwib3ZlcmxheURvbVByZXNlbnQiLCJsaXZlTm9kZSIsInJlYWN0aXZlRWRpdGluZ0lkIiwiZ2xvYmFsRWRpdGluZ0lkIiwibm9kZU9wYWNpdHkiLCJub2RlVmlzaWJsZSIsInZpc2libGUiLCJzdGFnZUFmdGVyRmluaXNoRWRpdCIsInNjYWxlVmlzdWFsIiwid2lkdGhNb2RlIiwibm9kZVJlZiIsImNvbnRlbmVkb3IiLCJib3giLCJhYnNQb3MiLCJnZXRBYnNvbHV0ZVBvc2l0aW9uIiwic3RhZ2VDb250YWluZXIiLCJlbGVtZW50b0VuUGFudGFsbGFYIiwiZWxlbWVudG9FblBhbnRhbGxhWSIsImFuY2hvRWxlbWVudG8iLCJib3RvblgiLCJib3RvblkiLCJhbGlnbkl0ZW1zIiwicG9pbnRlckV2ZW50cyIsInRyYW5zaXRpb24iLCJiYWNrZHJvcEZpbHRlciIsImJvcmRlciIsInN0b3BQcm9wYWdhdGlvbiIsIm9uQ2VycmFyIiwic2VjdGlvbk5hbWUiLCJpdGVtQ291bnQiLCJpc0RlbGV0aW5nIiwib25DYW5jZWwiLCJvbkNvbmZpcm0iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/CanvasEditor.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/ElementoCanvas.jsx":
/*!*******************************************!*\
  !*** ./src/components/ElementoCanvas.jsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ElementoCanvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! use-image */ \"use-image\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/models/lineConstants */ \"(pages-dir-node)/./src/models/lineConstants.js\");\n/* harmony import */ var _utils_fontManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/fontManager */ \"(pages-dir-node)/./src/utils/fontManager.js\");\n/* harmony import */ var _drag_dragGrupal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/drag/dragGrupal */ \"(pages-dir-node)/./src/drag/dragGrupal.js\");\n/* harmony import */ var _drag_dragIndividual__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/drag/dragIndividual */ \"(pages-dir-node)/./src/drag/dragIndividual.js\");\n/* harmony import */ var _utils_getTextMetrics__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/utils/getTextMetrics */ \"(pages-dir-node)/./src/utils/getTextMetrics.js\");\n// ElementoCanvas.jsx - REEMPLAZAR TODO EL ARCHIVO\n\n\n\n\n\n\n\n\n\nfunction ElementoCanvas({ obj, isSelected, isInEditMode, onSelect, onChange, editingId, registerRef, onHover, preSeleccionado, onDragMovePersonalizado, onDragStartPersonalizado, onDragEndPersonalizado, dragStartPos, hasDragged, onStartTextEdit, editingMode = false, inlineOverlayMountedId = null, inlineVisibilityMode = \"reactive\" }) {\n    const [img] = use_image__WEBPACK_IMPORTED_MODULE_2___default()(obj.src || null, \"anonymous\");\n    const [measuredTextWidth, setMeasuredTextWidth] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const textNodeRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    const baseTextLayoutRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null); // guarda el centro/baseline inicial\n    // 🔥 PREVENIR onChange RECURSIVO PARA AUTOFIX\n    const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleChange]\": (id, newData)=>{\n            if (newData.fromAutoFix || !onChange) return;\n            onChange(id, newData);\n        }\n    }[\"ElementoCanvas.useCallback[handleChange]\"], [\n        onChange\n    ]);\n    const handleRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleRef]\": (node)=>{\n            if (registerRef) {\n                registerRef(obj.id, node || null);\n            // ❌ NO despachar \"element-ref-registrado\" acá\n            // CanvasEditor.registerRef ya lo hace.\n            }\n        }\n    }[\"ElementoCanvas.useCallback[handleRef]\"], [\n        obj.id,\n        registerRef\n    ]);\n    // ✅ Click con estado fresco (evita stale closures del useMemo)\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleClick]\": (e)=>{\n            e.cancelBubble = true;\n            if (!hasDragged.current) {\n                // 🧠 Texto normal\n                if (obj.tipo === \"texto\") {\n                    if (isSelected) {\n                        onStartTextEdit?.(obj.id, obj.texto);\n                    } else {\n                        onSelect(obj.id, obj, e);\n                    }\n                } else if (obj.tipo === \"forma\" && obj.figura === \"rect\") {\n                    if (isSelected) {\n                        onStartTextEdit?.(obj.id, obj.texto || \"\");\n                    } else {\n                        onSelect(obj.id, obj, e);\n                    }\n                } else {\n                    onSelect(obj.id, obj, e);\n                }\n            }\n        }\n    }[\"ElementoCanvas.useCallback[handleClick]\"], [\n        obj,\n        isSelected,\n        onSelect,\n        onStartTextEdit\n    ]);\n    // 🔥 MEMOIZAR PROPIEDADES COMUNES\n    const commonProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)({\n        \"ElementoCanvas.useMemo[commonProps]\": ()=>({\n                x: obj.x ?? 0,\n                y: obj.y ?? 0,\n                rotation: obj.rotation || 0,\n                scaleX: obj.scaleX || 1,\n                scaleY: obj.scaleY || 1,\n                draggable: !editingMode,\n                listening: !isInEditMode,\n                onMouseDown: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        e.cancelBubble = true;\n                        hasDragged.current = false;\n                        e.currentTarget?.draggable(true);\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onMouseUp: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        if (e.currentTarget?.draggable && !hasDragged.current) {\n                            e.currentTarget.draggable(false);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onClick: handleClick,\n                onTap: handleClick,\n                onDragStart: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        onDragStartPersonalizado?.(obj.id, e);\n                        window._dragCount = 0;\n                        window._lastMouse = null;\n                        window._lastElement = null;\n                        hasDragged.current = true;\n                        window._isDragging = true;\n                        // 🔥 Intentar drag grupal\n                        const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_6__.startDragGrupalLider)(e, obj);\n                        if (!fueGrupal) {\n                            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_7__.startDragIndividual)(e, dragStartPos);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onDragMove: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        hasDragged.current = true;\n                        const stage = e.target.getStage();\n                        const mousePos = stage.getPointerPosition();\n                        const elementPos = {\n                            x: e.target.x(),\n                            y: e.target.y()\n                        };\n                        window._lastMouse = mousePos;\n                        window._lastElement = elementPos;\n                        // 🔥 DRAG GRUPAL - SOLO EL LÍDER PROCESA\n                        if (window._grupoLider && obj.id === window._grupoLider) {\n                            (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_6__.previewDragGrupal)(e, obj, onChange);\n                            // 🔥 NO llamar onDragMovePersonalizado durante drag grupal (evita guías)\n                            // El preview individual ya no es necesario porque manejamos todo aquí\n                            return;\n                        }\n                        // 🔥 SI ES SEGUIDOR DEL GRUPO, NO PROCESAR\n                        if (window._grupoLider) {\n                            const elementosSeleccionados = window._elementosSeleccionados || [];\n                            if (elementosSeleccionados.includes(obj.id) && obj.id !== window._grupoLider) {\n                                return;\n                            }\n                        }\n                        // 🔄 DRAG INDIVIDUAL - Solo si no hay drag grupal activo\n                        if (!window._grupoLider) {\n                            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_7__.previewDragIndividual)(e, obj, onDragMovePersonalizado);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onDragEnd: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        window._isDragging = false;\n                        const node = e.currentTarget;\n                        // 🔥 Intentar drag grupal\n                        const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_6__.endDragGrupal)(e, obj, onChange, hasDragged);\n                        if (fueGrupal) return;\n                        // 🔄 DRAG INDIVIDUAL (no cambió)\n                        (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_7__.endDragIndividual)(obj, node, onChange, onDragEndPersonalizado, hasDragged);\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"]\n            })\n    }[\"ElementoCanvas.useMemo[commonProps]\"], [\n        obj,\n        editingMode,\n        isInEditMode,\n        handleClick,\n        onDragMovePersonalizado,\n        onDragStartPersonalizado,\n        onDragEndPersonalizado,\n        dragStartPos,\n        hasDragged,\n        onChange\n    ]);\n    // 🔥 MEMOIZAR HANDLERS HOVER\n    const handleMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleMouseEnter]\": ()=>{\n            if (!onHover || window._isDragging || isInEditMode) return;\n            onHover(obj.id);\n        }\n    }[\"ElementoCanvas.useCallback[handleMouseEnter]\"], [\n        onHover,\n        obj.id,\n        isInEditMode\n    ]);\n    const handleMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleMouseLeave]\": ()=>{\n            if (!onHover || isInEditMode) return;\n            onHover(null);\n        }\n    }[\"ElementoCanvas.useCallback[handleMouseLeave]\"], [\n        onHover,\n        isInEditMode\n    ]);\n    const recalcGroupAlign = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[recalcGroupAlign]\": ()=>{\n            if (obj.tipo !== \"texto\") return;\n            if (!obj.__groupAlign || !obj.__groupId) return;\n            if (true) return;\n            const refs = window._elementRefs || {};\n            const getObj = window.__getObjById || ({\n                \"ElementoCanvas.useCallback[recalcGroupAlign]\": ()=>null\n            })[\"ElementoCanvas.useCallback[recalcGroupAlign]\"];\n            let maxW = 0;\n            let thisW = 0;\n            for (const [id, node] of Object.entries(refs)){\n                const o = getObj(id);\n                if (!o || o.tipo !== \"texto\" || o.__groupId !== obj.__groupId) continue;\n                const w = node?.getTextWidth ? Math.ceil(node.getTextWidth()) : 0;\n                if (id === obj.id) thisW = w;\n                if (w > maxW) maxW = w;\n            }\n            if (!maxW || !thisW) return;\n            const baseX = Number.isFinite(obj.__groupOriginX) ? obj.__groupOriginX : obj.x || 0;\n            let targetX = baseX;\n            if (obj.__groupAlign === \"center\") {\n                targetX = baseX + (maxW - thisW) / 2;\n            } else if (obj.__groupAlign === \"right\") {\n                targetX = baseX + (maxW - thisW);\n            }\n            if (Math.abs((obj.x || 0) - targetX) > 0.5) {\n                onChange(obj.id, {\n                    x: targetX\n                });\n            }\n        }\n    }[\"ElementoCanvas.useCallback[recalcGroupAlign]\"], [\n        obj.id,\n        obj.x,\n        obj.tipo,\n        obj.__groupAlign,\n        obj.__groupId,\n        obj.__groupOriginX,\n        onChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            // Recalcular cuando este texto cambia y tras montar sus vecinos\n            let r1, r2;\n            r1 = requestAnimationFrame({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    r2 = requestAnimationFrame({\n                        \"ElementoCanvas.useEffect\": ()=>{\n                            recalcGroupAlign();\n                        }\n                    }[\"ElementoCanvas.useEffect\"]);\n                }\n            }[\"ElementoCanvas.useEffect\"]);\n            return ({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    if (r1) cancelAnimationFrame(r1);\n                    if (r2) cancelAnimationFrame(r2);\n                }\n            })[\"ElementoCanvas.useEffect\"];\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        recalcGroupAlign,\n        obj.texto,\n        obj.fontFamily,\n        obj.fontSize,\n        obj.fontStyle,\n        obj.fontWeight\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            if (!obj || obj.tipo !== \"texto\") return;\n            if (obj.__groupAlign) return;\n            const isAutoWidth = !obj.width && obj.__autoWidth !== false;\n            if (!isAutoWidth) return;\n            let raf1 = null;\n            let raf2 = null;\n            raf1 = requestAnimationFrame({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    raf2 = requestAnimationFrame({\n                        \"ElementoCanvas.useEffect\": ()=>{\n                            const node = textNodeRef.current;\n                            if (!node || typeof node.getTextWidth !== \"function\") return;\n                            const wReal = Math.ceil(node.getTextWidth() || 0);\n                            if (wReal > 0) setMeasuredTextWidth(wReal);\n                        }\n                    }[\"ElementoCanvas.useEffect\"]);\n                }\n            }[\"ElementoCanvas.useEffect\"]);\n            return ({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    if (raf1) cancelAnimationFrame(raf1);\n                    if (raf2) cancelAnimationFrame(raf2);\n                }\n            })[\"ElementoCanvas.useEffect\"];\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj?.id,\n        obj?.texto,\n        obj?.fontFamily,\n        obj?.fontSize,\n        obj?.fontStyle,\n        obj?.fontWeight,\n        obj?.lineHeight,\n        obj?.width,\n        obj?.__autoWidth,\n        obj?.__groupAlign\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            setMeasuredTextWidth(null);\n            // también conviene resetear el layout base cuando cambia de texto\n            if (obj?.tipo === \"texto\") baseTextLayoutRef.current = null;\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj?.id\n    ]);\n    const groupRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            // Cachear cuando cambie el color\n            if (groupRef.current && obj.tipo === \"icono\" && obj.color && obj.color !== \"#000000\") {\n                groupRef.current.cache();\n                groupRef.current.getLayer()?.batchDraw();\n            }\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj.color,\n        obj.id\n    ]);\n    // Convierte \"minX minY width height\" -> números\n    function parseViewBox(vb) {\n        if (!vb || typeof vb !== \"string\") return null;\n        const parts = vb.trim().split(/\\s+/).map(Number);\n        if (parts.length !== 4 || parts.some((n)=>Number.isNaN(n))) return null;\n        const [minX, minY, vbWidth, vbHeight] = parts;\n        return {\n            minX,\n            minY,\n            vbWidth,\n            vbHeight\n        };\n    }\n    if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n        let linePoints = obj.points;\n        let pointsFixed = false;\n        if (!linePoints || !Array.isArray(linePoints) || linePoints.length < 4) {\n            linePoints = [\n                0,\n                0,\n                _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.DEFAULT_LENGTH,\n                0\n            ]; // Usar constante\n            pointsFixed = true;\n        } else {\n            const puntosValidados = [];\n            for(let i = 0; i < 4; i++){\n                const punto = parseFloat(linePoints[i]);\n                puntosValidados.push(isNaN(punto) ? 0 : punto);\n            }\n            if (JSON.stringify(puntosValidados) !== JSON.stringify(linePoints.slice(0, 4))) {\n                linePoints = puntosValidados;\n                pointsFixed = true;\n            } else {\n                linePoints = linePoints.slice(0, 4);\n            }\n        }\n        if (pointsFixed && handleChange) {\n            setTimeout(()=>{\n                handleChange(obj.id, {\n                    points: linePoints,\n                    fromAutoFix: true\n                });\n            }, 0);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Line, {\n            ...commonProps,\n            ref: handleRef,\n            points: linePoints,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            stroke: obj.color || _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.DEFAULT_COLOR,\n            strokeWidth: obj.strokeWidth || _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.STROKE_WIDTH,\n            tension: 0,\n            lineCap: \"round\",\n            lineJoin: \"round\",\n            perfectDrawEnabled: false,\n            hitStrokeWidth: Math.max(_models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.HIT_STROKE_WIDTH, obj.strokeWidth || 2),\n            shadowForStrokeEnabled: false,\n            opacity: isSelected ? 1 : 0.95,\n            shadowColor: isSelected ? \"rgba(119, 61, 190, 0.3)\" : \"transparent\",\n            shadowBlur: isSelected ? 8 : 0,\n            shadowOffset: {\n                x: 0,\n                y: 2\n            }\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 373,\n            columnNumber: 7\n        }, this);\n    }\n    if (obj.tipo === \"texto\") {\n        const visibilityMode = inlineVisibilityMode === \"window\" ? \"window\" : \"reactive\";\n        const isEditingByWindow = window._currentEditingId === obj.id;\n        const isEditingByReactive = editingId === obj.id;\n        const overlayDomPresentLoose = (()=>{\n            if (typeof document === \"undefined\") return false;\n            const safeId = String(obj.id).replace(/\"/g, '\\\\\"');\n            return Boolean(document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`));\n        })();\n        const overlayDomPresent = inlineOverlayMountedId === obj.id && overlayDomPresentLoose;\n        const isEditingByOverlay = overlayDomPresent;\n        const isEditing = visibilityMode === \"reactive\" ? isEditingByReactive || isEditingByOverlay : isEditingByWindow || isEditingByReactive || isEditingByOverlay;\n        const fontFamily = _utils_fontManager__WEBPACK_IMPORTED_MODULE_5__.fontManager.isFontAvailable(obj.fontFamily) ? obj.fontFamily : \"sans-serif\";\n        const align = (obj.align || \"left\").toLowerCase();\n        const fillColor = obj.colorTexto ?? obj.fill ?? obj.color ?? \"#000\";\n        const baseLineHeight = typeof obj.lineHeight === \"number\" && obj.lineHeight > 0 ? obj.lineHeight : 1.2;\n        const lineHeight = baseLineHeight * 0.92;\n        // ✅ Evita bbox sobrado a la derecha por espacios/tabs invisibles al final de línea\n        const rawText = String(obj.texto ?? \"\");\n        const safeText = rawText.replace(/[ \\t]+$/gm, \"\");\n        // ✅ VALIDACIÓN: Asegurar valores numéricos válidos\n        const validX = typeof obj.x === \"number\" && !isNaN(obj.x) ? obj.x : 0;\n        const validY = typeof obj.y === \"number\" && !isNaN(obj.y) ? obj.y : 0;\n        const validFontSize = typeof obj.fontSize === \"number\" && !isNaN(obj.fontSize) && obj.fontSize > 0 ? obj.fontSize : 24;\n        // 🔹 PASO 1: Calcular dimensiones del texto PRIMERO\n        const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n        const style = obj.fontStyle || \"normal\";\n        const weight = obj.fontWeight || \"normal\";\n        // ✅ si la fuente tiene espacios, envolverla en comillas para que canvas no caiga a fallback\n        const fontForCanvas = fontFamily.includes(\",\") ? fontFamily : /\\s/.test(fontFamily) ? `\"${fontFamily}\"` : fontFamily;\n        // ✅ orden correcto: style -> weight -> size -> family\n        ctx.font = `${style} ${weight} ${validFontSize}px ${fontForCanvas}`;\n        const lines = safeText.split(/\\r?\\n/);\n        const maxLineWidth = Math.max(...lines.map((line)=>ctx.measureText(line).width), 20);\n        const numLines = lines.length;\n        const textWidth = Math.ceil(maxLineWidth);\n        const textHeight = validFontSize * lineHeight * numLines;\n        // 🔹 PASO 2: Calcular posición solo una vez y congelar el centro\n        let positionRaw = (0,_utils_getTextMetrics__WEBPACK_IMPORTED_MODULE_8__.getCenteredTextPosition)({\n            rectY: validY,\n            rectHeight: textHeight,\n            fontSize: validFontSize,\n            fontFamily,\n            fontWeight: obj.fontWeight || \"normal\",\n            fontStyle: obj.fontStyle || \"normal\"\n        });\n        // Inicializar layout base solo la PRIMERA vez\n        if (!baseTextLayoutRef.current) {\n            baseTextLayoutRef.current = {\n                // centro vertical \"ideal\" que queremos conservar\n                rectCenter: positionRaw.rectCenter,\n                // offset desde el centro al baseline (depende solo de la fuente/tamaño)\n                baselineToCenter: positionRaw.baseline - positionRaw.rectCenter,\n                ascent: positionRaw.ascent,\n                descent: positionRaw.descent\n            };\n        }\n        const base = baseTextLayoutRef.current;\n        const rectCenterFixed = base.rectCenter;\n        const baselineY = rectCenterFixed + base.baselineToCenter;\n        const textTopFixed = baselineY - base.ascent;\n        const position = {\n            baseline: baselineY,\n            textTop: textTopFixed,\n            ascent: base.ascent,\n            descent: base.descent,\n            rectCenter: rectCenterFixed\n        };\n        // 🔍 Debug: información completa de posición y centrado\n        // ⚠️ Warning si hay valores inválidos\n        if (obj.x !== validX || obj.y !== validY || obj.fontSize !== validFontSize) {\n            console.warn(\"⚠️ Objeto de texto tiene valores inválidos:\", {\n                id: obj.id,\n                x: obj.x,\n                y: obj.y,\n                fontSize: obj.fontSize\n            });\n        }\n        const ANCHO_CANVAS = 800;\n        const availableWidth = Math.max(1, ANCHO_CANVAS - validX);\n        // ancho real del texto (máxima línea, según tu cálculo actual)\n        const realTextWidth = Math.max(1, textWidth);\n        // ✅ Si entra, NO usamos width (bounds ajustado)\n        // ✅ Si no entra, usamos width=available y wrap por caracteres para cortar en el borde\n        const shouldWrapToCanvasEdge = realTextWidth > availableWidth;\n        const wrapToUse = shouldWrapToCanvasEdge ? \"char\" : \"none\";\n        const widthToUse = shouldWrapToCanvasEdge ? availableWidth : undefined;\n        const inlineCaretOnlyMode = true;\n        const appliedOpacity = isEditing && !inlineCaretOnlyMode ? 0 : 1;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                ...commonProps,\n                ref: (node)=>{\n                    textNodeRef.current = node;\n                    handleRef(node); // registra + dispara \"element-ref-registrado\"\n                },\n                onMouseEnter: handleMouseEnter,\n                onMouseLeave: handleMouseLeave,\n                text: safeText,\n                x: validX,\n                y: obj.y,\n                wrap: wrapToUse,\n                width: widthToUse,\n                align: align,\n                fontSize: validFontSize,\n                fontFamily: fontFamily,\n                fontWeight: obj.fontWeight || \"normal\",\n                fontStyle: obj.fontStyle || \"normal\",\n                lineHeight: lineHeight,\n                fill: fillColor,\n                opacity: appliedOpacity,\n                verticalAlign: \"top\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                lineNumber: 518,\n                columnNumber: 9\n            }, this)\n        }, void 0, false);\n    }\n    if (obj.tipo === \"rsvp-boton\") {\n        const fontFamily = _utils_fontManager__WEBPACK_IMPORTED_MODULE_5__.fontManager.isFontAvailable(obj.fontFamily) ? obj.fontFamily : \"sans-serif\";\n        const width = obj.ancho || 200;\n        const height = obj.alto || 50;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    ...commonProps,\n                    width: width,\n                    height: height,\n                    cornerRadius: 8,\n                    fill: obj.color || \"#773dbe\",\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 2 : 0,\n                    onClick: (e)=>{\n                        e.cancelBubble = true;\n                        onSelect?.(obj.id, obj, e);\n                    },\n                    onDragMove: (e)=>{\n                        const nuevaPos = e.target.position();\n                        const textoNode = window._elementRefs?.[`${obj.id}-text`];\n                        if (textoNode) {\n                            textoNode.x(nuevaPos.x);\n                            textoNode.y(nuevaPos.y);\n                            textoNode.getLayer()?.batchDraw();\n                        }\n                    }\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 558,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                    ref: (node)=>{\n                        if (registerRef) {\n                            registerRef(`${obj.id}-text`, node || null); // si querés manipular el texto aparte\n                        }\n                    },\n                    x: obj.x,\n                    y: obj.y,\n                    width: width,\n                    height: height,\n                    text: obj.texto || \"Confirmar asistencia\",\n                    fontSize: obj.fontSize || 18,\n                    fontFamily: fontFamily,\n                    fontStyle: obj.fontStyle || \"normal\",\n                    fontWeight: obj.fontWeight || \"bold\",\n                    fill: obj.colorTexto || \"#ffffff\",\n                    align: obj.align || \"center\",\n                    verticalAlign: \"middle\",\n                    listening: false,\n                    opacity: isInEditMode ? 0 : 1\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 582,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    if (obj.tipo === \"imagen\" && img) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Image, {\n            ...commonProps,\n            ref: handleRef,\n            id: obj.id,\n            image: img,\n            crossOrigin: \"anonymous\",\n            width: obj.width || img.width,\n            height: obj.height || img.height,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n            strokeWidth: isSelected || preSeleccionado ? 1 : 0\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 612,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- ICONO SVG (tipo:\"icono\", formato:\"svg\") — CON HITBOX FUNCIONAL ---------------- */ if (obj.tipo === \"icono\" && obj.formato === \"svg\") {\n        const color = obj.color || \"#000000\";\n        const paths = Array.isArray(obj.paths) ? obj.paths : [];\n        const W = Number(obj.width) || 128;\n        const H = Number(obj.height) || 128;\n        const vb = parseViewBox(obj.viewBox) || {\n            minX: 0,\n            minY: 0,\n            vbWidth: 100,\n            vbHeight: 100\n        };\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n            ...commonProps,\n            ref: handleRef,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            width: W,\n            height: H,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    fill: \"rgba(0,0,0,0.001)\" // Casi transparente pero clickeable\n                    ,\n                    stroke: \"transparent\" // Sin borde\n                    ,\n                    listening: true,\n                    draggable: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 647,\n                    columnNumber: 9\n                }, this),\n                paths.map((p, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Path, {\n                        data: p.d,\n                        fill: color,\n                        scaleX: W / vb.vbWidth,\n                        scaleY: H / vb.vbHeight,\n                        x: -vb.minX * (W / vb.vbWidth),\n                        y: -vb.minY * (H / vb.vbHeight),\n                        listening: false,\n                        perfectDrawEnabled: false\n                    }, i, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                        lineNumber: 660,\n                        columnNumber: 11\n                    }, this)),\n                (isSelected || preSeleccionado) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    stroke: \"#773dbe\",\n                    strokeWidth: 1,\n                    fill: \"transparent\",\n                    listening: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 675,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 638,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- ICONO RASTER (PNG/JPG/WEBP) – sin recolor ---------------- */ if (obj.tipo === \"icono\" && (obj.formato === \"png\" || obj.formato === \"jpg\" || obj.formato === \"webp\")) {\n        const [img] = use_image__WEBPACK_IMPORTED_MODULE_2___default()(obj.url, \"anonymous\");\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Image, {\n            ...commonProps,\n            ref: handleRef,\n            image: img,\n            crossOrigin: \"anonymous\",\n            width: obj.width || (img?.width ?? 120),\n            height: obj.height || (img?.height ?? 120),\n            listening: true,\n            // UX cursor (sin romper tu hover)\n            onMouseEnter: (e)=>{\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"grab\";\n                handleMouseEnter?.(e);\n            },\n            onMouseLeave: (e)=>{\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"default\";\n                handleMouseLeave?.(e);\n            },\n            // ✅ CLAVE: NO pisar el onClick/onTap ni el onDragEnd \"real\" del sistema\n            // Si querés mantener un comportamiento extra en click, hacelo sin cambiar la firma:\n            onClick: (e)=>{\n                // delega al commonProps.onClick (selección consistente)\n                commonProps.onClick?.(e);\n            },\n            onTap: (e)=>{\n                // en Konva, tap suele mapear a click; si querés, delegalo igual\n                commonProps.onClick?.(e);\n            },\n            // ✅ CLAVE: delegar a commonProps.onDragEnd para que:\n            // - se limpien guías (onDragEndPersonalizado)\n            // - se haga finalizoDrag + ABS→REL\n            onDragEnd: (e)=>{\n                commonProps.onDragEnd?.(e);\n                // limpieza de cursor (extra)\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"default\";\n            }\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 696,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- LEGACY: ICONO SVG (tipo: \"icono-svg\" con obj.d) ---------------- */ if (obj.tipo === \"icono-svg\") {\n        const W = Number(obj.width) || 128;\n        const H = Number(obj.height) || 128;\n        const vb = parseViewBox(obj.viewBox) || {\n            minX: 0,\n            minY: 0,\n            vbWidth: 100,\n            vbHeight: 100\n        };\n        const scaleX = vb.vbWidth ? W / vb.vbWidth : 1;\n        const scaleY = vb.vbHeight ? H / vb.vbHeight : 1;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n            ...commonProps,\n            ref: handleRef,\n            draggable: true,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            onClick: (e)=>commonProps.onClick?.(e),\n            onTap: (e)=>commonProps.onTap?.(e),\n            onDragEnd: (e)=>{\n                commonProps.onDragEnd?.(e);\n            },\n            onTransformEnd: (e)=>{\n                const node = e.target;\n                const scaleXNode = typeof node.scaleX === \"function\" ? node.scaleX() : node.scaleX ?? 1;\n                const scaleYNode = typeof node.scaleY === \"function\" ? node.scaleY() : node.scaleY ?? 1;\n                const patch = {\n                    x: node.x(),\n                    y: node.y(),\n                    rotation: node.rotation() || 0,\n                    width: Math.max(1, W * Math.abs(scaleXNode || 1)),\n                    height: Math.max(1, H * Math.abs(scaleYNode || 1)),\n                    scaleX: 1,\n                    scaleY: 1,\n                    isFinal: true\n                };\n                onChange?.(obj.id, patch);\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    fill: \"rgba(0,0,0,0.001)\",\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0,\n                    listening: true\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 785,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n                    x: 0,\n                    y: 0,\n                    scaleX: scaleX,\n                    scaleY: scaleY,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n                        x: -vb.minX,\n                        y: -vb.minY,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Path, {\n                            data: obj.d,\n                            fill: obj.color || \"#000\",\n                            stroke: obj.color || \"#000\",\n                            strokeWidth: 1,\n                            perfectDrawEnabled: true,\n                            listening: false\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 797,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                        lineNumber: 796,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 795,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 755,\n            columnNumber: 7\n        }, this);\n    }\n    if (obj.tipo === \"forma\") {\n        const propsForma = {\n            ...commonProps,\n            fill: obj.color || \"#000000\"\n        };\n        switch(obj.figura){\n            case \"rect\":\n                // Opcional: normalizamos width/height para usar en ambos nodos\n                const width = Math.abs(obj.width || 100);\n                const height = Math.abs(obj.height || 100);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                            ...propsForma,\n                            ref: handleRef,\n                            onMouseEnter: handleMouseEnter,\n                            onMouseLeave: handleMouseLeave,\n                            width: width,\n                            height: height,\n                            cornerRadius: obj.cornerRadius || 0,\n                            stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                            strokeWidth: isSelected || preSeleccionado ? 1 : 0,\n                            // 🖱️ Doble click para entrar en edición inline\n                            onDblClick: (e)=>{\n                                e.cancelBubble = true;\n                                if (onStartTextEdit) {\n                                    onStartTextEdit(obj.id, obj.texto || \"\");\n                                }\n                            },\n                            onDblTap: (e)=>{\n                                e.cancelBubble = true;\n                                if (onStartTextEdit) {\n                                    onStartTextEdit(obj.id, obj.texto || \"\");\n                                }\n                            },\n                            // 🚚 Sincronizar el texto mientras se arrastra la forma\n                            onDragMove: (e)=>{\n                                // Mantener cualquier lógica de drag original que venga de commonProps\n                                if (typeof propsForma.onDragMove === \"function\") {\n                                    propsForma.onDragMove(e);\n                                }\n                                const { x, y } = e.target.position();\n                                const stage = e.target.getStage();\n                                const textoNode = stage?.findOne(`#${obj.id}-text`);\n                                if (textoNode) {\n                                    textoNode.x(x);\n                                    textoNode.y(y);\n                                    textoNode.getLayer()?.batchDraw();\n                                }\n                            },\n                            onDragEnd: (e)=>{\n                                // Mantener lógica original de dragEnd (guardar posición, drag grupal, etc.)\n                                if (typeof propsForma.onDragEnd === \"function\") {\n                                    propsForma.onDragEnd(e);\n                                }\n                                const { x, y } = e.target.position();\n                                const stage = e.target.getStage();\n                                const textoNode = stage?.findOne(`#${obj.id}-text`);\n                                if (textoNode) {\n                                    textoNode.x(x);\n                                    textoNode.y(y);\n                                    textoNode.getLayer()?.batchDraw();\n                                }\n                            }\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 830,\n                            columnNumber: 13\n                        }, this),\n                        obj.texto && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                            id: `${obj.id}-text`,\n                            ref: (node)=>{\n                                if (registerRef) {\n                                    registerRef(`${obj.id}-text`, node || null); // seguís usando tu sistema de refs\n                                }\n                            },\n                            x: obj.x,\n                            y: obj.y,\n                            width: width,\n                            height: height,\n                            text: obj.texto,\n                            fontSize: obj.fontSize || 24,\n                            fontFamily: obj.fontFamily || \"sans-serif\",\n                            fontWeight: obj.fontWeight || \"normal\",\n                            fontStyle: obj.fontStyle || \"normal\",\n                            fill: obj.colorTexto || \"#000000\",\n                            align: obj.align || \"center\",\n                            verticalAlign: \"middle\",\n                            listening: false,\n                            opacity: isInEditMode ? 0 : 1\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 890,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true);\n            case \"circle\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Circle, {\n                    ...propsForma,\n                    ref: handleRef,\n                    radius: obj.radius || 50,\n                    onMouseEnter: handleMouseEnter,\n                    onMouseLeave: handleMouseLeave,\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 919,\n                    columnNumber: 11\n                }, this);\n            case \"triangle\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.RegularPolygon, {\n                    ...propsForma,\n                    ref: handleRef,\n                    sides: 3,\n                    radius: obj.radius || 60,\n                    onMouseEnter: handleMouseEnter,\n                    onMouseLeave: handleMouseLeave,\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 932,\n                    columnNumber: 11\n                }, this);\n            default:\n                return null;\n        }\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0VsZW1lbnRvQ2FudmFzLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGtEQUFrRDs7QUFDdUQ7QUFDeEU7QUFDeUM7QUFDbEI7QUFDTDtBQUN3QztBQUNXO0FBQ3JDO0FBTWxELFNBQVN3QixlQUFlLEVBQ3JDQyxHQUFHLEVBQ0hDLFVBQVUsRUFDVkMsWUFBWSxFQUNaQyxRQUFRLEVBQ1JDLFFBQVEsRUFDUkMsU0FBUyxFQUNUQyxXQUFXLEVBQ1hDLE9BQU8sRUFDUEMsZUFBZSxFQUNmQyx1QkFBdUIsRUFDdkJDLHdCQUF3QixFQUN4QkMsc0JBQXNCLEVBQ3RCQyxZQUFZLEVBQ1pDLFVBQVUsRUFDVkMsZUFBZSxFQUNmQyxjQUFjLEtBQUssRUFDbkJDLHlCQUF5QixJQUFJLEVBQzdCQyx1QkFBdUIsVUFBVSxFQUNsQztJQUNDLE1BQU0sQ0FBQ0MsSUFBSSxHQUFHbEMsZ0RBQVFBLENBQUNnQixJQUFJbUIsR0FBRyxJQUFJLE1BQU07SUFDeEMsTUFBTSxDQUFDQyxtQkFBbUJDLHFCQUFxQixHQUFHcEMsK0NBQVFBLENBQUM7SUFFM0QsTUFBTXFDLGNBQWNwQyw2Q0FBTUEsQ0FBQztJQUMzQixNQUFNcUMsb0JBQW9CckMsNkNBQU1BLENBQUMsT0FBTyxvQ0FBb0M7SUFHNUUsOENBQThDO0lBQzlDLE1BQU1zQyxlQUFlcEMsa0RBQVdBO29EQUFDLENBQUNxQyxJQUFJQztZQUNwQyxJQUFJQSxRQUFRQyxXQUFXLElBQUksQ0FBQ3ZCLFVBQVU7WUFDdENBLFNBQVNxQixJQUFJQztRQUNmO21EQUFHO1FBQUN0QjtLQUFTO0lBRWIsTUFBTXdCLFlBQVl4QyxrREFBV0E7aURBQUMsQ0FBQ3lDO1lBQzdCLElBQUl2QixhQUFhO2dCQUNmQSxZQUFZTixJQUFJeUIsRUFBRSxFQUFFSSxRQUFRO1lBQzVCLDhDQUE4QztZQUM5Qyx1Q0FBdUM7WUFDekM7UUFDRjtnREFBRztRQUFDN0IsSUFBSXlC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LElBQUk7b0JBQ3RCbkgsY0FBYzFFO29CQUNkMkUsY0FBYzFFO29CQUNkMkUsUUFBUWhKLGNBQWNPLGtCQUFrQixZQUFZd047b0JBQ3BEN0UsYUFBYWxKLGNBQWNPLGtCQUFrQixJQUFJOzs7Ozs7WUFJdkQsS0FBSztnQkFDSCxxQkFDRSw4REFBQzNCLHVEQUFjQTtvQkFDWixHQUFHaVIsVUFBVTtvQkFDZGhILEtBQUtsSDtvQkFDTHVPLE9BQU87b0JBQ1BELFFBQVFsUSxJQUFJa1EsTUFBTSxJQUFJO29CQUN0Qm5ILGNBQWMxRTtvQkFDZDJFLGNBQWMxRTtvQkFDZDJFLFFBQVFoSixjQUFjTyxrQkFBa0IsWUFBWXdOO29CQUNwRDdFLGFBQWFsSixjQUFjTyxrQkFBa0IsSUFBSTs7Ozs7O1lBS3ZEO2dCQUNFLE9BQU87UUFDWDtJQUNGO0lBRUEsT0FBTztBQUNUIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXEVsZW1lbnRvQ2FudmFzLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBFbGVtZW50b0NhbnZhcy5qc3ggLSBSRUVNUExBWkFSIFRPRE8gRUwgQVJDSElWT1xuaW1wb3J0IHsgVGV4dCwgSW1hZ2UgYXMgS29udmFJbWFnZSwgUmVjdCwgQ2lyY2xlLCBMaW5lLCBSZWd1bGFyUG9seWdvbiwgUGF0aCwgR3JvdXAgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcbmltcG9ydCB1c2VJbWFnZSBmcm9tIFwidXNlLWltYWdlXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VNZW1vLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMSU5FX0NPTlNUQU5UUyB9IGZyb20gJ0AvbW9kZWxzL2xpbmVDb25zdGFudHMnO1xuaW1wb3J0IHsgZm9udE1hbmFnZXIgfSBmcm9tICcuLi91dGlscy9mb250TWFuYWdlcic7XG5pbXBvcnQgeyBwcmV2aWV3RHJhZ0dydXBhbCwgc3RhcnREcmFnR3J1cGFsTGlkZXIsIGVuZERyYWdHcnVwYWwgfSBmcm9tIFwiQC9kcmFnL2RyYWdHcnVwYWxcIjtcbmltcG9ydCB7IHN0YXJ0RHJhZ0luZGl2aWR1YWwsIHByZXZpZXdEcmFnSW5kaXZpZHVhbCwgZW5kRHJhZ0luZGl2aWR1YWwgfSBmcm9tIFwiQC9kcmFnL2RyYWdJbmRpdmlkdWFsXCI7XG5pbXBvcnQgeyBnZXRDZW50ZXJlZFRleHRQb3NpdGlvbiB9IGZyb20gXCJAL3V0aWxzL2dldFRleHRNZXRyaWNzXCI7XG5cblxuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWxlbWVudG9DYW52YXMoe1xuICBvYmosXG4gIGlzU2VsZWN0ZWQsXG4gIGlzSW5FZGl0TW9kZSxcbiAgb25TZWxlY3QsXG4gIG9uQ2hhbmdlLFxuICBlZGl0aW5nSWQsXG4gIHJlZ2lzdGVyUmVmLFxuICBvbkhvdmVyLFxuICBwcmVTZWxlY2Npb25hZG8sXG4gIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvLFxuICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8sXG4gIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8sXG4gIGRyYWdTdGFydFBvcyxcbiAgaGFzRHJhZ2dlZCxcbiAgb25TdGFydFRleHRFZGl0LFxuICBlZGl0aW5nTW9kZSA9IGZhbHNlLFxuICBpbmxpbmVPdmVybGF5TW91bnRlZElkID0gbnVsbCxcbiAgaW5saW5lVmlzaWJpbGl0eU1vZGUgPSBcInJlYWN0aXZlXCJcbn0pIHtcbiAgY29uc3QgW2ltZ10gPSB1c2VJbWFnZShvYmouc3JjIHx8IG51bGwsIFwiYW5vbnltb3VzXCIpO1xuICBjb25zdCBbbWVhc3VyZWRUZXh0V2lkdGgsIHNldE1lYXN1cmVkVGV4dFdpZHRoXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIGNvbnN0IHRleHROb2RlUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBiYXNlVGV4dExheW91dFJlZiA9IHVzZVJlZihudWxsKTsgLy8gZ3VhcmRhIGVsIGNlbnRyby9iYXNlbGluZSBpbmljaWFsXG5cblxuICAvLyDwn5SlIFBSRVZFTklSIG9uQ2hhbmdlIFJFQ1VSU0lWTyBQQVJBIEFVVE9GSVhcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soKGlkLCBuZXdEYXRhKSA9PiB7XG4gICAgaWYgKG5ld0RhdGEuZnJvbUF1dG9GaXggfHwgIW9uQ2hhbmdlKSByZXR1cm47XG4gICAgb25DaGFuZ2UoaWQsIG5ld0RhdGEpO1xuICB9LCBbb25DaGFuZ2VdKTtcblxuICBjb25zdCBoYW5kbGVSZWYgPSB1c2VDYWxsYmFjaygobm9kZSkgPT4ge1xuICAgIGlmIChyZWdpc3RlclJlZikge1xuICAgICAgcmVnaXN0ZXJSZWYob2JqLmlkLCBub2RlIHx8IG51bGwpO1xuICAgICAgLy8g4p2MIE5PIGRlc3BhY2hhciBcImVsZW1lbnQtcmVmLXJlZ2lzdHJhZG9cIiBhY8OhXG4gICAgICAvLyBDYW52YXNFZGl0b3IucmVnaXN0ZXJSZWYgeWEgbG8gaGFjZS5cbiAgICB9XG4gIH0sIFtvYmouaWQsIHJlZ2lzdGVyUmVmXSk7XG5cblxuXG4gIC8vIOKchSBDbGljayBjb24gZXN0YWRvIGZyZXNjbyAoZXZpdGEgc3RhbGUgY2xvc3VyZXMgZGVsIHVzZU1lbW8pXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblxuICAgICAgaWYgKCFoYXNEcmFnZ2VkLmN1cnJlbnQpIHtcbiAgICAgICAgLy8g8J+noCBUZXh0byBub3JtYWxcbiAgICAgICAgaWYgKG9iai50aXBvID09PSBcInRleHRvXCIpIHtcbiAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgb25TdGFydFRleHRFZGl0Py4ob2JqLmlkLCBvYmoudGV4dG8pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvblNlbGVjdChvYmouaWQsIG9iaiwgZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g8J+GlSBGb3JtYSBjb24gdGV4dG8gKHJlY3QpXG4gICAgICAgIGVsc2UgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJyZWN0XCIpIHtcbiAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgb25TdGFydFRleHRFZGl0Py4ob2JqLmlkLCBvYmoudGV4dG8gfHwgXCJcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uU2VsZWN0KG9iai5pZCwgb2JqLCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDwn6exIFBhcmEgdG9kbyBsbyBkZW3DoXNcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgb25TZWxlY3Qob2JqLmlkLCBvYmosIGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbb2JqLCBpc1NlbGVjdGVkLCBvblNlbGVjdCwgb25TdGFydFRleHRFZGl0XVxuICApO1xuXG5cblxuICAvLyDwn5SlIE1FTU9JWkFSIFBST1BJRURBREVTIENPTVVORVNcbiAgY29uc3QgY29tbW9uUHJvcHMgPSB1c2VNZW1vKCgpID0+ICh7XG4gICAgeDogb2JqLnggPz8gMCxcbiAgICB5OiBvYmoueSA/PyAwLFxuICAgIHJvdGF0aW9uOiBvYmoucm90YXRpb24gfHwgMCxcbiAgICBzY2FsZVg6IG9iai5zY2FsZVggfHwgMSxcbiAgICBzY2FsZVk6IG9iai5zY2FsZVkgfHwgMSxcbiAgICBkcmFnZ2FibGU6ICFlZGl0aW5nTW9kZSxcbiAgICBsaXN0ZW5pbmc6ICFpc0luRWRpdE1vZGUsXG5cbiAgICBvbk1vdXNlRG93bjogKGUpID0+IHtcbiAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgIGhhc0RyYWdnZWQuY3VycmVudCA9IGZhbHNlO1xuXG4gICAgICBlLmN1cnJlbnRUYXJnZXQ/LmRyYWdnYWJsZSh0cnVlKTtcbiAgICB9LFxuXG4gICAgb25Nb3VzZVVwOiAoZSkgPT4ge1xuICAgICAgaWYgKGUuY3VycmVudFRhcmdldD8uZHJhZ2dhYmxlICYmICFoYXNEcmFnZ2VkLmN1cnJlbnQpIHtcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmRyYWdnYWJsZShmYWxzZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLFxuICAgIG9uVGFwOiBoYW5kbGVDbGljayxcblxuICAgIG9uRHJhZ1N0YXJ0OiAoZSkgPT4ge1xuXG4gICAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8/LihvYmouaWQsIGUpO1xuXG4gICAgICB3aW5kb3cuX2RyYWdDb3VudCA9IDA7XG4gICAgICB3aW5kb3cuX2xhc3RNb3VzZSA9IG51bGw7XG4gICAgICB3aW5kb3cuX2xhc3RFbGVtZW50ID0gbnVsbDtcblxuICAgICAgaGFzRHJhZ2dlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIHdpbmRvdy5faXNEcmFnZ2luZyA9IHRydWU7XG5cblxuICAgICAgLy8g8J+UpSBJbnRlbnRhciBkcmFnIGdydXBhbFxuICAgICAgY29uc3QgZnVlR3J1cGFsID0gc3RhcnREcmFnR3J1cGFsTGlkZXIoZSwgb2JqKTtcbiAgICAgIGlmICghZnVlR3J1cGFsKSB7XG4gICAgICAgIHN0YXJ0RHJhZ0luZGl2aWR1YWwoZSwgZHJhZ1N0YXJ0UG9zKTtcbiAgICAgIH1cbiAgICB9LFxuXG5cbiAgICBvbkRyYWdNb3ZlOiAoZSkgPT4ge1xuICAgICAgaGFzRHJhZ2dlZC5jdXJyZW50ID0gdHJ1ZTtcblxuICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgY29uc3QgbW91c2VQb3MgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICAgIGNvbnN0IGVsZW1lbnRQb3MgPSB7IHg6IGUudGFyZ2V0LngoKSwgeTogZS50YXJnZXQueSgpIH07XG5cbiAgICAgIHdpbmRvdy5fbGFzdE1vdXNlID0gbW91c2VQb3M7XG4gICAgICB3aW5kb3cuX2xhc3RFbGVtZW50ID0gZWxlbWVudFBvcztcblxuICAgICAgLy8g8J+UpSBEUkFHIEdSVVBBTCAtIFNPTE8gRUwgTMONREVSIFBST0NFU0FcbiAgICAgIGlmICh3aW5kb3cuX2dydXBvTGlkZXIgJiYgb2JqLmlkID09PSB3aW5kb3cuX2dydXBvTGlkZXIpIHtcbiAgICAgICAgcHJldmlld0RyYWdHcnVwYWwoZSwgb2JqLCBvbkNoYW5nZSk7XG5cbiAgICAgICAgLy8g8J+UpSBOTyBsbGFtYXIgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8gZHVyYW50ZSBkcmFnIGdydXBhbCAoZXZpdGEgZ3XDrWFzKVxuICAgICAgICAvLyBFbCBwcmV2aWV3IGluZGl2aWR1YWwgeWEgbm8gZXMgbmVjZXNhcmlvIHBvcnF1ZSBtYW5lamFtb3MgdG9kbyBhcXXDrVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g8J+UpSBTSSBFUyBTRUdVSURPUiBERUwgR1JVUE8sIE5PIFBST0NFU0FSXG4gICAgICBpZiAod2luZG93Ll9ncnVwb0xpZGVyKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MgPSB3aW5kb3cuX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MgfHwgW107XG4gICAgICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG9iai5pZCkgJiYgb2JqLmlkICE9PSB3aW5kb3cuX2dydXBvTGlkZXIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g8J+UhCBEUkFHIElORElWSURVQUwgLSBTb2xvIHNpIG5vIGhheSBkcmFnIGdydXBhbCBhY3Rpdm9cbiAgICAgIGlmICghd2luZG93Ll9ncnVwb0xpZGVyKSB7XG4gICAgICAgIHByZXZpZXdEcmFnSW5kaXZpZHVhbChlLCBvYmosIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvKTtcbiAgICAgIH1cbiAgICB9LFxuXG5cblxuXG4gICAgb25EcmFnRW5kOiAoZSkgPT4ge1xuXG4gICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcblxuICAgICAgY29uc3Qgbm9kZSA9IGUuY3VycmVudFRhcmdldDtcblxuICAgICAgLy8g8J+UpSBJbnRlbnRhciBkcmFnIGdydXBhbFxuICAgICAgY29uc3QgZnVlR3J1cGFsID0gZW5kRHJhZ0dydXBhbChlLCBvYmosIG9uQ2hhbmdlLCBoYXNEcmFnZ2VkKTtcbiAgICAgIGlmIChmdWVHcnVwYWwpIHJldHVybjtcblxuICAgICAgLy8g8J+UhCBEUkFHIElORElWSURVQUwgKG5vIGNhbWJpw7MpXG4gICAgICBlbmREcmFnSW5kaXZpZHVhbChvYmosIG5vZGUsIG9uQ2hhbmdlLCBvbkRyYWdFbmRQZXJzb25hbGl6YWRvLCBoYXNEcmFnZ2VkKTtcblxuXG4gICAgfSxcblxuXG4gIH0pLCBbXG4gICAgb2JqLFxuICAgIGVkaXRpbmdNb2RlLFxuICAgIGlzSW5FZGl0TW9kZSxcbiAgICBoYW5kbGVDbGljayxcbiAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyxcbiAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8sXG4gICAgb25EcmFnRW5kUGVyc29uYWxpemFkbyxcbiAgICBkcmFnU3RhcnRQb3MsXG4gICAgaGFzRHJhZ2dlZCxcbiAgICBvbkNoYW5nZSxcbiAgXSk7XG5cbiAgLy8g8J+UpSBNRU1PSVpBUiBIQU5ETEVSUyBIT1ZFUlxuICBjb25zdCBoYW5kbGVNb3VzZUVudGVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghb25Ib3ZlciB8fCB3aW5kb3cuX2lzRHJhZ2dpbmcgfHwgaXNJbkVkaXRNb2RlKSByZXR1cm47XG4gICAgb25Ib3ZlcihvYmouaWQpO1xuICB9LCBbb25Ib3Zlciwgb2JqLmlkLCBpc0luRWRpdE1vZGVdKTtcblxuXG4gIGNvbnN0IGhhbmRsZU1vdXNlTGVhdmUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFvbkhvdmVyIHx8IGlzSW5FZGl0TW9kZSkgcmV0dXJuO1xuICAgIG9uSG92ZXIobnVsbCk7XG4gIH0sIFtvbkhvdmVyLCBpc0luRWRpdE1vZGVdKTtcblxuICBjb25zdCByZWNhbGNHcm91cEFsaWduID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChvYmoudGlwbyAhPT0gXCJ0ZXh0b1wiKSByZXR1cm47XG4gICAgaWYgKCFvYmouX19ncm91cEFsaWduIHx8ICFvYmouX19ncm91cElkKSByZXR1cm47XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIG9uQ2hhbmdlICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybjtcblxuICAgIGNvbnN0IHJlZnMgPSB3aW5kb3cuX2VsZW1lbnRSZWZzIHx8IHt9O1xuICAgIGNvbnN0IGdldE9iaiA9IHdpbmRvdy5fX2dldE9iakJ5SWQgfHwgKCgpID0+IG51bGwpO1xuXG4gICAgbGV0IG1heFcgPSAwO1xuICAgIGxldCB0aGlzVyA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IFtpZCwgbm9kZV0gb2YgT2JqZWN0LmVudHJpZXMocmVmcykpIHtcbiAgICAgIGNvbnN0IG8gPSBnZXRPYmooaWQpO1xuICAgICAgaWYgKCFvIHx8IG8udGlwbyAhPT0gXCJ0ZXh0b1wiIHx8IG8uX19ncm91cElkICE9PSBvYmouX19ncm91cElkKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHcgPSBub2RlPy5nZXRUZXh0V2lkdGggPyBNYXRoLmNlaWwobm9kZS5nZXRUZXh0V2lkdGgoKSkgOiAwO1xuICAgICAgaWYgKGlkID09PSBvYmouaWQpIHRoaXNXID0gdztcbiAgICAgIGlmICh3ID4gbWF4VykgbWF4VyA9IHc7XG4gICAgfVxuICAgIGlmICghbWF4VyB8fCAhdGhpc1cpIHJldHVybjtcblxuICAgIGNvbnN0IGJhc2VYID0gTnVtYmVyLmlzRmluaXRlKG9iai5fX2dyb3VwT3JpZ2luWCkgPyBvYmouX19ncm91cE9yaWdpblggOiAob2JqLnggfHwgMCk7XG4gICAgbGV0IHRhcmdldFggPSBiYXNlWDtcbiAgICBpZiAob2JqLl9fZ3JvdXBBbGlnbiA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgdGFyZ2V0WCA9IGJhc2VYICsgKG1heFcgLSB0aGlzVykgLyAyO1xuICAgIH0gZWxzZSBpZiAob2JqLl9fZ3JvdXBBbGlnbiA9PT0gXCJyaWdodFwiKSB7XG4gICAgICB0YXJnZXRYID0gYmFzZVggKyAobWF4VyAtIHRoaXNXKTtcbiAgICB9XG5cbiAgICBpZiAoTWF0aC5hYnMoKG9iai54IHx8IDApIC0gdGFyZ2V0WCkgPiAwLjUpIHtcbiAgICAgIG9uQ2hhbmdlKG9iai5pZCwgeyB4OiB0YXJnZXRYIH0pO1xuICAgIH1cbiAgfSwgW29iai5pZCwgb2JqLngsIG9iai50aXBvLCBvYmouX19ncm91cEFsaWduLCBvYmouX19ncm91cElkLCBvYmouX19ncm91cE9yaWdpblgsIG9uQ2hhbmdlXSk7XG5cblxuXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBSZWNhbGN1bGFyIGN1YW5kbyBlc3RlIHRleHRvIGNhbWJpYSB5IHRyYXMgbW9udGFyIHN1cyB2ZWNpbm9zXG4gICAgbGV0IHIxLCByMjtcbiAgICByMSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICByMiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHJlY2FsY0dyb3VwQWxpZ24oKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocjEpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHIxKTtcbiAgICAgIGlmIChyMikgY2FuY2VsQW5pbWF0aW9uRnJhbWUocjIpO1xuICAgIH07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBbcmVjYWxjR3JvdXBBbGlnbiwgb2JqLnRleHRvLCBvYmouZm9udEZhbWlseSwgb2JqLmZvbnRTaXplLCBvYmouZm9udFN0eWxlLCBvYmouZm9udFdlaWdodF0pO1xuXG5cblxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFvYmogfHwgb2JqLnRpcG8gIT09IFwidGV4dG9cIikgcmV0dXJuO1xuICAgIGlmIChvYmouX19ncm91cEFsaWduKSByZXR1cm47XG5cbiAgICBjb25zdCBpc0F1dG9XaWR0aCA9ICFvYmoud2lkdGggJiYgb2JqLl9fYXV0b1dpZHRoICE9PSBmYWxzZTtcbiAgICBpZiAoIWlzQXV0b1dpZHRoKSByZXR1cm47XG5cbiAgICBsZXQgcmFmMSA9IG51bGw7XG4gICAgbGV0IHJhZjIgPSBudWxsO1xuXG4gICAgcmFmMSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICByYWYyID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRleHROb2RlUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghbm9kZSB8fCB0eXBlb2Ygbm9kZS5nZXRUZXh0V2lkdGggIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHdSZWFsID0gTWF0aC5jZWlsKG5vZGUuZ2V0VGV4dFdpZHRoKCkgfHwgMCk7XG4gICAgICAgIGlmICh3UmVhbCA+IDApIHNldE1lYXN1cmVkVGV4dFdpZHRoKHdSZWFsKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChyYWYxKSBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYxKTtcbiAgICAgIGlmIChyYWYyKSBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYyKTtcbiAgICB9O1xuICB9LCBbXG4gICAgb2JqPy5pZCxcbiAgICBvYmo/LnRleHRvLFxuICAgIG9iaj8uZm9udEZhbWlseSxcbiAgICBvYmo/LmZvbnRTaXplLFxuICAgIG9iaj8uZm9udFN0eWxlLFxuICAgIG9iaj8uZm9udFdlaWdodCxcbiAgICBvYmo/LmxpbmVIZWlnaHQsXG4gICAgb2JqPy53aWR0aCxcbiAgICBvYmo/Ll9fYXV0b1dpZHRoLFxuICAgIG9iaj8uX19ncm91cEFsaWduLFxuICBdKTtcblxuXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRNZWFzdXJlZFRleHRXaWR0aChudWxsKTtcbiAgICAvLyB0YW1iacOpbiBjb252aWVuZSByZXNldGVhciBlbCBsYXlvdXQgYmFzZSBjdWFuZG8gY2FtYmlhIGRlIHRleHRvXG4gICAgaWYgKG9iaj8udGlwbyA9PT0gXCJ0ZXh0b1wiKSBiYXNlVGV4dExheW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgfSwgW29iaj8uaWRdKTtcblxuXG5cbiAgY29uc3QgZ3JvdXBSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDYWNoZWFyIGN1YW5kbyBjYW1iaWUgZWwgY29sb3JcbiAgICBpZiAoZ3JvdXBSZWYuY3VycmVudCAmJiBvYmoudGlwbyA9PT0gXCJpY29ub1wiICYmIG9iai5jb2xvciAmJiBvYmouY29sb3IgIT09IFwiIzAwMDAwMFwiKSB7XG4gICAgICBncm91cFJlZi5jdXJyZW50LmNhY2hlKCk7XG4gICAgICBncm91cFJlZi5jdXJyZW50LmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xuICAgIH1cbiAgfSwgW29iai5jb2xvciwgb2JqLmlkXSk7XG5cblxuICAvLyBDb252aWVydGUgXCJtaW5YIG1pblkgd2lkdGggaGVpZ2h0XCIgLT4gbsO6bWVyb3NcbiAgZnVuY3Rpb24gcGFyc2VWaWV3Qm94KHZiKSB7XG4gICAgaWYgKCF2YiB8fCB0eXBlb2YgdmIgIT09IFwic3RyaW5nXCIpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHBhcnRzID0gdmIudHJpbSgpLnNwbGl0KC9cXHMrLykubWFwKE51bWJlcik7XG4gICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gNCB8fCBwYXJ0cy5zb21lKChuKSA9PiBOdW1iZXIuaXNOYU4obikpKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBbbWluWCwgbWluWSwgdmJXaWR0aCwgdmJIZWlnaHRdID0gcGFydHM7XG4gICAgcmV0dXJuIHsgbWluWCwgbWluWSwgdmJXaWR0aCwgdmJIZWlnaHQgfTtcbiAgfVxuXG5cbiAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHtcbiAgICBsZXQgbGluZVBvaW50cyA9IG9iai5wb2ludHM7XG4gICAgbGV0IHBvaW50c0ZpeGVkID0gZmFsc2U7XG5cbiAgICBpZiAoIWxpbmVQb2ludHMgfHwgIUFycmF5LmlzQXJyYXkobGluZVBvaW50cykgfHwgbGluZVBvaW50cy5sZW5ndGggPCA0KSB7XG4gICAgICBsaW5lUG9pbnRzID0gWzAsIDAsIExJTkVfQ09OU1RBTlRTLkRFRkFVTFRfTEVOR1RILCAwXTsgLy8gVXNhciBjb25zdGFudGVcbiAgICAgIHBvaW50c0ZpeGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHVudG9zVmFsaWRhZG9zID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICBjb25zdCBwdW50byA9IHBhcnNlRmxvYXQobGluZVBvaW50c1tpXSk7XG4gICAgICAgIHB1bnRvc1ZhbGlkYWRvcy5wdXNoKGlzTmFOKHB1bnRvKSA/IDAgOiBwdW50byk7XG4gICAgICB9XG5cbiAgICAgIGlmIChKU09OLnN0cmluZ2lmeShwdW50b3NWYWxpZGFkb3MpICE9PSBKU09OLnN0cmluZ2lmeShsaW5lUG9pbnRzLnNsaWNlKDAsIDQpKSkge1xuICAgICAgICBsaW5lUG9pbnRzID0gcHVudG9zVmFsaWRhZG9zO1xuICAgICAgICBwb2ludHNGaXhlZCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lUG9pbnRzID0gbGluZVBvaW50cy5zbGljZSgwLCA0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9pbnRzRml4ZWQgJiYgaGFuZGxlQ2hhbmdlKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaGFuZGxlQ2hhbmdlKG9iai5pZCwge1xuICAgICAgICAgIHBvaW50czogbGluZVBvaW50cyxcbiAgICAgICAgICBmcm9tQXV0b0ZpeDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0sIDApO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxMaW5lXG4gICAgICAgIHsuLi5jb21tb25Qcm9wc31cbiAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XG4gICAgICAgIHBvaW50cz17bGluZVBvaW50c31cbiAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxuICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XG4gICAgICAgIHN0cm9rZT17b2JqLmNvbG9yIHx8IExJTkVfQ09OU1RBTlRTLkRFRkFVTFRfQ09MT1J9XG4gICAgICAgIHN0cm9rZVdpZHRoPXtvYmouc3Ryb2tlV2lkdGggfHwgTElORV9DT05TVEFOVFMuU1RST0tFX1dJRFRIfVxuICAgICAgICB0ZW5zaW9uPXswfVxuICAgICAgICBsaW5lQ2FwPVwicm91bmRcIlxuICAgICAgICBsaW5lSm9pbj1cInJvdW5kXCJcbiAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgaGl0U3Ryb2tlV2lkdGg9e01hdGgubWF4KExJTkVfQ09OU1RBTlRTLkhJVF9TVFJPS0VfV0lEVEgsIG9iai5zdHJva2VXaWR0aCB8fCAyKX1cbiAgICAgICAgc2hhZG93Rm9yU3Ryb2tlRW5hYmxlZD17ZmFsc2V9XG4gICAgICAgIG9wYWNpdHk9e2lzU2VsZWN0ZWQgPyAxIDogMC45NX1cbiAgICAgICAgc2hhZG93Q29sb3I9e2lzU2VsZWN0ZWQgPyBcInJnYmEoMTE5LCA2MSwgMTkwLCAwLjMpXCIgOiBcInRyYW5zcGFyZW50XCJ9XG4gICAgICAgIHNoYWRvd0JsdXI9e2lzU2VsZWN0ZWQgPyA4IDogMH1cbiAgICAgICAgc2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IDIgfX1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG5cbiAgaWYgKG9iai50aXBvID09PSBcInRleHRvXCIpIHtcbiAgICBjb25zdCB2aXNpYmlsaXR5TW9kZSA9XG4gICAgICBpbmxpbmVWaXNpYmlsaXR5TW9kZSA9PT0gXCJ3aW5kb3dcIiA/IFwid2luZG93XCIgOiBcInJlYWN0aXZlXCI7XG4gICAgY29uc3QgaXNFZGl0aW5nQnlXaW5kb3cgPSB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPT09IG9iai5pZDtcbiAgICBjb25zdCBpc0VkaXRpbmdCeVJlYWN0aXZlID0gZWRpdGluZ0lkID09PSBvYmouaWQ7XG4gICAgY29uc3Qgb3ZlcmxheURvbVByZXNlbnRMb29zZSA9ICgoKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBzYWZlSWQgPSBTdHJpbmcob2JqLmlkKS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyk7XG4gICAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmxpbmUtZWRpdG9yLWlkPVwiJHtzYWZlSWR9XCJdYCkpO1xuICAgIH0pKCk7XG4gICAgY29uc3Qgb3ZlcmxheURvbVByZXNlbnQgPVxuICAgICAgaW5saW5lT3ZlcmxheU1vdW50ZWRJZCA9PT0gb2JqLmlkICYmIG92ZXJsYXlEb21QcmVzZW50TG9vc2U7XG4gICAgY29uc3QgaXNFZGl0aW5nQnlPdmVybGF5ID0gb3ZlcmxheURvbVByZXNlbnQ7XG4gICAgY29uc3QgaXNFZGl0aW5nID1cbiAgICAgIHZpc2liaWxpdHlNb2RlID09PSBcInJlYWN0aXZlXCJcbiAgICAgICAgPyAoaXNFZGl0aW5nQnlSZWFjdGl2ZSB8fCBpc0VkaXRpbmdCeU92ZXJsYXkpXG4gICAgICAgIDogKGlzRWRpdGluZ0J5V2luZG93IHx8IGlzRWRpdGluZ0J5UmVhY3RpdmUgfHwgaXNFZGl0aW5nQnlPdmVybGF5KTtcbiAgICBjb25zdCBmb250RmFtaWx5ID0gZm9udE1hbmFnZXIuaXNGb250QXZhaWxhYmxlKG9iai5mb250RmFtaWx5KVxuICAgICAgPyBvYmouZm9udEZhbWlseVxuICAgICAgOiBcInNhbnMtc2VyaWZcIjtcbiAgICBjb25zdCBhbGlnbiA9IChvYmouYWxpZ24gfHwgXCJsZWZ0XCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgZmlsbENvbG9yID0gb2JqLmNvbG9yVGV4dG8gPz8gb2JqLmZpbGwgPz8gb2JqLmNvbG9yID8/IFwiIzAwMFwiO1xuICAgIGNvbnN0IGJhc2VMaW5lSGVpZ2h0ID1cbiAgICAgIHR5cGVvZiBvYmoubGluZUhlaWdodCA9PT0gXCJudW1iZXJcIiAmJiBvYmoubGluZUhlaWdodCA+IDAgPyBvYmoubGluZUhlaWdodCA6IDEuMjtcbiAgICBjb25zdCBsaW5lSGVpZ2h0ID0gYmFzZUxpbmVIZWlnaHQgKiAwLjkyO1xuXG5cbiAgICAvLyDinIUgRXZpdGEgYmJveCBzb2JyYWRvIGEgbGEgZGVyZWNoYSBwb3IgZXNwYWNpb3MvdGFicyBpbnZpc2libGVzIGFsIGZpbmFsIGRlIGzDrW5lYVxuICAgIGNvbnN0IHJhd1RleHQgPSBTdHJpbmcob2JqLnRleHRvID8/IFwiXCIpO1xuICAgIGNvbnN0IHNhZmVUZXh0ID0gcmF3VGV4dC5yZXBsYWNlKC9bIFxcdF0rJC9nbSwgXCJcIik7XG5cblxuICAgIC8vIOKchSBWQUxJREFDScOTTjogQXNlZ3VyYXIgdmFsb3JlcyBudW3DqXJpY29zIHbDoWxpZG9zXG4gICAgY29uc3QgdmFsaWRYID0gdHlwZW9mIG9iai54ID09PSBcIm51bWJlclwiICYmICFpc05hTihvYmoueCkgPyBvYmoueCA6IDA7XG4gICAgY29uc3QgdmFsaWRZID0gdHlwZW9mIG9iai55ID09PSBcIm51bWJlclwiICYmICFpc05hTihvYmoueSkgPyBvYmoueSA6IDA7XG4gICAgY29uc3QgdmFsaWRGb250U2l6ZSA9IHR5cGVvZiBvYmouZm9udFNpemUgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKG9iai5mb250U2l6ZSkgJiYgb2JqLmZvbnRTaXplID4gMCA/IG9iai5mb250U2l6ZSA6IDI0O1xuXG4gICAgLy8g8J+UuSBQQVNPIDE6IENhbGN1bGFyIGRpbWVuc2lvbmVzIGRlbCB0ZXh0byBQUklNRVJPXG4gICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgY29uc3Qgc3R5bGUgPSBvYmouZm9udFN0eWxlIHx8IFwibm9ybWFsXCI7XG4gICAgY29uc3Qgd2VpZ2h0ID0gb2JqLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIjtcblxuICAgIC8vIOKchSBzaSBsYSBmdWVudGUgdGllbmUgZXNwYWNpb3MsIGVudm9sdmVybGEgZW4gY29taWxsYXMgcGFyYSBxdWUgY2FudmFzIG5vIGNhaWdhIGEgZmFsbGJhY2tcbiAgICBjb25zdCBmb250Rm9yQ2FudmFzID0gZm9udEZhbWlseS5pbmNsdWRlcyhcIixcIilcbiAgICAgID8gZm9udEZhbWlseVxuICAgICAgOiAoL1xccy8udGVzdChmb250RmFtaWx5KSA/IGBcIiR7Zm9udEZhbWlseX1cImAgOiBmb250RmFtaWx5KTtcblxuICAgIC8vIOKchSBvcmRlbiBjb3JyZWN0bzogc3R5bGUgLT4gd2VpZ2h0IC0+IHNpemUgLT4gZmFtaWx5XG4gICAgY3R4LmZvbnQgPSBgJHtzdHlsZX0gJHt3ZWlnaHR9ICR7dmFsaWRGb250U2l6ZX1weCAke2ZvbnRGb3JDYW52YXN9YDtcblxuICAgIGNvbnN0IGxpbmVzID0gc2FmZVRleHQuc3BsaXQoL1xccj9cXG4vKTtcbiAgICBjb25zdCBtYXhMaW5lV2lkdGggPSBNYXRoLm1heCguLi5saW5lcy5tYXAobGluZSA9PiBjdHgubWVhc3VyZVRleHQobGluZSkud2lkdGgpLCAyMCk7XG4gICAgY29uc3QgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XG4gICAgY29uc3QgdGV4dFdpZHRoID0gTWF0aC5jZWlsKG1heExpbmVXaWR0aCk7XG4gICAgY29uc3QgdGV4dEhlaWdodCA9IHZhbGlkRm9udFNpemUgKiBsaW5lSGVpZ2h0ICogbnVtTGluZXM7XG5cbiAgICAvLyDwn5S5IFBBU08gMjogQ2FsY3VsYXIgcG9zaWNpw7NuIHNvbG8gdW5hIHZleiB5IGNvbmdlbGFyIGVsIGNlbnRyb1xuICAgIGxldCBwb3NpdGlvblJhdyA9IGdldENlbnRlcmVkVGV4dFBvc2l0aW9uKHtcbiAgICAgIHJlY3RZOiB2YWxpZFksXG4gICAgICByZWN0SGVpZ2h0OiB0ZXh0SGVpZ2h0LFxuICAgICAgZm9udFNpemU6IHZhbGlkRm9udFNpemUsXG4gICAgICBmb250RmFtaWx5LFxuICAgICAgZm9udFdlaWdodDogb2JqLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIixcbiAgICAgIGZvbnRTdHlsZTogb2JqLmZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiLFxuICAgIH0pO1xuXG4gICAgLy8gSW5pY2lhbGl6YXIgbGF5b3V0IGJhc2Ugc29sbyBsYSBQUklNRVJBIHZlelxuICAgIGlmICghYmFzZVRleHRMYXlvdXRSZWYuY3VycmVudCkge1xuICAgICAgYmFzZVRleHRMYXlvdXRSZWYuY3VycmVudCA9IHtcbiAgICAgICAgLy8gY2VudHJvIHZlcnRpY2FsIFwiaWRlYWxcIiBxdWUgcXVlcmVtb3MgY29uc2VydmFyXG4gICAgICAgIHJlY3RDZW50ZXI6IHBvc2l0aW9uUmF3LnJlY3RDZW50ZXIsXG4gICAgICAgIC8vIG9mZnNldCBkZXNkZSBlbCBjZW50cm8gYWwgYmFzZWxpbmUgKGRlcGVuZGUgc29sbyBkZSBsYSBmdWVudGUvdGFtYcOxbylcbiAgICAgICAgYmFzZWxpbmVUb0NlbnRlcjogcG9zaXRpb25SYXcuYmFzZWxpbmUgLSBwb3NpdGlvblJhdy5yZWN0Q2VudGVyLFxuICAgICAgICBhc2NlbnQ6IHBvc2l0aW9uUmF3LmFzY2VudCxcbiAgICAgICAgZGVzY2VudDogcG9zaXRpb25SYXcuZGVzY2VudCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgYmFzZSA9IGJhc2VUZXh0TGF5b3V0UmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgcmVjdENlbnRlckZpeGVkID0gYmFzZS5yZWN0Q2VudGVyO1xuICAgIGNvbnN0IGJhc2VsaW5lWSA9IHJlY3RDZW50ZXJGaXhlZCArIGJhc2UuYmFzZWxpbmVUb0NlbnRlcjtcbiAgICBjb25zdCB0ZXh0VG9wRml4ZWQgPSBiYXNlbGluZVkgLSBiYXNlLmFzY2VudDtcblxuICAgIGNvbnN0IHBvc2l0aW9uID0ge1xuICAgICAgYmFzZWxpbmU6IGJhc2VsaW5lWSxcbiAgICAgIHRleHRUb3A6IHRleHRUb3BGaXhlZCxcbiAgICAgIGFzY2VudDogYmFzZS5hc2NlbnQsXG4gICAgICBkZXNjZW50OiBiYXNlLmRlc2NlbnQsXG4gICAgICByZWN0Q2VudGVyOiByZWN0Q2VudGVyRml4ZWQsXG4gICAgfTtcblxuICAgIC8vIPCflI0gRGVidWc6IGluZm9ybWFjacOzbiBjb21wbGV0YSBkZSBwb3NpY2nDs24geSBjZW50cmFkb1xuXG5cbiAgICAvLyDimqDvuI8gV2FybmluZyBzaSBoYXkgdmFsb3JlcyBpbnbDoWxpZG9zXG4gICAgaWYgKG9iai54ICE9PSB2YWxpZFggfHwgb2JqLnkgIT09IHZhbGlkWSB8fCBvYmouZm9udFNpemUgIT09IHZhbGlkRm9udFNpemUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIuKaoO+4jyBPYmpldG8gZGUgdGV4dG8gdGllbmUgdmFsb3JlcyBpbnbDoWxpZG9zOlwiLCB7XG4gICAgICAgIGlkOiBvYmouaWQsXG4gICAgICAgIHg6IG9iai54LFxuICAgICAgICB5OiBvYmoueSxcbiAgICAgICAgZm9udFNpemU6IG9iai5mb250U2l6ZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgICAgICBjb25zdCBBTkNIT19DQU5WQVMgPSA4MDA7XG4gICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSBNYXRoLm1heCgxLCBBTkNIT19DQU5WQVMgLSB2YWxpZFgpO1xuXG4gICAgLy8gYW5jaG8gcmVhbCBkZWwgdGV4dG8gKG3DoXhpbWEgbMOtbmVhLCBzZWfDum4gdHUgY8OhbGN1bG8gYWN0dWFsKVxuICAgIGNvbnN0IHJlYWxUZXh0V2lkdGggPSBNYXRoLm1heCgxLCB0ZXh0V2lkdGgpO1xuXG4gICAgLy8g4pyFIFNpIGVudHJhLCBOTyB1c2Ftb3Mgd2lkdGggKGJvdW5kcyBhanVzdGFkbylcbiAgICAvLyDinIUgU2kgbm8gZW50cmEsIHVzYW1vcyB3aWR0aD1hdmFpbGFibGUgeSB3cmFwIHBvciBjYXJhY3RlcmVzIHBhcmEgY29ydGFyIGVuIGVsIGJvcmRlXG4gICAgY29uc3Qgc2hvdWxkV3JhcFRvQ2FudmFzRWRnZSA9IHJlYWxUZXh0V2lkdGggPiBhdmFpbGFibGVXaWR0aDtcblxuICAgIGNvbnN0IHdyYXBUb1VzZSA9IHNob3VsZFdyYXBUb0NhbnZhc0VkZ2UgPyBcImNoYXJcIiA6IFwibm9uZVwiO1xuICAgIGNvbnN0IHdpZHRoVG9Vc2UgPSBzaG91bGRXcmFwVG9DYW52YXNFZGdlID8gYXZhaWxhYmxlV2lkdGggOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgaW5saW5lQ2FyZXRPbmx5TW9kZSA9IHRydWU7XG4gICAgY29uc3QgYXBwbGllZE9wYWNpdHkgPVxuICAgICAgaXNFZGl0aW5nICYmICFpbmxpbmVDYXJldE9ubHlNb2RlID8gMCA6IDE7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAgPFRleHRcbiAgICAgICAgICB7Li4uY29tbW9uUHJvcHN9XG4gICAgICAgICAgcmVmPXsobm9kZSkgPT4ge1xuICAgICAgICAgICAgdGV4dE5vZGVSZWYuY3VycmVudCA9IG5vZGU7XG4gICAgICAgICAgICBoYW5kbGVSZWYobm9kZSk7IC8vIHJlZ2lzdHJhICsgZGlzcGFyYSBcImVsZW1lbnQtcmVmLXJlZ2lzdHJhZG9cIlxuICAgICAgICAgIH19XG4gICAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxuICAgICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VMZWF2ZX1cbiAgICAgICAgICB0ZXh0PXtzYWZlVGV4dH1cbiAgICAgICAgICB4PXt2YWxpZFh9XG4gICAgICAgICAgeT17b2JqLnl9XG4gICAgICAgICAgd3JhcD17d3JhcFRvVXNlfVxuICAgICAgICAgIHdpZHRoPXt3aWR0aFRvVXNlfVxuICAgICAgICAgIGFsaWduPXthbGlnbn1cbiAgICAgICAgICBmb250U2l6ZT17dmFsaWRGb250U2l6ZX1cbiAgICAgICAgICBmb250RmFtaWx5PXtmb250RmFtaWx5fVxuICAgICAgICAgIGZvbnRXZWlnaHQ9e29iai5mb250V2VpZ2h0IHx8IFwibm9ybWFsXCJ9XG4gICAgICAgICAgZm9udFN0eWxlPXtvYmouZm9udFN0eWxlIHx8IFwibm9ybWFsXCJ9XG4gICAgICAgICAgbGluZUhlaWdodD17bGluZUhlaWdodH1cbiAgICAgICAgICBmaWxsPXtmaWxsQ29sb3J9XG4gICAgICAgICAgb3BhY2l0eT17YXBwbGllZE9wYWNpdHl9XG4gICAgICAgICAgdmVydGljYWxBbGlnbj1cInRvcFwiXG4gICAgICAgIC8+XG5cblxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChvYmoudGlwbyA9PT0gXCJyc3ZwLWJvdG9uXCIpIHtcbiAgICBjb25zdCBmb250RmFtaWx5ID0gZm9udE1hbmFnZXIuaXNGb250QXZhaWxhYmxlKG9iai5mb250RmFtaWx5KVxuICAgICAgPyBvYmouZm9udEZhbWlseVxuICAgICAgOiBcInNhbnMtc2VyaWZcIjtcblxuICAgIGNvbnN0IHdpZHRoID0gb2JqLmFuY2hvIHx8IDIwMDtcbiAgICBjb25zdCBoZWlnaHQgPSBvYmouYWx0byB8fCA1MDtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7Lyog8J+foyBCb3TDs24gKGZvbmRvKSAqL31cbiAgICAgICAgPFJlY3RcbiAgICAgICAgICB7Li4uY29tbW9uUHJvcHN9XG4gICAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICAgIGNvcm5lclJhZGl1cz17OH1cbiAgICAgICAgICBmaWxsPXtvYmouY29sb3IgfHwgXCIjNzczZGJlXCJ9XG4gICAgICAgICAgc3Ryb2tlPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IFwiIzc3M2RiZVwiIDogdW5kZWZpbmVkfVxuICAgICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDIgOiAwfVxuICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICBvblNlbGVjdD8uKG9iai5pZCwgb2JqLCBlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uRHJhZ01vdmU9eyhlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBudWV2YVBvcyA9IGUudGFyZ2V0LnBvc2l0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0b05vZGUgPSB3aW5kb3cuX2VsZW1lbnRSZWZzPy5bYCR7b2JqLmlkfS10ZXh0YF07XG4gICAgICAgICAgICBpZiAodGV4dG9Ob2RlKSB7XG4gICAgICAgICAgICAgIHRleHRvTm9kZS54KG51ZXZhUG9zLngpO1xuICAgICAgICAgICAgICB0ZXh0b05vZGUueShudWV2YVBvcy55KTtcbiAgICAgICAgICAgICAgdGV4dG9Ob2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG5cbiAgICAgICAgey8qIPCflKQgVGV4dG8gZW5jaW1hIGRlbCBib3TDs24gKi99XG4gICAgICAgIDxUZXh0XG4gICAgICAgICAgcmVmPXsobm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlZ2lzdGVyUmVmKSB7XG4gICAgICAgICAgICAgIHJlZ2lzdGVyUmVmKGAke29iai5pZH0tdGV4dGAsIG5vZGUgfHwgbnVsbCk7IC8vIHNpIHF1ZXLDqXMgbWFuaXB1bGFyIGVsIHRleHRvIGFwYXJ0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgeD17b2JqLnh9XG4gICAgICAgICAgeT17b2JqLnl9XG4gICAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICAgIHRleHQ9e29iai50ZXh0byB8fCBcIkNvbmZpcm1hciBhc2lzdGVuY2lhXCJ9XG4gICAgICAgICAgZm9udFNpemU9e29iai5mb250U2l6ZSB8fCAxOH1cbiAgICAgICAgICBmb250RmFtaWx5PXtmb250RmFtaWx5fVxuICAgICAgICAgIGZvbnRTdHlsZT17b2JqLmZvbnRTdHlsZSB8fCBcIm5vcm1hbFwifVxuICAgICAgICAgIGZvbnRXZWlnaHQ9e29iai5mb250V2VpZ2h0IHx8IFwiYm9sZFwifVxuICAgICAgICAgIGZpbGw9e29iai5jb2xvclRleHRvIHx8IFwiI2ZmZmZmZlwifVxuICAgICAgICAgIGFsaWduPXtvYmouYWxpZ24gfHwgXCJjZW50ZXJcIn1cbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduPVwibWlkZGxlXCJcbiAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxuICAgICAgICAgIG9wYWNpdHk9e2lzSW5FZGl0TW9kZSA/IDAgOiAxfVxuICAgICAgICAvPlxuXG4gICAgICA8Lz5cbiAgICApO1xuICB9XG5cblxuXG4gIGlmIChvYmoudGlwbyA9PT0gXCJpbWFnZW5cIiAmJiBpbWcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEtvbnZhSW1hZ2VcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxuICAgICAgICByZWY9e2hhbmRsZVJlZn1cbiAgICAgICAgaWQ9e29iai5pZH1cbiAgICAgICAgaW1hZ2U9e2ltZ31cbiAgICAgICAgY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIlxuICAgICAgICB3aWR0aD17b2JqLndpZHRoIHx8IGltZy53aWR0aH1cbiAgICAgICAgaGVpZ2h0PXtvYmouaGVpZ2h0IHx8IGltZy5oZWlnaHR9XG4gICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxuICAgICAgICBzdHJva2U9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gXCIjNzczZGJlXCIgOiB1bmRlZmluZWR9XG4gICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDEgOiAwfVxuICAgICAgLz5cbiAgICApO1xuICB9XG5cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tIElDT05PIFNWRyAodGlwbzpcImljb25vXCIsIGZvcm1hdG86XCJzdmdcIikg4oCUIENPTiBISVRCT1ggRlVOQ0lPTkFMIC0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgaWYgKG9iai50aXBvID09PSBcImljb25vXCIgJiYgb2JqLmZvcm1hdG8gPT09IFwic3ZnXCIpIHtcbiAgICBjb25zdCBjb2xvciA9IG9iai5jb2xvciB8fCBcIiMwMDAwMDBcIjtcbiAgICBjb25zdCBwYXRocyA9IEFycmF5LmlzQXJyYXkob2JqLnBhdGhzKSA/IG9iai5wYXRocyA6IFtdO1xuICAgIGNvbnN0IFcgPSBOdW1iZXIob2JqLndpZHRoKSB8fCAxMjg7XG4gICAgY29uc3QgSCA9IE51bWJlcihvYmouaGVpZ2h0KSB8fCAxMjg7XG4gICAgY29uc3QgdmIgPSBwYXJzZVZpZXdCb3gob2JqLnZpZXdCb3gpIHx8IHsgbWluWDogMCwgbWluWTogMCwgdmJXaWR0aDogMTAwLCB2YkhlaWdodDogMTAwIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEdyb3VwXG4gICAgICAgIHsuLi5jb21tb25Qcm9wc31cbiAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XG4gICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxuICAgICAgICB3aWR0aD17V31cbiAgICAgICAgaGVpZ2h0PXtIfVxuICAgICAgPlxuICAgICAgICB7Lyog8J+UpSBISVRCT1ggSU5WSVNJQkxFIC0gU09MTyBwYXJhIGV2ZW50b3MgZGUgZHJhZy9jbGljayAqL31cbiAgICAgICAgPFJlY3RcbiAgICAgICAgICB4PXswfVxuICAgICAgICAgIHk9ezB9XG4gICAgICAgICAgd2lkdGg9e1d9XG4gICAgICAgICAgaGVpZ2h0PXtIfVxuICAgICAgICAgIGZpbGw9XCJyZ2JhKDAsMCwwLDAuMDAxKVwiICAvLyBDYXNpIHRyYW5zcGFyZW50ZSBwZXJvIGNsaWNrZWFibGVcbiAgICAgICAgICBzdHJva2U9XCJ0cmFuc3BhcmVudFwiICAgICAgLy8gU2luIGJvcmRlXG4gICAgICAgICAgbGlzdGVuaW5nPXt0cnVlfSAgICAgICAgICAvLyBERUJFIHJlY2liaXIgZXZlbnRvc1xuICAgICAgICAgIGRyYWdnYWJsZT17ZmFsc2V9XG4gICAgICAgIC8+XG5cbiAgICAgICAgey8qIENvbnRlbmlkbyBTVkcgdmlzdWFsIC0gTk8gbWFuZWphIGV2ZW50b3MgKi99XG4gICAgICAgIHtwYXRocy5tYXAoKHAsIGkpID0+IChcbiAgICAgICAgICA8UGF0aFxuICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgZGF0YT17cC5kfVxuICAgICAgICAgICAgZmlsbD17Y29sb3J9XG4gICAgICAgICAgICBzY2FsZVg9e1cgLyB2Yi52YldpZHRofVxuICAgICAgICAgICAgc2NhbGVZPXtIIC8gdmIudmJIZWlnaHR9XG4gICAgICAgICAgICB4PXstdmIubWluWCAqIChXIC8gdmIudmJXaWR0aCl9XG4gICAgICAgICAgICB5PXstdmIubWluWSAqIChIIC8gdmIudmJIZWlnaHQpfVxuICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX0gICAgICAgIC8vIE5PIG1hbmVqYSBldmVudG9zXG4gICAgICAgICAgICBwZXJmZWN0RHJhd0VuYWJsZWQ9e2ZhbHNlfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuXG4gICAgICAgIHsvKiBNYXJjbyBkZSBzZWxlY2Npw7NuIHZpc3VhbCAqL31cbiAgICAgICAgeyhpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbykgJiYgKFxuICAgICAgICAgIDxSZWN0XG4gICAgICAgICAgICB4PXswfVxuICAgICAgICAgICAgeT17MH1cbiAgICAgICAgICAgIHdpZHRoPXtXfVxuICAgICAgICAgICAgaGVpZ2h0PXtIfVxuICAgICAgICAgICAgc3Ryb2tlPVwiIzc3M2RiZVwiXG4gICAgICAgICAgICBzdHJva2VXaWR0aD17MX1cbiAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXG4gICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfSAgICAgICAgLy8gU29sbyB2aXN1YWxcbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9Hcm91cD5cbiAgICApO1xuICB9XG5cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tIElDT05PIFJBU1RFUiAoUE5HL0pQRy9XRUJQKSDigJMgc2luIHJlY29sb3IgLS0tLS0tLS0tLS0tLS0tLSAqL1xuICBpZiAob2JqLnRpcG8gPT09IFwiaWNvbm9cIiAmJiAob2JqLmZvcm1hdG8gPT09IFwicG5nXCIgfHwgb2JqLmZvcm1hdG8gPT09IFwianBnXCIgfHwgb2JqLmZvcm1hdG8gPT09IFwid2VicFwiKSkge1xuICAgIGNvbnN0IFtpbWddID0gdXNlSW1hZ2Uob2JqLnVybCwgXCJhbm9ueW1vdXNcIik7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEtvbnZhSW1hZ2VcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxuICAgICAgICByZWY9e2hhbmRsZVJlZn1cbiAgICAgICAgaW1hZ2U9e2ltZ31cbiAgICAgICAgY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIlxuICAgICAgICB3aWR0aD17b2JqLndpZHRoIHx8IChpbWc/LndpZHRoID8/IDEyMCl9XG4gICAgICAgIGhlaWdodD17b2JqLmhlaWdodCB8fCAoaW1nPy5oZWlnaHQgPz8gMTIwKX1cbiAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxuXG4gICAgICAgIC8vIFVYIGN1cnNvciAoc2luIHJvbXBlciB0dSBob3ZlcilcbiAgICAgICAgb25Nb3VzZUVudGVyPXsoZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YWdlID0gZS5jdXJyZW50VGFyZ2V0LmdldFN0YWdlKCk7XG4gICAgICAgICAgaWYgKHN0YWdlKSBzdGFnZS5jb250YWluZXIoKS5zdHlsZS5jdXJzb3IgPSBcImdyYWJcIjtcbiAgICAgICAgICBoYW5kbGVNb3VzZUVudGVyPy4oZSk7XG4gICAgICAgIH19XG4gICAgICAgIG9uTW91c2VMZWF2ZT17KGUpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGFnZSA9IGUuY3VycmVudFRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgICAgIGlmIChzdGFnZSkgc3RhZ2UuY29udGFpbmVyKCkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgaGFuZGxlTW91c2VMZWF2ZT8uKGUpO1xuICAgICAgICB9fVxuXG4gICAgICAgIC8vIOKchSBDTEFWRTogTk8gcGlzYXIgZWwgb25DbGljay9vblRhcCBuaSBlbCBvbkRyYWdFbmQgXCJyZWFsXCIgZGVsIHNpc3RlbWFcbiAgICAgICAgLy8gU2kgcXVlcsOpcyBtYW50ZW5lciB1biBjb21wb3J0YW1pZW50byBleHRyYSBlbiBjbGljaywgaGFjZWxvIHNpbiBjYW1iaWFyIGxhIGZpcm1hOlxuICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgIC8vIGRlbGVnYSBhbCBjb21tb25Qcm9wcy5vbkNsaWNrIChzZWxlY2Npw7NuIGNvbnNpc3RlbnRlKVxuICAgICAgICAgIGNvbW1vblByb3BzLm9uQ2xpY2s/LihlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb25UYXA9eyhlKSA9PiB7XG4gICAgICAgICAgLy8gZW4gS29udmEsIHRhcCBzdWVsZSBtYXBlYXIgYSBjbGljazsgc2kgcXVlcsOpcywgZGVsZWdhbG8gaWd1YWxcbiAgICAgICAgICBjb21tb25Qcm9wcy5vbkNsaWNrPy4oZSk7XG4gICAgICAgIH19XG5cbiAgICAgICAgLy8g4pyFIENMQVZFOiBkZWxlZ2FyIGEgY29tbW9uUHJvcHMub25EcmFnRW5kIHBhcmEgcXVlOlxuICAgICAgICAvLyAtIHNlIGxpbXBpZW4gZ3XDrWFzIChvbkRyYWdFbmRQZXJzb25hbGl6YWRvKVxuICAgICAgICAvLyAtIHNlIGhhZ2EgZmluYWxpem9EcmFnICsgQUJT4oaSUkVMXG4gICAgICAgIG9uRHJhZ0VuZD17KGUpID0+IHtcbiAgICAgICAgICBjb21tb25Qcm9wcy5vbkRyYWdFbmQ/LihlKTtcblxuICAgICAgICAgIC8vIGxpbXBpZXphIGRlIGN1cnNvciAoZXh0cmEpXG4gICAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0U3RhZ2UoKTtcbiAgICAgICAgICBpZiAoc3RhZ2UpIHN0YWdlLmNvbnRhaW5lcigpLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xuICAgICAgICB9fVxuICAgICAgLz5cbiAgICApO1xuICB9XG5cblxuXG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLSBMRUdBQ1k6IElDT05PIFNWRyAodGlwbzogXCJpY29uby1zdmdcIiBjb24gb2JqLmQpIC0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgaWYgKG9iai50aXBvID09PSBcImljb25vLXN2Z1wiKSB7XG4gICAgY29uc3QgVyA9IE51bWJlcihvYmoud2lkdGgpIHx8IDEyODtcbiAgICBjb25zdCBIID0gTnVtYmVyKG9iai5oZWlnaHQpIHx8IDEyODtcblxuICAgIGNvbnN0IHZiID0gcGFyc2VWaWV3Qm94KG9iai52aWV3Qm94KSB8fCB7IG1pblg6IDAsIG1pblk6IDAsIHZiV2lkdGg6IDEwMCwgdmJIZWlnaHQ6IDEwMCB9O1xuICAgIGNvbnN0IHNjYWxlWCA9IHZiLnZiV2lkdGggPyBXIC8gdmIudmJXaWR0aCA6IDE7XG4gICAgY29uc3Qgc2NhbGVZID0gdmIudmJIZWlnaHQgPyBIIC8gdmIudmJIZWlnaHQgOiAxO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxHcm91cFxuICAgICAgICB7Li4uY29tbW9uUHJvcHN9XG4gICAgICAgIHJlZj17aGFuZGxlUmVmfVxuICAgICAgICBkcmFnZ2FibGU9e3RydWV9XG4gICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cbiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxuICAgICAgICBvbkNsaWNrPXsoZSkgPT4gY29tbW9uUHJvcHMub25DbGljaz8uKGUpfVxuICAgICAgICBvblRhcD17KGUpID0+IGNvbW1vblByb3BzLm9uVGFwPy4oZSl9XG4gICAgICAgIG9uRHJhZ0VuZD17KGUpID0+IHtcbiAgICAgICAgICBjb21tb25Qcm9wcy5vbkRyYWdFbmQ/LihlKTtcbiAgICAgICAgfX1cbiAgICAgICAgb25UcmFuc2Zvcm1FbmQ9eyhlKSA9PiB7XG4gICAgICAgICAgY29uc3Qgbm9kZSA9IGUudGFyZ2V0O1xuICAgICAgICAgIGNvbnN0IHNjYWxlWE5vZGUgPVxuICAgICAgICAgICAgdHlwZW9mIG5vZGUuc2NhbGVYID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWCgpIDogKG5vZGUuc2NhbGVYID8/IDEpO1xuICAgICAgICAgIGNvbnN0IHNjYWxlWU5vZGUgPVxuICAgICAgICAgICAgdHlwZW9mIG5vZGUuc2NhbGVZID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWSgpIDogKG5vZGUuc2NhbGVZID8/IDEpO1xuICAgICAgICAgIGNvbnN0IHBhdGNoID0ge1xuICAgICAgICAgICAgeDogbm9kZS54KCksXG4gICAgICAgICAgICB5OiBub2RlLnkoKSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiBub2RlLnJvdGF0aW9uKCkgfHwgMCxcbiAgICAgICAgICAgIHdpZHRoOiBNYXRoLm1heCgxLCBXICogTWF0aC5hYnMoc2NhbGVYTm9kZSB8fCAxKSksXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGgubWF4KDEsIEggKiBNYXRoLmFicyhzY2FsZVlOb2RlIHx8IDEpKSxcbiAgICAgICAgICAgIHNjYWxlWDogMSxcbiAgICAgICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgICAgIGlzRmluYWw6IHRydWUsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBvbkNoYW5nZT8uKG9iai5pZCwgcGF0Y2gpO1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8UmVjdFxuICAgICAgICAgIHg9ezB9XG4gICAgICAgICAgeT17MH1cbiAgICAgICAgICB3aWR0aD17V31cbiAgICAgICAgICBoZWlnaHQ9e0h9XG4gICAgICAgICAgZmlsbD1cInJnYmEoMCwwLDAsMC4wMDEpXCJcbiAgICAgICAgICBzdHJva2U9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gXCIjNzczZGJlXCIgOiB1bmRlZmluZWR9XG4gICAgICAgICAgc3Ryb2tlV2lkdGg9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gMSA6IDB9XG4gICAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxuICAgICAgICAvPlxuICAgICAgICA8R3JvdXAgeD17MH0geT17MH0gc2NhbGVYPXtzY2FsZVh9IHNjYWxlWT17c2NhbGVZfT5cbiAgICAgICAgICA8R3JvdXAgeD17LXZiLm1pblh9IHk9ey12Yi5taW5ZfT5cbiAgICAgICAgICAgIDxQYXRoXG4gICAgICAgICAgICAgIGRhdGE9e29iai5kfVxuICAgICAgICAgICAgICBmaWxsPXtvYmouY29sb3IgfHwgXCIjMDAwXCJ9XG4gICAgICAgICAgICAgIHN0cm9rZT17b2JqLmNvbG9yIHx8IFwiIzAwMFwifVxuICAgICAgICAgICAgICBzdHJva2VXaWR0aD17MX1cbiAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkXG4gICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgIDwvR3JvdXA+XG4gICAgICA8L0dyb3VwPlxuICAgICk7XG4gIH1cblxuXG5cblxuXG4gIGlmIChvYmoudGlwbyA9PT0gXCJmb3JtYVwiKSB7XG4gICAgY29uc3QgcHJvcHNGb3JtYSA9IHtcbiAgICAgIC4uLmNvbW1vblByb3BzLFxuICAgICAgZmlsbDogb2JqLmNvbG9yIHx8IFwiIzAwMDAwMFwiLFxuICAgIH07XG5cbiAgICBzd2l0Y2ggKG9iai5maWd1cmEpIHtcbiAgICAgIGNhc2UgXCJyZWN0XCI6XG4gICAgICAgIC8vIE9wY2lvbmFsOiBub3JtYWxpemFtb3Mgd2lkdGgvaGVpZ2h0IHBhcmEgdXNhciBlbiBhbWJvcyBub2Rvc1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGguYWJzKG9iai53aWR0aCB8fCAxMDApO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmFicyhvYmouaGVpZ2h0IHx8IDEwMCk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgey8qIPCfn6ogRm9ybWEgKi99XG4gICAgICAgICAgICA8UmVjdFxuICAgICAgICAgICAgICB7Li4ucHJvcHNGb3JtYX1cbiAgICAgICAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XG4gICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cbiAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxuICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICAgICAgICBjb3JuZXJSYWRpdXM9e29iai5jb3JuZXJSYWRpdXMgfHwgMH1cbiAgICAgICAgICAgICAgc3Ryb2tlPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IFwiIzc3M2RiZVwiIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICBzdHJva2VXaWR0aD17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyAxIDogMH1cbiAgICAgICAgICAgICAgLy8g8J+Wse+4jyBEb2JsZSBjbGljayBwYXJhIGVudHJhciBlbiBlZGljacOzbiBpbmxpbmVcbiAgICAgICAgICAgICAgb25EYmxDbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKG9uU3RhcnRUZXh0RWRpdCkge1xuICAgICAgICAgICAgICAgICAgb25TdGFydFRleHRFZGl0KG9iai5pZCwgb2JqLnRleHRvIHx8IFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgb25EYmxUYXA9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChvblN0YXJ0VGV4dEVkaXQpIHtcbiAgICAgICAgICAgICAgICAgIG9uU3RhcnRUZXh0RWRpdChvYmouaWQsIG9iai50ZXh0byB8fCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8vIPCfmpogU2luY3Jvbml6YXIgZWwgdGV4dG8gbWllbnRyYXMgc2UgYXJyYXN0cmEgbGEgZm9ybWFcbiAgICAgICAgICAgICAgb25EcmFnTW92ZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBNYW50ZW5lciBjdWFscXVpZXIgbMOzZ2ljYSBkZSBkcmFnIG9yaWdpbmFsIHF1ZSB2ZW5nYSBkZSBjb21tb25Qcm9wc1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcHNGb3JtYS5vbkRyYWdNb3ZlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIHByb3BzRm9ybWEub25EcmFnTW92ZShlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IGUudGFyZ2V0LnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTm9kZSA9IHN0YWdlPy5maW5kT25lKGAjJHtvYmouaWR9LXRleHRgKTtcblxuICAgICAgICAgICAgICAgIGlmICh0ZXh0b05vZGUpIHtcbiAgICAgICAgICAgICAgICAgIHRleHRvTm9kZS54KHgpO1xuICAgICAgICAgICAgICAgICAgdGV4dG9Ob2RlLnkoeSk7XG4gICAgICAgICAgICAgICAgICB0ZXh0b05vZGUuZ2V0TGF5ZXIoKT8uYmF0Y2hEcmF3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBvbkRyYWdFbmQ9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gTWFudGVuZXIgbMOzZ2ljYSBvcmlnaW5hbCBkZSBkcmFnRW5kIChndWFyZGFyIHBvc2ljacOzbiwgZHJhZyBncnVwYWwsIGV0Yy4pXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wc0Zvcm1hLm9uRHJhZ0VuZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICBwcm9wc0Zvcm1hLm9uRHJhZ0VuZChlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IGUudGFyZ2V0LnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTm9kZSA9IHN0YWdlPy5maW5kT25lKGAjJHtvYmouaWR9LXRleHRgKTtcblxuICAgICAgICAgICAgICAgIGlmICh0ZXh0b05vZGUpIHtcbiAgICAgICAgICAgICAgICAgIHRleHRvTm9kZS54KHgpO1xuICAgICAgICAgICAgICAgICAgdGV4dG9Ob2RlLnkoeSk7XG4gICAgICAgICAgICAgICAgICB0ZXh0b05vZGUuZ2V0TGF5ZXIoKT8uYmF0Y2hEcmF3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgey8qIOKcj++4jyBUZXh0byBlbmNpbWEgZGUgbGEgZm9ybWEgKi99XG4gICAgICAgICAgICB7b2JqLnRleHRvICYmIChcbiAgICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgICBpZD17YCR7b2JqLmlkfS10ZXh0YH0gICAgICAgICAgLy8g8J+RiCBpZCBwYXJhIHBvZGVyIGVuY29udHJhcmxvIGRlc2RlIGVsIFJlY3RcbiAgICAgICAgICAgICAgICByZWY9eyhub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAocmVnaXN0ZXJSZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWYoYCR7b2JqLmlkfS10ZXh0YCwgbm9kZSB8fCBudWxsKTsgLy8gc2VndcOtcyB1c2FuZG8gdHUgc2lzdGVtYSBkZSByZWZzXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICB4PXtvYmoueH1cbiAgICAgICAgICAgICAgICB5PXtvYmoueX1cbiAgICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgICAgICAgdGV4dD17b2JqLnRleHRvfVxuICAgICAgICAgICAgICAgIGZvbnRTaXplPXtvYmouZm9udFNpemUgfHwgMjR9XG4gICAgICAgICAgICAgICAgZm9udEZhbWlseT17b2JqLmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCJ9XG4gICAgICAgICAgICAgICAgZm9udFdlaWdodD17b2JqLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn1cbiAgICAgICAgICAgICAgICBmb250U3R5bGU9e29iai5mb250U3R5bGUgfHwgXCJub3JtYWxcIn1cbiAgICAgICAgICAgICAgICBmaWxsPXtvYmouY29sb3JUZXh0byB8fCBcIiMwMDAwMDBcIn1cbiAgICAgICAgICAgICAgICBhbGlnbj17b2JqLmFsaWduIHx8IFwiY2VudGVyXCJ9XG4gICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbj1cIm1pZGRsZVwiXG4gICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX0gICAgICAgICAgICAgIC8vIPCfkYggZWwgdGV4dG8gbm8gcm9iYSBldmVudG9zLCBsb3MgcmVjaWJlIGVsIFJlY3RcbiAgICAgICAgICAgICAgICBvcGFjaXR5PXtpc0luRWRpdE1vZGUgPyAwIDogMX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC8+XG4gICAgICAgICk7XG5cblxuICAgICAgY2FzZSBcImNpcmNsZVwiOlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxDaXJjbGVcbiAgICAgICAgICAgIHsuLi5wcm9wc0Zvcm1hfVxuICAgICAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XG4gICAgICAgICAgICByYWRpdXM9e29iai5yYWRpdXMgfHwgNTB9XG4gICAgICAgICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XG4gICAgICAgICAgICBzdHJva2U9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gXCIjNzczZGJlXCIgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBzdHJva2VXaWR0aD17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyAxIDogMH1cbiAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICBjYXNlIFwidHJpYW5nbGVcIjpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8UmVndWxhclBvbHlnb25cbiAgICAgICAgICAgIHsuLi5wcm9wc0Zvcm1hfVxuICAgICAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XG4gICAgICAgICAgICBzaWRlcz17M31cbiAgICAgICAgICAgIHJhZGl1cz17b2JqLnJhZGl1cyB8fCA2MH1cbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cbiAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VMZWF2ZX1cbiAgICAgICAgICAgIHN0cm9rZT17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyBcIiM3NzNkYmVcIiA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDEgOiAwfVxuICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuXG4iXSwibmFtZXMiOlsiVGV4dCIsIkltYWdlIiwiS29udmFJbWFnZSIsIlJlY3QiLCJDaXJjbGUiLCJMaW5lIiwiUmVndWxhclBvbHlnb24iLCJQYXRoIiwiR3JvdXAiLCJ1c2VJbWFnZSIsInVzZVN0YXRlIiwidXNlUmVmIiwidXNlTWVtbyIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwiTElORV9DT05TVEFOVFMiLCJmb250TWFuYWdlciIsInByZXZpZXdEcmFnR3J1cGFsIiwic3RhcnREcmFnR3J1cGFsTGlkZXIiLCJlbmREcmFnR3J1cGFsIiwic3RhcnREcmFnSW5kaXZpZHVhbCIsInByZXZpZXdEcmFnSW5kaXZpZHVhbCIsImVuZERyYWdJbmRpdmlkdWFsIiwiZ2V0Q2VudGVyZWRUZXh0UG9zaXRpb24iLCJFbGVtZW50b0NhbnZhcyIsIm9iaiIsImlzU2VsZWN0ZWQiLCJpc0luRWRpdE1vZGUiLCJvblNlbGVjdCIsIm9uQ2hhbmdlIiwiZWRpdGluZ0lkIiwicmVnaXN0ZXJSZWYiLCJvbkhvdmVyIiwicHJlU2VsZWNjaW9uYWRvIiwib25EcmFnTW92ZVBlcnNvbmFsaXphZG8iLCJvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8iLCJvbkRyYWdFbmRQZXJzb25hbGl6YWRvIiwiZHJhZ1N0YXJ0UG9zIiwiaGFzRHJhZ2dlZCIsIm9uU3RhcnRUZXh0RWRpdCIsImVkaXRpbmdNb2RlIiwiaW5saW5lT3ZlcmxheU1vdW50ZWRJZCIsImlubGluZVZpc2liaWxpdHlNb2RlIiwiaW1nIiwic3JjIiwibWVhc3VyZWRUZXh0V2lkdGgiLCJzZXRNZWFzdXJlZFRleHRXaWR0aCIsInRleHROb2RlUmVmIiwiYmFzZVRleHRMYXlvdXRSZWYiLCJoYW5kbGVDaGFuZ2UiLCJpZCIsIm5ld0RhdGEiLCJmcm9tQXV0b0ZpeCIsImhhbmRsZVJlZiIsIm5vZGUiLCJoYW5kbGVDbGljayIsImUiLCJjYW5jZWxCdWJibGUiLCJjdXJyZW50IiwidGlwbyIsInRleHRvIiwiZmlndXJhIiwiY29tbW9uUHJvcHMiLCJ4IiwieSIsInJvdGF0aW9uIiwic2NhbGVYIiwic2NhbGVZIiwiZHJhZ2dhYmxlIiwibGlzdGVuaW5nIiwib25Nb3VzZURvd24iLCJjdXJyZW50VGFyZ2V0Iiwib25Nb3VzZVVwIiwib25DbGljayIsIm9uVGFwIiwib25EcmFnU3RhcnQiLCJ3aW5kb3ciLCJfZHJhZ0NvdW50IiwiX2xhc3RNb3VzZSIsIl9sYXN0RWxlbWVudCIsIl9pc0RyYWdnaW5nIiwiZnVlR3J1cGFsIiwib25EcmFnTW92ZSIsInN0YWdlIiwidGFyZ2V0IiwiZ2V0U3RhZ2UiLCJtb3VzZVBvcyIsImdldFBvaW50ZXJQb3NpdGlvbiIsImVsZW1lbnRQb3MiLCJfZ3J1cG9MaWRlciIsImVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJfZWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsImluY2x1ZGVzIiwib25EcmFnRW5kIiwiaGFuZGxlTW91c2VFbnRlciIsImhhbmRsZU1vdXNlTGVhdmUiLCJyZWNhbGNHcm91cEFsaWduIiwiX19ncm91cEFsaWduIiwiX19ncm91cElkIiwicmVmcyIsIl9lbGVtZW50UmVmcyIsImdldE9iaiIsIl9fZ2V0T2JqQnlJZCIsIm1heFciLCJ0aGlzVyIsIk9iamVjdCIsImVudHJpZXMiLCJvIiwidyIsImdldFRleHRXaWR0aCIsIk1hdGgiLCJjZWlsIiwiYmFzZVgiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIl9fZ3JvdXBPcmlnaW5YIiwidGFyZ2V0WCIsImFicyIsInIxIiwicjIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImZvbnRTdHlsZSIsImZvbnRXZWlnaHQiLCJpc0F1dG9XaWR0aCIsIndpZHRoIiwiX19hdXRvV2lkdGgiLCJyYWYxIiwicmFmMiIsIndSZWFsIiwibGluZUhlaWdodCIsImdyb3VwUmVmIiwiY29sb3IiLCJjYWNoZSIsImdldExheWVyIiwiYmF0Y2hEcmF3IiwicGFyc2VWaWV3Qm94IiwidmIiLCJwYXJ0cyIsInRyaW0iLCJzcGxpdCIsIm1hcCIsImxlbmd0aCIsInNvbWUiLCJuIiwiaXNOYU4iLCJtaW5YIiwibWluWSIsInZiV2lkdGgiLCJ2YkhlaWdodCIsImxpbmVQb2ludHMiLCJwb2ludHMiLCJwb2ludHNGaXhlZCIsIkFycmF5IiwiaXNBcnJheSIsIkRFRkFVTFRfTEVOR1RIIiwicHVudG9zVmFsaWRhZG9zIiwiaSIsInB1bnRvIiwicGFyc2VGbG9hdCIsInB1c2giLCJKU09OIiwic3RyaW5naWZ5Iiwic2xpY2UiLCJzZXRUaW1lb3V0IiwicmVmIiwib25Nb3VzZUVudGVyIiwib25Nb3VzZUxlYXZlIiwic3Ryb2tlIiwiREVGQVVMVF9DT0xPUiIsInN0cm9rZVdpZHRoIiwiU1RST0tFX1dJRFRIIiwidGVuc2lvbiIsImxpbmVDYXAiLCJsaW5lSm9pbiIsInBlcmZlY3REcmF3RW5hYmxlZCIsImhpdFN0cm9rZVdpZHRoIiwibWF4IiwiSElUX1NUUk9LRV9XSURUSCIsInNoYWRvd0ZvclN0cm9rZUVuYWJsZWQiLCJvcGFjaXR5Iiwic2hhZG93Q29sb3IiLCJzaGFkb3dCbHVyIiwic2hhZG93T2Zmc2V0IiwidmlzaWJpbGl0eU1vZGUiLCJpc0VkaXRpbmdCeVdpbmRvdyIsIl9jdXJyZW50RWRpdGluZ0lkIiwiaXNFZGl0aW5nQnlSZWFjdGl2ZSIsIm92ZXJsYXlEb21QcmVzZW50TG9vc2UiLCJkb2N1bWVudCIsInNhZmVJZCIsIlN0cmluZyIsInJlcGxhY2UiLCJCb29sZWFuIiwicXVlcnlTZWxlY3RvciIsIm92ZXJsYXlEb21QcmVzZW50IiwiaXNFZGl0aW5nQnlPdmVybGF5IiwiaXNFZGl0aW5nIiwiaXNGb250QXZhaWxhYmxlIiwiYWxpZ24iLCJ0b0xvd2VyQ2FzZSIsImZpbGxDb2xvciIsImNvbG9yVGV4dG8iLCJmaWxsIiwiYmFzZUxpbmVIZWlnaHQiLCJyYXdUZXh0Iiwic2FmZVRleHQiLCJ2YWxpZFgiLCJ2YWxpZFkiLCJ2YWxpZEZvbnRTaXplIiwiY3R4IiwiY3JlYXRlRWxlbWVudCIsImdldENvbnRleHQiLCJzdHlsZSIsIndlaWdodCIsImZvbnRGb3JDYW52YXMiLCJ0ZXN0IiwiZm9udCIsImxpbmVzIiwibWF4TGluZVdpZHRoIiwibGluZSIsIm1lYXN1cmVUZXh0IiwibnVtTGluZXMiLCJ0ZXh0V2lkdGgiLCJ0ZXh0SGVpZ2h0IiwicG9zaXRpb25SYXciLCJyZWN0WSIsInJlY3RIZWlnaHQiLCJyZWN0Q2VudGVyIiwiYmFzZWxpbmVUb0NlbnRlciIsImJhc2VsaW5lIiwiYXNjZW50IiwiZGVzY2VudCIsImJhc2UiLCJyZWN0Q2VudGVyRml4ZWQiLCJiYXNlbGluZVkiLCJ0ZXh0VG9wRml4ZWQiLCJwb3NpdGlvbiIsInRleHRUb3AiLCJjb25zb2xlIiwid2FybiIsIkFOQ0hPX0NBTlZBUyIsImF2YWlsYWJsZVdpZHRoIiwicmVhbFRleHRXaWR0aCIsInNob3VsZFdyYXBUb0NhbnZhc0VkZ2UiLCJ3cmFwVG9Vc2UiLCJ3aWR0aFRvVXNlIiwidW5kZWZpbmVkIiwiaW5saW5lQ2FyZXRPbmx5TW9kZSIsImFwcGxpZWRPcGFjaXR5IiwidGV4dCIsIndyYXAiLCJ2ZXJ0aWNhbEFsaWduIiwiYW5jaG8iLCJoZWlnaHQiLCJhbHRvIiwiY29ybmVyUmFkaXVzIiwibnVldmFQb3MiLCJ0ZXh0b05vZGUiLCJpbWFnZSIsImNyb3NzT3JpZ2luIiwiZm9ybWF0byIsInBhdGhzIiwiVyIsIkgiLCJ2aWV3Qm94IiwicCIsImRhdGEiLCJkIiwidXJsIiwiY29udGFpbmVyIiwiY3Vyc29yIiwib25UcmFuc2Zvcm1FbmQiLCJzY2FsZVhOb2RlIiwic2NhbGVZTm9kZSIsInBhdGNoIiwiaXNGaW5hbCIsInByb3BzRm9ybWEiLCJvbkRibENsaWNrIiwib25EYmxUYXAiLCJmaW5kT25lIiwicmFkaXVzIiwic2lkZXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/ElementoCanvas.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/FontSelector.jsx":
/*!*****************************************!*\
  !*** ./src/components/FontSelector.jsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_fontManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/fontManager */ \"(pages-dir-node)/./src/utils/fontManager.js\");\n/* harmony import */ var _config_fonts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../config/fonts */ \"(pages-dir-node)/./src/config/fonts.js\");\n// components/FontSelector.jsx\n\n\n\n\n\nconst FontSelector = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(({ currentFont, onFontChange, isOpen, onClose })=>{\n    const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [selectedCategory, setSelectedCategory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('all');\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const filteredFonts = _config_fonts__WEBPACK_IMPORTED_MODULE_3__.ALL_FONTS.filter((font)=>{\n        const matchesSearch = font.nombre.toLowerCase().includes(searchTerm.toLowerCase());\n        const matchesCategory = selectedCategory === 'all' || font.categoria === selectedCategory;\n        return matchesSearch && matchesCategory;\n    });\n    // 📦 Cerrar si el usuario hace click fuera del panel\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontSelector.useEffect\": ()=>{\n            if (!isOpen) return;\n            const handleClickOutside = {\n                \"FontSelector.useEffect.handleClickOutside\": (e)=>{\n                    if (containerRef.current && !containerRef.current.contains(e.target)) {\n                        onClose();\n                    }\n                }\n            }[\"FontSelector.useEffect.handleClickOutside\"];\n            document.addEventListener('mousedown', handleClickOutside);\n            return ({\n                \"FontSelector.useEffect\": ()=>document.removeEventListener('mousedown', handleClickOutside)\n            })[\"FontSelector.useEffect\"];\n        }\n    }[\"FontSelector.useEffect\"], [\n        isOpen,\n        onClose\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        className: `absolute top-full left-0 mt-2 bg-white border border-gray-200 rounded-2xl shadow-xl p-4 w-80 max-h-[500px] overflow-hidden popup-fuente z-50 ${isOpen ? \"block\" : \"hidden\"}`,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"text\",\n                placeholder: \"Buscar fuente...\",\n                value: searchTerm,\n                onChange: (e)=>setSearchTerm(e.target.value),\n                className: \"w-full px-3 py-2 border rounded-lg text-sm mb-3\",\n                autoFocus: true\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 54,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"overflow-y-auto max-h-[350px] -mx-2 px-2\",\n                children: filteredFonts.length > 0 ? filteredFonts.map((fuente, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FontItem, {\n                        debugIndex: idx,\n                        font: fuente,\n                        isActive: currentFont === fuente.valor,\n                        onSelect: async ()=>{\n                            await onFontChange(fuente.valor);\n                        }\n                    }, fuente.valor, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 68,\n                        columnNumber: 13\n                    }, undefined)) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"text-gray-500 text-center py-4\",\n                    children: \"No se encontraron fuentes\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                    lineNumber: 81,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 65,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n        lineNumber: 47,\n        columnNumber: 5\n    }, undefined);\n});\nconst FontItem = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(({ font, isActive, onSelect, debugIndex })=>{\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const itemRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // 1) Al montar, ver si ya está disponible en el documento\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontItem.useEffect\": ()=>{\n            const available = _utils_fontManager__WEBPACK_IMPORTED_MODULE_2__.fontManager.isFontAvailable(font.valor);\n            setIsLoaded(available);\n        }\n    }[\"FontItem.useEffect\"], [\n        font.valor\n    ]);\n    // 2) Cargar la fuente automáticamente cuando entra en pantalla\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontItem.useEffect\": ()=>{\n            if (!itemRef.current) return;\n            const observer = new IntersectionObserver({\n                \"FontItem.useEffect\": async (entries)=>{\n                    const entry = entries[0];\n                    if (entry.isIntersecting && !isLoaded && !isLoading) {\n                        setIsLoading(true);\n                        try {\n                            await _utils_fontManager__WEBPACK_IMPORTED_MODULE_2__.fontManager.loadFonts([\n                                font.valor\n                            ]);\n                            setIsLoaded(true);\n                        } catch (error) {} finally{\n                            setIsLoading(false);\n                        }\n                    }\n                }\n            }[\"FontItem.useEffect\"], {\n                threshold: 0.1\n            });\n            observer.observe(itemRef.current);\n            return ({\n                \"FontItem.useEffect\": ()=>observer.disconnect()\n            })[\"FontItem.useEffect\"];\n        }\n    }[\"FontItem.useEffect\"], [\n        isLoaded,\n        isLoading,\n        font.valor,\n        debugIndex\n    ]);\n    // 3) Click: si no está cargada, log + carga, si está, log directo\n    const handleClick = async ()=>{\n        if (!isLoaded && !isLoading) {\n            setIsLoading(true);\n            try {\n                await _utils_fontManager__WEBPACK_IMPORTED_MODULE_2__.fontManager.loadFonts([\n                    font.valor\n                ]);\n                setIsLoaded(true);\n            } catch (error) {} finally{\n                setIsLoading(false);\n            }\n        }\n        onSelect();\n    };\n    // 4) UI: agrego indicadores mínimos para ver estado\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: itemRef,\n        onClick: handleClick,\n        className: `flex items-center justify-between px-3 py-2 rounded-md cursor-pointer transition-colors duration-150 ${isActive ? \"bg-purple-50\" : \"hover:bg-gray-50\"}`,\n        title: `${font.valor} — loaded:${isLoaded} loading:${isLoading}`,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col flex-1 min-w-0\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-sm text-gray-800 truncate\",\n                        style: {\n                            fontFamily: isLoaded ? font.valor : \"sans-serif\"\n                        },\n                        children: font.nombre\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 155,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-[11px] text-gray-500\",\n                        children: font.categoria\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 161,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 154,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2 ml-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-lg text-gray-400\",\n                        style: {\n                            fontFamily: isLoaded ? font.valor : \"sans-serif\",\n                            lineHeight: 1\n                        },\n                        children: \"AaBbCc\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 165,\n                        columnNumber: 9\n                    }, undefined),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 176,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 164,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n        lineNumber: 146,\n        columnNumber: 5\n    }, undefined);\n});\nFontItem.displayName = 'FontItem';\nFontSelector.displayName = 'FontSelector';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FontSelector);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0ZvbnRTZWxlY3Rvci5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLDhCQUE4Qjs7QUFDNEI7QUFDckI7QUFDYztBQUNQO0FBTzVDLE1BQU1PLDZCQUFlSiwyQ0FBSUEsQ0FBQyxDQUFDLEVBQ3pCSyxXQUFXLEVBQ1hDLFlBQVksRUFDWkMsTUFBTSxFQUNOQyxPQUFPLEVBQ1I7SUFDQyxNQUFNLENBQUNDLFlBQVlDLGNBQWMsR0FBR2IsK0NBQVFBLENBQUM7SUFDN0MsTUFBTSxDQUFDYyxrQkFBa0JDLG9CQUFvQixHQUFHZiwrQ0FBUUEsQ0FBQztJQUN6RCxNQUFNZ0IsZUFBZWQsNkNBQU1BLENBQUM7SUFFNUIsTUFBTWUsZ0JBQWdCWCxvREFBU0EsQ0FBQ1ksTUFBTSxDQUFDQyxDQUFBQTtRQUNyQyxNQUFNQyxnQkFBZ0JELEtBQUtFLE1BQU0sQ0FBQ0MsV0FBVyxHQUFHQyxRQUFRLENBQUNYLFdBQVdVLFdBQVc7UUFDL0UsTUFBTUUsa0JBQWtCVixxQkFBcUIsU0FBU0ssS0FBS00sU0FBUyxLQUFLWDtRQUN6RSxPQUFPTSxpQkFBaUJJO0lBQzFCO0lBS0EscURBQXFEO0lBQ3JEdkIsZ0RBQVNBO2tDQUFDO1lBQ1IsSUFBSSxDQUFDUyxRQUFRO1lBRWIsTUFBTWdCOzZEQUFxQixDQUFDQztvQkFDMUIsSUFBSVgsYUFBYVksT0FBTyxJQUFJLENBQUNaLGFBQWFZLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDRixFQUFFRyxNQUFNLEdBQUc7d0JBQ3BFbkI7b0JBQ0Y7Z0JBQ0Y7O1lBRUFvQixTQUFTQyxnQkFBZ0IsQ0FBQyxhQUFhTjtZQUN2QzswQ0FBTyxJQUFNSyxTQUFTRSxtQkFBbUIsQ0FBQyxhQUFhUDs7UUFDekQ7aUNBQUc7UUFBQ2hCO1FBQVFDO0tBQVE7SUFHcEIscUJBQ0UsOERBQUN1QjtRQUNDQyxLQUFLbkI7UUFDTG9CLFdBQVcsQ0FBQyw2SUFBNkksRUFBRTFCLFNBQVMsVUFBVSxVQUMx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QixLQUFLRSxNQUFNOzs7Ozs7a0NBRWQsOERBQUNvRDt3QkFBS3JDLFdBQVU7a0NBQTZCakIsS0FBS00sU0FBUzs7Ozs7Ozs7Ozs7OzBCQUc3RCw4REFBQ1M7Z0JBQUlFLFdBQVU7O2tDQUNiLDhEQUFDcUM7d0JBQ0NyQyxXQUFVO3dCQUNWc0MsT0FBTzs0QkFDTEMsWUFBWXRCLFdBQVdsQyxLQUFLK0IsS0FBSyxHQUFHOzRCQUNwQzBCLFlBQVk7d0JBQ2Q7a0NBQ0Q7Ozs7OztvQkFJQXJCLDJCQUNDLDhEQUFDckI7d0JBQUlFLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVF6QjtBQUlBVyxTQUFTOEIsV0FBVyxHQUFHO0FBQ3ZCdEUsYUFBYXNFLFdBQVcsR0FBRztBQUUzQixpRUFBZXRFLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcRm9udFNlbGVjdG9yLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL0ZvbnRTZWxlY3Rvci5qc3hcclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCBtZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDaGVjayB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcbmltcG9ydCB7IGZvbnRNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvZm9udE1hbmFnZXInO1xyXG5pbXBvcnQgeyBBTExfRk9OVFMgfSBmcm9tICcuLi9jb25maWcvZm9udHMnO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5jb25zdCBGb250U2VsZWN0b3IgPSBtZW1vKCh7XHJcbiAgY3VycmVudEZvbnQsXHJcbiAgb25Gb250Q2hhbmdlLFxyXG4gIGlzT3BlbixcclxuICBvbkNsb3NlXHJcbn0pID0+IHtcclxuICBjb25zdCBbc2VhcmNoVGVybSwgc2V0U2VhcmNoVGVybV0gPSB1c2VTdGF0ZSgnJyk7XHJcbiAgY29uc3QgW3NlbGVjdGVkQ2F0ZWdvcnksIHNldFNlbGVjdGVkQ2F0ZWdvcnldID0gdXNlU3RhdGUoJ2FsbCcpO1xyXG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgY29uc3QgZmlsdGVyZWRGb250cyA9IEFMTF9GT05UUy5maWx0ZXIoZm9udCA9PiB7XHJcbiAgICBjb25zdCBtYXRjaGVzU2VhcmNoID0gZm9udC5ub21icmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgY29uc3QgbWF0Y2hlc0NhdGVnb3J5ID0gc2VsZWN0ZWRDYXRlZ29yeSA9PT0gJ2FsbCcgfHwgZm9udC5jYXRlZ29yaWEgPT09IHNlbGVjdGVkQ2F0ZWdvcnk7XHJcbiAgICByZXR1cm4gbWF0Y2hlc1NlYXJjaCAmJiBtYXRjaGVzQ2F0ZWdvcnk7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gIC8vIPCfk6YgQ2VycmFyIHNpIGVsIHVzdWFyaW8gaGFjZSBjbGljayBmdWVyYSBkZWwgcGFuZWxcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFpc09wZW4pIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSAoZSkgPT4ge1xyXG4gICAgICBpZiAoY29udGFpbmVyUmVmLmN1cnJlbnQgJiYgIWNvbnRhaW5lclJlZi5jdXJyZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICAgIG9uQ2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpO1xyXG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XHJcbiAgfSwgW2lzT3Blbiwgb25DbG9zZV0pO1xyXG5cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXZcclxuICAgICAgcmVmPXtjb250YWluZXJSZWZ9XHJcbiAgICAgIGNsYXNzTmFtZT17YGFic29sdXRlIHRvcC1mdWxsIGxlZnQtMCBtdC0yIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0yMDAgcm91bmRlZC0yeGwgc2hhZG93LXhsIHAtNCB3LTgwIG1heC1oLVs1MDBweF0gb3ZlcmZsb3ctaGlkZGVuIHBvcHVwLWZ1ZW50ZSB6LTUwICR7aXNPcGVuID8gXCJibG9ja1wiIDogXCJoaWRkZW5cIlxyXG4gICAgICAgIH1gfVxyXG4gICAgPlxyXG5cclxuICAgICAgey8qIELDunNxdWVkYSAqL31cclxuICAgICAgPGlucHV0XHJcbiAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiQnVzY2FyIGZ1ZW50ZS4uLlwiXHJcbiAgICAgICAgdmFsdWU9e3NlYXJjaFRlcm19XHJcbiAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZWFyY2hUZXJtKGUudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciByb3VuZGVkLWxnIHRleHQtc20gbWItM1wiXHJcbiAgICAgICAgYXV0b0ZvY3VzXHJcbiAgICAgIC8+XHJcblxyXG5cclxuICAgICAgey8qIExpc3RhIGRlIGZ1ZW50ZXMgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3ZlcmZsb3cteS1hdXRvIG1heC1oLVszNTBweF0gLW14LTIgcHgtMlwiPlxyXG4gICAgICAgIHtmaWx0ZXJlZEZvbnRzLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICBmaWx0ZXJlZEZvbnRzLm1hcCgoZnVlbnRlLCBpZHgpID0+IChcclxuICAgICAgICAgICAgPEZvbnRJdGVtXHJcbiAgICAgICAgICAgICAga2V5PXtmdWVudGUudmFsb3J9XHJcbiAgICAgICAgICAgICAgZGVidWdJbmRleD17aWR4fVxyXG4gICAgICAgICAgICAgIGZvbnQ9e2Z1ZW50ZX1cclxuICAgICAgICAgICAgICBpc0FjdGl2ZT17Y3VycmVudEZvbnQgPT09IGZ1ZW50ZS52YWxvcn1cclxuICAgICAgICAgICAgICBvblNlbGVjdD17YXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgb25Gb250Q2hhbmdlKGZ1ZW50ZS52YWxvcik7XHJcbiAgICAgICAgICAgICAgfX1cclxuXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICApKVxyXG5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCB0ZXh0LWNlbnRlciBweS00XCI+XHJcbiAgICAgICAgICAgIE5vIHNlIGVuY29udHJhcm9uIGZ1ZW50ZXNcclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5jb25zdCBGb250SXRlbSA9IG1lbW8oKHsgZm9udCwgaXNBY3RpdmUsIG9uU2VsZWN0LCBkZWJ1Z0luZGV4IH0pID0+IHtcclxuICBjb25zdCBbaXNMb2FkZWQsIHNldElzTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IGl0ZW1SZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIC8vIDEpIEFsIG1vbnRhciwgdmVyIHNpIHlhIGVzdMOhIGRpc3BvbmlibGUgZW4gZWwgZG9jdW1lbnRvXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGF2YWlsYWJsZSA9IGZvbnRNYW5hZ2VyLmlzRm9udEF2YWlsYWJsZShmb250LnZhbG9yKTtcclxuICAgIHNldElzTG9hZGVkKGF2YWlsYWJsZSk7XHJcbiAgfSwgW2ZvbnQudmFsb3JdKTtcclxuXHJcbiAgLy8gMikgQ2FyZ2FyIGxhIGZ1ZW50ZSBhdXRvbcOhdGljYW1lbnRlIGN1YW5kbyBlbnRyYSBlbiBwYW50YWxsYVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWl0ZW1SZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGFzeW5jIChlbnRyaWVzKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1swXTtcclxuXHJcbiAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZyAmJiAhaXNMb2FkZWQgJiYgIWlzTG9hZGluZykge1xyXG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgZm9udE1hbmFnZXIubG9hZEZvbnRzKFtmb250LnZhbG9yXSk7XHJcbiAgICAgICAgICBzZXRJc0xvYWRlZCh0cnVlKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgeyB0aHJlc2hvbGQ6IDAuMSB9KTtcclxuXHJcbiAgICBvYnNlcnZlci5vYnNlcnZlKGl0ZW1SZWYuY3VycmVudCk7XHJcbiAgICByZXR1cm4gKCkgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG4gIH0sIFtpc0xvYWRlZCwgaXNMb2FkaW5nLCBmb250LnZhbG9yLCBkZWJ1Z0luZGV4XSk7XHJcblxyXG5cclxuICAvLyAzKSBDbGljazogc2kgbm8gZXN0w6EgY2FyZ2FkYSwgbG9nICsgY2FyZ2EsIHNpIGVzdMOhLCBsb2cgZGlyZWN0b1xyXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cclxuICAgIGlmICghaXNMb2FkZWQgJiYgIWlzTG9hZGluZykge1xyXG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgZm9udE1hbmFnZXIubG9hZEZvbnRzKFtmb250LnZhbG9yXSk7XHJcbiAgICAgICAgc2V0SXNMb2FkZWQodHJ1ZSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uU2VsZWN0KCk7XHJcbiAgfTtcclxuXHJcbiAgLy8gNCkgVUk6IGFncmVnbyBpbmRpY2Fkb3JlcyBtw61uaW1vcyBwYXJhIHZlciBlc3RhZG9cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdlxyXG4gICAgICByZWY9e2l0ZW1SZWZ9XHJcbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrfVxyXG4gICAgICBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHgtMyBweS0yIHJvdW5kZWQtbWQgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwICR7aXNBY3RpdmUgPyBcImJnLXB1cnBsZS01MFwiIDogXCJob3ZlcjpiZy1ncmF5LTUwXCJcclxuICAgICAgICB9YH1cclxuICAgICAgdGl0bGU9e2Ake2ZvbnQudmFsb3J9IOKAlCBsb2FkZWQ6JHtpc0xvYWRlZH0gbG9hZGluZzoke2lzTG9hZGluZ31gfVxyXG4gICAgPlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGZsZXgtMSBtaW4tdy0wXCI+XHJcbiAgICAgICAgPHNwYW5cclxuICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTgwMCB0cnVuY2F0ZVwiXHJcbiAgICAgICAgICBzdHlsZT17eyBmb250RmFtaWx5OiBpc0xvYWRlZCA/IGZvbnQudmFsb3IgOiBcInNhbnMtc2VyaWZcIiB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHtmb250Lm5vbWJyZX1cclxuICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bMTFweF0gdGV4dC1ncmF5LTUwMFwiPntmb250LmNhdGVnb3JpYX08L3NwYW4+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtbC0yXCI+XHJcbiAgICAgICAgPHNwYW5cclxuICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtbGcgdGV4dC1ncmF5LTQwMFwiXHJcbiAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICBmb250RmFtaWx5OiBpc0xvYWRlZCA/IGZvbnQudmFsb3IgOiBcInNhbnMtc2VyaWZcIixcclxuICAgICAgICAgICAgbGluZUhlaWdodDogMSxcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgQWFCYkNjXHJcbiAgICAgICAgPC9zcGFuPlxyXG5cclxuICAgICAgICB7aXNMb2FkaW5nICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy00IGgtNCBib3JkZXItMiBib3JkZXItZ3JheS0zMDAgYm9yZGVyLXQtdHJhbnNwYXJlbnQgcm91bmRlZC1mdWxsIGFuaW1hdGUtc3BpblwiIC8+XHJcbiAgICAgICAgKX1cclxuXHJcblxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuRm9udEl0ZW0uZGlzcGxheU5hbWUgPSAnRm9udEl0ZW0nO1xyXG5Gb250U2VsZWN0b3IuZGlzcGxheU5hbWUgPSAnRm9udFNlbGVjdG9yJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvbnRTZWxlY3RvcjsiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJtZW1vIiwiQ2hlY2siLCJmb250TWFuYWdlciIsIkFMTF9GT05UUyIsIkZvbnRTZWxlY3RvciIsImN1cnJlbnRGb250Iiwib25Gb250Q2hhbmdlIiwiaXNPcGVuIiwib25DbG9zZSIsInNlYXJjaFRlcm0iLCJzZXRTZWFyY2hUZXJtIiwic2VsZWN0ZWRDYXRlZ29yeSIsInNldFNlbGVjdGVkQ2F0ZWdvcnkiLCJjb250YWluZXJSZWYiLCJmaWx0ZXJlZEZvbnRzIiwiZmlsdGVyIiwiZm9udCIsIm1hdGNoZXNTZWFyY2giLCJub21icmUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwibWF0Y2hlc0NhdGVnb3J5IiwiY2F0ZWdvcmlhIiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiZSIsImN1cnJlbnQiLCJjb250YWlucyIsInRhcmdldCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXYiLCJyZWYiLCJjbGFzc05hbWUiLCJpbnB1dCIsInR5cGUiLCJwbGFjZWhvbGRlciIsInZhbHVlIiwib25DaGFuZ2UiLCJhdXRvRm9jdXMiLCJsZW5ndGgiLCJtYXAiLCJmdWVudGUiLCJpZHgiLCJGb250SXRlbSIsImRlYnVnSW5kZXgiLCJpc0FjdGl2ZSIsInZhbG9yIiwib25TZWxlY3QiLCJwIiwiaXNMb2FkZWQiLCJzZXRJc0xvYWRlZCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsIml0ZW1SZWYiLCJhdmFpbGFibGUiLCJpc0ZvbnRBdmFpbGFibGUiLCJvYnNlcnZlciIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJsb2FkRm9udHMiLCJlcnJvciIsInRocmVzaG9sZCIsIm9ic2VydmUiLCJkaXNjb25uZWN0IiwiaGFuZGxlQ2xpY2siLCJvbkNsaWNrIiwidGl0bGUiLCJzcGFuIiwic3R5bGUiLCJmb250RmFtaWx5IiwibGluZUhlaWdodCIsImRpc3BsYXlOYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/FontSelector.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/HoverIndicator.jsx":
/*!*******************************************!*\
  !*** ./src/components/HoverIndicator.jsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ HoverIndicator)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction HoverIndicator({ hoveredElement, elementRefs, objetos = [] }) {\n    if (!hoveredElement || !elementRefs?.current?.[hoveredElement]) return null;\n    const node = elementRefs.current[hoveredElement];\n    if (!node?.getStage?.()) return null;\n    const hoveredObj = Array.isArray(objetos) ? objetos.find((o)=>o.id === hoveredElement) : null;\n    let box = null;\n    if (hoveredObj?.tipo === \"galeria\" && Number.isFinite(Number(hoveredObj.width)) && Number.isFinite(Number(hoveredObj.height))) {\n        const absPos = typeof node.getAbsolutePosition === \"function\" ? node.getAbsolutePosition() : {\n            x: typeof node.x === \"function\" ? node.x() : 0,\n            y: typeof node.y === \"function\" ? node.y() : 0\n        };\n        box = {\n            x: absPos.x,\n            y: absPos.y,\n            width: Number(hoveredObj.width),\n            height: Number(hoveredObj.height)\n        };\n    } else {\n        box = node.getClientRect();\n    }\n    if (!box || isNaN(box.x) || isNaN(box.y) || box.width <= 0 || box.height <= 0) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n        name: \"ui-hover-indicator\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n            x: box.x - 2,\n            y: box.y - 2,\n            width: box.width + 4,\n            height: box.height + 4,\n            fill: \"transparent\",\n            stroke: \"#9333EA\",\n            strokeWidth: 2,\n            listening: false\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\HoverIndicator.jsx\",\n            lineNumber: 43,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\HoverIndicator.jsx\",\n        lineNumber: 42,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0hvdmVySW5kaWNhdG9yLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFFM0IsU0FBU0UsZUFBZSxFQUFFQyxjQUFjLEVBQUVDLFdBQVcsRUFBRUMsVUFBVSxFQUFFLEVBQUU7SUFDbEYsSUFBSSxDQUFDRixrQkFBa0IsQ0FBQ0MsYUFBYUUsU0FBUyxDQUFDSCxlQUFlLEVBQUUsT0FBTztJQUV2RSxNQUFNSSxPQUFPSCxZQUFZRSxPQUFPLENBQUNILGVBQWU7SUFDaEQsSUFBSSxDQUFDSSxNQUFNQyxjQUFjLE9BQU87SUFFaEMsTUFBTUMsYUFBYUMsTUFBTUMsT0FBTyxDQUFDTixXQUM3QkEsUUFBUU8sSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS1gsa0JBQzdCO0lBRUosSUFBSVksTUFBTTtJQUNWLElBQ0VOLFlBQVlPLFNBQVMsYUFDckJDLE9BQU9DLFFBQVEsQ0FBQ0QsT0FBT1IsV0FBV1UsS0FBSyxNQUN2Q0YsT0FBT0MsUUFBUSxDQUFDRCxPQUFPUixXQUFXVyxNQUFNLElBQ3hDO1FBQ0EsTUFBTUMsU0FDSixPQUFPZCxLQUFLZSxtQkFBbUIsS0FBSyxhQUNoQ2YsS0FBS2UsbUJBQW1CLEtBQ3hCO1lBQ0VDLEdBQUcsT0FBT2hCLEtBQUtnQixDQUFDLEtBQUssYUFBYWhCLEtBQUtnQixDQUFDLEtBQUs7WUFDN0NDLEdBQUcsT0FBT2pCLEtBQUtpQixDQUFDLEtBQUssYUFBYWpCLEtBQUtpQixDQUFDLEtBQUs7UUFDL0M7UUFFTlQsTUFBTTtZQUNKUSxHQUFHRixPQUFPRSxDQUFDO1lBQ1hDLEdBQUdILE9BQU9HLENBQUM7WUFDWEwsT0FBT0YsT0FBT1IsV0FBV1UsS0FBSztZQUM5QkMsUUFBUUgsT0FBT1IsV0FBV1csTUFBTTtRQUNsQztJQUNGLE9BQU87UUFDTEwsTUFBTVIsS0FBS2tCLGFBQWE7SUFDMUI7SUFFQSxJQUFJLENBQUNWLE9BQU9XLE1BQU1YLElBQUlRLENBQUMsS0FBS0csTUFBTVgsSUFBSVMsQ0FBQyxLQUFLVCxJQUFJSSxLQUFLLElBQUksS0FBS0osSUFBSUssTUFBTSxJQUFJLEdBQUc7UUFDN0UsT0FBTztJQUNUO0lBRUEscUJBQ0UsOERBQUNuQiw4Q0FBS0E7UUFBQzBCLE1BQUs7a0JBQ1YsNEVBQUMzQiw2Q0FBSUE7WUFDSHVCLEdBQUdSLElBQUlRLENBQUMsR0FBRztZQUNYQyxHQUFHVCxJQUFJUyxDQUFDLEdBQUc7WUFDWEwsT0FBT0osSUFBSUksS0FBSyxHQUFHO1lBQ25CQyxRQUFRTCxJQUFJSyxNQUFNLEdBQUc7WUFDckJRLE1BQUs7WUFDTEMsUUFBTztZQUNQQyxhQUFhO1lBQ2JDLFdBQVc7Ozs7Ozs7Ozs7O0FBSW5CIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXEhvdmVySW5kaWNhdG9yLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWN0LCBHcm91cCB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb3ZlckluZGljYXRvcih7IGhvdmVyZWRFbGVtZW50LCBlbGVtZW50UmVmcywgb2JqZXRvcyA9IFtdIH0pIHtcbiAgaWYgKCFob3ZlcmVkRWxlbWVudCB8fCAhZWxlbWVudFJlZnM/LmN1cnJlbnQ/Lltob3ZlcmVkRWxlbWVudF0pIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IG5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50W2hvdmVyZWRFbGVtZW50XTtcbiAgaWYgKCFub2RlPy5nZXRTdGFnZT8uKCkpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGhvdmVyZWRPYmogPSBBcnJheS5pc0FycmF5KG9iamV0b3MpXG4gICAgPyBvYmpldG9zLmZpbmQoKG8pID0+IG8uaWQgPT09IGhvdmVyZWRFbGVtZW50KVxuICAgIDogbnVsbDtcblxuICBsZXQgYm94ID0gbnVsbDtcbiAgaWYgKFxuICAgIGhvdmVyZWRPYmo/LnRpcG8gPT09IFwiZ2FsZXJpYVwiICYmXG4gICAgTnVtYmVyLmlzRmluaXRlKE51bWJlcihob3ZlcmVkT2JqLndpZHRoKSkgJiZcbiAgICBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKGhvdmVyZWRPYmouaGVpZ2h0KSlcbiAgKSB7XG4gICAgY29uc3QgYWJzUG9zID1cbiAgICAgIHR5cGVvZiBub2RlLmdldEFic29sdXRlUG9zaXRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IG5vZGUuZ2V0QWJzb2x1dGVQb3NpdGlvbigpXG4gICAgICAgIDoge1xuICAgICAgICAgICAgeDogdHlwZW9mIG5vZGUueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiAwLFxuICAgICAgICAgICAgeTogdHlwZW9mIG5vZGUueSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS55KCkgOiAwLFxuICAgICAgICAgIH07XG5cbiAgICBib3ggPSB7XG4gICAgICB4OiBhYnNQb3MueCxcbiAgICAgIHk6IGFic1Bvcy55LFxuICAgICAgd2lkdGg6IE51bWJlcihob3ZlcmVkT2JqLndpZHRoKSxcbiAgICAgIGhlaWdodDogTnVtYmVyKGhvdmVyZWRPYmouaGVpZ2h0KSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCgpO1xuICB9XG5cbiAgaWYgKCFib3ggfHwgaXNOYU4oYm94LngpIHx8IGlzTmFOKGJveC55KSB8fCBib3gud2lkdGggPD0gMCB8fCBib3guaGVpZ2h0IDw9IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEdyb3VwIG5hbWU9XCJ1aS1ob3Zlci1pbmRpY2F0b3JcIj5cbiAgICAgIDxSZWN0XG4gICAgICAgIHg9e2JveC54IC0gMn1cbiAgICAgICAgeT17Ym94LnkgLSAyfVxuICAgICAgICB3aWR0aD17Ym94LndpZHRoICsgNH1cbiAgICAgICAgaGVpZ2h0PXtib3guaGVpZ2h0ICsgNH1cbiAgICAgICAgZmlsbD1cInRyYW5zcGFyZW50XCJcbiAgICAgICAgc3Ryb2tlPVwiIzkzMzNFQVwiXG4gICAgICAgIHN0cm9rZVdpZHRoPXsyfVxuICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxuICAgICAgLz5cbiAgICA8L0dyb3VwPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlJlY3QiLCJHcm91cCIsIkhvdmVySW5kaWNhdG9yIiwiaG92ZXJlZEVsZW1lbnQiLCJlbGVtZW50UmVmcyIsIm9iamV0b3MiLCJjdXJyZW50Iiwibm9kZSIsImdldFN0YWdlIiwiaG92ZXJlZE9iaiIsIkFycmF5IiwiaXNBcnJheSIsImZpbmQiLCJvIiwiaWQiLCJib3giLCJ0aXBvIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ3aWR0aCIsImhlaWdodCIsImFic1BvcyIsImdldEFic29sdXRlUG9zaXRpb24iLCJ4IiwieSIsImdldENsaWVudFJlY3QiLCJpc05hTiIsIm5hbWUiLCJmaWxsIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJsaXN0ZW5pbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/HoverIndicator.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/InlineTextEditor.jsx":
/*!*********************************************!*\
  !*** ./src/components/InlineTextEditor.jsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InlineTextEditor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nfunction isInlineDebugEnabled() {\n    return  false && 0;\n}\nfunction formatInlineLogPayload(payload = {}) {\n    try {\n        return JSON.stringify(payload, null, 2);\n    } catch (error) {\n        return String(error || payload);\n    }\n}\nfunction nextInlineFrameMeta() {\n    if (true) {\n        return {\n            frame: null,\n            perfMs: null\n        };\n    }\n    const prev = Number(window.__INLINE_FRAME_SEQ || 0);\n    const next = prev + 1;\n    window.__INLINE_FRAME_SEQ = next;\n    const perfMs = typeof window.performance?.now === \"function\" ? Number(window.performance.now().toFixed(3)) : null;\n    return {\n        frame: next,\n        perfMs\n    };\n}\nfunction normalizeFinishMode(mode) {\n    if (mode === \"immediate\" || mode === \"raf\" || mode === \"timeout100\") return mode;\n    return \"raf\";\n}\nfunction normalizeWidthMode(mode) {\n    return mode === \"fit-content\" ? \"fit-content\" : \"measured\";\n}\nfunction normalizeEditorText(rawText, { trimPhantomTrailingNewline = true } = {}) {\n    const normalized = String(rawText ?? \"\").replace(/\\r\\n/g, \"\\n\").replace(/\\u200B/g, \"\");\n    if (!trimPhantomTrailingNewline) return normalized;\n    const trailingNewlines = normalized.match(/\\n+$/)?.[0].length || 0;\n    if (trailingNewlines >= 2) {\n        // contentEditable puede reportar una linea vacia extra temporal al hacer Enter.\n        return normalized.slice(0, -1);\n    }\n    return normalized;\n}\nfunction countLines(text) {\n    const normalized = String(text ?? \"\").replace(/\\r\\n/g, \"\\n\");\n    return normalized === \"\" ? 1 : normalized.split(\"\\n\").length;\n}\nfunction countTrailingNewlines(text) {\n    const normalized = String(text ?? \"\").replace(/\\r\\n/g, \"\\n\");\n    const trailing = normalized.match(/\\n+$/)?.[0];\n    return trailing ? trailing.length : 0;\n}\nfunction rectToPayload(rect) {\n    if (!rect) return null;\n    return {\n        x: rect.x,\n        y: rect.y,\n        width: rect.width,\n        height: rect.height\n    };\n}\nfunction getFullRangeRect(el) {\n    if (!el) return null;\n    if (el instanceof HTMLInputElement) return null;\n    try {\n        const range = document.createRange();\n        range.selectNodeContents(el);\n        const rect = range.getBoundingClientRect();\n        return rectToPayload(rect);\n    } catch  {\n        return null;\n    }\n}\nfunction getSelectionRectInEditor(el) {\n    if (!el || \"undefined\" === \"undefined\") return {\n        inEditor: false,\n        rect: null\n    };\n    if (el instanceof HTMLInputElement) {\n        const isFocused = document.activeElement === el;\n        return {\n            inEditor: isFocused,\n            rect: isFocused ? rectToPayload(el.getBoundingClientRect()) : null\n        };\n    }\n    const sel = window.getSelection?.();\n    if (!sel || sel.rangeCount === 0) return {\n        inEditor: false,\n        rect: null\n    };\n    try {\n        const range = sel.getRangeAt(0);\n        const startIn = el.contains(range.startContainer);\n        const endIn = el.contains(range.endContainer);\n        if (!startIn || !endIn) return {\n            inEditor: false,\n            rect: null\n        };\n        const rect = range.getBoundingClientRect();\n        return {\n            inEditor: true,\n            rect: rectToPayload(rect)\n        };\n    } catch  {\n        return {\n            inEditor: false,\n            rect: null\n        };\n    }\n}\nfunction getCollapsedCaretProbeRectInEditor(el) {\n    if (!el || el instanceof HTMLInputElement || \"undefined\" === \"undefined\") return null;\n    const sel = window.getSelection?.();\n    if (!sel || sel.rangeCount === 0) return null;\n    let originalRange = null;\n    let marker = null;\n    try {\n        const activeRange = sel.getRangeAt(0);\n        if (!el.contains(activeRange.startContainer) || !el.contains(activeRange.endContainer)) {\n            return null;\n        }\n        originalRange = activeRange.cloneRange();\n        const probeRange = activeRange.cloneRange();\n        probeRange.collapse(true);\n        marker = document.createElement(\"span\");\n        marker.textContent = \"\\u200b\";\n        marker.style.display = \"inline-block\";\n        marker.style.width = \"0px\";\n        marker.style.padding = \"0\";\n        marker.style.margin = \"0\";\n        marker.style.border = \"0\";\n        marker.style.lineHeight = \"1\";\n        marker.style.pointerEvents = \"none\";\n        probeRange.insertNode(marker);\n        const rect = marker.getBoundingClientRect();\n        if (marker.parentNode) {\n            marker.parentNode.removeChild(marker);\n            marker.parentNode?.normalize?.();\n        }\n        sel.removeAllRanges();\n        sel.addRange(originalRange);\n        return rectToPayload(rect);\n    } catch  {\n        try {\n            if (marker?.parentNode) {\n                marker.parentNode.removeChild(marker);\n            }\n            if (originalRange && sel) {\n                sel.removeAllRanges();\n                sel.addRange(originalRange);\n            }\n        } catch  {\n        // no-op\n        }\n        return null;\n    }\n}\nfunction roundMetric(value, digits = 4) {\n    return Number.isFinite(value) ? Number(value.toFixed(digits)) : null;\n}\nfunction getFirstGlyphRectInEditor(el) {\n    if (!el || el instanceof HTMLInputElement || typeof document === \"undefined\") return null;\n    try {\n        const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT);\n        let textNode = null;\n        while(walker.nextNode()){\n            const node = walker.currentNode;\n            const text = node?.nodeValue || \"\";\n            if (text.length > 0) {\n                textNode = node;\n                break;\n            }\n        }\n        if (!textNode) return null;\n        const range = document.createRange();\n        range.setStart(textNode, 0);\n        range.setEnd(textNode, Math.min(1, textNode.nodeValue.length));\n        return rectToPayload(range.getBoundingClientRect());\n    } catch  {\n        return null;\n    }\n}\nfunction measureCanvasInkMetrics({ fontStyle, fontWeight, fontSizePx, fontFamily, probeText }) {\n    if (typeof document === \"undefined\") return null;\n    try {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) return null;\n        const safeFamily = String(fontFamily || \"sans-serif\");\n        const familyForCanvas = safeFamily.includes(\",\") ? safeFamily : /\\s/.test(safeFamily) ? `\"${safeFamily}\"` : safeFamily;\n        ctx.font = `${fontStyle || \"normal\"} ${fontWeight || \"normal\"} ${fontSizePx}px ${familyForCanvas}`;\n        const m = ctx.measureText(probeText || \"Hg\");\n        const ascent = Number(m.actualBoundingBoxAscent || 0);\n        const descent = Number(m.actualBoundingBoxDescent || 0);\n        const inkHeight = ascent + descent;\n        const fontAscent = Number(m.fontBoundingBoxAscent || 0);\n        const fontDescent = Number(m.fontBoundingBoxDescent || 0);\n        return {\n            probeText,\n            actualAscentPx: roundMetric(ascent),\n            actualDescentPx: roundMetric(descent),\n            actualInkHeightPx: roundMetric(inkHeight),\n            fontAscentPx: roundMetric(fontAscent),\n            fontDescentPx: roundMetric(fontDescent),\n            fontBoxHeightPx: roundMetric(fontAscent + fontDescent)\n        };\n    } catch  {\n        return null;\n    }\n}\nfunction measureDomInkProbe({ fontStyle, fontWeight, fontSizePx, fontFamily, lineHeightPx, probeText }) {\n    if (typeof document === \"undefined\") return null;\n    let host = null;\n    try {\n        host = document.createElement(\"div\");\n        host.style.position = \"fixed\";\n        host.style.left = \"-100000px\";\n        host.style.top = \"-100000px\";\n        host.style.margin = \"0\";\n        host.style.padding = \"0\";\n        host.style.border = \"0\";\n        host.style.whiteSpace = \"pre\";\n        host.style.fontSize = `${fontSizePx}px`;\n        host.style.fontFamily = fontFamily || \"sans-serif\";\n        host.style.fontWeight = fontWeight || \"normal\";\n        host.style.fontStyle = fontStyle || \"normal\";\n        host.style.lineHeight = `${lineHeightPx}px`;\n        host.style.boxSizing = \"border-box\";\n        host.style.pointerEvents = \"none\";\n        host.style.userSelect = \"none\";\n        const span = document.createElement(\"span\");\n        span.style.margin = \"0\";\n        span.style.padding = \"0\";\n        span.style.border = \"0\";\n        span.style.whiteSpace = \"pre\";\n        span.textContent = probeText || \"Hg\";\n        host.appendChild(span);\n        document.body.appendChild(host);\n        const hostRect = host.getBoundingClientRect();\n        const spanRect = span.getBoundingClientRect();\n        return {\n            probeText,\n            hostHeightPx: roundMetric(hostRect.height),\n            glyphHeightPx: roundMetric(spanRect.height),\n            glyphTopInsetPx: roundMetric(spanRect.top - hostRect.top),\n            glyphBottomInsetPx: roundMetric(hostRect.bottom - spanRect.bottom)\n        };\n    } catch  {\n        return null;\n    } finally{\n        if (host && host.parentNode) {\n            host.parentNode.removeChild(host);\n        }\n    }\n}\nconst INLINE_LAYOUT_VERSION = \"linebreak-unified-editor-v9\";\nfunction InlineTextEditor({ editingId = null, node, value, onChange, onFinish, textAlign, scaleVisual = 1, finishMode = \"raf\", widthMode = \"measured\", onOverlayMountChange = null, onDebugEvent = null }) {\n    if (!node) return null;\n    const editorRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const textCenterXDomRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const DEBUG_MODE = isInlineDebugEnabled();\n    const normalizedFinishMode = normalizeFinishMode(finishMode);\n    const normalizedWidthMode = normalizeWidthMode(widthMode);\n    // Stage (lo necesitamos para rects y posiciones)\n    const stage = node.getStage();\n    if (!stage) return null;\n    const stageBox = stage.container().getBoundingClientRect();\n    const stageScaleX = typeof stage.scaleX === \"function\" ? stage.scaleX() : stage.scaleX || 1;\n    const stageScaleY = typeof stage.scaleY === \"function\" ? stage.scaleY() : stage.scaleY || 1;\n    const totalScaleX = (scaleVisual || 1) * (stageScaleX || 1);\n    const totalScaleY = (scaleVisual || 1) * (stageScaleY || 1);\n    // Detectar el nodo de texto real para estilo (color, fuente, etc.)\n    const textNode = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)({\n        \"InlineTextEditor.useMemo[textNode]\": ()=>{\n            try {\n                if (typeof node.getClassName === \"function\") {\n                    const cls = node.getClassName();\n                    if (cls === \"Text\") {\n                        return node;\n                    }\n                }\n                const nodeId = (typeof node.id === \"function\" ? node.id() : node?.attrs?.id) || null;\n                if (nodeId && typeof stage?.findOne === \"function\") {\n                    const pairedText = stage.findOne(`#${nodeId}-text`);\n                    if (pairedText?.getClassName?.() === \"Text\") {\n                        return pairedText;\n                    }\n                }\n                if (typeof node.findOne === \"function\") {\n                    const found = node.findOne({\n                        \"InlineTextEditor.useMemo[textNode].found\": (n)=>n.getClassName() === \"Text\"\n                    }[\"InlineTextEditor.useMemo[textNode].found\"]);\n                    if (found) return found;\n                }\n                if (typeof node.findAncestor === \"function\") {\n                    const ancestorText = node.findAncestor({\n                        \"InlineTextEditor.useMemo[textNode].ancestorText\": (n)=>n.getClassName && n.getClassName() === \"Text\"\n                    }[\"InlineTextEditor.useMemo[textNode].ancestorText\"]);\n                    if (ancestorText) return ancestorText;\n                }\n                return node;\n            } catch (error) {\n                console.warn(\"Error buscando textNode para InlineTextEditor:\", error);\n                return node;\n            }\n        }\n    }[\"InlineTextEditor.useMemo[textNode]\"], [\n        node,\n        stage\n    ]);\n    const nodeProps = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)({\n        \"InlineTextEditor.useMemo[nodeProps]\": ()=>{\n            try {\n                const getProp = {\n                    \"InlineTextEditor.useMemo[nodeProps].getProp\": (n, getterName, fallback)=>{\n                        if (!n) return fallback;\n                        const fn = n[getterName];\n                        if (typeof fn === \"function\") return fn.call(n);\n                        return n[getterName] || fallback;\n                    }\n                }[\"InlineTextEditor.useMemo[nodeProps].getProp\"];\n                return {\n                    fontSize: getProp(textNode, \"fontSize\", 24),\n                    fontFamily: getProp(textNode, \"fontFamily\", \"sans-serif\"),\n                    fontWeight: getProp(textNode, \"fontWeight\", \"normal\"),\n                    fontStyle: getProp(textNode, \"fontStyle\", \"normal\"),\n                    fill: getProp(textNode, \"fill\", \"#000\"),\n                    lineHeightKonva: getProp(textNode, \"lineHeight\", 1.2)\n                };\n            } catch (error) {\n                console.warn(\"Error obteniendo propiedades del textNode:\", error);\n                return {\n                    fontSize: 24,\n                    fontFamily: \"sans-serif\",\n                    fontWeight: \"normal\",\n                    fontStyle: \"normal\",\n                    fill: \"#000\",\n                    lineHeightKonva: 1.2\n                };\n            }\n        }\n    }[\"InlineTextEditor.useMemo[nodeProps]\"], [\n        textNode\n    ]);\n    const konvaLineHeight = nodeProps.lineHeightKonva;\n    const rectSourceNode = textNode || node;\n    const rect = rectSourceNode.getClientRect({\n        relativeTo: stage,\n        skipStroke: true\n    });\n    const PADDING_X = 0;\n    const PADDING_Y = 0;\n    const fontSizePx = Math.max(1, Number(nodeProps.fontSize || 24) * totalScaleY);\n    const lineHeightPx = Math.max(1, fontSizePx * konvaLineHeight);\n    const rawValue = String(value ?? \"\");\n    const normalizedValue = rawValue.replace(/\\r\\n/g, \"\\n\");\n    const normalizedValueForSingleLine = normalizedValue.replace(/\\n+$/g, \"\");\n    const isSingleLine = !normalizedValue.includes(\"\\n\");\n    const verticalInsetPx = 0;\n    const editableLineHeightPx = lineHeightPx;\n    const className = typeof node.getClassName === \"function\" ? node.getClassName() : \"Text\";\n    const isTextNode = className === \"Text\";\n    const baseTextWidth = Math.max(20, rect.width * totalScaleX);\n    const measuredContentWidth = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)({\n        \"InlineTextEditor.useMemo[measuredContentWidth]\": ()=>{\n            if (normalizedWidthMode !== \"measured\") return null;\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            if (!ctx) return baseTextWidth;\n            const safeFontFamily = String(nodeProps.fontFamily || \"sans-serif\");\n            const fontFamilyForCanvas = safeFontFamily.includes(\",\") ? safeFontFamily : /\\s/.test(safeFontFamily) ? `\"${safeFontFamily}\"` : safeFontFamily;\n            ctx.font = `${nodeProps.fontStyle || \"normal\"} ${nodeProps.fontWeight || \"normal\"} ${fontSizePx}px ${fontFamilyForCanvas}`;\n            const textValue = isSingleLine ? normalizedValueForSingleLine : normalizedValue;\n            const lines = textValue.split(/\\r?\\n/);\n            const maxLineWidth = Math.max(...lines.map({\n                \"InlineTextEditor.useMemo[measuredContentWidth].maxLineWidth\": (line)=>ctx.measureText(line).width\n            }[\"InlineTextEditor.useMemo[measuredContentWidth].maxLineWidth\"]), 0);\n            return Math.max(20, Math.ceil(maxLineWidth));\n        }\n    }[\"InlineTextEditor.useMemo[measuredContentWidth]\"], [\n        normalizedWidthMode,\n        nodeProps.fontFamily,\n        nodeProps.fontSize,\n        nodeProps.fontStyle,\n        nodeProps.fontWeight,\n        totalScaleY,\n        isSingleLine,\n        normalizedValue,\n        normalizedValueForSingleLine\n    ]);\n    const effectiveTextWidth = normalizedWidthMode === \"measured\" && Number.isFinite(measuredContentWidth) ? measuredContentWidth : baseTextWidth;\n    const minWidthPx = normalizedWidthMode === \"measured\" ? effectiveTextWidth : baseTextWidth;\n    const cardWidth = effectiveTextWidth + PADDING_X * 2;\n    let left;\n    let top;\n    if (isTextNode) {\n        if (textCenterXDomRef.current == null) {\n            const centerXCanvas = rect.x + rect.width / 2;\n            textCenterXDomRef.current = stageBox.left + centerXCanvas * totalScaleX + window.scrollX;\n        }\n        top = stageBox.top + rect.y * totalScaleY + window.scrollY - PADDING_Y;\n        left = textCenterXDomRef.current - cardWidth / 2;\n    } else {\n        const centerXCanvas = rect.x + rect.width / 2;\n        const centerYCanvas = rect.y + rect.height / 2;\n        const centerXDom = stageBox.left + centerXCanvas * totalScaleX + window.scrollX;\n        const centerYDom = stageBox.top + centerYCanvas * totalScaleY + window.scrollY;\n        const approxHeight = nodeProps.fontSize * konvaLineHeight * totalScaleY + PADDING_Y * 2;\n        left = centerXDom - cardWidth / 2;\n        top = centerYDom - approxHeight / 2;\n    }\n    const emitDebug = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"InlineTextEditor.useCallback[emitDebug]\": (eventName, extra = {})=>{\n            if (!DEBUG_MODE) return;\n            const essentialEvents = new Set([\n                \"overlay: after-focus\",\n                \"input: linebreak\"\n            ]);\n            if (!essentialEvents.has(eventName)) return;\n            const ts = new Date().toISOString();\n            const frameMeta = nextInlineFrameMeta();\n            const overlayEl = editorRef.current?.parentElement || null;\n            const overlayRect = overlayEl?.getBoundingClientRect?.() || null;\n            const contentRect = editorRef.current?.getBoundingClientRect?.() || null;\n            const computedStyle = editorRef.current ? window.getComputedStyle(editorRef.current) : null;\n            const fullRangeRect = getFullRangeRect(editorRef.current);\n            const selectionInfo = getSelectionRectInEditor(editorRef.current);\n            const projectedKonvaRect = {\n                x: stageBox.left + rect.x * totalScaleX + window.scrollX,\n                y: stageBox.top + rect.y * totalScaleY + window.scrollY,\n                width: rect.width * totalScaleX,\n                height: rect.height * totalScaleY\n            };\n            const overlayToKonvaDy = overlayRect ? overlayRect.y - projectedKonvaRect.y : null;\n            const contentToKonvaDy = contentRect ? contentRect.y - projectedKonvaRect.y : null;\n            const fullRangeToContentDy = fullRangeRect && contentRect ? fullRangeRect.y - contentRect.y : null;\n            const caretToContentDy = selectionInfo.inEditor && selectionInfo.rect && contentRect ? selectionInfo.rect.y - contentRect.y : null;\n            const caretProbeRect = getCollapsedCaretProbeRectInEditor(editorRef.current);\n            const caretProbeToContentDy = caretProbeRect && contentRect ? caretProbeRect.y - contentRect.y : null;\n            const caretProbeHeightPx = caretProbeRect ? caretProbeRect.height : null;\n            const firstGlyphRect = getFirstGlyphRectInEditor(editorRef.current);\n            const firstGlyphToContentDy = firstGlyphRect && contentRect ? firstGlyphRect.y - contentRect.y : null;\n            const firstGlyphHeightPx = firstGlyphRect ? firstGlyphRect.height : null;\n            const probeText = (isSingleLine ? normalizedValueForSingleLine : normalizedValue.split(/\\r?\\n/)[0] || \"\").replace(/\\u200B/g, \"\").slice(0, 32) || \"HgAy\";\n            const canvasInkMetrics = measureCanvasInkMetrics({\n                fontStyle: nodeProps.fontStyle,\n                fontWeight: nodeProps.fontWeight,\n                fontSizePx,\n                fontFamily: nodeProps.fontFamily,\n                probeText\n            });\n            const domInkProbe = measureDomInkProbe({\n                fontStyle: nodeProps.fontStyle,\n                fontWeight: nodeProps.fontWeight,\n                fontSizePx,\n                fontFamily: nodeProps.fontFamily,\n                lineHeightPx: editableLineHeightPx,\n                probeText\n            });\n            const canvasInkTopInsetPx = canvasInkMetrics && Number.isFinite(canvasInkMetrics.actualInkHeightPx) ? (editableLineHeightPx - canvasInkMetrics.actualInkHeightPx) / 2 : null;\n            const domVsCanvasTopInsetDeltaPx = domInkProbe && Number.isFinite(canvasInkTopInsetPx) ? domInkProbe.glyphTopInsetPx - canvasInkTopInsetPx : null;\n            const liveVsProbeGlyphTopDeltaPx = Number.isFinite(firstGlyphToContentDy) && domInkProbe ? firstGlyphToContentDy - domInkProbe.glyphTopInsetPx : null;\n            const payload = {\n                ...frameMeta,\n                id: editingId || null,\n                eventName,\n                valueLength: rawValue.length,\n                left,\n                top,\n                baseTextWidth,\n                effectiveTextWidth,\n                finishMode: normalizedFinishMode,\n                widthMode: normalizedWidthMode,\n                overlayRect: overlayRect ? {\n                    x: overlayRect.x,\n                    y: overlayRect.y,\n                    width: overlayRect.width,\n                    height: overlayRect.height\n                } : null,\n                contentRect: contentRect ? {\n                    x: contentRect.x,\n                    y: contentRect.y,\n                    width: contentRect.width,\n                    height: contentRect.height\n                } : null,\n                contentScrollWidth: editorRef.current?.scrollWidth ?? null,\n                contentClientWidth: editorRef.current?.clientWidth ?? null,\n                isFocused: document.activeElement === editorRef.current,\n                projectedKonvaRect,\n                overlayToKonvaDy,\n                contentToKonvaDy,\n                fullRangeRect,\n                selectionInEditor: selectionInfo.inEditor,\n                selectionRect: selectionInfo.rect,\n                fullRangeToContentDy,\n                caretToContentDy,\n                caretProbeRect,\n                caretProbeToContentDy,\n                caretProbeHeightPx,\n                firstGlyphRect,\n                firstGlyphToContentDy,\n                firstGlyphHeightPx,\n                computedFontSize: computedStyle?.fontSize ?? null,\n                computedLineHeight: computedStyle?.lineHeight ?? null,\n                computedPaddingTop: computedStyle?.paddingTop ?? null,\n                computedPaddingBottom: computedStyle?.paddingBottom ?? null,\n                computedBorderTop: computedStyle?.borderTopWidth ?? null,\n                computedBorderBottom: computedStyle?.borderBottomWidth ?? null,\n                fontSizePx,\n                lineHeightPx,\n                isSingleLine,\n                verticalInsetPx,\n                editableLineHeightPx,\n                editorTag: !editorRef.current ? null : editorRef.current instanceof HTMLInputElement ? \"input\" : \"contentEditable\",\n                normalizedValueLength: isSingleLine ? normalizedValueForSingleLine.length : normalizedValue.length,\n                hadTrailingNewline: isSingleLine && normalizedValueForSingleLine.length !== normalizedValue.length,\n                canvasInkMetrics,\n                domInkProbe,\n                canvasInkTopInsetPx: roundMetric(canvasInkTopInsetPx),\n                domVsCanvasTopInsetDeltaPx: roundMetric(domVsCanvasTopInsetDeltaPx),\n                liveVsProbeGlyphTopDeltaPx: roundMetric(liveVsProbeGlyphTopDeltaPx),\n                layoutModelVersion: INLINE_LAYOUT_VERSION,\n                ...extra\n            };\n            const body = formatInlineLogPayload(payload);\n            console.log(`[INLINE][${ts}] ${eventName}\\n${body}`);\n            if (typeof onDebugEvent === \"function\") {\n                onDebugEvent(eventName, payload);\n            }\n        }\n    }[\"InlineTextEditor.useCallback[emitDebug]\"], [\n        DEBUG_MODE,\n        editingId,\n        rawValue,\n        normalizedValue,\n        normalizedValueForSingleLine,\n        left,\n        top,\n        baseTextWidth,\n        effectiveTextWidth,\n        normalizedFinishMode,\n        normalizedWidthMode,\n        onDebugEvent,\n        stageBox.left,\n        stageBox.top,\n        rect.x,\n        rect.y,\n        rect.width,\n        rect.height,\n        totalScaleX,\n        totalScaleY,\n        fontSizePx,\n        lineHeightPx,\n        isSingleLine,\n        verticalInsetPx,\n        editableLineHeightPx\n    ]);\n    // Inicializar contenido + foco + caret antes del primer paint visible\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)({\n        \"InlineTextEditor.useLayoutEffect\": ()=>{\n            const el = editorRef.current;\n            if (!el) return;\n            let initialText = normalizedValue;\n            if (window._preFillChar) {\n                initialText = (initialText || \"\") + window._preFillChar;\n                onChange(initialText);\n                window._preFillChar = null;\n            }\n            if (el instanceof HTMLInputElement) {\n                el.value = initialText;\n                emitDebug(\"overlay: before-focus\");\n                el.focus();\n                const len = initialText.length;\n                try {\n                    el.setSelectionRange(len, len);\n                } catch  {\n                // no-op\n                }\n            } else {\n                el.innerText = initialText;\n                emitDebug(\"overlay: before-focus\");\n                el.focus();\n                const range = document.createRange();\n                range.selectNodeContents(el);\n                range.collapse(false);\n                const sel = window.getSelection();\n                sel.removeAllRanges();\n                sel.addRange(range);\n            }\n            if (typeof onOverlayMountChange === \"function\" && editingId) {\n                onOverlayMountChange(editingId, true);\n            }\n            emitDebug(\"overlay: after-focus\");\n            return ({\n                \"InlineTextEditor.useLayoutEffect\": ()=>{\n                    emitDebug(\"overlay: before-unmount\");\n                    const closingId = editingId || null;\n                    requestAnimationFrame({\n                        \"InlineTextEditor.useLayoutEffect\": ()=>{\n                            const safeId = String(closingId || \"\").replace(/\"/g, '\\\\\"');\n                            const overlayStillPresent = safeId ? Boolean(document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`)) : false;\n                            emitDebug(\"overlay: after-unmount-raf\", {\n                                id: closingId,\n                                overlayStillPresent,\n                                currentEditingId: window._currentEditingId ?? null,\n                                globalEditingId: window.editing?.id ?? null\n                            });\n                        }\n                    }[\"InlineTextEditor.useLayoutEffect\"]);\n                    if (typeof onOverlayMountChange === \"function\" && editingId) {\n                        onOverlayMountChange(editingId, false);\n                    }\n                }\n            })[\"InlineTextEditor.useLayoutEffect\"];\n        }\n    }[\"InlineTextEditor.useLayoutEffect\"], [\n        editingId\n    ]); // eslint-disable-line react-hooks/exhaustive-deps\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"InlineTextEditor.useEffect\": ()=>{\n            const el = editorRef.current;\n            if (!el) return;\n            el.scrollLeft = 0;\n            el.scrollTop = 0;\n        }\n    }[\"InlineTextEditor.useEffect\"], []);\n    const triggerFinish = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"InlineTextEditor.useCallback[triggerFinish]\": (trigger = \"blur\")=>{\n            emitDebug(\"finish: blur\", {\n                id: editingId || null,\n                mode: normalizedFinishMode,\n                trigger\n            });\n            if (normalizedFinishMode === \"immediate\") {\n                onFinish();\n                return;\n            }\n            if (normalizedFinishMode === \"raf\") {\n                requestAnimationFrame({\n                    \"InlineTextEditor.useCallback[triggerFinish]\": ()=>{\n                        onFinish();\n                    }\n                }[\"InlineTextEditor.useCallback[triggerFinish]\"]);\n                return;\n            }\n            setTimeout(onFinish, 100);\n        }\n    }[\"InlineTextEditor.useCallback[triggerFinish]\"], [\n        editingId,\n        emitDebug,\n        normalizedFinishMode,\n        onFinish\n    ]);\n    return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_1__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            \"data-inline-editor-id\": editingId || \"\",\n            \"data-inline-editor\": \"true\",\n            \"data-inline-width-mode\": normalizedWidthMode,\n            \"data-inline-finish-mode\": normalizedFinishMode,\n            style: {\n                position: \"fixed\",\n                left: `${left}px`,\n                top: `${top}px`,\n                display: \"block\",\n                verticalAlign: \"top\",\n                width: normalizedWidthMode === \"measured\" ? `${effectiveTextWidth}px` : \"fit-content\",\n                minWidth: `${minWidthPx}px`,\n                maxWidth: \"min(100vw - 40px, 1200px)\",\n                background: \"transparent\",\n                borderRadius: 0,\n                boxShadow: \"none\",\n                border: \"none\",\n                padding: `${PADDING_Y}px ${PADDING_X}px`,\n                zIndex: 9999,\n                boxSizing: \"border-box\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: editorRef,\n                contentEditable: true,\n                suppressContentEditableWarning: true,\n                style: {\n                    display: \"block\",\n                    verticalAlign: \"top\",\n                    width: normalizedWidthMode === \"measured\" ? `${effectiveTextWidth}px` : undefined,\n                    minWidth: `${minWidthPx}px`,\n                    whiteSpace: \"pre\",\n                    overflowWrap: \"normal\",\n                    wordBreak: \"normal\",\n                    overflow: \"visible\",\n                    fontSize: `${fontSizePx}px`,\n                    fontFamily: nodeProps.fontFamily,\n                    fontWeight: nodeProps.fontWeight,\n                    fontStyle: nodeProps.fontStyle,\n                    lineHeight: `${editableLineHeightPx}px`,\n                    minHeight: `${lineHeightPx}px`,\n                    color: \"transparent\",\n                    caretColor: nodeProps.fill,\n                    WebkitTextFillColor: \"transparent\",\n                    background: \"transparent\",\n                    borderRadius: 0,\n                    paddingTop: `${verticalInsetPx}px`,\n                    paddingBottom: `${verticalInsetPx}px`,\n                    paddingLeft: 0,\n                    paddingRight: 0,\n                    margin: 0,\n                    outline: \"none\",\n                    boxSizing: \"border-box\",\n                    textAlign: textAlign || \"left\"\n                },\n                onInput: (e)=>{\n                    const domRaw = String(e.currentTarget.innerText || \"\");\n                    const domNormalized = domRaw.replace(/\\r\\n/g, \"\\n\").replace(/\\u200B/g, \"\");\n                    const nextValue = normalizeEditorText(domRaw);\n                    const prevValue = normalizedValue;\n                    const prevLineCount = countLines(prevValue);\n                    const nextLineCount = countLines(nextValue);\n                    const prevTrailingNewlines = countTrailingNewlines(prevValue);\n                    const nextTrailingNewlines = countTrailingNewlines(nextValue);\n                    const domLineCount = countLines(domNormalized);\n                    const domTrailingNewlines = countTrailingNewlines(domNormalized);\n                    const normalizationChanged = domNormalized !== nextValue;\n                    onChange(nextValue);\n                    if (prevLineCount !== nextLineCount || prevTrailingNewlines !== nextTrailingNewlines || normalizationChanged) {\n                        emitDebug(\"input: linebreak\", {\n                            source: \"unified-contentEditable\",\n                            prevLength: prevValue.length,\n                            nextLength: nextValue.length,\n                            prevLineCount,\n                            nextLineCount,\n                            prevTrailingNewlines,\n                            nextTrailingNewlines,\n                            domLength: domNormalized.length,\n                            domLineCount,\n                            domTrailingNewlines,\n                            normalizationChanged\n                        });\n                    }\n                },\n                onKeyDown: (e)=>{\n                    if (e.key === \"Enter\" && !e.isComposing) {\n                        e.stopPropagation();\n                    }\n                },\n                onBlur: ()=>{\n                    triggerFinish(\"blur\");\n                }\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\InlineTextEditor.jsx\",\n                lineNumber: 773,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\InlineTextEditor.jsx\",\n            lineNumber: 747,\n            columnNumber: 7\n        }, this)\n    }, void 0, false), document.body);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0lubGluZVRleHRFZGl0b3IuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXlDO0FBQ3dDO0FBRWpGLFNBQVNNO0lBQ1AsT0FBTyxNQUE2QixJQUFJQyxDQUErQjtBQUN6RTtBQUVBLFNBQVNFLHVCQUF1QkMsVUFBVSxDQUFDLENBQUM7SUFDMUMsSUFBSTtRQUNGLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQ0YsU0FBUyxNQUFNO0lBQ3ZDLEVBQUUsT0FBT0csT0FBTztRQUNkLE9BQU9DLE9BQU9ELFNBQVNIO0lBQ3pCO0FBQ0Y7QUFFQSxTQUFTSztJQUNQLElBQUksSUFBNkIsRUFBRTtRQUNqQyxPQUFPO1lBQUVDLE9BQU87WUFBTUMsUUFBUTtRQUFLO0lBQ3JDO0lBQ0EsTUFBTUMsT0FBT0MsT0FBT1osT0FBT2Esa0JBQWtCLElBQUk7SUFDakQsTUFBTUMsT0FBT0gsT0FBTztJQUNwQlgsT0FBT2Esa0JBQWtCLEdBQUdDO0lBQzVCLE1BQU1KLFNBQ0osT0FBT1YsT0FBT2UsV0FBVyxFQUFFQyxRQUFRLGFBQy9CSixPQUFPWixPQUFPZSxXQUFXLENBQUNDLEdBQUcsR0FBR0MsT0FBTyxDQUFDLE1BQ3hDO0lBQ04sT0FBTztRQUFFUixPQUFPSztRQUFNSjtJQUFPO0FBQy9CO0FBRUEsU0FBU1Esb0JBQW9CQyxJQUFJO0lBQy9CLElBQUlBLFNBQVMsZUFBZUEsU0FBUyxTQUFTQSxTQUFTLGNBQWMsT0FBT0E7SUFDNUUsT0FBTztBQUNUO0FBRUEsU0FBU0MsbUJBQW1CRCxJQUFJO0lBQzlCLE9BQU9BLFNBQVMsZ0JBQWdCLGdCQUFnQjtBQUNsRDtBQUVBLFNBQVNFLG9CQUFvQkMsT0FBTyxFQUFFLEVBQUVDLDZCQUE2QixJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDOUUsTUFBTUMsYUFBYWpCLE9BQU9lLFdBQVcsSUFDbENHLE9BQU8sQ0FBQyxTQUFTLE1BQ2pCQSxPQUFPLENBQUMsV0FBVztJQUN0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Q0VFLGtCQUFrQkMsaUJBQ2xCQyx5QkFBeUJDLHdCQUN6Qkcsc0JBQ0E7d0JBQ0FwSCxVQUFVLG9CQUFvQjs0QkFDNUJxSCxRQUFROzRCQUNSQyxZQUFZVCxVQUFVOVQsTUFBTTs0QkFDNUJ3VSxZQUFZWCxVQUFVN1QsTUFBTTs0QkFDNUIrVDs0QkFDQUM7NEJBQ0FDOzRCQUNBQzs0QkFDQU8sV0FBV2IsY0FBYzVULE1BQU07NEJBQy9CbVU7NEJBQ0FDOzRCQUNBQzt3QkFDRjtvQkFDRjtnQkFDRjtnQkFDQUssV0FBVyxDQUFDakI7b0JBQ1YsSUFBSUEsRUFBRWtCLEdBQUcsS0FBSyxXQUFXLENBQUNsQixFQUFFbUIsV0FBVyxFQUFFO3dCQUN2Q25CLEVBQUVvQixlQUFlO29CQUNuQjtnQkFDRjtnQkFDQUMsUUFBUTtvQkFDTm5ELGNBQWM7Z0JBQ2hCOzs7Ozs7Ozs7Ozt1QkFJTjFRLFNBQVNvRyxJQUFJO0FBRWpCIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXElubGluZVRleHRFZGl0b3IuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVBvcnRhbCB9IGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IHVzZU1lbW8sIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VMYXlvdXRFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5cbmZ1bmN0aW9uIGlzSW5saW5lRGVidWdFbmFibGVkKCkge1xuICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuX19JTkxJTkVfREVCVUcgIT09IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRJbmxpbmVMb2dQYXlsb2FkKHBheWxvYWQgPSB7fSkge1xuICB0cnkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwYXlsb2FkLCBudWxsLCAyKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gU3RyaW5nKGVycm9yIHx8IHBheWxvYWQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5leHRJbmxpbmVGcmFtZU1ldGEoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIHsgZnJhbWU6IG51bGwsIHBlcmZNczogbnVsbCB9O1xuICB9XG4gIGNvbnN0IHByZXYgPSBOdW1iZXIod2luZG93Ll9fSU5MSU5FX0ZSQU1FX1NFUSB8fCAwKTtcbiAgY29uc3QgbmV4dCA9IHByZXYgKyAxO1xuICB3aW5kb3cuX19JTkxJTkVfRlJBTUVfU0VRID0gbmV4dDtcbiAgY29uc3QgcGVyZk1zID1cbiAgICB0eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlPy5ub3cgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBOdW1iZXIod2luZG93LnBlcmZvcm1hbmNlLm5vdygpLnRvRml4ZWQoMykpXG4gICAgICA6IG51bGw7XG4gIHJldHVybiB7IGZyYW1lOiBuZXh0LCBwZXJmTXMgfTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplRmluaXNoTW9kZShtb2RlKSB7XG4gIGlmIChtb2RlID09PSBcImltbWVkaWF0ZVwiIHx8IG1vZGUgPT09IFwicmFmXCIgfHwgbW9kZSA9PT0gXCJ0aW1lb3V0MTAwXCIpIHJldHVybiBtb2RlO1xuICByZXR1cm4gXCJyYWZcIjtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplV2lkdGhNb2RlKG1vZGUpIHtcbiAgcmV0dXJuIG1vZGUgPT09IFwiZml0LWNvbnRlbnRcIiA/IFwiZml0LWNvbnRlbnRcIiA6IFwibWVhc3VyZWRcIjtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplRWRpdG9yVGV4dChyYXdUZXh0LCB7IHRyaW1QaGFudG9tVHJhaWxpbmdOZXdsaW5lID0gdHJ1ZSB9ID0ge30pIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFN0cmluZyhyYXdUZXh0ID8/IFwiXCIpXG4gICAgLnJlcGxhY2UoL1xcclxcbi9nLCBcIlxcblwiKVxuICAgIC5yZXBsYWNlKC9cXHUyMDBCL2csIFwiXCIpO1xuICBpZiAoIXRyaW1QaGFudG9tVHJhaWxpbmdOZXdsaW5lKSByZXR1cm4gbm9ybWFsaXplZDtcbiAgY29uc3QgdHJhaWxpbmdOZXdsaW5lcyA9IG5vcm1hbGl6ZWQubWF0Y2goL1xcbiskLyk/LlswXS5sZW5ndGggfHwgMDtcbiAgaWYgKHRyYWlsaW5nTmV3bGluZXMgPj0gMikge1xuICAgIC8vIGNvbnRlbnRFZGl0YWJsZSBwdWVkZSByZXBvcnRhciB1bmEgbGluZWEgdmFjaWEgZXh0cmEgdGVtcG9yYWwgYWwgaGFjZXIgRW50ZXIuXG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQuc2xpY2UoMCwgLTEpO1xuICB9XG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuXG5mdW5jdGlvbiBjb3VudExpbmVzKHRleHQpIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFN0cmluZyh0ZXh0ID8/IFwiXCIpLnJlcGxhY2UoL1xcclxcbi9nLCBcIlxcblwiKTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQgPT09IFwiXCIgPyAxIDogbm9ybWFsaXplZC5zcGxpdChcIlxcblwiKS5sZW5ndGg7XG59XG5cbmZ1bmN0aW9uIGNvdW50VHJhaWxpbmdOZXdsaW5lcyh0ZXh0KSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBTdHJpbmcodGV4dCA/PyBcIlwiKS5yZXBsYWNlKC9cXHJcXG4vZywgXCJcXG5cIik7XG4gIGNvbnN0IHRyYWlsaW5nID0gbm9ybWFsaXplZC5tYXRjaCgvXFxuKyQvKT8uWzBdO1xuICByZXR1cm4gdHJhaWxpbmcgPyB0cmFpbGluZy5sZW5ndGggOiAwO1xufVxuXG5mdW5jdGlvbiByZWN0VG9QYXlsb2FkKHJlY3QpIHtcbiAgaWYgKCFyZWN0KSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHtcbiAgICB4OiByZWN0LngsXG4gICAgeTogcmVjdC55LFxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgIGhlaWdodDogcmVjdC5oZWlnaHQsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEZ1bGxSYW5nZVJlY3QoZWwpIHtcbiAgaWYgKCFlbCkgcmV0dXJuIG51bGw7XG4gIGlmIChlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoZWwpO1xuICAgIGNvbnN0IHJlY3QgPSByYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4gcmVjdFRvUGF5bG9hZChyZWN0KTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uUmVjdEluRWRpdG9yKGVsKSB7XG4gIGlmICghZWwgfHwgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHsgaW5FZGl0b3I6IGZhbHNlLCByZWN0OiBudWxsIH07XG4gIGlmIChlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBpc0ZvY3VzZWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlbDtcbiAgICByZXR1cm4ge1xuICAgICAgaW5FZGl0b3I6IGlzRm9jdXNlZCxcbiAgICAgIHJlY3Q6IGlzRm9jdXNlZCA/IHJlY3RUb1BheWxvYWQoZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpIDogbnVsbCxcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24/LigpO1xuICBpZiAoIXNlbCB8fCBzZWwucmFuZ2VDb3VudCA9PT0gMCkgcmV0dXJuIHsgaW5FZGl0b3I6IGZhbHNlLCByZWN0OiBudWxsIH07XG4gIHRyeSB7XG4gICAgY29uc3QgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcbiAgICBjb25zdCBzdGFydEluID0gZWwuY29udGFpbnMocmFuZ2Uuc3RhcnRDb250YWluZXIpO1xuICAgIGNvbnN0IGVuZEluID0gZWwuY29udGFpbnMocmFuZ2UuZW5kQ29udGFpbmVyKTtcbiAgICBpZiAoIXN0YXJ0SW4gfHwgIWVuZEluKSByZXR1cm4geyBpbkVkaXRvcjogZmFsc2UsIHJlY3Q6IG51bGwgfTtcbiAgICBjb25zdCByZWN0ID0gcmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHsgaW5FZGl0b3I6IHRydWUsIHJlY3Q6IHJlY3RUb1BheWxvYWQocmVjdCkgfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHsgaW5FZGl0b3I6IGZhbHNlLCByZWN0OiBudWxsIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q29sbGFwc2VkQ2FyZXRQcm9iZVJlY3RJbkVkaXRvcihlbCkge1xuICBpZiAoIWVsIHx8IGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gbnVsbDtcbiAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbj8uKCk7XG4gIGlmICghc2VsIHx8IHNlbC5yYW5nZUNvdW50ID09PSAwKSByZXR1cm4gbnVsbDtcbiAgbGV0IG9yaWdpbmFsUmFuZ2UgPSBudWxsO1xuICBsZXQgbWFya2VyID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCBhY3RpdmVSYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgIGlmICghZWwuY29udGFpbnMoYWN0aXZlUmFuZ2Uuc3RhcnRDb250YWluZXIpIHx8ICFlbC5jb250YWlucyhhY3RpdmVSYW5nZS5lbmRDb250YWluZXIpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgb3JpZ2luYWxSYW5nZSA9IGFjdGl2ZVJhbmdlLmNsb25lUmFuZ2UoKTtcbiAgICBjb25zdCBwcm9iZVJhbmdlID0gYWN0aXZlUmFuZ2UuY2xvbmVSYW5nZSgpO1xuICAgIHByb2JlUmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG5cbiAgICBtYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBtYXJrZXIudGV4dENvbnRlbnQgPSBcIlxcdTIwMGJcIjtcbiAgICBtYXJrZXIuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgbWFya2VyLnN0eWxlLndpZHRoID0gXCIwcHhcIjtcbiAgICBtYXJrZXIuc3R5bGUucGFkZGluZyA9IFwiMFwiO1xuICAgIG1hcmtlci5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcbiAgICBtYXJrZXIuc3R5bGUuYm9yZGVyID0gXCIwXCI7XG4gICAgbWFya2VyLnN0eWxlLmxpbmVIZWlnaHQgPSBcIjFcIjtcbiAgICBtYXJrZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuXG4gICAgcHJvYmVSYW5nZS5pbnNlcnROb2RlKG1hcmtlcik7XG4gICAgY29uc3QgcmVjdCA9IG1hcmtlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmIChtYXJrZXIucGFyZW50Tm9kZSkge1xuICAgICAgbWFya2VyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobWFya2VyKTtcbiAgICAgIG1hcmtlci5wYXJlbnROb2RlPy5ub3JtYWxpemU/LigpO1xuICAgIH1cbiAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgc2VsLmFkZFJhbmdlKG9yaWdpbmFsUmFuZ2UpO1xuICAgIHJldHVybiByZWN0VG9QYXlsb2FkKHJlY3QpO1xuICB9IGNhdGNoIHtcbiAgICB0cnkge1xuICAgICAgaWYgKG1hcmtlcj8ucGFyZW50Tm9kZSkge1xuICAgICAgICBtYXJrZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtYXJrZXIpO1xuICAgICAgfVxuICAgICAgaWYgKG9yaWdpbmFsUmFuZ2UgJiYgc2VsKSB7XG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgc2VsLmFkZFJhbmdlKG9yaWdpbmFsUmFuZ2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gbm8tb3BcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm91bmRNZXRyaWModmFsdWUsIGRpZ2l0cyA9IDQpIHtcbiAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZSh2YWx1ZSkgPyBOdW1iZXIodmFsdWUudG9GaXhlZChkaWdpdHMpKSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldEZpcnN0R2x5cGhSZWN0SW5FZGl0b3IoZWwpIHtcbiAgaWYgKCFlbCB8fCBlbCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGVsLCBOb2RlRmlsdGVyLlNIT1dfVEVYVCk7XG4gICAgbGV0IHRleHROb2RlID0gbnVsbDtcbiAgICB3aGlsZSAod2Fsa2VyLm5leHROb2RlKCkpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSB3YWxrZXIuY3VycmVudE5vZGU7XG4gICAgICBjb25zdCB0ZXh0ID0gbm9kZT8ubm9kZVZhbHVlIHx8IFwiXCI7XG4gICAgICBpZiAodGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRleHROb2RlID0gbm9kZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGV4dE5vZGUpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICByYW5nZS5zZXRTdGFydCh0ZXh0Tm9kZSwgMCk7XG4gICAgcmFuZ2Uuc2V0RW5kKHRleHROb2RlLCBNYXRoLm1pbigxLCB0ZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoKSk7XG4gICAgcmV0dXJuIHJlY3RUb1BheWxvYWQocmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtZWFzdXJlQ2FudmFzSW5rTWV0cmljcyh7XG4gIGZvbnRTdHlsZSxcbiAgZm9udFdlaWdodCxcbiAgZm9udFNpemVQeCxcbiAgZm9udEZhbWlseSxcbiAgcHJvYmVUZXh0LFxufSkge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgaWYgKCFjdHgpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHNhZmVGYW1pbHkgPSBTdHJpbmcoZm9udEZhbWlseSB8fCBcInNhbnMtc2VyaWZcIik7XG4gICAgY29uc3QgZmFtaWx5Rm9yQ2FudmFzID0gc2FmZUZhbWlseS5pbmNsdWRlcyhcIixcIilcbiAgICAgID8gc2FmZUZhbWlseVxuICAgICAgOiAoL1xccy8udGVzdChzYWZlRmFtaWx5KSA/IGBcIiR7c2FmZUZhbWlseX1cImAgOiBzYWZlRmFtaWx5KTtcbiAgICBjdHguZm9udCA9IGAke2ZvbnRTdHlsZSB8fCBcIm5vcm1hbFwifSAke2ZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn0gJHtmb250U2l6ZVB4fXB4ICR7ZmFtaWx5Rm9yQ2FudmFzfWA7XG4gICAgY29uc3QgbSA9IGN0eC5tZWFzdXJlVGV4dChwcm9iZVRleHQgfHwgXCJIZ1wiKTtcbiAgICBjb25zdCBhc2NlbnQgPSBOdW1iZXIobS5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCB8fCAwKTtcbiAgICBjb25zdCBkZXNjZW50ID0gTnVtYmVyKG0uYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50IHx8IDApO1xuICAgIGNvbnN0IGlua0hlaWdodCA9IGFzY2VudCArIGRlc2NlbnQ7XG4gICAgY29uc3QgZm9udEFzY2VudCA9IE51bWJlcihtLmZvbnRCb3VuZGluZ0JveEFzY2VudCB8fCAwKTtcbiAgICBjb25zdCBmb250RGVzY2VudCA9IE51bWJlcihtLmZvbnRCb3VuZGluZ0JveERlc2NlbnQgfHwgMCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2JlVGV4dCxcbiAgICAgIGFjdHVhbEFzY2VudFB4OiByb3VuZE1ldHJpYyhhc2NlbnQpLFxuICAgICAgYWN0dWFsRGVzY2VudFB4OiByb3VuZE1ldHJpYyhkZXNjZW50KSxcbiAgICAgIGFjdHVhbElua0hlaWdodFB4OiByb3VuZE1ldHJpYyhpbmtIZWlnaHQpLFxuICAgICAgZm9udEFzY2VudFB4OiByb3VuZE1ldHJpYyhmb250QXNjZW50KSxcbiAgICAgIGZvbnREZXNjZW50UHg6IHJvdW5kTWV0cmljKGZvbnREZXNjZW50KSxcbiAgICAgIGZvbnRCb3hIZWlnaHRQeDogcm91bmRNZXRyaWMoZm9udEFzY2VudCArIGZvbnREZXNjZW50KSxcbiAgICB9O1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtZWFzdXJlRG9tSW5rUHJvYmUoe1xuICBmb250U3R5bGUsXG4gIGZvbnRXZWlnaHQsXG4gIGZvbnRTaXplUHgsXG4gIGZvbnRGYW1pbHksXG4gIGxpbmVIZWlnaHRQeCxcbiAgcHJvYmVUZXh0LFxufSkge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gbnVsbDtcbiAgbGV0IGhvc3QgPSBudWxsO1xuICB0cnkge1xuICAgIGhvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGhvc3Quc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XG4gICAgaG9zdC5zdHlsZS5sZWZ0ID0gXCItMTAwMDAwcHhcIjtcbiAgICBob3N0LnN0eWxlLnRvcCA9IFwiLTEwMDAwMHB4XCI7XG4gICAgaG9zdC5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcbiAgICBob3N0LnN0eWxlLnBhZGRpbmcgPSBcIjBcIjtcbiAgICBob3N0LnN0eWxlLmJvcmRlciA9IFwiMFwiO1xuICAgIGhvc3Quc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlXCI7XG4gICAgaG9zdC5zdHlsZS5mb250U2l6ZSA9IGAke2ZvbnRTaXplUHh9cHhgO1xuICAgIGhvc3Quc3R5bGUuZm9udEZhbWlseSA9IGZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCI7XG4gICAgaG9zdC5zdHlsZS5mb250V2VpZ2h0ID0gZm9udFdlaWdodCB8fCBcIm5vcm1hbFwiO1xuICAgIGhvc3Quc3R5bGUuZm9udFN0eWxlID0gZm9udFN0eWxlIHx8IFwibm9ybWFsXCI7XG4gICAgaG9zdC5zdHlsZS5saW5lSGVpZ2h0ID0gYCR7bGluZUhlaWdodFB4fXB4YDtcbiAgICBob3N0LnN0eWxlLmJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuICAgIGhvc3Quc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuICAgIGhvc3Quc3R5bGUudXNlclNlbGVjdCA9IFwibm9uZVwiO1xuXG4gICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHNwYW4uc3R5bGUubWFyZ2luID0gXCIwXCI7XG4gICAgc3Bhbi5zdHlsZS5wYWRkaW5nID0gXCIwXCI7XG4gICAgc3Bhbi5zdHlsZS5ib3JkZXIgPSBcIjBcIjtcbiAgICBzcGFuLnN0eWxlLndoaXRlU3BhY2UgPSBcInByZVwiO1xuICAgIHNwYW4udGV4dENvbnRlbnQgPSBwcm9iZVRleHQgfHwgXCJIZ1wiO1xuICAgIGhvc3QuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChob3N0KTtcblxuICAgIGNvbnN0IGhvc3RSZWN0ID0gaG9zdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBzcGFuUmVjdCA9IHNwYW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2JlVGV4dCxcbiAgICAgIGhvc3RIZWlnaHRQeDogcm91bmRNZXRyaWMoaG9zdFJlY3QuaGVpZ2h0KSxcbiAgICAgIGdseXBoSGVpZ2h0UHg6IHJvdW5kTWV0cmljKHNwYW5SZWN0LmhlaWdodCksXG4gICAgICBnbHlwaFRvcEluc2V0UHg6IHJvdW5kTWV0cmljKHNwYW5SZWN0LnRvcCAtIGhvc3RSZWN0LnRvcCksXG4gICAgICBnbHlwaEJvdHRvbUluc2V0UHg6IHJvdW5kTWV0cmljKGhvc3RSZWN0LmJvdHRvbSAtIHNwYW5SZWN0LmJvdHRvbSksXG4gICAgfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKGhvc3QgJiYgaG9zdC5wYXJlbnROb2RlKSB7XG4gICAgICBob3N0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaG9zdCk7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IElOTElORV9MQVlPVVRfVkVSU0lPTiA9IFwibGluZWJyZWFrLXVuaWZpZWQtZWRpdG9yLXY5XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIElubGluZVRleHRFZGl0b3Ioe1xuICBlZGl0aW5nSWQgPSBudWxsLFxuICBub2RlLFxuICB2YWx1ZSxcbiAgb25DaGFuZ2UsXG4gIG9uRmluaXNoLFxuICB0ZXh0QWxpZ24sXG4gIHNjYWxlVmlzdWFsID0gMSxcbiAgZmluaXNoTW9kZSA9IFwicmFmXCIsXG4gIHdpZHRoTW9kZSA9IFwibWVhc3VyZWRcIixcbiAgb25PdmVybGF5TW91bnRDaGFuZ2UgPSBudWxsLFxuICBvbkRlYnVnRXZlbnQgPSBudWxsLFxufSkge1xuICBpZiAoIW5vZGUpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGVkaXRvclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgdGV4dENlbnRlclhEb21SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IERFQlVHX01PREUgPSBpc0lubGluZURlYnVnRW5hYmxlZCgpO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZWRGaW5pc2hNb2RlID0gbm9ybWFsaXplRmluaXNoTW9kZShmaW5pc2hNb2RlKTtcbiAgY29uc3Qgbm9ybWFsaXplZFdpZHRoTW9kZSA9IG5vcm1hbGl6ZVdpZHRoTW9kZSh3aWR0aE1vZGUpO1xuXG4gIC8vIFN0YWdlIChsbyBuZWNlc2l0YW1vcyBwYXJhIHJlY3RzIHkgcG9zaWNpb25lcylcbiAgY29uc3Qgc3RhZ2UgPSBub2RlLmdldFN0YWdlKCk7XG4gIGlmICghc3RhZ2UpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHN0YWdlQm94ID0gc3RhZ2UuY29udGFpbmVyKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgY29uc3Qgc3RhZ2VTY2FsZVggPVxuICAgIHR5cGVvZiBzdGFnZS5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IHN0YWdlLnNjYWxlWCgpIDogc3RhZ2Uuc2NhbGVYIHx8IDE7XG4gIGNvbnN0IHN0YWdlU2NhbGVZID1cbiAgICB0eXBlb2Ygc3RhZ2Uuc2NhbGVZID09PSBcImZ1bmN0aW9uXCIgPyBzdGFnZS5zY2FsZVkoKSA6IHN0YWdlLnNjYWxlWSB8fCAxO1xuXG4gIGNvbnN0IHRvdGFsU2NhbGVYID0gKHNjYWxlVmlzdWFsIHx8IDEpICogKHN0YWdlU2NhbGVYIHx8IDEpO1xuICBjb25zdCB0b3RhbFNjYWxlWSA9IChzY2FsZVZpc3VhbCB8fCAxKSAqIChzdGFnZVNjYWxlWSB8fCAxKTtcblxuICAvLyBEZXRlY3RhciBlbCBub2RvIGRlIHRleHRvIHJlYWwgcGFyYSBlc3RpbG8gKGNvbG9yLCBmdWVudGUsIGV0Yy4pXG4gIGNvbnN0IHRleHROb2RlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2Ygbm9kZS5nZXRDbGFzc05hbWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb25zdCBjbHMgPSBub2RlLmdldENsYXNzTmFtZSgpO1xuICAgICAgICBpZiAoY2xzID09PSBcIlRleHRcIikge1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vZGVJZCA9XG4gICAgICAgICh0eXBlb2Ygbm9kZS5pZCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5pZCgpIDogbm9kZT8uYXR0cnM/LmlkKSB8fCBudWxsO1xuICAgICAgaWYgKG5vZGVJZCAmJiB0eXBlb2Ygc3RhZ2U/LmZpbmRPbmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb25zdCBwYWlyZWRUZXh0ID0gc3RhZ2UuZmluZE9uZShgIyR7bm9kZUlkfS10ZXh0YCk7XG4gICAgICAgIGlmIChwYWlyZWRUZXh0Py5nZXRDbGFzc05hbWU/LigpID09PSBcIlRleHRcIikge1xuICAgICAgICAgIHJldHVybiBwYWlyZWRUZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygbm9kZS5maW5kT25lID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgZm91bmQgPSBub2RlLmZpbmRPbmUoKG4pID0+IG4uZ2V0Q2xhc3NOYW1lKCkgPT09IFwiVGV4dFwiKTtcbiAgICAgICAgaWYgKGZvdW5kKSByZXR1cm4gZm91bmQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygbm9kZS5maW5kQW5jZXN0b3IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb25zdCBhbmNlc3RvclRleHQgPSBub2RlLmZpbmRBbmNlc3RvcihcbiAgICAgICAgICAobikgPT4gbi5nZXRDbGFzc05hbWUgJiYgbi5nZXRDbGFzc05hbWUoKSA9PT0gXCJUZXh0XCJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGFuY2VzdG9yVGV4dCkgcmV0dXJuIGFuY2VzdG9yVGV4dDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGJ1c2NhbmRvIHRleHROb2RlIHBhcmEgSW5saW5lVGV4dEVkaXRvcjpcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9LCBbbm9kZSwgc3RhZ2VdKTtcblxuICBjb25zdCBub2RlUHJvcHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZ2V0UHJvcCA9IChuLCBnZXR0ZXJOYW1lLCBmYWxsYmFjaykgPT4ge1xuICAgICAgICBpZiAoIW4pIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgY29uc3QgZm4gPSBuW2dldHRlck5hbWVdO1xuICAgICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBmbi5jYWxsKG4pO1xuICAgICAgICByZXR1cm4gbltnZXR0ZXJOYW1lXSB8fCBmYWxsYmFjaztcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvbnRTaXplOiBnZXRQcm9wKHRleHROb2RlLCBcImZvbnRTaXplXCIsIDI0KSxcbiAgICAgICAgZm9udEZhbWlseTogZ2V0UHJvcCh0ZXh0Tm9kZSwgXCJmb250RmFtaWx5XCIsIFwic2Fucy1zZXJpZlwiKSxcbiAgICAgICAgZm9udFdlaWdodDogZ2V0UHJvcCh0ZXh0Tm9kZSwgXCJmb250V2VpZ2h0XCIsIFwibm9ybWFsXCIpLFxuICAgICAgICBmb250U3R5bGU6IGdldFByb3AodGV4dE5vZGUsIFwiZm9udFN0eWxlXCIsIFwibm9ybWFsXCIpLFxuICAgICAgICBmaWxsOiBnZXRQcm9wKHRleHROb2RlLCBcImZpbGxcIiwgXCIjMDAwXCIpLFxuICAgICAgICBsaW5lSGVpZ2h0S29udmE6IGdldFByb3AodGV4dE5vZGUsIFwibGluZUhlaWdodFwiLCAxLjIpLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFwiRXJyb3Igb2J0ZW5pZW5kbyBwcm9waWVkYWRlcyBkZWwgdGV4dE5vZGU6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvbnRTaXplOiAyNCxcbiAgICAgICAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXG4gICAgICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgICAgIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgICAgICAgZmlsbDogXCIjMDAwXCIsXG4gICAgICAgIGxpbmVIZWlnaHRLb252YTogMS4yLFxuICAgICAgfTtcbiAgICB9XG4gIH0sIFt0ZXh0Tm9kZV0pO1xuXG4gIGNvbnN0IGtvbnZhTGluZUhlaWdodCA9IG5vZGVQcm9wcy5saW5lSGVpZ2h0S29udmE7XG4gIGNvbnN0IHJlY3RTb3VyY2VOb2RlID0gdGV4dE5vZGUgfHwgbm9kZTtcbiAgY29uc3QgcmVjdCA9IHJlY3RTb3VyY2VOb2RlLmdldENsaWVudFJlY3QoeyByZWxhdGl2ZVRvOiBzdGFnZSwgc2tpcFN0cm9rZTogdHJ1ZSB9KTtcblxuICBjb25zdCBQQURESU5HX1ggPSAwO1xuICBjb25zdCBQQURESU5HX1kgPSAwO1xuICBjb25zdCBmb250U2l6ZVB4ID0gTWF0aC5tYXgoMSwgTnVtYmVyKG5vZGVQcm9wcy5mb250U2l6ZSB8fCAyNCkgKiB0b3RhbFNjYWxlWSk7XG4gIGNvbnN0IGxpbmVIZWlnaHRQeCA9IE1hdGgubWF4KDEsIGZvbnRTaXplUHggKiBrb252YUxpbmVIZWlnaHQpO1xuICBjb25zdCByYXdWYWx1ZSA9IFN0cmluZyh2YWx1ZSA/PyBcIlwiKTtcbiAgY29uc3Qgbm9ybWFsaXplZFZhbHVlID0gcmF3VmFsdWUucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xuICBjb25zdCBub3JtYWxpemVkVmFsdWVGb3JTaW5nbGVMaW5lID0gbm9ybWFsaXplZFZhbHVlLnJlcGxhY2UoL1xcbiskL2csIFwiXCIpO1xuICBjb25zdCBpc1NpbmdsZUxpbmUgPSAhbm9ybWFsaXplZFZhbHVlLmluY2x1ZGVzKFwiXFxuXCIpO1xuICBjb25zdCB2ZXJ0aWNhbEluc2V0UHggPSAwO1xuICBjb25zdCBlZGl0YWJsZUxpbmVIZWlnaHRQeCA9IGxpbmVIZWlnaHRQeDtcblxuICBjb25zdCBjbGFzc05hbWUgPVxuICAgIHR5cGVvZiBub2RlLmdldENsYXNzTmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5nZXRDbGFzc05hbWUoKSA6IFwiVGV4dFwiO1xuICBjb25zdCBpc1RleHROb2RlID0gY2xhc3NOYW1lID09PSBcIlRleHRcIjtcblxuICBjb25zdCBiYXNlVGV4dFdpZHRoID0gTWF0aC5tYXgoMjAsIHJlY3Qud2lkdGggKiB0b3RhbFNjYWxlWCk7XG5cbiAgY29uc3QgbWVhc3VyZWRDb250ZW50V2lkdGggPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobm9ybWFsaXplZFdpZHRoTW9kZSAhPT0gXCJtZWFzdXJlZFwiKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgaWYgKCFjdHgpIHJldHVybiBiYXNlVGV4dFdpZHRoO1xuXG4gICAgY29uc3Qgc2FmZUZvbnRGYW1pbHkgPSBTdHJpbmcobm9kZVByb3BzLmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCIpO1xuICAgIGNvbnN0IGZvbnRGYW1pbHlGb3JDYW52YXMgPSBzYWZlRm9udEZhbWlseS5pbmNsdWRlcyhcIixcIilcbiAgICAgID8gc2FmZUZvbnRGYW1pbHlcbiAgICAgIDogKC9cXHMvLnRlc3Qoc2FmZUZvbnRGYW1pbHkpID8gYFwiJHtzYWZlRm9udEZhbWlseX1cImAgOiBzYWZlRm9udEZhbWlseSk7XG4gICAgY3R4LmZvbnQgPSBgJHtub2RlUHJvcHMuZm9udFN0eWxlIHx8IFwibm9ybWFsXCJ9ICR7bm9kZVByb3BzLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn0gJHtmb250U2l6ZVB4fXB4ICR7Zm9udEZhbWlseUZvckNhbnZhc31gO1xuXG4gICAgY29uc3QgdGV4dFZhbHVlID0gaXNTaW5nbGVMaW5lID8gbm9ybWFsaXplZFZhbHVlRm9yU2luZ2xlTGluZSA6IG5vcm1hbGl6ZWRWYWx1ZTtcbiAgICBjb25zdCBsaW5lcyA9IHRleHRWYWx1ZS5zcGxpdCgvXFxyP1xcbi8pO1xuICAgIGNvbnN0IG1heExpbmVXaWR0aCA9IE1hdGgubWF4KC4uLmxpbmVzLm1hcCgobGluZSkgPT4gY3R4Lm1lYXN1cmVUZXh0KGxpbmUpLndpZHRoKSwgMCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDIwLCBNYXRoLmNlaWwobWF4TGluZVdpZHRoKSk7XG4gIH0sIFtcbiAgICBub3JtYWxpemVkV2lkdGhNb2RlLFxuICAgIG5vZGVQcm9wcy5mb250RmFtaWx5LFxuICAgIG5vZGVQcm9wcy5mb250U2l6ZSxcbiAgICBub2RlUHJvcHMuZm9udFN0eWxlLFxuICAgIG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgIHRvdGFsU2NhbGVZLFxuICAgIGlzU2luZ2xlTGluZSxcbiAgICBub3JtYWxpemVkVmFsdWUsXG4gICAgbm9ybWFsaXplZFZhbHVlRm9yU2luZ2xlTGluZSxcbiAgXSk7XG5cbiAgY29uc3QgZWZmZWN0aXZlVGV4dFdpZHRoID1cbiAgICBub3JtYWxpemVkV2lkdGhNb2RlID09PSBcIm1lYXN1cmVkXCIgJiYgTnVtYmVyLmlzRmluaXRlKG1lYXN1cmVkQ29udGVudFdpZHRoKVxuICAgICAgPyBtZWFzdXJlZENvbnRlbnRXaWR0aFxuICAgICAgOiBiYXNlVGV4dFdpZHRoO1xuICBjb25zdCBtaW5XaWR0aFB4ID1cbiAgICBub3JtYWxpemVkV2lkdGhNb2RlID09PSBcIm1lYXN1cmVkXCIgPyBlZmZlY3RpdmVUZXh0V2lkdGggOiBiYXNlVGV4dFdpZHRoO1xuXG4gIGNvbnN0IGNhcmRXaWR0aCA9IGVmZmVjdGl2ZVRleHRXaWR0aCArIFBBRERJTkdfWCAqIDI7XG4gIGxldCBsZWZ0O1xuICBsZXQgdG9wO1xuXG4gIGlmIChpc1RleHROb2RlKSB7XG4gICAgaWYgKHRleHRDZW50ZXJYRG9tUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgY29uc3QgY2VudGVyWENhbnZhcyA9IHJlY3QueCArIHJlY3Qud2lkdGggLyAyO1xuICAgICAgdGV4dENlbnRlclhEb21SZWYuY3VycmVudCA9XG4gICAgICAgIHN0YWdlQm94LmxlZnQgKyBjZW50ZXJYQ2FudmFzICogdG90YWxTY2FsZVggKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICB9XG5cbiAgICB0b3AgPVxuICAgICAgc3RhZ2VCb3gudG9wICtcbiAgICAgIHJlY3QueSAqIHRvdGFsU2NhbGVZICtcbiAgICAgIHdpbmRvdy5zY3JvbGxZIC1cbiAgICAgIFBBRERJTkdfWTtcbiAgICBsZWZ0ID0gdGV4dENlbnRlclhEb21SZWYuY3VycmVudCAtIGNhcmRXaWR0aCAvIDI7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY2VudGVyWENhbnZhcyA9IHJlY3QueCArIHJlY3Qud2lkdGggLyAyO1xuICAgIGNvbnN0IGNlbnRlcllDYW52YXMgPSByZWN0LnkgKyByZWN0LmhlaWdodCAvIDI7XG5cbiAgICBjb25zdCBjZW50ZXJYRG9tID1cbiAgICAgIHN0YWdlQm94LmxlZnQgKyBjZW50ZXJYQ2FudmFzICogdG90YWxTY2FsZVggKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICBjb25zdCBjZW50ZXJZRG9tID1cbiAgICAgIHN0YWdlQm94LnRvcCArIGNlbnRlcllDYW52YXMgKiB0b3RhbFNjYWxlWSArIHdpbmRvdy5zY3JvbGxZO1xuXG4gICAgY29uc3QgYXBwcm94SGVpZ2h0ID1cbiAgICAgIG5vZGVQcm9wcy5mb250U2l6ZSAqIGtvbnZhTGluZUhlaWdodCAqIHRvdGFsU2NhbGVZICsgUEFERElOR19ZICogMjtcblxuICAgIGxlZnQgPSBjZW50ZXJYRG9tIC0gY2FyZFdpZHRoIC8gMjtcbiAgICB0b3AgPSBjZW50ZXJZRG9tIC0gYXBwcm94SGVpZ2h0IC8gMjtcbiAgfVxuXG4gIGNvbnN0IGVtaXREZWJ1ZyA9IHVzZUNhbGxiYWNrKChldmVudE5hbWUsIGV4dHJhID0ge30pID0+IHtcbiAgICBpZiAoIURFQlVHX01PREUpIHJldHVybjtcbiAgICBjb25zdCBlc3NlbnRpYWxFdmVudHMgPSBuZXcgU2V0KFtcbiAgICAgIFwib3ZlcmxheTogYWZ0ZXItZm9jdXNcIixcbiAgICAgIFwiaW5wdXQ6IGxpbmVicmVha1wiLFxuICAgIF0pO1xuICAgIGlmICghZXNzZW50aWFsRXZlbnRzLmhhcyhldmVudE5hbWUpKSByZXR1cm47XG4gICAgY29uc3QgdHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgZnJhbWVNZXRhID0gbmV4dElubGluZUZyYW1lTWV0YSgpO1xuICAgIGNvbnN0IG92ZXJsYXlFbCA9IGVkaXRvclJlZi5jdXJyZW50Py5wYXJlbnRFbGVtZW50IHx8IG51bGw7XG4gICAgY29uc3Qgb3ZlcmxheVJlY3QgPSBvdmVybGF5RWw/LmdldEJvdW5kaW5nQ2xpZW50UmVjdD8uKCkgfHwgbnVsbDtcbiAgICBjb25zdCBjb250ZW50UmVjdCA9IGVkaXRvclJlZi5jdXJyZW50Py5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpIHx8IG51bGw7XG4gICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGVkaXRvclJlZi5jdXJyZW50XG4gICAgICA/IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVkaXRvclJlZi5jdXJyZW50KVxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGZ1bGxSYW5nZVJlY3QgPSBnZXRGdWxsUmFuZ2VSZWN0KGVkaXRvclJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBzZWxlY3Rpb25JbmZvID0gZ2V0U2VsZWN0aW9uUmVjdEluRWRpdG9yKGVkaXRvclJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBwcm9qZWN0ZWRLb252YVJlY3QgPSB7XG4gICAgICB4OiBzdGFnZUJveC5sZWZ0ICsgcmVjdC54ICogdG90YWxTY2FsZVggKyB3aW5kb3cuc2Nyb2xsWCxcbiAgICAgIHk6IHN0YWdlQm94LnRvcCArIHJlY3QueSAqIHRvdGFsU2NhbGVZICsgd2luZG93LnNjcm9sbFksXG4gICAgICB3aWR0aDogcmVjdC53aWR0aCAqIHRvdGFsU2NhbGVYLFxuICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCAqIHRvdGFsU2NhbGVZLFxuICAgIH07XG4gICAgY29uc3Qgb3ZlcmxheVRvS29udmFEeSA9IG92ZXJsYXlSZWN0XG4gICAgICA/IG92ZXJsYXlSZWN0LnkgLSBwcm9qZWN0ZWRLb252YVJlY3QueVxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGNvbnRlbnRUb0tvbnZhRHkgPSBjb250ZW50UmVjdFxuICAgICAgPyBjb250ZW50UmVjdC55IC0gcHJvamVjdGVkS29udmFSZWN0LnlcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBmdWxsUmFuZ2VUb0NvbnRlbnREeSA9XG4gICAgICBmdWxsUmFuZ2VSZWN0ICYmIGNvbnRlbnRSZWN0ID8gZnVsbFJhbmdlUmVjdC55IC0gY29udGVudFJlY3QueSA6IG51bGw7XG4gICAgY29uc3QgY2FyZXRUb0NvbnRlbnREeSA9XG4gICAgICBzZWxlY3Rpb25JbmZvLmluRWRpdG9yICYmIHNlbGVjdGlvbkluZm8ucmVjdCAmJiBjb250ZW50UmVjdFxuICAgICAgICA/IHNlbGVjdGlvbkluZm8ucmVjdC55IC0gY29udGVudFJlY3QueVxuICAgICAgICA6IG51bGw7XG4gICAgY29uc3QgY2FyZXRQcm9iZVJlY3QgPSBnZXRDb2xsYXBzZWRDYXJldFByb2JlUmVjdEluRWRpdG9yKGVkaXRvclJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBjYXJldFByb2JlVG9Db250ZW50RHkgPVxuICAgICAgY2FyZXRQcm9iZVJlY3QgJiYgY29udGVudFJlY3QgPyBjYXJldFByb2JlUmVjdC55IC0gY29udGVudFJlY3QueSA6IG51bGw7XG4gICAgY29uc3QgY2FyZXRQcm9iZUhlaWdodFB4ID0gY2FyZXRQcm9iZVJlY3QgPyBjYXJldFByb2JlUmVjdC5oZWlnaHQgOiBudWxsO1xuICAgIGNvbnN0IGZpcnN0R2x5cGhSZWN0ID0gZ2V0Rmlyc3RHbHlwaFJlY3RJbkVkaXRvcihlZGl0b3JSZWYuY3VycmVudCk7XG4gICAgY29uc3QgZmlyc3RHbHlwaFRvQ29udGVudER5ID1cbiAgICAgIGZpcnN0R2x5cGhSZWN0ICYmIGNvbnRlbnRSZWN0ID8gZmlyc3RHbHlwaFJlY3QueSAtIGNvbnRlbnRSZWN0LnkgOiBudWxsO1xuICAgIGNvbnN0IGZpcnN0R2x5cGhIZWlnaHRQeCA9IGZpcnN0R2x5cGhSZWN0ID8gZmlyc3RHbHlwaFJlY3QuaGVpZ2h0IDogbnVsbDtcbiAgICBjb25zdCBwcm9iZVRleHQgPSAoXG4gICAgICBpc1NpbmdsZUxpbmVcbiAgICAgICAgPyBub3JtYWxpemVkVmFsdWVGb3JTaW5nbGVMaW5lXG4gICAgICAgIDogKG5vcm1hbGl6ZWRWYWx1ZS5zcGxpdCgvXFxyP1xcbi8pWzBdIHx8IFwiXCIpXG4gICAgKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMEIvZywgXCJcIilcbiAgICAgIC5zbGljZSgwLCAzMikgfHwgXCJIZ0F5XCI7XG4gICAgY29uc3QgY2FudmFzSW5rTWV0cmljcyA9IG1lYXN1cmVDYW52YXNJbmtNZXRyaWNzKHtcbiAgICAgIGZvbnRTdHlsZTogbm9kZVByb3BzLmZvbnRTdHlsZSxcbiAgICAgIGZvbnRXZWlnaHQ6IG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgICAgZm9udFNpemVQeCxcbiAgICAgIGZvbnRGYW1pbHk6IG5vZGVQcm9wcy5mb250RmFtaWx5LFxuICAgICAgcHJvYmVUZXh0LFxuICAgIH0pO1xuICAgIGNvbnN0IGRvbUlua1Byb2JlID0gbWVhc3VyZURvbUlua1Byb2JlKHtcbiAgICAgIGZvbnRTdHlsZTogbm9kZVByb3BzLmZvbnRTdHlsZSxcbiAgICAgIGZvbnRXZWlnaHQ6IG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgICAgZm9udFNpemVQeCxcbiAgICAgIGZvbnRGYW1pbHk6IG5vZGVQcm9wcy5mb250RmFtaWx5LFxuICAgICAgbGluZUhlaWdodFB4OiBlZGl0YWJsZUxpbmVIZWlnaHRQeCxcbiAgICAgIHByb2JlVGV4dCxcbiAgICB9KTtcbiAgICBjb25zdCBjYW52YXNJbmtUb3BJbnNldFB4ID1cbiAgICAgIGNhbnZhc0lua01ldHJpY3MgJiYgTnVtYmVyLmlzRmluaXRlKGNhbnZhc0lua01ldHJpY3MuYWN0dWFsSW5rSGVpZ2h0UHgpXG4gICAgICAgID8gKGVkaXRhYmxlTGluZUhlaWdodFB4IC0gY2FudmFzSW5rTWV0cmljcy5hY3R1YWxJbmtIZWlnaHRQeCkgLyAyXG4gICAgICAgIDogbnVsbDtcbiAgICBjb25zdCBkb21Wc0NhbnZhc1RvcEluc2V0RGVsdGFQeCA9XG4gICAgICBkb21JbmtQcm9iZSAmJiBOdW1iZXIuaXNGaW5pdGUoY2FudmFzSW5rVG9wSW5zZXRQeClcbiAgICAgICAgPyBkb21JbmtQcm9iZS5nbHlwaFRvcEluc2V0UHggLSBjYW52YXNJbmtUb3BJbnNldFB4XG4gICAgICAgIDogbnVsbDtcbiAgICBjb25zdCBsaXZlVnNQcm9iZUdseXBoVG9wRGVsdGFQeCA9XG4gICAgICBOdW1iZXIuaXNGaW5pdGUoZmlyc3RHbHlwaFRvQ29udGVudER5KSAmJiBkb21JbmtQcm9iZVxuICAgICAgICA/IGZpcnN0R2x5cGhUb0NvbnRlbnREeSAtIGRvbUlua1Byb2JlLmdseXBoVG9wSW5zZXRQeFxuICAgICAgICA6IG51bGw7XG5cbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgLi4uZnJhbWVNZXRhLFxuICAgICAgaWQ6IGVkaXRpbmdJZCB8fCBudWxsLFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgdmFsdWVMZW5ndGg6IHJhd1ZhbHVlLmxlbmd0aCxcbiAgICAgIGxlZnQsXG4gICAgICB0b3AsXG4gICAgICBiYXNlVGV4dFdpZHRoLFxuICAgICAgZWZmZWN0aXZlVGV4dFdpZHRoLFxuICAgICAgZmluaXNoTW9kZTogbm9ybWFsaXplZEZpbmlzaE1vZGUsXG4gICAgICB3aWR0aE1vZGU6IG5vcm1hbGl6ZWRXaWR0aE1vZGUsXG4gICAgICBvdmVybGF5UmVjdDogb3ZlcmxheVJlY3RcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB4OiBvdmVybGF5UmVjdC54LFxuICAgICAgICAgICAgeTogb3ZlcmxheVJlY3QueSxcbiAgICAgICAgICAgIHdpZHRoOiBvdmVybGF5UmVjdC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogb3ZlcmxheVJlY3QuaGVpZ2h0LFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgICAgY29udGVudFJlY3Q6IGNvbnRlbnRSZWN0XG4gICAgICAgID8ge1xuICAgICAgICAgICAgeDogY29udGVudFJlY3QueCxcbiAgICAgICAgICAgIHk6IGNvbnRlbnRSZWN0LnksXG4gICAgICAgICAgICB3aWR0aDogY29udGVudFJlY3Qud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGNvbnRlbnRSZWN0LmhlaWdodCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICAgIGNvbnRlbnRTY3JvbGxXaWR0aDogZWRpdG9yUmVmLmN1cnJlbnQ/LnNjcm9sbFdpZHRoID8/IG51bGwsXG4gICAgICBjb250ZW50Q2xpZW50V2lkdGg6IGVkaXRvclJlZi5jdXJyZW50Py5jbGllbnRXaWR0aCA/PyBudWxsLFxuICAgICAgaXNGb2N1c2VkOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlZGl0b3JSZWYuY3VycmVudCxcbiAgICAgIHByb2plY3RlZEtvbnZhUmVjdCxcbiAgICAgIG92ZXJsYXlUb0tvbnZhRHksXG4gICAgICBjb250ZW50VG9Lb252YUR5LFxuICAgICAgZnVsbFJhbmdlUmVjdCxcbiAgICAgIHNlbGVjdGlvbkluRWRpdG9yOiBzZWxlY3Rpb25JbmZvLmluRWRpdG9yLFxuICAgICAgc2VsZWN0aW9uUmVjdDogc2VsZWN0aW9uSW5mby5yZWN0LFxuICAgICAgZnVsbFJhbmdlVG9Db250ZW50RHksXG4gICAgICBjYXJldFRvQ29udGVudER5LFxuICAgICAgY2FyZXRQcm9iZVJlY3QsXG4gICAgICBjYXJldFByb2JlVG9Db250ZW50RHksXG4gICAgICBjYXJldFByb2JlSGVpZ2h0UHgsXG4gICAgICBmaXJzdEdseXBoUmVjdCxcbiAgICAgIGZpcnN0R2x5cGhUb0NvbnRlbnREeSxcbiAgICAgIGZpcnN0R2x5cGhIZWlnaHRQeCxcbiAgICAgIGNvbXB1dGVkRm9udFNpemU6IGNvbXB1dGVkU3R5bGU/LmZvbnRTaXplID8/IG51bGwsXG4gICAgICBjb21wdXRlZExpbmVIZWlnaHQ6IGNvbXB1dGVkU3R5bGU/LmxpbmVIZWlnaHQgPz8gbnVsbCxcbiAgICAgIGNvbXB1dGVkUGFkZGluZ1RvcDogY29tcHV0ZWRTdHlsZT8ucGFkZGluZ1RvcCA/PyBudWxsLFxuICAgICAgY29tcHV0ZWRQYWRkaW5nQm90dG9tOiBjb21wdXRlZFN0eWxlPy5wYWRkaW5nQm90dG9tID8/IG51bGwsXG4gICAgICBjb21wdXRlZEJvcmRlclRvcDogY29tcHV0ZWRTdHlsZT8uYm9yZGVyVG9wV2lkdGggPz8gbnVsbCxcbiAgICAgIGNvbXB1dGVkQm9yZGVyQm90dG9tOiBjb21wdXRlZFN0eWxlPy5ib3JkZXJCb3R0b21XaWR0aCA/PyBudWxsLFxuICAgICAgZm9udFNpemVQeCxcbiAgICAgIGxpbmVIZWlnaHRQeCxcbiAgICAgIGlzU2luZ2xlTGluZSxcbiAgICAgIHZlcnRpY2FsSW5zZXRQeCxcbiAgICAgIGVkaXRhYmxlTGluZUhlaWdodFB4LFxuICAgICAgZWRpdG9yVGFnOiAhZWRpdG9yUmVmLmN1cnJlbnRcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogZWRpdG9yUmVmLmN1cnJlbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgICAgPyBcImlucHV0XCJcbiAgICAgICAgICA6IFwiY29udGVudEVkaXRhYmxlXCIsXG4gICAgICBub3JtYWxpemVkVmFsdWVMZW5ndGg6IGlzU2luZ2xlTGluZVxuICAgICAgICA/IG5vcm1hbGl6ZWRWYWx1ZUZvclNpbmdsZUxpbmUubGVuZ3RoXG4gICAgICAgIDogbm9ybWFsaXplZFZhbHVlLmxlbmd0aCxcbiAgICAgIGhhZFRyYWlsaW5nTmV3bGluZTpcbiAgICAgICAgaXNTaW5nbGVMaW5lICYmIG5vcm1hbGl6ZWRWYWx1ZUZvclNpbmdsZUxpbmUubGVuZ3RoICE9PSBub3JtYWxpemVkVmFsdWUubGVuZ3RoLFxuICAgICAgY2FudmFzSW5rTWV0cmljcyxcbiAgICAgIGRvbUlua1Byb2JlLFxuICAgICAgY2FudmFzSW5rVG9wSW5zZXRQeDogcm91bmRNZXRyaWMoY2FudmFzSW5rVG9wSW5zZXRQeCksXG4gICAgICBkb21Wc0NhbnZhc1RvcEluc2V0RGVsdGFQeDogcm91bmRNZXRyaWMoZG9tVnNDYW52YXNUb3BJbnNldERlbHRhUHgpLFxuICAgICAgbGl2ZVZzUHJvYmVHbHlwaFRvcERlbHRhUHg6IHJvdW5kTWV0cmljKGxpdmVWc1Byb2JlR2x5cGhUb3BEZWx0YVB4KSxcbiAgICAgIGxheW91dE1vZGVsVmVyc2lvbjogSU5MSU5FX0xBWU9VVF9WRVJTSU9OLFxuICAgICAgLi4uZXh0cmEsXG4gICAgfTtcblxuICAgIGNvbnN0IGJvZHkgPSBmb3JtYXRJbmxpbmVMb2dQYXlsb2FkKHBheWxvYWQpO1xuICAgIGNvbnNvbGUubG9nKGBbSU5MSU5FXVske3RzfV0gJHtldmVudE5hbWV9XFxuJHtib2R5fWApO1xuICAgIGlmICh0eXBlb2Ygb25EZWJ1Z0V2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIG9uRGVidWdFdmVudChldmVudE5hbWUsIHBheWxvYWQpO1xuICAgIH1cbiAgfSwgW1xuICAgIERFQlVHX01PREUsXG4gICAgZWRpdGluZ0lkLFxuICAgIHJhd1ZhbHVlLFxuICAgIG5vcm1hbGl6ZWRWYWx1ZSxcbiAgICBub3JtYWxpemVkVmFsdWVGb3JTaW5nbGVMaW5lLFxuICAgIGxlZnQsXG4gICAgdG9wLFxuICAgIGJhc2VUZXh0V2lkdGgsXG4gICAgZWZmZWN0aXZlVGV4dFdpZHRoLFxuICAgIG5vcm1hbGl6ZWRGaW5pc2hNb2RlLFxuICAgIG5vcm1hbGl6ZWRXaWR0aE1vZGUsXG4gICAgb25EZWJ1Z0V2ZW50LFxuICAgIHN0YWdlQm94LmxlZnQsXG4gICAgc3RhZ2VCb3gudG9wLFxuICAgIHJlY3QueCxcbiAgICByZWN0LnksXG4gICAgcmVjdC53aWR0aCxcbiAgICByZWN0LmhlaWdodCxcbiAgICB0b3RhbFNjYWxlWCxcbiAgICB0b3RhbFNjYWxlWSxcbiAgICBmb250U2l6ZVB4LFxuICAgIGxpbmVIZWlnaHRQeCxcbiAgICBpc1NpbmdsZUxpbmUsXG4gICAgdmVydGljYWxJbnNldFB4LFxuICAgIGVkaXRhYmxlTGluZUhlaWdodFB4LFxuICBdKTtcblxuICAvLyBJbmljaWFsaXphciBjb250ZW5pZG8gKyBmb2NvICsgY2FyZXQgYW50ZXMgZGVsIHByaW1lciBwYWludCB2aXNpYmxlXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWwgPSBlZGl0b3JSZWYuY3VycmVudDtcbiAgICBpZiAoIWVsKSByZXR1cm47XG5cbiAgICBsZXQgaW5pdGlhbFRleHQgPSBub3JtYWxpemVkVmFsdWU7XG5cbiAgICBpZiAod2luZG93Ll9wcmVGaWxsQ2hhcikge1xuICAgICAgaW5pdGlhbFRleHQgPSAoaW5pdGlhbFRleHQgfHwgXCJcIikgKyB3aW5kb3cuX3ByZUZpbGxDaGFyO1xuICAgICAgb25DaGFuZ2UoaW5pdGlhbFRleHQpO1xuICAgICAgd2luZG93Ll9wcmVGaWxsQ2hhciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgZWwudmFsdWUgPSBpbml0aWFsVGV4dDtcbiAgICAgIGVtaXREZWJ1ZyhcIm92ZXJsYXk6IGJlZm9yZS1mb2N1c1wiKTtcbiAgICAgIGVsLmZvY3VzKCk7XG4gICAgICBjb25zdCBsZW4gPSBpbml0aWFsVGV4dC5sZW5ndGg7XG4gICAgICB0cnkge1xuICAgICAgICBlbC5zZXRTZWxlY3Rpb25SYW5nZShsZW4sIGxlbik7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gbm8tb3BcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuaW5uZXJUZXh0ID0gaW5pdGlhbFRleHQ7XG4gICAgICBlbWl0RGVidWcoXCJvdmVybGF5OiBiZWZvcmUtZm9jdXNcIik7XG4gICAgICBlbC5mb2N1cygpO1xuICAgICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsKTtcbiAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTtcbiAgICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvbk92ZXJsYXlNb3VudENoYW5nZSA9PT0gXCJmdW5jdGlvblwiICYmIGVkaXRpbmdJZCkge1xuICAgICAgb25PdmVybGF5TW91bnRDaGFuZ2UoZWRpdGluZ0lkLCB0cnVlKTtcbiAgICB9XG4gICAgZW1pdERlYnVnKFwib3ZlcmxheTogYWZ0ZXItZm9jdXNcIik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGVtaXREZWJ1ZyhcIm92ZXJsYXk6IGJlZm9yZS11bm1vdW50XCIpO1xuICAgICAgY29uc3QgY2xvc2luZ0lkID0gZWRpdGluZ0lkIHx8IG51bGw7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCBzYWZlSWQgPSBTdHJpbmcoY2xvc2luZ0lkIHx8IFwiXCIpLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcbiAgICAgICAgY29uc3Qgb3ZlcmxheVN0aWxsUHJlc2VudCA9IHNhZmVJZFxuICAgICAgICAgID8gQm9vbGVhbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmxpbmUtZWRpdG9yLWlkPVwiJHtzYWZlSWR9XCJdYCkpXG4gICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgZW1pdERlYnVnKFwib3ZlcmxheTogYWZ0ZXItdW5tb3VudC1yYWZcIiwge1xuICAgICAgICAgIGlkOiBjbG9zaW5nSWQsXG4gICAgICAgICAgb3ZlcmxheVN0aWxsUHJlc2VudCxcbiAgICAgICAgICBjdXJyZW50RWRpdGluZ0lkOiB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbCxcbiAgICAgICAgICBnbG9iYWxFZGl0aW5nSWQ6IHdpbmRvdy5lZGl0aW5nPy5pZCA/PyBudWxsLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBvbk92ZXJsYXlNb3VudENoYW5nZSA9PT0gXCJmdW5jdGlvblwiICYmIGVkaXRpbmdJZCkge1xuICAgICAgICBvbk92ZXJsYXlNb3VudENoYW5nZShlZGl0aW5nSWQsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbZWRpdGluZ0lkXSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbCA9IGVkaXRvclJlZi5jdXJyZW50O1xuICAgIGlmICghZWwpIHJldHVybjtcbiAgICBlbC5zY3JvbGxMZWZ0ID0gMDtcbiAgICBlbC5zY3JvbGxUb3AgPSAwO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdHJpZ2dlckZpbmlzaCA9IHVzZUNhbGxiYWNrKCh0cmlnZ2VyID0gXCJibHVyXCIpID0+IHtcbiAgICBlbWl0RGVidWcoXCJmaW5pc2g6IGJsdXJcIiwge1xuICAgICAgaWQ6IGVkaXRpbmdJZCB8fCBudWxsLFxuICAgICAgbW9kZTogbm9ybWFsaXplZEZpbmlzaE1vZGUsXG4gICAgICB0cmlnZ2VyLFxuICAgIH0pO1xuICAgIGlmIChub3JtYWxpemVkRmluaXNoTW9kZSA9PT0gXCJpbW1lZGlhdGVcIikge1xuICAgICAgb25GaW5pc2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG5vcm1hbGl6ZWRGaW5pc2hNb2RlID09PSBcInJhZlwiKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBvbkZpbmlzaCgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFRpbWVvdXQob25GaW5pc2gsIDEwMCk7XG4gIH0sIFtlZGl0aW5nSWQsIGVtaXREZWJ1Zywgbm9ybWFsaXplZEZpbmlzaE1vZGUsIG9uRmluaXNoXSk7XG5cbiAgcmV0dXJuIGNyZWF0ZVBvcnRhbChcbiAgICA8PlxuICAgICAgPGRpdlxuICAgICAgICBkYXRhLWlubGluZS1lZGl0b3ItaWQ9e2VkaXRpbmdJZCB8fCBcIlwifVxuICAgICAgICBkYXRhLWlubGluZS1lZGl0b3I9XCJ0cnVlXCJcbiAgICAgICAgZGF0YS1pbmxpbmUtd2lkdGgtbW9kZT17bm9ybWFsaXplZFdpZHRoTW9kZX1cbiAgICAgICAgZGF0YS1pbmxpbmUtZmluaXNoLW1vZGU9e25vcm1hbGl6ZWRGaW5pc2hNb2RlfVxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgICAgbGVmdDogYCR7bGVmdH1weGAsXG4gICAgICAgICAgdG9wOiBgJHt0b3B9cHhgLFxuICAgICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiLFxuICAgICAgICAgIHdpZHRoOlxuICAgICAgICAgICAgbm9ybWFsaXplZFdpZHRoTW9kZSA9PT0gXCJtZWFzdXJlZFwiXG4gICAgICAgICAgICAgID8gYCR7ZWZmZWN0aXZlVGV4dFdpZHRofXB4YFxuICAgICAgICAgICAgICA6IFwiZml0LWNvbnRlbnRcIixcbiAgICAgICAgICBtaW5XaWR0aDogYCR7bWluV2lkdGhQeH1weGAsXG4gICAgICAgICAgbWF4V2lkdGg6IFwibWluKDEwMHZ3IC0gNDBweCwgMTIwMHB4KVwiLFxuICAgICAgICAgIGJhY2tncm91bmQ6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IDAsXG4gICAgICAgICAgYm94U2hhZG93OiBcIm5vbmVcIixcbiAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgIHBhZGRpbmc6IGAke1BBRERJTkdfWX1weCAke1BBRERJTkdfWH1weGAsXG4gICAgICAgICAgekluZGV4OiA5OTk5LFxuICAgICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICByZWY9e2VkaXRvclJlZn1cbiAgICAgICAgICBjb250ZW50RWRpdGFibGVcbiAgICAgICAgICBzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmdcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0b3BcIixcbiAgICAgICAgICAgIHdpZHRoOlxuICAgICAgICAgICAgICBub3JtYWxpemVkV2lkdGhNb2RlID09PSBcIm1lYXN1cmVkXCJcbiAgICAgICAgICAgICAgICA/IGAke2VmZmVjdGl2ZVRleHRXaWR0aH1weGBcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1pbldpZHRoOiBgJHttaW5XaWR0aFB4fXB4YCxcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlXCIsXG4gICAgICAgICAgICBvdmVyZmxvd1dyYXA6IFwibm9ybWFsXCIsXG4gICAgICAgICAgICB3b3JkQnJlYWs6IFwibm9ybWFsXCIsXG4gICAgICAgICAgICBvdmVyZmxvdzogXCJ2aXNpYmxlXCIsXG4gICAgICAgICAgICBmb250U2l6ZTogYCR7Zm9udFNpemVQeH1weGAsXG4gICAgICAgICAgICBmb250RmFtaWx5OiBub2RlUHJvcHMuZm9udEZhbWlseSxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6IG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgICAgICAgICAgZm9udFN0eWxlOiBub2RlUHJvcHMuZm9udFN0eWxlLFxuICAgICAgICAgICAgbGluZUhlaWdodDogYCR7ZWRpdGFibGVMaW5lSGVpZ2h0UHh9cHhgLFxuICAgICAgICAgICAgbWluSGVpZ2h0OiBgJHtsaW5lSGVpZ2h0UHh9cHhgLFxuICAgICAgICAgICAgY29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgIGNhcmV0Q29sb3I6IG5vZGVQcm9wcy5maWxsLFxuICAgICAgICAgICAgV2Via2l0VGV4dEZpbGxDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAwLFxuICAgICAgICAgICAgcGFkZGluZ1RvcDogYCR7dmVydGljYWxJbnNldFB4fXB4YCxcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IGAke3ZlcnRpY2FsSW5zZXRQeH1weGAsXG4gICAgICAgICAgICBwYWRkaW5nTGVmdDogMCxcbiAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMCxcbiAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgIG91dGxpbmU6IFwibm9uZVwiLFxuICAgICAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgICAgIHRleHRBbGlnbjogdGV4dEFsaWduIHx8IFwibGVmdFwiLFxuICAgICAgICAgIH19XG4gICAgICAgICAgb25JbnB1dD17KGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRvbVJhdyA9IFN0cmluZyhlLmN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0IHx8IFwiXCIpO1xuICAgICAgICAgICAgY29uc3QgZG9tTm9ybWFsaXplZCA9IGRvbVJhd1xuICAgICAgICAgICAgICAucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHUyMDBCL2csIFwiXCIpO1xuICAgICAgICAgICAgY29uc3QgbmV4dFZhbHVlID0gbm9ybWFsaXplRWRpdG9yVGV4dChkb21SYXcpO1xuICAgICAgICAgICAgY29uc3QgcHJldlZhbHVlID0gbm9ybWFsaXplZFZhbHVlO1xuXG4gICAgICAgICAgICBjb25zdCBwcmV2TGluZUNvdW50ID0gY291bnRMaW5lcyhwcmV2VmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgbmV4dExpbmVDb3VudCA9IGNvdW50TGluZXMobmV4dFZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZUcmFpbGluZ05ld2xpbmVzID0gY291bnRUcmFpbGluZ05ld2xpbmVzKHByZXZWYWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBuZXh0VHJhaWxpbmdOZXdsaW5lcyA9IGNvdW50VHJhaWxpbmdOZXdsaW5lcyhuZXh0VmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgZG9tTGluZUNvdW50ID0gY291bnRMaW5lcyhkb21Ob3JtYWxpemVkKTtcbiAgICAgICAgICAgIGNvbnN0IGRvbVRyYWlsaW5nTmV3bGluZXMgPSBjb3VudFRyYWlsaW5nTmV3bGluZXMoZG9tTm9ybWFsaXplZCk7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemF0aW9uQ2hhbmdlZCA9IGRvbU5vcm1hbGl6ZWQgIT09IG5leHRWYWx1ZTtcblxuICAgICAgICAgICAgb25DaGFuZ2UobmV4dFZhbHVlKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBwcmV2TGluZUNvdW50ICE9PSBuZXh0TGluZUNvdW50IHx8XG4gICAgICAgICAgICAgIHByZXZUcmFpbGluZ05ld2xpbmVzICE9PSBuZXh0VHJhaWxpbmdOZXdsaW5lcyB8fFxuICAgICAgICAgICAgICBub3JtYWxpemF0aW9uQ2hhbmdlZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGVtaXREZWJ1ZyhcImlucHV0OiBsaW5lYnJlYWtcIiwge1xuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJ1bmlmaWVkLWNvbnRlbnRFZGl0YWJsZVwiLFxuICAgICAgICAgICAgICAgIHByZXZMZW5ndGg6IHByZXZWYWx1ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbmV4dExlbmd0aDogbmV4dFZhbHVlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBwcmV2TGluZUNvdW50LFxuICAgICAgICAgICAgICAgIG5leHRMaW5lQ291bnQsXG4gICAgICAgICAgICAgICAgcHJldlRyYWlsaW5nTmV3bGluZXMsXG4gICAgICAgICAgICAgICAgbmV4dFRyYWlsaW5nTmV3bGluZXMsXG4gICAgICAgICAgICAgICAgZG9tTGVuZ3RoOiBkb21Ob3JtYWxpemVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBkb21MaW5lQ291bnQsXG4gICAgICAgICAgICAgICAgZG9tVHJhaWxpbmdOZXdsaW5lcyxcbiAgICAgICAgICAgICAgICBub3JtYWxpemF0aW9uQ2hhbmdlZCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiAhZS5pc0NvbXBvc2luZykge1xuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgb25CbHVyPXsoKSA9PiB7XG4gICAgICAgICAgICB0cmlnZ2VyRmluaXNoKFwiYmx1clwiKTtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgPC8+LFxuICAgIGRvY3VtZW50LmJvZHlcbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVQb3J0YWwiLCJ1c2VNZW1vIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlTGF5b3V0RWZmZWN0IiwidXNlQ2FsbGJhY2siLCJpc0lubGluZURlYnVnRW5hYmxlZCIsIndpbmRvdyIsIl9fSU5MSU5FX0RFQlVHIiwiZm9ybWF0SW5saW5lTG9nUGF5bG9hZCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJTdHJpbmciLCJuZXh0SW5saW5lRnJhbWVNZXRhIiwiZnJhbWUiLCJwZXJmTXMiLCJwcmV2IiwiTnVtYmVyIiwiX19JTkxJTkVfRlJBTUVfU0VRIiwibmV4dCIsInBlcmZvcm1hbmNlIiwibm93IiwidG9GaXhlZCIsIm5vcm1hbGl6ZUZpbmlzaE1vZGUiLCJtb2RlIiwibm9ybWFsaXplV2lkdGhNb2RlIiwibm9ybWFsaXplRWRpdG9yVGV4dCIsInJhd1RleHQiLCJ0cmltUGhhbnRvbVRyYWlsaW5nTmV3bGluZSIsIm5vcm1hbGl6ZWQiLCJyZXBsYWNlIiwidHJhaWxpbmdOZXdsaW5lcyIsIm1hdGNoIiwibGVuZ3RoIiwic2xpY2UiLCJjb3VudExpbmVzIiwidGV4dCIsInNwbGl0IiwiY291bnRUcmFpbGluZ05ld2xpbmVzIiwidHJhaWxpbmciLCJyZWN0VG9QYXlsb2FkIiwicmVjdCIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJnZXRGdWxsUmFuZ2VSZWN0IiwiZWwiLCJIVE1MSW5wdXRFbGVtZW50IiwicmFuZ2UiLCJkb2N1bWVudCIsImNyZWF0ZVJhbmdlIiwic2VsZWN0Tm9kZUNvbnRlbnRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0U2VsZWN0aW9uUmVjdEluRWRpdG9yIiwiaW5FZGl0b3IiLCJpc0ZvY3VzZWQiLCJhY3RpdmVFbGVtZW50Iiwic2VsIiwiZ2V0U2VsZWN0aW9uIiwicmFuZ2VDb3VudCIsImdldFJhbmdlQXQiLCJzdGFydEluIiwiY29udGFpbnMiLCJzdGFydENvbnRhaW5lciIsImVuZEluIiwiZW5kQ29udGFpbmVyIiwiZ2V0Q29sbGFwc2VkQ2FyZXRQcm9iZVJlY3RJbkVkaXRvciIsIm9yaWdpbmFsUmFuZ2UiLCJtYXJrZXIiLCJhY3RpdmVSYW5nZSIsImNsb25lUmFuZ2UiLCJwcm9iZVJhbmdlIiwiY29sbGFwc2UiLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJwYWRkaW5nIiwibWFyZ2luIiwiYm9yZGVyIiwibGluZUhlaWdodCIsInBvaW50ZXJFdmVudHMiLCJpbnNlcnROb2RlIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwibm9ybWFsaXplIiwicmVtb3ZlQWxsUmFuZ2VzIiwiYWRkUmFuZ2UiLCJyb3VuZE1ldHJpYyIsInZhbHVlIiwiZGlnaXRzIiwiaXNGaW5pdGUiLCJnZXRGaXJzdEdseXBoUmVjdEluRWRpdG9yIiwid2Fsa2VyIiwiY3JlYXRlVHJlZVdhbGtlciIsIk5vZGVGaWx0ZXIiLCJTSE9XX1RFWFQiLCJ0ZXh0Tm9kZSIsIm5leHROb2RlIiwibm9kZSIsImN1cnJlbnROb2RlIiwibm9kZVZhbHVlIiwic2V0U3RhcnQiLCJzZXRFbmQiLCJNYXRoIiwibWluIiwibWVhc3VyZUNhbnZhc0lua01ldHJpY3MiLCJmb250U3R5bGUiLCJmb250V2VpZ2h0IiwiZm9udFNpemVQeCIsImZvbnRGYW1pbHkiLCJwcm9iZVRleHQiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0Iiwic2FmZUZhbWlseSIsImZhbWlseUZvckNhbnZhcyIsImluY2x1ZGVzIiwidGVzdCIsImZvbnQiLCJtIiwibWVhc3VyZVRleHQiLCJhc2NlbnQiLCJhY3R1YWxCb3VuZGluZ0JveEFzY2VudCIsImRlc2NlbnQiLCJhY3R1YWxCb3VuZGluZ0JveERlc2NlbnQiLCJpbmtIZWlnaHQiLCJmb250QXNjZW50IiwiZm9udEJvdW5kaW5nQm94QXNjZW50IiwiZm9udERlc2NlbnQiLCJmb250Qm91bmRpbmdCb3hEZXNjZW50IiwiYWN0dWFsQXNjZW50UHgiLCJhY3R1YWxEZXNjZW50UHgiLCJhY3R1YWxJbmtIZWlnaHRQeCIsImZvbnRBc2NlbnRQeCIsImZvbnREZXNjZW50UHgiLCJmb250Qm94SGVpZ2h0UHgiLCJtZWFzdXJlRG9tSW5rUHJvYmUiLCJsaW5lSGVpZ2h0UHgiLCJob3N0IiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwid2hpdGVTcGFjZSIsImZvbnRTaXplIiwiYm94U2l6aW5nIiwidXNlclNlbGVjdCIsInNwYW4iLCJhcHBlbmRDaGlsZCIsImJvZHkiLCJob3N0UmVjdCIsInNwYW5SZWN0IiwiaG9zdEhlaWdodFB4IiwiZ2x5cGhIZWlnaHRQeCIsImdseXBoVG9wSW5zZXRQeCIsImdseXBoQm90dG9tSW5zZXRQeCIsImJvdHRvbSIsIklOTElORV9MQVlPVVRfVkVSU0lPTiIsIklubGluZVRleHRFZGl0b3IiLCJlZGl0aW5nSWQiLCJvbkNoYW5nZSIsIm9uRmluaXNoIiwidGV4dEFsaWduIiwic2NhbGVWaXN1YWwiLCJmaW5pc2hNb2RlIiwid2lkdGhNb2RlIiwib25PdmVybGF5TW91bnRDaGFuZ2UiLCJvbkRlYnVnRXZlbnQiLCJlZGl0b3JSZWYiLCJ0ZXh0Q2VudGVyWERvbVJlZiIsIkRFQlVHX01PREUiLCJub3JtYWxpemVkRmluaXNoTW9kZSIsIm5vcm1hbGl6ZWRXaWR0aE1vZGUiLCJzdGFnZSIsImdldFN0YWdlIiwic3RhZ2VCb3giLCJjb250YWluZXIiLCJzdGFnZVNjYWxlWCIsInNjYWxlWCIsInN0YWdlU2NhbGVZIiwic2NhbGVZIiwidG90YWxTY2FsZVgiLCJ0b3RhbFNjYWxlWSIsImdldENsYXNzTmFtZSIsImNscyIsIm5vZGVJZCIsImlkIiwiYXR0cnMiLCJmaW5kT25lIiwicGFpcmVkVGV4dCIsImZvdW5kIiwibiIsImZpbmRBbmNlc3RvciIsImFuY2VzdG9yVGV4dCIsImNvbnNvbGUiLCJ3YXJuIiwibm9kZVByb3BzIiwiZ2V0UHJvcCIsImdldHRlck5hbWUiLCJmYWxsYmFjayIsImZuIiwiY2FsbCIsImZpbGwiLCJsaW5lSGVpZ2h0S29udmEiLCJrb252YUxpbmVIZWlnaHQiLCJyZWN0U291cmNlTm9kZSIsImdldENsaWVudFJlY3QiLCJyZWxhdGl2ZVRvIiwic2tpcFN0cm9rZSIsIlBBRERJTkdfWCIsIlBBRERJTkdfWSIsIm1heCIsInJhd1ZhbHVlIiwibm9ybWFsaXplZFZhbHVlIiwibm9ybWFsaXplZFZhbHVlRm9yU2luZ2xlTGluZSIsImlzU2luZ2xlTGluZSIsInZlcnRpY2FsSW5zZXRQeCIsImVkaXRhYmxlTGluZUhlaWdodFB4IiwiY2xhc3NOYW1lIiwiaXNUZXh0Tm9kZSIsImJhc2VUZXh0V2lkdGgiLCJtZWFzdXJlZENvbnRlbnRXaWR0aCIsInNhZmVGb250RmFtaWx5IiwiZm9udEZhbWlseUZvckNhbnZhcyIsInRleHRWYWx1ZSIsImxpbmVzIiwibWF4TGluZVdpZHRoIiwibWFwIiwibGluZSIsImNlaWwiLCJlZmZlY3RpdmVUZXh0V2lkdGgiLCJtaW5XaWR0aFB4IiwiY2FyZFdpZHRoIiwiY3VycmVudCIsImNlbnRlclhDYW52YXMiLCJzY3JvbGxYIiwic2Nyb2xsWSIsImNlbnRlcllDYW52YXMiLCJjZW50ZXJYRG9tIiwiY2VudGVyWURvbSIsImFwcHJveEhlaWdodCIsImVtaXREZWJ1ZyIsImV2ZW50TmFtZSIsImV4dHJhIiwiZXNzZW50aWFsRXZlbnRzIiwiU2V0IiwiaGFzIiwidHMiLCJEYXRlIiwidG9JU09TdHJpbmciLCJmcmFtZU1ldGEiLCJvdmVybGF5RWwiLCJwYXJlbnRFbGVtZW50Iiwib3ZlcmxheVJlY3QiLCJjb250ZW50UmVjdCIsImNvbXB1dGVkU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZnVsbFJhbmdlUmVjdCIsInNlbGVjdGlvbkluZm8iLCJwcm9qZWN0ZWRLb252YVJlY3QiLCJvdmVybGF5VG9Lb252YUR5IiwiY29udGVudFRvS29udmFEeSIsImZ1bGxSYW5nZVRvQ29udGVudER5IiwiY2FyZXRUb0NvbnRlbnREeSIsImNhcmV0UHJvYmVSZWN0IiwiY2FyZXRQcm9iZVRvQ29udGVudER5IiwiY2FyZXRQcm9iZUhlaWdodFB4IiwiZmlyc3RHbHlwaFJlY3QiLCJmaXJzdEdseXBoVG9Db250ZW50RHkiLCJmaXJzdEdseXBoSGVpZ2h0UHgiLCJjYW52YXNJbmtNZXRyaWNzIiwiZG9tSW5rUHJvYmUiLCJjYW52YXNJbmtUb3BJbnNldFB4IiwiZG9tVnNDYW52YXNUb3BJbnNldERlbHRhUHgiLCJsaXZlVnNQcm9iZUdseXBoVG9wRGVsdGFQeCIsInZhbHVlTGVuZ3RoIiwiY29udGVudFNjcm9sbFdpZHRoIiwic2Nyb2xsV2lkdGgiLCJjb250ZW50Q2xpZW50V2lkdGgiLCJjbGllbnRXaWR0aCIsInNlbGVjdGlvbkluRWRpdG9yIiwic2VsZWN0aW9uUmVjdCIsImNvbXB1dGVkRm9udFNpemUiLCJjb21wdXRlZExpbmVIZWlnaHQiLCJjb21wdXRlZFBhZGRpbmdUb3AiLCJwYWRkaW5nVG9wIiwiY29tcHV0ZWRQYWRkaW5nQm90dG9tIiwicGFkZGluZ0JvdHRvbSIsImNvbXB1dGVkQm9yZGVyVG9wIiwiYm9yZGVyVG9wV2lkdGgiLCJjb21wdXRlZEJvcmRlckJvdHRvbSIsImJvcmRlckJvdHRvbVdpZHRoIiwiZWRpdG9yVGFnIiwibm9ybWFsaXplZFZhbHVlTGVuZ3RoIiwiaGFkVHJhaWxpbmdOZXdsaW5lIiwibGF5b3V0TW9kZWxWZXJzaW9uIiwibG9nIiwiaW5pdGlhbFRleHQiLCJfcHJlRmlsbENoYXIiLCJmb2N1cyIsImxlbiIsInNldFNlbGVjdGlvblJhbmdlIiwiaW5uZXJUZXh0IiwiY2xvc2luZ0lkIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2FmZUlkIiwib3ZlcmxheVN0aWxsUHJlc2VudCIsIkJvb2xlYW4iLCJxdWVyeVNlbGVjdG9yIiwiY3VycmVudEVkaXRpbmdJZCIsIl9jdXJyZW50RWRpdGluZ0lkIiwiZ2xvYmFsRWRpdGluZ0lkIiwiZWRpdGluZyIsInNjcm9sbExlZnQiLCJzY3JvbGxUb3AiLCJ0cmlnZ2VyRmluaXNoIiwidHJpZ2dlciIsInNldFRpbWVvdXQiLCJkaXYiLCJkYXRhLWlubGluZS1lZGl0b3ItaWQiLCJkYXRhLWlubGluZS1lZGl0b3IiLCJkYXRhLWlubGluZS13aWR0aC1tb2RlIiwiZGF0YS1pbmxpbmUtZmluaXNoLW1vZGUiLCJ2ZXJ0aWNhbEFsaWduIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImJhY2tncm91bmQiLCJib3JkZXJSYWRpdXMiLCJib3hTaGFkb3ciLCJ6SW5kZXgiLCJyZWYiLCJjb250ZW50RWRpdGFibGUiLCJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciLCJ1bmRlZmluZWQiLCJvdmVyZmxvd1dyYXAiLCJ3b3JkQnJlYWsiLCJvdmVyZmxvdyIsIm1pbkhlaWdodCIsImNvbG9yIiwiY2FyZXRDb2xvciIsIldlYmtpdFRleHRGaWxsQ29sb3IiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsIm91dGxpbmUiLCJvbklucHV0IiwiZSIsImRvbVJhdyIsImN1cnJlbnRUYXJnZXQiLCJkb21Ob3JtYWxpemVkIiwibmV4dFZhbHVlIiwicHJldlZhbHVlIiwicHJldkxpbmVDb3VudCIsIm5leHRMaW5lQ291bnQiLCJwcmV2VHJhaWxpbmdOZXdsaW5lcyIsIm5leHRUcmFpbGluZ05ld2xpbmVzIiwiZG9tTGluZUNvdW50IiwiZG9tVHJhaWxpbmdOZXdsaW5lcyIsIm5vcm1hbGl6YXRpb25DaGFuZ2VkIiwic291cmNlIiwicHJldkxlbmd0aCIsIm5leHRMZW5ndGgiLCJkb21MZW5ndGgiLCJvbktleURvd24iLCJrZXkiLCJpc0NvbXBvc2luZyIsInN0b3BQcm9wYWdhdGlvbiIsIm9uQmx1ciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/InlineTextEditor.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/LineControls.jsx":
/*!*****************************************!*\
  !*** ./src/components/LineControls.jsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LineControls)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _drag_dragGrupal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/drag/dragGrupal */ \"(pages-dir-node)/./src/drag/dragGrupal.js\");\n/* harmony import */ var _components_editor_mobile_useIsTouchLike__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/editor/mobile/useIsTouchLike */ \"(pages-dir-node)/./src/components/editor/mobile/useIsTouchLike.js\");\n// LineControls.jsx - Versión optimizada para transformación fluida\n\n\n\n\n\n// 🚀 Utilidad para forzar repintado rápido\nconst batchDraw = (node)=>node.getLayer() && node.getLayer().batchDraw();\nconst DEBUG_LINE_CONTROLS = false;\nconst lcLog = (...args)=>{\n    if (!DEBUG_LINE_CONTROLS) return;\n    console.log(...args);\n};\nconst lcError = (...args)=>{\n    if (!DEBUG_LINE_CONTROLS) return;\n    console.error(...args);\n};\nfunction LineControls({ lineElement, elementRefs, onUpdateLine, altoCanvas, isDragGrupalActive = false, elementosSeleccionados = [], isMobile = false }) {\n    const [draggingPoint, setDraggingPoint] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const dragStartPos = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const [lineBeingDragged, setLineBeingDragged] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isGroupDrag, setIsGroupDrag] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const isTouchLike = (0,_components_editor_mobile_useIsTouchLike__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(isMobile);\n    const pointRadius = isTouchLike ? 12 : 10;\n    const pointHitStrokeWidth = isTouchLike ? 44 : 28;\n    const [nodePos, setNodePos] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n        x: lineElement?.x || 0,\n        y: lineElement?.y || 0\n    });\n    // 🔥 CACHE PARA EVITAR RECÁLCULOS INNECESARIOS\n    const pointsCache = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const lastUpdateTime = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    const isValidLine = !!lineElement && lineElement.tipo === \"forma\" && lineElement.figura === \"line\";\n    const lineId = lineElement?.id ?? null;\n    const nodeRef = lineId ? elementRefs.current?.[lineId] : null;\n    // 🔥 SYNC OPTIMIZADO CON THROTTLE\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"LineControls.useEffect\": ()=>{\n            if (!isValidLine || !nodeRef) return;\n            const syncPos = {\n                \"LineControls.useEffect.syncPos\": ()=>{\n                    // 🚀 THROTTLE: Solo actualizar cada 8ms (120fps máximo)\n                    const now = performance.now();\n                    if (now - lastUpdateTime.current < 8) return;\n                    lastUpdateTime.current = now;\n                    setNodePos({\n                        x: nodeRef.x(),\n                        y: nodeRef.y()\n                    });\n                }\n            }[\"LineControls.useEffect.syncPos\"];\n            syncPos();\n            nodeRef.on('dragmove', syncPos);\n            return ({\n                \"LineControls.useEffect\": ()=>{\n                    nodeRef.off('dragmove', syncPos);\n                }\n            })[\"LineControls.useEffect\"];\n        }\n    }[\"LineControls.useEffect\"], [\n        isValidLine,\n        nodeRef\n    ]);\n    // 🔥 DETECTAR DRAG GRUPAL MEJORADO\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"LineControls.useEffect\": ()=>{\n            if (!isValidLine || !lineId) {\n                setIsGroupDrag(false);\n                return;\n            }\n            const isPartOfMultipleSelection = elementosSeleccionados.length > 1;\n            const isThisLineSelected = elementosSeleccionados.includes(lineId);\n            setIsGroupDrag(isDragGrupalActive && isPartOfMultipleSelection && isThisLineSelected);\n        }\n    }[\"LineControls.useEffect\"], [\n        isValidLine,\n        isDragGrupalActive,\n        elementosSeleccionados,\n        lineId\n    ]);\n    // 🔥 DETECTAR DRAG DE LÍNEA Y COORDINACIÓN CON DRAG GRUPAL\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"LineControls.useEffect\": ()=>{\n            if (!isValidLine || !nodeRef || !lineId) return;\n            const handleDragStart = {\n                \"LineControls.useEffect.handleDragStart\": (e)=>{\n                    lcLog(\"🎬 [LINE CONTROLS] Drag start para línea:\", lineId);\n                    setLineBeingDragged(true);\n                    // 🎯 COORDINACIÓN CON DRAG GRUPAL\n                    const elementosSeleccionados = window._elementosSeleccionados || [];\n                    lcLog(\"📋 [LINE CONTROLS] Elementos seleccionados:\", elementosSeleccionados);\n                    lcLog(\"📏 [LINE CONTROLS] ¿Esta línea está en selección?\", elementosSeleccionados.includes(lineId));\n                    lcLog(\"🔢 [LINE CONTROLS] ¿Múltiples elementos?\", elementosSeleccionados.length > 1);\n                    if (elementosSeleccionados.length > 1 && elementosSeleccionados.includes(lineId)) {\n                        lcLog(\"🎯 [LINE CONTROLS] Intentando iniciar drag grupal desde línea...\");\n                        try {\n                            const isGroupLeader = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_3__.startDragGrupalLider)(e, lineElement);\n                            lcLog(\"👑 [LINE CONTROLS] ¿Es líder del grupo?\", isGroupLeader);\n                            if (!isGroupLeader) {\n                                lcLog(\"🚫 [LINE CONTROLS] No es líder, deshabilitando drag individual...\");\n                                setTimeout({\n                                    \"LineControls.useEffect.handleDragStart\": ()=>{\n                                        if (nodeRef && nodeRef.draggable) {\n                                            const wasDraggable = nodeRef.draggable();\n                                            nodeRef.draggable(false);\n                                            lcLog(`🔒 [LINE CONTROLS] Drag deshabilitado para línea ${lineId} (era: ${wasDraggable})`);\n                                        }\n                                    }\n                                }[\"LineControls.useEffect.handleDragStart\"], 0);\n                            } else {\n                                lcLog(\"👑 [LINE CONTROLS] Línea es líder del drag grupal\");\n                            }\n                        } catch (error) {\n                            lcError(\"❌ [LINE CONTROLS] Error en drag grupal:\", error);\n                        }\n                    } else {\n                        lcLog(\"📏 [LINE CONTROLS] Drag individual normal para línea\");\n                    }\n                }\n            }[\"LineControls.useEffect.handleDragStart\"];\n            const handleDragEnd = {\n                \"LineControls.useEffect.handleDragEnd\": ()=>{\n                    lcLog(\"🏁 [LINE CONTROLS] Drag end para línea:\", lineId);\n                    setLineBeingDragged(false);\n                    // Reactivar drag después de un breve delay\n                    setTimeout({\n                        \"LineControls.useEffect.handleDragEnd\": ()=>{\n                            if (nodeRef && nodeRef.draggable) {\n                                const wasDraggable = nodeRef.draggable();\n                                nodeRef.draggable(true);\n                                lcLog(`🔓 [LINE CONTROLS] Drag reactivado para línea ${lineId} (era: ${wasDraggable})`);\n                            }\n                        }\n                    }[\"LineControls.useEffect.handleDragEnd\"], 100);\n                }\n            }[\"LineControls.useEffect.handleDragEnd\"];\n            nodeRef.on('dragstart', handleDragStart);\n            nodeRef.on('dragend', handleDragEnd);\n            return ({\n                \"LineControls.useEffect\": ()=>{\n                    nodeRef.off('dragstart', handleDragStart);\n                    nodeRef.off('dragend', handleDragEnd);\n                }\n            })[\"LineControls.useEffect\"];\n        }\n    }[\"LineControls.useEffect\"], [\n        isValidLine,\n        nodeRef,\n        lineId,\n        lineElement\n    ]);\n    // 🔥 CÁLCULOS MEMOIZADOS\n    const points = isValidLine && Array.isArray(lineElement.points) ? lineElement.points : [\n        0,\n        0,\n        100,\n        0\n    ];\n    const puntosValidados = points.slice(0, 4).map((p, i)=>{\n        const punto = parseFloat(p || 0);\n        return isNaN(punto) ? i === 2 ? 100 : 0 : punto;\n    });\n    const [normalizedStartX, normalizedStartY, normalizedEndX, normalizedEndY] = puntosValidados;\n    const startAbsoluteX = nodePos.x + normalizedStartX;\n    const startAbsoluteY = nodePos.y + normalizedStartY;\n    const endAbsoluteX = nodePos.x + normalizedEndX;\n    const endAbsoluteY = nodePos.y + normalizedEndY;\n    // 🔥 HANDLER OPTIMIZADO PARA DRAG START\n    const handlePointDragStart = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"LineControls.useCallback[handlePointDragStart]\": (pointType, e)=>{\n            setDraggingPoint(pointType);\n            dragStartPos.current = e.target.getStage().getPointerPosition();\n            e.cancelBubble = true;\n            // 🔥 LIMPIAR CACHE AL INICIAR\n            pointsCache.current = null;\n        }\n    }[\"LineControls.useCallback[handlePointDragStart]\"], []);\n    // 🔥 HANDLER ULTRA-OPTIMIZADO PARA DRAG MOVE\n    const handlePointDragMove = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"LineControls.useCallback[handlePointDragMove]\": (pointType, e)=>{\n            if (!isValidLine || !nodeRef || !lineId) return;\n            if (draggingPoint !== pointType) return;\n            const stage = e.target.getStage();\n            const pointerPos = stage.getPointerPosition();\n            if (!pointerPos) return;\n            // 🚀 THROTTLE AGRESIVO: Solo cada 4ms (250fps)\n            const now = performance.now();\n            if (now - lastUpdateTime.current < 4) return;\n            lastUpdateTime.current = now;\n            // 🔥 USAR POSICIÓN REAL DEL NODO EN TIEMPO REAL\n            const realNodeX = nodeRef.x();\n            const realNodeY = nodeRef.y();\n            const newPointX = pointerPos.x - realNodeX;\n            const newPointY = pointerPos.y - realNodeY;\n            let newPoints;\n            if (pointType === 'start') {\n                newPoints = [\n                    newPointX,\n                    newPointY,\n                    normalizedEndX,\n                    normalizedEndY\n                ];\n            } else {\n                newPoints = [\n                    normalizedStartX,\n                    normalizedStartY,\n                    newPointX,\n                    newPointY\n                ];\n            }\n            // 🚀 ACTUALIZACIÓN DIRECTA SIN REACT RE-RENDER\n            const lineNode = elementRefs.current?.[lineId];\n            if (lineNode) {\n                // 🔥 SOLO ACTUALIZAR SI LOS PUNTOS CAMBIARON SIGNIFICATIVAMENTE\n                const pointsStr = newPoints.join(',');\n                if (pointsCache.current !== pointsStr) {\n                    pointsCache.current = pointsStr;\n                    // 🚀 FEEDBACK INSTANTÁNEO\n                    lineNode.points(newPoints);\n                    // 🔥 USAR requestAnimationFrame PARA BATCH DRAW ÓPTIMO\n                    if (!window._lineDrawScheduled) {\n                        window._lineDrawScheduled = true;\n                        requestAnimationFrame({\n                            \"LineControls.useCallback[handlePointDragMove]\": ()=>{\n                                batchDraw(lineNode);\n                                window._lineDrawScheduled = false;\n                            }\n                        }[\"LineControls.useCallback[handlePointDragMove]\"]);\n                    }\n                }\n            }\n        }\n    }[\"LineControls.useCallback[handlePointDragMove]\"], [\n        isValidLine,\n        lineId,\n        draggingPoint,\n        normalizedStartX,\n        normalizedStartY,\n        normalizedEndX,\n        normalizedEndY,\n        nodeRef,\n        elementRefs\n    ]);\n    // 🔥 HANDLER OPTIMIZADO PARA DRAG END\n    const handlePointDragEnd = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"LineControls.useCallback[handlePointDragEnd]\": (pointType, e)=>{\n            if (!isValidLine || !nodeRef || !lineId) return;\n            if (draggingPoint !== pointType) return;\n            const stage = e.target.getStage();\n            const pointerPos = stage.getPointerPosition();\n            if (!pointerPos) return;\n            // 🔥 USAR POSICIÓN REAL DEL NODO EN TIEMPO REAL\n            const realNodeX = nodeRef.x();\n            const realNodeY = nodeRef.y();\n            const newPointX = pointerPos.x - realNodeX;\n            const newPointY = pointerPos.y - realNodeY;\n            let newPoints;\n            if (pointType === 'start') {\n                newPoints = [\n                    newPointX,\n                    newPointY,\n                    normalizedEndX,\n                    normalizedEndY\n                ];\n            } else {\n                newPoints = [\n                    normalizedStartX,\n                    normalizedStartY,\n                    newPointX,\n                    newPointY\n                ];\n            }\n            // 🔥 ACTUALIZACIÓN FINAL CON DEBOUNCE\n            if (onUpdateLine) {\n                onUpdateLine(lineId, {\n                    points: newPoints,\n                    isFinal: true\n                });\n            }\n            setDraggingPoint(null);\n            dragStartPos.current = null;\n            pointsCache.current = null; // 🔥 LIMPIAR CACHE\n        }\n    }[\"LineControls.useCallback[handlePointDragEnd]\"], [\n        isValidLine,\n        lineId,\n        draggingPoint,\n        normalizedStartX,\n        normalizedStartY,\n        normalizedEndX,\n        normalizedEndY,\n        nodeRef,\n        onUpdateLine\n    ]);\n    if (!isValidLine || !nodeRef) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n        name: \"ui\",\n        children: !lineBeingDragged && !isGroupDrag && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Circle, {\n                    x: startAbsoluteX,\n                    y: startAbsoluteY,\n                    radius: pointRadius,\n                    fill: draggingPoint === 'start' ? \"#2563eb\" : \"#3b82f6\",\n                    stroke: \"#ffffff\",\n                    strokeWidth: 2.5,\n                    draggable: true,\n                    onDragStart: (e)=>handlePointDragStart('start', e),\n                    onDragMove: (e)=>handlePointDragMove('start', e),\n                    onDragEnd: (e)=>handlePointDragEnd('start', e),\n                    onMouseEnter: (e)=>{\n                        e.target.getStage().container().style.cursor = 'crosshair';\n                    },\n                    onMouseLeave: (e)=>{\n                        if (!draggingPoint) {\n                            e.target.getStage().container().style.cursor = 'default';\n                        }\n                    },\n                    shadowColor: \"rgba(59, 130, 246, 0.3)\",\n                    shadowBlur: 4,\n                    shadowOffset: {\n                        x: 0,\n                        y: 3\n                    },\n                    // 🚀 OPTIMIZACIONES DE RENDIMIENTO\n                    perfectDrawEnabled: false,\n                    shadowForStrokeEnabled: false,\n                    hitStrokeWidth: pointHitStrokeWidth\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n                    lineNumber: 274,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Circle, {\n                    x: endAbsoluteX,\n                    y: endAbsoluteY,\n                    radius: pointRadius,\n                    fill: draggingPoint === 'end' ? \"#2563eb\" : \"#3b82f6\",\n                    stroke: \"#ffffff\",\n                    strokeWidth: 2.5,\n                    draggable: true,\n                    onDragStart: (e)=>handlePointDragStart('end', e),\n                    onDragMove: (e)=>handlePointDragMove('end', e),\n                    onDragEnd: (e)=>handlePointDragEnd('end', e),\n                    onMouseEnter: (e)=>{\n                        e.target.getStage().container().style.cursor = 'crosshair';\n                    },\n                    onMouseLeave: (e)=>{\n                        if (!draggingPoint) {\n                            e.target.getStage().container().style.cursor = 'default';\n                        }\n                    },\n                    shadowColor: \"rgba(59, 130, 246, 0.3)\",\n                    shadowBlur: 6,\n                    shadowOffset: {\n                        x: 0,\n                        y: 3\n                    },\n                    // 🚀 OPTIMIZACIONES DE RENDIMIENTO\n                    perfectDrawEnabled: false,\n                    shadowForStrokeEnabled: false,\n                    hitStrokeWidth: pointHitStrokeWidth\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n                    lineNumber: 303,\n                    columnNumber: 11\n                }, this),\n                draggingPoint && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Line, {\n                    name: \"ui\",\n                    points: [\n                        startAbsoluteX,\n                        startAbsoluteY,\n                        endAbsoluteX,\n                        endAbsoluteY\n                    ],\n                    stroke: \"rgba(119, 61, 190, 0.4)\",\n                    strokeWidth: 1,\n                    dash: [\n                        4,\n                        4\n                    ],\n                    listening: false,\n                    perfectDrawEnabled: false,\n                    shadowForStrokeEnabled: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n                    lineNumber: 333,\n                    columnNumber: 13\n                }, this)\n            ]\n        }, void 0, true)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n        lineNumber: 269,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0xpbmVDb250cm9scy5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsbUVBQW1FOztBQUNqQjtBQUNlO0FBQ1I7QUFDYztBQUd2RSwyQ0FBMkM7QUFDM0MsTUFBTVMsWUFBWSxDQUFDQyxPQUFTQSxLQUFLQyxRQUFRLE1BQU1ELEtBQUtDLFFBQVEsR0FBR0YsU0FBUztBQUN4RSxNQUFNRyxzQkFBc0I7QUFDNUIsTUFBTUMsUUFBUSxDQUFDLEdBQUdDO0lBQ2hCLElBQUksQ0FBQ0YscUJBQXFCO0lBQzFCRyxRQUFRQyxHQUFHLElBQUlGO0FBQ2pCO0FBQ0EsTUFBTUcsVUFBVSxDQUFDLEdBQUdIO0lBQ2xCLElBQUksQ0FBQ0YscUJBQXFCO0lBQzFCRyxRQUFRRyxLQUFLLElBQUlKO0FBQ25CO0FBRWUsU0FBU0ssYUFBYSxFQUNuQ0MsV0FBVyxFQUNYQyxXQUFXLEVBQ1hDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyxxQkFBcUIsS0FBSyxFQUMxQkMseUJBQXlCLEVBQUUsRUFDM0JDLFdBQVcsS0FBSyxFQUNqQjtJQUNDLE1BQU0sQ0FBQ0MsZUFBZUMsaUJBQWlCLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUNuRCxNQUFNMEIsZUFBZXpCLDZDQUFNQSxDQUFDO0lBQzVCLE1BQU0sQ0FBQzBCLGtCQUFrQkMsb0JBQW9CLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUN6RCxNQUFNLENBQUM2QixhQUFhQyxlQUFlLEdBQUc5QiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNK0IsY0FBYzFCLG9GQUFjQSxDQUFDa0I7SUFDbkMsTUFBTVMsY0FBY0QsY0FBYyxLQUFLO0lBQ3ZDLE1BQU1FLHNCQUFzQkYsY0FBYyxLQUFLO0lBQy9DLE1BQU0sQ0FBQ0csU0FBU0MsV0FBVyxHQUFHbkMsK0NBQVFBLENBQUM7UUFDckNvQyxHQUFHbkIsYUFBYW1CLEtBQUs7UUFDckJDLEdBQUdwQixhQUFhb0IsS0FBSztJQUN2QjtJQUVBLCtD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LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaW5lQ29udHJvbHMuanN4IC0gVmVyc2nDs24gb3B0aW1pemFkYSBwYXJhIHRyYW5zZm9ybWFjacOzbiBmbHVpZGFcbmltcG9ydCB7IENpcmNsZSwgR3JvdXAsIExpbmUgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHN0YXJ0RHJhZ0dydXBhbExpZGVyIH0gZnJvbSBcIkAvZHJhZy9kcmFnR3J1cGFsXCI7XG5pbXBvcnQgdXNlSXNUb3VjaExpa2UgZnJvbSBcIkAvY29tcG9uZW50cy9lZGl0b3IvbW9iaWxlL3VzZUlzVG91Y2hMaWtlXCI7XG5cblxuLy8g8J+agCBVdGlsaWRhZCBwYXJhIGZvcnphciByZXBpbnRhZG8gcsOhcGlkb1xuY29uc3QgYmF0Y2hEcmF3ID0gKG5vZGUpID0+IG5vZGUuZ2V0TGF5ZXIoKSAmJiBub2RlLmdldExheWVyKCkuYmF0Y2hEcmF3KCk7XG5jb25zdCBERUJVR19MSU5FX0NPTlRST0xTID0gZmFsc2U7XG5jb25zdCBsY0xvZyA9ICguLi5hcmdzKSA9PiB7XG4gIGlmICghREVCVUdfTElORV9DT05UUk9MUykgcmV0dXJuO1xuICBjb25zb2xlLmxvZyguLi5hcmdzKTtcbn07XG5jb25zdCBsY0Vycm9yID0gKC4uLmFyZ3MpID0+IHtcbiAgaWYgKCFERUJVR19MSU5FX0NPTlRST0xTKSByZXR1cm47XG4gIGNvbnNvbGUuZXJyb3IoLi4uYXJncyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMaW5lQ29udHJvbHMoe1xuICBsaW5lRWxlbWVudCxcbiAgZWxlbWVudFJlZnMsXG4gIG9uVXBkYXRlTGluZSxcbiAgYWx0b0NhbnZhcyxcbiAgaXNEcmFnR3J1cGFsQWN0aXZlID0gZmFsc2UsICAvLyDwn5SlIE5VRVZBIFBST1BcbiAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyA9IFtdLFxuICBpc01vYmlsZSA9IGZhbHNlLFxufSkge1xuICBjb25zdCBbZHJhZ2dpbmdQb2ludCwgc2V0RHJhZ2dpbmdQb2ludF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgZHJhZ1N0YXJ0UG9zID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbbGluZUJlaW5nRHJhZ2dlZCwgc2V0TGluZUJlaW5nRHJhZ2dlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0dyb3VwRHJhZywgc2V0SXNHcm91cERyYWddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpc1RvdWNoTGlrZSA9IHVzZUlzVG91Y2hMaWtlKGlzTW9iaWxlKTtcbiAgY29uc3QgcG9pbnRSYWRpdXMgPSBpc1RvdWNoTGlrZSA/IDEyIDogMTA7XG4gIGNvbnN0IHBvaW50SGl0U3Ryb2tlV2lkdGggPSBpc1RvdWNoTGlrZSA/IDQ0IDogMjg7XG4gIGNvbnN0IFtub2RlUG9zLCBzZXROb2RlUG9zXSA9IHVzZVN0YXRlKHtcbiAgICB4OiBsaW5lRWxlbWVudD8ueCB8fCAwLFxuICAgIHk6IGxpbmVFbGVtZW50Py55IHx8IDAsXG4gIH0pO1xuXG4gIC8vIPCflKUgQ0FDSEUgUEFSQSBFVklUQVIgUkVDw4FMQ1VMT1MgSU5ORUNFU0FSSU9TXG4gIGNvbnN0IHBvaW50c0NhY2hlID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBsYXN0VXBkYXRlVGltZSA9IHVzZVJlZigwKTtcbiAgY29uc3QgaXNWYWxpZExpbmUgPVxuICAgICEhbGluZUVsZW1lbnQgJiZcbiAgICBsaW5lRWxlbWVudC50aXBvID09PSBcImZvcm1hXCIgJiZcbiAgICBsaW5lRWxlbWVudC5maWd1cmEgPT09IFwibGluZVwiO1xuICBjb25zdCBsaW5lSWQgPSBsaW5lRWxlbWVudD8uaWQgPz8gbnVsbDtcbiAgY29uc3Qgbm9kZVJlZiA9IGxpbmVJZCA/IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltsaW5lSWRdIDogbnVsbDtcblxuICAvLyDwn5SlIFNZTkMgT1BUSU1JWkFETyBDT04gVEhST1RUTEVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzVmFsaWRMaW5lIHx8ICFub2RlUmVmKSByZXR1cm47XG5cbiAgICBjb25zdCBzeW5jUG9zID0gKCkgPT4ge1xuICAgICAgLy8g8J+agCBUSFJPVFRMRTogU29sbyBhY3R1YWxpemFyIGNhZGEgOG1zICgxMjBmcHMgbcOheGltbylcbiAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgaWYgKG5vdyAtIGxhc3RVcGRhdGVUaW1lLmN1cnJlbnQgPCA4KSByZXR1cm47XG4gICAgICBsYXN0VXBkYXRlVGltZS5jdXJyZW50ID0gbm93O1xuXG4gICAgICBzZXROb2RlUG9zKHsgeDogbm9kZVJlZi54KCksIHk6IG5vZGVSZWYueSgpIH0pO1xuICAgIH07XG5cbiAgICBzeW5jUG9zKCk7XG4gICAgbm9kZVJlZi5vbignZHJhZ21vdmUnLCBzeW5jUG9zKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBub2RlUmVmLm9mZignZHJhZ21vdmUnLCBzeW5jUG9zKTtcbiAgICB9O1xuICB9LCBbaXNWYWxpZExpbmUsIG5vZGVSZWZdKTtcblxuXG5cbiAgLy8g8J+UpSBERVRFQ1RBUiBEUkFHIEdSVVBBTCBNRUpPUkFET1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNWYWxpZExpbmUgfHwgIWxpbmVJZCkge1xuICAgICAgc2V0SXNHcm91cERyYWcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzUGFydE9mTXVsdGlwbGVTZWxlY3Rpb24gPSBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaXNUaGlzTGluZVNlbGVjdGVkID0gZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhsaW5lSWQpO1xuXG4gICAgc2V0SXNHcm91cERyYWcoaXNEcmFnR3J1cGFsQWN0aXZlICYmIGlzUGFydE9mTXVsdGlwbGVTZWxlY3Rpb24gJiYgaXNUaGlzTGluZVNlbGVjdGVkKTtcbiAgfSwgW2lzVmFsaWRMaW5lLCBpc0RyYWdHcnVwYWxBY3RpdmUsIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsIGxpbmVJZF0pO1xuXG5cblxuICAvLyDwn5SlIERFVEVDVEFSIERSQUcgREUgTMONTkVBIFkgQ09PUkRJTkFDScOTTiBDT04gRFJBRyBHUlVQQUxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzVmFsaWRMaW5lIHx8ICFub2RlUmVmIHx8ICFsaW5lSWQpIHJldHVybjtcblxuICAgIGNvbnN0IGhhbmRsZURyYWdTdGFydCA9IChlKSA9PiB7XG4gICAgICBsY0xvZyhcIvCfjqwgW0xJTkUgQ09OVFJPTFNdIERyYWcgc3RhcnQgcGFyYSBsw61uZWE6XCIsIGxpbmVJZCk7XG4gICAgICBzZXRMaW5lQmVpbmdEcmFnZ2VkKHRydWUpO1xuXG4gICAgICAvLyDwn46vIENPT1JESU5BQ0nDk04gQ09OIERSQUcgR1JVUEFMXG4gICAgICBjb25zdCBlbGVtZW50b3NTZWxlY2Npb25hZG9zID0gd2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zIHx8IFtdO1xuICAgICAgbGNMb2coXCLwn5OLIFtMSU5FIENPTlRST0xTXSBFbGVtZW50b3Mgc2VsZWNjaW9uYWRvczpcIiwgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyk7XG4gICAgICBsY0xvZyhcIvCfk48gW0xJTkUgQ09OVFJPTFNdIMK/RXN0YSBsw61uZWEgZXN0w6EgZW4gc2VsZWNjacOzbj9cIiwgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhsaW5lSWQpKTtcbiAgICAgIGxjTG9nKFwi8J+UoiBbTElORSBDT05UUk9MU10gwr9Nw7psdGlwbGVzIGVsZW1lbnRvcz9cIiwgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPiAxKTtcblxuICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID4gMSAmJiBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKGxpbmVJZCkpIHtcbiAgICAgICAgbGNMb2coXCLwn46vIFtMSU5FIENPTlRST0xTXSBJbnRlbnRhbmRvIGluaWNpYXIgZHJhZyBncnVwYWwgZGVzZGUgbMOtbmVhLi4uXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgaXNHcm91cExlYWRlciA9IHN0YXJ0RHJhZ0dydXBhbExpZGVyKGUsIGxpbmVFbGVtZW50KTtcbiAgICAgICAgICBsY0xvZyhcIvCfkZEgW0xJTkUgQ09OVFJPTFNdIMK/RXMgbMOtZGVyIGRlbCBncnVwbz9cIiwgaXNHcm91cExlYWRlcik7XG5cbiAgICAgICAgICBpZiAoIWlzR3JvdXBMZWFkZXIpIHtcbiAgICAgICAgICAgIGxjTG9nKFwi8J+aqyBbTElORSBDT05UUk9MU10gTm8gZXMgbMOtZGVyLCBkZXNoYWJpbGl0YW5kbyBkcmFnIGluZGl2aWR1YWwuLi5cIik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG5vZGVSZWYgJiYgbm9kZVJlZi5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3YXNEcmFnZ2FibGUgPSBub2RlUmVmLmRyYWdnYWJsZSgpO1xuICAgICAgICAgICAgICAgIG5vZGVSZWYuZHJhZ2dhYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBsY0xvZyhg8J+UkiBbTElORSBDT05UUk9MU10gRHJhZyBkZXNoYWJpbGl0YWRvIHBhcmEgbMOtbmVhICR7bGluZUlkfSAoZXJhOiAke3dhc0RyYWdnYWJsZX0pYCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsY0xvZyhcIvCfkZEgW0xJTkUgQ09OVFJPTFNdIEzDrW5lYSBlcyBsw61kZXIgZGVsIGRyYWcgZ3J1cGFsXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsY0Vycm9yKFwi4p2MIFtMSU5FIENPTlRST0xTXSBFcnJvciBlbiBkcmFnIGdydXBhbDpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsY0xvZyhcIvCfk48gW0xJTkUgQ09OVFJPTFNdIERyYWcgaW5kaXZpZHVhbCBub3JtYWwgcGFyYSBsw61uZWFcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZURyYWdFbmQgPSAoKSA9PiB7XG4gICAgICBsY0xvZyhcIvCfj4EgW0xJTkUgQ09OVFJPTFNdIERyYWcgZW5kIHBhcmEgbMOtbmVhOlwiLCBsaW5lSWQpO1xuICAgICAgc2V0TGluZUJlaW5nRHJhZ2dlZChmYWxzZSk7XG5cbiAgICAgIC8vIFJlYWN0aXZhciBkcmFnIGRlc3B1w6lzIGRlIHVuIGJyZXZlIGRlbGF5XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKG5vZGVSZWYgJiYgbm9kZVJlZi5kcmFnZ2FibGUpIHtcbiAgICAgICAgICBjb25zdCB3YXNEcmFnZ2FibGUgPSBub2RlUmVmLmRyYWdnYWJsZSgpO1xuICAgICAgICAgIG5vZGVSZWYuZHJhZ2dhYmxlKHRydWUpO1xuICAgICAgICAgIGxjTG9nKGDwn5STIFtMSU5FIENPTlRST0xTXSBEcmFnIHJlYWN0aXZhZG8gcGFyYSBsw61uZWEgJHtsaW5lSWR9IChlcmE6ICR7d2FzRHJhZ2dhYmxlfSlgKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICB9O1xuXG4gICAgbm9kZVJlZi5vbignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICBub2RlUmVmLm9uKCdkcmFnZW5kJywgaGFuZGxlRHJhZ0VuZCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbm9kZVJlZi5vZmYoJ2RyYWdzdGFydCcsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICBub2RlUmVmLm9mZignZHJhZ2VuZCcsIGhhbmRsZURyYWdFbmQpO1xuICAgIH07XG4gIH0sIFtpc1ZhbGlkTGluZSwgbm9kZVJlZiwgbGluZUlkLCBsaW5lRWxlbWVudF0pO1xuXG5cblxuICAvLyDwn5SlIEPDgUxDVUxPUyBNRU1PSVpBRE9TXG4gIGNvbnN0IHBvaW50cyA9IChpc1ZhbGlkTGluZSAmJiBBcnJheS5pc0FycmF5KGxpbmVFbGVtZW50LnBvaW50cykpXG4gICAgPyBsaW5lRWxlbWVudC5wb2ludHNcbiAgICA6IFswLCAwLCAxMDAsIDBdO1xuICBjb25zdCBwdW50b3NWYWxpZGFkb3MgPSBwb2ludHMuc2xpY2UoMCwgNCkubWFwKChwLCBpKSA9PiB7XG4gICAgY29uc3QgcHVudG8gPSBwYXJzZUZsb2F0KHAgfHwgMCk7XG4gICAgcmV0dXJuIGlzTmFOKHB1bnRvKSA/IChpID09PSAyID8gMTAwIDogMCkgOiBwdW50bztcbiAgfSk7XG5cbiAgY29uc3QgW25vcm1hbGl6ZWRTdGFydFgsIG5vcm1hbGl6ZWRTdGFydFksIG5vcm1hbGl6ZWRFbmRYLCBub3JtYWxpemVkRW5kWV0gPSBwdW50b3NWYWxpZGFkb3M7XG5cbiAgY29uc3Qgc3RhcnRBYnNvbHV0ZVggPSBub2RlUG9zLnggKyBub3JtYWxpemVkU3RhcnRYO1xuICBjb25zdCBzdGFydEFic29sdXRlWSA9IG5vZGVQb3MueSArIG5vcm1hbGl6ZWRTdGFydFk7XG4gIGNvbnN0IGVuZEFic29sdXRlWCA9IG5vZGVQb3MueCArIG5vcm1hbGl6ZWRFbmRYO1xuICBjb25zdCBlbmRBYnNvbHV0ZVkgPSBub2RlUG9zLnkgKyBub3JtYWxpemVkRW5kWTtcblxuICAvLyDwn5SlIEhBTkRMRVIgT1BUSU1JWkFETyBQQVJBIERSQUcgU1RBUlRcbiAgY29uc3QgaGFuZGxlUG9pbnREcmFnU3RhcnQgPSB1c2VDYWxsYmFjaygocG9pbnRUeXBlLCBlKSA9PiB7XG4gICAgc2V0RHJhZ2dpbmdQb2ludChwb2ludFR5cGUpO1xuICAgIGRyYWdTdGFydFBvcy5jdXJyZW50ID0gZS50YXJnZXQuZ2V0U3RhZ2UoKS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG5cbiAgICAvLyDwn5SlIExJTVBJQVIgQ0FDSEUgQUwgSU5JQ0lBUlxuICAgIHBvaW50c0NhY2hlLmN1cnJlbnQgPSBudWxsO1xuICB9LCBbXSk7XG5cbiAgLy8g8J+UpSBIQU5ETEVSIFVMVFJBLU9QVElNSVpBRE8gUEFSQSBEUkFHIE1PVkVcbiAgY29uc3QgaGFuZGxlUG9pbnREcmFnTW92ZSA9IHVzZUNhbGxiYWNrKChwb2ludFR5cGUsIGUpID0+IHtcbiAgICBpZiAoIWlzVmFsaWRMaW5lIHx8ICFub2RlUmVmIHx8ICFsaW5lSWQpIHJldHVybjtcbiAgICBpZiAoZHJhZ2dpbmdQb2ludCAhPT0gcG9pbnRUeXBlKSByZXR1cm47XG5cbiAgICBjb25zdCBzdGFnZSA9IGUudGFyZ2V0LmdldFN0YWdlKCk7XG4gICAgY29uc3QgcG9pbnRlclBvcyA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpO1xuICAgIGlmICghcG9pbnRlclBvcykgcmV0dXJuO1xuXG4gICAgLy8g8J+agCBUSFJPVFRMRSBBR1JFU0lWTzogU29sbyBjYWRhIDRtcyAoMjUwZnBzKVxuICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGlmIChub3cgLSBsYXN0VXBkYXRlVGltZS5jdXJyZW50IDwgNCkgcmV0dXJuO1xuICAgIGxhc3RVcGRhdGVUaW1lLmN1cnJlbnQgPSBub3c7XG5cbiAgICAvLyDwn5SlIFVTQVIgUE9TSUNJw5NOIFJFQUwgREVMIE5PRE8gRU4gVElFTVBPIFJFQUxcbiAgICBjb25zdCByZWFsTm9kZVggPSBub2RlUmVmLngoKTtcbiAgICBjb25zdCByZWFsTm9kZVkgPSBub2RlUmVmLnkoKTtcbiAgICBjb25zdCBuZXdQb2ludFggPSBwb2ludGVyUG9zLnggLSByZWFsTm9kZVg7XG4gICAgY29uc3QgbmV3UG9pbnRZID0gcG9pbnRlclBvcy55IC0gcmVhbE5vZGVZO1xuXG4gICAgbGV0IG5ld1BvaW50cztcbiAgICBpZiAocG9pbnRUeXBlID09PSAnc3RhcnQnKSB7XG4gICAgICBuZXdQb2ludHMgPSBbbmV3UG9pbnRYLCBuZXdQb2ludFksIG5vcm1hbGl6ZWRFbmRYLCBub3JtYWxpemVkRW5kWV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1BvaW50cyA9IFtub3JtYWxpemVkU3RhcnRYLCBub3JtYWxpemVkU3RhcnRZLCBuZXdQb2ludFgsIG5ld1BvaW50WV07XG4gICAgfVxuXG4gICAgLy8g8J+agCBBQ1RVQUxJWkFDScOTTiBESVJFQ1RBIFNJTiBSRUFDVCBSRS1SRU5ERVJcbiAgICBjb25zdCBsaW5lTm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltsaW5lSWRdO1xuICAgIGlmIChsaW5lTm9kZSkge1xuICAgICAgLy8g8J+UpSBTT0xPIEFDVFVBTElaQVIgU0kgTE9TIFBVTlRPUyBDQU1CSUFST04gU0lHTklGSUNBVElWQU1FTlRFXG4gICAgICBjb25zdCBwb2ludHNTdHIgPSBuZXdQb2ludHMuam9pbignLCcpO1xuICAgICAgaWYgKHBvaW50c0NhY2hlLmN1cnJlbnQgIT09IHBvaW50c1N0cikge1xuICAgICAgICBwb2ludHNDYWNoZS5jdXJyZW50ID0gcG9pbnRzU3RyO1xuXG4gICAgICAgIC8vIPCfmoAgRkVFREJBQ0sgSU5TVEFOVMOBTkVPXG4gICAgICAgIGxpbmVOb2RlLnBvaW50cyhuZXdQb2ludHMpO1xuXG4gICAgICAgIC8vIPCflKUgVVNBUiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgUEFSQSBCQVRDSCBEUkFXIMOTUFRJTU9cbiAgICAgICAgaWYgKCF3aW5kb3cuX2xpbmVEcmF3U2NoZWR1bGVkKSB7XG4gICAgICAgICAgd2luZG93Ll9saW5lRHJhd1NjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIGJhdGNoRHJhdyhsaW5lTm9kZSk7XG4gICAgICAgICAgICB3aW5kb3cuX2xpbmVEcmF3U2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpc1ZhbGlkTGluZSwgbGluZUlkLCBkcmFnZ2luZ1BvaW50LCBub3JtYWxpemVkU3RhcnRYLCBub3JtYWxpemVkU3RhcnRZLCBub3JtYWxpemVkRW5kWCwgbm9ybWFsaXplZEVuZFksIG5vZGVSZWYsIGVsZW1lbnRSZWZzXSk7XG5cbiAgLy8g8J+UpSBIQU5ETEVSIE9QVElNSVpBRE8gUEFSQSBEUkFHIEVORFxuICBjb25zdCBoYW5kbGVQb2ludERyYWdFbmQgPSB1c2VDYWxsYmFjaygocG9pbnRUeXBlLCBlKSA9PiB7XG4gICAgaWYgKCFpc1ZhbGlkTGluZSB8fCAhbm9kZVJlZiB8fCAhbGluZUlkKSByZXR1cm47XG4gICAgaWYgKGRyYWdnaW5nUG9pbnQgIT09IHBvaW50VHlwZSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgIGNvbnN0IHBvaW50ZXJQb3MgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICBpZiAoIXBvaW50ZXJQb3MpIHJldHVybjtcblxuICAgIC8vIPCflKUgVVNBUiBQT1NJQ0nDk04gUkVBTCBERUwgTk9ETyBFTiBUSUVNUE8gUkVBTFxuICAgIGNvbnN0IHJlYWxOb2RlWCA9IG5vZGVSZWYueCgpO1xuICAgIGNvbnN0IHJlYWxOb2RlWSA9IG5vZGVSZWYueSgpO1xuICAgIGNvbnN0IG5ld1BvaW50WCA9IHBvaW50ZXJQb3MueCAtIHJlYWxOb2RlWDtcbiAgICBjb25zdCBuZXdQb2ludFkgPSBwb2ludGVyUG9zLnkgLSByZWFsTm9kZVk7XG5cbiAgICBsZXQgbmV3UG9pbnRzO1xuICAgIGlmIChwb2ludFR5cGUgPT09ICdzdGFydCcpIHtcbiAgICAgIG5ld1BvaW50cyA9IFtuZXdQb2ludFgsIG5ld1BvaW50WSwgbm9ybWFsaXplZEVuZFgsIG5vcm1hbGl6ZWRFbmRZXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3UG9pbnRzID0gW25vcm1hbGl6ZWRTdGFydFgsIG5vcm1hbGl6ZWRTdGFydFksIG5ld1BvaW50WCwgbmV3UG9pbnRZXTtcbiAgICB9XG5cbiAgICAvLyDwn5SlIEFDVFVBTElaQUNJw5NOIEZJTkFMIENPTiBERUJPVU5DRVxuICAgIGlmIChvblVwZGF0ZUxpbmUpIHtcbiAgICAgIG9uVXBkYXRlTGluZShsaW5lSWQsIHtcbiAgICAgICAgcG9pbnRzOiBuZXdQb2ludHMsXG4gICAgICAgIGlzRmluYWw6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldERyYWdnaW5nUG9pbnQobnVsbCk7XG4gICAgZHJhZ1N0YXJ0UG9zLmN1cnJlbnQgPSBudWxsO1xuICAgIHBvaW50c0NhY2hlLmN1cnJlbnQgPSBudWxsOyAvLyDwn5SlIExJTVBJQVIgQ0FDSEVcbiAgfSwgW2lzVmFsaWRMaW5lLCBsaW5lSWQsIGRyYWdnaW5nUG9pbnQsIG5vcm1hbGl6ZWRTdGFydFgsIG5vcm1hbGl6ZWRTdGFydFksIG5vcm1hbGl6ZWRFbmRYLCBub3JtYWxpemVkRW5kWSwgbm9kZVJlZiwgb25VcGRhdGVMaW5lXSk7XG5cbiAgaWYgKCFpc1ZhbGlkTGluZSB8fCAhbm9kZVJlZikgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8R3JvdXAgbmFtZT1cInVpXCI+XG4gICAgICB7Lyog8J+UpSBPQ1VMVEFSIENPTlRST0xFUyBEVVJBTlRFIERSQUcgSU5ESVZJRFVBTCBPIEdSVVBBTCAqL31cbiAgICAgIHshbGluZUJlaW5nRHJhZ2dlZCAmJiAhaXNHcm91cERyYWcgJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIHsvKiDwn5S0IFB1bnRvIGRlIGNvbnRyb2wgLSBJTklDSU8gKi99XG4gICAgICAgICAgPENpcmNsZVxuICAgICAgICAgICAgeD17c3RhcnRBYnNvbHV0ZVh9XG4gICAgICAgICAgICB5PXtzdGFydEFic29sdXRlWX1cbiAgICAgICAgICAgIHJhZGl1cz17cG9pbnRSYWRpdXN9XG4gICAgICAgICAgICBmaWxsPXtkcmFnZ2luZ1BvaW50ID09PSAnc3RhcnQnID8gXCIjMjU2M2ViXCIgOiBcIiMzYjgyZjZcIn1cbiAgICAgICAgICAgIHN0cm9rZT1cIiNmZmZmZmZcIlxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezIuNX1cbiAgICAgICAgICAgIGRyYWdnYWJsZT17dHJ1ZX1cbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnU3RhcnQoJ3N0YXJ0JywgZSl9XG4gICAgICAgICAgICBvbkRyYWdNb3ZlPXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnTW92ZSgnc3RhcnQnLCBlKX1cbiAgICAgICAgICAgIG9uRHJhZ0VuZD17KGUpID0+IGhhbmRsZVBvaW50RHJhZ0VuZCgnc3RhcnQnLCBlKX1cbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IHtcbiAgICAgICAgICAgICAgZS50YXJnZXQuZ2V0U3RhZ2UoKS5jb250YWluZXIoKS5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghZHJhZ2dpbmdQb2ludCkge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmdldFN0YWdlKCkuY29udGFpbmVyKCkuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgc2hhZG93Q29sb3I9XCJyZ2JhKDU5LCAxMzAsIDI0NiwgMC4zKVwiXG4gICAgICAgICAgICBzaGFkb3dCbHVyPXs0fVxuICAgICAgICAgICAgc2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IDMgfX1cbiAgICAgICAgICAgIC8vIPCfmoAgT1BUSU1JWkFDSU9ORVMgREUgUkVORElNSUVOVE9cbiAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICBzaGFkb3dGb3JTdHJva2VFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgICAgIGhpdFN0cm9rZVdpZHRoPXtwb2ludEhpdFN0cm9rZVdpZHRofSAvLyDDgXJlYSBkZSBjbGljayBtw6FzIGdyYW5kZVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7Lyog8J+UtCBQdW50byBkZSBjb250cm9sIC0gRklOQUwgKi99XG4gICAgICAgICAgPENpcmNsZVxuICAgICAgICAgICAgeD17ZW5kQWJzb2x1dGVYfVxuICAgICAgICAgICAgeT17ZW5kQWJzb2x1dGVZfVxuICAgICAgICAgICAgcmFkaXVzPXtwb2ludFJhZGl1c31cbiAgICAgICAgICAgIGZpbGw9e2RyYWdnaW5nUG9pbnQgPT09ICdlbmQnID8gXCIjMjU2M2ViXCIgOiBcIiMzYjgyZjZcIn1cbiAgICAgICAgICAgIHN0cm9rZT1cIiNmZmZmZmZcIlxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezIuNX1cbiAgICAgICAgICAgIGRyYWdnYWJsZT17dHJ1ZX1cbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnU3RhcnQoJ2VuZCcsIGUpfVxuICAgICAgICAgICAgb25EcmFnTW92ZT17KGUpID0+IGhhbmRsZVBvaW50RHJhZ01vdmUoJ2VuZCcsIGUpfVxuICAgICAgICAgICAgb25EcmFnRW5kPXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnRW5kKCdlbmQnLCBlKX1cbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IHtcbiAgICAgICAgICAgICAgZS50YXJnZXQuZ2V0U3RhZ2UoKS5jb250YWluZXIoKS5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghZHJhZ2dpbmdQb2ludCkge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmdldFN0YWdlKCkuY29udGFpbmVyKCkuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgc2hhZG93Q29sb3I9XCJyZ2JhKDU5LCAxMzAsIDI0NiwgMC4zKVwiXG4gICAgICAgICAgICBzaGFkb3dCbHVyPXs2fVxuICAgICAgICAgICAgc2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IDMgfX1cbiAgICAgICAgICAgIC8vIPCfmoAgT1BUSU1JWkFDSU9ORVMgREUgUkVORElNSUVOVE9cbiAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICBzaGFkb3dGb3JTdHJva2VFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgICAgIGhpdFN0cm9rZVdpZHRoPXtwb2ludEhpdFN0cm9rZVdpZHRofSAvLyDDgXJlYSBkZSBjbGljayBtw6FzIGdyYW5kZVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7Lyog8J+TjyBMw61uZWEgZGUgZ3XDrWEgZHVyYW50ZSBkcmFnIGRlIHB1bnRvcyAtIE9QVElNSVpBREEgKi99XG4gICAgICAgICAge2RyYWdnaW5nUG9pbnQgJiYgKFxuICAgICAgICAgICAgPExpbmVcbiAgICAgICAgICAgICAgbmFtZT1cInVpXCJcbiAgICAgICAgICAgICAgcG9pbnRzPXtbc3RhcnRBYnNvbHV0ZVgsIHN0YXJ0QWJzb2x1dGVZLCBlbmRBYnNvbHV0ZVgsIGVuZEFic29sdXRlWV19XG4gICAgICAgICAgICAgIHN0cm9rZT1cInJnYmEoMTE5LCA2MSwgMTkwLCAwLjQpXCJcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XG4gICAgICAgICAgICAgIGRhc2g9e1s0LCA0XX1cbiAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cbiAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgICAgICAgc2hhZG93Rm9yU3Ryb2tlRW5hYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L0dyb3VwPlxuICApO1xufVxuXG5cblxuIl0sIm5hbWVzIjpbIkNpcmNsZSIsIkdyb3VwIiwiTGluZSIsInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJzdGFydERyYWdHcnVwYWxMaWRlciIsInVzZUlzVG91Y2hMaWtlIiwiYmF0Y2hEcmF3Iiwibm9kZSIsImdldExheWVyIiwiREVCVUdfTElORV9DT05UUk9MUyIsImxjTG9nIiwiYXJncyIsImNvbnNvbGUiLCJsb2ciLCJsY0Vycm9yIiwiZXJyb3IiLCJMaW5lQ29udHJvbHMiLCJsaW5lRWxlbWVudCIsImVsZW1lbnRSZWZzIiwib25VcGRhdGVMaW5lIiwiYWx0b0NhbnZhcyIsImlzRHJhZ0dydXBhbEFjdGl2ZSIsImVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJpc01vYmlsZSIsImRyYWdnaW5nUG9pbnQiLCJzZXREcmFnZ2luZ1BvaW50IiwiZHJhZ1N0YXJ0UG9zIiwibGluZUJlaW5nRHJhZ2dlZCIsInNldExpbmVCZWluZ0RyYWdnZWQiLCJpc0dyb3VwRHJhZyIsInNldElzR3JvdXBEcmFnIiwiaXNUb3VjaExpa2UiLCJwb2ludFJhZGl1cyIsInBvaW50SGl0U3Ryb2tlV2lkdGgiLCJub2RlUG9zIiwic2V0Tm9kZVBvcyIsIngiLCJ5IiwicG9pbnRzQ2FjaGUiLCJsYXN0VXBkYXRlVGltZSIsImlzVmFsaWRMaW5lIiwidGlwbyIsImZpZ3VyYSIsImxpbmVJZCIsImlkIiwibm9kZVJlZiIsImN1cnJlbnQiLCJzeW5jUG9zIiwibm93IiwicGVyZm9ybWFuY2UiLCJvbiIsIm9mZiIsImlzUGFydE9mTXVsdGlwbGVTZWxlY3Rpb24iLCJsZW5ndGgiLCJpc1RoaXNMaW5lU2VsZWN0ZWQiLCJpbmNsdWRlcyIsImhhbmRsZURyYWdTdGFydCIsImUiLCJ3aW5kb3ciLCJfZWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsImlzR3JvdXBMZWFkZXIiLCJzZXRUaW1lb3V0IiwiZHJhZ2dhYmxlIiwid2FzRHJhZ2dhYmxlIiwiaGFuZGxlRHJhZ0VuZCIsInBvaW50cyIsIkFycmF5IiwiaXNBcnJheSIsInB1bnRvc1ZhbGlkYWRvcyIsInNsaWNlIiwibWFwIiwicCIsImkiLCJwdW50byIsInBhcnNlRmxvYXQiLCJpc05hTiIsIm5vcm1hbGl6ZWRTdGFydFgiLCJub3JtYWxpemVkU3RhcnRZIiwibm9ybWFsaXplZEVuZFgiLCJub3JtYWxpemVkRW5kWSIsInN0YXJ0QWJzb2x1dGVYIiwic3RhcnRBYnNvbHV0ZVkiLCJlbmRBYnNvbHV0ZVgiLCJlbmRBYnNvbHV0ZVkiLCJoYW5kbGVQb2ludERyYWdTdGFydCIsInBvaW50VHlwZSIsInRhcmdldCIsImdldFN0YWdlIiwiZ2V0UG9pbnRlclBvc2l0aW9uIiwiY2FuY2VsQnViYmxlIiwiaGFuZGxlUG9pbnREcmFnTW92ZSIsInN0YWdlIiwicG9pbnRlclBvcyIsInJlYWxOb2RlWCIsInJlYWxOb2RlWSIsIm5ld1BvaW50WCIsIm5ld1BvaW50WSIsIm5ld1BvaW50cyIsImxpbmVOb2RlIiwicG9pbnRzU3RyIiwiam9pbiIsIl9saW5lRHJhd1NjaGVkdWxlZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImhhbmRsZVBvaW50RHJhZ0VuZCIsImlzRmluYWwiLCJuYW1lIiwicmFkaXVzIiwiZmlsbCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwib25EcmFnU3RhcnQiLCJvbkRyYWdNb3ZlIiwib25EcmFnRW5kIiwib25Nb3VzZUVudGVyIiwiY29udGFpbmVyIiwic3R5bGUiLCJjdXJzb3IiLCJvbk1vdXNlTGVhdmUiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXQiLCJwZXJmZWN0RHJhd0VuYWJsZWQiLCJzaGFkb3dGb3JTdHJva2VFbmFibGVkIiwiaGl0U3Ryb2tlV2lkdGgiLCJkYXNoIiwibGlzdGVuaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/LineControls.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/LineToolbar.jsx":
/*!****************************************!*\
  !*** ./src/components/LineToolbar.jsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LineToolbar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// components/LineToolbar.jsx\n\n\nfunction LineToolbar({ lineElement, onUpdateLine, style = {} }) {\n    const [mostrarSelectorGrosor, setMostrarSelectorGrosor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mostrarSelectorColor, setMostrarSelectorColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const grosorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const colorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Cerrar selectores al hacer clic fuera\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LineToolbar.useEffect\": ()=>{\n            const handleClickFuera = {\n                \"LineToolbar.useEffect.handleClickFuera\": (e)=>{\n                    if (grosorRef.current && !grosorRef.current.contains(e.target)) {\n                        setMostrarSelectorGrosor(false);\n                    }\n                    if (colorRef.current && !colorRef.current.contains(e.target)) {\n                        setMostrarSelectorColor(false);\n                    }\n                }\n            }[\"LineToolbar.useEffect.handleClickFuera\"];\n            document.addEventListener('mousedown', handleClickFuera);\n            return ({\n                \"LineToolbar.useEffect\": ()=>document.removeEventListener('mousedown', handleClickFuera)\n            })[\"LineToolbar.useEffect\"];\n        }\n    }[\"LineToolbar.useEffect\"], []);\n    if (!lineElement || lineElement.tipo !== 'forma' || lineElement.figura !== 'line') {\n        return null;\n    }\n    const grosorActual = lineElement.strokeWidth || 3;\n    const colorActual = lineElement.color || \"#000000\";\n    // Grosores predefinidos\n    const grosoresDisponibles = [\n        1,\n        2,\n        3,\n        4,\n        5,\n        6,\n        8,\n        10,\n        12,\n        15,\n        18,\n        20,\n        24,\n        28,\n        32\n    ];\n    // Colores predefinidos populares\n    const coloresPredefinidos = [\n        \"#000000\",\n        \"#ffffff\",\n        \"#ff0000\",\n        \"#00ff00\",\n        \"#0000ff\",\n        \"#ffff00\",\n        \"#ff00ff\",\n        \"#00ffff\",\n        \"#ffa500\",\n        \"#800080\",\n        \"#808080\",\n        \"#a52a2a\"\n    ];\n    const actualizarGrosor = (nuevoGrosor)=>{\n        if (onUpdateLine) {\n            onUpdateLine(lineElement.id, {\n                strokeWidth: nuevoGrosor,\n                isFinal: true\n            });\n        }\n        setMostrarSelectorGrosor(false);\n    };\n    const actualizarColor = (nuevoColor)=>{\n        if (onUpdateLine) {\n            onUpdateLine(lineElement.id, {\n                color: nuevoColor,\n                isFinal: true\n            });\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed z-50 bg-white border rounded shadow p-2 flex gap-2 items-center line-toolbar\",\n        style: {\n            ...style,\n            width: \"auto\",\n            maxWidth: \"400px\",\n            animation: \"fadeInScale 0.15s ease-out\"\n        },\n        onMouseDown: (e)=>e.stopPropagation(),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                ref: grosorRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setMostrarSelectorGrosor(!mostrarSelectorGrosor),\n                        className: `flex items-center gap-2 px-3 py-2 rounded border text-sm transition-all duration-200 ${mostrarSelectorGrosor ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                        title: `Grosor: ${grosorActual}px`,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-700 rounded-full\",\n                                        style: {\n                                            width: \"20px\",\n                                            height: `${Math.min(Math.max(grosorActual / 2, 1), 8)}px`,\n                                            minHeight: \"1px\"\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 96,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xs font-medium\",\n                                        children: [\n                                            grosorActual,\n                                            \"px\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 104,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 95,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: `w-3 h-3 transition-transform ${mostrarSelectorGrosor ? 'rotate-180' : ''}`,\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                viewBox: \"0 0 24 24\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M19 9l-7 7-7-7\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 114,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 108,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 87,\n                        columnNumber: 9\n                    }, this),\n                    mostrarSelectorGrosor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-full left-0 mt-2 bg-white border rounded-lg shadow-xl p-3 z-50 min-w-[200px]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs font-medium text-gray-600 mb-2\",\n                                children: \"Seleccionar grosor:\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 121,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2 max-h-[200px] overflow-y-auto\",\n                                children: grosoresDisponibles.map((grosor)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>actualizarGrosor(grosor),\n                                        className: `w-full flex items-center justify-between p-2 rounded hover:bg-gray-100 transition-colors ${grosorActual === grosor ? 'bg-purple-50 border border-purple-300' : ''}`,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"bg-gray-700 rounded-full\",\n                                                        style: {\n                                                            width: \"30px\",\n                                                            height: `${Math.min(Math.max(grosor / 2, 1), 12)}px`,\n                                                            minHeight: \"1px\"\n                                                        }\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                        lineNumber: 133,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm\",\n                                                        children: [\n                                                            grosor,\n                                                            \"px\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                        lineNumber: 141,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                lineNumber: 131,\n                                                columnNumber: 19\n                                            }, this),\n                                            grosorActual === grosor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"w-4 h-4 text-purple-600\",\n                                                fill: \"none\",\n                                                stroke: \"currentColor\",\n                                                viewBox: \"0 0 24 24\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M5 13l4 4L19 7\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                    lineNumber: 147,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                lineNumber: 146,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, grosor, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 124,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 122,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"pt-3 mt-3 border-t\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-xs font-medium text-gray-600 block mb-1\",\n                                        children: \"Grosor personalizado (1-50):\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 155,\n                                        columnNumber: 3\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        type: \"number\",\n                                        min: 1,\n                                        max: 50,\n                                        defaultValue: grosorActual,\n                                        onChange: (e)=>{\n                                            const newWidth = parseInt(e.target.value);\n                                            if (!isNaN(newWidth) && newWidth > 0 && newWidth <= 50) {\n                                                onUpdateLine(lineElement.id, {\n                                                    strokeWidth: newWidth,\n                                                    isPreview: false,\n                                                    isFinal: true\n                                                });\n                                            }\n                                        },\n                                        className: \"w-full px-2 py-1 border rounded text-sm\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 158,\n                                        columnNumber: 3\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 154,\n                                columnNumber: 1\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 120,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                lineNumber: 86,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                ref: colorRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setMostrarSelectorColor(!mostrarSelectorColor),\n                        className: `flex items-center gap-2 px-3 py-2 rounded border text-sm transition-all duration-200 ${mostrarSelectorColor ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                        title: `Color: ${colorActual}`,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-5 h-5 rounded-full border-2 border-gray-300\",\n                                style: {\n                                    backgroundColor: colorActual\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 191,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-xs font-medium\",\n                                children: \"Color\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 195,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: `w-3 h-3 transition-transform ${mostrarSelectorColor ? 'rotate-180' : ''}`,\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                viewBox: \"0 0 24 24\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M19 9l-7 7-7-7\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 204,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 198,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 183,\n                        columnNumber: 9\n                    }, this),\n                    mostrarSelectorColor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-full right-0 mt-2 bg-white border rounded-lg shadow-xl p-3 z-50 min-w-[250px]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs font-medium text-gray-600 mb-2\",\n                                children: \"Seleccionar color:\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 211,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mb-3\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"color\",\n                                    value: colorActual,\n                                    onChange: (e)=>actualizarColor(e.target.value),\n                                    className: \"w-full h-8 rounded border border-gray-300 cursor-pointer\",\n                                    title: \"Color personalizado\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 215,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 214,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-6 gap-2\",\n                                children: coloresPredefinidos.map((color)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>actualizarColor(color),\n                                        className: `w-8 h-8 rounded border-2 hover:border-purple-400 transition-colors ${colorActual === color ? 'border-purple-500 shadow-md' : 'border-gray-300'}`,\n                                        style: {\n                                            backgroundColor: color\n                                        },\n                                        title: color,\n                                        children: colorActual === color && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"w-4 h-4 mx-auto text-white drop-shadow-sm\",\n                                            fill: \"none\",\n                                            stroke: \"currentColor\",\n                                            viewBox: \"0 0 24 24\",\n                                            style: {\n                                                filter: color === \"#ffffff\" ? \"invert(1)\" : \"none\"\n                                            },\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 3,\n                                                d: \"M5 13l4 4L19 7\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                lineNumber: 245,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                            lineNumber: 238,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, color, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 227,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 225,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"pt-2 mt-2 border-t text-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-500 font-mono\",\n                                    children: colorActual\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 254,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 253,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 210,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                lineNumber: 182,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-1 px-2 py-1 bg-gray-50 rounded text-xs text-gray-600\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        className: \"w-3 h-3\",\n                        fill: \"none\",\n                        stroke: \"currentColor\",\n                        viewBox: \"0 0 24 24\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 2,\n                            d: \"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                            lineNumber: 263,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 262,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"L\\xednea\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 265,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                lineNumber: 261,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n        lineNumber: 75,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0xpbmVUb29sYmFyLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLDZCQUE2Qjs7QUFDdUI7QUFFckMsU0FBU0csWUFBWSxFQUNsQ0MsV0FBVyxFQUNYQyxZQUFZLEVBQ1pDLFFBQVEsQ0FBQyxDQUFDLEVBQ1g7SUFDQyxNQUFNLENBQUNDLHVCQUF1QkMseUJBQXlCLEdBQUdSLCtDQUFRQSxDQUFDO0lBQ25FLE1BQU0sQ0FBQ1Msc0JBQXNCQyx3QkFBd0IsR0FBR1YsK0NBQVFBLENBQUM7SUFDakUsTUFBTVcsWUFBWVYsNkNBQU1BLENBQUM7SUFDekIsTUFBTVcsV0FBV1gsNkNBQU1BLENBQUM7SUFFeEIsd0NBQXdDO0lBQ3hDQyxnREFBU0E7aUNBQUM7WUFDUixNQUFNVzswREFBbUIsQ0FBQ0M7b0JBQ3hCLElBQUlILFVBQVVJLE9BQU8sSUFBSSxDQUFDSixVQUFVSSxPQUFPLENBQUNDLFFBQVEsQ0FBQ0YsRUFBRUcsTUFBTSxHQUFHO3dCQUM5RFQseUJBQXlCO29CQUMzQjtvQkFDQSxJQUFJSSxTQUFTRyxPQUFPLElBQUksQ0FBQ0gsU0FBU0csT0FBTyxDQUFDQyxRQUFRLENBQUNGLEVBQUVHLE1BQU0sR0FBRzt3QkFDNURQLHdCQUF3QjtvQkFDMUI7Z0JBQ0Y7O1lBRUFRLFNBQVNDLGdCQUFnQixDQUFDLGFBQWFOO1lBQ3ZDO3lDQUFPLElBQU1LLFNBQVNFLG1CQUFtQixDQUFDLGFBQWFQOztRQUN6RDtnQ0FBRyxFQUFFO0lBRUwsSUFBSSxDQUFDVCxlQUFlQSxZQUFZaUIsSUFBSSxLQUFLLFdBQVdqQixZQUFZa0IsTUFBTSxLQUFLLFFBQVE7UUFDakYsT0FBTztJQUNUO0lBRUEsTUFBTUMsZUFBZW5CLFlBQVlvQixXQUFXLElBQUk7SUFDaEQsTUFBTUMsY0FBY3JCLFlBQVlzQixLQUFLLElBQUk7SUFFekMsd0JBQXdCO0lBQ3hCLE1BQU1DLHNCQUFzQjtRQUFDO1FBQUc7UUFBRztRQUFHO1FB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WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXExpbmVUb29sYmFyLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL0xpbmVUb29sYmFyLmpzeFxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExpbmVUb29sYmFyKHsgXHJcbiAgbGluZUVsZW1lbnQsIFxyXG4gIG9uVXBkYXRlTGluZSwgXHJcbiAgc3R5bGUgPSB7fSBcclxufSkge1xyXG4gIGNvbnN0IFttb3N0cmFyU2VsZWN0b3JHcm9zb3IsIHNldE1vc3RyYXJTZWxlY3Rvckdyb3Nvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW21vc3RyYXJTZWxlY3RvckNvbG9yLCBzZXRNb3N0cmFyU2VsZWN0b3JDb2xvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgZ3Jvc29yUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IGNvbG9yUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICAvLyBDZXJyYXIgc2VsZWN0b3JlcyBhbCBoYWNlciBjbGljIGZ1ZXJhXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUNsaWNrRnVlcmEgPSAoZSkgPT4ge1xyXG4gICAgICBpZiAoZ3Jvc29yUmVmLmN1cnJlbnQgJiYgIWdyb3NvclJlZi5jdXJyZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICAgIHNldE1vc3RyYXJTZWxlY3Rvckdyb3NvcihmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbG9yUmVmLmN1cnJlbnQgJiYgIWNvbG9yUmVmLmN1cnJlbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrRnVlcmEpO1xyXG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrRnVlcmEpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgaWYgKCFsaW5lRWxlbWVudCB8fCBsaW5lRWxlbWVudC50aXBvICE9PSAnZm9ybWEnIHx8IGxpbmVFbGVtZW50LmZpZ3VyYSAhPT0gJ2xpbmUnKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGNvbnN0IGdyb3NvckFjdHVhbCA9IGxpbmVFbGVtZW50LnN0cm9rZVdpZHRoIHx8IDM7XHJcbiAgY29uc3QgY29sb3JBY3R1YWwgPSBsaW5lRWxlbWVudC5jb2xvciB8fCBcIiMwMDAwMDBcIjtcclxuXHJcbiAgLy8gR3Jvc29yZXMgcHJlZGVmaW5pZG9zXHJcbiAgY29uc3QgZ3Jvc29yZXNEaXNwb25pYmxlcyA9IFsxLCAyLCAzLCA0LCA1LCA2LCA4LCAxMCwgMTIsIDE1LCAxOCwgMjAsIDI0LCAyOCwgMzJdO1xyXG5cclxuICAvLyBDb2xvcmVzIHByZWRlZmluaWRvcyBwb3B1bGFyZXNcclxuICBjb25zdCBjb2xvcmVzUHJlZGVmaW5pZG9zID0gW1xyXG4gICAgXCIjMDAwMDAwXCIsIC8vIE5lZ3JvXHJcbiAgICBcIiNmZmZmZmZcIiwgLy8gQmxhbmNvXHJcbiAgICBcIiNmZjAwMDBcIiwgLy8gUm9qb1xyXG4gICAgXCIjMDBmZjAwXCIsIC8vIFZlcmRlXHJcbiAgICBcIiMwMDAwZmZcIiwgLy8gQXp1bFxyXG4gICAgXCIjZmZmZjAwXCIsIC8vIEFtYXJpbGxvXHJcbiAgICBcIiNmZjAwZmZcIiwgLy8gTWFnZW50YVxyXG4gICAgXCIjMDBmZmZmXCIsIC8vIEN5YW5cclxuICAgIFwiI2ZmYTUwMFwiLCAvLyBOYXJhbmphXHJcbiAgICBcIiM4MDAwODBcIiwgLy8gUMO6cnB1cmFcclxuICAgIFwiIzgwODA4MFwiLCAvLyBHcmlzXHJcbiAgICBcIiNhNTJhMmFcIiwgLy8gTWFycsOzblxyXG4gIF07XHJcblxyXG4gIGNvbnN0IGFjdHVhbGl6YXJHcm9zb3IgPSAobnVldm9Hcm9zb3IpID0+IHtcclxuICAgIGlmIChvblVwZGF0ZUxpbmUpIHtcclxuICAgICAgb25VcGRhdGVMaW5lKGxpbmVFbGVtZW50LmlkLCB7XHJcbiAgICAgICAgc3Ryb2tlV2lkdGg6IG51ZXZvR3Jvc29yLFxyXG4gICAgICAgIGlzRmluYWw6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRNb3N0cmFyU2VsZWN0b3JHcm9zb3IoZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFjdHVhbGl6YXJDb2xvciA9IChudWV2b0NvbG9yKSA9PiB7XHJcbiAgICBpZiAob25VcGRhdGVMaW5lKSB7XHJcbiAgICAgIG9uVXBkYXRlTGluZShsaW5lRWxlbWVudC5pZCwge1xyXG4gICAgICAgIGNvbG9yOiBudWV2b0NvbG9yLFxyXG4gICAgICAgIGlzRmluYWw6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXZcclxuICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei01MCBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBzaGFkb3cgcC0yIGZsZXggZ2FwLTIgaXRlbXMtY2VudGVyIGxpbmUtdG9vbGJhclwiXHJcbiAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgd2lkdGg6IFwiYXV0b1wiLFxyXG4gICAgICAgIG1heFdpZHRoOiBcIjQwMHB4XCIsXHJcbiAgICAgICAgYW5pbWF0aW9uOiBcImZhZGVJblNjYWxlIDAuMTVzIGVhc2Utb3V0XCIsIC8vIEFuaW1hY2nDs24gc3VhdmUgZGUgYXBhcmljacOzblxyXG4gICAgICB9fVxyXG4gICAgICBvbk1vdXNlRG93bj17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9IC8vIFByZXZlbmlyIGludGVyZmVyZW5jaWFzIGNvbiBlbCBjYW52YXNcclxuICAgID5cclxuICAgICAgey8qIPCfk48gQ29udHJvbCBkZSBncm9zb3IgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIiByZWY9e2dyb3NvclJlZn0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yR3Jvc29yKCFtb3N0cmFyU2VsZWN0b3JHcm9zb3IpfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHgtMyBweS0yIHJvdW5kZWQgYm9yZGVyIHRleHQtc20gdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwICR7XHJcbiAgICAgICAgICAgIG1vc3RyYXJTZWxlY3Rvckdyb3NvciA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxyXG4gICAgICAgICAgfWB9XHJcbiAgICAgICAgICB0aXRsZT17YEdyb3NvcjogJHtncm9zb3JBY3R1YWx9cHhgfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHsvKiBQcmV2aXN1YWxpemFjacOzbiB2aXN1YWwgZGVsIGdyb3NvciAqL31cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgPGRpdiBcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTcwMCByb3VuZGVkLWZ1bGxcIlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIyMHB4XCIsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGAke01hdGgubWluKE1hdGgubWF4KGdyb3NvckFjdHVhbCAvIDIsIDEpLCA4KX1weGAsXHJcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IFwiMXB4XCJcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtXCI+e2dyb3NvckFjdHVhbH1weDwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB7LyogRmxlY2hhICovfVxyXG4gICAgICAgICAgPHN2ZyBcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy0zIGgtMyB0cmFuc2l0aW9uLXRyYW5zZm9ybSAke21vc3RyYXJTZWxlY3Rvckdyb3NvciA/ICdyb3RhdGUtMTgwJyA6ICcnfWB9IFxyXG4gICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxyXG4gICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcclxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xOSA5bC03IDctNy03XCIgLz5cclxuICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICB7LyogRHJvcGRvd24gZGUgZ3Jvc29yZXMgKi99XHJcbiAgICAgICAge21vc3RyYXJTZWxlY3Rvckdyb3NvciAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC1mdWxsIGxlZnQtMCBtdC0yIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkLWxnIHNoYWRvdy14bCBwLTMgei01MCBtaW4tdy1bMjAwcHhdXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNjAwIG1iLTJcIj5TZWxlY2Npb25hciBncm9zb3I6PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yIG1heC1oLVsyMDBweF0gb3ZlcmZsb3cteS1hdXRvXCI+XHJcbiAgICAgICAgICAgICAge2dyb3NvcmVzRGlzcG9uaWJsZXMubWFwKChncm9zb3IpID0+IChcclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAga2V5PXtncm9zb3J9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGFjdHVhbGl6YXJHcm9zb3IoZ3Jvc29yKX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyAke1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3NvckFjdHVhbCA9PT0gZ3Jvc29yID8gJ2JnLXB1cnBsZS01MCBib3JkZXIgYm9yZGVyLXB1cnBsZS0zMDAnIDogJydcclxuICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICB7LyogUHJldmlzdWFsaXphY2nDs24gdmlzdWFsICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTcwMCByb3VuZGVkLWZ1bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMzBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGAke01hdGgubWluKE1hdGgubWF4KGdyb3NvciAvIDIsIDEpLCAxMil9cHhgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IFwiMXB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+e2dyb3Nvcn1weDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB7LyogQ2hlY2ttYXJrIHNpIGVzdMOhIHNlbGVjY2lvbmFkbyAqL31cclxuICAgICAgICAgICAgICAgICAge2dyb3NvckFjdHVhbCA9PT0gZ3Jvc29yICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1wdXJwbGUtNjAwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNSAxM2w0IDRMMTkgN1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIHsvKiDwn5SiIElucHV0IG1hbnVhbCBwYXJhIGdyb3NvciAqL31cclxuPGRpdiBjbGFzc05hbWU9XCJwdC0zIG10LTMgYm9yZGVyLXRcIj5cclxuICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNjAwIGJsb2NrIG1iLTFcIj5cclxuICAgIEdyb3NvciBwZXJzb25hbGl6YWRvICgxLTUwKTpcclxuICA8L2xhYmVsPlxyXG4gIDxpbnB1dFxyXG4gICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICBtaW49ezF9XHJcbiAgICBtYXg9ezUwfVxyXG4gICAgZGVmYXVsdFZhbHVlPXtncm9zb3JBY3R1YWx9XHJcbiAgICBvbkNoYW5nZT17KGUpID0+IHtcclxuICAgICAgY29uc3QgbmV3V2lkdGggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgIGlmICghaXNOYU4obmV3V2lkdGgpICYmIG5ld1dpZHRoID4gMCAmJiBuZXdXaWR0aCA8PSA1MCkge1xyXG4gICAgICAgIG9uVXBkYXRlTGluZShsaW5lRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IG5ld1dpZHRoLFxyXG4gICAgICAgICAgaXNQcmV2aWV3OiBmYWxzZSxcclxuICAgICAgICAgIGlzRmluYWw6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfX1cclxuICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0yIHB5LTEgYm9yZGVyIHJvdW5kZWQgdGV4dC1zbVwiXHJcbiAgLz5cclxuPC9kaXY+XHJcblxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7Lyog8J+OqCBDb250cm9sIGRlIGNvbG9yICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCIgcmVmPXtjb2xvclJlZn0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoIW1vc3RyYXJTZWxlY3RvckNvbG9yKX1cclxuICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMiByb3VuZGVkIGJvcmRlciB0ZXh0LXNtIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCAke1xyXG4gICAgICAgICAgICBtb3N0cmFyU2VsZWN0b3JDb2xvciA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxyXG4gICAgICAgICAgfWB9XHJcbiAgICAgICAgICB0aXRsZT17YENvbG9yOiAke2NvbG9yQWN0dWFsfWB9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgey8qIE11ZXN0cmEgZGUgY29sb3IgKi99XHJcbiAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTUgaC01IHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItZ3JheS0zMDBcIlxyXG4gICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yQWN0dWFsIH19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bVwiPkNvbG9yPC9zcGFuPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB7LyogRmxlY2hhICovfVxyXG4gICAgICAgICAgPHN2ZyBcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy0zIGgtMyB0cmFuc2l0aW9uLXRyYW5zZm9ybSAke21vc3RyYXJTZWxlY3RvckNvbG9yID8gJ3JvdGF0ZS0xODAnIDogJyd9YH0gXHJcbiAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXHJcbiAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxyXG4gICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTE5IDlsLTcgNy03LTdcIiAvPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIHsvKiBEcm9wZG93biBkZSBjb2xvcmVzICovfVxyXG4gICAgICAgIHttb3N0cmFyU2VsZWN0b3JDb2xvciAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC1mdWxsIHJpZ2h0LTAgbXQtMiBiZy13aGl0ZSBib3JkZXIgcm91bmRlZC1sZyBzaGFkb3cteGwgcC0zIHotNTAgbWluLXctWzI1MHB4XVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTYwMCBtYi0yXCI+U2VsZWNjaW9uYXIgY29sb3I6PC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB7LyogU2VsZWN0b3IgZGUgY29sb3IgcGVyc29uYWxpemFkbyAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zXCI+XHJcbiAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICB0eXBlPVwiY29sb3JcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e2NvbG9yQWN0dWFsfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBhY3R1YWxpemFyQ29sb3IoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtOCByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JheS0zMDAgY3Vyc29yLXBvaW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJDb2xvciBwZXJzb25hbGl6YWRvXCJcclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHsvKiBDb2xvcmVzIHByZWRlZmluaWRvcyAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy02IGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAge2NvbG9yZXNQcmVkZWZpbmlkb3MubWFwKChjb2xvcikgPT4gKFxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBrZXk9e2NvbG9yfVxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBhY3R1YWxpemFyQ29sb3IoY29sb3IpfVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LTggaC04IHJvdW5kZWQgYm9yZGVyLTIgaG92ZXI6Ym9yZGVyLXB1cnBsZS00MDAgdHJhbnNpdGlvbi1jb2xvcnMgJHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckFjdHVhbCA9PT0gY29sb3IgPyAnYm9yZGVyLXB1cnBsZS01MDAgc2hhZG93LW1kJyA6ICdib3JkZXItZ3JheS0zMDAnXHJcbiAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yIH19XHJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb2xvcn1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgey8qIENoZWNrbWFyayBwYXJhIGNvbG9yIHNlbGVjY2lvbmFkbyAqL31cclxuICAgICAgICAgICAgICAgICAge2NvbG9yQWN0dWFsID09PSBjb2xvciAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBcclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctNCBoLTQgbXgtYXV0byB0ZXh0LXdoaXRlIGRyb3Atc2hhZG93LXNtXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZpbHRlcjogY29sb3IgPT09IFwiI2ZmZmZmZlwiID8gXCJpbnZlcnQoMSlcIiA6IFwibm9uZVwiIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXszfSBkPVwiTTUgMTNsNCA0TDE5IDdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgey8qIFZhbG9yIGhleCAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0yIG10LTIgYm9yZGVyLXQgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgZm9udC1tb25vXCI+e2NvbG9yQWN0dWFsfTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiDwn5OQIEluZm9ybWFjacOzbiBhZGljaW9uYWwgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgcHgtMiBweS0xIGJnLWdyYXktNTAgcm91bmRlZCB0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5cclxuICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctMyBoLTNcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xMyAxNmgtMXYtNGgtMW0xLTRoLjAxTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+XHJcbiAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPHNwYW4+TMOtbmVhPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJMaW5lVG9vbGJhciIsImxpbmVFbGVtZW50Iiwib25VcGRhdGVMaW5lIiwic3R5bGUiLCJtb3N0cmFyU2VsZWN0b3JHcm9zb3IiLCJzZXRNb3N0cmFyU2VsZWN0b3JHcm9zb3IiLCJtb3N0cmFyU2VsZWN0b3JDb2xvciIsInNldE1vc3RyYXJTZWxlY3RvckNvbG9yIiwiZ3Jvc29yUmVmIiwiY29sb3JSZWYiLCJoYW5kbGVDbGlja0Z1ZXJhIiwiZSIsImN1cnJlbnQiLCJjb250YWlucyIsInRhcmdldCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0aXBvIiwiZmlndXJhIiwiZ3Jvc29yQWN0dWFsIiwic3Ryb2tlV2lkdGgiLCJjb2xvckFjdHVhbCIsImNvbG9yIiwiZ3Jvc29yZXNEaXNwb25pYmxlcyIsImNvbG9yZXNQcmVkZWZpbmlkb3MiLCJhY3R1YWxpemFyR3Jvc29yIiwibnVldm9Hcm9zb3IiLCJpZCIsImlzRmluYWwiLCJhY3R1YWxpemFyQ29sb3IiLCJudWV2b0NvbG9yIiwiZGl2IiwiY2xhc3NOYW1lIiwid2lkdGgiLCJtYXhXaWR0aCIsImFuaW1hdGlvbiIsIm9uTW91c2VEb3duIiwic3RvcFByb3BhZ2F0aW9uIiwicmVmIiwiYnV0dG9uIiwib25DbGljayIsInRpdGxlIiwiaGVpZ2h0IiwiTWF0aCIsIm1pbiIsIm1heCIsIm1pbkhlaWdodCIsInNwYW4iLCJzdmciLCJmaWxsIiwic3Ryb2tlIiwidmlld0JveCIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJkIiwibWFwIiwiZ3Jvc29yIiwibGFiZWwiLCJpbnB1dCIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJvbkNoYW5nZSIsIm5ld1dpZHRoIiwicGFyc2VJbnQiLCJ2YWx1ZSIsImlzTmFOIiwiaXNQcmV2aWV3IiwiYmFja2dyb3VuZENvbG9yIiwiZmlsdGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/LineToolbar.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/MenuOpcionesElemento.jsx":
/*!*************************************************!*\
  !*** ./src/components/MenuOpcionesElemento.jsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MenuOpcionesElemento)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n// C:\\Reservaeldia\\src\\components\\MenuOpcionesElemento.jsx\n\n\n\n\n// Normaliza y valida URL básica\nfunction sanitizeURL(url) {\n    if (!url) return \"\";\n    const t = String(url).trim();\n    const ok = /^(https?:\\/\\/|mailto:|tel:|whatsapp:)/i.test(t);\n    if (ok) return t;\n    // dominio simple -> completar\n    if (/^[\\w.-]+\\.[a-z]{2,}(\\/.*)?$/i.test(t)) return `https://${t}`;\n    try {\n        const u = new URL(t);\n        return u.toString();\n    } catch  {\n        return \"\";\n    }\n}\n/**\r\n * Menú contextual para un elemento seleccionado en el canvas.\r\n * - Se posiciona pegado al botón ⚙️ (botonOpcionesRef)\r\n * - Evita el \"flash\" inicial usando useLayoutEffect + visibility hasta tener posición lista\r\n */ function MenuOpcionesElemento({ isOpen, botonOpcionesRef, elementoSeleccionado, onCopiar, onPegar, onDuplicar, onEliminar, moverElemento, onCerrar, // Para \"Usar como fondo\"\nreemplazarFondo, secciones, objetos, setSecciones, setObjetos, setElementosSeleccionados }) {\n    // Estado local del submenu \"Orden de capa\"\n    const [mostrarSubmenuCapa, setMostrarSubmenuCapa] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Posición calculada del menú\n    const [pos, setPos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: -9999,\n        y: -9999\n    });\n    // Flag para mostrar el menú sólo cuando tenemos coords válidas\n    const [ready, setReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Ref del panel principal (para click-outside del padre)\n    const menuRootRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Ref del botón \"Orden de capa\" (ancla para posicionar el flyout)\n    const btnOrdenRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Ref del flyout (por si querés click-outside específico del flyout)\n    const submenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Posición del flyout\n    const [submenuPos, setSubmenuPos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: -9999,\n        y: -9999\n    });\n    const [submenuReady, setSubmenuReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isMobile, setIsMobile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const esImagen = elementoSeleccionado?.tipo === \"imagen\";\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (true) return;\n            const mq = window.matchMedia(\"(max-width: 768px)\");\n            const update = {\n                \"MenuOpcionesElemento.useEffect.update\": ()=>setIsMobile(mq.matches)\n            }[\"MenuOpcionesElemento.useEffect.update\"];\n            update();\n            mq.addEventListener?.(\"change\", update);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>mq.removeEventListener?.(\"change\", update)\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], []);\n    // --- Helper: calcula la posición final del menú desde el rect del botón ⚙️\n    const calcularPosDesdeRect = (r)=>{\n        const menuWidth = 256; // w-64\n        const menuHeight = 300; // estimación\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        let x = r.right + 8; // por defecto a la derecha del botón\n        let y = r.top;\n        // Si se sale a la derecha, lo ponemos a la izquierda del botón\n        if (x + menuWidth > vw) x = r.left - menuWidth - 8;\n        // Si se sale por abajo, lo acomodamos hacia arriba\n        if (y + menuHeight > vh) y = Math.max(8, r.bottom - menuHeight);\n        return {\n            x,\n            y\n        };\n    };\n    // --- Submenú Enlace ---\n    const [mostrarSubmenuEnlace, setMostrarSubmenuEnlace] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const btnEnlaceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const submenuEnlaceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [enlacePos, setEnlacePos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: -9999,\n        y: -9999\n    });\n    const [enlaceReady, setEnlaceReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [urlInput, setUrlInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [urlError, setUrlError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Al abrir el menú, pre-cargar la URL actual del elemento (si tiene)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!isOpen || !elementoSeleccionado) return;\n            const actual = elementoSeleccionado?.enlace?.href || elementoSeleccionado?.enlace || \"\";\n            setUrlInput(actual || \"\");\n            setUrlError(false);\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        isOpen,\n        elementoSeleccionado\n    ]);\n    // Posicionar el flyout de \"Enlace\"\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!mostrarSubmenuEnlace) {\n                setEnlaceReady(false);\n                setEnlacePos({\n                    x: -9999,\n                    y: -9999\n                });\n                return;\n            }\n            const btn = btnEnlaceRef.current;\n            if (!btn) return;\n            const r = btn.getBoundingClientRect();\n            const flyoutWidth = 320; // un poco más ancho para el input\n            const flyoutHeight = 160; // estimado\n            const gap = 8;\n            const vw = window.innerWidth;\n            const vh = window.innerHeight;\n            let x = r.right + gap;\n            let y = r.top;\n            if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n            if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n            setEnlacePos({\n                x,\n                y\n            });\n            setEnlaceReady(true);\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        mostrarSubmenuEnlace\n    ]);\n    // Reposicionar ante scroll/resize con el flyout abierto\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!mostrarSubmenuEnlace) return;\n            const handle = {\n                \"MenuOpcionesElemento.useEffect.handle\": ()=>{\n                    const btn = btnEnlaceRef.current;\n                    if (!btn) return;\n                    const r = btn.getBoundingClientRect();\n                    const flyoutWidth = 320, flyoutHeight = 160, gap = 8;\n                    const vw = window.innerWidth, vh = window.innerHeight;\n                    let x = r.right + gap;\n                    let y = r.top;\n                    if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n                    if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n                    setEnlacePos({\n                        x,\n                        y\n                    });\n                }\n            }[\"MenuOpcionesElemento.useEffect.handle\"];\n            window.addEventListener(\"resize\", handle);\n            window.addEventListener(\"scroll\", handle, true);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", handle);\n                    window.removeEventListener(\"scroll\", handle, true);\n                }\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        mostrarSubmenuEnlace\n    ]);\n    const guardarEnlace = ()=>{\n        const limpio = sanitizeURL(urlInput);\n        if (!limpio) {\n            setUrlError(true);\n            return;\n        }\n        // Guardamos como objeto con target siempre _blank\n        setObjetos((prev)=>prev.map((o)=>{\n                if (o.id !== elementoSeleccionado?.id) return o;\n                return {\n                    ...o,\n                    enlace: {\n                        href: limpio,\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\"\n                    }\n                };\n            }));\n        setMostrarSubmenuEnlace(false);\n        onCerrar();\n    };\n    const quitarEnlace = ()=>{\n        setObjetos((prev)=>prev.map((o)=>{\n                if (o.id !== elementoSeleccionado?.id) return o;\n                const { enlace, ...rest } = o;\n                return rest;\n            }));\n        setMostrarSubmenuEnlace(false);\n        onCerrar();\n    };\n    // 1) Posicionar ANTES del paint para evitar flicker\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!isOpen) {\n                // si está cerrado, reseteamos\n                setReady(false);\n                setPos({\n                    x: -9999,\n                    y: -9999\n                });\n                return;\n            }\n            if (isMobile) {\n                setReady(true);\n                return;\n            }\n            const btn = botonOpcionesRef?.current;\n            if (!btn) return;\n            const r = btn.getBoundingClientRect();\n            const p = calcularPosDesdeRect(r);\n            setPos(p);\n            setReady(true); // ya tenemos posición; mostrar menú\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        isOpen,\n        botonOpcionesRef,\n        isMobile\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!mostrarSubmenuCapa) {\n                setSubmenuReady(false);\n                setSubmenuPos({\n                    x: -9999,\n                    y: -9999\n                });\n                return;\n            }\n            const btn = btnOrdenRef.current;\n            if (!btn) return;\n            const r = btn.getBoundingClientRect();\n            const flyoutWidth = 224; // ~ w-56\n            const flyoutHeight = 180; // estimado\n            const gap = 8;\n            const vw = window.innerWidth;\n            const vh = window.innerHeight;\n            let x = r.right + gap; // por defecto, a la derecha del botón\n            let y = r.top;\n            // Si no entra a la derecha, lo abrimos a la izquierda del panel\n            if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n            // Si se pasa por abajo, lo “clamp” hacia arriba\n            if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n            setSubmenuPos({\n                x,\n                y\n            });\n            setSubmenuReady(true);\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        mostrarSubmenuCapa\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!mostrarSubmenuCapa) return;\n            const handle = {\n                \"MenuOpcionesElemento.useEffect.handle\": ()=>{\n                    const btn = btnOrdenRef.current;\n                    if (!btn) return;\n                    const r = btn.getBoundingClientRect();\n                    const gap = 8, flyoutWidth = 224, flyoutHeight = 180;\n                    const vw = window.innerWidth, vh = window.innerHeight;\n                    let x = r.right + gap;\n                    let y = r.top;\n                    if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n                    if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n                    setSubmenuPos({\n                        x,\n                        y\n                    });\n                }\n            }[\"MenuOpcionesElemento.useEffect.handle\"];\n            window.addEventListener(\"resize\", handle);\n            window.addEventListener(\"scroll\", handle, true);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", handle);\n                    window.removeEventListener(\"scroll\", handle, true);\n                }\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        mostrarSubmenuCapa\n    ]);\n    // 2) Reposicionar ante scroll/resize mientras esté abierto\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!isOpen) return;\n            const handle = {\n                \"MenuOpcionesElemento.useEffect.handle\": ()=>{\n                    const btn = botonOpcionesRef?.current;\n                    if (!btn) return;\n                    const r = btn.getBoundingClientRect();\n                    setPos(calcularPosDesdeRect(r));\n                }\n            }[\"MenuOpcionesElemento.useEffect.handle\"];\n            window.addEventListener(\"resize\", handle);\n            window.addEventListener(\"scroll\", handle, true);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", handle);\n                    window.removeEventListener(\"scroll\", handle, true);\n                }\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        isOpen,\n        botonOpcionesRef\n    ]);\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: menuRootRef,\n        className: `fixed z-50 bg-white border shadow-xl p-3 text-sm space-y-1 menu-z-index ${isMobile ? \"rounded-2xl w-auto\" : \"rounded-lg w-64\"}`,\n        style: isMobile ? {\n            left: \"8px\",\n            right: \"8px\",\n            bottom: \"calc(8px + env(safe-area-inset-bottom, 0px))\",\n            top: \"auto\",\n            borderColor: \"#773dbe\",\n            borderWidth: \"1px\",\n            maxHeight: \"70vh\",\n            overflowY: \"auto\",\n            animation: \"fadeInScale 0.15s ease-out\",\n            visibility: ready ? \"visible\" : \"hidden\"\n        } : {\n            left: `${pos.x}px`,\n            top: `${pos.y}px`,\n            borderColor: \"#773dbe\",\n            borderWidth: \"1px\",\n            maxHeight: \"400px\",\n            overflowY: \"auto\",\n            animation: \"fadeInScale 0.15s ease-out\",\n            visibility: ready ? \"visible\" : \"hidden\"\n        },\n        // Evitar que se propague el click al body (click-outside)\n        onMouseDown: (e)=>e.stopPropagation(),\n        onClick: (e)=>e.stopPropagation(),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onCopiar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.Copy, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 348,\n                        columnNumber: 17\n                    }, this),\n                    \" Copiar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 341,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onPegar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.ClipboardPaste, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 359,\n                        columnNumber: 17\n                    }, this),\n                    \" Pegar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 352,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onDuplicar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.PlusCircle, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 370,\n                        columnNumber: 17\n                    }, this),\n                    \" Duplicar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 363,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        ref: btnEnlaceRef,\n                        onClick: ()=>{\n                            // cerramos el de capa si estaba abierto, para no superponer\n                            setMostrarSubmenuCapa(false);\n                            setMostrarSubmenuEnlace((prev)=>!prev);\n                        },\n                        className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.Link2, {\n                                className: \"w-4 h-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 385,\n                                columnNumber: 21\n                            }, this),\n                            \" Enlace\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 376,\n                        columnNumber: 17\n                    }, this),\n                    mostrarSubmenuEnlace && /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: submenuEnlaceRef,\n                        className: \"fixed z-[60] bg-white border rounded shadow-lg p-3 space-y-3 menu-z-index\",\n                        style: {\n                            left: enlacePos.x,\n                            top: enlacePos.y,\n                            width: 320,\n                            visibility: enlaceReady ? \"visible\" : \"hidden\",\n                            borderColor: \"#773dbe\"\n                        },\n                        onMouseDown: (e)=>e.stopPropagation(),\n                        onClick: (e)=>e.stopPropagation(),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-sm font-medium\",\n                                children: \"Agregar enlace\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 404,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"text\",\n                                value: urlInput,\n                                onChange: (e)=>{\n                                    setUrlInput(e.target.value);\n                                    if (urlError) setUrlError(false);\n                                },\n                                onKeyDown: (e)=>{\n                                    if (e.key === \"Enter\") guardarEnlace();\n                                    if (e.key === \"Escape\") setMostrarSubmenuEnlace(false);\n                                },\n                                placeholder: \"https://ejemplo.com o mailto:...\",\n                                className: `w-full px-3 py-2 border rounded outline-none ${urlError ? \"border-red-500\" : \"border-gray-300\"}`\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 406,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-wrap gap-2 text-xs\",\n                                children: [\n                                    \"https://\",\n                                    \"mailto:\",\n                                    \"tel:\",\n                                    \"whatsapp:\"\n                                ].map((pref)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setUrlInput((u)=>u.startsWith(pref) ? u : pref + u),\n                                        className: \"px-2 py-1 bg-gray-100 rounded hover:bg-gray-200\",\n                                        children: pref\n                                    }, pref, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 425,\n                                        columnNumber: 37\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 423,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-1 sm:grid-cols-2 gap-2 items-center mt-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: quitarEnlace,\n                                        className: \"inline-flex items-center gap-2 px-2.5 py-1.5 text-[13px] text-red-600 hover:bg-red-50 rounded whitespace-nowrap\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.X, {\n                                                className: \"w-4 h-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                                lineNumber: 442,\n                                                columnNumber: 37\n                                            }, this),\n                                            \"Quitar enlace\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 438,\n                                        columnNumber: 33\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center justify-end gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: ()=>setMostrarSubmenuEnlace(false),\n                                                className: \"px-2.5 py-1.5 text-[13px] rounded hover:bg-gray-100 whitespace-nowrap\",\n                                                children: \"Cancelar\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                                lineNumber: 448,\n                                                columnNumber: 37\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: guardarEnlace,\n                                                className: \"px-2.5 py-1.5 text-[13px] bg-[#773dbe] text-white rounded hover:opacity-90 whitespace-nowrap\",\n                                                children: \"Guardar\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                                lineNumber: 454,\n                                                columnNumber: 37\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 447,\n                                        columnNumber: 33\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 436,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-[11px] text-gray-500\",\n                                children: \"Se abrir\\xe1 siempre en una pesta\\xf1a nueva.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 464,\n                                columnNumber: 29\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 391,\n                        columnNumber: 25\n                    }, this), document.body)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 375,\n                columnNumber: 13\n            }, this),\n            esImagen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    reemplazarFondo({\n                        elementoImagen: elementoSeleccionado,\n                        secciones,\n                        objetos,\n                        setSecciones,\n                        setObjetos,\n                        setElementosSeleccionados,\n                        setMostrarPanelZ: onCerrar\n                    });\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 bg-gradient-to-br from-blue-400 to-purple-500 rounded\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 491,\n                        columnNumber: 21\n                    }, this),\n                    \"Usar como fondo\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 477,\n                columnNumber: 17\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onEliminar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.Trash2, {\n                        className: \"w-4 h-4 text-red-500\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 504,\n                        columnNumber: 17\n                    }, this),\n                    \" Eliminar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 497,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        ref: btnOrdenRef,\n                        onClick: ()=>setMostrarSubmenuCapa((prev)=>!prev),\n                        className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.Layers, {\n                                className: \"w-4 h-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 514,\n                                columnNumber: 21\n                            }, this),\n                            \" Orden de capa\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 509,\n                        columnNumber: 17\n                    }, this),\n                    mostrarSubmenuCapa && /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: submenuRef,\n                        className: \"fixed z-[60] bg-white border rounded shadow-lg p-2 space-y-1 menu-z-index\",\n                        style: {\n                            left: submenuPos.x,\n                            top: submenuPos.y,\n                            width: 224,\n                            visibility: submenuReady ? \"visible\" : \"hidden\"\n                        },\n                        onMouseDown: (e)=>e.stopPropagation(),\n                        onClick: (e)=>e.stopPropagation(),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"al-frente\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.ArrowUp, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 540,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Traer al frente\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 532,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"subir\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.MoveUp, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 551,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Subir\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 543,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"bajar\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.MoveDown, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 562,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Bajar\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 554,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"al-fondo\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__.ArrowDown, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 573,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Enviar al fondo\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 565,\n                                columnNumber: 29\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 520,\n                        columnNumber: 25\n                    }, this), document.body)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 508,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n        lineNumber: 308,\n        columnNumber: 9\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL01lbnVPcGNpb25lc0VsZW1lbnRvLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLDBEQUEwRDs7QUFDa0I7QUFDbkM7QUFJbkI7QUFFdEIsZ0NBQWdDO0FBQ2hDLFNBQVNpQixZQUFZQyxHQUFHO0lBQ3BCLElBQUksQ0FBQ0EsS0FBSyxPQUFPO0lBQ2pCLE1BQU1DLElBQUlDLE9BQU9GLEtBQUtHLElBQUk7SUFDMUIsTUFBTUMsS0FBSyx5Q0FBeUNDLElBQUksQ0FBQ0o7SUFDekQsSUFBSUcsSUFBSSxPQUFPSDtJQUNmLDhCQUE4QjtJQUM5QixJQUFJLCtCQUErQkksSUFBSSxDQUFDSixJQUFJLE9BQU8sQ0FBQyxRQUFRLEVBQUVBLEdBQUc7SUFDakUsSUFBSTtRQUNBLE1BQU1LLElBQUksSUFBSUMsSUFBSU47UUFDbEIsT0FBT0ssRUFBRUUsUUFBUTtJQUNyQixFQUFFLE9BQU07UUFDSixPQUFPO0lBQ1g7QUFDSjtBQUdBOzs7O0NBSUMsR0FDYyxTQUFTQyxxQkFBcUIsRUFDekNDLE1BQU0sRUFDTkMsZ0JBQWdCLEVBQ2hCQyxvQkFBb0IsRUFDcEJDLFFBQVEsRUFDUkMsT0FBTyxFQUNQQyxVQUFVLEVBQ1ZDLFVBQVUsRUFDVkMsYUFBYSxFQUNiQyxRQUFRLEVBQ1IseUJBQXlCO0FBQ3pCQyxlQUFlLEVBQ2ZDLFNBQVMsRUFDVEMsT0FBTyxFQUNQQyxZQUFZLEVBQ1pDLFVBQVUsRUFDVkMseUJBQXlCLEVBQzVCO0lBQ0csMkNBQTJDO0lBQzNDLE1BQU0sQ0FBQ0Msb0JBQW9CQyxzQkFBc0IsR0FBR3pDLCtDQUFRQSxDQUFDO0lBRTdELDhCQUE4QjtJQUM5QixNQUFNLENBQUMwQyxLQUFLQyxPQUFPLEdBQUczQywrQ0FBUUEsQ0FBQztRQUFFNEMsR0FBRyxDQUFDO1FBQU1DLEdBQUcsQ0FBQztJQUFLO0lBQ3BELCtEQUErRDtJQUMvRCxNQUFNLENBQUNDLE9BQU9DLFNBQVMsR0FBRy9DLCtD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QkFHekN1QixTQUFTQyxJQUFJOzs7Ozs7Ozs7Ozs7O0FBUXJDIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXE1lbnVPcGNpb25lc0VsZW1lbnRvLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXE1lbnVPcGNpb25lc0VsZW1lbnRvLmpzeFxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgY3JlYXRlUG9ydGFsIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xyXG5pbXBvcnQge1xyXG4gICAgQ29weSwgVHJhc2gyLCBMYXllcnMsIEFycm93RG93biwgQXJyb3dVcCwgTW92ZVVwLCBNb3ZlRG93biwgUGx1c0NpcmNsZSwgQ2xpcGJvYXJkUGFzdGUsXHJcbiAgICBMaW5rMiwgWFxyXG59IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcclxuXHJcbi8vIE5vcm1hbGl6YSB5IHZhbGlkYSBVUkwgYsOhc2ljYVxyXG5mdW5jdGlvbiBzYW5pdGl6ZVVSTCh1cmwpIHtcclxuICAgIGlmICghdXJsKSByZXR1cm4gXCJcIjtcclxuICAgIGNvbnN0IHQgPSBTdHJpbmcodXJsKS50cmltKCk7XHJcbiAgICBjb25zdCBvayA9IC9eKGh0dHBzPzpcXC9cXC98bWFpbHRvOnx0ZWw6fHdoYXRzYXBwOikvaS50ZXN0KHQpO1xyXG4gICAgaWYgKG9rKSByZXR1cm4gdDtcclxuICAgIC8vIGRvbWluaW8gc2ltcGxlIC0+IGNvbXBsZXRhclxyXG4gICAgaWYgKC9eW1xcdy4tXStcXC5bYS16XXsyLH0oXFwvLiopPyQvaS50ZXN0KHQpKSByZXR1cm4gYGh0dHBzOi8vJHt0fWA7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHUgPSBuZXcgVVJMKHQpO1xyXG4gICAgICAgIHJldHVybiB1LnRvU3RyaW5nKCk7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBNZW7DuiBjb250ZXh0dWFsIHBhcmEgdW4gZWxlbWVudG8gc2VsZWNjaW9uYWRvIGVuIGVsIGNhbnZhcy5cclxuICogLSBTZSBwb3NpY2lvbmEgcGVnYWRvIGFsIGJvdMOzbiDimpnvuI8gKGJvdG9uT3BjaW9uZXNSZWYpXHJcbiAqIC0gRXZpdGEgZWwgXCJmbGFzaFwiIGluaWNpYWwgdXNhbmRvIHVzZUxheW91dEVmZmVjdCArIHZpc2liaWxpdHkgaGFzdGEgdGVuZXIgcG9zaWNpw7NuIGxpc3RhXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNZW51T3BjaW9uZXNFbGVtZW50byh7XHJcbiAgICBpc09wZW4sXHJcbiAgICBib3Rvbk9wY2lvbmVzUmVmLCAgICAgICAgICAgIC8vIHJlZiBhbCBib3TDs24g4pqZ77iPXHJcbiAgICBlbGVtZW50b1NlbGVjY2lvbmFkbywgICAgICAgIC8vIG9iamV0byBhY3R1YWxcclxuICAgIG9uQ29waWFyLFxyXG4gICAgb25QZWdhcixcclxuICAgIG9uRHVwbGljYXIsXHJcbiAgICBvbkVsaW1pbmFyLFxyXG4gICAgbW92ZXJFbGVtZW50bywgICAgICAgICAgICAgICAvLyAoXCJhbC1mcmVudGVcIiB8IFwiYWwtZm9uZG9cIiB8IFwic3ViaXJcIiB8IFwiYmFqYXJcIilcclxuICAgIG9uQ2VycmFyLCAgICAgICAgICAgICAgICAgICAgLy8gY2llcnJhIGVsIG1lbsO6IGVuIGVsIHBhZHJlIChzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKSlcclxuICAgIC8vIFBhcmEgXCJVc2FyIGNvbW8gZm9uZG9cIlxyXG4gICAgcmVlbXBsYXphckZvbmRvLFxyXG4gICAgc2VjY2lvbmVzLFxyXG4gICAgb2JqZXRvcyxcclxuICAgIHNldFNlY2Npb25lcyxcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG59KSB7XHJcbiAgICAvLyBFc3RhZG8gbG9jYWwgZGVsIHN1Ym1lbnUgXCJPcmRlbiBkZSBjYXBhXCJcclxuICAgIGNvbnN0IFttb3N0cmFyU3VibWVudUNhcGEsIHNldE1vc3RyYXJTdWJtZW51Q2FwYV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gICAgLy8gUG9zaWNpw7NuIGNhbGN1bGFkYSBkZWwgbWVuw7pcclxuICAgIGNvbnN0IFtwb3MsIHNldFBvc10gPSB1c2VTdGF0ZSh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcclxuICAgIC8vIEZsYWcgcGFyYSBtb3N0cmFyIGVsIG1lbsO6IHPDs2xvIGN1YW5kbyB0ZW5lbW9zIGNvb3JkcyB2w6FsaWRhc1xyXG4gICAgY29uc3QgW3JlYWR5LCBzZXRSZWFkeV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gICAgLy8gUmVmIGRlbCBwYW5lbCBwcmluY2lwYWwgKHBhcmEgY2xpY2stb3V0c2lkZSBkZWwgcGFkcmUpXHJcbiAgICBjb25zdCBtZW51Um9vdFJlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgICAvLyBSZWYgZGVsIGJvdMOzbiBcIk9yZGVuIGRlIGNhcGFcIiAoYW5jbGEgcGFyYSBwb3NpY2lvbmFyIGVsIGZseW91dClcclxuICAgIGNvbnN0IGJ0bk9yZGVuUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICAgIC8vIFJlZiBkZWwgZmx5b3V0IChwb3Igc2kgcXVlcsOpcyBjbGljay1vdXRzaWRlIGVzcGVjw61maWNvIGRlbCBmbHlvdXQpXHJcbiAgICBjb25zdCBzdWJtZW51UmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICAgIC8vIFBvc2ljacOzbiBkZWwgZmx5b3V0XHJcbiAgICBjb25zdCBbc3VibWVudVBvcywgc2V0U3VibWVudVBvc10gPSB1c2VTdGF0ZSh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcbiAgICBjb25zdCBbc3VibWVudVJlYWR5LCBzZXRTdWJtZW51UmVhZHldID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtpc01vYmlsZSwgc2V0SXNNb2JpbGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXHJcblxyXG4gICAgY29uc3QgZXNJbWFnZW4gPSBlbGVtZW50b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJpbWFnZW5cIjtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG1xID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA3NjhweClcIik7XG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHNldElzTW9iaWxlKG1xLm1hdGNoZXMpO1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgbXEuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgICAgIHJldHVybiAoKSA9PiBtcS5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB9LCBbXSk7XG5cclxuICAgIC8vIC0tLSBIZWxwZXI6IGNhbGN1bGEgbGEgcG9zaWNpw7NuIGZpbmFsIGRlbCBtZW7DuiBkZXNkZSBlbCByZWN0IGRlbCBib3TDs24g4pqZ77iPXHJcbiAgICBjb25zdCBjYWxjdWxhclBvc0Rlc2RlUmVjdCA9IChyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWVudVdpZHRoID0gMjU2OyAvLyB3LTY0XHJcbiAgICAgICAgY29uc3QgbWVudUhlaWdodCA9IDMwMDsgLy8gZXN0aW1hY2nDs25cclxuICAgICAgICBjb25zdCB2dyA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGNvbnN0IHZoID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgeCA9IHIucmlnaHQgKyA4OyAvLyBwb3IgZGVmZWN0byBhIGxhIGRlcmVjaGEgZGVsIGJvdMOzblxyXG4gICAgICAgIGxldCB5ID0gci50b3A7XHJcblxyXG4gICAgICAgIC8vIFNpIHNlIHNhbGUgYSBsYSBkZXJlY2hhLCBsbyBwb25lbW9zIGEgbGEgaXpxdWllcmRhIGRlbCBib3TDs25cclxuICAgICAgICBpZiAoeCArIG1lbnVXaWR0aCA+IHZ3KSB4ID0gci5sZWZ0IC0gbWVudVdpZHRoIC0gODtcclxuXHJcbiAgICAgICAgLy8gU2kgc2Ugc2FsZSBwb3IgYWJham8sIGxvIGFjb21vZGFtb3MgaGFjaWEgYXJyaWJhXHJcbiAgICAgICAgaWYgKHkgKyBtZW51SGVpZ2h0ID4gdmgpIHkgPSBNYXRoLm1heCg4LCByLmJvdHRvbSAtIG1lbnVIZWlnaHQpO1xyXG5cclxuICAgICAgICByZXR1cm4geyB4LCB5IH07XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvLyAtLS0gU3VibWVuw7ogRW5sYWNlIC0tLVxyXG4gICAgY29uc3QgW21vc3RyYXJTdWJtZW51RW5sYWNlLCBzZXRNb3N0cmFyU3VibWVudUVubGFjZV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICBjb25zdCBidG5FbmxhY2VSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgICBjb25zdCBzdWJtZW51RW5sYWNlUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3QgW2VubGFjZVBvcywgc2V0RW5sYWNlUG9zXSA9IHVzZVN0YXRlKHsgeDogLTk5OTksIHk6IC05OTk5IH0pO1xyXG4gICAgY29uc3QgW2VubGFjZVJlYWR5LCBzZXRFbmxhY2VSZWFkeV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICBjb25zdCBbdXJsSW5wdXQsIHNldFVybElucHV0XSA9IHVzZVN0YXRlKFwiXCIpO1xyXG4gICAgY29uc3QgW3VybEVycm9yLCBzZXRVcmxFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gICAgLy8gQWwgYWJyaXIgZWwgbWVuw7osIHByZS1jYXJnYXIgbGEgVVJMIGFjdHVhbCBkZWwgZWxlbWVudG8gKHNpIHRpZW5lKVxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIWlzT3BlbiB8fCAhZWxlbWVudG9TZWxlY2Npb25hZG8pIHJldHVybjtcclxuICAgICAgICBjb25zdCBhY3R1YWwgPSBlbGVtZW50b1NlbGVjY2lvbmFkbz8uZW5sYWNlPy5ocmVmIHx8IGVsZW1lbnRvU2VsZWNjaW9uYWRvPy5lbmxhY2UgfHwgXCJcIjtcclxuICAgICAgICBzZXRVcmxJbnB1dChhY3R1YWwgfHwgXCJcIik7XHJcbiAgICAgICAgc2V0VXJsRXJyb3IoZmFsc2UpO1xyXG4gICAgfSwgW2lzT3BlbiwgZWxlbWVudG9TZWxlY2Npb25hZG9dKTtcclxuXHJcbiAgICAvLyBQb3NpY2lvbmFyIGVsIGZseW91dCBkZSBcIkVubGFjZVwiXHJcbiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghbW9zdHJhclN1Ym1lbnVFbmxhY2UpIHtcclxuICAgICAgICAgICAgc2V0RW5sYWNlUmVhZHkoZmFsc2UpO1xyXG4gICAgICAgICAgICBzZXRFbmxhY2VQb3MoeyB4OiAtOTk5OSwgeTogLTk5OTkgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnRuID0gYnRuRW5sYWNlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKCFidG4pIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgciA9IGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCBmbHlvdXRXaWR0aCA9IDMyMDsgIC8vIHVuIHBvY28gbcOhcyBhbmNobyBwYXJhIGVsIGlucHV0XHJcbiAgICAgICAgY29uc3QgZmx5b3V0SGVpZ2h0ID0gMTYwOyAvLyBlc3RpbWFkb1xyXG4gICAgICAgIGNvbnN0IGdhcCA9IDg7XHJcbiAgICAgICAgY29uc3QgdncgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjb25zdCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IHggPSByLnJpZ2h0ICsgZ2FwO1xyXG4gICAgICAgIGxldCB5ID0gci50b3A7XHJcblxyXG4gICAgICAgIGlmICh4ICsgZmx5b3V0V2lkdGggPiB2dykgeCA9IHIubGVmdCAtIGZseW91dFdpZHRoIC0gZ2FwO1xyXG4gICAgICAgIGlmICh5ICsgZmx5b3V0SGVpZ2h0ID4gdmgpIHkgPSBNYXRoLm1heCg4LCByLmJvdHRvbSAtIGZseW91dEhlaWdodCk7XHJcblxyXG4gICAgICAgIHNldEVubGFjZVBvcyh7IHgsIHkgfSk7XHJcbiAgICAgICAgc2V0RW5sYWNlUmVhZHkodHJ1ZSk7XHJcbiAgICB9LCBbbW9zdHJhclN1Ym1lbnVFbmxhY2VdKTtcclxuXHJcbiAgICAvLyBSZXBvc2ljaW9uYXIgYW50ZSBzY3JvbGwvcmVzaXplIGNvbiBlbCBmbHlvdXQgYWJpZXJ0b1xyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIW1vc3RyYXJTdWJtZW51RW5sYWNlKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgaGFuZGxlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBidG4gPSBidG5FbmxhY2VSZWYuY3VycmVudDtcclxuICAgICAgICAgICAgaWYgKCFidG4pIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgciA9IGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgZmx5b3V0V2lkdGggPSAzMjAsIGZseW91dEhlaWdodCA9IDE2MCwgZ2FwID0gODtcclxuICAgICAgICAgICAgY29uc3QgdncgPSB3aW5kb3cuaW5uZXJXaWR0aCwgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgeCA9IHIucmlnaHQgKyBnYXA7XHJcbiAgICAgICAgICAgIGxldCB5ID0gci50b3A7XHJcbiAgICAgICAgICAgIGlmICh4ICsgZmx5b3V0V2lkdGggPiB2dykgeCA9IHIubGVmdCAtIGZseW91dFdpZHRoIC0gZ2FwO1xyXG4gICAgICAgICAgICBpZiAoeSArIGZseW91dEhlaWdodCA+IHZoKSB5ID0gTWF0aC5tYXgoOCwgci5ib3R0b20gLSBmbHlvdXRIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgc2V0RW5sYWNlUG9zKHsgeCwgeSB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGUpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGUsIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbbW9zdHJhclN1Ym1lbnVFbmxhY2VdKTtcclxuXHJcbiAgICBjb25zdCBndWFyZGFyRW5sYWNlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxpbXBpbyA9IHNhbml0aXplVVJMKHVybElucHV0KTtcclxuICAgICAgICBpZiAoIWxpbXBpbykge1xyXG4gICAgICAgICAgICBzZXRVcmxFcnJvcih0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBHdWFyZGFtb3MgY29tbyBvYmpldG8gY29uIHRhcmdldCBzaWVtcHJlIF9ibGFua1xyXG4gICAgICAgIHNldE9iamV0b3MocHJldiA9PlxyXG4gICAgICAgICAgICBwcmV2Lm1hcChvID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvLmlkICE9PSBlbGVtZW50b1NlbGVjY2lvbmFkbz8uaWQpIHJldHVybiBvO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5vLFxyXG4gICAgICAgICAgICAgICAgICAgIGVubGFjZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBsaW1waW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogXCJfYmxhbmtcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsOiBcIm5vb3BlbmVyIG5vcmVmZXJyZXJcIixcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHNldE1vc3RyYXJTdWJtZW51RW5sYWNlKGZhbHNlKTtcclxuICAgICAgICBvbkNlcnJhcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBxdWl0YXJFbmxhY2UgPSAoKSA9PiB7XHJcbiAgICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+XHJcbiAgICAgICAgICAgIHByZXYubWFwKG8gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8uaWQgIT09IGVsZW1lbnRvU2VsZWNjaW9uYWRvPy5pZCkgcmV0dXJuIG87XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVubGFjZSwgLi4ucmVzdCB9ID0gbztcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN0O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVFbmxhY2UoZmFsc2UpO1xyXG4gICAgICAgIG9uQ2VycmFyKCk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgLy8gMSkgUG9zaWNpb25hciBBTlRFUyBkZWwgcGFpbnQgcGFyYSBldml0YXIgZmxpY2tlclxyXG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc09wZW4pIHtcbiAgICAgICAgICAgIC8vIHNpIGVzdMOhIGNlcnJhZG8sIHJlc2V0ZWFtb3NcbiAgICAgICAgICAgIHNldFJlYWR5KGZhbHNlKTtcbiAgICAgICAgICAgIHNldFBvcyh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIHNldFJlYWR5KHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ0biA9IGJvdG9uT3BjaW9uZXNSZWY/LmN1cnJlbnQ7XG4gICAgICAgIGlmICghYnRuKSByZXR1cm47XG5cclxuICAgICAgICBjb25zdCByID0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHAgPSBjYWxjdWxhclBvc0Rlc2RlUmVjdChyKTtcclxuICAgICAgICBzZXRQb3MocCk7XHJcbiAgICAgICAgc2V0UmVhZHkodHJ1ZSk7IC8vIHlhIHRlbmVtb3MgcG9zaWNpw7NuOyBtb3N0cmFyIG1lbsO6XHJcbiAgICB9LCBbaXNPcGVuLCBib3Rvbk9wY2lvbmVzUmVmLCBpc01vYmlsZV0pO1xuXHJcbiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghbW9zdHJhclN1Ym1lbnVDYXBhKSB7XHJcbiAgICAgICAgICAgIHNldFN1Ym1lbnVSZWFkeShmYWxzZSk7XHJcbiAgICAgICAgICAgIHNldFN1Ym1lbnVQb3MoeyB4OiAtOTk5OSwgeTogLTk5OTkgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnRuID0gYnRuT3JkZW5SZWYuY3VycmVudDtcclxuICAgICAgICBpZiAoIWJ0bikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCByID0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IGZseW91dFdpZHRoID0gMjI0OyAgIC8vIH4gdy01NlxyXG4gICAgICAgIGNvbnN0IGZseW91dEhlaWdodCA9IDE4MDsgIC8vIGVzdGltYWRvXHJcbiAgICAgICAgY29uc3QgZ2FwID0gODtcclxuICAgICAgICBjb25zdCB2dyA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGNvbnN0IHZoID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgeCA9IHIucmlnaHQgKyBnYXA7ICAgICAvLyBwb3IgZGVmZWN0bywgYSBsYSBkZXJlY2hhIGRlbCBib3TDs25cclxuICAgICAgICBsZXQgeSA9IHIudG9wO1xyXG5cclxuICAgICAgICAvLyBTaSBubyBlbnRyYSBhIGxhIGRlcmVjaGEsIGxvIGFicmltb3MgYSBsYSBpenF1aWVyZGEgZGVsIHBhbmVsXHJcbiAgICAgICAgaWYgKHggKyBmbHlvdXRXaWR0aCA+IHZ3KSB4ID0gci5sZWZ0IC0gZmx5b3V0V2lkdGggLSBnYXA7XHJcblxyXG4gICAgICAgIC8vIFNpIHNlIHBhc2EgcG9yIGFiYWpvLCBsbyDigJxjbGFtcOKAnSBoYWNpYSBhcnJpYmFcclxuICAgICAgICBpZiAoeSArIGZseW91dEhlaWdodCA+IHZoKSB5ID0gTWF0aC5tYXgoOCwgci5ib3R0b20gLSBmbHlvdXRIZWlnaHQpO1xyXG5cclxuICAgICAgICBzZXRTdWJtZW51UG9zKHsgeCwgeSB9KTtcclxuICAgICAgICBzZXRTdWJtZW51UmVhZHkodHJ1ZSk7XHJcbiAgICB9LCBbbW9zdHJhclN1Ym1lbnVDYXBhXSk7XHJcblxyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFtb3N0cmFyU3VibWVudUNhcGEpIHJldHVybjtcclxuICAgICAgICBjb25zdCBoYW5kbGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGJ0bk9yZGVuUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGlmICghYnRuKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdhcCA9IDgsIGZseW91dFdpZHRoID0gMjI0LCBmbHlvdXRIZWlnaHQgPSAxODA7XHJcbiAgICAgICAgICAgIGNvbnN0IHZ3ID0gd2luZG93LmlubmVyV2lkdGgsIHZoID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgbGV0IHggPSByLnJpZ2h0ICsgZ2FwO1xyXG4gICAgICAgICAgICBsZXQgeSA9IHIudG9wO1xyXG4gICAgICAgICAgICBpZiAoeCArIGZseW91dFdpZHRoID4gdncpIHggPSByLmxlZnQgLSBmbHlvdXRXaWR0aCAtIGdhcDtcclxuICAgICAgICAgICAgaWYgKHkgKyBmbHlvdXRIZWlnaHQgPiB2aCkgeSA9IE1hdGgubWF4KDgsIHIuYm90dG9tIC0gZmx5b3V0SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIHNldFN1Ym1lbnVQb3MoeyB4LCB5IH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGUpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGUsIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbbW9zdHJhclN1Ym1lbnVDYXBhXSk7XHJcblxyXG5cclxuICAgIC8vIDIpIFJlcG9zaWNpb25hciBhbnRlIHNjcm9sbC9yZXNpemUgbWllbnRyYXMgZXN0w6kgYWJpZXJ0b1xyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIWlzT3BlbikgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYnRuID0gYm90b25PcGNpb25lc1JlZj8uY3VycmVudDtcclxuICAgICAgICAgICAgaWYgKCFidG4pIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgciA9IGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgc2V0UG9zKGNhbGN1bGFyUG9zRGVzZGVSZWN0KHIpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGUpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZSwgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlLCB0cnVlKTtcclxuICAgICAgICB9O1xyXG4gICAgfSwgW2lzT3BlbiwgYm90b25PcGNpb25lc1JlZl0pO1xyXG5cclxuICAgIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIHJlZj17bWVudVJvb3RSZWZ9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BmaXhlZCB6LTUwIGJnLXdoaXRlIGJvcmRlciBzaGFkb3cteGwgcC0zIHRleHQtc20gc3BhY2UteS0xIG1lbnUtei1pbmRleCAke2lzTW9iaWxlID8gXCJyb3VuZGVkLTJ4bCB3LWF1dG9cIiA6IFwicm91bmRlZC1sZyB3LTY0XCJ9YH1cbiAgICAgICAgICAgIHN0eWxlPXtcbiAgICAgICAgICAgICAgICBpc01vYmlsZVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiOHB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogXCI4cHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogXCJjYWxjKDhweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tLCAwcHgpKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcIiM3NzNkYmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiBcIjFweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBcIjcwdmhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IFwiZmFkZUluU2NhbGUgMC4xNXMgZWFzZS1vdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHJlYWR5ID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogYCR7cG9zLnh9cHhgLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBgJHtwb3MueX1weGAsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogXCIjNzczZGJlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogXCIxcHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodDogXCI0MDBweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogXCJmYWRlSW5TY2FsZSAwLjE1cyBlYXNlLW91dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogcmVhZHkgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEV2aXRhciBxdWUgc2UgcHJvcGFndWUgZWwgY2xpY2sgYWwgYm9keSAoY2xpY2stb3V0c2lkZSlcclxuICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxyXG4gICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICAgIHsvKiBDb3BpYXIgKi99XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkNvcGlhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2VycmFyKCk7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPENvcHkgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+IENvcGlhclxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgIHsvKiBQZWdhciAqL31cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUGVnYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBvbkNlcnJhcigpO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxDbGlwYm9hcmRQYXN0ZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gUGVnYXJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICB7LyogRHVwbGljYXIgKi99XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkR1cGxpY2FyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb25DZXJyYXIoKTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8UGx1c0NpcmNsZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gRHVwbGljYXJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG5cclxuICAgICAgICAgICAgey8qIEVubGFjZSAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj17YnRuRW5sYWNlUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2VycmFtb3MgZWwgZGUgY2FwYSBzaSBlc3RhYmEgYWJpZXJ0bywgcGFyYSBubyBzdXBlcnBvbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51Q2FwYShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51RW5sYWNlKHByZXYgPT4gIXByZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8TGluazIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+IEVubGFjZVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgey8qIEZseW91dCBFbmxhY2UgKi99XHJcbiAgICAgICAgICAgICAgICB7bW9zdHJhclN1Ym1lbnVFbmxhY2UgJiZcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVQb3J0YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17c3VibWVudUVubGFjZVJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIHotWzYwXSBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBzaGFkb3ctbGcgcC0zIHNwYWNlLXktMyBtZW51LXotaW5kZXhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBlbmxhY2VQb3MueCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGVubGFjZVBvcy55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogZW5sYWNlUmVhZHkgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFwiIzc3M2RiZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW1cIj5BZ3JlZ2FyIGVubGFjZTwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dXJsSW5wdXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFVybElucHV0KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVybEVycm9yKSBzZXRVcmxFcnJvcihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSBndWFyZGFyRW5sYWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikgc2V0TW9zdHJhclN1Ym1lbnVFbmxhY2UoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwczovL2VqZW1wbG8uY29tIG8gbWFpbHRvOi4uLlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHB4LTMgcHktMiBib3JkZXIgcm91bmRlZCBvdXRsaW5lLW5vbmUgJHt1cmxFcnJvciA/IFwiYm9yZGVyLXJlZC01MDBcIiA6IFwiYm9yZGVyLWdyYXktMzAwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBDaGlwcyByw6FwaWRvcyAob3BjaW9uYWwpICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBnYXAtMiB0ZXh0LXhzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1tcImh0dHBzOi8vXCIsIFwibWFpbHRvOlwiLCBcInRlbDpcIiwgXCJ3aGF0c2FwcDpcIl0ubWFwKChwcmVmKSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17cHJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFVybElucHV0KCh1KSA9PiAodS5zdGFydHNXaXRoKHByZWYpID8gdSA6IHByZWYgKyB1KSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgYmctZ3JheS0xMDAgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTIwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBGb290ZXIgcmVzcG9uc2l2byAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBzbTpncmlkLWNvbHMtMiBnYXAtMiBpdGVtcy1jZW50ZXIgbXQtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBCb3TDs24gUXVpdGFyIGVubGFjZSAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3F1aXRhckVubGFjZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTIuNSBweS0xLjUgdGV4dC1bMTNweF0gdGV4dC1yZWQtNjAwIGhvdmVyOmJnLXJlZC01MCByb3VuZGVkIHdoaXRlc3BhY2Utbm93cmFwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxYIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRdWl0YXIgZW5sYWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBCb3RvbmVzIENhbmNlbGFyIHkgR3VhcmRhciAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldE1vc3RyYXJTdWJtZW51RW5sYWNlKGZhbHNlKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIuNSBweS0xLjUgdGV4dC1bMTNweF0gcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB3aGl0ZXNwYWNlLW5vd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbGFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtndWFyZGFyRW5sYWNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMi41IHB5LTEuNSB0ZXh0LVsxM3B4XSBiZy1bIzc3M2RiZV0gdGV4dC13aGl0ZSByb3VuZGVkIGhvdmVyOm9wYWNpdHktOTAgd2hpdGVzcGFjZS1ub3dyYXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHdWFyZGFyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtWzExcHhdIHRleHQtZ3JheS01MDBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZSBhYnJpcsOhIHNpZW1wcmUgZW4gdW5hIHBlc3Rhw7FhIG51ZXZhLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB7LyogVXNhciBjb21vIGZvbmRvIChzb2xvIHNpIGVzIGltYWdlbikgKi99XHJcbiAgICAgICAgICAgIHtlc0ltYWdlbiAmJiAoXHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWVtcGxhemFyRm9uZG8oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG9JbWFnZW46IGVsZW1lbnRvU2VsZWNjaW9uYWRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZXRvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlY2Npb25lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclBhbmVsWjogb25DZXJyYXIsIC8vIHJldXRpbGl6YW1vcyBvbkNlcnJhciBwYXJhIGNlcnJhciBlbCBtZW7DulxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IGJnLWdyYWRpZW50LXRvLWJyIGZyb20tYmx1ZS00MDAgdG8tcHVycGxlLTUwMCByb3VuZGVkXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICBVc2FyIGNvbW8gZm9uZG9cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgey8qIEVsaW1pbmFyICovfVxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25FbGltaW5hcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2VycmFyKCk7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtcmVkLTUwMFwiIC8+IEVsaW1pbmFyXHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgey8qIFN1Ym1lbsO6IE9yZGVuIGRlIGNhcGEgKi99XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICByZWY9e2J0bk9yZGVuUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldE1vc3RyYXJTdWJtZW51Q2FwYShwcmV2ID0+ICFwcmV2KX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxMYXllcnMgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+IE9yZGVuIGRlIGNhcGFcclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB7bW9zdHJhclN1Ym1lbnVDYXBhICYmXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUG9ydGFsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3N1Ym1lbnVSZWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCB6LVs2MF0gYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQgc2hhZG93LWxnIHAtMiBzcGFjZS15LTEgbWVudS16LWluZGV4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogc3VibWVudVBvcy54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogc3VibWVudVBvcy55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMjQsICAgICAgICAgICAgICAvLyB3LTU2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogc3VibWVudVJlYWR5ID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlckVsZW1lbnRvKFwiYWwtZnJlbnRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNlcnJhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXJyb3dVcCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gVHJhZXIgYWwgZnJlbnRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlckVsZW1lbnRvKFwic3ViaXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51Q2FwYShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2VycmFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNb3ZlVXAgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+IFN1YmlyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3ZlckVsZW1lbnRvKFwiYmFqYXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51Q2FwYShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2VycmFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNb3ZlRG93biBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gQmFqYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyRWxlbWVudG8oXCJhbC1mb25kb1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVDYXBhKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DZXJyYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFycm93RG93biBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gRW52aWFyIGFsIGZvbmRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufVxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VMYXlvdXRFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsImNyZWF0ZVBvcnRhbCIsIkNvcHkiLCJUcmFzaDIiLCJMYXllcnMiLCJBcnJvd0Rvd24iLCJBcnJvd1VwIiwiTW92ZVVwIiwiTW92ZURvd24iLCJQbHVzQ2lyY2xlIiwiQ2xpcGJvYXJkUGFzdGUiLCJMaW5rMiIsIlgiLCJzYW5pdGl6ZVVSTCIsInVybCIsInQiLCJTdHJpbmciLCJ0cmltIiwib2siLCJ0ZXN0IiwidSIsIlVSTCIsInRvU3RyaW5nIiwiTWVudU9wY2lvbmVzRWxlbWVudG8iLCJpc09wZW4iLCJib3Rvbk9wY2lvbmVzUmVmIiwiZWxlbWVudG9TZWxlY2Npb25hZG8iLCJvbkNvcGlhciIsIm9uUGVnYXIiLCJvbkR1cGxpY2FyIiwib25FbGltaW5hciIsIm1vdmVyRWxlbWVudG8iLCJvbkNlcnJhciIsInJlZW1wbGF6YXJGb25kbyIsInNlY2Npb25lcyIsIm9iamV0b3MiLCJzZXRTZWNjaW9uZXMiLCJzZXRPYmpldG9zIiwic2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsIm1vc3RyYXJTdWJtZW51Q2FwYSIsInNldE1vc3RyYXJTdWJtZW51Q2FwYSIsInBvcyIsInNldFBvcyIsIngiLCJ5IiwicmVhZHkiLCJzZXRSZWFkeSIsIm1lbnVSb290UmVmIiwiYnRuT3JkZW5SZWYiLCJzdWJtZW51UmVmIiwic3VibWVudVBvcyIsInNldFN1Ym1lbnVQb3MiLCJzdWJtZW51UmVhZHkiLCJzZXRTdWJtZW51UmVhZHkiLCJpc01vYmlsZSIsInNldElzTW9iaWxlIiwiZXNJbWFnZW4iLCJ0aXBvIiwibXEiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwidXBkYXRlIiwibWF0Y2hlcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2FsY3VsYXJQb3NEZXNkZVJlY3QiLCJyIiwibWVudVdpZHRoIiwibWVudUhlaWdodCIsInZ3IiwiaW5uZXJXaWR0aCIsInZoIiwiaW5uZXJIZWlnaHQiLCJyaWdodCIsInRvcCIsImxlZnQiLCJNYXRoIiwibWF4IiwiYm90dG9tIiwibW9zdHJhclN1Ym1lbnVFbmxhY2UiLCJzZXRNb3N0cmFyU3VibWVudUVubGFjZSIsImJ0bkVubGFjZVJlZiIsInN1Ym1lbnVFbmxhY2VSZWYiLCJlbmxhY2VQb3MiLCJzZXRFbmxhY2VQb3MiLCJlbmxhY2VSZWFkeSIsInNldEVubGFjZVJlYWR5IiwidXJsSW5wdXQiLCJzZXRVcmxJbnB1dCIsInVybEVycm9yIiwic2V0VXJsRXJyb3IiLCJhY3R1YWwiLCJlbmxhY2UiLCJocmVmIiwiYnRuIiwiY3VycmVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImZseW91dFdpZHRoIiwiZmx5b3V0SGVpZ2h0IiwiZ2FwIiwiaGFuZGxlIiwiZ3VhcmRhckVubGFjZSIsImxpbXBpbyIsInByZXYiLCJtYXAiLCJvIiwiaWQiLCJ0YXJnZXQiLCJyZWwiLCJxdWl0YXJFbmxhY2UiLCJyZXN0IiwicCIsImRpdiIsInJlZiIsImNsYXNzTmFtZSIsInN0eWxlIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsIm1heEhlaWdodCIsIm92ZXJmbG93WSIsImFuaW1hdGlvbiIsInZpc2liaWxpdHkiLCJvbk1vdXNlRG93biIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJvbkNsaWNrIiwiYnV0dG9uIiwid2lkdGgiLCJpbnB1dCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwib25LZXlEb3duIiwia2V5IiwicGxhY2Vob2xkZXIiLCJwcmVmIiwic3RhcnRzV2l0aCIsImRvY3VtZW50IiwiYm9keSIsImVsZW1lbnRvSW1hZ2VuIiwic2V0TW9zdHJhclBhbmVsWiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/MenuOpcionesElemento.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/SelectionBounds.jsx":
/*!********************************************!*\
  !*** ./src/components/SelectionBounds.jsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SelectionBounds)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n// SelectionBounds.jsx\n\n\n\nconst DEBUG_SELECTION_BOUNDS = false;\nconst sbLog = (...args)=>{\n    if (!DEBUG_SELECTION_BOUNDS) return;\n    console.log(\"[SB]\", ...args);\n};\nconst slog = sbLog;\nconst TRDBG = (...args)=>{\n    if (!window.__DBG_TR) return;\n    console.log(\"[TRDBG]\", ...args);\n};\nfunction rectFromNodes(nodes) {\n    let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\n    for (const n of nodes){\n        if (!n?.getClientRect) continue;\n        const r = n.getClientRect({\n            skipTransform: false,\n            skipShadow: true,\n            skipStroke: true\n        });\n        minX = Math.min(minX, r.x);\n        minY = Math.min(minY, r.y);\n        maxX = Math.max(maxX, r.x + r.width);\n        maxY = Math.max(maxY, r.y + r.height);\n    }\n    if (minX === Infinity) return null;\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n    };\n}\nfunction getCountdownScaledSize(node) {\n    try {\n        const hitbox = node?.findOne?.(\".countdown-hitbox\");\n        const baseW = typeof hitbox?.width === \"function\" ? hitbox.width() : NaN;\n        const baseH = typeof hitbox?.height === \"function\" ? hitbox.height() : NaN;\n        const sx = Math.abs(typeof node?.scaleX === \"function\" ? node.scaleX() || 1 : 1);\n        const sy = Math.abs(typeof node?.scaleY === \"function\" ? node.scaleY() || 1 : 1);\n        if (Number.isFinite(baseW) && Number.isFinite(baseH) && baseW > 0 && baseH > 0) {\n            return {\n                width: Math.abs(baseW * sx),\n                height: Math.abs(baseH * sy)\n            };\n        }\n    } catch  {}\n    try {\n        const r = node.getClientRect({\n            skipTransform: false,\n            skipShadow: true,\n            skipStroke: true\n        });\n        return {\n            width: Math.abs(r.width),\n            height: Math.abs(r.height)\n        };\n    } catch  {}\n    return {\n        width: 100,\n        height: 50\n    };\n}\n// 🎨 Componente para mostrar bounds sin transformer (líneas, etc.)\nconst BoundsIndicator = ({ selectedElements, elementRefs, objetos })=>{\n    const [forceUpdate, setForceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BoundsIndicator.useEffect\": ()=>{\n            const firstRef = elementRefs.current?.[selectedElements[0]];\n            const stage = firstRef?.getStage?.();\n            if (!stage) return;\n            const handleDragMove = {\n                \"BoundsIndicator.useEffect.handleDragMove\": ()=>{\n                    setForceUpdate({\n                        \"BoundsIndicator.useEffect.handleDragMove\": (p)=>p + 1\n                    }[\"BoundsIndicator.useEffect.handleDragMove\"]);\n                }\n            }[\"BoundsIndicator.useEffect.handleDragMove\"];\n            stage.on(\"dragmove\", handleDragMove);\n            return ({\n                \"BoundsIndicator.useEffect\": ()=>{\n                    stage.off(\"dragmove\", handleDragMove);\n                }\n            })[\"BoundsIndicator.useEffect\"];\n        }\n    }[\"BoundsIndicator.useEffect\"], [\n        selectedElements.join(\",\")\n    ]);\n    const elementosData = selectedElements.map((id)=>objetos.find((obj)=>obj.id === id)).filter(Boolean);\n    if (elementosData.length === 0) {\n        return null;\n    }\n    let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\n    elementosData.forEach((obj)=>{\n        const node = elementRefs.current[obj.id];\n        if (!node) return;\n        try {\n            if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n                const points = obj.points || [\n                    0,\n                    0,\n                    100,\n                    0\n                ];\n                const cleanPoints = [\n                    parseFloat(points[0]) || 0,\n                    parseFloat(points[1]) || 0,\n                    parseFloat(points[2]) || 100,\n                    parseFloat(points[3]) || 0\n                ];\n                const realX = node.x();\n                const realY = node.y();\n                const x1 = realX + cleanPoints[0];\n                const y1 = realY + cleanPoints[1];\n                const x2 = realX + cleanPoints[2];\n                const y2 = realY + cleanPoints[3];\n                const linePadding = 5;\n                minX = Math.min(minX, x1 - linePadding, x2 - linePadding);\n                minY = Math.min(minY, y1 - linePadding, y2 - linePadding);\n                maxX = Math.max(maxX, x1 + linePadding, x2 + linePadding);\n                maxY = Math.max(maxY, y1 + linePadding, y2 + linePadding);\n            } else {\n                const box = node.getClientRect({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                });\n                const r = box;\n                const sx = node?.scaleX?.() ?? 1;\n                const sy = node?.scaleY?.() ?? 1;\n                slog(\"[BI]\", `id=${obj.id}`, `tipo=${obj.tipo}`, `sx=${sx.toFixed(3)}`, `sy=${sy.toFixed(3)}`, `rect(w=${r.width.toFixed(1)},h=${r.height.toFixed(1)})`);\n                const realX = box.x;\n                const realY = box.y;\n                let width = box.width;\n                let height = box.height;\n                if (obj.tipo === \"texto\" && node.getTextHeight) {\n                    const textHeight = node.getTextHeight();\n                    if (textHeight) {\n                        height = textHeight;\n                    }\n                }\n                minX = Math.min(minX, realX);\n                minY = Math.min(minY, realY);\n                maxX = Math.max(maxX, realX + width);\n                maxY = Math.max(maxY, realY + height);\n            }\n        } catch (error) {\n            const fallbackX = obj.x || 0;\n            const fallbackY = obj.y || 0;\n            const fallbackSize = 20;\n            minX = Math.min(minX, fallbackX);\n            minY = Math.min(minY, fallbackY);\n            maxX = Math.max(maxX, fallbackX + fallbackSize);\n            maxY = Math.max(maxY, fallbackY + fallbackSize);\n        }\n    });\n    if (minX === Infinity || maxX === -Infinity) {\n        const primerElemento = elementosData[0];\n        if (!primerElemento) return null;\n        minX = primerElemento.x || 0;\n        minY = primerElemento.y || 0;\n        maxX = minX + 100;\n        maxY = minY + 50;\n    }\n    const padding = 10;\n    const finalX = minX - padding;\n    const finalY = minY - padding;\n    const finalWidth = maxX - minX + padding * 2;\n    const finalHeight = maxY - minY + padding * 2;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n        name: \"ui\",\n        x: finalX,\n        y: finalY,\n        width: finalWidth,\n        height: finalHeight,\n        fill: \"transparent\",\n        stroke: \"#9333EA\",\n        strokeWidth: 1,\n        listening: false,\n        opacity: 0.7\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n        lineNumber: 182,\n        columnNumber: 5\n    }, undefined);\n};\nfunction SelectionBounds({ selectedElements, elementRefs, objetos, onTransform, isDragging }) {\n    const transformerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [transformTick, setTransformTick] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const lastNodesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const circleAnchorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const elementosSeleccionadosData = selectedElements.map((id)=>objetos.find((obj)=>obj.id === id)).filter(Boolean);\n    const primerElemento = elementosSeleccionadosData[0] || null;\n    const esTexto = primerElemento?.tipo === \"texto\";\n    const esCountdown = primerElemento?.tipo === \"countdown\";\n    const esGaleria = selectedElements.length === 1 && primerElemento?.tipo === \"galeria\";\n    const lockAspectCountdown = selectedElements.length === 1 && esCountdown;\n    const transformerAnchorSize = 14;\n    const transformerRotateOffset = 24;\n    const transformerAnchorRadius = 999;\n    const esTriangulo = primerElemento?.tipo === \"forma\" && primerElemento?.figura === \"triangle\";\n    const hasGallery = elementosSeleccionadosData.some((o)=>o.tipo === \"galeria\");\n    const hayLineas = elementosSeleccionadosData.some((obj)=>obj.tipo === \"forma\" && obj.figura === \"line\");\n    const elementosTransformables = elementosSeleccionadosData.filter((obj)=>!(obj.tipo === \"forma\" && obj.figura === \"line\"));\n    const deberiaUsarTransformer = elementosTransformables.length > 0;\n    const selectedGeomKey = elementosSeleccionadosData.map((o)=>[\n            o.id,\n            o.x ?? 0,\n            o.y ?? 0,\n            o.width ?? \"\",\n            o.height ?? \"\",\n            o.scaleX ?? 1,\n            o.scaleY ?? 1,\n            o.rotation ?? 0,\n            o.chipWidth ?? \"\",\n            o.gap ?? \"\",\n            o.paddingX ?? \"\",\n            o.paddingY ?? \"\"\n        ].join(\":\")).join(\"|\");\n    const getTransformPose = (node)=>{\n        if (!node) return {\n            x: 0,\n            y: 0,\n            rotation: 0\n        };\n        if (esGaleria && typeof node.getParent === \"function\") {\n            const parent = node.getParent();\n            if (parent) {\n                return {\n                    x: typeof parent.x === \"function\" ? parent.x() : 0,\n                    y: typeof parent.y === \"function\" ? parent.y() : 0,\n                    rotation: typeof parent.rotation === \"function\" ? parent.rotation() || 0 : 0\n                };\n            }\n        }\n        return {\n            x: typeof node.x === \"function\" ? node.x() : 0,\n            y: typeof node.y === \"function\" ? node.y() : 0,\n            rotation: typeof node.rotation === \"function\" ? node.rotation() || 0 : 0\n        };\n    };\n    // 🔥 Efecto principal del Transformer (SIN retry / SIN flicker)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const tr = transformerRef.current;\n            if (!tr) return;\n            const selKey = selectedElements.join(\",\");\n            TRDBG(\"EFFECT start\", {\n                selKey,\n                isDragging,\n                deberiaUsarTransformer,\n                hasGallery,\n                elementosTransformablesLen: elementosTransformables.length,\n                transformTick,\n                editingId: window.editing?.id || null\n            });\n            // Si no corresponde transformer, no hagas detach agresivo (evita flicker)\n            if (!deberiaUsarTransformer) {\n                TRDBG(\"EFFECT exit: no transformer or gallery\", {\n                    selKey\n                });\n                return;\n            }\n            // Resolver nodes desde refs (fuente de verdad)\n            let nodosTransformables = elementosTransformables.map({\n                \"SelectionBounds.useEffect.nodosTransformables\": (o)=>elementRefs.current?.[o.id]\n            }[\"SelectionBounds.useEffect.nodosTransformables\"]).filter(Boolean);\n            // Single select: usar ref fresco SIEMPRE\n            if (selectedElements.length === 1) {\n                const idSel = selectedElements[0];\n                const refNode = elementRefs.current?.[idSel] || null;\n                if (refNode && typeof refNode.getClientRect === \"function\") {\n                    if (esGaleria && typeof refNode.findOne === \"function\") {\n                        const galleryFrame = refNode.findOne(\".gallery-transform-frame\");\n                        if (galleryFrame && typeof galleryFrame.getClientRect === \"function\") {\n                            nodosTransformables = [\n                                galleryFrame\n                            ];\n                        } else {\n                            nodosTransformables = [\n                                refNode\n                            ];\n                        }\n                    } else {\n                        nodosTransformables = [\n                            refNode\n                        ];\n                    }\n                }\n            }\n            // Si aún no hay nodos (imagen cargando, etc.), NO despegar (evita parpadeo)\n            if (nodosTransformables.length === 0) {\n                TRDBG(\"EFFECT exit: no nodes yet\", {\n                    selKey,\n                    wantedIds: elementosTransformables.map({\n                        \"SelectionBounds.useEffect\": (o)=>o.id\n                    }[\"SelectionBounds.useEffect\"]),\n                    refsPresent: elementosTransformables.map({\n                        \"SelectionBounds.useEffect\": (o)=>!!elementRefs.current?.[o.id]\n                    }[\"SelectionBounds.useEffect\"])\n                });\n                return;\n            }\n            // Attach estable\n            TRDBG(\"ATTACH try\", {\n                selKey,\n                nodesCount: nodosTransformables.length,\n                nodeIds: nodosTransformables.map({\n                    \"SelectionBounds.useEffect\": (n)=>typeof n.id === \"function\" ? n.id() : n.attrs?.id\n                }[\"SelectionBounds.useEffect\"])\n            });\n            tr.nodes(nodosTransformables);\n            TRDBG(\"ATTACH done\", {\n                selKey,\n                trNodesCount: tr.nodes?.()?.length || 0\n            });\n            try {\n                tr.forceUpdate?.();\n            } catch  {}\n            tr.getLayer()?.batchDraw();\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        // Dependencias mínimas reales\n        selectedElements.join(\",\"),\n        deberiaUsarTransformer,\n        hasGallery,\n        elementosTransformables.length,\n        selectedGeomKey,\n        transformTick,\n        elementRefs\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const handler = {\n                \"SelectionBounds.useEffect.handler\": (e)=>{\n                    const id = e?.detail?.id;\n                    if (!id) return;\n                    TRDBG(\"REF event\", {\n                        id,\n                        isSelected: selectedElements.includes(id),\n                        selKey: selectedElements.join(\",\")\n                    });\n                    if (!selectedElements.includes(id)) return;\n                    setTransformTick({\n                        \"SelectionBounds.useEffect.handler\": (t)=>t + 1\n                    }[\"SelectionBounds.useEffect.handler\"]);\n                }\n            }[\"SelectionBounds.useEffect.handler\"];\n            window.addEventListener(\"element-ref-registrado\", handler);\n            return ({\n                \"SelectionBounds.useEffect\": ()=>window.removeEventListener(\"element-ref-registrado\", handler)\n            })[\"SelectionBounds.useEffect\"];\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        selectedElements.join(\",\")\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const firstId = selectedElements?.[0];\n            if (!firstId) return;\n            const firstNode = elementRefs.current?.[firstId];\n            const stage = firstNode?.getStage?.();\n            if (!stage) return;\n            let rafId = null;\n            const syncTransformer = {\n                \"SelectionBounds.useEffect.syncTransformer\": ()=>{\n                    if (rafId != null) return;\n                    rafId = requestAnimationFrame({\n                        \"SelectionBounds.useEffect.syncTransformer\": ()=>{\n                            rafId = null;\n                            const tr = transformerRef.current;\n                            if (!tr) return;\n                            try {\n                                tr.forceUpdate?.();\n                            } catch  {}\n                            tr.getLayer?.()?.batchDraw?.();\n                        }\n                    }[\"SelectionBounds.useEffect.syncTransformer\"]);\n                }\n            }[\"SelectionBounds.useEffect.syncTransformer\"];\n            stage.on(\"dragmove\", syncTransformer);\n            stage.on(\"dragend\", syncTransformer);\n            return ({\n                \"SelectionBounds.useEffect\": ()=>{\n                    stage.off(\"dragmove\", syncTransformer);\n                    stage.off(\"dragend\", syncTransformer);\n                    if (rafId != null) cancelAnimationFrame(rafId);\n                }\n            })[\"SelectionBounds.useEffect\"];\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        selectedElements.join(\",\"),\n        elementRefs\n    ]);\n    // 🔥 Render\n    if (selectedElements.length === 0) return null;\n    if (hayLineas && elementosTransformables.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BoundsIndicator, {\n            selectedElements: selectedElements,\n            elementRefs: elementRefs,\n            objetos: objetos\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n            lineNumber: 425,\n            columnNumber: 7\n        }, this);\n    }\n    if (hayLineas && elementosTransformables.length > 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BoundsIndicator, {\n            selectedElements: selectedElements,\n            elementRefs: elementRefs,\n            objetos: objetos\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n            lineNumber: 435,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Transformer, {\n        name: \"ui\",\n        ref: transformerRef,\n        // 🔵 borde siempre visible\n        borderEnabled: true,\n        borderStroke: \"#9333EA\",\n        borderStrokeWidth: 1,\n        // ❌ nodos y rotación OFF durante drag\n        enabledAnchors: isDragging ? [] : [\n            \"bottom-right\"\n        ],\n        rotateEnabled: !isDragging && !esGaleria,\n        anchorFill: \"#9333EA\",\n        anchorStroke: \"#ffffff\",\n        anchorStrokeWidth: 2.5,\n        anchorSize: transformerAnchorSize,\n        anchorCornerRadius: transformerAnchorRadius,\n        anchorShadowColor: \"rgba(147, 51, 234, 0.3)\",\n        anchorShadowBlur: 6,\n        anchorShadowOffset: {\n            x: 0,\n            y: 3\n        },\n        keepRatio: lockAspectCountdown || esGaleria,\n        centeredScaling: false,\n        flipEnabled: false,\n        resizeEnabled: !isDragging,\n        rotationSnaps: [\n            0,\n            45,\n            90,\n            135,\n            180,\n            225,\n            270,\n            315\n        ],\n        rotateAnchorOffset: transformerRotateOffset,\n        rotationSnapTolerance: 5,\n        boundBoxFunc: (oldBox, newBox)=>{\n            const minSize = esTexto ? 20 : 10;\n            const maxSize = 800;\n            if (esGaleria) {\n                const rows = Math.max(1, Number(primerElemento?.rows) || 1);\n                const cols = Math.max(1, Number(primerElemento?.cols) || 1);\n                const gap = Math.max(0, Number(primerElemento?.gap) || 0);\n                const cellRatio = primerElemento?.ratio === \"4:3\" ? 3 / 4 : primerElemento?.ratio === \"16:9\" ? 9 / 16 : 1;\n                const minGridWidth = gap * (cols - 1) + cols;\n                const nextWidth = Math.min(maxSize, Math.max(minSize, minGridWidth, Math.abs(newBox.width)));\n                const cellW = Math.max(1, (nextWidth - gap * (cols - 1)) / cols);\n                const cellH = cellW * cellRatio;\n                const nextHeight = rows * cellH + gap * (rows - 1);\n                return {\n                    ...newBox,\n                    width: nextWidth,\n                    height: Math.max(minSize, nextHeight)\n                };\n            }\n            if (newBox.width < minSize || newBox.height < minSize) {\n                return oldBox;\n            }\n            if (lockAspectCountdown) {\n                const baseW = Math.max(1, oldBox.width);\n                const baseH = Math.max(1, oldBox.height);\n                const ratio = baseW / baseH;\n                const dw = Math.abs(newBox.width - oldBox.width) / baseW;\n                const dh = Math.abs(newBox.height - oldBox.height) / baseH;\n                let width = newBox.width;\n                let height = newBox.height;\n                if (dh > dw) {\n                    width = height * ratio;\n                } else {\n                    height = width / ratio;\n                }\n                return {\n                    ...newBox,\n                    width: Math.min(Math.max(width, minSize), maxSize),\n                    height: Math.min(Math.max(height, minSize), maxSize)\n                };\n            }\n            if (esTexto) {\n                const scaleX = newBox.width / oldBox.width;\n                const scaleY = newBox.height / oldBox.height;\n                const uniformScale = Math.min(scaleX, scaleY);\n                const newWidth = oldBox.width * uniformScale;\n                const newHeight = oldBox.height * uniformScale;\n                return {\n                    ...newBox,\n                    width: Math.min(Math.max(newWidth, minSize), maxSize),\n                    height: Math.min(Math.max(newHeight, minSize), maxSize)\n                };\n            }\n            if (primerElemento?.tipo === \"forma\" && primerElemento?.figura === \"circle\") {\n                const size = Math.max(newBox.width, newBox.height);\n                const finalSize = Math.min(size, maxSize);\n                return {\n                    ...newBox,\n                    width: finalSize,\n                    height: finalSize\n                };\n            }\n            if (esTriangulo) {\n                const safeOldW = Math.max(1, Math.abs(oldBox.width || minSize));\n                const safeOldH = Math.max(1, Math.abs(oldBox.height || minSize));\n                const scaleX = Math.abs(newBox.width) / safeOldW;\n                const scaleY = Math.abs(newBox.height) / safeOldH;\n                const uniformScale = Math.max(0.05, Math.min(scaleX, scaleY));\n                const width = Math.min(Math.max(safeOldW * uniformScale, minSize), maxSize);\n                const height = Math.min(Math.max(safeOldH * uniformScale, minSize), maxSize);\n                return {\n                    ...newBox,\n                    width,\n                    height\n                };\n            }\n            if (primerElemento?.tipo === \"imagen\" || primerElemento?.tipo === \"icono\") {\n                const scaleX = newBox.width / oldBox.width;\n                const scaleY = newBox.height / oldBox.height;\n                const uniformScale = Math.min(scaleX, scaleY);\n                const newWidth = oldBox.width * uniformScale;\n                const newHeight = oldBox.height * uniformScale;\n                return {\n                    ...newBox,\n                    width: Math.min(Math.max(newWidth, minSize), maxSize),\n                    height: Math.min(Math.max(newHeight, minSize), maxSize)\n                };\n            }\n            return {\n                ...newBox,\n                width: Math.min(newBox.width, maxSize),\n                height: Math.min(newBox.height, maxSize)\n            };\n        },\n        onTransformStart: ()=>{\n            window._resizeData = {\n                isResizing: true\n            };\n            try {\n                const tr = transformerRef.current;\n                const nodes = tr?.nodes?.() || [];\n                circleAnchorRef.current = null;\n                if (nodes.length === 1 && primerElemento?.tipo === \"forma\" && primerElemento?.figura === \"circle\") {\n                    try {\n                        const r0 = nodes[0].getClientRect({\n                            skipTransform: false,\n                            skipShadow: true,\n                            skipStroke: true\n                        });\n                        circleAnchorRef.current = {\n                            left: r0.x,\n                            top: r0.y\n                        };\n                    } catch  {}\n                }\n                const union = rectFromNodes(nodes);\n                const pad = typeof tr?.padding === \"function\" ? tr.padding() : 0;\n                const borderRect = union ? {\n                    x: union.x - pad,\n                    y: union.y - pad,\n                    width: union.width + pad * 2,\n                    height: union.height + pad * 2\n                } : null;\n                const n = nodes[0];\n                const id = n ? typeof n.id === \"function\" ? n.id() : n.attrs?.id : \"∅\";\n                const trRect = tr?.getClientRect?.({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                });\n                slog(\"[TR] start\", `id=${id}`, `nodes=${nodes.length}`, union ? `union(w=${union.width.toFixed(1)},h=${union.height.toFixed(1)})` : \"union(null)\", borderRect ? `border(w=${borderRect.width.toFixed(1)},h=${borderRect.height.toFixed(1)})` : \"border(null)\", trRect ? `trRect(w=${trRect.width.toFixed(1)},h=${trRect.height.toFixed(1)})` : \"trRect(null)\", `pad=${pad}`);\n            } catch  {}\n        },\n        onTransform: (e)=>{\n            if (!onTransform || !transformerRef.current) return;\n            const tr = transformerRef.current;\n            const nodes = typeof tr.nodes === \"function\" ? tr.nodes() || [] : [];\n            const node = nodes[0]; // ✅ nodo real (single select)\n            if (!node) return;\n            try {\n                const pose = getTransformPose(node);\n                const transformData = {\n                    x: pose.x,\n                    y: pose.y,\n                    rotation: pose.rotation,\n                    isPreview: true\n                };\n                if (esTexto) {\n                    const originalFontSize = primerElemento.fontSize || 24;\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                    transformData.fontSize = Math.max(6, Math.round(originalFontSize * avgScale));\n                    transformData.scaleX = 1;\n                    transformData.scaleY = 1;\n                } else {\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    transformData.scaleX = scaleX;\n                    transformData.scaleY = scaleY;\n                    if (primerElemento?.tipo === \"countdown\") {\n                        const countdownSize = getCountdownScaledSize(node);\n                        transformData.width = countdownSize.width;\n                        transformData.height = countdownSize.height;\n                    } else if (esTriangulo) {\n                        const baseRadius = Number.isFinite(primerElemento?.radius) ? primerElemento.radius : 60;\n                        const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                        transformData.radius = Math.max(1, baseRadius * avgScale);\n                    } else {\n                        const originalWidth = primerElemento.width || 100;\n                        const originalHeight = primerElemento.height || 100;\n                        transformData.width = Math.abs(originalWidth * scaleX);\n                        transformData.height = Math.abs(originalHeight * scaleY);\n                    }\n                    if (primerElemento?.figura === \"circle\") {\n                        try {\n                            const liveRect = node.getClientRect({\n                                skipTransform: false,\n                                skipShadow: true,\n                                skipStroke: true\n                            });\n                            const diameter = Math.max(1, Math.max(liveRect.width, liveRect.height));\n                            transformData.radius = diameter / 2;\n                            const anchor = circleAnchorRef.current;\n                            if (anchor) {\n                                transformData.x = anchor.left + transformData.radius;\n                                transformData.y = anchor.top + transformData.radius;\n                            } else {\n                                transformData.x = liveRect.x + transformData.radius;\n                                transformData.y = liveRect.y + transformData.radius;\n                            }\n                        } catch  {}\n                    }\n                }\n                onTransform(transformData);\n                // --- LOG COMPACTO (opcional) ---\n                const id = (typeof node.id === \"function\" ? node.id() : node.attrs?.id) || \"∅\";\n                const sx = node.scaleX?.() ?? 1;\n                const sy = node.scaleY?.() ?? 1;\n                const r = node.getClientRect({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                });\n                slog(\"[TR] live\", `id=${id}`, `tipo=${primerElemento?.tipo || \"∅\"}`, `sx=${sx.toFixed(3)}`, `sy=${sy.toFixed(3)}`, `x=${(node.x?.() ?? 0).toFixed(1)}`, `y=${(node.y?.() ?? 0).toFixed(1)}`, `nodeRect(w=${r.width.toFixed(1)},h=${r.height.toFixed(1)})`, `w=${transformData.width ?? \"∅\"}`, `h=${transformData.height ?? \"∅\"}`);\n            } catch (error) {\n                console.warn(\"Error en onTransform:\", error);\n            }\n        },\n        onTransformEnd: (e)=>{\n            if (!transformerRef.current || !onTransform) return;\n            const tr = transformerRef.current;\n            const nodes = typeof tr.nodes === \"function\" ? tr.nodes() || [] : [];\n            // -------------------------\n            // MULTI-SELECCIÓN\n            // -------------------------\n            if (nodes.length > 1) {\n                try {\n                    const tScaleX = typeof tr.scaleX === \"function\" ? tr.scaleX() || 1 : 1;\n                    const tScaleY = typeof tr.scaleY === \"function\" ? tr.scaleY() || 1 : 1;\n                    const avg = (Math.abs(tScaleX) + Math.abs(tScaleY)) / 2;\n                    const updates = nodes.map((n)=>{\n                        let id = null;\n                        try {\n                            id = (typeof n.id === \"function\" ? n.id() : n.attrs?.id) || null;\n                        } catch  {}\n                        if (!id) return null;\n                        const obj = (objetos || []).find((o)=>o.id === id);\n                        if (!obj) return null;\n                        const upd = {\n                            id,\n                            x: typeof n.x === \"function\" ? n.x() : obj.x,\n                            y: typeof n.y === \"function\" ? n.y() : obj.y,\n                            rotation: typeof n.rotation === \"function\" ? n.rotation() || 0 : obj.rotation || 0\n                        };\n                        if (obj.tipo === \"texto\") {\n                            const base = obj.fontSize || 24;\n                            upd.fontSize = Math.max(6, Math.round(base * avg));\n                            if (typeof n.scaleX === \"function\") {\n                                n.scaleX(1);\n                                n.scaleY(1);\n                            }\n                            return upd;\n                        }\n                        if (obj.tipo === \"forma\" && obj.figura === \"circle\") {\n                            const baseR = obj.radius || 50;\n                            upd.radius = baseR * avg;\n                            if (typeof n.scaleX === \"function\") {\n                                n.scaleX(1);\n                                n.scaleY(1);\n                            }\n                            return upd;\n                        }\n                        if (obj.tipo === \"forma\" && obj.figura === \"triangle\") {\n                            const baseR = obj.radius || 60;\n                            upd.radius = Math.max(1, baseR * avg);\n                            if (typeof n.scaleX === \"function\") {\n                                n.scaleX(1);\n                                n.scaleY(1);\n                            }\n                            return upd;\n                        }\n                        if (obj.tipo === \"countdown\") {\n                            const countdownSize = getCountdownScaledSize(n);\n                            upd.width = countdownSize.width;\n                            upd.height = countdownSize.height;\n                            return upd;\n                        }\n                        const baseW = obj.width != null ? obj.width : typeof n.width === \"function\" ? n.width() : 100;\n                        const baseH = obj.height != null ? obj.height : typeof n.height === \"function\" ? n.height() : 100;\n                        upd.width = Math.abs(baseW * tScaleX);\n                        upd.height = Math.abs(baseH * tScaleY);\n                        if (typeof n.scaleX === \"function\") {\n                            n.scaleX(1);\n                            n.scaleY(1);\n                        }\n                        return upd;\n                    }).filter(Boolean);\n                    onTransform({\n                        isFinal: true,\n                        batch: updates\n                    });\n                    if (typeof tr.scaleX === \"function\") {\n                        tr.scaleX(1);\n                        tr.scaleY(1);\n                    }\n                    tr.getLayer()?.batchDraw();\n                    window._resizeData = {\n                        isResizing: false\n                    };\n                    setTimeout(()=>{\n                        window._resizeData = null;\n                    }, 100);\n                    return;\n                } catch (err) {\n                    console.warn(\"Error en onTransformEnd (multi):\", err);\n                    window._resizeData = null;\n                    return;\n                }\n            }\n            // -------------------------\n            // SINGLE-SELECCIÓN\n            // -------------------------\n            const node = nodes[0];\n            if (!node) return;\n            try {\n                const pose = getTransformPose(node);\n                const finalData = {\n                    x: pose.x,\n                    y: pose.y,\n                    rotation: pose.rotation,\n                    isFinal: true\n                };\n                if (esTexto) {\n                    const originalFontSize = primerElemento.fontSize || 24;\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                    finalData.fontSize = Math.max(6, Math.round(originalFontSize * avgScale));\n                    finalData.scaleX = 1;\n                    finalData.scaleY = 1;\n                    // ✅ Aplanado sync para texto (solo escala)\n                    try {\n                        node.scaleX(1);\n                        node.scaleY(1);\n                        node.getLayer()?.batchDraw();\n                    } catch (err) {\n                        console.warn(\"Error aplanando escalas de texto (sync):\", err);\n                    }\n                } else {\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    if (primerElemento?.tipo === \"countdown\") {\n                        // Countdown: persistir escala real para que el resultado final\n                        // sea exactamente el mismo que se ve al soltar.\n                        finalData.scaleX = scaleX;\n                        finalData.scaleY = scaleY;\n                        const countdownSize = getCountdownScaledSize(node);\n                        finalData.width = countdownSize.width;\n                        finalData.height = countdownSize.height;\n                    } else if (esTriangulo) {\n                        const baseRadius = Number.isFinite(primerElemento?.radius) ? primerElemento.radius : 60;\n                        const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                        finalData.scaleX = 1;\n                        finalData.scaleY = 1;\n                        finalData.radius = Math.max(1, baseRadius * avgScale);\n                        try {\n                            node.scaleX(1);\n                            node.scaleY(1);\n                            if (typeof node.radius === \"function\") node.radius(finalData.radius);\n                            node.getLayer()?.batchDraw();\n                        } catch (err) {\n                            console.warn(\"Error aplanando escala de triángulo (sync):\", err);\n                        }\n                    } else {\n                        finalData.scaleX = 1;\n                        finalData.scaleY = 1;\n                        const originalWidth = primerElemento.width || 100;\n                        const originalHeight = primerElemento.height || 100;\n                        finalData.width = Math.abs(originalWidth * scaleX);\n                        finalData.height = Math.abs(originalHeight * scaleY);\n                        if (primerElemento?.figura === \"circle\") {\n                            try {\n                                const liveRect = node.getClientRect({\n                                    skipTransform: false,\n                                    skipShadow: true,\n                                    skipStroke: true\n                                });\n                                const diameter = Math.max(1, Math.max(liveRect.width, liveRect.height));\n                                finalData.radius = diameter / 2;\n                                const anchor = circleAnchorRef.current;\n                                if (anchor) {\n                                    finalData.x = anchor.left + finalData.radius;\n                                    finalData.y = anchor.top + finalData.radius;\n                                } else {\n                                    finalData.x = liveRect.x + finalData.radius;\n                                    finalData.y = liveRect.y + finalData.radius;\n                                }\n                            } catch  {}\n                        }\n                        // ✅ Aplanar escala INMEDIATO\n                        try {\n                            const fw = finalData.width;\n                            const fh = finalData.height;\n                            node.scaleX(1);\n                            node.scaleY(1);\n                            if (fw != null && typeof node.width === \"function\") node.width(fw);\n                            if (fh != null && typeof node.height === \"function\") node.height(fh);\n                            if (primerElemento?.figura === \"circle\" && finalData.radius != null && typeof node.radius === \"function\") {\n                                node.radius(finalData.radius);\n                            }\n                            node.getLayer()?.batchDraw();\n                        } catch (err) {\n                            console.warn(\"Error aplanando escalas (sync):\", err);\n                        }\n                    }\n                }\n                onTransform(finalData);\n                circleAnchorRef.current = null;\n                // ✅ Reatachar 1 vez, con ref fresco, en el próximo frame\n                try {\n                    const tr2 = transformerRef.current;\n                    if (!tr2) return;\n                    TRDBG(\"onTransformEnd -> schedule RAF reattach\", {\n                        selKey: selectedElements.join(\",\"),\n                        idSel: selectedElements?.[0] || null\n                    });\n                    requestAnimationFrame(()=>{\n                        const idSel = selectedElements?.[0];\n                        const freshNode = idSel ? elementRefs.current?.[idSel] : null;\n                        TRDBG(\"onTransformEnd RAF\", {\n                            idSel,\n                            hasFresh: !!freshNode,\n                            destroyed: !!freshNode?._destroyed,\n                            hasStage: !!freshNode?.getStage?.()\n                        });\n                        // Si el nodo no está listo, despegar y salir\n                        if (!freshNode || freshNode._destroyed || !freshNode.getStage?.()) {\n                            TRDBG(\"onTransformEnd RAF -> DETACH nodes([])\", {\n                                idSel\n                            });\n                            try {\n                                tr2.nodes([]);\n                                tr2.getLayer?.()?.batchDraw();\n                            } catch  {}\n                            return;\n                        }\n                        try {\n                            TRDBG(\"onTransformEnd RAF -> DETACH nodes([])\", {\n                                idSel\n                            });\n                            tr2.nodes([\n                                freshNode\n                            ]);\n                            tr2.forceUpdate();\n                            tr2.getLayer?.()?.batchDraw();\n                        } catch  {}\n                    });\n                } catch  {}\n            } catch (error) {\n                console.warn(\"Error en onTransformEnd:\", error);\n                window._resizeData = null;\n            }\n        }\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n        lineNumber: 444,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL1NlbGVjdGlvbkJvdW5kcy5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHNCQUFzQjs7QUFDOEI7QUFDSjtBQUloRCxNQUFNSyx5QkFBeUI7QUFFL0IsTUFBTUMsUUFBUSxDQUFDLEdBQUdDO0lBQ2hCLElBQUksQ0FBQ0Ysd0JBQXdCO0lBQzdCRyxRQUFRQyxHQUFHLENBQUMsV0FBV0Y7QUFDekI7QUFDQSxNQUFNRyxPQUFPSjtBQUViLE1BQU1LLFFBQVEsQ0FBQyxHQUFHSjtJQUNoQixJQUFJLENBQUNLLE9BQU9DLFFBQVEsRUFBRTtJQUN0QkwsUUFBUUMsR0FBRyxDQUFDLGNBQWNGO0FBQzVCO0FBR0EsU0FBU08sY0FBY0MsS0FBSztJQUMxQixJQUFJQyxPQUFPQyxVQUFVQyxPQUFPRCxVQUFVRSxPQUFPLENBQUNGLFVBQVVHLE9BQU8sQ0FBQ0g7SUFFaEUsS0FBSyxNQUFNSSxLQUFLTixNQUFPO1FBQ3JCLElBQUksQ0FBQ00sR0FBR0MsZUFBZTtRQUN2QixNQUFNQyxJQUFJRixFQUFFQyxhQUFhLENBQUM7WUFBRUUsZUFBZTtZQUFPQyxZQUFZO1lBQU1DLFlBQVk7UUFBSztRQUNyRlYsT0FBT1csS0FBS0MsR0FBRyxDQUFDWixNQUFNTyxFQUFFTSxDQUFDO1FBQ3pCWCxPQUFPUyxLQUFLQyxHQUFHLENBQUNWLE1BQU1LLEVBQUVPLENBQUM7UUFDekJYLE9BQU9RLEtBQUtJLEdBQUcsQ0FBQ1osTUFBTUksRUFBRU0sQ0FBQyxHQUFHTixFQUFFUyxLQUFLO1FBQ25DWixPQUFPTyxLQUFLSSxHQUFHLENBQUNYLE1BQU1HLEVBQUVPLENBQUMsR0FBR1AsRUFBRVUsTUFBTTtJQUN0QztJQUVBLElBQUlqQixTQUFTQyxVQUFVLE9BQU87SUFDOUIsT0FBTztRQUFFWSxHQUFHYjtRQUFNYyxHQUFHWjtRQUFNYyxPQUFPYixPQUFPSDtRQUFNaUIsUUFBUWIsT0FBT0Y7SUFBSztBQUNyRTtBQUVBLFNB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LFVBQVUsSUFBSSxDQUFDSCxVQUFVcE0sUUFBUSxNQUFNOzRCQUNqRTlDLE1BQU0sMENBQTBDO2dDQUFFbUk7NEJBQU07NEJBQ3hELElBQUk7Z0NBQUU4RyxJQUFJN08sS0FBSyxDQUFDLEVBQUU7Z0NBQUc2TyxJQUFJckcsUUFBUSxNQUFNQzs0QkFBYSxFQUFFLE9BQU0sQ0FBRTs0QkFDOUQ7d0JBQ0Y7d0JBRUEsSUFBSTs0QkFDRjdJLE1BQU0sMENBQTBDO2dDQUFFbUk7NEJBQU07NEJBQ3hEOEcsSUFBSTdPLEtBQUssQ0FBQztnQ0FBQzhPOzZCQUFVOzRCQUNyQkQsSUFBSXhNLFdBQVc7NEJBQ2Z3TSxJQUFJckcsUUFBUSxNQUFNQzt3QkFDcEIsRUFBRSxPQUFNLENBQUU7b0JBQ1o7Z0JBQ0YsRUFBRSxPQUFNLENBQUU7WUFHWixFQUFFLE9BQU9oRSxPQUFPO2dCQUNkaEYsUUFBUW9PLElBQUksQ0FBQyw0QkFBNEJwSjtnQkFDekM1RSxPQUFPd00sV0FBVyxHQUFHO1lBQ3ZCO1FBQ0Y7Ozs7OztBQUlOIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXFNlbGVjdGlvbkJvdW5kcy5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2VsZWN0aW9uQm91bmRzLmpzeFxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBUcmFuc2Zvcm1lciwgUmVjdCB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xuXG5cblxuY29uc3QgREVCVUdfU0VMRUNUSU9OX0JPVU5EUyA9IGZhbHNlO1xuXG5jb25zdCBzYkxvZyA9ICguLi5hcmdzKSA9PiB7XG4gIGlmICghREVCVUdfU0VMRUNUSU9OX0JPVU5EUykgcmV0dXJuO1xuICBjb25zb2xlLmxvZyhcIltTQl1cIiwgLi4uYXJncyk7XG59O1xuY29uc3Qgc2xvZyA9IHNiTG9nO1xuXG5jb25zdCBUUkRCRyA9ICguLi5hcmdzKSA9PiB7XG4gIGlmICghd2luZG93Ll9fREJHX1RSKSByZXR1cm47XG4gIGNvbnNvbGUubG9nKFwiW1RSREJHXVwiLCAuLi5hcmdzKTtcbn07XG5cblxuZnVuY3Rpb24gcmVjdEZyb21Ob2Rlcyhub2Rlcykge1xuICBsZXQgbWluWCA9IEluZmluaXR5LCBtaW5ZID0gSW5maW5pdHksIG1heFggPSAtSW5maW5pdHksIG1heFkgPSAtSW5maW5pdHk7XG5cbiAgZm9yIChjb25zdCBuIG9mIG5vZGVzKSB7XG4gICAgaWYgKCFuPy5nZXRDbGllbnRSZWN0KSBjb250aW51ZTtcbiAgICBjb25zdCByID0gbi5nZXRDbGllbnRSZWN0KHsgc2tpcFRyYW5zZm9ybTogZmFsc2UsIHNraXBTaGFkb3c6IHRydWUsIHNraXBTdHJva2U6IHRydWUgfSk7XG4gICAgbWluWCA9IE1hdGgubWluKG1pblgsIHIueCk7XG4gICAgbWluWSA9IE1hdGgubWluKG1pblksIHIueSk7XG4gICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIHIueCArIHIud2lkdGgpO1xuICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCByLnkgKyByLmhlaWdodCk7XG4gIH1cblxuICBpZiAobWluWCA9PT0gSW5maW5pdHkpIHJldHVybiBudWxsO1xuICByZXR1cm4geyB4OiBtaW5YLCB5OiBtaW5ZLCB3aWR0aDogbWF4WCAtIG1pblgsIGhlaWdodDogbWF4WSAtIG1pblkgfTtcbn1cblxuZnVuY3Rpb24gZ2V0Q291bnRkb3duU2NhbGVkU2l6ZShub2RlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGl0Ym94ID0gbm9kZT8uZmluZE9uZT8uKFwiLmNvdW50ZG93bi1oaXRib3hcIik7XG4gICAgY29uc3QgYmFzZVcgPSB0eXBlb2YgaGl0Ym94Py53aWR0aCA9PT0gXCJmdW5jdGlvblwiID8gaGl0Ym94LndpZHRoKCkgOiBOYU47XG4gICAgY29uc3QgYmFzZUggPSB0eXBlb2YgaGl0Ym94Py5oZWlnaHQgPT09IFwiZnVuY3Rpb25cIiA/IGhpdGJveC5oZWlnaHQoKSA6IE5hTjtcbiAgICBjb25zdCBzeCA9IE1hdGguYWJzKHR5cGVvZiBub2RlPy5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IChub2RlLnNjYWxlWCgpIHx8IDEpIDogMSk7XG4gICAgY29uc3Qgc3kgPSBNYXRoLmFicyh0eXBlb2Ygbm9kZT8uc2NhbGVZID09PSBcImZ1bmN0aW9uXCIgPyAobm9kZS5zY2FsZVkoKSB8fCAxKSA6IDEpO1xuXG4gICAgaWYgKE51bWJlci5pc0Zpbml0ZShiYXNlVykgJiYgTnVtYmVyLmlzRmluaXRlKGJhc2VIKSAmJiBiYXNlVyA+IDAgJiYgYmFzZUggPiAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogTWF0aC5hYnMoYmFzZVcgKiBzeCksXG4gICAgICAgIGhlaWdodDogTWF0aC5hYnMoYmFzZUggKiBzeSksXG4gICAgICB9O1xuICAgIH1cbiAgfSBjYXRjaCB7fVxuXG4gIHRyeSB7XG4gICAgY29uc3QgciA9IG5vZGUuZ2V0Q2xpZW50UmVjdCh7IHNraXBUcmFuc2Zvcm06IGZhbHNlLCBza2lwU2hhZG93OiB0cnVlLCBza2lwU3Ryb2tlOiB0cnVlIH0pO1xuICAgIHJldHVybiB7IHdpZHRoOiBNYXRoLmFicyhyLndpZHRoKSwgaGVpZ2h0OiBNYXRoLmFicyhyLmhlaWdodCkgfTtcbiAgfSBjYXRjaCB7fVxuXG4gIHJldHVybiB7IHdpZHRoOiAxMDAsIGhlaWdodDogNTAgfTtcbn1cblxuXG4vLyDwn46oIENvbXBvbmVudGUgcGFyYSBtb3N0cmFyIGJvdW5kcyBzaW4gdHJhbnNmb3JtZXIgKGzDrW5lYXMsIGV0Yy4pXG5jb25zdCBCb3VuZHNJbmRpY2F0b3IgPSAoeyBzZWxlY3RlZEVsZW1lbnRzLCBlbGVtZW50UmVmcywgb2JqZXRvcyB9KSA9PiB7XG4gIGNvbnN0IFtmb3JjZVVwZGF0ZSwgc2V0Rm9yY2VVcGRhdGVdID0gdXNlU3RhdGUoMCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBmaXJzdFJlZiA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltzZWxlY3RlZEVsZW1lbnRzWzBdXTtcbiAgICBjb25zdCBzdGFnZSA9IGZpcnN0UmVmPy5nZXRTdGFnZT8uKCk7XG4gICAgaWYgKCFzdGFnZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgaGFuZGxlRHJhZ01vdmUgPSAoKSA9PiB7XG4gICAgICBzZXRGb3JjZVVwZGF0ZSgocCkgPT4gcCArIDEpO1xuICAgIH07XG5cbiAgICBzdGFnZS5vbihcImRyYWdtb3ZlXCIsIGhhbmRsZURyYWdNb3ZlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc3RhZ2Uub2ZmKFwiZHJhZ21vdmVcIiwgaGFuZGxlRHJhZ01vdmUpO1xuICAgIH07XG4gIH0sIFtzZWxlY3RlZEVsZW1lbnRzLmpvaW4oXCIsXCIpXSk7XG5cbiAgY29uc3QgZWxlbWVudG9zRGF0YSA9IHNlbGVjdGVkRWxlbWVudHNcbiAgICAubWFwKChpZCkgPT4gb2JqZXRvcy5maW5kKChvYmopID0+IG9iai5pZCA9PT0gaWQpKVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgaWYgKGVsZW1lbnRvc0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZXQgbWluWCA9IEluZmluaXR5LFxuICAgIG1pblkgPSBJbmZpbml0eSxcbiAgICBtYXhYID0gLUluZmluaXR5LFxuICAgIG1heFkgPSAtSW5maW5pdHk7XG5cbiAgZWxlbWVudG9zRGF0YS5mb3JFYWNoKChvYmopID0+IHtcbiAgICBjb25zdCBub2RlID0gZWxlbWVudFJlZnMuY3VycmVudFtvYmouaWRdO1xuICAgIGlmICghbm9kZSkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iai5maWd1cmEgPT09IFwibGluZVwiKSB7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IG9iai5wb2ludHMgfHwgWzAsIDAsIDEwMCwgMF07XG5cbiAgICAgICAgY29uc3QgY2xlYW5Qb2ludHMgPSBbXG4gICAgICAgICAgcGFyc2VGbG9hdChwb2ludHNbMF0pIHx8IDAsXG4gICAgICAgICAgcGFyc2VGbG9hdChwb2ludHNbMV0pIHx8IDAsXG4gICAgICAgICAgcGFyc2VGbG9hdChwb2ludHNbMl0pIHx8IDEwMCxcbiAgICAgICAgICBwYXJzZUZsb2F0KHBvaW50c1szXSkgfHwgMCxcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCByZWFsWCA9IG5vZGUueCgpO1xuICAgICAgICBjb25zdCByZWFsWSA9IG5vZGUueSgpO1xuXG4gICAgICAgIGNvbnN0IHgxID0gcmVhbFggKyBjbGVhblBvaW50c1swXTtcbiAgICAgICAgY29uc3QgeTEgPSByZWFsWSArIGNsZWFuUG9pbnRzWzFdO1xuICAgICAgICBjb25zdCB4MiA9IHJlYWxYICsgY2xlYW5Qb2ludHNbMl07XG4gICAgICAgIGNvbnN0IHkyID0gcmVhbFkgKyBjbGVhblBvaW50c1szXTtcblxuICAgICAgICBjb25zdCBsaW5lUGFkZGluZyA9IDU7XG5cbiAgICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIHgxIC0gbGluZVBhZGRpbmcsIHgyIC0gbGluZVBhZGRpbmcpO1xuICAgICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgeTEgLSBsaW5lUGFkZGluZywgeTIgLSBsaW5lUGFkZGluZyk7XG4gICAgICAgIG1heFggPSBNYXRoLm1heChtYXhYLCB4MSArIGxpbmVQYWRkaW5nLCB4MiArIGxpbmVQYWRkaW5nKTtcbiAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHkxICsgbGluZVBhZGRpbmcsIHkyICsgbGluZVBhZGRpbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYm94ID0gbm9kZS5nZXRDbGllbnRSZWN0KHsgc2tpcFRyYW5zZm9ybTogZmFsc2UsIHNraXBTaGFkb3c6IHRydWUsIHNraXBTdHJva2U6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IHIgPSBib3g7XG4gICAgICAgIGNvbnN0IHN4ID0gKG5vZGU/LnNjYWxlWD8uKCkgPz8gMSk7XG4gICAgICAgIGNvbnN0IHN5ID0gKG5vZGU/LnNjYWxlWT8uKCkgPz8gMSk7XG4gICAgICAgIHNsb2coXG4gICAgICAgICAgXCJbQkldXCIsXG4gICAgICAgICAgYGlkPSR7b2JqLmlkfWAsXG4gICAgICAgICAgYHRpcG89JHtvYmoudGlwb31gLFxuICAgICAgICAgIGBzeD0ke3N4LnRvRml4ZWQoMyl9YCxcbiAgICAgICAgICBgc3k9JHtzeS50b0ZpeGVkKDMpfWAsXG4gICAgICAgICAgYHJlY3Qodz0ke3Iud2lkdGgudG9GaXhlZCgxKX0saD0ke3IuaGVpZ2h0LnRvRml4ZWQoMSl9KWBcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCByZWFsWCA9IGJveC54O1xuICAgICAgICBjb25zdCByZWFsWSA9IGJveC55O1xuICAgICAgICBsZXQgd2lkdGggPSBib3gud2lkdGg7XG4gICAgICAgIGxldCBoZWlnaHQgPSBib3guaGVpZ2h0O1xuXG4gICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJ0ZXh0b1wiICYmIG5vZGUuZ2V0VGV4dEhlaWdodCkge1xuICAgICAgICAgIGNvbnN0IHRleHRIZWlnaHQgPSBub2RlLmdldFRleHRIZWlnaHQoKTtcbiAgICAgICAgICBpZiAodGV4dEhlaWdodCkge1xuICAgICAgICAgICAgaGVpZ2h0ID0gdGV4dEhlaWdodDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgcmVhbFgpO1xuICAgICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgcmVhbFkpO1xuICAgICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgcmVhbFggKyB3aWR0aCk7XG4gICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCByZWFsWSArIGhlaWdodCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZhbGxiYWNrWCA9IG9iai54IHx8IDA7XG4gICAgICBjb25zdCBmYWxsYmFja1kgPSBvYmoueSB8fCAwO1xuICAgICAgY29uc3QgZmFsbGJhY2tTaXplID0gMjA7XG5cbiAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCBmYWxsYmFja1gpO1xuICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIGZhbGxiYWNrWSk7XG4gICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgZmFsbGJhY2tYICsgZmFsbGJhY2tTaXplKTtcbiAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBmYWxsYmFja1kgKyBmYWxsYmFja1NpemUpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKG1pblggPT09IEluZmluaXR5IHx8IG1heFggPT09IC1JbmZpbml0eSkge1xuICAgIGNvbnN0IHByaW1lckVsZW1lbnRvID0gZWxlbWVudG9zRGF0YVswXTtcbiAgICBpZiAoIXByaW1lckVsZW1lbnRvKSByZXR1cm4gbnVsbDtcbiAgICBtaW5YID0gcHJpbWVyRWxlbWVudG8ueCB8fCAwO1xuICAgIG1pblkgPSBwcmltZXJFbGVtZW50by55IHx8IDA7XG4gICAgbWF4WCA9IG1pblggKyAxMDA7XG4gICAgbWF4WSA9IG1pblkgKyA1MDtcbiAgfVxuXG4gIGNvbnN0IHBhZGRpbmcgPSAxMDtcbiAgY29uc3QgZmluYWxYID0gbWluWCAtIHBhZGRpbmc7XG4gIGNvbnN0IGZpbmFsWSA9IG1pblkgLSBwYWRkaW5nO1xuICBjb25zdCBmaW5hbFdpZHRoID0gbWF4WCAtIG1pblggKyBwYWRkaW5nICogMjtcbiAgY29uc3QgZmluYWxIZWlnaHQgPSBtYXhZIC0gbWluWSArIHBhZGRpbmcgKiAyO1xuXG4gIHJldHVybiAoXG4gICAgPFJlY3RcbiAgICAgIG5hbWU9XCJ1aVwiXG4gICAgICB4PXtmaW5hbFh9XG4gICAgICB5PXtmaW5hbFl9XG4gICAgICB3aWR0aD17ZmluYWxXaWR0aH1cbiAgICAgIGhlaWdodD17ZmluYWxIZWlnaHR9XG4gICAgICBmaWxsPVwidHJhbnNwYXJlbnRcIlxuICAgICAgc3Ryb2tlPVwiIzkzMzNFQVwiXG4gICAgICBzdHJva2VXaWR0aD17MX1cbiAgICAgIGxpc3RlbmluZz17ZmFsc2V9XG4gICAgICBvcGFjaXR5PXswLjd9XG4gICAgLz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNlbGVjdGlvbkJvdW5kcyh7XG4gIHNlbGVjdGVkRWxlbWVudHMsXG4gIGVsZW1lbnRSZWZzLFxuICBvYmpldG9zLFxuICBvblRyYW5zZm9ybSxcbiAgaXNEcmFnZ2luZyxcbn0pIHtcbiAgY29uc3QgdHJhbnNmb3JtZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFt0cmFuc2Zvcm1UaWNrLCBzZXRUcmFuc2Zvcm1UaWNrXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBsYXN0Tm9kZXNSZWYgPSB1c2VSZWYoW10pO1xuICBjb25zdCBjaXJjbGVBbmNob3JSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhID0gc2VsZWN0ZWRFbGVtZW50c1xuICAgIC5tYXAoKGlkKSA9PiBvYmpldG9zLmZpbmQoKG9iaikgPT4gb2JqLmlkID09PSBpZCkpXG4gICAgLmZpbHRlcihCb29sZWFuKTtcblxuICBjb25zdCBwcmltZXJFbGVtZW50byA9IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhWzBdIHx8IG51bGw7XG4gIGNvbnN0IGVzVGV4dG8gPSBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJ0ZXh0b1wiO1xuICBjb25zdCBlc0NvdW50ZG93biA9IHByaW1lckVsZW1lbnRvPy50aXBvID09PSBcImNvdW50ZG93blwiO1xuICBjb25zdCBlc0dhbGVyaWEgPSBzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJnYWxlcmlhXCI7XG4gIGNvbnN0IGxvY2tBc3BlY3RDb3VudGRvd24gPSBzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBlc0NvdW50ZG93bjtcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JTaXplID0gMTQ7XG4gIGNvbnN0IHRyYW5zZm9ybWVyUm90YXRlT2Zmc2V0ID0gMjQ7XG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9yUmFkaXVzID0gOTk5O1xuICBjb25zdCBlc1RyaWFuZ3VsbyA9XG4gICAgcHJpbWVyRWxlbWVudG8/LnRpcG8gPT09IFwiZm9ybWFcIiAmJlxuICAgIHByaW1lckVsZW1lbnRvPy5maWd1cmEgPT09IFwidHJpYW5nbGVcIjtcblxuICBjb25zdCBoYXNHYWxsZXJ5ID0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc0RhdGEuc29tZShcbiAgICAobykgPT4gby50aXBvID09PSBcImdhbGVyaWFcIlxuICApO1xuXG4gIGNvbnN0IGhheUxpbmVhcyA9IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhLnNvbWUoXG4gICAgKG9iaikgPT4gb2JqLnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvYmouZmlndXJhID09PSBcImxpbmVcIlxuICApO1xuXG4gIGNvbnN0IGVsZW1lbnRvc1RyYW5zZm9ybWFibGVzID0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc0RhdGEuZmlsdGVyKFxuICAgIChvYmopID0+ICEob2JqLnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvYmouZmlndXJhID09PSBcImxpbmVcIilcbiAgKTtcblxuICBjb25zdCBkZWJlcmlhVXNhclRyYW5zZm9ybWVyID1cbiAgICBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlcy5sZW5ndGggPiAwO1xuXG4gIGNvbnN0IHNlbGVjdGVkR2VvbUtleSA9IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhXG4gICAgLm1hcCgobykgPT5cbiAgICAgIFtcbiAgICAgICAgby5pZCxcbiAgICAgICAgby54ID8/IDAsXG4gICAgICAgIG8ueSA/PyAwLFxuICAgICAgICBvLndpZHRoID8/IFwiXCIsXG4gICAgICAgIG8uaGVpZ2h0ID8/IFwiXCIsXG4gICAgICAgIG8uc2NhbGVYID8/IDEsXG4gICAgICAgIG8uc2NhbGVZID8/IDEsXG4gICAgICAgIG8ucm90YXRpb24gPz8gMCxcbiAgICAgICAgby5jaGlwV2lkdGggPz8gXCJcIixcbiAgICAgICAgby5nYXAgPz8gXCJcIixcbiAgICAgICAgby5wYWRkaW5nWCA/PyBcIlwiLFxuICAgICAgICBvLnBhZGRpbmdZID8/IFwiXCIsXG4gICAgICBdLmpvaW4oXCI6XCIpXG4gICAgKVxuICAgIC5qb2luKFwifFwiKTtcblxuICBjb25zdCBnZXRUcmFuc2Zvcm1Qb3NlID0gKG5vZGUpID0+IHtcbiAgICBpZiAoIW5vZGUpIHJldHVybiB7IHg6IDAsIHk6IDAsIHJvdGF0aW9uOiAwIH07XG5cbiAgICBpZiAoZXNHYWxlcmlhICYmIHR5cGVvZiBub2RlLmdldFBhcmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLmdldFBhcmVudCgpO1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHR5cGVvZiBwYXJlbnQueCA9PT0gXCJmdW5jdGlvblwiID8gcGFyZW50LngoKSA6IDAsXG4gICAgICAgICAgeTogdHlwZW9mIHBhcmVudC55ID09PSBcImZ1bmN0aW9uXCIgPyBwYXJlbnQueSgpIDogMCxcbiAgICAgICAgICByb3RhdGlvbjogdHlwZW9mIHBhcmVudC5yb3RhdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gcGFyZW50LnJvdGF0aW9uKCkgfHwgMCA6IDAsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHR5cGVvZiBub2RlLnggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUueCgpIDogMCxcbiAgICAgIHk6IHR5cGVvZiBub2RlLnkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUueSgpIDogMCxcbiAgICAgIHJvdGF0aW9uOiB0eXBlb2Ygbm9kZS5yb3RhdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5yb3RhdGlvbigpIHx8IDAgOiAwLFxuICAgIH07XG4gIH07XG5cblxuICAvLyDwn5SlIEVmZWN0byBwcmluY2lwYWwgZGVsIFRyYW5zZm9ybWVyIChTSU4gcmV0cnkgLyBTSU4gZmxpY2tlcilcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB0ciA9IHRyYW5zZm9ybWVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCF0cikgcmV0dXJuO1xuXG4gICAgY29uc3Qgc2VsS2V5ID0gc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKTtcbiAgICBUUkRCRyhcIkVGRkVDVCBzdGFydFwiLCB7XG4gICAgICBzZWxLZXksXG4gICAgICBpc0RyYWdnaW5nLFxuICAgICAgZGViZXJpYVVzYXJUcmFuc2Zvcm1lcixcbiAgICAgIGhhc0dhbGxlcnksXG4gICAgICBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlc0xlbjogZWxlbWVudG9zVHJhbnNmb3JtYWJsZXMubGVuZ3RoLFxuICAgICAgdHJhbnNmb3JtVGljayxcbiAgICAgIGVkaXRpbmdJZDogd2luZG93LmVkaXRpbmc/LmlkIHx8IG51bGwsXG4gICAgfSk7XG5cbiAgICAvLyBTaSBubyBjb3JyZXNwb25kZSB0cmFuc2Zvcm1lciwgbm8gaGFnYXMgZGV0YWNoIGFncmVzaXZvIChldml0YSBmbGlja2VyKVxuICAgIGlmICghZGViZXJpYVVzYXJUcmFuc2Zvcm1lcikge1xuICAgICAgVFJEQkcoXCJFRkZFQ1QgZXhpdDogbm8gdHJhbnNmb3JtZXIgb3IgZ2FsbGVyeVwiLCB7IHNlbEtleSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIC8vIFJlc29sdmVyIG5vZGVzIGRlc2RlIHJlZnMgKGZ1ZW50ZSBkZSB2ZXJkYWQpXG4gICAgbGV0IG5vZG9zVHJhbnNmb3JtYWJsZXMgPSBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlc1xuICAgICAgLm1hcCgobykgPT4gZWxlbWVudFJlZnMuY3VycmVudD8uW28uaWRdKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgIC8vIFNpbmdsZSBzZWxlY3Q6IHVzYXIgcmVmIGZyZXNjbyBTSUVNUFJFXG4gICAgaWYgKHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBpZFNlbCA9IHNlbGVjdGVkRWxlbWVudHNbMF07XG4gICAgICBjb25zdCByZWZOb2RlID0gZWxlbWVudFJlZnMuY3VycmVudD8uW2lkU2VsXSB8fCBudWxsO1xuICAgICAgaWYgKHJlZk5vZGUgJiYgdHlwZW9mIHJlZk5vZGUuZ2V0Q2xpZW50UmVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGlmIChlc0dhbGVyaWEgJiYgdHlwZW9mIHJlZk5vZGUuZmluZE9uZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc3QgZ2FsbGVyeUZyYW1lID0gcmVmTm9kZS5maW5kT25lKFwiLmdhbGxlcnktdHJhbnNmb3JtLWZyYW1lXCIpO1xuICAgICAgICAgIGlmIChnYWxsZXJ5RnJhbWUgJiYgdHlwZW9mIGdhbGxlcnlGcmFtZS5nZXRDbGllbnRSZWN0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIG5vZG9zVHJhbnNmb3JtYWJsZXMgPSBbZ2FsbGVyeUZyYW1lXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kb3NUcmFuc2Zvcm1hYmxlcyA9IFtyZWZOb2RlXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbm9kb3NUcmFuc2Zvcm1hYmxlcyA9IFtyZWZOb2RlXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNpIGHDum4gbm8gaGF5IG5vZG9zIChpbWFnZW4gY2FyZ2FuZG8sIGV0Yy4pLCBOTyBkZXNwZWdhciAoZXZpdGEgcGFycGFkZW8pXG4gICAgaWYgKG5vZG9zVHJhbnNmb3JtYWJsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBUUkRCRyhcIkVGRkVDVCBleGl0OiBubyBub2RlcyB5ZXRcIiwge1xuICAgICAgICBzZWxLZXksXG4gICAgICAgIHdhbnRlZElkczogZWxlbWVudG9zVHJhbnNmb3JtYWJsZXMubWFwKG8gPT4gby5pZCksXG4gICAgICAgIHJlZnNQcmVzZW50OiBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlcy5tYXAobyA9PiAhIWVsZW1lbnRSZWZzLmN1cnJlbnQ/LltvLmlkXSksXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cblxuICAgIC8vIEF0dGFjaCBlc3RhYmxlXG4gICAgVFJEQkcoXCJBVFRBQ0ggdHJ5XCIsIHtcbiAgICAgIHNlbEtleSxcbiAgICAgIG5vZGVzQ291bnQ6IG5vZG9zVHJhbnNmb3JtYWJsZXMubGVuZ3RoLFxuICAgICAgbm9kZUlkczogbm9kb3NUcmFuc2Zvcm1hYmxlcy5tYXAobiA9PiAodHlwZW9mIG4uaWQgPT09IFwiZnVuY3Rpb25cIiA/IG4uaWQoKSA6IG4uYXR0cnM/LmlkKSksXG4gICAgfSk7XG5cbiAgICB0ci5ub2Rlcyhub2Rvc1RyYW5zZm9ybWFibGVzKTtcblxuICAgIFRSREJHKFwiQVRUQUNIIGRvbmVcIiwge1xuICAgICAgc2VsS2V5LFxuICAgICAgdHJOb2Rlc0NvdW50OiB0ci5ub2Rlcz8uKCk/Lmxlbmd0aCB8fCAwLFxuICAgIH0pO1xuXG4gICAgdHJ5IHsgdHIuZm9yY2VVcGRhdGU/LigpOyB9IGNhdGNoIHsgfVxuICAgIHRyLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xuXG4gIH0sIFtcbiAgICAvLyBEZXBlbmRlbmNpYXMgbcOtbmltYXMgcmVhbGVzXG4gICAgc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKSxcbiAgICBkZWJlcmlhVXNhclRyYW5zZm9ybWVyLFxuICAgIGhhc0dhbGxlcnksXG4gICAgZWxlbWVudG9zVHJhbnNmb3JtYWJsZXMubGVuZ3RoLFxuICAgIHNlbGVjdGVkR2VvbUtleSxcbiAgICB0cmFuc2Zvcm1UaWNrLFxuICAgIGVsZW1lbnRSZWZzLFxuICBdKTtcblxuXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGlkID0gZT8uZGV0YWlsPy5pZDtcbiAgICAgIGlmICghaWQpIHJldHVybjtcblxuICAgICAgVFJEQkcoXCJSRUYgZXZlbnRcIiwge1xuICAgICAgICBpZCxcbiAgICAgICAgaXNTZWxlY3RlZDogc2VsZWN0ZWRFbGVtZW50cy5pbmNsdWRlcyhpZCksXG4gICAgICAgIHNlbEtleTogc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXNlbGVjdGVkRWxlbWVudHMuaW5jbHVkZXMoaWQpKSByZXR1cm47XG4gICAgICBzZXRUcmFuc2Zvcm1UaWNrKHQgPT4gdCArIDEpO1xuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVsZW1lbnQtcmVmLXJlZ2lzdHJhZG9cIiwgaGFuZGxlcik7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZWxlbWVudC1yZWYtcmVnaXN0cmFkb1wiLCBoYW5kbGVyKTtcbiAgfSwgW3NlbGVjdGVkRWxlbWVudHMuam9pbihcIixcIildKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGZpcnN0SWQgPSBzZWxlY3RlZEVsZW1lbnRzPy5bMF07XG4gICAgaWYgKCFmaXJzdElkKSByZXR1cm47XG5cbiAgICBjb25zdCBmaXJzdE5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50Py5bZmlyc3RJZF07XG4gICAgY29uc3Qgc3RhZ2UgPSBmaXJzdE5vZGU/LmdldFN0YWdlPy4oKTtcbiAgICBpZiAoIXN0YWdlKSByZXR1cm47XG5cbiAgICBsZXQgcmFmSWQgPSBudWxsO1xuICAgIGNvbnN0IHN5bmNUcmFuc2Zvcm1lciA9ICgpID0+IHtcbiAgICAgIGlmIChyYWZJZCAhPSBudWxsKSByZXR1cm47XG4gICAgICByYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHJhZklkID0gbnVsbDtcbiAgICAgICAgY29uc3QgdHIgPSB0cmFuc2Zvcm1lclJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoIXRyKSByZXR1cm47XG4gICAgICAgIHRyeSB7IHRyLmZvcmNlVXBkYXRlPy4oKTsgfSBjYXRjaCB7IH1cbiAgICAgICAgdHIuZ2V0TGF5ZXI/LigpPy5iYXRjaERyYXc/LigpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHN0YWdlLm9uKFwiZHJhZ21vdmVcIiwgc3luY1RyYW5zZm9ybWVyKTtcbiAgICBzdGFnZS5vbihcImRyYWdlbmRcIiwgc3luY1RyYW5zZm9ybWVyKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzdGFnZS5vZmYoXCJkcmFnbW92ZVwiLCBzeW5jVHJhbnNmb3JtZXIpO1xuICAgICAgc3RhZ2Uub2ZmKFwiZHJhZ2VuZFwiLCBzeW5jVHJhbnNmb3JtZXIpO1xuICAgICAgaWYgKHJhZklkICE9IG51bGwpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZklkKTtcbiAgICB9O1xuICB9LCBbc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKSwgZWxlbWVudFJlZnNdKTtcblxuXG5cblxuICAvLyDwn5SlIFJlbmRlclxuXG4gIGlmIChzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgaWYgKGhheUxpbmVhcyAmJiBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEJvdW5kc0luZGljYXRvclxuICAgICAgICBzZWxlY3RlZEVsZW1lbnRzPXtzZWxlY3RlZEVsZW1lbnRzfVxuICAgICAgICBlbGVtZW50UmVmcz17ZWxlbWVudFJlZnN9XG4gICAgICAgIG9iamV0b3M9e29iamV0b3N9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICBpZiAoaGF5TGluZWFzICYmIGVsZW1lbnRvc1RyYW5zZm9ybWFibGVzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEJvdW5kc0luZGljYXRvclxuICAgICAgICBzZWxlY3RlZEVsZW1lbnRzPXtzZWxlY3RlZEVsZW1lbnRzfVxuICAgICAgICBlbGVtZW50UmVmcz17ZWxlbWVudFJlZnN9XG4gICAgICAgIG9iamV0b3M9e29iamV0b3N9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxUcmFuc2Zvcm1lclxuICAgICAgbmFtZT1cInVpXCJcbiAgICAgIHJlZj17dHJhbnNmb3JtZXJSZWZ9XG5cbiAgICAgIC8vIPCflLUgYm9yZGUgc2llbXByZSB2aXNpYmxlXG4gICAgICBib3JkZXJFbmFibGVkPXt0cnVlfVxuXG4gICAgICBib3JkZXJTdHJva2U9XCIjOTMzM0VBXCJcblxuXG4gICAgICBib3JkZXJTdHJva2VXaWR0aD17MX1cblxuICAgICAgLy8g4p2MIG5vZG9zIHkgcm90YWNpw7NuIE9GRiBkdXJhbnRlIGRyYWdcbiAgICAgIGVuYWJsZWRBbmNob3JzPXtpc0RyYWdnaW5nID8gW10gOiBbXCJib3R0b20tcmlnaHRcIl19XG4gICAgICByb3RhdGVFbmFibGVkPXshaXNEcmFnZ2luZyAmJiAhZXNHYWxlcmlhfVxuXG4gICAgICBhbmNob3JGaWxsPVwiIzkzMzNFQVwiXG4gICAgICBhbmNob3JTdHJva2U9XCIjZmZmZmZmXCJcbiAgICAgIGFuY2hvclN0cm9rZVdpZHRoPXsyLjV9XG4gICAgICBhbmNob3JTaXplPXt0cmFuc2Zvcm1lckFuY2hvclNpemV9XG4gICAgICBhbmNob3JDb3JuZXJSYWRpdXM9e3RyYW5zZm9ybWVyQW5jaG9yUmFkaXVzfVxuICAgICAgYW5jaG9yU2hhZG93Q29sb3I9XCJyZ2JhKDE0NywgNTEsIDIzNCwgMC4zKVwiXG4gICAgICBhbmNob3JTaGFkb3dCbHVyPXs2fVxuICAgICAgYW5jaG9yU2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IDMgfX1cbiAgICAgIGtlZXBSYXRpbz17bG9ja0FzcGVjdENvdW50ZG93biB8fCBlc0dhbGVyaWF9XG4gICAgICBjZW50ZXJlZFNjYWxpbmc9e2ZhbHNlfVxuICAgICAgZmxpcEVuYWJsZWQ9e2ZhbHNlfVxuICAgICAgcmVzaXplRW5hYmxlZD17IWlzRHJhZ2dpbmd9XG4gICAgICByb3RhdGlvblNuYXBzPXtbMCwgNDUsIDkwLCAxMzUsIDE4MCwgMjI1LCAyNzAsIDMxNV19XG4gICAgICByb3RhdGVBbmNob3JPZmZzZXQ9e3RyYW5zZm9ybWVyUm90YXRlT2Zmc2V0fVxuICAgICAgcm90YXRpb25TbmFwVG9sZXJhbmNlPXs1fVxuICAgICAgYm91bmRCb3hGdW5jPXsob2xkQm94LCBuZXdCb3gpID0+IHtcbiAgICAgICAgY29uc3QgbWluU2l6ZSA9IGVzVGV4dG8gPyAyMCA6IDEwO1xuICAgICAgICBjb25zdCBtYXhTaXplID0gODAwO1xuICAgICAgICBpZiAoZXNHYWxlcmlhKSB7XG4gICAgICAgICAgY29uc3Qgcm93cyA9IE1hdGgubWF4KDEsIE51bWJlcihwcmltZXJFbGVtZW50bz8ucm93cykgfHwgMSk7XG4gICAgICAgICAgY29uc3QgY29scyA9IE1hdGgubWF4KDEsIE51bWJlcihwcmltZXJFbGVtZW50bz8uY29scykgfHwgMSk7XG4gICAgICAgICAgY29uc3QgZ2FwID0gTWF0aC5tYXgoMCwgTnVtYmVyKHByaW1lckVsZW1lbnRvPy5nYXApIHx8IDApO1xuICAgICAgICAgIGNvbnN0IGNlbGxSYXRpbyA9XG4gICAgICAgICAgICBwcmltZXJFbGVtZW50bz8ucmF0aW8gPT09IFwiNDozXCJcbiAgICAgICAgICAgICAgPyAzIC8gNFxuICAgICAgICAgICAgICA6IHByaW1lckVsZW1lbnRvPy5yYXRpbyA9PT0gXCIxNjo5XCJcbiAgICAgICAgICAgICAgICA/IDkgLyAxNlxuICAgICAgICAgICAgICAgIDogMTtcblxuICAgICAgICAgIGNvbnN0IG1pbkdyaWRXaWR0aCA9IGdhcCAqIChjb2xzIC0gMSkgKyBjb2xzO1xuICAgICAgICAgIGNvbnN0IG5leHRXaWR0aCA9IE1hdGgubWluKFxuICAgICAgICAgICAgbWF4U2l6ZSxcbiAgICAgICAgICAgIE1hdGgubWF4KG1pblNpemUsIG1pbkdyaWRXaWR0aCwgTWF0aC5hYnMobmV3Qm94LndpZHRoKSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGNlbGxXID0gTWF0aC5tYXgoMSwgKG5leHRXaWR0aCAtIGdhcCAqIChjb2xzIC0gMSkpIC8gY29scyk7XG4gICAgICAgICAgY29uc3QgY2VsbEggPSBjZWxsVyAqIGNlbGxSYXRpbztcbiAgICAgICAgICBjb25zdCBuZXh0SGVpZ2h0ID0gcm93cyAqIGNlbGxIICsgZ2FwICogKHJvd3MgLSAxKTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5uZXdCb3gsXG4gICAgICAgICAgICB3aWR0aDogbmV4dFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLm1heChtaW5TaXplLCBuZXh0SGVpZ2h0KSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld0JveC53aWR0aCA8IG1pblNpemUgfHwgbmV3Qm94LmhlaWdodCA8IG1pblNpemUpIHtcbiAgICAgICAgICByZXR1cm4gb2xkQm94O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxvY2tBc3BlY3RDb3VudGRvd24pIHtcbiAgICAgICAgICBjb25zdCBiYXNlVyA9IE1hdGgubWF4KDEsIG9sZEJveC53aWR0aCk7XG4gICAgICAgICAgY29uc3QgYmFzZUggPSBNYXRoLm1heCgxLCBvbGRCb3guaGVpZ2h0KTtcbiAgICAgICAgICBjb25zdCByYXRpbyA9IGJhc2VXIC8gYmFzZUg7XG5cbiAgICAgICAgICBjb25zdCBkdyA9IE1hdGguYWJzKG5ld0JveC53aWR0aCAtIG9sZEJveC53aWR0aCkgLyBiYXNlVztcbiAgICAgICAgICBjb25zdCBkaCA9IE1hdGguYWJzKG5ld0JveC5oZWlnaHQgLSBvbGRCb3guaGVpZ2h0KSAvIGJhc2VIO1xuXG4gICAgICAgICAgbGV0IHdpZHRoID0gbmV3Qm94LndpZHRoO1xuICAgICAgICAgIGxldCBoZWlnaHQgPSBuZXdCb3guaGVpZ2h0O1xuXG4gICAgICAgICAgaWYgKGRoID4gZHcpIHtcbiAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogcmF0aW87XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoIC8gcmF0aW87XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLm5ld0JveCxcbiAgICAgICAgICAgIHdpZHRoOiBNYXRoLm1pbihNYXRoLm1heCh3aWR0aCwgbWluU2l6ZSksIG1heFNpemUpLFxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLm1pbihNYXRoLm1heChoZWlnaHQsIG1pblNpemUpLCBtYXhTaXplKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVzVGV4dG8pIHtcbiAgICAgICAgICBjb25zdCBzY2FsZVggPSBuZXdCb3gud2lkdGggLyBvbGRCb3gud2lkdGg7XG4gICAgICAgICAgY29uc3Qgc2NhbGVZID0gbmV3Qm94LmhlaWdodCAvIG9sZEJveC5oZWlnaHQ7XG4gICAgICAgICAgY29uc3QgdW5pZm9ybVNjYWxlID0gTWF0aC5taW4oc2NhbGVYLCBzY2FsZVkpO1xuXG4gICAgICAgICAgY29uc3QgbmV3V2lkdGggPSBvbGRCb3gud2lkdGggKiB1bmlmb3JtU2NhbGU7XG4gICAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gb2xkQm94LmhlaWdodCAqIHVuaWZvcm1TY2FsZTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5uZXdCb3gsXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5taW4oTWF0aC5tYXgobmV3V2lkdGgsIG1pblNpemUpLCBtYXhTaXplKSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5taW4oTWF0aC5tYXgobmV3SGVpZ2h0LCBtaW5TaXplKSwgbWF4U2l6ZSksXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJmb3JtYVwiICYmXG4gICAgICAgICAgcHJpbWVyRWxlbWVudG8/LmZpZ3VyYSA9PT0gXCJjaXJjbGVcIlxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBzaXplID0gTWF0aC5tYXgobmV3Qm94LndpZHRoLCBuZXdCb3guaGVpZ2h0KTtcbiAgICAgICAgICBjb25zdCBmaW5hbFNpemUgPSBNYXRoLm1pbihzaXplLCBtYXhTaXplKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ubmV3Qm94LFxuICAgICAgICAgICAgd2lkdGg6IGZpbmFsU2l6ZSxcbiAgICAgICAgICAgIGhlaWdodDogZmluYWxTaXplLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXNUcmlhbmd1bG8pIHtcbiAgICAgICAgICBjb25zdCBzYWZlT2xkVyA9IE1hdGgubWF4KDEsIE1hdGguYWJzKG9sZEJveC53aWR0aCB8fCBtaW5TaXplKSk7XG4gICAgICAgICAgY29uc3Qgc2FmZU9sZEggPSBNYXRoLm1heCgxLCBNYXRoLmFicyhvbGRCb3guaGVpZ2h0IHx8IG1pblNpemUpKTtcbiAgICAgICAgICBjb25zdCBzY2FsZVggPSBNYXRoLmFicyhuZXdCb3gud2lkdGgpIC8gc2FmZU9sZFc7XG4gICAgICAgICAgY29uc3Qgc2NhbGVZID0gTWF0aC5hYnMobmV3Qm94LmhlaWdodCkgLyBzYWZlT2xkSDtcbiAgICAgICAgICBjb25zdCB1bmlmb3JtU2NhbGUgPSBNYXRoLm1heCgwLjA1LCBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSkpO1xuXG4gICAgICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLm1pbihNYXRoLm1heChzYWZlT2xkVyAqIHVuaWZvcm1TY2FsZSwgbWluU2l6ZSksIG1heFNpemUpO1xuICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWluKE1hdGgubWF4KHNhZmVPbGRIICogdW5pZm9ybVNjYWxlLCBtaW5TaXplKSwgbWF4U2l6ZSk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ubmV3Qm94LFxuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJpbWFnZW5cIiB8fFxuICAgICAgICAgIHByaW1lckVsZW1lbnRvPy50aXBvID09PSBcImljb25vXCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3Qgc2NhbGVYID0gbmV3Qm94LndpZHRoIC8gb2xkQm94LndpZHRoO1xuICAgICAgICAgIGNvbnN0IHNjYWxlWSA9IG5ld0JveC5oZWlnaHQgLyBvbGRCb3guaGVpZ2h0O1xuICAgICAgICAgIGNvbnN0IHVuaWZvcm1TY2FsZSA9IE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKTtcblxuICAgICAgICAgIGNvbnN0IG5ld1dpZHRoID0gb2xkQm94LndpZHRoICogdW5pZm9ybVNjYWxlO1xuICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IG9sZEJveC5oZWlnaHQgKiB1bmlmb3JtU2NhbGU7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ubmV3Qm94LFxuICAgICAgICAgICAgd2lkdGg6IE1hdGgubWluKE1hdGgubWF4KG5ld1dpZHRoLCBtaW5TaXplKSwgbWF4U2l6ZSksXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGgubWluKE1hdGgubWF4KG5ld0hlaWdodCwgbWluU2l6ZSksIG1heFNpemUpLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm5ld0JveCxcbiAgICAgICAgICB3aWR0aDogTWF0aC5taW4obmV3Qm94LndpZHRoLCBtYXhTaXplKSxcbiAgICAgICAgICBoZWlnaHQ6IE1hdGgubWluKG5ld0JveC5oZWlnaHQsIG1heFNpemUpLFxuICAgICAgICB9O1xuICAgICAgfX1cbiAgICAgIG9uVHJhbnNmb3JtU3RhcnQ9eygpID0+IHtcbiAgICAgICAgd2luZG93Ll9yZXNpemVEYXRhID0geyBpc1Jlc2l6aW5nOiB0cnVlIH07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdHIgPSB0cmFuc2Zvcm1lclJlZi5jdXJyZW50O1xuICAgICAgICAgIGNvbnN0IG5vZGVzID0gdHI/Lm5vZGVzPy4oKSB8fCBbXTtcbiAgICAgICAgICBjaXJjbGVBbmNob3JSZWYuY3VycmVudCA9IG51bGw7XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBub2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgIHByaW1lckVsZW1lbnRvPy50aXBvID09PSBcImZvcm1hXCIgJiZcbiAgICAgICAgICAgIHByaW1lckVsZW1lbnRvPy5maWd1cmEgPT09IFwiY2lyY2xlXCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IHIwID0gbm9kZXNbMF0uZ2V0Q2xpZW50UmVjdCh7XG4gICAgICAgICAgICAgICAgc2tpcFRyYW5zZm9ybTogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBza2lwU3Ryb2tlOiB0cnVlLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY2lyY2xlQW5jaG9yUmVmLmN1cnJlbnQgPSB7IGxlZnQ6IHIwLngsIHRvcDogcjAueSB9O1xuICAgICAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHVuaW9uID0gcmVjdEZyb21Ob2Rlcyhub2Rlcyk7XG5cbiAgICAgICAgICBjb25zdCBwYWQgPSB0eXBlb2YgdHI/LnBhZGRpbmcgPT09IFwiZnVuY3Rpb25cIiA/IHRyLnBhZGRpbmcoKSA6IDA7XG4gICAgICAgICAgY29uc3QgYm9yZGVyUmVjdCA9IHVuaW9uXG4gICAgICAgICAgICA/IHsgeDogdW5pb24ueCAtIHBhZCwgeTogdW5pb24ueSAtIHBhZCwgd2lkdGg6IHVuaW9uLndpZHRoICsgcGFkICogMiwgaGVpZ2h0OiB1bmlvbi5oZWlnaHQgKyBwYWQgKiAyIH1cbiAgICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICAgIGNvbnN0IG4gPSBub2Rlc1swXTtcbiAgICAgICAgICBjb25zdCBpZCA9IG4gPyAodHlwZW9mIG4uaWQgPT09IFwiZnVuY3Rpb25cIiA/IG4uaWQoKSA6IG4uYXR0cnM/LmlkKSA6IFwi4oiFXCI7XG4gICAgICAgICAgY29uc3QgdHJSZWN0ID0gdHI/LmdldENsaWVudFJlY3Q/Lih7IHNraXBUcmFuc2Zvcm06IGZhbHNlLCBza2lwU2hhZG93OiB0cnVlLCBza2lwU3Ryb2tlOiB0cnVlIH0pO1xuXG4gICAgICAgICAgc2xvZyhcbiAgICAgICAgICAgIFwiW1RSXSBzdGFydFwiLFxuICAgICAgICAgICAgYGlkPSR7aWR9YCxcbiAgICAgICAgICAgIGBub2Rlcz0ke25vZGVzLmxlbmd0aH1gLFxuICAgICAgICAgICAgdW5pb24gPyBgdW5pb24odz0ke3VuaW9uLndpZHRoLnRvRml4ZWQoMSl9LGg9JHt1bmlvbi5oZWlnaHQudG9GaXhlZCgxKX0pYCA6IFwidW5pb24obnVsbClcIixcbiAgICAgICAgICAgIGJvcmRlclJlY3QgPyBgYm9yZGVyKHc9JHtib3JkZXJSZWN0LndpZHRoLnRvRml4ZWQoMSl9LGg9JHtib3JkZXJSZWN0LmhlaWdodC50b0ZpeGVkKDEpfSlgIDogXCJib3JkZXIobnVsbClcIixcbiAgICAgICAgICAgIHRyUmVjdCA/IGB0clJlY3Qodz0ke3RyUmVjdC53aWR0aC50b0ZpeGVkKDEpfSxoPSR7dHJSZWN0LmhlaWdodC50b0ZpeGVkKDEpfSlgIDogXCJ0clJlY3QobnVsbClcIixcbiAgICAgICAgICAgIGBwYWQ9JHtwYWR9YFxuICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggeyB9XG4gICAgICB9fVxuXG4gICAgICBvblRyYW5zZm9ybT17KGUpID0+IHtcbiAgICAgICAgaWYgKCFvblRyYW5zZm9ybSB8fCAhdHJhbnNmb3JtZXJSZWYuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRyID0gdHJhbnNmb3JtZXJSZWYuY3VycmVudDtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB0eXBlb2YgdHIubm9kZXMgPT09IFwiZnVuY3Rpb25cIiA/IHRyLm5vZGVzKCkgfHwgW10gOiBbXTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzWzBdOyAvLyDinIUgbm9kbyByZWFsIChzaW5nbGUgc2VsZWN0KVxuICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHBvc2UgPSBnZXRUcmFuc2Zvcm1Qb3NlKG5vZGUpO1xuICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybURhdGEgPSB7XG4gICAgICAgICAgICB4OiBwb3NlLngsXG4gICAgICAgICAgICB5OiBwb3NlLnksXG4gICAgICAgICAgICByb3RhdGlvbjogcG9zZS5yb3RhdGlvbixcbiAgICAgICAgICAgIGlzUHJldmlldzogdHJ1ZSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKGVzVGV4dG8pIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRm9udFNpemUgPSBwcmltZXJFbGVtZW50by5mb250U2l6ZSB8fCAyNDtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlWCA9IHR5cGVvZiBub2RlLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5zY2FsZVgoKSA6IDE7XG4gICAgICAgICAgICBjb25zdCBzY2FsZVkgPSB0eXBlb2Ygbm9kZS5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVZKCkgOiAxO1xuXG4gICAgICAgICAgICBjb25zdCBhdmdTY2FsZSA9IChNYXRoLmFicyhzY2FsZVgpICsgTWF0aC5hYnMoc2NhbGVZKSkgLyAyO1xuICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS5mb250U2l6ZSA9IE1hdGgubWF4KDYsIE1hdGgucm91bmQob3JpZ2luYWxGb250U2l6ZSAqIGF2Z1NjYWxlKSk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnNjYWxlWCA9IDE7XG4gICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnNjYWxlWSA9IDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlWCA9IHR5cGVvZiBub2RlLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5zY2FsZVgoKSA6IDE7XG4gICAgICAgICAgICBjb25zdCBzY2FsZVkgPSB0eXBlb2Ygbm9kZS5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVZKCkgOiAxO1xuXG4gICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnNjYWxlWCA9IHNjYWxlWDtcbiAgICAgICAgICAgIHRyYW5zZm9ybURhdGEuc2NhbGVZID0gc2NhbGVZO1xuXG4gICAgICAgICAgICBpZiAocHJpbWVyRWxlbWVudG8/LnRpcG8gPT09IFwiY291bnRkb3duXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgY291bnRkb3duU2l6ZSA9IGdldENvdW50ZG93blNjYWxlZFNpemUobm9kZSk7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEud2lkdGggPSBjb3VudGRvd25TaXplLndpZHRoO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLmhlaWdodCA9IGNvdW50ZG93blNpemUuaGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlc1RyaWFuZ3Vsbykge1xuICAgICAgICAgICAgICBjb25zdCBiYXNlUmFkaXVzID0gTnVtYmVyLmlzRmluaXRlKHByaW1lckVsZW1lbnRvPy5yYWRpdXMpXG4gICAgICAgICAgICAgICAgPyBwcmltZXJFbGVtZW50by5yYWRpdXNcbiAgICAgICAgICAgICAgICA6IDYwO1xuICAgICAgICAgICAgICBjb25zdCBhdmdTY2FsZSA9IChNYXRoLmFicyhzY2FsZVgpICsgTWF0aC5hYnMoc2NhbGVZKSkgLyAyO1xuICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnJhZGl1cyA9IE1hdGgubWF4KDEsIGJhc2VSYWRpdXMgKiBhdmdTY2FsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFdpZHRoID0gcHJpbWVyRWxlbWVudG8ud2lkdGggfHwgMTAwO1xuICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbEhlaWdodCA9IHByaW1lckVsZW1lbnRvLmhlaWdodCB8fCAxMDA7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEud2lkdGggPSBNYXRoLmFicyhvcmlnaW5hbFdpZHRoICogc2NhbGVYKTtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS5oZWlnaHQgPSBNYXRoLmFicyhvcmlnaW5hbEhlaWdodCAqIHNjYWxlWSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcmltZXJFbGVtZW50bz8uZmlndXJhID09PSBcImNpcmNsZVwiKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGl2ZVJlY3QgPSBub2RlLmdldENsaWVudFJlY3Qoe1xuICAgICAgICAgICAgICAgICAgc2tpcFRyYW5zZm9ybTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2tpcFN0cm9rZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkaWFtZXRlciA9IE1hdGgubWF4KDEsIE1hdGgubWF4KGxpdmVSZWN0LndpZHRoLCBsaXZlUmVjdC5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnJhZGl1cyA9IGRpYW1ldGVyIC8gMjtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBjaXJjbGVBbmNob3JSZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICBpZiAoYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnggPSBhbmNob3IubGVmdCArIHRyYW5zZm9ybURhdGEucmFkaXVzO1xuICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS55ID0gYW5jaG9yLnRvcCArIHRyYW5zZm9ybURhdGEucmFkaXVzO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnggPSBsaXZlUmVjdC54ICsgdHJhbnNmb3JtRGF0YS5yYWRpdXM7XG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnkgPSBsaXZlUmVjdC55ICsgdHJhbnNmb3JtRGF0YS5yYWRpdXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIHt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb25UcmFuc2Zvcm0odHJhbnNmb3JtRGF0YSk7XG5cbiAgICAgICAgICAvLyAtLS0gTE9HIENPTVBBQ1RPIChvcGNpb25hbCkgLS0tXG4gICAgICAgICAgY29uc3QgaWQgPSAodHlwZW9mIG5vZGUuaWQgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuaWQoKSA6IG5vZGUuYXR0cnM/LmlkKSB8fCBcIuKIhVwiO1xuICAgICAgICAgIGNvbnN0IHN4ID0gbm9kZS5zY2FsZVg/LigpID8/IDE7XG4gICAgICAgICAgY29uc3Qgc3kgPSBub2RlLnNjYWxlWT8uKCkgPz8gMTtcbiAgICAgICAgICBjb25zdCByID0gbm9kZS5nZXRDbGllbnRSZWN0KHsgc2tpcFRyYW5zZm9ybTogZmFsc2UsIHNraXBTaGFkb3c6IHRydWUsIHNraXBTdHJva2U6IHRydWUgfSk7XG4gICAgICAgICAgc2xvZyhcbiAgICAgICAgICAgIFwiW1RSXSBsaXZlXCIsXG4gICAgICAgICAgICBgaWQ9JHtpZH1gLFxuICAgICAgICAgICAgYHRpcG89JHtwcmltZXJFbGVtZW50bz8udGlwbyB8fCBcIuKIhVwifWAsXG4gICAgICAgICAgICBgc3g9JHtzeC50b0ZpeGVkKDMpfWAsXG4gICAgICAgICAgICBgc3k9JHtzeS50b0ZpeGVkKDMpfWAsXG4gICAgICAgICAgICBgeD0keyhub2RlLng/LigpID8/IDApLnRvRml4ZWQoMSl9YCxcbiAgICAgICAgICAgIGB5PSR7KG5vZGUueT8uKCkgPz8gMCkudG9GaXhlZCgxKX1gLFxuICAgICAgICAgICAgYG5vZGVSZWN0KHc9JHtyLndpZHRoLnRvRml4ZWQoMSl9LGg9JHtyLmhlaWdodC50b0ZpeGVkKDEpfSlgLFxuICAgICAgICAgICAgYHc9JHt0cmFuc2Zvcm1EYXRhLndpZHRoID8/IFwi4oiFXCJ9YCxcbiAgICAgICAgICAgIGBoPSR7dHJhbnNmb3JtRGF0YS5oZWlnaHQgPz8gXCLiiIVcIn1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBlbiBvblRyYW5zZm9ybTpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9fVxuICAgICAgb25UcmFuc2Zvcm1FbmQ9eyhlKSA9PiB7XG4gICAgICAgIGlmICghdHJhbnNmb3JtZXJSZWYuY3VycmVudCB8fCAhb25UcmFuc2Zvcm0pIHJldHVybjtcblxuICAgICAgICBjb25zdCB0ciA9IHRyYW5zZm9ybWVyUmVmLmN1cnJlbnQ7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gdHlwZW9mIHRyLm5vZGVzID09PSBcImZ1bmN0aW9uXCIgPyB0ci5ub2RlcygpIHx8IFtdIDogW107XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBNVUxUSS1TRUxFQ0NJw5NOXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdFNjYWxlWCA9IHR5cGVvZiB0ci5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IHRyLnNjYWxlWCgpIHx8IDEgOiAxO1xuICAgICAgICAgICAgY29uc3QgdFNjYWxlWSA9IHR5cGVvZiB0ci5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IHRyLnNjYWxlWSgpIHx8IDEgOiAxO1xuICAgICAgICAgICAgY29uc3QgYXZnID0gKE1hdGguYWJzKHRTY2FsZVgpICsgTWF0aC5hYnModFNjYWxlWSkpIC8gMjtcblxuICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IG5vZGVzXG4gICAgICAgICAgICAgIC5tYXAoKG4pID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgaWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBpZCA9ICh0eXBlb2Ygbi5pZCA9PT0gXCJmdW5jdGlvblwiID8gbi5pZCgpIDogbi5hdHRycz8uaWQpIHx8IG51bGw7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCB7IH1cbiAgICAgICAgICAgICAgICBpZiAoIWlkKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IChvYmpldG9zIHx8IFtdKS5maW5kKChvKSA9PiBvLmlkID09PSBpZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkID0ge1xuICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICB4OiB0eXBlb2Ygbi54ID09PSBcImZ1bmN0aW9uXCIgPyBuLngoKSA6IG9iai54LFxuICAgICAgICAgICAgICAgICAgeTogdHlwZW9mIG4ueSA9PT0gXCJmdW5jdGlvblwiID8gbi55KCkgOiBvYmoueSxcbiAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB0eXBlb2Ygbi5yb3RhdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gbi5yb3RhdGlvbigpIHx8IDAgOiAob2JqLnJvdGF0aW9uIHx8IDApLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAob2JqLnRpcG8gPT09IFwidGV4dG9cIikge1xuICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IG9iai5mb250U2l6ZSB8fCAyNDtcbiAgICAgICAgICAgICAgICAgIHVwZC5mb250U2l6ZSA9IE1hdGgubWF4KDYsIE1hdGgucm91bmQoYmFzZSAqIGF2ZykpO1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG4uc2NhbGVYKDEpO1xuICAgICAgICAgICAgICAgICAgICBuLnNjYWxlWSgxKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB1cGQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJjaXJjbGVcIikge1xuICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZVIgPSBvYmoucmFkaXVzIHx8IDUwO1xuICAgICAgICAgICAgICAgICAgdXBkLnJhZGl1cyA9IGJhc2VSICogYXZnO1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG4uc2NhbGVYKDEpO1xuICAgICAgICAgICAgICAgICAgICBuLnNjYWxlWSgxKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB1cGQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJ0cmlhbmdsZVwiKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBiYXNlUiA9IG9iai5yYWRpdXMgfHwgNjA7XG4gICAgICAgICAgICAgICAgICB1cGQucmFkaXVzID0gTWF0aC5tYXgoMSwgYmFzZVIgKiBhdmcpO1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG4uc2NhbGVYKDEpO1xuICAgICAgICAgICAgICAgICAgICBuLnNjYWxlWSgxKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB1cGQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9iai50aXBvID09PSBcImNvdW50ZG93blwiKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjb3VudGRvd25TaXplID0gZ2V0Q291bnRkb3duU2NhbGVkU2l6ZShuKTtcbiAgICAgICAgICAgICAgICAgIHVwZC53aWR0aCA9IGNvdW50ZG93blNpemUud2lkdGg7XG4gICAgICAgICAgICAgICAgICB1cGQuaGVpZ2h0ID0gY291bnRkb3duU2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdXBkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VXID1cbiAgICAgICAgICAgICAgICAgIG9iai53aWR0aCAhPSBudWxsID8gb2JqLndpZHRoIDogKHR5cGVvZiBuLndpZHRoID09PSBcImZ1bmN0aW9uXCIgPyBuLndpZHRoKCkgOiAxMDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VIID1cbiAgICAgICAgICAgICAgICAgIG9iai5oZWlnaHQgIT0gbnVsbCA/IG9iai5oZWlnaHQgOiAodHlwZW9mIG4uaGVpZ2h0ID09PSBcImZ1bmN0aW9uXCIgPyBuLmhlaWdodCgpIDogMTAwKTtcblxuICAgICAgICAgICAgICAgIHVwZC53aWR0aCA9IE1hdGguYWJzKGJhc2VXICogdFNjYWxlWCk7XG4gICAgICAgICAgICAgICAgdXBkLmhlaWdodCA9IE1hdGguYWJzKGJhc2VIICogdFNjYWxlWSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG4uc2NhbGVYID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIG4uc2NhbGVYKDEpO1xuICAgICAgICAgICAgICAgICAgbi5zY2FsZVkoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1cGQ7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgICAgICAgIG9uVHJhbnNmb3JtKHsgaXNGaW5hbDogdHJ1ZSwgYmF0Y2g6IHVwZGF0ZXMgfSk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHIuc2NhbGVYID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgdHIuc2NhbGVYKDEpO1xuICAgICAgICAgICAgICB0ci5zY2FsZVkoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ci5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcblxuICAgICAgICAgICAgd2luZG93Ll9yZXNpemVEYXRhID0geyBpc1Jlc2l6aW5nOiBmYWxzZSB9O1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHdpbmRvdy5fcmVzaXplRGF0YSA9IG51bGw7XG4gICAgICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBlbiBvblRyYW5zZm9ybUVuZCAobXVsdGkpOlwiLCBlcnIpO1xuICAgICAgICAgICAgd2luZG93Ll9yZXNpemVEYXRhID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIFNJTkdMRS1TRUxFQ0NJw5NOXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzWzBdO1xuICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHBvc2UgPSBnZXRUcmFuc2Zvcm1Qb3NlKG5vZGUpO1xuICAgICAgICAgIGNvbnN0IGZpbmFsRGF0YSA9IHtcbiAgICAgICAgICAgIHg6IHBvc2UueCxcbiAgICAgICAgICAgIHk6IHBvc2UueSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiBwb3NlLnJvdGF0aW9uLFxuICAgICAgICAgICAgaXNGaW5hbDogdHJ1ZSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgaWYgKGVzVGV4dG8pIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRm9udFNpemUgPSBwcmltZXJFbGVtZW50by5mb250U2l6ZSB8fCAyNDtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlWCA9IHR5cGVvZiBub2RlLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5zY2FsZVgoKSA6IDE7XG4gICAgICAgICAgICBjb25zdCBzY2FsZVkgPSB0eXBlb2Ygbm9kZS5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVZKCkgOiAxO1xuICAgICAgICAgICAgY29uc3QgYXZnU2NhbGUgPSAoTWF0aC5hYnMoc2NhbGVYKSArIE1hdGguYWJzKHNjYWxlWSkpIC8gMjtcblxuICAgICAgICAgICAgZmluYWxEYXRhLmZvbnRTaXplID0gTWF0aC5tYXgoNiwgTWF0aC5yb3VuZChvcmlnaW5hbEZvbnRTaXplICogYXZnU2NhbGUpKTtcbiAgICAgICAgICAgIGZpbmFsRGF0YS5zY2FsZVggPSAxO1xuICAgICAgICAgICAgZmluYWxEYXRhLnNjYWxlWSA9IDE7XG5cbiAgICAgICAgICAgIC8vIOKchSBBcGxhbmFkbyBzeW5jIHBhcmEgdGV4dG8gKHNvbG8gZXNjYWxhKVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgbm9kZS5zY2FsZVgoMSk7XG4gICAgICAgICAgICAgIG5vZGUuc2NhbGVZKDEpO1xuICAgICAgICAgICAgICBub2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGFwbGFuYW5kbyBlc2NhbGFzIGRlIHRleHRvIChzeW5jKTpcIiwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gdHlwZW9mIG5vZGUuc2NhbGVYID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWCgpIDogMTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlWSA9IHR5cGVvZiBub2RlLnNjYWxlWSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5zY2FsZVkoKSA6IDE7XG4gICAgICAgICAgICBpZiAocHJpbWVyRWxlbWVudG8/LnRpcG8gPT09IFwiY291bnRkb3duXCIpIHtcbiAgICAgICAgICAgICAgLy8gQ291bnRkb3duOiBwZXJzaXN0aXIgZXNjYWxhIHJlYWwgcGFyYSBxdWUgZWwgcmVzdWx0YWRvIGZpbmFsXG4gICAgICAgICAgICAgIC8vIHNlYSBleGFjdGFtZW50ZSBlbCBtaXNtbyBxdWUgc2UgdmUgYWwgc29sdGFyLlxuICAgICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVYID0gc2NhbGVYO1xuICAgICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVZID0gc2NhbGVZO1xuICAgICAgICAgICAgICBjb25zdCBjb3VudGRvd25TaXplID0gZ2V0Q291bnRkb3duU2NhbGVkU2l6ZShub2RlKTtcbiAgICAgICAgICAgICAgZmluYWxEYXRhLndpZHRoID0gY291bnRkb3duU2l6ZS53aWR0aDtcbiAgICAgICAgICAgICAgZmluYWxEYXRhLmhlaWdodCA9IGNvdW50ZG93blNpemUuaGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlc1RyaWFuZ3Vsbykge1xuICAgICAgICAgICAgICBjb25zdCBiYXNlUmFkaXVzID0gTnVtYmVyLmlzRmluaXRlKHByaW1lckVsZW1lbnRvPy5yYWRpdXMpXG4gICAgICAgICAgICAgICAgPyBwcmltZXJFbGVtZW50by5yYWRpdXNcbiAgICAgICAgICAgICAgICA6IDYwO1xuICAgICAgICAgICAgICBjb25zdCBhdmdTY2FsZSA9IChNYXRoLmFicyhzY2FsZVgpICsgTWF0aC5hYnMoc2NhbGVZKSkgLyAyO1xuICAgICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVYID0gMTtcbiAgICAgICAgICAgICAgZmluYWxEYXRhLnNjYWxlWSA9IDE7XG4gICAgICAgICAgICAgIGZpbmFsRGF0YS5yYWRpdXMgPSBNYXRoLm1heCgxLCBiYXNlUmFkaXVzICogYXZnU2NhbGUpO1xuXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zY2FsZVgoMSk7XG4gICAgICAgICAgICAgICAgbm9kZS5zY2FsZVkoMSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlLnJhZGl1cyA9PT0gXCJmdW5jdGlvblwiKSBub2RlLnJhZGl1cyhmaW5hbERhdGEucmFkaXVzKTtcbiAgICAgICAgICAgICAgICBub2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBhcGxhbmFuZG8gZXNjYWxhIGRlIHRyacOhbmd1bG8gKHN5bmMpOlwiLCBlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVYID0gMTtcbiAgICAgICAgICAgICAgZmluYWxEYXRhLnNjYWxlWSA9IDE7XG4gICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsV2lkdGggPSBwcmltZXJFbGVtZW50by53aWR0aCB8fCAxMDA7XG4gICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsSGVpZ2h0ID0gcHJpbWVyRWxlbWVudG8uaGVpZ2h0IHx8IDEwMDtcblxuICAgICAgICAgICAgICBmaW5hbERhdGEud2lkdGggPSBNYXRoLmFicyhvcmlnaW5hbFdpZHRoICogc2NhbGVYKTtcbiAgICAgICAgICAgICAgZmluYWxEYXRhLmhlaWdodCA9IE1hdGguYWJzKG9yaWdpbmFsSGVpZ2h0ICogc2NhbGVZKTtcblxuICAgICAgICAgICAgICBpZiAocHJpbWVyRWxlbWVudG8/LmZpZ3VyYSA9PT0gXCJjaXJjbGVcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBsaXZlUmVjdCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCh7XG4gICAgICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBza2lwU3Ryb2tlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBkaWFtZXRlciA9IE1hdGgubWF4KDEsIE1hdGgubWF4KGxpdmVSZWN0LndpZHRoLCBsaXZlUmVjdC5oZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgIGZpbmFsRGF0YS5yYWRpdXMgPSBkaWFtZXRlciAvIDI7XG4gICAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBjaXJjbGVBbmNob3JSZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICAgIGlmIChhbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxEYXRhLnggPSBhbmNob3IubGVmdCArIGZpbmFsRGF0YS5yYWRpdXM7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsRGF0YS55ID0gYW5jaG9yLnRvcCArIGZpbmFsRGF0YS5yYWRpdXM7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbERhdGEueCA9IGxpdmVSZWN0LnggKyBmaW5hbERhdGEucmFkaXVzO1xuICAgICAgICAgICAgICAgICAgICBmaW5hbERhdGEueSA9IGxpdmVSZWN0LnkgKyBmaW5hbERhdGEucmFkaXVzO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIOKchSBBcGxhbmFyIGVzY2FsYSBJTk1FRElBVE9cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmdyA9IGZpbmFsRGF0YS53aWR0aDtcbiAgICAgICAgICAgICAgICBjb25zdCBmaCA9IGZpbmFsRGF0YS5oZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICBub2RlLnNjYWxlWCgxKTtcbiAgICAgICAgICAgICAgICBub2RlLnNjYWxlWSgxKTtcblxuICAgICAgICAgICAgICAgIGlmIChmdyAhPSBudWxsICYmIHR5cGVvZiBub2RlLndpZHRoID09PSBcImZ1bmN0aW9uXCIpIG5vZGUud2lkdGgoZncpO1xuICAgICAgICAgICAgICAgIGlmIChmaCAhPSBudWxsICYmIHR5cGVvZiBub2RlLmhlaWdodCA9PT0gXCJmdW5jdGlvblwiKSBub2RlLmhlaWdodChmaCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBwcmltZXJFbGVtZW50bz8uZmlndXJhID09PSBcImNpcmNsZVwiICYmXG4gICAgICAgICAgICAgICAgICBmaW5hbERhdGEucmFkaXVzICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiBub2RlLnJhZGl1cyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBub2RlLnJhZGl1cyhmaW5hbERhdGEucmFkaXVzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBub2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBhcGxhbmFuZG8gZXNjYWxhcyAoc3luYyk6XCIsIGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvblRyYW5zZm9ybShmaW5hbERhdGEpO1xuICAgICAgICAgIGNpcmNsZUFuY2hvclJlZi5jdXJyZW50ID0gbnVsbDtcblxuXG4gICAgICAgICAgLy8g4pyFIFJlYXRhY2hhciAxIHZleiwgY29uIHJlZiBmcmVzY28sIGVuIGVsIHByw7N4aW1vIGZyYW1lXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRyMiA9IHRyYW5zZm9ybWVyUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoIXRyMikgcmV0dXJuO1xuXG4gICAgICAgICAgICBUUkRCRyhcIm9uVHJhbnNmb3JtRW5kIC0+IHNjaGVkdWxlIFJBRiByZWF0dGFjaFwiLCB7XG4gICAgICAgICAgICAgIHNlbEtleTogc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKSxcbiAgICAgICAgICAgICAgaWRTZWw6IHNlbGVjdGVkRWxlbWVudHM/LlswXSB8fCBudWxsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaWRTZWwgPSBzZWxlY3RlZEVsZW1lbnRzPy5bMF07XG4gICAgICAgICAgICAgIGNvbnN0IGZyZXNoTm9kZSA9IGlkU2VsID8gZWxlbWVudFJlZnMuY3VycmVudD8uW2lkU2VsXSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgVFJEQkcoXCJvblRyYW5zZm9ybUVuZCBSQUZcIiwge1xuICAgICAgICAgICAgICAgIGlkU2VsLFxuICAgICAgICAgICAgICAgIGhhc0ZyZXNoOiAhIWZyZXNoTm9kZSxcbiAgICAgICAgICAgICAgICBkZXN0cm95ZWQ6ICEhZnJlc2hOb2RlPy5fZGVzdHJveWVkLFxuICAgICAgICAgICAgICAgIGhhc1N0YWdlOiAhIWZyZXNoTm9kZT8uZ2V0U3RhZ2U/LigpLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBTaSBlbCBub2RvIG5vIGVzdMOhIGxpc3RvLCBkZXNwZWdhciB5IHNhbGlyXG4gICAgICAgICAgICAgIGlmICghZnJlc2hOb2RlIHx8IGZyZXNoTm9kZS5fZGVzdHJveWVkIHx8ICFmcmVzaE5vZGUuZ2V0U3RhZ2U/LigpKSB7XG4gICAgICAgICAgICAgICAgVFJEQkcoXCJvblRyYW5zZm9ybUVuZCBSQUYgLT4gREVUQUNIIG5vZGVzKFtdKVwiLCB7IGlkU2VsIH0pO1xuICAgICAgICAgICAgICAgIHRyeSB7IHRyMi5ub2RlcyhbXSk7IHRyMi5nZXRMYXllcj8uKCk/LmJhdGNoRHJhdygpOyB9IGNhdGNoIHsgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgVFJEQkcoXCJvblRyYW5zZm9ybUVuZCBSQUYgLT4gREVUQUNIIG5vZGVzKFtdKVwiLCB7IGlkU2VsIH0pO1xuICAgICAgICAgICAgICAgIHRyMi5ub2RlcyhbZnJlc2hOb2RlXSk7XG4gICAgICAgICAgICAgICAgdHIyLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgdHIyLmdldExheWVyPy4oKT8uYmF0Y2hEcmF3KCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggeyB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIHsgfVxuXG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBlbiBvblRyYW5zZm9ybUVuZDpcIiwgZXJyb3IpO1xuICAgICAgICAgIHdpbmRvdy5fcmVzaXplRGF0YSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH19XG5cbiAgICAvPlxuICApO1xufVxuXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJUcmFuc2Zvcm1lciIsIlJlY3QiLCJERUJVR19TRUxFQ1RJT05fQk9VTkRTIiwic2JMb2ciLCJhcmdzIiwiY29uc29sZSIsImxvZyIsInNsb2ciLCJUUkRCRyIsIndpbmRvdyIsIl9fREJHX1RSIiwicmVjdEZyb21Ob2RlcyIsIm5vZGVzIiwibWluWCIsIkluZmluaXR5IiwibWluWSIsIm1heFgiLCJtYXhZIiwibiIsImdldENsaWVudFJlY3QiLCJyIiwic2tpcFRyYW5zZm9ybSIsInNraXBTaGFkb3ciLCJza2lwU3Ryb2tlIiwiTWF0aCIsIm1pbiIsIngiLCJ5IiwibWF4Iiwid2lkdGgiLCJoZWlnaHQiLCJnZXRDb3VudGRvd25TY2FsZWRTaXplIiwibm9kZSIsImhpdGJveCIsImZpbmRPbmUiLCJiYXNlVyIsIk5hTiIsImJhc2VIIiwic3giLCJhYnMiLCJzY2FsZVgiLCJzeSIsInNjYWxlWSIsIk51bWJlciIsImlzRmluaXRlIiwiQm91bmRzSW5kaWNhdG9yIiwic2VsZWN0ZWRFbGVtZW50cyIsImVsZW1lbnRSZWZzIiwib2JqZXRvcyIsImZvcmNlVXBkYXRlIiwic2V0Rm9yY2VVcGRhdGUiLCJmaXJzdFJlZiIsImN1cnJlbnQiLCJzdGFnZSIsImdldFN0YWdlIiwiaGFuZGxlRHJhZ01vdmUiLCJwIiwib24iLCJvZmYiLCJqb2luIiwiZWxlbWVudG9zRGF0YSIsIm1hcCIsImlkIiwiZmluZCIsIm9iaiIsImZpbHRlciIsIkJvb2xlYW4iLCJsZW5ndGgiLCJmb3JFYWNoIiwidGlwbyIsImZpZ3VyYSIsInBvaW50cyIsImNsZWFuUG9pbnRzIiwicGFyc2VGbG9hdCIsInJlYWxYIiwicmVhbFkiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImxpbmVQYWRkaW5nIiwiYm94IiwidG9GaXhlZCIsImdldFRleHRIZWlnaHQiLCJ0ZXh0SGVpZ2h0IiwiZXJyb3IiLCJmYWxsYmFja1giLCJmYWxsYmFja1kiLCJmYWxsYmFja1NpemUiLCJwcmltZXJFbGVtZW50byIsInBhZGRpbmciLCJmaW5hbFgiLCJmaW5hbFkiLCJmaW5hbFdpZHRoIiwiZmluYWxIZWlnaHQiLCJuYW1lIiwiZmlsbCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwibGlzdGVuaW5nIiwib3BhY2l0eSIsIlNlbGVjdGlvbkJvdW5kcyIsIm9uVHJhbnNmb3JtIiwiaXNEcmFnZ2luZyIsInRyYW5zZm9ybWVyUmVmIiwidHJhbnNmb3JtVGljayIsInNldFRyYW5zZm9ybVRpY2siLCJsYXN0Tm9kZXNSZWYiLCJjaXJjbGVBbmNob3JSZWYiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zRGF0YSIsImVzVGV4dG8iLCJlc0NvdW50ZG93biIsImVzR2FsZXJpYSIsImxvY2tBc3BlY3RDb3VudGRvd24iLCJ0cmFuc2Zvcm1lckFuY2hvclNpemUiLCJ0cmFuc2Zvcm1lclJvdGF0ZU9mZnNldCIsInRyYW5zZm9ybWVyQW5jaG9yUmFkaXVzIiwiZXNUcmlhbmd1bG8iLCJoYXNHYWxsZXJ5Iiwic29tZSIsIm8iLCJoYXlMaW5lYXMiLCJlbGVtZW50b3NUcmFuc2Zvcm1hYmxlcyIsImRlYmVyaWFVc2FyVHJhbnNmb3JtZXIiLCJzZWxlY3RlZEdlb21LZXkiLCJyb3RhdGlvbiIsImNoaXBXaWR0aCIsImdhcCIsInBhZGRpbmdYIiwicGFkZGluZ1kiLCJnZXRUcmFuc2Zvcm1Qb3NlIiwiZ2V0UGFyZW50IiwicGFyZW50IiwidHIiLCJzZWxLZXkiLCJlbGVtZW50b3NUcmFuc2Zvcm1hYmxlc0xlbiIsImVkaXRpbmdJZCIsImVkaXRpbmciLCJub2Rvc1RyYW5zZm9ybWFibGVzIiwiaWRTZWwiLCJyZWZOb2RlIiwiZ2FsbGVyeUZyYW1lIiwid2FudGVkSWRzIiwicmVmc1ByZXNlbnQiLCJub2Rlc0NvdW50Iiwibm9kZUlkcyIsImF0dHJzIiwidHJOb2Rlc0NvdW50IiwiZ2V0TGF5ZXIiLCJiYXRjaERyYXciLCJoYW5kbGVyIiwiZSIsImRldGFpbCIsImlzU2VsZWN0ZWQiLCJpbmNsdWRlcyIsInQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImZpcnN0SWQiLCJmaXJzdE5vZGUiLCJyYWZJZCIsInN5bmNUcmFuc2Zvcm1lciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicmVmIiwiYm9yZGVyRW5hYmxlZCIsImJvcmRlclN0cm9rZSIsImJvcmRlclN0cm9rZVdpZHRoIiwiZW5hYmxlZEFuY2hvcnMiLCJyb3RhdGVFbmFibGVkIiwiYW5jaG9yRmlsbCIsImFuY2hvclN0cm9rZSIsImFuY2hvclN0cm9rZVdpZHRoIiwiYW5jaG9yU2l6ZSIsImFuY2hvckNvcm5lclJhZGl1cyIsImFuY2hvclNoYWRvd0NvbG9yIiwiYW5jaG9yU2hhZG93Qmx1ciIsImFuY2hvclNoYWRvd09mZnNldCIsImtlZXBSYXRpbyIsImNlbnRlcmVkU2NhbGluZyIsImZsaXBFbmFibGVkIiwicmVzaXplRW5hYmxlZCIsInJvdGF0aW9uU25hcHMiLCJyb3RhdGVBbmNob3JPZmZzZXQiLCJyb3RhdGlvblNuYXBUb2xlcmFuY2UiLCJib3VuZEJveEZ1bmMiLCJvbGRCb3giLCJuZXdCb3giLCJtaW5TaXplIiwibWF4U2l6ZSIsInJvd3MiLCJjb2xzIiwiY2VsbFJhdGlvIiwicmF0aW8iLCJtaW5HcmlkV2lkdGgiLCJuZXh0V2lkdGgiLCJjZWxsVyIsImNlbGxIIiwibmV4dEhlaWdodCIsImR3IiwiZGgiLCJ1bmlmb3JtU2NhbGUiLCJuZXdXaWR0aCIsIm5ld0hlaWdodCIsInNpemUiLCJmaW5hbFNpemUiLCJzYWZlT2xkVyIsInNhZmVPbGRIIiwib25UcmFuc2Zvcm1TdGFydCIsIl9yZXNpemVEYXRhIiwiaXNSZXNpemluZyIsInIwIiwibGVmdCIsInRvcCIsInVuaW9uIiwicGFkIiwiYm9yZGVyUmVjdCIsInRyUmVjdCIsInBvc2UiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNQcmV2aWV3Iiwib3JpZ2luYWxGb250U2l6ZSIsImZvbnRTaXplIiwiYXZnU2NhbGUiLCJyb3VuZCIsImNvdW50ZG93blNpemUiLCJiYXNlUmFkaXVzIiwicmFkaXVzIiwib3JpZ2luYWxXaWR0aCIsIm9yaWdpbmFsSGVpZ2h0IiwibGl2ZVJlY3QiLCJkaWFtZXRlciIsImFuY2hvciIsIndhcm4iLCJvblRyYW5zZm9ybUVuZCIsInRTY2FsZVgiLCJ0U2NhbGVZIiwiYXZnIiwidXBkYXRlcyIsInVwZCIsImJhc2UiLCJiYXNlUiIsImlzRmluYWwiLCJiYXRjaCIsInNldFRpbWVvdXQiLCJlcnIiLCJmaW5hbERhdGEiLCJmdyIsImZoIiwidHIyIiwiZnJlc2hOb2RlIiwiaGFzRnJlc2giLCJkZXN0cm95ZWQiLCJfZGVzdHJveWVkIiwiaGFzU3RhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/SelectionBounds.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/ShapeToolbar.jsx":
/*!*****************************************!*\
  !*** ./src/components/ShapeToolbar.jsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ShapeToolbar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// components/ShapeToolbar.jsx\n\n\nfunction ShapeToolbar({ shapeElement, onUpdateShape, style = {} }) {\n    const [mostrarSelectorColor, setMostrarSelectorColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const colorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ShapeToolbar.useEffect\": ()=>{\n            const handleClickFuera = {\n                \"ShapeToolbar.useEffect.handleClickFuera\": (e)=>{\n                    if (colorRef.current && !colorRef.current.contains(e.target)) {\n                        setMostrarSelectorColor(false);\n                    }\n                }\n            }[\"ShapeToolbar.useEffect.handleClickFuera\"];\n            document.addEventListener(\"mousedown\", handleClickFuera);\n            return ({\n                \"ShapeToolbar.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickFuera)\n            })[\"ShapeToolbar.useEffect\"];\n        }\n    }[\"ShapeToolbar.useEffect\"], []);\n    if (!shapeElement || shapeElement.tipo !== \"forma\" || shapeElement.figura === \"line\") return null;\n    const colorActual = shapeElement.color || \"#000000\";\n    const coloresPredefinidos = [\n        \"#000\",\n        \"#fff\",\n        \"#ff0000\",\n        \"#00ff00\",\n        \"#0000ff\",\n        \"#ff00ff\",\n        \"#00ffff\",\n        \"#ffa500\",\n        \"#808080\"\n    ];\n    const actualizarColor = (nuevoColor)=>{\n        if (onUpdateShape) {\n            onUpdateShape(shapeElement.id, {\n                color: nuevoColor,\n                isFinal: true\n            });\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed z-50 bg-white border rounded shadow p-2 flex gap-2 items-center\",\n        style: {\n            ...style,\n            animation: \"fadeInScale 0.15s ease-out\"\n        },\n        onMouseDown: (e)=>e.stopPropagation(),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                ref: colorRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setMostrarSelectorColor(!mostrarSelectorColor),\n                        className: \"flex items-center gap-2 px-3 py-2 rounded border text-sm hover:bg-gray-100\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-5 h-5 rounded-full border border-gray-300\",\n                                style: {\n                                    backgroundColor: colorActual\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 48,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-xs font-medium\",\n                                children: \"Color\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 49,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 44,\n                        columnNumber: 9\n                    }, this),\n                    mostrarSelectorColor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-full mt-2 bg-white border rounded-lg shadow-xl p-3 z-50 min-w-[200px]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"color\",\n                                value: colorActual,\n                                onChange: (e)=>actualizarColor(e.target.value),\n                                className: \"w-full h-8 mb-3 rounded border\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 54,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-5 gap-2\",\n                                children: coloresPredefinidos.map((color)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-6 h-6 rounded-full border\",\n                                        style: {\n                                            backgroundColor: color\n                                        },\n                                        onClick: ()=>actualizarColor(color)\n                                    }, color, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                        lineNumber: 62,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 60,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 53,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 43,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col items-start\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-gray-600 mb-1\",\n                        children: \"Esquinas\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 78,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"range\",\n                                min: 0,\n                                max: 100,\n                                step: 1,\n                                value: shapeElement.cornerRadius || 0,\n                                onChange: (e)=>{\n                                    const nuevoRadio = parseInt(e.target.value);\n                                    onUpdateShape(shapeElement.id, {\n                                        cornerRadius: nuevoRadio,\n                                        isPreview: true\n                                    });\n                                },\n                                onMouseUp: (e)=>{\n                                    const nuevoRadio = parseInt(e.target.value);\n                                    onUpdateShape(shapeElement.id, {\n                                        cornerRadius: nuevoRadio,\n                                        isFinal: true\n                                    });\n                                },\n                                className: \"w-[120px]\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 81,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"number\",\n                                min: 0,\n                                max: 100,\n                                value: shapeElement.cornerRadius || 0,\n                                onChange: (e)=>{\n                                    const nuevoValor = parseInt(e.target.value);\n                                    if (!isNaN(nuevoValor)) {\n                                        onUpdateShape(shapeElement.id, {\n                                            cornerRadius: nuevoValor,\n                                            isPreview: true\n                                        });\n                                    }\n                                },\n                                onBlur: (e)=>{\n                                    const valorFinal = parseInt(e.target.value);\n                                    if (!isNaN(valorFinal)) {\n                                        onUpdateShape(shapeElement.id, {\n                                            cornerRadius: valorFinal,\n                                            isFinal: true\n                                        });\n                                    }\n                                },\n                                className: \"w-[50px] px-1 py-0.5 border rounded text-sm\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 105,\n                                columnNumber: 5\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 79,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 77,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Tama\\xf1o texto\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 138,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"number\",\n                        min: 8,\n                        max: 200,\n                        value: shapeElement.fontSize || 24,\n                        onChange: (e)=>onActualizar({\n                                fontSize: parseInt(e.target.value),\n                                isFinal: true\n                            }),\n                        className: \"w-20 text-black rounded px-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 139,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 137,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Color texto\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 153,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"color\",\n                        value: shapeElement.colorTexto || \"#000000\",\n                        onChange: (e)=>onActualizar({\n                                colorTexto: e.target.value,\n                                isFinal: true\n                            }),\n                        className: \"w-8 h-6 rounded\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 154,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 152,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Fuente\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 166,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: shapeElement.fontFamily || \"sans-serif\",\n                        onChange: (e)=>onActualizar({\n                                fontFamily: e.target.value,\n                                isFinal: true\n                            }),\n                        className: \"text-black rounded px-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"sans-serif\",\n                                children: \"Sans-serif\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 174,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"serif\",\n                                children: \"Serif\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 175,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"monospace\",\n                                children: \"Monospace\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 176,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"Great Vibes\",\n                                children: \"Great Vibes\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 177,\n                                columnNumber: 5\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 167,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 165,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Alineaci\\xf3n\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 183,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: shapeElement.align || \"center\",\n                        onChange: (e)=>onActualizar({\n                                align: e.target.value,\n                                isFinal: true\n                            }),\n                        className: \"text-black rounded px-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"left\",\n                                children: \"Izquierda\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 191,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"center\",\n                                children: \"Centro\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 192,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"right\",\n                                children: \"Derecha\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 193,\n                                columnNumber: 5\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 184,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 182,\n                columnNumber: 1\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n        lineNumber: 35,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL1NoYXBlVG9vbGJhci5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSw4QkFBOEI7O0FBQ3NCO0FBRXJDLFNBQVNHLGFBQWEsRUFBRUMsWUFBWSxFQUFFQyxhQUFhLEVBQUVDLFFBQVEsQ0FBQyxDQUFDLEVBQUU7SUFDOUUsTUFBTSxDQUFDQyxzQkFBc0JDLHdCQUF3QixHQUFHUiwrQ0FBUUEsQ0FBQztJQUNqRSxNQUFNUyxXQUFXUCw2Q0FBTUEsQ0FBQztJQUV4QkQsZ0RBQVNBO2tDQUFDO1lBQ1IsTUFBTVM7MkRBQW1CLENBQUNDO29CQUN4QixJQUFJRixTQUFTRyxPQUFPLElBQUksQ0FBQ0gsU0FBU0csT0FBTyxDQUFDQyxRQUFRLENBQUNGLEVBQUVHLE1BQU0sR0FBRzt3QkFDNUROLHdCQUF3QjtvQkFDMUI7Z0JBQ0Y7O1lBRUFPLFNBQVNDLGdCQUFnQixDQUFDLGFBQWFOO1lBQ3ZDOzBDQUFPLElBQU1LLFNBQVNFLG1CQUFtQixDQUFDLGFBQWFQOztRQUN6RDtpQ0FBRyxFQUFFO0lBRUwsSUFBSSxDQUFDTixnQkFBZ0JBLGFBQWFjLElBQUksS0FBSyxXQUFXZCxhQUFhZSxNQUFNLEtBQUssUUFBUSxPQUFPO0lBRTdGLE1BQU1DLGNBQWNoQixhQUFhaUIsS0FBSyxJQUFJO0lBRTFDLE1BQU1DLHNCQUFzQjtRQUFDO1FBQVE7UUFBUTtRQUFXO1FBQVc7UUFBVztRQUFXO1FBQVc7UUFBVztLQUFVO0lBRXpILE1BQU1DLGtCQUFrQixDQUFDQztRQUN2QixJQUFJbkIsZUFBZTtZQUNqQkEsY0FBY0QsYUFBYXFCLEVBQUUsRUFBRTtnQkFDN0JKLE9BQU9HO2dCQUNQRSxTQUFTO1lBQ1g7UUFDRjtJQUNGO0lBRUEscUJBQ0UsOERBQUNDO1FBQ0NDLFdBQVU7UUFDVnRCLE9BQU87WUFDTCxHQUFHQSxLQUFLO1lBQ1J1QixXQUFXO1FBQ2I7UUFDQUMsYUFBYSxDQUFDbkIsSUFBTUEsRUFBRW9CLGVBQWU7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QVMxQiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxTaGFwZVRvb2xiYXIuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvU2hhcGVUb29sYmFyLmpzeFxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNoYXBlVG9vbGJhcih7IHNoYXBlRWxlbWVudCwgb25VcGRhdGVTaGFwZSwgc3R5bGUgPSB7fSB9KSB7XHJcbiAgY29uc3QgW21vc3RyYXJTZWxlY3RvckNvbG9yLCBzZXRNb3N0cmFyU2VsZWN0b3JDb2xvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgY29sb3JSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBoYW5kbGVDbGlja0Z1ZXJhID0gKGUpID0+IHtcclxuICAgICAgaWYgKGNvbG9yUmVmLmN1cnJlbnQgJiYgIWNvbG9yUmVmLmN1cnJlbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tGdWVyYSk7XHJcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja0Z1ZXJhKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGlmICghc2hhcGVFbGVtZW50IHx8IHNoYXBlRWxlbWVudC50aXBvICE9PSBcImZvcm1hXCIgfHwgc2hhcGVFbGVtZW50LmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHJldHVybiBudWxsO1xyXG5cclxuICBjb25zdCBjb2xvckFjdHVhbCA9IHNoYXBlRWxlbWVudC5jb2xvciB8fCBcIiMwMDAwMDBcIjtcclxuXHJcbiAgY29uc3QgY29sb3Jlc1ByZWRlZmluaWRvcyA9IFtcIiMwMDBcIiwgXCIjZmZmXCIsIFwiI2ZmMDAwMFwiLCBcIiMwMGZmMDBcIiwgXCIjMDAwMGZmXCIsIFwiI2ZmMDBmZlwiLCBcIiMwMGZmZmZcIiwgXCIjZmZhNTAwXCIsIFwiIzgwODA4MFwiXTtcclxuXHJcbiAgY29uc3QgYWN0dWFsaXphckNvbG9yID0gKG51ZXZvQ29sb3IpID0+IHtcclxuICAgIGlmIChvblVwZGF0ZVNoYXBlKSB7XHJcbiAgICAgIG9uVXBkYXRlU2hhcGUoc2hhcGVFbGVtZW50LmlkLCB7XHJcbiAgICAgICAgY29sb3I6IG51ZXZvQ29sb3IsXHJcbiAgICAgICAgaXNGaW5hbDogdHJ1ZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXZcclxuICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei01MCBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBzaGFkb3cgcC0yIGZsZXggZ2FwLTIgaXRlbXMtY2VudGVyXCJcclxuICAgICAgc3R5bGU9e3tcclxuICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICBhbmltYXRpb246IFwiZmFkZUluU2NhbGUgMC4xNXMgZWFzZS1vdXRcIixcclxuICAgICAgfX1cclxuICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxyXG4gICAgPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCIgcmVmPXtjb2xvclJlZn0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoIW1vc3RyYXJTZWxlY3RvckNvbG9yKX1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMiByb3VuZGVkIGJvcmRlciB0ZXh0LXNtIGhvdmVyOmJnLWdyYXktMTAwXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNSBoLTUgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItZ3JheS0zMDBcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yQWN0dWFsIH19IC8+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtXCI+Q29sb3I8L3NwYW4+XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIHttb3N0cmFyU2VsZWN0b3JDb2xvciAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC1mdWxsIG10LTIgYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQtbGcgc2hhZG93LXhsIHAtMyB6LTUwIG1pbi13LVsyMDBweF1cIj5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cImNvbG9yXCJcclxuICAgICAgICAgICAgICB2YWx1ZT17Y29sb3JBY3R1YWx9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBhY3R1YWxpemFyQ29sb3IoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLTggbWItMyByb3VuZGVkIGJvcmRlclwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtNSBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgIHtjb2xvcmVzUHJlZGVmaW5pZG9zLm1hcCgoY29sb3IpID0+IChcclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAga2V5PXtjb2xvcn1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy02IGgtNiByb3VuZGVkLWZ1bGwgYm9yZGVyXCJcclxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9fVxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBhY3R1YWxpemFyQ29sb3IoY29sb3IpfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcblxyXG5cclxuey8qIPCfn6ogQ29udHJvbCBkZSBlc3F1aW5hcyByZWRvbmRlYWRhcyAqL31cclxuPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLXN0YXJ0XCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMCBtYi0xXCI+RXNxdWluYXM8L2xhYmVsPlxyXG4gIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgIHsvKiBTbGlkZXIgKi99XHJcbiAgICA8aW5wdXRcclxuICAgICAgdHlwZT1cInJhbmdlXCJcclxuICAgICAgbWluPXswfVxyXG4gICAgICBtYXg9ezEwMH1cclxuICAgICAgc3RlcD17MX1cclxuICAgICAgdmFsdWU9e3NoYXBlRWxlbWVudC5jb3JuZXJSYWRpdXMgfHwgMH1cclxuICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9SYWRpbyA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBvblVwZGF0ZVNoYXBlKHNoYXBlRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgY29ybmVyUmFkaXVzOiBudWV2b1JhZGlvLFxyXG4gICAgICAgICAgaXNQcmV2aWV3OiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9fVxyXG4gICAgICBvbk1vdXNlVXA9eyhlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9SYWRpbyA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBvblVwZGF0ZVNoYXBlKHNoYXBlRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgY29ybmVyUmFkaXVzOiBudWV2b1JhZGlvLFxyXG4gICAgICAgICAgaXNGaW5hbDogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgfX1cclxuICAgICAgY2xhc3NOYW1lPVwidy1bMTIwcHhdXCJcclxuICAgIC8+XHJcblxyXG4gICAgey8qIElucHV0IG51bcOpcmljbyAqL31cclxuICAgIDxpbnB1dFxyXG4gICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgbWluPXswfVxyXG4gICAgICBtYXg9ezEwMH1cclxuICAgICAgdmFsdWU9e3NoYXBlRWxlbWVudC5jb3JuZXJSYWRpdXMgfHwgMH1cclxuICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9WYWxvciA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBpZiAoIWlzTmFOKG51ZXZvVmFsb3IpKSB7XHJcbiAgICAgICAgICBvblVwZGF0ZVNoYXBlKHNoYXBlRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgICBjb3JuZXJSYWRpdXM6IG51ZXZvVmFsb3IsXHJcbiAgICAgICAgICAgIGlzUHJldmlldzogdHJ1ZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfX1cclxuICAgICAgb25CbHVyPXsoZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbG9yRmluYWwgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKCFpc05hTih2YWxvckZpbmFsKSkge1xyXG4gICAgICAgICAgb25VcGRhdGVTaGFwZShzaGFwZUVsZW1lbnQuaWQsIHtcclxuICAgICAgICAgICAgY29ybmVyUmFkaXVzOiB2YWxvckZpbmFsLFxyXG4gICAgICAgICAgICBpc0ZpbmFsOiB0cnVlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9fVxyXG4gICAgICBjbGFzc05hbWU9XCJ3LVs1MHB4XSBweC0xIHB5LTAuNSBib3JkZXIgcm91bmRlZCB0ZXh0LXNtXCJcclxuICAgIC8+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG5cclxuXHJcblxyXG5cclxuey8qIFRhbWHDsW8gZGUgZnVlbnRlICovfVxyXG48ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSB3LTI0XCI+VGFtYcOxbyB0ZXh0bzwvbGFiZWw+XHJcbiAgPGlucHV0XHJcbiAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgIG1pbj17OH1cclxuICAgIG1heD17MjAwfVxyXG4gICAgdmFsdWU9e3NoYXBlRWxlbWVudC5mb250U2l6ZSB8fCAyNH1cclxuICAgIG9uQ2hhbmdlPXsoZSkgPT5cclxuICAgICAgb25BY3R1YWxpemFyKHsgZm9udFNpemU6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSwgaXNGaW5hbDogdHJ1ZSB9KVxyXG4gICAgfVxyXG4gICAgY2xhc3NOYW1lPVwidy0yMCB0ZXh0LWJsYWNrIHJvdW5kZWQgcHgtMVwiXHJcbiAgLz5cclxuPC9kaXY+XHJcblxyXG57LyogQ29sb3IgZGVsIHRleHRvICovfVxyXG48ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSB3LTI0XCI+Q29sb3IgdGV4dG88L2xhYmVsPlxyXG4gIDxpbnB1dFxyXG4gICAgdHlwZT1cImNvbG9yXCJcclxuICAgIHZhbHVlPXtzaGFwZUVsZW1lbnQuY29sb3JUZXh0byB8fCBcIiMwMDAwMDBcIn1cclxuICAgIG9uQ2hhbmdlPXsoZSkgPT5cclxuICAgICAgb25BY3R1YWxpemFyKHsgY29sb3JUZXh0bzogZS50YXJnZXQudmFsdWUsIGlzRmluYWw6IHRydWUgfSlcclxuICAgIH1cclxuICAgIGNsYXNzTmFtZT1cInctOCBoLTYgcm91bmRlZFwiXHJcbiAgLz5cclxuPC9kaXY+XHJcblxyXG57LyogRnVlbnRlICovfVxyXG48ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSB3LTI0XCI+RnVlbnRlPC9sYWJlbD5cclxuICA8c2VsZWN0XHJcbiAgICB2YWx1ZT17c2hhcGVFbGVtZW50LmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCJ9XHJcbiAgICBvbkNoYW5nZT17KGUpID0+XHJcbiAgICAgIG9uQWN0dWFsaXphcih7IGZvbnRGYW1pbHk6IGUudGFyZ2V0LnZhbHVlLCBpc0ZpbmFsOiB0cnVlIH0pXHJcbiAgICB9XHJcbiAgICBjbGFzc05hbWU9XCJ0ZXh0LWJsYWNrIHJvdW5kZWQgcHgtMVwiXHJcbiAgPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cInNhbnMtc2VyaWZcIj5TYW5zLXNlcmlmPC9vcHRpb24+XHJcbiAgICA8b3B0aW9uIHZhbHVlPVwic2VyaWZcIj5TZXJpZjwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cIm1vbm9zcGFjZVwiPk1vbm9zcGFjZTwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cIkdyZWF0IFZpYmVzXCI+R3JlYXQgVmliZXM8L29wdGlvbj5cclxuICA8L3NlbGVjdD5cclxuPC9kaXY+XHJcblxyXG57LyogQWxpbmVhY2nDs24gKi99XHJcbjxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXdoaXRlIHctMjRcIj5BbGluZWFjacOzbjwvbGFiZWw+XHJcbiAgPHNlbGVjdFxyXG4gICAgdmFsdWU9e3NoYXBlRWxlbWVudC5hbGlnbiB8fCBcImNlbnRlclwifVxyXG4gICAgb25DaGFuZ2U9eyhlKSA9PlxyXG4gICAgICBvbkFjdHVhbGl6YXIoeyBhbGlnbjogZS50YXJnZXQudmFsdWUsIGlzRmluYWw6IHRydWUgfSlcclxuICAgIH1cclxuICAgIGNsYXNzTmFtZT1cInRleHQtYmxhY2sgcm91bmRlZCBweC0xXCJcclxuICA+XHJcbiAgICA8b3B0aW9uIHZhbHVlPVwibGVmdFwiPkl6cXVpZXJkYTwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cImNlbnRlclwiPkNlbnRybzwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cInJpZ2h0XCI+RGVyZWNoYTwvb3B0aW9uPlxyXG4gIDwvc2VsZWN0PlxyXG48L2Rpdj5cclxuXHJcblxyXG5cclxuXHJcbiAgICA8L2Rpdj4gIFxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiU2hhcGVUb29sYmFyIiwic2hhcGVFbGVtZW50Iiwib25VcGRhdGVTaGFwZSIsInN0eWxlIiwibW9zdHJhclNlbGVjdG9yQ29sb3IiLCJzZXRNb3N0cmFyU2VsZWN0b3JDb2xvciIsImNvbG9yUmVmIiwiaGFuZGxlQ2xpY2tGdWVyYSIsImUiLCJjdXJyZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGlwbyIsImZpZ3VyYSIsImNvbG9yQWN0dWFsIiwiY29sb3IiLCJjb2xvcmVzUHJlZGVmaW5pZG9zIiwiYWN0dWFsaXphckNvbG9yIiwibnVldm9Db2xvciIsImlkIiwiaXNGaW5hbCIsImRpdiIsImNsYXNzTmFtZSIsImFuaW1hdGlvbiIsIm9uTW91c2VEb3duIiwic3RvcFByb3BhZ2F0aW9uIiwicmVmIiwiYnV0dG9uIiwib25DbGljayIsImJhY2tncm91bmRDb2xvciIsInNwYW4iLCJpbnB1dCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwibWFwIiwibGFiZWwiLCJtaW4iLCJtYXgiLCJzdGVwIiwiY29ybmVyUmFkaXVzIiwibnVldm9SYWRpbyIsInBhcnNlSW50IiwiaXNQcmV2aWV3Iiwib25Nb3VzZVVwIiwibnVldm9WYWxvciIsImlzTmFOIiwib25CbHVyIiwidmFsb3JGaW5hbCIsImZvbnRTaXplIiwib25BY3R1YWxpemFyIiwiY29sb3JUZXh0byIsInNlbGVjdCIsImZvbnRGYW1pbHkiLCJvcHRpb24iLCJhbGlnbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/ShapeToolbar.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx":
/*!*******************************************************!*\
  !*** ./src/components/canvas/CanvasElementsLayer.jsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CanvasElementsLayer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n// src/components/canvas/CanvasElementsLayer.jsx\n\n\n\nfunction CanvasElementsLayer({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Layer, {\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\CanvasElementsLayer.jsx\",\n        lineNumber: 6,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2NhbnZhcy9DYW52YXNFbGVtZW50c0xheWVyLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsZ0RBQWdEOztBQUN0QjtBQUNVO0FBRXJCLFNBQVNFLG9CQUFvQixFQUFFQyxRQUFRLEVBQUU7SUFDdEQscUJBQU8sOERBQUNGLDhDQUFLQTtrQkFBRUU7Ozs7OztBQUNqQiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxjYW52YXNcXENhbnZhc0VsZW1lbnRzTGF5ZXIuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2NhbnZhcy9DYW52YXNFbGVtZW50c0xheWVyLmpzeFxyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IExheWVyIH0gZnJvbSBcInJlYWN0LWtvbnZhXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDYW52YXNFbGVtZW50c0xheWVyKHsgY2hpbGRyZW4gfSkge1xyXG4gIHJldHVybiA8TGF5ZXI+e2NoaWxkcmVufTwvTGF5ZXI+O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkxheWVyIiwiQ2FudmFzRWxlbWVudHNMYXllciIsImNoaWxkcmVuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/canvas/DividersOverlayStage.jsx":
/*!********************************************************!*\
  !*** ./src/components/canvas/DividersOverlayStage.jsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ DividersOverlayStage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/canvas/CanvasElementsLayer */ \"(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx\");\n// src/components/canvas/DividersOverlayStage.jsx\n\n\n\n\n/**\r\n * Stage secundario (overlay) que dibuja líneas divisorias laterales\r\n * cuando zoom === 0.8. Mantiene exactamente la lógica original.\r\n */ function DividersOverlayStage({ zoom, altoCanvasDinamico, seccionesOrdenadas }) {\n    if (zoom !== 0.8) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Stage, {\n        width: 1220,\n        height: altoCanvasDinamico,\n        style: {\n            position: \"absolute\",\n            top: 0,\n            left: \"50%\",\n            transform: \"translateX(-50%)\",\n            pointerEvents: \"none\",\n            zIndex: 10\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            children: seccionesOrdenadas.slice(0, -1).map((seccion, index)=>{\n                let alturaAcumulada = 0;\n                for(let i = 0; i <= index; i++){\n                    alturaAcumulada += seccionesOrdenadas[i].altura;\n                }\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Line, {\n                            name: \"ui\",\n                            points: [\n                                210,\n                                alturaAcumulada,\n                                10,\n                                alturaAcumulada\n                            ],\n                            stroke: \"#999999\",\n                            strokeWidth: 1,\n                            opacity: 0.6,\n                            dash: [\n                                3,\n                                3\n                            ],\n                            listening: false\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n                            lineNumber: 40,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Line, {\n                            name: \"ui\",\n                            points: [\n                                1010,\n                                alturaAcumulada,\n                                1210,\n                                alturaAcumulada\n                            ],\n                            stroke: \"#999999\",\n                            strokeWidth: 1,\n                            opacity: 0.6,\n                            dash: [\n                                3,\n                                3\n                            ],\n                            listening: false\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n                            lineNumber: 51,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, `dividers-secondary-${seccion.id}`, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n                    lineNumber: 38,\n                    columnNumber: 13\n                }, this);\n            })\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n            lineNumber: 30,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n        lineNumber: 18,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2NhbnZhcy9EaXZpZGVyc092ZXJsYXlTdGFnZS5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxpREFBaUQ7O0FBQ3ZCO0FBQ3VCO0FBQ3lCO0FBRTFFOzs7Q0FHQyxHQUNjLFNBQVNLLHFCQUFxQixFQUMzQ0MsSUFBSSxFQUNKQyxrQkFBa0IsRUFDbEJDLGtCQUFrQixFQUNuQjtJQUNDLElBQUlGLFNBQVMsS0FBSyxPQUFPO0lBRXpCLHFCQUNFLDhEQUFDTCw4Q0FBS0E7UUFDSlEsT0FBTztRQUNQQyxRQUFRSDtRQUNSSSxPQUFPO1lBQ0xDLFVBQVU7WUFDVkMsS0FBSztZQUNMQyxNQUFNO1lBQ05DLFdBQVc7WUFDWEMsZUFBZTtZQUNmQyxRQUFRO1FBQ1Y7a0JBRUEsNEVBQUNiLDhFQUFtQkE7c0JBQ2pCSSxtQkFBbUJVLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDLENBQUNDLFNBQVNDO2dCQUM3QyxJQUFJQyxrQkFBa0I7Z0JBQ3RCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxLQUFLRixPQUFPRSxJQUFLO29CQUMvQkQsbUJBQW1CZCxrQkFBa0IsQ0FBQ2UsRUFBRSxDQUFDQyxNQUFNO2dCQUNqRDtnQkFFQSxxQkFDRSw4REFBQ3RCLDhDQUFLQTs7c0NBRUosOERBQUNDLDZDQUFJQTs0QkFDSHNCLE1BQUs7NEJBQ0xDLFFBQVE7Z0NBQUM7Z0NBQUtKO2dDQUFpQjtnQ0FBSUE7NkJBQWdCOzRCQUNuREssUUFBTzs0QkFDUEMsYUFBYTs0QkFDYkMsU0FBUzs0QkFDVEMsTUFBTTtnQ0FBQztnQ0FBRzs2QkFBRTs0QkFDWkMsV0FBVzs7Ozs7O3NDQUliLDhEQUFDNUIsNkNBQUlBOzRCQUNIc0IsTUFBSzs0QkFDTEMsUUFBUTtnQ0FBQztnQ0FBTUo7Z0NBQWlCO2dDQUFNQTs2QkFBZ0I7NEJBQ3RESyxRQUFPOzRCQUNQQyxhQUFhOzRCQUNiQyxTQUFTOzRCQUNUQyxNQUFNO2dDQUFDO2dDQUFHOzZCQUFFOzRCQUNaQyxXQUFXOzs7Ozs7O21CQXBCSCxDQUFDLG1CQUFtQixFQUFFWCxRQUFRWSxFQUFFLEVBQUU7Ozs7O1lBd0JsRDs7Ozs7Ozs7Ozs7QUFJUiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxjYW52YXNcXERpdmlkZXJzT3ZlcmxheVN0YWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9jYW52YXMvRGl2aWRlcnNPdmVybGF5U3RhZ2UuanN4XHJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgU3RhZ2UsIEdyb3VwLCBMaW5lIH0gZnJvbSBcInJlYWN0LWtvbnZhXCI7XHJcbmltcG9ydCBDYW52YXNFbGVtZW50c0xheWVyIGZyb20gXCJAL2NvbXBvbmVudHMvY2FudmFzL0NhbnZhc0VsZW1lbnRzTGF5ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBTdGFnZSBzZWN1bmRhcmlvIChvdmVybGF5KSBxdWUgZGlidWphIGzDrW5lYXMgZGl2aXNvcmlhcyBsYXRlcmFsZXNcclxuICogY3VhbmRvIHpvb20gPT09IDAuOC4gTWFudGllbmUgZXhhY3RhbWVudGUgbGEgbMOzZ2ljYSBvcmlnaW5hbC5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERpdmlkZXJzT3ZlcmxheVN0YWdlKHtcclxuICB6b29tLFxyXG4gIGFsdG9DYW52YXNEaW5hbWljbyxcclxuICBzZWNjaW9uZXNPcmRlbmFkYXMsXHJcbn0pIHtcclxuICBpZiAoem9vbSAhPT0gMC44KSByZXR1cm4gbnVsbDtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxTdGFnZVxyXG4gICAgICB3aWR0aD17MTIyMH0gLy8g4pyFIDkyMHB4IGNhbnZhcyArIDE1MHB4IGNhZGEgbGFkb1xyXG4gICAgICBoZWlnaHQ9e2FsdG9DYW52YXNEaW5hbWljb31cclxuICAgICAgc3R5bGU9e3tcclxuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgIHRvcDogMCxcclxuICAgICAgICBsZWZ0OiBcIjUwJVwiLCAvLyBDZW50cmFyIGVsIFN0YWdlIHNlY3VuZGFyaW9cclxuICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgtNTAlKVwiLCAvLyBDZW50cmFyIGV4YWN0YW1lbnRlXHJcbiAgICAgICAgcG9pbnRlckV2ZW50czogXCJub25lXCIsXHJcbiAgICAgICAgekluZGV4OiAxMCxcclxuICAgICAgfX1cclxuICAgID5cclxuICAgICAgPENhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcbiAgICAgICAge3NlY2Npb25lc09yZGVuYWRhcy5zbGljZSgwLCAtMSkubWFwKChzZWNjaW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgbGV0IGFsdHVyYUFjdW11bGFkYSA9IDA7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBpbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFsdHVyYUFjdW11bGFkYSArPSBzZWNjaW9uZXNPcmRlbmFkYXNbaV0uYWx0dXJhO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxHcm91cCBrZXk9e2BkaXZpZGVycy1zZWNvbmRhcnktJHtzZWNjaW9uLmlkfWB9PlxyXG4gICAgICAgICAgICAgIHsvKiBMw61uZWEgaXpxdWllcmRhIC0gUEVHQURBIGFsIGJvcmRlIGl6cXVpZXJkbyBkZWwgY2FudmFzICovfVxyXG4gICAgICAgICAgICAgIDxMaW5lXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwidWlcIlxyXG4gICAgICAgICAgICAgICAgcG9pbnRzPXtbMjEwLCBhbHR1cmFBY3VtdWxhZGEsIDEwLCBhbHR1cmFBY3VtdWxhZGFdfSAvLyDinIUgREVTREUgWD0yMTAgKGJvcmRlIHJlYWwgZGVsIGNhbnZhcykgSEFDSUEgWD0xMFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlPVwiIzk5OTk5OVwiXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17MX1cclxuICAgICAgICAgICAgICAgIG9wYWNpdHk9ezAuNn1cclxuICAgICAgICAgICAgICAgIGRhc2g9e1szLCAzXX0gLy8g4pyFIFBVTlRPUyBDT1JUT1NcclxuICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgey8qIEzDrW5lYSBkZXJlY2hhIC0gUEVHQURBIGFsIGJvcmRlIGRlcmVjaG8gZGVsIGNhbnZhcyAqL31cclxuICAgICAgICAgICAgICA8TGluZVxyXG4gICAgICAgICAgICAgICAgbmFtZT1cInVpXCJcclxuICAgICAgICAgICAgICAgIHBvaW50cz17WzEwMTAsIGFsdHVyYUFjdW11bGFkYSwgMTIxMCwgYWx0dXJhQWN1bXVsYWRhXX0gLy8g4pyFIERFU0RFIFg9MTAxMCAoYm9yZGUgcmVhbCBkZWwgY2FudmFzKSBIQUNJQSBYPTEyMTBcclxuICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM5OTk5OTlcIlxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5PXswLjZ9XHJcbiAgICAgICAgICAgICAgICBkYXNoPXtbMywgM119IC8vIOKchSBQVU5UT1MgQ09SVE9TXHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvR3JvdXA+XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pfVxyXG4gICAgICA8L0NhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcbiAgICA8L1N0YWdlPlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiU3RhZ2UiLCJHcm91cCIsIkxpbmUiLCJDYW52YXNFbGVtZW50c0xheWVyIiwiRGl2aWRlcnNPdmVybGF5U3RhZ2UiLCJ6b29tIiwiYWx0b0NhbnZhc0RpbmFtaWNvIiwic2VjY2lvbmVzT3JkZW5hZGFzIiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInRyYW5zZm9ybSIsInBvaW50ZXJFdmVudHMiLCJ6SW5kZXgiLCJzbGljZSIsIm1hcCIsInNlY2Npb24iLCJpbmRleCIsImFsdHVyYUFjdW11bGFkYSIsImkiLCJhbHR1cmEiLCJuYW1lIiwicG9pbnRzIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJvcGFjaXR5IiwiZGFzaCIsImxpc3RlbmluZyIsImlkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/canvas/DividersOverlayStage.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/FondoSeccion.jsx":
/*!************************************************!*\
  !*** ./src/components/editor/FondoSeccion.jsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FondoSeccion)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! use-image */ \"use-image\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nfunction FondoSeccion({ seccion, offsetY, alturaPx, onSelect, onUpdateFondoOffset, isMobile = false, mobileBackgroundEditEnabled = false }) {\n    const [fondoImage] = use_image__WEBPACK_IMPORTED_MODULE_3___default()(seccion.fondoImagen, \"anonymous\");\n    const [modoMoverFondo, setModoMoverFondo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const imagenRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const allowBackgroundEdit = !isMobile || mobileBackgroundEditEnabled;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FondoSeccion.useEffect\": ()=>{\n            if (!modoMoverFondo) return;\n            const handleClickGlobal = {\n                \"FondoSeccion.useEffect.handleClickGlobal\": (e)=>{\n                    const stage = imagenRef.current?.getStage?.();\n                    if (!stage) return;\n                    const container = stage.container();\n                    if (!container.contains(e.target)) {\n                        setModoMoverFondo(false);\n                        document.body.style.cursor = \"default\";\n                    }\n                }\n            }[\"FondoSeccion.useEffect.handleClickGlobal\"];\n            window.addEventListener(\"mousedown\", handleClickGlobal);\n            window.addEventListener(\"touchstart\", handleClickGlobal, {\n                passive: true\n            });\n            return ({\n                \"FondoSeccion.useEffect\": ()=>{\n                    window.removeEventListener(\"mousedown\", handleClickGlobal);\n                    window.removeEventListener(\"touchstart\", handleClickGlobal);\n                }\n            })[\"FondoSeccion.useEffect\"];\n        }\n    }[\"FondoSeccion.useEffect\"], [\n        modoMoverFondo\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FondoSeccion.useEffect\": ()=>{\n            const onActivate = {\n                \"FondoSeccion.useEffect.onActivate\": (e)=>{\n                    if (e?.detail?.sectionId !== seccion.id) return;\n                    setModoMoverFondo(true);\n                    try {\n                        document.body.style.cursor = \"move\";\n                    } catch  {}\n                }\n            }[\"FondoSeccion.useEffect.onActivate\"];\n            const onExit = {\n                \"FondoSeccion.useEffect.onExit\": (e)=>{\n                    const targetSectionId = e?.detail?.sectionId;\n                    if (targetSectionId && targetSectionId !== seccion.id) return;\n                    setModoMoverFondo(false);\n                    try {\n                        document.body.style.cursor = \"default\";\n                    } catch  {}\n                }\n            }[\"FondoSeccion.useEffect.onExit\"];\n            window.addEventListener(\"activar-modo-mover-fondo\", onActivate);\n            window.addEventListener(\"salir-modo-mover-fondo\", onExit);\n            return ({\n                \"FondoSeccion.useEffect\": ()=>{\n                    window.removeEventListener(\"activar-modo-mover-fondo\", onActivate);\n                    window.removeEventListener(\"salir-modo-mover-fondo\", onExit);\n                }\n            })[\"FondoSeccion.useEffect\"];\n        }\n    }[\"FondoSeccion.useEffect\"], [\n        seccion.id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FondoSeccion.useEffect\": ()=>{\n            if (allowBackgroundEdit) return;\n            if (!modoMoverFondo) return;\n            setModoMoverFondo(false);\n        }\n    }[\"FondoSeccion.useEffect\"], [\n        allowBackgroundEdit,\n        modoMoverFondo\n    ]);\n    if (!seccion.fondoImagen || !fondoImage) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n            id: seccion.id,\n            x: 0,\n            y: offsetY,\n            width: 800,\n            height: alturaPx,\n            fill: seccion.fondo || \"#f0f0f0\",\n            listening: true,\n            onClick: onSelect,\n            onTap: onSelect\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n            lineNumber: 75,\n            columnNumber: 7\n        }, this);\n    }\n    const canvasWidth = 800;\n    const canvasHeight = alturaPx;\n    const imageWidth = fondoImage.width;\n    const imageHeight = fondoImage.height;\n    const scaleX = canvasWidth / imageWidth;\n    const scaleY = canvasHeight / imageHeight;\n    const scale = Math.max(scaleX, scaleY);\n    const scaledWidth = imageWidth * scale;\n    const scaledHeight = imageHeight * scale;\n    const offsetXCentrado = (canvasWidth - scaledWidth) / 2;\n    const offsetYCentrado = (canvasHeight - scaledHeight) / 2;\n    const offsetXFinal = offsetXCentrado + (seccion.fondoImagenOffsetX || 0);\n    const offsetYFinal = offsetYCentrado + (seccion.fondoImagenOffsetY || 0);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                id: seccion.id,\n                x: 0,\n                y: offsetY,\n                width: 800,\n                height: alturaPx,\n                fill: seccion.fondo || \"#f0f0f0\",\n                listening: true,\n                onClick: onSelect,\n                onTap: onSelect\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                lineNumber: 109,\n                columnNumber: 7\n            }, this),\n            modoMoverFondo && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                x: -200,\n                y: offsetY - 200,\n                width: 1200,\n                height: alturaPx + 400,\n                fill: \"rgba(0,0,0,0.05)\",\n                listening: false\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                lineNumber: 122,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                clipX: modoMoverFondo ? undefined : 0,\n                clipY: modoMoverFondo ? undefined : offsetY,\n                clipWidth: modoMoverFondo ? undefined : 800,\n                clipHeight: modoMoverFondo ? undefined : alturaPx,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Image, {\n                        ref: imagenRef,\n                        image: fondoImage,\n                        x: offsetXFinal,\n                        y: offsetY + offsetYFinal,\n                        width: scaledWidth,\n                        height: scaledHeight,\n                        draggable: allowBackgroundEdit && modoMoverFondo,\n                        opacity: modoMoverFondo ? 0.9 : 1,\n                        shadowColor: modoMoverFondo ? \"#773dbe\" : \"transparent\",\n                        shadowBlur: modoMoverFondo ? 10 : 0,\n                        listening: true,\n                        onClick: (e)=>{\n                            if (modoMoverFondo) {\n                                e.cancelBubble = true;\n                                return;\n                            }\n                            onSelect?.();\n                        },\n                        onTap: (e)=>{\n                            if (modoMoverFondo) {\n                                e.cancelBubble = true;\n                                return;\n                            }\n                            onSelect?.();\n                        },\n                        onMouseDown: (e)=>{\n                            if (modoMoverFondo) e.cancelBubble = true;\n                        },\n                        onDblClick: allowBackgroundEdit ? (e)=>{\n                            e.cancelBubble = true;\n                            setModoMoverFondo(true);\n                            document.body.style.cursor = \"move\";\n                        } : undefined,\n                        onDblTap: allowBackgroundEdit ? (e)=>{\n                            e.cancelBubble = true;\n                            setModoMoverFondo(true);\n                            document.body.style.cursor = \"move\";\n                        } : undefined,\n                        onDragMove: (e)=>{\n                            const node = e.target;\n                            const nuevaX = node.x();\n                            const nuevaY = node.y() - offsetY;\n                            const nuevoOffsetX = nuevaX - offsetXCentrado;\n                            const nuevoOffsetY = nuevaY - offsetYCentrado;\n                            onUpdateFondoOffset?.(seccion.id, {\n                                offsetX: nuevoOffsetX,\n                                offsetY: nuevoOffsetY\n                            }, true);\n                        },\n                        onDragEnd: (e)=>{\n                            const node = e.target;\n                            const nuevaX = node.x();\n                            const nuevaY = node.y() - offsetY;\n                            const nuevoOffsetX = nuevaX - offsetXCentrado;\n                            const nuevoOffsetY = nuevaY - offsetYCentrado;\n                            onUpdateFondoOffset?.(seccion.id, {\n                                offsetX: nuevoOffsetX,\n                                offsetY: nuevoOffsetY\n                            }, false);\n                            setModoMoverFondo(false);\n                            document.body.style.cursor = \"default\";\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                        lineNumber: 138,\n                        columnNumber: 9\n                    }, this),\n                    allowBackgroundEdit && modoMoverFondo && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Transformer, {\n                        nodes: [\n                            imagenRef.current\n                        ],\n                        enabledAnchors: [\n                            \"bottom-right\"\n                        ],\n                        borderStroke: \"#773dbe\",\n                        anchorFill: \"#773dbe\",\n                        anchorStroke: \"#ffffff\",\n                        anchorStrokeWidth: 2,\n                        anchorSize: 14,\n                        anchorCornerRadius: 999,\n                        keepRatio: true,\n                        onTransform: ()=>{\n                            const node = imagenRef.current;\n                            if (!node) return;\n                            const sx = node.scaleX();\n                            const sy = node.scaleY();\n                            node.width(node.width() * sx);\n                            node.height(node.height() * sy);\n                            node.scaleX(1);\n                            node.scaleY(1);\n                        },\n                        onTransformEnd: ()=>{\n                            const node = imagenRef.current;\n                            if (!node) return;\n                            const nuevaX = node.x();\n                            const nuevaY = node.y() - offsetY;\n                            const nuevoOffsetX = nuevaX - offsetXCentrado;\n                            const nuevoOffsetY = nuevaY - offsetYCentrado;\n                            onUpdateFondoOffset?.(seccion.id, {\n                                offsetX: nuevoOffsetX,\n                                offsetY: nuevoOffsetY\n                            }, false);\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                        lineNumber: 199,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                lineNumber: 132,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n        lineNumber: 108,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9Gb25kb1NlY2Npb24uanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7QUFDd0I7QUFDM0M7QUFFbEIsU0FBU1MsYUFBYSxFQUNuQ0MsT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLFFBQVEsRUFDUkMsUUFBUSxFQUNSQyxtQkFBbUIsRUFDbkJDLFdBQVcsS0FBSyxFQUNoQkMsOEJBQThCLEtBQUssRUFDcEM7SUFDQyxNQUFNLENBQUNDLFdBQVcsR0FBR1QsZ0RBQVFBLENBQUNFLFFBQVFRLFdBQVcsRUFBRTtJQUNuRCxNQUFNLENBQUNDLGdCQUFnQkMsa0JBQWtCLEdBQUdwQiwrQ0FBUUEsQ0FBQztJQUNyRCxNQUFNcUIsWUFBWXBCLDZDQUFNQSxDQUFDO0lBRXpCLE1BQU1xQixzQkFBc0IsQ0FBQ1AsWUFBWUM7SUFFekNkLGdEQUFTQTtrQ0FBQztZQUNSLElBQUksQ0FBQ2lCLGdCQUFnQjtZQUVyQixNQUFNSTs0REFBb0IsQ0FBQ0M7b0JBQ3pCLE1BQU1DLFFBQVFKLFVBQVVLLE9BQU8sRUFBRUM7b0JBQ2pDLElBQUksQ0FBQ0YsT0FBTztvQkFDWixNQUFNRyxZQUFZSCxNQUFNRyxTQUFTO29CQUNqQyxJQUFJLENBQUNBLFVBQVVDLFFBQVEsQ0FBQ0wsRUFBRU0sTUFBTSxHQUFHO3dCQUNqQ1Ysa0JBQWtCO3dCQUNsQlcsU0FBU0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE1BQU0sR0FBRztvQkFDL0I7Z0JBQ0Y7O1lBRUFDLE9BQU9DLGdCQUFnQixDQUFDLGFBQWFiO1lBQ3JDWSxPQUFPQyxnQkFBZ0IsQ0FBQyxjQUFjYixtQkFBbUI7Z0JBQUVjLFNBQVM7WUFBSztZQUN6RTswQ0FBTztvQkFDTEYsT0FBT0csbUJBQW1CLENBQUMsYUFBYWY7b0JBQ3hDWSxPQUFPRyxtQkFBbUIsQ0FBQyxjQUFjZjtnQkFDM0M7O1FBQ0Y7aUNBQUc7UUFBQ0o7S0FBZTtJQUVuQmpCLGdEQUFTQTtr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QkFDQStDLGdCQUFnQjs0QkFDZCxNQUFNbkIsT0FBT2xFLFVBQVVLLE9BQU87NEJBQzlCLElBQUksQ0FBQzZELE1BQU07NEJBQ1gsTUFBTUMsU0FBU0QsS0FBSzFDLENBQUM7NEJBQ3JCLE1BQU00QyxTQUFTRixLQUFLekMsQ0FBQyxLQUFLbkM7NEJBQzFCLE1BQU0rRSxlQUFlRixTQUFTdkI7NEJBQzlCLE1BQU0wQixlQUFlRixTQUFTdkI7NEJBQzlCcEQsc0JBQXNCSixRQUFRZ0MsRUFBRSxFQUFFO2dDQUFFa0QsU0FBU0Y7Z0NBQWMvRSxTQUFTZ0Y7NEJBQWEsR0FBRzt3QkFDdEY7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1aIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcRm9uZG9TZWNjaW9uLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEdyb3VwLCBSZWN0LCBUcmFuc2Zvcm1lciwgSW1hZ2UgYXMgS29udmFJbWFnZSB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xuaW1wb3J0IHVzZUltYWdlIGZyb20gXCJ1c2UtaW1hZ2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRm9uZG9TZWNjaW9uKHtcbiAgc2VjY2lvbixcbiAgb2Zmc2V0WSxcbiAgYWx0dXJhUHgsXG4gIG9uU2VsZWN0LFxuICBvblVwZGF0ZUZvbmRvT2Zmc2V0LFxuICBpc01vYmlsZSA9IGZhbHNlLFxuICBtb2JpbGVCYWNrZ3JvdW5kRWRpdEVuYWJsZWQgPSBmYWxzZSxcbn0pIHtcbiAgY29uc3QgW2ZvbmRvSW1hZ2VdID0gdXNlSW1hZ2Uoc2VjY2lvbi5mb25kb0ltYWdlbiwgXCJhbm9ueW1vdXNcIik7XG4gIGNvbnN0IFttb2RvTW92ZXJGb25kbywgc2V0TW9kb01vdmVyRm9uZG9dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpbWFnZW5SZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgY29uc3QgYWxsb3dCYWNrZ3JvdW5kRWRpdCA9ICFpc01vYmlsZSB8fCBtb2JpbGVCYWNrZ3JvdW5kRWRpdEVuYWJsZWQ7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1vZG9Nb3ZlckZvbmRvKSByZXR1cm47XG5cbiAgICBjb25zdCBoYW5kbGVDbGlja0dsb2JhbCA9IChlKSA9PiB7XG4gICAgICBjb25zdCBzdGFnZSA9IGltYWdlblJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCk7XG4gICAgICBpZiAoIXN0YWdlKSByZXR1cm47XG4gICAgICBjb25zdCBjb250YWluZXIgPSBzdGFnZS5jb250YWluZXIoKTtcbiAgICAgIGlmICghY29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICBzZXRNb2RvTW92ZXJGb25kbyhmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrR2xvYmFsKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlQ2xpY2tHbG9iYWwsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tHbG9iYWwpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZUNsaWNrR2xvYmFsKTtcbiAgICB9O1xuICB9LCBbbW9kb01vdmVyRm9uZG9dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG9uQWN0aXZhdGUgPSAoZSkgPT4ge1xuICAgICAgaWYgKGU/LmRldGFpbD8uc2VjdGlvbklkICE9PSBzZWNjaW9uLmlkKSByZXR1cm47XG4gICAgICBzZXRNb2RvTW92ZXJGb25kbyh0cnVlKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJtb3ZlXCI7XG4gICAgICB9IGNhdGNoIHt9XG4gICAgfTtcblxuICAgIGNvbnN0IG9uRXhpdCA9IChlKSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRTZWN0aW9uSWQgPSBlPy5kZXRhaWw/LnNlY3Rpb25JZDtcbiAgICAgIGlmICh0YXJnZXRTZWN0aW9uSWQgJiYgdGFyZ2V0U2VjdGlvbklkICE9PSBzZWNjaW9uLmlkKSByZXR1cm47XG4gICAgICBzZXRNb2RvTW92ZXJGb25kbyhmYWxzZSk7XG4gICAgICB0cnkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImFjdGl2YXItbW9kby1tb3Zlci1mb25kb1wiLCBvbkFjdGl2YXRlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNhbGlyLW1vZG8tbW92ZXItZm9uZG9cIiwgb25FeGl0KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhY3RpdmFyLW1vZG8tbW92ZXItZm9uZG9cIiwgb25BY3RpdmF0ZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNhbGlyLW1vZG8tbW92ZXItZm9uZG9cIiwgb25FeGl0KTtcbiAgICB9O1xuICB9LCBbc2VjY2lvbi5pZF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFsbG93QmFja2dyb3VuZEVkaXQpIHJldHVybjtcbiAgICBpZiAoIW1vZG9Nb3ZlckZvbmRvKSByZXR1cm47XG4gICAgc2V0TW9kb01vdmVyRm9uZG8oZmFsc2UpO1xuICB9LCBbYWxsb3dCYWNrZ3JvdW5kRWRpdCwgbW9kb01vdmVyRm9uZG9dKTtcblxuICBpZiAoIXNlY2Npb24uZm9uZG9JbWFnZW4gfHwgIWZvbmRvSW1hZ2UpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFJlY3RcbiAgICAgICAgaWQ9e3NlY2Npb24uaWR9XG4gICAgICAgIHg9ezB9XG4gICAgICAgIHk9e29mZnNldFl9XG4gICAgICAgIHdpZHRoPXs4MDB9XG4gICAgICAgIGhlaWdodD17YWx0dXJhUHh9XG4gICAgICAgIGZpbGw9e3NlY2Npb24uZm9uZG8gfHwgXCIjZjBmMGYwXCJ9XG4gICAgICAgIGxpc3RlbmluZz17dHJ1ZX1cbiAgICAgICAgb25DbGljaz17b25TZWxlY3R9XG4gICAgICAgIG9uVGFwPXtvblNlbGVjdH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGNhbnZhc1dpZHRoID0gODAwO1xuICBjb25zdCBjYW52YXNIZWlnaHQgPSBhbHR1cmFQeDtcbiAgY29uc3QgaW1hZ2VXaWR0aCA9IGZvbmRvSW1hZ2Uud2lkdGg7XG4gIGNvbnN0IGltYWdlSGVpZ2h0ID0gZm9uZG9JbWFnZS5oZWlnaHQ7XG5cbiAgY29uc3Qgc2NhbGVYID0gY2FudmFzV2lkdGggLyBpbWFnZVdpZHRoO1xuICBjb25zdCBzY2FsZVkgPSBjYW52YXNIZWlnaHQgLyBpbWFnZUhlaWdodDtcbiAgY29uc3Qgc2NhbGUgPSBNYXRoLm1heChzY2FsZVgsIHNjYWxlWSk7XG5cbiAgY29uc3Qgc2NhbGVkV2lkdGggPSBpbWFnZVdpZHRoICogc2NhbGU7XG4gIGNvbnN0IHNjYWxlZEhlaWdodCA9IGltYWdlSGVpZ2h0ICogc2NhbGU7XG5cbiAgY29uc3Qgb2Zmc2V0WENlbnRyYWRvID0gKGNhbnZhc1dpZHRoIC0gc2NhbGVkV2lkdGgpIC8gMjtcbiAgY29uc3Qgb2Zmc2V0WUNlbnRyYWRvID0gKGNhbnZhc0hlaWdodCAtIHNjYWxlZEhlaWdodCkgLyAyO1xuXG4gIGNvbnN0IG9mZnNldFhGaW5hbCA9IG9mZnNldFhDZW50cmFkbyArIChzZWNjaW9uLmZvbmRvSW1hZ2VuT2Zmc2V0WCB8fCAwKTtcbiAgY29uc3Qgb2Zmc2V0WUZpbmFsID0gb2Zmc2V0WUNlbnRyYWRvICsgKHNlY2Npb24uZm9uZG9JbWFnZW5PZmZzZXRZIHx8IDApO1xuXG4gIHJldHVybiAoXG4gICAgPEdyb3VwPlxuICAgICAgPFJlY3RcbiAgICAgICAgaWQ9e3NlY2Npb24uaWR9XG4gICAgICAgIHg9ezB9XG4gICAgICAgIHk9e29mZnNldFl9XG4gICAgICAgIHdpZHRoPXs4MDB9XG4gICAgICAgIGhlaWdodD17YWx0dXJhUHh9XG4gICAgICAgIGZpbGw9e3NlY2Npb24uZm9uZG8gfHwgXCIjZjBmMGYwXCJ9XG4gICAgICAgIGxpc3RlbmluZz17dHJ1ZX1cbiAgICAgICAgb25DbGljaz17b25TZWxlY3R9XG4gICAgICAgIG9uVGFwPXtvblNlbGVjdH1cbiAgICAgIC8+XG5cbiAgICAgIHttb2RvTW92ZXJGb25kbyAmJiAoXG4gICAgICAgIDxSZWN0XG4gICAgICAgICAgeD17LTIwMH1cbiAgICAgICAgICB5PXtvZmZzZXRZIC0gMjAwfVxuICAgICAgICAgIHdpZHRoPXsxMjAwfVxuICAgICAgICAgIGhlaWdodD17YWx0dXJhUHggKyA0MDB9XG4gICAgICAgICAgZmlsbD1cInJnYmEoMCwwLDAsMC4wNSlcIlxuICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICA8R3JvdXBcbiAgICAgICAgY2xpcFg9e21vZG9Nb3ZlckZvbmRvID8gdW5kZWZpbmVkIDogMH1cbiAgICAgICAgY2xpcFk9e21vZG9Nb3ZlckZvbmRvID8gdW5kZWZpbmVkIDogb2Zmc2V0WX1cbiAgICAgICAgY2xpcFdpZHRoPXttb2RvTW92ZXJGb25kbyA/IHVuZGVmaW5lZCA6IDgwMH1cbiAgICAgICAgY2xpcEhlaWdodD17bW9kb01vdmVyRm9uZG8gPyB1bmRlZmluZWQgOiBhbHR1cmFQeH1cbiAgICAgID5cbiAgICAgICAgPEtvbnZhSW1hZ2VcbiAgICAgICAgICByZWY9e2ltYWdlblJlZn1cbiAgICAgICAgICBpbWFnZT17Zm9uZG9JbWFnZX1cbiAgICAgICAgICB4PXtvZmZzZXRYRmluYWx9XG4gICAgICAgICAgeT17b2Zmc2V0WSArIG9mZnNldFlGaW5hbH1cbiAgICAgICAgICB3aWR0aD17c2NhbGVkV2lkdGh9XG4gICAgICAgICAgaGVpZ2h0PXtzY2FsZWRIZWlnaHR9XG4gICAgICAgICAgZHJhZ2dhYmxlPXthbGxvd0JhY2tncm91bmRFZGl0ICYmIG1vZG9Nb3ZlckZvbmRvfVxuICAgICAgICAgIG9wYWNpdHk9e21vZG9Nb3ZlckZvbmRvID8gMC45IDogMX1cbiAgICAgICAgICBzaGFkb3dDb2xvcj17bW9kb01vdmVyRm9uZG8gPyBcIiM3NzNkYmVcIiA6IFwidHJhbnNwYXJlbnRcIn1cbiAgICAgICAgICBzaGFkb3dCbHVyPXttb2RvTW92ZXJGb25kbyA/IDEwIDogMH1cbiAgICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgIGlmIChtb2RvTW92ZXJGb25kbykge1xuICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uU2VsZWN0Py4oKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uVGFwPXsoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKG1vZG9Nb3ZlckZvbmRvKSB7XG4gICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25TZWxlY3Q/LigpO1xuICAgICAgICAgIH19XG4gICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICBpZiAobW9kb01vdmVyRm9uZG8pIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uRGJsQ2xpY2s9e2FsbG93QmFja2dyb3VuZEVkaXQgPyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgc2V0TW9kb01vdmVyRm9uZG8odHJ1ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwibW92ZVwiO1xuICAgICAgICAgIH0gOiB1bmRlZmluZWR9XG4gICAgICAgICAgb25EYmxUYXA9e2FsbG93QmFja2dyb3VuZEVkaXQgPyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgc2V0TW9kb01vdmVyRm9uZG8odHJ1ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwibW92ZVwiO1xuICAgICAgICAgIH0gOiB1bmRlZmluZWR9XG4gICAgICAgICAgb25EcmFnTW92ZT17KGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGNvbnN0IG51ZXZhWCA9IG5vZGUueCgpO1xuICAgICAgICAgICAgY29uc3QgbnVldmFZID0gbm9kZS55KCkgLSBvZmZzZXRZO1xuICAgICAgICAgICAgY29uc3QgbnVldm9PZmZzZXRYID0gbnVldmFYIC0gb2Zmc2V0WENlbnRyYWRvO1xuICAgICAgICAgICAgY29uc3QgbnVldm9PZmZzZXRZID0gbnVldmFZIC0gb2Zmc2V0WUNlbnRyYWRvO1xuICAgICAgICAgICAgb25VcGRhdGVGb25kb09mZnNldD8uKHNlY2Npb24uaWQsIHsgb2Zmc2V0WDogbnVldm9PZmZzZXRYLCBvZmZzZXRZOiBudWV2b09mZnNldFkgfSwgdHJ1ZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkRyYWdFbmQ9eyhlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBudWV2YVggPSBub2RlLngoKTtcbiAgICAgICAgICAgIGNvbnN0IG51ZXZhWSA9IG5vZGUueSgpIC0gb2Zmc2V0WTtcbiAgICAgICAgICAgIGNvbnN0IG51ZXZvT2Zmc2V0WCA9IG51ZXZhWCAtIG9mZnNldFhDZW50cmFkbztcbiAgICAgICAgICAgIGNvbnN0IG51ZXZvT2Zmc2V0WSA9IG51ZXZhWSAtIG9mZnNldFlDZW50cmFkbztcbiAgICAgICAgICAgIG9uVXBkYXRlRm9uZG9PZmZzZXQ/LihzZWNjaW9uLmlkLCB7IG9mZnNldFg6IG51ZXZvT2Zmc2V0WCwgb2Zmc2V0WTogbnVldm9PZmZzZXRZIH0sIGZhbHNlKTtcblxuICAgICAgICAgICAgc2V0TW9kb01vdmVyRm9uZG8oZmFsc2UpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuXG4gICAgICAgIHthbGxvd0JhY2tncm91bmRFZGl0ICYmIG1vZG9Nb3ZlckZvbmRvICYmIChcbiAgICAgICAgICA8VHJhbnNmb3JtZXJcbiAgICAgICAgICAgIG5vZGVzPXtbaW1hZ2VuUmVmLmN1cnJlbnRdfVxuICAgICAgICAgICAgZW5hYmxlZEFuY2hvcnM9e1tcImJvdHRvbS1yaWdodFwiXX1cbiAgICAgICAgICAgIGJvcmRlclN0cm9rZT1cIiM3NzNkYmVcIlxuICAgICAgICAgICAgYW5jaG9yRmlsbD1cIiM3NzNkYmVcIlxuICAgICAgICAgICAgYW5jaG9yU3Ryb2tlPVwiI2ZmZmZmZlwiXG4gICAgICAgICAgICBhbmNob3JTdHJva2VXaWR0aD17Mn1cbiAgICAgICAgICAgIGFuY2hvclNpemU9ezE0fVxuICAgICAgICAgICAgYW5jaG9yQ29ybmVyUmFkaXVzPXs5OTl9XG4gICAgICAgICAgICBrZWVwUmF0aW89e3RydWV9XG4gICAgICAgICAgICBvblRyYW5zZm9ybT17KCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBub2RlID0gaW1hZ2VuUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICAgICAgICBjb25zdCBzeCA9IG5vZGUuc2NhbGVYKCk7XG4gICAgICAgICAgICAgIGNvbnN0IHN5ID0gbm9kZS5zY2FsZVkoKTtcbiAgICAgICAgICAgICAgbm9kZS53aWR0aChub2RlLndpZHRoKCkgKiBzeCk7XG4gICAgICAgICAgICAgIG5vZGUuaGVpZ2h0KG5vZGUuaGVpZ2h0KCkgKiBzeSk7XG4gICAgICAgICAgICAgIG5vZGUuc2NhbGVYKDEpO1xuICAgICAgICAgICAgICBub2RlLnNjYWxlWSgxKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvblRyYW5zZm9ybUVuZD17KCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBub2RlID0gaW1hZ2VuUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICAgICAgICBjb25zdCBudWV2YVggPSBub2RlLngoKTtcbiAgICAgICAgICAgICAgY29uc3QgbnVldmFZID0gbm9kZS55KCkgLSBvZmZzZXRZO1xuICAgICAgICAgICAgICBjb25zdCBudWV2b09mZnNldFggPSBudWV2YVggLSBvZmZzZXRYQ2VudHJhZG87XG4gICAgICAgICAgICAgIGNvbnN0IG51ZXZvT2Zmc2V0WSA9IG51ZXZhWSAtIG9mZnNldFlDZW50cmFkbztcbiAgICAgICAgICAgICAgb25VcGRhdGVGb25kb09mZnNldD8uKHNlY2Npb24uaWQsIHsgb2Zmc2V0WDogbnVldm9PZmZzZXRYLCBvZmZzZXRZOiBudWV2b09mZnNldFkgfSwgZmFsc2UpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9Hcm91cD5cbiAgICA8L0dyb3VwPlxuICApO1xufVxyXG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJHcm91cCIsIlJlY3QiLCJUcmFuc2Zvcm1lciIsIkltYWdlIiwiS29udmFJbWFnZSIsInVzZUltYWdlIiwiRm9uZG9TZWNjaW9uIiwic2VjY2lvbiIsIm9mZnNldFkiLCJhbHR1cmFQeCIsIm9uU2VsZWN0Iiwib25VcGRhdGVGb25kb09mZnNldCIsImlzTW9iaWxlIiwibW9iaWxlQmFja2dyb3VuZEVkaXRFbmFibGVkIiwiZm9uZG9JbWFnZSIsImZvbmRvSW1hZ2VuIiwibW9kb01vdmVyRm9uZG8iLCJzZXRNb2RvTW92ZXJGb25kbyIsImltYWdlblJlZiIsImFsbG93QmFja2dyb3VuZEVkaXQiLCJoYW5kbGVDbGlja0dsb2JhbCIsImUiLCJzdGFnZSIsImN1cnJlbnQiLCJnZXRTdGFnZSIsImNvbnRhaW5lciIsImNvbnRhaW5zIiwidGFyZ2V0IiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJjdXJzb3IiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbkFjdGl2YXRlIiwiZGV0YWlsIiwic2VjdGlvbklkIiwiaWQiLCJvbkV4aXQiLCJ0YXJnZXRTZWN0aW9uSWQiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbCIsImZvbmRvIiwibGlzdGVuaW5nIiwib25DbGljayIsIm9uVGFwIiwiY2FudmFzV2lkdGgiLCJjYW52YXNIZWlnaHQiLCJpbWFnZVdpZHRoIiwiaW1hZ2VIZWlnaHQiLCJzY2FsZVgiLCJzY2FsZVkiLCJzY2FsZSIsIk1hdGgiLCJtYXgiLCJzY2FsZWRXaWR0aCIsInNjYWxlZEhlaWdodCIsIm9mZnNldFhDZW50cmFkbyIsIm9mZnNldFlDZW50cmFkbyIsIm9mZnNldFhGaW5hbCIsImZvbmRvSW1hZ2VuT2Zmc2V0WCIsIm9mZnNldFlGaW5hbCIsImZvbmRvSW1hZ2VuT2Zmc2V0WSIsImNsaXBYIiwidW5kZWZpbmVkIiwiY2xpcFkiLCJjbGlwV2lkdGgiLCJjbGlwSGVpZ2h0IiwicmVmIiwiaW1hZ2UiLCJkcmFnZ2FibGUiLCJvcGFjaXR5Iiwic2hhZG93Q29sb3IiLCJzaGFkb3dCbHVyIiwiY2FuY2VsQnViYmxlIiwib25Nb3VzZURvd24iLCJvbkRibENsaWNrIiwib25EYmxUYXAiLCJvbkRyYWdNb3ZlIiwibm9kZSIsIm51ZXZhWCIsIm51ZXZhWSIsIm51ZXZvT2Zmc2V0WCIsIm51ZXZvT2Zmc2V0WSIsIm9mZnNldFgiLCJvbkRyYWdFbmQiLCJub2RlcyIsImVuYWJsZWRBbmNob3JzIiwiYm9yZGVyU3Ryb2tlIiwiYW5jaG9yRmlsbCIsImFuY2hvclN0cm9rZSIsImFuY2hvclN0cm9rZVdpZHRoIiwiYW5jaG9yU2l6ZSIsImFuY2hvckNvcm5lclJhZGl1cyIsImtlZXBSYXRpbyIsIm9uVHJhbnNmb3JtIiwic3giLCJzeSIsIm9uVHJhbnNmb3JtRW5kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/FondoSeccion.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/GaleriaKonva.jsx":
/*!************************************************!*\
  !*** ./src/components/editor/GaleriaKonva.jsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GaleriaKonva)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! use-image */ \"use-image\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _utils_calcGrid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/calcGrid */ \"(pages-dir-node)/./src/utils/calcGrid.js\");\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n// src/components/editor/GaleriaKonva.jsx\n//\n// Galería de imágenes como UN solo objeto en Konva.\n// - Calcula su propio offset Y por sección (calcularOffsetY).\n// - Renderiza las celdas en base a calcGalleryLayout.\n// - Permite seleccionar la galería y una celda (onSelect + onPickCell/setCeldaGaleriaActiva).\n// - Arrastre del grupo actualiza sección/posición (determinarNuevaSeccion).\n//\n// Dependencias de frontend: utils/layout (NO usar funciones de functions/).\n// ----------------------------------------------------------------------\n\n\n\n\n\n\n// Imagen dentro de la celda con fit cover/contain (memo no necesario si src cambia poco)\nfunction ImagenCelda({ src, fit = \"cover\", w, h }) {\n    const [img] = use_image__WEBPACK_IMPORTED_MODULE_3___default()(src, \"anonymous\");\n    if (!img) return null;\n    const escContain = Math.min(w / img.width, h / img.height);\n    const escCover = Math.max(w / img.width, h / img.height);\n    const esc = fit === \"contain\" ? escContain : escCover;\n    const iw = img.width * esc;\n    const ih = img.height * esc;\n    const ix = (w - iw) / 2;\n    const iy = (h - ih) / 2;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Image, {\n        image: img,\n        x: ix,\n        y: iy,\n        width: iw,\n        height: ih,\n        listening: false\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n        lineNumber: 33,\n        columnNumber: 5\n    }, this);\n}\nfunction GaleriaKonva({ obj, registerRef, onHover, isSelected, onSelect, onChange, onDragStartPersonalizado, onDragMovePersonalizado, onDragEndPersonalizado, // celda activa / selección de celda\nceldaGaleriaActiva, onPickCell, setCeldaGaleriaActiva, // secciones\nseccionesOrdenadas = [], altoCanvas = 0 }) {\n    const [hoveredCell, setHoveredCell] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // 1) Sección y offset\n    const indexSeccion = seccionesOrdenadas.findIndex((s)=>s.id === obj.seccionId);\n    const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_5__.calcularOffsetY)(seccionesOrdenadas, indexSeccion);\n    // 2) Normalizar números\n    const toNum = (v, d = 0)=>Number.isFinite(+v) ? +v : d;\n    const radius = Math.max(0, toNum(obj.radius, 0));\n    const gap = Math.max(0, toNum(obj.gap, 0));\n    const rows = Math.max(1, toNum(obj.rows, 1));\n    const cols = Math.max(1, toNum(obj.cols, 1));\n    const width = Math.max(1, toNum(obj.width, 400));\n    // 3) Ratio alto/ancho por celda\n    const cellRatio = obj.ratio === \"4:3\" ? 3 / 4 : obj.ratio === \"16:9\" ? 9 / 16 : 1;\n    // 4) Layout de celdas\n    const { rects, totalHeight } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"GaleriaKonva.useMemo\": ()=>{\n            try {\n                return (0,_utils_calcGrid__WEBPACK_IMPORTED_MODULE_4__.calcGalleryLayout)({\n                    width,\n                    rows,\n                    cols,\n                    gap,\n                    cellRatio\n                });\n            } catch  {\n                return {\n                    rects: [],\n                    totalHeight: 0\n                };\n            }\n        }\n    }[\"GaleriaKonva.useMemo\"], [\n        width,\n        rows,\n        cols,\n        gap,\n        cellRatio\n    ]);\n    const safeTotalHeight = Math.max(1, totalHeight);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n        x: toNum(obj.x, 0),\n        y: toNum(obj.y, 0) + offsetY,\n        id: obj.id,\n        clipX: 0,\n        clipY: 0,\n        clipWidth: width,\n        clipHeight: safeTotalHeight,\n        draggable: false,\n        ref: (node)=>registerRef?.(obj.id, node),\n        onMouseEnter: ()=>{\n            if (!window._isDragging) onHover?.(obj.id);\n        },\n        onMouseLeave: ()=>{\n            setHoveredCell(null);\n            onHover?.(null);\n        },\n        onClick: (e)=>{\n            if (e && e.evt) e.evt.cancelBubble = true;\n            onSelect?.(obj.id, e);\n        },\n        onDragStart: (e)=>{\n            if (!isSelected) {\n                e.target.stopDrag(); // 🔒 evita drag si no está seleccionado\n                return;\n            }\n            window._isDragging = true;\n            onDragStartPersonalizado?.(obj.id);\n        },\n        onDragMove: (e)=>{\n            onDragMovePersonalizado?.({\n                x: e.target.x(),\n                y: e.target.y()\n            }, obj.id);\n        },\n        onMouseDown: (e)=>{\n            if (!isSelected) return;\n            const node = e.target.getStage()?.findOne(`#${obj.id}`);\n            if (node) {\n                node.draggable(true); // habilitar\n                node.startDrag(e); // iniciar drag real\n            }\n        },\n        onDragEnd: (e)=>{\n            const finalX = e.target.x();\n            const finalYAbs = e.target.y();\n            const { nuevaSeccion, coordenadasAjustadas } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_5__.determinarNuevaSeccion)(finalYAbs, obj.seccionId, seccionesOrdenadas);\n            if (nuevaSeccion) {\n                onChange?.(obj.id, {\n                    x: finalX,\n                    seccionId: nuevaSeccion,\n                    ...coordenadasAjustadas\n                });\n            } else {\n                const yRel = finalYAbs - offsetY;\n                onChange?.(obj.id, {\n                    x: finalX,\n                    y: yRel\n                });\n            }\n            window._isDragging = false;\n            onDragEndPersonalizado?.(obj.id);\n            e.target.draggable(false);\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                name: \"gallery-transform-frame\",\n                x: 0,\n                y: 0,\n                width: width,\n                height: safeTotalHeight,\n                fill: \"transparent\",\n                strokeEnabled: false,\n                listening: false\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                lineNumber: 157,\n                columnNumber: 7\n            }, this),\n            rects.map((r, i)=>{\n                const cell = obj.cells?.[i] || {};\n                const bg = cell.bg || \"#f3f4f6\";\n                const mediaUrl = cell.mediaUrl || null;\n                const fit = cell.fit || \"cover\";\n                const esActiva = celdaGaleriaActiva?.objId === obj.id && celdaGaleriaActiva?.index === i;\n                const clipFunc = (ctx)=>{\n                    const w = r.width;\n                    const h = r.height;\n                    const rad = Math.min(radius, Math.min(w, h) / 2);\n                    ctx.beginPath();\n                    ctx.moveTo(rad, 0);\n                    ctx.lineTo(w - rad, 0);\n                    ctx.quadraticCurveTo(w, 0, w, rad);\n                    ctx.lineTo(w, h - rad);\n                    ctx.quadraticCurveTo(w, h, w - rad, h);\n                    ctx.lineTo(rad, h);\n                    ctx.quadraticCurveTo(0, h, 0, h - rad);\n                    ctx.lineTo(0, rad);\n                    ctx.quadraticCurveTo(0, 0, rad, 0);\n                    ctx.closePath();\n                };\n                return(// Reemplazá el retorno de cada celda dentro del map(rects) por esta estructura:\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                        x: r.x,\n                        y: r.y,\n                        // hover unificado\n                        onMouseEnter: ()=>setHoveredCell(i),\n                        onMouseLeave: ()=>setHoveredCell(null),\n                        // click en el wrapper: si cae en la celda, selecciona\n                        onMouseDown: (e)=>{\n                            // Evitamos que un click en la X (hijo) “pase” a la celda\n                            if (e.target?.id?.() === `btn-${obj.id}-${i}`) return;\n                            onPickCell?.({\n                                objId: obj.id,\n                                index: i\n                            });\n                            setCeldaGaleriaActiva?.({\n                                objId: obj.id,\n                                index: i\n                            });\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                x: 0,\n                                y: 0,\n                                width: r.width,\n                                height: r.height,\n                                fill: \"transparent\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                lineNumber: 215,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                                clipFunc: clipFunc,\n                                listening: true,\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                        x: 0,\n                                        y: 0,\n                                        width: r.width,\n                                        height: r.height,\n                                        fill: bg\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                        lineNumber: 219,\n                                        columnNumber: 7\n                                    }, this),\n                                    mediaUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ImagenCelda, {\n                                        src: mediaUrl,\n                                        fit: fit,\n                                        w: r.width,\n                                        h: r.height\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                        lineNumber: 221,\n                                        columnNumber: 9\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                        x: 0,\n                                        y: 0,\n                                        width: r.width,\n                                        height: r.height,\n                                        cornerRadius: radius || 0,\n                                        stroke: esActiva ? \"#773dbe\" : \"#ddd\",\n                                        strokeWidth: esActiva ? 2 : 1,\n                                        dash: esActiva ? [\n                                            6,\n                                            4\n                                        ] : [],\n                                        listening: false\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                        lineNumber: 223,\n                                        columnNumber: 7\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                lineNumber: 218,\n                                columnNumber: 5\n                            }, this),\n                            mediaUrl && hoveredCell === i && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                                id: `btn-${obj.id}-${i}`,\n                                x: r.width - 20,\n                                y: 0,\n                                width: 20,\n                                height: 20,\n                                listening: true,\n                                // mantener hover mientras esté sobre la X\n                                onMouseEnter: ()=>setHoveredCell(i),\n                                onMouseDown: (e)=>{\n                                    e.cancelBubble = true; // no seleccionar la celda\n                                    const nuevasCells = [\n                                        ...obj.cells || []\n                                    ];\n                                    nuevasCells[i] = {\n                                        ...nuevasCells[i],\n                                        mediaUrl: null\n                                    };\n                                    onChange?.(obj.id, {\n                                        cells: nuevasCells\n                                    });\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                        width: 20,\n                                        height: 20,\n                                        fill: \"rgba(0,0,0,0.6)\",\n                                        cornerRadius: 4\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                        lineNumber: 254,\n                                        columnNumber: 9\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                        text: \"\\xd7\",\n                                        fontSize: 16,\n                                        fill: \"#fff\",\n                                        align: \"center\",\n                                        verticalAlign: \"middle\",\n                                        width: 20,\n                                        height: 20,\n                                        listening: false\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                        lineNumber: 255,\n                                        columnNumber: 9\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                lineNumber: 238,\n                                columnNumber: 7\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                        lineNumber: 200,\n                        columnNumber: 3\n                    }, this)\n                }, `${obj.id}-${i}`, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                    lineNumber: 198,\n                    columnNumber: 1\n                }, this));\n            })\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n        lineNumber: 95,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9HYWxlcmlhS29udmEuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEseUNBQXlDO0FBQ3pDLEVBQUU7QUFDRixvREFBb0Q7QUFDcEQsOERBQThEO0FBQzlELHNEQUFzRDtBQUN0RCw4RkFBOEY7QUFDOUYsNEVBQTRFO0FBQzVFLEVBQUU7QUFDRiw0RUFBNEU7QUFDNUUseUVBQXlFOztBQUV4QjtBQUNpQztBQUNqRDtBQUNvQjtBQUNvQjtBQUV6RSx5RkFBeUY7QUFDekYsU0FBU2EsWUFBWSxFQUFFQyxHQUFHLEVBQUVDLE1BQU0sT0FBTyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRTtJQUMvQyxNQUFNLENBQUNDLElBQUksR0FBR1QsZ0RBQVFBLENBQUNLLEtBQUs7SUFDNUIsSUFBSSxDQUFDSSxLQUFLLE9BQU87SUFFakIsTUFBTUMsYUFBYUMsS0FBS0MsR0FBRyxDQUFDTCxJQUFJRSxJQUFJSSxLQUFLLEVBQUVMLElBQUlDLElBQUlLLE1BQU07SUFDekQsTUFBTUMsV0FBV0osS0FBS0ssR0FBRyxDQUFDVCxJQUFJRSxJQUFJSSxLQUFLLEVBQUVMLElBQUlDLElBQUlLLE1BQU07SUFDdkQsTUFBTUcsTUFBTVgsUUFBUSxZQUFZSSxhQUFhSztJQUU3QyxNQUFNRyxLQUFLVCxJQUFJSSxLQUFLLEdBQUdJO0lBQ3ZCLE1BQU1FLEtBQUtWLElBQUlLLE1BQU0sR0FBR0c7SUFDeEIsTUFBTUcsS0FBSyxDQUFDYixJQUFJVyxFQUFDLElBQUs7SUFDdEIsTUFBTUcsS0FBSyxDQUFDYixJQUFJVyxFQUFDLElBQUs7SUFFdEIscUJBQ0UsOERBQUN0Qiw4Q0FBVUE7UUFDVHlCLE9BQU9iO1FBQ1BjLEdBQUdIO1FBQ0hJLEdBQUdIO1FBQ0hSLE9BQU9LO1FBQ1BKLFFBQVFLO1FBQ1JNLFdBQVc7Ozs7OztBQUdqQjtBQUVlLFNBQVNDLGFBQWEsRUFDbkNDLEdBQUcsRUFDSEMsV0FBVyxF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Q0FDUlcsV0FBVzs7Ozs7Ozs7Ozs7Ozs7Ozs7O21CQWpFQSxHQUFHRSxJQUFJbUIsRUFBRSxDQUFDLENBQUMsRUFBRW1ELEdBQUc7Ozs7O1lBeUUvQjs7Ozs7OztBQUdOIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcR2FsZXJpYUtvbnZhLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3IvR2FsZXJpYUtvbnZhLmpzeFxyXG4vL1xyXG4vLyBHYWxlcsOtYSBkZSBpbcOhZ2VuZXMgY29tbyBVTiBzb2xvIG9iamV0byBlbiBLb252YS5cclxuLy8gLSBDYWxjdWxhIHN1IHByb3BpbyBvZmZzZXQgWSBwb3Igc2VjY2nDs24gKGNhbGN1bGFyT2Zmc2V0WSkuXHJcbi8vIC0gUmVuZGVyaXphIGxhcyBjZWxkYXMgZW4gYmFzZSBhIGNhbGNHYWxsZXJ5TGF5b3V0LlxyXG4vLyAtIFBlcm1pdGUgc2VsZWNjaW9uYXIgbGEgZ2FsZXLDrWEgeSB1bmEgY2VsZGEgKG9uU2VsZWN0ICsgb25QaWNrQ2VsbC9zZXRDZWxkYUdhbGVyaWFBY3RpdmEpLlxyXG4vLyAtIEFycmFzdHJlIGRlbCBncnVwbyBhY3R1YWxpemEgc2VjY2nDs24vcG9zaWNpw7NuIChkZXRlcm1pbmFyTnVldmFTZWNjaW9uKS5cclxuLy9cclxuLy8gRGVwZW5kZW5jaWFzIGRlIGZyb250ZW5kOiB1dGlscy9sYXlvdXQgKE5PIHVzYXIgZnVuY2lvbmVzIGRlIGZ1bmN0aW9ucy8pLlxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgR3JvdXAsIFJlY3QsIEltYWdlIGFzIEtvbnZhSW1hZ2UsIFRleHQgYXMgS29udmFUZXh0IH0gZnJvbSBcInJlYWN0LWtvbnZhXCI7XHJcbmltcG9ydCB1c2VJbWFnZSBmcm9tIFwidXNlLWltYWdlXCI7XHJcbmltcG9ydCB7IGNhbGNHYWxsZXJ5TGF5b3V0IH0gZnJvbSBcIkAvdXRpbHMvY2FsY0dyaWRcIjtcclxuaW1wb3J0IHsgY2FsY3VsYXJPZmZzZXRZLCBkZXRlcm1pbmFyTnVldmFTZWNjaW9uIH0gZnJvbSBcIkAvdXRpbHMvbGF5b3V0XCI7XHJcblxyXG4vLyBJbWFnZW4gZGVudHJvIGRlIGxhIGNlbGRhIGNvbiBmaXQgY292ZXIvY29udGFpbiAobWVtbyBubyBuZWNlc2FyaW8gc2kgc3JjIGNhbWJpYSBwb2NvKVxyXG5mdW5jdGlvbiBJbWFnZW5DZWxkYSh7IHNyYywgZml0ID0gXCJjb3ZlclwiLCB3LCBoIH0pIHtcclxuICBjb25zdCBbaW1nXSA9IHVzZUltYWdlKHNyYywgXCJhbm9ueW1vdXNcIik7XHJcbiAgaWYgKCFpbWcpIHJldHVybiBudWxsO1xyXG5cclxuICBjb25zdCBlc2NDb250YWluID0gTWF0aC5taW4odyAvIGltZy53aWR0aCwgaCAvIGltZy5oZWlnaHQpO1xyXG4gIGNvbnN0IGVzY0NvdmVyID0gTWF0aC5tYXgodyAvIGltZy53aWR0aCwgaCAvIGltZy5oZWlnaHQpO1xyXG4gIGNvbnN0IGVzYyA9IGZpdCA9PT0gXCJjb250YWluXCIgPyBlc2NDb250YWluIDogZXNjQ292ZXI7XHJcblxyXG4gIGNvbnN0IGl3ID0gaW1nLndpZHRoICogZXNjO1xyXG4gIGNvbnN0IGloID0gaW1nLmhlaWdodCAqIGVzYztcclxuICBjb25zdCBpeCA9ICh3IC0gaXcpIC8gMjtcclxuICBjb25zdCBpeSA9IChoIC0gaWgpIC8gMjtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxLb252YUltYWdlXHJcbiAgICAgIGltYWdlPXtpbWd9XHJcbiAgICAgIHg9e2l4fVxyXG4gICAgICB5PXtpeX1cclxuICAgICAgd2lkdGg9e2l3fVxyXG4gICAgICBoZWlnaHQ9e2lofVxyXG4gICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgLz5cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHYWxlcmlhS29udmEoe1xuICBvYmosXG4gIHJlZ2lzdGVyUmVmLFxuICBvbkhvdmVyLFxuICBpc1NlbGVjdGVkLCAvLyAoaG95IG5vIGxvIHVzYW1vcywgcGVybyBsbyBkZWphbW9zIHBvciBjb21wYXRpYmlsaWRhZClcbiAgb25TZWxlY3QsXG4gIG9uQ2hhbmdlLFxuICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8sXHJcbiAgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8sXHJcbiAgb25EcmFnRW5kUGVyc29uYWxpemFkbyxcclxuICAvLyBjZWxkYSBhY3RpdmEgLyBzZWxlY2Npw7NuIGRlIGNlbGRhXHJcbiAgY2VsZGFHYWxlcmlhQWN0aXZhLFxyXG4gIG9uUGlja0NlbGwsICAgICAgICAgICAgICAvLyBwcmVmZXJpZG9cclxuICBzZXRDZWxkYUdhbGVyaWFBY3RpdmEsICAgLy8gZmFsbGJhY2tcclxuICAvLyBzZWNjaW9uZXNcclxuICBzZWNjaW9uZXNPcmRlbmFkYXMgPSBbXSxcclxuICBhbHRvQ2FudmFzID0gMCxcclxufSkge1xyXG4gIGNvbnN0IFtob3ZlcmVkQ2VsbCwgc2V0SG92ZXJlZENlbGxdID0gdXNlU3RhdGUobnVsbCk7XHJcblxyXG4gIC8vIDEpIFNlY2Npw7NuIHkgb2Zmc2V0XHJcbiAgY29uc3QgaW5kZXhTZWNjaW9uID0gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmRJbmRleCgocykgPT4gcy5pZCA9PT0gb2JqLnNlY2Npb25JZCk7XHJcbiAgY29uc3Qgb2Zmc2V0WSA9IGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXNPcmRlbmFkYXMsIGluZGV4U2VjY2lvbik7XHJcblxyXG5cclxuICAvLyAyKSBOb3JtYWxpemFyIG7Dum1lcm9zXHJcbiAgY29uc3QgdG9OdW0gPSAodiwgZCA9IDApID0+IChOdW1iZXIuaXNGaW5pdGUoK3YpID8gK3YgOiBkKTtcclxuICBjb25zdCByYWRpdXMgPSBNYXRoLm1heCgwLCB0b051bShvYmoucmFkaXVzLCAwKSk7XHJcbiAgY29uc3QgZ2FwID0gTWF0aC5tYXgoMCwgdG9OdW0ob2JqLmdhcCwgMCkpO1xyXG4gIGNvbnN0IHJvd3MgPSBNYXRoLm1heCgxLCB0b051bShvYmoucm93cywgMSkpO1xyXG4gIGNvbnN0IGNvbHMgPSBNYXRoLm1heCgxLCB0b051bShvYmouY29scywgMSkpO1xyXG4gIGNvbnN0IHdpZHRoID0gTWF0aC5tYXgoMSwgdG9OdW0ob2JqLndpZHRoLCA0MDApKTtcclxuXHJcbiAgLy8gMykgUmF0aW8gYWx0by9hbmNobyBwb3IgY2VsZGFcclxuICBjb25zdCBjZWxsUmF0aW8gPVxyXG4gICAgb2JqLnJhdGlvID09PSBcIjQ6M1wiID8gMyAvIDQgOlxyXG4gICAgICBvYmoucmF0aW8gPT09IFwiMTY6OVwiID8gOSAvIDE2IDpcclxuICAgICAgICAxO1xyXG5cclxuICAvLyA0KSBMYXlvdXQgZGUgY2VsZGFzXHJcbiAgY29uc3QgeyByZWN0cywgdG90YWxIZWlnaHQgfSA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGNhbGNHYWxsZXJ5TGF5b3V0KHsgd2lkdGgsIHJvd3MsIGNvbHMsIGdhcCwgY2VsbFJhdGlvIH0pO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIHJldHVybiB7IHJlY3RzOiBbXSwgdG90YWxIZWlnaHQ6IDAgfTtcclxuICAgIH1cclxuICB9LCBbd2lkdGgsIHJvd3MsIGNvbHMsIGdhcCwgY2VsbFJhdGlvXSk7XHJcblxyXG4gIGNvbnN0IHNhZmVUb3RhbEhlaWdodCA9IE1hdGgubWF4KDEsIHRvdGFsSGVpZ2h0KTtcclxuXHJcbiAgcmV0dXJuIChcbiAgICA8R3JvdXBcbiAgICAgIHg9e3RvTnVtKG9iai54LCAwKX1cbiAgICAgIHk9e3RvTnVtKG9iai55LCAwKSArIG9mZnNldFl9XG4gICAgICBpZD17b2JqLmlkfVxuICAgICAgY2xpcFg9ezB9XG4gICAgICBjbGlwWT17MH1cbiAgICAgIGNsaXBXaWR0aD17d2lkdGh9XG4gICAgICBjbGlwSGVpZ2h0PXtzYWZlVG90YWxIZWlnaHR9XG4gICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxuICAgICAgcmVmPXsobm9kZSkgPT4gcmVnaXN0ZXJSZWY/LihvYmouaWQsIG5vZGUpfVxuICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiB7XG4gICAgICAgIGlmICghd2luZG93Ll9pc0RyYWdnaW5nKSBvbkhvdmVyPy4ob2JqLmlkKTtcbiAgICAgIH19XG4gICAgICBvbk1vdXNlTGVhdmU9eygpID0+IHtcbiAgICAgICAgc2V0SG92ZXJlZENlbGwobnVsbCk7XG4gICAgICAgIG9uSG92ZXI/LihudWxsKTtcbiAgICAgIH19XG4gICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICBpZiAoZSAmJiBlLmV2dCkgZS5ldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgb25TZWxlY3Q/LihvYmouaWQsIGUpO1xuICAgICAgfX1cclxuICAgICAgb25EcmFnU3RhcnQ9eyhlKSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICBlLnRhcmdldC5zdG9wRHJhZygpOyAvLyDwn5SSIGV2aXRhIGRyYWcgc2kgbm8gZXN0w6Egc2VsZWNjaW9uYWRvXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbmRvdy5faXNEcmFnZ2luZyA9IHRydWU7XHJcbiAgICAgICAgb25EcmFnU3RhcnRQZXJzb25hbGl6YWRvPy4ob2JqLmlkKTtcclxuICAgICAgfX1cclxuICAgICAgb25EcmFnTW92ZT17KGUpID0+IHtcclxuICAgICAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbz8uKHsgeDogZS50YXJnZXQueCgpLCB5OiBlLnRhcmdldC55KCkgfSwgb2JqLmlkKTtcclxuICAgICAgfX1cclxuICAgICAgb25Nb3VzZURvd249eyhlKSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc1NlbGVjdGVkKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IGUudGFyZ2V0LmdldFN0YWdlKCk/LmZpbmRPbmUoYCMke29iai5pZH1gKTtcclxuICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgbm9kZS5kcmFnZ2FibGUodHJ1ZSk7ICAgLy8gaGFiaWxpdGFyXHJcbiAgICAgICAgICBub2RlLnN0YXJ0RHJhZyhlKTsgICAgICAvLyBpbmljaWFyIGRyYWcgcmVhbFxyXG4gICAgICAgIH1cclxuICAgICAgfX1cclxuICAgICAgb25EcmFnRW5kPXsoZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZpbmFsWCA9IGUudGFyZ2V0LngoKTtcclxuICAgICAgICBjb25zdCBmaW5hbFlBYnMgPSBlLnRhcmdldC55KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgbnVldmFTZWNjaW9uLCBjb29yZGVuYWRhc0FqdXN0YWRhcyB9ID0gZGV0ZXJtaW5hck51ZXZhU2VjY2lvbihcclxuICAgICAgICAgIGZpbmFsWUFicyxcclxuICAgICAgICAgIG9iai5zZWNjaW9uSWQsXHJcbiAgICAgICAgICBzZWNjaW9uZXNPcmRlbmFkYXNcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAobnVldmFTZWNjaW9uKSB7XHJcbiAgICAgICAgICBvbkNoYW5nZT8uKG9iai5pZCwgeyB4OiBmaW5hbFgsIHNlY2Npb25JZDogbnVldmFTZWNjaW9uLCAuLi5jb29yZGVuYWRhc0FqdXN0YWRhcyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgeVJlbCA9IGZpbmFsWUFicyAtIG9mZnNldFk7XHJcbiAgICAgICAgICBvbkNoYW5nZT8uKG9iai5pZCwgeyB4OiBmaW5hbFgsIHk6IHlSZWwgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgICBvbkRyYWdFbmRQZXJzb25hbGl6YWRvPy4ob2JqLmlkKTtcclxuICAgICAgICBlLnRhcmdldC5kcmFnZ2FibGUoZmFsc2UpO1xyXG4gICAgICB9fVxyXG4gICAgPlxuICAgICAgPFJlY3RcbiAgICAgICAgbmFtZT1cImdhbGxlcnktdHJhbnNmb3JtLWZyYW1lXCJcbiAgICAgICAgeD17MH1cbiAgICAgICAgeT17MH1cbiAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICBoZWlnaHQ9e3NhZmVUb3RhbEhlaWdodH1cbiAgICAgICAgZmlsbD1cInRyYW5zcGFyZW50XCJcbiAgICAgICAgc3Ryb2tlRW5hYmxlZD17ZmFsc2V9XG4gICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XG4gICAgICAvPlxuXG4gICAgICB7cmVjdHMubWFwKChyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBvYmouY2VsbHM/LltpXSB8fCB7fTtcclxuICAgICAgICBjb25zdCBiZyA9IGNlbGwuYmcgfHwgXCIjZjNmNGY2XCI7XHJcbiAgICAgICAgY29uc3QgbWVkaWFVcmwgPSBjZWxsLm1lZGlhVXJsIHx8IG51bGw7XHJcbiAgICAgICAgY29uc3QgZml0ID0gY2VsbC5maXQgfHwgXCJjb3ZlclwiO1xyXG5cclxuICAgICAgICBjb25zdCBlc0FjdGl2YSA9XHJcbiAgICAgICAgICBjZWxkYUdhbGVyaWFBY3RpdmE/Lm9iaklkID09PSBvYmouaWQgJiZcclxuICAgICAgICAgIGNlbGRhR2FsZXJpYUFjdGl2YT8uaW5kZXggPT09IGk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsaXBGdW5jID0gKGN0eCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgdyA9IHIud2lkdGg7XHJcbiAgICAgICAgICBjb25zdCBoID0gci5oZWlnaHQ7XHJcbiAgICAgICAgICBjb25zdCByYWQgPSBNYXRoLm1pbihyYWRpdXMsIE1hdGgubWluKHcsIGgpIC8gMik7XHJcbiAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICBjdHgubW92ZVRvKHJhZCwgMCk7XHJcbiAgICAgICAgICBjdHgubGluZVRvKHcgLSByYWQsIDApO1xyXG4gICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8odywgMCwgdywgcmFkKTtcclxuICAgICAgICAgIGN0eC5saW5lVG8odywgaCAtIHJhZCk7XHJcbiAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh3LCBoLCB3IC0gcmFkLCBoKTtcclxuICAgICAgICAgIGN0eC5saW5lVG8ocmFkLCBoKTtcclxuICAgICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKDAsIGgsIDAsIGggLSByYWQpO1xyXG4gICAgICAgICAgY3R4LmxpbmVUbygwLCByYWQpO1xyXG4gICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oMCwgMCwgcmFkLCAwKTtcclxuICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgLy8gUmVlbXBsYXrDoSBlbCByZXRvcm5vIGRlIGNhZGEgY2VsZGEgZGVudHJvIGRlbCBtYXAocmVjdHMpIHBvciBlc3RhIGVzdHJ1Y3R1cmE6XHJcblxyXG48UmVhY3QuRnJhZ21lbnQga2V5PXtgJHtvYmouaWR9LSR7aX1gfT5cclxuICB7Lyog8J+UsiBXUkFQUEVSOiBtYW5lamEgaG92ZXIgZGUgY2VsZGEgKyBib3TDs24gWCBjb21vIHVuYSBzb2xhIHpvbmEgKi99XHJcbiAgPEdyb3VwXHJcbiAgICB4PXtyLnh9XHJcbiAgICB5PXtyLnl9XHJcbiAgICAvLyBob3ZlciB1bmlmaWNhZG9cclxuICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0SG92ZXJlZENlbGwoaSl9XHJcbiAgICBvbk1vdXNlTGVhdmU9eygpID0+IHNldEhvdmVyZWRDZWxsKG51bGwpfVxyXG4gICAgLy8gY2xpY2sgZW4gZWwgd3JhcHBlcjogc2kgY2FlIGVuIGxhIGNlbGRhLCBzZWxlY2Npb25hXHJcbiAgICBvbk1vdXNlRG93bj17KGUpID0+IHtcclxuICAgICAgLy8gRXZpdGFtb3MgcXVlIHVuIGNsaWNrIGVuIGxhIFggKGhpam8pIOKAnHBhc2XigJ0gYSBsYSBjZWxkYVxyXG4gICAgICBpZiAoZS50YXJnZXQ/LmlkPy4oKSA9PT0gYGJ0bi0ke29iai5pZH0tJHtpfWApIHJldHVybjtcclxuICAgICAgb25QaWNrQ2VsbD8uKHsgb2JqSWQ6IG9iai5pZCwgaW5kZXg6IGkgfSk7XHJcbiAgICAgIHNldENlbGRhR2FsZXJpYUFjdGl2YT8uKHsgb2JqSWQ6IG9iai5pZCwgaW5kZXg6IGkgfSk7XHJcbiAgICB9fVxyXG4gID5cclxuICAgIHsvKiBCYXNlIGRlIGhpdCBwYXJhIHF1ZSBlbCB3cmFwcGVyIHRlbmdhIMOhcmVhIOKAnGNsaWNrZWFibGUvaG92ZXJlYWJsZeKAnSAqL31cclxuICAgIDxSZWN0IHg9ezB9IHk9ezB9IHdpZHRoPXtyLndpZHRofSBoZWlnaHQ9e3IuaGVpZ2h0fSBmaWxsPVwidHJhbnNwYXJlbnRcIiAvPlxyXG5cclxuICAgIHsvKiDwn5a877iPIENFTERBIGNvbiBjbGlwICovfVxyXG4gICAgPEdyb3VwIGNsaXBGdW5jPXtjbGlwRnVuY30gbGlzdGVuaW5nPXt0cnVlfT5cclxuICAgICAgPFJlY3QgeD17MH0geT17MH0gd2lkdGg9e3Iud2lkdGh9IGhlaWdodD17ci5oZWlnaHR9IGZpbGw9e2JnfSAvPlxyXG4gICAgICB7bWVkaWFVcmwgJiYgKFxyXG4gICAgICAgIDxJbWFnZW5DZWxkYSBzcmM9e21lZGlhVXJsfSBmaXQ9e2ZpdH0gdz17ci53aWR0aH0gaD17ci5oZWlnaHR9IC8+XHJcbiAgICAgICl9XHJcbiAgICAgIDxSZWN0XHJcbiAgICAgICAgeD17MH1cclxuICAgICAgICB5PXswfVxyXG4gICAgICAgIHdpZHRoPXtyLndpZHRofVxyXG4gICAgICAgIGhlaWdodD17ci5oZWlnaHR9XHJcbiAgICAgICAgY29ybmVyUmFkaXVzPXtyYWRpdXMgfHwgMH1cclxuICAgICAgICBzdHJva2U9e2VzQWN0aXZhID8gXCIjNzczZGJlXCIgOiBcIiNkZGRcIn1cclxuICAgICAgICBzdHJva2VXaWR0aD17ZXNBY3RpdmEgPyAyIDogMX1cclxuICAgICAgICBkYXNoPXtlc0FjdGl2YSA/IFs2LCA0XSA6IFtdfVxyXG4gICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgIC8+XHJcbiAgICA8L0dyb3VwPlxyXG5cclxuICAgIHsvKiDinYwgQm90w7NuIGJvcnJhciAoZnVlcmEgZGVsIGNsaXAgcGVybyBkZW50cm8gZGVsIG1pc21vIHdyYXBwZXIpICovfVxyXG4gICAge21lZGlhVXJsICYmIGhvdmVyZWRDZWxsID09PSBpICYmIChcclxuICAgICAgPEdyb3VwXHJcbiAgICAgICAgaWQ9e2BidG4tJHtvYmouaWR9LSR7aX1gfVxyXG4gICAgICAgIHg9e3Iud2lkdGggLSAyMH1cclxuICAgICAgICB5PXswfVxyXG4gICAgICAgIHdpZHRoPXsyMH1cclxuICAgICAgICBoZWlnaHQ9ezIwfVxyXG4gICAgICAgIGxpc3RlbmluZz17dHJ1ZX1cclxuICAgICAgICAvLyBtYW50ZW5lciBob3ZlciBtaWVudHJhcyBlc3TDqSBzb2JyZSBsYSBYXHJcbiAgICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiBzZXRIb3ZlcmVkQ2VsbChpKX1cclxuICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IHtcclxuICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgLy8gbm8gc2VsZWNjaW9uYXIgbGEgY2VsZGFcclxuICAgICAgICAgIGNvbnN0IG51ZXZhc0NlbGxzID0gWy4uLihvYmouY2VsbHMgfHwgW10pXTtcclxuICAgICAgICAgIG51ZXZhc0NlbGxzW2ldID0geyAuLi5udWV2YXNDZWxsc1tpXSwgbWVkaWFVcmw6IG51bGwgfTtcclxuICAgICAgICAgIG9uQ2hhbmdlPy4ob2JqLmlkLCB7IGNlbGxzOiBudWV2YXNDZWxscyB9KTtcclxuICAgICAgICB9fVxyXG4gICAgICA+XHJcbiAgICAgICAgPFJlY3Qgd2lkdGg9ezIwfSBoZWlnaHQ9ezIwfSBmaWxsPVwicmdiYSgwLDAsMCwwLjYpXCIgY29ybmVyUmFkaXVzPXs0fSAvPlxyXG4gICAgICAgIDxLb252YVRleHRcclxuICAgICAgICAgIHRleHQ9XCLDl1wiXHJcbiAgICAgICAgICBmb250U2l6ZT17MTZ9XHJcbiAgICAgICAgICBmaWxsPVwiI2ZmZlwiXHJcbiAgICAgICAgICBhbGlnbj1cImNlbnRlclwiXHJcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduPVwibWlkZGxlXCJcclxuICAgICAgICAgIHdpZHRoPXsyMH1cclxuICAgICAgICAgIGhlaWdodD17MjB9XHJcbiAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvR3JvdXA+XHJcbiAgICApfVxyXG4gIDwvR3JvdXA+XHJcbjwvUmVhY3QuRnJhZ21lbnQ+XHJcblxyXG4gICAgICAgICk7XHJcbiAgICAgIH0pfVxyXG4gICAgPC9Hcm91cD5cclxuICApO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZU1lbW8iLCJ1c2VTdGF0ZSIsIkdyb3VwIiwiUmVjdCIsIkltYWdlIiwiS29udmFJbWFnZSIsIlRleHQiLCJLb252YVRleHQiLCJ1c2VJbWFnZSIsImNhbGNHYWxsZXJ5TGF5b3V0IiwiY2FsY3VsYXJPZmZzZXRZIiwiZGV0ZXJtaW5hck51ZXZhU2VjY2lvbiIsIkltYWdlbkNlbGRhIiwic3JjIiwiZml0IiwidyIsImgiLCJpbWciLCJlc2NDb250YWluIiwiTWF0aCIsIm1pbiIsIndpZHRoIiwiaGVpZ2h0IiwiZXNjQ292ZXIiLCJtYXgiLCJlc2MiLCJpdyIsImloIiwiaXgiLCJpeSIsImltYWdlIiwieCIsInkiLCJsaXN0ZW5pbmciLCJHYWxlcmlhS29udmEiLCJvYmoiLCJyZWdpc3RlclJlZiIsIm9uSG92ZXIiLCJpc1NlbGVjdGVkIiwib25TZWxlY3QiLCJvbkNoYW5nZSIsIm9uRHJhZ1N0YXJ0UGVyc29uYWxpemFkbyIsIm9uRHJhZ01vdmVQZXJzb25hbGl6YWRvIiwib25EcmFnRW5kUGVyc29uYWxpemFkbyIsImNlbGRhR2FsZXJpYUFjdGl2YSIsIm9uUGlja0NlbGwiLCJzZXRDZWxkYUdhbGVyaWFBY3RpdmEiLCJzZWNjaW9uZXNPcmRlbmFkYXMiLCJhbHRvQ2FudmFzIiwiaG92ZXJlZENlbGwiLCJzZXRIb3ZlcmVkQ2VsbCIsImluZGV4U2VjY2lvbiIsImZpbmRJbmRleCIsInMiLCJpZCIsInNlY2Npb25JZCIsIm9mZnNldFkiLCJ0b051bSIsInYiLCJkIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJyYWRpdXMiLCJnYXAiLCJyb3dzIiwiY29scyIsImNlbGxSYXRpbyIsInJhdGlvIiwicmVjdHMiLCJ0b3RhbEhlaWdodCIsInNhZmVUb3RhbEhlaWdodCIsImNsaXBYIiwiY2xpcFkiLCJjbGlwV2lkdGgiLCJjbGlwSGVpZ2h0IiwiZHJhZ2dhYmxlIiwicmVmIiwibm9kZSIsIm9uTW91c2VFbnRlciIsIndpbmRvdyIsIl9pc0RyYWdnaW5nIiwib25Nb3VzZUxlYXZlIiwib25DbGljayIsImUiLCJldnQiLCJjYW5jZWxCdWJibGUiLCJvbkRyYWdTdGFydCIsInRhcmdldCIsInN0b3BEcmFnIiwib25EcmFnTW92ZSIsIm9uTW91c2VEb3duIiwiZ2V0U3RhZ2UiLCJmaW5kT25lIiwic3RhcnREcmFnIiwib25EcmFnRW5kIiwiZmluYWxYIiwiZmluYWxZQWJzIiwibnVldmFTZWNjaW9uIiwiY29vcmRlbmFkYXNBanVzdGFkYXMiLCJ5UmVsIiwibmFtZSIsImZpbGwiLCJzdHJva2VFbmFibGVkIiwibWFwIiwiciIsImkiLCJjZWxsIiwiY2VsbHMiLCJiZyIsIm1lZGlhVXJsIiwiZXNBY3RpdmEiLCJvYmpJZCIsImluZGV4IiwiY2xpcEZ1bmMiLCJjdHgiLCJyYWQiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJxdWFkcmF0aWNDdXJ2ZVRvIiwiY2xvc2VQYXRoIiwiRnJhZ21lbnQiLCJjb3JuZXJSYWRpdXMiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsImRhc2giLCJudWV2YXNDZWxscyIsInRleHQiLCJmb250U2l6ZSIsImFsaWduIiwidmVydGljYWxBbGlnbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/GaleriaKonva.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/countdown/CountdownKonva.jsx":
/*!************************************************************!*\
  !*** ./src/components/editor/countdown/CountdownKonva.jsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CountdownKonva)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _countdownUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./countdownUtils */ \"(pages-dir-node)/./src/components/editor/countdown/countdownUtils.js\");\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n/* harmony import */ var _drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/drag/dragGrupal */ \"(pages-dir-node)/./src/drag/dragGrupal.js\");\n/* harmony import */ var _drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/drag/dragIndividual */ \"(pages-dir-node)/./src/drag/dragIndividual.js\");\n// src/components/editor/countdown/CountdownKonva.jsx\n\n\n\n\n\n\n\n/**\r\n * ✅ Comportamiento correcto:\r\n * - Click simple: SOLO selecciona (0 movimiento)\r\n * - Drag: SOLO si mantiene apretado + mueve más de THRESHOLD_PX\r\n *\r\n * ✅ Implementación pro:\r\n * - El nodo está draggable=false siempre.\r\n * - En mousedown/touchstart: empezamos un \"press\".\r\n * - En mousemove/touchmove global: si supera umbral => habilitamos draggable y llamamos startDrag()\r\n * - En mouseup/touchend global: si no llegó a umbral => no hubo drag; si hubo => cerramos y deshabilitamos.\r\n */ function CountdownKonva({ obj, registerRef, onHover, seccionesOrdenadas, altoCanvas, onSelect, onChange, onDragStartPersonalizado, onDragMovePersonalizado, onDragEndPersonalizado, dragStartPos, hasDragged }) {\n    const rootRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const dragMoveRafRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const lastDragMovePosRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Tick cada 1s (no re-render si estamos arrastrando)\n    const [tick, setTick] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const draggingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CountdownKonva.useEffect\": ()=>{\n            const t = setInterval({\n                \"CountdownKonva.useEffect.t\": ()=>{\n                    if (!draggingRef.current) setTick({\n                        \"CountdownKonva.useEffect.t\": (n)=>(n + 1) % 60\n                    }[\"CountdownKonva.useEffect.t\"]);\n                }\n            }[\"CountdownKonva.useEffect.t\"], 1000);\n            return ({\n                \"CountdownKonva.useEffect\": ()=>clearInterval(t)\n            })[\"CountdownKonva.useEffect\"];\n        }\n    }[\"CountdownKonva.useEffect\"], []);\n    // Registrar nodo raíz\n    const setRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[setRefs]\": (node)=>{\n            rootRef.current = node;\n            if (typeof registerRef === \"function\") registerRef(obj.id, node || null);\n        }\n    }[\"CountdownKonva.useCallback[setRefs]\"], [\n        obj.id,\n        registerRef\n    ]);\n    // y absoluta = y relativa + offset de sección\n    const yAbs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CountdownKonva.useMemo[yAbs]\": ()=>{\n            const idx = seccionesOrdenadas.findIndex({\n                \"CountdownKonva.useMemo[yAbs].idx\": (s)=>s.id === obj.seccionId\n            }[\"CountdownKonva.useMemo[yAbs].idx\"]);\n            const safe = idx >= 0 ? idx : 0;\n            const off = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_4__.calcularOffsetY)(seccionesOrdenadas, safe, altoCanvas) || 0;\n            return (obj.y ?? 0) + off;\n        }\n    }[\"CountdownKonva.useMemo[yAbs]\"], [\n        obj.y,\n        obj.seccionId,\n        seccionesOrdenadas,\n        altoCanvas\n    ]);\n    // Tiempo restante\n    const state = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CountdownKonva.useMemo[state]\": ()=>(0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.getRemainingParts)(obj.fechaObjetivo)\n    }[\"CountdownKonva.useMemo[state]\"], [\n        obj.fechaObjetivo,\n        tick\n    ]);\n    const parts = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CountdownKonva.useMemo[parts]\": ()=>[\n                {\n                    key: \"d\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.d, obj.padZero),\n                    label: \"Días\"\n                },\n                {\n                    key: \"h\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.h, obj.padZero),\n                    label: \"Horas\"\n                },\n                {\n                    key: \"m\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.m, obj.padZero),\n                    label: \"Min\"\n                },\n                {\n                    key: \"s\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.s, obj.padZero),\n                    label: \"Seg\"\n                }\n            ]\n    }[\"CountdownKonva.useMemo[parts]\"], [\n        state.d,\n        state.h,\n        state.m,\n        state.s,\n        obj.padZero\n    ]);\n    // Layout\n    const n = parts.length;\n    const gap = obj.gap ?? 8;\n    const paddingY = obj.paddingY ?? 6;\n    const paddingX = obj.paddingX ?? 8;\n    const valueSize = obj.fontSize ?? 16;\n    const labelSize = obj.labelSize ?? 10;\n    const showLabels = !!obj.showLabels;\n    const chipW = (obj.chipWidth ?? 46) + paddingX * 2;\n    const chipH = paddingY * 2 + valueSize + (showLabels ? labelSize : 0);\n    const totalChipsW = n * chipW + gap * (n - 1);\n    const containerW = Math.max(obj.width ?? 0, totalChipsW);\n    const containerH = Math.max(obj.height ?? chipH, chipH);\n    const contentOffsetY = (containerH - chipH) / 2;\n    const startX = 0;\n    // ---------------------------\n    // Drag gating (la clave)\n    // ---------------------------\n    const THRESHOLD_PX = 4; // más responsivo para que el elemento no se sienta \"atrasado\" al iniciar drag.\n    const pressRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        active: false,\n        movedEnough: false,\n        startedDrag: false,\n        startClientX: 0,\n        startClientY: 0,\n        startNodeX: 0,\n        startNodeY: 0,\n        // para ignorar click si se convirtió en drag\n        suppressClick: false\n    });\n    const cleanupGlobalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cleanupGlobal = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[cleanupGlobal]\": ()=>{\n            if (cleanupGlobalRef.current) {\n                try {\n                    cleanupGlobalRef.current();\n                } catch  {}\n                cleanupGlobalRef.current = null;\n            }\n        }\n    }[\"CountdownKonva.useCallback[cleanupGlobal]\"], []);\n    const attachGlobalListeners = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[attachGlobalListeners]\": ()=>{\n            cleanupGlobal();\n            const onMove = {\n                \"CountdownKonva.useCallback[attachGlobalListeners].onMove\": (ev)=>{\n                    if (!pressRef.current.active) return;\n                    if (pressRef.current.startedDrag) return;\n                    const cx = ev.clientX ?? (ev.touches && ev.touches[0]?.clientX) ?? null;\n                    const cy = ev.clientY ?? (ev.touches && ev.touches[0]?.clientY) ?? null;\n                    if (cx == null || cy == null) return;\n                    const dx = cx - pressRef.current.startClientX;\n                    const dy = cy - pressRef.current.startClientY;\n                    const dist = Math.hypot(dx, dy);\n                    if (dist < THRESHOLD_PX) return;\n                    // ✅ Se convirtió en drag intencional\n                    pressRef.current.movedEnough = true;\n                    pressRef.current.startedDrag = true;\n                    pressRef.current.suppressClick = true;\n                    const node = rootRef.current;\n                    if (!node) return;\n                    // Asegurar que empiece desde la posición exacta del press (evita saltitos)\n                    try {\n                        node.position({\n                            x: pressRef.current.startNodeX,\n                            y: pressRef.current.startNodeY\n                        });\n                        node.getLayer()?.batchDraw();\n                    } catch  {}\n                    // Habilitar drag solo ahora\n                    try {\n                        node.draggable(true);\n                    } catch  {}\n                    // Bloquear re-render por tick durante drag\n                    draggingRef.current = true;\n                    window._isDragging = true;\n                    if (hasDragged?.current != null) hasDragged.current = true;\n                    // Necesario para que tu motor individual tenga un startPos coherente incluso si CanvasEditor no lo setea\n                    try {\n                        const stage = node.getStage();\n                        const p = stage?.getPointerPosition?.();\n                        if (dragStartPos && p) dragStartPos.current = {\n                            x: p.x,\n                            y: p.y\n                        };\n                    } catch  {}\n                    // Iniciar drag nativo de Konva (esto dispara dragstart/dragmove/dragend)\n                    try {\n                        node.startDrag();\n                    } catch  {}\n                }\n            }[\"CountdownKonva.useCallback[attachGlobalListeners].onMove\"];\n            const onUp = {\n                \"CountdownKonva.useCallback[attachGlobalListeners].onUp\": ()=>{\n                    // Siempre cerramos el press\n                    pressRef.current.active = false;\n                    const node = rootRef.current;\n                    if (!node) {\n                        cleanupGlobal();\n                        return;\n                    }\n                    // Si NO se convirtió en drag, garantizamos 0 movimiento\n                    if (!pressRef.current.movedEnough) {\n                        try {\n                            node.position({\n                                x: pressRef.current.startNodeX,\n                                y: pressRef.current.startNodeY\n                            });\n                            node.getLayer()?.batchDraw();\n                        } catch  {}\n                    // click permitido\n                    } else {\n                        // Si fue drag, aseguramos que termine\n                        try {\n                            if (node.isDragging?.()) node.stopDrag();\n                        } catch  {}\n                    }\n                    // Reset flags\n                    pressRef.current.movedEnough = false;\n                    pressRef.current.startedDrag = false;\n                    // Volver a modo \"no draggable\" siempre (clave para que el click nunca dispare drag)\n                    try {\n                        node.draggable(false);\n                    } catch  {}\n                    draggingRef.current = false;\n                    window._isDragging = false;\n                    // Permitimos clicks futuros\n                    setTimeout({\n                        \"CountdownKonva.useCallback[attachGlobalListeners].onUp\": ()=>{\n                            pressRef.current.suppressClick = false;\n                            if (hasDragged?.current != null) hasDragged.current = false;\n                        }\n                    }[\"CountdownKonva.useCallback[attachGlobalListeners].onUp\"], 0);\n                    cleanupGlobal();\n                }\n            }[\"CountdownKonva.useCallback[attachGlobalListeners].onUp\"];\n            window.addEventListener(\"mousemove\", onMove, true);\n            window.addEventListener(\"touchmove\", onMove, {\n                capture: true,\n                passive: true\n            });\n            window.addEventListener(\"mouseup\", onUp, true);\n            window.addEventListener(\"touchend\", onUp, true);\n            window.addEventListener(\"pointercancel\", onUp, true);\n            window.addEventListener(\"blur\", onUp, true);\n            cleanupGlobalRef.current = ({\n                \"CountdownKonva.useCallback[attachGlobalListeners]\": ()=>{\n                    window.removeEventListener(\"mousemove\", onMove, true);\n                    window.removeEventListener(\"touchmove\", onMove, true);\n                    window.removeEventListener(\"mouseup\", onUp, true);\n                    window.removeEventListener(\"touchend\", onUp, true);\n                    window.removeEventListener(\"pointercancel\", onUp, true);\n                    window.removeEventListener(\"blur\", onUp, true);\n                }\n            })[\"CountdownKonva.useCallback[attachGlobalListeners]\"];\n        }\n    }[\"CountdownKonva.useCallback[attachGlobalListeners]\"], [\n        THRESHOLD_PX,\n        cleanupGlobal,\n        dragStartPos,\n        hasDragged\n    ]);\n    // ---------------------------\n    // Handlers del nodo\n    // ---------------------------\n    const handleDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDown]\": (e)=>{\n            e.cancelBubble = true;\n            const node = e.currentTarget;\n            const ev = e.evt;\n            // Iniciar press\n            pressRef.current.active = true;\n            pressRef.current.movedEnough = false;\n            pressRef.current.startedDrag = false;\n            pressRef.current.suppressClick = false;\n            // Guardar posición inicial del nodo\n            pressRef.current.startNodeX = node.x();\n            pressRef.current.startNodeY = node.y();\n            // Guardar punto inicial del puntero (en px reales)\n            const cx = ev?.clientX ?? (ev?.touches && ev.touches[0]?.clientX) ?? 0;\n            const cy = ev?.clientY ?? (ev?.touches && ev.touches[0]?.clientY) ?? 0;\n            pressRef.current.startClientX = cx;\n            pressRef.current.startClientY = cy;\n            // Por defecto NO draggable en press (clave)\n            try {\n                node.draggable(false);\n            } catch  {}\n            if (hasDragged?.current != null) hasDragged.current = false;\n            attachGlobalListeners();\n        }\n    }[\"CountdownKonva.useCallback[handleDown]\"], [\n        attachGlobalListeners,\n        hasDragged\n    ]);\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleClick]\": (e)=>{\n            e.cancelBubble = true;\n            // Si este click se convirtió en drag, no seleccionar “de vuelta”\n            if (pressRef.current.suppressClick) return;\n            onSelect?.(obj.id, e);\n        }\n    }[\"CountdownKonva.useCallback[handleClick]\"], [\n        obj.id,\n        onSelect\n    ]);\n    const handleMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleMouseEnter]\": ()=>{\n            if (window._isDragging) return;\n            onHover?.(obj.id);\n        }\n    }[\"CountdownKonva.useCallback[handleMouseEnter]\"], [\n        onHover,\n        obj.id\n    ]);\n    const handleMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleMouseLeave]\": ()=>{\n            onHover?.(null);\n        }\n    }[\"CountdownKonva.useCallback[handleMouseLeave]\"], [\n        onHover\n    ]);\n    // Estos handlers solo corren cuando el drag fue habilitado y startDrag() se llamó\n    const handleDragStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDragStart]\": (e)=>{\n            if (dragMoveRafRef.current != null) {\n                cancelAnimationFrame(dragMoveRafRef.current);\n                dragMoveRafRef.current = null;\n            }\n            lastDragMovePosRef.current = null;\n            onDragStartPersonalizado?.(obj.id, e);\n            // Arranque de tu lógica grupal/individual\n            const esGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.startDragGrupalLider)(e, obj);\n            if (!esGrupal) (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.startDragIndividual)(e, dragStartPos);\n        }\n    }[\"CountdownKonva.useCallback[handleDragStart]\"], [\n        obj,\n        dragStartPos,\n        onDragStartPersonalizado\n    ]);\n    const handleDragMove = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDragMove]\": (e)=>{\n            if (window._grupoLider) {\n                if (obj.id === window._grupoLider) (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.previewDragGrupal)(e, obj, onChange);\n                return;\n            }\n            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.previewDragIndividual)(e, obj, {\n                \"CountdownKonva.useCallback[handleDragMove]\": (pos)=>{\n                    if (!onDragMovePersonalizado) return;\n                    lastDragMovePosRef.current = pos;\n                    // Evita saturar React/UI en dragmove; máximo 1 actualización por frame.\n                    if (dragMoveRafRef.current != null) return;\n                    dragMoveRafRef.current = requestAnimationFrame({\n                        \"CountdownKonva.useCallback[handleDragMove]\": ()=>{\n                            dragMoveRafRef.current = null;\n                            const latestPos = lastDragMovePosRef.current;\n                            if (!latestPos) return;\n                            onDragMovePersonalizado(latestPos, obj.id);\n                        }\n                    }[\"CountdownKonva.useCallback[handleDragMove]\"]);\n                }\n            }[\"CountdownKonva.useCallback[handleDragMove]\"]);\n        }\n    }[\"CountdownKonva.useCallback[handleDragMove]\"], [\n        obj,\n        onChange,\n        onDragMovePersonalizado\n    ]);\n    const handleDragEnd = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDragEnd]\": (e)=>{\n            const node = e.currentTarget;\n            if (dragMoveRafRef.current != null) {\n                cancelAnimationFrame(dragMoveRafRef.current);\n                dragMoveRafRef.current = null;\n            }\n            lastDragMovePosRef.current = null;\n            // Commit final\n            const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.endDragGrupal)(e, obj, onChange, hasDragged, {\n                \"CountdownKonva.useCallback[handleDragEnd].fueGrupal\": ()=>{}\n            }[\"CountdownKonva.useCallback[handleDragEnd].fueGrupal\"]);\n            if (fueGrupal) {\n                onDragEndPersonalizado?.();\n            } else {\n                (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.endDragIndividual)(obj, node, onChange, onDragEndPersonalizado, hasDragged);\n            }\n            // Volver a no-draggable (clave)\n            try {\n                node.draggable(false);\n            } catch  {}\n            draggingRef.current = false;\n            window._isDragging = false;\n            // Limpieza del press\n            pressRef.current.active = false;\n            pressRef.current.movedEnough = false;\n            pressRef.current.startedDrag = false;\n            // permitir click futuro\n            setTimeout({\n                \"CountdownKonva.useCallback[handleDragEnd]\": ()=>{\n                    pressRef.current.suppressClick = false;\n                    if (hasDragged?.current != null) hasDragged.current = false;\n                }\n            }[\"CountdownKonva.useCallback[handleDragEnd]\"], 0);\n            cleanupGlobal();\n        }\n    }[\"CountdownKonva.useCallback[handleDragEnd]\"], [\n        obj,\n        onChange,\n        hasDragged,\n        onDragEndPersonalizado,\n        cleanupGlobal\n    ]);\n    // Cleanup global por si el componente se desmonta en pleno press\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CountdownKonva.useEffect\": ()=>{\n            return ({\n                \"CountdownKonva.useEffect\": ()=>{\n                    cleanupGlobal();\n                    if (dragMoveRafRef.current != null) {\n                        cancelAnimationFrame(dragMoveRafRef.current);\n                        dragMoveRafRef.current = null;\n                    }\n                    lastDragMovePosRef.current = null;\n                }\n            })[\"CountdownKonva.useEffect\"];\n        }\n    }[\"CountdownKonva.useEffect\"], [\n        cleanupGlobal\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n        ref: setRefs,\n        id: obj.id,\n        x: obj.x ?? 0,\n        y: yAbs,\n        rotation: obj.rotation || 0,\n        scaleX: obj.scaleX || 1,\n        scaleY: obj.scaleY || 1,\n        // ✅ SIEMPRE false: el drag se habilita imperativamente solo si hubo intención\n        draggable: false,\n        listening: true,\n        onMouseDown: handleDown,\n        onTouchStart: handleDown,\n        onClick: handleClick,\n        onTap: handleClick,\n        onMouseEnter: handleMouseEnter,\n        onMouseLeave: handleMouseLeave,\n        onDragStart: handleDragStart,\n        onDragMove: handleDragMove,\n        onDragEnd: handleDragEnd,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                name: \"countdown-hitbox\",\n                width: containerW,\n                height: containerH,\n                fill: obj.background || \"transparent\",\n                // El borde de selección lo dibuja SelectionBounds (Transformer).\n                // Evita doble recuadro (violeta + celeste punteado) en countdown.\n                stroke: \"transparent\",\n                strokeWidth: 0,\n                cornerRadius: 8,\n                listening: true,\n                perfectDrawEnabled: false\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                lineNumber: 410,\n                columnNumber: 7\n            }, this),\n            !state.invalid && !state.ended && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                listening: false,\n                children: parts.map((it, i)=>{\n                    const x = startX + i * (chipW + gap);\n                    const sepText = obj.separator || \"\";\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                        x: x,\n                        y: contentOffsetY,\n                        listening: false,\n                        children: [\n                            obj.layout !== \"minimal\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                width: chipW,\n                                height: chipH,\n                                fill: obj.boxBg || \"#fff\",\n                                stroke: obj.boxBorder || \"#e5e7eb\",\n                                cornerRadius: Math.min(obj.boxRadius ?? 8, chipW / 2, chipH / 2),\n                                shadowBlur: obj.boxShadow ? 8 : 0,\n                                shadowColor: obj.boxShadow ? \"rgba(0,0,0,0.15)\" : \"transparent\",\n                                listening: false,\n                                perfectDrawEnabled: false,\n                                shadowForStrokeEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 433,\n                                columnNumber: 19\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                text: it.value,\n                                fill: obj.color || \"#111827\",\n                                fontFamily: obj.fontFamily,\n                                fontStyle: \"bold\",\n                                fontSize: valueSize,\n                                width: chipW,\n                                align: \"center\",\n                                y: paddingY + valueSize / 2,\n                                offsetY: valueSize / 2,\n                                listening: false,\n                                perfectDrawEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 447,\n                                columnNumber: 17\n                            }, this),\n                            showLabels && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                text: it.label,\n                                fill: obj.labelColor || \"#6b7280\",\n                                fontFamily: obj.fontFamily,\n                                fontSize: labelSize,\n                                width: chipW,\n                                align: \"center\",\n                                y: paddingY + valueSize + labelSize / 2,\n                                offsetY: labelSize / 2,\n                                listening: false,\n                                perfectDrawEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 462,\n                                columnNumber: 19\n                            }, this),\n                            !!sepText && i < parts.length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                x: chipW + gap * 0.25,\n                                y: chipH * 0.3,\n                                text: sepText,\n                                fill: obj.color || \"#111827\",\n                                fontFamily: obj.fontFamily,\n                                fontSize: valueSize,\n                                listening: false,\n                                perfectDrawEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 477,\n                                columnNumber: 19\n                            }, this)\n                        ]\n                    }, it.key, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                        lineNumber: 431,\n                        columnNumber: 15\n                    }, this);\n                })\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                lineNumber: 425,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n        lineNumber: 384,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9jb3VudGRvd24vQ291bnRkb3duS29udmEuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEscURBQXFEOztBQUNxQjtBQUMxQjtBQUNVO0FBQ1Q7QUFFMEM7QUFDVztBQUV0Rzs7Ozs7Ozs7OztDQVVDLEdBQ2MsU0FBU2lCLGVBQWUsRUFDckNDLEdBQUcsRUFDSEMsV0FBVyxFQUNYQyxPQUFPLEVBQ1BDLGtCQUFrQixFQUNsQkMsVUFBVSxFQUNWQyxRQUFRLEVBQ1JDLFFBQVEsRUFDUkMsd0JBQXdCLEVBQ3hCQyx1QkFBdUIsRUFDdkJDLHNCQUFzQixFQUN0QkMsWUFBWSxFQUNaQyxVQUFVLEVBQ1g7SUFDQyxNQUFNQyxVQUFVNUIsNkNBQU1BLENBQUM7SUFDdkIsTUFBTTZCLGlCQUFpQjdCLDZDQUFNQSxDQUFDO0lBQzlCLE1BQU04QixxQkFBcUI5Qiw2Q0FBTUEsQ0FBQztJQUVsQyxxREFBcUQ7SUFDckQsTUFBTSxDQUFDK0IsTUFBTUMsUUFBUSxHQUFHL0IsK0NBQVFBLENBQUM7SUFDakMsTUFBTWdDLGNBQWNqQyw2Q0FBTUEsQ0FBQztJQUUzQkYsZ0RBQVNBO29DQUFDO1lBQ1IsTUFBTW9DLElBQUlDOzhDQUFZO29CQUNwQixJQUFJLENBQUNGLFlBQVlHLE9BQU8sRUFBRUo7c0RBQVEsQ0FBQ0ssSUFBTSxDQUFDQSxJQUFJLEtBQUs7O2dCQUNyRDs2Q0FBRztZQUNIOzRDQUFPLElBQU1DLGNBQWNKOztRQUM3QjttQ0FBRyxFQUFFO0lBRUwsc0JBQXNCO0lBQ3RCLE1BQU1LLFVBQVVyQyxrREFBV0E7K0NBQ3pCLENBQUNzQztZQUNDWixRQUFRUSxPQUFPLEdBQUdJO1lBQ2xCLElBQUksT0FBT3ZCLGdCQUFnQixZQUFZQSxZQUFZRCxJQUFJeUIsRUFBRSxFQUFFRCxRQUFRO1FBQ3JFOzhDQUNBO1FBQUN4QixJQUFJeUIsRUFBRTtRQUFFeEI7S0FBWTtJQUd2Qiw4Q0FBOEM7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QTtnQ0FDSDhLLE1BQU1iLEdBQUdoSCxLQUFLO2dDQUNkdUcsTUFBTTdJLElBQUlvSyxLQUFLLElBQUk7Z0NBQ25CQyxZQUFZckssSUFBSXFLLFVBQVU7Z0NBQzFCQyxXQUFVO2dDQUNWckgsVUFBVUQ7Z0NBQ1ZXLE9BQU9QO2dDQUNQbUgsT0FBTTtnQ0FDTnRJLEdBQUdhLFdBQVdFLFlBQVk7Z0NBQzFCd0gsU0FBU3hILFlBQVk7Z0NBQ3JCa0YsV0FBVztnQ0FDWGdCLG9CQUFvQjs7Ozs7OzRCQUdyQi9GLDRCQUNDLDhEQUFDOUQsNkNBQUlBO2dDQUNIOEssTUFBTWIsR0FBRzdHLEtBQUs7Z0NBQ2RvRyxNQUFNN0ksSUFBSXlLLFVBQVUsSUFBSTtnQ0FDeEJKLFlBQVlySyxJQUFJcUssVUFBVTtnQ0FDMUJwSCxVQUFVQztnQ0FDVlMsT0FBT1A7Z0NBQ1BtSCxPQUFNO2dDQUNOdEksR0FBR2EsV0FBV0UsWUFBWUUsWUFBWTtnQ0FDdENzSCxTQUFTdEgsWUFBWTtnQ0FDckJnRixXQUFXO2dDQUNYZ0Isb0JBQW9COzs7Ozs7NEJBSXZCLENBQUMsQ0FBQ00sV0FBV0QsSUFBSW5ILE1BQU1RLE1BQU0sR0FBRyxtQkFDL0IsOERBQUN2RCw2Q0FBSUE7Z0NBQ0hvRyxHQUFHckMsUUFBUVAsTUFBTTtnQ0FDakJaLEdBQUdxQixRQUFRO2dDQUNYNkcsTUFBTVg7Z0NBQ05YLE1BQU03SSxJQUFJb0ssS0FBSyxJQUFJO2dDQUNuQkMsWUFBWXJLLElBQUlxSyxVQUFVO2dDQUMxQnBILFVBQVVEO2dDQUNWa0YsV0FBVztnQ0FDWGdCLG9CQUFvQjs7Ozs7Ozt1QkF0RGRJLEdBQUdqSCxHQUFHOzs7OztnQkEyRHRCOzs7Ozs7Ozs7Ozs7QUFLViIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxlZGl0b3JcXGNvdW50ZG93blxcQ291bnRkb3duS29udmEuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2VkaXRvci9jb3VudGRvd24vQ291bnRkb3duS29udmEuanN4XHJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgR3JvdXAsIFJlY3QsIFRleHQgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcclxuaW1wb3J0IHsgZ2V0UmVtYWluaW5nUGFydHMsIGZtdCB9IGZyb20gXCIuL2NvdW50ZG93blV0aWxzXCI7XHJcbmltcG9ydCB7IGNhbGN1bGFyT2Zmc2V0WSB9IGZyb20gXCJAL3V0aWxzL2xheW91dFwiO1xyXG5cclxuaW1wb3J0IHsgc3RhcnREcmFnR3J1cGFsTGlkZXIsIHByZXZpZXdEcmFnR3J1cGFsLCBlbmREcmFnR3J1cGFsIH0gZnJvbSBcIkAvZHJhZy9kcmFnR3J1cGFsXCI7XHJcbmltcG9ydCB7IHN0YXJ0RHJhZ0luZGl2aWR1YWwsIHByZXZpZXdEcmFnSW5kaXZpZHVhbCwgZW5kRHJhZ0luZGl2aWR1YWwgfSBmcm9tIFwiQC9kcmFnL2RyYWdJbmRpdmlkdWFsXCI7XHJcblxyXG4vKipcclxuICog4pyFIENvbXBvcnRhbWllbnRvIGNvcnJlY3RvOlxyXG4gKiAtIENsaWNrIHNpbXBsZTogU09MTyBzZWxlY2Npb25hICgwIG1vdmltaWVudG8pXHJcbiAqIC0gRHJhZzogU09MTyBzaSBtYW50aWVuZSBhcHJldGFkbyArIG11ZXZlIG3DoXMgZGUgVEhSRVNIT0xEX1BYXHJcbiAqXHJcbiAqIOKchSBJbXBsZW1lbnRhY2nDs24gcHJvOlxyXG4gKiAtIEVsIG5vZG8gZXN0w6EgZHJhZ2dhYmxlPWZhbHNlIHNpZW1wcmUuXHJcbiAqIC0gRW4gbW91c2Vkb3duL3RvdWNoc3RhcnQ6IGVtcGV6YW1vcyB1biBcInByZXNzXCIuXHJcbiAqIC0gRW4gbW91c2Vtb3ZlL3RvdWNobW92ZSBnbG9iYWw6IHNpIHN1cGVyYSB1bWJyYWwgPT4gaGFiaWxpdGFtb3MgZHJhZ2dhYmxlIHkgbGxhbWFtb3Mgc3RhcnREcmFnKClcclxuICogLSBFbiBtb3VzZXVwL3RvdWNoZW5kIGdsb2JhbDogc2kgbm8gbGxlZ8OzIGEgdW1icmFsID0+IG5vIGh1Ym8gZHJhZzsgc2kgaHVibyA9PiBjZXJyYW1vcyB5IGRlc2hhYmlsaXRhbW9zLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ291bnRkb3duS29udmEoe1xuICBvYmosXG4gIHJlZ2lzdGVyUmVmLFxuICBvbkhvdmVyLFxuICBzZWNjaW9uZXNPcmRlbmFkYXMsXG4gIGFsdG9DYW52YXMsXG4gIG9uU2VsZWN0LFxuICBvbkNoYW5nZSxcbiAgb25EcmFnU3RhcnRQZXJzb25hbGl6YWRvLFxuICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyxcbiAgb25EcmFnRW5kUGVyc29uYWxpemFkbyxcbiAgZHJhZ1N0YXJ0UG9zLFxuICBoYXNEcmFnZ2VkLFxufSkge1xuICBjb25zdCByb290UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBkcmFnTW92ZVJhZlJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbGFzdERyYWdNb3ZlUG9zUmVmID0gdXNlUmVmKG51bGwpO1xuXHJcbiAgLy8gVGljayBjYWRhIDFzIChubyByZS1yZW5kZXIgc2kgZXN0YW1vcyBhcnJhc3RyYW5kbylcclxuICBjb25zdCBbdGljaywgc2V0VGlja10gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBkcmFnZ2luZ1JlZiA9IHVzZVJlZihmYWxzZSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCB0ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICBpZiAoIWRyYWdnaW5nUmVmLmN1cnJlbnQpIHNldFRpY2soKG4pID0+IChuICsgMSkgJSA2MCk7XHJcbiAgICB9LCAxMDAwKTtcclxuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKHQpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgLy8gUmVnaXN0cmFyIG5vZG8gcmHDrXpcclxuICBjb25zdCBzZXRSZWZzID0gdXNlQ2FsbGJhY2soXG4gICAgKG5vZGUpID0+IHtcbiAgICAgIHJvb3RSZWYuY3VycmVudCA9IG5vZGU7XG4gICAgICBpZiAodHlwZW9mIHJlZ2lzdGVyUmVmID09PSBcImZ1bmN0aW9uXCIpIHJlZ2lzdGVyUmVmKG9iai5pZCwgbm9kZSB8fCBudWxsKTtcbiAgICB9LFxuICAgIFtvYmouaWQsIHJlZ2lzdGVyUmVmXVxuICApO1xuXHJcbiAgLy8geSBhYnNvbHV0YSA9IHkgcmVsYXRpdmEgKyBvZmZzZXQgZGUgc2VjY2nDs25cclxuICBjb25zdCB5QWJzID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBpZHggPSBzZWNjaW9uZXNPcmRlbmFkYXMuZmluZEluZGV4KChzKSA9PiBzLmlkID09PSBvYmouc2VjY2lvbklkKTtcclxuICAgIGNvbnN0IHNhZmUgPSBpZHggPj0gMCA/IGlkeCA6IDA7XHJcbiAgICBjb25zdCBvZmYgPSBjYWxjdWxhck9mZnNldFkoc2VjY2lvbmVzT3JkZW5hZGFzLCBzYWZlLCBhbHRvQ2FudmFzKSB8fCAwO1xyXG4gICAgcmV0dXJuIChvYmoueSA/PyAwKSArIG9mZjtcclxuICB9LCBbb2JqLnksIG9iai5zZWNjaW9uSWQsIHNlY2Npb25lc09yZGVuYWRhcywgYWx0b0NhbnZhc10pO1xyXG5cclxuICAvLyBUaWVtcG8gcmVzdGFudGVcclxuICBjb25zdCBzdGF0ZSA9IHVzZU1lbW8oKCkgPT4gZ2V0UmVtYWluaW5nUGFydHMob2JqLmZlY2hhT2JqZXRpdm8pLCBbb2JqLmZlY2hhT2JqZXRpdm8sIHRpY2tdKTtcclxuXHJcbiAgY29uc3QgcGFydHMgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gW1xyXG4gICAgICB7IGtleTogXCJkXCIsIHZhbHVlOiBmbXQoc3RhdGUuZCwgb2JqLnBhZFplcm8pLCBsYWJlbDogXCJEw61hc1wiIH0sXHJcbiAgICAgIHsga2V5OiBcImhcIiwgdmFsdWU6IGZtdChzdGF0ZS5oLCBvYmoucGFkWmVybyksIGxhYmVsOiBcIkhvcmFzXCIgfSxcclxuICAgICAgeyBrZXk6IFwibVwiLCB2YWx1ZTogZm10KHN0YXRlLm0sIG9iai5wYWRaZXJvKSwgbGFiZWw6IFwiTWluXCIgfSxcclxuICAgICAgeyBrZXk6IFwic1wiLCB2YWx1ZTogZm10KHN0YXRlLnMsIG9iai5wYWRaZXJvKSwgbGFiZWw6IFwiU2VnXCIgfSxcclxuICAgIF0sXHJcbiAgICBbc3RhdGUuZCwgc3RhdGUuaCwgc3RhdGUubSwgc3RhdGUucywgb2JqLnBhZFplcm9dXHJcbiAgKTtcclxuXHJcbiAgLy8gTGF5b3V0XHJcbiAgY29uc3QgbiA9IHBhcnRzLmxlbmd0aDtcclxuICBjb25zdCBnYXAgPSBvYmouZ2FwID8/IDg7XHJcbiAgY29uc3QgcGFkZGluZ1kgPSBvYmoucGFkZGluZ1kgPz8gNjtcclxuICBjb25zdCBwYWRkaW5nWCA9IG9iai5wYWRkaW5nWCA/PyA4O1xyXG5cclxuICBjb25zdCB2YWx1ZVNpemUgPSBvYmouZm9udFNpemUgPz8gMTY7XHJcbiAgY29uc3QgbGFiZWxTaXplID0gb2JqLmxhYmVsU2l6ZSA/PyAxMDtcclxuICBjb25zdCBzaG93TGFiZWxzID0gISFvYmouc2hvd0xhYmVscztcclxuXHJcbiAgY29uc3QgY2hpcFcgPSAob2JqLmNoaXBXaWR0aCA/PyA0NikgKyBwYWRkaW5nWCAqIDI7XHJcbiAgY29uc3QgY2hpcEggPSBwYWRkaW5nWSAqIDIgKyB2YWx1ZVNpemUgKyAoc2hvd0xhYmVscyA/IGxhYmVsU2l6ZSA6IDApO1xyXG5cclxuICBjb25zdCB0b3RhbENoaXBzVyA9IG4gKiBjaGlwVyArIGdhcCAqIChuIC0gMSk7XHJcbiAgY29uc3QgY29udGFpbmVyVyA9IE1hdGgubWF4KG9iai53aWR0aCA/PyAwLCB0b3RhbENoaXBzVyk7XHJcbiAgY29uc3QgY29udGFpbmVySCA9IE1hdGgubWF4KG9iai5oZWlnaHQgPz8gY2hpcEgsIGNoaXBIKTtcclxuICBjb25zdCBjb250ZW50T2Zmc2V0WSA9IChjb250YWluZXJIIC0gY2hpcEgpIC8gMjtcclxuICBjb25zdCBzdGFydFggPSAwO1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBEcmFnIGdhdGluZyAobGEgY2xhdmUpXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgY29uc3QgVEhSRVNIT0xEX1BYID0gNDsgLy8gbcOhcyByZXNwb25zaXZvIHBhcmEgcXVlIGVsIGVsZW1lbnRvIG5vIHNlIHNpZW50YSBcImF0cmFzYWRvXCIgYWwgaW5pY2lhciBkcmFnLlxuXHJcbiAgY29uc3QgcHJlc3NSZWYgPSB1c2VSZWYoe1xyXG4gICAgYWN0aXZlOiBmYWxzZSxcclxuICAgIG1vdmVkRW5vdWdoOiBmYWxzZSxcclxuICAgIHN0YXJ0ZWREcmFnOiBmYWxzZSxcclxuICAgIHN0YXJ0Q2xpZW50WDogMCxcclxuICAgIHN0YXJ0Q2xpZW50WTogMCxcclxuICAgIHN0YXJ0Tm9kZVg6IDAsXHJcbiAgICBzdGFydE5vZGVZOiAwLFxyXG4gICAgLy8gcGFyYSBpZ25vcmFyIGNsaWNrIHNpIHNlIGNvbnZpcnRpw7MgZW4gZHJhZ1xyXG4gICAgc3VwcHJlc3NDbGljazogZmFsc2UsXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGNsZWFudXBHbG9iYWxSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIGNvbnN0IGNsZWFudXBHbG9iYWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBpZiAoY2xlYW51cEdsb2JhbFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIHRyeSB7IGNsZWFudXBHbG9iYWxSZWYuY3VycmVudCgpOyB9IGNhdGNoIHt9XHJcbiAgICAgIGNsZWFudXBHbG9iYWxSZWYuY3VycmVudCA9IG51bGw7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBhdHRhY2hHbG9iYWxMaXN0ZW5lcnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBjbGVhbnVwR2xvYmFsKCk7XHJcblxyXG4gICAgY29uc3Qgb25Nb3ZlID0gKGV2KSA9PiB7XHJcbiAgICAgIGlmICghcHJlc3NSZWYuY3VycmVudC5hY3RpdmUpIHJldHVybjtcclxuICAgICAgaWYgKHByZXNzUmVmLmN1cnJlbnQuc3RhcnRlZERyYWcpIHJldHVybjtcclxuXHJcbiAgICAgIGNvbnN0IGN4ID0gZXYuY2xpZW50WCA/PyAoZXYudG91Y2hlcyAmJiBldi50b3VjaGVzWzBdPy5jbGllbnRYKSA/PyBudWxsO1xyXG4gICAgICBjb25zdCBjeSA9IGV2LmNsaWVudFkgPz8gKGV2LnRvdWNoZXMgJiYgZXYudG91Y2hlc1swXT8uY2xpZW50WSkgPz8gbnVsbDtcclxuICAgICAgaWYgKGN4ID09IG51bGwgfHwgY3kgPT0gbnVsbCkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3QgZHggPSBjeCAtIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRDbGllbnRYO1xyXG4gICAgICBjb25zdCBkeSA9IGN5IC0gcHJlc3NSZWYuY3VycmVudC5zdGFydENsaWVudFk7XHJcbiAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmh5cG90KGR4LCBkeSk7XHJcblxyXG4gICAgICBpZiAoZGlzdCA8IFRIUkVTSE9MRF9QWCkgcmV0dXJuO1xyXG5cclxuICAgICAgLy8g4pyFIFNlIGNvbnZpcnRpw7MgZW4gZHJhZyBpbnRlbmNpb25hbFxyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50Lm1vdmVkRW5vdWdoID0gdHJ1ZTtcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5zdGFydGVkRHJhZyA9IHRydWU7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3VwcHJlc3NDbGljayA9IHRydWU7XHJcblxyXG4gICAgICBjb25zdCBub2RlID0gcm9vdFJlZi5jdXJyZW50O1xyXG4gICAgICBpZiAoIW5vZGUpIHJldHVybjtcclxuXHJcbiAgICAgIC8vIEFzZWd1cmFyIHF1ZSBlbXBpZWNlIGRlc2RlIGxhIHBvc2ljacOzbiBleGFjdGEgZGVsIHByZXNzIChldml0YSBzYWx0aXRvcylcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBub2RlLnBvc2l0aW9uKHsgeDogcHJlc3NSZWYuY3VycmVudC5zdGFydE5vZGVYLCB5OiBwcmVzc1JlZi5jdXJyZW50LnN0YXJ0Tm9kZVkgfSk7XHJcbiAgICAgICAgbm9kZS5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcclxuICAgICAgfSBjYXRjaCB7fVxyXG5cclxuICAgICAgLy8gSGFiaWxpdGFyIGRyYWcgc29sbyBhaG9yYVxyXG4gICAgICB0cnkgeyBub2RlLmRyYWdnYWJsZSh0cnVlKTsgfSBjYXRjaCB7fVxyXG5cclxuICAgICAgLy8gQmxvcXVlYXIgcmUtcmVuZGVyIHBvciB0aWNrIGR1cmFudGUgZHJhZ1xyXG4gICAgICBkcmFnZ2luZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgd2luZG93Ll9pc0RyYWdnaW5nID0gdHJ1ZTtcclxuICAgICAgaWYgKGhhc0RyYWdnZWQ/LmN1cnJlbnQgIT0gbnVsbCkgaGFzRHJhZ2dlZC5jdXJyZW50ID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIE5lY2VzYXJpbyBwYXJhIHF1ZSB0dSBtb3RvciBpbmRpdmlkdWFsIHRlbmdhIHVuIHN0YXJ0UG9zIGNvaGVyZW50ZSBpbmNsdXNvIHNpIENhbnZhc0VkaXRvciBubyBsbyBzZXRlYVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0YWdlID0gbm9kZS5nZXRTdGFnZSgpO1xyXG4gICAgICAgIGNvbnN0IHAgPSBzdGFnZT8uZ2V0UG9pbnRlclBvc2l0aW9uPy4oKTtcclxuICAgICAgICBpZiAoZHJhZ1N0YXJ0UG9zICYmIHApIGRyYWdTdGFydFBvcy5jdXJyZW50ID0geyB4OiBwLngsIHk6IHAueSB9O1xyXG4gICAgICB9IGNhdGNoIHt9XHJcblxyXG4gICAgICAvLyBJbmljaWFyIGRyYWcgbmF0aXZvIGRlIEtvbnZhIChlc3RvIGRpc3BhcmEgZHJhZ3N0YXJ0L2RyYWdtb3ZlL2RyYWdlbmQpXHJcbiAgICAgIHRyeSB7IG5vZGUuc3RhcnREcmFnKCk7IH0gY2F0Y2gge31cclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25VcCA9ICgpID0+IHtcclxuICAgICAgLy8gU2llbXByZSBjZXJyYW1vcyBlbCBwcmVzc1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LmFjdGl2ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgY29uc3Qgbm9kZSA9IHJvb3RSZWYuY3VycmVudDtcclxuICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgY2xlYW51cEdsb2JhbCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU2kgTk8gc2UgY29udmlydGnDsyBlbiBkcmFnLCBnYXJhbnRpemFtb3MgMCBtb3ZpbWllbnRvXHJcbiAgICAgIGlmICghcHJlc3NSZWYuY3VycmVudC5tb3ZlZEVub3VnaCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBub2RlLnBvc2l0aW9uKHsgeDogcHJlc3NSZWYuY3VycmVudC5zdGFydE5vZGVYLCB5OiBwcmVzc1JlZi5jdXJyZW50LnN0YXJ0Tm9kZVkgfSk7XHJcbiAgICAgICAgICBub2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICAvLyBjbGljayBwZXJtaXRpZG9cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBTaSBmdWUgZHJhZywgYXNlZ3VyYW1vcyBxdWUgdGVybWluZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBpZiAobm9kZS5pc0RyYWdnaW5nPy4oKSkgbm9kZS5zdG9wRHJhZygpO1xyXG4gICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUmVzZXQgZmxhZ3NcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5tb3ZlZEVub3VnaCA9IGZhbHNlO1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LnN0YXJ0ZWREcmFnID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBWb2x2ZXIgYSBtb2RvIFwibm8gZHJhZ2dhYmxlXCIgc2llbXByZSAoY2xhdmUgcGFyYSBxdWUgZWwgY2xpY2sgbnVuY2EgZGlzcGFyZSBkcmFnKVxyXG4gICAgICB0cnkgeyBub2RlLmRyYWdnYWJsZShmYWxzZSk7IH0gY2F0Y2gge31cclxuXHJcbiAgICAgIGRyYWdnaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgd2luZG93Ll9pc0RyYWdnaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBQZXJtaXRpbW9zIGNsaWNrcyBmdXR1cm9zXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3VwcHJlc3NDbGljayA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChoYXNEcmFnZ2VkPy5jdXJyZW50ICE9IG51bGwpIGhhc0RyYWdnZWQuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICB9LCAwKTtcclxuXHJcbiAgICAgIGNsZWFudXBHbG9iYWwoKTtcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Nb3ZlLCB0cnVlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG9uTW92ZSwgeyBjYXB0dXJlOiB0cnVlLCBwYXNzaXZlOiB0cnVlIH0pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIG9uVXAsIHRydWUpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBvblVwLCB0cnVlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLCBvblVwLCB0cnVlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBvblVwLCB0cnVlKTtcclxuXHJcbiAgICBjbGVhbnVwR2xvYmFsUmVmLmN1cnJlbnQgPSAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uTW92ZSwgdHJ1ZSk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG9uTW92ZSwgdHJ1ZSk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvblVwLCB0cnVlKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBvblVwLCB0cnVlKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIG9uVXAsIHRydWUpO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgb25VcCwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gIH0sIFtUSFJFU0hPTERfUFgsIGNsZWFudXBHbG9iYWwsIGRyYWdTdGFydFBvcywgaGFzRHJhZ2dlZF0pO1xyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBIYW5kbGVycyBkZWwgbm9kb1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0IGhhbmRsZURvd24gPSB1c2VDYWxsYmFjayhcclxuICAgIChlKSA9PiB7XHJcbiAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgIGNvbnN0IG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgIGNvbnN0IGV2ID0gZS5ldnQ7XHJcblxyXG4gICAgICAvLyBJbmljaWFyIHByZXNzXHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5tb3ZlZEVub3VnaCA9IGZhbHNlO1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LnN0YXJ0ZWREcmFnID0gZmFsc2U7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3VwcHJlc3NDbGljayA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8gR3VhcmRhciBwb3NpY2nDs24gaW5pY2lhbCBkZWwgbm9kb1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LnN0YXJ0Tm9kZVggPSBub2RlLngoKTtcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5zdGFydE5vZGVZID0gbm9kZS55KCk7XHJcblxyXG4gICAgICAvLyBHdWFyZGFyIHB1bnRvIGluaWNpYWwgZGVsIHB1bnRlcm8gKGVuIHB4IHJlYWxlcylcclxuICAgICAgY29uc3QgY3ggPSBldj8uY2xpZW50WCA/PyAoZXY/LnRvdWNoZXMgJiYgZXYudG91Y2hlc1swXT8uY2xpZW50WCkgPz8gMDtcclxuICAgICAgY29uc3QgY3kgPSBldj8uY2xpZW50WSA/PyAoZXY/LnRvdWNoZXMgJiYgZXYudG91Y2hlc1swXT8uY2xpZW50WSkgPz8gMDtcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5zdGFydENsaWVudFggPSBjeDtcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5zdGFydENsaWVudFkgPSBjeTtcclxuXHJcbiAgICAgIC8vIFBvciBkZWZlY3RvIE5PIGRyYWdnYWJsZSBlbiBwcmVzcyAoY2xhdmUpXHJcbiAgICAgIHRyeSB7IG5vZGUuZHJhZ2dhYmxlKGZhbHNlKTsgfSBjYXRjaCB7fVxyXG5cclxuICAgICAgaWYgKGhhc0RyYWdnZWQ/LmN1cnJlbnQgIT0gbnVsbCkgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICBhdHRhY2hHbG9iYWxMaXN0ZW5lcnMoKTtcclxuICAgIH0sXHJcbiAgICBbYXR0YWNoR2xvYmFsTGlzdGVuZXJzLCBoYXNEcmFnZ2VkXVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcclxuICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG5cclxuICAgICAgLy8gU2kgZXN0ZSBjbGljayBzZSBjb252aXJ0acOzIGVuIGRyYWcsIG5vIHNlbGVjY2lvbmFyIOKAnGRlIHZ1ZWx0YeKAnVxyXG4gICAgICBpZiAocHJlc3NSZWYuY3VycmVudC5zdXBwcmVzc0NsaWNrKSByZXR1cm47XHJcblxyXG4gICAgICBvblNlbGVjdD8uKG9iai5pZCwgZSk7XHJcbiAgICB9LFxyXG4gICAgW29iai5pZCwgb25TZWxlY3RdXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlTW91c2VFbnRlciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAod2luZG93Ll9pc0RyYWdnaW5nKSByZXR1cm47XG4gICAgb25Ib3Zlcj8uKG9iai5pZCk7XG4gIH0sIFtvbkhvdmVyLCBvYmouaWRdKTtcblxuICBjb25zdCBoYW5kbGVNb3VzZUxlYXZlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIG9uSG92ZXI/LihudWxsKTtcbiAgfSwgW29uSG92ZXJdKTtcblxyXG4gIC8vIEVzdG9zIGhhbmRsZXJzIHNvbG8gY29ycmVuIGN1YW5kbyBlbCBkcmFnIGZ1ZSBoYWJpbGl0YWRvIHkgc3RhcnREcmFnKCkgc2UgbGxhbcOzXHJcbiAgY29uc3QgaGFuZGxlRHJhZ1N0YXJ0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGlmIChkcmFnTW92ZVJhZlJlZi5jdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoZHJhZ01vdmVSYWZSZWYuY3VycmVudCk7XG4gICAgICAgIGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgbGFzdERyYWdNb3ZlUG9zUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgb25EcmFnU3RhcnRQZXJzb25hbGl6YWRvPy4ob2JqLmlkLCBlKTtcbiAgICAgIC8vIEFycmFucXVlIGRlIHR1IGzDs2dpY2EgZ3J1cGFsL2luZGl2aWR1YWxcbiAgICAgIGNvbnN0IGVzR3J1cGFsID0gc3RhcnREcmFnR3J1cGFsTGlkZXIoZSwgb2JqKTtcbiAgICAgIGlmICghZXNHcnVwYWwpIHN0YXJ0RHJhZ0luZGl2aWR1YWwoZSwgZHJhZ1N0YXJ0UG9zKTtcbiAgICB9LFxuICAgIFtvYmosIGRyYWdTdGFydFBvcywgb25EcmFnU3RhcnRQZXJzb25hbGl6YWRvXVxuICApO1xuXHJcbiAgY29uc3QgaGFuZGxlRHJhZ01vdmUgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5fZ3J1cG9MaWRlcikge1xuICAgICAgICBpZiAob2JqLmlkID09PSB3aW5kb3cuX2dydXBvTGlkZXIpIHByZXZpZXdEcmFnR3J1cGFsKGUsIG9iaiwgb25DaGFuZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwcmV2aWV3RHJhZ0luZGl2aWR1YWwoZSwgb2JqLCAocG9zKSA9PiB7XG4gICAgICAgIGlmICghb25EcmFnTW92ZVBlcnNvbmFsaXphZG8pIHJldHVybjtcbiAgICAgICAgbGFzdERyYWdNb3ZlUG9zUmVmLmN1cnJlbnQgPSBwb3M7XG5cbiAgICAgICAgLy8gRXZpdGEgc2F0dXJhciBSZWFjdC9VSSBlbiBkcmFnbW92ZTsgbcOheGltbyAxIGFjdHVhbGl6YWNpw7NuIHBvciBmcmFtZS5cbiAgICAgICAgaWYgKGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQgIT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBkcmFnTW92ZVJhZlJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBkcmFnTW92ZVJhZlJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICBjb25zdCBsYXRlc3RQb3MgPSBsYXN0RHJhZ01vdmVQb3NSZWYuY3VycmVudDtcbiAgICAgICAgICBpZiAoIWxhdGVzdFBvcykgcmV0dXJuO1xuICAgICAgICAgIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvKGxhdGVzdFBvcywgb2JqLmlkKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtvYmosIG9uQ2hhbmdlLCBvbkRyYWdNb3ZlUGVyc29uYWxpemFkb11cbiAgKTtcblxyXG4gIGNvbnN0IGhhbmRsZURyYWdFbmQgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgY29uc3Qgbm9kZSA9IGUuY3VycmVudFRhcmdldDtcblxuICAgICAgaWYgKGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShkcmFnTW92ZVJhZlJlZi5jdXJyZW50KTtcbiAgICAgICAgZHJhZ01vdmVSYWZSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBsYXN0RHJhZ01vdmVQb3NSZWYuY3VycmVudCA9IG51bGw7XG5cclxuICAgICAgLy8gQ29tbWl0IGZpbmFsXHJcbiAgICAgIGNvbnN0IGZ1ZUdydXBhbCA9IGVuZERyYWdHcnVwYWwoZSwgb2JqLCBvbkNoYW5nZSwgaGFzRHJhZ2dlZCwgKCkgPT4ge30pO1xyXG4gICAgICBpZiAoZnVlR3J1cGFsKSB7XHJcbiAgICAgICAgb25EcmFnRW5kUGVyc29uYWxpemFkbz8uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZW5kRHJhZ0luZGl2aWR1YWwob2JqLCBub2RlLCBvbkNoYW5nZSwgb25EcmFnRW5kUGVyc29uYWxpemFkbywgaGFzRHJhZ2dlZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFZvbHZlciBhIG5vLWRyYWdnYWJsZSAoY2xhdmUpXHJcbiAgICAgIHRyeSB7IG5vZGUuZHJhZ2dhYmxlKGZhbHNlKTsgfSBjYXRjaCB7fVxyXG5cclxuICAgICAgZHJhZ2dpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIExpbXBpZXphIGRlbCBwcmVzc1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50Lm1vdmVkRW5vdWdoID0gZmFsc2U7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRlZERyYWcgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIHBlcm1pdGlyIGNsaWNrIGZ1dHVyb1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBwcmVzc1JlZi5jdXJyZW50LnN1cHByZXNzQ2xpY2sgPSBmYWxzZTtcclxuICAgICAgICBpZiAoaGFzRHJhZ2dlZD8uY3VycmVudCAhPSBudWxsKSBoYXNEcmFnZ2VkLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgfSwgMCk7XHJcblxyXG4gICAgICBjbGVhbnVwR2xvYmFsKCk7XHJcbiAgICB9LFxyXG4gICAgW29iaiwgb25DaGFuZ2UsIGhhc0RyYWdnZWQsIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8sIGNsZWFudXBHbG9iYWxdXG4gICk7XG5cbiAgLy8gQ2xlYW51cCBnbG9iYWwgcG9yIHNpIGVsIGNvbXBvbmVudGUgc2UgZGVzbW9udGEgZW4gcGxlbm8gcHJlc3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYW51cEdsb2JhbCgpO1xuICAgICAgaWYgKGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShkcmFnTW92ZVJhZlJlZi5jdXJyZW50KTtcbiAgICAgICAgZHJhZ01vdmVSYWZSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBsYXN0RHJhZ01vdmVQb3NSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfTtcbiAgfSwgW2NsZWFudXBHbG9iYWxdKTtcblxyXG4gIHJldHVybiAoXHJcbiAgICA8R3JvdXBcclxuICAgICAgcmVmPXtzZXRSZWZzfVxyXG4gICAgICBpZD17b2JqLmlkfVxyXG4gICAgICB4PXtvYmoueCA/PyAwfVxyXG4gICAgICB5PXt5QWJzfVxyXG4gICAgICByb3RhdGlvbj17b2JqLnJvdGF0aW9uIHx8IDB9XHJcbiAgICAgIHNjYWxlWD17b2JqLnNjYWxlWCB8fCAxfVxyXG4gICAgICBzY2FsZVk9e29iai5zY2FsZVkgfHwgMX1cclxuXHJcbiAgICAgIC8vIOKchSBTSUVNUFJFIGZhbHNlOiBlbCBkcmFnIHNlIGhhYmlsaXRhIGltcGVyYXRpdmFtZW50ZSBzb2xvIHNpIGh1Ym8gaW50ZW5jacOzblxyXG4gICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxyXG4gICAgICBsaXN0ZW5pbmc9e3RydWV9XHJcblxyXG4gICAgICBvbk1vdXNlRG93bj17aGFuZGxlRG93bn1cclxuICAgICAgb25Ub3VjaFN0YXJ0PXtoYW5kbGVEb3dufVxyXG5cclxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICBvblRhcD17aGFuZGxlQ2xpY2t9XG4gICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XG4gICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XG5cbiAgICAgIG9uRHJhZ1N0YXJ0PXtoYW5kbGVEcmFnU3RhcnR9XG4gICAgICBvbkRyYWdNb3ZlPXtoYW5kbGVEcmFnTW92ZX1cbiAgICAgIG9uRHJhZ0VuZD17aGFuZGxlRHJhZ0VuZH1cclxuICAgID5cclxuICAgICAgey8qIEhpdGJveCAqL31cclxuICAgICAgPFJlY3RcbiAgICAgICAgbmFtZT1cImNvdW50ZG93bi1oaXRib3hcIlxuICAgICAgICB3aWR0aD17Y29udGFpbmVyV31cbiAgICAgICAgaGVpZ2h0PXtjb250YWluZXJIfVxuICAgICAgICBmaWxsPXtvYmouYmFja2dyb3VuZCB8fCBcInRyYW5zcGFyZW50XCJ9XG4gICAgICAgIC8vIEVsIGJvcmRlIGRlIHNlbGVjY2nDs24gbG8gZGlidWphIFNlbGVjdGlvbkJvdW5kcyAoVHJhbnNmb3JtZXIpLlxuICAgICAgICAvLyBFdml0YSBkb2JsZSByZWN1YWRybyAodmlvbGV0YSArIGNlbGVzdGUgcHVudGVhZG8pIGVuIGNvdW50ZG93bi5cbiAgICAgICAgc3Ryb2tlPVwidHJhbnNwYXJlbnRcIlxuICAgICAgICBzdHJva2VXaWR0aD17MH1cbiAgICAgICAgY29ybmVyUmFkaXVzPXs4fVxuICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XG4gICAgICAvPlxuXHJcbiAgICAgIHshc3RhdGUuaW52YWxpZCAmJiAhc3RhdGUuZW5kZWQgJiYgKFxyXG4gICAgICAgIDxHcm91cCBsaXN0ZW5pbmc9e2ZhbHNlfT5cclxuICAgICAgICAgIHtwYXJ0cy5tYXAoKGl0LCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBzdGFydFggKyBpICogKGNoaXBXICsgZ2FwKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VwVGV4dCA9IG9iai5zZXBhcmF0b3IgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgPEdyb3VwIGtleT17aXQua2V5fSB4PXt4fSB5PXtjb250ZW50T2Zmc2V0WX0gbGlzdGVuaW5nPXtmYWxzZX0+XHJcbiAgICAgICAgICAgICAgICB7b2JqLmxheW91dCAhPT0gXCJtaW5pbWFsXCIgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPXtjaGlwV31cclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9e2NoaXBIfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9e29iai5ib3hCZyB8fCBcIiNmZmZcIn1cclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9e29iai5ib3hCb3JkZXIgfHwgXCIjZTVlN2ViXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgY29ybmVyUmFkaXVzPXtNYXRoLm1pbihvYmouYm94UmFkaXVzID8/IDgsIGNoaXBXIC8gMiwgY2hpcEggLyAyKX1cclxuICAgICAgICAgICAgICAgICAgICBzaGFkb3dCbHVyPXtvYmouYm94U2hhZG93ID8gOCA6IDB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93Q29sb3I9e29iai5ib3hTaGFkb3cgPyBcInJnYmEoMCwwLDAsMC4xNSlcIiA6IFwidHJhbnNwYXJlbnRcIn1cclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93Rm9yU3Ryb2tlRW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgIDxUZXh0XHJcbiAgICAgICAgICAgICAgICAgIHRleHQ9e2l0LnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICBmaWxsPXtvYmouY29sb3IgfHwgXCIjMTExODI3XCJ9XHJcbiAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk9e29iai5mb250RmFtaWx5fVxyXG4gICAgICAgICAgICAgICAgICBmb250U3R5bGU9XCJib2xkXCJcclxuICAgICAgICAgICAgICAgICAgZm9udFNpemU9e3ZhbHVlU2l6ZX1cclxuICAgICAgICAgICAgICAgICAgd2lkdGg9e2NoaXBXfVxyXG4gICAgICAgICAgICAgICAgICBhbGlnbj1cImNlbnRlclwiXHJcbiAgICAgICAgICAgICAgICAgIHk9e3BhZGRpbmdZICsgdmFsdWVTaXplIC8gMn1cclxuICAgICAgICAgICAgICAgICAgb2Zmc2V0WT17dmFsdWVTaXplIC8gMn1cclxuICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAge3Nob3dMYWJlbHMgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ9e2l0LmxhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9e29iai5sYWJlbENvbG9yIHx8IFwiIzZiNzI4MFwifVxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk9e29iai5mb250RmFtaWx5fVxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPXtsYWJlbFNpemV9XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9e2NoaXBXfVxyXG4gICAgICAgICAgICAgICAgICAgIGFsaWduPVwiY2VudGVyXCJcclxuICAgICAgICAgICAgICAgICAgICB5PXtwYWRkaW5nWSArIHZhbHVlU2l6ZSArIGxhYmVsU2l6ZSAvIDJ9XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WT17bGFiZWxTaXplIC8gMn1cclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgIHshIXNlcFRleHQgJiYgaSA8IHBhcnRzLmxlbmd0aCAtIDEgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHg9e2NoaXBXICsgZ2FwICogMC4yNX1cclxuICAgICAgICAgICAgICAgICAgICB5PXtjaGlwSCAqIDAuM31cclxuICAgICAgICAgICAgICAgICAgICB0ZXh0PXtzZXBUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9e29iai5jb2xvciB8fCBcIiMxMTE4MjdcIn1cclxuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5PXtvYmouZm9udEZhbWlseX1cclxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZT17dmFsdWVTaXplfVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgPC9Hcm91cD5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvR3JvdXA+XHJcbiAgICAgICl9XHJcbiAgICA8L0dyb3VwPlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiR3JvdXAiLCJSZWN0IiwiVGV4dCIsImdldFJlbWFpbmluZ1BhcnRzIiwiZm10IiwiY2FsY3VsYXJPZmZzZXRZIiwic3RhcnREcmFnR3J1cGFsTGlkZXIiLCJwcmV2aWV3RHJhZ0dydXBhbCIsImVuZERyYWdHcnVwYWwiLCJzdGFydERyYWdJbmRpdmlkdWFsIiwicHJldmlld0RyYWdJbmRpdmlkdWFsIiwiZW5kRHJhZ0luZGl2aWR1YWwiLCJDb3VudGRvd25Lb252YSIsIm9iaiIsInJlZ2lzdGVyUmVmIiwib25Ib3ZlciIsInNlY2Npb25lc09yZGVuYWRhcyIsImFsdG9DYW52YXMiLCJvblNlbGVjdCIsIm9uQ2hhbmdlIiwib25EcmFnU3RhcnRQZXJzb25hbGl6YWRvIiwib25EcmFnTW92ZVBlcnNvbmFsaXphZG8iLCJvbkRyYWdFbmRQZXJzb25hbGl6YWRvIiwiZHJhZ1N0YXJ0UG9zIiwiaGFzRHJhZ2dlZCIsInJvb3RSZWYiLCJkcmFnTW92ZVJhZlJlZiIsImxhc3REcmFnTW92ZVBvc1JlZiIsInRpY2siLCJzZXRUaWNrIiwiZHJhZ2dpbmdSZWYiLCJ0Iiwic2V0SW50ZXJ2YWwiLCJjdXJyZW50IiwibiIsImNsZWFySW50ZXJ2YWwiLCJzZXRSZWZzIiwibm9kZSIsImlkIiwieUFicyIsImlkeCIsImZpbmRJbmRleCIsInMiLCJzZWNjaW9uSWQiLCJzYWZlIiwib2ZmIiwieSIsInN0YXRlIiwiZmVjaGFPYmpldGl2byIsInBhcnRzIiwia2V5IiwidmFsdWUiLCJkIiwicGFkWmVybyIsImxhYmVsIiwiaCIsIm0iLCJsZW5ndGgiLCJnYXAiLCJwYWRkaW5nWSIsInBhZGRpbmdYIiwidmFsdWVTaXplIiwiZm9udFNpemUiLCJsYWJlbFNpemUiLCJzaG93TGFiZWxzIiwiY2hpcFciLCJjaGlwV2lkdGgiLCJjaGlwSCIsInRvdGFsQ2hpcHNXIiwiY29udGFpbmVyVyIsIk1hdGgiLCJtYXgiLCJ3aWR0aCIsImNvbnRhaW5lckgiLCJoZWlnaHQiLCJjb250ZW50T2Zmc2V0WSIsInN0YXJ0WCIsIlRIUkVTSE9MRF9QWCIsInByZXNzUmVmIiwiYWN0aXZlIiwibW92ZWRFbm91Z2giLCJzdGFydGVkRHJhZyIsInN0YXJ0Q2xpZW50WCIsInN0YXJ0Q2xpZW50WSIsInN0YXJ0Tm9kZVgiLCJzdGFydE5vZGVZIiwic3VwcHJlc3NDbGljayIsImNsZWFudXBHbG9iYWxSZWYiLCJjbGVhbnVwR2xvYmFsIiwiYXR0YWNoR2xvYmFsTGlzdGVuZXJzIiwib25Nb3ZlIiwiZXYiLCJjeCIsImNsaWVudFgiLCJ0b3VjaGVzIiwiY3kiLCJjbGllbnRZIiwiZHgiLCJkeSIsImRpc3QiLCJoeXBvdCIsInBvc2l0aW9uIiwieCIsImdldExheWVyIiwiYmF0Y2hEcmF3IiwiZHJhZ2dhYmxlIiwid2luZG93IiwiX2lzRHJhZ2dpbmciLCJzdGFnZSIsImdldFN0YWdlIiwicCIsImdldFBvaW50ZXJQb3NpdGlvbiIsInN0YXJ0RHJhZyIsIm9uVXAiLCJpc0RyYWdnaW5nIiwic3RvcERyYWciLCJzZXRUaW1lb3V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhcHR1cmUiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZURvd24iLCJlIiwiY2FuY2VsQnViYmxlIiwiY3VycmVudFRhcmdldCIsImV2dCIsImhhbmRsZUNsaWNrIiwiaGFuZGxlTW91c2VFbnRlciIsImhhbmRsZU1vdXNlTGVhdmUiLCJoYW5kbGVEcmFnU3RhcnQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImVzR3J1cGFsIiwiaGFuZGxlRHJhZ01vdmUiLCJfZ3J1cG9MaWRlciIsInBvcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxhdGVzdFBvcyIsImhhbmRsZURyYWdFbmQiLCJmdWVHcnVwYWwiLCJyZWYiLCJyb3RhdGlvbiIsInNjYWxlWCIsInNjYWxlWSIsImxpc3RlbmluZyIsIm9uTW91c2VEb3duIiwib25Ub3VjaFN0YXJ0Iiwib25DbGljayIsIm9uVGFwIiwib25Nb3VzZUVudGVyIiwib25Nb3VzZUxlYXZlIiwib25EcmFnU3RhcnQiLCJvbkRyYWdNb3ZlIiwib25EcmFnRW5kIiwibmFtZSIsImZpbGwiLCJiYWNrZ3JvdW5kIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJjb3JuZXJSYWRpdXMiLCJwZXJmZWN0RHJhd0VuYWJsZWQiLCJpbnZhbGlkIiwiZW5kZWQiLCJtYXAiLCJpdCIsImkiLCJzZXBUZXh0Iiwic2VwYXJhdG9yIiwibGF5b3V0IiwiYm94QmciLCJib3hCb3JkZXIiLCJtaW4iLCJib3hSYWRpdXMiLCJzaGFkb3dCbHVyIiwiYm94U2hhZG93Iiwic2hhZG93Q29sb3IiLCJzaGFkb3dGb3JTdHJva2VFbmFibGVkIiwidGV4dCIsImNvbG9yIiwiZm9udEZhbWlseSIsImZvbnRTdHlsZSIsImFsaWduIiwib2Zmc2V0WSIsImxhYmVsQ29sb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/countdown/CountdownKonva.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/events/computeInsertDefaults.js":
/*!***************************************************************!*\
  !*** ./src/components/editor/events/computeInsertDefaults.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ computeInsertDefaults)\n/* harmony export */ });\nconst CANVAS_WIDTH = 800;\nfunction clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\nfunction toNumber(value, fallback = null) {\n    const n = Number(value);\n    return Number.isFinite(n) ? n : fallback;\n}\nfunction stripUndefined(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([, value])=>value !== undefined));\n}\nfunction calcCountdownInitialWidth(presetProps = {}) {\n    const n = 4;\n    const gap = toNumber(presetProps.gap, 8);\n    const paddingX = toNumber(presetProps.paddingX, 8);\n    const chipWidth = toNumber(presetProps.chipWidth, 46);\n    const chipW = chipWidth + paddingX * 2;\n    return Math.max(120, Math.round(n * chipW + gap * (n - 1)));\n}\nfunction inferTextVariant(variant = \"texto\", isMobile = false) {\n    if (variant === \"titulo\") {\n        return {\n            texto: \"Titulo\",\n            fontSize: isMobile ? 34 : 36,\n            fontWeight: \"bold\",\n            fontStyle: \"normal\",\n            y: 100\n        };\n    }\n    if (variant === \"subtitulo\") {\n        return {\n            texto: \"Subtitulo\",\n            fontSize: isMobile ? 22 : 24,\n            fontWeight: \"normal\",\n            fontStyle: \"italic\",\n            y: 160\n        };\n    }\n    if (variant === \"parrafo\") {\n        return {\n            texto: \"Texto del parrafo...\",\n            fontSize: isMobile ? 16 : 18,\n            fontWeight: \"normal\",\n            fontStyle: \"normal\",\n            y: 220\n        };\n    }\n    return {\n        texto: \"Texto\",\n        fontSize: isMobile ? 22 : 24,\n        fontWeight: \"normal\",\n        fontStyle: \"normal\",\n        y: 120\n    };\n}\nfunction calcGalleryHeight({ width, rows, cols, gap, ratio }) {\n    const ratioCell = ratio === \"4:3\" ? 3 / 4 : ratio === \"16:9\" ? 9 / 16 : 1;\n    const cellW = Math.max(1, (width - gap * (cols - 1)) / cols);\n    const cellH = cellW * ratioCell;\n    return rows * cellH + gap * (rows - 1);\n}\nfunction computeInsertDefaults({ payload = {}, targetSeccionId, secciones = [], normalizarAltoModo, ALTURA_PANTALLA_EDITOR }) {\n    const isMobile =  false && (0);\n    const tipo = payload.tipo || \"texto\";\n    const id = payload.id || `${tipo}-${Date.now().toString(36)}`;\n    const incomingWidth = toNumber(payload.width);\n    const incomingHeight = toNumber(payload.height);\n    const incomingX = toNumber(payload.x);\n    const incomingY = toNumber(payload.y);\n    let next = {\n        ...payload,\n        id,\n        tipo,\n        seccionId: targetSeccionId,\n        rotation: toNumber(payload.rotation, 0),\n        scaleX: toNumber(payload.scaleX, 1),\n        scaleY: toNumber(payload.scaleY, 1)\n    };\n    if (tipo === \"texto\") {\n        const variant = inferTextVariant(payload.variant, isMobile);\n        const x = incomingX ?? 100;\n        const y = incomingY ?? variant.y;\n        next = {\n            ...next,\n            texto: payload.texto ?? variant.texto,\n            x,\n            y,\n            fontSize: toNumber(payload.fontSize, variant.fontSize),\n            color: payload.color ?? \"#000000\",\n            fontFamily: payload.fontFamily ?? \"sans-serif\",\n            fontWeight: payload.fontWeight ?? variant.fontWeight,\n            fontStyle: payload.fontStyle ?? variant.fontStyle,\n            textDecoration: payload.textDecoration ?? \"none\",\n            align: payload.align ?? \"left\"\n        };\n    } else if (tipo === \"forma\") {\n        const figura = payload.figura || \"rect\";\n        const size = isMobile ? 120 : 100;\n        const width = incomingWidth ?? size;\n        const height = incomingHeight ?? size;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            figura,\n            color: payload.color ?? \"#000000\",\n            x,\n            y,\n            width,\n            height,\n            texto: payload.texto ?? \"\",\n            fontSize: toNumber(payload.fontSize, 24),\n            fontFamily: payload.fontFamily ?? \"sans-serif\",\n            fontWeight: payload.fontWeight ?? \"normal\",\n            fontStyle: payload.fontStyle ?? \"normal\",\n            colorTexto: payload.colorTexto ?? \"#000000\",\n            align: payload.align ?? \"center\"\n        };\n        if (figura === \"line\") {\n            next.points = Array.isArray(payload.points) ? payload.points : [\n                0,\n                0,\n                100,\n                0\n            ];\n            next.strokeWidth = toNumber(payload.strokeWidth, 2);\n            delete next.width;\n            delete next.height;\n        } else if (figura === \"circle\") {\n            next.radius = toNumber(payload.radius, 50);\n        } else if (figura === \"triangle\") {\n            next.radius = toNumber(payload.radius, 60);\n        }\n    } else if (tipo === \"icono\" || tipo === \"icono-svg\") {\n        const width = incomingWidth ?? (isMobile ? 112 : 128);\n        const height = incomingHeight ?? width;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height\n        };\n    } else if (tipo === \"imagen\") {\n        const sourceWidth = toNumber(payload.ancho, 300);\n        const sourceHeight = toNumber(payload.alto, 300);\n        const width = incomingWidth ?? Math.min(isMobile ? 260 : 320, sourceWidth);\n        const ratio = sourceWidth > 0 ? sourceHeight / sourceWidth : 1;\n        const height = incomingHeight ?? Math.max(40, Math.round(width * ratio));\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height\n        };\n    } else if (tipo === \"galeria\") {\n        const rows = Math.max(1, toNumber(payload.rows, 2));\n        const cols = Math.max(1, toNumber(payload.cols, 2));\n        const gap = Math.max(0, toNumber(payload.gap, 8));\n        const widthPct = clamp(toNumber(payload.widthPct, isMobile ? 92 : 70), 10, 100);\n        const width = incomingWidth ?? CANVAS_WIDTH * widthPct / 100;\n        const height = incomingHeight ?? calcGalleryHeight({\n            width,\n            rows,\n            cols,\n            gap,\n            ratio: payload.ratio\n        });\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            rows,\n            cols,\n            gap,\n            widthPct,\n            x,\n            y,\n            width,\n            height\n        };\n    } else if (tipo === \"countdown\") {\n        const presetProps = payload.presetProps || payload.props || {};\n        const width = incomingWidth ?? calcCountdownInitialWidth(presetProps);\n        const height = incomingHeight ?? 90;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 140;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height,\n            fechaObjetivo: payload.fechaObjetivo || payload.targetISO || payload.fechaISO,\n            ...presetProps\n        };\n    } else if (tipo === \"rsvp-boton\") {\n        const width = incomingWidth ?? 200;\n        const height = incomingHeight ?? 50;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 140;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height\n        };\n    } else {\n        next = {\n            ...next,\n            x: incomingX ?? 100,\n            y: incomingY ?? 120\n        };\n    }\n    if (Number.isFinite(next.width)) {\n        next.x = clamp(toNumber(next.x, 0), 0, Math.max(0, CANVAS_WIDTH - next.width));\n    } else {\n        next.x = clamp(toNumber(next.x, 0), 0, CANVAS_WIDTH);\n    }\n    next.y = Math.max(0, toNumber(next.y, 0));\n    const seccion = secciones.find((s)=>s.id === targetSeccionId);\n    if (normalizarAltoModo?.(seccion?.altoModo) === \"pantalla\") {\n        const yPx = Number.isFinite(next.y) ? next.y : 0;\n        next.yNorm = Math.max(0, Math.min(1, yPx / ALTURA_PANTALLA_EDITOR));\n    }\n    const { variant: _variant, presetProps: _presetProps, targetISO: _targetISO, ...persistable } = next;\n    return stripUndefined(persistable);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9ldmVudHMvY29tcHV0ZUluc2VydERlZmF1bHRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxlQUFlO0FBRXJCLFNBQVNDLE1BQU1DLEtBQUssRUFBRUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVCLE9BQU9DLEtBQUtELEdBQUcsQ0FBQ0QsS0FBS0UsS0FBS0YsR0FBRyxDQUFDQyxLQUFLRjtBQUNyQztBQUVBLFNBQVNJLFNBQVNKLEtBQUssRUFBRUssV0FBVyxJQUFJO0lBQ3RDLE1BQU1DLElBQUlDLE9BQU9QO0lBQ2pCLE9BQU9PLE9BQU9DLFFBQVEsQ0FBQ0YsS0FBS0EsSUFBSUQ7QUFDbEM7QUFFQSxTQUFTSSxlQUFlQyxHQUFHO0lBQ3pCLE9BQU9DLE9BQU9DLFdBQVcsQ0FDdkJELE9BQU9FLE9BQU8sQ0FBQ0gsS0FBS0ksTUFBTSxDQUFDLENBQUMsR0FBR2QsTUFBTSxHQUFLQSxVQUFVZTtBQUV4RDtBQUVBLFNBQVNDLDBCQUEwQkMsY0FBYyxDQUFDLENBQUM7SUFDakQsTUFBTVgsSUFBSTtJQUNWLE1BQU1ZLE1BQU1kLFNBQVNhLFlBQVlDLEdBQUcsRUFBRTtJQUN0QyxNQUFNQyxXQUFXZixTQUFTYSxZQUFZRSxRQUFRLEVBQUU7SUFDaEQsTUFBTUMsWUFBWWhCLFNBQVNhLFlBQVlHLFNBQVMsRUFBRTtJQUNsRCxNQUFNQyxRQUFRRCxZQUFZRCxXQUFXO0lBQ3JDLE9BQU9oQixLQUFLRCxHQUFHLENBQUMsS0FBS0MsS0FBS21CLEtBQUssQ0FBQ2hCLElBQUllLFFBQVFILE1BQU9aLENBQUFBLElBQUk7QUFDekQ7QUFFQSxTQUFTaUIsaUJBQWlCQyxVQUFVLE9BQU8sRUFBRUMsV0FBVyxLQUFLO0lBQzNELElBQUlELFlBQVksVUFBVTtRQUN4QixPQUFPO1lBQ0xFLE9BQU87WUFDUEMsVUFBVUYsV0FBVyxLQUFLO1lBQzFCRyxZQUFZO1lBQ1pDLFdBQVc7WUFDWEMsR0FBRztR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QUdBLElBQUk7WUFDUEY7WUFDQTNCO1lBQ0FFO1lBQ0F1QjtRQUNGO0lBQ0YsT0FBTztRQUNMSSxPQUFPO1lBQ0wsR0FBR0EsSUFBSTtZQUNQRixHQUFHRCxhQUFhO1lBQ2hCMUIsR0FBRzRCLGFBQWE7UUFDbEI7SUFDRjtJQUVBLElBQUluRCxPQUFPQyxRQUFRLENBQUNtRCxLQUFLM0IsS0FBSyxHQUFHO1FBQy9CMkIsS0FBS0YsQ0FBQyxHQUFHMUQsTUFBTUssU0FBU3VELEtBQUtGLENBQUMsRUFBRSxJQUFJLEdBQUd0RCxLQUFLRCxHQUFHLENBQUMsR0FBR0osZUFBZTZELEtBQUszQixLQUFLO0lBQzlFLE9BQU87UUFDTDJCLEtBQUtGLENBQUMsR0FBRzFELE1BQU1LLFNBQVN1RCxLQUFLRixDQUFDLEVBQUUsSUFBSSxHQUFHM0Q7SUFDekM7SUFDQTZELEtBQUs3QixDQUFDLEdBQUczQixLQUFLRCxHQUFHLENBQUMsR0FBR0UsU0FBU3VELEtBQUs3QixDQUFDLEVBQUU7SUFFdEMsTUFBTXVELFVBQVUzQyxVQUFVNEMsSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUV0QyxFQUFFLEtBQUtSO0lBQy9DLElBQUlFLHFCQUFxQjBDLFNBQVNHLGNBQWMsWUFBWTtRQUMxRCxNQUFNQyxNQUFNbEYsT0FBT0MsUUFBUSxDQUFDbUQsS0FBSzdCLENBQUMsSUFBSTZCLEtBQUs3QixDQUFDLEdBQUc7UUFDL0M2QixLQUFLK0IsS0FBSyxHQUFHdkYsS0FBS0QsR0FBRyxDQUFDLEdBQUdDLEtBQUtGLEdBQUcsQ0FBQyxHQUFHd0YsTUFBTTdDO0lBQzdDO0lBRUEsTUFBTSxFQUNKcEIsU0FBU21FLFFBQVEsRUFDakIxRSxhQUFhMkUsWUFBWSxFQUN6QlQsV0FBV1UsVUFBVSxFQUNyQixHQUFHQyxhQUNKLEdBQUduQztJQUVKLE9BQU9sRCxlQUFlcUY7QUFDeEIiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxldmVudHNcXGNvbXB1dGVJbnNlcnREZWZhdWx0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDQU5WQVNfV0lEVEggPSA4MDA7XG5cbmZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIHZhbHVlKSk7XG59XG5cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlLCBmYWxsYmFjayA9IG51bGwpIHtcbiAgY29uc3QgbiA9IE51bWJlcih2YWx1ZSk7XG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgPyBuIDogZmFsbGJhY2s7XG59XG5cbmZ1bmN0aW9uIHN0cmlwVW5kZWZpbmVkKG9iaikge1xuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKG9iaikuZmlsdGVyKChbLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQpXG4gICk7XG59XG5cbmZ1bmN0aW9uIGNhbGNDb3VudGRvd25Jbml0aWFsV2lkdGgocHJlc2V0UHJvcHMgPSB7fSkge1xuICBjb25zdCBuID0gNDtcbiAgY29uc3QgZ2FwID0gdG9OdW1iZXIocHJlc2V0UHJvcHMuZ2FwLCA4KTtcbiAgY29uc3QgcGFkZGluZ1ggPSB0b051bWJlcihwcmVzZXRQcm9wcy5wYWRkaW5nWCwgOCk7XG4gIGNvbnN0IGNoaXBXaWR0aCA9IHRvTnVtYmVyKHByZXNldFByb3BzLmNoaXBXaWR0aCwgNDYpO1xuICBjb25zdCBjaGlwVyA9IGNoaXBXaWR0aCArIHBhZGRpbmdYICogMjtcbiAgcmV0dXJuIE1hdGgubWF4KDEyMCwgTWF0aC5yb3VuZChuICogY2hpcFcgKyBnYXAgKiAobiAtIDEpKSk7XG59XG5cbmZ1bmN0aW9uIGluZmVyVGV4dFZhcmlhbnQodmFyaWFudCA9IFwidGV4dG9cIiwgaXNNb2JpbGUgPSBmYWxzZSkge1xuICBpZiAodmFyaWFudCA9PT0gXCJ0aXR1bG9cIikge1xuICAgIHJldHVybiB7XG4gICAgICB0ZXh0bzogXCJUaXR1bG9cIixcbiAgICAgIGZvbnRTaXplOiBpc01vYmlsZSA/IDM0IDogMzYsXG4gICAgICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgICAgIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgICAgIHk6IDEwMCxcbiAgICB9O1xuICB9XG4gIGlmICh2YXJpYW50ID09PSBcInN1YnRpdHVsb1wiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHRvOiBcIlN1YnRpdHVsb1wiLFxuICAgICAgZm9udFNpemU6IGlzTW9iaWxlID8gMjIgOiAyNCxcbiAgICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgICBmb250U3R5bGU6IFwiaXRhbGljXCIsXG4gICAgICB5OiAxNjAsXG4gICAgfTtcbiAgfVxuICBpZiAodmFyaWFudCA9PT0gXCJwYXJyYWZvXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGV4dG86IFwiVGV4dG8gZGVsIHBhcnJhZm8uLi5cIixcbiAgICAgIGZvbnRTaXplOiBpc01vYmlsZSA/IDE2IDogMTgsXG4gICAgICBmb250V2VpZ2h0OiBcIm5vcm1hbFwiLFxuICAgICAgZm9udFN0eWxlOiBcIm5vcm1hbFwiLFxuICAgICAgeTogMjIwLFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB0ZXh0bzogXCJUZXh0b1wiLFxuICAgIGZvbnRTaXplOiBpc01vYmlsZSA/IDIyIDogMjQsXG4gICAgZm9udFdlaWdodDogXCJub3JtYWxcIixcbiAgICBmb250U3R5bGU6IFwibm9ybWFsXCIsXG4gICAgeTogMTIwLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjYWxjR2FsbGVyeUhlaWdodCh7IHdpZHRoLCByb3dzLCBjb2xzLCBnYXAsIHJhdGlvIH0pIHtcbiAgY29uc3QgcmF0aW9DZWxsID0gcmF0aW8gPT09IFwiNDozXCIgPyAzIC8gNCA6IHJhdGlvID09PSBcIjE2OjlcIiA/IDkgLyAxNiA6IDE7XG4gIGNvbnN0IGNlbGxXID0gTWF0aC5tYXgoMSwgKHdpZHRoIC0gZ2FwICogKGNvbHMgLSAxKSkgLyBjb2xzKTtcbiAgY29uc3QgY2VsbEggPSBjZWxsVyAqIHJhdGlvQ2VsbDtcbiAgcmV0dXJuIHJvd3MgKiBjZWxsSCArIGdhcCAqIChyb3dzIC0gMSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbXB1dGVJbnNlcnREZWZhdWx0cyh7XG4gIHBheWxvYWQgPSB7fSxcbiAgdGFyZ2V0U2VjY2lvbklkLFxuICBzZWNjaW9uZXMgPSBbXSxcbiAgbm9ybWFsaXphckFsdG9Nb2RvLFxuICBBTFRVUkFfUEFOVEFMTEFfRURJVE9SLFxufSkge1xuICBjb25zdCBpc01vYmlsZSA9XG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICh3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDEwMjRweClcIikubWF0Y2hlcyB8fFxuICAgICAgd2luZG93Lm1hdGNoTWVkaWEoXCIocG9pbnRlcjogY29hcnNlKVwiKS5tYXRjaGVzKTtcblxuICBjb25zdCB0aXBvID0gcGF5bG9hZC50aXBvIHx8IFwidGV4dG9cIjtcbiAgY29uc3QgaWQgPSBwYXlsb2FkLmlkIHx8IGAke3RpcG99LSR7RGF0ZS5ub3coKS50b1N0cmluZygzNil9YDtcblxuICBjb25zdCBpbmNvbWluZ1dpZHRoID0gdG9OdW1iZXIocGF5bG9hZC53aWR0aCk7XG4gIGNvbnN0IGluY29taW5nSGVpZ2h0ID0gdG9OdW1iZXIocGF5bG9hZC5oZWlnaHQpO1xuICBjb25zdCBpbmNvbWluZ1ggPSB0b051bWJlcihwYXlsb2FkLngpO1xuICBjb25zdCBpbmNvbWluZ1kgPSB0b051bWJlcihwYXlsb2FkLnkpO1xuXG4gIGxldCBuZXh0ID0ge1xuICAgIC4uLnBheWxvYWQsXG4gICAgaWQsXG4gICAgdGlwbyxcbiAgICBzZWNjaW9uSWQ6IHRhcmdldFNlY2Npb25JZCxcbiAgICByb3RhdGlvbjogdG9OdW1iZXIocGF5bG9hZC5yb3RhdGlvbiwgMCksXG4gICAgc2NhbGVYOiB0b051bWJlcihwYXlsb2FkLnNjYWxlWCwgMSksXG4gICAgc2NhbGVZOiB0b051bWJlcihwYXlsb2FkLnNjYWxlWSwgMSksXG4gIH07XG5cbiAgaWYgKHRpcG8gPT09IFwidGV4dG9cIikge1xuICAgIGNvbnN0IHZhcmlhbnQgPSBpbmZlclRleHRWYXJpYW50KHBheWxvYWQudmFyaWFudCwgaXNNb2JpbGUpO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gMTAwO1xuICAgIGNvbnN0IHkgPSBpbmNvbWluZ1kgPz8gdmFyaWFudC55O1xuXG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICB0ZXh0bzogcGF5bG9hZC50ZXh0byA/PyB2YXJpYW50LnRleHRvLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICBmb250U2l6ZTogdG9OdW1iZXIocGF5bG9hZC5mb250U2l6ZSwgdmFyaWFudC5mb250U2l6ZSksXG4gICAgICBjb2xvcjogcGF5bG9hZC5jb2xvciA/PyBcIiMwMDAwMDBcIixcbiAgICAgIGZvbnRGYW1pbHk6IHBheWxvYWQuZm9udEZhbWlseSA/PyBcInNhbnMtc2VyaWZcIixcbiAgICAgIGZvbnRXZWlnaHQ6IHBheWxvYWQuZm9udFdlaWdodCA/PyB2YXJpYW50LmZvbnRXZWlnaHQsXG4gICAgICBmb250U3R5bGU6IHBheWxvYWQuZm9udFN0eWxlID8/IHZhcmlhbnQuZm9udFN0eWxlLFxuICAgICAgdGV4dERlY29yYXRpb246IHBheWxvYWQudGV4dERlY29yYXRpb24gPz8gXCJub25lXCIsXG4gICAgICBhbGlnbjogcGF5bG9hZC5hbGlnbiA/PyBcImxlZnRcIixcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiZm9ybWFcIikge1xuICAgIGNvbnN0IGZpZ3VyYSA9IHBheWxvYWQuZmlndXJhIHx8IFwicmVjdFwiO1xuICAgIGNvbnN0IHNpemUgPSBpc01vYmlsZSA/IDEyMCA6IDEwMDtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gc2l6ZTtcbiAgICBjb25zdCBoZWlnaHQgPSBpbmNvbWluZ0hlaWdodCA/PyBzaXplO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gTWF0aC5yb3VuZCgoQ0FOVkFTX1dJRFRIIC0gd2lkdGgpIC8gMik7XG4gICAgY29uc3QgeSA9IGluY29taW5nWSA/PyAxMjA7XG5cbiAgICBuZXh0ID0ge1xuICAgICAgLi4ubmV4dCxcbiAgICAgIGZpZ3VyYSxcbiAgICAgIGNvbG9yOiBwYXlsb2FkLmNvbG9yID8/IFwiIzAwMDAwMFwiLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIHRleHRvOiBwYXlsb2FkLnRleHRvID8/IFwiXCIsXG4gICAgICBmb250U2l6ZTogdG9OdW1iZXIocGF5bG9hZC5mb250U2l6ZSwgMjQpLFxuICAgICAgZm9udEZhbWlseTogcGF5bG9hZC5mb250RmFtaWx5ID8/IFwic2Fucy1zZXJpZlwiLFxuICAgICAgZm9udFdlaWdodDogcGF5bG9hZC5mb250V2VpZ2h0ID8/IFwibm9ybWFsXCIsXG4gICAgICBmb250U3R5bGU6IHBheWxvYWQuZm9udFN0eWxlID8/IFwibm9ybWFsXCIsXG4gICAgICBjb2xvclRleHRvOiBwYXlsb2FkLmNvbG9yVGV4dG8gPz8gXCIjMDAwMDAwXCIsXG4gICAgICBhbGlnbjogcGF5bG9hZC5hbGlnbiA/PyBcImNlbnRlclwiLFxuICAgIH07XG5cbiAgICBpZiAoZmlndXJhID09PSBcImxpbmVcIikge1xuICAgICAgbmV4dC5wb2ludHMgPSBBcnJheS5pc0FycmF5KHBheWxvYWQucG9pbnRzKSA/IHBheWxvYWQucG9pbnRzIDogWzAsIDAsIDEwMCwgMF07XG4gICAgICBuZXh0LnN0cm9rZVdpZHRoID0gdG9OdW1iZXIocGF5bG9hZC5zdHJva2VXaWR0aCwgMik7XG4gICAgICBkZWxldGUgbmV4dC53aWR0aDtcbiAgICAgIGRlbGV0ZSBuZXh0LmhlaWdodDtcbiAgICB9IGVsc2UgaWYgKGZpZ3VyYSA9PT0gXCJjaXJjbGVcIikge1xuICAgICAgbmV4dC5yYWRpdXMgPSB0b051bWJlcihwYXlsb2FkLnJhZGl1cywgNTApO1xuICAgIH0gZWxzZSBpZiAoZmlndXJhID09PSBcInRyaWFuZ2xlXCIpIHtcbiAgICAgIG5leHQucmFkaXVzID0gdG9OdW1iZXIocGF5bG9hZC5yYWRpdXMsIDYwKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodGlwbyA9PT0gXCJpY29ub1wiIHx8IHRpcG8gPT09IFwiaWNvbm8tc3ZnXCIpIHtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gKGlzTW9iaWxlID8gMTEyIDogMTI4KTtcbiAgICBjb25zdCBoZWlnaHQgPSBpbmNvbWluZ0hlaWdodCA/PyB3aWR0aDtcbiAgICBjb25zdCB4ID0gaW5jb21pbmdYID8/IE1hdGgucm91bmQoKENBTlZBU19XSURUSCAtIHdpZHRoKSAvIDIpO1xuICAgIGNvbnN0IHkgPSBpbmNvbWluZ1kgPz8gMTIwO1xuICAgIG5leHQgPSB7XG4gICAgICAuLi5uZXh0LFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiaW1hZ2VuXCIpIHtcbiAgICBjb25zdCBzb3VyY2VXaWR0aCA9IHRvTnVtYmVyKHBheWxvYWQuYW5jaG8sIDMwMCk7XG4gICAgY29uc3Qgc291cmNlSGVpZ2h0ID0gdG9OdW1iZXIocGF5bG9hZC5hbHRvLCAzMDApO1xuICAgIGNvbnN0IHdpZHRoID0gaW5jb21pbmdXaWR0aCA/PyBNYXRoLm1pbihpc01vYmlsZSA/IDI2MCA6IDMyMCwgc291cmNlV2lkdGgpO1xuICAgIGNvbnN0IHJhdGlvID0gc291cmNlV2lkdGggPiAwID8gc291cmNlSGVpZ2h0IC8gc291cmNlV2lkdGggOiAxO1xuICAgIGNvbnN0IGhlaWdodCA9IGluY29taW5nSGVpZ2h0ID8/IE1hdGgubWF4KDQwLCBNYXRoLnJvdW5kKHdpZHRoICogcmF0aW8pKTtcbiAgICBjb25zdCB4ID0gaW5jb21pbmdYID8/IE1hdGgucm91bmQoKENBTlZBU19XSURUSCAtIHdpZHRoKSAvIDIpO1xuICAgIGNvbnN0IHkgPSBpbmNvbWluZ1kgPz8gMTIwO1xuICAgIG5leHQgPSB7XG4gICAgICAuLi5uZXh0LFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiZ2FsZXJpYVwiKSB7XG4gICAgY29uc3Qgcm93cyA9IE1hdGgubWF4KDEsIHRvTnVtYmVyKHBheWxvYWQucm93cywgMikpO1xuICAgIGNvbnN0IGNvbHMgPSBNYXRoLm1heCgxLCB0b051bWJlcihwYXlsb2FkLmNvbHMsIDIpKTtcbiAgICBjb25zdCBnYXAgPSBNYXRoLm1heCgwLCB0b051bWJlcihwYXlsb2FkLmdhcCwgOCkpO1xuICAgIGNvbnN0IHdpZHRoUGN0ID0gY2xhbXAoXG4gICAgICB0b051bWJlcihwYXlsb2FkLndpZHRoUGN0LCBpc01vYmlsZSA/IDkyIDogNzApLFxuICAgICAgMTAsXG4gICAgICAxMDBcbiAgICApO1xuICAgIGNvbnN0IHdpZHRoID0gaW5jb21pbmdXaWR0aCA/PyAoQ0FOVkFTX1dJRFRIICogd2lkdGhQY3QpIC8gMTAwO1xuICAgIGNvbnN0IGhlaWdodCA9XG4gICAgICBpbmNvbWluZ0hlaWdodCA/P1xuICAgICAgY2FsY0dhbGxlcnlIZWlnaHQoe1xuICAgICAgICB3aWR0aCxcbiAgICAgICAgcm93cyxcbiAgICAgICAgY29scyxcbiAgICAgICAgZ2FwLFxuICAgICAgICByYXRpbzogcGF5bG9hZC5yYXRpbyxcbiAgICAgIH0pO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gTWF0aC5yb3VuZCgoQ0FOVkFTX1dJRFRIIC0gd2lkdGgpIC8gMik7XG4gICAgY29uc3QgeSA9IGluY29taW5nWSA/PyAxMjA7XG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICByb3dzLFxuICAgICAgY29scyxcbiAgICAgIGdhcCxcbiAgICAgIHdpZHRoUGN0LFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiY291bnRkb3duXCIpIHtcbiAgICBjb25zdCBwcmVzZXRQcm9wcyA9IHBheWxvYWQucHJlc2V0UHJvcHMgfHwgcGF5bG9hZC5wcm9wcyB8fCB7fTtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gY2FsY0NvdW50ZG93bkluaXRpYWxXaWR0aChwcmVzZXRQcm9wcyk7XG4gICAgY29uc3QgaGVpZ2h0ID0gaW5jb21pbmdIZWlnaHQgPz8gOTA7XG4gICAgY29uc3QgeCA9IGluY29taW5nWCA/PyBNYXRoLnJvdW5kKChDQU5WQVNfV0lEVEggLSB3aWR0aCkgLyAyKTtcbiAgICBjb25zdCB5ID0gaW5jb21pbmdZID8/IDE0MDtcbiAgICBuZXh0ID0ge1xuICAgICAgLi4ubmV4dCxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBmZWNoYU9iamV0aXZvOiBwYXlsb2FkLmZlY2hhT2JqZXRpdm8gfHwgcGF5bG9hZC50YXJnZXRJU08gfHwgcGF5bG9hZC5mZWNoYUlTTyxcbiAgICAgIC4uLnByZXNldFByb3BzLFxuICAgIH07XG4gIH0gZWxzZSBpZiAodGlwbyA9PT0gXCJyc3ZwLWJvdG9uXCIpIHtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gMjAwO1xuICAgIGNvbnN0IGhlaWdodCA9IGluY29taW5nSGVpZ2h0ID8/IDUwO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gTWF0aC5yb3VuZCgoQ0FOVkFTX1dJRFRIIC0gd2lkdGgpIC8gMik7XG4gICAgY29uc3QgeSA9IGluY29taW5nWSA/PyAxNDA7XG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICB4OiBpbmNvbWluZ1ggPz8gMTAwLFxuICAgICAgeTogaW5jb21pbmdZID8/IDEyMCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKE51bWJlci5pc0Zpbml0ZShuZXh0LndpZHRoKSkge1xuICAgIG5leHQueCA9IGNsYW1wKHRvTnVtYmVyKG5leHQueCwgMCksIDAsIE1hdGgubWF4KDAsIENBTlZBU19XSURUSCAtIG5leHQud2lkdGgpKTtcbiAgfSBlbHNlIHtcbiAgICBuZXh0LnggPSBjbGFtcCh0b051bWJlcihuZXh0LngsIDApLCAwLCBDQU5WQVNfV0lEVEgpO1xuICB9XG4gIG5leHQueSA9IE1hdGgubWF4KDAsIHRvTnVtYmVyKG5leHQueSwgMCkpO1xuXG4gIGNvbnN0IHNlY2Npb24gPSBzZWNjaW9uZXMuZmluZCgocykgPT4gcy5pZCA9PT0gdGFyZ2V0U2VjY2lvbklkKTtcbiAgaWYgKG5vcm1hbGl6YXJBbHRvTW9kbz8uKHNlY2Npb24/LmFsdG9Nb2RvKSA9PT0gXCJwYW50YWxsYVwiKSB7XG4gICAgY29uc3QgeVB4ID0gTnVtYmVyLmlzRmluaXRlKG5leHQueSkgPyBuZXh0LnkgOiAwO1xuICAgIG5leHQueU5vcm0gPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB5UHggLyBBTFRVUkFfUEFOVEFMTEFfRURJVE9SKSk7XG4gIH1cblxuICBjb25zdCB7XG4gICAgdmFyaWFudDogX3ZhcmlhbnQsXG4gICAgcHJlc2V0UHJvcHM6IF9wcmVzZXRQcm9wcyxcbiAgICB0YXJnZXRJU086IF90YXJnZXRJU08sXG4gICAgLi4ucGVyc2lzdGFibGVcbiAgfSA9IG5leHQ7XG5cbiAgcmV0dXJuIHN0cmlwVW5kZWZpbmVkKHBlcnNpc3RhYmxlKTtcbn1cblxyXG4iXSwibmFtZXMiOlsiQ0FOVkFTX1dJRFRIIiwiY2xhbXAiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsIk1hdGgiLCJ0b051bWJlciIsImZhbGxiYWNrIiwibiIsIk51bWJlciIsImlzRmluaXRlIiwic3RyaXBVbmRlZmluZWQiLCJvYmoiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJmaWx0ZXIiLCJ1bmRlZmluZWQiLCJjYWxjQ291bnRkb3duSW5pdGlhbFdpZHRoIiwicHJlc2V0UHJvcHMiLCJnYXAiLCJwYWRkaW5nWCIsImNoaXBXaWR0aCIsImNoaXBXIiwicm91bmQiLCJpbmZlclRleHRWYXJpYW50IiwidmFyaWFudCIsImlzTW9iaWxlIiwidGV4dG8iLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJmb250U3R5bGUiLCJ5IiwiY2FsY0dhbGxlcnlIZWlnaHQiLCJ3aWR0aCIsInJvd3MiLCJjb2xzIiwicmF0aW8iLCJyYXRpb0NlbGwiLCJjZWxsVyIsImNlbGxIIiwiY29tcHV0ZUluc2VydERlZmF1bHRzIiwicGF5bG9hZCIsInRhcmdldFNlY2Npb25JZCIsInNlY2Npb25lcyIsIm5vcm1hbGl6YXJBbHRvTW9kbyIsIkFMVFVSQV9QQU5UQUxMQV9FRElUT1IiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsInRpcG8iLCJpZCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsImluY29taW5nV2lkdGgiLCJpbmNvbWluZ0hlaWdodCIsImhlaWdodCIsImluY29taW5nWCIsIngiLCJpbmNvbWluZ1kiLCJuZXh0Iiwic2VjY2lvbklkIiwicm90YXRpb24iLCJzY2FsZVgiLCJzY2FsZVkiLCJjb2xvciIsImZvbnRGYW1pbHkiLCJ0ZXh0RGVjb3JhdGlvbiIsImFsaWduIiwiZmlndXJhIiwic2l6ZSIsImNvbG9yVGV4dG8iLCJwb2ludHMiLCJBcnJheSIsImlzQXJyYXkiLCJzdHJva2VXaWR0aCIsInJhZGl1cyIsInNvdXJjZVdpZHRoIiwiYW5jaG8iLCJzb3VyY2VIZWlnaHQiLCJhbHRvIiwid2lkdGhQY3QiLCJwcm9wcyIsImZlY2hhT2JqZXRpdm8iLCJ0YXJnZXRJU08iLCJmZWNoYUlTTyIsInNlY2Npb24iLCJmaW5kIiwicyIsImFsdG9Nb2RvIiwieVB4IiwieU5vcm0iLCJfdmFyaWFudCIsIl9wcmVzZXRQcm9wcyIsIl90YXJnZXRJU08iLCJwZXJzaXN0YWJsZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/events/computeInsertDefaults.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/events/useEditorEvents.js":
/*!*********************************************************!*\
  !*** ./src/components/editor/events/useEditorEvents.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useEditorEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var _computeInsertDefaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./computeInsertDefaults */ \"(pages-dir-node)/./src/components/editor/events/computeInsertDefaults.js\");\n// src/components/editor/events/useEditorEvents.js\n\n\n/**\n * Hook que concentra los eventos globales del editor y utilidades expuestas en window:\n * - window.asignarImagenACelda\n * - window.addEventListener(\"insertar-elemento\")\n * - window.addEventListener(\"actualizar-elemento\")\n * - window.addEventListener(\"agregar-cuadro-texto\")\n * - window.addEventListener(\"crear-seccion\")  (NO acá: ya está en useSectionsManager)\n *\n * ⚠️ Importante: no cambia lógica, solo mueve lo que ya existía en CanvasEditor.\n */ function useEditorEvents({ // estado/props necesarios\nceldaGaleriaActiva, setCeldaGaleriaActiva, setObjetos, secciones, seccionActivaId, setElementosSeleccionados, normalizarAltoModo, ALTURA_PANTALLA_EDITOR, // refs existentes\nnuevoTextoRef }) {\n    // ------------------------------------------------------------\n    // 1) Exponer función global: asignar imagen a la celda activa\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            window.asignarImagenACelda = ({\n                \"useEditorEvents.useEffect\": (mediaUrl, fit = \"cover\", bg)=>{\n                    if (!celdaGaleriaActiva) return false; // no hay slot activo\n                    const { objId, index } = celdaGaleriaActiva;\n                    setObjetos({\n                        \"useEditorEvents.useEffect\": (prev)=>{\n                            const i = prev.findIndex({\n                                \"useEditorEvents.useEffect.i\": (o)=>o.id === objId\n                            }[\"useEditorEvents.useEffect.i\"]);\n                            if (i === -1) return prev;\n                            const obj = prev[i];\n                            if (obj.tipo !== \"galeria\") return prev;\n                            const next = [\n                                ...prev\n                            ];\n                            const cells = Array.isArray(obj.cells) ? [\n                                ...obj.cells\n                            ] : [];\n                            const prevCell = cells[index] || {};\n                            cells[index] = {\n                                ...prevCell,\n                                mediaUrl,\n                                fit: fit || prevCell.fit || \"cover\",\n                                bg: bg ?? prevCell.bg ?? \"#f3f4f6\"\n                            };\n                            next[i] = {\n                                ...obj,\n                                cells\n                            };\n                            return next;\n                        }\n                    }[\"useEditorEvents.useEffect\"]);\n                    // opcional: desactivar el slot activo después de asignar\n                    setCeldaGaleriaActiva(null);\n                    return true;\n                }\n            })[\"useEditorEvents.useEffect\"];\n            return ({\n                \"useEditorEvents.useEffect\": ()=>{\n                    if (window.asignarImagenACelda) delete window.asignarImagenACelda;\n                }\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        celdaGaleriaActiva,\n        setObjetos,\n        setCeldaGaleriaActiva\n    ]);\n    // ------------------------------------------------------------\n    // 2) Evento global: insertar-elemento\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            const handler = {\n                \"useEditorEvents.useEffect.handler\": (e)=>{\n                    const nuevo = e.detail || {};\n                    const fallbackId = window._lastSeccionActivaId || Array.isArray(secciones) && secciones[0]?.id || null;\n                    const targetSeccionId = seccionActivaId || fallbackId;\n                    if (!targetSeccionId) {\n                        alert(\"⚠️ No hay secciones aún. Creá una sección para insertar el elemento.\");\n                        return;\n                    }\n                    const nuevoConSeccion = (0,_computeInsertDefaults__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n                        payload: nuevo,\n                        targetSeccionId,\n                        secciones,\n                        normalizarAltoModo,\n                        ALTURA_PANTALLA_EDITOR\n                    });\n                    setObjetos({\n                        \"useEditorEvents.useEffect.handler\": (prev)=>{\n                            const next = [\n                                ...prev,\n                                nuevoConSeccion\n                            ];\n                            return next;\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                    setElementosSeleccionados([\n                        nuevoConSeccion.id\n                    ]);\n                }\n            }[\"useEditorEvents.useEffect.handler\"];\n            window.addEventListener(\"insertar-elemento\", handler);\n            return ({\n                \"useEditorEvents.useEffect\": ()=>window.removeEventListener(\"insertar-elemento\", handler)\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        seccionActivaId,\n        secciones,\n        setObjetos,\n        setElementosSeleccionados,\n        normalizarAltoModo,\n        ALTURA_PANTALLA_EDITOR\n    ]);\n    // ------------------------------------------------------------\n    // 3) Evento global: actualizar-elemento\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            const handler = {\n                \"useEditorEvents.useEffect.handler\": (e)=>{\n                    const { id, cambios } = e.detail || {};\n                    if (!cambios) return;\n                    const targetId = id || (window._elementosSeleccionados?.[0] ?? null);\n                    if (!targetId) return;\n                    setObjetos({\n                        \"useEditorEvents.useEffect.handler\": (prev)=>{\n                            const i = prev.findIndex({\n                                \"useEditorEvents.useEffect.handler.i\": (o)=>o.id === targetId\n                            }[\"useEditorEvents.useEffect.handler.i\"]);\n                            if (i === -1) return prev;\n                            const next = [\n                                ...prev\n                            ];\n                            next[i] = {\n                                ...next[i],\n                                ...cambios\n                            };\n                            return next;\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                    // ✅ NUEVO: avisar a SelectionBounds que reattach el transformer\n                    requestAnimationFrame({\n                        \"useEditorEvents.useEffect.handler\": ()=>{\n                            requestAnimationFrame({\n                                \"useEditorEvents.useEffect.handler\": ()=>{\n                                    window.dispatchEvent(new CustomEvent(\"element-ref-registrado\", {\n                                        detail: {\n                                            id: targetId\n                                        }\n                                    }));\n                                }\n                            }[\"useEditorEvents.useEffect.handler\"]);\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                }\n            }[\"useEditorEvents.useEffect.handler\"];\n            window.addEventListener(\"actualizar-elemento\", handler);\n            return ({\n                \"useEditorEvents.useEffect\": ()=>window.removeEventListener(\"actualizar-elemento\", handler)\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        setObjetos\n    ]);\n    // ------------------------------------------------------------\n    // 4) Evento global: agregar-cuadro-texto\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            const handler = {\n                \"useEditorEvents.useEffect.handler\": ()=>{\n                    if (!seccionActivaId) {\n                        alert(\"Seleccioná una sección antes de agregar un cuadro de texto.\");\n                        return;\n                    }\n                    const nuevo = {\n                        id: `texto-${Date.now()}`,\n                        tipo: \"texto\",\n                        texto: \"Texto\",\n                        x: 100,\n                        y: 100,\n                        fontSize: 24,\n                        color: \"#000000\",\n                        fontFamily: \"sans-serif\",\n                        fontWeight: \"normal\",\n                        fontStyle: \"normal\",\n                        textDecoration: \"none\",\n                        align: \"left\",\n                        rotation: 0,\n                        scaleX: 1,\n                        scaleY: 1,\n                        seccionId: seccionActivaId\n                    };\n                    // ✅ Si la sección activa es pantalla, inicializamos yNorm\n                    const secActiva = secciones.find({\n                        \"useEditorEvents.useEffect.handler.secActiva\": (s)=>s.id === seccionActivaId\n                    }[\"useEditorEvents.useEffect.handler.secActiva\"]);\n                    if (normalizarAltoModo(secActiva?.altoModo) === \"pantalla\") {\n                        nuevo.yNorm = Math.max(0, Math.min(1, (Number(nuevo.y) || 0) / ALTURA_PANTALLA_EDITOR));\n                    }\n                    // ✅ respeta el comportamiento original\n                    if (nuevoTextoRef?.current != null) {\n                        nuevoTextoRef.current = nuevo.id;\n                    }\n                    setObjetos({\n                        \"useEditorEvents.useEffect.handler\": (prev)=>[\n                                ...prev,\n                                nuevo\n                            ]\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                }\n            }[\"useEditorEvents.useEffect.handler\"];\n            window.addEventListener(\"agregar-cuadro-texto\", handler);\n            return ({\n                \"useEditorEvents.useEffect\": ()=>window.removeEventListener(\"agregar-cuadro-texto\", handler)\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        seccionActivaId,\n        secciones,\n        setObjetos,\n        normalizarAltoModo,\n        ALTURA_PANTALLA_EDITOR,\n        nuevoTextoRef\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9ldmVudHMvdXNlRWRpdG9yRXZlbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGtEQUFrRDtBQUNoQjtBQUMwQjtBQUU1RDs7Ozs7Ozs7O0NBU0MsR0FDYyxTQUFTRSxnQkFBZ0IsRUFDdEMsMEJBQTBCO0FBQzFCQyxrQkFBa0IsRUFDbEJDLHFCQUFxQixFQUNyQkMsVUFBVSxFQUVWQyxTQUFTLEVBQ1RDLGVBQWUsRUFFZkMseUJBQXlCLEVBRXpCQyxrQkFBa0IsRUFDbEJDLHNCQUFzQixFQUV0QixrQkFBa0I7QUFDbEJDLGFBQWEsRUFHZDtJQUNDLCtEQUErRDtJQUMvRCw4REFBOEQ7SUFDOUQsK0RBQStEO0lBQy9EWCxnREFBU0E7cUNBQUM7WUFDUlksT0FBT0MsbUJBQW1COzZDQUFHLENBQUNDLFVBQVVDLE1BQU0sT0FBTyxFQUFFQztvQkFDckQsSUFBSSxDQUFDYixvQkFBb0IsT0FBTyxPQUFPLHFCQUFxQjtvQkFDNUQsTUFBTSxFQUFFYyxLQUFLLEVBQUVDLEtBQUssRUFBRSxHQUFHZjtvQkFFekJFO3FEQUFXLENBQUNjOzRCQUNWLE1BQU1DLElBQUlELEtBQUtFLFNBQVM7K0RBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsRUFBRSxLQUFLTjs7NEJBQ3pDLElBQUlHLE1BQU0sQ0FBQyxHQUFHLE9BQU9EOzRCQUVyQixNQUFNSyxNQUFNTCxJQUFJLENBQUNDLEVBQUU7NEJBQ25CLElBQUlJLElBQUlDLElBQUksS0FBSyxXQUFXLE9BQU9OOzRCQUVuQyxNQUFNTyxPQUFPO21DQUFJUDs2QkFBSzs0QkFDdEIsTUFBTVEsUUFBUUMsTUFBTUMsT0FBTyxDQUFDTCxJQUFJRyxLQUFLLElBQUk7bUNBQUlILElBQUlHLEtBQUs7NkJBQUMsR0FBRyxFQUFFOzRCQUM1RCxNQUFNRyxXQUFXSCxLQUFLLENBQUNULE1BQU0sSUFBSSxDQUFDOzRCQUNsQ1MsS0FBSyxDQUFDVCxNQUFNLEdBQUc7Z0NB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b3JcXGV2ZW50c1xcdXNlRWRpdG9yRXZlbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2VkaXRvci9ldmVudHMvdXNlRWRpdG9yRXZlbnRzLmpzXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBjb21wdXRlSW5zZXJ0RGVmYXVsdHMgZnJvbSBcIi4vY29tcHV0ZUluc2VydERlZmF1bHRzXCI7XG5cbi8qKlxuICogSG9vayBxdWUgY29uY2VudHJhIGxvcyBldmVudG9zIGdsb2JhbGVzIGRlbCBlZGl0b3IgeSB1dGlsaWRhZGVzIGV4cHVlc3RhcyBlbiB3aW5kb3c6XG4gKiAtIHdpbmRvdy5hc2lnbmFySW1hZ2VuQUNlbGRhXG4gKiAtIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaW5zZXJ0YXItZWxlbWVudG9cIilcbiAqIC0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhY3R1YWxpemFyLWVsZW1lbnRvXCIpXG4gKiAtIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYWdyZWdhci1jdWFkcm8tdGV4dG9cIilcbiAqIC0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjcmVhci1zZWNjaW9uXCIpICAoTk8gYWPDoTogeWEgZXN0w6EgZW4gdXNlU2VjdGlvbnNNYW5hZ2VyKVxuICpcbiAqIOKaoO+4jyBJbXBvcnRhbnRlOiBubyBjYW1iaWEgbMOzZ2ljYSwgc29sbyBtdWV2ZSBsbyBxdWUgeWEgZXhpc3TDrWEgZW4gQ2FudmFzRWRpdG9yLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VFZGl0b3JFdmVudHMoe1xuICAvLyBlc3RhZG8vcHJvcHMgbmVjZXNhcmlvc1xuICBjZWxkYUdhbGVyaWFBY3RpdmEsXG4gIHNldENlbGRhR2FsZXJpYUFjdGl2YSxcbiAgc2V0T2JqZXRvcyxcblxuICBzZWNjaW9uZXMsXG4gIHNlY2Npb25BY3RpdmFJZCxcblxuICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxuXG4gIG5vcm1hbGl6YXJBbHRvTW9kbyxcbiAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcblxuICAvLyByZWZzIGV4aXN0ZW50ZXNcbiAgbnVldm9UZXh0b1JlZixcblxuICAvLyBzZXRTZWNjaW9uQWN0aXZhSWQgTk8gbG8gdXNhbW9zIGFjw6EgKHNvbG8gbG8gdXNhIGVsIGNhbnZhcyBlbiBvdHJvcyBoYW5kbGVycylcbn0pIHtcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDEpIEV4cG9uZXIgZnVuY2nDs24gZ2xvYmFsOiBhc2lnbmFyIGltYWdlbiBhIGxhIGNlbGRhIGFjdGl2YVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB3aW5kb3cuYXNpZ25hckltYWdlbkFDZWxkYSA9IChtZWRpYVVybCwgZml0ID0gXCJjb3ZlclwiLCBiZykgPT4ge1xuICAgICAgaWYgKCFjZWxkYUdhbGVyaWFBY3RpdmEpIHJldHVybiBmYWxzZTsgLy8gbm8gaGF5IHNsb3QgYWN0aXZvXG4gICAgICBjb25zdCB7IG9iaklkLCBpbmRleCB9ID0gY2VsZGFHYWxlcmlhQWN0aXZhO1xuXG4gICAgICBzZXRPYmpldG9zKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBwcmV2LmZpbmRJbmRleCgobykgPT4gby5pZCA9PT0gb2JqSWQpO1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHJldHVybiBwcmV2O1xuXG4gICAgICAgIGNvbnN0IG9iaiA9IHByZXZbaV07XG4gICAgICAgIGlmIChvYmoudGlwbyAhPT0gXCJnYWxlcmlhXCIpIHJldHVybiBwcmV2O1xuXG4gICAgICAgIGNvbnN0IG5leHQgPSBbLi4ucHJldl07XG4gICAgICAgIGNvbnN0IGNlbGxzID0gQXJyYXkuaXNBcnJheShvYmouY2VsbHMpID8gWy4uLm9iai5jZWxsc10gOiBbXTtcbiAgICAgICAgY29uc3QgcHJldkNlbGwgPSBjZWxsc1tpbmRleF0gfHwge307XG4gICAgICAgIGNlbGxzW2luZGV4XSA9IHtcbiAgICAgICAgICAuLi5wcmV2Q2VsbCxcbiAgICAgICAgICBtZWRpYVVybCxcbiAgICAgICAgICBmaXQ6IGZpdCB8fCBwcmV2Q2VsbC5maXQgfHwgXCJjb3ZlclwiLFxuICAgICAgICAgIGJnOiBiZyA/PyBwcmV2Q2VsbC5iZyA/PyBcIiNmM2Y0ZjZcIixcbiAgICAgICAgfTtcblxuICAgICAgICBuZXh0W2ldID0geyAuLi5vYmosIGNlbGxzIH07XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfSk7XG5cbiAgICAgIC8vIG9wY2lvbmFsOiBkZXNhY3RpdmFyIGVsIHNsb3QgYWN0aXZvIGRlc3B1w6lzIGRlIGFzaWduYXJcbiAgICAgIHNldENlbGRhR2FsZXJpYUFjdGl2YShudWxsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5hc2lnbmFySW1hZ2VuQUNlbGRhKSBkZWxldGUgd2luZG93LmFzaWduYXJJbWFnZW5BQ2VsZGE7XG4gICAgfTtcbiAgfSwgW2NlbGRhR2FsZXJpYUFjdGl2YSwgc2V0T2JqZXRvcywgc2V0Q2VsZGFHYWxlcmlhQWN0aXZhXSk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDIpIEV2ZW50byBnbG9iYWw6IGluc2VydGFyLWVsZW1lbnRvXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgbnVldm8gPSBlLmRldGFpbCB8fCB7fTtcblxuICAgICAgY29uc3QgZmFsbGJhY2tJZCA9XG4gICAgICAgIHdpbmRvdy5fbGFzdFNlY2Npb25BY3RpdmFJZCB8fFxuICAgICAgICAoQXJyYXkuaXNBcnJheShzZWNjaW9uZXMpICYmIHNlY2Npb25lc1swXT8uaWQpIHx8XG4gICAgICAgIG51bGw7XG5cbiAgICAgIGNvbnN0IHRhcmdldFNlY2Npb25JZCA9IHNlY2Npb25BY3RpdmFJZCB8fCBmYWxsYmFja0lkO1xuXG4gICAgICBpZiAoIXRhcmdldFNlY2Npb25JZCkge1xuICAgICAgICBhbGVydChcIuKaoO+4jyBObyBoYXkgc2VjY2lvbmVzIGHDum4uIENyZcOhIHVuYSBzZWNjacOzbiBwYXJhIGluc2VydGFyIGVsIGVsZW1lbnRvLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBudWV2b0NvblNlY2Npb24gPSBjb21wdXRlSW5zZXJ0RGVmYXVsdHMoe1xuICAgICAgICBwYXlsb2FkOiBudWV2byxcbiAgICAgICAgdGFyZ2V0U2VjY2lvbklkLFxuICAgICAgICBzZWNjaW9uZXMsXG4gICAgICAgIG5vcm1hbGl6YXJBbHRvTW9kbyxcbiAgICAgICAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcbiAgICAgIH0pO1xuXG4gICAgICBzZXRPYmpldG9zKChwcmV2KSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBbLi4ucHJldiwgbnVldm9Db25TZWNjaW9uXTtcbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICB9KTtcblxuICAgICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyhbbnVldm9Db25TZWNjaW9uLmlkXSk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaW5zZXJ0YXItZWxlbWVudG9cIiwgaGFuZGxlcik7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW5zZXJ0YXItZWxlbWVudG9cIiwgaGFuZGxlcik7XG4gIH0sIFtcbiAgICBzZWNjaW9uQWN0aXZhSWQsXG4gICAgc2VjY2lvbmVzLFxuICAgIHNldE9iamV0b3MsXG4gICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcbiAgICBub3JtYWxpemFyQWx0b01vZG8sXG4gICAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcbiAgXSk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDMpIEV2ZW50byBnbG9iYWw6IGFjdHVhbGl6YXItZWxlbWVudG9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlciA9IChlKSA9PiB7XG4gICAgICBjb25zdCB7IGlkLCBjYW1iaW9zIH0gPSBlLmRldGFpbCB8fCB7fTtcbiAgICAgIGlmICghY2FtYmlvcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCB0YXJnZXRJZCA9IGlkIHx8ICh3aW5kb3cuX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3M/LlswXSA/PyBudWxsKTtcbiAgICAgIGlmICghdGFyZ2V0SWQpIHJldHVybjtcblxuICAgICAgc2V0T2JqZXRvcygocHJldikgPT4ge1xuICAgICAgICBjb25zdCBpID0gcHJldi5maW5kSW5kZXgoKG8pID0+IG8uaWQgPT09IHRhcmdldElkKTtcbiAgICAgICAgaWYgKGkgPT09IC0xKSByZXR1cm4gcHJldjtcblxuICAgICAgICBjb25zdCBuZXh0ID0gWy4uLnByZXZdO1xuICAgICAgICBuZXh0W2ldID0geyAuLi5uZXh0W2ldLCAuLi5jYW1iaW9zIH07XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOKchSBOVUVWTzogYXZpc2FyIGEgU2VsZWN0aW9uQm91bmRzIHF1ZSByZWF0dGFjaCBlbCB0cmFuc2Zvcm1lclxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudChcImVsZW1lbnQtcmVmLXJlZ2lzdHJhZG9cIiwge1xuICAgICAgICAgICAgICBkZXRhaWw6IHsgaWQ6IHRhcmdldElkIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYWN0dWFsaXphci1lbGVtZW50b1wiLCBoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhY3R1YWxpemFyLWVsZW1lbnRvXCIsIGhhbmRsZXIpO1xuICB9LCBbc2V0T2JqZXRvc10pO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyA0KSBFdmVudG8gZ2xvYmFsOiBhZ3JlZ2FyLWN1YWRyby10ZXh0b1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKCFzZWNjaW9uQWN0aXZhSWQpIHtcbiAgICAgICAgYWxlcnQoXCJTZWxlY2Npb27DoSB1bmEgc2VjY2nDs24gYW50ZXMgZGUgYWdyZWdhciB1biBjdWFkcm8gZGUgdGV4dG8uXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG51ZXZvID0ge1xuICAgICAgICBpZDogYHRleHRvLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB0aXBvOiBcInRleHRvXCIsXG4gICAgICAgIHRleHRvOiBcIlRleHRvXCIsXG4gICAgICAgIHg6IDEwMCxcbiAgICAgICAgeTogMTAwLFxuICAgICAgICBmb250U2l6ZTogMjQsXG4gICAgICAgIGNvbG9yOiBcIiMwMDAwMDBcIixcbiAgICAgICAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXG4gICAgICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgICAgIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgICAgICAgdGV4dERlY29yYXRpb246IFwibm9uZVwiLFxuICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXG4gICAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgICBzY2FsZVg6IDEsXG4gICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uQWN0aXZhSWQsXG4gICAgICB9O1xuXG4gICAgICAvLyDinIUgU2kgbGEgc2VjY2nDs24gYWN0aXZhIGVzIHBhbnRhbGxhLCBpbmljaWFsaXphbW9zIHlOb3JtXG4gICAgICBjb25zdCBzZWNBY3RpdmEgPSBzZWNjaW9uZXMuZmluZCgocykgPT4gcy5pZCA9PT0gc2VjY2lvbkFjdGl2YUlkKTtcbiAgICAgIGlmIChub3JtYWxpemFyQWx0b01vZG8oc2VjQWN0aXZhPy5hbHRvTW9kbykgPT09IFwicGFudGFsbGFcIikge1xuICAgICAgICBudWV2by55Tm9ybSA9IE1hdGgubWF4KFxuICAgICAgICAgIDAsXG4gICAgICAgICAgTWF0aC5taW4oMSwgKE51bWJlcihudWV2by55KSB8fCAwKSAvIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIOKchSByZXNwZXRhIGVsIGNvbXBvcnRhbWllbnRvIG9yaWdpbmFsXG4gICAgICBpZiAobnVldm9UZXh0b1JlZj8uY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgIG51ZXZvVGV4dG9SZWYuY3VycmVudCA9IG51ZXZvLmlkO1xuICAgICAgfVxuXG4gICAgICBzZXRPYmpldG9zKChwcmV2KSA9PiBbLi4ucHJldiwgbnVldm9dKTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhZ3JlZ2FyLWN1YWRyby10ZXh0b1wiLCBoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhZ3JlZ2FyLWN1YWRyby10ZXh0b1wiLCBoYW5kbGVyKTtcbiAgfSwgW1xuICAgIHNlY2Npb25BY3RpdmFJZCxcbiAgICBzZWNjaW9uZXMsXG4gICAgc2V0T2JqZXRvcyxcbiAgICBub3JtYWxpemFyQWx0b01vZG8sXG4gICAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcbiAgICBudWV2b1RleHRvUmVmLFxuICBdKTtcbn1cblxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsImNvbXB1dGVJbnNlcnREZWZhdWx0cyIsInVzZUVkaXRvckV2ZW50cyIsImNlbGRhR2FsZXJpYUFjdGl2YSIsInNldENlbGRhR2FsZXJpYUFjdGl2YSIsInNldE9iamV0b3MiLCJzZWNjaW9uZXMiLCJzZWNjaW9uQWN0aXZhSWQiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwibm9ybWFsaXphckFsdG9Nb2RvIiwiQUxUVVJBX1BBTlRBTExBX0VESVRPUiIsIm51ZXZvVGV4dG9SZWYiLCJ3aW5kb3ciLCJhc2lnbmFySW1hZ2VuQUNlbGRhIiwibWVkaWFVcmwiLCJmaXQiLCJiZyIsIm9iaklkIiwiaW5kZXgiLCJwcmV2IiwiaSIsImZpbmRJbmRleCIsIm8iLCJpZCIsIm9iaiIsInRpcG8iLCJuZXh0IiwiY2VsbHMiLCJBcnJheSIsImlzQXJyYXkiLCJwcmV2Q2VsbCIsImhhbmRsZXIiLCJlIiwibnVldm8iLCJkZXRhaWwiLCJmYWxsYmFja0lkIiwiX2xhc3RTZWNjaW9uQWN0aXZhSWQiLCJ0YXJnZXRTZWNjaW9uSWQiLCJhbGVydCIsIm51ZXZvQ29uU2VjY2lvbiIsInBheWxvYWQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNhbWJpb3MiLCJ0YXJnZXRJZCIsIl9lbGVtZW50b3NTZWxlY2Npb25hZG9zIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiRGF0ZSIsIm5vdyIsInRleHRvIiwieCIsInkiLCJmb250U2l6ZSIsImNvbG9yIiwiZm9udEZhbWlseSIsImZvbnRXZWlnaHQiLCJmb250U3R5bGUiLCJ0ZXh0RGVjb3JhdGlvbiIsImFsaWduIiwicm90YXRpb24iLCJzY2FsZVgiLCJzY2FsZVkiLCJzZWNjaW9uSWQiLCJzZWNBY3RpdmEiLCJmaW5kIiwicyIsImFsdG9Nb2RvIiwieU5vcm0iLCJNYXRoIiwibWF4IiwibWluIiwiTnVtYmVyIiwiY3VycmVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/events/useEditorEvents.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/history/useHistoryManager.js":
/*!************************************************************!*\
  !*** ./src/components/editor/history/useHistoryManager.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useHistoryManager)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/components/editor/history/useHistoryManager.js\n\n/**\r\n * Maneja el historial (undo/redo) del editor:\r\n * - Guarda snapshots (objetos + secciones)\r\n * - Limpia futuros cuando hay cambios nuevos\r\n * - Respeta ignoreNextUpdateRef para que undo/redo no borre futuros\r\n *\r\n * ⚠️ No cambia lógica: es el mismo useEffect movido a un hook.\r\n */ function useHistoryManager({ cargado, objetos, secciones, setHistorial, setFuturos, ignoreNextUpdateRef }) {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useHistoryManager.useEffect\": ()=>{\n            if (!cargado) return;\n            if (ignoreNextUpdateRef.current) {\n                requestAnimationFrame({\n                    \"useHistoryManager.useEffect\": ()=>{\n                        ignoreNextUpdateRef.current = Math.max(0, (ignoreNextUpdateRef.current || 0) - 1);\n                    }\n                }[\"useHistoryManager.useEffect\"]);\n                return;\n            }\n            // 🎯 No guardar historial durante transformaciones\n            if (window._resizeData?.isResizing) return;\n            const estadoCompleto = {\n                objetos,\n                secciones,\n                timestamp: Date.now()\n            };\n            const estadoStringified = JSON.stringify(estadoCompleto);\n            setHistorial({\n                \"useHistoryManager.useEffect\": (prev)=>{\n                    const ultimoStringified = prev.length > 0 ? JSON.stringify(prev[prev.length - 1]) : null;\n                    if (ultimoStringified !== estadoStringified) {\n                        return [\n                            ...prev.slice(-19),\n                            estadoCompleto\n                        ]; // max 20\n                    }\n                    return prev;\n                }\n            }[\"useHistoryManager.useEffect\"]);\n            // Limpiar futuros cuando hay nuevos cambios\n            setFuturos([]);\n        }\n    }[\"useHistoryManager.useEffect\"], [\n        objetos,\n        secciones,\n        cargado,\n        setHistorial,\n        setFuturos,\n        ignoreNextUpdateRef\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9oaXN0b3J5L3VzZUhpc3RvcnlNYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEscURBQXFEO0FBQ25CO0FBRWxDOzs7Ozs7O0NBT0MsR0FDYyxTQUFTQyxrQkFBa0IsRUFDdENDLE9BQU8sRUFDUEMsT0FBTyxFQUNQQyxTQUFTLEVBRVRDLFlBQVksRUFDWkMsVUFBVSxFQUVWQyxtQkFBbUIsRUFDdEI7SUFDR1AsZ0RBQVNBO3VDQUFDO1lBQ04sSUFBSSxDQUFDRSxTQUFTO1lBRWQsSUFBSUssb0JBQW9CQyxPQUFPLEVBQUU7Z0JBQzdCQzttREFBc0I7d0JBQ2xCRixvQkFBb0JDLE9BQU8sR0FBR0UsS0FBS0MsR0FBRyxDQUFDLEdBQUcsQ0FBQ0osb0JBQW9CQyxPQUFPLElBQUksS0FBSztvQkFDbkY7O2dCQUNBO1lBQ0o7WUFHQSxtREFBbUQ7WUFDbkQsSUFBSUksT0FBT0MsV0FBVyxFQUFFQyxZQUFZO1lBRXBDLE1BQU1DLGlCQUFpQjtnQkFDbkJaO2dCQUNBQztnQkFDQVksV0FBV0MsS0FBS0MsR0FBRztZQUN2QjtZQUVBLE1BQU1DLG9CQUFvQkMsS0FBS0MsU0FBUyxDQUFDTjtZQUV6Q1Y7K0NBQWEsQ0FBQ2lCO29CQUNWLE1BQU1DLG9CQUNGRCxLQUFLRSxNQUFNLEdBQUcsSUFBSUosS0FBS0MsU0FBUyxDQUFDQyxJQUFJLENBQUNBLEtBQUtFLE1BQU0sR0FBRyxFQUFFLElBQUk7b0JBRTlELElBQUlELHNCQUFzQkosbUJBQW1CO3dCQUN6QyxPQUFPOytCQUFJRyxLQUFLRyxLQUFLLENBQUMsQ0FBQzs0QkFBS1Y7eUJBQWUsRUFBRSxTQUFTO29CQUMxRDtvQkFDQSxPQUFPTztnQkFDWDs7WUFFQSw0Q0FBNEM7WUFDNUNoQixXQUFXLEVBQUU7UUFDakI7c0NBQUc7UUFBQ0g7UUFBU0M7UUFBV0Y7UUFBU0c7UUFBY0M7UUFBWUM7S0FBb0I7QUFDbkYiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxoaXN0b3J5XFx1c2VIaXN0b3J5TWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3IvaGlzdG9yeS91c2VIaXN0b3J5TWFuYWdlci5qc1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbi8qKlxyXG4gKiBNYW5lamEgZWwgaGlzdG9yaWFsICh1bmRvL3JlZG8pIGRlbCBlZGl0b3I6XHJcbiAqIC0gR3VhcmRhIHNuYXBzaG90cyAob2JqZXRvcyArIHNlY2Npb25lcylcclxuICogLSBMaW1waWEgZnV0dXJvcyBjdWFuZG8gaGF5IGNhbWJpb3MgbnVldm9zXHJcbiAqIC0gUmVzcGV0YSBpZ25vcmVOZXh0VXBkYXRlUmVmIHBhcmEgcXVlIHVuZG8vcmVkbyBubyBib3JyZSBmdXR1cm9zXHJcbiAqXHJcbiAqIOKaoO+4jyBObyBjYW1iaWEgbMOzZ2ljYTogZXMgZWwgbWlzbW8gdXNlRWZmZWN0IG1vdmlkbyBhIHVuIGhvb2suXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VIaXN0b3J5TWFuYWdlcih7XHJcbiAgICBjYXJnYWRvLFxyXG4gICAgb2JqZXRvcyxcclxuICAgIHNlY2Npb25lcyxcclxuXHJcbiAgICBzZXRIaXN0b3JpYWwsXHJcbiAgICBzZXRGdXR1cm9zLFxyXG5cclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYsXHJcbn0pIHtcclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFjYXJnYWRvKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlnbm9yZU5leHRVcGRhdGVSZWYuY3VycmVudCA9IE1hdGgubWF4KDAsIChpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgfHwgMCkgLSAxKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyDwn46vIE5vIGd1YXJkYXIgaGlzdG9yaWFsIGR1cmFudGUgdHJhbnNmb3JtYWNpb25lc1xyXG4gICAgICAgIGlmICh3aW5kb3cuX3Jlc2l6ZURhdGE/LmlzUmVzaXppbmcpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZXN0YWRvQ29tcGxldG8gPSB7XHJcbiAgICAgICAgICAgIG9iamV0b3MsXHJcbiAgICAgICAgICAgIHNlY2Npb25lcyxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGVzdGFkb1N0cmluZ2lmaWVkID0gSlNPTi5zdHJpbmdpZnkoZXN0YWRvQ29tcGxldG8pO1xyXG5cclxuICAgICAgICBzZXRIaXN0b3JpYWwoKHByZXYpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdWx0aW1vU3RyaW5naWZpZWQgPVxyXG4gICAgICAgICAgICAgICAgcHJldi5sZW5ndGggPiAwID8gSlNPTi5zdHJpbmdpZnkocHJldltwcmV2Lmxlbmd0aCAtIDFdKSA6IG51bGw7XHJcblxyXG4gICAgICAgICAgICBpZiAodWx0aW1vU3RyaW5naWZpZWQgIT09IGVzdGFkb1N0cmluZ2lmaWVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWy4uLnByZXYuc2xpY2UoLTE5KSwgZXN0YWRvQ29tcGxldG9dOyAvLyBtYXggMjBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJldjtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTGltcGlhciBmdXR1cm9zIGN1YW5kbyBoYXkgbnVldm9zIGNhbWJpb3NcclxuICAgICAgICBzZXRGdXR1cm9zKFtdKTtcclxuICAgIH0sIFtvYmpldG9zLCBzZWNjaW9uZXMsIGNhcmdhZG8sIHNldEhpc3RvcmlhbCwgc2V0RnV0dXJvcywgaWdub3JlTmV4dFVwZGF0ZVJlZl0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VIaXN0b3J5TWFuYWdlciIsImNhcmdhZG8iLCJvYmpldG9zIiwic2VjY2lvbmVzIiwic2V0SGlzdG9yaWFsIiwic2V0RnV0dXJvcyIsImlnbm9yZU5leHRVcGRhdGVSZWYiLCJjdXJyZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiTWF0aCIsIm1heCIsIndpbmRvdyIsIl9yZXNpemVEYXRhIiwiaXNSZXNpemluZyIsImVzdGFkb0NvbXBsZXRvIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImVzdGFkb1N0cmluZ2lmaWVkIiwiSlNPTiIsInN0cmluZ2lmeSIsInByZXYiLCJ1bHRpbW9TdHJpbmdpZmllZCIsImxlbmd0aCIsInNsaWNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/history/useHistoryManager.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useCanvasInteractionState.js":
/*!*******************************************************************!*\
  !*** ./src/components/editor/mobile/useCanvasInteractionState.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useCanvasInteractionState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nfunction useCanvasInteractionState() {\n    const dragStartPos = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const hasDragged = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const [isDragging, setIsDragging] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    return {\n        dragStartPos,\n        hasDragged,\n        isDragging,\n        setIsDragging\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlQ2FudmFzSW50ZXJhY3Rpb25TdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5QztBQUUxQixTQUFTRTtJQUN0QixNQUFNQyxlQUFlSCw2Q0FBTUEsQ0FBQztJQUM1QixNQUFNSSxhQUFhSiw2Q0FBTUEsQ0FBQztJQUMxQixNQUFNLENBQUNLLFlBQVlDLGNBQWMsR0FBR0wsK0NBQVFBLENBQUM7SUFFN0MsT0FBTztRQUNMRTtRQUNBQztRQUNBQztRQUNBQztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxtb2JpbGVcXHVzZUNhbnZhc0ludGVyYWN0aW9uU3RhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VDYW52YXNJbnRlcmFjdGlvblN0YXRlKCkge1xuICBjb25zdCBkcmFnU3RhcnRQb3MgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGhhc0RyYWdnZWQgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBbaXNEcmFnZ2luZywgc2V0SXNEcmFnZ2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBkcmFnU3RhcnRQb3MsXG4gICAgaGFzRHJhZ2dlZCxcbiAgICBpc0RyYWdnaW5nLFxuICAgIHNldElzRHJhZ2dpbmcsXG4gIH07XG59XG5cclxuIl0sIm5hbWVzIjpbInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2FudmFzSW50ZXJhY3Rpb25TdGF0ZSIsImRyYWdTdGFydFBvcyIsImhhc0RyYWdnZWQiLCJpc0RyYWdnaW5nIiwic2V0SXNEcmFnZ2luZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useCanvasInteractionState.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useCanvasScaleLayout.js":
/*!**************************************************************!*\
  !*** ./src/components/editor/mobile/useCanvasScaleLayout.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useCanvasScaleLayout)\n/* harmony export */ });\n/* harmony import */ var _hooks_useViewportScale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/hooks/useViewportScale */ \"(pages-dir-node)/./src/hooks/useViewportScale.js\");\n\nfunction useCanvasScaleLayout({ contenedorRef, zoom }) {\n    return (0,_hooks_useViewportScale__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        contenedorRef,\n        zoom,\n        baseDesktop: 800,\n        baseMobilePortrait: 1000,\n        wrapperBaseWidthZoom1: 1000,\n        wrapperBaseWidthZoom08: 1220,\n        fitBoost: 1.2,\n        zoomVisualBoost: 1.15,\n        debug: false\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlQ2FudmFzU2NhbGVMYXlvdXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0Q7QUFFekMsU0FBU0MscUJBQXFCLEVBQUVDLGFBQWEsRUFBRUMsSUFBSSxFQUFFO0lBQ2xFLE9BQU9ILG1FQUFnQkEsQ0FBQztRQUN0QkU7UUFDQUM7UUFDQUMsYUFBYTtRQUNiQyxvQkFBb0I7UUFDcEJDLHVCQUF1QjtRQUN2QkMsd0JBQXdCO1FBQ3hCQyxVQUFVO1FBQ1ZDLGlCQUFpQjtRQUNqQkMsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxtb2JpbGVcXHVzZUNhbnZhc1NjYWxlTGF5b3V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1c2VWaWV3cG9ydFNjYWxlIGZyb20gXCJAL2hvb2tzL3VzZVZpZXdwb3J0U2NhbGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQ2FudmFzU2NhbGVMYXlvdXQoeyBjb250ZW5lZG9yUmVmLCB6b29tIH0pIHtcbiAgcmV0dXJuIHVzZVZpZXdwb3J0U2NhbGUoe1xuICAgIGNvbnRlbmVkb3JSZWYsXG4gICAgem9vbSxcbiAgICBiYXNlRGVza3RvcDogODAwLFxuICAgIGJhc2VNb2JpbGVQb3J0cmFpdDogMTAwMCxcbiAgICB3cmFwcGVyQmFzZVdpZHRoWm9vbTE6IDEwMDAsXG4gICAgd3JhcHBlckJhc2VXaWR0aFpvb20wODogMTIyMCxcbiAgICBmaXRCb29zdDogMS4yLFxuICAgIHpvb21WaXN1YWxCb29zdDogMS4xNSxcbiAgICBkZWJ1ZzogZmFsc2UsXG4gIH0pO1xufVxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VWaWV3cG9ydFNjYWxlIiwidXNlQ2FudmFzU2NhbGVMYXlvdXQiLCJjb250ZW5lZG9yUmVmIiwiem9vbSIsImJhc2VEZXNrdG9wIiwiYmFzZU1vYmlsZVBvcnRyYWl0Iiwid3JhcHBlckJhc2VXaWR0aFpvb20xIiwid3JhcHBlckJhc2VXaWR0aFpvb20wOCIsImZpdEJvb3N0Iiwiem9vbVZpc3VhbEJvb3N0IiwiZGVidWciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useCanvasScaleLayout.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useIsTouchLike.js":
/*!********************************************************!*\
  !*** ./src/components/editor/mobile/useIsTouchLike.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useIsTouchLike)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nfunction useIsTouchLike(forceMobile = false) {\n    const [isTouchLike, setIsTouchLike] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(Boolean(forceMobile));\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useIsTouchLike.useEffect\": ()=>{\n            if (true) return;\n            const mqCoarse = window.matchMedia(\"(pointer: coarse)\");\n            const mqTablet = window.matchMedia(\"(max-width: 1024px)\");\n            const update = {\n                \"useIsTouchLike.useEffect.update\": ()=>{\n                    const hasTouchSupport = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n                    setIsTouchLike(Boolean(forceMobile) || mqCoarse.matches || mqTablet.matches && hasTouchSupport);\n                }\n            }[\"useIsTouchLike.useEffect.update\"];\n            update();\n            mqCoarse.addEventListener?.(\"change\", update);\n            mqTablet.addEventListener?.(\"change\", update);\n            window.addEventListener(\"orientationchange\", update);\n            return ({\n                \"useIsTouchLike.useEffect\": ()=>{\n                    mqCoarse.removeEventListener?.(\"change\", update);\n                    mqTablet.removeEventListener?.(\"change\", update);\n                    window.removeEventListener(\"orientationchange\", update);\n                }\n            })[\"useIsTouchLike.useEffect\"];\n        }\n    }[\"useIsTouchLike.useEffect\"], [\n        forceMobile\n    ]);\n    return isTouchLike;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlSXNUb3VjaExpa2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFFN0IsU0FBU0UsZUFBZUMsY0FBYyxLQUFLO0lBQ3hELE1BQU0sQ0FBQ0MsYUFBYUMsZUFBZSxHQUFHSiwrQ0FBUUEsQ0FBQ0ssUUFBUUg7SUFFdkRILGdEQUFTQTtvQ0FBQztZQUNSLElBQUksSUFBNkIsRUFBRTtZQUVuQyxNQUFNTyxXQUFXQyxPQUFPQyxVQUFVLENBQUM7WUFDbkMsTUFBTUMsV0FBV0YsT0FBT0MsVUFBVSxDQUFDO1lBRW5DLE1BQU1FO21EQUFTO29CQUNiLE1BQU1DLGtCQUNKLGtCQUFrQkosVUFBVUssVUFBVUMsY0FBYyxHQUFHO29CQUN6RFQsZUFBZUMsUUFBUUgsZ0JBQWdCSSxTQUFTUSxPQUFPLElBQUtMLFNBQVNLLE9BQU8sSUFBSUg7Z0JBQ2xGOztZQUVBRDtZQUNBSixTQUFTUyxnQkFBZ0IsR0FBRyxVQUFVTDtZQUN0Q0QsU0FBU00sZ0JBQWdCLEdBQUcsVUFBVUw7WUFDdENILE9BQU9RLGdCQUFnQixDQUFDLHFCQUFxQkw7WUFFN0M7NENBQU87b0JBQ0xKLFNBQVNVLG1CQUFtQixHQUFHLFVBQVVOO29CQUN6Q0QsU0FBU08sbUJBQW1CLEdBQUcsVUFBVU47b0JBQ3pDSCxPQUFPUyxtQkFBbUIsQ0FBQyxxQkFBcUJOO2dCQUNsRDs7UUFDRjttQ0FBRztRQUFDUjtLQUFZO0lBRWhCLE9BQU9DO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxtb2JpbGVcXHVzZUlzVG91Y2hMaWtlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlSXNUb3VjaExpa2UoZm9yY2VNb2JpbGUgPSBmYWxzZSkge1xuICBjb25zdCBbaXNUb3VjaExpa2UsIHNldElzVG91Y2hMaWtlXSA9IHVzZVN0YXRlKEJvb2xlYW4oZm9yY2VNb2JpbGUpKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG5cbiAgICBjb25zdCBtcUNvYXJzZSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKHBvaW50ZXI6IGNvYXJzZSlcIik7XG4gICAgY29uc3QgbXFUYWJsZXQgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDEwMjRweClcIik7XG5cbiAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBoYXNUb3VjaFN1cHBvcnQgPVxuICAgICAgICBcIm9udG91Y2hzdGFydFwiIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuICAgICAgc2V0SXNUb3VjaExpa2UoQm9vbGVhbihmb3JjZU1vYmlsZSkgfHwgbXFDb2Fyc2UubWF0Y2hlcyB8fCAobXFUYWJsZXQubWF0Y2hlcyAmJiBoYXNUb3VjaFN1cHBvcnQpKTtcbiAgICB9O1xuXG4gICAgdXBkYXRlKCk7XG4gICAgbXFDb2Fyc2UuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgbXFUYWJsZXQuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCB1cGRhdGUpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG1xQ29hcnNlLnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgICAgbXFUYWJsZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgfTtcbiAgfSwgW2ZvcmNlTW9iaWxlXSk7XG5cbiAgcmV0dXJuIGlzVG91Y2hMaWtlO1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlSXNUb3VjaExpa2UiLCJmb3JjZU1vYmlsZSIsImlzVG91Y2hMaWtlIiwic2V0SXNUb3VjaExpa2UiLCJCb29sZWFuIiwibXFDb2Fyc2UiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibXFUYWJsZXQiLCJ1cGRhdGUiLCJoYXNUb3VjaFN1cHBvcnQiLCJuYXZpZ2F0b3IiLCJtYXhUb3VjaFBvaW50cyIsIm1hdGNoZXMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useIsTouchLike.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useStageGestures.js":
/*!**********************************************************!*\
  !*** ./src/components/editor/mobile/useStageGestures.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useStageGestures)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nconst TOUCH_MOVE_PX = 10;\nfunction findRootHit(target, elementRefs) {\n    if (!target || !elementRefs) return null;\n    const roots = Object.values(elementRefs.current || {});\n    if (!roots.length) return null;\n    return target.findAncestor?.((node)=>roots.includes(node), true) || null;\n}\nfunction useStageGestures({ secciones, objetos, elementRefs, dragStartPos, hasDragged, seleccionActiva, inicioSeleccion, areaSeleccion, detectarInterseccionLinea, setElementosSeleccionados, setElementosPreSeleccionados, setSeleccionActiva, setInicioSeleccion, setAreaSeleccion, onSelectSeccion, cerrarMenusFlotantes }) {\n    const touchGestureRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        startX: 0,\n        startY: 0,\n        moved: false,\n        tappedSectionId: null,\n        clickedOnStage: false,\n        startedOnElement: false\n    });\n    const resolveSectionIdFromTarget = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[resolveSectionIdFromTarget]\": (target)=>{\n            if (!target) return null;\n            if (target.attrs?.id && secciones.some({\n                \"useStageGestures.useCallback[resolveSectionIdFromTarget]\": (s)=>s.id === target.attrs.id\n            }[\"useStageGestures.useCallback[resolveSectionIdFromTarget]\"])) {\n                return target.attrs.id;\n            }\n            return secciones.find({\n                \"useStageGestures.useCallback[resolveSectionIdFromTarget]\": (s)=>s.id === target.parent?.attrs?.id\n            }[\"useStageGestures.useCallback[resolveSectionIdFromTarget]\"])?.id || null;\n        }\n    }[\"useStageGestures.useCallback[resolveSectionIdFromTarget]\"], [\n        secciones\n    ]);\n    const clearSelectionUI = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[clearSelectionUI]\": ()=>{\n            setElementosSeleccionados([]);\n            cerrarMenusFlotantes?.();\n        }\n    }[\"useStageGestures.useCallback[clearSelectionUI]\"], [\n        setElementosSeleccionados,\n        cerrarMenusFlotantes\n    ]);\n    const onMouseDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onMouseDown]\": (e)=>{\n            const stage = e.target.getStage();\n            if (!stage) return;\n            const rootHit = findRootHit(e.target, elementRefs);\n            if (rootHit) return;\n            const clickedOnStage = e.target === stage;\n            const tappedSectionId = resolveSectionIdFromTarget(e.target);\n            if (!clickedOnStage && e.target.getClassName?.() !== \"Image\") {\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n            }\n            dragStartPos.current = stage.getPointerPosition();\n            hasDragged.current = false;\n            const esTransformer = e.target.getClassName?.() === \"Transformer\" || e.target.parent?.getClassName?.() === \"Transformer\" || e.target.attrs?.name?.includes(\"_anchor\");\n            if (esTransformer) return;\n            const esStage = clickedOnStage;\n            const esSeccion = !!tappedSectionId;\n            const esImagenFondo = e.target.getClassName?.() === \"Image\";\n            if (esStage || esSeccion || esImagenFondo) {\n                clearSelectionUI();\n                if (esStage) {\n                    onSelectSeccion?.(null);\n                } else if (tappedSectionId) {\n                    onSelectSeccion?.(tappedSectionId);\n                }\n                const pos = stage.getPointerPosition();\n                if (!pos) return;\n                setInicioSeleccion({\n                    x: pos.x,\n                    y: pos.y\n                });\n                setAreaSeleccion({\n                    x: pos.x,\n                    y: pos.y,\n                    width: 0,\n                    height: 0\n                });\n                setSeleccionActiva(true);\n            }\n        }\n    }[\"useStageGestures.useCallback[onMouseDown]\"], [\n        elementRefs,\n        resolveSectionIdFromTarget,\n        dragStartPos,\n        hasDragged,\n        clearSelectionUI,\n        onSelectSeccion,\n        setInicioSeleccion,\n        setAreaSeleccion,\n        setSeleccionActiva\n    ]);\n    const onTouchStart = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onTouchStart]\": (e)=>{\n            const stage = e.target.getStage();\n            if (!stage) return;\n            const pos = stage.getPointerPosition();\n            if (!pos) return;\n            const rootHit = findRootHit(e.target, elementRefs);\n            const clickedOnStage = e.target === stage;\n            const tappedSectionId = resolveSectionIdFromTarget(e.target);\n            touchGestureRef.current = {\n                startX: pos.x,\n                startY: pos.y,\n                moved: false,\n                tappedSectionId,\n                clickedOnStage,\n                startedOnElement: !!rootHit\n            };\n            if (rootHit) return;\n            if (!clickedOnStage && e.target.getClassName?.() !== \"Image\") {\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n            }\n        }\n    }[\"useStageGestures.useCallback[onTouchStart]\"], [\n        elementRefs,\n        resolveSectionIdFromTarget\n    ]);\n    const onTouchMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onTouchMove]\": (e)=>{\n            const stage = e.target.getStage();\n            if (!stage) return;\n            const pos = stage.getPointerPosition();\n            if (!pos) return;\n            const dx = Math.abs(pos.x - touchGestureRef.current.startX);\n            const dy = Math.abs(pos.y - touchGestureRef.current.startY);\n            if (dx > TOUCH_MOVE_PX || dy > TOUCH_MOVE_PX) {\n                touchGestureRef.current.moved = true;\n            }\n        }\n    }[\"useStageGestures.useCallback[onTouchMove]\"], []);\n    const onTouchEnd = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onTouchEnd]\": ()=>{\n            const g = touchGestureRef.current;\n            if (g.moved) return;\n            if (g.startedOnElement) return;\n            clearSelectionUI();\n            if (g.clickedOnStage) {\n                onSelectSeccion?.(null);\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n                return;\n            }\n            if (g.tappedSectionId) {\n                onSelectSeccion?.(g.tappedSectionId);\n            }\n        }\n    }[\"useStageGestures.useCallback[onTouchEnd]\"], [\n        clearSelectionUI,\n        onSelectSeccion\n    ]);\n    const onMouseMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onMouseMove]\": (e)=>{\n            if (!seleccionActiva || !inicioSeleccion) return;\n            if (window._mouseMoveThrottle) return;\n            window._mouseMoveThrottle = true;\n            requestAnimationFrame({\n                \"useStageGestures.useCallback[onMouseMove]\": ()=>{\n                    window._mouseMoveThrottle = false;\n                    const stage = e.target.getStage();\n                    const pos = stage.getPointerPosition();\n                    if (!pos) return;\n                    const area = {\n                        x: Math.min(inicioSeleccion.x, pos.x),\n                        y: Math.min(inicioSeleccion.y, pos.y),\n                        width: Math.abs(pos.x - inicioSeleccion.x),\n                        height: Math.abs(pos.y - inicioSeleccion.y)\n                    };\n                    setAreaSeleccion(area);\n                    if (Math.abs(area.width) > 5 || Math.abs(area.height) > 5) {\n                        if (window._selectionThrottle) return;\n                        window._selectionThrottle = true;\n                        requestAnimationFrame({\n                            \"useStageGestures.useCallback[onMouseMove]\": ()=>{\n                                const ids = objetos.filter({\n                                    \"useStageGestures.useCallback[onMouseMove].ids\": (obj)=>{\n                                        const node = elementRefs.current[obj.id];\n                                        if (!node) return false;\n                                        if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n                                            return detectarInterseccionLinea(obj, area, stage);\n                                        }\n                                        const box = node.getClientRect({\n                                            relativeTo: stage\n                                        });\n                                        return box.x + box.width >= area.x && box.x <= area.x + area.width && box.y + box.height >= area.y && box.y <= area.y + area.height;\n                                    }\n                                }[\"useStageGestures.useCallback[onMouseMove].ids\"]).map({\n                                    \"useStageGestures.useCallback[onMouseMove].ids\": (obj)=>obj.id\n                                }[\"useStageGestures.useCallback[onMouseMove].ids\"]);\n                                setElementosPreSeleccionados(ids);\n                                window._selectionThrottle = false;\n                            }\n                        }[\"useStageGestures.useCallback[onMouseMove]\"]);\n                    }\n                }\n            }[\"useStageGestures.useCallback[onMouseMove]\"]);\n        }\n    }[\"useStageGestures.useCallback[onMouseMove]\"], [\n        seleccionActiva,\n        inicioSeleccion,\n        setAreaSeleccion,\n        objetos,\n        elementRefs,\n        detectarInterseccionLinea,\n        setElementosPreSeleccionados\n    ]);\n    const onMouseUp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onMouseUp]\": (e)=>{\n            const stage = e.target.getStage();\n            if (window._grupoLider) return;\n            if (!seleccionActiva || !areaSeleccion) return;\n            const nuevaSeleccion = objetos.filter({\n                \"useStageGestures.useCallback[onMouseUp].nuevaSeleccion\": (obj)=>{\n                    const node = elementRefs.current[obj.id];\n                    if (!node) return false;\n                    if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n                        return detectarInterseccionLinea(obj, areaSeleccion, stage);\n                    }\n                    try {\n                        const box = node.getClientRect();\n                        return box.x + box.width >= areaSeleccion.x && box.x <= areaSeleccion.x + areaSeleccion.width && box.y + box.height >= areaSeleccion.y && box.y <= areaSeleccion.y + areaSeleccion.height;\n                    } catch  {\n                        return false;\n                    }\n                }\n            }[\"useStageGestures.useCallback[onMouseUp].nuevaSeleccion\"]);\n            setElementosSeleccionados(nuevaSeleccion.map({\n                \"useStageGestures.useCallback[onMouseUp]\": (obj)=>obj.id\n            }[\"useStageGestures.useCallback[onMouseUp]\"]));\n            setElementosPreSeleccionados([]);\n            setSeleccionActiva(false);\n            setAreaSeleccion(null);\n            if (window._selectionThrottle) window._selectionThrottle = false;\n            if (window._boundsUpdateThrottle) window._boundsUpdateThrottle = false;\n            window._lineIntersectionCache = {};\n        }\n    }[\"useStageGestures.useCallback[onMouseUp]\"], [\n        seleccionActiva,\n        areaSeleccion,\n        objetos,\n        elementRefs,\n        detectarInterseccionLinea,\n        setElementosSeleccionados,\n        setElementosPreSeleccionados,\n        setSeleccionActiva,\n        setAreaSeleccion\n    ]);\n    return {\n        onMouseDown,\n        onTouchStart,\n        onTouchMove,\n        onTouchEnd,\n        onMouseMove,\n        onMouseUp\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlU3RhZ2VHZXN0dXJlcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUU1QyxNQUFNRSxnQkFBZ0I7QUFFdEIsU0FBU0MsWUFBWUMsTUFBTSxFQUFFQyxXQUFXO0lBQ3RDLElBQUksQ0FBQ0QsVUFBVSxDQUFDQyxhQUFhLE9BQU87SUFDcEMsTUFBTUMsUUFBUUMsT0FBT0MsTUFBTSxDQUFDSCxZQUFZSSxPQUFPLElBQUksQ0FBQztJQUNwRCxJQUFJLENBQUNILE1BQU1JLE1BQU0sRUFBRSxPQUFPO0lBQzFCLE9BQU9OLE9BQU9PLFlBQVksR0FBRyxDQUFDQyxPQUFTTixNQUFNTyxRQUFRLENBQUNELE9BQU8sU0FBUztBQUN4RTtBQUVlLFNBQVNFLGlCQUFpQixFQUN2Q0MsU0FBUyxFQUNUQyxPQUFPLEVBQ1BYLFdBQVcsRUFDWFksWUFBWSxFQUNaQyxVQUFVLEVBQ1ZDLGVBQWUsRUFDZkMsZUFBZSxFQUNmQyxhQUFhLEVBQ2JDLHlCQUF5QixFQUN6QkMseUJBQXlCLEVBQ3pCQyw0QkFBNEIsRUFDNUJDLGtCQUFrQixFQUNsQkMsa0JBQWtCLEVBQ2xCQyxnQkFBZ0IsRUFDaEJDLGVBQWUsRUFDZkMsb0JBQW9CLEVBQ3JCO0lBQ0MsTUFBTUMsa0JBQWtCN0IsNkNBQU1BLENBQUM7UUFDN0I4QixRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxpQkFBaUI7UUFDakJDLGdCQUFnQjtRQUNoQkMsa0JBQWtCO0lBQ3BCO0lBRUEsTUFBTUMsNkJBQTZCckMsa0RBQVdBO29FQUM1QyxDQUFDSTtZQUNDLElBQUksQ0FBQ0EsUUFBUSxPQUFPO1lBQ3BCLElBQUlBLE9BQU9rQyxLQUFLLEVBQUVDLE1BQU14QixVQUFVeUIsSUFBSTs0RUFBQyxDQUFDQyxJQUFNQSxFQUFFRixFQUFFLEtBQUtuQyxPQUFPa0MsS0FBSyxDQUFDQyxFQUFFOzRFQUFHO2dCQUN2RSxPQUFPbkMs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QUl2QixDQUFDLEdBQUd1QixJQUFJckIsS0FBSyxJQUFJMUMsY0FBY3dDLENBQUMsSUFDcEN1QixJQUFJdkIsQ0FBQyxJQUFJeEMsY0FBY3dDLENBQUMsR0FBR3hDLGNBQWMwQyxLQUFLLElBQzlDcUIsSUFBSXRCLENBQUMsR0FBR3NCLElBQUlwQixNQUFNLElBQUkzQyxjQUFjeUMsQ0FBQyxJQUNyQ3NCLElBQUl0QixDQUFDLElBQUl6QyxjQUFjeUMsQ0FBQyxHQUFHekMsY0FBYzJDLE1BQU07b0JBRW5ELEVBQUUsT0FBTTt3QkFDTixPQUFPO29CQUNUO2dCQUNGOztZQUVBekMsMEJBQTBCbUUsZUFBZUgsR0FBRzsyREFBQyxDQUFDTixNQUFRQSxJQUFJMUMsRUFBRTs7WUFDNURmLDZCQUE2QixFQUFFO1lBQy9CQyxtQkFBbUI7WUFDbkJFLGlCQUFpQjtZQUVqQixJQUFJd0IsT0FBTzJCLGtCQUFrQixFQUFFM0IsT0FBTzJCLGtCQUFrQixHQUFHO1lBQzNELElBQUkzQixPQUFPd0MscUJBQXFCLEVBQUV4QyxPQUFPd0MscUJBQXFCLEdBQUc7WUFDakV4QyxPQUFPeUMsc0JBQXNCLEdBQUcsQ0FBQztRQUNuQztrREFDQTtRQUNFekU7UUFDQUU7UUFDQUw7UUFDQVg7UUFDQWlCO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FFO0tBQ0Q7SUFHSCxPQUFPO1FBQ0xrQjtRQUNBb0I7UUFDQUM7UUFDQUs7UUFDQUU7UUFDQWU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcbW9iaWxlXFx1c2VTdGFnZUdlc3R1cmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgVE9VQ0hfTU9WRV9QWCA9IDEwO1xuXG5mdW5jdGlvbiBmaW5kUm9vdEhpdCh0YXJnZXQsIGVsZW1lbnRSZWZzKSB7XG4gIGlmICghdGFyZ2V0IHx8ICFlbGVtZW50UmVmcykgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHJvb3RzID0gT2JqZWN0LnZhbHVlcyhlbGVtZW50UmVmcy5jdXJyZW50IHx8IHt9KTtcbiAgaWYgKCFyb290cy5sZW5ndGgpIHJldHVybiBudWxsO1xuICByZXR1cm4gdGFyZ2V0LmZpbmRBbmNlc3Rvcj8uKChub2RlKSA9PiByb290cy5pbmNsdWRlcyhub2RlKSwgdHJ1ZSkgfHwgbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU3RhZ2VHZXN0dXJlcyh7XG4gIHNlY2Npb25lcyxcbiAgb2JqZXRvcyxcbiAgZWxlbWVudFJlZnMsXG4gIGRyYWdTdGFydFBvcyxcbiAgaGFzRHJhZ2dlZCxcbiAgc2VsZWNjaW9uQWN0aXZhLFxuICBpbmljaW9TZWxlY2Npb24sXG4gIGFyZWFTZWxlY2Npb24sXG4gIGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEsXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gIHNldEVsZW1lbnRvc1ByZVNlbGVjY2lvbmFkb3MsXG4gIHNldFNlbGVjY2lvbkFjdGl2YSxcbiAgc2V0SW5pY2lvU2VsZWNjaW9uLFxuICBzZXRBcmVhU2VsZWNjaW9uLFxuICBvblNlbGVjdFNlY2Npb24sXG4gIGNlcnJhck1lbnVzRmxvdGFudGVzLFxufSkge1xuICBjb25zdCB0b3VjaEdlc3R1cmVSZWYgPSB1c2VSZWYoe1xuICAgIHN0YXJ0WDogMCxcbiAgICBzdGFydFk6IDAsXG4gICAgbW92ZWQ6IGZhbHNlLFxuICAgIHRhcHBlZFNlY3Rpb25JZDogbnVsbCxcbiAgICBjbGlja2VkT25TdGFnZTogZmFsc2UsXG4gICAgc3RhcnRlZE9uRWxlbWVudDogZmFsc2UsXG4gIH0pO1xuXG4gIGNvbnN0IHJlc29sdmVTZWN0aW9uSWRGcm9tVGFyZ2V0ID0gdXNlQ2FsbGJhY2soXG4gICAgKHRhcmdldCkgPT4ge1xuICAgICAgaWYgKCF0YXJnZXQpIHJldHVybiBudWxsO1xuICAgICAgaWYgKHRhcmdldC5hdHRycz8uaWQgJiYgc2VjY2lvbmVzLnNvbWUoKHMpID0+IHMuaWQgPT09IHRhcmdldC5hdHRycy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldC5hdHRycy5pZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZWNjaW9uZXMuZmluZCgocykgPT4gcy5pZCA9PT0gdGFyZ2V0LnBhcmVudD8uYXR0cnM/LmlkKT8uaWQgfHwgbnVsbDtcbiAgICB9LFxuICAgIFtzZWNjaW9uZXNdXG4gICk7XG5cbiAgY29uc3QgY2xlYXJTZWxlY3Rpb25VSSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtdKTtcbiAgICBjZXJyYXJNZW51c0Zsb3RhbnRlcz8uKCk7XG4gIH0sIFtzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLCBjZXJyYXJNZW51c0Zsb3RhbnRlc10pO1xuXG4gIGNvbnN0IG9uTW91c2VEb3duID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcbiAgICAgIGlmICghc3RhZ2UpIHJldHVybjtcblxuICAgICAgY29uc3Qgcm9vdEhpdCA9IGZpbmRSb290SGl0KGUudGFyZ2V0LCBlbGVtZW50UmVmcyk7XG4gICAgICBpZiAocm9vdEhpdCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBjbGlja2VkT25TdGFnZSA9IGUudGFyZ2V0ID09PSBzdGFnZTtcbiAgICAgIGNvbnN0IHRhcHBlZFNlY3Rpb25JZCA9IHJlc29sdmVTZWN0aW9uSWRGcm9tVGFyZ2V0KGUudGFyZ2V0KTtcblxuICAgICAgaWYgKCFjbGlja2VkT25TdGFnZSAmJiBlLnRhcmdldC5nZXRDbGFzc05hbWU/LigpICE9PSBcIkltYWdlXCIpIHtcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwic2FsaXItbW9kby1tb3Zlci1mb25kb1wiKSk7XG4gICAgICB9XG5cbiAgICAgIGRyYWdTdGFydFBvcy5jdXJyZW50ID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICBoYXNEcmFnZ2VkLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgICAgY29uc3QgZXNUcmFuc2Zvcm1lciA9XG4gICAgICAgIGUudGFyZ2V0LmdldENsYXNzTmFtZT8uKCkgPT09IFwiVHJhbnNmb3JtZXJcIiB8fFxuICAgICAgICBlLnRhcmdldC5wYXJlbnQ/LmdldENsYXNzTmFtZT8uKCkgPT09IFwiVHJhbnNmb3JtZXJcIiB8fFxuICAgICAgICBlLnRhcmdldC5hdHRycz8ubmFtZT8uaW5jbHVkZXMoXCJfYW5jaG9yXCIpO1xuICAgICAgaWYgKGVzVHJhbnNmb3JtZXIpIHJldHVybjtcblxuICAgICAgY29uc3QgZXNTdGFnZSA9IGNsaWNrZWRPblN0YWdlO1xuICAgICAgY29uc3QgZXNTZWNjaW9uID0gISF0YXBwZWRTZWN0aW9uSWQ7XG4gICAgICBjb25zdCBlc0ltYWdlbkZvbmRvID0gZS50YXJnZXQuZ2V0Q2xhc3NOYW1lPy4oKSA9PT0gXCJJbWFnZVwiO1xuXG4gICAgICBpZiAoZXNTdGFnZSB8fCBlc1NlY2Npb24gfHwgZXNJbWFnZW5Gb25kbykge1xuICAgICAgICBjbGVhclNlbGVjdGlvblVJKCk7XG5cbiAgICAgICAgaWYgKGVzU3RhZ2UpIHtcbiAgICAgICAgICBvblNlbGVjdFNlY2Npb24/LihudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YXBwZWRTZWN0aW9uSWQpIHtcbiAgICAgICAgICBvblNlbGVjdFNlY2Npb24/Lih0YXBwZWRTZWN0aW9uSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcG9zID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICAgIGlmICghcG9zKSByZXR1cm47XG4gICAgICAgIHNldEluaWNpb1NlbGVjY2lvbih7IHg6IHBvcy54LCB5OiBwb3MueSB9KTtcbiAgICAgICAgc2V0QXJlYVNlbGVjY2lvbih7IHg6IHBvcy54LCB5OiBwb3MueSwgd2lkdGg6IDAsIGhlaWdodDogMCB9KTtcbiAgICAgICAgc2V0U2VsZWNjaW9uQWN0aXZhKHRydWUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW1xuICAgICAgZWxlbWVudFJlZnMsXG4gICAgICByZXNvbHZlU2VjdGlvbklkRnJvbVRhcmdldCxcbiAgICAgIGRyYWdTdGFydFBvcyxcbiAgICAgIGhhc0RyYWdnZWQsXG4gICAgICBjbGVhclNlbGVjdGlvblVJLFxuICAgICAgb25TZWxlY3RTZWNjaW9uLFxuICAgICAgc2V0SW5pY2lvU2VsZWNjaW9uLFxuICAgICAgc2V0QXJlYVNlbGVjY2lvbixcbiAgICAgIHNldFNlbGVjY2lvbkFjdGl2YSxcbiAgICBdXG4gICk7XG5cbiAgY29uc3Qgb25Ub3VjaFN0YXJ0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcbiAgICAgIGlmICghc3RhZ2UpIHJldHVybjtcblxuICAgICAgY29uc3QgcG9zID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICBpZiAoIXBvcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCByb290SGl0ID0gZmluZFJvb3RIaXQoZS50YXJnZXQsIGVsZW1lbnRSZWZzKTtcbiAgICAgIGNvbnN0IGNsaWNrZWRPblN0YWdlID0gZS50YXJnZXQgPT09IHN0YWdlO1xuICAgICAgY29uc3QgdGFwcGVkU2VjdGlvbklkID0gcmVzb2x2ZVNlY3Rpb25JZEZyb21UYXJnZXQoZS50YXJnZXQpO1xuXG4gICAgICB0b3VjaEdlc3R1cmVSZWYuY3VycmVudCA9IHtcbiAgICAgICAgc3RhcnRYOiBwb3MueCxcbiAgICAgICAgc3RhcnRZOiBwb3MueSxcbiAgICAgICAgbW92ZWQ6IGZhbHNlLFxuICAgICAgICB0YXBwZWRTZWN0aW9uSWQsXG4gICAgICAgIGNsaWNrZWRPblN0YWdlLFxuICAgICAgICBzdGFydGVkT25FbGVtZW50OiAhIXJvb3RIaXQsXG4gICAgICB9O1xuXG4gICAgICBpZiAocm9vdEhpdCkgcmV0dXJuO1xuXG4gICAgICBpZiAoIWNsaWNrZWRPblN0YWdlICYmIGUudGFyZ2V0LmdldENsYXNzTmFtZT8uKCkgIT09IFwiSW1hZ2VcIikge1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJzYWxpci1tb2RvLW1vdmVyLWZvbmRvXCIpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtlbGVtZW50UmVmcywgcmVzb2x2ZVNlY3Rpb25JZEZyb21UYXJnZXRdXG4gICk7XG5cbiAgY29uc3Qgb25Ub3VjaE1vdmUgPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcbiAgICBpZiAoIXN0YWdlKSByZXR1cm47XG5cbiAgICBjb25zdCBwb3MgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICBpZiAoIXBvcykgcmV0dXJuO1xuXG4gICAgY29uc3QgZHggPSBNYXRoLmFicyhwb3MueCAtIHRvdWNoR2VzdHVyZVJlZi5jdXJyZW50LnN0YXJ0WCk7XG4gICAgY29uc3QgZHkgPSBNYXRoLmFicyhwb3MueSAtIHRvdWNoR2VzdHVyZVJlZi5jdXJyZW50LnN0YXJ0WSk7XG5cbiAgICBpZiAoZHggPiBUT1VDSF9NT1ZFX1BYIHx8IGR5ID4gVE9VQ0hfTU9WRV9QWCkge1xuICAgICAgdG91Y2hHZXN0dXJlUmVmLmN1cnJlbnQubW92ZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uVG91Y2hFbmQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgZyA9IHRvdWNoR2VzdHVyZVJlZi5jdXJyZW50O1xuICAgIGlmIChnLm1vdmVkKSByZXR1cm47XG4gICAgaWYgKGcuc3RhcnRlZE9uRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgY2xlYXJTZWxlY3Rpb25VSSgpO1xuXG4gICAgaWYgKGcuY2xpY2tlZE9uU3RhZ2UpIHtcbiAgICAgIG9uU2VsZWN0U2VjY2lvbj8uKG51bGwpO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwic2FsaXItbW9kby1tb3Zlci1mb25kb1wiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGcudGFwcGVkU2VjdGlvbklkKSB7XG4gICAgICBvblNlbGVjdFNlY2Npb24/LihnLnRhcHBlZFNlY3Rpb25JZCk7XG4gICAgfVxuICB9LCBbY2xlYXJTZWxlY3Rpb25VSSwgb25TZWxlY3RTZWNjaW9uXSk7XG5cbiAgY29uc3Qgb25Nb3VzZU1vdmUgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgaWYgKCFzZWxlY2Npb25BY3RpdmEgfHwgIWluaWNpb1NlbGVjY2lvbikgcmV0dXJuO1xuICAgICAgaWYgKHdpbmRvdy5fbW91c2VNb3ZlVGhyb3R0bGUpIHJldHVybjtcbiAgICAgIHdpbmRvdy5fbW91c2VNb3ZlVGhyb3R0bGUgPSB0cnVlO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB3aW5kb3cuX21vdXNlTW92ZVRocm90dGxlID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgICBjb25zdCBwb3MgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICAgICAgaWYgKCFwb3MpIHJldHVybjtcblxuICAgICAgICBjb25zdCBhcmVhID0ge1xuICAgICAgICAgIHg6IE1hdGgubWluKGluaWNpb1NlbGVjY2lvbi54LCBwb3MueCksXG4gICAgICAgICAgeTogTWF0aC5taW4oaW5pY2lvU2VsZWNjaW9uLnksIHBvcy55KSxcbiAgICAgICAgICB3aWR0aDogTWF0aC5hYnMocG9zLnggLSBpbmljaW9TZWxlY2Npb24ueCksXG4gICAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyhwb3MueSAtIGluaWNpb1NlbGVjY2lvbi55KSxcbiAgICAgICAgfTtcblxuICAgICAgICBzZXRBcmVhU2VsZWNjaW9uKGFyZWEpO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyhhcmVhLndpZHRoKSA+IDUgfHwgTWF0aC5hYnMoYXJlYS5oZWlnaHQpID4gNSkge1xuICAgICAgICAgIGlmICh3aW5kb3cuX3NlbGVjdGlvblRocm90dGxlKSByZXR1cm47XG4gICAgICAgICAgd2luZG93Ll9zZWxlY3Rpb25UaHJvdHRsZSA9IHRydWU7XG5cbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWRzID0gb2JqZXRvc1xuICAgICAgICAgICAgICAuZmlsdGVyKChvYmopID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gZWxlbWVudFJlZnMuY3VycmVudFtvYmouaWRdO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkZXRlY3RhckludGVyc2VjY2lvbkxpbmVhKG9iaiwgYXJlYSwgc3RhZ2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCh7IHJlbGF0aXZlVG86IHN0YWdlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICBib3gueCArIGJveC53aWR0aCA+PSBhcmVhLnggJiZcbiAgICAgICAgICAgICAgICAgIGJveC54IDw9IGFyZWEueCArIGFyZWEud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgIGJveC55ICsgYm94LmhlaWdodCA+PSBhcmVhLnkgJiZcbiAgICAgICAgICAgICAgICAgIGJveC55IDw9IGFyZWEueSArIGFyZWEuaGVpZ2h0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLm1hcCgob2JqKSA9PiBvYmouaWQpO1xuXG4gICAgICAgICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zKGlkcyk7XG4gICAgICAgICAgICB3aW5kb3cuX3NlbGVjdGlvblRocm90dGxlID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW1xuICAgICAgc2VsZWNjaW9uQWN0aXZhLFxuICAgICAgaW5pY2lvU2VsZWNjaW9uLFxuICAgICAgc2V0QXJlYVNlbGVjY2lvbixcbiAgICAgIG9iamV0b3MsXG4gICAgICBlbGVtZW50UmVmcyxcbiAgICAgIGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEsXG4gICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zLFxuICAgIF1cbiAgKTtcblxuICBjb25zdCBvbk1vdXNlVXAgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgaWYgKHdpbmRvdy5fZ3J1cG9MaWRlcikgcmV0dXJuO1xuICAgICAgaWYgKCFzZWxlY2Npb25BY3RpdmEgfHwgIWFyZWFTZWxlY2Npb24pIHJldHVybjtcblxuICAgICAgY29uc3QgbnVldmFTZWxlY2Npb24gPSBvYmpldG9zLmZpbHRlcigob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50W29iai5pZF07XG4gICAgICAgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iai5maWd1cmEgPT09IFwibGluZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEob2JqLCBhcmVhU2VsZWNjaW9uLCBzdGFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCgpO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBib3gueCArIGJveC53aWR0aCA+PSBhcmVhU2VsZWNjaW9uLnggJiZcbiAgICAgICAgICAgIGJveC54IDw9IGFyZWFTZWxlY2Npb24ueCArIGFyZWFTZWxlY2Npb24ud2lkdGggJiZcbiAgICAgICAgICAgIGJveC55ICsgYm94LmhlaWdodCA+PSBhcmVhU2VsZWNjaW9uLnkgJiZcbiAgICAgICAgICAgIGJveC55IDw9IGFyZWFTZWxlY2Npb24ueSArIGFyZWFTZWxlY2Npb24uaGVpZ2h0XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyhudWV2YVNlbGVjY2lvbi5tYXAoKG9iaikgPT4gb2JqLmlkKSk7XG4gICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zKFtdKTtcbiAgICAgIHNldFNlbGVjY2lvbkFjdGl2YShmYWxzZSk7XG4gICAgICBzZXRBcmVhU2VsZWNjaW9uKG51bGwpO1xuXG4gICAgICBpZiAod2luZG93Ll9zZWxlY3Rpb25UaHJvdHRsZSkgd2luZG93Ll9zZWxlY3Rpb25UaHJvdHRsZSA9IGZhbHNlO1xuICAgICAgaWYgKHdpbmRvdy5fYm91bmRzVXBkYXRlVGhyb3R0bGUpIHdpbmRvdy5fYm91bmRzVXBkYXRlVGhyb3R0bGUgPSBmYWxzZTtcbiAgICAgIHdpbmRvdy5fbGluZUludGVyc2VjdGlvbkNhY2hlID0ge307XG4gICAgfSxcbiAgICBbXG4gICAgICBzZWxlY2Npb25BY3RpdmEsXG4gICAgICBhcmVhU2VsZWNjaW9uLFxuICAgICAgb2JqZXRvcyxcbiAgICAgIGVsZW1lbnRSZWZzLFxuICAgICAgZGV0ZWN0YXJJbnRlcnNlY2Npb25MaW5lYSxcbiAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zLFxuICAgICAgc2V0U2VsZWNjaW9uQWN0aXZhLFxuICAgICAgc2V0QXJlYVNlbGVjY2lvbixcbiAgICBdXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBvbk1vdXNlRG93bixcbiAgICBvblRvdWNoU3RhcnQsXG4gICAgb25Ub3VjaE1vdmUsXG4gICAgb25Ub3VjaEVuZCxcbiAgICBvbk1vdXNlTW92ZSxcbiAgICBvbk1vdXNlVXAsXG4gIH07XG59XG5cclxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUmVmIiwiVE9VQ0hfTU9WRV9QWCIsImZpbmRSb290SGl0IiwidGFyZ2V0IiwiZWxlbWVudFJlZnMiLCJyb290cyIsIk9iamVjdCIsInZhbHVlcyIsImN1cnJlbnQiLCJsZW5ndGgiLCJmaW5kQW5jZXN0b3IiLCJub2RlIiwiaW5jbHVkZXMiLCJ1c2VTdGFnZUdlc3R1cmVzIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsImRyYWdTdGFydFBvcyIsImhhc0RyYWdnZWQiLCJzZWxlY2Npb25BY3RpdmEiLCJpbmljaW9TZWxlY2Npb24iLCJhcmVhU2VsZWNjaW9uIiwiZGV0ZWN0YXJJbnRlcnNlY2Npb25MaW5lYSIsInNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zIiwic2V0U2VsZWNjaW9uQWN0aXZhIiwic2V0SW5pY2lvU2VsZWNjaW9uIiwic2V0QXJlYVNlbGVjY2lvbiIsIm9uU2VsZWN0U2VjY2lvbiIsImNlcnJhck1lbnVzRmxvdGFudGVzIiwidG91Y2hHZXN0dXJlUmVmIiwic3RhcnRYIiwic3RhcnRZIiwibW92ZWQiLCJ0YXBwZWRTZWN0aW9uSWQiLCJjbGlja2VkT25TdGFnZSIsInN0YXJ0ZWRPbkVsZW1lbnQiLCJyZXNvbHZlU2VjdGlvbklkRnJvbVRhcmdldCIsImF0dHJzIiwiaWQiLCJzb21lIiwicyIsImZpbmQiLCJwYXJlbnQiLCJjbGVhclNlbGVjdGlvblVJIiwib25Nb3VzZURvd24iLCJlIiwic3RhZ2UiLCJnZXRTdGFnZSIsInJvb3RIaXQiLCJnZXRDbGFzc05hbWUiLCJ3aW5kb3ciLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJnZXRQb2ludGVyUG9zaXRpb24iLCJlc1RyYW5zZm9ybWVyIiwibmFtZSIsImVzU3RhZ2UiLCJlc1NlY2Npb24iLCJlc0ltYWdlbkZvbmRvIiwicG9zIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hNb3ZlIiwiZHgiLCJNYXRoIiwiYWJzIiwiZHkiLCJvblRvdWNoRW5kIiwiZyIsIm9uTW91c2VNb3ZlIiwiX21vdXNlTW92ZVRocm90dGxlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYXJlYSIsIm1pbiIsIl9zZWxlY3Rpb25UaHJvdHRsZSIsImlkcyIsImZpbHRlciIsIm9iaiIsInRpcG8iLCJmaWd1cmEiLCJib3giLCJnZXRDbGllbnRSZWN0IiwicmVsYXRpdmVUbyIsIm1hcCIsIm9uTW91c2VVcCIsIl9ncnVwb0xpZGVyIiwibnVldmFTZWxlY2Npb24iLCJfYm91bmRzVXBkYXRlVGhyb3R0bGUiLCJfbGluZUludGVyc2VjdGlvbkNhY2hlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useStageGestures.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/overlays/useOptionButtonPosition.js":
/*!*******************************************************************!*\
  !*** ./src/components/editor/overlays/useOptionButtonPosition.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useOptionButtonPosition)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nfunction useOptionButtonPosition({ botonOpcionesRef, elementRefs, elementosSeleccionados, stageRef, escalaVisual, escalaActiva }) {\n    const actualizarPosicionBotonOpciones = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useOptionButtonPosition.useCallback[actualizarPosicionBotonOpciones]\": ()=>{\n            if (true) return;\n            if (!botonOpcionesRef.current || elementosSeleccionados.length !== 1) return;\n            const nodeRef = elementRefs.current[elementosSeleccionados[0]];\n            const stage = stageRef.current;\n            if (!nodeRef || !stage) return;\n            try {\n                const box = nodeRef.getClientRect();\n                const stageContainer = typeof stage.container === \"function\" ? stage.container() : stage.getStage?.()?.container?.();\n                if (!stageContainer) return;\n                const stageRect = stageContainer.getBoundingClientRect();\n                const scale = Number.isFinite(escalaVisual) && escalaVisual > 0 ? escalaVisual : Number.isFinite(escalaActiva) && escalaActiva > 0 ? escalaActiva : 1;\n                const elementoX = stageRect.left + box.x * scale;\n                const elementoY = stageRect.top + box.y * scale;\n                const anchoElemento = box.width * scale;\n                const botonX = elementoX + anchoElemento;\n                const botonY = elementoY - 24;\n                const viewportWidth = window.innerWidth;\n                const viewportHeight = window.innerHeight;\n                if (botonX >= 0 && botonX <= viewportWidth && botonY >= 0 && botonY <= viewportHeight) {\n                    botonOpcionesRef.current.style.left = `${botonX}px`;\n                    botonOpcionesRef.current.style.top = `${botonY}px`;\n                    botonOpcionesRef.current.style.display = \"flex\";\n                } else {\n                    botonOpcionesRef.current.style.display = \"none\";\n                }\n            } catch  {\n                if (botonOpcionesRef.current) {\n                    botonOpcionesRef.current.style.display = \"none\";\n                }\n            }\n        }\n    }[\"useOptionButtonPosition.useCallback[actualizarPosicionBotonOpciones]\"], [\n        botonOpcionesRef,\n        elementosSeleccionados,\n        elementRefs,\n        stageRef,\n        escalaVisual,\n        escalaActiva\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useOptionButtonPosition.useEffect\": ()=>{\n            if (elementosSeleccionados.length !== 1) return undefined;\n            const timeoutId = window.setTimeout({\n                \"useOptionButtonPosition.useEffect.timeoutId\": ()=>{\n                    actualizarPosicionBotonOpciones();\n                }\n            }[\"useOptionButtonPosition.useEffect.timeoutId\"], 50);\n            return ({\n                \"useOptionButtonPosition.useEffect\": ()=>window.clearTimeout(timeoutId)\n            })[\"useOptionButtonPosition.useEffect\"];\n        }\n    }[\"useOptionButtonPosition.useEffect\"], [\n        elementosSeleccionados,\n        escalaActiva,\n        actualizarPosicionBotonOpciones\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useOptionButtonPosition.useEffect\": ()=>{\n            const handleScrollResize = {\n                \"useOptionButtonPosition.useEffect.handleScrollResize\": ()=>{\n                    if (elementosSeleccionados.length === 1) {\n                        actualizarPosicionBotonOpciones();\n                    }\n                }\n            }[\"useOptionButtonPosition.useEffect.handleScrollResize\"];\n            window.addEventListener(\"scroll\", handleScrollResize, true);\n            window.addEventListener(\"resize\", handleScrollResize);\n            return ({\n                \"useOptionButtonPosition.useEffect\": ()=>{\n                    window.removeEventListener(\"scroll\", handleScrollResize, true);\n                    window.removeEventListener(\"resize\", handleScrollResize);\n                }\n            })[\"useOptionButtonPosition.useEffect\"];\n        }\n    }[\"useOptionButtonPosition.useEffect\"], [\n        elementosSeleccionados,\n        actualizarPosicionBotonOpciones\n    ]);\n    return {\n        actualizarPosicionBotonOpciones\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9vdmVybGF5cy91c2VPcHRpb25CdXR0b25Qb3NpdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUVoQyxTQUFTRSx3QkFBd0IsRUFDOUNDLGdCQUFnQixFQUNoQkMsV0FBVyxFQUNYQyxzQkFBc0IsRUFDdEJDLFFBQVEsRUFDUkMsWUFBWSxFQUNaQyxZQUFZLEVBQ2I7SUFDQyxNQUFNQyxrQ0FBa0NULGtEQUFXQTtnRkFBQztZQUNsRCxJQUFJLElBQTZCLEVBQUU7WUFDbkMsSUFBSSxDQUFDRyxpQkFBaUJPLE9BQU8sSUFBSUwsdUJBQXVCTSxNQUFNLEtBQUssR0FBRztZQUV0RSxNQUFNQyxVQUFVUixZQUFZTSxPQUFPLENBQUNMLHNCQUFzQixDQUFDLEVBQUUsQ0FBQztZQUM5RCxNQUFNUSxRQUFRUCxTQUFTSSxPQUFPO1lBQzlCLElBQUksQ0FBQ0UsV0FBVyxDQUFDQyxPQUFPO1lBRXhCLElBQUk7Z0JBQ0YsTUFBTUMsTUFBTUYsUUFBUUcsYUFBYTtnQkFDakMsTUFBTUMsaUJBQ0osT0FBT0gsTUFBTUksU0FBUyxLQUFLLGFBQ3ZCSixNQUFNSSxTQUFTLEtBQ2ZKLE1BQU1LLFFBQVEsTUFBTUQ7Z0JBQzFCLElBQUksQ0FBQ0QsZ0JBQWdCO2dCQUVyQixNQUFNRyxZQUFZSCxlQUFlSSxxQkFBcUI7Z0JBQ3RELE1BQU1DLFFBQ0pDLE9BQU9DLFFBQVEsQ0FBQ2hCLGlCQUFpQkEsZUFBZSxJQUM1Q0EsZUFDQWUsT0FBT0MsUUFBUSxDQUFDZixpQkFBaUJBLGVBQWUsSUFDOUNBLGVBQ0E7Z0JBRVIsTUFBTWdCLFlBQVlMLFVBQVVNLElBQUksR0FBR1gsSUFBSVksQ0FBQyxHQUFHTDtnQkFDM0MsTUFBTU0sWUFBWVIsVUFBVVMsR0FBRyxHQUFHZCxJQUFJZSxDQUFDLEdBQUdSO2dCQUMxQyxNQUFNUyxnQkFBZ0JoQixJQUFJaUIsS0FBSyxHQUFHVjtnQkFFbEMsTUFBTVcsU0FBU1IsWUFBWU07Z0JBQzNCLE1BQU1HLFNBQVNOLFlBQVk7Z0JBRTNCLE1BQU1PLGdCQUFnQkMsT0FBT0MsVUFBVTtnQkFDdkMsTUFBTUMsaUJBQWlCRixPQUFPRyxXQUFXO2dCQUV6QyxJQUFJTixVQUFVLEtBQUtBLFVBQVVFLGlCQUFpQkQsVUFBVSxLQUFLQSxVQUFVSSxnQkFBZ0I7b0JBQ3JGbEMsaUJBQWlCTyxPQUFPLENBQUM2QixLQUFLLENBQUNkLElBQUksR0FBRyxHQUFHTyxPQUFPLEVBQUUsQ0FBQztvQkFDbkQ3QixpQkFBaUJPLE9BQU8sQ0FBQzZCLEtBQUssQ0FBQ1gsR0FBRyxHQUFHLEdBQUdLLE9BQU8sRUFBRSxDQUFDO29CQUNsRDlCLGlCQUFpQk8sT0FBTyxDQUFDNkIsS0FBSyxDQUFDQyxPQUFPLEdBQUc7Z0JBQzNDLE9BQU87b0JBQ0xyQyxpQkFBaUJPLE9BQU8sQ0FBQzZCLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO2dCQUMzQztZQUNGLEVBQUUsT0FBTTtnQkFDTixJQUFJckMsaUJBQWlCTyxPQUFPLEVBQUU7b0JBQzVCUCxpQkFBaUJPLE9BQU8sQ0FBQzZCLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO2dCQUMzQztZQUNGO1FBQ0Y7K0VBQUc7UUFDRHJDO1FBQ0FFO1FBQ0FEO1FBQ0FFO1FBQ0FDO1FBQ0FDO0tBQ0Q7SUFFRFAsZ0RBQVNBOzZDQUFDO1lBQ1IsSUFBSUksdUJBQXVCTSxNQUFNLEtBQUssR0FBRyxPQUFPOEI7WUFDaEQsTUFBTUMsWUFBWVAsT0FBT1EsVUFBVTsrREFBQztvQkFDbENsQztnQkFDRjs4REFBRztZQUNIO3FEQUFPLElBQU0wQixPQUFPUyxZQUFZLENBQUNGOztRQUNuQzs0Q0FBRztRQUFDckM7UUFBd0JHO1FBQWNDO0tBQWdDO0lBRTFFUixnREFBU0E7NkNBQUM7WUFDUixNQUFNNEM7d0VBQXFCO29CQUN6QixJQUFJeEMsdUJBQXVCTSxNQUFNLEtBQUssR0FBRzt3QkFDdkNGO29CQUNGO2dCQUNGOztZQUVBMEIsT0FBT1csZ0JBQWdCLENBQUMsVUFBVUQsb0JBQW9CO1lBQ3REVixPQUFPVyxnQkFBZ0IsQ0FBQyxVQUFVRDtZQUVsQztxREFBTztvQkFDTFYsT0FBT1ksbUJBQW1CLENBQUMsVUFBVUYsb0JBQW9CO29CQUN6RFYsT0FBT1ksbUJBQW1CLENBQUMsVUFBVUY7Z0JBQ3ZDOztRQUNGOzRDQUFHO1FBQUN4QztRQUF3Qkk7S0FBZ0M7SUFFNUQsT0FBTztRQUNMQTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxvdmVybGF5c1xcdXNlT3B0aW9uQnV0dG9uUG9zaXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VPcHRpb25CdXR0b25Qb3NpdGlvbih7XG4gIGJvdG9uT3BjaW9uZXNSZWYsXG4gIGVsZW1lbnRSZWZzLFxuICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLFxuICBzdGFnZVJlZixcbiAgZXNjYWxhVmlzdWFsLFxuICBlc2NhbGFBY3RpdmEsXG59KSB7XG4gIGNvbnN0IGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcbiAgICBpZiAoIWJvdG9uT3BjaW9uZXNSZWYuY3VycmVudCB8fCBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCAhPT0gMSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgbm9kZVJlZiA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbZWxlbWVudG9zU2VsZWNjaW9uYWRvc1swXV07XG4gICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZi5jdXJyZW50O1xuICAgIGlmICghbm9kZVJlZiB8fCAhc3RhZ2UpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBib3ggPSBub2RlUmVmLmdldENsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHN0YWdlQ29udGFpbmVyID1cbiAgICAgICAgdHlwZW9mIHN0YWdlLmNvbnRhaW5lciA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBzdGFnZS5jb250YWluZXIoKVxuICAgICAgICAgIDogc3RhZ2UuZ2V0U3RhZ2U/LigpPy5jb250YWluZXI/LigpO1xuICAgICAgaWYgKCFzdGFnZUNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgICBjb25zdCBzdGFnZVJlY3QgPSBzdGFnZUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHNjYWxlID1cbiAgICAgICAgTnVtYmVyLmlzRmluaXRlKGVzY2FsYVZpc3VhbCkgJiYgZXNjYWxhVmlzdWFsID4gMFxuICAgICAgICAgID8gZXNjYWxhVmlzdWFsXG4gICAgICAgICAgOiBOdW1iZXIuaXNGaW5pdGUoZXNjYWxhQWN0aXZhKSAmJiBlc2NhbGFBY3RpdmEgPiAwXG4gICAgICAgICAgICA/IGVzY2FsYUFjdGl2YVxuICAgICAgICAgICAgOiAxO1xuXG4gICAgICBjb25zdCBlbGVtZW50b1ggPSBzdGFnZVJlY3QubGVmdCArIGJveC54ICogc2NhbGU7XG4gICAgICBjb25zdCBlbGVtZW50b1kgPSBzdGFnZVJlY3QudG9wICsgYm94LnkgKiBzY2FsZTtcbiAgICAgIGNvbnN0IGFuY2hvRWxlbWVudG8gPSBib3gud2lkdGggKiBzY2FsZTtcblxuICAgICAgY29uc3QgYm90b25YID0gZWxlbWVudG9YICsgYW5jaG9FbGVtZW50bztcbiAgICAgIGNvbnN0IGJvdG9uWSA9IGVsZW1lbnRvWSAtIDI0O1xuXG4gICAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgICAgaWYgKGJvdG9uWCA+PSAwICYmIGJvdG9uWCA8PSB2aWV3cG9ydFdpZHRoICYmIGJvdG9uWSA+PSAwICYmIGJvdG9uWSA8PSB2aWV3cG9ydEhlaWdodCkge1xuICAgICAgICBib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQuc3R5bGUubGVmdCA9IGAke2JvdG9uWH1weGA7XG4gICAgICAgIGJvdG9uT3BjaW9uZXNSZWYuY3VycmVudC5zdHlsZS50b3AgPSBgJHtib3Rvbll9cHhgO1xuICAgICAgICBib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm90b25PcGNpb25lc1JlZi5jdXJyZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIGlmIChib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgYm90b25PcGNpb25lc1JlZi5jdXJyZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtcbiAgICBib3Rvbk9wY2lvbmVzUmVmLFxuICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgZWxlbWVudFJlZnMsXG4gICAgc3RhZ2VSZWYsXG4gICAgZXNjYWxhVmlzdWFsLFxuICAgIGVzY2FsYUFjdGl2YSxcbiAgXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggIT09IDEpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3QgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcygpO1xuICAgIH0sIDUwKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICB9LCBbZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgZXNjYWxhQWN0aXZhLCBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVTY3JvbGxSZXNpemUgPSAoKSA9PiB7XG4gICAgICBpZiAoZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGxSZXNpemUsIHRydWUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVNjcm9sbFJlc2l6ZSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsUmVzaXplLCB0cnVlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVNjcm9sbFJlc2l6ZSk7XG4gICAgfTtcbiAgfSwgW2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MsIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXNdKTtcblxuICByZXR1cm4ge1xuICAgIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMsXG4gIH07XG59XG5cclxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlT3B0aW9uQnV0dG9uUG9zaXRpb24iLCJib3Rvbk9wY2lvbmVzUmVmIiwiZWxlbWVudFJlZnMiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic3RhZ2VSZWYiLCJlc2NhbGFWaXN1YWwiLCJlc2NhbGFBY3RpdmEiLCJhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzIiwiY3VycmVudCIsImxlbmd0aCIsIm5vZGVSZWYiLCJzdGFnZSIsImJveCIsImdldENsaWVudFJlY3QiLCJzdGFnZUNvbnRhaW5lciIsImNvbnRhaW5lciIsImdldFN0YWdlIiwic3RhZ2VSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwic2NhbGUiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImVsZW1lbnRvWCIsImxlZnQiLCJ4IiwiZWxlbWVudG9ZIiwidG9wIiwieSIsImFuY2hvRWxlbWVudG8iLCJ3aWR0aCIsImJvdG9uWCIsImJvdG9uWSIsInZpZXdwb3J0V2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwidmlld3BvcnRIZWlnaHQiLCJpbm5lckhlaWdodCIsInN0eWxlIiwiZGlzcGxheSIsInVuZGVmaW5lZCIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJoYW5kbGVTY3JvbGxSZXNpemUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/overlays/useOptionButtonPosition.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/persistence/useBorradorSync.js":
/*!**************************************************************!*\
  !*** ./src/components/editor/persistence/useBorradorSync.js ***!
  \**************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useBorradorSync)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/firebase */ \"(pages-dir-node)/./src/firebase.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, firebase_storage__WEBPACK_IMPORTED_MODULE_2__, _firebase__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, firebase_storage__WEBPACK_IMPORTED_MODULE_2__, _firebase__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/components/editor/persistence/useBorradorSync.js\n\n\n\n\nconst STORAGE_DOWNLOAD_URL_REGEX = /^https?:\\/\\/firebasestorage\\.googleapis\\.com\\/v0\\/b\\/[^/]+\\/o\\/.+/i;\nfunction parseStoragePathFromDownloadUrl(value) {\n    if (typeof value !== \"string\" || !STORAGE_DOWNLOAD_URL_REGEX.test(value)) {\n        return null;\n    }\n    try {\n        const url = new URL(value);\n        const marker = \"/o/\";\n        const index = url.pathname.indexOf(marker);\n        if (index < 0) return null;\n        const encodedPath = url.pathname.slice(index + marker.length);\n        return encodedPath ? decodeURIComponent(encodedPath) : null;\n    } catch  {\n        return null;\n    }\n}\nasync function refreshStorageUrl(value, cache) {\n    const path = parseStoragePathFromDownloadUrl(value);\n    if (!path) return value;\n    if (cache.has(path)) {\n        return cache.get(path);\n    }\n    try {\n        const freshUrl = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.getDownloadURL)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_3__.storage, path));\n        cache.set(path, freshUrl);\n        return freshUrl;\n    } catch (error) {\n        const code = String(error?.code || \"\");\n        const shouldDropUrl = code.includes(\"storage/object-not-found\") || code.includes(\"storage/unauthorized\") || code.includes(\"storage/forbidden\");\n        const fallbackValue = shouldDropUrl ? null : value;\n        cache.set(path, fallbackValue);\n        return fallbackValue;\n    }\n}\nasync function refreshUrlsDeep(value, cache) {\n    if (typeof value === \"string\") {\n        return refreshStorageUrl(value, cache);\n    }\n    if (Array.isArray(value)) {\n        return Promise.all(value.map((item)=>refreshUrlsDeep(item, cache)));\n    }\n    if (value && typeof value === \"object\") {\n        const pairs = await Promise.all(Object.entries(value).map(async ([key, nested])=>{\n            const refreshed = await refreshUrlsDeep(nested, cache);\n            return [\n                key,\n                refreshed\n            ];\n        }));\n        return Object.fromEntries(pairs);\n    }\n    return value;\n}\n/**\n * Hook de sincronizacion Firestore para el borrador (carga + guardado con debounce).\n * Mantiene la logica original de CanvasEditor.\n */ function useBorradorSync({ slug, userId, // estado actual\nobjetos, secciones, cargado, // setters\nsetObjetos, setSecciones, setCargado, setSeccionActivaId, // refs / helpers que ya existen en CanvasEditor\nignoreNextUpdateRef, stageRef, // helpers de tu layout actual\nnormalizarAltoModo, validarPuntosLinea, // constantes\nALTURA_PANTALLA_EDITOR }) {\n    // helper: limpiar undefined recursivo\n    const limpiarUndefined = (obj)=>{\n        if (Array.isArray(obj)) return obj.map(limpiarUndefined);\n        if (obj !== null && typeof obj === \"object\") {\n            const objLimpio = {};\n            Object.keys(obj).forEach((key)=>{\n                const valor = obj[key];\n                if (valor !== undefined) objLimpio[key] = limpiarUndefined(valor);\n            });\n            return objLimpio;\n        }\n        return obj;\n    };\n    // 1) Cargar borrador desde Firestore\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useBorradorSync.useEffect\": ()=>{\n            if (!slug) return;\n            const cargar = {\n                \"useBorradorSync.useEffect.cargar\": async ()=>{\n                    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"borradores\", slug);\n                    const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(ref);\n                    if (snap.exists()) {\n                        const data = snap.data();\n                        const seccionesData = data.secciones || [];\n                        const objetosData = data.objetos || [];\n                        // Refresca URLs de Firebase Storage por si hay tokens vencidos/revocados.\n                        const refreshCache = new Map();\n                        const [seccionesRefrescadas, objetosRefrescados] = await Promise.all([\n                            refreshUrlsDeep(seccionesData, refreshCache),\n                            refreshUrlsDeep(objetosData, refreshCache)\n                        ]);\n                        // Mantengo tu migracion de yNorm para secciones pantalla\n                        const objsMigrados = objetosRefrescados.map({\n                            \"useBorradorSync.useEffect.cargar.objsMigrados\": (o)=>{\n                                if (!o?.seccionId) return o;\n                                const sec = seccionesRefrescadas.find({\n                                    \"useBorradorSync.useEffect.cargar.objsMigrados.sec\": (s)=>s.id === o.seccionId\n                                }[\"useBorradorSync.useEffect.cargar.objsMigrados.sec\"]);\n                                const modo = normalizarAltoModo(sec?.altoModo);\n                                if (modo === \"pantalla\") {\n                                    if (!Number.isFinite(o.yNorm)) {\n                                        const yPx = Number.isFinite(o.y) ? o.y : 0;\n                                        const yNorm = Math.max(0, Math.min(1, yPx / ALTURA_PANTALLA_EDITOR));\n                                        return {\n                                            ...o,\n                                            yNorm\n                                        };\n                                    }\n                                }\n                                return o;\n                            }\n                        }[\"useBorradorSync.useEffect.cargar.objsMigrados\"]);\n                        setObjetos(objsMigrados);\n                        setSecciones(seccionesRefrescadas);\n                        // Setear primera seccion activa si no hay\n                        if (typeof setSeccionActivaId === \"function\" && seccionesRefrescadas.length > 0) {\n                            setSeccionActivaId({\n                                \"useBorradorSync.useEffect.cargar\": (prev)=>prev || seccionesRefrescadas[0].id\n                            }[\"useBorradorSync.useEffect.cargar\"]);\n                        }\n                    }\n                    setCargado(true);\n                }\n            }[\"useBorradorSync.useEffect.cargar\"];\n            cargar();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"useBorradorSync.useEffect\"], [\n        slug\n    ]);\n    // 2) Guardar en Firestore con debounce cuando cambian objetos/secciones\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useBorradorSync.useEffect\": ()=>{\n            if (!cargado) return;\n            if (!slug) return;\n            if (ignoreNextUpdateRef?.current) {\n                requestAnimationFrame({\n                    \"useBorradorSync.useEffect\": ()=>{\n                        ignoreNextUpdateRef.current = Math.max(0, (ignoreNextUpdateRef.current || 0) - 1);\n                    }\n                }[\"useBorradorSync.useEffect\"]);\n                return;\n            }\n            // No guardar durante resize (logica actual)\n            if (window._resizeData?.isResizing) return;\n            const timeoutId = setTimeout({\n                \"useBorradorSync.useEffect.timeoutId\": async ()=>{\n                    try {\n                        // Validacion: lineas + normalizacion de textos\n                        const objetosValidados = (objetos || []).map({\n                            \"useBorradorSync.useEffect.timeoutId.objetosValidados\": (obj)=>{\n                                if (obj?.tipo === \"forma\" && obj?.figura === \"line\") {\n                                    return validarPuntosLinea(obj);\n                                }\n                                if (obj?.tipo === \"texto\") {\n                                    return {\n                                        ...obj,\n                                        color: obj.colorTexto || obj.color || obj.fill || \"#000000\",\n                                        stroke: obj.stroke || null,\n                                        strokeWidth: obj.strokeWidth || 0,\n                                        shadowColor: obj.shadowColor || null,\n                                        shadowBlur: obj.shadowBlur || 0,\n                                        shadowOffsetX: obj.shadowOffsetX || 0,\n                                        shadowOffsetY: obj.shadowOffsetY || 0\n                                    };\n                                }\n                                return obj;\n                            }\n                        }[\"useBorradorSync.useEffect.timeoutId.objetosValidados\"]);\n                        const seccionesLimpias = limpiarUndefined(secciones);\n                        const objetosLimpios = limpiarUndefined(objetosValidados);\n                        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"borradores\", slug);\n                        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                            objetos: objetosLimpios,\n                            secciones: seccionesLimpias,\n                            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n                        });\n                        // Thumbnail (mantengo tu logica con import dinamico)\n                        if (stageRef?.current && userId && slug) {\n                            const { guardarThumbnailDesdeStage } = await __webpack_require__.e(/*! import() */ \"_pages-dir-node_src_utils_guardarThumbnail_js\").then(__webpack_require__.bind(__webpack_require__, /*! @/utils/guardarThumbnail */ \"(pages-dir-node)/./src/utils/guardarThumbnail.js\"));\n                            await guardarThumbnailDesdeStage({\n                                stageRef,\n                                uid: userId,\n                                slug\n                            });\n                        }\n                    } catch (error) {\n                        console.error(\"Error guardando en Firebase:\", error);\n                    }\n                }\n            }[\"useBorradorSync.useEffect.timeoutId\"], 500);\n            return ({\n                \"useBorradorSync.useEffect\": ()=>clearTimeout(timeoutId)\n            })[\"useBorradorSync.useEffect\"];\n        }\n    }[\"useBorradorSync.useEffect\"], [\n        objetos,\n        secciones,\n        cargado,\n        slug,\n        userId,\n        ignoreNextUpdateRef,\n        stageRef,\n        validarPuntosLinea\n    ]);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9wZXJzaXN0ZW5jZS91c2VCb3JyYWRvclN5bmMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSx1REFBdUQ7QUFDckI7QUFDMkM7QUFDUjtBQUM1QjtBQUV6QyxNQUFNVSw2QkFDSjtBQUVGLFNBQVNDLGdDQUFnQ0MsS0FBSztJQUM1QyxJQUFJLE9BQU9BLFVBQVUsWUFBWSxDQUFDRiwyQkFBMkJHLElBQUksQ0FBQ0QsUUFBUTtRQUN4RSxPQUFPO0lBQ1Q7SUFFQSxJQUFJO1FBQ0YsTUFBTUUsTUFBTSxJQUFJQyxJQUFJSDtRQUNwQixNQUFNSSxTQUFTO1FBQ2YsTUFBTUMsUUFBUUgsSUFBSUksUUFBUSxDQUFDQyxPQUFPLENBQUNIO1FBQ25DLElBQUlDLFFBQVEsR0FBRyxPQUFPO1FBRXRCLE1BQU1HLGNBQWNOLElBQUlJLFFBQVEsQ0FBQ0csS0FBSyxDQUFDSixRQUFRRCxPQUFPTSxNQUFNO1FBQzVELE9BQU9GLGNBQWNHLG1CQUFtQkgsZUFBZTtJQUN6RCxFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVBLGVBQWVJLGtCQUFrQlosS0FBSyxFQUFFYSxLQUFLO0lBQzNDLE1BQU1DLE9BQU9mLGdDQUFnQ0M7SUFDN0MsSUFBSSxDQUFDYyxNQUFNLE9BQU9kO0lBRWxCLElBQUlhLE1BQU1FLEdBQUcsQ0FBQ0QsT0FBTztRQUNuQixPQUFPRCxNQUFNRyxHQUFHLENBQUNGO0lBQ25CO0lBRUEsSUFBSTtRQUNGLE1BQU1HLFdBQVcsTUFBTXhCLGdFQUFjQSxDQUFDRSxxREFBVUEsQ0FBQ0UsOENBQU9BLEVBQUVpQjtRQUMxREQsTUFBTUssR0FBRyxDQUFDSixNQUFNRztRQUNoQixPQUFPQTtJQUNULEVBQUUsT0FBT0UsT0FBTztRQUNkLE1BQU1DLE9BQU9DLE9BQU9GLE9BQU9DLFFBQVE7UUFDbkMsTUFBTUUsZ0JBQ0pGLEtBQUtHLFFBQVEsQ0FBQywrQkFDZEgsS0FBS0cs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QUFLLENBQUMsZ0NBQWdDQTtvQkFDaEQ7Z0JBQ0Y7c0RBQUc7WUFFSDs2Q0FBTyxJQUFNK0YsYUFBYXBCOztRQUM1QjtvQ0FBRztRQUFDcEQ7UUFBU0M7UUFBV0M7UUFBU0o7UUFBTUM7UUFBUVE7UUFBcUJDO1FBQVVFO0tBQW1CO0FBQ25HIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxccGVyc2lzdGVuY2VcXHVzZUJvcnJhZG9yU3luYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3IvcGVyc2lzdGVuY2UvdXNlQm9ycmFkb3JTeW5jLmpzXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGRvYywgZ2V0RG9jLCB1cGRhdGVEb2MsIHNlcnZlclRpbWVzdGFtcCB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IGdldERvd25sb2FkVVJMLCByZWYgYXMgc3RvcmFnZVJlZiB9IGZyb20gXCJmaXJlYmFzZS9zdG9yYWdlXCI7XG5pbXBvcnQgeyBkYiwgc3RvcmFnZSB9IGZyb20gXCJAL2ZpcmViYXNlXCI7XG5cbmNvbnN0IFNUT1JBR0VfRE9XTkxPQURfVVJMX1JFR0VYID1cbiAgL15odHRwcz86XFwvXFwvZmlyZWJhc2VzdG9yYWdlXFwuZ29vZ2xlYXBpc1xcLmNvbVxcL3YwXFwvYlxcL1teL10rXFwvb1xcLy4rL2k7XG5cbmZ1bmN0aW9uIHBhcnNlU3RvcmFnZVBhdGhGcm9tRG93bmxvYWRVcmwodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIiB8fCAhU1RPUkFHRV9ET1dOTE9BRF9VUkxfUkVHRVgudGVzdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCh2YWx1ZSk7XG4gICAgY29uc3QgbWFya2VyID0gXCIvby9cIjtcbiAgICBjb25zdCBpbmRleCA9IHVybC5wYXRobmFtZS5pbmRleE9mKG1hcmtlcik7XG4gICAgaWYgKGluZGV4IDwgMCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBlbmNvZGVkUGF0aCA9IHVybC5wYXRobmFtZS5zbGljZShpbmRleCArIG1hcmtlci5sZW5ndGgpO1xuICAgIHJldHVybiBlbmNvZGVkUGF0aCA/IGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkUGF0aCkgOiBudWxsO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiByZWZyZXNoU3RvcmFnZVVybCh2YWx1ZSwgY2FjaGUpIHtcbiAgY29uc3QgcGF0aCA9IHBhcnNlU3RvcmFnZVBhdGhGcm9tRG93bmxvYWRVcmwodmFsdWUpO1xuICBpZiAoIXBhdGgpIHJldHVybiB2YWx1ZTtcblxuICBpZiAoY2FjaGUuaGFzKHBhdGgpKSB7XG4gICAgcmV0dXJuIGNhY2hlLmdldChwYXRoKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZnJlc2hVcmwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChzdG9yYWdlUmVmKHN0b3JhZ2UsIHBhdGgpKTtcbiAgICBjYWNoZS5zZXQocGF0aCwgZnJlc2hVcmwpO1xuICAgIHJldHVybiBmcmVzaFVybDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBjb2RlID0gU3RyaW5nKGVycm9yPy5jb2RlIHx8IFwiXCIpO1xuICAgIGNvbnN0IHNob3VsZERyb3BVcmwgPVxuICAgICAgY29kZS5pbmNsdWRlcyhcInN0b3JhZ2Uvb2JqZWN0LW5vdC1mb3VuZFwiKSB8fFxuICAgICAgY29kZS5pbmNsdWRlcyhcInN0b3JhZ2UvdW5hdXRob3JpemVkXCIpIHx8XG4gICAgICBjb2RlLmluY2x1ZGVzKFwic3RvcmFnZS9mb3JiaWRkZW5cIik7XG5cbiAgICBjb25zdCBmYWxsYmFja1ZhbHVlID0gc2hvdWxkRHJvcFVybCA/IG51bGwgOiB2YWx1ZTtcbiAgICBjYWNoZS5zZXQocGF0aCwgZmFsbGJhY2tWYWx1ZSk7XG4gICAgcmV0dXJuIGZhbGxiYWNrVmFsdWU7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaFVybHNEZWVwKHZhbHVlLCBjYWNoZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHJlZnJlc2hTdG9yYWdlVXJsKHZhbHVlLCBjYWNoZSk7XG4gIH1cblxuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodmFsdWUubWFwKChpdGVtKSA9PiByZWZyZXNoVXJsc0RlZXAoaXRlbSwgY2FjaGUpKSk7XG4gIH1cblxuICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgcGFpcnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5tYXAoYXN5bmMgKFtrZXksIG5lc3RlZF0pID0+IHtcbiAgICAgICAgY29uc3QgcmVmcmVzaGVkID0gYXdhaXQgcmVmcmVzaFVybHNEZWVwKG5lc3RlZCwgY2FjaGUpO1xuICAgICAgICByZXR1cm4gW2tleSwgcmVmcmVzaGVkXTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKHBhaXJzKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBIb29rIGRlIHNpbmNyb25pemFjaW9uIEZpcmVzdG9yZSBwYXJhIGVsIGJvcnJhZG9yIChjYXJnYSArIGd1YXJkYWRvIGNvbiBkZWJvdW5jZSkuXG4gKiBNYW50aWVuZSBsYSBsb2dpY2Egb3JpZ2luYWwgZGUgQ2FudmFzRWRpdG9yLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VCb3JyYWRvclN5bmMoe1xuICBzbHVnLFxuICB1c2VySWQsXG5cbiAgLy8gZXN0YWRvIGFjdHVhbFxuICBvYmpldG9zLFxuICBzZWNjaW9uZXMsXG4gIGNhcmdhZG8sXG5cbiAgLy8gc2V0dGVyc1xuICBzZXRPYmpldG9zLFxuICBzZXRTZWNjaW9uZXMsXG4gIHNldENhcmdhZG8sXG4gIHNldFNlY2Npb25BY3RpdmFJZCxcblxuICAvLyByZWZzIC8gaGVscGVycyBxdWUgeWEgZXhpc3RlbiBlbiBDYW52YXNFZGl0b3JcbiAgaWdub3JlTmV4dFVwZGF0ZVJlZixcbiAgc3RhZ2VSZWYsXG5cbiAgLy8gaGVscGVycyBkZSB0dSBsYXlvdXQgYWN0dWFsXG4gIG5vcm1hbGl6YXJBbHRvTW9kbyxcbiAgdmFsaWRhclB1bnRvc0xpbmVhLFxuXG4gIC8vIGNvbnN0YW50ZXNcbiAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcbn0pIHtcbiAgLy8gaGVscGVyOiBsaW1waWFyIHVuZGVmaW5lZCByZWN1cnNpdm9cbiAgY29uc3QgbGltcGlhclVuZGVmaW5lZCA9IChvYmopID0+IHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSByZXR1cm4gb2JqLm1hcChsaW1waWFyVW5kZWZpbmVkKTtcblxuICAgIGlmIChvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgY29uc3Qgb2JqTGltcGlvID0ge307XG4gICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBjb25zdCB2YWxvciA9IG9ialtrZXldO1xuICAgICAgICBpZiAodmFsb3IgIT09IHVuZGVmaW5lZCkgb2JqTGltcGlvW2tleV0gPSBsaW1waWFyVW5kZWZpbmVkKHZhbG9yKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG9iakxpbXBpbztcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIDEpIENhcmdhciBib3JyYWRvciBkZXNkZSBGaXJlc3RvcmVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXNsdWcpIHJldHVybjtcblxuICAgIGNvbnN0IGNhcmdhciA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJib3JyYWRvcmVzXCIsIHNsdWcpO1xuICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvYyhyZWYpO1xuXG4gICAgICBpZiAoc25hcC5leGlzdHMoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gc25hcC5kYXRhKCk7XG4gICAgICAgIGNvbnN0IHNlY2Npb25lc0RhdGEgPSBkYXRhLnNlY2Npb25lcyB8fCBbXTtcbiAgICAgICAgY29uc3Qgb2JqZXRvc0RhdGEgPSBkYXRhLm9iamV0b3MgfHwgW107XG5cbiAgICAgICAgLy8gUmVmcmVzY2EgVVJMcyBkZSBGaXJlYmFzZSBTdG9yYWdlIHBvciBzaSBoYXkgdG9rZW5zIHZlbmNpZG9zL3Jldm9jYWRvcy5cbiAgICAgICAgY29uc3QgcmVmcmVzaENhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBbc2VjY2lvbmVzUmVmcmVzY2FkYXMsIG9iamV0b3NSZWZyZXNjYWRvc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgcmVmcmVzaFVybHNEZWVwKHNlY2Npb25lc0RhdGEsIHJlZnJlc2hDYWNoZSksXG4gICAgICAgICAgcmVmcmVzaFVybHNEZWVwKG9iamV0b3NEYXRhLCByZWZyZXNoQ2FjaGUpLFxuICAgICAgICBdKTtcblxuICAgICAgICAvLyBNYW50ZW5nbyB0dSBtaWdyYWNpb24gZGUgeU5vcm0gcGFyYSBzZWNjaW9uZXMgcGFudGFsbGFcbiAgICAgICAgY29uc3Qgb2Jqc01pZ3JhZG9zID0gb2JqZXRvc1JlZnJlc2NhZG9zLm1hcCgobykgPT4ge1xuICAgICAgICAgIGlmICghbz8uc2VjY2lvbklkKSByZXR1cm4gbztcblxuICAgICAgICAgIGNvbnN0IHNlYyA9IHNlY2Npb25lc1JlZnJlc2NhZGFzLmZpbmQoKHMpID0+IHMuaWQgPT09IG8uc2VjY2lvbklkKTtcbiAgICAgICAgICBjb25zdCBtb2RvID0gbm9ybWFsaXphckFsdG9Nb2RvKHNlYz8uYWx0b01vZG8pO1xuXG4gICAgICAgICAgaWYgKG1vZG8gPT09IFwicGFudGFsbGFcIikge1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoby55Tm9ybSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgeVB4ID0gTnVtYmVyLmlzRmluaXRlKG8ueSkgPyBvLnkgOiAwO1xuICAgICAgICAgICAgICBjb25zdCB5Tm9ybSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHlQeCAvIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubywgeU5vcm0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0T2JqZXRvcyhvYmpzTWlncmFkb3MpO1xuICAgICAgICBzZXRTZWNjaW9uZXMoc2VjY2lvbmVzUmVmcmVzY2FkYXMpO1xuXG4gICAgICAgIC8vIFNldGVhciBwcmltZXJhIHNlY2Npb24gYWN0aXZhIHNpIG5vIGhheVxuICAgICAgICBpZiAodHlwZW9mIHNldFNlY2Npb25BY3RpdmFJZCA9PT0gXCJmdW5jdGlvblwiICYmIHNlY2Npb25lc1JlZnJlc2NhZGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZXRTZWNjaW9uQWN0aXZhSWQoKHByZXYpID0+IHByZXYgfHwgc2VjY2lvbmVzUmVmcmVzY2FkYXNbMF0uaWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNldENhcmdhZG8odHJ1ZSk7XG4gICAgfTtcblxuICAgIGNhcmdhcigpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3NsdWddKTtcblxuICAvLyAyKSBHdWFyZGFyIGVuIEZpcmVzdG9yZSBjb24gZGVib3VuY2UgY3VhbmRvIGNhbWJpYW4gb2JqZXRvcy9zZWNjaW9uZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNhcmdhZG8pIHJldHVybjtcbiAgICBpZiAoIXNsdWcpIHJldHVybjtcblxuICAgIGlmIChpZ25vcmVOZXh0VXBkYXRlUmVmPy5jdXJyZW50KSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgPSBNYXRoLm1heCgwLCAoaWdub3JlTmV4dFVwZGF0ZVJlZi5jdXJyZW50IHx8IDApIC0gMSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBObyBndWFyZGFyIGR1cmFudGUgcmVzaXplIChsb2dpY2EgYWN0dWFsKVxuICAgIGlmICh3aW5kb3cuX3Jlc2l6ZURhdGE/LmlzUmVzaXppbmcpIHJldHVybjtcblxuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVmFsaWRhY2lvbjogbGluZWFzICsgbm9ybWFsaXphY2lvbiBkZSB0ZXh0b3NcbiAgICAgICAgY29uc3Qgb2JqZXRvc1ZhbGlkYWRvcyA9IChvYmpldG9zIHx8IFtdKS5tYXAoKG9iaikgPT4ge1xuICAgICAgICAgIGlmIChvYmo/LnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvYmo/LmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGFyUHVudG9zTGluZWEob2JqKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob2JqPy50aXBvID09PSBcInRleHRvXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLm9iaixcbiAgICAgICAgICAgICAgY29sb3I6IG9iai5jb2xvclRleHRvIHx8IG9iai5jb2xvciB8fCBvYmouZmlsbCB8fCBcIiMwMDAwMDBcIixcbiAgICAgICAgICAgICAgc3Ryb2tlOiBvYmouc3Ryb2tlIHx8IG51bGwsXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBvYmouc3Ryb2tlV2lkdGggfHwgMCxcbiAgICAgICAgICAgICAgc2hhZG93Q29sb3I6IG9iai5zaGFkb3dDb2xvciB8fCBudWxsLFxuICAgICAgICAgICAgICBzaGFkb3dCbHVyOiBvYmouc2hhZG93Qmx1ciB8fCAwLFxuICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRYOiBvYmouc2hhZG93T2Zmc2V0WCB8fCAwLFxuICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRZOiBvYmouc2hhZG93T2Zmc2V0WSB8fCAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZWNjaW9uZXNMaW1waWFzID0gbGltcGlhclVuZGVmaW5lZChzZWNjaW9uZXMpO1xuICAgICAgICBjb25zdCBvYmpldG9zTGltcGlvcyA9IGxpbXBpYXJVbmRlZmluZWQob2JqZXRvc1ZhbGlkYWRvcyk7XG5cbiAgICAgICAgY29uc3QgcmVmID0gZG9jKGRiLCBcImJvcnJhZG9yZXNcIiwgc2x1Zyk7XG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcbiAgICAgICAgICBvYmpldG9zOiBvYmpldG9zTGltcGlvcyxcbiAgICAgICAgICBzZWNjaW9uZXM6IHNlY2Npb25lc0xpbXBpYXMsXG4gICAgICAgICAgdWx0aW1hRWRpY2lvbjogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRodW1ibmFpbCAobWFudGVuZ28gdHUgbG9naWNhIGNvbiBpbXBvcnQgZGluYW1pY28pXG4gICAgICAgIGlmIChzdGFnZVJlZj8uY3VycmVudCAmJiB1c2VySWQgJiYgc2x1Zykge1xuICAgICAgICAgIGNvbnN0IHsgZ3VhcmRhclRodW1ibmFpbERlc2RlU3RhZ2UgfSA9IGF3YWl0IGltcG9ydChcIkAvdXRpbHMvZ3VhcmRhclRodW1ibmFpbFwiKTtcbiAgICAgICAgICBhd2FpdCBndWFyZGFyVGh1bWJuYWlsRGVzZGVTdGFnZSh7IHN0YWdlUmVmLCB1aWQ6IHVzZXJJZCwgc2x1ZyB9KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGd1YXJkYW5kbyBlbiBGaXJlYmFzZTpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0sIDUwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gIH0sIFtvYmpldG9zLCBzZWNjaW9uZXMsIGNhcmdhZG8sIHNsdWcsIHVzZXJJZCwgaWdub3JlTmV4dFVwZGF0ZVJlZiwgc3RhZ2VSZWYsIHZhbGlkYXJQdW50b3NMaW5lYV0pO1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsImRvYyIsImdldERvYyIsInVwZGF0ZURvYyIsInNlcnZlclRpbWVzdGFtcCIsImdldERvd25sb2FkVVJMIiwicmVmIiwic3RvcmFnZVJlZiIsImRiIiwic3RvcmFnZSIsIlNUT1JBR0VfRE9XTkxPQURfVVJMX1JFR0VYIiwicGFyc2VTdG9yYWdlUGF0aEZyb21Eb3dubG9hZFVybCIsInZhbHVlIiwidGVzdCIsInVybCIsIlVSTCIsIm1hcmtlciIsImluZGV4IiwicGF0aG5hbWUiLCJpbmRleE9mIiwiZW5jb2RlZFBhdGgiLCJzbGljZSIsImxlbmd0aCIsImRlY29kZVVSSUNvbXBvbmVudCIsInJlZnJlc2hTdG9yYWdlVXJsIiwiY2FjaGUiLCJwYXRoIiwiaGFzIiwiZ2V0IiwiZnJlc2hVcmwiLCJzZXQiLCJlcnJvciIsImNvZGUiLCJTdHJpbmciLCJzaG91bGREcm9wVXJsIiwiaW5jbHVkZXMiLCJmYWxsYmFja1ZhbHVlIiwicmVmcmVzaFVybHNEZWVwIiwiQXJyYXkiLCJpc0FycmF5IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsIml0ZW0iLCJwYWlycyIsIk9iamVjdCIsImVudHJpZXMiLCJrZXkiLCJuZXN0ZWQiLCJyZWZyZXNoZWQiLCJmcm9tRW50cmllcyIsInVzZUJvcnJhZG9yU3luYyIsInNsdWciLCJ1c2VySWQiLCJvYmpldG9zIiwic2VjY2lvbmVzIiwiY2FyZ2FkbyIsInNldE9iamV0b3MiLCJzZXRTZWNjaW9uZXMiLCJzZXRDYXJnYWRvIiwic2V0U2VjY2lvbkFjdGl2YUlkIiwiaWdub3JlTmV4dFVwZGF0ZVJlZiIsInN0YWdlUmVmIiwibm9ybWFsaXphckFsdG9Nb2RvIiwidmFsaWRhclB1bnRvc0xpbmVhIiwiQUxUVVJBX1BBTlRBTExBX0VESVRPUiIsImxpbXBpYXJVbmRlZmluZWQiLCJvYmoiLCJvYmpMaW1waW8iLCJrZXlzIiwiZm9yRWFjaCIsInZhbG9yIiwidW5kZWZpbmVkIiwiY2FyZ2FyIiwic25hcCIsImV4aXN0cyIsImRhdGEiLCJzZWNjaW9uZXNEYXRhIiwib2JqZXRvc0RhdGEiLCJyZWZyZXNoQ2FjaGUiLCJNYXAiLCJzZWNjaW9uZXNSZWZyZXNjYWRhcyIsIm9iamV0b3NSZWZyZXNjYWRvcyIsIm9ianNNaWdyYWRvcyIsIm8iLCJzZWNjaW9uSWQiLCJzZWMiLCJmaW5kIiwicyIsImlkIiwibW9kbyIsImFsdG9Nb2RvIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ5Tm9ybSIsInlQeCIsInkiLCJNYXRoIiwibWF4IiwibWluIiwicHJldiIsImN1cnJlbnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3aW5kb3ciLCJfcmVzaXplRGF0YSIsImlzUmVzaXppbmciLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0Iiwib2JqZXRvc1ZhbGlkYWRvcyIsInRpcG8iLCJmaWd1cmEiLCJjb2xvciIsImNvbG9yVGV4dG8iLCJmaWxsIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXRYIiwic2hhZG93T2Zmc2V0WSIsInNlY2Npb25lc0xpbXBpYXMiLCJvYmpldG9zTGltcGlvcyIsInVsdGltYUVkaWNpb24iLCJndWFyZGFyVGh1bWJuYWlsRGVzZGVTdGFnZSIsInVpZCIsImNvbnNvbGUiLCJjbGVhclRpbWVvdXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/persistence/useBorradorSync.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/sections/ConfirmDeleteSectionModal.jsx":
/*!**********************************************************************!*\
  !*** ./src/components/editor/sections/ConfirmDeleteSectionModal.jsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ConfirmDeleteSectionModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_AlertTriangle_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=AlertTriangle,Trash2!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=AlertTriangle,Trash2!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n\n\n\nfunction ConfirmDeleteSectionModal({ isOpen, sectionName, itemCount = 0, isDeleting = false, onCancel, onConfirm }) {\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ConfirmDeleteSectionModal.useEffect\": ()=>{\n            if (!isOpen) return undefined;\n            const previousOverflow = document.body.style.overflow;\n            const onKeyDown = {\n                \"ConfirmDeleteSectionModal.useEffect.onKeyDown\": (event)=>{\n                    if (event.key === \"Escape\" && !isDeleting) {\n                        onCancel?.();\n                    }\n                }\n            }[\"ConfirmDeleteSectionModal.useEffect.onKeyDown\"];\n            document.addEventListener(\"keydown\", onKeyDown);\n            document.body.style.overflow = \"hidden\";\n            return ({\n                \"ConfirmDeleteSectionModal.useEffect\": ()=>{\n                    document.removeEventListener(\"keydown\", onKeyDown);\n                    document.body.style.overflow = previousOverflow;\n                }\n            })[\"ConfirmDeleteSectionModal.useEffect\"];\n        }\n    }[\"ConfirmDeleteSectionModal.useEffect\"], [\n        isOpen,\n        isDeleting,\n        onCancel\n    ]);\n    const safeSectionName = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ConfirmDeleteSectionModal.useMemo[safeSectionName]\": ()=>{\n            const normalized = String(sectionName || \"\").trim();\n            return normalized || \"sin nombre\";\n        }\n    }[\"ConfirmDeleteSectionModal.useMemo[safeSectionName]\"], [\n        sectionName\n    ]);\n    const elementosTexto = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ConfirmDeleteSectionModal.useMemo[elementosTexto]\": ()=>{\n            const count = Number.isFinite(itemCount) ? Math.max(0, itemCount) : 0;\n            return count === 1 ? \"1 elemento\" : `${count} elementos`;\n        }\n    }[\"ConfirmDeleteSectionModal.useMemo[elementosTexto]\"], [\n        itemCount\n    ]);\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 z-[9999] bg-slate-900/60 backdrop-blur-[2px] flex items-center justify-center p-4\",\n        onMouseDown: (event)=>{\n            if (event.target === event.currentTarget && !isDeleting) {\n                onCancel?.();\n            }\n        },\n        role: \"presentation\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            role: \"dialog\",\n            \"aria-modal\": \"true\",\n            \"aria-labelledby\": \"delete-section-title\",\n            \"aria-describedby\": \"delete-section-description\",\n            className: \"w-full max-w-md rounded-2xl border border-slate-200 bg-white shadow-2xl overflow-hidden\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-5 pt-5 pb-4 border-b border-slate-100\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-start gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-10 h-10 rounded-xl bg-red-100 text-red-600 flex items-center justify-center shrink-0\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertTriangle_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__.AlertTriangle, {\n                                    className: \"w-5 h-5\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                    lineNumber: 63,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                lineNumber: 62,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                        id: \"delete-section-title\",\n                                        className: \"text-base font-semibold text-slate-900\",\n                                        children: \"Borrar seccion\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 66,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        id: \"delete-section-description\",\n                                        className: \"mt-1 text-sm text-slate-600\",\n                                        children: [\n                                            \"Vas a borrar la seccion \",\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-medium text-slate-800\",\n                                                children: [\n                                                    '\"',\n                                                    safeSectionName,\n                                                    '\"'\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                                lineNumber: 70,\n                                                columnNumber: 41\n                                            }, this),\n                                            \".\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 69,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                lineNumber: 65,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                        lineNumber: 61,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                    lineNumber: 60,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-5 py-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"rounded-xl border border-amber-200 bg-amber-50 px-3 py-3 text-sm text-amber-900\",\n                            children: [\n                                \"Se van a borrar \",\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"font-semibold\",\n                                    children: elementosTexto\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                    lineNumber: 78,\n                                    columnNumber: 29\n                                }, this),\n                                \" que pertenecen a esta seccion.\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 77,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"mt-3 text-sm text-slate-600\",\n                            children: \"Esta accion no se puede deshacer.\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 80,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                    lineNumber: 76,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-5 pb-5 flex items-center justify-end gap-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: onCancel,\n                            disabled: isDeleting,\n                            className: \"px-4 py-2 rounded-lg border border-slate-300 text-slate-700 text-sm font-medium hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                            children: \"Cancelar\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 86,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: onConfirm,\n                            disabled: isDeleting,\n                            className: \"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white text-sm font-semibold hover:bg-red-700 transition-colors disabled:opacity-80 disabled:cursor-not-allowed\",\n                            children: isDeleting ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"w-4 h-4 rounded-full border-2 border-white/80 border-t-transparent animate-spin\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 102,\n                                        columnNumber: 17\n                                    }, this),\n                                    \"Borrando...\"\n                                ]\n                            }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertTriangle_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__.Trash2, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 107,\n                                        columnNumber: 17\n                                    }, this),\n                                    \"Eliminar seccion\"\n                                ]\n                            }, void 0, true)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 94,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                    lineNumber: 85,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n            lineNumber: 53,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n        lineNumber: 44,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9zZWN0aW9ucy9Db25maXJtRGVsZXRlU2VjdGlvbk1vZGFsLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJDO0FBQ1U7QUFFdEMsU0FBU0ksMEJBQTBCLEVBQ2hEQyxNQUFNLEVBQ05DLFdBQVcsRUFDWEMsWUFBWSxDQUFDLEVBQ2JDLGFBQWEsS0FBSyxFQUNsQkMsUUFBUSxFQUNSQyxTQUFTLEVBQ1Y7SUFDQ1YsZ0RBQVNBOytDQUFDO1lBQ1IsSUFBSSxDQUFDSyxRQUFRLE9BQU9NO1lBRXBCLE1BQU1DLG1CQUFtQkMsU0FBU0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLFFBQVE7WUFDckQsTUFBTUM7aUVBQVksQ0FBQ0M7b0JBQ2pCLElBQUlBLE1BQU1DLEdBQUcsS0FBSyxZQUFZLENBQUNYLFlBQVk7d0JBQ3pDQztvQkFDRjtnQkFDRjs7WUFFQUksU0FBU08sZ0JBQWdCLENBQUMsV0FBV0g7WUFDckNKLFNBQVNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLEdBQUc7WUFFL0I7dURBQU87b0JBQ0xILFNBQVNRLG1CQUFtQixDQUFDLFdBQVdKO29CQUN4Q0osU0FBU0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLFFBQVEsR0FBR0o7Z0JBQ2pDOztRQUNGOzhDQUFHO1FBQUNQO1FBQVFHO1FBQVlDO0tBQVM7SUFFakMsTUFBTWEsa0JBQWtCckIsOENBQU9BOzhEQUFDO1lBQzlCLE1BQU1zQixhQUFhQyxPQUFPbEIsZUFBZSxJQUFJbUIsSUFBSTtZQUNqRCxPQUFPRixjQUFjO1FBQ3ZCOzZEQUFHO1FBQUNqQjtLQUFZO0lBRWhCLE1BQU1vQixpQkFBaUJ6Qiw4Q0FBT0E7NkRBQUM7WUFDN0IsTUFBTTBCLFFBQVFDLE9BQU9DLFFBQVEsQ0FBQ3RCLGFBQWF1QixLQUFLQyxHQUFHLENBQUMsR0FBR3hCLGFBQWE7WUFDcEUsT0FBT29CLFVBQVUsSUFBSSxlQUFlLEdBQUdBLE1BQU0sVUFBVSxDQUFDO1FBQzFEOzREQUFHO1FBQUNwQjtLQUFVO0lBRWQsSUFBSSxDQUFDRixRQUFRLE9BQU87SUFFcEIscUJBQ0UsOERBQUMyQjtRQUNDQyxXQUFVO1FBQ1ZDLGFBQWEsQ0FBQ2hCO1lBQ1osSUFBSUEsTUFBTWlCLE1BQU0sS0FBS2pCLE1BQU1rQixhQUFhLElBQUksQ0FBQzVCLFlBQVk7Z0JBQ3ZEQztZQUNGO1FBQ0Y7UUFDQTRCLE1BQUs7a0JBRUwsNEVBQUNMO1lBQ0NLLE1BQUs7WUFDTEMsY0FBVztZQUNYQyxtQkFBZ0I7WUFDaEJDLG9CQUFpQjtZQUNqQlAsV0FBVTs7OEJBRVYsOERBQUNEO29CQUFJQyxXQUFVOzhCQUNiLDRFQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNEO2dDQUFJQyxXQUFVOzBDQUNiLDRFQUFDL0IsbUdBQWFBO29DQUFDK0IsV0FBVTs7Ozs7Ozs7Ozs7MENBRTNCLDhEQUFDRDs7a0RBQ0MsOERBQUNTO3dDQUFHQyxJQUFHO3dDQUF1QlQsV0FBVTtrREFBeUM7Ozs7OztrREFHakYsOERBQUNVO3dDQUFFRCxJQUFHO3dDQUE2QlQsV0FBVTs7NENBQThCOzBEQUNqRCw4REFBQ1c7Z0RBQUtYLFdBQVU7O29EQUE2QjtvREFBRVg7b0RBQWdCOzs7Ozs7OzRDQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBTXZHLDhEQUFDVTtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzRCQUFJQyxXQUFVOztnQ0FBa0Y7OENBQy9FLDhEQUFDVztvQ0FBS1gsV0FBVTs4Q0FBaUJQOzs7Ozs7Z0NBQXNCOzs7Ozs7O3NDQUV6RSw4REFBQ2lCOzRCQUFFVixXQUFVO3NDQUE4Qjs7Ozs7Ozs7Ozs7OzhCQUs3Qyw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDWTs0QkFDQ0MsTUFBSzs0QkFDTEMsU0FBU3RDOzRCQUNUdUMsVUFBVXhDOzRCQUNWeUIsV0FBVTtzQ0FDWDs7Ozs7O3NDQUdELDhEQUFDWTs0QkFDQ0MsTUFBSzs0QkFDTEMsU0FBU3JDOzRCQUNUc0MsVUFBVXhDOzRCQUNWeUIsV0FBVTtzQ0FFVHpCLDJCQUNDOztrREFDRSw4REFBQ29DO3dDQUFLWCxXQUFVOzs7Ozs7b0NBQW9GOzs2REFJdEc7O2tEQUNFLDhEQUFDOUIsNEZBQU1BO3dDQUFDOEIsV0FBVTs7Ozs7O29DQUFZOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUzlDIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcc2VjdGlvbnNcXENvbmZpcm1EZWxldGVTZWN0aW9uTW9kYWwuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQWxlcnRUcmlhbmdsZSwgVHJhc2gyIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb25maXJtRGVsZXRlU2VjdGlvbk1vZGFsKHtcbiAgaXNPcGVuLFxuICBzZWN0aW9uTmFtZSxcbiAgaXRlbUNvdW50ID0gMCxcbiAgaXNEZWxldGluZyA9IGZhbHNlLFxuICBvbkNhbmNlbCxcbiAgb25Db25maXJtLFxufSkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNPcGVuKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgcHJldmlvdXNPdmVyZmxvdyA9IGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c7XG4gICAgY29uc3Qgb25LZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiICYmICFpc0RlbGV0aW5nKSB7XG4gICAgICAgIG9uQ2FuY2VsPy4oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IHByZXZpb3VzT3ZlcmZsb3c7XG4gICAgfTtcbiAgfSwgW2lzT3BlbiwgaXNEZWxldGluZywgb25DYW5jZWxdKTtcblxuICBjb25zdCBzYWZlU2VjdGlvbk5hbWUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHNlY3Rpb25OYW1lIHx8IFwiXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gbm9ybWFsaXplZCB8fCBcInNpbiBub21icmVcIjtcbiAgfSwgW3NlY3Rpb25OYW1lXSk7XG5cbiAgY29uc3QgZWxlbWVudG9zVGV4dG8gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBjb3VudCA9IE51bWJlci5pc0Zpbml0ZShpdGVtQ291bnQpID8gTWF0aC5tYXgoMCwgaXRlbUNvdW50KSA6IDA7XG4gICAgcmV0dXJuIGNvdW50ID09PSAxID8gXCIxIGVsZW1lbnRvXCIgOiBgJHtjb3VudH0gZWxlbWVudG9zYDtcbiAgfSwgW2l0ZW1Db3VudF0pO1xuXG4gIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei1bOTk5OV0gYmctc2xhdGUtOTAwLzYwIGJhY2tkcm9wLWJsdXItWzJweF0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCJcbiAgICAgIG9uTW91c2VEb3duPXsoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCAmJiAhaXNEZWxldGluZykge1xuICAgICAgICAgIG9uQ2FuY2VsPy4oKTtcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIHJvbGU9XCJwcmVzZW50YXRpb25cIlxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgcm9sZT1cImRpYWxvZ1wiXG4gICAgICAgIGFyaWEtbW9kYWw9XCJ0cnVlXCJcbiAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PVwiZGVsZXRlLXNlY3Rpb24tdGl0bGVcIlxuICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiZGVsZXRlLXNlY3Rpb24tZGVzY3JpcHRpb25cIlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctbWQgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgYmctd2hpdGUgc2hhZG93LTJ4bCBvdmVyZmxvdy1oaWRkZW5cIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTUgcHQtNSBwYi00IGJvcmRlci1iIGJvcmRlci1zbGF0ZS0xMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHJvdW5kZWQteGwgYmctcmVkLTEwMCB0ZXh0LXJlZC02MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxoMiBpZD1cImRlbGV0ZS1zZWN0aW9uLXRpdGxlXCIgY2xhc3NOYW1lPVwidGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5cbiAgICAgICAgICAgICAgICBCb3JyYXIgc2VjY2lvblxuICAgICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgICA8cCBpZD1cImRlbGV0ZS1zZWN0aW9uLWRlc2NyaXB0aW9uXCIgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtc2xhdGUtNjAwXCI+XG4gICAgICAgICAgICAgICAgVmFzIGEgYm9ycmFyIGxhIHNlY2Npb24gPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS04MDBcIj5cIntzYWZlU2VjdGlvbk5hbWV9XCI8L3NwYW4+LlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC01IHB5LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1hbWJlci0yMDAgYmctYW1iZXItNTAgcHgtMyBweS0zIHRleHQtc20gdGV4dC1hbWJlci05MDBcIj5cbiAgICAgICAgICAgIFNlIHZhbiBhIGJvcnJhciA8c3BhbiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+e2VsZW1lbnRvc1RleHRvfTwvc3Bhbj4gcXVlIHBlcnRlbmVjZW4gYSBlc3RhIHNlY2Npb24uXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMyB0ZXh0LXNtIHRleHQtc2xhdGUtNjAwXCI+XG4gICAgICAgICAgICBFc3RhIGFjY2lvbiBubyBzZSBwdWVkZSBkZXNoYWNlci5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNSBwYi01IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0yXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNhbmNlbH1cbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0RlbGV0aW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgdGV4dC1zbGF0ZS03MDAgdGV4dC1zbSBmb250LW1lZGl1bSBob3ZlcjpiZy1zbGF0ZS01MCB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgQ2FuY2VsYXJcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ29uZmlybX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0RlbGV0aW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTQgcHktMiByb3VuZGVkLWxnIGJnLXJlZC02MDAgdGV4dC13aGl0ZSB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgaG92ZXI6YmctcmVkLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTgwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge2lzRGVsZXRpbmcgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy00IGgtNCByb3VuZGVkLWZ1bGwgYm9yZGVyLTIgYm9yZGVyLXdoaXRlLzgwIGJvcmRlci10LXRyYW5zcGFyZW50IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICAgICAgQm9ycmFuZG8uLi5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxUcmFzaDIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgRWxpbWluYXIgc2VjY2lvblxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsIkFsZXJ0VHJpYW5nbGUiLCJUcmFzaDIiLCJDb25maXJtRGVsZXRlU2VjdGlvbk1vZGFsIiwiaXNPcGVuIiwic2VjdGlvbk5hbWUiLCJpdGVtQ291bnQiLCJpc0RlbGV0aW5nIiwib25DYW5jZWwiLCJvbkNvbmZpcm0iLCJ1bmRlZmluZWQiLCJwcmV2aW91c092ZXJmbG93IiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsIm9uS2V5RG93biIsImV2ZW50Iiwia2V5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzYWZlU2VjdGlvbk5hbWUiLCJub3JtYWxpemVkIiwiU3RyaW5nIiwidHJpbSIsImVsZW1lbnRvc1RleHRvIiwiY291bnQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIk1hdGgiLCJtYXgiLCJkaXYiLCJjbGFzc05hbWUiLCJvbk1vdXNlRG93biIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJyb2xlIiwiYXJpYS1tb2RhbCIsImFyaWEtbGFiZWxsZWRieSIsImFyaWEtZGVzY3JpYmVkYnkiLCJoMiIsImlkIiwicCIsInNwYW4iLCJidXR0b24iLCJ0eXBlIiwib25DbGljayIsImRpc2FibGVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/sections/ConfirmDeleteSectionModal.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/sections/useSectionsManager.js":
/*!**************************************************************!*\
  !*** ./src/components/editor/sections/useSectionsManager.js ***!
  \**************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useSectionsManager)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../firebase */ \"(pages-dir-node)/./src/firebase.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, _firebase__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, _firebase__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/components/editor/sections/useSectionsManager.js\n\n\n // ✅ ajustado a tu estructura real\n/**\n * Maneja todo lo relacionado a secciones:\n * - resize de altura (drag)\n * - toggle Pantalla ON/OFF\n * - crear sección (y persistir)\n */ function useSectionsManager({ slug, secciones, setSecciones, objetos, setObjetos, seccionActivaId, setSeccionActivaId, stageRef, setGlobalCursor, clearGlobalCursor, crearSeccion, normalizarAltoModo, limpiarObjetoUndefined, ALTURA_REFERENCIA_PANTALLA }) {\n    const getClientYFromEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[getClientYFromEvent]\": (event)=>{\n            if (!event) return null;\n            if (Number.isFinite(event.clientY)) return event.clientY;\n            if (event.touches?.[0] && Number.isFinite(event.touches[0].clientY)) {\n                return event.touches[0].clientY;\n            }\n            if (event.changedTouches?.[0] && Number.isFinite(event.changedTouches[0].clientY)) {\n                return event.changedTouches[0].clientY;\n            }\n            return null;\n        }\n    }[\"useSectionsManager.useCallback[getClientYFromEvent]\"], []);\n    // ------------------------------------------\n    // A) Resize altura de sección\n    // ------------------------------------------\n    const [controlandoAltura, setControlandoAltura] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [alturaInicial, setAlturaInicial] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [posicionInicialMouse, setPosicionInicialMouse] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const iniciarControlAltura = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[iniciarControlAltura]\": (e, seccionId)=>{\n            setGlobalCursor?.(\"ns-resize\", stageRef);\n            e.evt.stopPropagation();\n            if (e?.evt?.cancelable) e.evt.preventDefault();\n            const seccion = secciones.find({\n                \"useSectionsManager.useCallback[iniciarControlAltura].seccion\": (s)=>s.id === seccionId\n            }[\"useSectionsManager.useCallback[iniciarControlAltura].seccion\"]);\n            if (!seccion) return;\n            const pointerY = getClientYFromEvent(e?.evt);\n            if (!Number.isFinite(pointerY)) return;\n            setControlandoAltura(seccionId);\n            setAlturaInicial(seccion.altura);\n            setPosicionInicialMouse(pointerY);\n            try {\n                document.body.style.userSelect = \"none\";\n            } catch  {}\n            try {\n                document.body.style.touchAction = \"none\";\n            } catch  {}\n            const target = e.target?.getStage?.()?.content || e.target?.getStage?.()?.container?.();\n            if (target && target.setPointerCapture && e.evt.pointerId != null) {\n                try {\n                    target.setPointerCapture(e.evt.pointerId);\n                } catch  {}\n            }\n        }\n    }[\"useSectionsManager.useCallback[iniciarControlAltura]\"], [\n        secciones,\n        setGlobalCursor,\n        stageRef,\n        getClientYFromEvent\n    ]);\n    const manejarControlAltura = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[manejarControlAltura]\": (e)=>{\n            if (!controlandoAltura) return;\n            if (e?.cancelable) e.preventDefault();\n            const posicionActualMouse = getClientYFromEvent(e);\n            if (!Number.isFinite(posicionActualMouse)) return;\n            if (window._alturaResizeThrottle) return;\n            window._alturaResizeThrottle = true;\n            requestAnimationFrame({\n                \"useSectionsManager.useCallback[manejarControlAltura]\": ()=>{\n                    const deltaY = posicionActualMouse - posicionInicialMouse;\n                    const nuevaAltura = Math.max(50, Math.round(alturaInicial + deltaY));\n                    setSecciones({\n                        \"useSectionsManager.useCallback[manejarControlAltura]\": (prev)=>prev.map({\n                                \"useSectionsManager.useCallback[manejarControlAltura]\": (s)=>s.id === controlandoAltura ? {\n                                        ...s,\n                                        altura: nuevaAltura\n                                    } : s\n                            }[\"useSectionsManager.useCallback[manejarControlAltura]\"])\n                    }[\"useSectionsManager.useCallback[manejarControlAltura]\"]);\n                    setTimeout({\n                        \"useSectionsManager.useCallback[manejarControlAltura]\": ()=>{\n                            window._alturaResizeThrottle = false;\n                        }\n                    }[\"useSectionsManager.useCallback[manejarControlAltura]\"], 8);\n                }\n            }[\"useSectionsManager.useCallback[manejarControlAltura]\"]);\n        }\n    }[\"useSectionsManager.useCallback[manejarControlAltura]\"], [\n        controlandoAltura,\n        posicionInicialMouse,\n        alturaInicial,\n        setSecciones,\n        getClientYFromEvent\n    ]);\n    const finalizarControlAltura = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[finalizarControlAltura]\": async ()=>{\n            if (!controlandoAltura) return;\n            clearGlobalCursor?.(stageRef);\n            try {\n                document.body.style.userSelect = \"\";\n            } catch  {}\n            try {\n                document.body.style.touchAction = \"\";\n            } catch  {}\n            if (window._alturaResizeThrottle) window._alturaResizeThrottle = false;\n            const seccionId = controlandoAltura;\n            setControlandoAltura(false);\n            setAlturaInicial(0);\n            setPosicionInicialMouse(0);\n            if (window._saveAlturaTimeout) clearTimeout(window._saveAlturaTimeout);\n            window._saveAlturaTimeout = setTimeout({\n                \"useSectionsManager.useCallback[finalizarControlAltura]\": async ()=>{\n                    try {\n                        if (!slug) return;\n                        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"borradores\", slug);\n                        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                            secciones,\n                            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n                        });\n                        clearGlobalCursor?.(stageRef);\n                        console.log(\"✅ Altura guardada:\", seccionId);\n                    } catch (error) {\n                        console.error(\"❌ Error guardando altura:\", error);\n                    }\n                }\n            }[\"useSectionsManager.useCallback[finalizarControlAltura]\"], 300);\n        }\n    }[\"useSectionsManager.useCallback[finalizarControlAltura]\"], [\n        controlandoAltura,\n        secciones,\n        slug,\n        clearGlobalCursor,\n        stageRef\n    ]);\n    // listeners globales (mouse/touch/pointer)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSectionsManager.useEffect\": ()=>{\n            if (!controlandoAltura) return;\n            document.addEventListener(\"mousemove\", manejarControlAltura, {\n                passive: true\n            });\n            document.addEventListener(\"touchmove\", manejarControlAltura, {\n                passive: false\n            });\n            window.addEventListener(\"pointermove\", manejarControlAltura, {\n                passive: false\n            });\n            document.addEventListener(\"mouseup\", finalizarControlAltura);\n            document.addEventListener(\"touchend\", finalizarControlAltura, {\n                passive: true\n            });\n            document.addEventListener(\"touchcancel\", finalizarControlAltura, {\n                passive: true\n            });\n            window.addEventListener(\"pointerup\", finalizarControlAltura, {\n                passive: true\n            });\n            window.addEventListener(\"pointercancel\", finalizarControlAltura, {\n                passive: true\n            });\n            return ({\n                \"useSectionsManager.useEffect\": ()=>{\n                    document.removeEventListener(\"mousemove\", manejarControlAltura);\n                    document.removeEventListener(\"touchmove\", manejarControlAltura);\n                    window.removeEventListener(\"pointermove\", manejarControlAltura);\n                    document.removeEventListener(\"mouseup\", finalizarControlAltura);\n                    document.removeEventListener(\"touchend\", finalizarControlAltura);\n                    document.removeEventListener(\"touchcancel\", finalizarControlAltura);\n                    window.removeEventListener(\"pointerup\", finalizarControlAltura);\n                    window.removeEventListener(\"pointercancel\", finalizarControlAltura);\n                    if (window._alturaResizeThrottle) window._alturaResizeThrottle = false;\n                }\n            })[\"useSectionsManager.useEffect\"];\n        }\n    }[\"useSectionsManager.useEffect\"], [\n        controlandoAltura,\n        manejarControlAltura,\n        finalizarControlAltura\n    ]);\n    // failsafes (pointerup, blur, visibility, esc...)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSectionsManager.useEffect\": ()=>{\n            if (!controlandoAltura) return;\n            const end = {\n                \"useSectionsManager.useEffect.end\": ()=>finalizarControlAltura()\n            }[\"useSectionsManager.useEffect.end\"];\n            const handlePointerUp = end;\n            const handlePointerCancel = end;\n            const handleMouseLeave = {\n                \"useSectionsManager.useEffect.handleMouseLeave\": (ev)=>{\n                    if (ev.relatedTarget === null) end();\n                }\n            }[\"useSectionsManager.useEffect.handleMouseLeave\"];\n            const handleBlur = end;\n            const handleVisibility = {\n                \"useSectionsManager.useEffect.handleVisibility\": ()=>{\n                    if (document.visibilityState !== \"visible\") end();\n                }\n            }[\"useSectionsManager.useEffect.handleVisibility\"];\n            const handleKeyDown = {\n                \"useSectionsManager.useEffect.handleKeyDown\": (e)=>{\n                    if (e.key === \"Escape\") end();\n                }\n            }[\"useSectionsManager.useEffect.handleKeyDown\"];\n            window.addEventListener(\"pointerup\", handlePointerUp, {\n                capture: true\n            });\n            window.addEventListener(\"pointercancel\", handlePointerCancel, {\n                capture: true\n            });\n            window.addEventListener(\"mouseleave\", handleMouseLeave, {\n                capture: true\n            });\n            window.addEventListener(\"blur\", handleBlur, {\n                capture: true\n            });\n            document.addEventListener(\"visibilitychange\", handleVisibility, {\n                capture: true\n            });\n            document.addEventListener(\"keydown\", handleKeyDown, {\n                capture: true\n            });\n            return ({\n                \"useSectionsManager.useEffect\": ()=>{\n                    window.removeEventListener(\"pointerup\", handlePointerUp, {\n                        capture: true\n                    });\n                    window.removeEventListener(\"pointercancel\", handlePointerCancel, {\n                        capture: true\n                    });\n                    window.removeEventListener(\"mouseleave\", handleMouseLeave, {\n                        capture: true\n                    });\n                    window.removeEventListener(\"blur\", handleBlur, {\n                        capture: true\n                    });\n                    document.removeEventListener(\"visibilitychange\", handleVisibility, {\n                        capture: true\n                    });\n                    document.removeEventListener(\"keydown\", handleKeyDown, {\n                        capture: true\n                    });\n                }\n            })[\"useSectionsManager.useEffect\"];\n        }\n    }[\"useSectionsManager.useEffect\"], [\n        controlandoAltura,\n        finalizarControlAltura\n    ]);\n    // ------------------------------------------\n    // B) Toggle Pantalla ON/OFF\n    // ------------------------------------------\n    const togglePantallaCompletaSeccion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\": async (seccionId)=>{\n            if (!seccionId) return;\n            // 1) Actualizar estado local\n            setSecciones({\n                \"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\": (prev)=>{\n                    const next = prev.map({\n                        \"useSectionsManager.useCallback[togglePantallaCompletaSeccion].next\": (s)=>{\n                            if (s.id !== seccionId) return s;\n                            const modoActual = normalizarAltoModo(s.altoModo);\n                            const modoNuevo = modoActual === \"pantalla\" ? \"fijo\" : \"pantalla\";\n                            if (modoNuevo === \"pantalla\") {\n                                return {\n                                    ...s,\n                                    altoModo: \"pantalla\",\n                                    alturaFijoBackup: Number.isFinite(s.altura) ? s.altura : 600,\n                                    altura: ALTURA_REFERENCIA_PANTALLA\n                                };\n                            }\n                            const backup = Number.isFinite(s.alturaFijoBackup) ? s.alturaFijoBackup : s.altura;\n                            const { alturaFijoBackup, ...rest } = s;\n                            return {\n                                ...rest,\n                                altoModo: \"fijo\",\n                                altura: Number.isFinite(backup) ? backup : 600\n                            };\n                        }\n                    }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion].next\"]);\n                    return next;\n                }\n            }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\"]);\n            // 2) Persistir en Firestore usando el snapshot actual\n            try {\n                if (!slug) return;\n                const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"borradores\", slug);\n                const seccionesNext = secciones.map({\n                    \"useSectionsManager.useCallback[togglePantallaCompletaSeccion].seccionesNext\": (s)=>{\n                        if (s.id !== seccionId) return s;\n                        const modoActual = normalizarAltoModo(s.altoModo);\n                        const modoNuevo = modoActual === \"pantalla\" ? \"fijo\" : \"pantalla\";\n                        if (modoNuevo === \"pantalla\") {\n                            return {\n                                ...s,\n                                altoModo: \"pantalla\",\n                                alturaFijoBackup: Number.isFinite(s.altura) ? s.altura : 600,\n                                altura: ALTURA_REFERENCIA_PANTALLA\n                            };\n                        }\n                        const backup = Number.isFinite(s.alturaFijoBackup) ? s.alturaFijoBackup : s.altura;\n                        const { alturaFijoBackup, ...rest } = s;\n                        return {\n                            ...rest,\n                            altoModo: \"fijo\",\n                            altura: Number.isFinite(backup) ? backup : 600\n                        };\n                    }\n                }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion].seccionesNext\"]);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                    secciones: seccionesNext,\n                    ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n                });\n                console.log(\"✅ altoModo actualizado:\", seccionId);\n            } catch (e) {\n                console.error(\"❌ Error guardando altoModo:\", e);\n            }\n        }\n    }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\"], [\n        slug,\n        secciones,\n        setSecciones,\n        normalizarAltoModo,\n        ALTURA_REFERENCIA_PANTALLA\n    ]);\n    // ------------------------------------------\n    // C) Crear sección (y persistir)\n    // ------------------------------------------\n    const handleCrearSeccion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[handleCrearSeccion]\": async (datos)=>{\n            if (!slug) return;\n            const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"borradores\", slug);\n            setSecciones({\n                \"useSectionsManager.useCallback[handleCrearSeccion]\": (prevSecciones)=>{\n                    const nueva = crearSeccion(datos, prevSecciones);\n                    let objetosDesdePlantilla = [];\n                    if (datos?.desdePlantilla && Array.isArray(datos.objetos)) {\n                        objetosDesdePlantilla = datos.objetos.map({\n                            \"useSectionsManager.useCallback[handleCrearSeccion]\": (obj)=>({\n                                    ...obj,\n                                    id: \"obj-\" + Date.now() + Math.random().toString(36).substring(2, 6),\n                                    seccionId: nueva.id\n                                })\n                        }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n                    }\n                    const nuevasSecciones = [\n                        ...prevSecciones,\n                        nueva\n                    ];\n                    setObjetos({\n                        \"useSectionsManager.useCallback[handleCrearSeccion]\": (prevObjetos)=>{\n                            const nuevosObjetos = [\n                                ...prevObjetos,\n                                ...objetosDesdePlantilla\n                            ];\n                            // limpiar antes de guardar (tu helper existente)\n                            const seccionesLimpias = limpiarObjetoUndefined(nuevasSecciones);\n                            const objetosLimpios = limpiarObjetoUndefined(nuevosObjetos);\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                                secciones: seccionesLimpias,\n                                objetos: objetosLimpios\n                            }).then({\n                                \"useSectionsManager.useCallback[handleCrearSeccion]\": ()=>console.log(\"✅ Sección agregada:\", nueva)\n                            }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]).catch({\n                                \"useSectionsManager.useCallback[handleCrearSeccion]\": (error)=>console.error(\"❌ Error al guardar sección\", error)\n                            }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n                            return nuevosObjetos;\n                        }\n                    }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n                    return nuevasSecciones;\n                }\n            }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n        }\n    }[\"useSectionsManager.useCallback[handleCrearSeccion]\"], [\n        slug,\n        setSecciones,\n        setObjetos,\n        crearSeccion,\n        limpiarObjetoUndefined\n    ]);\n    // Listener global: \"crear-seccion\"\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSectionsManager.useEffect\": ()=>{\n            const handler = {\n                \"useSectionsManager.useEffect.handler\": (e)=>{\n                    handleCrearSeccion(e.detail);\n                }\n            }[\"useSectionsManager.useEffect.handler\"];\n            window.addEventListener(\"crear-seccion\", handler);\n            return ({\n                \"useSectionsManager.useEffect\": ()=>window.removeEventListener(\"crear-seccion\", handler)\n            })[\"useSectionsManager.useEffect\"];\n        }\n    }[\"useSectionsManager.useEffect\"], [\n        handleCrearSeccion\n    ]);\n    return {\n        // resize altura\n        controlandoAltura,\n        iniciarControlAltura,\n        finalizarControlAltura,\n        // toggle pantalla\n        togglePantallaCompletaSeccion,\n        // crear sección\n        handleCrearSeccion\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9zZWN0aW9ucy91c2VTZWN0aW9uc01hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHVEQUF1RDtBQUNFO0FBQ1k7QUFDOUIsQ0FBQyxrQ0FBa0M7QUFFMUU7Ozs7O0NBS0MsR0FDYyxTQUFTTyxtQkFBbUIsRUFDdkNDLElBQUksRUFDSkMsU0FBUyxFQUNUQyxZQUFZLEVBQ1pDLE9BQU8sRUFDUEMsVUFBVSxFQUNWQyxlQUFlLEVBQ2ZDLGtCQUFrQixFQUVsQkMsUUFBUSxFQUNSQyxlQUFlLEVBQ2ZDLGlCQUFpQixFQUVqQkMsWUFBWSxFQUNaQyxrQkFBa0IsRUFDbEJDLHNCQUFzQixFQUV0QkMsMEJBQTBCLEVBQzdCO0lBQ0csTUFBTUMsc0JBQXNCdEIsa0RBQVdBOytEQUFDLENBQUN1QjtZQUNyQyxJQUFJLENBQUNBLE9BQU8sT0FBTztZQUNuQixJQUFJQyxPQUFPQyxRQUFRLENBQUNGLE1BQU1HLE9BQU8sR0FBRyxPQUFPSCxNQUFNRyxPQUFPO1lBQ3hELElBQUlILE1BQU1JLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSUgsT0FBT0MsUUFBUSxDQUFDRixNQUFNSSxPQUFPLENBQUMsRUFBRSxDQUFDRCxPQUFPLEdBQUc7Z0JBQ2pFLE9BQU9ILE1BQU1JLE9BQU8sQ0FBQyxFQUFFLENBQUNELE9BQU87WUFDbkM7WUFDQSxJQUFJSCxNQUFNSyxjQUFjLEVBQUUsQ0FBQyxFQUFFLElBQUlKLE9BQU9DLFFBQVEsQ0FBQ0YsTUFBTUssY0FBYyxDQUFDLEVBQUUsQ0FBQ0YsT0FBTyxHQUFHO2dCQUMvRSxPQUFPSCxNQUFNSyxjQUFjLENBQUMsRUFBRSxDQUFDRixPQUFPO1lBQzFDO1lBQ0EsT0FBTztRQUNYOzhEQUFHLEVBQUU7SUFFTCw2Q0FBNkM7SUFDN0MsOEJBQThCO0lBQzlCLDZDQUE2QztJQUM3QyxNQUFNLENBQUNHLG1CQUFtQkMscUJBQXFCLEdBQUc1QiwrQ0FBUUEs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QUVBLE1BQU15RSxrQkFBa0I7MkJBQUlaO3dCQUFlQztxQkFBTTtvQkFFakQvRjs4RUFBVyxDQUFDMkc7NEJBQ1IsTUFBTUMsZ0JBQWdCO21DQUFJRDttQ0FBZ0JYOzZCQUFzQjs0QkFFaEUsaURBQWlEOzRCQUNqRCxNQUFNYSxtQkFBbUJyRyx1QkFBdUJrRzs0QkFDaEQsTUFBTUksaUJBQWlCdEcsdUJBQXVCb0c7NEJBRTlDcEgsNkRBQVNBLENBQUN1RSxLQUFLO2dDQUNYbEUsV0FBV2dIO2dDQUNYOUcsU0FBUytHOzRCQUNiLEdBQ0tDLElBQUk7c0ZBQUMsSUFBTTlDLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUI2QjtxRkFDOUNpQixLQUFLO3NGQUFDLENBQUM3QyxRQUFVRixRQUFRRSxLQUFLLENBQUMsOEJBQThCQTs7NEJBRWxFLE9BQU95Qzt3QkFDWDs7b0JBRUEsT0FBT0Y7Z0JBQ1g7O1FBQ0o7NkRBQ0E7UUFBQzlHO1FBQU1FO1FBQWNFO1FBQVlNO1FBQWNFO0tBQXVCO0lBRzFFLG1DQUFtQztJQUNuQ25CLGdEQUFTQTt3Q0FBQztZQUNOLE1BQU00SDt3REFBVSxDQUFDekY7b0JBQ2JvRSxtQkFBbUJwRSxFQUFFMEYsTUFBTTtnQkFDL0I7O1lBQ0FqRSxPQUFPbUIsZ0JBQWdCLENBQUMsaUJBQWlCNkM7WUFDekM7Z0RBQU8sSUFBTWhFLE9BQU9xQixtQkFBbUIsQ0FBQyxpQkFBaUIyQzs7UUFDN0Q7dUNBQUc7UUFBQ3JCO0tBQW1CO0lBRXZCLE9BQU87UUFDSCxnQkFBZ0I7UUFDaEIzRTtRQUNBTTtRQUNBcUM7UUFFQSxrQkFBa0I7UUFDbEJ1QjtRQUVBLGdCQUFnQjtRQUNoQlM7SUFDSjtBQUNKIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcc2VjdGlvbnNcXHVzZVNlY3Rpb25zTWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3Ivc2VjdGlvbnMvdXNlU2VjdGlvbnNNYW5hZ2VyLmpzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZG9jLCB1cGRhdGVEb2MsIHNlcnZlclRpbWVzdGFtcCB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIi4uLy4uLy4uL2ZpcmViYXNlXCI7IC8vIOKchSBhanVzdGFkbyBhIHR1IGVzdHJ1Y3R1cmEgcmVhbFxuXG4vKipcbiAqIE1hbmVqYSB0b2RvIGxvIHJlbGFjaW9uYWRvIGEgc2VjY2lvbmVzOlxuICogLSByZXNpemUgZGUgYWx0dXJhIChkcmFnKVxuICogLSB0b2dnbGUgUGFudGFsbGEgT04vT0ZGXG4gKiAtIGNyZWFyIHNlY2Npw7NuICh5IHBlcnNpc3RpcilcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU2VjdGlvbnNNYW5hZ2VyKHtcbiAgICBzbHVnLFxuICAgIHNlY2Npb25lcyxcbiAgICBzZXRTZWNjaW9uZXMsXG4gICAgb2JqZXRvcyxcbiAgICBzZXRPYmpldG9zLFxuICAgIHNlY2Npb25BY3RpdmFJZCxcbiAgICBzZXRTZWNjaW9uQWN0aXZhSWQsXG5cbiAgICBzdGFnZVJlZixcbiAgICBzZXRHbG9iYWxDdXJzb3IsXG4gICAgY2xlYXJHbG9iYWxDdXJzb3IsXG5cbiAgICBjcmVhclNlY2Npb24sXG4gICAgbm9ybWFsaXphckFsdG9Nb2RvLFxuICAgIGxpbXBpYXJPYmpldG9VbmRlZmluZWQsXG5cbiAgICBBTFRVUkFfUkVGRVJFTkNJQV9QQU5UQUxMQSxcbn0pIHtcbiAgICBjb25zdCBnZXRDbGllbnRZRnJvbUV2ZW50ID0gdXNlQ2FsbGJhY2soKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghZXZlbnQpIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGV2ZW50LmNsaWVudFkpKSByZXR1cm4gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXM/LlswXSAmJiBOdW1iZXIuaXNGaW5pdGUoZXZlbnQudG91Y2hlc1swXS5jbGllbnRZKSkge1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuY2hhbmdlZFRvdWNoZXM/LlswXSAmJiBOdW1iZXIuaXNGaW5pdGUoZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSkpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0sIFtdKTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIEEpIFJlc2l6ZSBhbHR1cmEgZGUgc2VjY2nDs25cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb25zdCBbY29udHJvbGFuZG9BbHR1cmEsIHNldENvbnRyb2xhbmRvQWx0dXJhXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbYWx0dXJhSW5pY2lhbCwgc2V0QWx0dXJhSW5pY2lhbF0gPSB1c2VTdGF0ZSgwKTtcbiAgICBjb25zdCBbcG9zaWNpb25JbmljaWFsTW91c2UsIHNldFBvc2ljaW9uSW5pY2lhbE1vdXNlXSA9IHVzZVN0YXRlKDApO1xuXG4gICAgY29uc3QgaW5pY2lhckNvbnRyb2xBbHR1cmEgPSB1c2VDYWxsYmFjayhcbiAgICAgICAgKGUsIHNlY2Npb25JZCkgPT4ge1xuICAgICAgICAgICAgc2V0R2xvYmFsQ3Vyc29yPy4oXCJucy1yZXNpemVcIiwgc3RhZ2VSZWYpO1xuICAgICAgICAgICAgZS5ldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAoZT8uZXZ0Py5jYW5jZWxhYmxlKSBlLmV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBzZWNjaW9uID0gc2VjY2lvbmVzLmZpbmQoKHMpID0+IHMuaWQgPT09IHNlY2Npb25JZCk7XG4gICAgICAgICAgICBpZiAoIXNlY2Npb24pIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgcG9pbnRlclkgPSBnZXRDbGllbnRZRnJvbUV2ZW50KGU/LmV2dCk7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShwb2ludGVyWSkpIHJldHVybjtcblxuICAgICAgICAgICAgc2V0Q29udHJvbGFuZG9BbHR1cmEoc2VjY2lvbklkKTtcbiAgICAgICAgICAgIHNldEFsdHVyYUluaWNpYWwoc2VjY2lvbi5hbHR1cmEpO1xuICAgICAgICAgICAgc2V0UG9zaWNpb25JbmljaWFsTW91c2UocG9pbnRlclkpO1xuXG4gICAgICAgICAgICB0cnkgeyBkb2N1bWVudC5ib2R5LnN0eWxlLnVzZXJTZWxlY3QgPSBcIm5vbmVcIjsgfSBjYXRjaCB7IH1cbiAgICAgICAgICAgIHRyeSB7IGRvY3VtZW50LmJvZHkuc3R5bGUudG91Y2hBY3Rpb24gPSBcIm5vbmVcIjsgfSBjYXRjaCB7IH1cblxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID1cbiAgICAgICAgICAgICAgICBlLnRhcmdldD8uZ2V0U3RhZ2U/LigpPy5jb250ZW50IHx8IGUudGFyZ2V0Py5nZXRTdGFnZT8uKCk/LmNvbnRhaW5lcj8uKCk7XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlICYmIGUuZXZ0LnBvaW50ZXJJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHsgdGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlKGUuZXZ0LnBvaW50ZXJJZCk7IH0gY2F0Y2ggeyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFtzZWNjaW9uZXMsIHNldEdsb2JhbEN1cnNvciwgc3RhZ2VSZWYsIGdldENsaWVudFlGcm9tRXZlbnRdXG4gICAgKTtcblxuXG4gICAgY29uc3QgbWFuZWphckNvbnRyb2xBbHR1cmEgPSB1c2VDYWxsYmFjayhcbiAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghY29udHJvbGFuZG9BbHR1cmEpIHJldHVybjtcbiAgICAgICAgICAgIGlmIChlPy5jYW5jZWxhYmxlKSBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBwb3NpY2lvbkFjdHVhbE1vdXNlID0gZ2V0Q2xpZW50WUZyb21FdmVudChlKTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHBvc2ljaW9uQWN0dWFsTW91c2UpKSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmICh3aW5kb3cuX2FsdHVyYVJlc2l6ZVRocm90dGxlKSByZXR1cm47XG4gICAgICAgICAgICB3aW5kb3cuX2FsdHVyYVJlc2l6ZVRocm90dGxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBwb3NpY2lvbkFjdHVhbE1vdXNlIC0gcG9zaWNpb25JbmljaWFsTW91c2U7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVldmFBbHR1cmEgPSBNYXRoLm1heCg1MCwgTWF0aC5yb3VuZChhbHR1cmFJbmljaWFsICsgZGVsdGFZKSk7XG5cbiAgICAgICAgICAgICAgICBzZXRTZWNjaW9uZXMoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgIHByZXYubWFwKChzKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgcy5pZCA9PT0gY29udHJvbGFuZG9BbHR1cmEgPyB7IC4uLnMsIGFsdHVyYTogbnVldmFBbHR1cmEgfSA6IHNcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Ll9hbHR1cmFSZXNpemVUaHJvdHRsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFtjb250cm9sYW5kb0FsdHVyYSwgcG9zaWNpb25JbmljaWFsTW91c2UsIGFsdHVyYUluaWNpYWwsIHNldFNlY2Npb25lcywgZ2V0Q2xpZW50WUZyb21FdmVudF1cbiAgICApO1xuXG4gICAgY29uc3QgZmluYWxpemFyQ29udHJvbEFsdHVyYSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFjb250cm9sYW5kb0FsdHVyYSkgcmV0dXJuO1xuXG4gICAgICAgIGNsZWFyR2xvYmFsQ3Vyc29yPy4oc3RhZ2VSZWYpO1xuXG4gICAgICAgIHRyeSB7IGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9IFwiXCI7IH0gY2F0Y2ggeyB9XG4gICAgICAgIHRyeSB7IGRvY3VtZW50LmJvZHkuc3R5bGUudG91Y2hBY3Rpb24gPSBcIlwiOyB9IGNhdGNoIHsgfVxuXG4gICAgICAgIGlmICh3aW5kb3cuX2FsdHVyYVJlc2l6ZVRocm90dGxlKSB3aW5kb3cuX2FsdHVyYVJlc2l6ZVRocm90dGxlID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3Qgc2VjY2lvbklkID0gY29udHJvbGFuZG9BbHR1cmE7XG4gICAgICAgIHNldENvbnRyb2xhbmRvQWx0dXJhKGZhbHNlKTtcbiAgICAgICAgc2V0QWx0dXJhSW5pY2lhbCgwKTtcbiAgICAgICAgc2V0UG9zaWNpb25JbmljaWFsTW91c2UoMCk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5fc2F2ZUFsdHVyYVRpbWVvdXQpIGNsZWFyVGltZW91dCh3aW5kb3cuX3NhdmVBbHR1cmFUaW1lb3V0KTtcbiAgICAgICAgd2luZG93Ll9zYXZlQWx0dXJhVGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXNsdWcpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJib3JyYWRvcmVzXCIsIHNsdWcpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzLFxuICAgICAgICAgICAgICAgICAgICB1bHRpbWFFZGljaW9uOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNsZWFyR2xvYmFsQ3Vyc29yPy4oc3RhZ2VSZWYpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEFsdHVyYSBndWFyZGFkYTpcIiwgc2VjY2lvbklkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBndWFyZGFuZG8gYWx0dXJhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMCk7XG4gICAgfSwgW2NvbnRyb2xhbmRvQWx0dXJhLCBzZWNjaW9uZXMsIHNsdWcsIGNsZWFyR2xvYmFsQ3Vyc29yLCBzdGFnZVJlZl0pO1xuXG5cbiAgICAvLyBsaXN0ZW5lcnMgZ2xvYmFsZXMgKG1vdXNlL3RvdWNoL3BvaW50ZXIpXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjb250cm9sYW5kb0FsdHVyYSkgcmV0dXJuO1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbWFuZWphckNvbnRyb2xBbHR1cmEsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBtYW5lamFyQ29udHJvbEFsdHVyYSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCBtYW5lamFyQ29udHJvbEFsdHVyYSwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmaW5hbGl6YXJDb250cm9sQWx0dXJhLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLCBmaW5hbGl6YXJDb250cm9sQWx0dXJhLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGZpbmFsaXphckNvbnRyb2xBbHR1cmEsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIGZpbmFsaXphckNvbnRyb2xBbHR1cmEsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtYW5lamFyQ29udHJvbEFsdHVyYSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG1hbmVqYXJDb250cm9sQWx0dXJhKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgbWFuZWphckNvbnRyb2xBbHR1cmEpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBmaW5hbGl6YXJDb250cm9sQWx0dXJhKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLCBmaW5hbGl6YXJDb250cm9sQWx0dXJhKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuX2FsdHVyYVJlc2l6ZVRocm90dGxlKSB3aW5kb3cuX2FsdHVyYVJlc2l6ZVRocm90dGxlID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfSwgW2NvbnRyb2xhbmRvQWx0dXJhLCBtYW5lamFyQ29udHJvbEFsdHVyYSwgZmluYWxpemFyQ29udHJvbEFsdHVyYV0pO1xuXG4gICAgLy8gZmFpbHNhZmVzIChwb2ludGVydXAsIGJsdXIsIHZpc2liaWxpdHksIGVzYy4uLilcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNvbnRyb2xhbmRvQWx0dXJhKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZW5kID0gKCkgPT4gZmluYWxpemFyQ29udHJvbEFsdHVyYSgpO1xuICAgICAgICBjb25zdCBoYW5kbGVQb2ludGVyVXAgPSBlbmQ7XG4gICAgICAgIGNvbnN0IGhhbmRsZVBvaW50ZXJDYW5jZWwgPSBlbmQ7XG4gICAgICAgIGNvbnN0IGhhbmRsZU1vdXNlTGVhdmUgPSAoZXYpID0+IHtcbiAgICAgICAgICAgIGlmIChldi5yZWxhdGVkVGFyZ2V0ID09PSBudWxsKSBlbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlQmx1ciA9IGVuZDtcbiAgICAgICAgY29uc3QgaGFuZGxlVmlzaWJpbGl0eSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgIT09IFwidmlzaWJsZVwiKSBlbmQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIGVuZCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGhhbmRsZVBvaW50ZXJVcCwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIiwgaGFuZGxlUG9pbnRlckNhbmNlbCwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgaGFuZGxlTW91c2VMZWF2ZSwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlQmx1ciwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBoYW5kbGVWaXNpYmlsaXR5LCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleURvd24sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgaGFuZGxlUG9pbnRlclVwLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIiwgaGFuZGxlUG9pbnRlckNhbmNlbCwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGhhbmRsZU1vdXNlTGVhdmUsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLCBoYW5kbGVCbHVyLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBoYW5kbGVWaXNpYmlsaXR5LCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgIH07XG4gICAgfSwgW2NvbnRyb2xhbmRvQWx0dXJhLCBmaW5hbGl6YXJDb250cm9sQWx0dXJhXSk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBCKSBUb2dnbGUgUGFudGFsbGEgT04vT0ZGXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgY29uc3QgdG9nZ2xlUGFudGFsbGFDb21wbGV0YVNlY2Npb24gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgYXN5bmMgKHNlY2Npb25JZCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzZWNjaW9uSWQpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gMSkgQWN0dWFsaXphciBlc3RhZG8gbG9jYWxcbiAgICAgICAgICAgIHNldFNlY2Npb25lcygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBwcmV2Lm1hcCgocykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocy5pZCAhPT0gc2VjY2lvbklkKSByZXR1cm4gcztcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RvQWN0dWFsID0gbm9ybWFsaXphckFsdG9Nb2RvKHMuYWx0b01vZG8pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RvTnVldm8gPSBtb2RvQWN0dWFsID09PSBcInBhbnRhbGxhXCIgPyBcImZpam9cIiA6IFwicGFudGFsbGFcIjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kb051ZXZvID09PSBcInBhbnRhbGxhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRvTW9kbzogXCJwYW50YWxsYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdHVyYUZpam9CYWNrdXA6IE51bWJlci5pc0Zpbml0ZShzLmFsdHVyYSkgPyBzLmFsdHVyYSA6IDYwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHR1cmE6IEFMVFVSQV9SRUZFUkVOQ0lBX1BBTlRBTExBLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2t1cCA9IE51bWJlci5pc0Zpbml0ZShzLmFsdHVyYUZpam9CYWNrdXApXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHMuYWx0dXJhRmlqb0JhY2t1cFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzLmFsdHVyYTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGFsdHVyYUZpam9CYWNrdXAsIC4uLnJlc3QgfSA9IHM7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHRvTW9kbzogXCJmaWpvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHR1cmE6IE51bWJlci5pc0Zpbml0ZShiYWNrdXApID8gYmFja3VwIDogNjAwLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gMikgUGVyc2lzdGlyIGVuIEZpcmVzdG9yZSB1c2FuZG8gZWwgc25hcHNob3QgYWN0dWFsXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghc2x1ZykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVmID0gZG9jKGRiLCBcImJvcnJhZG9yZXNcIiwgc2x1Zyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzZWNjaW9uZXNOZXh0ID0gc2VjY2lvbmVzLm1hcCgocykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocy5pZCAhPT0gc2VjY2lvbklkKSByZXR1cm4gcztcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RvQWN0dWFsID0gbm9ybWFsaXphckFsdG9Nb2RvKHMuYWx0b01vZG8pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RvTnVldm8gPSBtb2RvQWN0dWFsID09PSBcInBhbnRhbGxhXCIgPyBcImZpam9cIiA6IFwicGFudGFsbGFcIjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kb051ZXZvID09PSBcInBhbnRhbGxhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHRvTW9kbzogXCJwYW50YWxsYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdHVyYUZpam9CYWNrdXA6IE51bWJlci5pc0Zpbml0ZShzLmFsdHVyYSkgPyBzLmFsdHVyYSA6IDYwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHR1cmE6IEFMVFVSQV9SRUZFUkVOQ0lBX1BBTlRBTExBLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhY2t1cCA9IE51bWJlci5pc0Zpbml0ZShzLmFsdHVyYUZpam9CYWNrdXApXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHMuYWx0dXJhRmlqb0JhY2t1cFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzLmFsdHVyYTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGFsdHVyYUZpam9CYWNrdXAsIC4uLnJlc3QgfSA9IHM7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHRvTW9kbzogXCJmaWpvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHR1cmE6IE51bWJlci5pc0Zpbml0ZShiYWNrdXApID8gYmFja3VwIDogNjAwLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlRG9jKHJlZiwge1xuICAgICAgICAgICAgICAgICAgICBzZWNjaW9uZXM6IHNlY2Npb25lc05leHQsXG4gICAgICAgICAgICAgICAgICAgIHVsdGltYUVkaWNpb246IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLinIUgYWx0b01vZG8gYWN0dWFsaXphZG86XCIsIHNlY2Npb25JZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBndWFyZGFuZG8gYWx0b01vZG86XCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBbc2x1Zywgc2VjY2lvbmVzLCBzZXRTZWNjaW9uZXMsIG5vcm1hbGl6YXJBbHRvTW9kbywgQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEFdXG4gICAgKTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIEMpIENyZWFyIHNlY2Npw7NuICh5IHBlcnNpc3RpcilcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBjb25zdCBoYW5kbGVDcmVhclNlY2Npb24gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgYXN5bmMgKGRhdG9zKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXNsdWcpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJib3JyYWRvcmVzXCIsIHNsdWcpO1xuXG4gICAgICAgICAgICBzZXRTZWNjaW9uZXMoKHByZXZTZWNjaW9uZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBudWV2YSA9IGNyZWFyU2VjY2lvbihkYXRvcywgcHJldlNlY2Npb25lcyk7XG5cbiAgICAgICAgICAgICAgICBsZXQgb2JqZXRvc0Rlc2RlUGxhbnRpbGxhID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0b3M/LmRlc2RlUGxhbnRpbGxhICYmIEFycmF5LmlzQXJyYXkoZGF0b3Mub2JqZXRvcykpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZXRvc0Rlc2RlUGxhbnRpbGxhID0gZGF0b3Mub2JqZXRvcy5tYXAoKG9iaikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLm9iaixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIm9iai1cIiArIERhdGUubm93KCkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgNiksXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNjaW9uSWQ6IG51ZXZhLmlkLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbnVldmFzU2VjY2lvbmVzID0gWy4uLnByZXZTZWNjaW9uZXMsIG51ZXZhXTtcblxuICAgICAgICAgICAgICAgIHNldE9iamV0b3MoKHByZXZPYmpldG9zKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvc09iamV0b3MgPSBbLi4ucHJldk9iamV0b3MsIC4uLm9iamV0b3NEZXNkZVBsYW50aWxsYV07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltcGlhciBhbnRlcyBkZSBndWFyZGFyICh0dSBoZWxwZXIgZXhpc3RlbnRlKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNjaW9uZXNMaW1waWFzID0gbGltcGlhck9iamV0b1VuZGVmaW5lZChudWV2YXNTZWNjaW9uZXMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmpldG9zTGltcGlvcyA9IGxpbXBpYXJPYmpldG9VbmRlZmluZWQobnVldm9zT2JqZXRvcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRG9jKHJlZiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzOiBzZWNjaW9uZXNMaW1waWFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZXRvczogb2JqZXRvc0xpbXBpb3MsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZyhcIuKchSBTZWNjacOzbiBhZ3JlZ2FkYTpcIiwgbnVldmEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBhbCBndWFyZGFyIHNlY2Npw7NuXCIsIGVycm9yKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51ZXZvc09iamV0b3M7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVldmFzU2VjY2lvbmVzO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFtzbHVnLCBzZXRTZWNjaW9uZXMsIHNldE9iamV0b3MsIGNyZWFyU2VjY2lvbiwgbGltcGlhck9iamV0b1VuZGVmaW5lZF1cbiAgICApO1xuXG4gICAgLy8gTGlzdGVuZXIgZ2xvYmFsOiBcImNyZWFyLXNlY2Npb25cIlxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaGFuZGxlQ3JlYXJTZWNjaW9uKGUuZGV0YWlsKTtcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjcmVhci1zZWNjaW9uXCIsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjcmVhci1zZWNjaW9uXCIsIGhhbmRsZXIpO1xuICAgIH0sIFtoYW5kbGVDcmVhclNlY2Npb25dKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIC8vIHJlc2l6ZSBhbHR1cmFcbiAgICAgICAgY29udHJvbGFuZG9BbHR1cmEsXG4gICAgICAgIGluaWNpYXJDb250cm9sQWx0dXJhLFxuICAgICAgICBmaW5hbGl6YXJDb250cm9sQWx0dXJhLFxuXG4gICAgICAgIC8vIHRvZ2dsZSBwYW50YWxsYVxuICAgICAgICB0b2dnbGVQYW50YWxsYUNvbXBsZXRhU2VjY2lvbixcblxuICAgICAgICAvLyBjcmVhciBzZWNjacOzblxuICAgICAgICBoYW5kbGVDcmVhclNlY2Npb24sXG4gICAgfTtcbn1cblxuXG5cbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiZG9jIiwidXBkYXRlRG9jIiwic2VydmVyVGltZXN0YW1wIiwiZGIiLCJ1c2VTZWN0aW9uc01hbmFnZXIiLCJzbHVnIiwic2VjY2lvbmVzIiwic2V0U2VjY2lvbmVzIiwib2JqZXRvcyIsInNldE9iamV0b3MiLCJzZWNjaW9uQWN0aXZhSWQiLCJzZXRTZWNjaW9uQWN0aXZhSWQiLCJzdGFnZVJlZiIsInNldEdsb2JhbEN1cnNvciIsImNsZWFyR2xvYmFsQ3Vyc29yIiwiY3JlYXJTZWNjaW9uIiwibm9ybWFsaXphckFsdG9Nb2RvIiwibGltcGlhck9iamV0b1VuZGVmaW5lZCIsIkFMVFVSQV9SRUZFUkVOQ0lBX1BBTlRBTExBIiwiZ2V0Q2xpZW50WUZyb21FdmVudCIsImV2ZW50IiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJjbGllbnRZIiwidG91Y2hlcyIsImNoYW5nZWRUb3VjaGVzIiwiY29udHJvbGFuZG9BbHR1cmEiLCJzZXRDb250cm9sYW5kb0FsdHVyYSIsImFsdHVyYUluaWNpYWwiLCJzZXRBbHR1cmFJbmljaWFsIiwicG9zaWNpb25JbmljaWFsTW91c2UiLCJzZXRQb3NpY2lvbkluaWNpYWxNb3VzZSIsImluaWNpYXJDb250cm9sQWx0dXJhIiwiZSIsInNlY2Npb25JZCIsImV2dCIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbGFibGUiLCJwcmV2ZW50RGVmYXVsdCIsInNlY2Npb24iLCJmaW5kIiwicyIsImlkIiwicG9pbnRlclkiLCJhbHR1cmEiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsInVzZXJTZWxlY3QiLCJ0b3VjaEFjdGlvbiIsInRhcmdldCIsImdldFN0YWdlIiwiY29udGVudCIsImNvbnRhaW5lciIsInNldFBvaW50ZXJDYXB0dXJlIiwicG9pbnRlcklkIiwibWFuZWphckNvbnRyb2xBbHR1cmEiLCJwb3NpY2lvbkFjdHVhbE1vdXNlIiwid2luZG93IiwiX2FsdHVyYVJlc2l6ZVRocm90dGxlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZGVsdGFZIiwibnVldmFBbHR1cmEiLCJNYXRoIiwibWF4Iiwicm91bmQiLCJwcmV2IiwibWFwIiwic2V0VGltZW91dCIsImZpbmFsaXphckNvbnRyb2xBbHR1cmEiLCJfc2F2ZUFsdHVyYVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJyZWYiLCJ1bHRpbWFFZGljaW9uIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhc3NpdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZW5kIiwiaGFuZGxlUG9pbnRlclVwIiwiaGFuZGxlUG9pbnRlckNhbmNlbCIsImhhbmRsZU1vdXNlTGVhdmUiLCJldiIsInJlbGF0ZWRUYXJnZXQiLCJoYW5kbGVCbHVyIiwiaGFuZGxlVmlzaWJpbGl0eSIsInZpc2liaWxpdHlTdGF0ZSIsImhhbmRsZUtleURvd24iLCJrZXkiLCJjYXB0dXJlIiwidG9nZ2xlUGFudGFsbGFDb21wbGV0YVNlY2Npb24iLCJuZXh0IiwibW9kb0FjdHVhbCIsImFsdG9Nb2RvIiwibW9kb051ZXZvIiwiYWx0dXJhRmlqb0JhY2t1cCIsImJhY2t1cCIsInJlc3QiLCJzZWNjaW9uZXNOZXh0IiwiaGFuZGxlQ3JlYXJTZWNjaW9uIiwiZGF0b3MiLCJwcmV2U2VjY2lvbmVzIiwibnVldmEiLCJvYmpldG9zRGVzZGVQbGFudGlsbGEiLCJkZXNkZVBsYW50aWxsYSIsIkFycmF5IiwiaXNBcnJheSIsIm9iaiIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIm51ZXZhc1NlY2Npb25lcyIsInByZXZPYmpldG9zIiwibnVldm9zT2JqZXRvcyIsInNlY2Npb25lc0xpbXBpYXMiLCJvYmpldG9zTGltcGlvcyIsInRoZW4iLCJjYXRjaCIsImhhbmRsZXIiLCJkZXRhaWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/sections/useSectionsManager.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/selection/selectionUtils.js":
/*!***********************************************************!*\
  !*** ./src/components/editor/selection/selectionUtils.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   detectarInterseccionLinea: () => (/* binding */ detectarInterseccionLinea),\n/* harmony export */   validarPuntosLinea: () => (/* binding */ validarPuntosLinea)\n/* harmony export */ });\n// src/components/editor/selection/selectionUtils.js\n/**\r\n * 🎯 Normaliza puntos de línea: asegura 4 valores numéricos.\r\n * Si falta alguno, usa 0 para inicio y 100 para x2 como fallback.\r\n */ function validarPuntosLinea(obj) {\n    const puntosActuales = obj.points || [];\n    const puntosValidos = [];\n    for(let i = 0; i < 4; i++){\n        const valor = parseFloat(puntosActuales[i]);\n        puntosValidos.push(isNaN(valor) ? i === 2 ? 100 : 0 : valor);\n    }\n    return {\n        ...obj,\n        points: puntosValidos\n    };\n}\n/**\r\n * 🔍 Detecta intersección de una línea con un área rectangular.\r\n * Usa helpers de colisión línea-rect y línea-línea.\r\n */ function detectarInterseccionLinea(lineObj, area, stage) {\n    const node = stage.findOne(`#${lineObj.id}`);\n    if (!node) return false;\n    const nodePos = node.position();\n    const points = lineObj.points || [\n        0,\n        0,\n        100,\n        0\n    ];\n    const cleanPoints = [\n        parseFloat(points[0]) || 0,\n        parseFloat(points[1]) || 0,\n        parseFloat(points[2]) || 100,\n        parseFloat(points[3]) || 0\n    ];\n    const startX = nodePos.x + cleanPoints[0];\n    const startY = nodePos.y + cleanPoints[1];\n    const endX = nodePos.x + cleanPoints[2];\n    const endY = nodePos.y + cleanPoints[3];\n    // ¿alguno de los puntos extremos dentro del área?\n    const startDentro = startX >= area.x && startX <= area.x + area.width && startY >= area.y && startY <= area.y + area.height;\n    const endDentro = endX >= area.x && endX <= area.x + area.width && endY >= area.y && endY <= area.y + area.height;\n    // chequeo por bounding box de la línea contra el área\n    const lineMinX = Math.min(startX, endX);\n    const lineMaxX = Math.max(startX, endX);\n    const lineMinY = Math.min(startY, endY);\n    const lineMaxY = Math.max(startY, endY);\n    const areaIntersectaLinea = !(area.x > lineMaxX || area.x + area.width < lineMinX || area.y > lineMaxY || area.y + area.height < lineMinY);\n    return startDentro || endDentro || areaIntersectaLinea;\n}\n/**\r\n * Helper: intersección línea con rectángulo (usado internamente).\r\n */ function lineIntersectsRect(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectBottom) {\n    return lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectTop) || lineIntersectsLine(x1, y1, x2, y2, rectRight, rectTop, rectRight, rectBottom) || lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectBottom, rectRight, rectBottom) || lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectLeft, rectBottom);\n}\n/**\r\n * Helper: intersección entre dos segmentos de línea.\r\n */ function lineIntersectsLine(x1, y1, x2, y2, x3, y3, x4, y4) {\n    const denom = (y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1);\n    if (denom === 0) return false;\n    const ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denom;\n    const ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denom;\n    return ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9zZWxlY3Rpb24vc2VsZWN0aW9uVXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBb0Q7QUFFcEQ7OztDQUdDLEdBQ00sU0FBU0EsbUJBQW1CQyxHQUFHO0lBQ3BDLE1BQU1DLGlCQUFpQkQsSUFBSUUsTUFBTSxJQUFJLEVBQUU7SUFDdkMsTUFBTUMsZ0JBQWdCLEVBQUU7SUFFeEIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUksR0FBR0EsSUFBSztRQUMxQixNQUFNQyxRQUFRQyxXQUFXTCxjQUFjLENBQUNHLEVBQUU7UUFDMUNELGNBQWNJLElBQUksQ0FBQ0MsTUFBTUgsU0FBVUQsTUFBTSxJQUFJLE1BQU0sSUFBS0M7SUFDMUQ7SUFFQSxPQUFPO1FBQ0wsR0FBR0wsR0FBRztRQUNORSxRQUFRQztJQUNWO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTTSwwQkFBMEJDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxLQUFLO0lBQzVELE1BQU1DLE9BQU9ELE1BQU1FLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRUosUUFBUUssRUFBRSxFQUFFO0lBQzNDLElBQUksQ0FBQ0YsTUFBTSxPQUFPO0lBRWxCLE1BQU1HLFVBQVVILEtBQUtJLFFBQVE7SUFDN0IsTUFBTWYsU0FBU1EsUUFBUVIsTUFBTSxJQUFJO1FBQUM7UUFBRztRQUFHO1FBQUs7S0FBRTtJQUUvQyxNQUFNZ0IsY0FBYztRQUNsQlosV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztRQUN6QkksV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztRQUN6QkksV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztRQUN6QkksV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztLQUMxQjtJQUVELE1BQU1pQixTQUFTSCxRQUFRSSxDQUFDLEdBQUdGLFdBQVcsQ0FBQyxFQUFFO0lBQ3pDLE1BQU1HLFNBQVNMLFFBQVFNLENBQUMsR0FBR0osV0FBVyxDQUFDLEVBQUU7SUFDekMsTUFBTUssT0FBT1AsUUFBUUksQ0FBQyxHQUFHRixXQUFXLENBQUMsRUFBRTtJQUN2QyxNQUFNTSxPQUFPUixRQUFRTSxDQUFDLEdBQUdKLFdBQVcsQ0FBQyxFQUFFO0lBRXZDLGtEQUFrRDtJQUNsRCxNQUFNTyxjQUNKTixVQUFVUixLQUFLUyxDQUFDLElBQ2hCRCxVQUFVUixLQUFLUyxDQUFDLEdBQUdULEtBQUtlLEtBQUssSUFDN0JMLFVBQVVWLEtBQUtXLENBQUMsSUFDaEJELFVBQVVWLEtBQUtXLENBQUMsR0FBR1gsS0FBS2dCLE1BQU07SUFFaEMsTUFBTUMsWUFDSkwsUUFBUVosS0FBS1MsQ0FBQyxJQUNkRyxRQUFRWixLQUFLUyxDQUFDLEdBQUdULEtBQUtlLEtBQUssSUFDM0JGLFFBQVFiLEtBQUtXLENBQUMsSUFDZEUsUUFBUWIsS0FBS1csQ0FBQyxHQUFHWCxLQUFLZ0IsTUFBTTtJQUU5QixzREFBc0Q7SUFDdEQsTUFBTUUsV0FBV0MsS0FBS0MsR0FBRyxDQUFDWixRQUFRSTtJQUNsQyxNQUFNUyxXQUFXRixLQUFLRyxHQUFHLENBQUNkLFFBQVFJO0lBQ2xDLE1BQU1XLFdBQVdKLEtBQUtDLEdBQUcsQ0FBQ1YsUUFBUUc7SUFDbEMsTUFBTVcsV0FBV0wsS0FBS0csR0FBRyxDQUFDWixRQUFRRztJQUVsQyxNQUFNWSxzQkFBc0IsQ0FDMUJ6QixDQUFBQSxLQUFLUyxDQUFDLEdBQUdZLFlBQ1RyQixLQUFLUyxDQUFDLEdBQUdULEtBQUtlLEtBQUssR0FBR0csWUFDdEJsQixLQUFLVyxDQUFDLEdBQUdhLFlBQ1R4QixLQUFLVyxDQUFDLEdBQUdYLEtBQUtnQixNQUFNLEdBQUdPLFFBQU87SUFHaEMsT0FBT1QsZUFBZUcsYUFBYVE7QUFDckM7QUFFQTs7Q0FFQyxHQUNELFNBQVNDLG1CQUFtQkMsRUFBRSxFQUFFQyxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sRUFBRUMsU0FBUyxFQUFFQyxVQUFVO0lBQ2xGLE9BQ0VDLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsVUFBVUMsU0FBU0MsV0FBV0QsWUFDakVHLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUcsV0FBV0QsU0FBU0MsV0FBV0MsZUFDbEVDLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsVUFBVUcsWUFBWUQsV0FBV0MsZUFDcEVDLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsVUFBVUMsU0FBU0QsVUFBVUc7QUFFcEU7QUFFQTs7Q0FFQyxHQUNELFNBQVNDLG1CQUFtQlIsRUFBRSxFQUFFQyxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFFTSxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxFQUFFO0lBQ3hELE1BQU1DLFFBQVEsQ0FBQ0QsS0FBS0YsRUFBQyxJQUFNUixDQUFBQSxLQUFLRixFQUFDLElBQUssQ0FBQ1csS0FBS0YsRUFBQyxJQUFNTixDQUFBQSxLQUFLRixFQUFDO0lBQ3pELElBQUlZLFVBQVUsR0FBRyxPQUFPO0lBRXhCLE1BQU1DLEtBQUssQ0FBQyxDQUFDSCxLQUFLRixFQUFDLElBQU1SLENBQUFBLEtBQUtTLEVBQUMsSUFBSyxDQUFDRSxLQUFLRixFQUFDLElBQU1WLENBQUFBLEtBQUtTLEVBQUMsQ0FBQyxJQUFLSTtJQUM3RCxNQUFNRSxLQUFLLENBQUMsQ0FBQ2IsS0FBS0YsRUFBQyxJQUFNQyxDQUFBQSxLQUFLUyxFQUFDLElBQUssQ0FBQ1AsS0FBS0YsRUFBQyxJQUFNRCxDQUFBQSxLQUFLUyxFQUFDLENBQUMsSUFBS0k7SUFFN0QsT0FBT0MsTUFBTSxLQUFLQSxNQUFNLEtBQUtDLE1BQU0sS0FBS0EsTUFBTTtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxlZGl0b3JcXHNlbGVjdGlvblxcc2VsZWN0aW9uVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvZWRpdG9yL3NlbGVjdGlvbi9zZWxlY3Rpb25VdGlscy5qc1xyXG5cclxuLyoqXHJcbiAqIPCfjq8gTm9ybWFsaXphIHB1bnRvcyBkZSBsw61uZWE6IGFzZWd1cmEgNCB2YWxvcmVzIG51bcOpcmljb3MuXHJcbiAqIFNpIGZhbHRhIGFsZ3VubywgdXNhIDAgcGFyYSBpbmljaW8geSAxMDAgcGFyYSB4MiBjb21vIGZhbGxiYWNrLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXJQdW50b3NMaW5lYShvYmopIHtcclxuICBjb25zdCBwdW50b3NBY3R1YWxlcyA9IG9iai5wb2ludHMgfHwgW107XHJcbiAgY29uc3QgcHVudG9zVmFsaWRvcyA9IFtdO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KHB1bnRvc0FjdHVhbGVzW2ldKTtcclxuICAgIHB1bnRvc1ZhbGlkb3MucHVzaChpc05hTih2YWxvcikgPyAoaSA9PT0gMiA/IDEwMCA6IDApIDogdmFsb3IpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLm9iaixcclxuICAgIHBvaW50czogcHVudG9zVmFsaWRvcyxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICog8J+UjSBEZXRlY3RhIGludGVyc2VjY2nDs24gZGUgdW5hIGzDrW5lYSBjb24gdW4gw6FyZWEgcmVjdGFuZ3VsYXIuXHJcbiAqIFVzYSBoZWxwZXJzIGRlIGNvbGlzacOzbiBsw61uZWEtcmVjdCB5IGzDrW5lYS1sw61uZWEuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0YXJJbnRlcnNlY2Npb25MaW5lYShsaW5lT2JqLCBhcmVhLCBzdGFnZSkge1xyXG4gIGNvbnN0IG5vZGUgPSBzdGFnZS5maW5kT25lKGAjJHtsaW5lT2JqLmlkfWApO1xyXG4gIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICBjb25zdCBub2RlUG9zID0gbm9kZS5wb3NpdGlvbigpO1xyXG4gIGNvbnN0IHBvaW50cyA9IGxpbmVPYmoucG9pbnRzIHx8IFswLCAwLCAxMDAsIDBdO1xyXG5cclxuICBjb25zdCBjbGVhblBvaW50cyA9IFtcclxuICAgIHBhcnNlRmxvYXQocG9pbnRzWzBdKSB8fCAwLFxyXG4gICAgcGFyc2VGbG9hdChwb2ludHNbMV0pIHx8IDAsXHJcbiAgICBwYXJzZUZsb2F0KHBvaW50c1syXSkgfHwgMTAwLFxyXG4gICAgcGFyc2VGbG9hdChwb2ludHNbM10pIHx8IDAsXHJcbiAgXTtcclxuXHJcbiAgY29uc3Qgc3RhcnRYID0gbm9kZVBvcy54ICsgY2xlYW5Qb2ludHNbMF07XHJcbiAgY29uc3Qgc3RhcnRZID0gbm9kZVBvcy55ICsgY2xlYW5Qb2ludHNbMV07XHJcbiAgY29uc3QgZW5kWCA9IG5vZGVQb3MueCArIGNsZWFuUG9pbnRzWzJdO1xyXG4gIGNvbnN0IGVuZFkgPSBub2RlUG9zLnkgKyBjbGVhblBvaW50c1szXTtcclxuXHJcbiAgLy8gwr9hbGd1bm8gZGUgbG9zIHB1bnRvcyBleHRyZW1vcyBkZW50cm8gZGVsIMOhcmVhP1xyXG4gIGNvbnN0IHN0YXJ0RGVudHJvID1cclxuICAgIHN0YXJ0WCA+PSBhcmVhLnggJiZcclxuICAgIHN0YXJ0WCA8PSBhcmVhLnggKyBhcmVhLndpZHRoICYmXHJcbiAgICBzdGFydFkgPj0gYXJlYS55ICYmXHJcbiAgICBzdGFydFkgPD0gYXJlYS55ICsgYXJlYS5oZWlnaHQ7XHJcblxyXG4gIGNvbnN0IGVuZERlbnRybyA9XHJcbiAgICBlbmRYID49IGFyZWEueCAmJlxyXG4gICAgZW5kWCA8PSBhcmVhLnggKyBhcmVhLndpZHRoICYmXHJcbiAgICBlbmRZID49IGFyZWEueSAmJlxyXG4gICAgZW5kWSA8PSBhcmVhLnkgKyBhcmVhLmhlaWdodDtcclxuXHJcbiAgLy8gY2hlcXVlbyBwb3IgYm91bmRpbmcgYm94IGRlIGxhIGzDrW5lYSBjb250cmEgZWwgw6FyZWFcclxuICBjb25zdCBsaW5lTWluWCA9IE1hdGgubWluKHN0YXJ0WCwgZW5kWCk7XHJcbiAgY29uc3QgbGluZU1heFggPSBNYXRoLm1heChzdGFydFgsIGVuZFgpO1xyXG4gIGNvbnN0IGxpbmVNaW5ZID0gTWF0aC5taW4oc3RhcnRZLCBlbmRZKTtcclxuICBjb25zdCBsaW5lTWF4WSA9IE1hdGgubWF4KHN0YXJ0WSwgZW5kWSk7XHJcblxyXG4gIGNvbnN0IGFyZWFJbnRlcnNlY3RhTGluZWEgPSAhKFxyXG4gICAgYXJlYS54ID4gbGluZU1heFggfHxcclxuICAgIGFyZWEueCArIGFyZWEud2lkdGggPCBsaW5lTWluWCB8fFxyXG4gICAgYXJlYS55ID4gbGluZU1heFkgfHxcclxuICAgIGFyZWEueSArIGFyZWEuaGVpZ2h0IDwgbGluZU1pbllcclxuICApO1xyXG5cclxuICByZXR1cm4gc3RhcnREZW50cm8gfHwgZW5kRGVudHJvIHx8IGFyZWFJbnRlcnNlY3RhTGluZWE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXI6IGludGVyc2VjY2nDs24gbMOtbmVhIGNvbiByZWN0w6FuZ3VsbyAodXNhZG8gaW50ZXJuYW1lbnRlKS5cclxuICovXHJcbmZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzUmVjdCh4MSwgeTEsIHgyLCB5MiwgcmVjdExlZnQsIHJlY3RUb3AsIHJlY3RSaWdodCwgcmVjdEJvdHRvbSkge1xyXG4gIHJldHVybiAoXHJcbiAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0VG9wLCByZWN0UmlnaHQsIHJlY3RUb3ApIHx8XHJcbiAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RSaWdodCwgcmVjdFRvcCwgcmVjdFJpZ2h0LCByZWN0Qm90dG9tKSB8fFxyXG4gICAgbGluZUludGVyc2VjdHNMaW5lKHgxLCB5MSwgeDIsIHkyLCByZWN0TGVmdCwgcmVjdEJvdHRvbSwgcmVjdFJpZ2h0LCByZWN0Qm90dG9tKSB8fFxyXG4gICAgbGluZUludGVyc2VjdHNMaW5lKHgxLCB5MSwgeDIsIHkyLCByZWN0TGVmdCwgcmVjdFRvcCwgcmVjdExlZnQsIHJlY3RCb3R0b20pXHJcbiAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhlbHBlcjogaW50ZXJzZWNjacOzbiBlbnRyZSBkb3Mgc2VnbWVudG9zIGRlIGzDrW5lYS5cclxuICovXHJcbmZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzTGluZSh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpIHtcclxuICBjb25zdCBkZW5vbSA9ICh5NCAtIHkzKSAqICh4MiAtIHgxKSAtICh4NCAtIHgzKSAqICh5MiAtIHkxKTtcclxuICBpZiAoZGVub20gPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgY29uc3QgdWEgPSAoKHg0IC0geDMpICogKHkxIC0geTMpIC0gKHk0IC0geTMpICogKHgxIC0geDMpKSAvIGRlbm9tO1xyXG4gIGNvbnN0IHViID0gKCh4MiAtIHgxKSAqICh5MSAtIHkzKSAtICh5MiAtIHkxKSAqICh4MSAtIHgzKSkgLyBkZW5vbTtcclxuXHJcbiAgcmV0dXJuIHVhID49IDAgJiYgdWEgPD0gMSAmJiB1YiA+PSAwICYmIHViIDw9IDE7XHJcbn1cclxuIl0sIm5hbWVzIjpbInZhbGlkYXJQdW50b3NMaW5lYSIsIm9iaiIsInB1bnRvc0FjdHVhbGVzIiwicG9pbnRzIiwicHVudG9zVmFsaWRvcyIsImkiLCJ2YWxvciIsInBhcnNlRmxvYXQiLCJwdXNoIiwiaXNOYU4iLCJkZXRlY3RhckludGVyc2VjY2lvbkxpbmVhIiwibGluZU9iaiIsImFyZWEiLCJzdGFnZSIsIm5vZGUiLCJmaW5kT25lIiwiaWQiLCJub2RlUG9zIiwicG9zaXRpb24iLCJjbGVhblBvaW50cyIsInN0YXJ0WCIsIngiLCJzdGFydFkiLCJ5IiwiZW5kWCIsImVuZFkiLCJzdGFydERlbnRybyIsIndpZHRoIiwiaGVpZ2h0IiwiZW5kRGVudHJvIiwibGluZU1pblgiLCJNYXRoIiwibWluIiwibGluZU1heFgiLCJtYXgiLCJsaW5lTWluWSIsImxpbmVNYXhZIiwiYXJlYUludGVyc2VjdGFMaW5lYSIsImxpbmVJbnRlcnNlY3RzUmVjdCIsIngxIiwieTEiLCJ4MiIsInkyIiwicmVjdExlZnQiLCJyZWN0VG9wIiwicmVjdFJpZ2h0IiwicmVjdEJvdHRvbSIsImxpbmVJbnRlcnNlY3RzTGluZSIsIngzIiwieTMiLCJ4NCIsInk0IiwiZGVub20iLCJ1YSIsInViIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/selection/selectionUtils.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/toolbar/FloatingTextToolbar.jsx":
/*!***************************************************************!*\
  !*** ./src/components/editor/toolbar/FloatingTextToolbar.jsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FloatingTextToolbar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_FontSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/FontSelector */ \"(pages-dir-node)/./src/components/FontSelector.jsx\");\n// src/components/editor/toolbar/FloatingTextToolbar.jsx\n\n\n\n // mismo icono que usabas\n\nfunction FloatingTextToolbar({ // 🔧 Datos y handlers que YA existen en CanvasEditor (los pasamos por props)\nobjetoSeleccionado, setObjetos, elementosSeleccionados, mostrarSelectorFuente, setMostrarSelectorFuente, mostrarSelectorTamano, setMostrarSelectorTamano, ALL_FONTS, fontManager, tamaniosDisponibles = [], onCambiarAlineacion }) {\n    const [isMobile, setIsMobile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingTextToolbar.useEffect\": ()=>{\n            if (true) return;\n            const mq = window.matchMedia(\"(max-width: 768px)\");\n            const update = {\n                \"FloatingTextToolbar.useEffect.update\": ()=>setIsMobile(mq.matches)\n            }[\"FloatingTextToolbar.useEffect.update\"];\n            update();\n            mq.addEventListener?.(\"change\", update);\n            return ({\n                \"FloatingTextToolbar.useEffect\": ()=>mq.removeEventListener?.(\"change\", update)\n            })[\"FloatingTextToolbar.useEffect\"];\n        }\n    }[\"FloatingTextToolbar.useEffect\"], []);\n    const toolbarContainerClass = \"fixed z-50 bg-white border rounded shadow p-2 flex gap-2 items-center\";\n    const toolbarContainerStyle = {\n        top: isMobile ? \"calc(56px + env(safe-area-inset-top, 0px))\" : \"60px\",\n        left: \"50%\",\n        transform: \"translateX(-50%)\",\n        width: isMobile ? \"calc(100vw - 16px)\" : \"auto\",\n        maxWidth: isMobile ? \"calc(100vw - 16px)\" : \"800px\",\n        overflowX: isMobile ? \"auto\" : \"visible\",\n        WebkitOverflowScrolling: isMobile ? \"touch\" : \"auto\",\n        whiteSpace: isMobile ? \"nowrap\" : \"normal\"\n    };\n    // 👉 mantenemos exactamente las mismas condiciones/variables auxiliares\n    const esTexto = objetoSeleccionado?.tipo === \"texto\";\n    const esFormaConTexto = objetoSeleccionado?.tipo === \"forma\" && objetoSeleccionado?.texto;\n    const esRect = objetoSeleccionado?.figura === \"rect\";\n    if (!(objetoSeleccionado?.tipo === \"texto\" || objetoSeleccionado?.tipo === \"forma\" || objetoSeleccionado?.tipo === \"icono\")) {\n        return null;\n    }\n    // Para iconos, solo mostrar selector de color\n    if (objetoSeleccionado?.tipo === \"icono\") {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: toolbarContainerClass,\n            style: {\n                ...toolbarContainerStyle,\n                maxWidth: isMobile ? toolbarContainerStyle.maxWidth : \"220px\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-gray-600\",\n                        children: \"Color\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 68,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"color\",\n                        value: objetoSeleccionado.color || \"#000000\",\n                        onChange: (e)=>{\n                            const nuevoColor = e.target.value;\n                            console.log(\"🎨 [TOOLBAR] Cambiando color de ícono:\", {\n                                elementoId: elementosSeleccionados[0],\n                                colorAnterior: objetoSeleccionado.color,\n                                colorNuevo: nuevoColor,\n                                elementosSeleccionados\n                            });\n                            setObjetos((prev)=>{\n                                console.log(\"🔍 [TOOLBAR] Objetos antes del cambio:\", prev.length);\n                                const nuevosObjetos = prev.map((o)=>{\n                                    if (elementosSeleccionados.includes(o.id)) {\n                                        console.log(\"✅ [TOOLBAR] Actualizando objeto:\", {\n                                            id: o.id,\n                                            tipo: o.tipo,\n                                            colorAnterior: o.color,\n                                            colorNuevo: nuevoColor\n                                        });\n                                        return {\n                                            ...o,\n                                            color: nuevoColor\n                                        };\n                                    }\n                                    return o;\n                                });\n                                console.log(\"🔍 [TOOLBAR] Objetos después del cambio:\", nuevosObjetos.length);\n                                return nuevosObjetos;\n                            });\n                        },\n                        className: \"w-8 h-6 rounded cursor-pointer\",\n                        title: \"Color del \\xedcono\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 69,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 67,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n            lineNumber: 63,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: toolbarContainerClass,\n        style: toolbarContainerStyle,\n        children: [\n            objetoSeleccionado?.tipo === \"forma\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-gray-600\",\n                        children: \"Fondo\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 118,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"color\",\n                        value: objetoSeleccionado.color || \"#ffffff\",\n                        onChange: (e)=>setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                        ...o,\n                                        color: e.target.value\n                                    } : o)),\n                        className: \"w-8 h-6 rounded\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 119,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 117,\n                columnNumber: 9\n            }, this),\n            objetoSeleccionado?.tipo === \"forma\" && esRect && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-gray-600\",\n                        children: \"Esquinas\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 139,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"range\",\n                        min: 0,\n                        max: 100,\n                        value: objetoSeleccionado.cornerRadius || 0,\n                        onChange: (e)=>setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                        ...o,\n                                        cornerRadius: parseInt(e.target.value)\n                                    } : o))\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 140,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-xs text-gray-700\",\n                        children: objetoSeleccionado.cornerRadius || 0\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 155,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 138,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: `relative cursor-pointer px-3 py-1 rounded border text-sm transition-all truncate ${mostrarSelectorFuente ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                style: {\n                    fontFamily: objetoSeleccionado?.fontFamily || \"sans-serif\",\n                    width: \"180px\",\n                    textAlign: \"left\"\n                },\n                title: objetoSeleccionado?.fontFamily || \"sans-serif\",\n                onClick: ()=>setMostrarSelectorFuente(!mostrarSelectorFuente),\n                children: objetoSeleccionado?.fontFamily || \"sans-serif\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 162,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_FontSelector__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                currentFont: objetoSeleccionado?.fontFamily || \"sans-serif\",\n                onFontChange: async (nuevaFuente)=>{\n                    await fontManager.loadFonts([\n                        nuevaFuente\n                    ]);\n                    setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                ...o,\n                                fontFamily: nuevaFuente\n                            } : o));\n                },\n                isOpen: mostrarSelectorFuente,\n                onClose: ()=>setMostrarSelectorFuente(false)\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 178,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative flex items-center bg-white border rounded-lg\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"px-2 py-1 hover:bg-gray-100 transition\",\n                        onClick: (e)=>{\n                            e.stopPropagation();\n                            setObjetos((prev)=>prev.map((o)=>{\n                                    if (!elementosSeleccionados.includes(o.id)) return o;\n                                    const actual = o.fontSize || 24;\n                                    return {\n                                        ...o,\n                                        fontSize: Math.max(6, actual - 2)\n                                    };\n                                }));\n                        },\n                        children: \"−\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 197,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: `px-2 py-1 text-sm cursor-pointer transition-all ${mostrarSelectorTamano ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                        onClick: ()=>setMostrarSelectorTamano(!mostrarSelectorTamano),\n                        children: [\n                            objetoSeleccionado?.fontSize || 24,\n                            mostrarSelectorTamano && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute popup-fuente z-50 bg-white border rounded-2xl shadow-md p-2 w-24 max-h-[300px] overflow-auto\",\n                                style: {\n                                    top: \"40px\",\n                                    left: \"-10px\"\n                                },\n                                children: tamaniosDisponibles.map((tam)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"px-2 py-1 text-sm hover:bg-gray-100 rounded cursor-pointer text-center\",\n                                        onClick: (e)=>{\n                                            e.stopPropagation();\n                                            setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                                        ...o,\n                                                        fontSize: tam\n                                                    } : o));\n                                            setMostrarSelectorTamano(false);\n                                        },\n                                        children: tam\n                                    }, tam, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                        lineNumber: 225,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 220,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 213,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"px-2 py-1 hover:bg-gray-100 transition\",\n                        onClick: ()=>{\n                            setObjetos((prev)=>prev.map((o)=>{\n                                    if (!elementosSeleccionados.includes(o.id)) return o;\n                                    return {\n                                        ...o,\n                                        fontSize: Math.min(120, (o.fontSize || 24) + 2)\n                                    };\n                                }));\n                        },\n                        children: \"+\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 247,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 196,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"color\",\n                value: objetoSeleccionado?.colorTexto || \"#000000\",\n                onChange: (e)=>{\n                    setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                ...o,\n                                colorTexto: e.target.value\n                            } : o));\n                }\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 266,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: `px-2 py-1 rounded border text-sm font-bold transition ${objetoSeleccionado?.fontWeight === \"bold\" ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                onClick: ()=>setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                ...o,\n                                fontWeight: o.fontWeight === \"bold\" ? \"normal\" : \"bold\"\n                            } : o)),\n                children: \"B\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 281,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: `px-2 py-1 rounded border text-sm italic transition ${objetoSeleccionado?.fontStyle === \"italic\" ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                onClick: ()=>setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                ...o,\n                                fontStyle: o.fontStyle === \"italic\" ? \"normal\" : \"italic\"\n                            } : o)),\n                children: \"I\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 302,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: `px-2 py-1 rounded border text-sm transition ${objetoSeleccionado?.textDecoration === \"underline\" ? \"bg-gray-200 underline\" : \"hover:bg-gray-100\"}`,\n                onClick: ()=>setObjetos((prev)=>prev.map((o)=>elementosSeleccionados.includes(o.id) ? {\n                                ...o,\n                                textDecoration: o.textDecoration === \"underline\" ? \"none\" : \"underline\"\n                            } : o)),\n                children: \"S\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 323,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"px-2 py-1 rounded border text-sm transition hover:bg-gray-100 flex items-center justify-center\",\n                onClick: onCambiarAlineacion,\n                title: `Alineación: ${objetoSeleccionado?.align || \"izquierda\"}`,\n                children: (()=>{\n                    const align = objetoSeleccionado?.align || \"left\";\n                    switch(align){\n                        case \"left\":\n                            return \"⬅️\";\n                        case \"center\":\n                            return \"↔️\";\n                        case \"right\":\n                            return \"➡️\";\n                        case \"justify\":\n                            return \"⚌\";\n                        default:\n                            return \"⬅️\";\n                    }\n                })()\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 346,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n        lineNumber: 110,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci90b29sYmFyL0Zsb2F0aW5nVGV4dFRvb2xiYXIuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLHdEQUF3RDs7QUFDOUI7QUFDa0I7QUFDUCxDQUFDLHlCQUF5QjtBQUNWO0FBR3RDLFNBQVNLLG9CQUFvQixFQUMxQyw2RUFBNkU7QUFDN0VDLGtCQUFrQixFQUNsQkMsVUFBVSxFQUNWQyxzQkFBc0IsRUFFdEJDLHFCQUFxQixFQUNyQkMsd0JBQXdCLEVBRXhCQyxxQkFBcUIsRUFDckJDLHdCQUF3QixFQUV4QkMsU0FBUyxFQUNUQyxXQUFXLEVBQ1hDLHNCQUFzQixFQUFFLEVBRXhCQyxtQkFBbUIsRUFDcEI7SUFDQyxNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR2hCLCtDQUFRQSxDQUFDO0lBRXpDRCxnREFBU0E7eUNBQUM7WUFDUixJQUFJLElBQTZCLEVBQUU7WUFDbkMsTUFBTWtCLEtBQUtDLE9BQU9DLFVBQVUsQ0FBQztZQUM3QixNQUFNQzt3REFBUyxJQUFNSixZQUFZQyxHQUFHSSxPQUFPOztZQUMzQ0Q7WUFDQUgsR0FBR0ssZ0JBQWdCLEdBQUcsVUFBVUY7WUFDaEM7aURBQU8sSUFBTUgsR0FBR00sbUJBQW1CLEdBQUcsVUFBVUg7O1FBQ2xEO3dDQUFHLEVBQUU7SUFFTCxNQUFNSSx3QkFDSjtJQUVGLE1BQU1DLHdCQUF3QjtRQUM1QkMsS0FBS1gsV0FBVywrQ0FBK0M7UUFDL0RZLE1BQU07UUFDTkMsV0FBVztRQUNYQyxPQUFPZCxXQUFXLHVCQUF1QjtRQUN6Q2UsVUFBVWYsV0FBVyx1QkFBdUI7UUFDNUNnQixXQUFXaEIsV0FBVyxTQUFTO1FBQy9CaUIseUJBQXlCakIsV0FBVyxVQUFVO1FBQzlDa0IsWUFBWWxCLFdBQVcsV0FBVztJQUNwQztJQUNBLHdFQUF3RTtJQUN4RSxNQUFNbUIsVUFBVTlCLG9CQUFvQitCLFNBQVM7SUFDN0MsTUFBTUMsa0JBQ0poQyxvQkFBb0Ir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RSxJQUNoQztnQ0FDQSxHQUFHRixDQUFDO2dDQUNKMkIsZ0JBQ0UzQixFQUFFMkIsY0FBYyxLQUFLLGNBQWMsU0FBUzs0QkFDaEQsSUFDRTNCOzBCQUlYOzs7Ozs7MEJBS0QsOERBQUNrQjtnQkFDQ3RDLFdBQVU7Z0JBQ1YrQixTQUFTMUQ7Z0JBQ1RrRCxPQUFPLENBQUMsWUFBWSxFQUFFNUQsb0JBQW9CcUYsU0FBUyxhQUFhOzBCQUUvRCxDQUFDO29CQUNBLE1BQU1BLFFBQVFyRixvQkFBb0JxRixTQUFTO29CQUMzQyxPQUFRQTt3QkFDTixLQUFLOzRCQUNILE9BQU87d0JBQ1QsS0FBSzs0QkFDSCxPQUFPO3dCQUNULEtBQUs7NEJBQ0gsT0FBTzt3QkFDVCxLQUFLOzRCQUNILE9BQU87d0JBQ1Q7NEJBQ0UsT0FBTztvQkFDWDtnQkFDRjs7Ozs7Ozs7Ozs7O0FBSVIiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFx0b29sYmFyXFxGbG9hdGluZ1RleHRUb29sYmFyLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3IvdG9vbGJhci9GbG9hdGluZ1RleHRUb29sYmFyLmpzeFxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQ2hlY2sgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7IC8vIG1pc21vIGljb25vIHF1ZSB1c2FiYXNcbmltcG9ydCBGb250U2VsZWN0b3IgZnJvbSBcIkAvY29tcG9uZW50cy9Gb250U2VsZWN0b3JcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbG9hdGluZ1RleHRUb29sYmFyKHtcbiAgLy8g8J+UpyBEYXRvcyB5IGhhbmRsZXJzIHF1ZSBZQSBleGlzdGVuIGVuIENhbnZhc0VkaXRvciAobG9zIHBhc2Ftb3MgcG9yIHByb3BzKVxuICBvYmpldG9TZWxlY2Npb25hZG8sXG4gIHNldE9iamV0b3MsXG4gIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG5cbiAgbW9zdHJhclNlbGVjdG9yRnVlbnRlLFxuICBzZXRNb3N0cmFyU2VsZWN0b3JGdWVudGUsXG5cbiAgbW9zdHJhclNlbGVjdG9yVGFtYW5vLFxuICBzZXRNb3N0cmFyU2VsZWN0b3JUYW1hbm8sXG5cbiAgQUxMX0ZPTlRTLFxuICBmb250TWFuYWdlcixcbiAgdGFtYW5pb3NEaXNwb25pYmxlcyA9IFtdLFxuXG4gIG9uQ2FtYmlhckFsaW5lYWNpb24sXG59KSB7XG4gIGNvbnN0IFtpc01vYmlsZSwgc2V0SXNNb2JpbGVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcbiAgICBjb25zdCBtcSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNzY4cHgpXCIpO1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHNldElzTW9iaWxlKG1xLm1hdGNoZXMpO1xuICAgIHVwZGF0ZSgpO1xuICAgIG1xLmFkZEV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgIHJldHVybiAoKSA9PiBtcS5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IHRvb2xiYXJDb250YWluZXJDbGFzcyA9XG4gICAgXCJmaXhlZCB6LTUwIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkIHNoYWRvdyBwLTIgZmxleCBnYXAtMiBpdGVtcy1jZW50ZXJcIjtcblxuICBjb25zdCB0b29sYmFyQ29udGFpbmVyU3R5bGUgPSB7XG4gICAgdG9wOiBpc01vYmlsZSA/IFwiY2FsYyg1NnB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC10b3AsIDBweCkpXCIgOiBcIjYwcHhcIixcbiAgICBsZWZ0OiBcIjUwJVwiLFxuICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVYKC01MCUpXCIsXG4gICAgd2lkdGg6IGlzTW9iaWxlID8gXCJjYWxjKDEwMHZ3IC0gMTZweClcIiA6IFwiYXV0b1wiLFxuICAgIG1heFdpZHRoOiBpc01vYmlsZSA/IFwiY2FsYygxMDB2dyAtIDE2cHgpXCIgOiBcIjgwMHB4XCIsXG4gICAgb3ZlcmZsb3dYOiBpc01vYmlsZSA/IFwiYXV0b1wiIDogXCJ2aXNpYmxlXCIsXG4gICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6IGlzTW9iaWxlID8gXCJ0b3VjaFwiIDogXCJhdXRvXCIsXG4gICAgd2hpdGVTcGFjZTogaXNNb2JpbGUgPyBcIm5vd3JhcFwiIDogXCJub3JtYWxcIixcbiAgfTtcbiAgLy8g8J+RiSBtYW50ZW5lbW9zIGV4YWN0YW1lbnRlIGxhcyBtaXNtYXMgY29uZGljaW9uZXMvdmFyaWFibGVzIGF1eGlsaWFyZXNcbiAgY29uc3QgZXNUZXh0byA9IG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJ0ZXh0b1wiO1xuICBjb25zdCBlc0Zvcm1hQ29uVGV4dG8gPVxuICAgIG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iamV0b1NlbGVjY2lvbmFkbz8udGV4dG87XG4gIGNvbnN0IGVzUmVjdCA9IG9iamV0b1NlbGVjY2lvbmFkbz8uZmlndXJhID09PSBcInJlY3RcIjtcblxuICBpZiAoIShvYmpldG9TZWxlY2Npb25hZG8/LnRpcG8gPT09IFwidGV4dG9cIiB8fCBvYmpldG9TZWxlY2Npb25hZG8/LnRpcG8gPT09IFwiZm9ybWFcIiB8fCBvYmpldG9TZWxlY2Npb25hZG8/LnRpcG8gPT09IFwiaWNvbm9cIikpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFBhcmEgaWNvbm9zLCBzb2xvIG1vc3RyYXIgc2VsZWN0b3IgZGUgY29sb3JcbiAgaWYgKG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJpY29ub1wiKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXt0b29sYmFyQ29udGFpbmVyQ2xhc3N9XG4gICAgICAgIHN0eWxlPXt7IC4uLnRvb2xiYXJDb250YWluZXJTdHlsZSwgbWF4V2lkdGg6IGlzTW9iaWxlID8gdG9vbGJhckNvbnRhaW5lclN0eWxlLm1heFdpZHRoIDogXCIyMjBweFwiIH19XG4gICAgICA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNjAwXCI+Q29sb3I8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cImNvbG9yXCJcbiAgICAgICAgICAgIHZhbHVlPXtvYmpldG9TZWxlY2Npb25hZG8uY29sb3IgfHwgXCIjMDAwMDAwXCJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbnVldm9Db2xvciA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfjqggW1RPT0xCQVJdIENhbWJpYW5kbyBjb2xvciBkZSDDrWNvbm86XCIsIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50b0lkOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdLFxuICAgICAgICAgICAgICAgIGNvbG9yQW50ZXJpb3I6IG9iamV0b1NlbGVjY2lvbmFkby5jb2xvcixcbiAgICAgICAgICAgICAgICBjb2xvck51ZXZvOiBudWV2b0NvbG9yLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgc2V0T2JqZXRvcygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjSBbVE9PTEJBUl0gT2JqZXRvcyBhbnRlcyBkZWwgY2FtYmlvOlwiLCBwcmV2Lmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBudWV2b3NPYmpldG9zID0gcHJldi5tYXAoKG8pID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG8uaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFtUT09MQkFSXSBBY3R1YWxpemFuZG8gb2JqZXRvOlwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IG8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgdGlwbzogby50aXBvLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQW50ZXJpb3I6IG8uY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3JOdWV2bzogbnVldm9Db2xvclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubywgY29sb3I6IG51ZXZvQ29sb3IgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5SNIFtUT09MQkFSXSBPYmpldG9zIGRlc3B1w6lzIGRlbCBjYW1iaW86XCIsIG51ZXZvc09iamV0b3MubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVldm9zT2JqZXRvcztcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy04IGgtNiByb3VuZGVkIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgIHRpdGxlPVwiQ29sb3IgZGVsIMOtY29ub1wiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e3Rvb2xiYXJDb250YWluZXJDbGFzc31cbiAgICAgIHN0eWxlPXt0b29sYmFyQ29udGFpbmVyU3R5bGV9XG5cbiAgICA+XG4gICAgICB7Lyog8J+OqCBDb2xvciBkZSBmb25kbyAoc29sbyBmb3JtYXMpICovfVxuICAgICAge29iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJmb3JtYVwiICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5Gb25kbzwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwiY29sb3JcIlxuICAgICAgICAgICAgdmFsdWU9e29iamV0b1NlbGVjY2lvbmFkby5jb2xvciB8fCBcIiNmZmZmZmZcIn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT5cbiAgICAgICAgICAgICAgc2V0T2JqZXRvcygocHJldikgPT5cbiAgICAgICAgICAgICAgICBwcmV2Lm1hcCgobykgPT5cbiAgICAgICAgICAgICAgICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoby5pZClcbiAgICAgICAgICAgICAgICAgICAgPyB7IC4uLm8sIGNvbG9yOiBlLnRhcmdldC52YWx1ZSB9XG4gICAgICAgICAgICAgICAgICAgIDogb1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy04IGgtNiByb3VuZGVkXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiDwn5+jIFJhZGlvIGVzcXVpbmFzIChzb2xvIHJlY3TDoW5ndWxvcykgKi99XG4gICAgICB7b2JqZXRvU2VsZWNjaW9uYWRvPy50aXBvID09PSBcImZvcm1hXCIgJiYgZXNSZWN0ICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5Fc3F1aW5hczwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwicmFuZ2VcIlxuICAgICAgICAgICAgbWluPXswfVxuICAgICAgICAgICAgbWF4PXsxMDB9XG4gICAgICAgICAgICB2YWx1ZT17b2JqZXRvU2VsZWNjaW9uYWRvLmNvcm5lclJhZGl1cyB8fCAwfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PlxuICAgICAgICAgICAgICBzZXRPYmpldG9zKChwcmV2KSA9PlxuICAgICAgICAgICAgICAgIHByZXYubWFwKChvKSA9PlxuICAgICAgICAgICAgICAgICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvLmlkKVxuICAgICAgICAgICAgICAgICAgICA/IHsgLi4ubywgY29ybmVyUmFkaXVzOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSkgfVxuICAgICAgICAgICAgICAgICAgICA6IG9cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAge29iamV0b1NlbGVjY2lvbmFkby5jb3JuZXJSYWRpdXMgfHwgMH1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIFNlbGVjdG9yIGRlIGZ1ZW50ZSAqL31cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtgcmVsYXRpdmUgY3Vyc29yLXBvaW50ZXIgcHgtMyBweS0xIHJvdW5kZWQgYm9yZGVyIHRleHQtc20gdHJhbnNpdGlvbi1hbGwgdHJ1bmNhdGUgJHttb3N0cmFyU2VsZWN0b3JGdWVudGUgPyBcImJnLWdyYXktMjAwXCIgOiBcImhvdmVyOmJnLWdyYXktMTAwXCJcbiAgICAgICAgICB9YH1cbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBmb250RmFtaWx5OiBvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCIsXG4gICAgICAgICAgd2lkdGg6IFwiMTgwcHhcIiwgLy8g8J+RiCBhbmNobyBmaWpvIGRlbCBib3TDs24gZGUgZnVlbnRlXG4gICAgICAgICAgdGV4dEFsaWduOiBcImxlZnRcIixcbiAgICAgICAgfX1cbiAgICAgICAgdGl0bGU9e29iamV0b1NlbGVjY2lvbmFkbz8uZm9udEZhbWlseSB8fCBcInNhbnMtc2VyaWZcIn1cbiAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKCFtb3N0cmFyU2VsZWN0b3JGdWVudGUpfVxuICAgICAgPlxuICAgICAgICB7b2JqZXRvU2VsZWNjaW9uYWRvPy5mb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwifVxuICAgICAgPC9kaXY+XG5cblxuICAgICAgey8qIPCfqoQgRm9udFNlbGVjdG9yIHNlcGFyYWRvIChmdWVyYSBkZWwgYm90w7NuKSAqL31cbiAgICAgIDxGb250U2VsZWN0b3JcbiAgICAgICAgY3VycmVudEZvbnQ9e29iamV0b1NlbGVjY2lvbmFkbz8uZm9udEZhbWlseSB8fCBcInNhbnMtc2VyaWZcIn1cbiAgICAgICAgb25Gb250Q2hhbmdlPXthc3luYyAobnVldmFGdWVudGUpID0+IHtcbiAgICAgICAgICBhd2FpdCBmb250TWFuYWdlci5sb2FkRm9udHMoW251ZXZhRnVlbnRlXSk7XG4gICAgICAgICAgc2V0T2JqZXRvcygocHJldikgPT5cbiAgICAgICAgICAgIHByZXYubWFwKChvKSA9PlxuICAgICAgICAgICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG8uaWQpXG4gICAgICAgICAgICAgICAgPyB7IC4uLm8sIGZvbnRGYW1pbHk6IG51ZXZhRnVlbnRlIH1cbiAgICAgICAgICAgICAgICA6IG9cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9fVxuICAgICAgICBpc09wZW49e21vc3RyYXJTZWxlY3RvckZ1ZW50ZX1cbiAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKGZhbHNlKX1cbiAgICAgIC8+XG5cblxuICAgICAgey8qIENvbnRyb2wgZGUgdGFtYcOxbyAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgZmxleCBpdGVtcy1jZW50ZXIgYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcbiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHNldE9iamV0b3MoKHByZXYpID0+XG4gICAgICAgICAgICAgIHByZXYubWFwKChvKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG8uaWQpKSByZXR1cm4gbztcbiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWwgPSBvLmZvbnRTaXplIHx8IDI0O1xuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm8sIGZvbnRTaXplOiBNYXRoLm1heCg2LCBhY3R1YWwgLSAyKSB9O1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAg4oiSXG4gICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgdGV4dC1zbSBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWFsbCAke21vc3RyYXJTZWxlY3RvclRhbWFubyA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgICAgfWB9XG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vKCFtb3N0cmFyU2VsZWN0b3JUYW1hbm8pfVxuICAgICAgICA+XG4gICAgICAgICAge29iamV0b1NlbGVjY2lvbmFkbz8uZm9udFNpemUgfHwgMjR9XG4gICAgICAgICAge21vc3RyYXJTZWxlY3RvclRhbWFubyAmJiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHBvcHVwLWZ1ZW50ZSB6LTUwIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkLTJ4bCBzaGFkb3ctbWQgcC0yIHctMjQgbWF4LWgtWzMwMHB4XSBvdmVyZmxvdy1hdXRvXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgdG9wOiBcIjQwcHhcIiwgbGVmdDogXCItMTBweFwiIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0YW1hbmlvc0Rpc3BvbmlibGVzLm1hcCgodGFtKSA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAga2V5PXt0YW19XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgdGV4dC1zbSBob3ZlcjpiZy1ncmF5LTEwMCByb3VuZGVkIGN1cnNvci1wb2ludGVyIHRleHQtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MoKHByZXYpID0+XG4gICAgICAgICAgICAgICAgICAgICAgcHJldi5tYXAoKG8pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG8uaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8geyAuLi5vLCBmb250U2l6ZTogdGFtIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBzZXRNb3N0cmFyU2VsZWN0b3JUYW1hbm8oZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dGFtfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgc2V0T2JqZXRvcygocHJldikgPT5cbiAgICAgICAgICAgICAgcHJldi5tYXAoKG8pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoby5pZCkpIHJldHVybiBvO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAuLi5vLFxuICAgICAgICAgICAgICAgICAgZm9udFNpemU6IE1hdGgubWluKDEyMCwgKG8uZm9udFNpemUgfHwgMjQpICsgMiksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgICtcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIPCfjqggQ29sb3IgZGUgdGV4dG8gKi99XG4gICAgICA8aW5wdXRcbiAgICAgICAgdHlwZT1cImNvbG9yXCJcbiAgICAgICAgdmFsdWU9e29iamV0b1NlbGVjY2lvbmFkbz8uY29sb3JUZXh0byB8fCBcIiMwMDAwMDBcIn1cbiAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgc2V0T2JqZXRvcygocHJldikgPT5cbiAgICAgICAgICAgIHByZXYubWFwKChvKSA9PlxuICAgICAgICAgICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG8uaWQpXG4gICAgICAgICAgICAgICAgPyB7IC4uLm8sIGNvbG9yVGV4dG86IGUudGFyZ2V0LnZhbHVlIH1cbiAgICAgICAgICAgICAgICA6IG9cbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9fVxuICAgICAgLz5cblxuICAgICAgey8qIEIgLyBJIC8gUyAqL31cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3NOYW1lPXtgcHgtMiBweS0xIHJvdW5kZWQgYm9yZGVyIHRleHQtc20gZm9udC1ib2xkIHRyYW5zaXRpb24gJHtvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRXZWlnaHQgPT09IFwiYm9sZFwiXG4gICAgICAgICAgPyBcImJnLWdyYXktMjAwXCJcbiAgICAgICAgICA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgIH1gfVxuICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgIHNldE9iamV0b3MoKHByZXYpID0+XG4gICAgICAgICAgICBwcmV2Lm1hcCgobykgPT5cbiAgICAgICAgICAgICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvLmlkKVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgLi4ubyxcbiAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IG8uZm9udFdlaWdodCA9PT0gXCJib2xkXCIgPyBcIm5vcm1hbFwiIDogXCJib2xkXCIsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogb1xuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgPlxuICAgICAgICBCXG4gICAgICA8L2J1dHRvbj5cblxuICAgICAgPGJ1dHRvblxuICAgICAgICBjbGFzc05hbWU9e2BweC0yIHB5LTEgcm91bmRlZCBib3JkZXIgdGV4dC1zbSBpdGFsaWMgdHJhbnNpdGlvbiAke29iamV0b1NlbGVjY2lvbmFkbz8uZm9udFN0eWxlID09PSBcIml0YWxpY1wiXG4gICAgICAgICAgPyBcImJnLWdyYXktMjAwXCJcbiAgICAgICAgICA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgIH1gfVxuICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgIHNldE9iamV0b3MoKHByZXYpID0+XG4gICAgICAgICAgICBwcmV2Lm1hcCgobykgPT5cbiAgICAgICAgICAgICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvLmlkKVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgLi4ubyxcbiAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogby5mb250U3R5bGUgPT09IFwiaXRhbGljXCIgPyBcIm5vcm1hbFwiIDogXCJpdGFsaWNcIixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBvXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIElcbiAgICAgIDwvYnV0dG9uPlxuXG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT17YHB4LTIgcHktMSByb3VuZGVkIGJvcmRlciB0ZXh0LXNtIHRyYW5zaXRpb24gJHtvYmpldG9TZWxlY2Npb25hZG8/LnRleHREZWNvcmF0aW9uID09PSBcInVuZGVybGluZVwiXG4gICAgICAgICAgPyBcImJnLWdyYXktMjAwIHVuZGVybGluZVwiXG4gICAgICAgICAgOiBcImhvdmVyOmJnLWdyYXktMTAwXCJcbiAgICAgICAgICB9YH1cbiAgICAgICAgb25DbGljaz17KCkgPT5cbiAgICAgICAgICBzZXRPYmpldG9zKChwcmV2KSA9PlxuICAgICAgICAgICAgcHJldi5tYXAoKG8pID0+XG4gICAgICAgICAgICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoby5pZClcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIC4uLm8sXG4gICAgICAgICAgICAgICAgICB0ZXh0RGVjb3JhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgby50ZXh0RGVjb3JhdGlvbiA9PT0gXCJ1bmRlcmxpbmVcIiA/IFwibm9uZVwiIDogXCJ1bmRlcmxpbmVcIixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBvXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIFNcbiAgICAgIDwvYnV0dG9uPlxuXG4gICAgICB7LyogQWxpbmVhY2nDs24gKi99XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzTmFtZT1cInB4LTIgcHktMSByb3VuZGVkIGJvcmRlciB0ZXh0LXNtIHRyYW5zaXRpb24gaG92ZXI6YmctZ3JheS0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIlxuICAgICAgICBvbkNsaWNrPXtvbkNhbWJpYXJBbGluZWFjaW9ufVxuICAgICAgICB0aXRsZT17YEFsaW5lYWNpw7NuOiAke29iamV0b1NlbGVjY2lvbmFkbz8uYWxpZ24gfHwgXCJpenF1aWVyZGFcIn1gfVxuICAgICAgPlxuICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICBjb25zdCBhbGlnbiA9IG9iamV0b1NlbGVjY2lvbmFkbz8uYWxpZ24gfHwgXCJsZWZ0XCI7XG4gICAgICAgICAgc3dpdGNoIChhbGlnbikge1xuICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIFwi4qyF77iPXCI7XG4gICAgICAgICAgICBjYXNlIFwiY2VudGVyXCI6XG4gICAgICAgICAgICAgIHJldHVybiBcIuKGlO+4j1wiO1xuICAgICAgICAgICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICAgICAgICAgIHJldHVybiBcIuKeoe+4j1wiO1xuICAgICAgICAgICAgY2FzZSBcImp1c3RpZnlcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIFwi4pqMXCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gXCLirIXvuI9cIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKCl9XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsIkNoZWNrIiwiRm9udFNlbGVjdG9yIiwiRmxvYXRpbmdUZXh0VG9vbGJhciIsIm9iamV0b1NlbGVjY2lvbmFkbyIsInNldE9iamV0b3MiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwibW9zdHJhclNlbGVjdG9yRnVlbnRlIiwic2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlIiwibW9zdHJhclNlbGVjdG9yVGFtYW5vIiwic2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vIiwiQUxMX0ZPTlRTIiwiZm9udE1hbmFnZXIiLCJ0YW1hbmlvc0Rpc3BvbmlibGVzIiwib25DYW1iaWFyQWxpbmVhY2lvbiIsImlzTW9iaWxlIiwic2V0SXNNb2JpbGUiLCJtcSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJ1cGRhdGUiLCJtYXRjaGVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0b29sYmFyQ29udGFpbmVyQ2xhc3MiLCJ0b29sYmFyQ29udGFpbmVyU3R5bGUiLCJ0b3AiLCJsZWZ0IiwidHJhbnNmb3JtIiwid2lkdGgiLCJtYXhXaWR0aCIsIm92ZXJmbG93WCIsIldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nIiwid2hpdGVTcGFjZSIsImVzVGV4dG8iLCJ0aXBvIiwiZXNGb3JtYUNvblRleHRvIiwidGV4dG8iLCJlc1JlY3QiLCJmaWd1cmEiLCJkaXYiLCJjbGFzc05hbWUiLCJzdHlsZSIsImxhYmVsIiwiaW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJjb2xvciIsIm9uQ2hhbmdlIiwiZSIsIm51ZXZvQ29sb3IiLCJ0YXJnZXQiLCJjb25zb2xlIiwibG9nIiwiZWxlbWVudG9JZCIsImNvbG9yQW50ZXJpb3IiLCJjb2xvck51ZXZvIiwicHJldiIsImxlbmd0aCIsIm51ZXZvc09iamV0b3MiLCJtYXAiLCJvIiwiaW5jbHVkZXMiLCJpZCIsInRpdGxlIiwibWluIiwibWF4IiwiY29ybmVyUmFkaXVzIiwicGFyc2VJbnQiLCJzcGFuIiwiZm9udEZhbWlseSIsInRleHRBbGlnbiIsIm9uQ2xpY2siLCJjdXJyZW50Rm9udCIsIm9uRm9udENoYW5nZSIsIm51ZXZhRnVlbnRlIiwibG9hZEZvbnRzIiwiaXNPcGVuIiwib25DbG9zZSIsImJ1dHRvbiIsInN0b3BQcm9wYWdhdGlvbiIsImFjdHVhbCIsImZvbnRTaXplIiwiTWF0aCIsInRhbSIsImNvbG9yVGV4dG8iLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwidGV4dERlY29yYXRpb24iLCJhbGlnbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/toolbar/FloatingTextToolbar.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/window/useEditorWindowBridge.js":
/*!***************************************************************!*\
  !*** ./src/components/editor/window/useEditorWindowBridge.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useEditorWindowBridge)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/components/editor/window/useEditorWindowBridge.js\n\n/**\n * Puente con window:\n * - window.canvasEditor\n * - window.__getSeccionInfo\n * - window.__getObjById\n */ function useEditorWindowBridge({ seccionesOrdenadas, secciones, seccionActivaId, objetos, altoCanvas, calcularOffsetY, cambiarColorFondoSeccion, onDeshacer, onRehacer, historialLength, futurosLength, stageRef }) {\n    const mergeCanvasEditor = (patch = {})=>{\n        if (true) return;\n        window.canvasEditor = {\n            ...window.canvasEditor || {},\n            ...patch\n        };\n    };\n    const clearCanvasEditorKeys = (keys = [])=>{\n        if (true) return;\n        if (!window.canvasEditor || typeof window.canvasEditor !== \"object\") return;\n        keys.forEach((key)=>{\n            if (key in window.canvasEditor) delete window.canvasEditor[key];\n        });\n        if (Object.keys(window.canvasEditor).length === 0) {\n            delete window.canvasEditor;\n        }\n    };\n    if (false) {}\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            mergeCanvasEditor({\n                cambiarColorFondoSeccion,\n                seccionActivaId,\n                secciones,\n                deshacer: onDeshacer,\n                rehacer: onRehacer,\n                stageRef: stageRef.current,\n                getHistorial: {\n                    \"useEditorWindowBridge.useEffect\": ()=>({\n                            historial: historialLength,\n                            futuros: futurosLength\n                        })\n                }[\"useEditorWindowBridge.useEffect\"]\n            });\n        }\n    }[\"useEditorWindowBridge.useEffect\"], [\n        cambiarColorFondoSeccion,\n        seccionActivaId,\n        secciones,\n        onDeshacer,\n        onRehacer,\n        historialLength,\n        futurosLength,\n        stageRef\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            window.__getSeccionInfo = ({\n                \"useEditorWindowBridge.useEffect\": (id)=>{\n                    try {\n                        const idx = seccionesOrdenadas.findIndex({\n                            \"useEditorWindowBridge.useEffect.idx\": (s)=>s.id === id\n                        }[\"useEditorWindowBridge.useEffect.idx\"]);\n                        if (idx === -1) return null;\n                        const height = Number(seccionesOrdenadas[idx]?.altura ?? seccionesOrdenadas[idx]?.height ?? 400);\n                        const top = calcularOffsetY(seccionesOrdenadas, idx);\n                        return {\n                            idx,\n                            top,\n                            height\n                        };\n                    } catch  {\n                        return null;\n                    }\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n            return ({\n                \"useEditorWindowBridge.useEffect\": ()=>{\n                    delete window.__getSeccionInfo;\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n        }\n    }[\"useEditorWindowBridge.useEffect\"], [\n        seccionesOrdenadas,\n        calcularOffsetY\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            window.__getObjById = ({\n                \"useEditorWindowBridge.useEffect\": (id)=>(objetos || []).find({\n                        \"useEditorWindowBridge.useEffect\": (o)=>o.id === id\n                    }[\"useEditorWindowBridge.useEffect\"]) || null\n            })[\"useEditorWindowBridge.useEffect\"];\n            return ({\n                \"useEditorWindowBridge.useEffect\": ()=>{\n                    delete window.__getObjById;\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n        }\n    }[\"useEditorWindowBridge.useEffect\"], [\n        objetos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            return ({\n                \"useEditorWindowBridge.useEffect\": ()=>{\n                    clearCanvasEditorKeys([\n                        \"cambiarColorFondoSeccion\",\n                        \"seccionActivaId\",\n                        \"secciones\",\n                        \"deshacer\",\n                        \"rehacer\",\n                        \"stageRef\",\n                        \"getHistorial\"\n                    ]);\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n        }\n    }[\"useEditorWindowBridge.useEffect\"], []);\n    // altoCanvas queda disponible para futuras extensiones del bridge.\n    void altoCanvas;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci93aW5kb3cvdXNlRWRpdG9yV2luZG93QnJpZGdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsd0RBQXdEO0FBQ3RCO0FBRWxDOzs7OztDQUtDLEdBQ2MsU0FBU0Msc0JBQXNCLEVBQzVDQyxrQkFBa0IsRUFDbEJDLFNBQVMsRUFDVEMsZUFBZSxFQUNmQyxPQUFPLEVBQ1BDLFVBQVUsRUFDVkMsZUFBZSxFQUNmQyx3QkFBd0IsRUFDeEJDLFVBQVUsRUFDVkMsU0FBUyxFQUNUQyxlQUFlLEVBQ2ZDLGFBQWEsRUFDYkMsUUFBUSxFQUNUO0lBQ0MsTUFBTUMsb0JBQW9CLENBQUNDLFFBQVEsQ0FBQyxDQUFDO1FBQ25DLElBQUksSUFBNkIsRUFBRTtRQUNuQ0MsT0FBT0MsWUFBWSxHQUFHO1lBQ3BCLEdBQUlELE9BQU9DLFlBQVksSUFBSSxDQUFDLENBQUM7WUFDN0IsR0FBR0YsS0FBSztRQUNWO0lBQ0Y7SUFFQSxNQUFNRyx3QkFBd0IsQ0FBQ0MsT0FBTyxFQUFFO1FBQ3RDLElBQUksSUFBNkIsRUFBRTtRQUNuQyxJQUFJLENBQUNILE9BQU9DLFlBQVksSUFBSSxPQUFPRCxPQUFPQyxZQUFZLEtBQUssVUFBVTtRQUNyRUUsS0FBS0MsT0FBTyxDQUFDLENBQUNDO1lBQ1osSUFBSUEsT0FBT0wsT0FBT0MsWUFBWSxFQUFFLE9BQU9ELE9BQU9DLFlBQVksQ0FBQ0ksSUFBSTtRQUNqRTtRQUNBLElBQUlDLE9BQU9ILElBQUksQ0FBQ0gsT0FBT0MsWUFBWSxFQUFFTSxNQUFNLEtBQUssR0FBRztZQUNqRCxPQUFPUCxPQUFPQyxZQUFZO1FBQzVCO0lBQ0Y7SUFFQSxJQUFJLEtBQTZCLEVBQUUsRUFJbEM7SUFFRGpCLGdEQUFTQTsyQ0FBQztZQUNSYyxrQkFBa0I7Z0JBQ2hCTjtnQkFDQUo7Z0JBQ0FEO2dCQUNBcUIsVUFBVWY7Z0JBQ1ZnQixTQUFTZjtnQkFDVEcsVUFBVUEsU0FBU2EsT0FBTztnQkFDMUJDLFlBQVk7dURBQUUsSUFBTzs0QkFBRUMsV0FBV2pCOzRCQUFpQmtCLFNBQVNqQjt3QkFBYzs7WUFDNUU7UUFDRjswQ0FBRztRQUNESjtRQUNBSjtRQUNBRDtRQUNBTTtRQUNBQztRQUNBQztRQUNBQztRQUNBQztLQUNEO0lBRURiLGdEQUFTQTsyQ0FBQztZQUNSZ0IsT0FBT2MsZ0JBQWdCO21EQUFHLENBQUNDO29CQUN6QixJQUFJO3dCQUNGLE1BQU1DLE1BQU05QixtQkFBbUIrQixTQUFTO21FQUFDLENBQUNDLElBQU1BLEVBQUVILEVBQUUsS0FBS0E7O3dCQUN6RCxJQUFJQyxRQUFRLENBQUMsR0FBRyxPQUFPO3dCQUV2QixNQUFNRyxTQUFTQyxPQUNibEMsa0JBQWtCLENBQUM4QixJQUFJLEVBQUVLLFVBQVVuQyxrQkFBa0IsQ0FBQzhCLElBQUksRUFBRUcsVUFBVTt3QkFHeEUsTUFBTUcsTUFBTS9CLGdCQUFnQkwsb0JBQW9COEI7d0JBQ2hELE9BQU87NEJBQUVBOzRCQUFLTTs0QkFBS0g7d0JBQU87b0JBQzVCLEVBQUUsT0FBTTt3QkFDTixPQUFPO29CQUNUO2dCQUNGOztZQUVBO21EQUFPO29CQUNMLE9BQU9uQixPQUFPYyxnQkFBZ0I7Z0JBQ2hDOztRQUNGOzBDQUFHO1FBQUM1QjtRQUFvQks7S0FBZ0I7SUFFeENQLGdEQUFTQTsyQ0FBQztZQUNSZ0IsT0FBT3VCLFlBQVk7bURBQUcsQ0FBQ1IsS0FBTyxDQUFDMUIsV0FBVyxFQUFFLEVBQUVtQyxJQUFJOzJEQUFDLENBQUNDLElBQU1BLEVBQUVWLEVBQUUsS0FBS0E7NkRBQU87O1lBQzFFO21EQUFPO29CQUNMLE9BQU9mLE9BQU91QixZQUFZO2dCQUM1Qjs7UUFDRjswQ0FBRztRQUFDbEM7S0FBUTtJQUVaTCxnREFBU0E7MkNBQUM7WUFDUjttREFBTztvQkFDTGtCLHNCQUFzQjt3QkFDcEI7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7cUJBQ0Q7Z0JBQ0g7O1FBQ0Y7MENBQUcsRUFBRTtJQUVMLG1FQUFtRTtJQUNuRSxLQUFLWjtBQUNQIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcd2luZG93XFx1c2VFZGl0b3JXaW5kb3dCcmlkZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvZWRpdG9yL3dpbmRvdy91c2VFZGl0b3JXaW5kb3dCcmlkZ2UuanNcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vKipcbiAqIFB1ZW50ZSBjb24gd2luZG93OlxuICogLSB3aW5kb3cuY2FudmFzRWRpdG9yXG4gKiAtIHdpbmRvdy5fX2dldFNlY2Npb25JbmZvXG4gKiAtIHdpbmRvdy5fX2dldE9iakJ5SWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlRWRpdG9yV2luZG93QnJpZGdlKHtcbiAgc2VjY2lvbmVzT3JkZW5hZGFzLFxuICBzZWNjaW9uZXMsXG4gIHNlY2Npb25BY3RpdmFJZCxcbiAgb2JqZXRvcyxcbiAgYWx0b0NhbnZhcyxcbiAgY2FsY3VsYXJPZmZzZXRZLFxuICBjYW1iaWFyQ29sb3JGb25kb1NlY2Npb24sXG4gIG9uRGVzaGFjZXIsXG4gIG9uUmVoYWNlcixcbiAgaGlzdG9yaWFsTGVuZ3RoLFxuICBmdXR1cm9zTGVuZ3RoLFxuICBzdGFnZVJlZixcbn0pIHtcbiAgY29uc3QgbWVyZ2VDYW52YXNFZGl0b3IgPSAocGF0Y2ggPSB7fSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgd2luZG93LmNhbnZhc0VkaXRvciA9IHtcbiAgICAgIC4uLih3aW5kb3cuY2FudmFzRWRpdG9yIHx8IHt9KSxcbiAgICAgIC4uLnBhdGNoLFxuICAgIH07XG4gIH07XG5cbiAgY29uc3QgY2xlYXJDYW52YXNFZGl0b3JLZXlzID0gKGtleXMgPSBbXSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgaWYgKCF3aW5kb3cuY2FudmFzRWRpdG9yIHx8IHR5cGVvZiB3aW5kb3cuY2FudmFzRWRpdG9yICE9PSBcIm9iamVjdFwiKSByZXR1cm47XG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChrZXkgaW4gd2luZG93LmNhbnZhc0VkaXRvcikgZGVsZXRlIHdpbmRvdy5jYW52YXNFZGl0b3Jba2V5XTtcbiAgICB9KTtcbiAgICBpZiAoT2JqZWN0LmtleXMod2luZG93LmNhbnZhc0VkaXRvcikubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWxldGUgd2luZG93LmNhbnZhc0VkaXRvcjtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtZXJnZUNhbnZhc0VkaXRvcih7XG4gICAgICBjYW1iaWFyQ29sb3JGb25kb1NlY2Npb24sXG4gICAgfSk7XG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIG1lcmdlQ2FudmFzRWRpdG9yKHtcbiAgICAgIGNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbixcbiAgICAgIHNlY2Npb25BY3RpdmFJZCxcbiAgICAgIHNlY2Npb25lcyxcbiAgICAgIGRlc2hhY2VyOiBvbkRlc2hhY2VyLFxuICAgICAgcmVoYWNlcjogb25SZWhhY2VyLFxuICAgICAgc3RhZ2VSZWY6IHN0YWdlUmVmLmN1cnJlbnQsXG4gICAgICBnZXRIaXN0b3JpYWw6ICgpID0+ICh7IGhpc3RvcmlhbDogaGlzdG9yaWFsTGVuZ3RoLCBmdXR1cm9zOiBmdXR1cm9zTGVuZ3RoIH0pLFxuICAgIH0pO1xuICB9LCBbXG4gICAgY2FtYmlhckNvbG9yRm9uZG9TZWNjaW9uLFxuICAgIHNlY2Npb25BY3RpdmFJZCxcbiAgICBzZWNjaW9uZXMsXG4gICAgb25EZXNoYWNlcixcbiAgICBvblJlaGFjZXIsXG4gICAgaGlzdG9yaWFsTGVuZ3RoLFxuICAgIGZ1dHVyb3NMZW5ndGgsXG4gICAgc3RhZ2VSZWYsXG4gIF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgd2luZG93Ll9fZ2V0U2VjY2lvbkluZm8gPSAoaWQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgoKHMpID0+IHMuaWQgPT09IGlkKTtcbiAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE51bWJlcihcbiAgICAgICAgICBzZWNjaW9uZXNPcmRlbmFkYXNbaWR4XT8uYWx0dXJhID8/IHNlY2Npb25lc09yZGVuYWRhc1tpZHhdPy5oZWlnaHQgPz8gNDAwXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdG9wID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgaWR4KTtcbiAgICAgICAgcmV0dXJuIHsgaWR4LCB0b3AsIGhlaWdodCB9O1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGVsZXRlIHdpbmRvdy5fX2dldFNlY2Npb25JbmZvO1xuICAgIH07XG4gIH0sIFtzZWNjaW9uZXNPcmRlbmFkYXMsIGNhbGN1bGFyT2Zmc2V0WV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgd2luZG93Ll9fZ2V0T2JqQnlJZCA9IChpZCkgPT4gKG9iamV0b3MgfHwgW10pLmZpbmQoKG8pID0+IG8uaWQgPT09IGlkKSB8fCBudWxsO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkZWxldGUgd2luZG93Ll9fZ2V0T2JqQnlJZDtcbiAgICB9O1xuICB9LCBbb2JqZXRvc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyQ2FudmFzRWRpdG9yS2V5cyhbXG4gICAgICAgIFwiY2FtYmlhckNvbG9yRm9uZG9TZWNjaW9uXCIsXG4gICAgICAgIFwic2VjY2lvbkFjdGl2YUlkXCIsXG4gICAgICAgIFwic2VjY2lvbmVzXCIsXG4gICAgICAgIFwiZGVzaGFjZXJcIixcbiAgICAgICAgXCJyZWhhY2VyXCIsXG4gICAgICAgIFwic3RhZ2VSZWZcIixcbiAgICAgICAgXCJnZXRIaXN0b3JpYWxcIixcbiAgICAgIF0pO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBhbHRvQ2FudmFzIHF1ZWRhIGRpc3BvbmlibGUgcGFyYSBmdXR1cmFzIGV4dGVuc2lvbmVzIGRlbCBicmlkZ2UuXG4gIHZvaWQgYWx0b0NhbnZhcztcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VFZGl0b3JXaW5kb3dCcmlkZ2UiLCJzZWNjaW9uZXNPcmRlbmFkYXMiLCJzZWNjaW9uZXMiLCJzZWNjaW9uQWN0aXZhSWQiLCJvYmpldG9zIiwiYWx0b0NhbnZhcyIsImNhbGN1bGFyT2Zmc2V0WSIsImNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbiIsIm9uRGVzaGFjZXIiLCJvblJlaGFjZXIiLCJoaXN0b3JpYWxMZW5ndGgiLCJmdXR1cm9zTGVuZ3RoIiwic3RhZ2VSZWYiLCJtZXJnZUNhbnZhc0VkaXRvciIsInBhdGNoIiwid2luZG93IiwiY2FudmFzRWRpdG9yIiwiY2xlYXJDYW52YXNFZGl0b3JLZXlzIiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJPYmplY3QiLCJsZW5ndGgiLCJkZXNoYWNlciIsInJlaGFjZXIiLCJjdXJyZW50IiwiZ2V0SGlzdG9yaWFsIiwiaGlzdG9yaWFsIiwiZnV0dXJvcyIsIl9fZ2V0U2VjY2lvbkluZm8iLCJpZCIsImlkeCIsImZpbmRJbmRleCIsInMiLCJoZWlnaHQiLCJOdW1iZXIiLCJhbHR1cmEiLCJ0b3AiLCJfX2dldE9iakJ5SWQiLCJmaW5kIiwibyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/window/useEditorWindowBridge.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/config/fonts.js":
/*!*****************************!*\
  !*** ./src/config/fonts.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALL_FONTS: () => (/* binding */ ALL_FONTS),\n/* harmony export */   GOOGLE_FONTS: () => (/* binding */ GOOGLE_FONTS),\n/* harmony export */   SYSTEM_FONTS: () => (/* binding */ SYSTEM_FONTS)\n/* harmony export */ });\n// src/config/fonts.js\nconst SYSTEM_FONTS = [\n    {\n        nombre: \"Arial\",\n        valor: \"Arial, sans-serif\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Helvetica\",\n        valor: \"Helvetica, sans-serif\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Verdana\",\n        valor: \"Verdana, sans-serif\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Georgia\",\n        valor: \"Georgia, serif\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"Times New Roman\",\n        valor: \"'Times New Roman', serif\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"Courier New\",\n        valor: \"'Courier New', monospace\",\n        categoria: \"Monospace\"\n    }\n];\nconst GOOGLE_FONTS = [\n    // Sans Serif\n    {\n        nombre: \"Poppins\",\n        valor: \"Poppins\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Roboto\",\n        valor: \"Roboto\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Open Sans\",\n        valor: \"'Open Sans'\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Montserrat\",\n        valor: \"Montserrat\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Raleway\",\n        valor: \"Raleway\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Lato\",\n        valor: \"Lato\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Nunito\",\n        valor: \"Nunito\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Ubuntu\",\n        valor: \"Ubuntu\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Quicksand\",\n        valor: \"Quicksand\",\n        categoria: \"Sans Serif\"\n    },\n    {\n        nombre: \"Bebas Neue\",\n        valor: \"'Bebas Neue'\",\n        categoria: \"Sans Serif\"\n    },\n    // Serif\n    {\n        nombre: \"Playfair Display\",\n        valor: \"'Playfair Display'\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"Merriweather\",\n        valor: \"Merriweather\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"Lora\",\n        valor: \"Lora\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"PT Serif\",\n        valor: \"'PT Serif'\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"Crimson Text\",\n        valor: \"'Crimson Text'\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"Libre Bodoni\",\n        valor: \"'Libre Bodoni'\",\n        categoria: \"Serif\"\n    },\n    {\n        nombre: \"Bodoni Moda\",\n        valor: \"'Bodoni Moda'\",\n        categoria: \"Serif\"\n    },\n    // Display\n    {\n        nombre: \"Lobster\",\n        valor: \"Lobster\",\n        categoria: \"Display\"\n    },\n    {\n        nombre: \"Pacifico\",\n        valor: \"Pacifico\",\n        categoria: \"Display\"\n    },\n    {\n        nombre: \"Dancing Script\",\n        valor: \"'Dancing Script'\",\n        categoria: \"Display\"\n    },\n    {\n        nombre: \"Great Vibes\",\n        valor: \"'Great Vibes'\",\n        categoria: \"Display\"\n    },\n    {\n        nombre: \"Abril Fatface\",\n        valor: \"'Abril Fatface'\",\n        categoria: \"Display\"\n    },\n    // Monospace\n    {\n        nombre: \"Roboto Mono\",\n        valor: \"'Roboto Mono'\",\n        categoria: \"Monospace\"\n    },\n    {\n        nombre: \"Source Code Pro\",\n        valor: \"'Source Code Pro'\",\n        categoria: \"Monospace\"\n    },\n    {\n        nombre: \"JetBrains Mono\",\n        valor: \"'JetBrains Mono'\",\n        categoria: \"Monospace\"\n    }\n];\nconst ALL_FONTS = [\n    ...SYSTEM_FONTS,\n    ...GOOGLE_FONTS\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb25maWcvZm9udHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsc0JBQXNCO0FBQ2YsTUFBTUEsZUFBZTtJQUMxQjtRQUFFQyxRQUFRO1FBQVNDLE9BQU87UUFBcUJDLFdBQVc7SUFBYTtJQUN2RTtRQUFFRixRQUFRO1FBQWFDLE9BQU87UUFBeUJDLFdBQVc7SUFBYTtJQUMvRTtRQUFFRixRQUFRO1FBQVdDLE9BQU87UUFBdUJDLFdBQVc7SUFBYTtJQUMzRTtRQUFFRixRQUFRO1FBQVdDLE9BQU87UUFBa0JDLFdBQVc7SUFBUTtJQUNqRTtRQUFFRixRQUFRO1FBQW1CQyxPQUFPO1FBQTRCQyxXQUFXO0lBQVE7SUFDbkY7UUFBRUYsUUFBUTtRQUFlQyxPQUFPO1FBQTRCQyxXQUFXO0lBQVk7Q0FDcEYsQ0FBQztBQUVLLE1BQU1DLGVBQWU7SUFDMUIsYUFBYTtJQUNiO1FBQUVILFFBQVE7UUFBV0MsT0FBTztRQUFXQyxXQUFXO0lBQWE7SUFDL0Q7UUFBRUYsUUFBUTtRQUFVQyxPQUFPO1FBQVVDLFdBQVc7SUFBYTtJQUM3RDtRQUFFRixRQUFRO1FBQWFDLE9BQU87UUFBZUMsV0FBVztJQUFhO0lBQ3JFO1FBQUVGLFFBQVE7UUFBY0MsT0FBTztRQUFjQyxXQUFXO0lBQWE7SUFDckU7UUFBRUYsUUFBUTtRQUFXQyxPQUFPO1FBQVdDLFdBQVc7SUFBYTtJQUMvRDtRQUFFRixRQUFRO1FBQVFDLE9BQU87UUFBUUMsV0FBVztJQUFhO0lBQ3pEO1FBQUVGLFFBQVE7UUFBVUMsT0FBTztRQUFVQyxXQUFXO0lBQWE7SUFDN0Q7UUFBRUYsUUFBUTtRQUFVQyxPQUFPO1FBQVVDLFdBQVc7SUFBYTtJQUM3RDtRQUFFRixRQUFRO1FBQWFDLE9BQU87UUFBYUMsV0FBVztJQUFhO0lBQ25FO1FBQUVGLFFBQVE7UUFBY0MsT0FBTztRQUFnQkMsV0FBVztJQUFhO0lBRXZFLFFBQVE7SUFDUjtRQUFFRixRQUFRO1FBQW9CQyxPQUFPO1FBQXNCQyxXQUFXO0lBQVE7SUFDOUU7UUFBRUYsUUFBUTtRQUFnQkMsT0FBTztRQUFnQkMsV0FBVztJQUFRO0lBQ3BFO1FBQUVGLFFBQVE7UUFBUUMsT0FBTztRQUFRQyxXQUFXO0lBQVE7SUFDcEQ7UUFBRUYsUUFBUTtRQUFZQyxPQUFPO1FBQWNDLFdBQVc7SUFBUTtJQUM5RDtRQUFFRixRQUFRO1FBQWdCQyxPQUFPO1FBQWtCQyxXQUFXO0lBQVE7SUFDdEU7UUFBRUYsUUFBUTtRQUFnQkMsT0FBTztRQUFrQkMsV0FBVztJQUFRO0lBQ3RFO1FBQUVGLFFBQVE7UUFBZUMsT0FBTztRQUFpQkMsV0FBVztJQUFRO0lBSXBFLFVBQVU7SUFDVjtRQUFFRixRQUFRO1FBQVdDLE9BQU87UUFBV0MsV0FBVztJQUFVO0lBQzVEO1FBQUVGLFFBQVE7UUFBWUMsT0FBTztRQUFZQyxXQUFXO0lBQVU7SUFDOUQ7UUFBRUYsUUFBUTtRQUFrQkMsT0FBTztRQUFvQkMsV0FBVztJQUFVO0lBQzVFO1FBQUVGLFFBQVE7UUFBZUMsT0FBTztRQUFpQkMsV0FBVztJQUFVO0lBQ3RFO1FBQUVGLFFBQVE7UUFBaUJDLE9BQU87UUFBbUJDLFdBQVc7SUFBVTtJQUUxRSxZQUFZO0lBQ1o7UUFBRUYsUUFBUTtRQUFlQyxPQUFPO1FBQWlCQyxXQUFXO0lBQVk7SUFDeEU7UUFBRUYsUUFBUTtRQUFtQkMsT0FBTztRQUFxQkMsV0FBVztJQUFZO0lBQ2hGO1FBQUVGLFFBQVE7UUFBa0JDLE9BQU87UUFBb0JDLFdBQVc7SUFBWTtDQUMvRSxDQUFDO0FBRUssTUFBTUUsWUFBWTtPQUFJTDtPQUFpQkk7Q0FBYSxDQUFDIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbmZpZ1xcZm9udHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbmZpZy9mb250cy5qc1xyXG5leHBvcnQgY29uc3QgU1lTVEVNX0ZPTlRTID0gW1xyXG4gIHsgbm9tYnJlOiBcIkFyaWFsXCIsIHZhbG9yOiBcIkFyaWFsLCBzYW5zLXNlcmlmXCIsIGNhdGVnb3JpYTogXCJTYW5zIFNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJIZWx2ZXRpY2FcIiwgdmFsb3I6IFwiSGVsdmV0aWNhLCBzYW5zLXNlcmlmXCIsIGNhdGVnb3JpYTogXCJTYW5zIFNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJWZXJkYW5hXCIsIHZhbG9yOiBcIlZlcmRhbmEsIHNhbnMtc2VyaWZcIiwgY2F0ZWdvcmlhOiBcIlNhbnMgU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIkdlb3JnaWFcIiwgdmFsb3I6IFwiR2VvcmdpYSwgc2VyaWZcIiwgY2F0ZWdvcmlhOiBcIlNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJUaW1lcyBOZXcgUm9tYW5cIiwgdmFsb3I6IFwiJ1RpbWVzIE5ldyBSb21hbicsIHNlcmlmXCIsIGNhdGVnb3JpYTogXCJTZXJpZlwiIH0sXHJcbiAgeyBub21icmU6IFwiQ291cmllciBOZXdcIiwgdmFsb3I6IFwiJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlXCIsIGNhdGVnb3JpYTogXCJNb25vc3BhY2VcIiB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IEdPT0dMRV9GT05UUyA9IFtcclxuICAvLyBTYW5zIFNlcmlmXHJcbiAgeyBub21icmU6IFwiUG9wcGluc1wiLCB2YWxvcjogXCJQb3BwaW5zXCIsIGNhdGVnb3JpYTogXCJTYW5zIFNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJSb2JvdG9cIiwgdmFsb3I6IFwiUm9ib3RvXCIsIGNhdGVnb3JpYTogXCJTYW5zIFNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJPcGVuIFNhbnNcIiwgdmFsb3I6IFwiJ09wZW4gU2FucydcIiwgY2F0ZWdvcmlhOiBcIlNhbnMgU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIk1vbnRzZXJyYXRcIiwgdmFsb3I6IFwiTW9udHNlcnJhdFwiLCBjYXRlZ29yaWE6IFwiU2FucyBTZXJpZlwiIH0sXHJcbiAgeyBub21icmU6IFwiUmFsZXdheVwiLCB2YWxvcjogXCJSYWxld2F5XCIsIGNhdGVnb3JpYTogXCJTYW5zIFNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJMYXRvXCIsIHZhbG9yOiBcIkxhdG9cIiwgY2F0ZWdvcmlhOiBcIlNhbnMgU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIk51bml0b1wiLCB2YWxvcjogXCJOdW5pdG9cIiwgY2F0ZWdvcmlhOiBcIlNhbnMgU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIlVidW50dVwiLCB2YWxvcjogXCJVYnVudHVcIiwgY2F0ZWdvcmlhOiBcIlNhbnMgU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIlF1aWNrc2FuZFwiLCB2YWxvcjogXCJRdWlja3NhbmRcIiwgY2F0ZWdvcmlhOiBcIlNhbnMgU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIkJlYmFzIE5ldWVcIiwgdmFsb3I6IFwiJ0JlYmFzIE5ldWUnXCIsIGNhdGVnb3JpYTogXCJTYW5zIFNlcmlmXCIgfSxcclxuICBcclxuICAvLyBTZXJpZlxyXG4gIHsgbm9tYnJlOiBcIlBsYXlmYWlyIERpc3BsYXlcIiwgdmFsb3I6IFwiJ1BsYXlmYWlyIERpc3BsYXknXCIsIGNhdGVnb3JpYTogXCJTZXJpZlwiIH0sXHJcbiAgeyBub21icmU6IFwiTWVycml3ZWF0aGVyXCIsIHZhbG9yOiBcIk1lcnJpd2VhdGhlclwiLCBjYXRlZ29yaWE6IFwiU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIkxvcmFcIiwgdmFsb3I6IFwiTG9yYVwiLCBjYXRlZ29yaWE6IFwiU2VyaWZcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIlBUIFNlcmlmXCIsIHZhbG9yOiBcIidQVCBTZXJpZidcIiwgY2F0ZWdvcmlhOiBcIlNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJDcmltc29uIFRleHRcIiwgdmFsb3I6IFwiJ0NyaW1zb24gVGV4dCdcIiwgY2F0ZWdvcmlhOiBcIlNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJMaWJyZSBCb2RvbmlcIiwgdmFsb3I6IFwiJ0xpYnJlIEJvZG9uaSdcIiwgY2F0ZWdvcmlhOiBcIlNlcmlmXCIgfSxcclxuICB7IG5vbWJyZTogXCJCb2RvbmkgTW9kYVwiLCB2YWxvcjogXCInQm9kb25pIE1vZGEnXCIsIGNhdGVnb3JpYTogXCJTZXJpZlwiIH0sXHJcblxyXG5cclxuICBcclxuICAvLyBEaXNwbGF5XHJcbiAgeyBub21icmU6IFwiTG9ic3RlclwiLCB2YWxvcjogXCJMb2JzdGVyXCIsIGNhdGVnb3JpYTogXCJEaXNwbGF5XCIgfSxcclxuICB7IG5vbWJyZTogXCJQYWNpZmljb1wiLCB2YWxvcjogXCJQYWNpZmljb1wiLCBjYXRlZ29yaWE6IFwiRGlzcGxheVwiIH0sXHJcbiAgeyBub21icmU6IFwiRGFuY2luZyBTY3JpcHRcIiwgdmFsb3I6IFwiJ0RhbmNpbmcgU2NyaXB0J1wiLCBjYXRlZ29yaWE6IFwiRGlzcGxheVwiIH0sXHJcbiAgeyBub21icmU6IFwiR3JlYXQgVmliZXNcIiwgdmFsb3I6IFwiJ0dyZWF0IFZpYmVzJ1wiLCBjYXRlZ29yaWE6IFwiRGlzcGxheVwiIH0sXHJcbiAgeyBub21icmU6IFwiQWJyaWwgRmF0ZmFjZVwiLCB2YWxvcjogXCInQWJyaWwgRmF0ZmFjZSdcIiwgY2F0ZWdvcmlhOiBcIkRpc3BsYXlcIiB9LFxyXG4gIFxyXG4gIC8vIE1vbm9zcGFjZVxyXG4gIHsgbm9tYnJlOiBcIlJvYm90byBNb25vXCIsIHZhbG9yOiBcIidSb2JvdG8gTW9ubydcIiwgY2F0ZWdvcmlhOiBcIk1vbm9zcGFjZVwiIH0sXHJcbiAgeyBub21icmU6IFwiU291cmNlIENvZGUgUHJvXCIsIHZhbG9yOiBcIidTb3VyY2UgQ29kZSBQcm8nXCIsIGNhdGVnb3JpYTogXCJNb25vc3BhY2VcIiB9LFxyXG4gIHsgbm9tYnJlOiBcIkpldEJyYWlucyBNb25vXCIsIHZhbG9yOiBcIidKZXRCcmFpbnMgTW9ubydcIiwgY2F0ZWdvcmlhOiBcIk1vbm9zcGFjZVwiIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgQUxMX0ZPTlRTID0gWy4uLlNZU1RFTV9GT05UUywgLi4uR09PR0xFX0ZPTlRTXTsiXSwibmFtZXMiOlsiU1lTVEVNX0ZPTlRTIiwibm9tYnJlIiwidmFsb3IiLCJjYXRlZ29yaWEiLCJHT09HTEVfRk9OVFMiLCJBTExfRk9OVFMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/config/fonts.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/drag/dragGrupal.js":
/*!********************************!*\
  !*** ./src/drag/dragGrupal.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   endDragGrupal: () => (/* binding */ endDragGrupal),\n/* harmony export */   previewDragGrupal: () => (/* binding */ previewDragGrupal),\n/* harmony export */   startDragGrupalLider: () => (/* binding */ startDragGrupalLider)\n/* harmony export */ });\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n// C:\\Reservaeldia\\src\\drag\\dragGrupal.js\n\nconst isDragGrupalDebugEnabled = ()=> false && 0;\nconst dlog = (...args)=>{\n    if (!isDragGrupalDebugEnabled()) return;\n    console.log(...args);\n};\nconst dwarn = (...args)=>{\n    if (!isDragGrupalDebugEnabled()) return;\n    console.warn(...args);\n};\nfunction getGrupoElementos() {\n    if (Array.isArray(window._grupoElementos) && window._grupoElementos.length > 0) {\n        return window._grupoElementos;\n    }\n    return window._elementosSeleccionados || [];\n}\nfunction calcularDeltaGrupal(stage) {\n    const leaderId = window._grupoLider;\n    const dragInicial = window._dragInicial || null;\n    const posInicialLider = leaderId && dragInicial ? dragInicial[leaderId] : null;\n    const leaderNode = leaderId ? window._elementRefs?.[leaderId] : null;\n    if (leaderNode && posInicialLider && typeof leaderNode.x === \"function\" && typeof leaderNode.y === \"function\") {\n        return {\n            deltaX: leaderNode.x() - posInicialLider.x,\n            deltaY: leaderNode.y() - posInicialLider.y,\n            source: \"leader-node\"\n        };\n    }\n    const currentPos = stage?.getPointerPosition?.();\n    const startPos = window._dragStartPos;\n    if (currentPos && startPos) {\n        return {\n            deltaX: currentPos.x - startPos.x,\n            deltaY: currentPos.y - startPos.y,\n            source: \"pointer\"\n        };\n    }\n    return null;\n}\nfunction applyPreviewDragGrupal(stage, leaderId, deltaX, deltaY) {\n    if (!stage || !window._dragInicial) return;\n    const last = window._groupPreviewLastDelta;\n    if (last && Math.abs(last.deltaX - deltaX) < 0.01 && Math.abs(last.deltaY - deltaY) < 0.01) {\n        return;\n    }\n    window._groupPreviewLastDelta = {\n        deltaX,\n        deltaY\n    };\n    const seguidores = Array.isArray(window._grupoSeguidores) ? window._grupoSeguidores : getGrupoElementos().filter((id)=>id !== leaderId);\n    seguidores.forEach((elementId)=>{\n        const node = window._elementRefs?.[elementId];\n        const posInicial = window._dragInicial[elementId];\n        if (!node || !posInicial) return;\n        node.position({\n            x: posInicial.x + deltaX,\n            y: posInicial.y + deltaY\n        });\n    });\n    if (!window._groupPreviewRaf) {\n        window._groupPreviewRaf = requestAnimationFrame(()=>{\n            window._groupPreviewRaf = null;\n            stage.batchDraw();\n        });\n    }\n}\nfunction startDragGrupalLider(e, obj) {\n    dlog(\"🚀 [DRAG GRUPAL] Iniciando drag grupal - Objeto:\", {\n        id: obj.id,\n        tipo: obj.tipo,\n        figura: obj.figura\n    });\n    const seleccion = window._elementosSeleccionados || [];\n    dlog(\"📋 [DRAG GRUPAL] Selección actual:\", seleccion);\n    if (seleccion.length > 1 && seleccion.includes(obj.id)) {\n        dlog(\"✅ [DRAG GRUPAL] Condiciones cumplidas para drag grupal\");\n        const stage = e?.target?.getStage?.();\n        const hoverCountBeforeStart = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n        dlog(\"🧪 [HOVER][GROUP-CANDIDATE]\", {\n            leaderCandidate: obj.id,\n            seleccionSize: seleccion.length,\n            hoverCountBeforeStart,\n            windowIsDragging: window._isDragging,\n            grupoLider: window._grupoLider || null\n        });\n        // 🔥 DETECTAR LÍNEAS EN LA SELECCIÓN\n        const elementosDetallados = seleccion.map((id)=>{\n            const objeto = window._objetosActuales?.find((o)=>o.id === id);\n            const node = window._elementRefs?.[id];\n            return {\n                id,\n                objeto: objeto ? {\n                    tipo: objeto.tipo,\n                    figura: objeto.figura\n                } : null,\n                nodeExists: !!node,\n                nodeDraggable: node ? node.draggable() : null\n            };\n        });\n        dlog(\"📊 [DRAG GRUPAL] Análisis detallado de elementos:\", elementosDetallados);\n        const hayLineas = seleccion.some((id)=>{\n            const objeto = window._objetosActuales?.find((o)=>o.id === id);\n            return objeto?.tipo === 'forma' && objeto?.figura === 'line';\n        });\n        dlog(\"📏 [DRAG GRUPAL] ¿Hay líneas en la selección?\", hayLineas);\n        if (hayLineas) {\n            dlog(\"🔧 [DRAG GRUPAL] Preparando líneas para drag grupal...\");\n            seleccion.forEach((id)=>{\n                const objeto = window._objetosActuales?.find((o)=>o.id === id);\n                if (objeto?.tipo === 'forma' && objeto?.figura === 'line') {\n                    const node = window._elementRefs?.[id];\n                    dlog(`📏 [DRAG GRUPAL] Línea ${id}:`, {\n                        nodeExists: !!node,\n                        draggableBefore: node ? node.draggable() : null\n                    });\n                    if (node && node.draggable) {\n                        node.draggable(true);\n                        dlog(`✅ [DRAG GRUPAL] Línea ${id} habilitada para drag`);\n                    }\n                }\n            });\n        }\n        if (!window._grupoLider) {\n            dlog(\"👑 [DRAG GRUPAL] Estableciendo líder:\", obj.id);\n            if (window._groupPreviewRaf) {\n                cancelAnimationFrame(window._groupPreviewRaf);\n                window._groupPreviewRaf = null;\n            }\n            window._groupPreviewLastDelta = null;\n            window._grupoLider = obj.id;\n            window._grupoElementos = [\n                ...seleccion\n            ];\n            window._grupoSeguidores = seleccion.filter((id)=>id !== obj.id);\n            window._dragStartPos = e.target.getStage().getPointerPosition();\n            window._dragInicial = {};\n            window._skipIndividualEnd = new Set(seleccion);\n            window._skipUntil = 0;\n            window._isDragging = true;\n            try {\n                document.body.style.cursor = \"grabbing\";\n            } catch  {}\n            window.dispatchEvent(new Event(\"dragging-start\"));\n            const hoverCountAfterGlobalStart = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n            dlog(\"🧪 [HOVER][GROUP-START-DISPATCH]\", {\n                leader: obj.id,\n                hoverCountAfterGlobalStart,\n                windowIsDragging: window._isDragging,\n                grupoLider: window._grupoLider || null\n            });\n            if (typeof requestAnimationFrame === \"function\") {\n                requestAnimationFrame(()=>{\n                    const hoverCountRaf = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n                    dlog(\"🧪 [HOVER][GROUP-START-DISPATCH][RAF]\", {\n                        leader: obj.id,\n                        hoverCountRaf,\n                        windowIsDragging: window._isDragging,\n                        grupoLider: window._grupoLider || null\n                    });\n                });\n            }\n            // Bloqueo de drag individual en seguidores + snapshot inicial\n            seleccion.forEach((id)=>{\n                const objeto = window._objetosActuales?.find((o)=>o.id === id);\n                const node = window._elementRefs?.[id];\n                dlog(`🔄 [DRAG GRUPAL] Procesando elemento ${id}:`, {\n                    esLider: id === obj.id,\n                    nodeExists: !!node,\n                    objetoType: objeto?.tipo\n                });\n                if (node && id !== obj.id) {\n                    const draggableBefore = node.draggable();\n                    try {\n                        node.draggable(false);\n                        dlog(`🚫 [DRAG GRUPAL] Deshabilitado drag para seguidor ${id} (era: ${draggableBefore})`);\n                    } catch (err) {\n                        console.error(`❌ [DRAG GRUPAL] Error deshabilitando ${id}:`, err);\n                    }\n                }\n                if (objeto) {\n                    const yAbsIni = (()=>{\n                        if (node && node.y) return node.y();\n                        const idx = (window._seccionesOrdenadas || []).findIndex((s)=>s.id === objeto.seccionId);\n                        const offsetY = idx >= 0 ? (window._seccionesOrdenadas || []).slice(0, idx).reduce((sum, s)=>sum + (s.altura || 0), 0) : 0;\n                        return (objeto.y || 0) + offsetY;\n                    })();\n                    window._dragInicial[id] = {\n                        x: node?.x ? node.x() : objeto.x || 0,\n                        y: yAbsIni\n                    };\n                    dlog(`📍 [DRAG GRUPAL] Posición inicial guardada para ${id}:`, window._dragInicial[id]);\n                }\n            });\n            dlog(\"🎯 [DRAG GRUPAL] Drag grupal iniciado correctamente\");\n        } else {\n            dlog(\"⚠️ [DRAG GRUPAL] Ya hay un líder activo:\", window._grupoLider);\n        }\n        return true;\n    }\n    // 🔍 DEBUG CLAVE: si NO se inicia drag grupal, NO deberíamos tocar estado global\n    dlog(\"🧪 [DRAG GRUPAL] NO-START snapshot\", {\n        objId: obj.id,\n        seleccion,\n        grupoLider: window._grupoLider,\n        isDragging: window._isDragging,\n        skipIndividualEndSize: window._skipIndividualEnd ? window._skipIndividualEnd.size : null,\n        skipUntil: window._skipUntil,\n        dragStartPos: window._dragStartPos\n    });\n    dlog(\"❌ [DRAG GRUPAL] Condiciones no cumplidas para drag grupal\");\n    return false;\n}\nfunction previewDragGrupal(e, obj, onChange) {\n    // Solo el líder debe mover visualmente al resto durante el preview.\n    if (!window._grupoLider || obj?.id !== window._grupoLider) return;\n    const stage = e?.target?.getStage?.();\n    if (!stage || !window._dragInicial) return;\n    const deltaData = calcularDeltaGrupal(stage);\n    if (!deltaData) return;\n    const { deltaX, deltaY } = deltaData;\n    applyPreviewDragGrupal(stage, obj.id, deltaX, deltaY);\n}\nfunction endDragGrupal(e, obj, onChange, hasDragged, setIsDragging) {\n    dlog(\"🏁 [DRAG GRUPAL] endDragGrupal llamado:\", {\n        objId: obj.id,\n        esLider: obj.id === window._grupoLider,\n        grupoLider: window._grupoLider,\n        isDragging: window._isDragging,\n        skipIndividualEndSize: window._skipIndividualEnd ? window._skipIndividualEnd.size : null,\n        skipUntil: window._skipUntil\n    });\n    // Solo procesa el líder\n    if (window._grupoLider && obj.id === window._grupoLider) {\n        dlog(\"👑 [DRAG GRUPAL] Procesando como líder...\");\n        const stage = e.target.getStage();\n        const deltaData = window._dragInicial ? calcularDeltaGrupal(stage) : null;\n        if (deltaData && window._dragInicial) {\n            if (window._groupPreviewRaf) {\n                cancelAnimationFrame(window._groupPreviewRaf);\n                window._groupPreviewRaf = null;\n            }\n            window._groupPreviewLastDelta = null;\n            const { deltaX, deltaY, source } = deltaData;\n            dlog(\"📏 [DRAG GRUPAL] Delta calculado:\", {\n                deltaX,\n                deltaY,\n                source\n            });\n            const elementosGrupo = getGrupoElementos();\n            // 🔥 APLICAR EL DELTA A CADA ELEMENTO (incluyendo al líder)\n            elementosGrupo.forEach((elementId)=>{\n                const objeto = window._objetosActuales?.find((o)=>o.id === elementId);\n                if (!objeto) return;\n                const posInicial = window._dragInicial[elementId];\n                if (!posInicial) return;\n                const nuevaX = posInicial.x + deltaX;\n                const nuevaY = posInicial.y + deltaY;\n                dlog(`👥 [DRAG GRUPAL] Elemento ${elementId}:`, {\n                    posInicial,\n                    delta: {\n                        deltaX,\n                        deltaY\n                    },\n                    nuevaPos: {\n                        x: nuevaX,\n                        y: nuevaY\n                    }\n                });\n                const node = window._elementRefs?.[elementId];\n                const { nuevaSeccion } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_0__.determinarNuevaSeccion)(nuevaY, objeto.seccionId, window._seccionesOrdenadas || []);\n                try {\n                    node?.setAttr && node.setAttr(\"_muteNextEnd\", true);\n                } catch  {}\n                const cambios = {\n                    x: nuevaX,\n                    y: nuevaY,\n                    ...nuevaSeccion ? {\n                        seccionId: nuevaSeccion\n                    } : {},\n                    finalizoDrag: true,\n                    causa: \"drag-grupal\"\n                };\n                onChange(elementId, cambios);\n            });\n        } else {\n            dwarn(\"⚠️ [DRAG GRUPAL] No se pudo calcular delta final del grupo\");\n        }\n        // Cleanup\n        window._skipUntil = performance.now() + 400;\n        const seleccion = getGrupoElementos();\n        seleccion.forEach((id)=>{\n            const elNode = window._elementRefs?.[id];\n            if (!elNode) return;\n            setTimeout(()=>{\n                try {\n                    const before = elNode.draggable();\n                    elNode.draggable(true);\n                    const after = elNode.draggable();\n                    dlog(\"🧩 [DRAG GRUPAL] restore draggable\", {\n                        id,\n                        before,\n                        after\n                    });\n                } catch (err) {\n                    dwarn(\"❌ [DRAG GRUPAL] restore draggable error\", {\n                        id,\n                        err\n                    });\n                }\n            }, 24);\n        });\n        window._grupoLider = null;\n        window._grupoElementos = null;\n        window._grupoSeguidores = null;\n        window._dragStartPos = null;\n        window._dragInicial = null;\n        // 🔥 RESETEAR CURSOR AL FINALIZAR DRAG GRUPAL\n        try {\n            document.body.style.cursor = \"default\";\n        } catch  {}\n        setTimeout(()=>{\n            window._skipIndividualEnd = null;\n            window._skipUntil = 0;\n        }, 450);\n        setTimeout(()=>{\n            hasDragged.current = false;\n        }, 40);\n        return true;\n    }\n    // Seguidores\n    if (window._grupoLider) {\n        const seleccion = window._elementosSeleccionados || [];\n        if (seleccion.includes(obj.id)) {\n            setTimeout(()=>{\n                hasDragged.current = false;\n            }, 40);\n            return true;\n        }\n    }\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGRyYWdcXGRyYWdHcnVwYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxkcmFnXFxkcmFnR3J1cGFsLmpzXG5pbXBvcnQgeyBkZXRlcm1pbmFyTnVldmFTZWNjaW9uIH0gZnJvbSBcIkAvdXRpbHMvbGF5b3V0XCI7XG5cbmNvbnN0IGlzRHJhZ0dydXBhbERlYnVnRW5hYmxlZCA9ICgpID0+XG4gIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Ll9fREJHX0RSQUdfR1JVUEFMID09PSB0cnVlO1xuXG5jb25zdCBkbG9nID0gKC4uLmFyZ3MpID0+IHtcbiAgaWYgKCFpc0RyYWdHcnVwYWxEZWJ1Z0VuYWJsZWQoKSkgcmV0dXJuO1xuICBjb25zb2xlLmxvZyguLi5hcmdzKTtcbn07XG5cbmNvbnN0IGR3YXJuID0gKC4uLmFyZ3MpID0+IHtcbiAgaWYgKCFpc0RyYWdHcnVwYWxEZWJ1Z0VuYWJsZWQoKSkgcmV0dXJuO1xuICBjb25zb2xlLndhcm4oLi4uYXJncyk7XG59O1xuXG5mdW5jdGlvbiBnZXRHcnVwb0VsZW1lbnRvcygpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkod2luZG93Ll9ncnVwb0VsZW1lbnRvcykgJiYgd2luZG93Ll9ncnVwb0VsZW1lbnRvcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5fZ3J1cG9FbGVtZW50b3M7XG4gIH1cbiAgcmV0dXJuIHdpbmRvdy5fZWxlbWVudG9zU2VsZWNjaW9uYWRvcyB8fCBbXTtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXJEZWx0YUdydXBhbChzdGFnZSkge1xuICBjb25zdCBsZWFkZXJJZCA9IHdpbmRvdy5fZ3J1cG9MaWRlcjtcbiAgY29uc3QgZHJhZ0luaWNpYWwgPSB3aW5kb3cuX2RyYWdJbmljaWFsIHx8IG51bGw7XG4gIGNvbnN0IHBvc0luaWNpYWxMaWRlciA9IGxlYWRlcklkICYmIGRyYWdJbmljaWFsID8gZHJhZ0luaWNpYWxbbGVhZGVySWRdIDogbnVsbDtcbiAgY29uc3QgbGVhZGVyTm9kZSA9IGxlYWRlcklkID8gd2luZG93Ll9lbGVtZW50UmVmcz8uW2xlYWRlcklkXSA6IG51bGw7XG5cbiAgaWYgKFxuICAgIGxlYWRlck5vZGUgJiZcbiAgICBwb3NJbmljaWFsTGlkZXIgJiZcbiAgICB0eXBlb2YgbGVhZGVyTm9kZS54ID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICB0eXBlb2YgbGVhZGVyTm9kZS55ID09PSBcImZ1bmN0aW9uXCJcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlbHRhWDogbGVhZGVyTm9kZS54KCkgLSBwb3NJbmljaWFsTGlkZXIueCxcbiAgICAgIGRlbHRhWTogbGVhZGVyTm9kZS55KCkgLSBwb3NJbmljaWFsTGlkZXIueSxcbiAgICAgIHNvdXJjZTogXCJsZWFkZXItbm9kZVwiXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRQb3MgPSBzdGFnZT8uZ2V0UG9pbnRlclBvc2l0aW9uPy4oKTtcbiAgY29uc3Qgc3RhcnRQb3MgPSB3aW5kb3cuX2RyYWdTdGFydFBvcztcbiAgaWYgKGN1cnJlbnRQb3MgJiYgc3RhcnRQb3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGVsdGFYOiBjdXJyZW50UG9zLnggLSBzdGFydFBvcy54LFxuICAgICAgZGVsdGFZOiBjdXJyZW50UG9zLnkgLSBzdGFydFBvcy55LFxuICAgICAgc291cmNlOiBcInBvaW50ZXJcIlxuICAgIH07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gYXBwbHlQcmV2aWV3RHJhZ0dydXBhbChzdGFnZSwgbGVhZGVySWQsIGRlbHRhWCwgZGVsdGFZKSB7XG4gIGlmICghc3RhZ2UgfHwgIXdpbmRvdy5fZHJhZ0luaWNpYWwpIHJldHVybjtcblxuICBjb25zdCBsYXN0ID0gd2luZG93Ll9ncm91cFByZXZpZXdMYXN0RGVsdGE7XG4gIGlmIChcbiAgICBsYXN0ICYmXG4gICAgTWF0aC5hYnMobGFzdC5kZWx0YVggLSBkZWx0YVgpIDwgMC4wMSAmJlxuICAgIE1hdGguYWJzKGxhc3QuZGVsdGFZIC0gZGVsdGFZKSA8IDAuMDFcbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5fZ3JvdXBQcmV2aWV3TGFzdERlbHRhID0geyBkZWx0YVgsIGRlbHRhWSB9O1xuXG4gIGNvbnN0IHNlZ3VpZG9yZXMgPSBBcnJheS5pc0FycmF5KHdpbmRvdy5fZ3J1cG9TZWd1aWRvcmVzKVxuICAgID8gd2luZG93Ll9ncnVwb1NlZ3VpZG9yZXNcbiAgICA6IGdldEdydXBvRWxlbWVudG9zKCkuZmlsdGVyKChpZCkgPT4gaWQgIT09IGxlYWRlcklkKTtcblxuICBzZWd1aWRvcmVzLmZvckVhY2goKGVsZW1lbnRJZCkgPT4ge1xuICAgIGNvbnN0IG5vZGUgPSB3aW5kb3cuX2VsZW1lbnRSZWZzPy5bZWxlbWVudElkXTtcbiAgICBjb25zdCBwb3NJbmljaWFsID0gd2luZG93Ll9kcmFnSW5pY2lhbFtlbGVtZW50SWRdO1xuICAgIGlmICghbm9kZSB8fCAhcG9zSW5pY2lhbCkgcmV0dXJuO1xuICAgIG5vZGUucG9zaXRpb24oe1xuICAgICAgeDogcG9zSW5pY2lhbC54ICsgZGVsdGFYLFxuICAgICAgeTogcG9zSW5pY2lhbC55ICsgZGVsdGFZXG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmICghd2luZG93Ll9ncm91cFByZXZpZXdSYWYpIHtcbiAgICB3aW5kb3cuX2dyb3VwUHJldmlld1JhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB3aW5kb3cuX2dyb3VwUHJldmlld1JhZiA9IG51bGw7XG4gICAgICBzdGFnZS5iYXRjaERyYXcoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnREcmFnR3J1cGFsTGlkZXIoZSwgb2JqKSB7XG4gIGRsb2coXCLwn5qAIFtEUkFHIEdSVVBBTF0gSW5pY2lhbmRvIGRyYWcgZ3J1cGFsIC0gT2JqZXRvOlwiLCB7XG4gICAgaWQ6IG9iai5pZCxcbiAgICB0aXBvOiBvYmoudGlwbyxcbiAgICBmaWd1cmE6IG9iai5maWd1cmFcbiAgfSk7XG5cbiAgY29uc3Qgc2VsZWNjaW9uID0gd2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zIHx8IFtdO1xuICBkbG9nKFwi8J+TiyBbRFJBRyBHUlVQQUxdIFNlbGVjY2nDs24gYWN0dWFsOlwiLCBzZWxlY2Npb24pO1xuXG4gIGlmIChzZWxlY2Npb24ubGVuZ3RoID4gMSAmJiBzZWxlY2Npb24uaW5jbHVkZXMob2JqLmlkKSkge1xuICAgIGRsb2coXCLinIUgW0RSQUcgR1JVUEFMXSBDb25kaWNpb25lcyBjdW1wbGlkYXMgcGFyYSBkcmFnIGdydXBhbFwiKTtcbiAgICBjb25zdCBzdGFnZSA9IGU/LnRhcmdldD8uZ2V0U3RhZ2U/LigpO1xuICAgIGNvbnN0IGhvdmVyQ291bnRCZWZvcmVTdGFydCA9IHN0YWdlPy5maW5kPy4oXCIudWktaG92ZXItaW5kaWNhdG9yXCIpPy5sZW5ndGggPz8gMDtcbiAgICBkbG9nKFwi8J+nqiBbSE9WRVJdW0dST1VQLUNBTkRJREFURV1cIiwge1xuICAgICAgbGVhZGVyQ2FuZGlkYXRlOiBvYmouaWQsXG4gICAgICBzZWxlY2Npb25TaXplOiBzZWxlY2Npb24ubGVuZ3RoLFxuICAgICAgaG92ZXJDb3VudEJlZm9yZVN0YXJ0LFxuICAgICAgd2luZG93SXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxuICAgICAgZ3J1cG9MaWRlcjogd2luZG93Ll9ncnVwb0xpZGVyIHx8IG51bGwsXG4gICAgfSk7XG5cbiAgICAvLyDwn5SlIERFVEVDVEFSIEzDjU5FQVMgRU4gTEEgU0VMRUNDScOTTlxuICAgIGNvbnN0IGVsZW1lbnRvc0RldGFsbGFkb3MgPSBzZWxlY2Npb24ubWFwKGlkID0+IHtcbiAgICAgIGNvbnN0IG9iamV0byA9IHdpbmRvdy5fb2JqZXRvc0FjdHVhbGVzPy5maW5kKG8gPT4gby5pZCA9PT0gaWQpO1xuICAgICAgY29uc3Qgbm9kZSA9IHdpbmRvdy5fZWxlbWVudFJlZnM/LltpZF07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZCxcbiAgICAgICAgb2JqZXRvOiBvYmpldG8gPyB7XG4gICAgICAgICAgdGlwbzogb2JqZXRvLnRpcG8sXG4gICAgICAgICAgZmlndXJhOiBvYmpldG8uZmlndXJhXG4gICAgICAgIH0gOiBudWxsLFxuICAgICAgICBub2RlRXhpc3RzOiAhIW5vZGUsXG4gICAgICAgIG5vZGVEcmFnZ2FibGU6IG5vZGUgPyBub2RlLmRyYWdnYWJsZSgpIDogbnVsbFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGRsb2coXCLwn5OKIFtEUkFHIEdSVVBBTF0gQW7DoWxpc2lzIGRldGFsbGFkbyBkZSBlbGVtZW50b3M6XCIsIGVsZW1lbnRvc0RldGFsbGFkb3MpO1xuXG4gICAgY29uc3QgaGF5TGluZWFzID0gc2VsZWNjaW9uLnNvbWUoaWQgPT4ge1xuICAgICAgY29uc3Qgb2JqZXRvID0gd2luZG93Ll9vYmpldG9zQWN0dWFsZXM/LmZpbmQobyA9PiBvLmlkID09PSBpZCk7XG4gICAgICByZXR1cm4gb2JqZXRvPy50aXBvID09PSAnZm9ybWEnICYmIG9iamV0bz8uZmlndXJhID09PSAnbGluZSc7XG4gICAgfSk7XG5cbiAgICBkbG9nKFwi8J+TjyBbRFJBRyBHUlVQQUxdIMK/SGF5IGzDrW5lYXMgZW4gbGEgc2VsZWNjacOzbj9cIiwgaGF5TGluZWFzKTtcblxuICAgIGlmIChoYXlMaW5lYXMpIHtcbiAgICAgIGRsb2coXCLwn5SnIFtEUkFHIEdSVVBBTF0gUHJlcGFyYW5kbyBsw61uZWFzIHBhcmEgZHJhZyBncnVwYWwuLi5cIik7XG4gICAgICBzZWxlY2Npb24uZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIGNvbnN0IG9iamV0byA9IHdpbmRvdy5fb2JqZXRvc0FjdHVhbGVzPy5maW5kKG8gPT4gby5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAob2JqZXRvPy50aXBvID09PSAnZm9ybWEnICYmIG9iamV0bz8uZmlndXJhID09PSAnbGluZScpIHtcbiAgICAgICAgICBjb25zdCBub2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2lkXTtcbiAgICAgICAgICBkbG9nKGDwn5OPIFtEUkFHIEdSVVBBTF0gTMOtbmVhICR7aWR9OmAsIHtcbiAgICAgICAgICAgIG5vZGVFeGlzdHM6ICEhbm9kZSxcbiAgICAgICAgICAgIGRyYWdnYWJsZUJlZm9yZTogbm9kZSA/IG5vZGUuZHJhZ2dhYmxlKCkgOiBudWxsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAobm9kZSAmJiBub2RlLmRyYWdnYWJsZSkge1xuICAgICAgICAgICAgbm9kZS5kcmFnZ2FibGUodHJ1ZSk7XG4gICAgICAgICAgICBkbG9nKGDinIUgW0RSQUcgR1JVUEFMXSBMw61uZWEgJHtpZH0gaGFiaWxpdGFkYSBwYXJhIGRyYWdgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghd2luZG93Ll9ncnVwb0xpZGVyKSB7XG4gICAgICBkbG9nKFwi8J+RkSBbRFJBRyBHUlVQQUxdIEVzdGFibGVjaWVuZG8gbMOtZGVyOlwiLCBvYmouaWQpO1xuICAgICAgaWYgKHdpbmRvdy5fZ3JvdXBQcmV2aWV3UmFmKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHdpbmRvdy5fZ3JvdXBQcmV2aWV3UmFmKTtcbiAgICAgICAgd2luZG93Ll9ncm91cFByZXZpZXdSYWYgPSBudWxsO1xuICAgICAgfVxuICAgICAgd2luZG93Ll9ncm91cFByZXZpZXdMYXN0RGVsdGEgPSBudWxsO1xuICAgICAgd2luZG93Ll9ncnVwb0xpZGVyID0gb2JqLmlkO1xuICAgICAgd2luZG93Ll9ncnVwb0VsZW1lbnRvcyA9IFsuLi5zZWxlY2Npb25dO1xuICAgICAgd2luZG93Ll9ncnVwb1NlZ3VpZG9yZXMgPSBzZWxlY2Npb24uZmlsdGVyKChpZCkgPT4gaWQgIT09IG9iai5pZCk7XG4gICAgICB3aW5kb3cuX2RyYWdTdGFydFBvcyA9IGUudGFyZ2V0LmdldFN0YWdlKCkuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICB3aW5kb3cuX2RyYWdJbmljaWFsID0ge307XG4gICAgICB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kID0gbmV3IFNldChzZWxlY2Npb24pO1xuICAgICAgd2luZG93Ll9za2lwVW50aWwgPSAwO1xuXG4gICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImdyYWJiaW5nXCI7XG4gICAgICB9IGNhdGNoIHsgfVxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiZHJhZ2dpbmctc3RhcnRcIikpO1xuICAgICAgY29uc3QgaG92ZXJDb3VudEFmdGVyR2xvYmFsU3RhcnQgPSBzdGFnZT8uZmluZD8uKFwiLnVpLWhvdmVyLWluZGljYXRvclwiKT8ubGVuZ3RoID8/IDA7XG4gICAgICBkbG9nKFwi8J+nqiBbSE9WRVJdW0dST1VQLVNUQVJULURJU1BBVENIXVwiLCB7XG4gICAgICAgIGxlYWRlcjogb2JqLmlkLFxuICAgICAgICBob3ZlckNvdW50QWZ0ZXJHbG9iYWxTdGFydCxcbiAgICAgICAgd2luZG93SXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxuICAgICAgICBncnVwb0xpZGVyOiB3aW5kb3cuX2dydXBvTGlkZXIgfHwgbnVsbCxcbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGhvdmVyQ291bnRSYWYgPSBzdGFnZT8uZmluZD8uKFwiLnVpLWhvdmVyLWluZGljYXRvclwiKT8ubGVuZ3RoID8/IDA7XG4gICAgICAgICAgZGxvZyhcIvCfp6ogW0hPVkVSXVtHUk9VUC1TVEFSVC1ESVNQQVRDSF1bUkFGXVwiLCB7XG4gICAgICAgICAgICBsZWFkZXI6IG9iai5pZCxcbiAgICAgICAgICAgIGhvdmVyQ291bnRSYWYsXG4gICAgICAgICAgICB3aW5kb3dJc0RyYWdnaW5nOiB3aW5kb3cuX2lzRHJhZ2dpbmcsXG4gICAgICAgICAgICBncnVwb0xpZGVyOiB3aW5kb3cuX2dydXBvTGlkZXIgfHwgbnVsbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEJsb3F1ZW8gZGUgZHJhZyBpbmRpdmlkdWFsIGVuIHNlZ3VpZG9yZXMgKyBzbmFwc2hvdCBpbmljaWFsXG4gICAgICBzZWxlY2Npb24uZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqZXRvID0gd2luZG93Ll9vYmpldG9zQWN0dWFsZXM/LmZpbmQobyA9PiBvLmlkID09PSBpZCk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB3aW5kb3cuX2VsZW1lbnRSZWZzPy5baWRdO1xuXG4gICAgICAgIGRsb2coYPCflIQgW0RSQUcgR1JVUEFMXSBQcm9jZXNhbmRvIGVsZW1lbnRvICR7aWR9OmAsIHtcbiAgICAgICAgICBlc0xpZGVyOiBpZCA9PT0gb2JqLmlkLFxuICAgICAgICAgIG5vZGVFeGlzdHM6ICEhbm9kZSxcbiAgICAgICAgICBvYmpldG9UeXBlOiBvYmpldG8/LnRpcG9cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG5vZGUgJiYgaWQgIT09IG9iai5pZCkge1xuICAgICAgICAgIGNvbnN0IGRyYWdnYWJsZUJlZm9yZSA9IG5vZGUuZHJhZ2dhYmxlKCk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5vZGUuZHJhZ2dhYmxlKGZhbHNlKTtcbiAgICAgICAgICAgIGRsb2coYPCfmqsgW0RSQUcgR1JVUEFMXSBEZXNoYWJpbGl0YWRvIGRyYWcgcGFyYSBzZWd1aWRvciAke2lkfSAoZXJhOiAke2RyYWdnYWJsZUJlZm9yZX0pYCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgW0RSQUcgR1JVUEFMXSBFcnJvciBkZXNoYWJpbGl0YW5kbyAke2lkfTpgLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvYmpldG8pIHtcbiAgICAgICAgICBjb25zdCB5QWJzSW5pID0gKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUueSkgcmV0dXJuIG5vZGUueSgpO1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gKHdpbmRvdy5fc2VjY2lvbmVzT3JkZW5hZGFzIHx8IFtdKS5maW5kSW5kZXgocyA9PiBzLmlkID09PSBvYmpldG8uc2VjY2lvbklkKTtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSBpZHggPj0gMCA/ICh3aW5kb3cuX3NlY2Npb25lc09yZGVuYWRhcyB8fCBbXSlcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIGlkeClcbiAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyAocy5hbHR1cmEgfHwgMCksIDApIDogMDtcbiAgICAgICAgICAgIHJldHVybiAob2JqZXRvLnkgfHwgMCkgKyBvZmZzZXRZO1xuICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICB3aW5kb3cuX2RyYWdJbmljaWFsW2lkXSA9IHtcbiAgICAgICAgICAgIHg6IG5vZGU/LnggPyBub2RlLngoKSA6IChvYmpldG8ueCB8fCAwKSxcbiAgICAgICAgICAgIHk6IHlBYnNJbmlcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZGxvZyhg8J+TjSBbRFJBRyBHUlVQQUxdIFBvc2ljacOzbiBpbmljaWFsIGd1YXJkYWRhIHBhcmEgJHtpZH06YCwgd2luZG93Ll9kcmFnSW5pY2lhbFtpZF0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZGxvZyhcIvCfjq8gW0RSQUcgR1JVUEFMXSBEcmFnIGdydXBhbCBpbmljaWFkbyBjb3JyZWN0YW1lbnRlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkbG9nKFwi4pqg77iPIFtEUkFHIEdSVVBBTF0gWWEgaGF5IHVuIGzDrWRlciBhY3Rpdm86XCIsIHdpbmRvdy5fZ3J1cG9MaWRlcik7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIPCflI0gREVCVUcgQ0xBVkU6IHNpIE5PIHNlIGluaWNpYSBkcmFnIGdydXBhbCwgTk8gZGViZXLDrWFtb3MgdG9jYXIgZXN0YWRvIGdsb2JhbFxuICBkbG9nKFwi8J+nqiBbRFJBRyBHUlVQQUxdIE5PLVNUQVJUIHNuYXBzaG90XCIsIHtcbiAgICBvYmpJZDogb2JqLmlkLFxuICAgIHNlbGVjY2lvbixcbiAgICBncnVwb0xpZGVyOiB3aW5kb3cuX2dydXBvTGlkZXIsXG4gICAgaXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxuICAgIHNraXBJbmRpdmlkdWFsRW5kU2l6ZTogd2luZG93Ll9za2lwSW5kaXZpZHVhbEVuZCA/IHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQuc2l6ZSA6IG51bGwsXG4gICAgc2tpcFVudGlsOiB3aW5kb3cuX3NraXBVbnRpbCxcbiAgICBkcmFnU3RhcnRQb3M6IHdpbmRvdy5fZHJhZ1N0YXJ0UG9zLFxuICB9KTtcblxuICBkbG9nKFwi4p2MIFtEUkFHIEdSVVBBTF0gQ29uZGljaW9uZXMgbm8gY3VtcGxpZGFzIHBhcmEgZHJhZyBncnVwYWxcIik7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2aWV3RHJhZ0dydXBhbChlLCBvYmosIG9uQ2hhbmdlKSB7XG4gIC8vIFNvbG8gZWwgbMOtZGVyIGRlYmUgbW92ZXIgdmlzdWFsbWVudGUgYWwgcmVzdG8gZHVyYW50ZSBlbCBwcmV2aWV3LlxuICBpZiAoIXdpbmRvdy5fZ3J1cG9MaWRlciB8fCBvYmo/LmlkICE9PSB3aW5kb3cuX2dydXBvTGlkZXIpIHJldHVybjtcblxuICBjb25zdCBzdGFnZSA9IGU/LnRhcmdldD8uZ2V0U3RhZ2U/LigpO1xuICBpZiAoIXN0YWdlIHx8ICF3aW5kb3cuX2RyYWdJbmljaWFsKSByZXR1cm47XG5cbiAgY29uc3QgZGVsdGFEYXRhID0gY2FsY3VsYXJEZWx0YUdydXBhbChzdGFnZSk7XG4gIGlmICghZGVsdGFEYXRhKSByZXR1cm47XG5cbiAgY29uc3QgeyBkZWx0YVgsIGRlbHRhWSB9ID0gZGVsdGFEYXRhO1xuICBhcHBseVByZXZpZXdEcmFnR3J1cGFsKHN0YWdlLCBvYmouaWQsIGRlbHRhWCwgZGVsdGFZKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuZERyYWdHcnVwYWwoZSwgb2JqLCBvbkNoYW5nZSwgaGFzRHJhZ2dlZCwgc2V0SXNEcmFnZ2luZykge1xuICBkbG9nKFwi8J+PgSBbRFJBRyBHUlVQQUxdIGVuZERyYWdHcnVwYWwgbGxhbWFkbzpcIiwge1xuICAgIG9iaklkOiBvYmouaWQsXG4gICAgZXNMaWRlcjogb2JqLmlkID09PSB3aW5kb3cuX2dydXBvTGlkZXIsXG4gICAgZ3J1cG9MaWRlcjogd2luZG93Ll9ncnVwb0xpZGVyLFxuICAgIGlzRHJhZ2dpbmc6IHdpbmRvdy5faXNEcmFnZ2luZyxcbiAgICBza2lwSW5kaXZpZHVhbEVuZFNpemU6IHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQgPyB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kLnNpemUgOiBudWxsLFxuICAgIHNraXBVbnRpbDogd2luZG93Ll9za2lwVW50aWwsXG4gIH0pO1xuXG5cbiAgLy8gU29sbyBwcm9jZXNhIGVsIGzDrWRlclxuICBpZiAod2luZG93Ll9ncnVwb0xpZGVyICYmIG9iai5pZCA9PT0gd2luZG93Ll9ncnVwb0xpZGVyKSB7XG4gICAgZGxvZyhcIvCfkZEgW0RSQUcgR1JVUEFMXSBQcm9jZXNhbmRvIGNvbW8gbMOtZGVyLi4uXCIpO1xuXG4gICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgIGNvbnN0IGRlbHRhRGF0YSA9IHdpbmRvdy5fZHJhZ0luaWNpYWwgPyBjYWxjdWxhckRlbHRhR3J1cGFsKHN0YWdlKSA6IG51bGw7XG5cbiAgICBpZiAoZGVsdGFEYXRhICYmIHdpbmRvdy5fZHJhZ0luaWNpYWwpIHtcbiAgICAgIGlmICh3aW5kb3cuX2dyb3VwUHJldmlld1JhZikge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh3aW5kb3cuX2dyb3VwUHJldmlld1JhZik7XG4gICAgICAgIHdpbmRvdy5fZ3JvdXBQcmV2aWV3UmFmID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5fZ3JvdXBQcmV2aWV3TGFzdERlbHRhID0gbnVsbDtcblxuICAgICAgY29uc3QgeyBkZWx0YVgsIGRlbHRhWSwgc291cmNlIH0gPSBkZWx0YURhdGE7XG4gICAgICBkbG9nKFwi8J+TjyBbRFJBRyBHUlVQQUxdIERlbHRhIGNhbGN1bGFkbzpcIiwgeyBkZWx0YVgsIGRlbHRhWSwgc291cmNlIH0pO1xuXG4gICAgICBjb25zdCBlbGVtZW50b3NHcnVwbyA9IGdldEdydXBvRWxlbWVudG9zKCk7XG5cbiAgICAgIC8vIPCflKUgQVBMSUNBUiBFTCBERUxUQSBBIENBREEgRUxFTUVOVE8gKGluY2x1eWVuZG8gYWwgbMOtZGVyKVxuICAgICAgZWxlbWVudG9zR3J1cG8uZm9yRWFjaCgoZWxlbWVudElkKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iamV0byA9IHdpbmRvdy5fb2JqZXRvc0FjdHVhbGVzPy5maW5kKG8gPT4gby5pZCA9PT0gZWxlbWVudElkKTtcbiAgICAgICAgaWYgKCFvYmpldG8pIHJldHVybjtcblxuICAgICAgICBjb25zdCBwb3NJbmljaWFsID0gd2luZG93Ll9kcmFnSW5pY2lhbFtlbGVtZW50SWRdO1xuICAgICAgICBpZiAoIXBvc0luaWNpYWwpIHJldHVybjtcblxuICAgICAgICBjb25zdCBudWV2YVggPSBwb3NJbmljaWFsLnggKyBkZWx0YVg7XG4gICAgICAgIGNvbnN0IG51ZXZhWSA9IHBvc0luaWNpYWwueSArIGRlbHRhWTtcblxuICAgICAgICBkbG9nKGDwn5GlIFtEUkFHIEdSVVBBTF0gRWxlbWVudG8gJHtlbGVtZW50SWR9OmAsIHtcbiAgICAgICAgICBwb3NJbmljaWFsLFxuICAgICAgICAgIGRlbHRhOiB7IGRlbHRhWCwgZGVsdGFZIH0sXG4gICAgICAgICAgbnVldmFQb3M6IHsgeDogbnVldmFYLCB5OiBudWV2YVkgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBub2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2VsZW1lbnRJZF07XG4gICAgICAgIGNvbnN0IHsgbnVldmFTZWNjaW9uIH0gPSBkZXRlcm1pbmFyTnVldmFTZWNjaW9uKFxuICAgICAgICAgIG51ZXZhWSxcbiAgICAgICAgICBvYmpldG8uc2VjY2lvbklkLFxuICAgICAgICAgIHdpbmRvdy5fc2VjY2lvbmVzT3JkZW5hZGFzIHx8IFtdXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBub2RlPy5zZXRBdHRyICYmIG5vZGUuc2V0QXR0cihcIl9tdXRlTmV4dEVuZFwiLCB0cnVlKTtcbiAgICAgICAgfSBjYXRjaCB7IH1cblxuICAgICAgICBjb25zdCBjYW1iaW9zID0ge1xuICAgICAgICAgIHg6IG51ZXZhWCxcbiAgICAgICAgICB5OiBudWV2YVksXG4gICAgICAgICAgLi4uKG51ZXZhU2VjY2lvbiA/IHsgc2VjY2lvbklkOiBudWV2YVNlY2Npb24gfSA6IHt9KSxcbiAgICAgICAgICBmaW5hbGl6b0RyYWc6IHRydWUsXG4gICAgICAgICAgY2F1c2E6IFwiZHJhZy1ncnVwYWxcIlxuICAgICAgICB9O1xuXG4gICAgICAgIG9uQ2hhbmdlKGVsZW1lbnRJZCwgY2FtYmlvcyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHdhcm4oXCLimqDvuI8gW0RSQUcgR1JVUEFMXSBObyBzZSBwdWRvIGNhbGN1bGFyIGRlbHRhIGZpbmFsIGRlbCBncnVwb1wiKTtcbiAgICB9XG5cbiAgICAvLyBDbGVhbnVwXG4gICAgd2luZG93Ll9za2lwVW50aWwgPSBwZXJmb3JtYW5jZS5ub3coKSArIDQwMDtcblxuICAgIGNvbnN0IHNlbGVjY2lvbiA9IGdldEdydXBvRWxlbWVudG9zKCk7XG4gICAgc2VsZWNjaW9uLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICBjb25zdCBlbE5vZGUgPSB3aW5kb3cuX2VsZW1lbnRSZWZzPy5baWRdO1xuICAgICAgaWYgKCFlbE5vZGUpIHJldHVybjtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgYmVmb3JlID0gZWxOb2RlLmRyYWdnYWJsZSgpO1xuICAgICAgICAgIGVsTm9kZS5kcmFnZ2FibGUodHJ1ZSk7XG4gICAgICAgICAgY29uc3QgYWZ0ZXIgPSBlbE5vZGUuZHJhZ2dhYmxlKCk7XG4gICAgICAgICAgZGxvZyhcIvCfp6kgW0RSQUcgR1JVUEFMXSByZXN0b3JlIGRyYWdnYWJsZVwiLCB7IGlkLCBiZWZvcmUsIGFmdGVyIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBkd2FybihcIuKdjCBbRFJBRyBHUlVQQUxdIHJlc3RvcmUgZHJhZ2dhYmxlIGVycm9yXCIsIHsgaWQsIGVyciB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgMjQpO1xuICAgIH0pO1xuXG5cbiAgICB3aW5kb3cuX2dydXBvTGlkZXIgPSBudWxsO1xuICAgIHdpbmRvdy5fZ3J1cG9FbGVtZW50b3MgPSBudWxsO1xuICAgIHdpbmRvdy5fZ3J1cG9TZWd1aWRvcmVzID0gbnVsbDtcbiAgICB3aW5kb3cuX2RyYWdTdGFydFBvcyA9IG51bGw7XG4gICAgd2luZG93Ll9kcmFnSW5pY2lhbCA9IG51bGw7XG5cbiAgICAvLyDwn5SlIFJFU0VURUFSIENVUlNPUiBBTCBGSU5BTElaQVIgRFJBRyBHUlVQQUxcbiAgICB0cnkge1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICB9IGNhdGNoIHsgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kID0gbnVsbDtcbiAgICAgIHdpbmRvdy5fc2tpcFVudGlsID0gMDtcbiAgICB9LCA0NTApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGhhc0RyYWdnZWQuY3VycmVudCA9IGZhbHNlOyB9LCA0MCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBTZWd1aWRvcmVzXG4gIGlmICh3aW5kb3cuX2dydXBvTGlkZXIpIHtcbiAgICBjb25zdCBzZWxlY2Npb24gPSB3aW5kb3cuX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MgfHwgW107XG4gICAgaWYgKHNlbGVjY2lvbi5pbmNsdWRlcyhvYmouaWQpKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHsgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7IH0sIDQwKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG5cblxuIl0sIm5hbWVzIjpbImRldGVybWluYXJOdWV2YVNlY2Npb24iLCJpc0RyYWdHcnVwYWxEZWJ1Z0VuYWJsZWQiLCJ3aW5kb3ciLCJfX0RCR19EUkFHX0dSVVBBTCIsImRsb2ciLCJhcmdzIiwiY29uc29sZSIsImxvZyIsImR3YXJuIiwid2FybiIsImdldEdydXBvRWxlbWVudG9zIiwiQXJyYXkiLCJpc0FycmF5IiwiX2dydXBvRWxlbWVudG9zIiwibGVuZ3RoIiwiX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJjYWxjdWxhckRlbHRhR3J1cGFsIiwic3RhZ2UiLCJsZWFkZXJJZCIsIl9ncnVwb0xpZGVyIiwiZHJhZ0luaWNpYWwiLCJfZHJhZ0luaWNpYWwiLCJwb3NJbmljaWFsTGlkZXIiLCJsZWFkZXJOb2RlIiwiX2VsZW1lbnRSZWZzIiwieCIsInkiLCJkZWx0YVgiLCJkZWx0YVkiLCJzb3VyY2UiLCJjdXJyZW50UG9zIiwiZ2V0UG9pbnRlclBvc2l0aW9uIiwic3RhcnRQb3MiLCJfZHJhZ1N0YXJ0UG9zIiwiYXBwbHlQcmV2aWV3RHJhZ0dydXBhbCIsImxhc3QiLCJfZ3JvdXBQcmV2aWV3TGFzdERlbHRhIiwiTWF0aCIsImFicyIsInNlZ3VpZG9yZXMiLCJfZ3J1cG9TZWd1aWRvcmVzIiwiZmlsdGVyIiwiaWQiLCJmb3JFYWNoIiwiZWxlbWVudElkIiwibm9kZSIsInBvc0luaWNpYWwiLCJwb3NpdGlvbiIsIl9ncm91cFByZXZpZXdSYWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiYXRjaERyYXciLCJzdGFydERyYWdHcnVwYWxMaWRlciIsImUiLCJvYmoiLCJ0aXBvIiwiZmlndXJhIiwic2VsZWNjaW9uIiwiaW5jbHVkZXMiLCJ0YXJnZXQiLCJnZXRTdGFnZSIsImhvdmVyQ291bnRCZWZvcmVTdGFydCIsImZpbmQiLCJsZWFkZXJDYW5kaWRhdGUiLCJzZWxlY2Npb25TaXplIiwid2luZG93SXNEcmFnZ2luZyIsIl9pc0RyYWdnaW5nIiwiZ3J1cG9MaWRlciIsImVsZW1lbnRvc0RldGFsbGFkb3MiLCJtYXAiLCJvYmpldG8iLCJfb2JqZXRvc0FjdHVhbGVzIiwibyIsIm5vZGVFeGlzdHMiLCJub2RlRHJhZ2dhYmxlIiwiZHJhZ2dhYmxlIiwiaGF5TGluZWFzIiwic29tZSIsImRyYWdnYWJsZUJlZm9yZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiX3NraXBJbmRpdmlkdWFsRW5kIiwiU2V0IiwiX3NraXBVbnRpbCIsImRvY3VtZW50IiwiYm9keSIsInN0eWxlIiwiY3Vyc29yIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiaG92ZXJDb3VudEFmdGVyR2xvYmFsU3RhcnQiLCJsZWFkZXIiLCJob3ZlckNvdW50UmFmIiwiZXNMaWRlciIsIm9iamV0b1R5cGUiLCJlcnIiLCJlcnJvciIsInlBYnNJbmkiLCJpZHgiLCJfc2VjY2lvbmVzT3JkZW5hZGFzIiwiZmluZEluZGV4IiwicyIsInNlY2Npb25JZCIsIm9mZnNldFkiLCJzbGljZSIsInJlZHVjZSIsInN1bSIsImFsdHVyYSIsIm9iaklkIiwiaXNEcmFnZ2luZyIsInNraXBJbmRpdmlkdWFsRW5kU2l6ZSIsInNpemUiLCJza2lwVW50aWwiLCJkcmFnU3RhcnRQb3MiLCJwcmV2aWV3RHJhZ0dydXBhbCIsIm9uQ2hhbmdlIiwiZGVsdGFEYXRhIiwiZW5kRHJhZ0dydXBhbCIsImhhc0RyYWdnZWQiLCJzZXRJc0RyYWdnaW5nIiwiZWxlbWVudG9zR3J1cG8iLCJudWV2YVgiLCJudWV2YVkiLCJkZWx0YSIsIm51ZXZhUG9zIiwibnVldmFTZWNjaW9uIiwic2V0QXR0ciIsImNhbWJpb3MiLCJmaW5hbGl6b0RyYWciLCJjYXVzYSIsInBlcmZvcm1hbmNlIiwibm93IiwiZWxOb2RlIiwic2V0VGltZW91dCIsImJlZm9yZSIsImFmdGVyIiwiY3VycmVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/drag/dragGrupal.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/drag/dragIndividual.js":
/*!************************************!*\
  !*** ./src/drag/dragIndividual.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   endDragIndividual: () => (/* binding */ endDragIndividual),\n/* harmony export */   previewDragIndividual: () => (/* binding */ previewDragIndividual),\n/* harmony export */   startDragIndividual: () => (/* binding */ startDragIndividual)\n/* harmony export */ });\n// C:\\Reservaeldia\\src\\drag\\dragIndividual.js\nif (!window.__DEBUG_DRAG) window.__DEBUG_DRAG = false; // poné true en consola cuando quieras\nfunction startDragIndividual(e, dragStartPos) {\n    dragStartPos.current = e.target.getStage().getPointerPosition();\n    if (window.__DEBUG_DRAG) {\n        const t = e.target;\n        console.log('[DIAG] startDrag', {\n            class: t?.getClassName?.(),\n            id: t?.id?.(),\n            x: t?.x?.(),\n            y: t?.y?.()\n        });\n    }\n    try {\n        document.body.style.cursor = \"grabbing\";\n    } catch  {}\n}\nfunction previewDragIndividual(e, obj, onDragMovePersonalizado) {\n    const node = e.currentTarget || e.target; // ✅ priorizar contenedor\n    if (node?.position) {\n        const nuevaPos = node.position();\n        if (window.__DEBUG_DRAG) {\n            console.log('[DIAG] dragMove', {\n                id: obj?.id,\n                class: node.getClassName?.(),\n                local: {\n                    x: nuevaPos.x,\n                    y: nuevaPos.y\n                },\n                abs: node.absolutePosition?.()\n            });\n        }\n        if (onDragMovePersonalizado) onDragMovePersonalizado(nuevaPos, obj.id);\n    }\n}\nfunction endDragIndividual(obj, node, onChange, onDragEndPersonalizado, hasDragged) {\n    try {\n        document.body.style.cursor = \"default\";\n    } catch  {}\n    if (node?.getAttr && node.getAttr(\"_muteNextEnd\")) {\n        try {\n            node.setAttr(\"_muteNextEnd\", false);\n        } catch  {}\n        if (onDragEndPersonalizado) onDragEndPersonalizado();\n        setTimeout(()=>{\n            hasDragged.current = false;\n        }, 30);\n        return;\n    }\n    const ahora = typeof performance !== \"undefined\" && performance.now ? performance.now() : Date.now();\n    if (window._skipIndividualEnd && window._skipIndividualEnd.has(obj.id) && (!window._skipUntil || ahora <= window._skipUntil)) {\n        try {\n            window._skipIndividualEnd.delete(obj.id);\n        } catch  {}\n        if (onDragEndPersonalizado) onDragEndPersonalizado();\n        setTimeout(()=>{\n            hasDragged.current = false;\n        }, 30);\n        return;\n    }\n    if (window.__DEBUG_DRAG) {\n        console.log('[DIAG] endDrag -> onChange', {\n            id: obj?.id,\n            class: node?.getClassName?.(),\n            finalPosLocal: {\n                x: node?.x?.(),\n                y: node?.y?.()\n            },\n            finalAbs: node?.absolutePosition?.()\n        });\n    }\n    onChange(obj.id, {\n        x: node.x(),\n        y: node.y(),\n        finalizoDrag: true,\n        causa: \"drag-individual\"\n    });\n    if (onDragEndPersonalizado) onDragEndPersonalizado();\n    setTimeout(()=>{\n        hasDragged.current = false;\n    }, 30);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9kcmFnL2RyYWdJbmRpdmlkdWFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDZDQUE2QztBQUc3QyxJQUFJLENBQUNBLE9BQU9DLFlBQVksRUFBRUQsT0FBT0MsWUFBWSxHQUFHLE9BQU8sc0NBQXNDO0FBR3RGLFNBQVNDLG9CQUFvQkMsQ0FBQyxFQUFFQyxZQUFZO0lBQ2pEQSxhQUFhQyxPQUFPLEdBQUdGLEVBQUVHLE1BQU0sQ0FBQ0MsUUFBUSxHQUFHQyxrQkFBa0I7SUFDN0QsSUFBSVIsT0FBT0MsWUFBWSxFQUFFO1FBQ3ZCLE1BQU1RLElBQUlOLEVBQUVHLE1BQU07UUFDbEJJLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0I7WUFDOUJDLE9BQU9ILEdBQUdJO1lBQ1ZDLElBQUlMLEdBQUdLO1lBQ1BDLEdBQUdOLEdBQUdNO1lBQ05DLEdBQUdQLEdBQUdPO1FBQ1I7SUFDRjtJQUNBLElBQUk7UUFBRUMsU0FBU0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE1BQU0sR0FBRztJQUFZLEVBQUUsT0FBTSxDQUFDO0FBQzFEO0FBRU8sU0FBU0Msc0JBQXNCbEIsQ0FBQyxFQUFFbUIsR0FBRyxFQUFFQyx1QkFBdUI7SUFDbkUsTUFBTUMsT0FBT3JCLEVBQUVzQixhQUFhLElBQUl0QixFQUFFRyxNQUFNLEVBQUUseUJBQXlCO0lBQ25FLElBQUlrQixNQUFNRSxVQUFVO1FBQ2xCLE1BQU1DLFdBQVdILEtBQUtFLFFBQVE7UUFDOUIsSUFBSTFCLE9BQU9DLFlBQVksRUFBRTtZQUN2QlMsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQjtnQkFDN0JHLElBQUlRLEtBQUtSO2dCQUFJRixPQUFPWSxLQUFLWCxZQUFZO2dCQUNyQ2UsT0FBTztvQkFBRWIsR0FBR1ksU0FBU1osQ0FBQztvQkFBRUMsR0FBR1csU0FBU1gsQ0FBQztnQkFBQztnQkFDdENhLEtBQUtMLEtBQUtNLGdCQUFnQjtZQUM1QjtRQUNGO1FBQ0EsSUFBSVAseUJBQXlCQSx3QkFBd0JJLFVBQVVMLElBQUlSLEVBQUU7SUFDdkU7QUFDRjtBQUVPLFNBQVNpQixrQkFBa0JULEdBQUcsRUFBRUUsSUFBSSxFQUFFUSxRQUFRLEVBQUVDLHNCQUFzQixFQUFFQyxVQUFVO0lBQ3ZGLElBQUk7UUFBRWpCLFNBQVNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxNQUFNLEdBQUc7SUFBVyxFQUFFLE9BQU0sQ0FBQztJQUN2RCxJQUFJSSxNQUFNVyxXQUFXWCxLQUFLVyxPQUFPLENBQUMsaUJBQWlCO1FBQ2pELElBQUk7WUFBRVgsS0FBS1ksT0FBTyxDQUFDLGdCQUFnQjtRQUFRLEVBQUUsT0FBTSxDQUFDO1FBQ3BELElBQUlILHdCQUF3QkE7UUFDNUJJLFdBQVc7WUFBUUgsV0FBVzdCLE9BQU8sR0FBRztRQUFPLEdBQUc7UUFDbEQ7SUFDRjtJQUNBLE1BQU1pQyxRQUFRLE9BQU9DLGdCQUFnQixlQUFlQSxZQUFZQyxHQUFHLEdBQUdELFlBQVlDLEdBQUcsS0FBS0MsS0FBS0QsR0FBRztJQUNsRyxJQUNFeEMsT0FBTzBDLGtCQUFrQixJQUN6QjFDLE9BQU8wQyxrQkFBa0IsQ0FBQ0MsR0FBRyxDQUFDckIsSUFBSVIsRUFBRSxLQUNuQyxFQUFDZCxPQUFPNEMsVUFBVSxJQUFJTixTQUFTdEMsT0FBTzRDLFVBQVUsR0FDakQ7UUFDQSxJQUFJO1lBQUU1QyxPQUFPMEMsa0JBQWtCLENBQUNHLE1BQU0sQ0FBQ3ZCLElBQUlSLEVBQUU7UUFBRyxFQUFFLE9BQU0sQ0FBQztRQUN6RCxJQUFJbUIsd0JBQXdCQTtRQUM1QkksV0FBVztZQUFRSCxXQUFXN0IsT0FBTyxHQUFHO1FBQU8sR0FBRztRQUNsRDtJQUNGO0lBRUEsSUFBSUwsT0FBT0MsWUFBWSxFQUFFO1FBQ3ZCUyxRQUFRQyxHQUFHLENBQUMsOEJBQThCO1lBQ3hDRyxJQUFJUSxLQUFLUjtZQUFJRixPQUFPWSxNQUFNWDtZQUMxQmlDLGVBQWU7Z0JBQUUvQixHQUFHUyxNQUFNVDtnQkFBT0MsR0FBR1EsTUFBTVI7WUFBTTtZQUNoRCtCLFVBQVV2QixNQUFNTTtRQUNsQjtJQUNGO0lBQ0FFLFNBQVNWLElBQUlSLEVBQUUsRUFBRTtRQUNmQyxHQUFHUyxLQUFLVCxDQUFDO1FBQ1RDLEdBQUdRLEtBQUtSLENBQUM7UUFDVGdDLGNBQWM7UUFDZEMsT0FBTztJQUNUO0lBQ0EsSUFBSWhCLHdCQUF3QkE7SUFDNUJJLFdBQVc7UUFBUUgsV0FBVzdCLE9BQU8sR0FBRztJQUFPLEdBQUc7QUFDcEQiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcZHJhZ1xcZHJhZ0luZGl2aWR1YWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxkcmFnXFxkcmFnSW5kaXZpZHVhbC5qc1xyXG5cclxuXHJcbmlmICghd2luZG93Ll9fREVCVUdfRFJBRykgd2luZG93Ll9fREVCVUdfRFJBRyA9IGZhbHNlOyAvLyBwb27DqSB0cnVlIGVuIGNvbnNvbGEgY3VhbmRvIHF1aWVyYXNcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RhcnREcmFnSW5kaXZpZHVhbChlLCBkcmFnU3RhcnRQb3MpIHtcclxuICBkcmFnU3RhcnRQb3MuY3VycmVudCA9IGUudGFyZ2V0LmdldFN0YWdlKCkuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XHJcbiAgaWYgKHdpbmRvdy5fX0RFQlVHX0RSQUcpIHtcclxuICAgIGNvbnN0IHQgPSBlLnRhcmdldDtcclxuICAgIGNvbnNvbGUubG9nKCdbRElBR10gc3RhcnREcmFnJywge1xyXG4gICAgICBjbGFzczogdD8uZ2V0Q2xhc3NOYW1lPy4oKSxcclxuICAgICAgaWQ6IHQ/LmlkPy4oKSxcclxuICAgICAgeDogdD8ueD8uKCksXHJcbiAgICAgIHk6IHQ/Lnk/LigpXHJcbiAgICB9KTtcclxuICB9XHJcbiAgdHJ5IHsgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImdyYWJiaW5nXCI7IH0gY2F0Y2gge31cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXZpZXdEcmFnSW5kaXZpZHVhbChlLCBvYmosIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvKSB7XHJcbiAgY29uc3Qgbm9kZSA9IGUuY3VycmVudFRhcmdldCB8fCBlLnRhcmdldDsgLy8g4pyFIHByaW9yaXphciBjb250ZW5lZG9yXHJcbiAgaWYgKG5vZGU/LnBvc2l0aW9uKSB7XHJcbiAgICBjb25zdCBudWV2YVBvcyA9IG5vZGUucG9zaXRpb24oKTtcclxuICAgIGlmICh3aW5kb3cuX19ERUJVR19EUkFHKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbRElBR10gZHJhZ01vdmUnLCB7XHJcbiAgICAgICAgaWQ6IG9iaj8uaWQsIGNsYXNzOiBub2RlLmdldENsYXNzTmFtZT8uKCksXHJcbiAgICAgICAgbG9jYWw6IHsgeDogbnVldmFQb3MueCwgeTogbnVldmFQb3MueSB9LFxyXG4gICAgICAgIGFiczogbm9kZS5hYnNvbHV0ZVBvc2l0aW9uPy4oKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChvbkRyYWdNb3ZlUGVyc29uYWxpemFkbykgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8obnVldmFQb3MsIG9iai5pZCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5kRHJhZ0luZGl2aWR1YWwob2JqLCBub2RlLCBvbkNoYW5nZSwgb25EcmFnRW5kUGVyc29uYWxpemFkbywgaGFzRHJhZ2dlZCkge1xyXG4gIHRyeSB7IGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7IH0gY2F0Y2gge31cclxuICBpZiAobm9kZT8uZ2V0QXR0ciAmJiBub2RlLmdldEF0dHIoXCJfbXV0ZU5leHRFbmRcIikpIHtcclxuICAgIHRyeSB7IG5vZGUuc2V0QXR0cihcIl9tdXRlTmV4dEVuZFwiLCBmYWxzZSk7IH0gY2F0Y2gge31cclxuICAgIGlmIChvbkRyYWdFbmRQZXJzb25hbGl6YWRvKSBvbkRyYWdFbmRQZXJzb25hbGl6YWRvKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7IH0sIDMwKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgYWhvcmEgPSB0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2Uubm93ID8gcGVyZm9ybWFuY2Uubm93KCkgOiBEYXRlLm5vdygpO1xyXG4gIGlmIChcclxuICAgIHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQgJiZcclxuICAgIHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQuaGFzKG9iai5pZCkgJiZcclxuICAgICghd2luZG93Ll9za2lwVW50aWwgfHwgYWhvcmEgPD0gd2luZG93Ll9za2lwVW50aWwpXHJcbiAgKSB7XHJcbiAgICB0cnkgeyB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kLmRlbGV0ZShvYmouaWQpOyB9IGNhdGNoIHt9XHJcbiAgICBpZiAob25EcmFnRW5kUGVyc29uYWxpemFkbykgb25EcmFnRW5kUGVyc29uYWxpemFkbygpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGhhc0RyYWdnZWQuY3VycmVudCA9IGZhbHNlOyB9LCAzMCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAod2luZG93Ll9fREVCVUdfRFJBRykge1xyXG4gICAgY29uc29sZS5sb2coJ1tESUFHXSBlbmREcmFnIC0+IG9uQ2hhbmdlJywge1xyXG4gICAgICBpZDogb2JqPy5pZCwgY2xhc3M6IG5vZGU/LmdldENsYXNzTmFtZT8uKCksXHJcbiAgICAgIGZpbmFsUG9zTG9jYWw6IHsgeDogbm9kZT8ueD8uKCksIHk6IG5vZGU/Lnk/LigpIH0sXHJcbiAgICAgIGZpbmFsQWJzOiBub2RlPy5hYnNvbHV0ZVBvc2l0aW9uPy4oKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIG9uQ2hhbmdlKG9iai5pZCwge1xyXG4gICAgeDogbm9kZS54KCksXHJcbiAgICB5OiBub2RlLnkoKSxcclxuICAgIGZpbmFsaXpvRHJhZzogdHJ1ZSxcclxuICAgIGNhdXNhOiBcImRyYWctaW5kaXZpZHVhbFwiXHJcbiAgfSk7XHJcbiAgaWYgKG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8pIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8oKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHsgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7IH0sIDMwKTtcclxufSJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJfX0RFQlVHX0RSQUciLCJzdGFydERyYWdJbmRpdmlkdWFsIiwiZSIsImRyYWdTdGFydFBvcyIsImN1cnJlbnQiLCJ0YXJnZXQiLCJnZXRTdGFnZSIsImdldFBvaW50ZXJQb3NpdGlvbiIsInQiLCJjb25zb2xlIiwibG9nIiwiY2xhc3MiLCJnZXRDbGFzc05hbWUiLCJpZCIsIngiLCJ5IiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJjdXJzb3IiLCJwcmV2aWV3RHJhZ0luZGl2aWR1YWwiLCJvYmoiLCJvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyIsIm5vZGUiLCJjdXJyZW50VGFyZ2V0IiwicG9zaXRpb24iLCJudWV2YVBvcyIsImxvY2FsIiwiYWJzIiwiYWJzb2x1dGVQb3NpdGlvbiIsImVuZERyYWdJbmRpdmlkdWFsIiwib25DaGFuZ2UiLCJvbkRyYWdFbmRQZXJzb25hbGl6YWRvIiwiaGFzRHJhZ2dlZCIsImdldEF0dHIiLCJzZXRBdHRyIiwic2V0VGltZW91dCIsImFob3JhIiwicGVyZm9ybWFuY2UiLCJub3ciLCJEYXRlIiwiX3NraXBJbmRpdmlkdWFsRW5kIiwiaGFzIiwiX3NraXBVbnRpbCIsImRlbGV0ZSIsImZpbmFsUG9zTG9jYWwiLCJmaW5hbEFicyIsImZpbmFsaXpvRHJhZyIsImNhdXNhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/drag/dragIndividual.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useEditorHandlers.js":
/*!****************************************!*\
  !*** ./src/hooks/useEditorHandlers.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useEditorHandlers)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var _utils_editorActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/editorActions */ \"(pages-dir-node)/./src/utils/editorActions.js\");\n\n\nfunction useEditorHandlers({ objetos, setObjetos, elementosSeleccionados, setElementosSeleccionados, historial, setHistorial, futuros, setFuturos, setSecciones, ignoreNextUpdateRef, setMostrarPanelZ }) {\n    const onDeshacer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onDeshacer]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.ejecutarDeshacer)({\n                historial,\n                setHistorial,\n                setObjetos,\n                setSecciones,\n                setFuturos,\n                ignoreNextUpdateRef,\n                setElementosSeleccionados,\n                setMostrarPanelZ\n            })\n    }[\"useEditorHandlers.useCallback[onDeshacer]\"], [\n        historial,\n        futuros\n    ]);\n    const onRehacer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onRehacer]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.ejecutarRehacer)({\n                futuros,\n                setFuturos,\n                setHistorial,\n                setObjetos,\n                setSecciones,\n                ignoreNextUpdateRef,\n                setElementosSeleccionados,\n                setMostrarPanelZ\n            })\n    }[\"useEditorHandlers.useCallback[onRehacer]\"], [\n        futuros\n    ]);\n    const onDuplicar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onDuplicar]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.duplicarElemento)({\n                objetos,\n                elementosSeleccionados,\n                setObjetos,\n                setElementosSeleccionados\n            })\n    }[\"useEditorHandlers.useCallback[onDuplicar]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    const onEliminar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onEliminar]\": ()=>{\n            // 🔹 Limpiar hover inmediato\n            if (false) {}\n            // 🔹 Limpiar referencias si existen en window\n            if (window._elementRefs && elementosSeleccionados.length > 0) {\n                elementosSeleccionados.forEach({\n                    \"useEditorHandlers.useCallback[onEliminar]\": (id)=>{\n                        delete window._elementRefs[id];\n                    }\n                }[\"useEditorHandlers.useCallback[onEliminar]\"]);\n            }\n            // 🔹 Ejecutar la eliminación real\n            (0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.eliminarElemento)({\n                objetos,\n                elementosSeleccionados,\n                setObjetos,\n                setElementosSeleccionados,\n                setMostrarPanelZ\n            });\n        }\n    }[\"useEditorHandlers.useCallback[onEliminar]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    const onCopiar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onCopiar]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.copiarElemento)({\n                objetos,\n                elementosSeleccionados\n            })\n    }[\"useEditorHandlers.useCallback[onCopiar]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    const onPegar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onPegar]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.pegarElemento)({\n                setObjetos,\n                setElementosSeleccionados\n            })\n    }[\"useEditorHandlers.useCallback[onPegar]\"], []);\n    const onCambiarAlineacion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onCambiarAlineacion]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.cambiarAlineacionTexto)({\n                objetos,\n                elementosSeleccionados,\n                setObjetos\n            })\n    }[\"useEditorHandlers.useCallback[onCambiarAlineacion]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    return {\n        onDeshacer,\n        onRehacer,\n        onDuplicar,\n        onEliminar,\n        onCopiar,\n        onPegar,\n        onCambiarAlineacion\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VFZGl0b3JIYW5kbGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0M7QUFTTDtBQUVoQixTQUFTUSxrQkFBa0IsRUFDeENDLE9BQU8sRUFDUEMsVUFBVSxFQUNWQyxzQkFBc0IsRUFDdEJDLHlCQUF5QixFQUN6QkMsU0FBUyxFQUNUQyxZQUFZLEVBQ1pDLE9BQU8sRUFDUEMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLG1CQUFtQixFQUNuQkMsZ0JBQWdCLEVBQ2pCO0lBQ0MsTUFBTUMsYUFBYXBCLGtEQUFXQTtxREFBQyxJQUFNQyxzRUFBZ0JBLENBQUM7Z0JBQ3BEWTtnQkFDQUM7Z0JBQ0FKO2dCQUNBTztnQkFDQUQ7Z0JBQ0FFO2dCQUNBTjtnQkFDQU87WUFDRjtvREFBSTtRQUFDTjtRQUFXRTtLQUFRO0lBRXhCLE1BQU1NLFlBQVlyQixrREFBV0E7b0RBQUMsSUFBTUUscUVBQWVBLENBQUM7Z0JBQ2xEYTtnQkFDQUM7Z0JBQ0FGO2dCQUNBSjtnQkFDQU87Z0JBQ0FDO2dCQUNBTjtnQkFDQU87WUFDRjttREFBSTtRQUFDSjtLQUFRO0lBRWIsTUFBTU8sYUFBYXRCLGtEQUFXQTtxREFBQyxJQUFNRyxzRUFBZ0JBLENBQUM7Z0JBQ3BETTtnQkFDQUU7Z0JBQ0FEO2dCQUNBRTtZQUNGO29EQUFJO1FBQUNIO1FBQVNFO0tBQXVCO0lBRXZDLE1BQU1ZLGFBQWF2QixrREFBV0E7cURBQUM7WUFDN0IsNkJBQTZCO1lBQzdCLElBQUksS0FBd0QsRUFBRSxFQUU3RDtZQUVELDhDQUE4QztZQUM5QyxJQUFJd0IsT0FBT0UsWUFBWSxJQUFJZix1QkFBdUJnQixNQUFNLEdBQUcsR0FBRztnQkFDNURoQix1QkFBdUJpQixPQUFPO2lFQUFDQyxDQUFBQTt3QkFDN0IsT0FBT0wsT0FBT0UsWUFBWSxDQUFDRyxHQUFHO29CQUNoQzs7WUFDRjtZQUVBLGtDQUFrQztZQUNsQ3pCLHNFQUFnQkEsQ0FBQztnQkFDZks7Z0JBQ0FFO2dCQUNBRDtnQkFDQUU7Z0JBQ0FPO1lBQ0Y7UUFDRjtvREFBRztRQUFDVjtRQUFTRTtLQUF1QjtJQUdsQyxNQUFNbUIsV0FBVzlCLGtEQUFXQTttREFBQyxJQUFNSyxvRUFBY0EsQ0FBQztnQkFDaERJO2dCQUNBRTtZQUNGO2tEQUFJO1FBQUNGO1FBQVNFO0tBQXVCO0lBRXJDLE1BQU1vQixVQUFVL0Isa0RBQVdBO2tEQUFDLElBQU1NLG1FQUFhQSxDQUFDO2dCQUM5Q0k7Z0JBQ0FFO1lBQ0Y7aURBQUksRUFBRTtJQUVOLE1BQU1vQixzQkFBc0JoQyxrREFBV0E7OERBQUMsSUFBTU8sNEVBQXNCQSxDQUFDO2dCQUNuRUU7Z0JBQ0FFO2dCQUNBRDtZQUNGOzZEQUFJO1FBQUNEO1FBQVNFO0tBQXVCO0lBRXJDLE9BQU87UUFDTFM7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQU87UUFDQUM7UUFDQUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGhvb2tzXFx1c2VFZGl0b3JIYW5kbGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtcclxuICBlamVjdXRhckRlc2hhY2VyLFxyXG4gIGVqZWN1dGFyUmVoYWNlcixcclxuICBkdXBsaWNhckVsZW1lbnRvLFxyXG4gIGVsaW1pbmFyRWxlbWVudG8sXHJcbiAgY29waWFyRWxlbWVudG8sXHJcbiAgcGVnYXJFbGVtZW50byxcclxuICBjYW1iaWFyQWxpbmVhY2lvblRleHRvXHJcbn0gZnJvbSAnQC91dGlscy9lZGl0b3JBY3Rpb25zJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUVkaXRvckhhbmRsZXJzKHtcclxuICBvYmpldG9zLFxyXG4gIHNldE9iamV0b3MsXHJcbiAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gIGhpc3RvcmlhbCxcclxuICBzZXRIaXN0b3JpYWwsXHJcbiAgZnV0dXJvcyxcclxuICBzZXRGdXR1cm9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxyXG4gIHNldE1vc3RyYXJQYW5lbFpcclxufSkge1xyXG4gIGNvbnN0IG9uRGVzaGFjZXIgPSB1c2VDYWxsYmFjaygoKSA9PiBlamVjdXRhckRlc2hhY2VyKHtcclxuICAgIGhpc3RvcmlhbCxcclxuICAgIHNldEhpc3RvcmlhbCxcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICBzZXRGdXR1cm9zLFxyXG4gICAgaWdub3JlTmV4dFVwZGF0ZVJlZixcclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaXHJcbiAgfSksIFtoaXN0b3JpYWwsIGZ1dHVyb3NdKTtcclxuXHJcbiAgY29uc3Qgb25SZWhhY2VyID0gdXNlQ2FsbGJhY2soKCkgPT4gZWplY3V0YXJSZWhhY2VyKHtcclxuICAgIGZ1dHVyb3MsXHJcbiAgICBzZXRGdXR1cm9zLFxyXG4gICAgc2V0SGlzdG9yaWFsLFxyXG4gICAgc2V0T2JqZXRvcyxcclxuICAgIHNldFNlY2Npb25lcyxcclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYsXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgc2V0TW9zdHJhclBhbmVsWlxyXG4gIH0pLCBbZnV0dXJvc10pO1xyXG5cclxuICBjb25zdCBvbkR1cGxpY2FyID0gdXNlQ2FsbGJhY2soKCkgPT4gZHVwbGljYXJFbGVtZW50byh7XHJcbiAgICBvYmpldG9zLFxyXG4gICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zXHJcbiAgfSksIFtvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zXSk7XHJcblxyXG5jb25zdCBvbkVsaW1pbmFyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gIC8vIPCflLkgTGltcGlhciBob3ZlciBpbm1lZGlhdG9cclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnNldEhvdmVySWRHbG9iYWwpIHtcclxuICAgIHdpbmRvdy5zZXRIb3ZlcklkR2xvYmFsKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgLy8g8J+UuSBMaW1waWFyIHJlZmVyZW5jaWFzIHNpIGV4aXN0ZW4gZW4gd2luZG93XHJcbiAgaWYgKHdpbmRvdy5fZWxlbWVudFJlZnMgJiYgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPiAwKSB7XHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICBkZWxldGUgd2luZG93Ll9lbGVtZW50UmVmc1tpZF07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIPCflLkgRWplY3V0YXIgbGEgZWxpbWluYWNpw7NuIHJlYWxcclxuICBlbGltaW5hckVsZW1lbnRvKHtcclxuICAgIG9iamV0b3MsXHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgc2V0T2JqZXRvcyxcclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaXHJcbiAgfSk7XHJcbn0sIFtvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zXSk7XHJcblxyXG5cclxuICBjb25zdCBvbkNvcGlhciA9IHVzZUNhbGxiYWNrKCgpID0+IGNvcGlhckVsZW1lbnRvKHtcclxuICAgIG9iamV0b3MsXHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zXHJcbiAgfSksIFtvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zXSk7XHJcblxyXG4gIGNvbnN0IG9uUGVnYXIgPSB1c2VDYWxsYmFjaygoKSA9PiBwZWdhckVsZW1lbnRvKHtcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zXHJcbiAgfSksIFtdKTtcclxuXHJcbiAgY29uc3Qgb25DYW1iaWFyQWxpbmVhY2lvbiA9IHVzZUNhbGxiYWNrKCgpID0+IGNhbWJpYXJBbGluZWFjaW9uVGV4dG8oe1xyXG4gICAgb2JqZXRvcyxcclxuICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICBzZXRPYmpldG9zXHJcbiAgfSksIFtvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBvbkRlc2hhY2VyLFxyXG4gICAgb25SZWhhY2VyLFxyXG4gICAgb25EdXBsaWNhcixcclxuICAgIG9uRWxpbWluYXIsXHJcbiAgICBvbkNvcGlhcixcclxuICAgIG9uUGVnYXIsXHJcbiAgICBvbkNhbWJpYXJBbGluZWFjaW9uXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJlamVjdXRhckRlc2hhY2VyIiwiZWplY3V0YXJSZWhhY2VyIiwiZHVwbGljYXJFbGVtZW50byIsImVsaW1pbmFyRWxlbWVudG8iLCJjb3BpYXJFbGVtZW50byIsInBlZ2FyRWxlbWVudG8iLCJjYW1iaWFyQWxpbmVhY2lvblRleHRvIiwidXNlRWRpdG9ySGFuZGxlcnMiLCJvYmpldG9zIiwic2V0T2JqZXRvcyIsImVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwiaGlzdG9yaWFsIiwic2V0SGlzdG9yaWFsIiwiZnV0dXJvcyIsInNldEZ1dHVyb3MiLCJzZXRTZWNjaW9uZXMiLCJpZ25vcmVOZXh0VXBkYXRlUmVmIiwic2V0TW9zdHJhclBhbmVsWiIsIm9uRGVzaGFjZXIiLCJvblJlaGFjZXIiLCJvbkR1cGxpY2FyIiwib25FbGltaW5hciIsIndpbmRvdyIsInNldEhvdmVySWRHbG9iYWwiLCJfZWxlbWVudFJlZnMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiaWQiLCJvbkNvcGlhciIsIm9uUGVnYXIiLCJvbkNhbWJpYXJBbGluZWFjaW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useEditorHandlers.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useGuiasCentrado.js":
/*!***************************************!*\
  !*** ./src/hooks/useGuiasCentrado.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useGuiasCentrado)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// hooks/useGuiasCentrado.js\n\n/**\n * Guías con:\n * - Sección: muestra CX/CY solo cuando el elemento quedó centrado.\n * - Elementos: SOLO misma sección, líneas punteadas tipo \"reach\" hasta el otro elemento.\n * - Nada de otras secciones.\n */ function useGuiasCentrado({ anchoCanvas = 800, altoCanvas = 800, magnetRadius = 16, elementMagnetRadius = null, sectionMagnetRadius = null, sectionShowRadius = 18, sectionPriorityBias = 4, snapStrength = 1, sectionSnapStrength = null, elementSnapStrength = null, sectionLineTolerance = 0.75, seccionesOrdenadas = [] }) {\n    const [guiaLineas, setGuiaLineas] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const effElementMagnetRadius = elementMagnetRadius ?? magnetRadius;\n    const effSectionMagnetRadius = sectionMagnetRadius ?? magnetRadius;\n    const effSectionSnapStrength = sectionSnapStrength ?? snapStrength;\n    const effElementSnapStrength = elementSnapStrength ?? snapStrength;\n    // ---- Utilidades de secciones ----\n    const calcularOffsetSeccion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[calcularOffsetSeccion]\": (seccionId)=>{\n            let offsetY = 0;\n            for (const s of seccionesOrdenadas){\n                if (s.id === seccionId) break;\n                offsetY += s.altura;\n            }\n            return offsetY;\n        }\n    }[\"useGuiasCentrado.useCallback[calcularOffsetSeccion]\"], [\n        seccionesOrdenadas\n    ]);\n    const obtenerSeccionElemento = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[obtenerSeccionElemento]\": (objId, objetos)=>{\n            const obj = objetos.find({\n                \"useGuiasCentrado.useCallback[obtenerSeccionElemento].obj\": (o)=>o.id === objId\n            }[\"useGuiasCentrado.useCallback[obtenerSeccionElemento].obj\"]);\n            if (!obj?.seccionId) return null;\n            return seccionesOrdenadas.find({\n                \"useGuiasCentrado.useCallback[obtenerSeccionElemento]\": (s)=>s.id === obj.seccionId\n            }[\"useGuiasCentrado.useCallback[obtenerSeccionElemento]\"]) || null;\n        }\n    }[\"useGuiasCentrado.useCallback[obtenerSeccionElemento]\"], [\n        seccionesOrdenadas\n    ]);\n    // ---- Segmentos \"reach\" entre cajas (va hasta el otro elemento) ----\n    const reachVertical = (x, selfBox, otherBox, gap = 6)=>{\n        const selfCy = selfBox.y + selfBox.height / 2;\n        const otherCy = otherBox.y + otherBox.height / 2;\n        let y1, y2;\n        if (otherCy <= selfCy) {\n            y1 = otherBox.y + otherBox.height + gap; // desde borde inferior del otro\n            y2 = selfBox.y - gap; // hasta borde superior del self\n        } else {\n            y1 = selfBox.y + selfBox.height + gap;\n            y2 = otherBox.y - gap;\n        }\n        return [\n            x,\n            y1,\n            x,\n            y2\n        ];\n    };\n    const reachHorizontal = (y, selfBox, otherBox, gap = 6)=>{\n        const selfCx = selfBox.x + selfBox.width / 2;\n        const otherCx = otherBox.x + otherBox.width / 2;\n        let x1, x2;\n        if (otherCx <= selfCx) {\n            x1 = otherBox.x + otherBox.width + gap; // desde borde derecho del otro\n            x2 = selfBox.x - gap; // hasta borde izquierdo del self\n        } else {\n            x1 = selfBox.x + selfBox.width + gap;\n            x2 = otherBox.x - gap;\n        }\n        return [\n            x1,\n            y,\n            x2,\n            y\n        ];\n    };\n    // ---- Delta para alinear a la guía más cercana ----\n    const deltaForGuide = (axis, guideValue, box)=>{\n        if (axis === \"x\") {\n            const center = box.x + box.width / 2;\n            const left = box.x;\n            const right = box.x + box.width;\n            const opts = [\n                {\n                    dist: Math.abs(center - guideValue),\n                    delta: guideValue - center\n                },\n                {\n                    dist: Math.abs(left - guideValue),\n                    delta: guideValue - left\n                },\n                {\n                    dist: Math.abs(right - guideValue),\n                    delta: guideValue - right\n                }\n            ].sort((a, b)=>a.dist - b.dist)[0];\n            return opts.delta;\n        } else {\n            const center = box.y + box.height / 2;\n            const top = box.y;\n            const bottom = box.y + box.height;\n            const opts = [\n                {\n                    dist: Math.abs(center - guideValue),\n                    delta: guideValue - center\n                },\n                {\n                    dist: Math.abs(top - guideValue),\n                    delta: guideValue - top\n                },\n                {\n                    dist: Math.abs(bottom - guideValue),\n                    delta: guideValue - bottom\n                }\n            ].sort((a, b)=>a.dist - b.dist)[0];\n            return opts.delta;\n        }\n    };\n    // Misma heurística que deltaForGuide, pero devuelve distancia mínima\n    const distForGuide = (axis, guideValue, box)=>{\n        if (axis === \"x\") {\n            const center = box.x + box.width / 2;\n            const left = box.x;\n            const right = box.x + box.width;\n            return Math.min(Math.abs(center - guideValue), Math.abs(left - guideValue), Math.abs(right - guideValue));\n        }\n        const center = box.y + box.height / 2;\n        const top = box.y;\n        const bottom = box.y + box.height;\n        return Math.min(Math.abs(center - guideValue), Math.abs(top - guideValue), Math.abs(bottom - guideValue));\n    };\n    // ---- Candidatos de la MISMA sección (centros + bordes) ----\n    const buildSameSectionGuides = (node, stage, objetos, elementRefs, idSelf, seccionId)=>{\n        const selfBox = node.getClientRect({\n            relativeTo: stage\n        });\n        const candidates = objetos.filter((o)=>o.id !== idSelf && o.seccionId === seccionId) // 🔒 MISMA SECCIÓN\n        .map((o)=>{\n            const n = elementRefs.current?.[o.id];\n            if (!n) return null;\n            try {\n                const b = n.getClientRect({\n                    relativeTo: stage\n                });\n                const d = Math.abs(selfBox.x + selfBox.width / 2 - (b.x + b.width / 2)) + Math.abs(selfBox.y + selfBox.height / 2 - (b.y + b.height / 2));\n                return {\n                    box: b,\n                    d\n                };\n            } catch  {\n                return null;\n            }\n        }).filter(Boolean).sort((a, b)=>a.d - b.d).slice(0, 3); // pocos vecinos → menos ruido\n        const g = [];\n        for (const { box } of candidates){\n            const cx = box.x + box.width / 2;\n            const cy = box.y + box.height / 2;\n            const left = box.x;\n            const right = box.x + box.width;\n            const top = box.y;\n            const bottom = box.y + box.height;\n            // Centros\n            g.push({\n                axis: \"x\",\n                value: cx,\n                type: \"el-cx\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"y\",\n                value: cy,\n                type: \"el-cy\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            // Bordes\n            g.push({\n                axis: \"x\",\n                value: left,\n                type: \"el-left\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"x\",\n                value: right,\n                type: \"el-right\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"y\",\n                value: top,\n                type: \"el-top\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"y\",\n                value: bottom,\n                type: \"el-bottom\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n        }\n        return g;\n    };\n    // ---- Mostrar guías durante el drag ----\n    const mostrarGuias = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[mostrarGuias]\": (pos, idActual, objetos, elementRefs)=>{\n            // 🔥 NO mostrar guías durante drag grupal\n            if (window._grupoLider) {\n                setGuiaLineas([]);\n                return;\n            }\n            const node = elementRefs.current?.[idActual];\n            if (!node) return;\n            const stage = node.getStage?.();\n            if (!stage) return;\n            try {\n                const selfBoxBefore = node.getClientRect({\n                    relativeTo: stage\n                });\n                const selfCx = selfBoxBefore.x + selfBoxBefore.width / 2;\n                const selfCy = selfBoxBefore.y + selfBoxBefore.height / 2;\n                const seccion = obtenerSeccionElemento(idActual, objetos);\n                if (!seccion) {\n                    setGuiaLineas([]);\n                    return;\n                }\n                const offY = calcularOffsetSeccion(seccion.id);\n                const secCx = anchoCanvas / 2;\n                const secCy = offY + seccion.altura / 2;\n                const lines = [];\n                // 1) SECCIÓN: el snap evalúa el centro de la sección.\n                const distSecX = Math.abs(selfCx - secCx);\n                const distSecY = Math.abs(selfCy - secCy);\n                // 2) ELEMENTOS (MISMA SECCIÓN): elegir mejor candidato por eje\n                const elementGuides = buildSameSectionGuides(node, stage, objetos, elementRefs, idActual, seccion.id);\n                const bestElX = elementGuides.filter({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>g.axis === \"x\"\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).map({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>({\n                            g,\n                            dist: distForGuide(\"x\", g.value, selfBoxBefore)\n                        })\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).sort({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (a, b)=>a.dist - b.dist\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"])[0];\n                const bestElY = elementGuides.filter({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>g.axis === \"y\"\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).map({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>({\n                            g,\n                            dist: distForGuide(\"y\", g.value, selfBoxBefore)\n                        })\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).sort({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (a, b)=>a.dist - b.dist\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"])[0];\n                // Decidir qué guía “gana” por eje (sección vs elemento)\n                const decidirSnap = {\n                    \"useGuiasCentrado.useCallback[mostrarGuias].decidirSnap\": (secDistCenter, bestEl)=>{\n                        const secOk = secDistCenter <= effSectionMagnetRadius;\n                        const elOk = !!bestEl && bestEl.dist <= effElementMagnetRadius;\n                        if (!secOk && !elOk) return null;\n                        if (secOk && !elOk) return {\n                            source: \"seccion\"\n                        };\n                        if (!secOk && elOk) return {\n                            source: \"elemento\",\n                            near: bestEl\n                        };\n                        // ambos aplican: la sección tiene ventaja (bias)\n                        const elBeatsSection = bestEl.dist + sectionPriorityBias < secDistCenter;\n                        return elBeatsSection ? {\n                            source: \"elemento\",\n                            near: bestEl\n                        } : {\n                            source: \"seccion\"\n                        };\n                    }\n                }[\"useGuiasCentrado.useCallback[mostrarGuias].decidirSnap\"];\n                const decisionX = decidirSnap(distSecX, bestElX);\n                const decisionY = decidirSnap(distSecY, bestElY);\n                const applySnap = {\n                    \"useGuiasCentrado.useCallback[mostrarGuias].applySnap\": (axis, decision)=>{\n                        if (!decision) return {\n                            snapped: false\n                        };\n                        const fresh = node.getClientRect({\n                            relativeTo: stage\n                        });\n                        if (decision.source === \"seccion\") {\n                            if (axis === \"x\") {\n                                const cx = fresh.x + fresh.width / 2;\n                                node.x(node.x() + (secCx - cx) * effSectionSnapStrength);\n                            } else {\n                                const cy = fresh.y + fresh.height / 2;\n                                node.y(node.y() + (secCy - cy) * effSectionSnapStrength);\n                            }\n                            return {\n                                snapped: true,\n                                source: \"seccion\"\n                            };\n                        }\n                        const delta = deltaForGuide(axis, decision.near.g.value, fresh);\n                        if (axis === \"x\") node.x(node.x() + delta * effElementSnapStrength);\n                        else node.y(node.y() + delta * effElementSnapStrength);\n                        return {\n                            snapped: true,\n                            source: \"elemento\",\n                            near: decision.near\n                        };\n                    }\n                }[\"useGuiasCentrado.useCallback[mostrarGuias].applySnap\"];\n                const snapResX = applySnap(\"x\", decisionX);\n                const snapResY = applySnap(\"y\", decisionY);\n                // Recalcular box luego del snap para dibujar reach exacta\n                const selfBoxAfter = node.getClientRect({\n                    relativeTo: stage\n                });\n                const selfCxAfter = selfBoxAfter.x + selfBoxAfter.width / 2;\n                const selfCyAfter = selfBoxAfter.y + selfBoxAfter.height / 2;\n                // 2) SECCIÓN: mostrar guía SOLO cuando quedó efectivamente alineado.\n                if (snapResX.snapped && snapResX.source === \"seccion\" && Math.abs(selfCxAfter - secCx) <= sectionLineTolerance) {\n                    lines.push({\n                        type: \"seccion-cx\",\n                        priority: \"seccion\",\n                        style: \"solid\",\n                        points: [\n                            secCx,\n                            offY,\n                            secCx,\n                            offY + seccion.altura\n                        ]\n                    });\n                }\n                if (snapResY.snapped && snapResY.source === \"seccion\" && Math.abs(selfCyAfter - secCy) <= sectionLineTolerance) {\n                    lines.push({\n                        type: \"seccion-cy\",\n                        priority: \"seccion\",\n                        style: \"solid\",\n                        points: [\n                            0,\n                            secCy,\n                            anchoCanvas,\n                            secCy\n                        ]\n                    });\n                }\n                if (snapResX.snapped && snapResX.source === \"elemento\" && snapResX.near?.g?.targetBox) {\n                    lines.push({\n                        type: \"reach-x\",\n                        priority: \"elemento\",\n                        style: \"dashed\",\n                        points: reachVertical(snapResX.near.g.value, selfBoxAfter, snapResX.near.g.targetBox)\n                    });\n                }\n                if (snapResY.snapped && snapResY.source === \"elemento\" && snapResY.near?.g?.targetBox) {\n                    lines.push({\n                        type: \"reach-y\",\n                        priority: \"elemento\",\n                        style: \"dashed\",\n                        points: reachHorizontal(snapResY.near.g.value, selfBoxAfter, snapResY.near.g.targetBox)\n                    });\n                }\n                setGuiaLineas(lines);\n            } catch (e) {\n            // silencioso para no cortar el drag\n            }\n        }\n    }[\"useGuiasCentrado.useCallback[mostrarGuias]\"], [\n        anchoCanvas,\n        altoCanvas,\n        magnetRadius,\n        sectionShowRadius,\n        snapStrength,\n        seccionesOrdenadas,\n        obtenerSeccionElemento,\n        calcularOffsetSeccion,\n        elementMagnetRadius,\n        sectionMagnetRadius,\n        sectionPriorityBias,\n        sectionSnapStrength,\n        elementSnapStrength,\n        sectionLineTolerance\n    ]);\n    const limpiarGuias = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[limpiarGuias]\": ()=>setGuiaLineas([])\n    }[\"useGuiasCentrado.useCallback[limpiarGuias]\"], []);\n    const configurarDragEnd = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[configurarDragEnd]\": ()=>setGuiaLineas([])\n    }[\"useGuiasCentrado.useCallback[configurarDragEnd]\"], []);\n    return {\n        guiaLineas,\n        mostrarGuias,\n        limpiarGuias,\n        configurarDragEnd\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VHdWlhc0NlbnRyYWRvLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNEJBQTRCO0FBQ2tCO0FBRTlDOzs7OztDQUtDLEdBQ2MsU0FBU0UsaUJBQWlCLEVBQ3JDQyxjQUFjLEdBQUcsRUFDakJDLGFBQWEsR0FBRyxFQUNoQkMsZUFBZSxFQUFFLEVBQ2pCQyxzQkFBc0IsSUFBSSxFQUMxQkMsc0JBQXNCLElBQUksRUFDMUJDLG9CQUFvQixFQUFFLEVBQ3RCQyxzQkFBc0IsQ0FBQyxFQUN2QkMsZUFBZSxDQUFDLEVBQ2hCQyxzQkFBc0IsSUFBSSxFQUMxQkMsc0JBQXNCLElBQUksRUFDMUJDLHVCQUF1QixJQUFJLEVBQzNCQyxxQkFBcUIsRUFBRSxFQUMxQjtJQUNHLE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHaEIsK0NBQVFBLENBQUMsRUFBRTtJQUcvQyxNQUFNaUIseUJBQXlCWCx1QkFBdUJEO0lBQ3RELE1BQU1hLHlCQUF5QlgsdUJBQXVCRjtJQUN0RCxNQUFNYyx5QkFBeUJSLHVCQUF1QkQ7SUFDdEQsTUFBTVUseUJBQXlCUix1QkFBdUJGO0lBR3RELG9DQUFvQztJQUNwQyxNQUFNVyx3QkFBd0JwQixrREFBV0E7K0RBQUMsQ0FBQ3FCO1lBQ3ZDLElBQUlDLFVBQVU7WUFDZCxLQUFLLE1BQU1DLEtBQUtWLG1CQUFvQjtnQkFDaEMsSUFBSVUsRUFBRUMsRUFBRSxLQUFLSCxXQUFXO2dCQUN4QkMsV0FBV0MsRUFBRUUsTUFBTTtZQUN2QjtZQUNBLE9BQU9IO1FBQ1g7OERBQUc7UUFBQ1Q7S0FBbUI7SUFFdkIsTUFBTWEseUJBQXlCMUIsa0RBQVdBO2dFQUFDLENBQUMyQixPQUFPQztZQUMvQyxNQUFNQyxNQUFNRCxRQUFRRSxJQUFJOzRFQUFDQyxDQUFBQSxJQUFLQSxFQUFFUCxFQUFFLEtBQUtHOztZQUN2QyxJQUFJLENBQUNFLEtBQUtSLFdBQVcsT0FBTztZQUM1QixPQUFPUixtQkFBbUJpQixJQUFJO3dFQUFDUCxDQUFBQSxJQUFLQSxFQUFFQyxFQUFFLEtBQUtLLElBQUlSLFNBQVM7MEVBQUs7UUFDbkU7K0RBQUc7UUFBQ1I7S0FBbUI7SUFFdkIsc0VBQXNFO0lBQ3RFLE1BQU1tQixnQkFBZ0IsQ0FBQ0MsR0FBR0MsU0FBU0MsVUFBVUMsTUFBTSxDQUFDO1FBQ2hELE1BQU1DLFNBQVNILFFBQVFJLENBQUMsR0FBR0osUUFBUUssTUFBTSxHQUFHO1FBQzVDLE1BQU1DLFVBQVVMLFNBQVNHLENBQUMsR0FBR0gsU0FBU0ksTUFBTSxHQUFHO1FBQy9DLElBQUlFLElBQUlDO1FBQ1IsSUFBSUYsV0FBV0gsUUFBUTtZQUNuQkksS0FBS04sU0FBU0csQ0FBQyxHQUFHSCxTQUFTSSxNQUFNLEdBQUdILEtBQUssZ0NBQWdDO1lBQ3pFTSxLQUFLUixRQUFRSSxDQUFDLEdBQUdGLEtBQXlCLGdDQUFnQztRQUM5RSxPQUFPO1lBQ0hLLEtBQUtQLFFBQVFJLENBQUMsR0FBR0osUUFBUUssTUFBTSxHQUFHSDtZQUNsQ00sS0FBS1AsU0FBU0csQ0FBQyxHQUFHRjtRQUN0QjtRQUNBLE9BQU87WUFBQ0g7WUFBR1E7WUFBSVI7WUFBR1M7U0FBRztJQUN6QjtJQUVBLE1BQU1DLGtCQUFrQixDQUFDTCxHQUFHSixTQUFTQyxVQUFVQyxNQUFNLENBQUM7UUFDbEQsTUFBTVEsU0FBU1YsUUFBUUQsQ0FBQyxHQUFHQyxRQUFRVyxLQUFLLEdBQUc7UUFDM0MsTUFBTUMsVUFBVVgsU0FBU0YsQ0FBQyxHQUFHRSxTQUFTVSxLQUFLLEdBQUc7UUFDOUMsSUFBSUUsSUFBSUM7UUFDUixJQUFJRixXQUFXRixRQUFRO1lBQ25CRyxLQUFLWixTQUFTRixDQUFDLEdBQUdFLFNBQVNVLEtBQUssR0FBR1QsS0FBSywrQkFBK0I7WUFDdkVZLEtBQUtkLFFBQVFELENBQUMsR0FBR0csS0FBd0IsaUNBQWlDO1FBQzlFLE9BQU87WUFDSFcsS0FBS2IsUUFBUUQsQ0FBQyxHQUFHQyxRQUFRVyxLQUFLLEdBQUdUO1lBQ2pDWSxLQUFLYixTQUFTRixDQUFDLEdBQUdHO1FBQ3RCO1FBQ0EsT0FBTztZQUFDVztZQUFJVDtZQUFHVTtZQUFJVjtTQUFFO0lBQ3pCO0lBRUEscURBQXFEO0lBQ3JELE1BQU1XLGdCQUFnQixDQUFDQyxNQUFNQyxZQUFZQztRQUNyQyxJQUFJRixTQUFTLEtBQUs7WUFDZCxNQUFNRyxTQUFTRCxJQUFJbkIsQ0FBQyxHQUFHbUIsSUFBSVAsS0FBSyxHQUFHO1lBQ25DLE1BQU1TLE9BQU9GLElBQUluQixDQUFDO1lBQ2xCLE1BQU1zQixRQUFRSCxJQUFJbkIsQ0FBQyxHQUFHbUIsSUFBSVAsS0FBSztZQUMvQixNQUFNVyxPQUFPO2dCQUNUO29CQUFFQyxNQUFNQyxLQUFLQyxHQUFHLENBQUNOLFNBQVNGO29CQUFhUyxPQUFPVCxhQUFhRTtnQkFBTztnQkFDbEU7b0JBQUVJLE1BQU1DLEtBQUtDLEdBQUcsQ0FBQ0wsT0FBT0g7b0JBQWFTLE9BQU9ULGFBQWFHO2dCQUFLO2dCQUM5RDtvQkFBRUcsTUFBTUMsS0FBS0MsR0FBRyxDQUFDSixRQUFRSjtvQkFBYVMsT0FBT1QsYUFBYUk7Z0JBQU07YUFDbkUsQ0FBQ00sSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVMLElBQUksR0FBR00sRUFBRU4sSUFBSSxDQUFDLENBQUMsRUFBRTtZQUNwQyxPQUFPRCxLQUFLSSxLQUFLO1FBQ3JCLE9BQU87WUFDSCxNQUFNUCxTQUFTRCxJQUFJZCxDQUFDLEdBQUdjLElBQUliLE1BQU0sR0FBRztZQUNwQyxNQUFNeUIsTUFBTVosSUFBSWQsQ0FBQztZQUNqQixNQUFNMkIsU0FBU2IsSUFBSWQsQ0FBQyxHQUFHYyxJQUFJYixNQUFNO1lBQ2pDLE1BQU1pQixPQUFPO2dCQUNUO29CQUFFQyxNQUFNQyxLQUFLQyxHQUFHLENBQUNOLFNBQVNGO29CQUFhUyxPQUFPVCxhQUFhRTtnQkFBTztnQkFDbEU7b0JBQUVJLE1BQU1DLEtBQUtDLEdBQUcsQ0FBQ0ssTUFBTWI7b0JBQWFTLE9BQU9ULGFBQWFhO2dCQUFJO2dCQUM1RDtvQkFBRVAsTUFBTUMsS0FBS0MsR0FBRyxDQUFDTSxTQUFTZDtvQkFBYVMsT0FBT1QsYUFBYWM7Z0JBQU87YUFDckUsQ0FBQ0osSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVMLElBQUksR0FBR00sRUFBRU4sSUFBSSxDQUFDLENBQUMsRUFBRTtZQUNwQyxPQUFPRCxLQUFLSSxLQUFLO1FBQ3JCO0lBQ0o7SUFFQSxxRUFBcUU7SUFDckUsTUFBTU0sZUFBZSxDQUFDaEIsTUFBTUMsWUFBWUM7UUFDcEMsSUFBSUYsU0FBUyxLQUFLO1lBQ2QsTUFBTUcsU0FBU0QsSUFBSW5CLENBQUMsR0FBR21CLElBQUlQLEtBQUssR0FBRztZQUNuQyxNQUFNUyxPQUFPRixJQUFJbkIsQ0FBQztZQUNsQixNQUFNc0IsUUFBUUgsSUFBSW5CLENBQUMsR0FBR21CLElBQUlQLEtBQUs7WUFDL0IsT0FBT2EsS0FBS1MsR0FBRyxDQUNYVCxLQUFLQyxHQUFHLENBQUNOLFNBQVNGLGFBQ2xCTyxLQUFLQyxHQUFHLENBQUNMLE9BQU9ILGFBQ2hCTyxLQUFLQyxHQUFHLENBQUNKLFFBQVFKO1FBRXpCO1FBQ0EsTUFBTUUsU0FBU0QsSUFBSWQsQ0FBQyxHQUFHYyxJQUFJYixNQUFNLEdBQUc7UUFDcEMsTUFBTXlCLE1BQU1aLElBQUlkLENBQUM7UUFDakIsTUFBTTJCLFNBQVNiLElBQUlkLENBQUMsR0FBR2MsSUFBSWIsTUFBTTtRQUNqQyxPQUFPbUIsS0FBS1MsR0FBRyxDQUNYVCxLQUFLQyxHQUFHLENBQUNOLFNBQVNGLGFBQ2xCTyxLQUFLQyxHQUFHLENBQUNLLE1BQU1iLGFBQ2ZPLEtBQUtDLEdBQUcsQ0FBQ00sU0FBU2Q7SUFFMUI7SUFFQSw4REFBOEQ7SUFDOUQsTUFBTWlCLHlCQUF5QixDQUFDQyxNQUFNQyxPQUFPMUMsU0FBUzJDLGFBQWFDLFFBQVFuRDtRQUN2RSxNQUFNYSxVQUFVbUMsS0FBS0ksYUFBYSxDQUFDO1lBQUVDLFlBQVlKO1FBQU07UUFDdkQsTUFBTUssYUFBYS9DLFFBQ2RnRCxNQUFNLENBQUM3QyxDQUFBQSxJQUFLQSxFQUFFUCxFQUFFLEtBQUtnRCxVQUFVekMsRUFBRVYsU0FBUyxLQUFLQSxXQUFXLG1CQUFtQjtTQUM3RXdELEdBQUcsQ0FBQzlDLENBQUFBO1lBQ0QsTUFBTStDLElBQUlQLFlBQVlRLE9BQU8sRUFBRSxDQUFDaEQsRUFBRVAsRUFBRSxDQUFDO1lBQ3JDLElBQUksQ0FBQ3NELEdBQUcsT0FBTztZQUNmLElBQUk7Z0JBQ0EsTUFBTWYsSUFBSWUsRUFBRUwsYUFBYSxDQUFDO29CQUFFQyxZQUFZSjtnQkFBTTtnQkFDOUMsTUFBTVUsSUFBSXRCLEtBQUtDLEdBQUcsQ0FBQyxRQUFTMUIsQ0FBQyxHQUFHQyxRQUFRVyxLQUFLLEdBQUcsSUFBTWtCLENBQUFBLEVBQUU5QixDQUFDLEdBQUc4QixFQUFFbEIsS0FBSyxHQUFHLE1BQ2hFYSxLQUFLQyxHQUFHLENBQUMsUUFBU3JCLENBQUMsR0FBR0osUUFBUUssTUFBTSxHQUFHLElBQU13QixDQUFBQSxFQUFFekIsQ0FBQyxHQUFHeUIsRUFBRXhCLE1BQU0sR0FBRztnQkFDcEUsT0FBTztvQkFBRWEsS0FBS1c7b0JBQUdpQjtnQkFBRTtZQUN2QixFQUFFLE9BQU07Z0JBQUUsT0FBTztZQUFNO1FBQzNCLEdBQ0NKLE1BQU0sQ0FBQ0ssU0FDUHBCLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxFQUFFa0IsQ0FBQyxHQUFHakIsRUFBRWlCLENBQUMsRUFDeEJFLEtBQUssQ0FBQyxHQUFHLElBQUksOEJBQThCO1FBRWhELE1BQU1DLElBQUksRUFBRTtRQUNaLEtBQUssTUFBTSxFQUFFL0IsR0FBRyxFQUFFLElBQUl1QixXQUFZO1lBQzlCLE1BQU1TLEtBQUtoQyxJQUFJbkIsQ0FBQyxHQUFHbUIsSUFBSVAsS0FBSyxHQUFHO1lBQy9CLE1BQU13QyxLQUFLakMsSUFBSWQsQ0FBQyxHQUFHYyxJQUFJYixNQUFNLEdBQUc7WUFDaEMsTUFBTWUsT0FBT0YsSUFBSW5CLENBQUM7WUFDbEIsTUFBTXNCLFFBQVFILElBQUluQixDQUFDLEdBQUdtQixJQUFJUCxLQUFLO1lBQy9CLE1BQU1tQixNQUFNWixJQUFJZCxDQUFDO1lBQ2pCLE1BQU0yQixTQUFTYixJQUFJZCxDQUFDLEdBQUdjLElBQUliLE1BQU07WUFFakMsVUFBVTtZQUNWNEMsRUFBRUcsSUFBSSxDQUFDO2dCQUFFcEMsTUFBTTtnQkFBS3FDLE9BQU9IO2dCQUFJSSxNQUFNO2dCQUFTQyxXQUFXckM7Z0JBQUtzQyxVQUFVO2dCQUFZQyxPQUFPO1lBQVM7WUFDcEdSLEVBQUVHLElBQUksQ0FBQztnQkFBRXBDLE1BQU07Z0JBQUtxQyxPQUFPRjtnQkFBSUcsTUFBTTtnQkFBU0MsV0FBV3JDO2dCQUFLc0MsVUFBVTtnQkFBWUMsT0FBTztZQUFTO1lBQ3BHLFNBQVM7WUFDVFIsRUFBRUcsSUFBSSxDQUFDO2dCQUFFcEMsTUFBTTtnQkFBS3FDLE9BQU9qQztnQkFBTWtDLE1BQU07Z0JBQVdDLFdBQVdyQztnQkFBS3NDLFVBQVU7Z0JBQVlDLE9BQU87WUFBUztZQUN4R1IsRUFBRUcsSUFBSSxDQUFDO2dCQUFFcEMsTUFBTTtnQkFBS3FDLE9BQU9oQztnQkFBT2lDLE1BQU07Z0JBQVlDLFdBQVdyQztnQkFBS3NDLFVBQVU7Z0JBQVlDLE9BQU87WUFBUztZQUMxR1IsRUFBRUcsSUFBSSxDQUFDO2dCQUFFcEMsTUFBTTtnQkFBS3FDLE9BQU92QjtnQkFBS3dCLE1BQU07Z0JBQVVDLFdBQVdyQztnQkFBS3NDLFVBQVU7Z0JBQVlDLE9BQU87WUFBUztZQUN0R1IsRUFBRUcsSUFBSSxDQUFDO2dCQUFFcEMsTUFBTTtnQkFBS3FDLE9BQU90QjtnQkFBUXVCLE1BQU07Z0JBQWFDLFdBQVdyQztnQkFBS3NDLFVBQVU7Z0JBQVlDLE9BQU87WUFBUztRQUNoSDtRQUNBLE9BQU9SO0lBQ1g7SUFFQSwwQ0FBMEM7SUFDMUMsTUFBTVMsZUFBZTVGLGtEQUFXQTtzREFBQyxDQUFDNkYsS0FBS0MsVUFBVWxFLFNBQVMyQztZQUN0RCwwQ0FBMEM7WUFDMUMsSUFBSXdCLE9BQU9DLFdBQVcsRUFBRTtnQkFDcEJqRixjQUFjLEVBQUU7Z0JBQ2hCO1lBQ0o7WUFDQSxNQUFNc0QsT0FBT0UsWUFBWVEsT0FBTyxFQUFFLENBQUNlLFNBQVM7WUFDNUMsSUFBSSxDQUFDekIsTUFBTTtZQUNYLE1BQU1DLFFBQVFELEtBQUs0QixRQUFRO1lBQzNCLElBQUksQ0FBQzNCLE9BQU87WUFFWixJQUFJO2dCQUNBLE1BQU00QixnQkFBZ0I3QixLQUFLSSxhQUFhLENBQUM7b0JBQUVDLFlBQVlKO2dCQUFNO2dCQUM3RCxNQUFNMUIsU0FBU3NELGNBQWNqRSxDQUFDLEdBQUdpRSxjQUFjckQsS0FBSyxHQUFHO2dCQUN2RCxNQUFNUixTQUFTNkQsY0FBYzVELENBQUMsR0FBRzRELGNBQWMzRCxNQUFNLEdBQUc7Z0JBRXhELE1BQU00RCxVQUFVekUsdUJBQXVCb0UsVUFBVWxFO2dCQUNqRCxJQUFJLENBQUN1RSxTQUFTO29CQUNWcEYsY0FBYyxFQUFFO29CQUNoQjtnQkFDSjtnQkFDQSxNQUFNcUYsT0FBT2hGLHNCQUFzQitFLFFBQVEzRSxFQUFFO2dCQUM3QyxNQUFNNkUsUUFBUW5HLGNBQWM7Z0JBQzVCLE1BQU1vRyxRQUFRRixPQUFPRCxRQUFRMUUsTUFBTSxHQUFHO2dCQUV0QyxNQUFNOEUsUUFBUSxFQUFFO2dCQUVoQixzREFBc0Q7Z0JBQ3RELE1BQU1DLFdBQVc5QyxLQUFLQyxHQUFHLENBQUNmLFNBQVN5RDtnQkFDbkMsTUFBTUksV0FBVy9DLEtBQUtDLEdBQUcsQ0FBQ3RCLFNBQVNpRTtnQkFFbkMsK0RBQStEO2dCQUMvRCxNQUFNSSxnQkFBZ0J0Qyx1QkFBdUJDLE1BQU1DLE9BQU8xQyxTQUFTMkMsYUFBYXVCLFVBQVVLLFFBQVEzRSxFQUFFO2dCQUVwRyxNQUFNbUYsVUFBVUQsY0FDWDlCLE1BQU07a0VBQUNPLENBQUFBLElBQUtBLEVBQUVqQyxJQUFJLEtBQUs7aUVBQ3ZCMkIsR0FBRztrRUFBQ00sQ0FBQUEsSUFBTTs0QkFBRUE7NEJBQUcxQixNQUFNUyxhQUFhLEtBQUtpQixFQUFFSSxLQUFLLEVBQUVXO3dCQUFlO2lFQUMvRHJDLElBQUk7a0VBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRUwsSUFBSSxHQUFHTSxFQUFFTixJQUFJO2dFQUFDLENBQUMsRUFBRTtnQkFFdkMsTUFBTW1ELFVBQVVGLGNBQ1g5QixNQUFNO2tFQUFDTyxDQUFBQSxJQUFLQSxFQUFFakMsSUFBSSxLQUFLO2lFQUN2QjJCLEdBQUc7a0VBQUNNLENBQUFBLElBQU07NEJBQUVBOzRCQUFHMUIsTUFBTVMsYUFBYSxLQUFLaUIsRUFBRUksS0FBSyxFQUFFVzt3QkFBZTtpRUFDL0RyQyxJQUFJO2tFQUFDLENBQUNDLEdBQUdDLElBQU1ELEVBQUVMLElBQUksR0FBR00sRUFBRU4sSUFBSTtnRUFBQyxDQUFDLEVBQUU7Z0JBRXZDLHdEQUF3RDtnQkFDeEQsTUFBTW9EOzhFQUFjLENBQUNDLGVBQWVDO3dCQUNoQyxNQUFNQyxRQUFRRixpQkFBaUI3Rjt3QkFDL0IsTUFBTWdHLE9BQU8sQ0FBQyxDQUFDRixVQUFVQSxPQUFPdEQsSUFBSSxJQUFJekM7d0JBQ3hDLElBQUksQ0FBQ2dHLFNBQVMsQ0FBQ0MsTUFBTSxPQUFPO3dCQUM1QixJQUFJRCxTQUFTLENBQUNDLE1BQU0sT0FBTzs0QkFBRUMsUUFBUTt3QkFBVTt3QkFDL0MsSUFBSSxDQUFDRixTQUFTQyxNQUFNLE9BQU87NEJBQUVDLFFBQVE7NEJBQVlDLE1BQU1KO3dCQUFPO3dCQUU5RCxpREFBaUQ7d0JBQ2pELE1BQU1LLGlCQUFpQixPQUFRM0QsSUFBSSxHQUFHakQsc0JBQXVCc0c7d0JBQzdELE9BQU9NLGlCQUNEOzRCQUFFRixRQUFROzRCQUFZQyxNQUFNSjt3QkFBTyxJQUNuQzs0QkFBRUcsUUFBUTt3QkFBVTtvQkFDOUI7O2dCQUVBLE1BQU1HLFlBQVlSLFlBQVlMLFVBQVVHO2dCQUN4QyxNQUFNVyxZQUFZVCxZQUFZSixVQUFVRztnQkFHeEMsTUFBTVc7NEVBQVksQ0FBQ3JFLE1BQU1zRTt3QkFDckIsSUFBSSxDQUFDQSxVQUFVLE9BQU87NEJBQUVDLFNBQVM7d0JBQU07d0JBQ3ZDLE1BQU1DLFFBQVFyRCxLQUFLSSxhQUFhLENBQUM7NEJBQUVDLFlBQVlKO3dCQUFNO3dCQUVyRCxJQUFJa0QsU0FBU04sTUFBTSxLQUFLLFdBQVc7NEJBQy9CLElBQUloRSxTQUFTLEtBQUs7Z0NBQ2QsTUFBTWtDLEtBQUtzQyxNQUFNekYsQ0FBQyxHQUFHeUYsTUFBTTdFLEtBQUssR0FBRztnQ0FDbkN3QixLQUFLcEMsQ0FBQyxDQUFDb0MsS0FBS3BDLENBQUMsS0FBSyxDQUFDb0UsUUFBUWpCLEVBQUMsSUFBS2xFOzRCQUNyQyxPQUFPO2dDQUNILE1BQU1tRSxLQUFLcUMsTUFBTXBGLENBQUMsR0FBR29GLE1BQU1uRixNQUFNLEdBQUc7Z0NBQ3BDOEIsS0FBSy9CLENBQUMsQ0FBQytCLEtBQUsvQixDQUFDLEtBQUssQ0FBQ2dFLFFBQVFqQixFQUFDLElBQUtuRTs0QkFDckM7NEJBQ0EsT0FBTztnQ0FBRXVHLFNBQVM7Z0NBQU1QLFFBQVE7NEJBQVU7d0JBQzlDO3dCQUVBLE1BQU10RCxRQUFRWCxjQUFjQyxNQUFNc0UsU0FBU0wsSUFBSSxDQUFDaEMsQ0FBQyxDQUFDSSxLQUFLLEVBQUVtQzt3QkFDekQsSUFBSXhFLFNBQVMsS0FBS21CLEtBQUtwQyxDQUFDLENBQUNvQyxLQUFLcEMsQ0FBQyxLQUFLMkIsUUFBUXpDOzZCQUN2Q2tELEtBQUsvQixDQUFDLENBQUMrQixLQUFLL0IsQ0FBQyxLQUFLc0IsUUFBUXpDO3dCQUMvQixPQUFPOzRCQUFFc0csU0FBUzs0QkFBTVAsUUFBUTs0QkFBWUMsTUFBTUssU0FBU0wsSUFBSTt3QkFBQztvQkFDcEU7O2dCQUVBLE1BQU1RLFdBQVdKLFVBQVUsS0FBS0Y7Z0JBQ2hDLE1BQU1PLFdBQVdMLFVBQVUsS0FBS0Q7Z0JBRWhDLDBEQUEwRDtnQkFDMUQsTUFBTU8sZUFBZXhELEtBQUtJLGFBQWEsQ0FBQztvQkFBRUMsWUFBWUo7Z0JBQU07Z0JBQzVELE1BQU13RCxjQUFjRCxhQUFhNUYsQ0FBQyxHQUFHNEYsYUFBYWhGLEtBQUssR0FBRztnQkFDMUQsTUFBTWtGLGNBQWNGLGFBQWF2RixDQUFDLEdBQUd1RixhQUFhdEYsTUFBTSxHQUFHO2dCQUUzRCxxRUFBcUU7Z0JBQ3JFLElBQ0lvRixTQUFTRixPQUFPLElBQ2hCRSxTQUFTVCxNQUFNLEtBQUssYUFDcEJ4RCxLQUFLQyxHQUFHLENBQUNtRSxjQUFjekIsVUFBVXpGLHNCQUNuQztvQkFDRTJGLE1BQU1qQixJQUFJLENBQUM7d0JBQ1BFLE1BQU07d0JBQ05FLFVBQVU7d0JBQ1ZDLE9BQU87d0JBQ1BxQyxRQUFROzRCQUFDM0I7NEJBQU9EOzRCQUFNQzs0QkFBT0QsT0FBT0QsUUFBUTFFLE1BQU07eUJBQUM7b0JBQ3ZEO2dCQUNKO2dCQUNBLElBQ0ltRyxTQUFTSCxPQUFPLElBQ2hCRyxTQUFTVixNQUFNLEtBQUssYUFDcEJ4RCxLQUFLQyxHQUFHLENBQUNvRSxjQUFjekIsVUFBVTFGLHNCQUNuQztvQkFDRTJGLE1BQU1qQixJQUFJLENBQUM7d0JBQ1BFLE1BQU07d0JBQ05FLFVBQVU7d0JBQ1ZDLE9BQU87d0JBQ1BxQyxRQUFROzRCQUFDOzRCQUFHMUI7NEJBQU9wRzs0QkFBYW9HO3lCQUFNO29CQUMxQztnQkFDSjtnQkFFQSxJQUFJcUIsU0FBU0YsT0FBTyxJQUFJRSxTQUFTVCxNQUFNLEtBQUssY0FBY1MsU0FBU1IsSUFBSSxFQUFFaEMsR0FBR00sV0FBVztvQkFDbkZjLE1BQU1qQixJQUFJLENBQUM7d0JBQ1BFLE1BQU07d0JBQ05FLFVBQVU7d0JBQ1ZDLE9BQU87d0JBQ1BxQyxRQUFRaEcsY0FBYzJGLFNBQVNSLElBQUksQ0FBQ2hDLENBQUMsQ0FBQ0ksS0FBSyxFQUFFc0MsY0FBY0YsU0FBU1IsSUFBSSxDQUFDaEMsQ0FBQyxDQUFDTSxTQUFTO29CQUN4RjtnQkFDSjtnQkFDQSxJQUFJbUMsU0FBU0gsT0FBTyxJQUFJRyxTQUFTVixNQUFNLEtBQUssY0FBY1UsU0FBU1QsSUFBSSxFQUFFaEMsR0FBR00sV0FBVztvQkFDbkZjLE1BQU1qQixJQUFJLENBQUM7d0JBQ1BFLE1BQU07d0JBQ05FLFVBQVU7d0JBQ1ZDLE9BQU87d0JBQ1BxQyxRQUFRckYsZ0JBQWdCaUYsU0FBU1QsSUFBSSxDQUFDaEMsQ0FBQyxDQUFDSSxLQUFLLEVBQUVzQyxjQUFjRCxTQUFTVCxJQUFJLENBQUNoQyxDQUFDLENBQUNNLFNBQVM7b0JBQzFGO2dCQUNKO2dCQUdBMUUsY0FBY3dGO1lBQ2xCLEVBQUUsT0FBTzBCLEdBQUc7WUFDUixvQ0FBb0M7WUFDeEM7UUFDSjtxREFBRztRQUNDL0g7UUFBYUM7UUFDYkM7UUFBY0c7UUFBbUJFO1FBQ2pDSTtRQUNBYTtRQUF3Qk47UUFDeEJmO1FBQXFCQztRQUFxQkU7UUFDMUNFO1FBQXFCQztRQUFxQkM7S0FDN0M7SUFFRCxNQUFNc0gsZUFBZWxJLGtEQUFXQTtzREFBQyxJQUFNZSxjQUFjLEVBQUU7cURBQUcsRUFBRTtJQUM1RCxNQUFNb0gsb0JBQW9Cbkksa0RBQVdBOzJEQUFDLElBQU1lLGNBQWMsRUFBRTswREFBRyxFQUFFO0lBRWpFLE9BQU87UUFDSEQ7UUFDQThFO1FBQ0FzQztRQUNBQztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcaG9va3NcXHVzZUd1aWFzQ2VudHJhZG8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaG9va3MvdXNlR3VpYXNDZW50cmFkby5qc1xyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbi8qKlxuICogR3XDrWFzIGNvbjpcbiAqIC0gU2VjY2nDs246IG11ZXN0cmEgQ1gvQ1kgc29sbyBjdWFuZG8gZWwgZWxlbWVudG8gcXVlZMOzIGNlbnRyYWRvLlxuICogLSBFbGVtZW50b3M6IFNPTE8gbWlzbWEgc2VjY2nDs24sIGzDrW5lYXMgcHVudGVhZGFzIHRpcG8gXCJyZWFjaFwiIGhhc3RhIGVsIG90cm8gZWxlbWVudG8uXG4gKiAtIE5hZGEgZGUgb3RyYXMgc2VjY2lvbmVzLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VHdWlhc0NlbnRyYWRvKHtcbiAgICBhbmNob0NhbnZhcyA9IDgwMCxcbiAgICBhbHRvQ2FudmFzID0gODAwLFxuICAgIG1hZ25ldFJhZGl1cyA9IDE2LCAgICAgICAvLyBkaXN0YW5jaWEgcGFyYSBhY3RpdmFyIGVsIHNuYXBcbiAgICBlbGVtZW50TWFnbmV0UmFkaXVzID0gbnVsbCwgICAvLyBudWxsID0+IG1hZ25ldFJhZGl1c1xuICAgIHNlY3Rpb25NYWduZXRSYWRpdXMgPSBudWxsLCAgIC8vIG51bGwgPT4gbWFnbmV0UmFkaXVzXG4gICAgc2VjdGlvblNob3dSYWRpdXMgPSAxOCwgIC8vIGxlZ2FkbyAobm8gdXNhZG8gcGFyYSBtb3N0cmFyIGzDrW5lYXMgZGUgc2VjY2nDs24pXG4gICAgc2VjdGlvblByaW9yaXR5QmlhcyA9IDQsICAgICAgLy8gdmVudGFqYSBleHRyYSBwYXJhIHF1ZSBnYW5lIHNlY2Npw7NuIHZzIGVsZW1lbnRvc1xuICAgIHNuYXBTdHJlbmd0aCA9IDEsICAgICAgICAvLyAxID0gcGVnYWRvIGV4YWN0bzsgMC40LTAuNiA9IHRyYWNjacOzbiBzdWF2ZVxuICAgIHNlY3Rpb25TbmFwU3RyZW5ndGggPSBudWxsLCAgIC8vIG51bGwgPT4gc25hcFN0cmVuZ3RoXG4gICAgZWxlbWVudFNuYXBTdHJlbmd0aCA9IG51bGwsICAgLy8gbnVsbCA9PiBzbmFwU3RyZW5ndGhcbiAgICBzZWN0aW9uTGluZVRvbGVyYW5jZSA9IDAuNzUsICAvLyBzb2xvIG1vc3RyYXIgZ3XDrWEgZGUgc2VjY2nDs24gY3VhbmRvIGVzdMOhIHJlYWxtZW50ZSBjZW50cmFkb1xuICAgIHNlY2Npb25lc09yZGVuYWRhcyA9IFtdXG59KSB7XG4gICAgY29uc3QgW2d1aWFMaW5lYXMsIHNldEd1aWFMaW5lYXNdID0gdXNlU3RhdGUoW10pO1xyXG5cclxuXHJcbiAgICBjb25zdCBlZmZFbGVtZW50TWFnbmV0UmFkaXVzID0gZWxlbWVudE1hZ25ldFJhZGl1cyA/PyBtYWduZXRSYWRpdXM7XG4gICAgY29uc3QgZWZmU2VjdGlvbk1hZ25ldFJhZGl1cyA9IHNlY3Rpb25NYWduZXRSYWRpdXMgPz8gbWFnbmV0UmFkaXVzO1xuICAgIGNvbnN0IGVmZlNlY3Rpb25TbmFwU3RyZW5ndGggPSBzZWN0aW9uU25hcFN0cmVuZ3RoID8/IHNuYXBTdHJlbmd0aDtcbiAgICBjb25zdCBlZmZFbGVtZW50U25hcFN0cmVuZ3RoID0gZWxlbWVudFNuYXBTdHJlbmd0aCA/PyBzbmFwU3RyZW5ndGg7XG5cclxuXHJcbiAgICAvLyAtLS0tIFV0aWxpZGFkZXMgZGUgc2VjY2lvbmVzIC0tLS1cclxuICAgIGNvbnN0IGNhbGN1bGFyT2Zmc2V0U2VjY2lvbiA9IHVzZUNhbGxiYWNrKChzZWNjaW9uSWQpID0+IHtcclxuICAgICAgICBsZXQgb2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHNlY2Npb25lc09yZGVuYWRhcykge1xyXG4gICAgICAgICAgICBpZiAocy5pZCA9PT0gc2VjY2lvbklkKSBicmVhaztcclxuICAgICAgICAgICAgb2Zmc2V0WSArPSBzLmFsdHVyYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9mZnNldFk7XHJcbiAgICB9LCBbc2VjY2lvbmVzT3JkZW5hZGFzXSk7XHJcblxyXG4gICAgY29uc3Qgb2J0ZW5lclNlY2Npb25FbGVtZW50byA9IHVzZUNhbGxiYWNrKChvYmpJZCwgb2JqZXRvcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IG9iamV0b3MuZmluZChvID0+IG8uaWQgPT09IG9iaklkKTtcclxuICAgICAgICBpZiAoIW9iaj8uc2VjY2lvbklkKSByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmQocyA9PiBzLmlkID09PSBvYmouc2VjY2lvbklkKSB8fCBudWxsO1xyXG4gICAgfSwgW3NlY2Npb25lc09yZGVuYWRhc10pO1xyXG5cclxuICAgIC8vIC0tLS0gU2VnbWVudG9zIFwicmVhY2hcIiBlbnRyZSBjYWphcyAodmEgaGFzdGEgZWwgb3RybyBlbGVtZW50bykgLS0tLVxyXG4gICAgY29uc3QgcmVhY2hWZXJ0aWNhbCA9ICh4LCBzZWxmQm94LCBvdGhlckJveCwgZ2FwID0gNikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGZDeSA9IHNlbGZCb3gueSArIHNlbGZCb3guaGVpZ2h0IC8gMjtcclxuICAgICAgICBjb25zdCBvdGhlckN5ID0gb3RoZXJCb3gueSArIG90aGVyQm94LmhlaWdodCAvIDI7XHJcbiAgICAgICAgbGV0IHkxLCB5MjtcclxuICAgICAgICBpZiAob3RoZXJDeSA8PSBzZWxmQ3kpIHtcclxuICAgICAgICAgICAgeTEgPSBvdGhlckJveC55ICsgb3RoZXJCb3guaGVpZ2h0ICsgZ2FwOyAvLyBkZXNkZSBib3JkZSBpbmZlcmlvciBkZWwgb3Ryb1xyXG4gICAgICAgICAgICB5MiA9IHNlbGZCb3gueSAtIGdhcDsgICAgICAgICAgICAgICAgICAgICAvLyBoYXN0YSBib3JkZSBzdXBlcmlvciBkZWwgc2VsZlxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHkxID0gc2VsZkJveC55ICsgc2VsZkJveC5oZWlnaHQgKyBnYXA7XHJcbiAgICAgICAgICAgIHkyID0gb3RoZXJCb3gueSAtIGdhcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFt4LCB5MSwgeCwgeTJdO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCByZWFjaEhvcml6b250YWwgPSAoeSwgc2VsZkJveCwgb3RoZXJCb3gsIGdhcCA9IDYpID0+IHtcclxuICAgICAgICBjb25zdCBzZWxmQ3ggPSBzZWxmQm94LnggKyBzZWxmQm94LndpZHRoIC8gMjtcclxuICAgICAgICBjb25zdCBvdGhlckN4ID0gb3RoZXJCb3gueCArIG90aGVyQm94LndpZHRoIC8gMjtcclxuICAgICAgICBsZXQgeDEsIHgyO1xyXG4gICAgICAgIGlmIChvdGhlckN4IDw9IHNlbGZDeCkge1xyXG4gICAgICAgICAgICB4MSA9IG90aGVyQm94LnggKyBvdGhlckJveC53aWR0aCArIGdhcDsgLy8gZGVzZGUgYm9yZGUgZGVyZWNobyBkZWwgb3Ryb1xyXG4gICAgICAgICAgICB4MiA9IHNlbGZCb3gueCAtIGdhcDsgICAgICAgICAgICAgICAgICAgIC8vIGhhc3RhIGJvcmRlIGl6cXVpZXJkbyBkZWwgc2VsZlxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHgxID0gc2VsZkJveC54ICsgc2VsZkJveC53aWR0aCArIGdhcDtcclxuICAgICAgICAgICAgeDIgPSBvdGhlckJveC54IC0gZ2FwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3gxLCB5LCB4MiwgeV07XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0gRGVsdGEgcGFyYSBhbGluZWFyIGEgbGEgZ3XDrWEgbcOhcyBjZXJjYW5hIC0tLS1cclxuICAgIGNvbnN0IGRlbHRhRm9yR3VpZGUgPSAoYXhpcywgZ3VpZGVWYWx1ZSwgYm94KSA9PiB7XHJcbiAgICAgICAgaWYgKGF4aXMgPT09IFwieFwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC54ICsgYm94LndpZHRoIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgbGVmdCA9IGJveC54O1xyXG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGJveC54ICsgYm94LndpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBvcHRzID0gW1xyXG4gICAgICAgICAgICAgICAgeyBkaXN0OiBNYXRoLmFicyhjZW50ZXIgLSBndWlkZVZhbHVlKSwgZGVsdGE6IGd1aWRlVmFsdWUgLSBjZW50ZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgZGlzdDogTWF0aC5hYnMobGVmdCAtIGd1aWRlVmFsdWUpLCBkZWx0YTogZ3VpZGVWYWx1ZSAtIGxlZnQgfSxcclxuICAgICAgICAgICAgICAgIHsgZGlzdDogTWF0aC5hYnMocmlnaHQgLSBndWlkZVZhbHVlKSwgZGVsdGE6IGd1aWRlVmFsdWUgLSByaWdodCB9LFxyXG4gICAgICAgICAgICBdLnNvcnQoKGEsIGIpID0+IGEuZGlzdCAtIGIuZGlzdClbMF07XHJcbiAgICAgICAgICAgIHJldHVybiBvcHRzLmRlbHRhO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC55ICsgYm94LmhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IGJveC55O1xyXG4gICAgICAgICAgICBjb25zdCBib3R0b20gPSBib3gueSArIGJveC5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdHMgPSBbXHJcbiAgICAgICAgICAgICAgICB7IGRpc3Q6IE1hdGguYWJzKGNlbnRlciAtIGd1aWRlVmFsdWUpLCBkZWx0YTogZ3VpZGVWYWx1ZSAtIGNlbnRlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBkaXN0OiBNYXRoLmFicyh0b3AgLSBndWlkZVZhbHVlKSwgZGVsdGE6IGd1aWRlVmFsdWUgLSB0b3AgfSxcclxuICAgICAgICAgICAgICAgIHsgZGlzdDogTWF0aC5hYnMoYm90dG9tIC0gZ3VpZGVWYWx1ZSksIGRlbHRhOiBndWlkZVZhbHVlIC0gYm90dG9tIH0sXHJcbiAgICAgICAgICAgIF0uc29ydCgoYSwgYikgPT4gYS5kaXN0IC0gYi5kaXN0KVswXTtcclxuICAgICAgICAgICAgcmV0dXJuIG9wdHMuZGVsdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBNaXNtYSBoZXVyw61zdGljYSBxdWUgZGVsdGFGb3JHdWlkZSwgcGVybyBkZXZ1ZWx2ZSBkaXN0YW5jaWEgbcOtbmltYVxyXG4gICAgY29uc3QgZGlzdEZvckd1aWRlID0gKGF4aXMsIGd1aWRlVmFsdWUsIGJveCkgPT4ge1xyXG4gICAgICAgIGlmIChheGlzID09PSBcInhcIikge1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBib3gueCArIGJveC53aWR0aCAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBib3gueDtcclxuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBib3gueCArIGJveC53aWR0aDtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoY2VudGVyIC0gZ3VpZGVWYWx1ZSksXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhsZWZ0IC0gZ3VpZGVWYWx1ZSksXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhyaWdodCAtIGd1aWRlVmFsdWUpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC55ICsgYm94LmhlaWdodCAvIDI7XHJcbiAgICAgICAgY29uc3QgdG9wID0gYm94Lnk7XHJcbiAgICAgICAgY29uc3QgYm90dG9tID0gYm94LnkgKyBib3guaGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1pbihcclxuICAgICAgICAgICAgTWF0aC5hYnMoY2VudGVyIC0gZ3VpZGVWYWx1ZSksXHJcbiAgICAgICAgICAgIE1hdGguYWJzKHRvcCAtIGd1aWRlVmFsdWUpLFxyXG4gICAgICAgICAgICBNYXRoLmFicyhib3R0b20gLSBndWlkZVZhbHVlKVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIC0tLS0gQ2FuZGlkYXRvcyBkZSBsYSBNSVNNQSBzZWNjacOzbiAoY2VudHJvcyArIGJvcmRlcykgLS0tLVxyXG4gICAgY29uc3QgYnVpbGRTYW1lU2VjdGlvbkd1aWRlcyA9IChub2RlLCBzdGFnZSwgb2JqZXRvcywgZWxlbWVudFJlZnMsIGlkU2VsZiwgc2VjY2lvbklkKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VsZkJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCh7IHJlbGF0aXZlVG86IHN0YWdlIH0pO1xyXG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBvYmpldG9zXHJcbiAgICAgICAgICAgIC5maWx0ZXIobyA9PiBvLmlkICE9PSBpZFNlbGYgJiYgby5zZWNjaW9uSWQgPT09IHNlY2Npb25JZCkgLy8g8J+UkiBNSVNNQSBTRUNDScOTTlxyXG4gICAgICAgICAgICAubWFwKG8gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltvLmlkXTtcclxuICAgICAgICAgICAgICAgIGlmICghbikgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBuLmdldENsaWVudFJlY3QoeyByZWxhdGl2ZVRvOiBzdGFnZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gTWF0aC5hYnMoKHNlbGZCb3gueCArIHNlbGZCb3gud2lkdGggLyAyKSAtIChiLnggKyBiLndpZHRoIC8gMikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgTWF0aC5hYnMoKHNlbGZCb3gueSArIHNlbGZCb3guaGVpZ2h0IC8gMikgLSAoYi55ICsgYi5oZWlnaHQgLyAyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYm94OiBiLCBkIH07XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHsgcmV0dXJuIG51bGw7IH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kIC0gYi5kKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgMyk7IC8vIHBvY29zIHZlY2lub3Mg4oaSIG1lbm9zIHJ1aWRvXHJcblxyXG4gICAgICAgIGNvbnN0IGcgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHsgYm94IH0gb2YgY2FuZGlkYXRlcykge1xyXG4gICAgICAgICAgICBjb25zdCBjeCA9IGJveC54ICsgYm94LndpZHRoIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgY3kgPSBib3gueSArIGJveC5oZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gYm94Lng7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYm94LnggKyBib3gud2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IGJveC55O1xyXG4gICAgICAgICAgICBjb25zdCBib3R0b20gPSBib3gueSArIGJveC5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAvLyBDZW50cm9zXHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieFwiLCB2YWx1ZTogY3gsIHR5cGU6IFwiZWwtY3hcIiwgdGFyZ2V0Qm94OiBib3gsIHByaW9yaXR5OiBcImVsZW1lbnRvXCIsIHN0eWxlOiBcImRhc2hlZFwiIH0pO1xyXG4gICAgICAgICAgICBnLnB1c2goeyBheGlzOiBcInlcIiwgdmFsdWU6IGN5LCB0eXBlOiBcImVsLWN5XCIsIHRhcmdldEJveDogYm94LCBwcmlvcml0eTogXCJlbGVtZW50b1wiLCBzdHlsZTogXCJkYXNoZWRcIiB9KTtcclxuICAgICAgICAgICAgLy8gQm9yZGVzXHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieFwiLCB2YWx1ZTogbGVmdCwgdHlwZTogXCJlbC1sZWZ0XCIsIHRhcmdldEJveDogYm94LCBwcmlvcml0eTogXCJlbGVtZW50b1wiLCBzdHlsZTogXCJkYXNoZWRcIiB9KTtcclxuICAgICAgICAgICAgZy5wdXNoKHsgYXhpczogXCJ4XCIsIHZhbHVlOiByaWdodCwgdHlwZTogXCJlbC1yaWdodFwiLCB0YXJnZXRCb3g6IGJveCwgcHJpb3JpdHk6IFwiZWxlbWVudG9cIiwgc3R5bGU6IFwiZGFzaGVkXCIgfSk7XHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieVwiLCB2YWx1ZTogdG9wLCB0eXBlOiBcImVsLXRvcFwiLCB0YXJnZXRCb3g6IGJveCwgcHJpb3JpdHk6IFwiZWxlbWVudG9cIiwgc3R5bGU6IFwiZGFzaGVkXCIgfSk7XHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieVwiLCB2YWx1ZTogYm90dG9tLCB0eXBlOiBcImVsLWJvdHRvbVwiLCB0YXJnZXRCb3g6IGJveCwgcHJpb3JpdHk6IFwiZWxlbWVudG9cIiwgc3R5bGU6IFwiZGFzaGVkXCIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyAtLS0tIE1vc3RyYXIgZ3XDrWFzIGR1cmFudGUgZWwgZHJhZyAtLS0tXHJcbiAgICBjb25zdCBtb3N0cmFyR3VpYXMgPSB1c2VDYWxsYmFjaygocG9zLCBpZEFjdHVhbCwgb2JqZXRvcywgZWxlbWVudFJlZnMpID0+IHtcclxuICAgICAgICAvLyDwn5SlIE5PIG1vc3RyYXIgZ3XDrWFzIGR1cmFudGUgZHJhZyBncnVwYWxcclxuICAgICAgICBpZiAod2luZG93Ll9ncnVwb0xpZGVyKSB7XHJcbiAgICAgICAgICAgIHNldEd1aWFMaW5lYXMoW10pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50Py5baWRBY3R1YWxdO1xyXG4gICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHN0YWdlID0gbm9kZS5nZXRTdGFnZT8uKCk7XHJcbiAgICAgICAgaWYgKCFzdGFnZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxmQm94QmVmb3JlID0gbm9kZS5nZXRDbGllbnRSZWN0KHsgcmVsYXRpdmVUbzogc3RhZ2UgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGZDeCA9IHNlbGZCb3hCZWZvcmUueCArIHNlbGZCb3hCZWZvcmUud2lkdGggLyAyO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxmQ3kgPSBzZWxmQm94QmVmb3JlLnkgKyBzZWxmQm94QmVmb3JlLmhlaWdodCAvIDI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWNjaW9uID0gb2J0ZW5lclNlY2Npb25FbGVtZW50byhpZEFjdHVhbCwgb2JqZXRvcyk7XHJcbiAgICAgICAgICAgIGlmICghc2VjY2lvbikge1xyXG4gICAgICAgICAgICAgICAgc2V0R3VpYUxpbmVhcyhbXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb2ZmWSA9IGNhbGN1bGFyT2Zmc2V0U2VjY2lvbihzZWNjaW9uLmlkKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjQ3ggPSBhbmNob0NhbnZhcyAvIDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY0N5ID0gb2ZmWSArIHNlY2Npb24uYWx0dXJhIC8gMjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyAxKSBTRUNDScOTTjogZWwgc25hcCBldmFsw7phIGVsIGNlbnRybyBkZSBsYSBzZWNjacOzbi5cbiAgICAgICAgICAgIGNvbnN0IGRpc3RTZWNYID0gTWF0aC5hYnMoc2VsZkN4IC0gc2VjQ3gpO1xuICAgICAgICAgICAgY29uc3QgZGlzdFNlY1kgPSBNYXRoLmFicyhzZWxmQ3kgLSBzZWNDeSk7XG5cclxuICAgICAgICAgICAgLy8gMikgRUxFTUVOVE9TIChNSVNNQSBTRUNDScOTTik6IGVsZWdpciBtZWpvciBjYW5kaWRhdG8gcG9yIGVqZVxyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50R3VpZGVzID0gYnVpbGRTYW1lU2VjdGlvbkd1aWRlcyhub2RlLCBzdGFnZSwgb2JqZXRvcywgZWxlbWVudFJlZnMsIGlkQWN0dWFsLCBzZWNjaW9uLmlkKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJlc3RFbFggPSBlbGVtZW50R3VpZGVzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGcgPT4gZy5heGlzID09PSBcInhcIilcclxuICAgICAgICAgICAgICAgIC5tYXAoZyA9PiAoeyBnLCBkaXN0OiBkaXN0Rm9yR3VpZGUoXCJ4XCIsIGcudmFsdWUsIHNlbGZCb3hCZWZvcmUpIH0pKVxyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGlzdCAtIGIuZGlzdClbMF07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBiZXN0RWxZID0gZWxlbWVudEd1aWRlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihnID0+IGcuYXhpcyA9PT0gXCJ5XCIpXHJcbiAgICAgICAgICAgICAgICAubWFwKGcgPT4gKHsgZywgZGlzdDogZGlzdEZvckd1aWRlKFwieVwiLCBnLnZhbHVlLCBzZWxmQm94QmVmb3JlKSB9KSlcclxuICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRpc3QgLSBiLmRpc3QpWzBdO1xyXG5cclxuICAgICAgICAgICAgLy8gRGVjaWRpciBxdcOpIGd1w61hIOKAnGdhbmHigJ0gcG9yIGVqZSAoc2VjY2nDs24gdnMgZWxlbWVudG8pXHJcbiAgICAgICAgICAgIGNvbnN0IGRlY2lkaXJTbmFwID0gKHNlY0Rpc3RDZW50ZXIsIGJlc3RFbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjT2sgPSBzZWNEaXN0Q2VudGVyIDw9IGVmZlNlY3Rpb25NYWduZXRSYWRpdXM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbE9rID0gISFiZXN0RWwgJiYgYmVzdEVsLmRpc3QgPD0gZWZmRWxlbWVudE1hZ25ldFJhZGl1cztcclxuICAgICAgICAgICAgICAgIGlmICghc2VjT2sgJiYgIWVsT2spIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY09rICYmICFlbE9rKSByZXR1cm4geyBzb3VyY2U6IFwic2VjY2lvblwiIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlY09rICYmIGVsT2spIHJldHVybiB7IHNvdXJjZTogXCJlbGVtZW50b1wiLCBuZWFyOiBiZXN0RWwgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBhbWJvcyBhcGxpY2FuOiBsYSBzZWNjacOzbiB0aWVuZSB2ZW50YWphIChiaWFzKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxCZWF0c1NlY3Rpb24gPSAoYmVzdEVsLmRpc3QgKyBzZWN0aW9uUHJpb3JpdHlCaWFzKSA8IHNlY0Rpc3RDZW50ZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxCZWF0c1NlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICA/IHsgc291cmNlOiBcImVsZW1lbnRvXCIsIG5lYXI6IGJlc3RFbCB9XHJcbiAgICAgICAgICAgICAgICAgICAgOiB7IHNvdXJjZTogXCJzZWNjaW9uXCIgfTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRlY2lzaW9uWCA9IGRlY2lkaXJTbmFwKGRpc3RTZWNYLCBiZXN0RWxYKTtcclxuICAgICAgICAgICAgY29uc3QgZGVjaXNpb25ZID0gZGVjaWRpclNuYXAoZGlzdFNlY1ksIGJlc3RFbFkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFwcGx5U25hcCA9IChheGlzLCBkZWNpc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkZWNpc2lvbikgcmV0dXJuIHsgc25hcHBlZDogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyZXNoID0gbm9kZS5nZXRDbGllbnRSZWN0KHsgcmVsYXRpdmVUbzogc3RhZ2UgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRlY2lzaW9uLnNvdXJjZSA9PT0gXCJzZWNjaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMgPT09IFwieFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IGZyZXNoLnggKyBmcmVzaC53aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLngobm9kZS54KCkgKyAoc2VjQ3ggLSBjeCkgKiBlZmZTZWN0aW9uU25hcFN0cmVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN5ID0gZnJlc2gueSArIGZyZXNoLmhlaWdodCAvIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnkobm9kZS55KCkgKyAoc2VjQ3kgLSBjeSkgKiBlZmZTZWN0aW9uU25hcFN0cmVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzbmFwcGVkOiB0cnVlLCBzb3VyY2U6IFwic2VjY2lvblwiIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBkZWx0YUZvckd1aWRlKGF4aXMsIGRlY2lzaW9uLm5lYXIuZy52YWx1ZSwgZnJlc2gpO1xuICAgICAgICAgICAgICAgIGlmIChheGlzID09PSBcInhcIikgbm9kZS54KG5vZGUueCgpICsgZGVsdGEgKiBlZmZFbGVtZW50U25hcFN0cmVuZ3RoKTtcbiAgICAgICAgICAgICAgICBlbHNlIG5vZGUueShub2RlLnkoKSArIGRlbHRhICogZWZmRWxlbWVudFNuYXBTdHJlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc25hcHBlZDogdHJ1ZSwgc291cmNlOiBcImVsZW1lbnRvXCIsIG5lYXI6IGRlY2lzaW9uLm5lYXIgfTtcbiAgICAgICAgICAgIH07XG5cclxuICAgICAgICAgICAgY29uc3Qgc25hcFJlc1ggPSBhcHBseVNuYXAoXCJ4XCIsIGRlY2lzaW9uWCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNuYXBSZXNZID0gYXBwbHlTbmFwKFwieVwiLCBkZWNpc2lvblkpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVjYWxjdWxhciBib3ggbHVlZ28gZGVsIHNuYXAgcGFyYSBkaWJ1amFyIHJlYWNoIGV4YWN0YVxuICAgICAgICAgICAgY29uc3Qgc2VsZkJveEFmdGVyID0gbm9kZS5nZXRDbGllbnRSZWN0KHsgcmVsYXRpdmVUbzogc3RhZ2UgfSk7XG4gICAgICAgICAgICBjb25zdCBzZWxmQ3hBZnRlciA9IHNlbGZCb3hBZnRlci54ICsgc2VsZkJveEFmdGVyLndpZHRoIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IHNlbGZDeUFmdGVyID0gc2VsZkJveEFmdGVyLnkgKyBzZWxmQm94QWZ0ZXIuaGVpZ2h0IC8gMjtcblxuICAgICAgICAgICAgLy8gMikgU0VDQ0nDk046IG1vc3RyYXIgZ3XDrWEgU09MTyBjdWFuZG8gcXVlZMOzIGVmZWN0aXZhbWVudGUgYWxpbmVhZG8uXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgc25hcFJlc1guc25hcHBlZCAmJlxuICAgICAgICAgICAgICAgIHNuYXBSZXNYLnNvdXJjZSA9PT0gXCJzZWNjaW9uXCIgJiZcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhzZWxmQ3hBZnRlciAtIHNlY0N4KSA8PSBzZWN0aW9uTGluZVRvbGVyYW5jZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2VjY2lvbi1jeFwiLFxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogXCJzZWNjaW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcInNvbGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogW3NlY0N4LCBvZmZZLCBzZWNDeCwgb2ZmWSArIHNlY2Npb24uYWx0dXJhXVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHNuYXBSZXNZLnNuYXBwZWQgJiZcbiAgICAgICAgICAgICAgICBzbmFwUmVzWS5zb3VyY2UgPT09IFwic2VjY2lvblwiICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoc2VsZkN5QWZ0ZXIgLSBzZWNDeSkgPD0gc2VjdGlvbkxpbmVUb2xlcmFuY2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNlY2Npb24tY3lcIixcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IFwic2VjY2lvblwiLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJzb2xpZFwiLFxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IFswLCBzZWNDeSwgYW5jaG9DYW52YXMsIHNlY0N5XVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc25hcFJlc1guc25hcHBlZCAmJiBzbmFwUmVzWC5zb3VyY2UgPT09IFwiZWxlbWVudG9cIiAmJiBzbmFwUmVzWC5uZWFyPy5nPy50YXJnZXRCb3gpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFjaC14XCIsXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiBcImVsZW1lbnRvXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcImRhc2hlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogcmVhY2hWZXJ0aWNhbChzbmFwUmVzWC5uZWFyLmcudmFsdWUsIHNlbGZCb3hBZnRlciwgc25hcFJlc1gubmVhci5nLnRhcmdldEJveClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzbmFwUmVzWS5zbmFwcGVkICYmIHNuYXBSZXNZLnNvdXJjZSA9PT0gXCJlbGVtZW50b1wiICYmIHNuYXBSZXNZLm5lYXI/Lmc/LnRhcmdldEJveCkge1xyXG4gICAgICAgICAgICAgICAgbGluZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFjaC15XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IFwiZWxlbWVudG9cIixcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJkYXNoZWRcIixcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IHJlYWNoSG9yaXpvbnRhbChzbmFwUmVzWS5uZWFyLmcudmFsdWUsIHNlbGZCb3hBZnRlciwgc25hcFJlc1kubmVhci5nLnRhcmdldEJveClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgc2V0R3VpYUxpbmVhcyhsaW5lcyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBzaWxlbmNpb3NvIHBhcmEgbm8gY29ydGFyIGVsIGRyYWdcclxuICAgICAgICB9XHJcbiAgICB9LCBbXG4gICAgICAgIGFuY2hvQ2FudmFzLCBhbHRvQ2FudmFzLFxuICAgICAgICBtYWduZXRSYWRpdXMsIHNlY3Rpb25TaG93UmFkaXVzLCBzbmFwU3RyZW5ndGgsXG4gICAgICAgIHNlY2Npb25lc09yZGVuYWRhcyxcbiAgICAgICAgb2J0ZW5lclNlY2Npb25FbGVtZW50bywgY2FsY3VsYXJPZmZzZXRTZWNjaW9uLFxuICAgICAgICBlbGVtZW50TWFnbmV0UmFkaXVzLCBzZWN0aW9uTWFnbmV0UmFkaXVzLCBzZWN0aW9uUHJpb3JpdHlCaWFzLFxuICAgICAgICBzZWN0aW9uU25hcFN0cmVuZ3RoLCBlbGVtZW50U25hcFN0cmVuZ3RoLCBzZWN0aW9uTGluZVRvbGVyYW5jZVxuICAgIF0pO1xuXHJcbiAgICBjb25zdCBsaW1waWFyR3VpYXMgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRHdWlhTGluZWFzKFtdKSwgW10pO1xyXG4gICAgY29uc3QgY29uZmlndXJhckRyYWdFbmQgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRHdWlhTGluZWFzKFtdKSwgW10pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3VpYUxpbmVhcyxcclxuICAgICAgICBtb3N0cmFyR3VpYXMsXHJcbiAgICAgICAgbGltcGlhckd1aWFzLFxyXG4gICAgICAgIGNvbmZpZ3VyYXJEcmFnRW5kXHJcbiAgICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlR3VpYXNDZW50cmFkbyIsImFuY2hvQ2FudmFzIiwiYWx0b0NhbnZhcyIsIm1hZ25ldFJhZGl1cyIsImVsZW1lbnRNYWduZXRSYWRpdXMiLCJzZWN0aW9uTWFnbmV0UmFkaXVzIiwic2VjdGlvblNob3dSYWRpdXMiLCJzZWN0aW9uUHJpb3JpdHlCaWFzIiwic25hcFN0cmVuZ3RoIiwic2VjdGlvblNuYXBTdHJlbmd0aCIsImVsZW1lbnRTbmFwU3RyZW5ndGgiLCJzZWN0aW9uTGluZVRvbGVyYW5jZSIsInNlY2Npb25lc09yZGVuYWRhcyIsImd1aWFMaW5lYXMiLCJzZXRHdWlhTGluZWFzIiwiZWZmRWxlbWVudE1hZ25ldFJhZGl1cyIsImVmZlNlY3Rpb25NYWduZXRSYWRpdXMiLCJlZmZTZWN0aW9uU25hcFN0cmVuZ3RoIiwiZWZmRWxlbWVudFNuYXBTdHJlbmd0aCIsImNhbGN1bGFyT2Zmc2V0U2VjY2lvbiIsInNlY2Npb25JZCIsIm9mZnNldFkiLCJzIiwiaWQiLCJhbHR1cmEiLCJvYnRlbmVyU2VjY2lvbkVsZW1lbnRvIiwib2JqSWQiLCJvYmpldG9zIiwib2JqIiwiZmluZCIsIm8iLCJyZWFjaFZlcnRpY2FsIiwieCIsInNlbGZCb3giLCJvdGhlckJveCIsImdhcCIsInNlbGZDeSIsInkiLCJoZWlnaHQiLCJvdGhlckN5IiwieTEiLCJ5MiIsInJlYWNoSG9yaXpvbnRhbCIsInNlbGZDeCIsIndpZHRoIiwib3RoZXJDeCIsIngxIiwieDIiLCJkZWx0YUZvckd1aWRlIiwiYXhpcyIsImd1aWRlVmFsdWUiLCJib3giLCJjZW50ZXIiLCJsZWZ0IiwicmlnaHQiLCJvcHRzIiwiZGlzdCIsIk1hdGgiLCJhYnMiLCJkZWx0YSIsInNvcnQiLCJhIiwiYiIsInRvcCIsImJvdHRvbSIsImRpc3RGb3JHdWlkZSIsIm1pbiIsImJ1aWxkU2FtZVNlY3Rpb25HdWlkZXMiLCJub2RlIiwic3RhZ2UiLCJlbGVtZW50UmVmcyIsImlkU2VsZiIsImdldENsaWVudFJlY3QiLCJyZWxhdGl2ZVRvIiwiY2FuZGlkYXRlcyIsImZpbHRlciIsIm1hcCIsIm4iLCJjdXJyZW50IiwiZCIsIkJvb2xlYW4iLCJzbGljZSIsImciLCJjeCIsImN5IiwicHVzaCIsInZhbHVlIiwidHlwZSIsInRhcmdldEJveCIsInByaW9yaXR5Iiwic3R5bGUiLCJtb3N0cmFyR3VpYXMiLCJwb3MiLCJpZEFjdHVhbCIsIndpbmRvdyIsIl9ncnVwb0xpZGVyIiwiZ2V0U3RhZ2UiLCJzZWxmQm94QmVmb3JlIiwic2VjY2lvbiIsIm9mZlkiLCJzZWNDeCIsInNlY0N5IiwibGluZXMiLCJkaXN0U2VjWCIsImRpc3RTZWNZIiwiZWxlbWVudEd1aWRlcyIsImJlc3RFbFgiLCJiZXN0RWxZIiwiZGVjaWRpclNuYXAiLCJzZWNEaXN0Q2VudGVyIiwiYmVzdEVsIiwic2VjT2siLCJlbE9rIiwic291cmNlIiwibmVhciIsImVsQmVhdHNTZWN0aW9uIiwiZGVjaXNpb25YIiwiZGVjaXNpb25ZIiwiYXBwbHlTbmFwIiwiZGVjaXNpb24iLCJzbmFwcGVkIiwiZnJlc2giLCJzbmFwUmVzWCIsInNuYXBSZXNZIiwic2VsZkJveEFmdGVyIiwic2VsZkN4QWZ0ZXIiLCJzZWxmQ3lBZnRlciIsInBvaW50cyIsImUiLCJsaW1waWFyR3VpYXMiLCJjb25maWd1cmFyRHJhZ0VuZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useGuiasCentrado.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useImperativeObjects.js":
/*!*******************************************!*\
  !*** ./src/hooks/useImperativeObjects.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useImperativeObjects: () => (/* binding */ useImperativeObjects)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/hooks/useImperativeObjects.js\n\nfunction useImperativeObjects() {\n    const objectRefsMap = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    const pendingUpdates = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    const batchUpdateTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // 📝 Registrar un objeto con su ref - SIN LOGS\n    const registerObject = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useImperativeObjects.useCallback[registerObject]\": (id, nodeRef)=>{\n            if (nodeRef) {\n                objectRefsMap.current.set(id, nodeRef);\n            } else {\n                objectRefsMap.current.delete(id);\n            }\n        }\n    }[\"useImperativeObjects.useCallback[registerObject]\"], []);\n    // ⚡ Actualizar objeto imperativamente - SIN LOGS\n    const updateObjectImperative = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useImperativeObjects.useCallback[updateObjectImperative]\": (id, newAttrs)=>{\n            const nodeRef = objectRefsMap.current.get(id);\n            if (!nodeRef) return false;\n            try {\n                Object.entries(newAttrs).forEach({\n                    \"useImperativeObjects.useCallback[updateObjectImperative]\": ([key, value])=>{\n                        if (typeof nodeRef[key] === 'function') {\n                            nodeRef[key](value);\n                        } else if (nodeRef.attrs) {\n                            nodeRef.attrs[key] = value;\n                        }\n                    }\n                }[\"useImperativeObjects.useCallback[updateObjectImperative]\"]);\n                const layer = nodeRef.getLayer();\n                if (layer) {\n                    layer.batchDraw();\n                }\n                return true;\n            } catch (error) {\n                return false;\n            }\n        }\n    }[\"useImperativeObjects.useCallback[updateObjectImperative]\"], []);\n    // 🧹 Limpiar - SIN LOGS\n    const cleanup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useImperativeObjects.useCallback[cleanup]\": ()=>{\n            if (batchUpdateTimeoutRef.current) {\n                clearTimeout(batchUpdateTimeoutRef.current);\n            }\n            pendingUpdates.current.clear();\n            objectRefsMap.current.clear();\n        }\n    }[\"useImperativeObjects.useCallback[cleanup]\"], []);\n    // 🎯 Retornar objeto memoizado\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useImperativeObjects.useMemo\": ()=>({\n                registerObject,\n                updateObjectImperative,\n                cleanup,\n                getObjectRef: ({\n                    \"useImperativeObjects.useMemo\": (id)=>objectRefsMap.current.get(id)\n                })[\"useImperativeObjects.useMemo\"]\n            })\n    }[\"useImperativeObjects.useMemo\"], [\n        registerObject,\n        updateObjectImperative,\n        cleanup\n    ]);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useImperativeObjects);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VJbXBlcmF0aXZlT2JqZWN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxvQ0FBb0M7QUFDaUI7QUFFOUMsU0FBU0c7SUFDZCxNQUFNQyxnQkFBZ0JKLDZDQUFNQSxDQUFDLElBQUlLO0lBQ2pDLE1BQU1DLGlCQUFpQk4sNkNBQU1BLENBQUMsSUFBSUs7SUFDbEMsTUFBTUUsd0JBQXdCUCw2Q0FBTUEsQ0FBQztJQUVyQywrQ0FBK0M7SUFDL0MsTUFBTVEsaUJBQWlCUCxrREFBV0E7NERBQUMsQ0FBQ1EsSUFBSUM7WUFDdEMsSUFBSUEsU0FBUztnQkFDWE4sY0FBY08sT0FBTyxDQUFDQyxHQUFHLENBQUNILElBQUlDO1lBQ2hDLE9BQU87Z0JBQ0xOLGNBQWNPLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDSjtZQUMvQjtRQUNGOzJEQUFHLEVBQUU7SUFFTCxpREFBaUQ7SUFDakQsTUFBTUsseUJBQXlCYixrREFBV0E7b0VBQUMsQ0FBQ1EsSUFBSU07WUFDOUMsTUFBTUwsVUFBVU4sY0FBY08sT0FBTyxDQUFDSyxHQUFHLENBQUNQO1lBQzFDLElBQUksQ0FBQ0MsU0FBUyxPQUFPO1lBRXJCLElBQUk7Z0JBQ0ZPLE9BQU9DLE9BQU8sQ0FBQ0gsVUFBVUksT0FBTztnRkFBQyxDQUFDLENBQUNDLEtBQUtDLE1BQU07d0JBQzVDLElBQUksT0FBT1gsT0FBTyxDQUFDVSxJQUFJLEtBQUssWUFBWTs0QkFDdENWLE9BQU8sQ0FBQ1UsSUFBSSxDQUFDQzt3QkFDZixPQUFPLElBQUlYLFFBQVFZLEtBQUssRUFBRTs0QkFDeEJaLFFBQVFZLEtBQUssQ0FBQ0YsSUFBSSxHQUFHQzt3QkFDdkI7b0JBQ0Y7O2dCQUVBLE1BQU1FLFFBQVFiLFFBQVFjLFFBQVE7Z0JBQzlCLElBQUlELE9BQU87b0JBQ1RBLE1BQU1FLFNBQVM7Z0JBQ2pCO2dCQUVBLE9BQU87WUFDVCxFQUFFLE9BQU9DLE9BQU87Z0JBQ2QsT0FBTztZQUNUO1FBQ0Y7bUVBQUcsRUFBRTtJQUVMLHdCQUF3QjtJQUN4QixNQUFNQyxVQUFVMUIsa0RBQVdBO3FEQUFDO1lBQzFCLElBQUlNLHNCQUFzQkksT0FBTyxFQUFFO2dCQUNqQ2lCLGFBQWFyQixzQkFBc0JJLE9BQU87WUFDNUM7WUFDQUwsZUFBZUssT0FBTyxDQUFDa0IsS0FBSztZQUM1QnpCLGNBQWNPLE9BQU8sQ0FBQ2tCLEtBQUs7UUFDN0I7b0RBQUcsRUFBRTtJQUVMLCtCQUErQjtJQUMvQixPQUFPM0IsOENBQU9BO3dDQUFDLElBQU87Z0JBQ3BCTTtnQkFDQU07Z0JBQ0FhO2dCQUNBRyxZQUFZO29EQUFFLENBQUNyQixLQUFPTCxjQUFjTyxPQUFPLENBQUNLLEdBQUcsQ0FBQ1A7O1lBQ2xEO3VDQUFJO1FBQUNEO1FBQWdCTTtRQUF3QmE7S0FBUTtBQUN2RDtBQUVBLGlFQUFleEIsb0JBQW9CQSxFQUFDIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGhvb2tzXFx1c2VJbXBlcmF0aXZlT2JqZWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaG9va3MvdXNlSW1wZXJhdGl2ZU9iamVjdHMuanNcclxuaW1wb3J0IHsgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VJbXBlcmF0aXZlT2JqZWN0cygpIHtcclxuICBjb25zdCBvYmplY3RSZWZzTWFwID0gdXNlUmVmKG5ldyBNYXAoKSk7XHJcbiAgY29uc3QgcGVuZGluZ1VwZGF0ZXMgPSB1c2VSZWYobmV3IE1hcCgpKTtcclxuICBjb25zdCBiYXRjaFVwZGF0ZVRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIC8vIPCfk50gUmVnaXN0cmFyIHVuIG9iamV0byBjb24gc3UgcmVmIC0gU0lOIExPR1NcclxuICBjb25zdCByZWdpc3Rlck9iamVjdCA9IHVzZUNhbGxiYWNrKChpZCwgbm9kZVJlZikgPT4ge1xyXG4gICAgaWYgKG5vZGVSZWYpIHtcclxuICAgICAgb2JqZWN0UmVmc01hcC5jdXJyZW50LnNldChpZCwgbm9kZVJlZik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvYmplY3RSZWZzTWFwLmN1cnJlbnQuZGVsZXRlKGlkKTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIOKaoSBBY3R1YWxpemFyIG9iamV0byBpbXBlcmF0aXZhbWVudGUgLSBTSU4gTE9HU1xyXG4gIGNvbnN0IHVwZGF0ZU9iamVjdEltcGVyYXRpdmUgPSB1c2VDYWxsYmFjaygoaWQsIG5ld0F0dHJzKSA9PiB7XHJcbiAgICBjb25zdCBub2RlUmVmID0gb2JqZWN0UmVmc01hcC5jdXJyZW50LmdldChpZCk7XHJcbiAgICBpZiAoIW5vZGVSZWYpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBPYmplY3QuZW50cmllcyhuZXdBdHRycykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBub2RlUmVmW2tleV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIG5vZGVSZWZba2V5XSh2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChub2RlUmVmLmF0dHJzKSB7XHJcbiAgICAgICAgICBub2RlUmVmLmF0dHJzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbGF5ZXIgPSBub2RlUmVmLmdldExheWVyKCk7XHJcbiAgICAgIGlmIChsYXllcikge1xyXG4gICAgICAgIGxheWVyLmJhdGNoRHJhdygpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIPCfp7kgTGltcGlhciAtIFNJTiBMT0dTXHJcbiAgY29uc3QgY2xlYW51cCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmIChiYXRjaFVwZGF0ZVRpbWVvdXRSZWYuY3VycmVudCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQoYmF0Y2hVcGRhdGVUaW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgfVxyXG4gICAgcGVuZGluZ1VwZGF0ZXMuY3VycmVudC5jbGVhcigpO1xyXG4gICAgb2JqZWN0UmVmc01hcC5jdXJyZW50LmNsZWFyKCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyDwn46vIFJldG9ybmFyIG9iamV0byBtZW1vaXphZG9cclxuICByZXR1cm4gdXNlTWVtbygoKSA9PiAoe1xyXG4gICAgcmVnaXN0ZXJPYmplY3QsXHJcbiAgICB1cGRhdGVPYmplY3RJbXBlcmF0aXZlLFxyXG4gICAgY2xlYW51cCxcclxuICAgIGdldE9iamVjdFJlZjogKGlkKSA9PiBvYmplY3RSZWZzTWFwLmN1cnJlbnQuZ2V0KGlkKVxyXG4gIH0pLCBbcmVnaXN0ZXJPYmplY3QsIHVwZGF0ZU9iamVjdEltcGVyYXRpdmUsIGNsZWFudXBdKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgdXNlSW1wZXJhdGl2ZU9iamVjdHM7Il0sIm5hbWVzIjpbInVzZVJlZiIsInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZUltcGVyYXRpdmVPYmplY3RzIiwib2JqZWN0UmVmc01hcCIsIk1hcCIsInBlbmRpbmdVcGRhdGVzIiwiYmF0Y2hVcGRhdGVUaW1lb3V0UmVmIiwicmVnaXN0ZXJPYmplY3QiLCJpZCIsIm5vZGVSZWYiLCJjdXJyZW50Iiwic2V0IiwiZGVsZXRlIiwidXBkYXRlT2JqZWN0SW1wZXJhdGl2ZSIsIm5ld0F0dHJzIiwiZ2V0IiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsImF0dHJzIiwibGF5ZXIiLCJnZXRMYXllciIsImJhdGNoRHJhdyIsImVycm9yIiwiY2xlYW51cCIsImNsZWFyVGltZW91dCIsImNsZWFyIiwiZ2V0T2JqZWN0UmVmIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useImperativeObjects.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useInlineEditor.js":
/*!**************************************!*\
  !*** ./src/hooks/useInlineEditor.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useInlineEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nfunction useInlineEditor() {\n    const [editing, setEditing] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        id: null,\n        value: \"\"\n    });\n    const startEdit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInlineEditor.useCallback[startEdit]\": (id, val)=>setEditing({\n                id,\n                value: val\n            })\n    }[\"useInlineEditor.useCallback[startEdit]\"], []);\n    const updateEdit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInlineEditor.useCallback[updateEdit]\": (val)=>setEditing({\n                \"useInlineEditor.useCallback[updateEdit]\": (e)=>({\n                        ...e,\n                        value: val\n                    })\n            }[\"useInlineEditor.useCallback[updateEdit]\"])\n    }[\"useInlineEditor.useCallback[updateEdit]\"], []);\n    const finishEdit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInlineEditor.useCallback[finishEdit]\": ()=>setEditing({\n                id: null,\n                value: \"\"\n            })\n    }[\"useInlineEditor.useCallback[finishEdit]\"], []);\n    return {\n        editing,\n        startEdit,\n        updateEdit,\n        finishEdit\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VJbmxpbmVFZGl0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEM7QUFFL0IsU0FBU0U7SUFDdEIsTUFBTSxDQUFDQyxTQUFTQyxXQUFXLEdBQUdKLCtDQUFRQSxDQUFDO1FBQUVLLElBQUk7UUFBTUMsT0FBTztJQUFHO0lBRTdELE1BQU1DLFlBQWFOLGtEQUFXQTtrREFBQyxDQUFDSSxJQUFJRyxNQUFRSixXQUFXO2dCQUFFQztnQkFBSUMsT0FBT0U7WUFBSTtpREFBSSxFQUFFO0lBQzlFLE1BQU1DLGFBQWFSLGtEQUFXQTttREFBQyxDQUFDTyxNQUFhSjsyREFBV00sQ0FBQUEsSUFBTTt3QkFBRSxHQUFHQSxDQUFDO3dCQUFFSixPQUFPRTtvQkFBSTs7a0RBQUssRUFBRTtJQUN4RixNQUFNRyxhQUFhVixrREFBV0E7bURBQUMsSUFBY0csV0FBVztnQkFBRUMsSUFBSTtnQkFBTUMsT0FBTztZQUFHO2tEQUFJLEVBQUU7SUFFcEYsT0FBTztRQUFFSDtRQUFTSTtRQUFXRTtRQUFZRTtJQUFXO0FBQ3REIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGhvb2tzXFx1c2VJbmxpbmVFZGl0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VJbmxpbmVFZGl0b3IoKSB7XHJcbiAgY29uc3QgW2VkaXRpbmcsIHNldEVkaXRpbmddID0gdXNlU3RhdGUoeyBpZDogbnVsbCwgdmFsdWU6IFwiXCIgfSk7XHJcblxyXG4gIGNvbnN0IHN0YXJ0RWRpdCAgPSB1c2VDYWxsYmFjaygoaWQsIHZhbCkgPT4gc2V0RWRpdGluZyh7IGlkLCB2YWx1ZTogdmFsIH0pLCBbXSk7XHJcbiAgY29uc3QgdXBkYXRlRWRpdCA9IHVzZUNhbGxiYWNrKCh2YWwpICAgICAgPT4gc2V0RWRpdGluZyhlID0+ICh7IC4uLmUsIHZhbHVlOiB2YWwgfSkpLCBbXSk7XHJcbiAgY29uc3QgZmluaXNoRWRpdCA9IHVzZUNhbGxiYWNrKCgpICAgICAgICAgPT4gc2V0RWRpdGluZyh7IGlkOiBudWxsLCB2YWx1ZTogXCJcIiB9KSwgW10pO1xyXG5cclxuICByZXR1cm4geyBlZGl0aW5nLCBzdGFydEVkaXQsIHVwZGF0ZUVkaXQsIGZpbmlzaEVkaXQgfTtcclxufVxyXG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUlubGluZUVkaXRvciIsImVkaXRpbmciLCJzZXRFZGl0aW5nIiwiaWQiLCJ2YWx1ZSIsInN0YXJ0RWRpdCIsInZhbCIsInVwZGF0ZUVkaXQiLCJlIiwiZmluaXNoRWRpdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useInlineEditor.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useKeyboardShortcuts.js":
/*!*******************************************!*\
  !*** ./src/hooks/useKeyboardShortcuts.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useKeyboardShortcuts)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/hooks/useKeyboardShortcuts.js\n\nfunction useKeyboardShortcuts({ onDeshacer, onRehacer, onDuplicar, onEliminar, onDeseleccionar, onCopiar, onPegar, onCambiarAlineacion, isEditing, tieneSeleccion }) {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useKeyboardShortcuts.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"useKeyboardShortcuts.useEffect.handleKeyDown\": (e)=>{\n                    const key = e.key.toLowerCase();\n                    // 🔒 No ejecutar atajos si se está escribiendo en un input, textarea o contenteditable\n                    const tag = document.activeElement?.tagName?.toLowerCase();\n                    const isTyping = tag === 'input' || tag === 'textarea' || document.activeElement?.isContentEditable;\n                    if (isTyping) return;\n                    // ⌨️ Atajos con Ctrl o Cmd\n                    if ((e.ctrlKey || e.metaKey) && key === \"z\" && !e.shiftKey) {\n                        e.preventDefault();\n                        onDeshacer?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && (key === \"y\" || key === \"z\" && e.shiftKey)) {\n                        e.preventDefault();\n                        onRehacer?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && key === \"d\") {\n                        if (!tieneSeleccion) return;\n                        e.preventDefault();\n                        onDuplicar?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && key === \"c\") {\n                        if (!tieneSeleccion) return;\n                        e.preventDefault();\n                        onCopiar?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && key === \"v\") {\n                        e.preventDefault();\n                        onPegar?.();\n                    }\n                    // 🔤 Alineación: tecla L\n                    if (key === \"l\") {\n                        e.preventDefault();\n                        onCambiarAlineacion?.();\n                    }\n                    // 🗑️ Eliminar\n                    if ((key === \"delete\" || key === \"backspace\") && tieneSeleccion && !isEditing) {\n                        e.preventDefault();\n                        onEliminar?.();\n                    }\n                    // ❌ Deseleccionar\n                    if (key === \"escape\") {\n                        e.preventDefault();\n                        onDeseleccionar?.();\n                    }\n                }\n            }[\"useKeyboardShortcuts.useEffect.handleKeyDown\"];\n            document.addEventListener(\"keydown\", handleKeyDown);\n            return ({\n                \"useKeyboardShortcuts.useEffect\": ()=>document.removeEventListener(\"keydown\", handleKeyDown)\n            })[\"useKeyboardShortcuts.useEffect\"];\n        }\n    }[\"useKeyboardShortcuts.useEffect\"], [\n        onDeshacer,\n        onRehacer,\n        onDuplicar,\n        onEliminar,\n        onDeseleccionar,\n        onCopiar,\n        onPegar,\n        onCambiarAlineacion,\n        isEditing,\n        tieneSeleccion\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VLZXlib2FyZFNob3J0Y3V0cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9DQUFvQztBQUNGO0FBRW5CLFNBQVNDLHFCQUFxQixFQUMzQ0MsVUFBVSxFQUNWQyxTQUFTLEVBQ1RDLFVBQVUsRUFDVkMsVUFBVSxFQUNWQyxlQUFlLEVBQ2ZDLFFBQVEsRUFDUkMsT0FBTyxFQUNQQyxtQkFBbUIsRUFDbkJDLFNBQVMsRUFDVEMsY0FBYyxFQUNmO0lBQ0NYLGdEQUFTQTswQ0FBQztZQUNSLE1BQU1ZO2dFQUFnQixDQUFDQztvQkFDckIsTUFBTUMsTUFBTUQsRUFBRUMsR0FBRyxDQUFDQyxXQUFXO29CQUU3Qix1RkFBdUY7b0JBQ3ZGLE1BQU1DLE1BQU1DLFNBQVNDLGFBQWEsRUFBRUMsU0FBU0o7b0JBQzdDLE1BQU1LLFdBQ0pKLFFBQVEsV0FDUkEsUUFBUSxjQUNSQyxTQUFTQyxhQUFhLEVBQUVHO29CQUUxQixJQUFJRCxVQUFVO29CQUVkLDJCQUEyQjtvQkFDM0IsSUFBSSxDQUFDUCxFQUFFUyxPQUFPLElBQUlULEVBQUVVLE9BQU8sS0FBS1QsUUFBUSxPQUFPLENBQUNELEVBQUVXLFFBQVEsRUFBRTt3QkFDMURYLEVBQUVZLGNBQWM7d0JBQ2hCdkI7b0JBQ0Y7b0JBRUEsSUFBSSxDQUFDVyxFQUFFUyxPQUFPLElBQUlULEVBQUVVLE9BQU8sS0FBTVQsQ0FBQUEsUUFBUSxPQUFRQSxRQUFRLE9BQU9ELEVBQUVXLFFBQVEsR0FBSTt3QkFDNUVYLEVBQUVZLGNBQWM7d0JBQ2hCdEI7b0JBQ0Y7b0JBRUEsSUFBSSxDQUFDVSxFQUFFUyxPQUFPLElBQUlULEVBQUVVLE9BQU8sS0FBS1QsUUFBUSxLQUFLO3dCQUMzQyxJQUFJLENBQUNILGdCQUFnQjt3QkFDckJFLEVBQUVZLGNBQWM7d0JBQ2hCckI7b0JBQ0Y7b0JBR0EsSUFBSSxDQUFDUyxFQUFFUyxPQUFPLElBQUlULEVBQUVVLE9BQU8sS0FBS1QsUUFBUSxLQUFLO3dCQUMzQyxJQUFJLENBQUNILGdCQUFnQjt3QkFDckJFLEVBQUVZLGNBQWM7d0JBQ2hCbEI7b0JBQ0Y7b0JBRUEsSUFBSSxDQUFDTSxFQUFFUyxPQUFPLElBQUlULEVBQUVVLE9BQU8sS0FBS1QsUUFBUSxLQUFLO3dCQUMzQ0QsRUFBRVksY0FBYzt3QkFDaEJqQjtvQkFDRjtvQkFFQSx5QkFBeUI7b0JBQ3pCLElBQUlNLFFBQVEsS0FBSzt3QkFDZkQsRUFBRVksY0FBYzt3QkFDaEJoQjtvQkFDRjtvQkFFQSxlQUFlO29CQUNmLElBQUksQ0FBQ0ssUUFBUSxZQUFZQSxRQUFRLFdBQVUsS0FBTUgsa0JBQWtCLENBQUNELFdBQVc7d0JBQzdFRyxFQUFFWSxjQUFjO3dCQUNoQnBCO29CQUNGO29CQUVBLGtCQUFrQjtvQkFDbEIsSUFBSVMsUUFBUSxVQUFVO3dCQUNwQkQsRUFBRVksY0FBYzt3QkFDaEJuQjtvQkFDRjtnQkFDRjs7WUFFQVcsU0FBU1MsZ0JBQWdCLENBQUMsV0FBV2Q7WUFDckM7a0RBQU8sSUFBTUssU0FBU1UsbUJBQW1CLENBQUMsV0FBV2Y7O1FBQ3ZEO3lDQUFHO1FBQ0RWO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO0tBQ0Q7QUFDSCIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxob29rc1xcdXNlS2V5Ym9hcmRTaG9ydGN1dHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2hvb2tzL3VzZUtleWJvYXJkU2hvcnRjdXRzLmpzXHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUtleWJvYXJkU2hvcnRjdXRzKHtcclxuICBvbkRlc2hhY2VyLFxyXG4gIG9uUmVoYWNlcixcclxuICBvbkR1cGxpY2FyLFxyXG4gIG9uRWxpbWluYXIsXHJcbiAgb25EZXNlbGVjY2lvbmFyLFxyXG4gIG9uQ29waWFyLFxyXG4gIG9uUGVnYXIsXHJcbiAgb25DYW1iaWFyQWxpbmVhY2lvbixcclxuICBpc0VkaXRpbmcsXHJcbiAgdGllbmVTZWxlY2Npb25cclxufSkge1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGUpID0+IHtcclxuICAgICAgY29uc3Qga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgIC8vIPCflJIgTm8gZWplY3V0YXIgYXRham9zIHNpIHNlIGVzdMOhIGVzY3JpYmllbmRvIGVuIHVuIGlucHV0LCB0ZXh0YXJlYSBvIGNvbnRlbnRlZGl0YWJsZVxyXG4gICAgICBjb25zdCB0YWcgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50Py50YWdOYW1lPy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBjb25zdCBpc1R5cGluZyA9XHJcbiAgICAgICAgdGFnID09PSAnaW5wdXQnIHx8XHJcbiAgICAgICAgdGFnID09PSAndGV4dGFyZWEnIHx8XHJcbiAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudD8uaXNDb250ZW50RWRpdGFibGU7XHJcblxyXG4gICAgICBpZiAoaXNUeXBpbmcpIHJldHVybjtcclxuXHJcbiAgICAgIC8vIOKMqO+4jyBBdGFqb3MgY29uIEN0cmwgbyBDbWRcclxuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBrZXkgPT09IFwielwiICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIG9uRGVzaGFjZXI/LigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIChrZXkgPT09IFwieVwiIHx8IChrZXkgPT09IFwielwiICYmIGUuc2hpZnRLZXkpKSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvblJlaGFjZXI/LigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGtleSA9PT0gXCJkXCIpIHtcclxuICAgICAgICBpZiAoIXRpZW5lU2VsZWNjaW9uKSByZXR1cm47XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIG9uRHVwbGljYXI/LigpO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBrZXkgPT09IFwiY1wiKSB7XHJcbiAgICAgICAgaWYgKCF0aWVuZVNlbGVjY2lvbikgcmV0dXJuO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvbkNvcGlhcj8uKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYga2V5ID09PSBcInZcIikge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvblBlZ2FyPy4oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g8J+UpCBBbGluZWFjacOzbjogdGVjbGEgTFxyXG4gICAgICBpZiAoa2V5ID09PSBcImxcIikge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvbkNhbWJpYXJBbGluZWFjaW9uPy4oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g8J+Xke+4jyBFbGltaW5hclxyXG4gICAgICBpZiAoKGtleSA9PT0gXCJkZWxldGVcIiB8fCBrZXkgPT09IFwiYmFja3NwYWNlXCIpICYmIHRpZW5lU2VsZWNjaW9uICYmICFpc0VkaXRpbmcpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgb25FbGltaW5hcj8uKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOKdjCBEZXNlbGVjY2lvbmFyXHJcbiAgICAgIGlmIChrZXkgPT09IFwiZXNjYXBlXCIpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgb25EZXNlbGVjY2lvbmFyPy4oKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcclxuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcclxuICB9LCBbXHJcbiAgICBvbkRlc2hhY2VyLFxyXG4gICAgb25SZWhhY2VyLFxyXG4gICAgb25EdXBsaWNhcixcclxuICAgIG9uRWxpbWluYXIsXHJcbiAgICBvbkRlc2VsZWNjaW9uYXIsXHJcbiAgICBvbkNvcGlhcixcclxuICAgIG9uUGVnYXIsXHJcbiAgICBvbkNhbWJpYXJBbGluZWFjaW9uLFxyXG4gICAgaXNFZGl0aW5nLFxyXG4gICAgdGllbmVTZWxlY2Npb25cclxuICBdKTtcclxufVxyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlS2V5Ym9hcmRTaG9ydGN1dHMiLCJvbkRlc2hhY2VyIiwib25SZWhhY2VyIiwib25EdXBsaWNhciIsIm9uRWxpbWluYXIiLCJvbkRlc2VsZWNjaW9uYXIiLCJvbkNvcGlhciIsIm9uUGVnYXIiLCJvbkNhbWJpYXJBbGluZWFjaW9uIiwiaXNFZGl0aW5nIiwidGllbmVTZWxlY2Npb24iLCJoYW5kbGVLZXlEb3duIiwiZSIsImtleSIsInRvTG93ZXJDYXNlIiwidGFnIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwidGFnTmFtZSIsImlzVHlwaW5nIiwiaXNDb250ZW50RWRpdGFibGUiLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useKeyboardShortcuts.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useViewportScale.js":
/*!***************************************!*\
  !*** ./src/hooks/useViewportScale.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useViewportScale)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/hooks/useViewportScale.js\n\n/**\n * Centraliza toda la logica de:\n * - isMobile / isMobilePortrait\n * - ResizeObserver del contenedor\n * - calculo de scale, anchoContenedor\n * - escalaActiva / escalaVisual / wrapperBaseWidth / fit mobile portrait\n */ function useViewportScale({ contenedorRef, zoom, // base widths (tu logica actual)\nbaseDesktop = 800, baseMobilePortrait = 1000, // wrapper real que escalas visualmente (tu logica actual)\nwrapperBaseWidthZoom1 = 1000, wrapperBaseWidthZoom08 = 1220, // boosts (tu logica actual)\nfitBoost = 1.2, zoomVisualBoost = 1.15, // debug\ndebug = false } = {}) {\n    const [isMobile, setIsMobile] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isMobilePortrait, setIsMobilePortrait] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [scale, setScale] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n    const [anchoContenedor, setAnchoContenedor] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    // isMobile + isMobilePortrait reactivo con coarse pointer\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useViewportScale.useEffect\": ()=>{\n            if (true) return;\n            const mqMobile = window.matchMedia(\"(max-width: 640px)\");\n            const mqTablet = window.matchMedia(\"(max-width: 1024px)\");\n            const mqPortrait = window.matchMedia(\"(max-width: 1024px) and (orientation: portrait)\");\n            const mqCoarse = window.matchMedia(\"(pointer: coarse)\");\n            const update = {\n                \"useViewportScale.useEffect.update\": ()=>{\n                    const compactWidth = mqMobile.matches;\n                    const tabletWidth = mqTablet.matches;\n                    const coarsePointer = mqCoarse.matches;\n                    const nextIsMobile = compactWidth || coarsePointer && tabletWidth;\n                    setIsMobile(nextIsMobile);\n                    setIsMobilePortrait(mqPortrait.matches && (compactWidth || coarsePointer));\n                }\n            }[\"useViewportScale.useEffect.update\"];\n            update();\n            mqMobile.addEventListener?.(\"change\", update);\n            mqTablet.addEventListener?.(\"change\", update);\n            mqPortrait.addEventListener?.(\"change\", update);\n            mqCoarse.addEventListener?.(\"change\", update);\n            window.addEventListener(\"resize\", update);\n            window.addEventListener(\"orientationchange\", update);\n            return ({\n                \"useViewportScale.useEffect\": ()=>{\n                    mqMobile.removeEventListener?.(\"change\", update);\n                    mqTablet.removeEventListener?.(\"change\", update);\n                    mqPortrait.removeEventListener?.(\"change\", update);\n                    mqCoarse.removeEventListener?.(\"change\", update);\n                    window.removeEventListener(\"resize\", update);\n                    window.removeEventListener(\"orientationchange\", update);\n                }\n            })[\"useViewportScale.useEffect\"];\n        }\n    }[\"useViewportScale.useEffect\"], []);\n    // scale: solo cuando zoom === 1 (igual que hoy)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useViewportScale.useEffect\": ()=>{\n            if (!contenedorRef?.current || zoom !== 1) return;\n            let raf = null;\n            const actualizarEscala = {\n                \"useViewportScale.useEffect.actualizarEscala\": ()=>{\n                    if (!contenedorRef.current) return;\n                    if (raf) cancelAnimationFrame(raf);\n                    raf = requestAnimationFrame({\n                        \"useViewportScale.useEffect.actualizarEscala\": ()=>{\n                            const ancho = contenedorRef.current?.offsetWidth || 0;\n                            const base = isMobilePortrait ? baseMobilePortrait : baseDesktop;\n                            const nextScale = base > 0 ? ancho / base : 1;\n                            setScale(nextScale);\n                            if (debug) {\n                                console.log(\"[useViewportScale] anchoContenedor=\", ancho, \"base=\", base, \"scale=\", nextScale.toFixed(3));\n                            }\n                        }\n                    }[\"useViewportScale.useEffect.actualizarEscala\"]);\n                }\n            }[\"useViewportScale.useEffect.actualizarEscala\"];\n            actualizarEscala();\n            const observer = new ResizeObserver(actualizarEscala);\n            observer.observe(contenedorRef.current);\n            return ({\n                \"useViewportScale.useEffect\": ()=>{\n                    if (raf) cancelAnimationFrame(raf);\n                    observer.disconnect();\n                }\n            })[\"useViewportScale.useEffect\"];\n        }\n    }[\"useViewportScale.useEffect\"], [\n        contenedorRef,\n        zoom,\n        isMobilePortrait,\n        baseDesktop,\n        baseMobilePortrait,\n        debug\n    ]);\n    // anchoContenedor: siempre (igual que hoy)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useViewportScale.useEffect\": ()=>{\n            const el = contenedorRef?.current;\n            if (!el) return;\n            const actualizar = {\n                \"useViewportScale.useEffect.actualizar\": ()=>{\n                    if (!contenedorRef.current) return;\n                    setAnchoContenedor(contenedorRef.current.offsetWidth || 0);\n                }\n            }[\"useViewportScale.useEffect.actualizar\"];\n            requestAnimationFrame(actualizar);\n            const observer = new ResizeObserver(actualizar);\n            observer.observe(el);\n            return ({\n                \"useViewportScale.useEffect\": ()=>observer.disconnect()\n            })[\"useViewportScale.useEffect\"];\n        }\n    }[\"useViewportScale.useEffect\"], [\n        contenedorRef\n    ]);\n    // Derivados (identicos a tu logica actual)\n    const escalaActiva = zoom === 1 ? scale : zoom;\n    const wrapperBaseWidth = zoom === 0.8 ? wrapperBaseWidthZoom08 : wrapperBaseWidthZoom1;\n    const escalaFitMobilePortrait = anchoContenedor > 0 ? anchoContenedor / wrapperBaseWidth * fitBoost : 1;\n    const escalaVisual = isMobilePortrait ? escalaFitMobilePortrait : zoom === 1 ? scale : zoom * zoomVisualBoost;\n    return {\n        isMobile,\n        isMobilePortrait,\n        scale,\n        anchoContenedor,\n        escalaActiva,\n        escalaVisual,\n        wrapperBaseWidth,\n        escalaFitMobilePortrait\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VWaWV3cG9ydFNjYWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsZ0NBQWdDO0FBQ1k7QUFFNUM7Ozs7OztDQU1DLEdBQ2MsU0FBU0UsaUJBQWlCLEVBQ3ZDQyxhQUFhLEVBQ2JDLElBQUksRUFDSixpQ0FBaUM7QUFDakNDLGNBQWMsR0FBRyxFQUNqQkMscUJBQXFCLElBQUksRUFFekIsMERBQTBEO0FBQzFEQyx3QkFBd0IsSUFBSSxFQUM1QkMseUJBQXlCLElBQUksRUFFN0IsNEJBQTRCO0FBQzVCQyxXQUFXLEdBQUcsRUFDZEMsa0JBQWtCLElBQUksRUFFdEIsUUFBUTtBQUNSQyxRQUFRLEtBQUssRUFDZCxHQUFHLENBQUMsQ0FBQztJQUNKLE1BQU0sQ0FBQ0MsVUFBVUMsWUFBWSxHQUFHWiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUNhLGtCQUFrQkMsb0JBQW9CLEdBQUdkLCtDQUFRQSxDQUFDO0lBQ3pELE1BQU0sQ0FBQ2UsT0FBT0MsU0FBUyxHQUFHaEIsK0NBQVFBLENBQUM7SUFDbkMsTUFBTSxDQUFDaUIsaUJBQWlCQyxtQkFBbUIsR0FBR2xCLCtDQUFRQSxDQUFDO0lBRXZELDBEQUEwRDtJQUMxREQsZ0RBQVNBO3NDQUFDO1lBQ1IsSUFBSSxJQUE2QixFQUFFO1lBRW5DLE1BQU1vQixXQUFXQyxPQUFPQyxVQUFVLENBQUM7WUFDbkMsTUFBTUMsV0FBV0YsT0FBT0MsVUFBVSxDQUFDO1lBQ25DLE1BQU1FLGFBQWFILE9BQU9DLFVBQVUsQ0FBQztZQUNyQyxNQUFNRyxXQUFXSixPQUFPQyxVQUFVLENBQUM7WUFFbkMsTUFBTUk7cURBQVM7b0JBQ2IsTUFBTUMsZUFBZVAsU0FBU1EsT0FBTztvQkFDckMsTUFBTUMsY0FBY04sU0FBU0ssT0FBTztvQkFDcEMsTUFBTUUsZ0JBQWdCTCxTQUFTRyxPQUFPO29CQUN0QyxNQUFNRyxlQUFlSixnQkFBaUJHLGlCQUFpQkQ7b0JBQ3ZEaEIsWUFBWWtCO29CQUNaaEIsb0JBQW9CUyxXQUFXSSxPQUFPLElBQUtELENBQUFBLGdCQUFnQkcsYUFBWTtnQkFDekU7O1lBRUFKO1lBRUFOLFNBQVNZLGdCQUFnQixHQUFHLFVBQVVOO1lBQ3RDSCxTQUFTUyxnQkFBZ0IsR0FBRyxVQUFVTjtZQUN0Q0YsV0FBV1EsZ0JBQWdCLEdBQUcsVUFBVU47WUFDeENELFNBQVNPLGdCQUFnQixHQUFHLFVBQVVOO1lBQ3RDTCxPQUFPVyxnQkFBZ0IsQ0FBQyxVQUFVTjtZQUNsQ0wsT0FBT1csZ0JBQWdCLENBQUMscUJBQXFCTjtZQUU3Qzs4Q0FBTztvQkFDTE4sU0FBU2EsbUJBQW1CLEdBQUcsVUFBVVA7b0JBQ3pDSCxTQUFTVSxtQkFBbUIsR0FBRyxVQUFVUDtvQkFDekNGLFdBQVdTLG1CQUFtQixHQUFHLFVBQVVQO29CQUMzQ0QsU0FBU1EsbUJBQW1CLEdBQUcsVUFBVVA7b0JBQ3pDTCxPQUFPWSxtQkFBbUIsQ0FBQyxVQUFVUDtvQkFDckNMLE9BQU9ZLG1CQUFtQixDQUFDLHFCQUFxQlA7Z0JBQ2xEOztRQUNGO3FDQUFHLEVBQUU7SUFFTCxnREFBZ0Q7SUFDaEQxQixnREFBU0E7c0NBQUM7WUFDUixJQUFJLENBQUNHLGVBQWUrQixXQUFXOUIsU0FBUyxHQUFHO1lBRTNDLElBQUkrQixNQUFNO1lBRVYsTUFBTUM7K0RBQW1CO29CQUN2QixJQUFJLENBQUNqQyxjQUFjK0IsT0FBTyxFQUFFO29CQUU1QixJQUFJQyxLQUFLRSxxQkFBcUJGO29CQUM5QkEsTUFBTUc7dUVBQXNCOzRCQUMxQixNQUFNQyxRQUFRcEMsY0FBYytCLE9BQU8sRUFBRU0sZUFBZTs0QkFDcEQsTUFBTUMsT0FBTzNCLG1CQUFtQlIscUJBQXFCRDs0QkFDckQsTUFBTXFDLFlBQVlELE9BQU8sSUFBSUYsUUFBUUUsT0FBTzs0QkFFNUN4QixTQUFTeUI7NEJBRVQsSUFBSS9CLE9BQU87Z0NBQ1RnQyxRQUFRQyxHQUFHLENBQ1QsdUNBQ0FMLE9BQ0EsU0FDQUUsTUFDQSxVQUNBQyxVQUFVRyxPQUFPLENBQUM7NEJBRXRCO3dCQUNGOztnQkFDRjs7WUFFQVQ7WUFFQSxNQUFNVSxXQUFXLElBQUlDLGVBQWVYO1lBQ3BDVSxTQUFTRSxPQUFPLENBQUM3QyxjQUFjK0IsT0FBTztZQUV0Qzs4Q0FBTztvQkFDTCxJQUFJQyxLQUFLRSxxQkFBcUJGO29CQUM5QlcsU0FBU0csVUFBVTtnQkFDckI7O1FBQ0Y7cUNBQUc7UUFBQzlDO1FBQWVDO1FBQU1VO1FBQWtCVDtRQUFhQztRQUFvQks7S0FBTTtJQUVsRiwyQ0FBMkM7SUFDM0NYLGdEQUFTQTtzQ0FBQztZQUNSLE1BQU1rRCxLQUFLL0MsZUFBZStCO1lBQzFCLElBQUksQ0FBQ2dCLElBQUk7WUFFVCxNQUFNQzt5REFBYTtvQkFDakIsSUFBSSxDQUFDaEQsY0FBYytCLE9BQU8sRUFBRTtvQkFDNUJmLG1CQUFtQmhCLGNBQWMrQixPQUFPLENBQUNNLFdBQVcsSUFBSTtnQkFDMUQ7O1lBRUFGLHNCQUFzQmE7WUFFdEIsTUFBTUwsV0FBVyxJQUFJQyxlQUFlSTtZQUNwQ0wsU0FBU0UsT0FBTyxDQUFDRTtZQUVqQjs4Q0FBTyxJQUFNSixTQUFTRyxVQUFVOztRQUNsQztxQ0FBRztRQUFDOUM7S0FBYztJQUVsQiwyQ0FBMkM7SUFDM0MsTUFBTWlELGVBQWVoRCxTQUFTLElBQUlZLFFBQVFaO0lBRTFDLE1BQU1pRCxtQkFBbUJqRCxTQUFTLE1BQU1JLHlCQUF5QkQ7SUFFakUsTUFBTStDLDBCQUNKcEMsa0JBQWtCLElBQUksa0JBQW1CbUMsbUJBQW9CNUMsV0FBVztJQUUxRSxNQUFNOEMsZUFBZXpDLG1CQUNqQndDLDBCQUNBbEQsU0FBUyxJQUNQWSxRQUNBWixPQUFPTTtJQUViLE9BQU87UUFDTEU7UUFDQUU7UUFFQUU7UUFDQUU7UUFFQWtDO1FBQ0FHO1FBRUFGO1FBQ0FDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxob29rc1xcdXNlVmlld3BvcnRTY2FsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaG9va3MvdXNlVmlld3BvcnRTY2FsZS5qc1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vKipcbiAqIENlbnRyYWxpemEgdG9kYSBsYSBsb2dpY2EgZGU6XG4gKiAtIGlzTW9iaWxlIC8gaXNNb2JpbGVQb3J0cmFpdFxuICogLSBSZXNpemVPYnNlcnZlciBkZWwgY29udGVuZWRvclxuICogLSBjYWxjdWxvIGRlIHNjYWxlLCBhbmNob0NvbnRlbmVkb3JcbiAqIC0gZXNjYWxhQWN0aXZhIC8gZXNjYWxhVmlzdWFsIC8gd3JhcHBlckJhc2VXaWR0aCAvIGZpdCBtb2JpbGUgcG9ydHJhaXRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVmlld3BvcnRTY2FsZSh7XG4gIGNvbnRlbmVkb3JSZWYsXG4gIHpvb20sXG4gIC8vIGJhc2Ugd2lkdGhzICh0dSBsb2dpY2EgYWN0dWFsKVxuICBiYXNlRGVza3RvcCA9IDgwMCxcbiAgYmFzZU1vYmlsZVBvcnRyYWl0ID0gMTAwMCxcblxuICAvLyB3cmFwcGVyIHJlYWwgcXVlIGVzY2FsYXMgdmlzdWFsbWVudGUgKHR1IGxvZ2ljYSBhY3R1YWwpXG4gIHdyYXBwZXJCYXNlV2lkdGhab29tMSA9IDEwMDAsXG4gIHdyYXBwZXJCYXNlV2lkdGhab29tMDggPSAxMjIwLFxuXG4gIC8vIGJvb3N0cyAodHUgbG9naWNhIGFjdHVhbClcbiAgZml0Qm9vc3QgPSAxLjIsXG4gIHpvb21WaXN1YWxCb29zdCA9IDEuMTUsXG5cbiAgLy8gZGVidWdcbiAgZGVidWcgPSBmYWxzZSxcbn0gPSB7fSkge1xuICBjb25zdCBbaXNNb2JpbGUsIHNldElzTW9iaWxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzTW9iaWxlUG9ydHJhaXQsIHNldElzTW9iaWxlUG9ydHJhaXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2NhbGUsIHNldFNjYWxlXSA9IHVzZVN0YXRlKDEpO1xuICBjb25zdCBbYW5jaG9Db250ZW5lZG9yLCBzZXRBbmNob0NvbnRlbmVkb3JdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy8gaXNNb2JpbGUgKyBpc01vYmlsZVBvcnRyYWl0IHJlYWN0aXZvIGNvbiBjb2Fyc2UgcG9pbnRlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG5cbiAgICBjb25zdCBtcU1vYmlsZSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNjQwcHgpXCIpO1xuICAgIGNvbnN0IG1xVGFibGV0ID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiAxMDI0cHgpXCIpO1xuICAgIGNvbnN0IG1xUG9ydHJhaXQgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDEwMjRweCkgYW5kIChvcmllbnRhdGlvbjogcG9ydHJhaXQpXCIpO1xuICAgIGNvbnN0IG1xQ29hcnNlID0gd2luZG93Lm1hdGNoTWVkaWEoXCIocG9pbnRlcjogY29hcnNlKVwiKTtcblxuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBhY3RXaWR0aCA9IG1xTW9iaWxlLm1hdGNoZXM7XG4gICAgICBjb25zdCB0YWJsZXRXaWR0aCA9IG1xVGFibGV0Lm1hdGNoZXM7XG4gICAgICBjb25zdCBjb2Fyc2VQb2ludGVyID0gbXFDb2Fyc2UubWF0Y2hlcztcbiAgICAgIGNvbnN0IG5leHRJc01vYmlsZSA9IGNvbXBhY3RXaWR0aCB8fCAoY29hcnNlUG9pbnRlciAmJiB0YWJsZXRXaWR0aCk7XG4gICAgICBzZXRJc01vYmlsZShuZXh0SXNNb2JpbGUpO1xuICAgICAgc2V0SXNNb2JpbGVQb3J0cmFpdChtcVBvcnRyYWl0Lm1hdGNoZXMgJiYgKGNvbXBhY3RXaWR0aCB8fCBjb2Fyc2VQb2ludGVyKSk7XG4gICAgfTtcblxuICAgIHVwZGF0ZSgpO1xuXG4gICAgbXFNb2JpbGUuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgbXFUYWJsZXQuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgbXFQb3J0cmFpdC5hZGRFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICBtcUNvYXJzZS5hZGRFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtcU1vYmlsZS5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICAgIG1xVGFibGV0LnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgICAgbXFQb3J0cmFpdC5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICAgIG1xQ29hcnNlLnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gc2NhbGU6IHNvbG8gY3VhbmRvIHpvb20gPT09IDEgKGlndWFsIHF1ZSBob3kpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjb250ZW5lZG9yUmVmPy5jdXJyZW50IHx8IHpvb20gIT09IDEpIHJldHVybjtcblxuICAgIGxldCByYWYgPSBudWxsO1xuXG4gICAgY29uc3QgYWN0dWFsaXphckVzY2FsYSA9ICgpID0+IHtcbiAgICAgIGlmICghY29udGVuZWRvclJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGlmIChyYWYpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZik7XG4gICAgICByYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCBhbmNobyA9IGNvbnRlbmVkb3JSZWYuY3VycmVudD8ub2Zmc2V0V2lkdGggfHwgMDtcbiAgICAgICAgY29uc3QgYmFzZSA9IGlzTW9iaWxlUG9ydHJhaXQgPyBiYXNlTW9iaWxlUG9ydHJhaXQgOiBiYXNlRGVza3RvcDtcbiAgICAgICAgY29uc3QgbmV4dFNjYWxlID0gYmFzZSA+IDAgPyBhbmNobyAvIGJhc2UgOiAxO1xuXG4gICAgICAgIHNldFNjYWxlKG5leHRTY2FsZSk7XG5cbiAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBcIlt1c2VWaWV3cG9ydFNjYWxlXSBhbmNob0NvbnRlbmVkb3I9XCIsXG4gICAgICAgICAgICBhbmNobyxcbiAgICAgICAgICAgIFwiYmFzZT1cIixcbiAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICBcInNjYWxlPVwiLFxuICAgICAgICAgICAgbmV4dFNjYWxlLnRvRml4ZWQoMylcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgYWN0dWFsaXphckVzY2FsYSgpO1xuXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoYWN0dWFsaXphckVzY2FsYSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShjb250ZW5lZG9yUmVmLmN1cnJlbnQpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChyYWYpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZik7XG4gICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgfSwgW2NvbnRlbmVkb3JSZWYsIHpvb20sIGlzTW9iaWxlUG9ydHJhaXQsIGJhc2VEZXNrdG9wLCBiYXNlTW9iaWxlUG9ydHJhaXQsIGRlYnVnXSk7XG5cbiAgLy8gYW5jaG9Db250ZW5lZG9yOiBzaWVtcHJlIChpZ3VhbCBxdWUgaG95KVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsID0gY29udGVuZWRvclJlZj8uY3VycmVudDtcbiAgICBpZiAoIWVsKSByZXR1cm47XG5cbiAgICBjb25zdCBhY3R1YWxpemFyID0gKCkgPT4ge1xuICAgICAgaWYgKCFjb250ZW5lZG9yUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIHNldEFuY2hvQ29udGVuZWRvcihjb250ZW5lZG9yUmVmLmN1cnJlbnQub2Zmc2V0V2lkdGggfHwgMCk7XG4gICAgfTtcblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhY3R1YWxpemFyKTtcblxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGFjdHVhbGl6YXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUoZWwpO1xuXG4gICAgcmV0dXJuICgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgfSwgW2NvbnRlbmVkb3JSZWZdKTtcblxuICAvLyBEZXJpdmFkb3MgKGlkZW50aWNvcyBhIHR1IGxvZ2ljYSBhY3R1YWwpXG4gIGNvbnN0IGVzY2FsYUFjdGl2YSA9IHpvb20gPT09IDEgPyBzY2FsZSA6IHpvb207XG5cbiAgY29uc3Qgd3JhcHBlckJhc2VXaWR0aCA9IHpvb20gPT09IDAuOCA/IHdyYXBwZXJCYXNlV2lkdGhab29tMDggOiB3cmFwcGVyQmFzZVdpZHRoWm9vbTE7XG5cbiAgY29uc3QgZXNjYWxhRml0TW9iaWxlUG9ydHJhaXQgPVxuICAgIGFuY2hvQ29udGVuZWRvciA+IDAgPyAoYW5jaG9Db250ZW5lZG9yIC8gd3JhcHBlckJhc2VXaWR0aCkgKiBmaXRCb29zdCA6IDE7XG5cbiAgY29uc3QgZXNjYWxhVmlzdWFsID0gaXNNb2JpbGVQb3J0cmFpdFxuICAgID8gZXNjYWxhRml0TW9iaWxlUG9ydHJhaXRcbiAgICA6IHpvb20gPT09IDFcbiAgICAgID8gc2NhbGVcbiAgICAgIDogem9vbSAqIHpvb21WaXN1YWxCb29zdDtcblxuICByZXR1cm4ge1xuICAgIGlzTW9iaWxlLFxuICAgIGlzTW9iaWxlUG9ydHJhaXQsXG5cbiAgICBzY2FsZSxcbiAgICBhbmNob0NvbnRlbmVkb3IsXG5cbiAgICBlc2NhbGFBY3RpdmEsXG4gICAgZXNjYWxhVmlzdWFsLFxuXG4gICAgd3JhcHBlckJhc2VXaWR0aCxcbiAgICBlc2NhbGFGaXRNb2JpbGVQb3J0cmFpdCxcbiAgfTtcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVZpZXdwb3J0U2NhbGUiLCJjb250ZW5lZG9yUmVmIiwiem9vbSIsImJhc2VEZXNrdG9wIiwiYmFzZU1vYmlsZVBvcnRyYWl0Iiwid3JhcHBlckJhc2VXaWR0aFpvb20xIiwid3JhcHBlckJhc2VXaWR0aFpvb20wOCIsImZpdEJvb3N0Iiwiem9vbVZpc3VhbEJvb3N0IiwiZGVidWciLCJpc01vYmlsZSIsInNldElzTW9iaWxlIiwiaXNNb2JpbGVQb3J0cmFpdCIsInNldElzTW9iaWxlUG9ydHJhaXQiLCJzY2FsZSIsInNldFNjYWxlIiwiYW5jaG9Db250ZW5lZG9yIiwic2V0QW5jaG9Db250ZW5lZG9yIiwibXFNb2JpbGUiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibXFUYWJsZXQiLCJtcVBvcnRyYWl0IiwibXFDb2Fyc2UiLCJ1cGRhdGUiLCJjb21wYWN0V2lkdGgiLCJtYXRjaGVzIiwidGFibGV0V2lkdGgiLCJjb2Fyc2VQb2ludGVyIiwibmV4dElzTW9iaWxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjdXJyZW50IiwicmFmIiwiYWN0dWFsaXphckVzY2FsYSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5jaG8iLCJvZmZzZXRXaWR0aCIsImJhc2UiLCJuZXh0U2NhbGUiLCJjb25zb2xlIiwibG9nIiwidG9GaXhlZCIsIm9ic2VydmVyIiwiUmVzaXplT2JzZXJ2ZXIiLCJvYnNlcnZlIiwiZGlzY29ubmVjdCIsImVsIiwiYWN0dWFsaXphciIsImVzY2FsYUFjdGl2YSIsIndyYXBwZXJCYXNlV2lkdGgiLCJlc2NhbGFGaXRNb2JpbGVQb3J0cmFpdCIsImVzY2FsYVZpc3VhbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useViewportScale.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/models/estructuraInicial.js":
/*!*****************************************!*\
  !*** ./src/models/estructuraInicial.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   crearObjetoTexto: () => (/* binding */ crearObjetoTexto),\n/* harmony export */   crearSeccion: () => (/* binding */ crearSeccion)\n/* harmony export */ });\n// ✅ Paso 1.1 – Modelo de datos para secciones y objetos (en Firestore)\n// Este archivo puede ir en src/models/estructuraInicial.js\nconst crearSeccion = ({ tipo = \"custom\", altura = 300, fondo = \"#ffffff\" }, seccionesExistentes = [])=>{\n    const maxOrden = Math.max(-1, ...seccionesExistentes.map((s)=>s.orden ?? 0));\n    return {\n        id: `seccion-${Date.now()}`,\n        tipo,\n        altura,\n        fondo,\n        orden: maxOrden + 1\n    };\n};\nconst crearObjetoTexto = ({ texto = \"Texto\", x = 100, y = 100, seccionId })=>{\n    return {\n        id: `obj-${Date.now()}`,\n        tipo: \"texto\",\n        texto,\n        x,\n        y,\n        fontSize: 24,\n        color: \"#000000\",\n        fontFamily: \"sans-serif\",\n        fontWeight: \"normal\",\n        fontStyle: \"normal\",\n        textDecoration: \"none\",\n        rotation: 0,\n        scaleX: 1,\n        scaleY: 1,\n        seccionId\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9tb2RlbHMvZXN0cnVjdHVyYUluaWNpYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx1RUFBdUU7QUFFdkUsMkRBQTJEO0FBRXBELE1BQU1BLGVBQWUsQ0FBQyxFQUFFQyxPQUFPLFFBQVEsRUFBRUMsU0FBUyxHQUFHLEVBQUVDLFFBQVEsU0FBUyxFQUFFLEVBQUVDLHNCQUFzQixFQUFFO0lBQ3pHLE1BQU1DLFdBQVdDLEtBQUtDLEdBQUcsQ0FBQyxDQUFDLE1BQU1ILG9CQUFvQkksR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxLQUFLLElBQUk7SUFFekUsT0FBTztRQUNMQyxJQUFJLENBQUMsUUFBUSxFQUFFQyxLQUFLQyxHQUFHLElBQUk7UUFDM0JaO1FBQ0FDO1FBQ0FDO1FBQ0FPLE9BQU9MLFdBQVc7SUFDcEI7QUFDRixFQUFFO0FBSUssTUFBTVMsbUJBQW1CLENBQUMsRUFBRUMsUUFBUSxPQUFPLEVBQUVDLElBQUksR0FBRyxFQUFFQyxJQUFJLEdBQUcsRUFBRUMsU0FBUyxFQUFFO0lBQy9FLE9BQU87UUFDTFAsSUFBSSxDQUFDLElBQUksRUFBRUMsS0FBS0MsR0FBRyxJQUFJO1FBQ3ZCWixNQUFNO1FBQ05jO1FBQ0FDO1FBQ0FDO1FBQ0FFLFVBQVU7UUFDVkMsT0FBTztRQUNQQyxZQUFZO1FBQ1pDLFlBQVk7UUFDWkMsV0FBVztRQUNYQyxnQkFBZ0I7UUFDaEJDLFVBQVU7UUFDVkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JUO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXG1vZGVsc1xcZXN0cnVjdHVyYUluaWNpYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g4pyFIFBhc28gMS4xIOKAkyBNb2RlbG8gZGUgZGF0b3MgcGFyYSBzZWNjaW9uZXMgeSBvYmpldG9zIChlbiBGaXJlc3RvcmUpXHJcblxyXG4vLyBFc3RlIGFyY2hpdm8gcHVlZGUgaXIgZW4gc3JjL21vZGVscy9lc3RydWN0dXJhSW5pY2lhbC5qc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWFyU2VjY2lvbiA9ICh7IHRpcG8gPSBcImN1c3RvbVwiLCBhbHR1cmEgPSAzMDAsIGZvbmRvID0gXCIjZmZmZmZmXCIgfSwgc2VjY2lvbmVzRXhpc3RlbnRlcyA9IFtdKSA9PiB7XHJcbiAgY29uc3QgbWF4T3JkZW4gPSBNYXRoLm1heCgtMSwgLi4uc2VjY2lvbmVzRXhpc3RlbnRlcy5tYXAocyA9PiBzLm9yZGVuID8/IDApKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiBgc2VjY2lvbi0ke0RhdGUubm93KCl9YCxcclxuICAgIHRpcG8sXHJcbiAgICBhbHR1cmEsXHJcbiAgICBmb25kbyxcclxuICAgIG9yZGVuOiBtYXhPcmRlbiArIDEsIC8vIOKchSBTaWVtcHJlIGNvbnNlY3V0aXZvXHJcbiAgfTtcclxufTtcclxuXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWFyT2JqZXRvVGV4dG8gPSAoeyB0ZXh0byA9IFwiVGV4dG9cIiwgeCA9IDEwMCwgeSA9IDEwMCwgc2VjY2lvbklkIH0pID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IGBvYmotJHtEYXRlLm5vdygpfWAsXHJcbiAgICB0aXBvOiBcInRleHRvXCIsXHJcbiAgICB0ZXh0byxcclxuICAgIHgsXHJcbiAgICB5LFxyXG4gICAgZm9udFNpemU6IDI0LFxyXG4gICAgY29sb3I6IFwiIzAwMDAwMFwiLFxyXG4gICAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXHJcbiAgICBmb250V2VpZ2h0OiBcIm5vcm1hbFwiLFxyXG4gICAgZm9udFN0eWxlOiBcIm5vcm1hbFwiLFxyXG4gICAgdGV4dERlY29yYXRpb246IFwibm9uZVwiLFxyXG4gICAgcm90YXRpb246IDAsXHJcbiAgICBzY2FsZVg6IDEsXHJcbiAgICBzY2FsZVk6IDEsXHJcbiAgICBzZWNjaW9uSWQsXHJcbiAgfTtcclxufTsiXSwibmFtZXMiOlsiY3JlYXJTZWNjaW9uIiwidGlwbyIsImFsdHVyYSIsImZvbmRvIiwic2VjY2lvbmVzRXhpc3RlbnRlcyIsIm1heE9yZGVuIiwiTWF0aCIsIm1heCIsIm1hcCIsInMiLCJvcmRlbiIsImlkIiwiRGF0ZSIsIm5vdyIsImNyZWFyT2JqZXRvVGV4dG8iLCJ0ZXh0byIsIngiLCJ5Iiwic2VjY2lvbklkIiwiZm9udFNpemUiLCJjb2xvciIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwidGV4dERlY29yYXRpb24iLCJyb3RhdGlvbiIsInNjYWxlWCIsInNjYWxlWSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/models/estructuraInicial.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/models/lineConstants.js":
/*!*************************************!*\
  !*** ./src/models/lineConstants.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LINE_CONSTANTS: () => (/* binding */ LINE_CONSTANTS)\n/* harmony export */ });\n// src/models/lineConstants.js\n// Constantes para líneas - mantener consistencia entre Canvas y HTML\nconst LINE_CONSTANTS = {\n    STROKE_WIDTH: 2,\n    HIT_STROKE_WIDTH: 15,\n    DEFAULT_LENGTH: 100,\n    DEFAULT_COLOR: \"#000000\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9tb2RlbHMvbGluZUNvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsOEJBQThCO0FBQzlCLHFFQUFxRTtBQUM5RCxNQUFNQSxpQkFBaUI7SUFDNUJDLGNBQWM7SUFDZEMsa0JBQWtCO0lBQ2xCQyxnQkFBZ0I7SUFDaEJDLGVBQWU7QUFDakIsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxtb2RlbHNcXGxpbmVDb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL21vZGVscy9saW5lQ29uc3RhbnRzLmpzXHJcbi8vIENvbnN0YW50ZXMgcGFyYSBsw61uZWFzIC0gbWFudGVuZXIgY29uc2lzdGVuY2lhIGVudHJlIENhbnZhcyB5IEhUTUxcclxuZXhwb3J0IGNvbnN0IExJTkVfQ09OU1RBTlRTID0ge1xyXG4gIFNUUk9LRV9XSURUSDogMiwgICAgICAgIC8vIEdyb3NvciB2aXN1YWwgZGUgbGEgbMOtbmVhIGVuIHDDrXhlbGVzXHJcbiAgSElUX1NUUk9LRV9XSURUSDogMTUsICAgLy8gw4FyZWEgZGUgY2xpY2sgbcOhcyBncmFuZGUgcGFyYSBtZWpvciBVWFxyXG4gIERFRkFVTFRfTEVOR1RIOiAxMDAsICAgIC8vIExvbmdpdHVkIHBvciBkZWZlY3RvIGRlIHVuYSBsw61uZWFcclxuICBERUZBVUxUX0NPTE9SOiBcIiMwMDAwMDBcIlxyXG59OyJdLCJuYW1lcyI6WyJMSU5FX0NPTlNUQU5UUyIsIlNUUk9LRV9XSURUSCIsIkhJVF9TVFJPS0VfV0lEVEgiLCJERUZBVUxUX0xFTkdUSCIsIkRFRkFVTFRfQ09MT1IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/models/lineConstants.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/accionesFondo.js":
/*!************************************!*\
  !*** ./src/utils/accionesFondo.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   desanclarImagenDeFondo: () => (/* binding */ desanclarImagenDeFondo),\n/* harmony export */   reemplazarFondoSeccion: () => (/* binding */ reemplazarFondoSeccion)\n/* harmony export */ });\n// src/utils/accionesFondo.js\n/**\r\n * 🎨 Reemplazar imagen seleccionada como fondo de sección\r\n */ const reemplazarFondoSeccion = ({ elementoImagen, secciones, objetos, setSecciones, setObjetos, setElementosSeleccionados, setMostrarPanelZ })=>{\n    if (!elementoImagen || elementoImagen.tipo !== \"imagen\") {\n        console.warn(\"❌ El elemento no es una imagen válida\");\n        return;\n    }\n    if (!elementoImagen.seccionId) {\n        console.warn(\"❌ La imagen no tiene sección asignada\");\n        return;\n    }\n    try {\n        console.log(\"🎨 Convirtiendo imagen a fondo de sección:\", elementoImagen.id);\n        const seccionesActualizadas = secciones.map((seccion)=>seccion.id === elementoImagen.seccionId ? {\n                ...seccion,\n                fondo: \"#ffffff\",\n                fondoTipo: \"imagen\",\n                fondoImagen: elementoImagen.src,\n                fondoImagenOffsetX: 0,\n                fondoImagenOffsetY: 0,\n                fondoImagenDraggable: true\n            } : seccion);\n        const objetosFiltrados = objetos.filter((obj)=>obj.id !== elementoImagen.id);\n        setSecciones(seccionesActualizadas);\n        setObjetos(objetosFiltrados);\n        setElementosSeleccionados([]);\n        setMostrarPanelZ(false);\n        console.log(\"✅ Fondo de sección actualizado con imagen\");\n    } catch (error) {\n        console.error(\"❌ Error al reemplazar fondo de sección:\", error);\n        alert(\"Ocurrió un error al cambiar el fondo. Inténtalo de nuevo.\");\n    }\n};\n/**\r\n * 🔄 Desanclar imagen de fondo y convertirla en objeto editable\r\n */ const desanclarImagenDeFondo = ({ seccionId, secciones, objetos, setSecciones, setObjetos, setElementosSeleccionados })=>{\n    const seccion = secciones.find((s)=>s.id === seccionId);\n    if (!seccion || seccion.fondoTipo !== \"imagen\") {\n        console.warn(\"❌ La sección no tiene imagen de fondo para desanclar\");\n        return;\n    }\n    try {\n        const img = new Image();\n        img.crossOrigin = \"anonymous\";\n        img.src = seccion.fondoImagen;\n        img.onload = ()=>{\n            const originalWidth = img.naturalWidth || img.width;\n            const originalHeight = img.naturalHeight || img.height;\n            const maxWidth = 450;\n            const scale = Math.min(1, maxWidth / originalWidth);\n            const finalWidth = originalWidth * scale;\n            const finalHeight = originalHeight * scale;\n            const nuevoElementoImagen = {\n                id: `img-fondo-${Date.now()}`,\n                tipo: \"imagen\",\n                src: seccion.fondoImagen,\n                x: Math.max(0, (800 - finalWidth) / 2),\n                y: 50,\n                width: finalWidth,\n                height: finalHeight,\n                rotation: 0,\n                scaleX: 1,\n                scaleY: 1,\n                seccionId\n            };\n            const seccionesActualizadas = limpiarFondoImagen(secciones, seccionId);\n            const objetosActualizados = [\n                ...objetos,\n                nuevoElementoImagen\n            ];\n            setSecciones(seccionesActualizadas);\n            setObjetos(objetosActualizados);\n            setElementosSeleccionados([\n                nuevoElementoImagen.id\n            ]);\n            console.log(\"✅ Imagen desanclada con tamaño ajustado\");\n        };\n        img.onerror = ()=>{\n            console.warn(\"⚠️ No se pudo cargar la imagen, usando tamaño por defecto\");\n            const nuevoElementoImagen = {\n                id: `img-fondo-${Date.now()}`,\n                tipo: \"imagen\",\n                src: seccion.fondoImagen,\n                x: 100,\n                y: 50,\n                width: 600,\n                height: 400,\n                rotation: 0,\n                scaleX: 1,\n                scaleY: 1,\n                seccionId\n            };\n            const seccionesActualizadas = limpiarFondoImagen(secciones, seccionId);\n            const objetosActualizados = [\n                ...objetos,\n                nuevoElementoImagen\n            ];\n            setSecciones(seccionesActualizadas);\n            setObjetos(objetosActualizados);\n            setElementosSeleccionados([\n                nuevoElementoImagen.id\n            ]);\n            console.log(\"✅ Imagen desanclada con tamaño por defecto\");\n        };\n    } catch (error) {\n        console.error(\"❌ Error al desanclar imagen:\", error);\n        alert(\"Ocurrió un error al desanclar la imagen.\");\n    }\n};\n// 🧼 Helper para limpiar campos de imagen de fondo de una sección\nfunction limpiarFondoImagen(secciones, seccionId) {\n    return secciones.map((s)=>{\n        if (s.id !== seccionId) return s;\n        const limpio = {\n            ...s,\n            fondo: \"#ffffff\"\n        };\n        delete limpio.fondoTipo;\n        delete limpio.fondoImagen;\n        delete limpio.fondoImagenOffsetX;\n        delete limpio.fondoImagenOffsetY;\n        delete limpio.fondoImagenDraggable;\n        return limpio;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9hY2Npb25lc0ZvbmRvLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNkJBQTZCO0FBRTdCOztDQUVDLEdBQ00sTUFBTUEseUJBQXlCLENBQUMsRUFDckNDLGNBQWMsRUFDZEMsU0FBUyxFQUNUQyxPQUFPLEVBQ1BDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyx5QkFBeUIsRUFDekJDLGdCQUFnQixFQUNqQjtJQUNDLElBQUksQ0FBQ04sa0JBQWtCQSxlQUFlTyxJQUFJLEtBQUssVUFBVTtRQUN2REMsUUFBUUMsSUFBSSxDQUFDO1FBQ2I7SUFDRjtJQUVBLElBQUksQ0FBQ1QsZUFBZVUsU0FBUyxFQUFFO1FBQzdCRixRQUFRQyxJQUFJLENBQUM7UUFDYjtJQUNGO0lBRUEsSUFBSTtRQUNGRCxRQUFRRyxHQUFHLENBQUMsOENBQThDWCxlQUFlWSxFQUFFO1FBRTNFLE1BQU1DLHdCQUF3QlosVUFBVWEsR0FBRyxDQUFDLENBQUNDLFVBQzNDQSxRQUFRSCxFQUFFLEtBQUtaLGVBQWVVLFNBQVMsR0FDbkM7Z0JBQ0UsR0FBR0ssT0FBTztnQkFDVkMsT0FBTztnQkFDUEMsV0FBVztnQkFDWEMsYUFBYWxCLGVBQWVtQixHQUFHO2dCQUMvQkMsb0JBQW9CO2dCQUNwQkMsb0JBQW9CO2dCQUNwQkMsc0JBQXNCO1lBQ3hCLElBQ0FQO1FBR04sTUFBTVEsbUJBQW1CckIsUUFBUXNCLE1BQU0sQ0FBQyxDQUFDQyxNQUFRQSxJQUFJYixFQUFFLEtBQUtaLGVBQWVZLEVBQUU7UUFFN0VULGFBQWFVO1FBQ2JULFdBQVdtQjtRQUNYbEIsMEJBQTBCLEVBQUU7UUFDNUJDLGlCQUFpQjtRQUVqQkUsUUFBUUcsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPZSxPQUFPO1FBQ2RsQixRQUFRa0IsS0FBSyxDQUFDLDJDQUEyQ0E7UUFDekRDLE1BQU07SUFDUjtBQUNGLEVBQUU7QUFHRjs7Q0FFQyxHQUNNLE1BQU1DLHlCQUF5QixDQUFDLEVBQ3JD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cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXHV0aWxzXFxhY2Npb25lc0ZvbmRvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9hY2Npb25lc0ZvbmRvLmpzXHJcblxyXG4vKipcclxuICog8J+OqCBSZWVtcGxhemFyIGltYWdlbiBzZWxlY2Npb25hZGEgY29tbyBmb25kbyBkZSBzZWNjacOzblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJlZW1wbGF6YXJGb25kb1NlY2Npb24gPSAoe1xyXG4gIGVsZW1lbnRvSW1hZ2VuLFxyXG4gIHNlY2Npb25lcyxcclxuICBvYmpldG9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBzZXRPYmpldG9zLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgc2V0TW9zdHJhclBhbmVsWixcclxufSkgPT4ge1xyXG4gIGlmICghZWxlbWVudG9JbWFnZW4gfHwgZWxlbWVudG9JbWFnZW4udGlwbyAhPT0gXCJpbWFnZW5cIikge1xyXG4gICAgY29uc29sZS53YXJuKFwi4p2MIEVsIGVsZW1lbnRvIG5vIGVzIHVuYSBpbWFnZW4gdsOhbGlkYVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmICghZWxlbWVudG9JbWFnZW4uc2VjY2lvbklkKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCLinYwgTGEgaW1hZ2VuIG5vIHRpZW5lIHNlY2Npw7NuIGFzaWduYWRhXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+OqCBDb252aXJ0aWVuZG8gaW1hZ2VuIGEgZm9uZG8gZGUgc2VjY2nDs246XCIsIGVsZW1lbnRvSW1hZ2VuLmlkKTtcclxuXHJcbiAgICBjb25zdCBzZWNjaW9uZXNBY3R1YWxpemFkYXMgPSBzZWNjaW9uZXMubWFwKChzZWNjaW9uKSA9PlxyXG4gICAgICBzZWNjaW9uLmlkID09PSBlbGVtZW50b0ltYWdlbi5zZWNjaW9uSWRcclxuICAgICAgICA/IHtcclxuICAgICAgICAgICAgLi4uc2VjY2lvbixcclxuICAgICAgICAgICAgZm9uZG86IFwiI2ZmZmZmZlwiLFxyXG4gICAgICAgICAgICBmb25kb1RpcG86IFwiaW1hZ2VuXCIsXHJcbiAgICAgICAgICAgIGZvbmRvSW1hZ2VuOiBlbGVtZW50b0ltYWdlbi5zcmMsXHJcbiAgICAgICAgICAgIGZvbmRvSW1hZ2VuT2Zmc2V0WDogMCxcclxuICAgICAgICAgICAgZm9uZG9JbWFnZW5PZmZzZXRZOiAwLFxyXG4gICAgICAgICAgICBmb25kb0ltYWdlbkRyYWdnYWJsZTogdHJ1ZSxcclxuICAgICAgICAgIH1cclxuICAgICAgICA6IHNlY2Npb25cclxuICAgICk7XHJcblxyXG4gICAgY29uc3Qgb2JqZXRvc0ZpbHRyYWRvcyA9IG9iamV0b3MuZmlsdGVyKChvYmopID0+IG9iai5pZCAhPT0gZWxlbWVudG9JbWFnZW4uaWQpO1xyXG5cclxuICAgIHNldFNlY2Npb25lcyhzZWNjaW9uZXNBY3R1YWxpemFkYXMpO1xyXG4gICAgc2V0T2JqZXRvcyhvYmpldG9zRmlsdHJhZG9zKTtcclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW10pO1xyXG4gICAgc2V0TW9zdHJhclBhbmVsWihmYWxzZSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLinIUgRm9uZG8gZGUgc2VjY2nDs24gYWN0dWFsaXphZG8gY29uIGltYWdlblwiKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBhbCByZWVtcGxhemFyIGZvbmRvIGRlIHNlY2Npw7NuOlwiLCBlcnJvcik7XHJcbiAgICBhbGVydChcIk9jdXJyacOzIHVuIGVycm9yIGFsIGNhbWJpYXIgZWwgZm9uZG8uIEludMOpbnRhbG8gZGUgbnVldm8uXCIpO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vKipcclxuICog8J+UhCBEZXNhbmNsYXIgaW1hZ2VuIGRlIGZvbmRvIHkgY29udmVydGlybGEgZW4gb2JqZXRvIGVkaXRhYmxlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZGVzYW5jbGFySW1hZ2VuRGVGb25kbyA9ICh7XHJcbiAgc2VjY2lvbklkLFxyXG4gIHNlY2Npb25lcyxcclxuICBvYmpldG9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBzZXRPYmpldG9zLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbn0pID0+IHtcclxuICBjb25zdCBzZWNjaW9uID0gc2VjY2lvbmVzLmZpbmQocyA9PiBzLmlkID09PSBzZWNjaW9uSWQpO1xyXG4gIGlmICghc2VjY2lvbiB8fCBzZWNjaW9uLmZvbmRvVGlwbyAhPT0gXCJpbWFnZW5cIikge1xyXG4gICAgY29uc29sZS53YXJuKFwi4p2MIExhIHNlY2Npw7NuIG5vIHRpZW5lIGltYWdlbiBkZSBmb25kbyBwYXJhIGRlc2FuY2xhclwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIGltZy5jcm9zc09yaWdpbiA9IFwiYW5vbnltb3VzXCI7XHJcbiAgICBpbWcuc3JjID0gc2VjY2lvbi5mb25kb0ltYWdlbjtcclxuXHJcbiAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gIGNvbnN0IG9yaWdpbmFsV2lkdGggPSBpbWcubmF0dXJhbFdpZHRoIHx8IGltZy53aWR0aDtcclxuICBjb25zdCBvcmlnaW5hbEhlaWdodCA9IGltZy5uYXR1cmFsSGVpZ2h0IHx8IGltZy5oZWlnaHQ7XHJcblxyXG4gIGNvbnN0IG1heFdpZHRoID0gNDUwO1xyXG4gIGNvbnN0IHNjYWxlID0gTWF0aC5taW4oMSwgbWF4V2lkdGggLyBvcmlnaW5hbFdpZHRoKTtcclxuXHJcbiAgY29uc3QgZmluYWxXaWR0aCA9IG9yaWdpbmFsV2lkdGggKiBzY2FsZTtcclxuICBjb25zdCBmaW5hbEhlaWdodCA9IG9yaWdpbmFsSGVpZ2h0ICogc2NhbGU7XHJcblxyXG4gIGNvbnN0IG51ZXZvRWxlbWVudG9JbWFnZW4gPSB7XHJcbiAgICBpZDogYGltZy1mb25kby0ke0RhdGUubm93KCl9YCxcclxuICAgIHRpcG86IFwiaW1hZ2VuXCIsXHJcbiAgICBzcmM6IHNlY2Npb24uZm9uZG9JbWFnZW4sXHJcbiAgICB4OiBNYXRoLm1heCgwLCAoODAwIC0gZmluYWxXaWR0aCkgLyAyKSxcclxuICAgIHk6IDUwLFxyXG4gICAgd2lkdGg6IGZpbmFsV2lkdGgsXHJcbiAgICBoZWlnaHQ6IGZpbmFsSGVpZ2h0LFxyXG4gICAgcm90YXRpb246IDAsXHJcbiAgICBzY2FsZVg6IDEsXHJcbiAgICBzY2FsZVk6IDEsXHJcbiAgICBzZWNjaW9uSWQsXHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2VjY2lvbmVzQWN0dWFsaXphZGFzID0gbGltcGlhckZvbmRvSW1hZ2VuKHNlY2Npb25lcywgc2VjY2lvbklkKTtcclxuICBjb25zdCBvYmpldG9zQWN0dWFsaXphZG9zID0gWy4uLm9iamV0b3MsIG51ZXZvRWxlbWVudG9JbWFnZW5dO1xyXG5cclxuICBzZXRTZWNjaW9uZXMoc2VjY2lvbmVzQWN0dWFsaXphZGFzKTtcclxuICBzZXRPYmpldG9zKG9iamV0b3NBY3R1YWxpemFkb3MpO1xyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW251ZXZvRWxlbWVudG9JbWFnZW4uaWRdKTtcclxuXHJcbiAgY29uc29sZS5sb2coXCLinIUgSW1hZ2VuIGRlc2FuY2xhZGEgY29uIHRhbWHDsW8gYWp1c3RhZG9cIik7XHJcbn07XHJcblxyXG5cclxuICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gTm8gc2UgcHVkbyBjYXJnYXIgbGEgaW1hZ2VuLCB1c2FuZG8gdGFtYcOxbyBwb3IgZGVmZWN0b1wiKTtcclxuXHJcbiAgICAgIGNvbnN0IG51ZXZvRWxlbWVudG9JbWFnZW4gPSB7XHJcbiAgICAgICAgaWQ6IGBpbWctZm9uZG8tJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgICAgdGlwbzogXCJpbWFnZW5cIixcclxuICAgICAgICBzcmM6IHNlY2Npb24uZm9uZG9JbWFnZW4sXHJcbiAgICAgICAgeDogMTAwLFxyXG4gICAgICAgIHk6IDUwLFxyXG4gICAgICAgIHdpZHRoOiA2MDAsXHJcbiAgICAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgICAgICAgcm90YXRpb246IDAsXHJcbiAgICAgICAgc2NhbGVYOiAxLFxyXG4gICAgICAgIHNjYWxlWTogMSxcclxuICAgICAgICBzZWNjaW9uSWQsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBzZWNjaW9uZXNBY3R1YWxpemFkYXMgPSBsaW1waWFyRm9uZG9JbWFnZW4oc2VjY2lvbmVzLCBzZWNjaW9uSWQpO1xyXG4gICAgICBjb25zdCBvYmpldG9zQWN0dWFsaXphZG9zID0gWy4uLm9iamV0b3MsIG51ZXZvRWxlbWVudG9JbWFnZW5dO1xyXG5cclxuICAgICAgc2V0U2VjY2lvbmVzKHNlY2Npb25lc0FjdHVhbGl6YWRhcyk7XHJcbiAgICAgIHNldE9iamV0b3Mob2JqZXRvc0FjdHVhbGl6YWRvcyk7XHJcbiAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW251ZXZvRWxlbWVudG9JbWFnZW4uaWRdKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEltYWdlbiBkZXNhbmNsYWRhIGNvbiB0YW1hw7FvIHBvciBkZWZlY3RvXCIpO1xyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBhbCBkZXNhbmNsYXIgaW1hZ2VuOlwiLCBlcnJvcik7XHJcbiAgICBhbGVydChcIk9jdXJyacOzIHVuIGVycm9yIGFsIGRlc2FuY2xhciBsYSBpbWFnZW4uXCIpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIPCfp7wgSGVscGVyIHBhcmEgbGltcGlhciBjYW1wb3MgZGUgaW1hZ2VuIGRlIGZvbmRvIGRlIHVuYSBzZWNjacOzblxyXG5mdW5jdGlvbiBsaW1waWFyRm9uZG9JbWFnZW4oc2VjY2lvbmVzLCBzZWNjaW9uSWQpIHtcclxuICByZXR1cm4gc2VjY2lvbmVzLm1hcChzID0+IHtcclxuICAgIGlmIChzLmlkICE9PSBzZWNjaW9uSWQpIHJldHVybiBzO1xyXG5cclxuICAgIGNvbnN0IGxpbXBpbyA9IHsgLi4ucywgZm9uZG86IFwiI2ZmZmZmZlwiIH07XHJcbiAgICBkZWxldGUgbGltcGlvLmZvbmRvVGlwbztcclxuICAgIGRlbGV0ZSBsaW1waW8uZm9uZG9JbWFnZW47XHJcbiAgICBkZWxldGUgbGltcGlvLmZvbmRvSW1hZ2VuT2Zmc2V0WDtcclxuICAgIGRlbGV0ZSBsaW1waW8uZm9uZG9JbWFnZW5PZmZzZXRZO1xyXG4gICAgZGVsZXRlIGxpbXBpby5mb25kb0ltYWdlbkRyYWdnYWJsZTtcclxuICAgIHJldHVybiBsaW1waW87XHJcbiAgfSk7XHJcbn0iXSwibmFtZXMiOlsicmVlbXBsYXphckZvbmRvU2VjY2lvbiIsImVsZW1lbnRvSW1hZ2VuIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsInNldFNlY2Npb25lcyIsInNldE9iamV0b3MiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic2V0TW9zdHJhclBhbmVsWiIsInRpcG8iLCJjb25zb2xlIiwid2FybiIsInNlY2Npb25JZCIsImxvZyIsImlkIiwic2VjY2lvbmVzQWN0dWFsaXphZGFzIiwibWFwIiwic2VjY2lvbiIsImZvbmRvIiwiZm9uZG9UaXBvIiwiZm9uZG9JbWFnZW4iLCJzcmMiLCJmb25kb0ltYWdlbk9mZnNldFgiLCJmb25kb0ltYWdlbk9mZnNldFkiLCJmb25kb0ltYWdlbkRyYWdnYWJsZSIsIm9iamV0b3NGaWx0cmFkb3MiLCJmaWx0ZXIiLCJvYmoiLCJlcnJvciIsImFsZXJ0IiwiZGVzYW5jbGFySW1hZ2VuRGVGb25kbyIsImZpbmQiLCJzIiwiaW1nIiwiSW1hZ2UiLCJjcm9zc09yaWdpbiIsIm9ubG9hZCIsIm9yaWdpbmFsV2lkdGgiLCJuYXR1cmFsV2lkdGgiLCJ3aWR0aCIsIm9yaWdpbmFsSGVpZ2h0IiwibmF0dXJhbEhlaWdodCIsImhlaWdodCIsIm1heFdpZHRoIiwic2NhbGUiLCJNYXRoIiwibWluIiwiZmluYWxXaWR0aCIsImZpbmFsSGVpZ2h0IiwibnVldm9FbGVtZW50b0ltYWdlbiIsIkRhdGUiLCJub3ciLCJ4IiwibWF4IiwieSIsInJvdGF0aW9uIiwic2NhbGVYIiwic2NhbGVZIiwibGltcGlhckZvbmRvSW1hZ2VuIiwib2JqZXRvc0FjdHVhbGl6YWRvcyIsIm9uZXJyb3IiLCJsaW1waW8iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/accionesFondo.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/calcGrid.js":
/*!*******************************!*\
  !*** ./src/utils/calcGrid.js ***!
  \*******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcGalleryLayout: () => (/* binding */ calcGalleryLayout)\n/* harmony export */ });\n// src/utils/calcGrid.js\n/**\r\n * cellRatio = ALTO/ANCHO por celda (1 -> 1:1, 3/4 -> 4:3, 9/16 -> 16:9)\r\n * width = ancho del grupo (frame)\r\n * Devuelve rects (x,y,width,height) y el alto total necesario del grupo.\r\n */ function calcGalleryLayout({ width, rows, cols, gap, cellRatio }) {\n    const totalGapX = gap * (cols - 1);\n    const totalGapY = gap * (rows - 1);\n    // Ancho de cada celda\n    const cellW = (width - totalGapX) / cols;\n    const cellH = cellW * cellRatio;\n    // Alto total del grupo para que las celdas respeten la proporción\n    const totalHeight = rows * cellH + totalGapY;\n    const rects = [];\n    for(let r = 0; r < rows; r++){\n        for(let c = 0; c < cols; c++){\n            rects.push({\n                x: c * (cellW + gap),\n                y: r * (cellH + gap),\n                width: cellW,\n                height: cellH\n            });\n        }\n    }\n    return {\n        rects,\n        totalHeight\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9jYWxjR3JpZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsd0JBQXdCO0FBRXhCOzs7O0NBSUMsR0FDTSxTQUFTQSxrQkFBa0IsRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsR0FBRyxFQUFFQyxTQUFTLEVBQUU7SUFDckUsTUFBTUMsWUFBWUYsTUFBT0QsQ0FBQUEsT0FBTztJQUNoQyxNQUFNSSxZQUFZSCxNQUFPRixDQUFBQSxPQUFPO0lBRWhDLHNCQUFzQjtJQUN0QixNQUFNTSxRQUFRLENBQUNQLFFBQVFLLFNBQVEsSUFBS0g7SUFDcEMsTUFBTU0sUUFBUUQsUUFBUUg7SUFFdEIsa0VBQWtFO0lBQ2xFLE1BQU1LLGNBQWNSLE9BQU9PLFFBQVFGO0lBRW5DLE1BQU1JLFFBQVEsRUFBRTtJQUNoQixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVYsTUFBTVUsSUFBSztRQUM3QixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVYsTUFBTVUsSUFBSztZQUM3QkYsTUFBTUcsSUFBSSxDQUFDO2dCQUNUQyxHQUFHRixJQUFLTCxDQUFBQSxRQUFRSixHQUFFO2dCQUNsQlksR0FBR0osSUFBS0gsQ0FBQUEsUUFBUUwsR0FBRTtnQkFDbEJILE9BQU9PO2dCQUNQUyxRQUFRUjtZQUNWO1FBQ0Y7SUFDRjtJQUVBLE9BQU87UUFBRUU7UUFBT0Q7SUFBWTtBQUM5QiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcY2FsY0dyaWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2NhbGNHcmlkLmpzXHJcblxyXG4vKipcclxuICogY2VsbFJhdGlvID0gQUxUTy9BTkNITyBwb3IgY2VsZGEgKDEgLT4gMToxLCAzLzQgLT4gNDozLCA5LzE2IC0+IDE2OjkpXHJcbiAqIHdpZHRoID0gYW5jaG8gZGVsIGdydXBvIChmcmFtZSlcclxuICogRGV2dWVsdmUgcmVjdHMgKHgseSx3aWR0aCxoZWlnaHQpIHkgZWwgYWx0byB0b3RhbCBuZWNlc2FyaW8gZGVsIGdydXBvLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNHYWxsZXJ5TGF5b3V0KHsgd2lkdGgsIHJvd3MsIGNvbHMsIGdhcCwgY2VsbFJhdGlvIH0pIHtcclxuICBjb25zdCB0b3RhbEdhcFggPSBnYXAgKiAoY29scyAtIDEpO1xyXG4gIGNvbnN0IHRvdGFsR2FwWSA9IGdhcCAqIChyb3dzIC0gMSk7XHJcblxyXG4gIC8vIEFuY2hvIGRlIGNhZGEgY2VsZGFcclxuICBjb25zdCBjZWxsVyA9ICh3aWR0aCAtIHRvdGFsR2FwWCkgLyBjb2xzO1xyXG4gIGNvbnN0IGNlbGxIID0gY2VsbFcgKiBjZWxsUmF0aW87XHJcblxyXG4gIC8vIEFsdG8gdG90YWwgZGVsIGdydXBvIHBhcmEgcXVlIGxhcyBjZWxkYXMgcmVzcGV0ZW4gbGEgcHJvcG9yY2nDs25cclxuICBjb25zdCB0b3RhbEhlaWdodCA9IHJvd3MgKiBjZWxsSCArIHRvdGFsR2FwWTtcclxuXHJcbiAgY29uc3QgcmVjdHMgPSBbXTtcclxuICBmb3IgKGxldCByID0gMDsgciA8IHJvd3M7IHIrKykge1xyXG4gICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb2xzOyBjKyspIHtcclxuICAgICAgcmVjdHMucHVzaCh7XHJcbiAgICAgICAgeDogYyAqIChjZWxsVyArIGdhcCksXHJcbiAgICAgICAgeTogciAqIChjZWxsSCArIGdhcCksXHJcbiAgICAgICAgd2lkdGg6IGNlbGxXLFxyXG4gICAgICAgIGhlaWdodDogY2VsbEgsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgcmVjdHMsIHRvdGFsSGVpZ2h0IH07XHJcbn1cclxuIl0sIm5hbWVzIjpbImNhbGNHYWxsZXJ5TGF5b3V0Iiwid2lkdGgiLCJyb3dzIiwiY29scyIsImdhcCIsImNlbGxSYXRpbyIsInRvdGFsR2FwWCIsInRvdGFsR2FwWSIsImNlbGxXIiwiY2VsbEgiLCJ0b3RhbEhlaWdodCIsInJlY3RzIiwiciIsImMiLCJwdXNoIiwieCIsInkiLCJoZWlnaHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/calcGrid.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/editorActions.js":
/*!************************************!*\
  !*** ./src/utils/editorActions.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cambiarAlineacionTexto: () => (/* binding */ cambiarAlineacionTexto),\n/* harmony export */   copiarElemento: () => (/* binding */ copiarElemento),\n/* harmony export */   duplicarElemento: () => (/* binding */ duplicarElemento),\n/* harmony export */   ejecutarDeshacer: () => (/* binding */ ejecutarDeshacer),\n/* harmony export */   ejecutarRehacer: () => (/* binding */ ejecutarRehacer),\n/* harmony export */   eliminarElemento: () => (/* binding */ eliminarElemento),\n/* harmony export */   pegarElemento: () => (/* binding */ pegarElemento)\n/* harmony export */ });\n// src/utils/editorActions.js\nfunction ejecutarDeshacer({ historial, setHistorial, setObjetos, setSecciones, setFuturos, ignoreNextUpdateRef, setElementosSeleccionados, setMostrarPanelZ }) {\n    if (historial.length > 1) {\n        setElementosSeleccionados([]);\n        setMostrarPanelZ(false);\n        ignoreNextUpdateRef.current = (ignoreNextUpdateRef.current || 0) + 1;\n        setHistorial((prev)=>{\n            const nuevoHistorial = [\n                ...prev\n            ];\n            const estadoActual = nuevoHistorial.pop();\n            const estadoAnterior = nuevoHistorial[nuevoHistorial.length - 1];\n            // Aplicar estado anterior\n            setObjetos(estadoAnterior.objetos || []);\n            setSecciones(estadoAnterior.secciones || []);\n            // Guardar para rehacer (push al frente, igual que tu lógica actual)\n            setFuturos((f)=>[\n                    estadoActual,\n                    ...f.slice(0, 19)\n                ]);\n            return nuevoHistorial;\n        });\n    }\n}\nfunction ejecutarRehacer({ futuros, setFuturos, setHistorial, setObjetos, setSecciones, ignoreNextUpdateRef, setElementosSeleccionados, setMostrarPanelZ }) {\n    if (futuros.length > 0) {\n        setElementosSeleccionados([]);\n        setMostrarPanelZ(false);\n        const siguienteEstado = futuros[0];\n        ignoreNextUpdateRef.current = (ignoreNextUpdateRef.current || 0) + 1;\n        setObjetos(siguienteEstado.objetos || []);\n        setSecciones(siguienteEstado.secciones || []);\n        setFuturos((f)=>f.slice(1));\n        setHistorial((h)=>[\n                ...h,\n                siguienteEstado\n            ]);\n    }\n}\nfunction duplicarElemento({ objetos, elementosSeleccionados, setObjetos, setElementosSeleccionados }) {\n    const seleccionados = objetos.filter((o)=>elementosSeleccionados.includes(o.id));\n    const duplicados = seleccionados.map((original, i)=>({\n            ...original,\n            id: `obj-${Date.now()}-${i}`,\n            x: original.x + 20,\n            y: original.y + 20\n        }));\n    setObjetos((prev)=>[\n            ...prev,\n            ...duplicados\n        ]);\n    setElementosSeleccionados(duplicados.map((d)=>d.id));\n}\nfunction eliminarElemento({ objetos, elementosSeleccionados, setObjetos, setElementosSeleccionados, setMostrarPanelZ }) {\n    if (elementosSeleccionados.length === 0) return;\n    const idsAEliminar = [\n        ...elementosSeleccionados\n    ];\n    setElementosSeleccionados([]);\n    setMostrarPanelZ(false);\n    setTimeout(()=>{\n        setObjetos((prev)=>prev.filter((o)=>!idsAEliminar.includes(o.id)));\n    }, 10);\n}\nfunction copiarElemento({ objetos, elementosSeleccionados }) {\n    const seleccionados = objetos.filter((o)=>elementosSeleccionados.includes(o.id));\n    if (seleccionados.length > 0) {\n        window._objetosCopiados = seleccionados.map((o)=>({\n                ...o,\n                id: undefined\n            }));\n    }\n}\nfunction pegarElemento({ setObjetos, setElementosSeleccionados }) {\n    const copiados = window._objetosCopiados || [];\n    if (!window._objetosCopiados || window._objetosCopiados.length === 0) return;\n    const offset = 30 + Math.random() * 20;\n    const nuevos = copiados.map((c, i)=>({\n            ...c,\n            id: `obj-${Date.now()}-${i}`,\n            x: (c.x || 100) + offset,\n            y: (c.y || 100) + offset\n        }));\n    setObjetos((prev)=>[\n            ...prev,\n            ...nuevos\n        ]);\n    setElementosSeleccionados(nuevos.map((n)=>n.id));\n}\nfunction cambiarAlineacionTexto({ objetos, elementosSeleccionados, setObjetos }) {\n    const alineaciones = [\n        'left',\n        'center',\n        'right',\n        'justify'\n    ];\n    setObjetos((prev)=>prev.map((o)=>{\n            if (!elementosSeleccionados.includes(o.id) || o.tipo !== 'texto') return o;\n            const currentIndex = alineaciones.indexOf(o.align || 'left');\n            const nextIndex = (currentIndex + 1) % alineaciones.length;\n            const nuevaAlineacion = alineaciones[nextIndex];\n            return {\n                ...o,\n                align: nuevaAlineacion\n            };\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9lZGl0b3JBY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSw2QkFBNkI7QUFFdEIsU0FBU0EsaUJBQWlCLEVBQy9CQyxTQUFTLEVBQ1RDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLFVBQVUsRUFDVkMsbUJBQW1CLEVBQ25CQyx5QkFBeUIsRUFDekJDLGdCQUFnQixFQUNqQjtJQUNDLElBQUlQLFVBQVVRLE1BQU0sR0FBRyxHQUFHO1FBQ3hCRiwwQkFBMEIsRUFBRTtRQUM1QkMsaUJBQWlCO1FBRWpCRixvQkFBb0JJLE9BQU8sR0FBRyxDQUFDSixvQkFBb0JJLE9BQU8sSUFBSSxLQUFLO1FBR25FUixhQUFhLENBQUNTO1lBQ1osTUFBTUMsaUJBQWlCO21CQUFJRDthQUFLO1lBQ2hDLE1BQU1FLGVBQWVELGVBQWVFLEdBQUc7WUFDdkMsTUFBTUMsaUJBQWlCSCxjQUFjLENBQUNBLGVBQWVILE1BQU0sR0FBRyxFQUFFO1lBRWhFLDBCQUEwQjtZQUMxQk4sV0FBV1ksZUFBZUMsT0FBTyxJQUFJLEVBQUU7WUFDdkNaLGFBQWFXLGVBQWVFLFNBQVMsSUFBSSxFQUFFO1lBRTNDLG9FQUFvRTtZQUNwRVosV0FBVyxDQUFDYSxJQUFNO29CQUFDTDt1QkFBaUJLLEVBQUVDLEtBQUssQ0FBQyxHQUFHO2lCQUFJO1lBRW5ELE9BQU9QO1FBQ1Q7SUFDRjtBQUNGO0FBRU8sU0FBU1EsZ0JBQWdCLEVBQzlCQyxPQUFPLEVBQ1BoQixVQUFVLEVBQ1ZILFlBQVksRUFDWkMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pFLG1CQUFtQixFQUNuQkMseUJBQXlCLEVBQ3pCQyxnQkFBZ0IsRUFDakI7SUFDQyxJQUFJYSxRQUFRWixNQUFNLEdBQUcsR0FBRztRQUN0QkYsMEJBQTBCLEVBQUU7UUFDNUJDLGlCQUFpQjtRQUVqQixNQUFNYyxrQkFBa0JELE9BQU8sQ0FBQyxFQUFFO1FBRWxDZixvQkFBb0JJLE9BQU8s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QVUsRUFBRTtJQUNwRixNQUFNcUQsZUFBZTtRQUFDO1FBQVE7UUFBVTtRQUFTO0tBQVU7SUFFM0RyRCxXQUFXLENBQUNRLE9BQ1ZBLEtBQUtxQixHQUFHLENBQUMsQ0FBQ0o7WUFDUixJQUFJLENBQUNILHVCQUF1QkksUUFBUSxDQUFDRCxFQUFFRSxFQUFFLEtBQUtGLEVBQUU2QixJQUFJLEtBQUssU0FBUyxPQUFPN0I7WUFFekUsTUFBTThCLGVBQWVGLGFBQWFHLE9BQU8sQ0FBQy9CLEVBQUVnQyxLQUFLLElBQUk7WUFDckQsTUFBTUMsWUFBWSxDQUFDSCxlQUFlLEtBQUtGLGFBQWEvQyxNQUFNO1lBQzFELE1BQU1xRCxrQkFBa0JOLFlBQVksQ0FBQ0ssVUFBVTtZQUUvQyxPQUFPO2dCQUFFLEdBQUdqQyxDQUFDO2dCQUFFZ0MsT0FBT0U7WUFBZ0I7UUFDeEM7QUFFSiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcZWRpdG9yQWN0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZWRpdG9yQWN0aW9ucy5qc1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVqZWN1dGFyRGVzaGFjZXIoe1xyXG4gIGhpc3RvcmlhbCxcclxuICBzZXRIaXN0b3JpYWwsXHJcbiAgc2V0T2JqZXRvcyxcclxuICBzZXRTZWNjaW9uZXMsXHJcbiAgc2V0RnV0dXJvcyxcclxuICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgc2V0TW9zdHJhclBhbmVsWlxyXG59KSB7XHJcbiAgaWYgKGhpc3RvcmlhbC5sZW5ndGggPiAxKSB7XHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtdKTtcclxuICAgIHNldE1vc3RyYXJQYW5lbFooZmFsc2UpO1xyXG5cclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYuY3VycmVudCA9IChpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgfHwgMCkgKyAxO1xyXG5cclxuXHJcbiAgICBzZXRIaXN0b3JpYWwoKHByZXYpID0+IHtcclxuICAgICAgY29uc3QgbnVldm9IaXN0b3JpYWwgPSBbLi4ucHJldl07XHJcbiAgICAgIGNvbnN0IGVzdGFkb0FjdHVhbCA9IG51ZXZvSGlzdG9yaWFsLnBvcCgpO1xyXG4gICAgICBjb25zdCBlc3RhZG9BbnRlcmlvciA9IG51ZXZvSGlzdG9yaWFsW251ZXZvSGlzdG9yaWFsLmxlbmd0aCAtIDFdO1xyXG5cclxuICAgICAgLy8gQXBsaWNhciBlc3RhZG8gYW50ZXJpb3JcclxuICAgICAgc2V0T2JqZXRvcyhlc3RhZG9BbnRlcmlvci5vYmpldG9zIHx8IFtdKTtcclxuICAgICAgc2V0U2VjY2lvbmVzKGVzdGFkb0FudGVyaW9yLnNlY2Npb25lcyB8fCBbXSk7XHJcblxyXG4gICAgICAvLyBHdWFyZGFyIHBhcmEgcmVoYWNlciAocHVzaCBhbCBmcmVudGUsIGlndWFsIHF1ZSB0dSBsw7NnaWNhIGFjdHVhbClcclxuICAgICAgc2V0RnV0dXJvcygoZikgPT4gW2VzdGFkb0FjdHVhbCwgLi4uZi5zbGljZSgwLCAxOSldKTtcclxuXHJcbiAgICAgIHJldHVybiBudWV2b0hpc3RvcmlhbDtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVqZWN1dGFyUmVoYWNlcih7XHJcbiAgZnV0dXJvcyxcclxuICBzZXRGdXR1cm9zLFxyXG4gIHNldEhpc3RvcmlhbCxcclxuICBzZXRPYmpldG9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgc2V0TW9zdHJhclBhbmVsWlxyXG59KSB7XHJcbiAgaWYgKGZ1dHVyb3MubGVuZ3RoID4gMCkge1xyXG4gICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyhbXSk7XHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKTtcclxuXHJcbiAgICBjb25zdCBzaWd1aWVudGVFc3RhZG8gPSBmdXR1cm9zWzBdO1xyXG5cclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYuY3VycmVudCA9IChpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgfHwgMCkgKyAxO1xyXG5cclxuICAgIHNldE9iamV0b3Moc2lndWllbnRlRXN0YWRvLm9iamV0b3MgfHwgW10pO1xyXG4gICAgc2V0U2VjY2lvbmVzKHNpZ3VpZW50ZUVzdGFkby5zZWNjaW9uZXMgfHwgW10pO1xyXG5cclxuICAgIHNldEZ1dHVyb3MoKGYpID0+IGYuc2xpY2UoMSkpO1xyXG4gICAgc2V0SGlzdG9yaWFsKChoKSA9PiBbLi4uaCwgc2lndWllbnRlRXN0YWRvXSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGR1cGxpY2FyRWxlbWVudG8oeyBvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zLCBzZXRPYmpldG9zLCBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIH0pIHtcclxuICBjb25zdCBzZWxlY2Npb25hZG9zID0gb2JqZXRvcy5maWx0ZXIoKG8pID0+IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoby5pZCkpO1xyXG4gIGNvbnN0IGR1cGxpY2Fkb3MgPSBzZWxlY2Npb25hZG9zLm1hcCgob3JpZ2luYWwsIGkpID0+ICh7XHJcbiAgICAuLi5vcmlnaW5hbCxcclxuICAgIGlkOiBgb2JqLSR7RGF0ZS5ub3coKX0tJHtpfWAsXHJcbiAgICB4OiBvcmlnaW5hbC54ICsgMjAsXHJcbiAgICB5OiBvcmlnaW5hbC55ICsgMjAsXHJcbiAgfSkpO1xyXG5cclxuICBzZXRPYmpldG9zKChwcmV2KSA9PiBbLi4ucHJldiwgLi4uZHVwbGljYWRvc10pO1xyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoZHVwbGljYWRvcy5tYXAoKGQpID0+IGQuaWQpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVsaW1pbmFyRWxlbWVudG8oeyBvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zLCBzZXRPYmpldG9zLCBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLCBzZXRNb3N0cmFyUGFuZWxaIH0pIHtcclxuICBpZiAoZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuICBjb25zdCBpZHNBRWxpbWluYXIgPSBbLi4uZWxlbWVudG9zU2VsZWNjaW9uYWRvc107XHJcblxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW10pO1xyXG4gIHNldE1vc3RyYXJQYW5lbFooZmFsc2UpO1xyXG5cclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIHNldE9iamV0b3MoKHByZXYpID0+IHByZXYuZmlsdGVyKChvKSA9PiAhaWRzQUVsaW1pbmFyLmluY2x1ZGVzKG8uaWQpKSk7XHJcbiAgfSwgMTApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29waWFyRWxlbWVudG8oeyBvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zIH0pIHtcclxuICBjb25zdCBzZWxlY2Npb25hZG9zID0gb2JqZXRvcy5maWx0ZXIoKG8pID0+IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoby5pZCkpO1xyXG4gIGlmIChzZWxlY2Npb25hZG9zLmxlbmd0aCA+IDApIHtcclxuICAgIHdpbmRvdy5fb2JqZXRvc0NvcGlhZG9zID0gc2VsZWNjaW9uYWRvcy5tYXAoKG8pID0+ICh7IC4uLm8sIGlkOiB1bmRlZmluZWQgfSkpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBlZ2FyRWxlbWVudG8oeyBzZXRPYmpldG9zLCBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIH0pIHtcclxuICBjb25zdCBjb3BpYWRvcyA9IHdpbmRvdy5fb2JqZXRvc0NvcGlhZG9zIHx8IFtdO1xyXG4gIGlmICghd2luZG93Ll9vYmpldG9zQ29waWFkb3MgfHwgd2luZG93Ll9vYmpldG9zQ29waWFkb3MubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgY29uc3Qgb2Zmc2V0ID0gMzAgKyBNYXRoLnJhbmRvbSgpICogMjA7XHJcbiAgY29uc3QgbnVldm9zID0gY29waWFkb3MubWFwKChjLCBpKSA9PiAoe1xyXG4gICAgLi4uYyxcclxuICAgIGlkOiBgb2JqLSR7RGF0ZS5ub3coKX0tJHtpfWAsXHJcbiAgICB4OiAoYy54IHx8IDEwMCkgKyBvZmZzZXQsXHJcbiAgICB5OiAoYy55IHx8IDEwMCkgKyBvZmZzZXQsXHJcbiAgfSkpO1xyXG5cclxuICBzZXRPYmpldG9zKChwcmV2KSA9PiBbLi4ucHJldiwgLi4ubnVldm9zXSk7XHJcbiAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyhudWV2b3MubWFwKChuKSA9PiBuLmlkKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjYW1iaWFyQWxpbmVhY2lvblRleHRvKHsgb2JqZXRvcywgZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgc2V0T2JqZXRvcyB9KSB7XHJcbiAgY29uc3QgYWxpbmVhY2lvbmVzID0gWydsZWZ0JywgJ2NlbnRlcicsICdyaWdodCcsICdqdXN0aWZ5J107XHJcblxyXG4gIHNldE9iamV0b3MoKHByZXYpID0+XHJcbiAgICBwcmV2Lm1hcCgobykgPT4ge1xyXG4gICAgICBpZiAoIWVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoby5pZCkgfHwgby50aXBvICE9PSAndGV4dG8nKSByZXR1cm4gbztcclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGFsaW5lYWNpb25lcy5pbmRleE9mKG8uYWxpZ24gfHwgJ2xlZnQnKTtcclxuICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgYWxpbmVhY2lvbmVzLmxlbmd0aDtcclxuICAgICAgY29uc3QgbnVldmFBbGluZWFjaW9uID0gYWxpbmVhY2lvbmVzW25leHRJbmRleF07XHJcblxyXG4gICAgICByZXR1cm4geyAuLi5vLCBhbGlnbjogbnVldmFBbGluZWFjaW9uIH07XHJcbiAgICB9KVxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImVqZWN1dGFyRGVzaGFjZXIiLCJoaXN0b3JpYWwiLCJzZXRIaXN0b3JpYWwiLCJzZXRPYmpldG9zIiwic2V0U2VjY2lvbmVzIiwic2V0RnV0dXJvcyIsImlnbm9yZU5leHRVcGRhdGVSZWYiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic2V0TW9zdHJhclBhbmVsWiIsImxlbmd0aCIsImN1cnJlbnQiLCJwcmV2IiwibnVldm9IaXN0b3JpYWwiLCJlc3RhZG9BY3R1YWwiLCJwb3AiLCJlc3RhZG9BbnRlcmlvciIsIm9iamV0b3MiLCJzZWNjaW9uZXMiLCJmIiwic2xpY2UiLCJlamVjdXRhclJlaGFjZXIiLCJmdXR1cm9zIiwic2lndWllbnRlRXN0YWRvIiwiaCIsImR1cGxpY2FyRWxlbWVudG8iLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic2VsZWNjaW9uYWRvcyIsImZpbHRlciIsIm8iLCJpbmNsdWRlcyIsImlkIiwiZHVwbGljYWRvcyIsIm1hcCIsIm9yaWdpbmFsIiwiaSIsIkRhdGUiLCJub3ciLCJ4IiwieSIsImQiLCJlbGltaW5hckVsZW1lbnRvIiwiaWRzQUVsaW1pbmFyIiwic2V0VGltZW91dCIsImNvcGlhckVsZW1lbnRvIiwid2luZG93IiwiX29iamV0b3NDb3BpYWRvcyIsInVuZGVmaW5lZCIsInBlZ2FyRWxlbWVudG8iLCJjb3BpYWRvcyIsIm9mZnNldCIsIk1hdGgiLCJyYW5kb20iLCJudWV2b3MiLCJjIiwibiIsImNhbWJpYXJBbGluZWFjaW9uVGV4dG8iLCJhbGluZWFjaW9uZXMiLCJ0aXBvIiwiY3VycmVudEluZGV4IiwiaW5kZXhPZiIsImFsaWduIiwibmV4dEluZGV4IiwibnVldmFBbGluZWFjaW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/editorActions.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/editorSecciones.js":
/*!**************************************!*\
  !*** ./src/utils/editorSecciones.js ***!
  \**************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   borrarSeccion: () => (/* binding */ borrarSeccion),\n/* harmony export */   moverSeccion: () => (/* binding */ moverSeccion)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/firebase */ \"(pages-dir-node)/./src/firebase.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/utils/editorSecciones.js\n\n\n/**\n * Borrar una seccion y sus objetos asociados.\n * La confirmacion de UX se resuelve en la capa de UI.\n */ const borrarSeccion = async ({ seccionId, secciones, objetos, slug, seccionActivaId, setSecciones, setObjetos, setSeccionActivaId })=>{\n    const seccion = secciones.find((s)=>s.id === seccionId);\n    if (!seccion) return;\n    try {\n        const objetosFiltrados = objetos.filter((obj)=>obj.seccionId !== seccionId);\n        const seccionesFiltradas = secciones.filter((s)=>s.id !== seccionId);\n        setObjetos(objetosFiltrados);\n        setSecciones(seccionesFiltradas);\n        if (seccionId === seccionActivaId) {\n            setSeccionActivaId(null);\n        }\n        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"borradores\", slug);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n            objetos: objetosFiltrados,\n            secciones: seccionesFiltradas,\n            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n        console.log(\"Seccion borrada correctamente:\", seccionId);\n    } catch (error) {\n        console.error(\"Error al borrar seccion:\", error);\n        alert(\"Ocurrio un error al borrar la seccion. Intentalo de nuevo.\");\n    }\n};\n/**\n * Mover una seccion hacia arriba o abajo en el orden.\n */ const moverSeccion = async ({ seccionId, direccion, secciones, slug, setSecciones, setSeccionesAnimando })=>{\n    const seccionesOrdenadas = [\n        ...secciones\n    ].sort((a, b)=>a.orden - b.orden);\n    const indiceActual = seccionesOrdenadas.findIndex((s)=>s.id === seccionId);\n    if (direccion === \"subir\" && indiceActual === 0) {\n        console.warn(\"Ya es la primera seccion\");\n        return;\n    }\n    if (direccion === \"bajar\" && indiceActual === seccionesOrdenadas.length - 1) {\n        console.warn(\"Ya es la ultima seccion\");\n        return;\n    }\n    const indiceDestino = direccion === \"subir\" ? indiceActual - 1 : indiceActual + 1;\n    const seccionActual = seccionesOrdenadas[indiceActual];\n    const seccionDestino = seccionesOrdenadas[indiceDestino];\n    // Animar\n    setSeccionesAnimando([\n        seccionActual.id,\n        seccionDestino.id\n    ]);\n    // Intercambiar el campo `orden`\n    const nuevasSecciones = secciones.map((s)=>{\n        if (s.id === seccionActual.id) return {\n            ...s,\n            orden: seccionDestino.orden\n        };\n        if (s.id === seccionDestino.id) return {\n            ...s,\n            orden: seccionActual.orden\n        };\n        return s;\n    });\n    setSecciones(nuevasSecciones);\n    // Fin de la animacion\n    setTimeout(()=>{\n        setSeccionesAnimando([]);\n    }, 500);\n    // Guardar en Firestore\n    try {\n        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"borradores\", slug);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n            secciones: nuevasSecciones,\n            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n    } catch (error) {\n        console.error(\"Error guardando orden de secciones:\", error);\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9lZGl0b3JTZWNjaW9uZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLCtCQUErQjtBQUVzQztBQUNyQztBQUVoQzs7O0NBR0MsR0FDTSxNQUFNSSxnQkFBZ0IsT0FBTyxFQUNsQ0MsU0FBUyxFQUNUQyxTQUFTLEVBQ1RDLE9BQU8sRUFDUEMsSUFBSSxFQUNKQyxlQUFlLEVBQ2ZDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyxrQkFBa0IsRUFDbkI7SUFDQyxNQUFNQyxVQUFVUCxVQUFVUSxJQUFJLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsRUFBRSxLQUFLWDtJQUMvQyxJQUFJLENBQUNRLFNBQVM7SUFFZCxJQUFJO1FBQ0YsTUFBTUksbUJBQW1CVixRQUFRVyxNQUFNLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSWQsU0FBUyxLQUFLQTtRQUNuRSxNQUFNZSxxQkFBcUJkLFVBQVVZLE1BQU0sQ0FBQyxDQUFDSCxJQUFNQSxFQUFFQyxFQUFFLEtBQUtYO1FBRTVETSxXQUFXTTtRQUNYUCxhQUFhVTtRQUViLElBQUlmLGNBQWNJLGlCQUFpQjtZQUNqQ0csbUJBQW1CO1FBQ3JCO1FBRUEsTUFBTVMsTUFBTXJCLHVEQUFHQSxDQUFDRyx5Q0FBRUEsRUFBRSxjQUFjSztRQUNsQyxNQUFNUCw2REFBU0EsQ0FBQ29CLEtBQUs7WUFDbkJkLFNBQVNVO1lBQ1RYLFdBQVdjO1lBQ1hFLGVBQWVwQixtRUFBZUE7UUFDaEM7UUFFQXFCLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NuQjtJQUNoRCxFQUFFLE9BQU9vQixPQUFPO1FBQ2RGLFFBQVFFLEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDQyxNQUFNO0lBQ1I7QUFDRixFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNQyxlQUFlLE9BQU8sRUFDakN0QixTQUFTLEVBQ1R1QixTQUFTLEVBQ1R0QixTQUFTLEVBQ1RFLElBQUksRUFDSkUsWUFBWSxFQUNabUIsb0JBQW9CLEVBQ3JCO0lBQ0MsTUFBTUMscUJBQXFCO1dBQUl4QjtLQUFVLENBQUN5QixJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRUUsS0FBSyxHQUFHRCxFQUFFQyxLQUFLO0lBQzFFLE1BQU1DLGVBQWVMLG1CQUFtQk0sU0FBUyxDQUFDLENBQUNyQixJQUFNQSxFQUFFQyxFQUFFLEtBQUtYO0lBRWxFLElBQUl1QixjQUFjLFdBQVdPLGlCQUFpQixHQUFHO1FBQy9DWixRQUFRYyxJQUFJLENBQUM7UUFDYjtJQUNGO0lBRUEsSUFBSVQsY0FBYyxXQUFXTyxpQkFBaUJMLG1CQUFtQlEsTUFBTSxHQUFHLEdBQUc7UUFDM0VmLFFBQVFjLElBQUksQ0FBQztRQUNiO0lBQ0Y7SUFFQSxNQUFNRSxnQkFBZ0JYLGNBQWMsVUFBVU8sZUFBZSxJQUFJQSxlQUFlO0lBQ2hGLE1BQU1LLGdCQUFnQlYsa0JBQWtCLENBQUNLLGFBQWE7SUFDdEQsTUFBTU0saUJBQWlCWCxrQkFBa0IsQ0FBQ1MsY0FBYztJQUV4RCxTQUFTO0lBQ1RWLHFCQUFxQjtRQUFDVyxjQUFjeEIsRUFBRTtRQUFFeUIsZUFBZXpCLEVBQUU7S0FBQztJQUUxRCxnQ0FBZ0M7SUFDaEMsTUFBTTBCLGtCQUFrQnBDLFVBQVVxQyxHQUFHLENBQUMsQ0FBQzVCO1FBQ3JDLElBQUlBLEVBQUVDLEVBQUUsS0FBS3dCLGNBQWN4QixFQUFFLEVBQUUsT0FBTztZQUFFLEdBQUdELENBQUM7WUFBRW1CLE9BQU9PLGVBQWVQLEtBQUs7UUFBQztRQUMxRSxJQUFJbkIsRUFBRUMsRUFBRSxLQUFLeUIsZUFBZXpCLEVBQUUsRUFBRSxPQUFPO1lBQUUsR0FBR0QsQ0FBQztZQUFFbUIsT0FBT00sY0FBY04sS0FBSztRQUFDO1FBQzFFLE9BQU9uQjtJQUNUO0lBRUFMLGFBQWFnQztJQUViLHNCQUFzQjtJQUN0QkUsV0FBVztRQUNUZixxQkFBcUIsRUFBRTtJQUN6QixHQUFHO0lBRUgsdUJBQXVCO0lBQ3ZCLElBQUk7UUFDRixNQUFNUixNQUFNckIsdURBQUdBLENBQUNHLHlDQUFFQSxFQUFFLGNBQWNLO1FBQ2xDLE1BQU1QLDZEQUFTQSxDQUFDb0IsS0FBSztZQUNuQmYsV0FBV29DO1lBQ1hwQixlQUFlcEIsbUVBQWVBO1FBQ2hDO0lBQ0YsRUFBRSxPQUFPdUIsT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsdUNBQXVDQTtJQUN2RDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcdXRpbHNcXGVkaXRvclNlY2Npb25lcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZWRpdG9yU2VjY2lvbmVzLmpzXG5cbmltcG9ydCB7IGRvYywgdXBkYXRlRG9jLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCJAL2ZpcmViYXNlXCI7XG5cbi8qKlxuICogQm9ycmFyIHVuYSBzZWNjaW9uIHkgc3VzIG9iamV0b3MgYXNvY2lhZG9zLlxuICogTGEgY29uZmlybWFjaW9uIGRlIFVYIHNlIHJlc3VlbHZlIGVuIGxhIGNhcGEgZGUgVUkuXG4gKi9cbmV4cG9ydCBjb25zdCBib3JyYXJTZWNjaW9uID0gYXN5bmMgKHtcbiAgc2VjY2lvbklkLFxuICBzZWNjaW9uZXMsXG4gIG9iamV0b3MsXG4gIHNsdWcsXG4gIHNlY2Npb25BY3RpdmFJZCxcbiAgc2V0U2VjY2lvbmVzLFxuICBzZXRPYmpldG9zLFxuICBzZXRTZWNjaW9uQWN0aXZhSWQsXG59KSA9PiB7XG4gIGNvbnN0IHNlY2Npb24gPSBzZWNjaW9uZXMuZmluZCgocykgPT4gcy5pZCA9PT0gc2VjY2lvbklkKTtcbiAgaWYgKCFzZWNjaW9uKSByZXR1cm47XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBvYmpldG9zRmlsdHJhZG9zID0gb2JqZXRvcy5maWx0ZXIoKG9iaikgPT4gb2JqLnNlY2Npb25JZCAhPT0gc2VjY2lvbklkKTtcbiAgICBjb25zdCBzZWNjaW9uZXNGaWx0cmFkYXMgPSBzZWNjaW9uZXMuZmlsdGVyKChzKSA9PiBzLmlkICE9PSBzZWNjaW9uSWQpO1xuXG4gICAgc2V0T2JqZXRvcyhvYmpldG9zRmlsdHJhZG9zKTtcbiAgICBzZXRTZWNjaW9uZXMoc2VjY2lvbmVzRmlsdHJhZGFzKTtcblxuICAgIGlmIChzZWNjaW9uSWQgPT09IHNlY2Npb25BY3RpdmFJZCkge1xuICAgICAgc2V0U2VjY2lvbkFjdGl2YUlkKG51bGwpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJib3JyYWRvcmVzXCIsIHNsdWcpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcbiAgICAgIG9iamV0b3M6IG9iamV0b3NGaWx0cmFkb3MsXG4gICAgICBzZWNjaW9uZXM6IHNlY2Npb25lc0ZpbHRyYWRhcyxcbiAgICAgIHVsdGltYUVkaWNpb246IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJTZWNjaW9uIGJvcnJhZGEgY29ycmVjdGFtZW50ZTpcIiwgc2VjY2lvbklkKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYm9ycmFyIHNlY2Npb246XCIsIGVycm9yKTtcbiAgICBhbGVydChcIk9jdXJyaW8gdW4gZXJyb3IgYWwgYm9ycmFyIGxhIHNlY2Npb24uIEludGVudGFsbyBkZSBudWV2by5cIik7XG4gIH1cbn07XG5cbi8qKlxuICogTW92ZXIgdW5hIHNlY2Npb24gaGFjaWEgYXJyaWJhIG8gYWJham8gZW4gZWwgb3JkZW4uXG4gKi9cbmV4cG9ydCBjb25zdCBtb3ZlclNlY2Npb24gPSBhc3luYyAoe1xuICBzZWNjaW9uSWQsXG4gIGRpcmVjY2lvbiwgLy8gJ3N1YmlyJyBvICdiYWphcidcbiAgc2VjY2lvbmVzLFxuICBzbHVnLFxuICBzZXRTZWNjaW9uZXMsXG4gIHNldFNlY2Npb25lc0FuaW1hbmRvLFxufSkgPT4ge1xuICBjb25zdCBzZWNjaW9uZXNPcmRlbmFkYXMgPSBbLi4uc2VjY2lvbmVzXS5zb3J0KChhLCBiKSA9PiBhLm9yZGVuIC0gYi5vcmRlbik7XG4gIGNvbnN0IGluZGljZUFjdHVhbCA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgoKHMpID0+IHMuaWQgPT09IHNlY2Npb25JZCk7XG5cbiAgaWYgKGRpcmVjY2lvbiA9PT0gXCJzdWJpclwiICYmIGluZGljZUFjdHVhbCA9PT0gMCkge1xuICAgIGNvbnNvbGUud2FybihcIllhIGVzIGxhIHByaW1lcmEgc2VjY2lvblwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZGlyZWNjaW9uID09PSBcImJhamFyXCIgJiYgaW5kaWNlQWN0dWFsID09PSBzZWNjaW9uZXNPcmRlbmFkYXMubGVuZ3RoIC0gMSkge1xuICAgIGNvbnNvbGUud2FybihcIllhIGVzIGxhIHVsdGltYSBzZWNjaW9uXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGluZGljZURlc3Rpbm8gPSBkaXJlY2Npb24gPT09IFwic3ViaXJcIiA/IGluZGljZUFjdHVhbCAtIDEgOiBpbmRpY2VBY3R1YWwgKyAxO1xuICBjb25zdCBzZWNjaW9uQWN0dWFsID0gc2VjY2lvbmVzT3JkZW5hZGFzW2luZGljZUFjdHVhbF07XG4gIGNvbnN0IHNlY2Npb25EZXN0aW5vID0gc2VjY2lvbmVzT3JkZW5hZGFzW2luZGljZURlc3Rpbm9dO1xuXG4gIC8vIEFuaW1hclxuICBzZXRTZWNjaW9uZXNBbmltYW5kbyhbc2VjY2lvbkFjdHVhbC5pZCwgc2VjY2lvbkRlc3Rpbm8uaWRdKTtcblxuICAvLyBJbnRlcmNhbWJpYXIgZWwgY2FtcG8gYG9yZGVuYFxuICBjb25zdCBudWV2YXNTZWNjaW9uZXMgPSBzZWNjaW9uZXMubWFwKChzKSA9PiB7XG4gICAgaWYgKHMuaWQgPT09IHNlY2Npb25BY3R1YWwuaWQpIHJldHVybiB7IC4uLnMsIG9yZGVuOiBzZWNjaW9uRGVzdGluby5vcmRlbiB9O1xuICAgIGlmIChzLmlkID09PSBzZWNjaW9uRGVzdGluby5pZCkgcmV0dXJuIHsgLi4ucywgb3JkZW46IHNlY2Npb25BY3R1YWwub3JkZW4gfTtcbiAgICByZXR1cm4gcztcbiAgfSk7XG5cbiAgc2V0U2VjY2lvbmVzKG51ZXZhc1NlY2Npb25lcyk7XG5cbiAgLy8gRmluIGRlIGxhIGFuaW1hY2lvblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBzZXRTZWNjaW9uZXNBbmltYW5kbyhbXSk7XG4gIH0sIDUwMCk7XG5cbiAgLy8gR3VhcmRhciBlbiBGaXJlc3RvcmVcbiAgdHJ5IHtcbiAgICBjb25zdCByZWYgPSBkb2MoZGIsIFwiYm9ycmFkb3Jlc1wiLCBzbHVnKTtcbiAgICBhd2FpdCB1cGRhdGVEb2MocmVmLCB7XG4gICAgICBzZWNjaW9uZXM6IG51ZXZhc1NlY2Npb25lcyxcbiAgICAgIHVsdGltYUVkaWNpb246IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBndWFyZGFuZG8gb3JkZW4gZGUgc2VjY2lvbmVzOlwiLCBlcnJvcik7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsiZG9jIiwidXBkYXRlRG9jIiwic2VydmVyVGltZXN0YW1wIiwiZGIiLCJib3JyYXJTZWNjaW9uIiwic2VjY2lvbklkIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsInNsdWciLCJzZWNjaW9uQWN0aXZhSWQiLCJzZXRTZWNjaW9uZXMiLCJzZXRPYmpldG9zIiwic2V0U2VjY2lvbkFjdGl2YUlkIiwic2VjY2lvbiIsImZpbmQiLCJzIiwiaWQiLCJvYmpldG9zRmlsdHJhZG9zIiwiZmlsdGVyIiwib2JqIiwic2VjY2lvbmVzRmlsdHJhZGFzIiwicmVmIiwidWx0aW1hRWRpY2lvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImFsZXJ0IiwibW92ZXJTZWNjaW9uIiwiZGlyZWNjaW9uIiwic2V0U2VjY2lvbmVzQW5pbWFuZG8iLCJzZWNjaW9uZXNPcmRlbmFkYXMiLCJzb3J0IiwiYSIsImIiLCJvcmRlbiIsImluZGljZUFjdHVhbCIsImZpbmRJbmRleCIsIndhcm4iLCJsZW5ndGgiLCJpbmRpY2VEZXN0aW5vIiwic2VjY2lvbkFjdHVhbCIsInNlY2Npb25EZXN0aW5vIiwibnVldmFzU2VjY2lvbmVzIiwibWFwIiwic2V0VGltZW91dCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/editorSecciones.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/fontManager.js":
/*!**********************************!*\
  !*** ./src/utils/fontManager.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fontManager: () => (/* binding */ fontManager)\n/* harmony export */ });\n/* harmony import */ var webfontloader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webfontloader */ \"webfontloader\");\n/* harmony import */ var _config_fonts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/config/fonts */ \"(pages-dir-node)/./src/config/fonts.js\");\n// src/utils/fontManager.js\n\n\nclass FontManager {\n    constructor(){\n        this.loadedFonts = new Set();\n        this.fontCache = new Map();\n        this.loadingPromises = new Map();\n        // 🔑 lista de Google Fonts permitidas\n        this.googleFontSet = new Set(_config_fonts__WEBPACK_IMPORTED_MODULE_1__.GOOGLE_FONTS.map((f)=>f.nombre));\n    }\n    // Categorizar fuentes por tipo\n    categorizeFont(fontFamily) {\n        const systemFonts = [\n            'Arial',\n            'Helvetica',\n            'Verdana',\n            'Tahoma',\n            'Trebuchet MS',\n            'Georgia',\n            'Times New Roman',\n            'Courier New',\n            'Lucida Console',\n            'Comic Sans MS',\n            'Impact',\n            'sans-serif',\n            'serif',\n            'monospace'\n        ];\n        const fontName = fontFamily.replace(/['\"]/g, '').split(',')[0].trim();\n        if (systemFonts.includes(fontName)) {\n            return {\n                type: 'system',\n                name: fontName\n            };\n        }\n        return {\n            type: 'google',\n            name: fontName\n        };\n    }\n    // Cargar fuente de Google Fonts\n    async loadGoogleFont(fontName) {\n        // Si ya está cargada, retornar inmediatamente\n        if (this.loadedFonts.has(fontName)) {\n            return Promise.resolve();\n        }\n        // Si ya está cargándose, retornar la promesa existente\n        if (this.loadingPromises.has(fontName)) {\n            return this.loadingPromises.get(fontName);\n        }\n        // Crear nueva promesa de carga\n        const loadPromise = new Promise((resolve, reject)=>{\n            webfontloader__WEBPACK_IMPORTED_MODULE_0__.load({\n                google: {\n                    families: [\n                        `${fontName}:ital,wght@0,400;0,700;1,400;1,700`\n                    ]\n                },\n                active: ()=>{\n                    this.loadedFonts.add(fontName);\n                    this.loadingPromises.delete(fontName);\n                    // Forzar redibujado del canvas después de cargar la fuente\n                    this.forceCanvasRedraw();\n                    resolve();\n                },\n                inactive: ()=>{\n                    this.loadingPromises.delete(fontName);\n                    reject(new Error(`No se pudo cargar la fuente: ${fontName}`));\n                },\n                timeout: 5000\n            });\n        });\n        this.loadingPromises.set(fontName, loadPromise);\n        return loadPromise;\n    }\n    // src/utils/fontManager.js  ➜  sustituí todo el método loadFonts()\n    /**\r\n * Carga varias fuentes Google de una sola vez.\r\n * – Agrupa las que todavía no están cargadas.\r\n * – Si ya existe una promesa para alguna, la reutiliza.\r\n * – Devuelve una promesa que siempre se resuelve (Promise.allSettled).\r\n */ async loadFonts(fontFamilies = []) {\n        const familiasPendientes = [];\n        const promesasAEsperar = [];\n        fontFamilies.forEach((ff)=>{\n            const { type, name } = this.categorizeFont(ff);\n            // Fuentes de sistema: nada que hacer\n            if (type === \"system\") return;\n            // Ya cargada: nada que hacer\n            if (this.loadedFonts.has(name)) return;\n            // Ya se está cargando: reutilizar promesa existente\n            if (this.loadingPromises.has(name)) {\n                promesasAEsperar.push(this.loadingPromises.get(name));\n                return;\n            }\n            // Primera vez que se pide → la metemos al batch\n            familiasPendientes.push(name);\n        });\n        /* ------------------------------------------------------------------ */ // Si no hay nada nuevo que pedir, simplemente esperamos las existentes\n        if (familiasPendientes.length === 0) {\n            return Promise.allSettled(promesasAEsperar);\n        }\n        /* ------------------------------------------------------------------ */ // Creamos UNA sola promesa para todo el lote\n        const lotePromise = new Promise((resolve, reject)=>{\n            webfontloader__WEBPACK_IMPORTED_MODULE_0__.load({\n                google: {\n                    families: familiasPendientes.map((n)=>`${n}:ital,wght@0,400;0,700;1,400;1,700`)\n                },\n                active: ()=>{\n                    // Marcamos todas como cargadas\n                    familiasPendientes.forEach((n)=>this.loadedFonts.add(n));\n                    familiasPendientes.forEach((n)=>this.loadingPromises.delete(n));\n                    this.forceCanvasRedraw();\n                    resolve();\n                },\n                inactive: ()=>{\n                    familiasPendientes.forEach((n)=>this.loadingPromises.delete(n));\n                    reject(new Error(`No se pudieron cargar una o más fuentes: ${familiasPendientes.join(\", \")}`));\n                },\n                timeout: 5000\n            });\n        });\n        // Ponemos la misma promesa en el map para cada fuente del lote\n        familiasPendientes.forEach((n)=>this.loadingPromises.set(n, lotePromise));\n        promesasAEsperar.push(lotePromise);\n        return Promise.allSettled(promesasAEsperar);\n    }\n    // Pre-cargar fuentes populares\n    async preloadPopularFonts() {\n        const popularFonts = [\n            'Poppins',\n            'Roboto',\n            'Open Sans',\n            'Montserrat',\n            'Raleway',\n            'Lato',\n            'Playfair Display',\n            'Oswald',\n            'Libre Bodoni',\n            'Bodoni Moda'\n        ];\n        return this.loadFonts(popularFonts);\n    }\n    // Forzar redibujado del canvas\n    forceCanvasRedraw() {\n        // Disparar evento personalizado\n        window.dispatchEvent(new CustomEvent('fonts-loaded'));\n    }\n    // Verificar si una fuente está disponible\n    isFontAvailable(fontFamily) {\n        const { type, name } = this.categorizeFont(fontFamily);\n        if (type === 'system') return true;\n        return this.loadedFonts.has(name);\n    }\n    /**\r\n   * Devuelve un bloque <link> - listo para pegar en <head> - con las\r\n   * familias de Google Fonts usadas. Filtra genéricas y fuentes de sistema.\r\n   *\r\n   * @param {string[]} fontFamilies  Ej.: [\"Poppins\", \"Great Vibes\", \"Georgia\"]\r\n   * @returns {string} cadena HTML o '' si no hay nada que cargar\r\n   */ getGoogleFontsLink(fontFamilies = []) {\n        const familias = fontFamilies.map((f)=>f.replace(/['\"]/g, \"\").split(\",\")[0].trim()) // \"Poppins\"\n        .filter((n)=>this.googleFontSet.has(n)) // ✅ solo Google Fonts reales\n        .map((n)=>`family=${encodeURIComponent(n.replace(/ /g, \"+\") + \":ital,wght@0,400;0,700;1,400;1,700\")}`).join(\"&\");\n        if (!familias) return \"\";\n        const url = `https://fonts.googleapis.com/css2?${familias}&display=swap`;\n        return `\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"${url}\" rel=\"stylesheet\">`.trim();\n    }\n    // Obtener CSS para todas las fuentes cargadas\n    getLoadedFontsCSS() {\n        const googleFonts = Array.from(this.loadedFonts);\n        if (googleFonts.length === 0) return '';\n        const families = googleFonts.map((font)=>`${font.replace(' ', '+')}:300,400,500,600,700,800,900`).join('|');\n        return `https://fonts.googleapis.com/css2?family=${families}&display=swap`;\n    }\n}\n// Singleton\nconst fontManager = new FontManager();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9mb250TWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSwyQkFBMkI7QUFDUztBQUNVO0FBRzlDLE1BQU1FO0lBQ0pDLGFBQWM7UUFDWixJQUFJLENBQUNDLFdBQVcsR0FBRyxJQUFJQztRQUN2QixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJQztRQUNyQixJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJRDtRQUUxQixzQ0FBc0M7UUFDekMsSUFBSSxDQUFDRSxhQUFhLEdBQUcsSUFBSUosSUFBSUosdURBQVlBLENBQUNTLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsTUFBTTtJQUMzRDtJQUVBLCtCQUErQjtJQUMvQkMsZUFBZUMsVUFBVSxFQUFFO1FBQ3pCLE1BQU1DLGNBQWM7WUFDbEI7WUFBUztZQUFhO1lBQVc7WUFBVTtZQUMzQztZQUFXO1lBQW1CO1lBQWU7WUFDN0M7WUFBaUI7WUFBVTtZQUFjO1lBQVM7U0FDbkQ7UUFFRCxNQUFNQyxXQUFXRixXQUFXRyxPQUFPLENBQUMsU0FBUyxJQUFJQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQ0MsSUFBSTtRQUVuRSxJQUFJSixZQUFZSyxRQUFRLENBQUNKLFdBQVc7WUFDbEMsT0FBTztnQkFBRUssTUFBTTtnQkFBVUMsTUFBTU47WUFBUztRQUMxQztRQUVBLE9BQU87WUFBRUssTUFBTTtZQUFVQyxNQUFNTjtRQUFTO0lBQzFDO0lBRUEsZ0NBQWdDO0lBQ2hDLE1BQU1PLGVBQWVQLFFBQVEsRUFBRTtRQUM3Qiw4Q0FBOEM7UUFDOUMsSUFBSSxJQUFJLENBQUNaLFdBQVcsQ0FBQ29CLEdBQUcsQ0FBQ1IsV0FBVztZQUNsQyxPQUFPUyxRQUFRQyxPQUFPO1FBQ3hCO1FBRUEsdURBQXVEO1FBQ3ZELElBQUksSUFBSSxDQUFDbEIsZUFBZSxDQUFDZ0IsR0FBRyxDQUFDUixXQUFXO1lBQ3RDLE9BQU8sSUFBSSxDQUFDUixlQUFlLENBQUNtQixHQUFHLENBQUNYO1FBQ2xDO1FBRUEsK0JBQStCO1FBQy9CLE1BQU1ZLGNBQWMsSUFBSUgsUUFBUSxDQUFDQyxTQUFTRztZQUN4QzdCLCtDQUFZLENBQUM7Z0JBQ1grQixRQUFRO29CQUNOQyxVQUFVO3dCQUFDLEdBQUdoQixTQUFTLGtDQUFrQyxDQUFDO3FCQUFDO2dCQUM3RDtnQkFDQWlCLFFBQVE7b0JBQ04sSUFBSSxDQUFDN0IsV0FBVyxDQUFDOEIsR0FBRyxDQUFDbEI7b0JBQ3JCLElBQUksQ0FBQ1IsZUFBZSxDQUFDMkIsTUFBTSxDQUFDbkI7b0JBRTVCLDJEQUEyRDtvQkFDM0QsSUFBSSxDQUFDb0IsaUJBQWlCO29CQUV0QlY7Z0JBQ0Y7Z0JBQ0FXLFVBQVU7b0JBQ1IsSUFBSSxDQUFDN0IsZUFBZSxDQUFDMkIsTUFBTSxDQUFDbkI7b0JBQzVCYSxPQUFPLElBQUlTLE1BQU0sQ0FBQyw2QkFBNkIsRUFBRXRCLFVBQVU7Z0JBQzdEO2dCQUNBdUIsU0FBUztZQUNYO1FBQ0Y7UUFFQSxJQUFJLENBQUMvQixlQUFlLENBQUNnQyxHQUFHLENBQUN4QixVQUFVWTtRQUNuQyxPQUFPQTtJQUNUO0lBRUEsbUVBQW1FO0lBRXJFOzs7OztDQUtDLEdBQ0QsTUFBTWEsVUFBVUMsZUFBZSxFQUFFLEVBQUU7UUFDakMsTUFBTUMscUJBQXVCLEVBQUU7UUFDL0IsTUFBTUMsbUJBQXVCLEVBQUU7UUFFL0JGLGFBQWFHLE9BQU8sQ0FBQyxDQUFDQztZQUNwQixNQUFNLEVBQUV6QixJQUFJLEVBQUVDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQ1QsY0FBYyxDQUFDaUM7WUFFM0MscUNBQXFDO1lBQ3JDLElBQUl6QixTQUFTLFVBQVU7WUFFdkIsNkJBQTZCO1lBQzdCLElBQUksSUFBSSxDQUFDakIsV0FBVyxDQUFDb0IsR0FBRyxDQUFDRixPQUFPO1lBRWhDLG9EQUFvRDtZQUNwRCxJQUFJLElBQUksQ0FBQ2QsZUFBZSxDQUFDZ0IsR0FBRyxDQUFDRixPQUFPO2dCQUNsQ3NCLGlCQUFpQkcsSUFBSSxDQUFDLElBQUksQ0FBQ3ZDLGVBQWUsQ0FBQ21CLEdBQUcsQ0FBQ0w7Z0JBQy9DO1lBQ0Y7WUFFQSxnREFBZ0Q7WUFDaERxQixtQkFBbUJJLElBQUksQ0FBQ3pCO1FBQzFCO1FBRUEsc0VBQXNFLEdBQ3RFLHVFQUF1RTtRQUN2RSxJQUFJcUIsbUJBQW1CSyxNQUFNLEtBQUssR0FBRztZQUNuQyxPQUFPdkIsUUFBUXdCLFVBQVUsQ0FBQ0w7UUFDNUI7UUFFQSxzRUFBc0UsR0FDdEUsNkNBQTZDO1FBQzdDLE1BQU1NLGNBQWMsSUFBSXpCLFFBQVEsQ0FBQ0MsU0FBU0c7WUFDeEM3QiwrQ0FBWSxDQUFDO2dCQUNYK0IsUUFBUTtvQkFDTkMsVUFBVVcsbUJBQW1CakMsR0FBRyxDQUFDLENBQUN5QyxJQUFNLEdBQUdBLEVBQUUsa0NBQWtDLENBQUM7Z0JBQ2xGO2dCQUNBbEIsUUFBUTtvQkFDTiwrQkFBK0I7b0JBQy9CVSxtQkFBbUJFLE9BQU8sQ0FBQyxDQUFDTSxJQUFNLElBQUksQ0FBQy9DLFdBQVcsQ0FBQzhCLEdBQUcsQ0FBQ2lCO29CQUN2RFIsbUJBQW1CRSxPQUFPLENBQUMsQ0FBQ00sSUFBTSxJQUFJLENBQUMzQyxlQUFlLENBQUMyQixNQUFNLENBQUNnQjtvQkFFOUQsSUFBSSxDQUFDZixpQkFBaUI7b0JBQ3RCVjtnQkFDRjtnQkFDQVcsVUFBVTtvQkFDUk0sbUJBQW1CRSxPQUFPLENBQUMsQ0FBQ00sSUFBTSxJQUFJLENBQUMzQyxlQUFlLENBQUMyQixNQUFNLENBQUNnQjtvQkFDOUR0QixPQUNFLElBQUlTLE1BQ0YsQ0FBQyx5Q0FBeUMsRUFBRUssbUJBQW1CUyxJQUFJLENBQ2pFLE9BQ0M7Z0JBR1Q7Z0JBQ0FiLFNBQVM7WUFDWDtRQUNGO1FBRUEsK0RBQStEO1FBQy9ESSxtQkFBbUJFLE9BQU8sQ0FBQyxDQUFDTSxJQUFNLElBQUksQ0FBQzNDLGVBQWUsQ0FBQ2dDLEdBQUcsQ0FBQ1csR0FBR0Q7UUFDOUROLGlCQUFpQkcsSUFBSSxDQUFDRztRQUV0QixPQUFPekIsUUFBUXdCLFVBQVUsQ0FBQ0w7SUFDNUI7SUFHRSwrQkFBK0I7SUFDL0IsTUFBTVMsc0JBQXNCO1FBQzFCLE1BQU1DLGVBQWU7WUFDbkI7WUFBVztZQUFVO1lBQWE7WUFDbEM7WUFBVztZQUFRO1lBQW9CO1lBQVU7WUFDakQ7U0FDRDtRQUVELE9BQU8sSUFBSSxDQUFDYixTQUFTLENBQUNhO0lBQ3hCO0lBRUEsK0JBQStCO0lBQy9CbEIsb0JBQW9CO1FBQ2xCLGdDQUFnQztRQUNoQ21CLE9BQU9DLGFBQWEsQ0FBQyxJQUFJQyxZQUFZO0lBQ3ZDO0lBRUEsMENBQTBDO0lBQzFDQyxnQkFBZ0I1QyxVQUFVLEVBQUU7UUFDMUIsTUFBTSxFQUFFTyxJQUFJLEVBQUVDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQ1QsY0FBYyxDQUFDQztRQUUzQyxJQUFJTyxTQUFTLFVBQVUsT0FBTztRQUU5QixPQUFPLElBQUksQ0FBQ2pCLFdBQVcsQ0FBQ29CLEdBQUcsQ0FBQ0Y7SUFDOUI7SUFFQTs7Ozs7O0dBTUMsR0FDRHFDLG1CQUFtQmpCLGVBQWUsRUFBRSxFQUFFO1FBQ3BDLE1BQU1rQixXQUFXbEIsYUFDZGhDLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRU0sT0FBTyxDQUFDLFNBQVMsSUFBSUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUNDLElBQUksSUFBTSxZQUFZO1NBQ3BFMEMsTUFBTSxDQUFDVixDQUFBQSxJQUFLLElBQUksQ0FBQzFDLGFBQWEsQ0FBQ2UsR0FBRyxDQUFDMkIsSUFBcUIsNkJBQTZCO1NBQ3JGekMsR0FBRyxDQUFDeUMsQ0FBQUEsSUFBSyxDQUFDLE9BQU8sRUFBRVcsbUJBQW1CWCxFQUFFbEMsT0FBTyxDQUFDLE1BQU0sT0FBTyx1Q0FBdUMsRUFDcEdtQyxJQUFJLENBQUM7UUFFUixJQUFJLENBQUNRLFVBQVUsT0FBTztRQUV0QixNQUFNRyxNQUFNLENBQUMsa0NBQWtDLEVBQUVILFNBQVMsYUFBYSxDQUFDO1FBQ3hFLE9BQU8sQ0FBQzs7WUFFQSxFQUFFRyxJQUFJLG1CQUFtQixDQUFDLENBQUM1QyxJQUFJO0lBQ3pDO0lBSUEsOENBQThDO0lBQzlDNkMsb0JBQW9CO1FBQ2xCLE1BQU1DLGNBQWNDLE1BQU1DLElBQUksQ0FBQyxJQUFJLENBQUMvRCxXQUFXO1FBQy9DLElBQUk2RCxZQUFZakIsTUFBTSxLQUFLLEdBQUcsT0FBTztRQUVyQyxNQUFNaEIsV0FBV2lDLFlBQVl2RCxHQUFHLENBQUMwRCxDQUFBQSxPQUMvQixHQUFHQSxLQUFLbkQsT0FBTyxDQUFDLEtBQUssS0FBSyw0QkFBNEIsQ0FBQyxFQUN2RG1DLElBQUksQ0FBQztRQUVQLE9BQU8sQ0FBQyx5Q0FBeUMsRUFBRXBCLFNBQVMsYUFBYSxDQUFDO0lBQzVFO0FBQ0Y7QUFFQSxZQUFZO0FBQ0wsTUFBTXFDLGNBQWMsSUFBSW5FLGNBQWMiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcdXRpbHNcXGZvbnRNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9mb250TWFuYWdlci5qc1xyXG5pbXBvcnQgV2ViRm9udCBmcm9tICd3ZWJmb250bG9hZGVyJztcclxuaW1wb3J0IHsgR09PR0xFX0ZPTlRTIH0gZnJvbSAnQC9jb25maWcvZm9udHMnO1xyXG5cclxuXHJcbmNsYXNzIEZvbnRNYW5hZ2VyIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubG9hZGVkRm9udHMgPSBuZXcgU2V0KCk7XHJcbiAgICB0aGlzLmZvbnRDYWNoZSA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMubG9hZGluZ1Byb21pc2VzID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAvLyDwn5SRIGxpc3RhIGRlIEdvb2dsZSBGb250cyBwZXJtaXRpZGFzXHJcbiAgdGhpcy5nb29nbGVGb250U2V0ID0gbmV3IFNldChHT09HTEVfRk9OVFMubWFwKGYgPT4gZi5ub21icmUpKTtcclxuICB9XHJcblxyXG4gIC8vIENhdGVnb3JpemFyIGZ1ZW50ZXMgcG9yIHRpcG9cclxuICBjYXRlZ29yaXplRm9udChmb250RmFtaWx5KSB7XHJcbiAgICBjb25zdCBzeXN0ZW1Gb250cyA9IFtcclxuICAgICAgJ0FyaWFsJywgJ0hlbHZldGljYScsICdWZXJkYW5hJywgJ1RhaG9tYScsICdUcmVidWNoZXQgTVMnLFxyXG4gICAgICAnR2VvcmdpYScsICdUaW1lcyBOZXcgUm9tYW4nLCAnQ291cmllciBOZXcnLCAnTHVjaWRhIENvbnNvbGUnLFxyXG4gICAgICAnQ29taWMgU2FucyBNUycsICdJbXBhY3QnLCAnc2Fucy1zZXJpZicsICdzZXJpZicsICdtb25vc3BhY2UnXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICBjb25zdCBmb250TmFtZSA9IGZvbnRGYW1pbHkucmVwbGFjZSgvWydcIl0vZywgJycpLnNwbGl0KCcsJylbMF0udHJpbSgpO1xyXG4gICAgXHJcbiAgICBpZiAoc3lzdGVtRm9udHMuaW5jbHVkZXMoZm9udE5hbWUpKSB7XHJcbiAgICAgIHJldHVybiB7IHR5cGU6ICdzeXN0ZW0nLCBuYW1lOiBmb250TmFtZSB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4geyB0eXBlOiAnZ29vZ2xlJywgbmFtZTogZm9udE5hbWUgfTtcclxuICB9XHJcblxyXG4gIC8vIENhcmdhciBmdWVudGUgZGUgR29vZ2xlIEZvbnRzXHJcbiAgYXN5bmMgbG9hZEdvb2dsZUZvbnQoZm9udE5hbWUpIHtcclxuICAgIC8vIFNpIHlhIGVzdMOhIGNhcmdhZGEsIHJldG9ybmFyIGlubWVkaWF0YW1lbnRlXHJcbiAgICBpZiAodGhpcy5sb2FkZWRGb250cy5oYXMoZm9udE5hbWUpKSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaSB5YSBlc3TDoSBjYXJnw6FuZG9zZSwgcmV0b3JuYXIgbGEgcHJvbWVzYSBleGlzdGVudGVcclxuICAgIGlmICh0aGlzLmxvYWRpbmdQcm9taXNlcy5oYXMoZm9udE5hbWUpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmxvYWRpbmdQcm9taXNlcy5nZXQoZm9udE5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWFyIG51ZXZhIHByb21lc2EgZGUgY2FyZ2FcclxuICAgIGNvbnN0IGxvYWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBXZWJGb250LmxvYWQoe1xyXG4gICAgICAgIGdvb2dsZToge1xyXG4gICAgICAgICAgZmFtaWxpZXM6IFtgJHtmb250TmFtZX06aXRhbCx3Z2h0QDAsNDAwOzAsNzAwOzEsNDAwOzEsNzAwYF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFjdGl2ZTogKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5sb2FkZWRGb250cy5hZGQoZm9udE5hbWUpO1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nUHJvbWlzZXMuZGVsZXRlKGZvbnROYW1lKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gRm9yemFyIHJlZGlidWphZG8gZGVsIGNhbnZhcyBkZXNwdcOpcyBkZSBjYXJnYXIgbGEgZnVlbnRlXHJcbiAgICAgICAgICB0aGlzLmZvcmNlQ2FudmFzUmVkcmF3KCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluYWN0aXZlOiAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdQcm9taXNlcy5kZWxldGUoZm9udE5hbWUpO1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgTm8gc2UgcHVkbyBjYXJnYXIgbGEgZnVlbnRlOiAke2ZvbnROYW1lfWApKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVvdXQ6IDUwMDBcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmxvYWRpbmdQcm9taXNlcy5zZXQoZm9udE5hbWUsIGxvYWRQcm9taXNlKTtcclxuICAgIHJldHVybiBsb2FkUHJvbWlzZTtcclxuICB9XHJcblxyXG4gIC8vIHNyYy91dGlscy9mb250TWFuYWdlci5qcyAg4p6cICBzdXN0aXR1w60gdG9kbyBlbCBtw6l0b2RvIGxvYWRGb250cygpXHJcblxyXG4vKipcclxuICogQ2FyZ2EgdmFyaWFzIGZ1ZW50ZXMgR29vZ2xlIGRlIHVuYSBzb2xhIHZlei5cclxuICog4oCTIEFncnVwYSBsYXMgcXVlIHRvZGF2w61hIG5vIGVzdMOhbiBjYXJnYWRhcy5cclxuICog4oCTIFNpIHlhIGV4aXN0ZSB1bmEgcHJvbWVzYSBwYXJhIGFsZ3VuYSwgbGEgcmV1dGlsaXphLlxyXG4gKiDigJMgRGV2dWVsdmUgdW5hIHByb21lc2EgcXVlIHNpZW1wcmUgc2UgcmVzdWVsdmUgKFByb21pc2UuYWxsU2V0dGxlZCkuXHJcbiAqL1xyXG5hc3luYyBsb2FkRm9udHMoZm9udEZhbWlsaWVzID0gW10pIHtcclxuICBjb25zdCBmYW1pbGlhc1BlbmRpZW50ZXMgICA9IFtdO1xyXG4gIGNvbnN0IHByb21lc2FzQUVzcGVyYXIgICAgID0gW107XHJcblxyXG4gIGZvbnRGYW1pbGllcy5mb3JFYWNoKChmZikgPT4ge1xyXG4gICAgY29uc3QgeyB0eXBlLCBuYW1lIH0gPSB0aGlzLmNhdGVnb3JpemVGb250KGZmKTtcclxuXHJcbiAgICAvLyBGdWVudGVzIGRlIHNpc3RlbWE6IG5hZGEgcXVlIGhhY2VyXHJcbiAgICBpZiAodHlwZSA9PT0gXCJzeXN0ZW1cIikgcmV0dXJuO1xyXG5cclxuICAgIC8vIFlhIGNhcmdhZGE6IG5hZGEgcXVlIGhhY2VyXHJcbiAgICBpZiAodGhpcy5sb2FkZWRGb250cy5oYXMobmFtZSkpIHJldHVybjtcclxuXHJcbiAgICAvLyBZYSBzZSBlc3TDoSBjYXJnYW5kbzogcmV1dGlsaXphciBwcm9tZXNhIGV4aXN0ZW50ZVxyXG4gICAgaWYgKHRoaXMubG9hZGluZ1Byb21pc2VzLmhhcyhuYW1lKSkge1xyXG4gICAgICBwcm9tZXNhc0FFc3BlcmFyLnB1c2godGhpcy5sb2FkaW5nUHJvbWlzZXMuZ2V0KG5hbWUpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByaW1lcmEgdmV6IHF1ZSBzZSBwaWRlIOKGkiBsYSBtZXRlbW9zIGFsIGJhdGNoXHJcbiAgICBmYW1pbGlhc1BlbmRpZW50ZXMucHVzaChuYW1lKTtcclxuICB9KTtcclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgLy8gU2kgbm8gaGF5IG5hZGEgbnVldm8gcXVlIHBlZGlyLCBzaW1wbGVtZW50ZSBlc3BlcmFtb3MgbGFzIGV4aXN0ZW50ZXNcclxuICBpZiAoZmFtaWxpYXNQZW5kaWVudGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsU2V0dGxlZChwcm9tZXNhc0FFc3BlcmFyKTtcclxuICB9XHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIC8vIENyZWFtb3MgVU5BIHNvbGEgcHJvbWVzYSBwYXJhIHRvZG8gZWwgbG90ZVxyXG4gIGNvbnN0IGxvdGVQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgV2ViRm9udC5sb2FkKHtcclxuICAgICAgZ29vZ2xlOiB7XHJcbiAgICAgICAgZmFtaWxpZXM6IGZhbWlsaWFzUGVuZGllbnRlcy5tYXAoKG4pID0+IGAke259Oml0YWwsd2dodEAwLDQwMDswLDcwMDsxLDQwMDsxLDcwMGApXHJcbiAgICAgIH0sXHJcbiAgICAgIGFjdGl2ZTogKCkgPT4ge1xyXG4gICAgICAgIC8vIE1hcmNhbW9zIHRvZGFzIGNvbW8gY2FyZ2FkYXNcclxuICAgICAgICBmYW1pbGlhc1BlbmRpZW50ZXMuZm9yRWFjaCgobikgPT4gdGhpcy5sb2FkZWRGb250cy5hZGQobikpO1xyXG4gICAgICAgIGZhbWlsaWFzUGVuZGllbnRlcy5mb3JFYWNoKChuKSA9PiB0aGlzLmxvYWRpbmdQcm9taXNlcy5kZWxldGUobikpO1xyXG5cclxuICAgICAgICB0aGlzLmZvcmNlQ2FudmFzUmVkcmF3KCk7XHJcbiAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICB9LFxyXG4gICAgICBpbmFjdGl2ZTogKCkgPT4ge1xyXG4gICAgICAgIGZhbWlsaWFzUGVuZGllbnRlcy5mb3JFYWNoKChuKSA9PiB0aGlzLmxvYWRpbmdQcm9taXNlcy5kZWxldGUobikpO1xyXG4gICAgICAgIHJlamVjdChcclxuICAgICAgICAgIG5ldyBFcnJvcihcclxuICAgICAgICAgICAgYE5vIHNlIHB1ZGllcm9uIGNhcmdhciB1bmEgbyBtw6FzIGZ1ZW50ZXM6ICR7ZmFtaWxpYXNQZW5kaWVudGVzLmpvaW4oXHJcbiAgICAgICAgICAgICAgXCIsIFwiXHJcbiAgICAgICAgICAgICl9YFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHRpbWVvdXQ6IDUwMDAsXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8gUG9uZW1vcyBsYSBtaXNtYSBwcm9tZXNhIGVuIGVsIG1hcCBwYXJhIGNhZGEgZnVlbnRlIGRlbCBsb3RlXHJcbiAgZmFtaWxpYXNQZW5kaWVudGVzLmZvckVhY2goKG4pID0+IHRoaXMubG9hZGluZ1Byb21pc2VzLnNldChuLCBsb3RlUHJvbWlzZSkpO1xyXG4gIHByb21lc2FzQUVzcGVyYXIucHVzaChsb3RlUHJvbWlzZSk7XHJcblxyXG4gIHJldHVybiBQcm9taXNlLmFsbFNldHRsZWQocHJvbWVzYXNBRXNwZXJhcik7XHJcbn1cclxuXHJcblxyXG4gIC8vIFByZS1jYXJnYXIgZnVlbnRlcyBwb3B1bGFyZXNcclxuICBhc3luYyBwcmVsb2FkUG9wdWxhckZvbnRzKCkge1xyXG4gICAgY29uc3QgcG9wdWxhckZvbnRzID0gW1xyXG4gICAgICAnUG9wcGlucycsICdSb2JvdG8nLCAnT3BlbiBTYW5zJywgJ01vbnRzZXJyYXQnLCBcclxuICAgICAgJ1JhbGV3YXknLCAnTGF0bycsICdQbGF5ZmFpciBEaXNwbGF5JywgJ09zd2FsZCcsICdMaWJyZSBCb2RvbmknLFxyXG4gICAgICAnQm9kb25pIE1vZGEnLFxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRoaXMubG9hZEZvbnRzKHBvcHVsYXJGb250cyk7XHJcbiAgfVxyXG5cclxuICAvLyBGb3J6YXIgcmVkaWJ1amFkbyBkZWwgY2FudmFzXHJcbiAgZm9yY2VDYW52YXNSZWRyYXcoKSB7XHJcbiAgICAvLyBEaXNwYXJhciBldmVudG8gcGVyc29uYWxpemFkb1xyXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdmb250cy1sb2FkZWQnKSk7XHJcbiAgfVxyXG5cclxuICAvLyBWZXJpZmljYXIgc2kgdW5hIGZ1ZW50ZSBlc3TDoSBkaXNwb25pYmxlXHJcbiAgaXNGb250QXZhaWxhYmxlKGZvbnRGYW1pbHkpIHtcclxuICAgIGNvbnN0IHsgdHlwZSwgbmFtZSB9ID0gdGhpcy5jYXRlZ29yaXplRm9udChmb250RmFtaWx5KTtcclxuICAgIFxyXG4gICAgaWYgKHR5cGUgPT09ICdzeXN0ZW0nKSByZXR1cm4gdHJ1ZTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRoaXMubG9hZGVkRm9udHMuaGFzKG5hbWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV2dWVsdmUgdW4gYmxvcXVlIDxsaW5rPiAtIGxpc3RvIHBhcmEgcGVnYXIgZW4gPGhlYWQ+IC0gY29uIGxhc1xyXG4gICAqIGZhbWlsaWFzIGRlIEdvb2dsZSBGb250cyB1c2FkYXMuIEZpbHRyYSBnZW7DqXJpY2FzIHkgZnVlbnRlcyBkZSBzaXN0ZW1hLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0gZm9udEZhbWlsaWVzICBFai46IFtcIlBvcHBpbnNcIiwgXCJHcmVhdCBWaWJlc1wiLCBcIkdlb3JnaWFcIl1cclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjYWRlbmEgSFRNTCBvICcnIHNpIG5vIGhheSBuYWRhIHF1ZSBjYXJnYXJcclxuICAgKi9cclxuICBnZXRHb29nbGVGb250c0xpbmsoZm9udEZhbWlsaWVzID0gW10pIHtcclxuICAgIGNvbnN0IGZhbWlsaWFzID0gZm9udEZhbWlsaWVzXHJcbiAgICAgIC5tYXAoZiA9PiBmLnJlcGxhY2UoL1snXCJdL2csIFwiXCIpLnNwbGl0KFwiLFwiKVswXS50cmltKCkpICAgLy8gXCJQb3BwaW5zXCJcclxuICAgICAgLmZpbHRlcihuID0+IHRoaXMuZ29vZ2xlRm9udFNldC5oYXMobikpICAgICAgICAgICAgICAgICAgLy8g4pyFIHNvbG8gR29vZ2xlIEZvbnRzIHJlYWxlc1xyXG4gICAgICAubWFwKG4gPT4gYGZhbWlseT0ke2VuY29kZVVSSUNvbXBvbmVudChuLnJlcGxhY2UoLyAvZywgXCIrXCIpICsgXCI6aXRhbCx3Z2h0QDAsNDAwOzAsNzAwOzEsNDAwOzEsNzAwXCIpfWApXHJcbiAgICAgIC5qb2luKFwiJlwiKTtcclxuXHJcbiAgICBpZiAoIWZhbWlsaWFzKSByZXR1cm4gXCJcIjtcclxuXHJcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyPyR7ZmFtaWxpYXN9JmRpc3BsYXk9c3dhcGA7XHJcbiAgICByZXR1cm4gYFxyXG48bGluayByZWw9XCJwcmVjb25uZWN0XCIgaHJlZj1cImh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb21cIiBjcm9zc29yaWdpbj5cclxuPGxpbmsgaHJlZj1cIiR7dXJsfVwiIHJlbD1cInN0eWxlc2hlZXRcIj5gLnRyaW0oKTtcclxuICB9XHJcblxyXG5cclxuXHJcbiAgLy8gT2J0ZW5lciBDU1MgcGFyYSB0b2RhcyBsYXMgZnVlbnRlcyBjYXJnYWRhc1xyXG4gIGdldExvYWRlZEZvbnRzQ1NTKCkge1xyXG4gICAgY29uc3QgZ29vZ2xlRm9udHMgPSBBcnJheS5mcm9tKHRoaXMubG9hZGVkRm9udHMpO1xyXG4gICAgaWYgKGdvb2dsZUZvbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xyXG4gICAgXHJcbiAgICBjb25zdCBmYW1pbGllcyA9IGdvb2dsZUZvbnRzLm1hcChmb250ID0+IFxyXG4gICAgICBgJHtmb250LnJlcGxhY2UoJyAnLCAnKycpfTozMDAsNDAwLDUwMCw2MDAsNzAwLDgwMCw5MDBgXHJcbiAgICApLmpvaW4oJ3wnKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PSR7ZmFtaWxpZXN9JmRpc3BsYXk9c3dhcGA7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBTaW5nbGV0b25cclxuZXhwb3J0IGNvbnN0IGZvbnRNYW5hZ2VyID0gbmV3IEZvbnRNYW5hZ2VyKCk7Il0sIm5hbWVzIjpbIldlYkZvbnQiLCJHT09HTEVfRk9OVFMiLCJGb250TWFuYWdlciIsImNvbnN0cnVjdG9yIiwibG9hZGVkRm9udHMiLCJTZXQiLCJmb250Q2FjaGUiLCJNYXAiLCJsb2FkaW5nUHJvbWlzZXMiLCJnb29nbGVGb250U2V0IiwibWFwIiwiZiIsIm5vbWJyZSIsImNhdGVnb3JpemVGb250IiwiZm9udEZhbWlseSIsInN5c3RlbUZvbnRzIiwiZm9udE5hbWUiLCJyZXBsYWNlIiwic3BsaXQiLCJ0cmltIiwiaW5jbHVkZXMiLCJ0eXBlIiwibmFtZSIsImxvYWRHb29nbGVGb250IiwiaGFzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXQiLCJsb2FkUHJvbWlzZSIsInJlamVjdCIsImxvYWQiLCJnb29nbGUiLCJmYW1pbGllcyIsImFjdGl2ZSIsImFkZCIsImRlbGV0ZSIsImZvcmNlQ2FudmFzUmVkcmF3IiwiaW5hY3RpdmUiLCJFcnJvciIsInRpbWVvdXQiLCJzZXQiLCJsb2FkRm9udHMiLCJmb250RmFtaWxpZXMiLCJmYW1pbGlhc1BlbmRpZW50ZXMiLCJwcm9tZXNhc0FFc3BlcmFyIiwiZm9yRWFjaCIsImZmIiwicHVzaCIsImxlbmd0aCIsImFsbFNldHRsZWQiLCJsb3RlUHJvbWlzZSIsIm4iLCJqb2luIiwicHJlbG9hZFBvcHVsYXJGb250cyIsInBvcHVsYXJGb250cyIsIndpbmRvdyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImlzRm9udEF2YWlsYWJsZSIsImdldEdvb2dsZUZvbnRzTGluayIsImZhbWlsaWFzIiwiZmlsdGVyIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidXJsIiwiZ2V0TG9hZGVkRm9udHNDU1MiLCJnb29nbGVGb250cyIsIkFycmF5IiwiZnJvbSIsImZvbnQiLCJmb250TWFuYWdlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/fontManager.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/getTextMetrics.js":
/*!*************************************!*\
  !*** ./src/utils/getTextMetrics.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCenteredTextPosition: () => (/* binding */ getCenteredTextPosition),\n/* harmony export */   getNormalizedTextMetrics: () => (/* binding */ getNormalizedTextMetrics),\n/* harmony export */   getTextMetrics: () => (/* binding */ getTextMetrics)\n/* harmony export */ });\nlet canvasCache = null;\n/**\r\n * Obtiene el contexto canvas cacheado\r\n */ function getCanvasContext() {\n    if (!canvasCache) {\n        canvasCache = document.createElement(\"canvas\");\n    }\n    return canvasCache.getContext(\"2d\");\n}\n/**\r\n * Mide métricas reales de una fuente usando Canvas.\r\n * SIEMPRE usa el mismo canvas para garantizar consistencia.\r\n */ function getTextMetrics({ text = \"Hg\", fontSize, fontFamily, fontWeight = \"normal\", fontStyle = \"normal\" }) {\n    const ctx = getCanvasContext();\n    ctx.font = `${fontWeight} ${fontStyle} ${fontSize}px ${fontFamily}`;\n    const metrics = ctx.measureText(text);\n    return {\n        width: metrics.width,\n        ascent: metrics.actualBoundingBoxAscent ?? fontSize * 0.8,\n        descent: metrics.actualBoundingBoxDescent ?? fontSize * 0.2,\n        actualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\n        actualBoundingBoxDescent: metrics.actualBoundingBoxDescent\n    };\n}\n/**\r\n * Calcula métricas normalizadas para un texto.\r\n * Esta es la ÚNICA fuente de verdad para posicionamiento.\r\n */ function getNormalizedTextMetrics({ fontSize, fontFamily, fontWeight = \"normal\", fontStyle = \"normal\" }) {\n    const metrics = getTextMetrics({\n        text: \"Hg\",\n        fontSize,\n        fontFamily,\n        fontWeight,\n        fontStyle\n    });\n    const visualHeight = metrics.ascent + metrics.descent;\n    return {\n        ascent: metrics.ascent,\n        descent: metrics.descent,\n        visualHeight,\n        // Distancia desde el baseline al centro visual\n        baselineToCenter: metrics.ascent - visualHeight / 2\n    };\n}\n/**\r\n * Calcula la posición Y del baseline para centrar texto en un rectángulo.\r\n * Retorna también el top absoluto del texto (baseline - ascent).\r\n */ function getCenteredTextPosition({ rectY, rectHeight, fontSize, fontFamily, fontWeight = \"normal\", fontStyle = \"normal\" }) {\n    const normalized = getNormalizedTextMetrics({\n        fontSize,\n        fontFamily,\n        fontWeight,\n        fontStyle\n    });\n    const rectCenter = rectY + rectHeight / 2;\n    // Baseline centrado: centro del rect + offset desde baseline al centro visual\n    const baselineY = rectCenter + normalized.baselineToCenter;\n    // Top del texto: baseline - ascent\n    const textTop = baselineY - normalized.ascent;\n    return {\n        baseline: baselineY,\n        textTop,\n        ascent: normalized.ascent,\n        descent: normalized.descent,\n        visualHeight: normalized.visualHeight,\n        rectCenter\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9nZXRUZXh0TWV0cmljcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFJQSxjQUFjO0FBRWxCOztDQUVDLEdBQ0QsU0FBU0M7SUFDUCxJQUFJLENBQUNELGFBQWE7UUFDaEJBLGNBQWNFLFNBQVNDLGFBQWEsQ0FBQztJQUN2QztJQUNBLE9BQU9ILFlBQVlJLFVBQVUsQ0FBQztBQUNoQztBQUVBOzs7Q0FHQyxHQUNNLFNBQVNDLGVBQWUsRUFBRUMsT0FBTyxJQUFJLEVBQUVDLFFBQVEsRUFBRUMsVUFBVSxFQUFFQyxhQUFhLFFBQVEsRUFBRUMsWUFBWSxRQUFRLEVBQUU7SUFDL0csTUFBTUMsTUFBTVY7SUFDWlUsSUFBSUMsSUFBSSxHQUFHLEdBQUdILFdBQVcsQ0FBQyxFQUFFQyxVQUFVLENBQUMsRUFBRUgsU0FBUyxHQUFHLEVBQUVDLFlBQVk7SUFDbkUsTUFBTUssVUFBVUYsSUFBSUcsV0FBVyxDQUFDUjtJQUVoQyxPQUFPO1FBQ0xTLE9BQU9GLFFBQVFFLEtBQUs7UUFDcEJDLFFBQVFILFFBQVFJLHVCQUF1QixJQUFJVixXQUFXO1FBQ3REVyxTQUFTTCxRQUFRTSx3QkFBd0IsSUFBSVosV0FBVztRQUN4RFUseUJBQXlCSixRQUFRSSx1QkFBdUI7UUFDeERFLDBCQUEwQk4sUUFBUU0sd0JBQXdCO0lBQzVEO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQyx5QkFBeUIsRUFBRWIsUUFBUSxFQUFFQyxVQUFVLEVBQUVDLGFBQWEsUUFBUSxFQUFFQyxZQUFZLFFBQVEsRUFBRTtJQUM1RyxNQUFNRyxVQUFVUixlQUFlO1FBQzdCQyxNQUFNO1FBQ05DO1FBQ0FDO1FBQ0FDO1FBQ0FDO0lBQ0Y7SUFFQSxNQUFNVyxlQUFlUixRQUFRRyxNQUFNLEdBQUdILFFBQVFLLE9BQU87SUFFckQsT0FBTztRQUNMRixRQUFRSCxRQUFRRyxNQUFNO1FBQ3RCRSxTQUFTTCxRQUFRSyxPQUFPO1FBQ3hCRztRQUNBLCtDQUErQztRQUMvQ0Msa0JBQWtCVCxRQUFRRyxNQUFNLEdBQUlLLGVBQWU7SUFDckQ7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNFLHdCQUF3QixFQUN0Q0MsS0FBSyxFQUNMQyxVQUFVLEVBQ1ZsQixRQUFRLEVBQ1JDLFVBQVUsRUFDVkMsYUFBYSxRQUFRLEVBQ3JCQyxZQUFZLFFBQVEsRUFDckI7SUFDQyxNQUFNZ0IsYUFBYU4seUJBQXlCO1FBQUViO1FBQVVDO1FBQVlDO1FBQVlDO0lBQVU7SUFFMUYsTUFBTWlCLGFBQWFILFFBQVFDLGFBQWE7SUFFeEMsOEVBQThFO0lBQzlFLE1BQU1HLFlBQVlELGFBQWFELFdBQVdKLGdCQUFnQjtJQUUxRCxtQ0FBbUM7SUFDbkMsTUFBTU8sVUFBVUQsWUFBWUYsV0FBV1YsTUFBTTtJQUU3QyxPQUFPO1FBQ0xjLFVBQVVGO1FBQ1ZDO1FBQ0FiLFFBQVFVLFdBQVdWLE1BQU07UUFDekJFLFNBQVNRLFdBQVdSLE9BQU87UUFDM0JHLGNBQWNLLFdBQVdMLFlBQVk7UUFDckNNO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcZ2V0VGV4dE1ldHJpY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IGNhbnZhc0NhY2hlID0gbnVsbDtcclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIGVsIGNvbnRleHRvIGNhbnZhcyBjYWNoZWFkb1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Q2FudmFzQ29udGV4dCgpIHtcclxuICBpZiAoIWNhbnZhc0NhY2hlKSB7XHJcbiAgICBjYW52YXNDYWNoZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgfVxyXG4gIHJldHVybiBjYW52YXNDYWNoZS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNaWRlIG3DqXRyaWNhcyByZWFsZXMgZGUgdW5hIGZ1ZW50ZSB1c2FuZG8gQ2FudmFzLlxyXG4gKiBTSUVNUFJFIHVzYSBlbCBtaXNtbyBjYW52YXMgcGFyYSBnYXJhbnRpemFyIGNvbnNpc3RlbmNpYS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0TWV0cmljcyh7IHRleHQgPSBcIkhnXCIsIGZvbnRTaXplLCBmb250RmFtaWx5LCBmb250V2VpZ2h0ID0gXCJub3JtYWxcIiwgZm9udFN0eWxlID0gXCJub3JtYWxcIiB9KSB7XHJcbiAgY29uc3QgY3R4ID0gZ2V0Q2FudmFzQ29udGV4dCgpO1xyXG4gIGN0eC5mb250ID0gYCR7Zm9udFdlaWdodH0gJHtmb250U3R5bGV9ICR7Zm9udFNpemV9cHggJHtmb250RmFtaWx5fWA7XHJcbiAgY29uc3QgbWV0cmljcyA9IGN0eC5tZWFzdXJlVGV4dCh0ZXh0KTtcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgd2lkdGg6IG1ldHJpY3Mud2lkdGgsXHJcbiAgICBhc2NlbnQ6IG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQgPz8gZm9udFNpemUgKiAwLjgsXHJcbiAgICBkZXNjZW50OiBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCA/PyBmb250U2l6ZSAqIDAuMixcclxuICAgIGFjdHVhbEJvdW5kaW5nQm94QXNjZW50OiBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50LFxyXG4gICAgYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50OiBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYSBtw6l0cmljYXMgbm9ybWFsaXphZGFzIHBhcmEgdW4gdGV4dG8uXHJcbiAqIEVzdGEgZXMgbGEgw5pOSUNBIGZ1ZW50ZSBkZSB2ZXJkYWQgcGFyYSBwb3NpY2lvbmFtaWVudG8uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9ybWFsaXplZFRleHRNZXRyaWNzKHsgZm9udFNpemUsIGZvbnRGYW1pbHksIGZvbnRXZWlnaHQgPSBcIm5vcm1hbFwiLCBmb250U3R5bGUgPSBcIm5vcm1hbFwiIH0pIHtcclxuICBjb25zdCBtZXRyaWNzID0gZ2V0VGV4dE1ldHJpY3Moe1xyXG4gICAgdGV4dDogXCJIZ1wiLFxyXG4gICAgZm9udFNpemUsXHJcbiAgICBmb250RmFtaWx5LFxyXG4gICAgZm9udFdlaWdodCxcclxuICAgIGZvbnRTdHlsZSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgdmlzdWFsSGVpZ2h0ID0gbWV0cmljcy5hc2NlbnQgKyBtZXRyaWNzLmRlc2NlbnQ7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBhc2NlbnQ6IG1ldHJpY3MuYXNjZW50LFxyXG4gICAgZGVzY2VudDogbWV0cmljcy5kZXNjZW50LFxyXG4gICAgdmlzdWFsSGVpZ2h0LFxyXG4gICAgLy8gRGlzdGFuY2lhIGRlc2RlIGVsIGJhc2VsaW5lIGFsIGNlbnRybyB2aXN1YWxcclxuICAgIGJhc2VsaW5lVG9DZW50ZXI6IG1ldHJpY3MuYXNjZW50IC0gKHZpc3VhbEhlaWdodCAvIDIpLFxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhIGxhIHBvc2ljacOzbiBZIGRlbCBiYXNlbGluZSBwYXJhIGNlbnRyYXIgdGV4dG8gZW4gdW4gcmVjdMOhbmd1bG8uXHJcbiAqIFJldG9ybmEgdGFtYmnDqW4gZWwgdG9wIGFic29sdXRvIGRlbCB0ZXh0byAoYmFzZWxpbmUgLSBhc2NlbnQpLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcmVkVGV4dFBvc2l0aW9uKHtcclxuICByZWN0WSxcclxuICByZWN0SGVpZ2h0LFxyXG4gIGZvbnRTaXplLFxyXG4gIGZvbnRGYW1pbHksXHJcbiAgZm9udFdlaWdodCA9IFwibm9ybWFsXCIsXHJcbiAgZm9udFN0eWxlID0gXCJub3JtYWxcIixcclxufSkge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBnZXROb3JtYWxpemVkVGV4dE1ldHJpY3MoeyBmb250U2l6ZSwgZm9udEZhbWlseSwgZm9udFdlaWdodCwgZm9udFN0eWxlIH0pO1xyXG4gIFxyXG4gIGNvbnN0IHJlY3RDZW50ZXIgPSByZWN0WSArIHJlY3RIZWlnaHQgLyAyO1xyXG4gIFxyXG4gIC8vIEJhc2VsaW5lIGNlbnRyYWRvOiBjZW50cm8gZGVsIHJlY3QgKyBvZmZzZXQgZGVzZGUgYmFzZWxpbmUgYWwgY2VudHJvIHZpc3VhbFxyXG4gIGNvbnN0IGJhc2VsaW5lWSA9IHJlY3RDZW50ZXIgKyBub3JtYWxpemVkLmJhc2VsaW5lVG9DZW50ZXI7XHJcbiAgXHJcbiAgLy8gVG9wIGRlbCB0ZXh0bzogYmFzZWxpbmUgLSBhc2NlbnRcclxuICBjb25zdCB0ZXh0VG9wID0gYmFzZWxpbmVZIC0gbm9ybWFsaXplZC5hc2NlbnQ7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGJhc2VsaW5lOiBiYXNlbGluZVksICAgICAgICAvLyDihpAgUG9zaWNpw7NuIFkgZGVsIGJhc2VsaW5lXHJcbiAgICB0ZXh0VG9wLCAgICAgICAgICAgICAgICAgICAgIC8vIOKGkCBQb3NpY2nDs24gWSBkZWwgdG9wIHZpc3VhbCBkZWwgdGV4dG9cclxuICAgIGFzY2VudDogbm9ybWFsaXplZC5hc2NlbnQsXHJcbiAgICBkZXNjZW50OiBub3JtYWxpemVkLmRlc2NlbnQsXHJcbiAgICB2aXN1YWxIZWlnaHQ6IG5vcm1hbGl6ZWQudmlzdWFsSGVpZ2h0LFxyXG4gICAgcmVjdENlbnRlcixcclxuICB9O1xyXG59Il0sIm5hbWVzIjpbImNhbnZhc0NhY2hlIiwiZ2V0Q2FudmFzQ29udGV4dCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImdldENvbnRleHQiLCJnZXRUZXh0TWV0cmljcyIsInRleHQiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwiY3R4IiwiZm9udCIsIm1ldHJpY3MiLCJtZWFzdXJlVGV4dCIsIndpZHRoIiwiYXNjZW50IiwiYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQiLCJkZXNjZW50IiwiYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50IiwiZ2V0Tm9ybWFsaXplZFRleHRNZXRyaWNzIiwidmlzdWFsSGVpZ2h0IiwiYmFzZWxpbmVUb0NlbnRlciIsImdldENlbnRlcmVkVGV4dFBvc2l0aW9uIiwicmVjdFkiLCJyZWN0SGVpZ2h0Iiwibm9ybWFsaXplZCIsInJlY3RDZW50ZXIiLCJiYXNlbGluZVkiLCJ0ZXh0VG9wIiwiYmFzZWxpbmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/getTextMetrics.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/layout.ts":
/*!*****************************!*\
  !*** ./src/utils/layout.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcularOffsetY: () => (/* binding */ calcularOffsetY),\n/* harmony export */   convertirAbsARel: () => (/* binding */ convertirAbsARel),\n/* harmony export */   determinarNuevaSeccion: () => (/* binding */ determinarNuevaSeccion)\n/* harmony export */ });\n// src/utils/layout.ts\n// ✅ calcularOffsetY\nfunction calcularOffsetY(secciones, index) {\n    const anteriores = secciones.slice(0, index);\n    return anteriores.reduce((acc, s)=>acc + s.altura, 0);\n}\n// ✅ convertirAbsARel\nfunction convertirAbsARel(yAbs, seccionId, secciones) {\n    const seccionIndex = secciones.findIndex((s)=>s.id === seccionId);\n    if (seccionIndex < 0) return yAbs;\n    const offsetY = calcularOffsetY(secciones, seccionIndex);\n    return yAbs - offsetY;\n}\n// ✅ determinarNuevaSeccion\nconst determinarNuevaSeccion = (yRelativaConOffset, seccionActualId, seccionesOrdenadas)=>{\n    const seccionActual = seccionesOrdenadas.find((s)=>s.id === seccionActualId);\n    if (!seccionActual) return {\n        nuevaSeccion: null,\n        coordenadasAjustadas: {}\n    };\n    const yAbsolutaReal = yRelativaConOffset;\n    let acumulado = 0;\n    for (const seccion of seccionesOrdenadas){\n        if (yAbsolutaReal >= acumulado && yAbsolutaReal < acumulado + seccion.altura) {\n            if (seccion.id === seccionActualId) {\n                return {\n                    nuevaSeccion: null,\n                    coordenadasAjustadas: {}\n                };\n            }\n            const nuevaY = yAbsolutaReal - acumulado;\n            return {\n                nuevaSeccion: seccion.id,\n                coordenadasAjustadas: {\n                    y: nuevaY\n                }\n            };\n        }\n        acumulado += seccion.altura;\n    }\n    if (yAbsolutaReal < 0) {\n        return {\n            nuevaSeccion: seccionesOrdenadas[0].id,\n            coordenadasAjustadas: {\n                y: 0\n            }\n        };\n    } else {\n        const ultimaSeccion = seccionesOrdenadas[seccionesOrdenadas.length - 1];\n        return {\n            nuevaSeccion: ultimaSeccion.id,\n            coordenadasAjustadas: {\n                y: ultimaSeccion.altura - 50\n            }\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9sYXlvdXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsc0JBQXNCO0FBRXRCLG9CQUFvQjtBQUNiLFNBQVNBLGdCQUFnQkMsU0FBK0IsRUFBRUMsS0FBYTtJQUM1RSxNQUFNQyxhQUFhRixVQUFVRyxLQUFLLENBQUMsR0FBR0Y7SUFDdEMsT0FBT0MsV0FBV0UsTUFBTSxDQUFDLENBQUNDLEtBQUtDLElBQU1ELE1BQU1DLEVBQUVDLE1BQU0sRUFBRTtBQUN2RDtBQUVBLHFCQUFxQjtBQUNkLFNBQVNDLGlCQUNkQyxJQUFZLEVBQ1pDLFNBQWlCLEVBQ2pCVixTQUEyQztJQUUzQyxNQUFNVyxlQUFlWCxVQUFVWSxTQUFTLENBQUNOLENBQUFBLElBQUtBLEVBQUVPLEVBQUUsS0FBS0g7SUFDdkQsSUFBSUMsZUFBZSxHQUFHLE9BQU9GO0lBQzdCLE1BQU1LLFVBQVVmLGdCQUFnQkMsV0FBV1c7SUFDM0MsT0FBT0YsT0FBT0s7QUFDaEI7QUFFQSwyQkFBMkI7QUFDcEIsTUFBTUMseUJBQXlCLENBQ3BDQyxvQkFDQUMsaUJBQ0FDO0lBRUEsTUFBTUMsZ0JBQWdCRCxtQkFBbUJFLElBQUksQ0FBQ2QsQ0FBQUEsSUFBS0EsRUFBRU8sRUFBRSxLQUFLSTtJQUM1RCxJQUFJLENBQUNFLGVBQWUsT0FBTztRQUFFRSxjQUFjO1FBQU1DLHNCQUFzQixDQUFDO0lBQUU7SUFFMUUsTUFBTUMsZ0JBQWdCUDtJQUV0QixJQUFJUSxZQUFZO0lBQ2hCLEtBQUssTUFBTUMsV0FBV1AsbUJBQW9CO1FBQ3hDLElBQUlLLGlCQUFpQkMsYUFBYUQsZ0JBQWdCQyxZQUFZQyxRQUFRbEIsTUFBTSxFQUFFO1lBQzVFLElBQUlrQixRQUFRWixFQUFFLEtBQUtJLGlCQUFpQjtnQkFDbEMsT0FBTztvQkFBRUksY0FBYztvQkFBTUMsc0JBQXNCLENBQUM7Z0JBQUU7WUFDeEQ7WUFDQSxNQUFNSSxTQUFTSCxnQkFBZ0JDO1lBQy9CLE9BQU87Z0JBQ0xILGNBQWNJLFFBQVFaLEVBQUU7Z0JBQ3hCUyxzQkFBc0I7b0JBQUVLLEdBQUdEO2dCQUFPO1lBQ3BDO1FBQ0Y7UUFDQUYsYUFBYUMsUUFBUWxCLE1BQU07SUFDN0I7SUFFQSxJQUFJZ0IsZ0JBQWdCLEdBQUc7UUFDckIsT0FBTztZQUNMRixjQUFjSCxrQkFBa0IsQ0FBQyxFQUFFLENBQUNMLEVBQUU7WUFDdENTLHNCQUFzQjtnQkFBRUssR0FBRztZQUFFO1FBQy9CO0lBQ0YsT0FBTztRQUNMLE1BQU1DLGdCQUFnQlYsa0JBQWtCLENBQUNBLG1CQUFtQlcsTUFBTSxHQUFHLEVBQUU7UUFDdkUsT0FBTztZQUNMUixjQUFjTyxjQUFjZixFQUFFO1lBQzlCUyxzQkFBc0I7Z0JBQUVLLEdBQUdDLGNBQWNyQixNQUFNLEdBQUc7WUFBRztRQUN2RDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcbGF5b3V0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9sYXlvdXQudHNcclxuXHJcbi8vIOKchSBjYWxjdWxhck9mZnNldFlcclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXM6IHsgYWx0dXJhOiBudW1iZXIgfVtdLCBpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcclxuICBjb25zdCBhbnRlcmlvcmVzID0gc2VjY2lvbmVzLnNsaWNlKDAsIGluZGV4KTtcclxuICByZXR1cm4gYW50ZXJpb3Jlcy5yZWR1Y2UoKGFjYywgcykgPT4gYWNjICsgcy5hbHR1cmEsIDApO1xyXG59XHJcblxyXG4vLyDinIUgY29udmVydGlyQWJzQVJlbFxyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydGlyQWJzQVJlbChcclxuICB5QWJzOiBudW1iZXIsXHJcbiAgc2VjY2lvbklkOiBzdHJpbmcsXHJcbiAgc2VjY2lvbmVzOiB7IGlkOiBzdHJpbmc7IGFsdHVyYTogbnVtYmVyIH1bXVxyXG4pOiBudW1iZXIge1xyXG4gIGNvbnN0IHNlY2Npb25JbmRleCA9IHNlY2Npb25lcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBzZWNjaW9uSWQpO1xyXG4gIGlmIChzZWNjaW9uSW5kZXggPCAwKSByZXR1cm4geUFicztcclxuICBjb25zdCBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lcywgc2VjY2lvbkluZGV4KTtcclxuICByZXR1cm4geUFicyAtIG9mZnNldFk7XHJcbn1cclxuXHJcbi8vIOKchSBkZXRlcm1pbmFyTnVldmFTZWNjaW9uXHJcbmV4cG9ydCBjb25zdCBkZXRlcm1pbmFyTnVldmFTZWNjaW9uID0gKFxyXG4gIHlSZWxhdGl2YUNvbk9mZnNldDogbnVtYmVyLFxyXG4gIHNlY2Npb25BY3R1YWxJZDogc3RyaW5nLFxyXG4gIHNlY2Npb25lc09yZGVuYWRhczogeyBpZDogc3RyaW5nOyBhbHR1cmE6IG51bWJlciB9W11cclxuKTogeyBudWV2YVNlY2Npb246IHN0cmluZyB8IG51bGw7IGNvb3JkZW5hZGFzQWp1c3RhZGFzOiB7IHk/OiBudW1iZXIgfSB9ID0+IHtcclxuICBjb25zdCBzZWNjaW9uQWN0dWFsID0gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmQocyA9PiBzLmlkID09PSBzZWNjaW9uQWN0dWFsSWQpO1xyXG4gIGlmICghc2VjY2lvbkFjdHVhbCkgcmV0dXJuIHsgbnVldmFTZWNjaW9uOiBudWxsLCBjb29yZGVuYWRhc0FqdXN0YWRhczoge30gfTtcclxuXHJcbiAgY29uc3QgeUFic29sdXRhUmVhbCA9IHlSZWxhdGl2YUNvbk9mZnNldDtcclxuXHJcbiAgbGV0IGFjdW11bGFkbyA9IDA7XHJcbiAgZm9yIChjb25zdCBzZWNjaW9uIG9mIHNlY2Npb25lc09yZGVuYWRhcykge1xyXG4gICAgaWYgKHlBYnNvbHV0YVJlYWwgPj0gYWN1bXVsYWRvICYmIHlBYnNvbHV0YVJlYWwgPCBhY3VtdWxhZG8gKyBzZWNjaW9uLmFsdHVyYSkge1xyXG4gICAgICBpZiAoc2VjY2lvbi5pZCA9PT0gc2VjY2lvbkFjdHVhbElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgbnVldmFTZWNjaW9uOiBudWxsLCBjb29yZGVuYWRhc0FqdXN0YWRhczoge30gfTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBudWV2YVkgPSB5QWJzb2x1dGFSZWFsIC0gYWN1bXVsYWRvO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG51ZXZhU2VjY2lvbjogc2VjY2lvbi5pZCxcclxuICAgICAgICBjb29yZGVuYWRhc0FqdXN0YWRhczogeyB5OiBudWV2YVkgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIGFjdW11bGFkbyArPSBzZWNjaW9uLmFsdHVyYTtcclxuICB9XHJcblxyXG4gIGlmICh5QWJzb2x1dGFSZWFsIDwgMCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbnVldmFTZWNjaW9uOiBzZWNjaW9uZXNPcmRlbmFkYXNbMF0uaWQsXHJcbiAgICAgIGNvb3JkZW5hZGFzQWp1c3RhZGFzOiB7IHk6IDAgfSxcclxuICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHVsdGltYVNlY2Npb24gPSBzZWNjaW9uZXNPcmRlbmFkYXNbc2VjY2lvbmVzT3JkZW5hZGFzLmxlbmd0aCAtIDFdO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbnVldmFTZWNjaW9uOiB1bHRpbWFTZWNjaW9uLmlkLFxyXG4gICAgICBjb29yZGVuYWRhc0FqdXN0YWRhczogeyB5OiB1bHRpbWFTZWNjaW9uLmFsdHVyYSAtIDUwIH0sXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuIl0sIm5hbWVzIjpbImNhbGN1bGFyT2Zmc2V0WSIsInNlY2Npb25lcyIsImluZGV4IiwiYW50ZXJpb3JlcyIsInNsaWNlIiwicmVkdWNlIiwiYWNjIiwicyIsImFsdHVyYSIsImNvbnZlcnRpckFic0FSZWwiLCJ5QWJzIiwic2VjY2lvbklkIiwic2VjY2lvbkluZGV4IiwiZmluZEluZGV4IiwiaWQiLCJvZmZzZXRZIiwiZGV0ZXJtaW5hck51ZXZhU2VjY2lvbiIsInlSZWxhdGl2YUNvbk9mZnNldCIsInNlY2Npb25BY3R1YWxJZCIsInNlY2Npb25lc09yZGVuYWRhcyIsInNlY2Npb25BY3R1YWwiLCJmaW5kIiwibnVldmFTZWNjaW9uIiwiY29vcmRlbmFkYXNBanVzdGFkYXMiLCJ5QWJzb2x1dGFSZWFsIiwiYWN1bXVsYWRvIiwic2VjY2lvbiIsIm51ZXZhWSIsInkiLCJ1bHRpbWFTZWNjaW9uIiwibGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/layout.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/plantillas.js":
/*!*********************************!*\
  !*** ./src/utils/plantillas.js ***!
  \*********************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   guardarSeccionComoPlantilla: () => (/* binding */ guardarSeccionComoPlantilla)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/firebase */ \"(pages-dir-node)/./src/firebase.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var _utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/subirImagenPublica */ \"(pages-dir-node)/./src/utils/subirImagenPublica.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__, firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__, firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/utils/plantillas.js\n\n\n\n\n/**\r\n * 💾 Guarda una sección como plantilla en Firestore\r\n */ const guardarSeccionComoPlantilla = async ({ seccionId, secciones, objetos, refrescarPlantillasDeSeccion })=>{\n    const seccion = secciones.find((s)=>s.id === seccionId);\n    if (!seccion) {\n        alert(\"No se encontró la sección.\");\n        return;\n    }\n    const objetosDeEsaSeccion = objetos.filter((obj)=>obj.seccionId === seccionId);\n    const user = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)().currentUser;\n    if (!user) {\n        alert(\"⚠️ No estás logueado. No se puede guardar la plantilla.\");\n        return;\n    }\n    const objetosFinales = await Promise.all(objetosDeEsaSeccion.map(async (obj)=>{\n        if (obj.tipo === \"imagen\" && obj.src?.startsWith(\"user_uploads/\")) {\n            const nuevaUrl = await (0,_utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__.subirImagenPublica)(obj.src);\n            return {\n                ...obj,\n                src: nuevaUrl\n            };\n        }\n        return obj;\n    }));\n    const nombre = prompt(\"Nombre de la plantilla:\");\n    if (!nombre) return;\n    const plantilla = {\n        nombre,\n        altura: seccion.altura,\n        fondo: seccion.fondo,\n        tipo: seccion.tipo,\n        objetos: objetosFinales\n    };\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"plantillas_secciones\");\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)(ref, plantilla);\n    if (refrescarPlantillasDeSeccion) {\n        await refrescarPlantillasDeSeccion();\n    }\n    alert(\"✅ Plantilla guardada correctamente\");\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9wbGFudGlsbGFzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsMEJBQTBCO0FBQzhCO0FBQ3hCO0FBQ1E7QUFDd0I7QUFFaEU7O0NBRUMsR0FDTSxNQUFNSyw4QkFBOEIsT0FBTyxFQUNoREMsU0FBUyxFQUNUQyxTQUFTLEVBQ1RDLE9BQU8sRUFDUEMsNEJBQTRCLEVBQzdCO0lBQ0MsTUFBTUMsVUFBVUgsVUFBVUksSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS1A7SUFDL0MsSUFBSSxDQUFDSSxTQUFTO1FBQ1pJLE1BQU07UUFDTjtJQUNGO0lBRUEsTUFBTUMsc0JBQXNCUCxRQUFRUSxNQUFNLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSVgsU0FBUyxLQUFLQTtJQUV0RSxNQUFNWSxPQUFPZixzREFBT0EsR0FBR2dCLFdBQVc7SUFDbEMsSUFBSSxDQUFDRCxNQUFNO1FBQ1RKLE1BQU07UUFDTjtJQUNGO0lBRUEsTUFBTU0saUJBQWlCLE1BQU1DLFFBQVFDLEdBQUcsQ0FDdENQLG9CQUFvQlEsR0FBRyxDQUFDLE9BQU9OO1FBQzdCLElBQUlBLElBQUlPLElBQUksS0FBSyxZQUFZUCxJQUFJUSxHQUFHLEVBQUVDLFdBQVcsa0JBQWtCO1lBQ2pFLE1BQU1DLFdBQVcsTUFBTXZCLDZFQUFrQkEsQ0FBQ2EsSUFBSVEsR0FBRztZQUNqRCxPQUFPO2dCQUFFLEdBQUdSLEdBQUc7Z0JBQUVRLEtBQUtFO1lBQVM7UUFDakM7UUFDQSxPQUFPVjtJQUNUO0lBR0YsTUFBTVcsU0FBU0MsT0FBTztJQUN0QixJQUFJLENBQUNELFFBQVE7SUFFYixNQUFNRSxZQUFZO1FBQ2hCRjtRQUNBRyxRQUFRckIsUUFBUXFCLE1BQU07UUFDdEJDLE9BQU90QixRQUFRc0IsS0FBSztRQUNwQlIsTUFBTWQsUUFBUWMsSUFBSTtRQUNsQmhCLFNBQVNZO0lBQ1g7SUFFQSxNQUFNYSxNQUFNakMsOERBQVVBLENBQUNFLHlDQUFFQSxFQUFFO0lBQzNCLE1BQU1ELDBEQUFNQSxDQUFDZ0MsS0FBS0g7SUFFbEIsSUFBSXJCLDhCQUE4QjtRQUNoQyxNQUFNQTtJQUNSO0lBRUFLLE1BQU07QUFDUixFQUFFIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXHV0aWxzXFxwbGFudGlsbGFzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9wbGFudGlsbGFzLmpzXHJcbmltcG9ydCB7IGNvbGxlY3Rpb24sIGFkZERvYyB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcclxuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9maXJlYmFzZVwiO1xyXG5pbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcclxuaW1wb3J0IHsgc3ViaXJJbWFnZW5QdWJsaWNhIH0gZnJvbSBcIkAvdXRpbHMvc3ViaXJJbWFnZW5QdWJsaWNhXCI7XHJcblxyXG4vKipcclxuICog8J+SviBHdWFyZGEgdW5hIHNlY2Npw7NuIGNvbW8gcGxhbnRpbGxhIGVuIEZpcmVzdG9yZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGd1YXJkYXJTZWNjaW9uQ29tb1BsYW50aWxsYSA9IGFzeW5jICh7XHJcbiAgc2VjY2lvbklkLFxyXG4gIHNlY2Npb25lcyxcclxuICBvYmpldG9zLFxyXG4gIHJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24sXHJcbn0pID0+IHtcclxuICBjb25zdCBzZWNjaW9uID0gc2VjY2lvbmVzLmZpbmQoKHMpID0+IHMuaWQgPT09IHNlY2Npb25JZCk7XHJcbiAgaWYgKCFzZWNjaW9uKSB7XHJcbiAgICBhbGVydChcIk5vIHNlIGVuY29udHLDsyBsYSBzZWNjacOzbi5cIik7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvYmpldG9zRGVFc2FTZWNjaW9uID0gb2JqZXRvcy5maWx0ZXIoKG9iaikgPT4gb2JqLnNlY2Npb25JZCA9PT0gc2VjY2lvbklkKTtcclxuXHJcbiAgY29uc3QgdXNlciA9IGdldEF1dGgoKS5jdXJyZW50VXNlcjtcclxuICBpZiAoIXVzZXIpIHtcclxuICAgIGFsZXJ0KFwi4pqg77iPIE5vIGVzdMOhcyBsb2d1ZWFkby4gTm8gc2UgcHVlZGUgZ3VhcmRhciBsYSBwbGFudGlsbGEuXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb2JqZXRvc0ZpbmFsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgIG9iamV0b3NEZUVzYVNlY2Npb24ubWFwKGFzeW5jIChvYmopID0+IHtcclxuICAgICAgaWYgKG9iai50aXBvID09PSBcImltYWdlblwiICYmIG9iai5zcmM/LnN0YXJ0c1dpdGgoXCJ1c2VyX3VwbG9hZHMvXCIpKSB7XHJcbiAgICAgICAgY29uc3QgbnVldmFVcmwgPSBhd2FpdCBzdWJpckltYWdlblB1YmxpY2Eob2JqLnNyYyk7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4ub2JqLCBzcmM6IG51ZXZhVXJsIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgbm9tYnJlID0gcHJvbXB0KFwiTm9tYnJlIGRlIGxhIHBsYW50aWxsYTpcIik7XHJcbiAgaWYgKCFub21icmUpIHJldHVybjtcclxuXHJcbiAgY29uc3QgcGxhbnRpbGxhID0ge1xyXG4gICAgbm9tYnJlLFxyXG4gICAgYWx0dXJhOiBzZWNjaW9uLmFsdHVyYSxcclxuICAgIGZvbmRvOiBzZWNjaW9uLmZvbmRvLFxyXG4gICAgdGlwbzogc2VjY2lvbi50aXBvLFxyXG4gICAgb2JqZXRvczogb2JqZXRvc0ZpbmFsZXMsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVmID0gY29sbGVjdGlvbihkYiwgXCJwbGFudGlsbGFzX3NlY2Npb25lc1wiKTtcclxuICBhd2FpdCBhZGREb2MocmVmLCBwbGFudGlsbGEpO1xyXG5cclxuICBpZiAocmVmcmVzY2FyUGxhbnRpbGxhc0RlU2VjY2lvbikge1xyXG4gICAgYXdhaXQgcmVmcmVzY2FyUGxhbnRpbGxhc0RlU2VjY2lvbigpO1xyXG4gIH1cclxuXHJcbiAgYWxlcnQoXCLinIUgUGxhbnRpbGxhIGd1YXJkYWRhIGNvcnJlY3RhbWVudGVcIik7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiYWRkRG9jIiwiZGIiLCJnZXRBdXRoIiwic3ViaXJJbWFnZW5QdWJsaWNhIiwiZ3VhcmRhclNlY2Npb25Db21vUGxhbnRpbGxhIiwic2VjY2lvbklkIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsInJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24iLCJzZWNjaW9uIiwiZmluZCIsInMiLCJpZCIsImFsZXJ0Iiwib2JqZXRvc0RlRXNhU2VjY2lvbiIsImZpbHRlciIsIm9iaiIsInVzZXIiLCJjdXJyZW50VXNlciIsIm9iamV0b3NGaW5hbGVzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInRpcG8iLCJzcmMiLCJzdGFydHNXaXRoIiwibnVldmFVcmwiLCJub21icmUiLCJwcm9tcHQiLCJwbGFudGlsbGEiLCJhbHR1cmEiLCJmb25kbyIsInJlZiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/plantillas.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/subirImagenPublica.js":
/*!*****************************************!*\
  !*** ./src/utils/subirImagenPublica.js ***!
  \*****************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   subirImagenPublica: () => (/* binding */ subirImagenPublica)\n/* harmony export */ });\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_storage__WEBPACK_IMPORTED_MODULE_0__]);\nfirebase_storage__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n/**\r\n * 🖼️ Sube una imagen al bucket público (sin token) y devuelve la URL\r\n */ const subirImagenPublica = async (rutaInternaStorage)=>{\n    if (!rutaInternaStorage) throw new Error(\"No se recibió ruta de imagen\");\n    const storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getStorage)();\n    const archivoRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)(storage, rutaInternaStorage);\n    // 🔥 Descargar el archivo original\n    const urlOriginal = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(archivoRef);\n    const response = await fetch(urlOriginal, {\n        mode: \"cors\"\n    });\n    const blob = await response.blob();\n    const extension = blob.type.split(\"/\")[1] || \"jpg\";\n    const nombreNuevo = `public/${Date.now()}.${extension}`;\n    const refNuevo = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)(storage, nombreNuevo);\n    await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytes)(refNuevo, blob, {\n        customMetadata: {\n            firebaseStorageDownloadTokens: null\n        }\n    });\n    return await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(refNuevo);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9zdWJpckltYWdlblB1YmxpY2EuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0Y7QUFFaEY7O0NBRUMsR0FDTSxNQUFNSSxxQkFBcUIsT0FBT0M7SUFDdkMsSUFBSSxDQUFDQSxvQkFBb0IsTUFBTSxJQUFJQyxNQUFNO0lBRXpDLE1BQU1DLFVBQVVQLDREQUFVQTtJQUMxQixNQUFNUSxhQUFhUCxxREFBR0EsQ0FBQ00sU0FBU0Y7SUFFaEMsbUNBQW1DO0lBQ25DLE1BQU1JLGNBQWMsTUFBTU4sZ0VBQWNBLENBQUNLO0lBQ3pDLE1BQU1FLFdBQVcsTUFBTUMsTUFBTUYsYUFBYTtRQUFFRyxNQUFNO0lBQU87SUFDekQsTUFBTUMsT0FBTyxNQUFNSCxTQUFTRyxJQUFJO0lBRWhDLE1BQU1DLFlBQVlELEtBQUtFLElBQUksQ0FBQ0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUk7SUFDN0MsTUFBTUMsY0FBYyxDQUFDLE9BQU8sRUFBRUMsS0FBS0MsR0FBRyxHQUFHLENBQUMsRUFBRUwsV0FBVztJQUN2RCxNQUFNTSxXQUFXbkIscURBQUdBLENBQUNNLFNBQVNVO0lBRTlCLE1BQU1mLDZEQUFXQSxDQUFDa0IsVUFBVVAsTUFBTTtRQUNoQ1EsZ0JBQWdCO1lBQUVDLCtCQUErQjtRQUFLO0lBQ3hEO0lBRUEsT0FBTyxNQUFNbkIsZ0VBQWNBLENBQUNpQjtBQUM5QixFQUFFIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXHV0aWxzXFxzdWJpckltYWdlblB1YmxpY2EuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U3RvcmFnZSwgcmVmLCB1cGxvYWRCeXRlcywgZ2V0RG93bmxvYWRVUkwgfSBmcm9tIFwiZmlyZWJhc2Uvc3RvcmFnZVwiO1xyXG5cclxuLyoqXHJcbiAqIPCflrzvuI8gU3ViZSB1bmEgaW1hZ2VuIGFsIGJ1Y2tldCBww7pibGljbyAoc2luIHRva2VuKSB5IGRldnVlbHZlIGxhIFVSTFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHN1YmlySW1hZ2VuUHVibGljYSA9IGFzeW5jIChydXRhSW50ZXJuYVN0b3JhZ2UpID0+IHtcclxuICBpZiAoIXJ1dGFJbnRlcm5hU3RvcmFnZSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcmVjaWJpw7MgcnV0YSBkZSBpbWFnZW5cIik7XHJcblxyXG4gIGNvbnN0IHN0b3JhZ2UgPSBnZXRTdG9yYWdlKCk7XHJcbiAgY29uc3QgYXJjaGl2b1JlZiA9IHJlZihzdG9yYWdlLCBydXRhSW50ZXJuYVN0b3JhZ2UpO1xyXG5cclxuICAvLyDwn5SlIERlc2NhcmdhciBlbCBhcmNoaXZvIG9yaWdpbmFsXHJcbiAgY29uc3QgdXJsT3JpZ2luYWwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChhcmNoaXZvUmVmKTtcclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybE9yaWdpbmFsLCB7IG1vZGU6IFwiY29yc1wiIH0pO1xyXG4gIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XHJcblxyXG4gIGNvbnN0IGV4dGVuc2lvbiA9IGJsb2IudHlwZS5zcGxpdChcIi9cIilbMV0gfHwgXCJqcGdcIjtcclxuICBjb25zdCBub21icmVOdWV2byA9IGBwdWJsaWMvJHtEYXRlLm5vdygpfS4ke2V4dGVuc2lvbn1gO1xyXG4gIGNvbnN0IHJlZk51ZXZvID0gcmVmKHN0b3JhZ2UsIG5vbWJyZU51ZXZvKTtcclxuXHJcbiAgYXdhaXQgdXBsb2FkQnl0ZXMocmVmTnVldm8sIGJsb2IsIHtcclxuICAgIGN1c3RvbU1ldGFkYXRhOiB7IGZpcmViYXNlU3RvcmFnZURvd25sb2FkVG9rZW5zOiBudWxsIH0sXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBhd2FpdCBnZXREb3dubG9hZFVSTChyZWZOdWV2byk7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJnZXRTdG9yYWdlIiwicmVmIiwidXBsb2FkQnl0ZXMiLCJnZXREb3dubG9hZFVSTCIsInN1YmlySW1hZ2VuUHVibGljYSIsInJ1dGFJbnRlcm5hU3RvcmFnZSIsIkVycm9yIiwic3RvcmFnZSIsImFyY2hpdm9SZWYiLCJ1cmxPcmlnaW5hbCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwiYmxvYiIsImV4dGVuc2lvbiIsInR5cGUiLCJzcGxpdCIsIm5vbWJyZU51ZXZvIiwiRGF0ZSIsIm5vdyIsInJlZk51ZXZvIiwiY3VzdG9tTWV0YWRhdGEiLCJmaXJlYmFzZVN0b3JhZ2VEb3dubG9hZFRva2VucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/subirImagenPublica.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,Check,ClipboardPaste,Copy,Layers,MoveDown,MoveUp,PlusCircle,RotateCcw,Trash2!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!***************************************************************************************************************************************************************************************!*\
  !*** __barrel_optimize__?names=ArrowDown,ArrowUp,Check,ClipboardPaste,Copy,Layers,MoveDown,MoveUp,PlusCircle,RotateCcw,Trash2!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \***************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowDown: () => (/* reexport safe */ _icons_arrow_down_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   ArrowUp: () => (/* reexport safe */ _icons_arrow_up_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   Check: () => (/* reexport safe */ _icons_check_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   ClipboardPaste: () => (/* reexport safe */ _icons_clipboard_paste_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   Copy: () => (/* reexport safe */ _icons_copy_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n/* harmony export */   Layers: () => (/* reexport safe */ _icons_layers_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]),\n/* harmony export */   MoveDown: () => (/* reexport safe */ _icons_move_down_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]),\n/* harmony export */   MoveUp: () => (/* reexport safe */ _icons_move_up_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]),\n/* harmony export */   PlusCircle: () => (/* reexport safe */ _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]),\n/* harmony export */   RotateCcw: () => (/* reexport safe */ _icons_rotate_ccw_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]),\n/* harmony export */   Trash2: () => (/* reexport safe */ _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_arrow_down_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/arrow-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/arrow-down.js\");\n/* harmony import */ var _icons_arrow_up_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/arrow-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js\");\n/* harmony import */ var _icons_check_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/check.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/check.js\");\n/* harmony import */ var _icons_clipboard_paste_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/clipboard-paste.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/clipboard-paste.js\");\n/* harmony import */ var _icons_copy_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/copy.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/copy.js\");\n/* harmony import */ var _icons_layers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/layers.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/layers.js\");\n/* harmony import */ var _icons_move_down_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./icons/move-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-down.js\");\n/* harmony import */ var _icons_move_up_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./icons/move-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-up.js\");\n/* harmony import */ var _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./icons/circle-plus.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/circle-plus.js\");\n/* harmony import */ var _icons_rotate_ccw_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icons/rotate-ccw.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/rotate-ccw.js\");\n/* harmony import */ var _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./icons/trash-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPUFycm93RG93bixBcnJvd1VwLENoZWNrLENsaXBib2FyZFBhc3RlLENvcHksTGF5ZXJzLE1vdmVEb3duLE1vdmVVcCxQbHVzQ2lyY2xlLFJvdGF0ZUNjdyxUcmFzaDIhPSEuL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vbHVjaWRlLXJlYWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQzREO0FBQ0o7QUFDTDtBQUNtQjtBQUNyQjtBQUNJO0FBQ0s7QUFDSjtBQUNRO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXG5vZGVfbW9kdWxlc1xcbHVjaWRlLXJlYWN0XFxkaXN0XFxlc21cXGx1Y2lkZS1yZWFjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQXJyb3dEb3duIH0gZnJvbSBcIi4vaWNvbnMvYXJyb3ctZG93bi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIEFycm93VXAgfSBmcm9tIFwiLi9pY29ucy9hcnJvdy11cC5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIENoZWNrIH0gZnJvbSBcIi4vaWNvbnMvY2hlY2suanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBDbGlwYm9hcmRQYXN0ZSB9IGZyb20gXCIuL2ljb25zL2NsaXBib2FyZC1wYXN0ZS5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIENvcHkgfSBmcm9tIFwiLi9pY29ucy9jb3B5LmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTGF5ZXJzIH0gZnJvbSBcIi4vaWNvbnMvbGF5ZXJzLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW92ZURvd24gfSBmcm9tIFwiLi9pY29ucy9tb3ZlLWRvd24uanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3ZlVXAgfSBmcm9tIFwiLi9pY29ucy9tb3ZlLXVwLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGx1c0NpcmNsZSB9IGZyb20gXCIuL2ljb25zL2NpcmNsZS1wbHVzLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUm90YXRlQ2N3IH0gZnJvbSBcIi4vaWNvbnMvcm90YXRlLWNjdy5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFRyYXNoMiB9IGZyb20gXCIuL2ljb25zL3RyYXNoLTIuanNcIiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,Check,ClipboardPaste,Copy,Layers,MoveDown,MoveUp,PlusCircle,RotateCcw,Trash2!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!*******************************************************************************************************************************************************************************!*\
  !*** __barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \*******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowDown: () => (/* reexport safe */ _icons_arrow_down_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   ArrowUp: () => (/* reexport safe */ _icons_arrow_up_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   ClipboardPaste: () => (/* reexport safe */ _icons_clipboard_paste_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   Copy: () => (/* reexport safe */ _icons_copy_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   Layers: () => (/* reexport safe */ _icons_layers_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n/* harmony export */   Link2: () => (/* reexport safe */ _icons_link_2_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]),\n/* harmony export */   MoveDown: () => (/* reexport safe */ _icons_move_down_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]),\n/* harmony export */   MoveUp: () => (/* reexport safe */ _icons_move_up_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]),\n/* harmony export */   PlusCircle: () => (/* reexport safe */ _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]),\n/* harmony export */   Trash2: () => (/* reexport safe */ _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]),\n/* harmony export */   X: () => (/* reexport safe */ _icons_x_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_arrow_down_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/arrow-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/arrow-down.js\");\n/* harmony import */ var _icons_arrow_up_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/arrow-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js\");\n/* harmony import */ var _icons_clipboard_paste_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/clipboard-paste.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/clipboard-paste.js\");\n/* harmony import */ var _icons_copy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/copy.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/copy.js\");\n/* harmony import */ var _icons_layers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/layers.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/layers.js\");\n/* harmony import */ var _icons_link_2_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/link-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/link-2.js\");\n/* harmony import */ var _icons_move_down_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./icons/move-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-down.js\");\n/* harmony import */ var _icons_move_up_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./icons/move-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-up.js\");\n/* harmony import */ var _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./icons/circle-plus.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/circle-plus.js\");\n/* harmony import */ var _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icons/trash-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _icons_x_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./icons/x.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPUFycm93RG93bixBcnJvd1VwLENsaXBib2FyZFBhc3RlLENvcHksTGF5ZXJzLExpbmsyLE1vdmVEb3duLE1vdmVVcCxQbHVzQ2lyY2xlLFRyYXNoMixYIT0hLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2x1Y2lkZS1yZWFjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUM0RDtBQUNKO0FBQ2M7QUFDckI7QUFDSTtBQUNEO0FBQ007QUFDSjtBQUNRO0FBQ1IiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXG5vZGVfbW9kdWxlc1xcbHVjaWRlLXJlYWN0XFxkaXN0XFxlc21cXGx1Y2lkZS1yZWFjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQXJyb3dEb3duIH0gZnJvbSBcIi4vaWNvbnMvYXJyb3ctZG93bi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIEFycm93VXAgfSBmcm9tIFwiLi9pY29ucy9hcnJvdy11cC5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIENsaXBib2FyZFBhc3RlIH0gZnJvbSBcIi4vaWNvbnMvY2xpcGJvYXJkLXBhc3RlLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQ29weSB9IGZyb20gXCIuL2ljb25zL2NvcHkuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBMYXllcnMgfSBmcm9tIFwiLi9pY29ucy9sYXllcnMuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBMaW5rMiB9IGZyb20gXCIuL2ljb25zL2xpbmstMi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdmVEb3duIH0gZnJvbSBcIi4vaWNvbnMvbW92ZS1kb3duLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW92ZVVwIH0gZnJvbSBcIi4vaWNvbnMvbW92ZS11cC5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFBsdXNDaXJjbGUgfSBmcm9tIFwiLi9pY29ucy9jaXJjbGUtcGx1cy5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFRyYXNoMiB9IGZyb20gXCIuL2ljb25zL3RyYXNoLTIuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBYIH0gZnJvbSBcIi4vaWNvbnMveC5qc1wiIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ })

};
;