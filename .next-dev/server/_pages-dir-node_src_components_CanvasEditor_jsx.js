"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_src_components_CanvasEditor_jsx";
exports.ids = ["_pages-dir-node_src_components_CanvasEditor_jsx"];
exports.modules = {

/***/ "(pages-dir-node)/./src/components/CanvasEditor.jsx":
/*!*****************************************!*\
  !*** ./src/components/CanvasEditor.jsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CanvasEditor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _ElementoCanvas__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ElementoCanvas */ \"(pages-dir-node)/./src/components/ElementoCanvas.jsx\");\n/* harmony import */ var _LineControls__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LineControls */ \"(pages-dir-node)/./src/components/LineControls.jsx\");\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n/* harmony import */ var _models_estructuraInicial__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/models/estructuraInicial */ \"(pages-dir-node)/./src/models/estructuraInicial.js\");\n/* harmony import */ var _hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/hooks/usePlantillasDeSeccion */ \"(pages-dir-node)/./src/hooks/usePlantillasDeSeccion.js\");\n/* harmony import */ var _hooks_useImperativeObjects__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/hooks/useImperativeObjects */ \"(pages-dir-node)/./src/hooks/useImperativeObjects.js\");\n/* harmony import */ var _SelectionBounds__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./SelectionBounds */ \"(pages-dir-node)/./src/components/SelectionBounds.jsx\");\n/* harmony import */ var _HoverIndicator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./HoverIndicator */ \"(pages-dir-node)/./src/components/HoverIndicator.jsx\");\n/* harmony import */ var _LineToolbar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./LineToolbar */ \"(pages-dir-node)/./src/components/LineToolbar.jsx\");\n/* harmony import */ var _hooks_useKeyboardShortcuts__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/hooks/useKeyboardShortcuts */ \"(pages-dir-node)/./src/hooks/useKeyboardShortcuts.js\");\n/* harmony import */ var _utils_fontManager__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../utils/fontManager */ \"(pages-dir-node)/./src/utils/fontManager.js\");\n/* harmony import */ var _hooks_useInlineEditor__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/hooks/useInlineEditor */ \"(pages-dir-node)/./src/hooks/useInlineEditor.js\");\n/* harmony import */ var _ShapeToolbar__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./ShapeToolbar */ \"(pages-dir-node)/./src/components/ShapeToolbar.jsx\");\n/* harmony import */ var _hooks_useEditorHandlers__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/hooks/useEditorHandlers */ \"(pages-dir-node)/./src/hooks/useEditorHandlers.js\");\n/* harmony import */ var _InlineTextEditor__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./InlineTextEditor */ \"(pages-dir-node)/./src/components/InlineTextEditor.jsx\");\n/* harmony import */ var _FontSelector__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./FontSelector */ \"(pages-dir-node)/./src/components/FontSelector.jsx\");\n/* harmony import */ var _utils_accionesFondo__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @/utils/accionesFondo */ \"(pages-dir-node)/./src/utils/accionesFondo.js\");\n/* harmony import */ var _utils_editorSecciones__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @/utils/editorSecciones */ \"(pages-dir-node)/./src/utils/editorSecciones.js\");\n/* harmony import */ var _editor_selection_selectionUtils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./editor/selection/selectionUtils */ \"(pages-dir-node)/./src/components/editor/selection/selectionUtils.js\");\n/* harmony import */ var _utils_plantillas__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @/utils/plantillas */ \"(pages-dir-node)/./src/utils/plantillas.js\");\n/* harmony import */ var _components_editor_GaleriaKonva__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @/components/editor/GaleriaKonva */ \"(pages-dir-node)/./src/components/editor/GaleriaKonva.jsx\");\n/* harmony import */ var _editor_FondoSeccion__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./editor/FondoSeccion */ \"(pages-dir-node)/./src/components/editor/FondoSeccion.jsx\");\n/* harmony import */ var _MenuOpcionesElemento__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./MenuOpcionesElemento */ \"(pages-dir-node)/./src/components/MenuOpcionesElemento.jsx\");\n/* harmony import */ var _utils_calcGrid__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @/utils/calcGrid */ \"(pages-dir-node)/./src/utils/calcGrid.js\");\n/* harmony import */ var _components_editor_countdown_CountdownKonva__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @/components/editor/countdown/CountdownKonva */ \"(pages-dir-node)/./src/components/editor/countdown/CountdownKonva.jsx\");\n/* harmony import */ var _hooks_useGuiasCentrado__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @/hooks/useGuiasCentrado */ \"(pages-dir-node)/./src/hooks/useGuiasCentrado.js\");\n/* harmony import */ var _components_editor_toolbar_FloatingTextToolbar__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @/components/editor/toolbar/FloatingTextToolbar */ \"(pages-dir-node)/./src/components/editor/toolbar/FloatingTextToolbar.jsx\");\n/* harmony import */ var _SelectorColorSeccion__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./SelectorColorSeccion */ \"(pages-dir-node)/./src/components/SelectorColorSeccion.jsx\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! konva */ \"konva\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_32__);\n/* harmony import */ var _config_fonts__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../config/fonts */ \"(pages-dir-node)/./src/config/fonts.js\");\n/* harmony import */ var _hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @/hooks/useAuthClaims */ \"(pages-dir-node)/./src/hooks/useAuthClaims.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,ChevronUp,Layers,Monitor,MoveDown,MoveUp,PlusCircle,Settings,Trash2,Unlink2!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=ChevronDown,ChevronUp,Layers,Monitor,MoveDown,MoveUp,PlusCircle,Settings,Trash2,Unlink2!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./editor/persistence/useBorradorSync */ \"(pages-dir-node)/./src/components/editor/persistence/useBorradorSync.js\");\n/* harmony import */ var _editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./editor/sections/useSectionsManager */ \"(pages-dir-node)/./src/components/editor/sections/useSectionsManager.js\");\n/* harmony import */ var _components_editor_sections_ConfirmDeleteSectionModal__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @/components/editor/sections/ConfirmDeleteSectionModal */ \"(pages-dir-node)/./src/components/editor/sections/ConfirmDeleteSectionModal.jsx\");\n/* harmony import */ var _editor_events_useEditorEvents__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./editor/events/useEditorEvents */ \"(pages-dir-node)/./src/components/editor/events/useEditorEvents.js\");\n/* harmony import */ var _editor_window_useEditorWindowBridge__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./editor/window/useEditorWindowBridge */ \"(pages-dir-node)/./src/components/editor/window/useEditorWindowBridge.js\");\n/* harmony import */ var _editor_history_useHistoryManager__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./editor/history/useHistoryManager */ \"(pages-dir-node)/./src/components/editor/history/useHistoryManager.js\");\n/* harmony import */ var _components_editor_mobile_useCanvasScaleLayout__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @/components/editor/mobile/useCanvasScaleLayout */ \"(pages-dir-node)/./src/components/editor/mobile/useCanvasScaleLayout.js\");\n/* harmony import */ var _components_editor_mobile_useCanvasInteractionState__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @/components/editor/mobile/useCanvasInteractionState */ \"(pages-dir-node)/./src/components/editor/mobile/useCanvasInteractionState.js\");\n/* harmony import */ var _editor_mobile_useStageGestures__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./editor/mobile/useStageGestures */ \"(pages-dir-node)/./src/components/editor/mobile/useStageGestures.js\");\n/* harmony import */ var _components_editor_overlays_useOptionButtonPosition__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @/components/editor/overlays/useOptionButtonPosition */ \"(pages-dir-node)/./src/components/editor/overlays/useOptionButtonPosition.js\");\n/* harmony import */ var _components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @/components/canvas/CanvasElementsLayer */ \"(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx\");\n/* harmony import */ var _components_canvas_DividersOverlayStage__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @/components/canvas/DividersOverlayStage */ \"(pages-dir-node)/./src/components/canvas/DividersOverlayStage.jsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_8__, _utils_editorSecciones__WEBPACK_IMPORTED_MODULE_21__, _utils_plantillas__WEBPACK_IMPORTED_MODULE_23__, _hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_34__, _editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_35__, _editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_36__]);\n([_hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_8__, _utils_editorSecciones__WEBPACK_IMPORTED_MODULE_21__, _utils_plantillas__WEBPACK_IMPORTED_MODULE_23__, _hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_34__, _editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_35__, _editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_36__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// components/CanvasEditor.jsx\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n(konva__WEBPACK_IMPORTED_MODULE_32___default().dragDistance) = 8;\nfunction resolveKonvaPixelRatio() {\n    if (true) return 1;\n    const dpr = Number(window.devicePixelRatio || 1);\n    const coarsePointer = typeof window.matchMedia === \"function\" && window.matchMedia(\"(pointer: coarse)\").matches;\n    const minSide = Math.min(Number(window.innerWidth || 0), Number(window.innerHeight || 0));\n    const mobileLike = coarsePointer || minSide > 0 && minSide <= 1024;\n    if (mobileLike) return 1;\n    return Math.min(dpr, 2);\n}\n(konva__WEBPACK_IMPORTED_MODULE_32___default().pixelRatio) = resolveKonvaPixelRatio();\nconst ALTURA_REFERENCIA_PANTALLA = 500;\nconst ALTURA_PANTALLA_EDITOR = 500;\nfunction normalizarAltoModo(modo) {\n    const m = String(modo || \"fijo\").toLowerCase();\n    return m === \"pantalla\" ? \"pantalla\" : \"fijo\";\n}\nfunction isBoldFontWeight(weight) {\n    const normalized = String(weight || \"normal\").toLowerCase();\n    return normalized === \"bold\" || normalized === \"bolder\" || [\n        \"500\",\n        \"600\",\n        \"700\",\n        \"800\",\n        \"900\"\n    ].includes(normalized);\n}\nfunction resolveKonvaFontStyle(fontStyle, fontWeight) {\n    const style = String(fontStyle || \"normal\").toLowerCase();\n    const isItalic = style.includes(\"italic\") || style.includes(\"oblique\");\n    const isBold = style.includes(\"bold\") || isBoldFontWeight(fontWeight);\n    if (isBold && isItalic) return \"bold italic\";\n    if (isBold) return \"bold\";\n    if (isItalic) return \"italic\";\n    return \"normal\";\n}\n// ??? FUNCIÓN HELPER PARA LIMPIAR UNDEFINED\nconst limpiarObjetoUndefined = (obj)=>{\n    if (Array.isArray(obj)) {\n        return obj.map(limpiarObjetoUndefined);\n    }\n    if (obj !== null && typeof obj === 'object') {\n        const objLimpio = {};\n        Object.keys(obj).forEach((key)=>{\n            const valor = obj[key];\n            if (valor !== undefined) {\n                objLimpio[key] = limpiarObjetoUndefined(valor);\n            }\n        });\n        return objLimpio;\n    }\n    return obj;\n};\n// Utils de cursor global (arriba del componente)\nfunction setGlobalCursor(cursor = '', stageRef = null) {\n    try {\n        document.body.style.cursor = cursor || '';\n        // ?? limpiamos también el contenedor del Stage si existe\n        const stage = stageRef?.current?.container?.() || null;\n        if (stage) stage.style.cursor = cursor || '';\n        // fallback: canvas principal\n        const canvas = document.querySelector('canvas');\n        if (canvas && canvas.parentElement) canvas.parentElement.style.cursor = cursor || '';\n    } catch  {}\n}\nfunction clearGlobalCursor(stageRef = null) {\n    setGlobalCursor('', stageRef);\n}\nfunction isInlineDebugEnabled() {\n    return  false && 0;\n}\nfunction formatInlineLogPayload(payload = {}) {\n    try {\n        return JSON.stringify(payload, null, 2);\n    } catch (error) {\n        return String(error || payload);\n    }\n}\nfunction inlineDebugLog(event, payload = {}) {\n    if (!isInlineDebugEnabled()) return;\n    const essentialEvents = new Set([\n        \"start-inline-edit\",\n        \"linebreak-model-sync\",\n        \"linebreak-transformer\"\n    ]);\n    if (!essentialEvents.has(event)) return;\n    const ts = new Date().toISOString();\n    const body = formatInlineLogPayload(payload);\n    console.log(`[INLINE][${ts}] ${event}\\n${body}`);\n}\nfunction nextInlineFrameMeta() {\n    if (true) {\n        return {\n            frame: null,\n            perfMs: null\n        };\n    }\n    const prev = Number(window.__INLINE_FRAME_SEQ || 0);\n    const next = prev + 1;\n    window.__INLINE_FRAME_SEQ = next;\n    const perfMs = typeof window.performance?.now === \"function\" ? Number(window.performance.now().toFixed(3)) : null;\n    return {\n        frame: next,\n        perfMs\n    };\n}\nfunction getInlineLineStats(value) {\n    const normalized = String(value ?? \"\").replace(/\\r\\n/g, \"\\n\");\n    const trailing = normalized.match(/\\n+$/)?.[0];\n    return {\n        normalized,\n        length: normalized.length,\n        lineCount: normalized === \"\" ? 1 : normalized.split(\"\\n\").length,\n        trailingNewlines: trailing ? trailing.length : 0\n    };\n}\nfunction normalizeInlineDebugAB(rawConfig) {\n    const raw = rawConfig && typeof rawConfig === \"object\" ? rawConfig : {};\n    const visibilitySource = raw.visibilitySource === \"window\" ? \"window\" : \"reactive\";\n    const finishMode = raw.finishMode === \"immediate\" || raw.finishMode === \"raf\" || raw.finishMode === \"timeout100\" ? raw.finishMode : \"raf\";\n    const overlayWidthMode = raw.overlayWidthMode === \"fit-content\" ? \"fit-content\" : \"measured\";\n    return {\n        visibilitySource,\n        finishMode,\n        overlayWidthMode\n    };\n}\nfunction CanvasEditor({ slug, zoom = 1, onHistorialChange, onFuturosChange, userId, onStartupStatusChange }) {\n    const [objetos, setObjetos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [celdaGaleriaActiva, setCeldaGaleriaActiva] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [secciones, setSecciones] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [historial, setHistorial] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [futuros, setFuturos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [elementosSeleccionados, setElementosSeleccionados] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [cargado, setCargado] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const stageRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { dragStartPos, hasDragged, isDragging, setIsDragging } = (0,_components_editor_mobile_useCanvasInteractionState__WEBPACK_IMPORTED_MODULE_42__[\"default\"])();\n    const imperativeObjects = (0,_hooks_useImperativeObjects__WEBPACK_IMPORTED_MODULE_9__.useImperativeObjects)();\n    const [animandoSeccion, setAnimandoSeccion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [seccionActivaId, setSeccionActivaId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [seleccionActiva, setSeleccionActiva] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [inicioSeleccion, setInicioSeleccion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [areaSeleccion, setAreaSeleccion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [elementosPreSeleccionados, setElementosPreSeleccionados] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const guiaLayerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [hoverId, setHoverId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const altoCanvas = secciones.reduce((acc, s)=>acc + s.altura, 0) || 800;\n    const [seccionesAnimando, setSeccionesAnimando] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const { refrescar: refrescarPlantillasDeSeccion } = (0,_hooks_usePlantillasDeSeccion__WEBPACK_IMPORTED_MODULE_8__[\"default\"])();\n    const [elementoCopiado, setElementoCopiado] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const elementRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({});\n    const inlineEditPreviewRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        id: null,\n        centerX: null\n    });\n    const inlineCommitDebugRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        id: null\n    });\n    const prevEditingIdRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const inlineRenderValueRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        id: null,\n        value: \"\"\n    });\n    const [inlineOverlayMountedId, setInlineOverlayMountedId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const contenedorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const editorOverlayRootRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const autoSectionViewportRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const autoSectionScrollRafRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const seccionActivaIdRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const ignoreNextUpdateRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const [anchoStage, setAnchoStage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(800);\n    const [mostrarSelectorFuente, setMostrarSelectorFuente] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mostrarSubmenuCapa, setMostrarSubmenuCapa] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const fuentesDisponibles = _config_fonts__WEBPACK_IMPORTED_MODULE_33__.ALL_FONTS;\n    const { esAdmin, loadingClaims } = (0,_hooks_useAuthClaims__WEBPACK_IMPORTED_MODULE_34__.useAuthClaims)();\n    const [backgroundLoadBySection, setBackgroundLoadBySection] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const startupStatusFinalizedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const [mobileBackgroundEditSectionId, setMobileBackgroundEditSectionId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [deleteSectionModal, setDeleteSectionModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isOpen: false,\n        sectionId: null\n    });\n    const [isDeletingSection, setIsDeletingSection] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mobileSectionActionsOpen, setMobileSectionActionsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const supportsPointerEvents =  false && 0;\n    const isTextResizeDebugEnabled = ()=> false && 0;\n    const textResizeDebug = (...args)=>{\n        if (!isTextResizeDebugEnabled()) return;\n        console.log(\"[TEXT-COMMIT]\", ...args);\n    };\n    (0,_editor_persistence_useBorradorSync__WEBPACK_IMPORTED_MODULE_35__[\"default\"])({\n        slug,\n        userId,\n        objetos,\n        secciones,\n        cargado,\n        setObjetos,\n        setSecciones,\n        setCargado,\n        setSeccionActivaId,\n        ignoreNextUpdateRef,\n        stageRef,\n        normalizarAltoModo,\n        validarPuntosLinea: _editor_selection_selectionUtils__WEBPACK_IMPORTED_MODULE_22__.validarPuntosLinea,\n        ALTURA_PANTALLA_EDITOR\n    });\n    const { controlandoAltura, iniciarControlAltura, finalizarControlAltura, togglePantallaCompletaSeccion, handleCrearSeccion } = (0,_editor_sections_useSectionsManager__WEBPACK_IMPORTED_MODULE_36__[\"default\"])({\n        slug,\n        secciones,\n        setSecciones,\n        objetos,\n        setObjetos,\n        seccionActivaId,\n        setSeccionActivaId,\n        crearSeccion: _models_estructuraInicial__WEBPACK_IMPORTED_MODULE_7__.crearSeccion,\n        normalizarAltoModo,\n        limpiarObjetoUndefined,\n        ALTURA_REFERENCIA_PANTALLA,\n        stageRef,\n        setGlobalCursor,\n        clearGlobalCursor\n    });\n    const nuevoTextoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,_editor_events_useEditorEvents__WEBPACK_IMPORTED_MODULE_38__[\"default\"])({\n        celdaGaleriaActiva,\n        setCeldaGaleriaActiva,\n        setObjetos,\n        secciones,\n        seccionActivaId,\n        setElementosSeleccionados,\n        normalizarAltoModo,\n        ALTURA_PANTALLA_EDITOR,\n        nuevoTextoRef\n    });\n    const seccionesOrdenadas = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[seccionesOrdenadas]\": ()=>[\n                ...secciones\n            ].sort({\n                \"CanvasEditor.useMemo[seccionesOrdenadas]\": (a, b)=>a.orden - b.orden\n            }[\"CanvasEditor.useMemo[seccionesOrdenadas]\"])\n    }[\"CanvasEditor.useMemo[seccionesOrdenadas]\"], [\n        secciones\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            setBackgroundLoadBySection({});\n            startupStatusFinalizedRef.current = false;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        slug\n    ]);\n    const handleBackgroundImageStatusChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[handleBackgroundImageStatusChange]\": (payload)=>{\n            const sectionId = payload?.sectionId;\n            if (!sectionId) return;\n            const hasBackgroundImage = payload?.hasBackgroundImage === true;\n            const imageUrl = typeof payload?.imageUrl === \"string\" ? payload.imageUrl : \"\";\n            const incomingStatus = typeof payload?.status === \"string\" ? payload.status : \"loading\";\n            const status = hasBackgroundImage ? incomingStatus === \"loaded\" || incomingStatus === \"failed\" ? incomingStatus : \"loading\" : \"none\";\n            setBackgroundLoadBySection({\n                \"CanvasEditor.useCallback[handleBackgroundImageStatusChange]\": (prev)=>{\n                    const current = prev[sectionId];\n                    if (current && current.status === status && current.hasBackgroundImage === hasBackgroundImage && current.imageUrl === imageUrl) {\n                        return prev;\n                    }\n                    return {\n                        ...prev,\n                        [sectionId]: {\n                            status,\n                            hasBackgroundImage,\n                            imageUrl\n                        }\n                    };\n                }\n            }[\"CanvasEditor.useCallback[handleBackgroundImageStatusChange]\"]);\n        }\n    }[\"CanvasEditor.useCallback[handleBackgroundImageStatusChange]\"], []);\n    const backgroundLoadSummary = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[backgroundLoadSummary]\": ()=>{\n            const sectionsWithBackgroundImage = (secciones || []).filter({\n                \"CanvasEditor.useMemo[backgroundLoadSummary].sectionsWithBackgroundImage\": (seccion)=>seccion?.fondoTipo === \"imagen\" && typeof seccion?.fondoImagen === \"string\" && seccion.fondoImagen.trim().length > 0\n            }[\"CanvasEditor.useMemo[backgroundLoadSummary].sectionsWithBackgroundImage\"]);\n            let loaded = 0;\n            let failed = 0;\n            let pending = 0;\n            sectionsWithBackgroundImage.forEach({\n                \"CanvasEditor.useMemo[backgroundLoadSummary]\": (seccion)=>{\n                    const status = backgroundLoadBySection[seccion.id]?.status;\n                    if (!status || status === \"loading\") {\n                        pending += 1;\n                        return;\n                    }\n                    if (status === \"loaded\") {\n                        loaded += 1;\n                        return;\n                    }\n                    if (status === \"failed\") {\n                        failed += 1;\n                        return;\n                    }\n                    pending += 1;\n                }\n            }[\"CanvasEditor.useMemo[backgroundLoadSummary]\"]);\n            return {\n                total: sectionsWithBackgroundImage.length,\n                loaded,\n                failed,\n                pending\n            };\n        }\n    }[\"CanvasEditor.useMemo[backgroundLoadSummary]\"], [\n        backgroundLoadBySection,\n        secciones\n    ]);\n    const firstSectionBackgroundReady = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[firstSectionBackgroundReady]\": ()=>{\n            const firstSection = seccionesOrdenadas[0];\n            if (!firstSection) return true;\n            const hasBackgroundImage = firstSection?.fondoTipo === \"imagen\" && typeof firstSection?.fondoImagen === \"string\" && firstSection.fondoImagen.trim().length > 0;\n            if (!hasBackgroundImage) return true;\n            const status = backgroundLoadBySection[firstSection.id]?.status;\n            return status === \"loaded\" || status === \"failed\";\n        }\n    }[\"CanvasEditor.useMemo[firstSectionBackgroundReady]\"], [\n        backgroundLoadBySection,\n        seccionesOrdenadas\n    ]);\n    const startupReady = cargado === true && firstSectionBackgroundReady;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (typeof onStartupStatusChange !== \"function\") return;\n            if (startupStatusFinalizedRef.current) return;\n            const payload = {\n                slug,\n                draftLoaded: cargado === true,\n                totalBackgrounds: backgroundLoadSummary.total,\n                loadedBackgrounds: backgroundLoadSummary.loaded,\n                failedBackgrounds: backgroundLoadSummary.failed,\n                pendingBackgrounds: backgroundLoadSummary.pending\n            };\n            if (!startupReady) {\n                onStartupStatusChange({\n                    ...payload,\n                    status: \"running\"\n                });\n                return;\n            }\n            let cancelled = false;\n            let rafA = 0;\n            let rafB = 0;\n            rafA = requestAnimationFrame({\n                \"CanvasEditor.useEffect\": ()=>{\n                    rafB = requestAnimationFrame({\n                        \"CanvasEditor.useEffect\": ()=>{\n                            if (cancelled) return;\n                            startupStatusFinalizedRef.current = true;\n                            onStartupStatusChange({\n                                ...payload,\n                                status: \"ready\"\n                            });\n                        }\n                    }[\"CanvasEditor.useEffect\"]);\n                }\n            }[\"CanvasEditor.useEffect\"]);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    cancelled = true;\n                    if (rafA) cancelAnimationFrame(rafA);\n                    if (rafB) cancelAnimationFrame(rafB);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        backgroundLoadSummary.failed,\n        backgroundLoadSummary.loaded,\n        backgroundLoadSummary.pending,\n        backgroundLoadSummary.total,\n        firstSectionBackgroundReady,\n        cargado,\n        onStartupStatusChange,\n        slug,\n        startupReady\n    ]);\n    const seccionPendienteEliminar = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[seccionPendienteEliminar]\": ()=>secciones.find({\n                \"CanvasEditor.useMemo[seccionPendienteEliminar]\": (seccion)=>seccion.id === deleteSectionModal.sectionId\n            }[\"CanvasEditor.useMemo[seccionPendienteEliminar]\"]) || null\n    }[\"CanvasEditor.useMemo[seccionPendienteEliminar]\"], [\n        secciones,\n        deleteSectionModal.sectionId\n    ]);\n    const cantidadElementosSeccionPendiente = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\": ()=>{\n            if (!seccionPendienteEliminar?.id) return 0;\n            return objetos.filter({\n                \"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\": (obj)=>obj.seccionId === seccionPendienteEliminar.id\n            }[\"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\"]).length;\n        }\n    }[\"CanvasEditor.useMemo[cantidadElementosSeccionPendiente]\"], [\n        objetos,\n        seccionPendienteEliminar\n    ]);\n    const { editing, startEdit, updateEdit, finishEdit// () => void\n     } = (0,_hooks_useInlineEditor__WEBPACK_IMPORTED_MODULE_15__[\"default\"])();\n    const obtenerMetricasNodoInline = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[obtenerMetricasNodoInline]\": (node)=>{\n            if (!node) return null;\n            try {\n                const className = node.getClassName?.() || null;\n                const x = typeof node.x === \"function\" ? node.x() : null;\n                const y = typeof node.y === \"function\" ? node.y() : null;\n                const textWidth = className === \"Text\" && typeof node.getTextWidth === \"function\" ? Math.ceil(node.getTextWidth() || 0) : null;\n                const rect = typeof node.getClientRect === \"function\" ? node.getClientRect({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                }) : null;\n                return {\n                    className,\n                    x,\n                    y,\n                    textWidth,\n                    rect: rect ? {\n                        x: rect.x,\n                        y: rect.y,\n                        width: rect.width,\n                        height: rect.height\n                    } : null\n                };\n            } catch (error) {\n                return {\n                    error: String(error)\n                };\n            }\n        }\n    }[\"CanvasEditor.useCallback[obtenerMetricasNodoInline]\"], []);\n    const cerrarMenusFlotantes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[cerrarMenusFlotantes]\": ()=>{\n            setMostrarPanelZ(false);\n            setMostrarSubmenuCapa(false);\n            setMostrarSelectorFuente(false);\n            setMostrarSelectorTamano(false);\n            setHoverId(null);\n        }\n    }[\"CanvasEditor.useCallback[cerrarMenusFlotantes]\"], []);\n    // ???Elemento actualmente seleccionado (o null)\n    const objetoSeleccionado = elementosSeleccionados.length === 1 ? objetos.find((o)=>o.id === elementosSeleccionados[0]) : null;\n    const [mostrarSelectorTamano, setMostrarSelectorTamano] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const tamaniosDisponibles = Array.from({\n        length: (260 - 6) / 2 + 1\n    }, (_, i)=>6 + i * 2);\n    const botonOpcionesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const _refEventQueued = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const registerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[registerRef]\": (id, node)=>{\n            if (!node) {\n                delete elementRefs.current[id];\n                imperativeObjects.registerObject(id, null);\n                return;\n            }\n            elementRefs.current[id] = node;\n            imperativeObjects.registerObject(id, node);\n            // ? Debounce por frame para evitar ráfagas de re-attach del Transformer\n            if (_refEventQueued.current.has(id)) return;\n            _refEventQueued.current.add(id);\n            requestAnimationFrame({\n                \"CanvasEditor.useCallback[registerRef]\": ()=>{\n                    _refEventQueued.current.delete(id);\n                    try {\n                        window.dispatchEvent(new CustomEvent(\"element-ref-registrado\", {\n                            detail: {\n                                id\n                            }\n                        }));\n                    } catch  {}\n                }\n            }[\"CanvasEditor.useCallback[registerRef]\"]);\n        }\n    }[\"CanvasEditor.useCallback[registerRef]\"], [\n        imperativeObjects\n    ]);\n    const loadedFontFamiliesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Set());\n    const { isMobile, isMobilePortrait, scale, anchoContenedor, escalaActiva, escalaVisual, wrapperBaseWidth, escalaFitMobilePortrait } = (0,_components_editor_mobile_useCanvasScaleLayout__WEBPACK_IMPORTED_MODULE_41__[\"default\"])({\n        contenedorRef,\n        zoom\n    });\n    const mobileTypographyToolbarVisible = isMobile && Boolean(objetoSeleccionado && (objetoSeleccionado.tipo === \"texto\" || objetoSeleccionado.tipo === \"forma\" && objetoSeleccionado.figura === \"rect\" && typeof objetoSeleccionado.texto === \"string\"));\n    const mobileTextToolbarVisible = mobileTypographyToolbarVisible || isMobile && objetoSeleccionado?.tipo === \"icono\";\n    const mobileFontStripVisible = mobileTypographyToolbarVisible && mostrarSelectorFuente;\n    const mobileSizeStripVisible = mobileTypographyToolbarVisible && mostrarSelectorTamano;\n    const mobileBottomTypographyStripVisible = mobileFontStripVisible || mobileSizeStripVisible;\n    const optionButtonSize = isMobile ? 38 : 24;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const desiredRatio = isMobile ? 1 : resolveKonvaPixelRatio();\n            if ((konva__WEBPACK_IMPORTED_MODULE_32___default().pixelRatio) !== desiredRatio) {\n                (konva__WEBPACK_IMPORTED_MODULE_32___default().pixelRatio) = desiredRatio;\n                stageRef.current?.getStage?.()?.batchDraw?.();\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        isMobile\n    ]);\n    const inlineDebugAB = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[inlineDebugAB]\": ()=>{\n            if (true) {\n                return normalizeInlineDebugAB(null);\n            }\n            return normalizeInlineDebugAB(window.__INLINE_AB);\n        }\n    }[\"CanvasEditor.useMemo[inlineDebugAB]\"], [\n        editing.id,\n        editing.value\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!isMobile && mobileSectionActionsOpen) {\n                setMobileSectionActionsOpen(false);\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        isMobile,\n        mobileSectionActionsOpen\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!isMobile) return;\n            setMobileSectionActionsOpen(false);\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        seccionActivaId,\n        isMobile\n    ]);\n    const handleInlineOverlayMountChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[handleInlineOverlayMountChange]\": (id, mounted)=>{\n            const safeId = id || null;\n            if (!safeId) return;\n            setInlineOverlayMountedId({\n                \"CanvasEditor.useCallback[handleInlineOverlayMountChange]\": (previous)=>{\n                    const next = mounted ? safeId : previous === safeId ? null : previous;\n                    inlineDebugLog(\"overlay-mounted-state\", {\n                        id: safeId,\n                        mounted,\n                        previousOverlayMountedId: previous,\n                        nextOverlayMountedId: next\n                    });\n                    return next;\n                }\n            }[\"CanvasEditor.useCallback[handleInlineOverlayMountChange]\"]);\n        }\n    }[\"CanvasEditor.useCallback[handleInlineOverlayMountChange]\"], []);\n    const captureInlineSnapshot = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[captureInlineSnapshot]\": (eventName, extra = {})=>{\n            if (true) return;\n            if (!isInlineDebugEnabled()) return;\n            if (window.__INLINE_SNAPSHOT !== true) return;\n            const snapshotAllowlist = new Set([\n                \"enter: pre-start\",\n                \"enter: after-start-sync\",\n                \"finish: blur\",\n                \"finish: after-finishEdit\",\n                \"exit: immediate\"\n            ]);\n            if (!snapshotAllowlist.has(eventName)) return;\n            const frameMeta = nextInlineFrameMeta();\n            const snapshotId = extra.id || editing.id || inlineCommitDebugRef.current?.id || prevEditingIdRef.current || null;\n            const node = snapshotId ? elementRefs.current[snapshotId] : null;\n            const nodeMetrics = obtenerMetricasNodoInline(node);\n            const objMetrics = snapshotId ? ({\n                \"CanvasEditor.useCallback[captureInlineSnapshot]\": ()=>{\n                    const obj = objetos.find({\n                        \"CanvasEditor.useCallback[captureInlineSnapshot].obj\": (o)=>o.id === snapshotId\n                    }[\"CanvasEditor.useCallback[captureInlineSnapshot].obj\"]);\n                    if (!obj) return null;\n                    return {\n                        id: obj.id,\n                        tipo: obj.tipo || null,\n                        x: Number.isFinite(obj.x) ? obj.x : null,\n                        y: Number.isFinite(obj.y) ? obj.y : null,\n                        textoLength: String(obj.texto ?? \"\").length,\n                        fontSize: Number.isFinite(obj.fontSize) ? obj.fontSize : null,\n                        lineHeight: Number.isFinite(obj.lineHeight) && obj.lineHeight > 0 ? obj.lineHeight : null\n                    };\n                }\n            })[\"CanvasEditor.useCallback[captureInlineSnapshot]\"]() : null;\n            const stage = stageRef.current?.getStage?.() || stageRef.current || null;\n            let stageRect = null;\n            try {\n                const r = stage?.container?.()?.getBoundingClientRect?.();\n                if (r) {\n                    stageRect = {\n                        x: r.x,\n                        y: r.y,\n                        width: r.width,\n                        height: r.height\n                    };\n                }\n            } catch  {\n                stageRect = null;\n            }\n            let inlineRect = null;\n            let inlineStyle = null;\n            let inlineContentRect = null;\n            let inlineContentMetrics = null;\n            if (snapshotId) {\n                const safeId = String(snapshotId).replace(/\"/g, '\\\\\"');\n                const overlayEl = document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`);\n                if (overlayEl) {\n                    const r = overlayEl.getBoundingClientRect();\n                    inlineRect = {\n                        x: r.x,\n                        y: r.y,\n                        width: r.width,\n                        height: r.height\n                    };\n                    inlineStyle = {\n                        left: overlayEl.style.left,\n                        top: overlayEl.style.top,\n                        minWidth: overlayEl.style.minWidth,\n                        maxWidth: overlayEl.style.maxWidth,\n                        width: overlayEl.style.width\n                    };\n                    const contentEl = overlayEl.querySelector('[contenteditable=\"true\"]');\n                    const contentRect = contentEl?.getBoundingClientRect?.();\n                    if (contentRect) {\n                        inlineContentRect = {\n                            x: contentRect.x,\n                            y: contentRect.y,\n                            width: contentRect.width,\n                            height: contentRect.height\n                        };\n                    }\n                    inlineContentMetrics = contentEl ? {\n                        scrollWidth: contentEl.scrollWidth,\n                        clientWidth: contentEl.clientWidth,\n                        isFocused: document.activeElement === contentEl\n                    } : null;\n                }\n            }\n            let transformerRect = null;\n            try {\n                const transformer = stage?.findOne?.(\"Transformer\");\n                if (transformer) {\n                    const trRect = transformer.getClientRect({\n                        skipTransform: false,\n                        skipShadow: true,\n                        skipStroke: true\n                    });\n                    const nodes = transformer.nodes?.() || [];\n                    transformerRect = trRect ? {\n                        x: trRect.x,\n                        y: trRect.y,\n                        width: trRect.width,\n                        height: trRect.height,\n                        nodesCount: nodes.length,\n                        includesSnapshotNode: !!(node && nodes.includes(node))\n                    } : null;\n                }\n            } catch  {\n                transformerRect = null;\n            }\n            inlineDebugLog(`snapshot-${eventName}`, {\n                ...frameMeta,\n                ...extra,\n                id: snapshotId,\n                eventName,\n                editingId: editing.id ?? null,\n                currentEditingId: window._currentEditingId ?? null,\n                overlayMountedId: inlineOverlayMountedId ?? null,\n                inlineAB: inlineDebugAB,\n                escalaVisual,\n                stageRect,\n                nodeMetrics,\n                objMetrics,\n                transformerRect,\n                inlineRect,\n                inlineStyle,\n                inlineContentRect,\n                inlineContentMetrics,\n                scrollX: window.scrollX,\n                scrollY: window.scrollY,\n                innerWidth: window.innerWidth,\n                innerHeight: window.innerHeight\n            });\n        }\n    }[\"CanvasEditor.useCallback[captureInlineSnapshot]\"], [\n        editing.id,\n        escalaVisual,\n        inlineDebugAB,\n        inlineOverlayMountedId,\n        objetos,\n        obtenerMetricasNodoInline\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const currentId = editing.id || null;\n            const currentValue = String(editing.value ?? \"\");\n            const prev = inlineRenderValueRef.current;\n            if (currentId && prev.id === currentId && prev.value !== currentValue) {\n                const prevStats = getInlineLineStats(prev.value);\n                const nextStats = getInlineLineStats(currentValue);\n                const linebreakChanged = prevStats.lineCount !== nextStats.lineCount || prevStats.trailingNewlines !== nextStats.trailingNewlines;\n                if (linebreakChanged) {\n                    const frameMeta = nextInlineFrameMeta();\n                    const node = elementRefs.current[currentId] || null;\n                    const nodeMetrics = obtenerMetricasNodoInline(node);\n                    const stage = stageRef.current?.getStage?.() || stageRef.current || null;\n                    let transformerRect = null;\n                    try {\n                        const transformer = stage?.findOne?.(\"Transformer\");\n                        if (transformer) {\n                            const trRect = transformer.getClientRect({\n                                skipTransform: false,\n                                skipShadow: true,\n                                skipStroke: true\n                            });\n                            const nodes = transformer.nodes?.() || [];\n                            transformerRect = trRect ? {\n                                x: trRect.x,\n                                y: trRect.y,\n                                width: trRect.width,\n                                height: trRect.height,\n                                nodesCount: nodes.length,\n                                includesEditingNode: !!(node && nodes.includes(node))\n                            } : null;\n                        }\n                    } catch  {\n                        transformerRect = null;\n                    }\n                    let overlayRect = null;\n                    let contentRect = null;\n                    const safeId = String(currentId).replace(/\"/g, '\\\\\"');\n                    const overlayEl = document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`);\n                    if (overlayEl) {\n                        const r = overlayEl.getBoundingClientRect();\n                        overlayRect = {\n                            x: r.x,\n                            y: r.y,\n                            width: r.width,\n                            height: r.height\n                        };\n                        const contentEl = overlayEl.querySelector('[contenteditable=\"true\"]');\n                        const cr = contentEl?.getBoundingClientRect?.();\n                        if (cr) {\n                            contentRect = {\n                                x: cr.x,\n                                y: cr.y,\n                                width: cr.width,\n                                height: cr.height\n                            };\n                        }\n                    }\n                    inlineDebugLog(\"linebreak-transformer\", {\n                        ...frameMeta,\n                        id: currentId,\n                        prevLength: prevStats.length,\n                        nextLength: nextStats.length,\n                        prevLineCount: prevStats.lineCount,\n                        nextLineCount: nextStats.lineCount,\n                        prevTrailingNewlines: prevStats.trailingNewlines,\n                        nextTrailingNewlines: nextStats.trailingNewlines,\n                        overlayMountedId: inlineOverlayMountedId ?? null,\n                        overlayRect,\n                        contentRect,\n                        nodeMetrics,\n                        transformerRect\n                    });\n                }\n                captureInlineSnapshot(\"input: after-render\", {\n                    id: currentId,\n                    previousLength: prev.value.length,\n                    valueLength: currentValue.length\n                });\n            }\n            inlineRenderValueRef.current = {\n                id: currentId,\n                value: currentValue\n            };\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        editing.value,\n        captureInlineSnapshot,\n        inlineOverlayMountedId,\n        obtenerMetricasNodoInline\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return;\n            if (window.__INLINE_DEBUG === undefined) {\n                window.__INLINE_DEBUG = false;\n            }\n            if (window.__INLINE_FRAME_SEQ === undefined) {\n                window.__INLINE_FRAME_SEQ = 0;\n            }\n            const normalizedAB = normalizeInlineDebugAB(window.__INLINE_AB);\n            window.__INLINE_AB = {\n                ...normalizedAB\n            };\n            inlineDebugLog(\"debug-enabled\", {\n                enabled: window.__INLINE_DEBUG,\n                inlineAB: window.__INLINE_AB,\n                frameSeq: window.__INLINE_FRAME_SEQ\n            });\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const currentId = editing.id || null;\n            const previousId = prevEditingIdRef.current;\n            if (currentId && currentId !== previousId) {\n                requestAnimationFrame({\n                    \"CanvasEditor.useEffect\": ()=>{\n                        captureInlineSnapshot(\"enter: raf1\", {\n                            id: currentId,\n                            previousId\n                        });\n                        requestAnimationFrame({\n                            \"CanvasEditor.useEffect\": ()=>{\n                                captureInlineSnapshot(\"enter: raf2\", {\n                                    id: currentId,\n                                    previousId\n                                });\n                            }\n                        }[\"CanvasEditor.useEffect\"]);\n                    }\n                }[\"CanvasEditor.useEffect\"]);\n            }\n            if (!currentId && previousId) {\n                captureInlineSnapshot(\"exit: immediate\", {\n                    id: previousId\n                });\n                requestAnimationFrame({\n                    \"CanvasEditor.useEffect\": ()=>{\n                        captureInlineSnapshot(\"exit: raf1\", {\n                            id: previousId\n                        });\n                        requestAnimationFrame({\n                            \"CanvasEditor.useEffect\": ()=>{\n                                captureInlineSnapshot(\"exit: raf2\", {\n                                    id: previousId\n                                });\n                            }\n                        }[\"CanvasEditor.useEffect\"]);\n                    }\n                }[\"CanvasEditor.useEffect\"]);\n            }\n            prevEditingIdRef.current = currentId;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        captureInlineSnapshot\n    ]);\n    const fuentesNecesarias = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[fuentesNecesarias]\": ()=>{\n            // fuentes usadas en textos + countdown (si aplica) + formas con texto (rect)\n            const fonts = (objetos || []).filter({\n                \"CanvasEditor.useMemo[fuentesNecesarias].fonts\": (o)=>(o.tipo === \"texto\" || o.tipo === \"countdown\" || o.tipo === \"forma\" && o.figura === \"rect\") && o.fontFamily\n            }[\"CanvasEditor.useMemo[fuentesNecesarias].fonts\"]).map({\n                \"CanvasEditor.useMemo[fuentesNecesarias].fonts\": (o)=>String(o.fontFamily).replace(/['\"]/g, \"\").split(\",\")[0].trim()\n            }[\"CanvasEditor.useMemo[fuentesNecesarias].fonts\"]).filter(Boolean);\n            return [\n                ...new Set(fonts)\n            ];\n        }\n    }[\"CanvasEditor.useMemo[fuentesNecesarias]\"], [\n        objetos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return;\n            window.editing = editing;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        editing.value\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return;\n            const previousCurrentEditingId = window._currentEditingId ?? null;\n            window._currentEditingId = editing?.id || null;\n            inlineDebugLog(\"sync-global-editing\", {\n                editingId: editing?.id || null,\n                valueLength: String(editing?.value ?? \"\").length,\n                previousCurrentEditingId,\n                nextCurrentEditingId: window._currentEditingId\n            });\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    inlineDebugLog(\"sync-global-editing-cleanup\", {\n                        editingId: editing?.id || null,\n                        currentEditingId: window._currentEditingId ?? null\n                    });\n                    if (window.editing && window.editing.id === editing.id) {\n                        delete window.editing;\n                    }\n                    if (window._currentEditingId === editing.id) {\n                        window._currentEditingId = null;\n                    }\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id\n    ]);\n    // ?? Función para actualizar offsets de imagen de fondo (SIN UNDEFINED)\n    const actualizarOffsetFondo = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[actualizarOffsetFondo]\": (seccionId, nuevosOffsets, esPreview = false)=>{\n            setSecciones({\n                \"CanvasEditor.useCallback[actualizarOffsetFondo]\": (prev)=>prev.map({\n                        \"CanvasEditor.useCallback[actualizarOffsetFondo]\": (s)=>{\n                            if (s.id !== seccionId) return s;\n                            // ?? CREAR OBJETO LIMPIO\n                            const seccionActualizada = {\n                                ...s\n                            };\n                            // ?? SOLO AGREGAR CAMPOS SI TIENEN VALORES VÁLIDOS\n                            if (nuevosOffsets.offsetX !== undefined && nuevosOffsets.offsetX !== null) {\n                                seccionActualizada.fondoImagenOffsetX = nuevosOffsets.offsetX;\n                            }\n                            if (nuevosOffsets.offsetY !== undefined && nuevosOffsets.offsetY !== null) {\n                                seccionActualizada.fondoImagenOffsetY = nuevosOffsets.offsetY;\n                            }\n                            return seccionActualizada;\n                        }\n                    }[\"CanvasEditor.useCallback[actualizarOffsetFondo]\"])\n            }[\"CanvasEditor.useCallback[actualizarOffsetFondo]\"]);\n        }\n    }[\"CanvasEditor.useCallback[actualizarOffsetFondo]\"], [\n        setSecciones\n    ]);\n    // Asigna una imagen (por URL) a la celda activa\n    function asignarImagenAGaleria(url) {\n        setObjetos((prev)=>{\n            if (!celdaGaleriaActiva) return prev;\n            const { objId, index } = celdaGaleriaActiva;\n            const i = prev.findIndex((o)=>o.id === objId && o.tipo === \"galeria\");\n            if (i === -1) return prev;\n            const copia = structuredClone(prev);\n            const g = copia[i];\n            // Seguridad: que exista y que haya cells[index]\n            if (!g?.cells || !g.cells[index]) return prev;\n            g.cells[index] = {\n                ...g.cells[index] ?? {},\n                mediaUrl: url,\n                fit: g.cells[index]?.fit ?? \"cover\",\n                bg: g.cells[index]?.bg ?? \"#eee\"\n            };\n            return copia;\n        });\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            // Limpiar flag de resize al montar el componente\n            window._resizeData = null;\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    const [mostrarPanelZ, setMostrarPanelZ] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isSelectionRotating, setIsSelectionRotating] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const logOptionButtonMenuDebug = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[logOptionButtonMenuDebug]\": (eventName, payload = {})=>{\n            if (true) return;\n            console.log(`[OPTION-BUTTON][MENU] ${eventName}`, {\n                ts: new Date().toISOString(),\n                ...payload\n            });\n        }\n    }[\"CanvasEditor.useCallback[logOptionButtonMenuDebug]\"], []);\n    const togglePanelOpciones = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[togglePanelOpciones]\": (source = \"unknown\", nativeEvent = null)=>{\n            setMostrarPanelZ({\n                \"CanvasEditor.useCallback[togglePanelOpciones]\": (prev)=>{\n                    const next = !prev;\n                    logOptionButtonMenuDebug(\"toggle\", {\n                        source,\n                        prev,\n                        next,\n                        selectedId: elementosSeleccionados?.[0] ?? null,\n                        selectionCount: elementosSeleccionados.length,\n                        isMobile,\n                        nativeEventType: nativeEvent?.type ?? null,\n                        pointerType: nativeEvent?.pointerType ?? null\n                    });\n                    return next;\n                }\n            }[\"CanvasEditor.useCallback[togglePanelOpciones]\"]);\n        }\n    }[\"CanvasEditor.useCallback[togglePanelOpciones]\"], [\n        elementosSeleccionados,\n        isMobile,\n        logOptionButtonMenuDebug\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            logOptionButtonMenuDebug(\"panel-state\", {\n                open: mostrarPanelZ,\n                selectedId: elementosSeleccionados?.[0] ?? null,\n                selectionCount: elementosSeleccionados.length,\n                isMobile\n            });\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        mostrarPanelZ,\n        elementosSeleccionados,\n        isMobile,\n        logOptionButtonMenuDebug\n    ]);\n    const moverElemento = (accion)=>{\n        const index = objetos.findIndex((o)=>o.id === elementosSeleccionados[0]);\n        if (index === -1) return;\n        const nuevos = [\n            ...objetos\n        ];\n        const [elemento] = nuevos.splice(index, 1);\n        if (accion === \"al-frente\") {\n            nuevos.push(elemento);\n        } else if (accion === \"al-fondo\") {\n            nuevos.unshift(elemento);\n        } else if (accion === \"subir\" && index < objetos.length - 1) {\n            nuevos.splice(index + 1, 0, elemento);\n        } else if (accion === \"bajar\" && index > 0) {\n            nuevos.splice(index - 1, 0, elemento);\n        } else {\n            nuevos.splice(index, 0, elemento); // sin cambios\n        }\n        setObjetos(nuevos);\n        setMostrarPanelZ(false);\n    };\n    const { onDeshacer, onRehacer, onDuplicar, onEliminar, onCopiar, onPegar, onCambiarAlineacion } = (0,_hooks_useEditorHandlers__WEBPACK_IMPORTED_MODULE_17__[\"default\"])({\n        objetos,\n        setObjetos,\n        elementosSeleccionados,\n        setElementosSeleccionados,\n        historial,\n        setHistorial,\n        futuros,\n        setFuturos,\n        setSecciones,\n        ignoreNextUpdateRef,\n        setMostrarPanelZ\n    });\n    (0,_editor_history_useHistoryManager__WEBPACK_IMPORTED_MODULE_40__[\"default\"])({\n        cargado,\n        objetos,\n        secciones,\n        setHistorial,\n        setFuturos,\n        ignoreNextUpdateRef\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const stage = stageRef.current?.getStage?.();\n            if (!stage) return;\n            const content = stage.content;\n            if (!content) return;\n            // ? Estado base: scroll vertical permitido sobre canvas vacío\n            const setScrollMode = {\n                \"CanvasEditor.useEffect.setScrollMode\": ()=>{\n                    content.style.touchAction = \"pan-y\";\n                }\n            }[\"CanvasEditor.useEffect.setScrollMode\"];\n            // ? Durante drag: bloquear scroll para editar fino\n            const setEditMode = {\n                \"CanvasEditor.useEffect.setEditMode\": ()=>{\n                    content.style.touchAction = \"none\";\n                }\n            }[\"CanvasEditor.useEffect.setEditMode\"];\n            // ? NUEVO: estado React confiable para UI (Transformer/hover/etc.)\n            const onDragStart = {\n                \"CanvasEditor.useEffect.onDragStart\": ()=>{\n                    setIsDragging(true);\n                }\n            }[\"CanvasEditor.useEffect.onDragStart\"];\n            const onDragEnd = {\n                \"CanvasEditor.useEffect.onDragEnd\": ()=>{\n                    setIsDragging(false);\n                }\n            }[\"CanvasEditor.useEffect.onDragEnd\"];\n            // ? Failsafe: por si termina “raro” (touch cancel, pointer up, etc.)\n            const stopDragging = {\n                \"CanvasEditor.useEffect.stopDragging\": ()=>{\n                    setIsDragging(false);\n                    setScrollMode();\n                }\n            }[\"CanvasEditor.useEffect.stopDragging\"];\n            // Inicial\n            setScrollMode();\n            setIsDragging(false); // ?? por las dudas, al montar\n            content.style.WebkitUserSelect = \"none\";\n            content.style.WebkitTouchCallout = \"none\";\n            // Konva events\n            stage.on(\"dragstart\", setEditMode);\n            stage.on(\"dragend\", setScrollMode);\n            // ? NUEVO (UI state)\n            stage.on(\"dragstart\", onDragStart);\n            stage.on(\"dragend\", onDragEnd);\n            // Failsafes (si el drag termina raro)\n            stage.on(\"touchend\", stopDragging);\n            stage.on(\"pointerup\", stopDragging);\n            stage.on(\"mouseup\", stopDragging);\n            stage.on(\"touchcancel\", stopDragging);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    stage.off(\"dragstart\", setEditMode);\n                    stage.off(\"dragend\", setScrollMode);\n                    stage.off(\"dragstart\", onDragStart);\n                    stage.off(\"dragend\", onDragEnd);\n                    stage.off(\"touchend\", stopDragging);\n                    stage.off(\"pointerup\", stopDragging);\n                    stage.off(\"mouseup\", stopDragging);\n                    stage.off(\"touchcancel\", stopDragging);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        setIsDragging\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const stage = stageRef.current?.getStage?.() || stageRef.current;\n            const content = stage?.content || stage?.container?.();\n            if (!content) return;\n            const setDragDistanceForInput = {\n                \"CanvasEditor.useEffect.setDragDistanceForInput\": (pointerType)=>{\n                    const isTouchLike = pointerType === \"touch\" || pointerType === \"pen\" || typeof pointerType !== \"string\" && isMobile;\n                    (konva__WEBPACK_IMPORTED_MODULE_32___default().dragDistance) = isTouchLike ? 14 : 5;\n                }\n            }[\"CanvasEditor.useEffect.setDragDistanceForInput\"];\n            const onPointerDown = {\n                \"CanvasEditor.useEffect.onPointerDown\": (event)=>setDragDistanceForInput(event.pointerType)\n            }[\"CanvasEditor.useEffect.onPointerDown\"];\n            const onTouchStart = {\n                \"CanvasEditor.useEffect.onTouchStart\": ()=>setDragDistanceForInput(\"touch\")\n            }[\"CanvasEditor.useEffect.onTouchStart\"];\n            const onMouseDown = {\n                \"CanvasEditor.useEffect.onMouseDown\": ()=>setDragDistanceForInput(\"mouse\")\n            }[\"CanvasEditor.useEffect.onMouseDown\"];\n            setDragDistanceForInput(isMobile ? \"touch\" : \"mouse\");\n            content.addEventListener(\"pointerdown\", onPointerDown, {\n                passive: true\n            });\n            content.addEventListener(\"touchstart\", onTouchStart, {\n                passive: true\n            });\n            content.addEventListener(\"mousedown\", onMouseDown, {\n                passive: true\n            });\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    content.removeEventListener(\"pointerdown\", onPointerDown);\n                    content.removeEventListener(\"touchstart\", onTouchStart);\n                    content.removeEventListener(\"mousedown\", onMouseDown);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        isMobile\n    ]);\n    // Recordar última sección activa\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            seccionActivaIdRef.current = seccionActivaId;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        seccionActivaId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (seccionActivaId) window._lastSeccionActivaId = seccionActivaId;\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        seccionActivaId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!mobileBackgroundEditSectionId) {\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n                return;\n            }\n            window.dispatchEvent(new CustomEvent(\"activar-modo-mover-fondo\", {\n                detail: {\n                    sectionId: mobileBackgroundEditSectionId\n                }\n            }));\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        mobileBackgroundEditSectionId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!nuevoTextoRef.current) return;\n            const obj = objetos.find({\n                \"CanvasEditor.useEffect.obj\": (o)=>o.id === nuevoTextoRef.current\n            }[\"CanvasEditor.useEffect.obj\"]);\n            if (obj) {\n                setElementosSeleccionados([\n                    obj.id\n                ]);\n                // NO iniciar edición automáticamente - solo seleccionar\n                nuevoTextoRef.current = null;\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        objetos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const handleClickFuera = {\n                \"CanvasEditor.useEffect.handleClickFuera\": (e)=>{\n                    if (!e.target.closest(\".popup-fuente\")) {\n                        setMostrarSelectorFuente(false);\n                        setMostrarSelectorTamano(false);\n                    }\n                }\n            }[\"CanvasEditor.useEffect.handleClickFuera\"];\n            document.addEventListener(\"mousedown\", handleClickFuera);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickFuera)\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (onHistorialChange) {\n                onHistorialChange(historial);\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        historial,\n        onHistorialChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (onFuturosChange) {\n                onFuturosChange(futuros);\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        futuros,\n        onFuturosChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            // Pre-cargar fuentes populares al iniciar\n            _utils_fontManager__WEBPACK_IMPORTED_MODULE_14__.fontManager.preloadPopularFonts();\n            // Escuchar evento de fuentes cargadas para redibujar\n            const handleFontsLoaded = {\n                \"CanvasEditor.useEffect.handleFontsLoaded\": ()=>{\n                    if (stageRef.current) {\n                        stageRef.current.batchDraw();\n                    }\n                }\n            }[\"CanvasEditor.useEffect.handleFontsLoaded\"];\n            window.addEventListener('fonts-loaded', handleFontsLoaded);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    window.removeEventListener('fonts-loaded', handleFontsLoaded);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            let alive = true;\n            async function precargar() {\n                // Solo precargar fuentes nuevas para evitar re-renders globales del stage\n                if (!fuentesNecesarias.length) return;\n                const pendientes = fuentesNecesarias.filter({\n                    \"CanvasEditor.useEffect.precargar.pendientes\": (fontName)=>!loadedFontFamiliesRef.current.has(fontName)\n                }[\"CanvasEditor.useEffect.precargar.pendientes\"]);\n                if (!pendientes.length) return;\n                try {\n                    // ? Ideal: que fontManager.loadFonts devuelva Promise\n                    // Si hoy no devuelve, igual lo resolvemos con document.fonts más abajo.\n                    const maybePromise = _utils_fontManager__WEBPACK_IMPORTED_MODULE_14__.fontManager.loadFonts?.(pendientes);\n                    // Si devuelve promise, esperamos\n                    if (maybePromise && typeof maybePromise.then === \"function\") {\n                        await maybePromise;\n                    }\n                    // ? Segundo seguro: esperar a que el browser confirme\n                    // (esto garantiza que no haya fallback)\n                    if (document?.fonts?.load) {\n                        await Promise.all(pendientes.map({\n                            \"CanvasEditor.useEffect.precargar\": (f)=>document.fonts.load(`16px \"${f}\"`)\n                        }[\"CanvasEditor.useEffect.precargar\"]));\n                    }\n                    if (!alive) return;\n                    pendientes.forEach({\n                        \"CanvasEditor.useEffect.precargar\": (fontName)=>loadedFontFamiliesRef.current.add(fontName)\n                    }[\"CanvasEditor.useEffect.precargar\"]);\n                    // Redraw por si acaso\n                    requestAnimationFrame({\n                        \"CanvasEditor.useEffect.precargar\": ()=>{\n                            stageRef.current?.batchDraw?.();\n                        }\n                    }[\"CanvasEditor.useEffect.precargar\"]);\n                } catch (e) {\n                    console.warn(\"?? Error precargando fuentes:\", e);\n                }\n            }\n            // Solo precargar cuando ya cargaste el borrador (para evitar overlay raro)\n            if (cargado) precargar();\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    alive = false;\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        cargado,\n        fuentesNecesarias\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{}\n    }[\"CanvasEditor.useEffect\"], [\n        seleccionActiva,\n        areaSeleccion,\n        inicioSeleccion\n    ]);\n    const actualizarObjeto = (index, nuevo)=>{\n        const nuevos = [\n            ...objetos\n        ];\n        const { fromTransform, ...cleanNuevo } = nuevo;\n        // Preservar datos específicos según el tipo de objeto\n        if (nuevos[index].tipo === 'forma' && nuevos[index].figura === 'line') {\n            // Para líneas, asegurar que los puntos se preserven\n            nuevos[index] = {\n                ...nuevos[index],\n                ...cleanNuevo,\n                points: cleanNuevo.points || nuevos[index].points || [\n                    0,\n                    0,\n                    100,\n                    0\n                ]\n            };\n        } else {\n            nuevos[index] = {\n                ...nuevos[index],\n                ...cleanNuevo\n            };\n        }\n        setObjetos(nuevos);\n    };\n    const actualizarObjetoPorId = (id, cambios)=>{\n        const index = objetos.findIndex((o)=>o.id === id);\n        if (index === -1) return console.warn(\"? No se encontró el objeto con ID:\", id);\n        actualizarObjeto(index, cambios);\n    };\n    const normalizarMedidasGaleria = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[normalizarMedidasGaleria]\": (galeria, widthCandidate, xCandidate)=>{\n            const canvasWidth = 800;\n            const rows = Math.max(1, Number(galeria?.rows) || 1);\n            const cols = Math.max(1, Number(galeria?.cols) || 1);\n            const gap = Math.max(0, Number(galeria?.gap) || 0);\n            const cellRatio = galeria?.ratio === \"4:3\" ? 3 / 4 : galeria?.ratio === \"16:9\" ? 9 / 16 : 1;\n            const minGridWidth = gap * (cols - 1) + cols;\n            let widthPct = Number(widthCandidate) / canvasWidth * 100;\n            if (!Number.isFinite(widthPct)) widthPct = Number(galeria?.widthPct);\n            if (!Number.isFinite(widthPct)) widthPct = 70;\n            widthPct = Math.max(10, Math.min(100, widthPct));\n            let width = canvasWidth * widthPct / 100;\n            width = Math.min(canvasWidth, Math.max(minGridWidth, width));\n            widthPct = Math.max(10, Math.min(100, width / canvasWidth * 100));\n            const maxX = Math.max(0, canvasWidth - width);\n            const fallbackX = Number.isFinite(Number(galeria?.x)) ? Number(galeria.x) : 0;\n            const rawX = Number.isFinite(Number(xCandidate)) ? Number(xCandidate) : fallbackX;\n            const x = Math.max(0, Math.min(rawX, maxX));\n            const cellW = Math.max(1, (width - gap * (cols - 1)) / cols);\n            const cellH = cellW * cellRatio;\n            const height = rows * cellH + gap * (rows - 1);\n            return {\n                width,\n                height,\n                widthPct,\n                x\n            };\n        }\n    }[\"CanvasEditor.useCallback[normalizarMedidasGaleria]\"], []);\n    const actualizarLinea = (lineId, nuevaData)=>{\n        const index = objetos.findIndex((obj)=>obj.id === lineId);\n        if (index === -1) {\n            return;\n        }\n        if (nuevaData.isPreview) {\n            // Preview: Solo actualización visual sin historial\n            setObjetos((prev)=>{\n                const nuevos = [\n                    ...prev\n                ];\n                const { isPreview, ...cleanData } = nuevaData;\n                // Asegurar que los puntos siempre sean un array válido\n                if (cleanData.points) {\n                    cleanData.points = cleanData.points.map((p)=>parseFloat(p) || 0);\n                }\n                // ?? PRESERVAR strokeWidth si existe\n                if (cleanData.strokeWidth !== undefined) {\n                    cleanData.strokeWidth = parseInt(cleanData.strokeWidth) || 2;\n                }\n                nuevos[index] = {\n                    ...nuevos[index],\n                    ...cleanData\n                };\n                return nuevos;\n            });\n        } else if (nuevaData.isFinal) {\n            // Final: Guardar en historial\n            setObjetos((prev)=>{\n                const nuevos = [\n                    ...prev\n                ];\n                const { isFinal, ...cleanData } = nuevaData;\n                // Asegurar que los puntos siempre sean un array válido\n                if (cleanData.points) {\n                    cleanData.points = cleanData.points.map((p)=>parseFloat(p) || 0);\n                }\n                // ?? PRESERVAR strokeWidth si existe\n                if (cleanData.strokeWidth !== undefined) {\n                    cleanData.strokeWidth = parseInt(cleanData.strokeWidth) || 2;\n                }\n                nuevos[index] = {\n                    ...nuevos[index],\n                    ...cleanData\n                };\n                return nuevos;\n            });\n        }\n    };\n    // ?? Métricas de texto consistentes con el render de ElementoCanvas\n    const obtenerMetricasTexto = (texto, { fontSize = 24, fontFamily = \"sans-serif\", fontWeight = \"normal\", fontStyle = \"normal\", lineHeight = 1.2 } = {})=>{\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) {\n            const fallbackSize = Number.isFinite(fontSize) && fontSize > 0 ? fontSize : 24;\n            return {\n                width: Math.max(20, String(texto ?? \"\").length * (fallbackSize * 0.55)),\n                height: fallbackSize * lineHeight\n            };\n        }\n        const safeFontSize = Number.isFinite(fontSize) && fontSize > 0 ? fontSize : 24;\n        const safeLineHeight = Number.isFinite(lineHeight) && lineHeight > 0 ? lineHeight : 1.2;\n        const safeFamily = String(fontFamily || \"sans-serif\");\n        const fontForCanvas = safeFamily.includes(\",\") ? safeFamily : /\\s/.test(safeFamily) ? `\"${safeFamily}\"` : safeFamily;\n        ctx.font = `${fontStyle || \"normal\"} ${fontWeight || \"normal\"} ${safeFontSize}px ${fontForCanvas}`;\n        const rawText = String(texto ?? \"\");\n        const safeText = rawText.replace(/[ \\t]+$/gm, \"\");\n        const lines = safeText.split(/\\r?\\n/);\n        const maxLineWidth = Math.max(...lines.map((line)=>ctx.measureText(line).width), 20);\n        return {\n            width: maxLineWidth,\n            height: safeFontSize * safeLineHeight * Math.max(lines.length, 1)\n        };\n    };\n    const medirAnchoTextoKonva = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[medirAnchoTextoKonva]\": (objTexto, textoObjetivo, fontSizeOverride = null)=>{\n            if (!objTexto || \"undefined\" === \"undefined\") return null;\n            try {\n                const safeText = String(textoObjetivo ?? \"\").replace(/[ \\t]+$/gm, \"\");\n                const safeFontFamily = _utils_fontManager__WEBPACK_IMPORTED_MODULE_14__.fontManager.isFontAvailable(objTexto.fontFamily) ? objTexto.fontFamily : \"sans-serif\";\n                const safeFontSize = Number.isFinite(fontSizeOverride) && fontSizeOverride > 0 ? fontSizeOverride : Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n                const baseLineHeight = Number.isFinite(objTexto.lineHeight) && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n                const probe = new (konva__WEBPACK_IMPORTED_MODULE_32___default().Text)({\n                    text: safeText,\n                    fontSize: safeFontSize,\n                    fontFamily: safeFontFamily,\n                    fontWeight: objTexto.fontWeight || \"normal\",\n                    fontStyle: resolveKonvaFontStyle(objTexto.fontStyle || \"normal\", objTexto.fontWeight || \"normal\"),\n                    lineHeight: baseLineHeight * 0.92,\n                    padding: 0,\n                    wrap: \"none\"\n                });\n                const width = Number(probe.getTextWidth?.() || 0);\n                probe.destroy();\n                return Number.isFinite(width) && width > 0 ? width : null;\n            } catch  {\n                return null;\n            }\n        }\n    }[\"CanvasEditor.useCallback[medirAnchoTextoKonva]\"], []);\n    const medirAltoTextoKonva = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[medirAltoTextoKonva]\": (objTexto, textoObjetivo, fontSizeOverride = null)=>{\n            if (!objTexto || \"undefined\" === \"undefined\") return null;\n            try {\n                const safeText = String(textoObjetivo ?? \"\").replace(/[ \\t]+$/gm, \"\");\n                const safeFontFamily = _utils_fontManager__WEBPACK_IMPORTED_MODULE_14__.fontManager.isFontAvailable(objTexto.fontFamily) ? objTexto.fontFamily : \"sans-serif\";\n                const safeFontSize = Number.isFinite(fontSizeOverride) && fontSizeOverride > 0 ? fontSizeOverride : Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n                const baseLineHeight = Number.isFinite(objTexto.lineHeight) && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n                const probe = new (konva__WEBPACK_IMPORTED_MODULE_32___default().Text)({\n                    text: safeText,\n                    fontSize: safeFontSize,\n                    fontFamily: safeFontFamily,\n                    fontWeight: objTexto.fontWeight || \"normal\",\n                    fontStyle: resolveKonvaFontStyle(objTexto.fontStyle || \"normal\", objTexto.fontWeight || \"normal\"),\n                    lineHeight: baseLineHeight * 0.92,\n                    padding: 0,\n                    wrap: \"none\"\n                });\n                const height = Number(probe.height?.() || 0);\n                probe.destroy();\n                return Number.isFinite(height) && height > 0 ? height : null;\n            } catch  {\n                return null;\n            }\n        }\n    }[\"CanvasEditor.useCallback[medirAltoTextoKonva]\"], []);\n    const calcularXTextoCentradoPorTamano = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[calcularXTextoCentradoPorTamano]\": (objTexto, nextFontSize)=>{\n            if (!objTexto || objTexto.tipo !== \"texto\") return Number.isFinite(objTexto?.x) ? objTexto.x : 0;\n            const safeNextSize = Number.isFinite(nextFontSize) && nextFontSize > 0 ? nextFontSize : Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n            const baseLineHeight = typeof objTexto.lineHeight === \"number\" && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n            const previousMetrics = obtenerMetricasTexto(objTexto.texto, {\n                fontSize: objTexto.fontSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const nextMetrics = obtenerMetricasTexto(objTexto.texto, {\n                fontSize: safeNextSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const previousWidthFromKonva = medirAnchoTextoKonva(objTexto, objTexto.texto, objTexto.fontSize);\n            const nextWidthFromKonva = medirAnchoTextoKonva(objTexto, objTexto.texto, safeNextSize);\n            const previousWidth = Number.isFinite(previousWidthFromKonva) && previousWidthFromKonva > 0 ? previousWidthFromKonva : previousMetrics.width;\n            const nextWidth = Number.isFinite(nextWidthFromKonva) && nextWidthFromKonva > 0 ? nextWidthFromKonva : nextMetrics.width;\n            const currentX = Number.isFinite(objTexto.x) ? objTexto.x : 0;\n            const centerX = currentX + previousWidth / 2;\n            return centerX - nextWidth / 2;\n        }\n    }[\"CanvasEditor.useCallback[calcularXTextoCentradoPorTamano]\"], [\n        obtenerMetricasTexto,\n        medirAnchoTextoKonva\n    ]);\n    const calcularXTextoDesdeCentro = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[calcularXTextoDesdeCentro]\": (objTexto, nextFontSize, centerX)=>{\n            if (!objTexto || objTexto.tipo !== \"texto\") {\n                return Number.isFinite(objTexto?.x) ? objTexto.x : 0;\n            }\n            const safeCenterX = Number(centerX);\n            if (!Number.isFinite(safeCenterX)) {\n                return calcularXTextoCentradoPorTamano(objTexto, nextFontSize);\n            }\n            const safeNextSize = Number.isFinite(nextFontSize) && nextFontSize > 0 ? nextFontSize : Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n            const baseLineHeight = typeof objTexto.lineHeight === \"number\" && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n            const nextMetrics = obtenerMetricasTexto(objTexto.texto, {\n                fontSize: safeNextSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const nextWidthFromKonva = medirAnchoTextoKonva(objTexto, objTexto.texto, safeNextSize);\n            const nextWidth = Number.isFinite(nextWidthFromKonva) && nextWidthFromKonva > 0 ? nextWidthFromKonva : nextMetrics.width;\n            return safeCenterX - nextWidth / 2;\n        }\n    }[\"CanvasEditor.useCallback[calcularXTextoDesdeCentro]\"], [\n        calcularXTextoCentradoPorTamano,\n        obtenerMetricasTexto,\n        medirAnchoTextoKonva\n    ]);\n    const calcularYTextoDesdeCentro = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[calcularYTextoDesdeCentro]\": (objTexto, nextFontSize, centerY)=>{\n            if (!objTexto || objTexto.tipo !== \"texto\") {\n                return Number.isFinite(objTexto?.y) ? objTexto.y : 0;\n            }\n            const safeCenterY = Number(centerY);\n            if (!Number.isFinite(safeCenterY)) {\n                return Number.isFinite(objTexto.y) ? objTexto.y : 0;\n            }\n            const safeNextSize = Number.isFinite(nextFontSize) && nextFontSize > 0 ? nextFontSize : Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n            const baseLineHeight = typeof objTexto.lineHeight === \"number\" && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n            const nextMetrics = obtenerMetricasTexto(objTexto.texto, {\n                fontSize: safeNextSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const nextHeightFromKonva = medirAltoTextoKonva(objTexto, objTexto.texto, safeNextSize);\n            const nextHeight = Number.isFinite(nextHeightFromKonva) && nextHeightFromKonva > 0 ? nextHeightFromKonva : nextMetrics.height;\n            return safeCenterY - nextHeight / 2;\n        }\n    }[\"CanvasEditor.useCallback[calcularYTextoDesdeCentro]\"], [\n        obtenerMetricasTexto,\n        medirAltoTextoKonva\n    ]);\n    const calcularPosTextoDesdeCentro = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[calcularPosTextoDesdeCentro]\": (objTexto, nextFontSize, centerX, centerY, rotationDeg = 0)=>{\n            if (!objTexto || objTexto.tipo !== \"texto\") {\n                return {\n                    x: Number.isFinite(objTexto?.x) ? objTexto.x : 0,\n                    y: null\n                };\n            }\n            const safeNextSize = Number.isFinite(nextFontSize) && nextFontSize > 0 ? nextFontSize : Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n            const safeCenterX = Number(centerX);\n            const safeCenterY = Number(centerY);\n            const safeRotation = Number(rotationDeg);\n            const theta = (Number.isFinite(safeRotation) ? safeRotation : 0) * (Math.PI / 180);\n            const baseLineHeight = typeof objTexto.lineHeight === \"number\" && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n            const metrics = obtenerMetricasTexto(objTexto.texto, {\n                fontSize: safeNextSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const widthFromKonva = medirAnchoTextoKonva(objTexto, objTexto.texto, safeNextSize);\n            const heightFromKonva = medirAltoTextoKonva(objTexto, objTexto.texto, safeNextSize);\n            const width = Number.isFinite(widthFromKonva) && widthFromKonva > 0 ? widthFromKonva : metrics.width;\n            const height = Number.isFinite(heightFromKonva) && heightFromKonva > 0 ? heightFromKonva : metrics.height;\n            const halfW = width / 2;\n            const halfH = height / 2;\n            const centerOffsetX = halfW * Math.cos(theta) - halfH * Math.sin(theta);\n            const centerOffsetY = halfW * Math.sin(theta) + halfH * Math.cos(theta);\n            const fallbackX = calcularXTextoDesdeCentro(objTexto, safeNextSize, safeCenterX);\n            const fallbackY = calcularYTextoDesdeCentro(objTexto, safeNextSize, safeCenterY);\n            return {\n                x: Number.isFinite(safeCenterX) ? safeCenterX - centerOffsetX : fallbackX,\n                y: Number.isFinite(safeCenterY) ? safeCenterY - centerOffsetY : fallbackY,\n                width,\n                height\n            };\n        }\n    }[\"CanvasEditor.useCallback[calcularPosTextoDesdeCentro]\"], [\n        obtenerMetricasTexto,\n        medirAnchoTextoKonva,\n        medirAltoTextoKonva,\n        calcularXTextoDesdeCentro,\n        calcularYTextoDesdeCentro\n    ]);\n    const ajustarFontSizeAAnchoVisual = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[ajustarFontSizeAAnchoVisual]\": (objTexto, proposedFontSize, targetVisualWidth)=>{\n            const safeProposed = Number(proposedFontSize);\n            const safeTargetWidth = Number(targetVisualWidth);\n            textResizeDebug(\"fit-width:start\", {\n                id: objTexto?.id ?? null,\n                proposedFontSize: safeProposed,\n                targetVisualWidth: safeTargetWidth,\n                currentFontSize: objTexto?.fontSize ?? null\n            });\n            if (!objTexto || objTexto.tipo !== \"texto\") {\n                textResizeDebug(\"fit-width:skip-invalid-obj\", {\n                    id: objTexto?.id ?? null\n                });\n                return Number.isFinite(safeProposed) && safeProposed > 0 ? safeProposed : 24;\n            }\n            if (!Number.isFinite(safeProposed) || safeProposed <= 0) {\n                textResizeDebug(\"fit-width:skip-invalid-size\", {\n                    id: objTexto?.id ?? null\n                });\n                return Number.isFinite(objTexto.fontSize) && objTexto.fontSize > 0 ? objTexto.fontSize : 24;\n            }\n            if (!Number.isFinite(safeTargetWidth) || safeTargetWidth <= 0) {\n                textResizeDebug(\"fit-width:skip-invalid-width\", {\n                    id: objTexto?.id ?? null\n                });\n                return safeProposed;\n            }\n            let nextSize = Math.max(6, safeProposed);\n            // Dos iteraciones alcanzan para compensar el desajuste entre preview escalado y render final.\n            for(let i = 0; i < 2; i += 1){\n                const measuredWidth = medirAnchoTextoKonva(objTexto, objTexto.texto, nextSize);\n                if (!Number.isFinite(measuredWidth) || measuredWidth <= 0) {\n                    textResizeDebug(\"fit-width:break-no-measure\", {\n                        id: objTexto?.id ?? null,\n                        iteration: i,\n                        measuredWidth\n                    });\n                    break;\n                }\n                const ratio = safeTargetWidth / measuredWidth;\n                if (!Number.isFinite(ratio) || ratio <= 0) {\n                    textResizeDebug(\"fit-width:break-invalid-ratio\", {\n                        id: objTexto?.id ?? null,\n                        iteration: i,\n                        ratio,\n                        measuredWidth,\n                        targetVisualWidth: safeTargetWidth\n                    });\n                    break;\n                }\n                const candidate = Math.max(6, nextSize * ratio);\n                textResizeDebug(\"fit-width:iter\", {\n                    id: objTexto?.id ?? null,\n                    iteration: i,\n                    measuredWidth,\n                    ratio,\n                    prevSize: nextSize,\n                    candidate\n                });\n                if (Math.abs(candidate - nextSize) <= 0.01) {\n                    nextSize = candidate;\n                    break;\n                }\n                nextSize = candidate;\n            }\n            const finalSize = Number(nextSize.toFixed(3));\n            textResizeDebug(\"fit-width:end\", {\n                id: objTexto?.id ?? null,\n                finalSize,\n                targetVisualWidth: safeTargetWidth\n            });\n            return finalSize;\n        }\n    }[\"CanvasEditor.useCallback[ajustarFontSizeAAnchoVisual]\"], [\n        medirAnchoTextoKonva,\n        textResizeDebug\n    ]);\n    const calcularXTextoCentrado = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[calcularXTextoCentrado]\": (objTexto, textoObjetivo)=>{\n            if (!objTexto || objTexto.tipo !== \"texto\") return Number.isFinite(objTexto?.x) ? objTexto.x : 0;\n            const baseLineHeight = typeof objTexto.lineHeight === \"number\" && objTexto.lineHeight > 0 ? objTexto.lineHeight : 1.2;\n            const previousMetrics = obtenerMetricasTexto(objTexto.texto, {\n                fontSize: objTexto.fontSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const nextMetrics = obtenerMetricasTexto(textoObjetivo, {\n                fontSize: objTexto.fontSize,\n                fontFamily: objTexto.fontFamily,\n                fontWeight: objTexto.fontWeight,\n                fontStyle: objTexto.fontStyle,\n                lineHeight: baseLineHeight * 0.92\n            });\n            const previousWidthFromKonva = medirAnchoTextoKonva(objTexto, objTexto.texto);\n            const nextWidthFromKonva = medirAnchoTextoKonva(objTexto, textoObjetivo);\n            const previousWidth = Number.isFinite(previousWidthFromKonva) && previousWidthFromKonva > 0 ? previousWidthFromKonva : previousMetrics.width;\n            const nextWidth = Number.isFinite(nextWidthFromKonva) && nextWidthFromKonva > 0 ? nextWidthFromKonva : nextMetrics.width;\n            const currentX = Number.isFinite(objTexto.x) ? objTexto.x : 0;\n            const centerX = currentX + previousWidth / 2;\n            return centerX - nextWidth / 2;\n        }\n    }[\"CanvasEditor.useCallback[calcularXTextoCentrado]\"], [\n        obtenerMetricasTexto,\n        medirAnchoTextoKonva\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const describeTarget = {\n                \"CanvasEditor.useEffect.describeTarget\": (target)=>{\n                    if (target === window) return \"window\";\n                    if (target === document) return \"document\";\n                    if (!(target instanceof Element)) return \"unknown\";\n                    const tag = String(target.tagName || \"\").toLowerCase();\n                    const id = target.id ? `#${target.id}` : \"\";\n                    const classes = target.classList?.length ? `.${Array.from(target.classList).slice(0, 2).join(\".\")}` : \"\";\n                    return `${tag}${id}${classes}` || \"element\";\n                }\n            }[\"CanvasEditor.useEffect.describeTarget\"];\n            const isInsideFloatingUi = {\n                \"CanvasEditor.useEffect.isInsideFloatingUi\": (target)=>{\n                    if (!(target instanceof Element)) return false;\n                    return Boolean(target.closest(\".menu-z-index\") || target.closest('[data-option-button=\"true\"]'));\n                }\n            }[\"CanvasEditor.useEffect.isInsideFloatingUi\"];\n            const handlePointerOutside = {\n                \"CanvasEditor.useEffect.handlePointerOutside\": (event)=>{\n                    const insideFloatingUi = isInsideFloatingUi(event.target);\n                    if (insideFloatingUi) {\n                        logOptionButtonMenuDebug(\"outside-ignore\", {\n                            source: \"global-pointerdown\",\n                            target: describeTarget(event.target),\n                            eventType: event.type,\n                            pointerType: event.pointerType ?? null\n                        });\n                        return;\n                    }\n                    setMostrarPanelZ({\n                        \"CanvasEditor.useEffect.handlePointerOutside\": (prev)=>{\n                            if (!prev) return prev;\n                            logOptionButtonMenuDebug(\"outside-close\", {\n                                source: \"global-pointerdown\",\n                                target: describeTarget(event.target),\n                                eventType: event.type,\n                                pointerType: event.pointerType ?? null,\n                                prev,\n                                next: false\n                            });\n                            return false;\n                        }\n                    }[\"CanvasEditor.useEffect.handlePointerOutside\"]);\n                }\n            }[\"CanvasEditor.useEffect.handlePointerOutside\"];\n            if (false) {}\n            document.addEventListener(\"mousedown\", handlePointerOutside, true);\n            document.addEventListener(\"touchstart\", handlePointerOutside, {\n                capture: true,\n                passive: true\n            });\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    document.removeEventListener(\"mousedown\", handlePointerOutside, true);\n                    document.removeEventListener(\"touchstart\", handlePointerOutside, true);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        logOptionButtonMenuDebug\n    ]);\n    const actualizarFondoSeccion = (id, nuevoFondo)=>{\n        setSecciones((prev)=>prev.map((s)=>s.id === id ? {\n                    ...s,\n                    fondo: nuevoFondo\n                } : s));\n    };\n    (0,_hooks_useKeyboardShortcuts__WEBPACK_IMPORTED_MODULE_13__[\"default\"])({\n        onDeshacer,\n        onRehacer,\n        onDuplicar,\n        onEliminar,\n        onDeseleccionar: {\n            \"CanvasEditor.useKeyboardShortcuts\": ()=>{\n                if (elementosSeleccionados.length > 0) {\n                    setElementosSeleccionados([]);\n                    setMostrarPanelZ(false);\n                    setMostrarSubmenuCapa(false);\n                    setMostrarSelectorFuente(false);\n                    setMostrarSelectorTamano(false);\n                    setHoverId(null);\n                }\n            }\n        }[\"CanvasEditor.useKeyboardShortcuts\"],\n        onCopiar,\n        onPegar,\n        onCambiarAlineacion,\n        isEditing: !!editing.id,\n        tieneSeleccion: elementosSeleccionados.length > 0\n    });\n    const cambiarColorFondoSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[cambiarColorFondoSeccion]\": (seccionId, nuevoColor)=>{\n            setSecciones({\n                \"CanvasEditor.useCallback[cambiarColorFondoSeccion]\": (prev)=>prev.map({\n                        \"CanvasEditor.useCallback[cambiarColorFondoSeccion]\": (s)=>{\n                            if (s.id !== seccionId) return s;\n                            return {\n                                ...s,\n                                fondo: nuevoColor\n                            };\n                        }\n                    }[\"CanvasEditor.useCallback[cambiarColorFondoSeccion]\"])\n            }[\"CanvasEditor.useCallback[cambiarColorFondoSeccion]\"]);\n        }\n    }[\"CanvasEditor.useCallback[cambiarColorFondoSeccion]\"], [\n        setSecciones\n    ]);\n    (0,_editor_window_useEditorWindowBridge__WEBPACK_IMPORTED_MODULE_39__[\"default\"])({\n        seccionesOrdenadas,\n        secciones,\n        seccionActivaId,\n        objetos,\n        altoCanvas,\n        calcularOffsetY: _utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY,\n        cambiarColorFondoSeccion,\n        onDeshacer,\n        onRehacer,\n        historialLength: historial.length,\n        futurosLength: futuros.length,\n        stageRef\n    });\n    const esSeccionPantallaById = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[esSeccionPantallaById]\": (seccionId)=>{\n            const s = seccionesOrdenadas.find({\n                \"CanvasEditor.useCallback[esSeccionPantallaById].s\": (x)=>x.id === seccionId\n            }[\"CanvasEditor.useCallback[esSeccionPantallaById].s\"]);\n            return s && normalizarAltoModo(s.altoModo) === \"pantalla\";\n        }\n    }[\"CanvasEditor.useCallback[esSeccionPantallaById]\"], [\n        seccionesOrdenadas\n    ]);\n    const altoCanvasDinamico = seccionesOrdenadas.reduce((acc, s)=>acc + s.altura, 0) || 800;\n    const abrirModalBorrarSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[abrirModalBorrarSeccion]\": (seccionId)=>{\n            if (!seccionId || isDeletingSection) return;\n            setDeleteSectionModal({\n                isOpen: true,\n                sectionId: seccionId\n            });\n        }\n    }[\"CanvasEditor.useCallback[abrirModalBorrarSeccion]\"], [\n        isDeletingSection\n    ]);\n    const cerrarModalBorrarSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[cerrarModalBorrarSeccion]\": ()=>{\n            if (isDeletingSection) return;\n            setDeleteSectionModal({\n                isOpen: false,\n                sectionId: null\n            });\n        }\n    }[\"CanvasEditor.useCallback[cerrarModalBorrarSeccion]\"], [\n        isDeletingSection\n    ]);\n    const confirmarBorrarSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[confirmarBorrarSeccion]\": async ()=>{\n            const seccionId = deleteSectionModal.sectionId;\n            if (!seccionId || isDeletingSection) return;\n            setIsDeletingSection(true);\n            try {\n                await (0,_utils_editorSecciones__WEBPACK_IMPORTED_MODULE_21__.borrarSeccion)({\n                    seccionId,\n                    secciones,\n                    objetos,\n                    slug,\n                    seccionActivaId,\n                    setSecciones,\n                    setObjetos,\n                    setSeccionActivaId\n                });\n                setDeleteSectionModal({\n                    isOpen: false,\n                    sectionId: null\n                });\n            } finally{\n                setIsDeletingSection(false);\n            }\n        }\n    }[\"CanvasEditor.useCallback[confirmarBorrarSeccion]\"], [\n        deleteSectionModal.sectionId,\n        isDeletingSection,\n        secciones,\n        objetos,\n        slug,\n        seccionActivaId,\n        setSecciones,\n        setObjetos,\n        setSeccionActivaId\n    ]);\n    // 3) Cada vez que el usuario selecciona una sección, actualizamos global y notificamos\n    const onSelectSeccion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[onSelectSeccion]\": (id)=>{\n            try {\n                setSeccionActivaId(id);\n                window._seccionActivaId = id;\n                window.dispatchEvent(new CustomEvent(\"seccion-activa\", {\n                    detail: {\n                        id\n                    }\n                }));\n            } catch (e) {\n                console.warn(\"No pude emitir seccion-activa:\", e);\n            }\n        }\n    }[\"CanvasEditor.useCallback[onSelectSeccion]\"], [\n        setSeccionActivaId\n    ]);\n    const resolverViewportScrollSecciones = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[resolverViewportScrollSecciones]\": ()=>{\n            const stage = stageRef.current?.getStage?.() || stageRef.current || null;\n            const stageContainer = stage?.container?.();\n            if (!stageContainer || \"undefined\" === \"undefined\") return null;\n            const mainElement = stageContainer.closest?.(\"main\");\n            if (mainElement) return mainElement;\n            let current = stageContainer.parentElement;\n            while(current && current !== document.body){\n                const style = window.getComputedStyle(current);\n                const overflowY = String(style.overflowY || \"\").toLowerCase();\n                const overflow = String(style.overflow || \"\").toLowerCase();\n                const isScrollable = overflowY === \"auto\" || overflowY === \"scroll\" || overflowY === \"overlay\" || overflow === \"auto\" || overflow === \"scroll\" || overflow === \"overlay\";\n                if (isScrollable && current.scrollHeight > current.clientHeight + 1) {\n                    return current;\n                }\n                current = current.parentElement;\n            }\n            return window;\n        }\n    }[\"CanvasEditor.useCallback[resolverViewportScrollSecciones]\"], []);\n    const sincronizarSeccionVisiblePorScroll = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[sincronizarSeccionVisiblePorScroll]\": ()=>{\n            if (!seccionesOrdenadas.length || \"undefined\" === \"undefined\") return;\n            const stage = stageRef.current?.getStage?.() || stageRef.current || null;\n            const stageContainer = stage?.container?.();\n            if (!stageContainer) return;\n            const stageRect = stageContainer.getBoundingClientRect?.();\n            if (!stageRect || !Number.isFinite(stageRect.top) || !Number.isFinite(stageRect.height)) {\n                return;\n            }\n            const viewport = autoSectionViewportRef.current || resolverViewportScrollSecciones();\n            if (!viewport) return;\n            let viewportTop = 0;\n            let viewportBottom = window.innerHeight || document.documentElement.clientHeight || 0;\n            if (viewport !== window) {\n                const viewportRect = viewport.getBoundingClientRect?.();\n                if (!viewportRect) return;\n                viewportTop = viewportRect.top;\n                viewportBottom = viewportRect.bottom;\n            }\n            if (!Number.isFinite(viewportTop) || !Number.isFinite(viewportBottom) || viewportBottom <= viewportTop) {\n                return;\n            }\n            const alturaStagePx = Number(stageRect.height || 0);\n            const alturaCanvas = Math.max(1, Number(altoCanvasDinamico) || 1);\n            if (!(alturaStagePx > 0)) return;\n            const pxPorUnidad = alturaStagePx / alturaCanvas;\n            if (!(pxPorUnidad > 0)) return;\n            const centroViewport = (viewportTop + viewportBottom) / 2;\n            let mejorId = null;\n            let mejorVisible = 0;\n            let mejorRatio = -1;\n            let mejorDistanciaCentro = Number.POSITIVE_INFINITY;\n            seccionesOrdenadas.forEach({\n                \"CanvasEditor.useCallback[sincronizarSeccionVisiblePorScroll]\": (seccion, index)=>{\n                    const alturaSeccion = Math.max(1, Number(seccion.altura) || 1);\n                    const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, index);\n                    const top = stageRect.top + offsetY * pxPorUnidad;\n                    const bottom = top + alturaSeccion * pxPorUnidad;\n                    const visible = Math.max(0, Math.min(bottom, viewportBottom) - Math.max(top, viewportTop));\n                    if (visible <= 0) return;\n                    const ratioVisible = visible / (alturaSeccion * pxPorUnidad);\n                    const distanciaCentro = Math.abs((top + bottom) / 2 - centroViewport);\n                    const mejoraPorVisible = visible > mejorVisible + 1;\n                    const empateVisible = Math.abs(visible - mejorVisible) <= 1;\n                    const mejoraPorRatio = empateVisible && ratioVisible > mejorRatio + 0.001;\n                    const empateRatio = empateVisible && Math.abs(ratioVisible - mejorRatio) <= 0.001;\n                    const mejoraPorCentro = empateRatio && distanciaCentro < mejorDistanciaCentro;\n                    if (mejoraPorVisible || mejoraPorRatio || mejoraPorCentro) {\n                        mejorId = seccion.id;\n                        mejorVisible = visible;\n                        mejorRatio = ratioVisible;\n                        mejorDistanciaCentro = distanciaCentro;\n                    }\n                }\n            }[\"CanvasEditor.useCallback[sincronizarSeccionVisiblePorScroll]\"]);\n            if (!mejorId) return;\n            if (seccionActivaIdRef.current === mejorId) return;\n            onSelectSeccion(mejorId);\n        }\n    }[\"CanvasEditor.useCallback[sincronizarSeccionVisiblePorScroll]\"], [\n        altoCanvasDinamico,\n        onSelectSeccion,\n        resolverViewportScrollSecciones,\n        seccionesOrdenadas\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return undefined;\n            if (!seccionesOrdenadas.length) return undefined;\n            autoSectionViewportRef.current = resolverViewportScrollSecciones();\n            const scrollTarget = autoSectionViewportRef.current || window;\n            const scheduleSync = {\n                \"CanvasEditor.useEffect.scheduleSync\": ()=>{\n                    if (autoSectionScrollRafRef.current) return;\n                    autoSectionScrollRafRef.current = window.requestAnimationFrame({\n                        \"CanvasEditor.useEffect.scheduleSync\": ()=>{\n                            autoSectionScrollRafRef.current = 0;\n                            sincronizarSeccionVisiblePorScroll();\n                        }\n                    }[\"CanvasEditor.useEffect.scheduleSync\"]);\n                }\n            }[\"CanvasEditor.useEffect.scheduleSync\"];\n            scheduleSync();\n            const eventTarget = scrollTarget === window ? window : scrollTarget;\n            eventTarget.addEventListener(\"scroll\", scheduleSync, {\n                passive: true\n            });\n            window.addEventListener(\"resize\", scheduleSync);\n            window.addEventListener(\"orientationchange\", scheduleSync);\n            if (window.visualViewport) {\n                window.visualViewport.addEventListener(\"scroll\", scheduleSync);\n                window.visualViewport.addEventListener(\"resize\", scheduleSync);\n            }\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    eventTarget.removeEventListener(\"scroll\", scheduleSync);\n                    window.removeEventListener(\"resize\", scheduleSync);\n                    window.removeEventListener(\"orientationchange\", scheduleSync);\n                    if (window.visualViewport) {\n                        window.visualViewport.removeEventListener(\"scroll\", scheduleSync);\n                        window.visualViewport.removeEventListener(\"resize\", scheduleSync);\n                    }\n                    if (autoSectionScrollRafRef.current) {\n                        window.cancelAnimationFrame(autoSectionScrollRafRef.current);\n                        autoSectionScrollRafRef.current = 0;\n                    }\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        resolverViewportScrollSecciones,\n        seccionesOrdenadas.length,\n        sincronizarSeccionVisiblePorScroll\n    ]);\n    // ?? NUEVO HOOK PARA GUÍAS\n    const { guiaLineas, mostrarGuias, limpiarGuias, configurarDragEnd } = (0,_hooks_useGuiasCentrado__WEBPACK_IMPORTED_MODULE_29__[\"default\"])({\n        anchoCanvas: 800,\n        altoCanvas: altoCanvasDinamico,\n        // UX: guía de sección solo al centrar, con imán sutil.\n        margenSensibilidad: 8,\n        magnetRadius: 10,\n        sectionMagnetRadius: 6,\n        snapStrength: 0.8,\n        sectionSnapStrength: 1,\n        sectionLineTolerance: 0.75,\n        snapToEdges: true,\n        snapToCenters: true,\n        seccionesOrdenadas\n    });\n    // ?? Función para actualizar posición del botón SIN re-render\n    const { actualizarPosicionBotonOpciones } = (0,_components_editor_overlays_useOptionButtonPosition__WEBPACK_IMPORTED_MODULE_44__[\"default\"])({\n        botonOpcionesRef,\n        layoutRootRef: editorOverlayRootRef,\n        elementRefs,\n        elementosSeleccionados,\n        stageRef,\n        escalaVisual,\n        escalaActiva,\n        isMobile,\n        buttonSize: optionButtonSize\n    });\n    const handleTransformInteractionStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[handleTransformInteractionStart]\": (payload = {})=>{\n            const rotating = payload?.isRotate === true;\n            setIsSelectionRotating(rotating);\n            if (rotating) {\n                setMostrarPanelZ(false);\n            }\n        }\n    }[\"CanvasEditor.useCallback[handleTransformInteractionStart]\"], []);\n    const handleTransformInteractionEnd = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CanvasEditor.useCallback[handleTransformInteractionEnd]\": ()=>{\n            setIsSelectionRotating(false);\n            requestAnimationFrame({\n                \"CanvasEditor.useCallback[handleTransformInteractionEnd]\": ()=>{\n                    if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                        actualizarPosicionBotonOpciones(\"transform-interaction-end\");\n                    }\n                }\n            }[\"CanvasEditor.useCallback[handleTransformInteractionEnd]\"]);\n        }\n    }[\"CanvasEditor.useCallback[handleTransformInteractionEnd]\"], [\n        actualizarPosicionBotonOpciones\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (elementosSeleccionados.length === 1 && !editing.id) return;\n            setIsSelectionRotating(false);\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        elementosSeleccionados.length,\n        editing.id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const onDragStartGlobal = {\n                \"CanvasEditor.useEffect.onDragStartGlobal\": ()=>{\n                    // limpiar hover/preselección inmediatamente para evitar \"flash\" visual\n                    (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)({\n                        \"CanvasEditor.useEffect.onDragStartGlobal\": ()=>{\n                            setHoverId(null);\n                            setElementosPreSeleccionados([]);\n                            setIsDragging(true);\n                        }\n                    }[\"CanvasEditor.useEffect.onDragStartGlobal\"]);\n                }\n            }[\"CanvasEditor.useEffect.onDragStartGlobal\"];\n            const onDragEndGlobal = {\n                \"CanvasEditor.useEffect.onDragEndGlobal\": ()=>{\n                // nada por ahora; si quisieras, podrías recalcular algo acá\n                }\n            }[\"CanvasEditor.useEffect.onDragEndGlobal\"];\n            window.addEventListener(\"dragging-start\", onDragStartGlobal);\n            window.addEventListener(\"dragging-end\", onDragEndGlobal);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    window.removeEventListener(\"dragging-start\", onDragStartGlobal);\n                    window.removeEventListener(\"dragging-end\", onDragEndGlobal);\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    // ?? OPTIMIZACIÓN: Limpiar cache de intersección al cambiar selección\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            // Limpiar cache cuando cambia la selección\n            if (window._lineIntersectionCache) {\n                window._lineIntersectionCache = {};\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        elementosSeleccionados.length\n    ]);\n    // ?? OPTIMIZACIÓN: Forzar actualización de líneas después de drag grupal\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (window._grupoLider || elementosSeleccionados.length === 0) return;\n            // Solo correr esta optimización cuando acaba de finalizar un drag grupal.\n            const now = typeof performance !== \"undefined\" && typeof performance.now === \"function\" ? performance.now() : Date.now();\n            const recentlyEndedGroupDrag = Number.isFinite(window._skipUntil) && window._skipUntil > now;\n            if (!recentlyEndedGroupDrag) return;\n            const hayLineas = objetos.some({\n                \"CanvasEditor.useEffect.hayLineas\": (obj)=>elementosSeleccionados.includes(obj.id) && obj.tipo === 'forma' && obj.figura === 'line'\n            }[\"CanvasEditor.useEffect.hayLineas\"]);\n            if (!hayLineas) return;\n            const timer = setTimeout({\n                \"CanvasEditor.useEffect.timer\": ()=>{\n                    elementosSeleccionados.forEach({\n                        \"CanvasEditor.useEffect.timer\": (id)=>{\n                            const node = elementRefs.current[id];\n                            if (node && node.getLayer) {\n                                node.getLayer()?.batchDraw();\n                            }\n                        }\n                    }[\"CanvasEditor.useEffect.timer\"]);\n                }\n            }[\"CanvasEditor.useEffect.timer\"], 50);\n            return ({\n                \"CanvasEditor.useEffect\": ()=>clearTimeout(timer)\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        elementosSeleccionados,\n        objetos\n    ]);\n    const detectarInterseccionLinea = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CanvasEditor.useMemo[detectarInterseccionLinea]\": ()=>{\n            return ({\n                \"CanvasEditor.useMemo[detectarInterseccionLinea]\": (lineObj, area, stage)=>{\n                    try {\n                        if (!lineObj || !area || !lineObj.points) return false;\n                        let points = lineObj.points;\n                        if (!Array.isArray(points) || points.length < 4) {\n                            points = [\n                                0,\n                                0,\n                                100,\n                                0\n                            ];\n                        }\n                        const puntosLimpios = [\n                            parseFloat(points[0]) || 0,\n                            parseFloat(points[1]) || 0,\n                            parseFloat(points[2]) || 100,\n                            parseFloat(points[3]) || 0\n                        ];\n                        // ?? USAR LA POSICIÓN DEL NODO REAL EN EL STAGE\n                        const node = window._elementRefs?.[lineObj.id];\n                        const lineX = node ? node.x() : lineObj.x || 0;\n                        const lineY = node ? node.y() : lineObj.y || 0;\n                        // Coordenadas absolutas de los puntos\n                        const startX = lineX + puntosLimpios[0];\n                        const startY = lineY + puntosLimpios[1];\n                        const endX = lineX + puntosLimpios[2];\n                        const endY = lineY + puntosLimpios[3];\n                        // ?? MÉTODO 1: Verificar si algún punto está dentro del área\n                        const startDentro = startX >= area.x && startX <= area.x + area.width && startY >= area.y && startY <= area.y + area.height;\n                        const endDentro = endX >= area.x && endX <= area.x + area.width && endY >= area.y && endY <= area.y + area.height;\n                        if (startDentro || endDentro) {\n                            return true;\n                        }\n                        // ?? MÉTODO 2: Verificar intersección línea-rectángulo\n                        const intersecta = lineIntersectsRect(startX, startY, endX, endY, area.x, area.y, area.x + area.width, area.y + area.height);\n                        if (intersecta) {\n                            return true;\n                        }\n                        return false;\n                    } catch (error) {\n                        return false;\n                    }\n                }\n            })[\"CanvasEditor.useMemo[detectarInterseccionLinea]\"];\n        }\n    }[\"CanvasEditor.useMemo[detectarInterseccionLinea]\"], []);\n    // Función auxiliar para verificar intersección línea-rectángulo\n    function lineIntersectsRect(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectBottom) {\n        // Verificar si la línea intersecta con alguno de los 4 lados del rectángulo\n        return lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectTop) || // Top\n        lineIntersectsLine(x1, y1, x2, y2, rectRight, rectTop, rectRight, rectBottom) || // Right\n        lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectBottom, rectRight, rectBottom) || // Bottom\n        lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectLeft, rectBottom) // Left\n        ;\n    }\n    // Función auxiliar para verificar intersección línea-línea\n    function lineIntersectsLine(x1, y1, x2, y2, x3, y3, x4, y4) {\n        const denom = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n        if (Math.abs(denom) < 0.0001) return false;\n        const t = ((x1 - x3) * (y3 - y4) - (y1 - y3) * (x3 - x4)) / denom;\n        const u = -((x1 - x2) * (y1 - y3) - (y1 - y2) * (x1 - x3)) / denom;\n        return t >= 0 && t <= 1 && u >= 0 && u <= 1;\n    }\n    // ?? Ajustar el transformer cuando cambia el texto inline\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!editing.id || !elementRefs.current[editing.id]) return;\n            const node = elementRefs.current[editing.id];\n            const objetoEnEdicion = objetos.find({\n                \"CanvasEditor.useEffect.objetoEnEdicion\": (o)=>o.id === editing.id\n            }[\"CanvasEditor.useEffect.objetoEnEdicion\"]);\n            if (!objetoEnEdicion) return;\n            const nodeClass = node.getClassName?.();\n            const beforeMetrics = obtenerMetricasNodoInline(node);\n            const editingValue = String(editing.value ?? \"\");\n            const shouldKeepCenterPreview = objetoEnEdicion.tipo === \"texto\" && !objetoEnEdicion.__groupAlign && !Number.isFinite(objetoEnEdicion.width) && objetoEnEdicion.__autoWidth !== false;\n            const expectedX = shouldKeepCenterPreview ? calcularXTextoCentrado(objetoEnEdicion, editingValue) : Number.isFinite(objetoEnEdicion.x) ? objetoEnEdicion.x : null;\n            inlineDebugLog(\"preview-effect-start\", {\n                id: editing.id,\n                valueLength: editingValue.length,\n                nodeClass,\n                objX: objetoEnEdicion.x ?? null,\n                objY: objetoEnEdicion.y ?? null,\n                shouldKeepCenterPreview,\n                expectedX,\n                beforeMetrics\n            });\n            // ?? Actualizar el transformer si está presente\n            const transformer = node.getStage()?.findOne('Transformer');\n            if (transformer && transformer.nodes && transformer.nodes().includes(node)) {\n                transformer.forceUpdate(); // Actualiza manualmente el transformer\n                transformer.getLayer()?.batchDraw(); // Redibuja\n                let transformerRect = null;\n                try {\n                    transformerRect = transformer.getClientRect({\n                        skipTransform: false,\n                        skipShadow: true,\n                        skipStroke: true\n                    });\n                } catch  {\n                    transformerRect = null;\n                }\n                inlineDebugLog(\"preview-transformer-updated\", {\n                    id: editing.id,\n                    transformerRect: transformerRect ? {\n                        x: transformerRect.x,\n                        y: transformerRect.y,\n                        width: transformerRect.width,\n                        height: transformerRect.height\n                    } : null\n                });\n            }\n            const afterMetrics = obtenerMetricasNodoInline(node);\n            const afterX = typeof node.x === \"function\" ? node.x() : afterMetrics?.x ?? null;\n            inlineDebugLog(\"preview-props-sync\", {\n                id: editing.id,\n                valueLength: editingValue.length,\n                expectedX,\n                afterX,\n                deltaX: Number.isFinite(afterX) && Number.isFinite(expectedX) ? afterX - expectedX : null,\n                beforeMetrics,\n                afterMetrics\n            });\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        editing.value,\n        objetos,\n        obtenerMetricasNodoInline,\n        calcularXTextoCentrado\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            const pending = inlineCommitDebugRef.current;\n            if (!pending?.id) return;\n            if (editing.id) return;\n            const finalObj = objetos.find({\n                \"CanvasEditor.useEffect.finalObj\": (o)=>o.id === pending.id\n            }[\"CanvasEditor.useEffect.finalObj\"]);\n            const finalNode = elementRefs.current[pending.id];\n            const finalNodeMetrics = obtenerMetricasNodoInline(finalNode);\n            const finalX = Number.isFinite(finalObj?.x) ? finalObj.x : null;\n            const deltaFinalVsExpected = Number.isFinite(finalX) && Number.isFinite(pending.expectedX) ? finalX - pending.expectedX : null;\n            inlineDebugLog(\"finish-post-commit\", {\n                ...pending,\n                finalX,\n                deltaFinalVsExpected,\n                finalNodeMetrics\n            });\n            inlineCommitDebugRef.current = {\n                id: null\n            };\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        editing.id,\n        objetos,\n        obtenerMetricasNodoInline\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            window._elementosSeleccionados = elementosSeleccionados;\n            window._objetosActuales = objetos;\n            window._elementRefs = elementRefs.current;\n            window._seccionesOrdenadas = [\n                ...secciones\n            ].sort({\n                \"CanvasEditor.useEffect\": (a, b)=>a.orden - b.orden\n            }[\"CanvasEditor.useEffect\"]);\n            window._altoCanvas = altoCanvas;\n            window.dispatchEvent(new CustomEvent(\"editor-selection-change\", {\n                detail: {\n                    ids: [\n                        ...elementosSeleccionados\n                    ],\n                    activeSectionId: seccionActivaId || null,\n                    galleryCell: celdaGaleriaActiva || null\n                }\n            }));\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        elementosSeleccionados,\n        objetos,\n        secciones,\n        altoCanvas,\n        seccionActivaId,\n        celdaGaleriaActiva\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!celdaGaleriaActiva) return;\n            const { objId } = celdaGaleriaActiva;\n            const galeriaExiste = objetos.some({\n                \"CanvasEditor.useEffect.galeriaExiste\": (o)=>o.id === objId && o.tipo === \"galeria\"\n            }[\"CanvasEditor.useEffect.galeriaExiste\"]);\n            if (!galeriaExiste) {\n                setCeldaGaleriaActiva(null);\n                return;\n            }\n            if (elementosSeleccionados.length !== 1 || elementosSeleccionados[0] !== objId) {\n                setCeldaGaleriaActiva(null);\n            }\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        celdaGaleriaActiva,\n        elementosSeleccionados,\n        objetos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            window._celdaGaleriaActiva = celdaGaleriaActiva || null;\n            window.dispatchEvent(new CustomEvent(\"editor-gallery-cell-change\", {\n                detail: {\n                    cell: celdaGaleriaActiva || null\n                }\n            }));\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        celdaGaleriaActiva\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            window.dispatchEvent(new CustomEvent(\"seccion-activa\", {\n                detail: {\n                    id: seccionActivaId || null\n                }\n            }));\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        seccionActivaId\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (true) return undefined;\n            window.setHoverIdGlobal = setHoverId;\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    if (window.setHoverIdGlobal === setHoverId) {\n                        delete window.setHoverIdGlobal;\n                    }\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            if (!hoverId) return;\n            const exists = objetos.some({\n                \"CanvasEditor.useEffect.exists\": (o)=>o.id === hoverId\n            }[\"CanvasEditor.useEffect.exists\"]);\n            if (!exists) setHoverId(null);\n        }\n    }[\"CanvasEditor.useEffect\"], [\n        hoverId,\n        objetos\n    ]);\n    // Cleanup del sistema imperativo\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CanvasEditor.useEffect\": ()=>{\n            return ({\n                \"CanvasEditor.useEffect\": ()=>{\n                    imperativeObjects.cleanup();\n                }\n            })[\"CanvasEditor.useEffect\"];\n        }\n    }[\"CanvasEditor.useEffect\"], []);\n    const stageGestures = (0,_editor_mobile_useStageGestures__WEBPACK_IMPORTED_MODULE_43__[\"default\"])({\n        secciones,\n        objetos,\n        elementRefs,\n        dragStartPos,\n        hasDragged,\n        seleccionActiva,\n        inicioSeleccion,\n        areaSeleccion,\n        detectarInterseccionLinea,\n        setElementosSeleccionados,\n        setElementosPreSeleccionados,\n        setSeleccionActiva,\n        setInicioSeleccion,\n        setAreaSeleccion,\n        onSelectSeccion,\n        cerrarMenusFlotantes\n    });\n    const mobileCanvasToolbarOffset = mobileTextToolbarVisible ? mobileBottomTypographyStripVisible ? 88 : 32 : 0;\n    const mobileSectionActionsTop = mobileBottomTypographyStripVisible ? \"calc(172px + env(safe-area-inset-top, 0px))\" : mobileTextToolbarVisible ? \"calc(118px + env(safe-area-inset-top, 0px))\" : \"calc(64px + env(safe-area-inset-top, 0px))\";\n    const scaledCanvasHeightCompensation = isMobile && Number.isFinite(escalaVisual) && Number.isFinite(altoCanvasDinamico) ? (escalaVisual - 1) * altoCanvasDinamico : 0;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: editorOverlayRootRef,\n        className: \"flex justify-center\",\n        style: {\n            // ? Dejamos que el scroll lo maneje el <main> del DashboardLayout (un solo scroll)\n            marginTop: 0,\n            position: \"relative\",\n            overflowX: \"hidden\",\n            // ? UX mobile: permitir scroll vertical natural alrededor del canvas\n            touchAction: \"pan-y\",\n            WebkitOverflowScrolling: \"touch\",\n            // ? espacio para que no “choque” con header / barras\n            paddingTop: 12 + mobileCanvasToolbarOffset,\n            paddingBottom: \"calc(96px + env(safe-area-inset-bottom, 0px))\",\n            transition: \"padding-top 180ms ease\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: contenedorRef,\n                style: {\n                    width: \"100%\",\n                    maxWidth: \"1200px\",\n                    backgroundColor: \"#f5f5f5\",\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    paddingTop: \"20px\",\n                    paddingBottom: \"calc(40px + env(safe-area-inset-bottom, 0px))\"\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        transform: `scale(${escalaVisual})`,\n                        transformOrigin: 'top center',\n                        width: zoom === 0.8 ? \"1220px\" : \"1000px\",\n                        position: \"relative\",\n                        marginBottom: scaledCanvasHeightCompensation\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative\",\n                        style: {\n                            width: zoom === 0.8 ? \"1220px\" : \"1000px\",\n                            display: \"flex\",\n                            justifyContent: \"center\"\n                        },\n                        children: [\n                            seccionActivaId && seccionesOrdenadas.map((seccion, index)=>{\n                                if (seccion.id !== seccionActivaId) return null;\n                                const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                const esPrimera = index === 0;\n                                const esUltima = index === seccionesOrdenadas.length - 1;\n                                const estaAnimando = seccionesAnimando.includes(seccion.id);\n                                const sectionButtonBase = \"px-3 py-2 rounded-xl text-xs font-semibold transition-all duration-200 border focus:outline-none focus-visible:ring-2 focus-visible:ring-[#dccaf7]\";\n                                const sectionButtonDisabled = \"cursor-not-allowed border-gray-200 bg-gray-100 text-gray-400 shadow-none\";\n                                const sectionButtonPrimary = \"border-[#ccb6ef] bg-gradient-to-r from-[#8a57cf] via-[#773dbe] to-[#6737b3] text-white shadow-[0_10px_22px_rgba(119,61,190,0.30)] hover:-translate-y-[1px] hover:from-[#7f4fc5] hover:via-[#6f3bbc] hover:to-[#5f31a8] hover:shadow-[0_14px_28px_rgba(119,61,190,0.38)]\";\n                                const sectionButtonNeutral = \"border-[#e4d7f6] bg-white/95 text-[#5f3596] shadow-[0_6px_16px_rgba(15,23,42,0.06)] hover:-translate-y-[1px] hover:border-[#cdb9ee] hover:bg-[#faf6ff] hover:shadow-[0_12px_24px_rgba(119,61,190,0.16)]\";\n                                const sectionButtonSuccess = \"border-emerald-300 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white shadow-[0_10px_22px_rgba(5,150,105,0.28)] hover:-translate-y-[1px] hover:from-emerald-600 hover:to-emerald-700 hover:shadow-[0_14px_28px_rgba(5,150,105,0.36)]\";\n                                const sectionButtonDanger = \"border-rose-300 bg-gradient-to-r from-rose-500 to-red-600 text-white shadow-[0_10px_22px_rgba(225,29,72,0.28)] hover:-translate-y-[1px] hover:from-rose-600 hover:to-red-700 hover:shadow-[0_14px_28px_rgba(225,29,72,0.36)]\";\n                                const actionButtons = /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>(0,_utils_editorSecciones__WEBPACK_IMPORTED_MODULE_21__.moverSeccion)({\n                                                    seccionId: seccion.id,\n                                                    direccion: \"subir\",\n                                                    secciones,\n                                                    slug,\n                                                    setSecciones,\n                                                    setSeccionesAnimando\n                                                }),\n                                            disabled: esPrimera || estaAnimando,\n                                            className: `${sectionButtonBase} ${esPrimera || estaAnimando ? sectionButtonDisabled : sectionButtonPrimary} ${estaAnimando ? \"animate-pulse\" : \"\"}`,\n                                            title: esPrimera ? \"Ya es la primera sección\" : \"Subir sección\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"inline-flex items-center gap-1.5\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.MoveUp, {\n                                                        className: \"w-3.5 h-3.5\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2867,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    \"Subir secci\\xf3n\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 2866,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2848,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>(0,_utils_editorSecciones__WEBPACK_IMPORTED_MODULE_21__.moverSeccion)({\n                                                    seccionId: seccion.id,\n                                                    direccion: \"bajar\",\n                                                    secciones,\n                                                    slug,\n                                                    setSecciones,\n                                                    setSeccionesAnimando\n                                                }),\n                                            disabled: esUltima || estaAnimando,\n                                            className: `${sectionButtonBase} ${esUltima || estaAnimando ? sectionButtonDisabled : sectionButtonPrimary} ${estaAnimando ? \"animate-pulse\" : \"\"}`,\n                                            title: esUltima ? \"Ya es la última sección\" : \"Bajar sección\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"inline-flex items-center gap-1.5\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.MoveDown, {\n                                                        className: \"w-3.5 h-3.5\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2892,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    \"Bajar secci\\xf3n\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 2891,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2873,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleCrearSeccion,\n                                            disabled: estaAnimando,\n                                            className: `${sectionButtonBase} ${estaAnimando ? `${sectionButtonDisabled} animate-pulse` : sectionButtonPrimary}`,\n                                            title: \"A\\xf1adir una nueva secci\\xf3n debajo\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"inline-flex items-center gap-1.5\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.PlusCircle, {\n                                                        className: \"w-3.5 h-3.5\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2908,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    \"A\\xf1adir secci\\xf3n\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 2907,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2898,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `${sectionButtonBase} ${sectionButtonNeutral} flex items-center justify-between gap-2`,\n                                            title: \"Cambiar color de fondo de esta secci\\xf3n\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                    className: \"inline-flex items-center gap-1.5\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"h-3.5 w-3.5 rounded border border-white/80 shadow-sm\",\n                                                            style: {\n                                                                backgroundColor: seccion.fondo || \"#ffffff\"\n                                                            }\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2918,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        \"Fondo secci\\xf3n\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 2917,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SelectorColorSeccion__WEBPACK_IMPORTED_MODULE_31__[\"default\"], {\n                                                    seccion: seccion,\n                                                    disabled: estaAnimando || isDeletingSection,\n                                                    onChange: (id, color)=>cambiarColorFondoSeccion(id, color)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 2924,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 2913,\n                                            columnNumber: 19\n                                        }, this),\n                                        (()=>{\n                                            const modoSeccion = normalizarAltoModo(seccion.altoModo);\n                                            const esPantalla = modoSeccion === \"pantalla\";\n                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex flex-wrap items-center gap-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>togglePantallaCompletaSeccion(seccion.id),\n                                                        className: `${sectionButtonBase} ${esPantalla ? sectionButtonPrimary : sectionButtonNeutral}`,\n                                                        title: \"Hace que esta secci\\xf3n sea de pantalla completa (100vh) al publicar\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"inline-flex items-center gap-1.5\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.Monitor, {\n                                                                    className: \"w-3.5 h-3.5\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                    lineNumber: 2947,\n                                                                    columnNumber: 29\n                                                                }, this),\n                                                                esPantalla ? \"Pantalla completa: ON\" : \"Pantalla completa: OFF\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2946,\n                                                            columnNumber: 27\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2938,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    seccion.fondoTipo === \"imagen\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>(0,_utils_accionesFondo__WEBPACK_IMPORTED_MODULE_20__.desanclarImagenDeFondo)({\n                                                                seccionId: seccion.id,\n                                                                secciones,\n                                                                objetos,\n                                                                setSecciones,\n                                                                setObjetos,\n                                                                setElementosSeleccionados\n                                                            }),\n                                                        className: `${sectionButtonBase} ${sectionButtonNeutral}`,\n                                                        title: \"Desanclar imagen de fondo\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"inline-flex items-center gap-1.5\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.Unlink2, {\n                                                                    className: \"w-3.5 h-3.5\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                    lineNumber: 2969,\n                                                                    columnNumber: 31\n                                                                }, this),\n                                                                \"Desanclar fondo\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 2968,\n                                                            columnNumber: 29\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2954,\n                                                        columnNumber: 27\n                                                    }, this),\n                                                    seccion.fondoTipo === \"imagen\" && isMobile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>{\n                                                            setMobileBackgroundEditSectionId((prev)=>prev === seccion.id ? null : seccion.id);\n                                                        },\n                                                        className: `${sectionButtonBase} ${mobileBackgroundEditSectionId === seccion.id ? \"border-indigo-300 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-[0_10px_22px_rgba(79,70,229,0.28)] hover:-translate-y-[1px] hover:from-indigo-600 hover:to-indigo-700 hover:shadow-[0_14px_28px_rgba(79,70,229,0.36)]\" : sectionButtonNeutral}`,\n                                                        title: \"Modo mover fondo en mobile\",\n                                                        children: mobileBackgroundEditSectionId === seccion.id ? \"Mover fondo: ON\" : \"Mover fondo\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 2976,\n                                                        columnNumber: 27\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 2936,\n                                                columnNumber: 23\n                                            }, this);\n                                        })(),\n                                        !loadingClaims && esAdmin && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>(0,_utils_plantillas__WEBPACK_IMPORTED_MODULE_23__.guardarSeccionComoPlantilla)({\n                                                    seccionId: seccion.id,\n                                                    secciones,\n                                                    objetos,\n                                                    refrescarPlantillasDeSeccion\n                                                }),\n                                            disabled: estaAnimando,\n                                            className: `${sectionButtonBase} ${estaAnimando ? sectionButtonDisabled : sectionButtonSuccess} ${estaAnimando ? \"animate-pulse\" : \"\"}`,\n                                            title: \"Guardar esta secci\\xf3n como plantilla\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"inline-flex items-center gap-1.5\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.Layers, {\n                                                        className: \"w-3.5 h-3.5\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 3017,\n                                                        columnNumber: 25\n                                                    }, this),\n                                                    \"Plantilla\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 3016,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 3000,\n                                            columnNumber: 21\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>{\n                                                if (isMobile) {\n                                                    setMobileSectionActionsOpen(false);\n                                                }\n                                                abrirModalBorrarSeccion(seccion.id);\n                                            },\n                                            disabled: estaAnimando || isDeletingSection,\n                                            className: `${sectionButtonBase} ${estaAnimando || isDeletingSection ? sectionButtonDisabled : sectionButtonDanger} ${estaAnimando || isDeletingSection ? \"animate-pulse\" : \"\"}`,\n                                            title: \"Borrar esta secci\\xf3n y todos sus elementos\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"inline-flex items-center gap-1.5\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.Trash2, {\n                                                        className: \"w-3.5 h-3.5\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 3039,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    \"Borrar secci\\xf3n\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 3038,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 3024,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true);\n                                if (isMobile) {\n                                    if (typeof document === \"undefined\") return null;\n                                    return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"fixed z-[90] flex flex-col items-end gap-2\",\n                                        style: {\n                                            top: mobileSectionActionsTop,\n                                            right: \"max(8px, env(safe-area-inset-right, 0px))\"\n                                        },\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                type: \"button\",\n                                                onClick: ()=>setMobileSectionActionsOpen((prev)=>!prev),\n                                                className: \"flex h-9 w-9 items-center justify-center rounded-full border border-[#ccb6ef] bg-gradient-to-r from-[#8a57cf] via-[#773dbe] to-[#6737b3] text-white shadow-[0_10px_22px_rgba(119,61,190,0.35)] transition-all duration-200 hover:-translate-y-[1px] hover:from-[#7f4fc5] hover:via-[#6f3bbc] hover:to-[#5f31a8] hover:shadow-[0_14px_28px_rgba(119,61,190,0.42)]\",\n                                                title: \"Acciones de secci\\xf3n\",\n                                                children: mobileSectionActionsOpen ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.ChevronUp, {\n                                                    className: \"w-4 h-4\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 3063,\n                                                    columnNumber: 25\n                                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.ChevronDown, {\n                                                    className: \"w-4 h-4\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 3065,\n                                                    columnNumber: 25\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 3056,\n                                                columnNumber: 21\n                                            }, this),\n                                            mobileSectionActionsOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"w-[min(84vw,230px)] max-h-[62vh] overflow-y-auto rounded-xl border border-purple-200 bg-white/95 p-2 shadow-2xl backdrop-blur\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex flex-col gap-2\",\n                                                    children: actionButtons\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 3071,\n                                                    columnNumber: 25\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                lineNumber: 3070,\n                                                columnNumber: 23\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                        lineNumber: 3049,\n                                        columnNumber: 19\n                                    }, this), document.body, `orden-mobile-${seccion.id}`);\n                                }\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute flex flex-col gap-2\",\n                                    style: {\n                                        top: offsetY + 20,\n                                        right: -150,\n                                        zIndex: 25,\n                                        maxWidth: 260\n                                    },\n                                    children: actionButtons\n                                }, `orden-${seccion.id}`, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                    lineNumber: 3081,\n                                    columnNumber: 17\n                                }, this);\n                            }),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                style: {\n                                    position: \"relative\",\n                                    width: 800,\n                                    height: altoCanvasDinamico\n                                },\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Stage, {\n                                    ref: stageRef,\n                                    width: 800,\n                                    height: altoCanvasDinamico,\n                                    perfectDrawEnabled: false,\n                                    listening: true,\n                                    imageSmoothingEnabled: false,\n                                    preventDefault: false,\n                                    hitGraphEnabled: true,\n                                    style: {\n                                        background: \"white\",\n                                        overflow: \"visible\",\n                                        position: \"relative\",\n                                        boxShadow: \"0 4px 20px rgba(0,0,0,0.5)\"\n                                    },\n                                    onMouseDown: stageGestures.onMouseDown,\n                                    onTouchStart: stageGestures.onTouchStart,\n                                    onTouchMove: stageGestures.onTouchMove,\n                                    onTouchEnd: stageGestures.onTouchEnd,\n                                    onMouseMove: stageGestures.onMouseMove,\n                                    onMouseUp: stageGestures.onMouseUp,\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_45__[\"default\"], {\n                                            children: [\n                                                seccionesOrdenadas.flatMap((seccion, index)=>{\n                                                    const alturaPx = seccion.altura;\n                                                    const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                    const esActiva = seccion.id === seccionActivaId;\n                                                    const estaAnimando = seccionesAnimando.includes(seccion.id);\n                                                    const elementos = [\n                                                        // Fondo de sección - puede ser color o imagen\n                                                        seccion.fondoTipo === \"imagen\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_editor_FondoSeccion__WEBPACK_IMPORTED_MODULE_25__[\"default\"], {\n                                                            seccion: seccion,\n                                                            offsetY: offsetY,\n                                                            alturaPx: alturaPx,\n                                                            onSelect: ()=>onSelectSeccion(seccion.id),\n                                                            onUpdateFondoOffset: actualizarOffsetFondo,\n                                                            isMobile: isMobile,\n                                                            mobileBackgroundEditEnabled: mobileBackgroundEditSectionId === seccion.id,\n                                                            onBackgroundImageStatusChange: handleBackgroundImageStatusChange\n                                                        }, `fondo-${seccion.id}`, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 3145,\n                                                            columnNumber: 25\n                                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                            id: seccion.id,\n                                                            x: 0,\n                                                            y: offsetY,\n                                                            width: 800,\n                                                            height: alturaPx,\n                                                            fill: seccion.fondo || \"#ffffff\",\n                                                            stroke: \"transparent\",\n                                                            strokeWidth: 0,\n                                                            listening: true,\n                                                            preventDefault: false,\n                                                            onClick: ()=>onSelectSeccion(seccion.id),\n                                                            onTap: ()=>onSelectSeccion(seccion.id)\n                                                        }, `seccion-${seccion.id}`, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 3157,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    ];\n                                                    return elementos;\n                                                }),\n                                                seccionActivaId && seccionesOrdenadas.map((seccion, index)=>{\n                                                    if (seccion.id !== seccionActivaId) return null;\n                                                    const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                    const controlY = offsetY + seccion.altura - 5; // 5px antes del final\n                                                    const modoSeccion = normalizarAltoModo(seccion.altoModo);\n                                                    const permiteResizeAltura = modoSeccion !== \"pantalla\";\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                        name: \"ui\",\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Line, {\n                                                                name: \"ui\",\n                                                                points: [\n                                                                    50,\n                                                                    controlY,\n                                                                    750,\n                                                                    controlY\n                                                                ],\n                                                                stroke: \"#773dbe\",\n                                                                strokeWidth: 2,\n                                                                dash: [\n                                                                    5,\n                                                                    5\n                                                                ],\n                                                                listening: false\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 3194,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                                x: 400,\n                                                                y: controlY,\n                                                                listening: permiteResizeAltura,\n                                                                opacity: permiteResizeAltura ? 1 : 0.25,\n                                                                onPointerDown: permiteResizeAltura ? (e)=>iniciarControlAltura(e, seccion.id) : undefined,\n                                                                onMouseDown: permiteResizeAltura && !supportsPointerEvents ? (e)=>iniciarControlAltura(e, seccion.id) : undefined,\n                                                                onTouchStart: permiteResizeAltura && !supportsPointerEvents ? (e)=>iniciarControlAltura(e, seccion.id) : undefined,\n                                                                onMouseEnter: ()=>{\n                                                                    if (!controlandoAltura && permiteResizeAltura) setGlobalCursor(\"ns-resize\", stageRef);\n                                                                },\n                                                                onMouseLeave: ()=>{\n                                                                    if (!controlandoAltura && permiteResizeAltura) clearGlobalCursor(stageRef);\n                                                                },\n                                                                draggable: false,\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: -45,\n                                                                        y: -22,\n                                                                        width: 90,\n                                                                        height: 44,\n                                                                        fill: \"transparent\",\n                                                                        listening: true\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3231,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: -25,\n                                                                        y: -6,\n                                                                        width: 50,\n                                                                        height: 12,\n                                                                        fill: controlandoAltura === seccion.id ? \"#773dbe\" : \"rgba(119, 61, 190, 0.9)\",\n                                                                        cornerRadius: 6,\n                                                                        shadowColor: \"rgba(0,0,0,0.3)\",\n                                                                        shadowBlur: controlandoAltura === seccion.id ? 8 : 6,\n                                                                        shadowOffset: {\n                                                                            x: 0,\n                                                                            y: controlandoAltura === seccion.id ? 4 : 3\n                                                                        },\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3241,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    controlandoAltura === seccion.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: -30,\n                                                                        y: -8,\n                                                                        width: 60,\n                                                                        height: 16,\n                                                                        fill: \"transparent\",\n                                                                        stroke: \"#773dbe\",\n                                                                        strokeWidth: 2,\n                                                                        cornerRadius: 8,\n                                                                        opacity: 0.6,\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3256,\n                                                                        columnNumber: 29\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                                                                        x: -6,\n                                                                        y: -3,\n                                                                        text: \"??\",\n                                                                        fontSize: 10,\n                                                                        fill: \"white\",\n                                                                        fontFamily: \"Arial\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3271,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: -15,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3282,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: -10,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3283,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: 10,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3284,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Circle, {\n                                                                        x: 15,\n                                                                        y: 0,\n                                                                        radius: 1.5,\n                                                                        fill: \"rgba(255,255,255,0.8)\",\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3285,\n                                                                        columnNumber: 27\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 3204,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                x: 755,\n                                                                y: controlY - 10,\n                                                                width: 40,\n                                                                height: 20,\n                                                                fill: \"rgba(119, 61, 190, 0.1)\",\n                                                                stroke: \"rgba(119, 61, 190, 0.3)\",\n                                                                strokeWidth: 1,\n                                                                cornerRadius: 4,\n                                                                listening: false\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 3290,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Text, {\n                                                                x: 760,\n                                                                y: controlY - 6,\n                                                                text: `${Math.round(seccion.altura)}px`,\n                                                                fontSize: 11,\n                                                                fill: \"#773dbe\",\n                                                                fontFamily: \"Arial\",\n                                                                fontWeight: \"bold\",\n                                                                listening: false\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 3303,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        ]\n                                                    }, `control-altura-${seccion.id}`, true, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 3192,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                }),\n                                                controlandoAltura && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                    name: \"ui\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                            x: 0,\n                                                            y: 0,\n                                                            width: 800,\n                                                            height: altoCanvasDinamico,\n                                                            fill: \"rgba(119, 61, 190, 0.05)\",\n                                                            listening: false\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 3321,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        seccionesOrdenadas.map((seccion, index)=>{\n                                                            const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                            const modoSeccion = normalizarAltoModo(seccion.altoModo);\n                                                            const permiteResizeAltura = modoSeccion !== \"pantalla\";\n                                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Group, {\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: 0,\n                                                                        y: offsetY,\n                                                                        width: 800,\n                                                                        height: seccion.altura,\n                                                                        fill: seccion.fondo || \"transparent\",\n                                                                        onClick: ()=>onSelectSeccion(seccion.id)\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3340,\n                                                                        columnNumber: 29\n                                                                    }, this),\n                                                                    seccion.id === controlandoAltura && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                                        x: 0,\n                                                                        y: offsetY,\n                                                                        width: 800,\n                                                                        height: seccion.altura,\n                                                                        fill: \"transparent\",\n                                                                        stroke: \"#773dbe\",\n                                                                        strokeWidth: 3,\n                                                                        dash: [\n                                                                            8,\n                                                                            4\n                                                                        ],\n                                                                        listening: false\n                                                                    }, void 0, false, {\n                                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                        lineNumber: 3351,\n                                                                        columnNumber: 31\n                                                                    }, this)\n                                                                ]\n                                                            }, seccion.id, true, {\n                                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                                lineNumber: 3338,\n                                                                columnNumber: 27\n                                                            }, this);\n                                                        })\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 3319,\n                                                    columnNumber: 21\n                                                }, this),\n                                                objetos.map((obj, i)=>{\n                                                    // ?? Determinar si está en modo edición\n                                                    const isInEditMode = editing.id === obj.id && elementosSeleccionados[0] === obj.id;\n                                                    // ??? Caso especial: la galería la renderizamos acá (no usa ElementoCanvas)\n                                                    if (obj.tipo === \"galeria\") {\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_GaleriaKonva__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n                                                            obj: obj,\n                                                            registerRef: registerRef,\n                                                            onHover: setHoverId,\n                                                            isSelected: elementosSeleccionados.includes(obj.id),\n                                                            celdaGaleriaActiva: celdaGaleriaActiva,\n                                                            onPickCell: (info)=>setCeldaGaleriaActiva(info),\n                                                            seccionesOrdenadas: seccionesOrdenadas,\n                                                            altoCanvas: altoCanvas,\n                                                            onSelect: (id, e)=>{\n                                                                e?.evt && (e.evt.cancelBubble = true);\n                                                                setElementosSeleccionados([\n                                                                    id\n                                                                ]);\n                                                            },\n                                                            onDragMovePersonalizado: (pos, id)=>{\n                                                                window._isDragging = true;\n                                                                mostrarGuias(pos, id, objetos, elementRefs);\n                                                                requestAnimationFrame(()=>{\n                                                                    if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                        actualizarPosicionBotonOpciones();\n                                                                    }\n                                                                });\n                                                            },\n                                                            onDragStartPersonalizado: (dragId = obj.id)=>{\n                                                                if (!elementosSeleccionados.includes(dragId)) {\n                                                                    setElementosSeleccionados([\n                                                                        dragId\n                                                                    ]);\n                                                                }\n                                                                setHoverId(null);\n                                                                setIsDragging(true);\n                                                            },\n                                                            onDragEndPersonalizado: ()=>{\n                                                                setIsDragging(false);\n                                                                limpiarGuias();\n                                                                if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                    actualizarPosicionBotonOpciones();\n                                                                }\n                                                            },\n                                                            onChange: (id, nuevo)=>{\n                                                                setObjetos((prev)=>{\n                                                                    const i = prev.findIndex((o)=>o.id === id);\n                                                                    if (i === -1) return prev;\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    updated[i] = {\n                                                                        ...updated[i],\n                                                                        ...nuevo\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                            }\n                                                        }, obj.id, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 3380,\n                                                            columnNumber: 25\n                                                        }, this);\n                                                    }\n                                                    if (obj.tipo === \"countdown\") {\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_countdown_CountdownKonva__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n                                                            obj: obj,\n                                                            registerRef: registerRef,\n                                                            onHover: setHoverId,\n                                                            isSelected: elementosSeleccionados.includes(obj.id),\n                                                            seccionesOrdenadas: seccionesOrdenadas,\n                                                            altoCanvas: altoCanvas,\n                                                            // ? selección\n                                                            onSelect: (id, e)=>{\n                                                                e?.evt && (e.evt.cancelBubble = true);\n                                                                setElementosSeleccionados([\n                                                                    id\n                                                                ]);\n                                                            },\n                                                            // ? PREVIEW liviano (no tocar estado del objeto para que no haya lag)\n                                                            onDragStartPersonalizado: (dragId = obj.id)=>{\n                                                                if (!elementosSeleccionados.includes(dragId)) {\n                                                                    setElementosSeleccionados([\n                                                                        dragId\n                                                                    ]);\n                                                                }\n                                                                setHoverId(null);\n                                                                setIsDragging(true);\n                                                            },\n                                                            onDragMovePersonalizado: (pos, id)=>{\n                                                                mostrarGuias(pos, id, objetos, elementRefs);\n                                                                requestAnimationFrame(()=>{\n                                                                    if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                        actualizarPosicionBotonOpciones();\n                                                                    }\n                                                                });\n                                                            },\n                                                            // ? FIN de drag: limpiar guías / UI auxiliar\n                                                            onDragEndPersonalizado: ()=>{\n                                                                setIsDragging(false);\n                                                                limpiarGuias();\n                                                                if (typeof actualizarPosicionBotonOpciones === \"function\") {\n                                                                    actualizarPosicionBotonOpciones();\n                                                                }\n                                                            },\n                                                            // ? refs para el motor de drag\n                                                            dragStartPos: dragStartPos,\n                                                            hasDragged: hasDragged,\n                                                            // ? ¡Clave! Al finalizar, tratamos x/y absolutas como en ElementoCanvas:\n                                                            onChange: (id, cambios)=>{\n                                                                setObjetos((prev)=>{\n                                                                    const i = prev.findIndex((o)=>o.id === id);\n                                                                    if (i === -1) return prev;\n                                                                    const objOriginal = prev[i];\n                                                                    // ?? Si no es final de drag, mergeamos sin más (no tocar coords)\n                                                                    if (!cambios.finalizoDrag) {\n                                                                        const updated = [\n                                                                            ...prev\n                                                                        ];\n                                                                        updated[i] = {\n                                                                            ...updated[i],\n                                                                            ...cambios\n                                                                        };\n                                                                        return updated;\n                                                                    }\n                                                                    // ?? Final de drag: 'cambios.y' viene ABSOLUTA (Stage coords)\n                                                                    const { nuevaSeccion, coordenadasAjustadas } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.determinarNuevaSeccion)(cambios.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                    let next = {\n                                                                        ...cambios\n                                                                    };\n                                                                    delete next.finalizoDrag;\n                                                                    if (nuevaSeccion) {\n                                                                        next = {\n                                                                            ...next,\n                                                                            ...coordenadasAjustadas,\n                                                                            seccionId: nuevaSeccion\n                                                                        };\n                                                                    } else {\n                                                                        // convertir y absoluta ? y relativa a la sección actual\n                                                                        next.y = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.convertirAbsARel)(cambios.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                    }\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    updated[i] = {\n                                                                        ...updated[i],\n                                                                        ...next\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                            }\n                                                        }, obj.id, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 3434,\n                                                            columnNumber: 25\n                                                        }, this);\n                                                    }\n                                                    const objPreview = editing.id === obj.id && obj.tipo === \"texto\" ? (()=>{\n                                                        const textoPreview = String(editing.value ?? \"\");\n                                                        const previewObj = {\n                                                            ...obj,\n                                                            texto: textoPreview\n                                                        };\n                                                        const shouldKeepCenterPreview = !obj.__groupAlign && !Number.isFinite(obj.width) && obj.__autoWidth !== false;\n                                                        if (shouldKeepCenterPreview) {\n                                                            const previewX = calcularXTextoCentrado(obj, textoPreview);\n                                                            if (Number.isFinite(previewX)) {\n                                                                previewObj.x = previewX;\n                                                            }\n                                                        }\n                                                        return previewObj;\n                                                    })() : obj;\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ElementoCanvas__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                        obj: {\n                                                            ...objPreview,\n                                                            // ?? yLocal: en sección pantalla usamos yNorm * 500\n                                                            // fallback legacy: si no hay yNorm, usamos obj.y\n                                                            y: (()=>{\n                                                                const idxSec = seccionesOrdenadas.findIndex((s)=>s.id === objPreview.seccionId);\n                                                                const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, idxSec);\n                                                                const yLocal = esSeccionPantallaById(objPreview.seccionId) ? Number.isFinite(objPreview.yNorm) ? objPreview.yNorm * ALTURA_PANTALLA_EDITOR : objPreview.y : objPreview.y;\n                                                                return yLocal + offsetY;\n                                                            })()\n                                                        },\n                                                        anchoCanvas: 800,\n                                                        isSelected: !isInEditMode && elementosSeleccionados.includes(obj.id),\n                                                        selectionCount: elementosSeleccionados.length,\n                                                        preSeleccionado: !isInEditMode && elementosPreSeleccionados.includes(obj.id),\n                                                        isInEditMode: isInEditMode,\n                                                        onHover: isInEditMode ? null : setHoverId,\n                                                        registerRef: registerRef,\n                                                        onStartTextEdit: isInEditMode ? null : (id, texto)=>{\n                                                            const node = elementRefs.current[id];\n                                                            const nodeMetrics = obtenerMetricasNodoInline(node);\n                                                            const previousCurrentEditingId = window._currentEditingId ?? null;\n                                                            setInlineOverlayMountedId(null);\n                                                            captureInlineSnapshot(\"enter: pre-start\", {\n                                                                id,\n                                                                previousId: previousCurrentEditingId,\n                                                                textoLength: String(texto ?? \"\").length\n                                                            });\n                                                            window._currentEditingId = id;\n                                                            inlineEditPreviewRef.current = {\n                                                                id: null,\n                                                                centerX: null\n                                                            };\n                                                            inlineDebugLog(\"start-inline-edit\", {\n                                                                id,\n                                                                textoLength: String(texto ?? \"\").length,\n                                                                objectX: obj?.x ?? null,\n                                                                objectY: obj?.y ?? null,\n                                                                previousCurrentEditingId,\n                                                                nextCurrentEditingId: window._currentEditingId,\n                                                                nodeMetrics\n                                                            });\n                                                            startEdit(id, texto);\n                                                            node?.draggable(false);\n                                                            node?.getLayer?.()?.batchDraw?.();\n                                                            captureInlineSnapshot(\"enter: after-start-sync\", {\n                                                                id,\n                                                                previousId: previousCurrentEditingId,\n                                                                nextCurrentEditingId: window._currentEditingId ?? null\n                                                            });\n                                                        },\n                                                        editingId: editing.id,\n                                                        inlineOverlayMountedId: inlineOverlayMountedId,\n                                                        inlineVisibilityMode: inlineDebugAB.visibilitySource,\n                                                        finishInlineEdit: finishEdit,\n                                                        onSelect: isInEditMode ? null : (id, obj, e)=>{\n                                                            if (obj.tipo === \"rsvp-boton\") {\n                                                                return;\n                                                            }\n                                                            if (editing.id && editing.id !== id) {\n                                                                finishEdit();\n                                                            }\n                                                            e?.evt && (e.evt.cancelBubble = true);\n                                                            const esShift = e?.evt?.shiftKey;\n                                                            setElementosSeleccionados((prev)=>{\n                                                                if (esShift) {\n                                                                    if (prev.includes(id)) {\n                                                                        return prev.filter((x)=>x !== id);\n                                                                    } else {\n                                                                        return [\n                                                                            ...prev,\n                                                                            id\n                                                                        ];\n                                                                    }\n                                                                } else {\n                                                                    return [\n                                                                        id\n                                                                    ];\n                                                                }\n                                                            });\n                                                        },\n                                                        onChange: (id, nuevo)=>{\n                                                            // ?? NUEVO: Manejar preview inmediato de drag grupal\n                                                            if (nuevo.isDragPreview) {\n                                                                setObjetos((prev)=>{\n                                                                    const index = prev.findIndex((o)=>o.id === id);\n                                                                    if (index === -1) return prev;\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    const { isDragPreview, skipHistorial, ...cleanNuevo } = nuevo;\n                                                                    updated[index] = {\n                                                                        ...updated[index],\n                                                                        ...cleanNuevo\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                                return;\n                                                            }\n                                                            // ?? MANEJAR SOLO batch update final de drag grupal\n                                                            if (nuevo.isBatchUpdateFinal && id === 'BATCH_UPDATE_GROUP_FINAL') {\n                                                                const { elementos, dragInicial, deltaX, deltaY } = nuevo;\n                                                                setObjetos((prev)=>{\n                                                                    return prev.map((objeto)=>{\n                                                                        if (elementos.includes(objeto.id)) {\n                                                                            if (dragInicial && dragInicial[objeto.id]) {\n                                                                                const posInicial = dragInicial[objeto.id];\n                                                                                return {\n                                                                                    ...objeto,\n                                                                                    x: posInicial.x + deltaX,\n                                                                                    y: posInicial.y + deltaY\n                                                                                };\n                                                                            }\n                                                                        }\n                                                                        return objeto;\n                                                                    });\n                                                                });\n                                                                return;\n                                                            }\n                                                            // ?? NO procesar si viene del Transform\n                                                            if (nuevo.fromTransform) {\n                                                                return;\n                                                            }\n                                                            const objOriginal = objetos.find((o)=>o.id === id);\n                                                            if (!objOriginal) return;\n                                                            // ?? Para drag final, procesar inmediatamente\n                                                            if (nuevo.finalizoDrag) {\n                                                                const { nuevaSeccion, coordenadasAjustadas } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.determinarNuevaSeccion)(nuevo.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                let coordenadasFinales = {\n                                                                    ...nuevo\n                                                                };\n                                                                delete coordenadasFinales.finalizoDrag;\n                                                                if (nuevaSeccion) {\n                                                                    coordenadasFinales = {\n                                                                        ...coordenadasFinales,\n                                                                        ...coordenadasAjustadas,\n                                                                        seccionId: nuevaSeccion\n                                                                    };\n                                                                } else {\n                                                                    coordenadasFinales.y = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.convertirAbsARel)(nuevo.y, objOriginal.seccionId, seccionesOrdenadas);\n                                                                }\n                                                                // 1) Determinar sección final\n                                                                const seccionFinalId = coordenadasFinales.seccionId || objOriginal.seccionId;\n                                                                // 2) Obtener yRelPx (y relativa dentro de la sección en px)\n                                                                let yRelPx;\n                                                                if (nuevaSeccion) {\n                                                                    // coordenadasAjustadas normalmente ya trae y relativa\n                                                                    yRelPx = Number.isFinite(coordenadasFinales.y) ? coordenadasFinales.y : 0;\n                                                                } else {\n                                                                    // si no cambió de sección, convertimos desde y absoluta\n                                                                    yRelPx = Number.isFinite(coordenadasFinales.y) ? coordenadasFinales.y : 0;\n                                                                }\n                                                                // 3) Aplicar política pantalla: guardar yNorm\n                                                                if (esSeccionPantallaById(seccionFinalId)) {\n                                                                    const yNorm = Math.max(0, Math.min(1, yRelPx / ALTURA_PANTALLA_EDITOR));\n                                                                    coordenadasFinales.yNorm = yNorm;\n                                                                    delete coordenadasFinales.y; // ? clave: evitamos mezclar sistemas\n                                                                } else {\n                                                                    // fijo: guardar y en px\n                                                                    coordenadasFinales.y = yRelPx;\n                                                                    delete coordenadasFinales.yNorm;\n                                                                }\n                                                                // Actualizar inmediatamente\n                                                                setObjetos((prev)=>{\n                                                                    const index = prev.findIndex((o)=>o.id === id);\n                                                                    if (index === -1) return prev;\n                                                                    const updated = [\n                                                                        ...prev\n                                                                    ];\n                                                                    updated[index] = {\n                                                                        ...updated[index],\n                                                                        ...coordenadasFinales\n                                                                    };\n                                                                    return updated;\n                                                                });\n                                                                return;\n                                                            }\n                                                            // ?? Para otros cambios (transform, etc.)\n                                                            const hayDiferencias = Object.keys(nuevo).some((key)=>{\n                                                                const valorAnterior = objOriginal[key];\n                                                                const valorNuevo = nuevo[key];\n                                                                if (typeof valorAnterior === 'number' && typeof valorNuevo === 'number') {\n                                                                    return Math.abs(valorAnterior - valorNuevo) > 0.01;\n                                                                }\n                                                                return valorAnterior !== valorNuevo;\n                                                            });\n                                                            if (!hayDiferencias) return;\n                                                            const seccionId = nuevo.seccionId || objOriginal.seccionId;\n                                                            const seccion = seccionesOrdenadas.find((s)=>s.id === seccionId);\n                                                            if (!seccion) return;\n                                                            setObjetos((prev)=>{\n                                                                const index = prev.findIndex((o)=>o.id === id);\n                                                                if (index === -1) return prev;\n                                                                const updated = [\n                                                                    ...prev\n                                                                ];\n                                                                updated[index] = {\n                                                                    ...updated[index],\n                                                                    ...nuevo\n                                                                };\n                                                                return updated;\n                                                            });\n                                                        },\n                                                        onDragStartPersonalizado: isInEditMode ? null : (dragId = obj.id, e)=>{\n                                                            const seleccionActual = Array.isArray(window._elementosSeleccionados) ? window._elementosSeleccionados : elementosSeleccionados;\n                                                            if (!seleccionActual.includes(dragId)) {\n                                                                setElementosSeleccionados([\n                                                                    dragId\n                                                                ]);\n                                                            }\n                                                            (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)(()=>{\n                                                                setHoverId(null);\n                                                                setElementosPreSeleccionados([]);\n                                                                setIsDragging(true);\n                                                            });\n                                                        },\n                                                        onDragEndPersonalizado: isInEditMode ? null : ()=>{\n                                                            setIsDragging(false);\n                                                            configurarDragEnd([]);\n                                                        },\n                                                        onDragMovePersonalizado: isInEditMode ? null : (pos, elementId)=>{\n                                                            mostrarGuias(pos, elementId, objetos, elementRefs);\n                                                            if (elementosSeleccionados.includes(elementId)) {\n                                                                requestAnimationFrame(()=>{\n                                                                    if (typeof actualizarPosicionBotonOpciones === 'function') {\n                                                                        actualizarPosicionBotonOpciones();\n                                                                    }\n                                                                });\n                                                            }\n                                                        },\n                                                        dragStartPos: dragStartPos,\n                                                        hasDragged: hasDragged\n                                                    }, obj.id, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 3546,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                }),\n                                                seleccionActiva && areaSeleccion && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                    name: \"ui\",\n                                                    x: areaSeleccion.x,\n                                                    y: areaSeleccion.y,\n                                                    width: areaSeleccion.width,\n                                                    height: areaSeleccion.height,\n                                                    fill: \"rgba(119, 61, 190, 0.1)\" // violeta claro\n                                                    ,\n                                                    stroke: \"#773dbe\",\n                                                    strokeWidth: 1,\n                                                    dash: [\n                                                        4,\n                                                        4\n                                                    ]\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 3814,\n                                                    columnNumber: 21\n                                                }, this),\n                                                elementosSeleccionados.length > 0 && (()=>{\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SelectionBounds__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                                        selectedElements: elementosSeleccionados,\n                                                        elementRefs: elementRefs,\n                                                        objetos: objetos,\n                                                        isDragging: isDragging,\n                                                        isMobile: isMobile,\n                                                        onTransformInteractionStart: handleTransformInteractionStart,\n                                                        onTransformInteractionEnd: handleTransformInteractionEnd,\n                                                        onTransform: (newAttrs)=>{\n                                                            if (elementosSeleccionados.length === 1) {\n                                                                const id = elementosSeleccionados[0];\n                                                                const objIndex = objetos.findIndex((o)=>o.id === id);\n                                                                if (objIndex !== -1) {\n                                                                    if (newAttrs.isPreview) {\n                                                                        // Preview: actualización sin historial\n                                                                        setObjetos((prev)=>{\n                                                                            const nuevos = [\n                                                                                ...prev\n                                                                            ];\n                                                                            const elemento = nuevos[objIndex];\n                                                                            // Countdown: durante preview dejamos que Konva escale el nodo\n                                                                            // sin tocar estado React para evitar desincronización con Transformer.\n                                                                            if (elemento.tipo === \"countdown\" || elemento.tipo === \"forma\" && (elemento.figura === \"circle\" || elemento.figura === \"triangle\")) {\n                                                                                return prev;\n                                                                            }\n                                                                            if (elemento.tipo === \"texto\" && Number.isFinite(newAttrs.fontSize)) {\n                                                                                // Para texto dejamos que Konva haga el preview de escala en vivo.\n                                                                                // Actualizar estado React en cada frame genera micro-jitter visual.\n                                                                                return prev;\n                                                                            }\n                                                                            const updatedElement = {\n                                                                                ...elemento,\n                                                                                rotation: newAttrs.rotation || elemento.rotation || 0\n                                                                            };\n                                                                            if (elemento.tipo === \"galeria\") {\n                                                                                const galleryMetrics = normalizarMedidasGaleria(elemento, newAttrs.width, newAttrs.x);\n                                                                                updatedElement.width = galleryMetrics.width;\n                                                                                updatedElement.height = galleryMetrics.height;\n                                                                                updatedElement.widthPct = galleryMetrics.widthPct;\n                                                                                updatedElement.x = galleryMetrics.x;\n                                                                                updatedElement.rotation = elemento.rotation || 0;\n                                                                                updatedElement.scaleX = 1;\n                                                                                updatedElement.scaleY = 1;\n                                                                            } else {\n                                                                                if (newAttrs.width !== undefined) updatedElement.width = newAttrs.width;\n                                                                                if (newAttrs.height !== undefined) updatedElement.height = newAttrs.height;\n                                                                                if (newAttrs.radius !== undefined) updatedElement.radius = newAttrs.radius;\n                                                                                updatedElement.scaleX = 1;\n                                                                                updatedElement.scaleY = 1;\n                                                                            }\n                                                                            nuevos[objIndex] = updatedElement;\n                                                                            return nuevos;\n                                                                        });\n                                                                        // ?? ACTUALIZAR POSICIÓN DEL BOTÓN DURANTE TRANSFORM\n                                                                        requestAnimationFrame(()=>{\n                                                                            if (typeof actualizarPosicionBotonOpciones === 'function') {\n                                                                                actualizarPosicionBotonOpciones();\n                                                                            }\n                                                                        });\n                                                                    } else if (newAttrs.isFinal) {\n                                                                        // Final: actualización completa\n                                                                        window._resizeData = {\n                                                                            isResizing: false\n                                                                        };\n                                                                        const { isPreview, isFinal, ...cleanAttrs } = newAttrs;\n                                                                        // ?? CONVERTIR coordenadas absolutas a relativas ANTES de guardar\n                                                                        const objOriginal = objetos[objIndex];\n                                                                        let finalAttrs = {\n                                                                            ...cleanAttrs,\n                                                                            y: (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.convertirAbsARel)(cleanAttrs.y, objOriginal.seccionId, seccionesOrdenadas),\n                                                                            fromTransform: true\n                                                                        };\n                                                                        // ? COUNTDOWN: conservar escala final del drag (sin reconversión a chipWidth)\n                                                                        // para que el tamaño final coincida exactamente con lo soltado.\n                                                                        if (objOriginal.tipo === \"texto\" && Number.isFinite(cleanAttrs.fontSize)) {\n                                                                            const requestedFontSize = Math.max(6, Number(cleanAttrs.fontSize) || 6);\n                                                                            const originalFontSize = Number.isFinite(objOriginal.fontSize) ? objOriginal.fontSize : 24;\n                                                                            const rotationFinal = Number.isFinite(cleanAttrs.rotation) ? cleanAttrs.rotation : Number.isFinite(objOriginal.rotation) ? objOriginal.rotation : 0;\n                                                                            const previousRotation = Number.isFinite(objOriginal.rotation) ? objOriginal.rotation : 0;\n                                                                            const rotationChanged = Math.abs(rotationFinal - previousRotation) > 0.1;\n                                                                            const fontSizeChanged = Math.abs(requestedFontSize - originalFontSize) > 0.05;\n                                                                            const shouldMatchVisualWidth = objOriginal.__autoWidth !== false && !Number.isFinite(objOriginal.width) && !rotationChanged;\n                                                                            const nextFontSize = shouldMatchVisualWidth ? ajustarFontSizeAAnchoVisual(objOriginal, requestedFontSize, cleanAttrs.textVisualWidth) : requestedFontSize;\n                                                                            const shouldUseNodePose = rotationChanged && !fontSizeChanged && Number.isFinite(cleanAttrs.x) && Number.isFinite(cleanAttrs.y);\n                                                                            const centeredPosAbs = shouldUseNodePose ? {\n                                                                                x: Number(cleanAttrs.x),\n                                                                                y: Number(cleanAttrs.y)\n                                                                            } : calcularPosTextoDesdeCentro(objOriginal, nextFontSize, cleanAttrs.textCenterX, cleanAttrs.textCenterY, rotationFinal);\n                                                                            const centeredX = centeredPosAbs.x;\n                                                                            const centeredYAbs = centeredPosAbs.y;\n                                                                            const centeredY = Number.isFinite(centeredYAbs) ? (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.convertirAbsARel)(centeredYAbs, objOriginal.seccionId, seccionesOrdenadas) : Number.isFinite(objOriginal.y) ? objOriginal.y : 0;\n                                                                            textResizeDebug(\"transform-final:text\", {\n                                                                                id: objOriginal?.id ?? null,\n                                                                                requestedFontSize,\n                                                                                nextFontSize,\n                                                                                shouldMatchVisualWidth,\n                                                                                cleanFontSize: cleanAttrs.fontSize ?? null,\n                                                                                textVisualWidth: cleanAttrs.textVisualWidth ?? null,\n                                                                                textCenterX: cleanAttrs.textCenterX ?? null,\n                                                                                textCenterY: cleanAttrs.textCenterY ?? null,\n                                                                                rotationFinal,\n                                                                                rotationChanged,\n                                                                                fontSizeChanged,\n                                                                                shouldUseNodePose,\n                                                                                centeredX,\n                                                                                centeredYAbs,\n                                                                                centeredY,\n                                                                                originalX: objOriginal?.x ?? null,\n                                                                                originalY: objOriginal?.y ?? null\n                                                                            });\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                fontSize: nextFontSize,\n                                                                                x: Number.isFinite(centeredX) ? centeredX : Number.isFinite(objOriginal.x) ? objOriginal.x : 0,\n                                                                                y: centeredY,\n                                                                                scaleX: 1,\n                                                                                scaleY: 1\n                                                                            };\n                                                                            delete finalAttrs.textCenterX;\n                                                                            delete finalAttrs.textCenterY;\n                                                                            delete finalAttrs.textVisualWidth;\n                                                                            textResizeDebug(\"transform-final:text-attrs\", {\n                                                                                id: objOriginal?.id ?? null,\n                                                                                finalFontSize: finalAttrs.fontSize ?? null,\n                                                                                finalX: finalAttrs.x ?? null,\n                                                                                finalY: finalAttrs.y ?? null\n                                                                            });\n                                                                        } else if (objOriginal.tipo === \"countdown\") {\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                scaleX: Number.isFinite(cleanAttrs.scaleX) ? cleanAttrs.scaleX : objOriginal.scaleX ?? 1,\n                                                                                scaleY: Number.isFinite(cleanAttrs.scaleY) ? cleanAttrs.scaleY : objOriginal.scaleY ?? 1\n                                                                            };\n                                                                            delete finalAttrs.width;\n                                                                            delete finalAttrs.height;\n                                                                        } else if (objOriginal.tipo === \"forma\" && objOriginal.figura === \"circle\") {\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                x: Number.isFinite(cleanAttrs.x) ? cleanAttrs.x : objOriginal.x || 0,\n                                                                                radius: Number.isFinite(cleanAttrs.radius) ? cleanAttrs.radius : objOriginal.radius || 50,\n                                                                                scaleX: 1,\n                                                                                scaleY: 1\n                                                                            };\n                                                                            delete finalAttrs.width;\n                                                                            delete finalAttrs.height;\n                                                                        } else if (objOriginal.tipo === \"forma\" && objOriginal.figura === \"triangle\") {\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                x: Number.isFinite(cleanAttrs.x) ? cleanAttrs.x : objOriginal.x || 0,\n                                                                                radius: Number.isFinite(cleanAttrs.radius) ? cleanAttrs.radius : objOriginal.radius || 60,\n                                                                                scaleX: 1,\n                                                                                scaleY: 1\n                                                                            };\n                                                                            delete finalAttrs.width;\n                                                                            delete finalAttrs.height;\n                                                                        } else if (objOriginal.tipo === \"galeria\") {\n                                                                            const galleryMetrics = normalizarMedidasGaleria(objOriginal, cleanAttrs.width, cleanAttrs.x);\n                                                                            finalAttrs = {\n                                                                                ...finalAttrs,\n                                                                                x: galleryMetrics.x,\n                                                                                width: galleryMetrics.width,\n                                                                                height: galleryMetrics.height,\n                                                                                widthPct: galleryMetrics.widthPct,\n                                                                                rotation: objOriginal.rotation || 0,\n                                                                                scaleX: 1,\n                                                                                scaleY: 1\n                                                                            };\n                                                                        }\n                                                                        // ? offsetY solo para debug (evita ReferenceError)\n                                                                        let offsetY = 0;\n                                                                        try {\n                                                                            const idx = seccionesOrdenadas.findIndex((s)=>s.id === objOriginal.seccionId);\n                                                                            const safe = idx >= 0 ? idx : 0;\n                                                                            // Nota: en tu código lo llamás a veces con 2 params, a veces con 3.\n                                                                            // Acá usamos 3, consistente con otras partes del archivo.\n                                                                            offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, safe, altoCanvas) || 0;\n                                                                        } catch  {\n                                                                            offsetY = 0;\n                                                                        }\n                                                                        if (objOriginal.tipo === \"countdown\" || objOriginal.tipo === \"texto\") {\n                                                                            if (objOriginal.tipo === \"texto\") {\n                                                                                const commitSnapshot = {\n                                                                                    id: objOriginal?.id ?? null,\n                                                                                    finalFontSize: finalAttrs.fontSize ?? null,\n                                                                                    finalX: finalAttrs.x ?? null,\n                                                                                    finalY: finalAttrs.y ?? null,\n                                                                                    seccionId: objOriginal?.seccionId ?? null\n                                                                                };\n                                                                                textResizeDebug(\"transform-final:commit\", {\n                                                                                    ...commitSnapshot\n                                                                                });\n                                                                                if (isTextResizeDebugEnabled()) {\n                                                                                    requestAnimationFrame(()=>{\n                                                                                        requestAnimationFrame(()=>{\n                                                                                            const nodeAfterCommit = elementRefs.current?.[commitSnapshot.id];\n                                                                                            if (!nodeAfterCommit) {\n                                                                                                textResizeDebug(\"transform-final:post-render:no-node\", {\n                                                                                                    id: commitSnapshot.id\n                                                                                                });\n                                                                                                return;\n                                                                                            }\n                                                                                            try {\n                                                                                                const rectAfterCommit = nodeAfterCommit.getClientRect({\n                                                                                                    skipTransform: false,\n                                                                                                    skipShadow: true,\n                                                                                                    skipStroke: true\n                                                                                                });\n                                                                                                textResizeDebug(\"transform-final:post-render\", {\n                                                                                                    ...commitSnapshot,\n                                                                                                    nodeX: typeof nodeAfterCommit.x === \"function\" ? nodeAfterCommit.x() : null,\n                                                                                                    nodeY: typeof nodeAfterCommit.y === \"function\" ? nodeAfterCommit.y() : null,\n                                                                                                    nodeScaleX: typeof nodeAfterCommit.scaleX === \"function\" ? nodeAfterCommit.scaleX() : null,\n                                                                                                    nodeScaleY: typeof nodeAfterCommit.scaleY === \"function\" ? nodeAfterCommit.scaleY() : null,\n                                                                                                    nodeFontSize: typeof nodeAfterCommit.fontSize === \"function\" ? nodeAfterCommit.fontSize() : null,\n                                                                                                    nodeRectWidth: Number.isFinite(rectAfterCommit?.width) ? rectAfterCommit.width : null,\n                                                                                                    nodeRectHeight: Number.isFinite(rectAfterCommit?.height) ? rectAfterCommit.height : null\n                                                                                                });\n                                                                                            } catch (err) {\n                                                                                                textResizeDebug(\"transform-final:post-render:error\", {\n                                                                                                    id: commitSnapshot.id,\n                                                                                                    message: err?.message || String(err)\n                                                                                                });\n                                                                                            }\n                                                                                        });\n                                                                                    });\n                                                                                }\n                                                                            }\n                                                                            actualizarObjeto(objIndex, finalAttrs);\n                                                                        } else {\n                                                                            requestAnimationFrame(()=>{\n                                                                                actualizarObjeto(objIndex, finalAttrs);\n                                                                            });\n                                                                        }\n                                                                    }\n                                                                }\n                                                            }\n                                                        }\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 3830,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                })(),\n                                                !window._resizeData?.isResizing && !isDragging && !window._isDragging && !window._grupoLider && !editing.id && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_HoverIndicator__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                                    hoveredElement: hoverId,\n                                                    elementRefs: elementRefs,\n                                                    objetos: objetos\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 4149,\n                                                    columnNumber: 21\n                                                }, this),\n                                                elementosSeleccionados.length === 1 && (()=>{\n                                                    const elementoSeleccionado = objetos.find((obj)=>obj.id === elementosSeleccionados[0]);\n                                                    if (elementoSeleccionado?.tipo === 'forma' && elementoSeleccionado?.figura === 'line') {\n                                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_LineControls__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                                            name: \"ui\",\n                                                            lineElement: elementoSeleccionado,\n                                                            elementRefs: elementRefs,\n                                                            onUpdateLine: actualizarLinea,\n                                                            altoCanvas: altoCanvasDinamico,\n                                                            isMobile: isMobile,\n                                                            // ?? NUEVA PROP: Pasar información sobre drag grupal\n                                                            isDragGrupalActive: window._grupoLider !== null,\n                                                            elementosSeleccionados: elementosSeleccionados\n                                                        }, `line-controls-${elementoSeleccionado.id}-${JSON.stringify(elementoSeleccionado.points)}`, false, {\n                                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                            lineNumber: 4159,\n                                                            columnNumber: 25\n                                                        }, this);\n                                                    }\n                                                    return null;\n                                                })(),\n                                                guiaLineas.map((linea, i)=>{\n                                                    // Determinar el estilo visual según el tipo\n                                                    const esLineaSeccion = linea.priority === 'seccion';\n                                                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Line, {\n                                                        name: \"ui\",\n                                                        points: linea.points,\n                                                        stroke: esLineaSeccion ? \"#773dbe\" : \"#9333ea\",\n                                                        strokeWidth: esLineaSeccion ? 2 : 1,\n                                                        dash: linea.style === 'dashed' ? [\n                                                            8,\n                                                            6\n                                                        ] : undefined,\n                                                        opacity: esLineaSeccion ? 0.9 : 0.7,\n                                                        listening: false,\n                                                        perfectDrawEnabled: false,\n                                                        // Efecto sutil de resplandor para líneas de sección\n                                                        shadowColor: esLineaSeccion ? \"rgba(119, 61, 190, 0.3)\" : undefined,\n                                                        shadowBlur: esLineaSeccion ? 4 : 0,\n                                                        shadowEnabled: esLineaSeccion\n                                                    }, `${linea.type}-${i}`, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                        lineNumber: 4186,\n                                                        columnNumber: 23\n                                                    }, this);\n                                                })\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 3134,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_45__[\"default\"], {\n                                            children: (()=>{\n                                                if (!seccionActivaId) return null;\n                                                const index = seccionesOrdenadas.findIndex((s)=>s.id === seccionActivaId);\n                                                if (index === -1) return null;\n                                                const seccion = seccionesOrdenadas[index];\n                                                const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_6__.calcularOffsetY)(seccionesOrdenadas, index, altoCanvas);\n                                                const estaAnimando = seccionesAnimando.includes(seccion.id);\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_3__.Rect, {\n                                                    x: 0,\n                                                    y: offsetY,\n                                                    width: 800,\n                                                    height: seccion.altura,\n                                                    fill: \"transparent\",\n                                                    stroke: \"#773dbe\",\n                                                    strokeWidth: estaAnimando ? 4 : 3,\n                                                    cornerRadius: 0,\n                                                    shadowColor: estaAnimando ? \"rgba(119, 61, 190, 0.4)\" : \"rgba(119, 61, 190, 0.25)\",\n                                                    shadowBlur: estaAnimando ? 16 : 12,\n                                                    shadowOffset: {\n                                                        x: 0,\n                                                        y: estaAnimando ? 4 : 3\n                                                    },\n                                                    listening: false\n                                                }, `overlay-border-seccion-${seccion.id}`, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                                    lineNumber: 4220,\n                                                    columnNumber: 23\n                                                }, this);\n                                            })()\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                            lineNumber: 4208,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                    lineNumber: 3105,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                lineNumber: 3097,\n                                columnNumber: 13\n                            }, this),\n                            editing.id && elementRefs.current[editing.id] && (()=>{\n                                const objetoEnEdicion = objetos.find((o)=>o.id === editing.id);\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_InlineTextEditor__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                    editingId: editing.id,\n                                    node: elementRefs.current[editing.id],\n                                    value: editing.value,\n                                    textAlign: objetoEnEdicion?.align || 'left',\n                                    onOverlayMountChange: handleInlineOverlayMountChange,\n                                    onChange: (nextValue)=>{\n                                        const nextText = String(nextValue ?? \"\");\n                                        const prevStats = getInlineLineStats(editing.value);\n                                        const nextStats = getInlineLineStats(nextText);\n                                        if (prevStats.lineCount !== nextStats.lineCount || prevStats.trailingNewlines !== nextStats.trailingNewlines) {\n                                            inlineDebugLog(\"linebreak-model-sync\", {\n                                                id: editing.id || window._currentEditingId || null,\n                                                prevLength: prevStats.length,\n                                                nextLength: nextStats.length,\n                                                prevLineCount: prevStats.lineCount,\n                                                nextLineCount: nextStats.lineCount,\n                                                prevTrailingNewlines: prevStats.trailingNewlines,\n                                                nextTrailingNewlines: nextStats.trailingNewlines\n                                            });\n                                        }\n                                        captureInlineSnapshot(\"input: before-render\", {\n                                            id: editing.id || window._currentEditingId || null,\n                                            valueLength: nextText.length\n                                        });\n                                        updateEdit(nextValue);\n                                    },\n                                    onDebugEvent: (eventName, payload = {})=>{\n                                        captureInlineSnapshot(eventName, {\n                                            id: payload?.id || editing.id || null,\n                                            ...payload\n                                        });\n                                    },\n                                    onFinish: ()=>{\n                                        const finishId = editing.id;\n                                        captureInlineSnapshot(\"finish: blur\", {\n                                            id: finishId,\n                                            valueLength: String(editing.value ?? \"\").length\n                                        });\n                                        const textoNuevoRaw = String(editing.value ?? \"\");\n                                        const textoNuevoValidado = textoNuevoRaw.trim();\n                                        const index = objetos.findIndex((o)=>o.id === finishId);\n                                        const objeto = objetos[index];\n                                        const liveNodeAtFinish = elementRefs.current[finishId];\n                                        const liveMetricsAtFinish = obtenerMetricasNodoInline(liveNodeAtFinish);\n                                        inlineDebugLog(\"finish-start\", {\n                                            id: finishId,\n                                            rawLength: textoNuevoRaw.length,\n                                            trimmedLength: textoNuevoValidado.length,\n                                            objectX: objeto?.x ?? null,\n                                            objectY: objeto?.y ?? null,\n                                            previewRef: {\n                                                ...inlineEditPreviewRef.current\n                                            },\n                                            liveMetricsAtFinish\n                                        });\n                                        if (index === -1) {\n                                            console.warn(\"? El objeto ya no existe. Cancelando guardado.\");\n                                            inlineDebugLog(\"finish-abort-missing-object\", {\n                                                id: finishId\n                                            });\n                                            inlineCommitDebugRef.current = {\n                                                id: null\n                                            };\n                                            finishEdit();\n                                            return;\n                                        }\n                                        // ?? Podés permitir texto vacío en formas si querés (yo lo permitiría)\n                                        if (textoNuevoValidado === \"\" && objeto.tipo === \"texto\") {\n                                            console.warn(\"?? El texto está vacío. No se actualiza.\");\n                                            inlineDebugLog(\"finish-abort-empty\", {\n                                                id: finishId,\n                                                rawLength: textoNuevoRaw.length,\n                                                trimmedLength: textoNuevoValidado.length\n                                            });\n                                            inlineCommitDebugRef.current = {\n                                                id: null\n                                            };\n                                            inlineEditPreviewRef.current = {\n                                                id: null,\n                                                centerX: null\n                                            };\n                                            finishEdit();\n                                            return;\n                                        }\n                                        const actualizado = [\n                                            ...objetos\n                                        ];\n                                        const patch = {\n                                            texto: textoNuevoRaw\n                                        };\n                                        const shouldKeepCenterX = objeto.tipo === \"texto\" && !objeto.__groupAlign && !Number.isFinite(objeto.width) && objeto.__autoWidth !== false;\n                                        if (shouldKeepCenterX) {\n                                            const nextX = calcularXTextoCentrado(objeto, textoNuevoRaw);\n                                            const currentX = Number.isFinite(objeto.x) ? objeto.x : 0;\n                                            if (Number.isFinite(nextX) && Math.abs(nextX - currentX) > 0.01) {\n                                                patch.x = nextX;\n                                            }\n                                            inlineDebugLog(\"finish-center-computed\", {\n                                                id: finishId,\n                                                shouldKeepCenterX,\n                                                currentX,\n                                                nextX,\n                                                patchX: patch.x ?? null\n                                            });\n                                        }\n                                        actualizado[index] = {\n                                            ...actualizado[index],\n                                            ...patch\n                                        };\n                                        const expectedX = Number.isFinite(patch.x) ? patch.x : Number.isFinite(objeto.x) ? objeto.x : null;\n                                        inlineCommitDebugRef.current = {\n                                            id: finishId,\n                                            expectedX,\n                                            objectXBeforeCommit: Number.isFinite(objeto.x) ? objeto.x : null,\n                                            liveNodeXAtFinish: Number.isFinite(liveMetricsAtFinish?.x) ? liveMetricsAtFinish.x : null,\n                                            previewCenterX: null,\n                                            textLength: textoNuevoRaw.length\n                                        };\n                                        inlineDebugLog(\"finish-apply-patch\", {\n                                            id: finishId,\n                                            patch,\n                                            expectedX\n                                        });\n                                        const logFinishVisibilityCheck = (phase)=>{\n                                            const safeId = String(finishId || \"\").replace(/\"/g, '\\\\\"');\n                                            const overlayDomPresent = safeId ? Boolean(document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`)) : false;\n                                            const liveNode = elementRefs.current[finishId];\n                                            inlineDebugLog(\"finish-visibility-check\", {\n                                                phase,\n                                                id: finishId,\n                                                reactiveEditingId: editing.id || null,\n                                                globalEditingId: window.editing?.id ?? null,\n                                                currentEditingId: window._currentEditingId ?? null,\n                                                overlayMountedId: inlineOverlayMountedId ?? null,\n                                                overlayDomPresent,\n                                                nodeOpacity: typeof liveNode?.opacity === \"function\" ? liveNode.opacity() : null,\n                                                nodeVisible: typeof liveNode?.visible === \"function\" ? liveNode.visible() : null,\n                                                nodeMetrics: obtenerMetricasNodoInline(liveNode)\n                                            });\n                                        };\n                                        logFinishVisibilityCheck(\"before-commit\");\n                                        captureInlineSnapshot(\"finish: before-flush\", {\n                                            id: finishId,\n                                            expectedX,\n                                            patchX: patch.x ?? null\n                                        });\n                                        (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)(()=>{\n                                            setObjetos(actualizado);\n                                        });\n                                        captureInlineSnapshot(\"finish: after-flush\", {\n                                            id: finishId,\n                                            expectedX,\n                                            patchX: patch.x ?? null\n                                        });\n                                        logFinishVisibilityCheck(\"after-commit-before-finishEdit\");\n                                        inlineEditPreviewRef.current = {\n                                            id: null,\n                                            centerX: null\n                                        };\n                                        (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.flushSync)(()=>{\n                                            finishEdit();\n                                        });\n                                        const stageAfterFinishEdit = stageRef.current?.getStage?.() || stageRef.current || null;\n                                        if (typeof stageAfterFinishEdit?.batchDraw === \"function\") {\n                                            stageAfterFinishEdit.batchDraw();\n                                        }\n                                        logFinishVisibilityCheck(\"after-finishEdit-sync\");\n                                        if (window._currentEditingId === finishId) {\n                                            window._currentEditingId = null;\n                                        }\n                                        captureInlineSnapshot(\"finish: after-finishEdit\", {\n                                            id: finishId,\n                                            expectedX,\n                                            patchX: patch.x ?? null\n                                        });\n                                        requestAnimationFrame(()=>{\n                                            logFinishVisibilityCheck(\"after-finishEdit-raf1\");\n                                            captureInlineSnapshot(\"finish: raf1\", {\n                                                id: finishId,\n                                                expectedX,\n                                                patchX: patch.x ?? null\n                                            });\n                                            requestAnimationFrame(()=>{\n                                                captureInlineSnapshot(\"finish: raf2\", {\n                                                    id: finishId,\n                                                    expectedX,\n                                                    patchX: patch.x ?? null\n                                                });\n                                            });\n                                        });\n                                    },\n                                    scaleVisual: escalaVisual,\n                                    finishMode: inlineDebugAB.finishMode,\n                                    widthMode: inlineDebugAB.overlayWidthMode\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                    lineNumber: 4248,\n                                    columnNumber: 17\n                                }, this);\n                            })(),\n                            !isMobile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_DividersOverlayStage__WEBPACK_IMPORTED_MODULE_46__[\"default\"], {\n                                zoom: zoom,\n                                altoCanvasDinamico: altoCanvasDinamico,\n                                seccionesOrdenadas: seccionesOrdenadas\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                                lineNumber: 4464,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                        lineNumber: 2815,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                    lineNumber: 2805,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 2792,\n                columnNumber: 7\n            }, this),\n            elementosSeleccionados.length === 1 && !editing.id && !isSelectionRotating && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: botonOpcionesRef,\n                \"data-option-button\": \"true\",\n                className: \"absolute z-50 bg-white border-2 border-purple-500 rounded-full shadow-lg hover:shadow-xl transition-shadow duration-200\",\n                style: {\n                    left: \"0px\",\n                    top: \"0px\",\n                    width: `${optionButtonSize}px`,\n                    height: `${optionButtonSize}px`,\n                    display: \"none\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    pointerEvents: \"auto\",\n                    transition: \"none\",\n                    backgroundColor: \"rgba(255, 255, 255, 0.95)\",\n                    backdropFilter: \"blur(4px)\",\n                    border: \"2px solid #773dbe\",\n                    touchAction: \"manipulation\"\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    onPointerDown: (e)=>{\n                        e.preventDefault();\n                        e.stopPropagation();\n                        togglePanelOpciones(\"gear-pointerdown\", e.nativeEvent || e);\n                    },\n                    onClick: (e)=>{\n                        // Click de teclado (Enter/Espacio) cuando no hay pointer interaction.\n                        if (e.detail !== 0) return;\n                        e.stopPropagation();\n                        togglePanelOpciones(\"gear-keyboard-click\", e.nativeEvent || e);\n                    },\n                    className: \"hover:bg-purple-50 w-full h-full rounded-full flex items-center justify-center transition-colors\",\n                    title: \"Opciones del elemento\",\n                    \"aria-label\": \"Opciones del elemento\",\n                    style: {\n                        touchAction: \"manipulation\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_ChevronUp_Layers_Monitor_MoveDown_MoveUp_PlusCircle_Settings_Trash2_Unlink2_lucide_react__WEBPACK_IMPORTED_MODULE_47__.Settings, {\n                        className: \"text-purple-700\",\n                        style: {\n                            width: isMobile ? 18 : 14,\n                            height: isMobile ? 18 : 14\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                        lineNumber: 4522,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                    lineNumber: 4504,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 4484,\n                columnNumber: 9\n            }, this),\n            mostrarPanelZ && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MenuOpcionesElemento__WEBPACK_IMPORTED_MODULE_26__[\"default\"], {\n                isOpen: mostrarPanelZ,\n                botonOpcionesRef: botonOpcionesRef,\n                elementoSeleccionado: objetos.find((o)=>o.id === elementosSeleccionados[0]),\n                onCopiar: onCopiar,\n                onPegar: onPegar,\n                onDuplicar: onDuplicar,\n                onEliminar: onEliminar,\n                moverElemento: moverElemento,\n                onCerrar: ()=>setMostrarPanelZ(false),\n                reemplazarFondo: _utils_accionesFondo__WEBPACK_IMPORTED_MODULE_20__.reemplazarFondoSeccion,\n                secciones: secciones,\n                objetos: objetos,\n                setSecciones: setSecciones,\n                setObjetos: setObjetos,\n                setElementosSeleccionados: setElementosSeleccionados\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 4533,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_toolbar_FloatingTextToolbar__WEBPACK_IMPORTED_MODULE_30__[\"default\"], {\n                objetoSeleccionado: objetoSeleccionado,\n                setObjetos: setObjetos,\n                elementosSeleccionados: elementosSeleccionados,\n                mostrarSelectorFuente: mostrarSelectorFuente,\n                setMostrarSelectorFuente: setMostrarSelectorFuente,\n                mostrarSelectorTamano: mostrarSelectorTamano,\n                setMostrarSelectorTamano: setMostrarSelectorTamano,\n                ALL_FONTS: _config_fonts__WEBPACK_IMPORTED_MODULE_33__.ALL_FONTS,\n                fontManager: _utils_fontManager__WEBPACK_IMPORTED_MODULE_14__.fontManager,\n                tamaniosDisponibles: tamaniosDisponibles,\n                onCambiarAlineacion: onCambiarAlineacion\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 4553,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_editor_sections_ConfirmDeleteSectionModal__WEBPACK_IMPORTED_MODULE_37__[\"default\"], {\n                isOpen: deleteSectionModal.isOpen,\n                sectionName: seccionPendienteEliminar?.tipo,\n                itemCount: cantidadElementosSeccionPendiente,\n                isDeleting: isDeletingSection,\n                onCancel: cerrarModalBorrarSeccion,\n                onConfirm: confirmarBorrarSeccion\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n                lineNumber: 4567,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\CanvasEditor.jsx\",\n        lineNumber: 2771,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0NhbnZhc0VkaXRvci5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOEJBQThCOztBQUM0QztBQUN0QjtBQUNzQztBQUM1QztBQUNKO0FBQ2lEO0FBQ2pDO0FBQ1U7QUFDQTtBQUNwQjtBQUNGO0FBQ047QUFDd0I7QUFDYjtBQUNHO0FBQ1o7QUFDZ0I7QUFDUjtBQUNSO0FBQ3dDO0FBQ0Q7QUFDQTtBQUNGO0FBQ21CO0FBQ2pDO0FBQ0w7QUFDWDtBQUNTO0FBQ0w7QUFDcUI7QUFDbEI7QUFDMEI7QUFDeEI7QUFDaEM7QUFDa0I7QUFDVTtBQVloQztBQUM2QztBQUNHO0FBQ3lCO0FBQ2pDO0FBQ1k7QUFDUDtBQUNnQjtBQUNVO0FBQzdCO0FBQzJCO0FBQ2pCO0FBQ0U7QUFJNUVvRCw0REFBa0IsR0FBRztBQUVyQixTQUFTMEI7SUFDUCxJQUFJLElBQTZCLEVBQUUsT0FBTztJQUUxQyxNQUFNQyxNQUFNQyxPQUFPQyxPQUFPQyxnQkFBZ0IsSUFBSTtJQUM5QyxNQUFNQyxnQkFDSixPQUFPRixPQUFPRyxVQUFVLEtBQUssY0FDN0JILE9BQU9HLFVBQVUsQ0FBQyxxQkFBcUJDLE9BQU87SUFDaEQsTUFBTUMsVUFBVUMsS0FBS0MsR0FBRyxDQUFDUixPQUFPQyxPQUFPUSxVQUFVLElBQUksSUFBSVQsT0FBT0MsT0FBT1MsV0FBVyxJQUFJO0lBQ3RGLE1BQU1DLGFBQWFSLGlCQUFrQkcsVUFBVSxLQUFLQSxXQUFXO0lBRS9ELElBQUlLLFlBQVksT0FBTztJQUN2QixPQUFPSixLQUFLQyxHQUFHLENBQUNULEtBQUs7QUFDdkI7QUFFQTNCLDBEQUFnQixHQUFHMEI7QUFFbkIsTUFBTWUsNkJBQTZCO0FBQ25DLE1BQU1DLHlCQUF5QjtBQUUvQixTQUFTQyxtQkFBbUJDLElBQUk7SUFDOUIsTUFBTUMsSUFBSUMsT0FB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d047Z0JBQ1JqSSxrQkFBa0JBO2dCQUNsQm9vQixzQkFBc0J2eUIsUUFBUWtJLElBQUksQ0FBQzJCLENBQUFBLElBQUtBLEVBQUU5RyxFQUFFLEtBQUtyQyxzQkFBc0IsQ0FBQyxFQUFFO2dCQUMxRW1ULFVBQVVBO2dCQUNWQyxTQUFTQTtnQkFDVEgsWUFBWUE7Z0JBQ1pDLFlBQVlBO2dCQUNaVixlQUFlQTtnQkFDZnVpQixVQUFVLElBQU0vckIsaUJBQWlCO2dCQUNqQzlTLGlCQUFpQkEseUVBQWVBO2dCQUNoQ3dKLFdBQVdBO2dCQUNYSixTQUFTQTtnQkFDVEssY0FBY0E7Z0JBQ2RKLFlBQVlBO2dCQUNaVSwyQkFBMkJBOzs7Ozs7MEJBSy9CLDhEQUFDL0ksdUZBQW1CQTtnQkFDbEJnUyxvQkFBb0JBO2dCQUNwQjNKLFlBQVlBO2dCQUNaUyx3QkFBd0JBO2dCQUN4Qm9ELHVCQUF1QkE7Z0JBQ3ZCQywwQkFBMEJBO2dCQUMxQitGLHVCQUF1QkE7Z0JBQ3ZCSCwwQkFBMEJBO2dCQUMxQjVSLFdBQVdBLHFEQUFTQTtnQkFDcEIxQixhQUFhQSw0REFBV0E7Z0JBQ3hCMFQscUJBQXFCQTtnQkFDckJnSyxxQkFBcUJBOzs7Ozs7MEJBR3ZCLDhEQUFDbGIsOEZBQXlCQTtnQkFDeEIrTCxRQUFRRixtQkFBbUJFLE1BQU07Z0JBQ2pDOHdCLGFBQWF6dEIsMEJBQTBCcUQ7Z0JBQ3ZDcXFCLFdBQVd4dEI7Z0JBQ1h5dEIsWUFBWTl3QjtnQkFDWit3QixVQUFVNVc7Z0JBQ1Y2VyxXQUFXNVc7Ozs7Ozs7Ozs7OztBQVFuQiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxDYW52YXNFZGl0b3IuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvQ2FudmFzRWRpdG9yLmpzeFxyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCwgZmx1c2hTeW5jIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xyXG5pbXBvcnQgeyBTdGFnZSwgTGluZSwgUmVjdCwgVGV4dCwgSW1hZ2UgYXMgS29udmFJbWFnZSwgR3JvdXAsIENpcmNsZSB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xyXG5pbXBvcnQgRWxlbWVudG9DYW52YXMgZnJvbSBcIi4vRWxlbWVudG9DYW52YXNcIjtcclxuaW1wb3J0IExpbmVDb250cm9scyBmcm9tIFwiLi9MaW5lQ29udHJvbHNcIjtcclxuaW1wb3J0IHsgY2FsY3VsYXJPZmZzZXRZLCBjb252ZXJ0aXJBYnNBUmVsLCBkZXRlcm1pbmFyTnVldmFTZWNjaW9uIH0gZnJvbSBcIkAvdXRpbHMvbGF5b3V0XCI7XHJcbmltcG9ydCB7IGNyZWFyU2VjY2lvbiB9IGZyb20gXCJAL21vZGVscy9lc3RydWN0dXJhSW5pY2lhbFwiO1xyXG5pbXBvcnQgdXNlUGxhbnRpbGxhc0RlU2VjY2lvbiBmcm9tIFwiQC9ob29rcy91c2VQbGFudGlsbGFzRGVTZWNjaW9uXCI7XHJcbmltcG9ydCB7IHVzZUltcGVyYXRpdmVPYmplY3RzIH0gZnJvbSAnQC9ob29rcy91c2VJbXBlcmF0aXZlT2JqZWN0cyc7XHJcbmltcG9ydCBTZWxlY3Rpb25Cb3VuZHMgZnJvbSAnLi9TZWxlY3Rpb25Cb3VuZHMnO1xyXG5pbXBvcnQgSG92ZXJJbmRpY2F0b3IgZnJvbSAnLi9Ib3ZlckluZGljYXRvcic7XHJcbmltcG9ydCBMaW5lVG9vbGJhciBmcm9tIFwiLi9MaW5lVG9vbGJhclwiO1xyXG5pbXBvcnQgdXNlS2V5Ym9hcmRTaG9ydGN1dHMgZnJvbSAnQC9ob29rcy91c2VLZXlib2FyZFNob3J0Y3V0cyc7XHJcbmltcG9ydCB7IGZvbnRNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvZm9udE1hbmFnZXInO1xyXG5pbXBvcnQgdXNlSW5saW5lRWRpdG9yIGZyb20gXCJAL2hvb2tzL3VzZUlubGluZUVkaXRvclwiO1xyXG5pbXBvcnQgU2hhcGVUb29sYmFyIGZyb20gJy4vU2hhcGVUb29sYmFyJztcclxuaW1wb3J0IHVzZUVkaXRvckhhbmRsZXJzIGZyb20gJ0AvaG9va3MvdXNlRWRpdG9ySGFuZGxlcnMnO1xyXG5pbXBvcnQgSW5saW5lVGV4dEVkaXRvciBmcm9tIFwiLi9JbmxpbmVUZXh0RWRpdG9yXCI7XHJcbmltcG9ydCBGb250U2VsZWN0b3IgZnJvbSAnLi9Gb250U2VsZWN0b3InO1xyXG5pbXBvcnQgeyByZWVtcGxhemFyRm9uZG9TZWNjaW9uIGFzIHJlZW1wbGF6YXJGb25kbyB9IGZyb20gXCJAL3V0aWxzL2FjY2lvbmVzRm9uZG9cIjtcclxuaW1wb3J0IHsgZGVzYW5jbGFySW1hZ2VuRGVGb25kbyBhcyBkZXNhbmNsYXJGb25kbyB9IGZyb20gXCJAL3V0aWxzL2FjY2lvbmVzRm9uZG9cIjtcclxuaW1wb3J0IHsgYm9ycmFyU2VjY2lvbiBhcyBib3JyYXJTZWNjaW9uRXh0ZXJuYWwgfSBmcm9tIFwiQC91dGlscy9lZGl0b3JTZWNjaW9uZXNcIjtcclxuaW1wb3J0IHsgbW92ZXJTZWNjaW9uIGFzIG1vdmVyU2VjY2lvbkV4dGVybmFsIH0gZnJvbSBcIkAvdXRpbHMvZWRpdG9yU2VjY2lvbmVzXCI7XHJcbmltcG9ydCB7IHZhbGlkYXJQdW50b3NMaW5lYSwgZGV0ZWN0YXJJbnRlcnNlY2Npb25MaW5lYSB9IGZyb20gXCIuL2VkaXRvci9zZWxlY3Rpb24vc2VsZWN0aW9uVXRpbHNcIjtcclxuaW1wb3J0IHsgZ3VhcmRhclNlY2Npb25Db21vUGxhbnRpbGxhIH0gZnJvbSBcIkAvdXRpbHMvcGxhbnRpbGxhc1wiO1xyXG5pbXBvcnQgR2FsZXJpYUtvbnZhIGZyb20gXCJAL2NvbXBvbmVudHMvZWRpdG9yL0dhbGVyaWFLb252YVwiO1xyXG5pbXBvcnQgRm9uZG9TZWNjaW9uIGZyb20gJy4vZWRpdG9yL0ZvbmRvU2VjY2lvbic7XHJcbmltcG9ydCBNZW51T3BjaW9uZXNFbGVtZW50byBmcm9tIFwiLi9NZW51T3BjaW9uZXNFbGVtZW50b1wiO1xyXG5pbXBvcnQgeyBjYWxjR2FsbGVyeUxheW91dCB9IGZyb20gXCJAL3V0aWxzL2NhbGNHcmlkXCI7XHJcbmltcG9ydCBDb3VudGRvd25Lb252YSBmcm9tIFwiQC9jb21wb25lbnRzL2VkaXRvci9jb3VudGRvd24vQ291bnRkb3duS29udmFcIjtcclxuaW1wb3J0IHVzZUd1aWFzQ2VudHJhZG8gZnJvbSAnQC9ob29rcy91c2VHdWlhc0NlbnRyYWRvJztcclxuaW1wb3J0IEZsb2F0aW5nVGV4dFRvb2xiYXIgZnJvbSBcIkAvY29tcG9uZW50cy9lZGl0b3IvdG9vbGJhci9GbG9hdGluZ1RleHRUb29sYmFyXCI7XHJcbmltcG9ydCBTZWxlY3RvckNvbG9yU2VjY2lvbiBmcm9tIFwiLi9TZWxlY3RvckNvbG9yU2VjY2lvblwiO1xyXG5pbXBvcnQgS29udmEgZnJvbSBcImtvbnZhXCI7XHJcbmltcG9ydCB7IEFMTF9GT05UUyB9IGZyb20gJy4uL2NvbmZpZy9mb250cyc7XHJcbmltcG9ydCB7IHVzZUF1dGhDbGFpbXMgfSBmcm9tIFwiQC9ob29rcy91c2VBdXRoQ2xhaW1zXCI7XHJcbmltcG9ydCB7XHJcbiAgVHJhc2gyLFxyXG4gIExheWVycyxcclxuICBNb3ZlVXAsXHJcbiAgTW92ZURvd24sXHJcbiAgUGx1c0NpcmNsZSxcclxuICBTZXR0aW5ncyxcclxuICBVbmxpbmsyLFxyXG4gIE1vbml0b3IsXHJcbiAgQ2hldnJvbkRvd24sXHJcbiAgQ2hldnJvblVwLFxyXG59IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcclxuaW1wb3J0IHVzZUJvcnJhZG9yU3luYyBmcm9tIFwiLi9lZGl0b3IvcGVyc2lzdGVuY2UvdXNlQm9ycmFkb3JTeW5jXCI7XHJcbmltcG9ydCB1c2VTZWN0aW9uc01hbmFnZXIgZnJvbSBcIi4vZWRpdG9yL3NlY3Rpb25zL3VzZVNlY3Rpb25zTWFuYWdlclwiO1xyXG5pbXBvcnQgQ29uZmlybURlbGV0ZVNlY3Rpb25Nb2RhbCBmcm9tIFwiQC9jb21wb25lbnRzL2VkaXRvci9zZWN0aW9ucy9Db25maXJtRGVsZXRlU2VjdGlvbk1vZGFsXCI7XHJcbmltcG9ydCB1c2VFZGl0b3JFdmVudHMgZnJvbSBcIi4vZWRpdG9yL2V2ZW50cy91c2VFZGl0b3JFdmVudHNcIjtcclxuaW1wb3J0IHVzZUVkaXRvcldpbmRvd0JyaWRnZSBmcm9tIFwiLi9lZGl0b3Ivd2luZG93L3VzZUVkaXRvcldpbmRvd0JyaWRnZVwiO1xyXG5pbXBvcnQgdXNlSGlzdG9yeU1hbmFnZXIgZnJvbSBcIi4vZWRpdG9yL2hpc3RvcnkvdXNlSGlzdG9yeU1hbmFnZXJcIjtcclxuaW1wb3J0IHVzZUNhbnZhc1NjYWxlTGF5b3V0IGZyb20gXCJAL2NvbXBvbmVudHMvZWRpdG9yL21vYmlsZS91c2VDYW52YXNTY2FsZUxheW91dFwiO1xyXG5pbXBvcnQgdXNlQ2FudmFzSW50ZXJhY3Rpb25TdGF0ZSBmcm9tIFwiQC9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlQ2FudmFzSW50ZXJhY3Rpb25TdGF0ZVwiO1xyXG5pbXBvcnQgdXNlU3RhZ2VHZXN0dXJlcyBmcm9tIFwiLi9lZGl0b3IvbW9iaWxlL3VzZVN0YWdlR2VzdHVyZXNcIjtcclxuaW1wb3J0IHVzZU9wdGlvbkJ1dHRvblBvc2l0aW9uIGZyb20gXCJAL2NvbXBvbmVudHMvZWRpdG9yL292ZXJsYXlzL3VzZU9wdGlvbkJ1dHRvblBvc2l0aW9uXCI7XHJcbmltcG9ydCBDYW52YXNFbGVtZW50c0xheWVyIGZyb20gXCJAL2NvbXBvbmVudHMvY2FudmFzL0NhbnZhc0VsZW1lbnRzTGF5ZXJcIjtcclxuaW1wb3J0IERpdmlkZXJzT3ZlcmxheVN0YWdlIGZyb20gXCJAL2NvbXBvbmVudHMvY2FudmFzL0RpdmlkZXJzT3ZlcmxheVN0YWdlXCI7XHJcblxyXG5cclxuXHJcbktvbnZhLmRyYWdEaXN0YW5jZSA9IDg7XHJcblxyXG5mdW5jdGlvbiByZXNvbHZlS29udmFQaXhlbFJhdGlvKCkge1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gMTtcclxuXHJcbiAgY29uc3QgZHByID0gTnVtYmVyKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpO1xyXG4gIGNvbnN0IGNvYXJzZVBvaW50ZXIgPVxyXG4gICAgdHlwZW9mIHdpbmRvdy5tYXRjaE1lZGlhID09PSBcImZ1bmN0aW9uXCIgJiZcclxuICAgIHdpbmRvdy5tYXRjaE1lZGlhKFwiKHBvaW50ZXI6IGNvYXJzZSlcIikubWF0Y2hlcztcclxuICBjb25zdCBtaW5TaWRlID0gTWF0aC5taW4oTnVtYmVyKHdpbmRvdy5pbm5lcldpZHRoIHx8IDApLCBOdW1iZXIod2luZG93LmlubmVySGVpZ2h0IHx8IDApKTtcclxuICBjb25zdCBtb2JpbGVMaWtlID0gY29hcnNlUG9pbnRlciB8fCAobWluU2lkZSA+IDAgJiYgbWluU2lkZSA8PSAxMDI0KTtcclxuXHJcbiAgaWYgKG1vYmlsZUxpa2UpIHJldHVybiAxO1xyXG4gIHJldHVybiBNYXRoLm1pbihkcHIsIDIpO1xyXG59XHJcblxyXG5Lb252YS5waXhlbFJhdGlvID0gcmVzb2x2ZUtvbnZhUGl4ZWxSYXRpbygpO1xyXG5cclxuY29uc3QgQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEEgPSA1MDA7XHJcbmNvbnN0IEFMVFVSQV9QQU5UQUxMQV9FRElUT1IgPSA1MDA7XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemFyQWx0b01vZG8obW9kbykge1xyXG4gIGNvbnN0IG0gPSBTdHJpbmcobW9kbyB8fCBcImZpam9cIikudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gKG0gPT09IFwicGFudGFsbGFcIikgPyBcInBhbnRhbGxhXCIgOiBcImZpam9cIjtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNCb2xkRm9udFdlaWdodCh3ZWlnaHQpIHtcclxuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHdlaWdodCB8fCBcIm5vcm1hbFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gIHJldHVybiAoXHJcbiAgICBub3JtYWxpemVkID09PSBcImJvbGRcIiB8fFxyXG4gICAgbm9ybWFsaXplZCA9PT0gXCJib2xkZXJcIiB8fFxyXG4gICAgW1wiNTAwXCIsIFwiNjAwXCIsIFwiNzAwXCIsIFwiODAwXCIsIFwiOTAwXCJdLmluY2x1ZGVzKG5vcm1hbGl6ZWQpXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzb2x2ZUtvbnZhRm9udFN0eWxlKGZvbnRTdHlsZSwgZm9udFdlaWdodCkge1xyXG4gIGNvbnN0IHN0eWxlID0gU3RyaW5nKGZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gIGNvbnN0IGlzSXRhbGljID0gc3R5bGUuaW5jbHVkZXMoXCJpdGFsaWNcIikgfHwgc3R5bGUuaW5jbHVkZXMoXCJvYmxpcXVlXCIpO1xyXG4gIGNvbnN0IGlzQm9sZCA9IHN0eWxlLmluY2x1ZGVzKFwiYm9sZFwiKSB8fCBpc0JvbGRGb250V2VpZ2h0KGZvbnRXZWlnaHQpO1xyXG5cclxuICBpZiAoaXNCb2xkICYmIGlzSXRhbGljKSByZXR1cm4gXCJib2xkIGl0YWxpY1wiO1xyXG4gIGlmIChpc0JvbGQpIHJldHVybiBcImJvbGRcIjtcclxuICBpZiAoaXNJdGFsaWMpIHJldHVybiBcIml0YWxpY1wiO1xyXG4gIHJldHVybiBcIm5vcm1hbFwiO1xyXG59XHJcblxyXG4vLyA/Pz8gRlVOQ0nDk04gSEVMUEVSIFBBUkEgTElNUElBUiBVTkRFRklORURcclxuY29uc3QgbGltcGlhck9iamV0b1VuZGVmaW5lZCA9IChvYmopID0+IHtcclxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XHJcbiAgICByZXR1cm4gb2JqLm1hcChsaW1waWFyT2JqZXRvVW5kZWZpbmVkKTtcclxuICB9XHJcblxyXG4gIGlmIChvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcclxuICAgIGNvbnN0IG9iakxpbXBpbyA9IHt9O1xyXG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgIGNvbnN0IHZhbG9yID0gb2JqW2tleV07XHJcbiAgICAgIGlmICh2YWxvciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgb2JqTGltcGlvW2tleV0gPSBsaW1waWFyT2JqZXRvVW5kZWZpbmVkKHZhbG9yKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqTGltcGlvO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG9iajtcclxufTtcclxuXHJcbi8vIFV0aWxzIGRlIGN1cnNvciBnbG9iYWwgKGFycmliYSBkZWwgY29tcG9uZW50ZSlcclxuZnVuY3Rpb24gc2V0R2xvYmFsQ3Vyc29yKGN1cnNvciA9ICcnLCBzdGFnZVJlZiA9IG51bGwpIHtcclxuICB0cnkge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBjdXJzb3IgfHwgJyc7XHJcbiAgICAvLyA/PyBsaW1waWFtb3MgdGFtYmnDqW4gZWwgY29udGVuZWRvciBkZWwgU3RhZ2Ugc2kgZXhpc3RlXHJcbiAgICBjb25zdCBzdGFnZSA9IHN0YWdlUmVmPy5jdXJyZW50Py5jb250YWluZXI/LigpIHx8IG51bGw7XHJcbiAgICBpZiAoc3RhZ2UpIHN0YWdlLnN0eWxlLmN1cnNvciA9IGN1cnNvciB8fCAnJztcclxuICAgIC8vIGZhbGxiYWNrOiBjYW52YXMgcHJpbmNpcGFsXHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzLnBhcmVudEVsZW1lbnQpIGNhbnZhcy5wYXJlbnRFbGVtZW50LnN0eWxlLmN1cnNvciA9IGN1cnNvciB8fCAnJztcclxuICB9IGNhdGNoIHsgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhckdsb2JhbEN1cnNvcihzdGFnZVJlZiA9IG51bGwpIHtcclxuICBzZXRHbG9iYWxDdXJzb3IoJycsIHN0YWdlUmVmKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNJbmxpbmVEZWJ1Z0VuYWJsZWQoKSB7XHJcbiAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Ll9fSU5MSU5FX0RFQlVHICE9PSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0SW5saW5lTG9nUGF5bG9hZChwYXlsb2FkID0ge30pIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gU3RyaW5nKGVycm9yIHx8IHBheWxvYWQpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5saW5lRGVidWdMb2coZXZlbnQsIHBheWxvYWQgPSB7fSkge1xyXG4gIGlmICghaXNJbmxpbmVEZWJ1Z0VuYWJsZWQoKSkgcmV0dXJuO1xyXG4gIGNvbnN0IGVzc2VudGlhbEV2ZW50cyA9IG5ldyBTZXQoW1xyXG4gICAgXCJzdGFydC1pbmxpbmUtZWRpdFwiLFxyXG4gICAgXCJsaW5lYnJlYWstbW9kZWwtc3luY1wiLFxyXG4gICAgXCJsaW5lYnJlYWstdHJhbnNmb3JtZXJcIixcclxuICBdKTtcclxuICBpZiAoIWVzc2VudGlhbEV2ZW50cy5oYXMoZXZlbnQpKSByZXR1cm47XHJcbiAgY29uc3QgdHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgY29uc3QgYm9keSA9IGZvcm1hdElubGluZUxvZ1BheWxvYWQocGF5bG9hZCk7XHJcbiAgY29uc29sZS5sb2coYFtJTkxJTkVdWyR7dHN9XSAke2V2ZW50fVxcbiR7Ym9keX1gKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbmV4dElubGluZUZyYW1lTWV0YSgpIHtcclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgcmV0dXJuIHsgZnJhbWU6IG51bGwsIHBlcmZNczogbnVsbCB9O1xyXG4gIH1cclxuICBjb25zdCBwcmV2ID0gTnVtYmVyKHdpbmRvdy5fX0lOTElORV9GUkFNRV9TRVEgfHwgMCk7XHJcbiAgY29uc3QgbmV4dCA9IHByZXYgKyAxO1xyXG4gIHdpbmRvdy5fX0lOTElORV9GUkFNRV9TRVEgPSBuZXh0O1xyXG4gIGNvbnN0IHBlcmZNcyA9XHJcbiAgICB0eXBlb2Ygd2luZG93LnBlcmZvcm1hbmNlPy5ub3cgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICA/IE51bWJlcih3aW5kb3cucGVyZm9ybWFuY2Uubm93KCkudG9GaXhlZCgzKSlcclxuICAgICAgOiBudWxsO1xyXG4gIHJldHVybiB7IGZyYW1lOiBuZXh0LCBwZXJmTXMgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0SW5saW5lTGluZVN0YXRzKHZhbHVlKSB7XHJcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFN0cmluZyh2YWx1ZSA/PyBcIlwiKS5yZXBsYWNlKC9cXHJcXG4vZywgXCJcXG5cIik7XHJcbiAgY29uc3QgdHJhaWxpbmcgPSBub3JtYWxpemVkLm1hdGNoKC9cXG4rJC8pPy5bMF07XHJcbiAgcmV0dXJuIHtcclxuICAgIG5vcm1hbGl6ZWQsXHJcbiAgICBsZW5ndGg6IG5vcm1hbGl6ZWQubGVuZ3RoLFxyXG4gICAgbGluZUNvdW50OiBub3JtYWxpemVkID09PSBcIlwiID8gMSA6IG5vcm1hbGl6ZWQuc3BsaXQoXCJcXG5cIikubGVuZ3RoLFxyXG4gICAgdHJhaWxpbmdOZXdsaW5lczogdHJhaWxpbmcgPyB0cmFpbGluZy5sZW5ndGggOiAwLFxyXG4gIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlubGluZURlYnVnQUIocmF3Q29uZmlnKSB7XHJcbiAgY29uc3QgcmF3ID0gcmF3Q29uZmlnICYmIHR5cGVvZiByYXdDb25maWcgPT09IFwib2JqZWN0XCIgPyByYXdDb25maWcgOiB7fTtcclxuXHJcbiAgY29uc3QgdmlzaWJpbGl0eVNvdXJjZSA9XHJcbiAgICByYXcudmlzaWJpbGl0eVNvdXJjZSA9PT0gXCJ3aW5kb3dcIiA/IFwid2luZG93XCIgOiBcInJlYWN0aXZlXCI7XHJcblxyXG4gIGNvbnN0IGZpbmlzaE1vZGUgPVxyXG4gICAgcmF3LmZpbmlzaE1vZGUgPT09IFwiaW1tZWRpYXRlXCIgfHxcclxuICAgIHJhdy5maW5pc2hNb2RlID09PSBcInJhZlwiIHx8XHJcbiAgICByYXcuZmluaXNoTW9kZSA9PT0gXCJ0aW1lb3V0MTAwXCJcclxuICAgICAgPyByYXcuZmluaXNoTW9kZVxyXG4gICAgICA6IFwicmFmXCI7XHJcblxyXG4gIGNvbnN0IG92ZXJsYXlXaWR0aE1vZGUgPVxyXG4gICAgcmF3Lm92ZXJsYXlXaWR0aE1vZGUgPT09IFwiZml0LWNvbnRlbnRcIiA/IFwiZml0LWNvbnRlbnRcIiA6IFwibWVhc3VyZWRcIjtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHZpc2liaWxpdHlTb3VyY2UsXHJcbiAgICBmaW5pc2hNb2RlLFxyXG4gICAgb3ZlcmxheVdpZHRoTW9kZSxcclxuICB9O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2FudmFzRWRpdG9yKHtcclxuICBzbHVnLFxyXG4gIHpvb20gPSAxLFxyXG4gIG9uSGlzdG9yaWFsQ2hhbmdlLFxyXG4gIG9uRnV0dXJvc0NoYW5nZSxcclxuICB1c2VySWQsXHJcbiAgb25TdGFydHVwU3RhdHVzQ2hhbmdlLFxyXG59KSB7XHJcbiAgY29uc3QgW29iamV0b3MsIHNldE9iamV0b3NdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtjZWxkYUdhbGVyaWFBY3RpdmEsIHNldENlbGRhR2FsZXJpYUFjdGl2YV0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbc2VjY2lvbmVzLCBzZXRTZWNjaW9uZXNdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtoaXN0b3JpYWwsIHNldEhpc3RvcmlhbF0gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgW2Z1dHVyb3MsIHNldEZ1dHVyb3NdID0gdXNlU3RhdGUoW10pO1xyXG4gIGNvbnN0IFtlbGVtZW50b3NTZWxlY2Npb25hZG9zLCBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zXSA9IHVzZVN0YXRlKFtdKTtcclxuICBjb25zdCBbY2FyZ2Fkbywgc2V0Q2FyZ2Fkb10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3Qgc3RhZ2VSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgeyBkcmFnU3RhcnRQb3MsIGhhc0RyYWdnZWQsIGlzRHJhZ2dpbmcsIHNldElzRHJhZ2dpbmcgfSA9IHVzZUNhbnZhc0ludGVyYWN0aW9uU3RhdGUoKTtcclxuICBjb25zdCBpbXBlcmF0aXZlT2JqZWN0cyA9IHVzZUltcGVyYXRpdmVPYmplY3RzKCk7XHJcbiAgY29uc3QgW2FuaW1hbmRvU2VjY2lvbiwgc2V0QW5pbWFuZG9TZWNjaW9uXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtzZWNjaW9uQWN0aXZhSWQsIHNldFNlY2Npb25BY3RpdmFJZF0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbc2VsZWNjaW9uQWN0aXZhLCBzZXRTZWxlY2Npb25BY3RpdmFdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtpbmljaW9TZWxlY2Npb24sIHNldEluaWNpb1NlbGVjY2lvbl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbYXJlYVNlbGVjY2lvbiwgc2V0QXJlYVNlbGVjY2lvbl0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbZWxlbWVudG9zUHJlU2VsZWNjaW9uYWRvcywgc2V0RWxlbWVudG9zUHJlU2VsZWNjaW9uYWRvc10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgZ3VpYUxheWVyUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IFtob3ZlcklkLCBzZXRIb3ZlcklkXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IGFsdG9DYW52YXMgPSBzZWNjaW9uZXMucmVkdWNlKChhY2MsIHMpID0+IGFjYyArIHMuYWx0dXJhLCAwKSB8fCA4MDA7XHJcbiAgY29uc3QgW3NlY2Npb25lc0FuaW1hbmRvLCBzZXRTZWNjaW9uZXNBbmltYW5kb10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgY29uc3QgeyByZWZyZXNjYXI6IHJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24gfSA9IHVzZVBsYW50aWxsYXNEZVNlY2Npb24oKTtcclxuICBjb25zdCBbZWxlbWVudG9Db3BpYWRvLCBzZXRFbGVtZW50b0NvcGlhZG9dID0gdXNlU3RhdGUobnVsbCk7XHJcbiAgY29uc3QgZWxlbWVudFJlZnMgPSB1c2VSZWYoe30pO1xyXG4gIGNvbnN0IGlubGluZUVkaXRQcmV2aWV3UmVmID0gdXNlUmVmKHsgaWQ6IG51bGwsIGNlbnRlclg6IG51bGwgfSk7XHJcbiAgY29uc3QgaW5saW5lQ29tbWl0RGVidWdSZWYgPSB1c2VSZWYoeyBpZDogbnVsbCB9KTtcclxuICBjb25zdCBwcmV2RWRpdGluZ0lkUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IGlubGluZVJlbmRlclZhbHVlUmVmID0gdXNlUmVmKHsgaWQ6IG51bGwsIHZhbHVlOiBcIlwiIH0pO1xyXG4gIGNvbnN0IFtpbmxpbmVPdmVybGF5TW91bnRlZElkLCBzZXRJbmxpbmVPdmVybGF5TW91bnRlZElkXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IGNvbnRlbmVkb3JSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgZWRpdG9yT3ZlcmxheVJvb3RSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgYXV0b1NlY3Rpb25WaWV3cG9ydFJlZiA9IHVzZVJlZihudWxsKTtcclxuICBjb25zdCBhdXRvU2VjdGlvblNjcm9sbFJhZlJlZiA9IHVzZVJlZigwKTtcclxuICBjb25zdCBzZWNjaW9uQWN0aXZhSWRSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgaWdub3JlTmV4dFVwZGF0ZVJlZiA9IHVzZVJlZigwKTtcclxuICBjb25zdCBbYW5jaG9TdGFnZSwgc2V0QW5jaG9TdGFnZV0gPSB1c2VTdGF0ZSg4MDApO1xyXG4gIGNvbnN0IFttb3N0cmFyU2VsZWN0b3JGdWVudGUsIHNldE1vc3RyYXJTZWxlY3RvckZ1ZW50ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW21vc3RyYXJTdWJtZW51Q2FwYSwgc2V0TW9zdHJhclN1Ym1lbnVDYXBhXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBmdWVudGVzRGlzcG9uaWJsZXMgPSBBTExfRk9OVFM7XHJcbiAgY29uc3QgeyBlc0FkbWluLCBsb2FkaW5nQ2xhaW1zIH0gPSB1c2VBdXRoQ2xhaW1zKCk7XHJcbiAgY29uc3QgW2JhY2tncm91bmRMb2FkQnlTZWN0aW9uLCBzZXRCYWNrZ3JvdW5kTG9hZEJ5U2VjdGlvbl0gPSB1c2VTdGF0ZSh7fSk7XHJcbiAgY29uc3Qgc3RhcnR1cFN0YXR1c0ZpbmFsaXplZFJlZiA9IHVzZVJlZihmYWxzZSk7XHJcbiAgY29uc3QgW21vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkLCBzZXRNb2JpbGVCYWNrZ3JvdW5kRWRpdFNlY3Rpb25JZF0gPSB1c2VTdGF0ZShudWxsKTtcclxuICBjb25zdCBbZGVsZXRlU2VjdGlvbk1vZGFsLCBzZXREZWxldGVTZWN0aW9uTW9kYWxdID0gdXNlU3RhdGUoeyBpc09wZW46IGZhbHNlLCBzZWN0aW9uSWQ6IG51bGwgfSk7XHJcbiAgY29uc3QgW2lzRGVsZXRpbmdTZWN0aW9uLCBzZXRJc0RlbGV0aW5nU2VjdGlvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW21vYmlsZVNlY3Rpb25BY3Rpb25zT3Blbiwgc2V0TW9iaWxlU2VjdGlvbkFjdGlvbnNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBzdXBwb3J0c1BvaW50ZXJFdmVudHMgPVxyXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LlBvaW50ZXJFdmVudCAhPT0gXCJ1bmRlZmluZWRcIjtcclxuXHJcbiAgY29uc3QgaXNUZXh0UmVzaXplRGVidWdFbmFibGVkID0gKCkgPT5cclxuICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgQm9vbGVhbih3aW5kb3cuX19EQkdfVEVYVF9SRVNJWkUpO1xyXG5cclxuICBjb25zdCB0ZXh0UmVzaXplRGVidWcgPSAoLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKCFpc1RleHRSZXNpemVEZWJ1Z0VuYWJsZWQoKSkgcmV0dXJuO1xyXG4gICAgY29uc29sZS5sb2coXCJbVEVYVC1DT01NSVRdXCIsIC4uLmFyZ3MpO1xyXG4gIH07XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUJvcnJhZG9yU3luYyh7XHJcbiAgICBzbHVnLFxyXG4gICAgdXNlcklkLFxyXG5cclxuICAgIG9iamV0b3MsXHJcbiAgICBzZWNjaW9uZXMsXHJcbiAgICBjYXJnYWRvLFxyXG5cclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICBzZXRDYXJnYWRvLFxyXG4gICAgc2V0U2VjY2lvbkFjdGl2YUlkLFxyXG5cclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYsXHJcbiAgICBzdGFnZVJlZixcclxuXHJcbiAgICBub3JtYWxpemFyQWx0b01vZG8sXHJcbiAgICB2YWxpZGFyUHVudG9zTGluZWEsXHJcblxyXG4gICAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcclxuICB9KTtcclxuICBjb25zdCB7XHJcbiAgICBjb250cm9sYW5kb0FsdHVyYSxcclxuICAgIGluaWNpYXJDb250cm9sQWx0dXJhLFxyXG4gICAgZmluYWxpemFyQ29udHJvbEFsdHVyYSxcclxuICAgIHRvZ2dsZVBhbnRhbGxhQ29tcGxldGFTZWNjaW9uLFxyXG4gICAgaGFuZGxlQ3JlYXJTZWNjaW9uLFxyXG4gIH0gPSB1c2VTZWN0aW9uc01hbmFnZXIoe1xyXG4gICAgc2x1ZyxcclxuICAgIHNlY2Npb25lcyxcclxuICAgIHNldFNlY2Npb25lcyxcclxuICAgIG9iamV0b3MsXHJcbiAgICBzZXRPYmpldG9zLFxyXG4gICAgc2VjY2lvbkFjdGl2YUlkLFxyXG4gICAgc2V0U2VjY2lvbkFjdGl2YUlkLFxyXG5cclxuICAgIGNyZWFyU2VjY2lvbixcclxuICAgIG5vcm1hbGl6YXJBbHRvTW9kbyxcclxuICAgIGxpbXBpYXJPYmpldG9VbmRlZmluZWQsXHJcblxyXG4gICAgQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEEsXHJcblxyXG4gICAgc3RhZ2VSZWYsXHJcbiAgICBzZXRHbG9iYWxDdXJzb3IsXHJcbiAgICBjbGVhckdsb2JhbEN1cnNvcixcclxuICB9KTtcclxuICBjb25zdCBudWV2b1RleHRvUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIHVzZUVkaXRvckV2ZW50cyh7XHJcbiAgICBjZWxkYUdhbGVyaWFBY3RpdmEsXHJcbiAgICBzZXRDZWxkYUdhbGVyaWFBY3RpdmEsXHJcbiAgICBzZXRPYmpldG9zLFxyXG5cclxuICAgIHNlY2Npb25lcyxcclxuICAgIHNlY2Npb25BY3RpdmFJZCxcclxuXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG5cclxuICAgIG5vcm1hbGl6YXJBbHRvTW9kbyxcclxuICAgIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IsXHJcblxyXG4gICAgbnVldm9UZXh0b1JlZixcclxuICB9KTtcclxuXHJcbiAgY29uc3Qgc2VjY2lvbmVzT3JkZW5hZGFzID0gdXNlTWVtbyhcclxuICAgICgpID0+IFsuLi5zZWNjaW9uZXNdLnNvcnQoKGEsIGIpID0+IGEub3JkZW4gLSBiLm9yZGVuKSxcclxuICAgIFtzZWNjaW9uZXNdXHJcbiAgKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNldEJhY2tncm91bmRMb2FkQnlTZWN0aW9uKHt9KTtcclxuICAgIHN0YXJ0dXBTdGF0dXNGaW5hbGl6ZWRSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gIH0sIFtzbHVnXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUJhY2tncm91bmRJbWFnZVN0YXR1c0NoYW5nZSA9IHVzZUNhbGxiYWNrKChwYXlsb2FkKSA9PiB7XHJcbiAgICBjb25zdCBzZWN0aW9uSWQgPSBwYXlsb2FkPy5zZWN0aW9uSWQ7XHJcbiAgICBpZiAoIXNlY3Rpb25JZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGhhc0JhY2tncm91bmRJbWFnZSA9IHBheWxvYWQ/Lmhhc0JhY2tncm91bmRJbWFnZSA9PT0gdHJ1ZTtcclxuICAgIGNvbnN0IGltYWdlVXJsID0gdHlwZW9mIHBheWxvYWQ/LmltYWdlVXJsID09PSBcInN0cmluZ1wiID8gcGF5bG9hZC5pbWFnZVVybCA6IFwiXCI7XHJcbiAgICBjb25zdCBpbmNvbWluZ1N0YXR1cyA9IHR5cGVvZiBwYXlsb2FkPy5zdGF0dXMgPT09IFwic3RyaW5nXCIgPyBwYXlsb2FkLnN0YXR1cyA6IFwibG9hZGluZ1wiO1xyXG4gICAgY29uc3Qgc3RhdHVzID0gaGFzQmFja2dyb3VuZEltYWdlXHJcbiAgICAgID8gKGluY29taW5nU3RhdHVzID09PSBcImxvYWRlZFwiIHx8IGluY29taW5nU3RhdHVzID09PSBcImZhaWxlZFwiXHJcbiAgICAgICAgPyBpbmNvbWluZ1N0YXR1c1xyXG4gICAgICAgIDogXCJsb2FkaW5nXCIpXHJcbiAgICAgIDogXCJub25lXCI7XHJcblxyXG4gICAgc2V0QmFja2dyb3VuZExvYWRCeVNlY3Rpb24oKHByZXYpID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudCA9IHByZXZbc2VjdGlvbklkXTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGN1cnJlbnQgJiZcclxuICAgICAgICBjdXJyZW50LnN0YXR1cyA9PT0gc3RhdHVzICYmXHJcbiAgICAgICAgY3VycmVudC5oYXNCYWNrZ3JvdW5kSW1hZ2UgPT09IGhhc0JhY2tncm91bmRJbWFnZSAmJlxyXG4gICAgICAgIGN1cnJlbnQuaW1hZ2VVcmwgPT09IGltYWdlVXJsXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnByZXYsXHJcbiAgICAgICAgW3NlY3Rpb25JZF06IHtcclxuICAgICAgICAgIHN0YXR1cyxcclxuICAgICAgICAgIGhhc0JhY2tncm91bmRJbWFnZSxcclxuICAgICAgICAgIGltYWdlVXJsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGJhY2tncm91bmRMb2FkU3VtbWFyeSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHNlY3Rpb25zV2l0aEJhY2tncm91bmRJbWFnZSA9IChzZWNjaW9uZXMgfHwgW10pLmZpbHRlcigoc2VjY2lvbikgPT4gKFxyXG4gICAgICBzZWNjaW9uPy5mb25kb1RpcG8gPT09IFwiaW1hZ2VuXCIgJiZcclxuICAgICAgdHlwZW9mIHNlY2Npb24/LmZvbmRvSW1hZ2VuID09PSBcInN0cmluZ1wiICYmXHJcbiAgICAgIHNlY2Npb24uZm9uZG9JbWFnZW4udHJpbSgpLmxlbmd0aCA+IDBcclxuICAgICkpO1xyXG5cclxuICAgIGxldCBsb2FkZWQgPSAwO1xyXG4gICAgbGV0IGZhaWxlZCA9IDA7XHJcbiAgICBsZXQgcGVuZGluZyA9IDA7XHJcblxyXG4gICAgc2VjdGlvbnNXaXRoQmFja2dyb3VuZEltYWdlLmZvckVhY2goKHNlY2Npb24pID0+IHtcclxuICAgICAgY29uc3Qgc3RhdHVzID0gYmFja2dyb3VuZExvYWRCeVNlY3Rpb25bc2VjY2lvbi5pZF0/LnN0YXR1cztcclxuXHJcbiAgICAgIGlmICghc3RhdHVzIHx8IHN0YXR1cyA9PT0gXCJsb2FkaW5nXCIpIHtcclxuICAgICAgICBwZW5kaW5nICs9IDE7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc3RhdHVzID09PSBcImxvYWRlZFwiKSB7XHJcbiAgICAgICAgbG9hZGVkICs9IDE7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc3RhdHVzID09PSBcImZhaWxlZFwiKSB7XHJcbiAgICAgICAgZmFpbGVkICs9IDE7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBwZW5kaW5nICs9IDE7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbDogc2VjdGlvbnNXaXRoQmFja2dyb3VuZEltYWdlLmxlbmd0aCxcclxuICAgICAgbG9hZGVkLFxyXG4gICAgICBmYWlsZWQsXHJcbiAgICAgIHBlbmRpbmcsXHJcbiAgICB9O1xyXG4gIH0sIFtiYWNrZ3JvdW5kTG9hZEJ5U2VjdGlvbiwgc2VjY2lvbmVzXSk7XHJcblxyXG4gIGNvbnN0IGZpcnN0U2VjdGlvbkJhY2tncm91bmRSZWFkeSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGZpcnN0U2VjdGlvbiA9IHNlY2Npb25lc09yZGVuYWRhc1swXTtcbiAgICBpZiAoIWZpcnN0U2VjdGlvbikgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBoYXNCYWNrZ3JvdW5kSW1hZ2UgPVxuICAgICAgZmlyc3RTZWN0aW9uPy5mb25kb1RpcG8gPT09IFwiaW1hZ2VuXCIgJiZcbiAgICAgIHR5cGVvZiBmaXJzdFNlY3Rpb24/LmZvbmRvSW1hZ2VuID09PSBcInN0cmluZ1wiICYmXG4gICAgICBmaXJzdFNlY3Rpb24uZm9uZG9JbWFnZW4udHJpbSgpLmxlbmd0aCA+IDA7XG5cbiAgICBpZiAoIWhhc0JhY2tncm91bmRJbWFnZSkgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBzdGF0dXMgPSBiYWNrZ3JvdW5kTG9hZEJ5U2VjdGlvbltmaXJzdFNlY3Rpb24uaWRdPy5zdGF0dXM7XG4gICAgcmV0dXJuIHN0YXR1cyA9PT0gXCJsb2FkZWRcIiB8fCBzdGF0dXMgPT09IFwiZmFpbGVkXCI7XG4gIH0sIFtiYWNrZ3JvdW5kTG9hZEJ5U2VjdGlvbiwgc2VjY2lvbmVzT3JkZW5hZGFzXSk7XG5cbiAgY29uc3Qgc3RhcnR1cFJlYWR5ID0gY2FyZ2FkbyA9PT0gdHJ1ZSAmJiBmaXJzdFNlY3Rpb25CYWNrZ3JvdW5kUmVhZHk7XG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBvblN0YXJ0dXBTdGF0dXNDaGFuZ2UgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuO1xyXG4gICAgaWYgKHN0YXJ0dXBTdGF0dXNGaW5hbGl6ZWRSZWYuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgIHNsdWcsXHJcbiAgICAgIGRyYWZ0TG9hZGVkOiBjYXJnYWRvID09PSB0cnVlLFxyXG4gICAgICB0b3RhbEJhY2tncm91bmRzOiBiYWNrZ3JvdW5kTG9hZFN1bW1hcnkudG90YWwsXHJcbiAgICAgIGxvYWRlZEJhY2tncm91bmRzOiBiYWNrZ3JvdW5kTG9hZFN1bW1hcnkubG9hZGVkLFxyXG4gICAgICBmYWlsZWRCYWNrZ3JvdW5kczogYmFja2dyb3VuZExvYWRTdW1tYXJ5LmZhaWxlZCxcclxuICAgICAgcGVuZGluZ0JhY2tncm91bmRzOiBiYWNrZ3JvdW5kTG9hZFN1bW1hcnkucGVuZGluZyxcclxuICAgIH07XHJcblxyXG4gICAgaWYgKCFzdGFydHVwUmVhZHkpIHtcclxuICAgICAgb25TdGFydHVwU3RhdHVzQ2hhbmdlKHtcclxuICAgICAgICAuLi5wYXlsb2FkLFxyXG4gICAgICAgIHN0YXR1czogXCJydW5uaW5nXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNhbmNlbGxlZCA9IGZhbHNlO1xyXG4gICAgbGV0IHJhZkEgPSAwO1xyXG4gICAgbGV0IHJhZkIgPSAwO1xyXG5cclxuICAgIHJhZkEgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICByYWZCID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICBpZiAoY2FuY2VsbGVkKSByZXR1cm47XHJcbiAgICAgICAgc3RhcnR1cFN0YXR1c0ZpbmFsaXplZFJlZi5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgICBvblN0YXJ0dXBTdGF0dXNDaGFuZ2Uoe1xyXG4gICAgICAgICAgLi4ucGF5bG9hZCxcclxuICAgICAgICAgIHN0YXR1czogXCJyZWFkeVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGNhbmNlbGxlZCA9IHRydWU7XHJcbiAgICAgIGlmIChyYWZBKSBjYW5jZWxBbmltYXRpb25GcmFtZShyYWZBKTtcclxuICAgICAgaWYgKHJhZkIpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZkIpO1xyXG4gICAgfTtcclxuICB9LCBbXHJcbiAgICBiYWNrZ3JvdW5kTG9hZFN1bW1hcnkuZmFpbGVkLFxuICAgIGJhY2tncm91bmRMb2FkU3VtbWFyeS5sb2FkZWQsXG4gICAgYmFja2dyb3VuZExvYWRTdW1tYXJ5LnBlbmRpbmcsXG4gICAgYmFja2dyb3VuZExvYWRTdW1tYXJ5LnRvdGFsLFxuICAgIGZpcnN0U2VjdGlvbkJhY2tncm91bmRSZWFkeSxcbiAgICBjYXJnYWRvLFxuICAgIG9uU3RhcnR1cFN0YXR1c0NoYW5nZSxcbiAgICBzbHVnLFxuICAgIHN0YXJ0dXBSZWFkeSxcclxuICBdKTtcclxuXHJcbiAgY29uc3Qgc2VjY2lvblBlbmRpZW50ZUVsaW1pbmFyID0gdXNlTWVtbyhcclxuICAgICgpID0+IHNlY2Npb25lcy5maW5kKChzZWNjaW9uKSA9PiBzZWNjaW9uLmlkID09PSBkZWxldGVTZWN0aW9uTW9kYWwuc2VjdGlvbklkKSB8fCBudWxsLFxyXG4gICAgW3NlY2Npb25lcywgZGVsZXRlU2VjdGlvbk1vZGFsLnNlY3Rpb25JZF1cclxuICApO1xyXG5cclxuICBjb25zdCBjYW50aWRhZEVsZW1lbnRvc1NlY2Npb25QZW5kaWVudGUgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIGlmICghc2VjY2lvblBlbmRpZW50ZUVsaW1pbmFyPy5pZCkgcmV0dXJuIDA7XHJcbiAgICByZXR1cm4gb2JqZXRvcy5maWx0ZXIoKG9iaikgPT4gb2JqLnNlY2Npb25JZCA9PT0gc2VjY2lvblBlbmRpZW50ZUVsaW1pbmFyLmlkKS5sZW5ndGg7XHJcbiAgfSwgW29iamV0b3MsIHNlY2Npb25QZW5kaWVudGVFbGltaW5hcl0pO1xyXG5cclxuICBjb25zdCB7XHJcbiAgICBlZGl0aW5nLCAgICAgIC8vIHsgaWQsIHZhbHVlIH1cclxuICAgIHN0YXJ0RWRpdCwgICAgLy8gKGlkLCBpbml0aWFsKVxyXG4gICAgdXBkYXRlRWRpdCwgICAvLyAobnVldm9WYWxvcilcclxuICAgIGZpbmlzaEVkaXQgICAgLy8gKCkgPT4gdm9pZFxyXG4gIH0gPSB1c2VJbmxpbmVFZGl0b3IoKTtcclxuXHJcbiAgY29uc3Qgb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZSA9IHVzZUNhbGxiYWNrKChub2RlKSA9PiB7XHJcbiAgICBpZiAoIW5vZGUpIHJldHVybiBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2xhc3NOYW1lID0gbm9kZS5nZXRDbGFzc05hbWU/LigpIHx8IG51bGw7XHJcbiAgICAgIGNvbnN0IHggPSB0eXBlb2Ygbm9kZS54ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLngoKSA6IG51bGw7XHJcbiAgICAgIGNvbnN0IHkgPSB0eXBlb2Ygbm9kZS55ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnkoKSA6IG51bGw7XHJcbiAgICAgIGNvbnN0IHRleHRXaWR0aCA9XHJcbiAgICAgICAgY2xhc3NOYW1lID09PSBcIlRleHRcIiAmJiB0eXBlb2Ygbm9kZS5nZXRUZXh0V2lkdGggPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICAgPyBNYXRoLmNlaWwobm9kZS5nZXRUZXh0V2lkdGgoKSB8fCAwKVxyXG4gICAgICAgICAgOiBudWxsO1xyXG4gICAgICBjb25zdCByZWN0ID1cclxuICAgICAgICB0eXBlb2Ygbm9kZS5nZXRDbGllbnRSZWN0ID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgID8gbm9kZS5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiBmYWxzZSxcclxuICAgICAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxyXG4gICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICA6IG51bGw7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgY2xhc3NOYW1lLFxyXG4gICAgICAgIHgsXHJcbiAgICAgICAgeSxcclxuICAgICAgICB0ZXh0V2lkdGgsXHJcbiAgICAgICAgcmVjdDogcmVjdFxyXG4gICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgeDogcmVjdC54LFxyXG4gICAgICAgICAgICAgIHk6IHJlY3QueSxcclxuICAgICAgICAgICAgICB3aWR0aDogcmVjdC53aWR0aCxcclxuICAgICAgICAgICAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA6IG51bGwsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4geyBlcnJvcjogU3RyaW5nKGVycm9yKSB9O1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgY2VycmFyTWVudXNGbG90YW50ZXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKTtcclxuICAgIHNldE1vc3RyYXJTdWJtZW51Q2FwYShmYWxzZSk7XHJcbiAgICBzZXRNb3N0cmFyU2VsZWN0b3JGdWVudGUoZmFsc2UpO1xyXG4gICAgc2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vKGZhbHNlKTtcclxuICAgIHNldEhvdmVySWQobnVsbCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyA/Pz9FbGVtZW50byBhY3R1YWxtZW50ZSBzZWxlY2Npb25hZG8gKG8gbnVsbClcclxuICBjb25zdCBvYmpldG9TZWxlY2Npb25hZG8gPVxyXG4gICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPT09IDFcclxuICAgICAgPyBvYmpldG9zLmZpbmQobyA9PiBvLmlkID09PSBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdKVxyXG4gICAgICA6IG51bGw7XHJcblxyXG4gIGNvbnN0IFttb3N0cmFyU2VsZWN0b3JUYW1hbm8sIHNldE1vc3RyYXJTZWxlY3RvclRhbWFub10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgdGFtYW5pb3NEaXNwb25pYmxlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6ICgyNjAgLSA2KSAvIDIgKyAxIH0sIChfLCBpKSA9PiA2ICsgaSAqIDIpO1xyXG4gIGNvbnN0IGJvdG9uT3BjaW9uZXNSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIGNvbnN0IF9yZWZFdmVudFF1ZXVlZCA9IHVzZVJlZihuZXcgU2V0KCkpO1xyXG5cclxuICBjb25zdCByZWdpc3RlclJlZiA9IHVzZUNhbGxiYWNrKChpZCwgbm9kZSkgPT4ge1xyXG4gICAgaWYgKCFub2RlKSB7XHJcbiAgICAgIGRlbGV0ZSBlbGVtZW50UmVmcy5jdXJyZW50W2lkXTtcclxuICAgICAgaW1wZXJhdGl2ZU9iamVjdHMucmVnaXN0ZXJPYmplY3QoaWQsIG51bGwpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZWxlbWVudFJlZnMuY3VycmVudFtpZF0gPSBub2RlO1xyXG4gICAgaW1wZXJhdGl2ZU9iamVjdHMucmVnaXN0ZXJPYmplY3QoaWQsIG5vZGUpO1xyXG5cclxuICAgIC8vID8gRGVib3VuY2UgcG9yIGZyYW1lIHBhcmEgZXZpdGFyIHLDoWZhZ2FzIGRlIHJlLWF0dGFjaCBkZWwgVHJhbnNmb3JtZXJcclxuICAgIGlmIChfcmVmRXZlbnRRdWV1ZWQuY3VycmVudC5oYXMoaWQpKSByZXR1cm47XHJcbiAgICBfcmVmRXZlbnRRdWV1ZWQuY3VycmVudC5hZGQoaWQpO1xyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgIF9yZWZFdmVudFF1ZXVlZC5jdXJyZW50LmRlbGV0ZShpZCk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJlbGVtZW50LXJlZi1yZWdpc3RyYWRvXCIsIHsgZGV0YWlsOiB7IGlkIH0gfSlcclxuICAgICAgICApO1xyXG4gICAgICB9IGNhdGNoIHsgfVxyXG4gICAgfSk7XHJcbiAgfSwgW2ltcGVyYXRpdmVPYmplY3RzXSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICBjb25zdCBsb2FkZWRGb250RmFtaWxpZXNSZWYgPSB1c2VSZWYobmV3IFNldCgpKTtcclxuXHJcblxyXG4gIGNvbnN0IHtcclxuICAgIGlzTW9iaWxlLFxyXG4gICAgaXNNb2JpbGVQb3J0cmFpdCxcclxuICAgIHNjYWxlLFxyXG4gICAgYW5jaG9Db250ZW5lZG9yLFxyXG4gICAgZXNjYWxhQWN0aXZhLFxyXG4gICAgZXNjYWxhVmlzdWFsLFxyXG4gICAgd3JhcHBlckJhc2VXaWR0aCxcclxuICAgIGVzY2FsYUZpdE1vYmlsZVBvcnRyYWl0LFxyXG4gIH0gPSB1c2VDYW52YXNTY2FsZUxheW91dCh7XHJcbiAgICBjb250ZW5lZG9yUmVmLFxyXG4gICAgem9vbSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgbW9iaWxlVHlwb2dyYXBoeVRvb2xiYXJWaXNpYmxlID0gaXNNb2JpbGUgJiYgQm9vbGVhbihcclxuICAgIG9iamV0b1NlbGVjY2lvbmFkbyAmJlxyXG4gICAgKFxyXG4gICAgICBvYmpldG9TZWxlY2Npb25hZG8udGlwbyA9PT0gXCJ0ZXh0b1wiIHx8XHJcbiAgICAgIChcclxuICAgICAgICBvYmpldG9TZWxlY2Npb25hZG8udGlwbyA9PT0gXCJmb3JtYVwiICYmXHJcbiAgICAgICAgb2JqZXRvU2VsZWNjaW9uYWRvLmZpZ3VyYSA9PT0gXCJyZWN0XCIgJiZcclxuICAgICAgICB0eXBlb2Ygb2JqZXRvU2VsZWNjaW9uYWRvLnRleHRvID09PSBcInN0cmluZ1wiXHJcbiAgICAgIClcclxuICAgIClcclxuICApO1xyXG5cclxuICBjb25zdCBtb2JpbGVUZXh0VG9vbGJhclZpc2libGUgPVxyXG4gICAgbW9iaWxlVHlwb2dyYXBoeVRvb2xiYXJWaXNpYmxlIHx8XHJcbiAgICAoaXNNb2JpbGUgJiYgb2JqZXRvU2VsZWNjaW9uYWRvPy50aXBvID09PSBcImljb25vXCIpO1xyXG5cclxuICBjb25zdCBtb2JpbGVGb250U3RyaXBWaXNpYmxlID1cclxuICAgIG1vYmlsZVR5cG9ncmFwaHlUb29sYmFyVmlzaWJsZSAmJiBtb3N0cmFyU2VsZWN0b3JGdWVudGU7XHJcbiAgY29uc3QgbW9iaWxlU2l6ZVN0cmlwVmlzaWJsZSA9XHJcbiAgICBtb2JpbGVUeXBvZ3JhcGh5VG9vbGJhclZpc2libGUgJiYgbW9zdHJhclNlbGVjdG9yVGFtYW5vO1xyXG4gIGNvbnN0IG1vYmlsZUJvdHRvbVR5cG9ncmFwaHlTdHJpcFZpc2libGUgPVxyXG4gICAgbW9iaWxlRm9udFN0cmlwVmlzaWJsZSB8fCBtb2JpbGVTaXplU3RyaXBWaXNpYmxlO1xyXG4gIGNvbnN0IG9wdGlvbkJ1dHRvblNpemUgPSBpc01vYmlsZSA/IDM4IDogMjQ7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBkZXNpcmVkUmF0aW8gPSBpc01vYmlsZSA/IDEgOiByZXNvbHZlS29udmFQaXhlbFJhdGlvKCk7XHJcbiAgICBpZiAoS29udmEucGl4ZWxSYXRpbyAhPT0gZGVzaXJlZFJhdGlvKSB7XHJcbiAgICAgIEtvbnZhLnBpeGVsUmF0aW8gPSBkZXNpcmVkUmF0aW87XHJcbiAgICAgIHN0YWdlUmVmLmN1cnJlbnQ/LmdldFN0YWdlPy4oKT8uYmF0Y2hEcmF3Py4oKTtcclxuICAgIH1cclxuICB9LCBbaXNNb2JpbGVdKTtcclxuXHJcbiAgY29uc3QgaW5saW5lRGVidWdBQiA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgcmV0dXJuIG5vcm1hbGl6ZUlubGluZURlYnVnQUIobnVsbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9ybWFsaXplSW5saW5lRGVidWdBQih3aW5kb3cuX19JTkxJTkVfQUIpO1xyXG4gIH0sIFtlZGl0aW5nLmlkLCBlZGl0aW5nLnZhbHVlXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWlzTW9iaWxlICYmIG1vYmlsZVNlY3Rpb25BY3Rpb25zT3Blbikge1xyXG4gICAgICBzZXRNb2JpbGVTZWN0aW9uQWN0aW9uc09wZW4oZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtpc01vYmlsZSwgbW9iaWxlU2VjdGlvbkFjdGlvbnNPcGVuXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWlzTW9iaWxlKSByZXR1cm47XHJcbiAgICBzZXRNb2JpbGVTZWN0aW9uQWN0aW9uc09wZW4oZmFsc2UpO1xyXG4gIH0sIFtzZWNjaW9uQWN0aXZhSWQsIGlzTW9iaWxlXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZUlubGluZU92ZXJsYXlNb3VudENoYW5nZSA9IHVzZUNhbGxiYWNrKChpZCwgbW91bnRlZCkgPT4ge1xyXG4gICAgY29uc3Qgc2FmZUlkID0gaWQgfHwgbnVsbDtcclxuICAgIGlmICghc2FmZUlkKSByZXR1cm47XHJcblxyXG4gICAgc2V0SW5saW5lT3ZlcmxheU1vdW50ZWRJZCgocHJldmlvdXMpID0+IHtcclxuICAgICAgY29uc3QgbmV4dCA9IG1vdW50ZWQgPyBzYWZlSWQgOiAocHJldmlvdXMgPT09IHNhZmVJZCA/IG51bGwgOiBwcmV2aW91cyk7XHJcbiAgICAgIGlubGluZURlYnVnTG9nKFwib3ZlcmxheS1tb3VudGVkLXN0YXRlXCIsIHtcclxuICAgICAgICBpZDogc2FmZUlkLFxyXG4gICAgICAgIG1vdW50ZWQsXHJcbiAgICAgICAgcHJldmlvdXNPdmVybGF5TW91bnRlZElkOiBwcmV2aW91cyxcclxuICAgICAgICBuZXh0T3ZlcmxheU1vdW50ZWRJZDogbmV4dCxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBuZXh0O1xyXG4gICAgfSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBjYXB0dXJlSW5saW5lU25hcHNob3QgPSB1c2VDYWxsYmFjaygoZXZlbnROYW1lLCBleHRyYSA9IHt9KSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG4gICAgaWYgKCFpc0lubGluZURlYnVnRW5hYmxlZCgpKSByZXR1cm47XHJcbiAgICBpZiAod2luZG93Ll9fSU5MSU5FX1NOQVBTSE9UICE9PSB0cnVlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qgc25hcHNob3RBbGxvd2xpc3QgPSBuZXcgU2V0KFtcclxuICAgICAgXCJlbnRlcjogcHJlLXN0YXJ0XCIsXHJcbiAgICAgIFwiZW50ZXI6IGFmdGVyLXN0YXJ0LXN5bmNcIixcclxuICAgICAgXCJmaW5pc2g6IGJsdXJcIixcclxuICAgICAgXCJmaW5pc2g6IGFmdGVyLWZpbmlzaEVkaXRcIixcclxuICAgICAgXCJleGl0OiBpbW1lZGlhdGVcIixcclxuICAgIF0pO1xyXG4gICAgaWYgKCFzbmFwc2hvdEFsbG93bGlzdC5oYXMoZXZlbnROYW1lKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGZyYW1lTWV0YSA9IG5leHRJbmxpbmVGcmFtZU1ldGEoKTtcclxuICAgIGNvbnN0IHNuYXBzaG90SWQgPVxyXG4gICAgICBleHRyYS5pZCB8fFxyXG4gICAgICBlZGl0aW5nLmlkIHx8XHJcbiAgICAgIGlubGluZUNvbW1pdERlYnVnUmVmLmN1cnJlbnQ/LmlkIHx8XHJcbiAgICAgIHByZXZFZGl0aW5nSWRSZWYuY3VycmVudCB8fFxyXG4gICAgICBudWxsO1xyXG5cclxuICAgIGNvbnN0IG5vZGUgPSBzbmFwc2hvdElkID8gZWxlbWVudFJlZnMuY3VycmVudFtzbmFwc2hvdElkXSA6IG51bGw7XHJcbiAgICBjb25zdCBub2RlTWV0cmljcyA9IG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUobm9kZSk7XHJcbiAgICBjb25zdCBvYmpNZXRyaWNzID0gc25hcHNob3RJZFxyXG4gICAgICA/ICgoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBvYmogPSBvYmpldG9zLmZpbmQoKG8pID0+IG8uaWQgPT09IHNuYXBzaG90SWQpO1xyXG4gICAgICAgICAgaWYgKCFvYmopIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IG9iai5pZCxcclxuICAgICAgICAgICAgdGlwbzogb2JqLnRpcG8gfHwgbnVsbCxcclxuICAgICAgICAgICAgeDogTnVtYmVyLmlzRmluaXRlKG9iai54KSA/IG9iai54IDogbnVsbCxcclxuICAgICAgICAgICAgeTogTnVtYmVyLmlzRmluaXRlKG9iai55KSA/IG9iai55IDogbnVsbCxcclxuICAgICAgICAgICAgdGV4dG9MZW5ndGg6IFN0cmluZyhvYmoudGV4dG8gPz8gXCJcIikubGVuZ3RoLFxyXG4gICAgICAgICAgICBmb250U2l6ZTogTnVtYmVyLmlzRmluaXRlKG9iai5mb250U2l6ZSkgPyBvYmouZm9udFNpemUgOiBudWxsLFxyXG4gICAgICAgICAgICBsaW5lSGVpZ2h0OlxyXG4gICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShvYmoubGluZUhlaWdodCkgJiYgb2JqLmxpbmVIZWlnaHQgPiAwXHJcbiAgICAgICAgICAgICAgICA/IG9iai5saW5lSGVpZ2h0XHJcbiAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pKClcclxuICAgICAgOiBudWxsO1xyXG5cclxuICAgIGNvbnN0IHN0YWdlID0gc3RhZ2VSZWYuY3VycmVudD8uZ2V0U3RhZ2U/LigpIHx8IHN0YWdlUmVmLmN1cnJlbnQgfHwgbnVsbDtcclxuICAgIGxldCBzdGFnZVJlY3QgPSBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgciA9IHN0YWdlPy5jb250YWluZXI/LigpPy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpO1xyXG4gICAgICBpZiAocikge1xyXG4gICAgICAgIHN0YWdlUmVjdCA9IHtcclxuICAgICAgICAgIHg6IHIueCxcclxuICAgICAgICAgIHk6IHIueSxcclxuICAgICAgICAgIHdpZHRoOiByLndpZHRoLFxyXG4gICAgICAgICAgaGVpZ2h0OiByLmhlaWdodCxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgc3RhZ2VSZWN0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaW5saW5lUmVjdCA9IG51bGw7XHJcbiAgICBsZXQgaW5saW5lU3R5bGUgPSBudWxsO1xyXG4gICAgbGV0IGlubGluZUNvbnRlbnRSZWN0ID0gbnVsbDtcclxuICAgIGxldCBpbmxpbmVDb250ZW50TWV0cmljcyA9IG51bGw7XHJcbiAgICBpZiAoc25hcHNob3RJZCkge1xyXG4gICAgICBjb25zdCBzYWZlSWQgPSBTdHJpbmcoc25hcHNob3RJZCkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG4gICAgICBjb25zdCBvdmVybGF5RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmxpbmUtZWRpdG9yLWlkPVwiJHtzYWZlSWR9XCJdYCk7XHJcbiAgICAgIGlmIChvdmVybGF5RWwpIHtcclxuICAgICAgICBjb25zdCByID0gb3ZlcmxheUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGlubGluZVJlY3QgPSB7XHJcbiAgICAgICAgICB4OiByLngsXHJcbiAgICAgICAgICB5OiByLnksXHJcbiAgICAgICAgICB3aWR0aDogci53aWR0aCxcclxuICAgICAgICAgIGhlaWdodDogci5oZWlnaHQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpbmxpbmVTdHlsZSA9IHtcclxuICAgICAgICAgIGxlZnQ6IG92ZXJsYXlFbC5zdHlsZS5sZWZ0LFxyXG4gICAgICAgICAgdG9wOiBvdmVybGF5RWwuc3R5bGUudG9wLFxyXG4gICAgICAgICAgbWluV2lkdGg6IG92ZXJsYXlFbC5zdHlsZS5taW5XaWR0aCxcclxuICAgICAgICAgIG1heFdpZHRoOiBvdmVybGF5RWwuc3R5bGUubWF4V2lkdGgsXHJcbiAgICAgICAgICB3aWR0aDogb3ZlcmxheUVsLnN0eWxlLndpZHRoLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IG92ZXJsYXlFbC5xdWVyeVNlbGVjdG9yKCdbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXScpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRSZWN0ID0gY29udGVudEVsPy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpO1xyXG4gICAgICAgIGlmIChjb250ZW50UmVjdCkge1xyXG4gICAgICAgICAgaW5saW5lQ29udGVudFJlY3QgPSB7XHJcbiAgICAgICAgICAgIHg6IGNvbnRlbnRSZWN0LngsXHJcbiAgICAgICAgICAgIHk6IGNvbnRlbnRSZWN0LnksXHJcbiAgICAgICAgICAgIHdpZHRoOiBjb250ZW50UmVjdC53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjb250ZW50UmVjdC5oZWlnaHQsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbmxpbmVDb250ZW50TWV0cmljcyA9IGNvbnRlbnRFbFxyXG4gICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgc2Nyb2xsV2lkdGg6IGNvbnRlbnRFbC5zY3JvbGxXaWR0aCxcclxuICAgICAgICAgICAgICBjbGllbnRXaWR0aDogY29udGVudEVsLmNsaWVudFdpZHRoLFxyXG4gICAgICAgICAgICAgIGlzRm9jdXNlZDogZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gY29udGVudEVsLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA6IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgdHJhbnNmb3JtZXJSZWN0ID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVyID0gc3RhZ2U/LmZpbmRPbmU/LihcIlRyYW5zZm9ybWVyXCIpO1xyXG4gICAgICBpZiAodHJhbnNmb3JtZXIpIHtcclxuICAgICAgICBjb25zdCB0clJlY3QgPSB0cmFuc2Zvcm1lci5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgbm9kZXMgPSB0cmFuc2Zvcm1lci5ub2Rlcz8uKCkgfHwgW107XHJcbiAgICAgICAgdHJhbnNmb3JtZXJSZWN0ID0gdHJSZWN0XHJcbiAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICB4OiB0clJlY3QueCxcclxuICAgICAgICAgICAgICB5OiB0clJlY3QueSxcclxuICAgICAgICAgICAgICB3aWR0aDogdHJSZWN0LndpZHRoLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogdHJSZWN0LmhlaWdodCxcclxuICAgICAgICAgICAgICBub2Rlc0NvdW50OiBub2Rlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgaW5jbHVkZXNTbmFwc2hvdE5vZGU6ICEhKG5vZGUgJiYgbm9kZXMuaW5jbHVkZXMobm9kZSkpLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA6IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICB0cmFuc2Zvcm1lclJlY3QgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlubGluZURlYnVnTG9nKGBzbmFwc2hvdC0ke2V2ZW50TmFtZX1gLCB7XHJcbiAgICAgIC4uLmZyYW1lTWV0YSxcclxuICAgICAgLi4uZXh0cmEsXHJcbiAgICAgIGlkOiBzbmFwc2hvdElkLFxyXG4gICAgICBldmVudE5hbWUsXHJcbiAgICAgIGVkaXRpbmdJZDogZWRpdGluZy5pZCA/PyBudWxsLFxyXG4gICAgICBjdXJyZW50RWRpdGluZ0lkOiB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbCxcclxuICAgICAgb3ZlcmxheU1vdW50ZWRJZDogaW5saW5lT3ZlcmxheU1vdW50ZWRJZCA/PyBudWxsLFxyXG4gICAgICBpbmxpbmVBQjogaW5saW5lRGVidWdBQixcclxuICAgICAgZXNjYWxhVmlzdWFsLFxyXG4gICAgICBzdGFnZVJlY3QsXHJcbiAgICAgIG5vZGVNZXRyaWNzLFxyXG4gICAgICBvYmpNZXRyaWNzLFxyXG4gICAgICB0cmFuc2Zvcm1lclJlY3QsXHJcbiAgICAgIGlubGluZVJlY3QsXHJcbiAgICAgIGlubGluZVN0eWxlLFxyXG4gICAgICBpbmxpbmVDb250ZW50UmVjdCxcclxuICAgICAgaW5saW5lQ29udGVudE1ldHJpY3MsXHJcbiAgICAgIHNjcm9sbFg6IHdpbmRvdy5zY3JvbGxYLFxyXG4gICAgICBzY3JvbGxZOiB3aW5kb3cuc2Nyb2xsWSxcclxuICAgICAgaW5uZXJXaWR0aDogd2luZG93LmlubmVyV2lkdGgsXHJcbiAgICAgIGlubmVySGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXHJcbiAgICB9KTtcclxuICB9LCBbZWRpdGluZy5pZCwgZXNjYWxhVmlzdWFsLCBpbmxpbmVEZWJ1Z0FCLCBpbmxpbmVPdmVybGF5TW91bnRlZElkLCBvYmpldG9zLCBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50SWQgPSBlZGl0aW5nLmlkIHx8IG51bGw7XHJcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBTdHJpbmcoZWRpdGluZy52YWx1ZSA/PyBcIlwiKTtcclxuICAgIGNvbnN0IHByZXYgPSBpbmxpbmVSZW5kZXJWYWx1ZVJlZi5jdXJyZW50O1xyXG5cclxuICAgIGlmIChjdXJyZW50SWQgJiYgcHJldi5pZCA9PT0gY3VycmVudElkICYmIHByZXYudmFsdWUgIT09IGN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICBjb25zdCBwcmV2U3RhdHMgPSBnZXRJbmxpbmVMaW5lU3RhdHMocHJldi52YWx1ZSk7XHJcbiAgICAgIGNvbnN0IG5leHRTdGF0cyA9IGdldElubGluZUxpbmVTdGF0cyhjdXJyZW50VmFsdWUpO1xyXG4gICAgICBjb25zdCBsaW5lYnJlYWtDaGFuZ2VkID1cclxuICAgICAgICBwcmV2U3RhdHMubGluZUNvdW50ICE9PSBuZXh0U3RhdHMubGluZUNvdW50IHx8XHJcbiAgICAgICAgcHJldlN0YXRzLnRyYWlsaW5nTmV3bGluZXMgIT09IG5leHRTdGF0cy50cmFpbGluZ05ld2xpbmVzO1xyXG5cclxuICAgICAgaWYgKGxpbmVicmVha0NoYW5nZWQpIHtcclxuICAgICAgICBjb25zdCBmcmFtZU1ldGEgPSBuZXh0SW5saW5lRnJhbWVNZXRhKCk7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbY3VycmVudElkXSB8fCBudWxsO1xyXG4gICAgICAgIGNvbnN0IG5vZGVNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZShub2RlKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCkgfHwgc3RhZ2VSZWYuY3VycmVudCB8fCBudWxsO1xyXG4gICAgICAgIGxldCB0cmFuc2Zvcm1lclJlY3QgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lciA9IHN0YWdlPy5maW5kT25lPy4oXCJUcmFuc2Zvcm1lclwiKTtcclxuICAgICAgICAgIGlmICh0cmFuc2Zvcm1lcikge1xyXG4gICAgICAgICAgICBjb25zdCB0clJlY3QgPSB0cmFuc2Zvcm1lci5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiBmYWxzZSxcclxuICAgICAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxyXG4gICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IHRyYW5zZm9ybWVyLm5vZGVzPy4oKSB8fCBbXTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtZXJSZWN0ID0gdHJSZWN0XHJcbiAgICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAgIHg6IHRyUmVjdC54LFxyXG4gICAgICAgICAgICAgICAgICB5OiB0clJlY3QueSxcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6IHRyUmVjdC53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0clJlY3QuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICBub2Rlc0NvdW50OiBub2Rlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzRWRpdGluZ05vZGU6ICEhKG5vZGUgJiYgbm9kZXMuaW5jbHVkZXMobm9kZSkpLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIHRyYW5zZm9ybWVyUmVjdCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgb3ZlcmxheVJlY3QgPSBudWxsO1xyXG4gICAgICAgIGxldCBjb250ZW50UmVjdCA9IG51bGw7XHJcbiAgICAgICAgY29uc3Qgc2FmZUlkID0gU3RyaW5nKGN1cnJlbnRJZCkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG4gICAgICAgIGNvbnN0IG92ZXJsYXlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlubGluZS1lZGl0b3ItaWQ9XCIke3NhZmVJZH1cIl1gKTtcclxuICAgICAgICBpZiAob3ZlcmxheUVsKSB7XHJcbiAgICAgICAgICBjb25zdCByID0gb3ZlcmxheUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgb3ZlcmxheVJlY3QgPSB7XHJcbiAgICAgICAgICAgIHg6IHIueCxcclxuICAgICAgICAgICAgeTogci55LFxyXG4gICAgICAgICAgICB3aWR0aDogci53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiByLmhlaWdodCxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBvdmVybGF5RWwucXVlcnlTZWxlY3RvcignW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0nKTtcclxuICAgICAgICAgIGNvbnN0IGNyID0gY29udGVudEVsPy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpO1xyXG4gICAgICAgICAgaWYgKGNyKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnRSZWN0ID0ge1xyXG4gICAgICAgICAgICAgIHg6IGNyLngsXHJcbiAgICAgICAgICAgICAgeTogY3IueSxcclxuICAgICAgICAgICAgICB3aWR0aDogY3Iud2lkdGgsXHJcbiAgICAgICAgICAgICAgaGVpZ2h0OiBjci5oZWlnaHQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbmxpbmVEZWJ1Z0xvZyhcImxpbmVicmVhay10cmFuc2Zvcm1lclwiLCB7XHJcbiAgICAgICAgICAuLi5mcmFtZU1ldGEsXHJcbiAgICAgICAgICBpZDogY3VycmVudElkLFxyXG4gICAgICAgICAgcHJldkxlbmd0aDogcHJldlN0YXRzLmxlbmd0aCxcclxuICAgICAgICAgIG5leHRMZW5ndGg6IG5leHRTdGF0cy5sZW5ndGgsXHJcbiAgICAgICAgICBwcmV2TGluZUNvdW50OiBwcmV2U3RhdHMubGluZUNvdW50LFxyXG4gICAgICAgICAgbmV4dExpbmVDb3VudDogbmV4dFN0YXRzLmxpbmVDb3VudCxcclxuICAgICAgICAgIHByZXZUcmFpbGluZ05ld2xpbmVzOiBwcmV2U3RhdHMudHJhaWxpbmdOZXdsaW5lcyxcclxuICAgICAgICAgIG5leHRUcmFpbGluZ05ld2xpbmVzOiBuZXh0U3RhdHMudHJhaWxpbmdOZXdsaW5lcyxcclxuICAgICAgICAgIG92ZXJsYXlNb3VudGVkSWQ6IGlubGluZU92ZXJsYXlNb3VudGVkSWQgPz8gbnVsbCxcclxuICAgICAgICAgIG92ZXJsYXlSZWN0LFxyXG4gICAgICAgICAgY29udGVudFJlY3QsXHJcbiAgICAgICAgICBub2RlTWV0cmljcyxcclxuICAgICAgICAgIHRyYW5zZm9ybWVyUmVjdCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiaW5wdXQ6IGFmdGVyLXJlbmRlclwiLCB7XHJcbiAgICAgICAgaWQ6IGN1cnJlbnRJZCxcclxuICAgICAgICBwcmV2aW91c0xlbmd0aDogcHJldi52YWx1ZS5sZW5ndGgsXHJcbiAgICAgICAgdmFsdWVMZW5ndGg6IGN1cnJlbnRWYWx1ZS5sZW5ndGgsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlubGluZVJlbmRlclZhbHVlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgIGlkOiBjdXJyZW50SWQsXHJcbiAgICAgIHZhbHVlOiBjdXJyZW50VmFsdWUsXHJcbiAgICB9O1xyXG4gIH0sIFtcclxuICAgIGVkaXRpbmcuaWQsXHJcbiAgICBlZGl0aW5nLnZhbHVlLFxyXG4gICAgY2FwdHVyZUlubGluZVNuYXBzaG90LFxyXG4gICAgaW5saW5lT3ZlcmxheU1vdW50ZWRJZCxcclxuICAgIG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUsXHJcbiAgXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xyXG4gICAgaWYgKHdpbmRvdy5fX0lOTElORV9ERUJVRyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHdpbmRvdy5fX0lOTElORV9ERUJVRyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHdpbmRvdy5fX0lOTElORV9GUkFNRV9TRVEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aW5kb3cuX19JTkxJTkVfRlJBTUVfU0VRID0gMDtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRBQiA9IG5vcm1hbGl6ZUlubGluZURlYnVnQUIod2luZG93Ll9fSU5MSU5FX0FCKTtcclxuICAgIHdpbmRvdy5fX0lOTElORV9BQiA9IHsgLi4ubm9ybWFsaXplZEFCIH07XHJcbiAgICBpbmxpbmVEZWJ1Z0xvZyhcImRlYnVnLWVuYWJsZWRcIiwge1xyXG4gICAgICBlbmFibGVkOiB3aW5kb3cuX19JTkxJTkVfREVCVUcsXHJcbiAgICAgIGlubGluZUFCOiB3aW5kb3cuX19JTkxJTkVfQUIsXHJcbiAgICAgIGZyYW1lU2VxOiB3aW5kb3cuX19JTkxJTkVfRlJBTUVfU0VRLFxyXG4gICAgfSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgY3VycmVudElkID0gZWRpdGluZy5pZCB8fCBudWxsO1xyXG4gICAgY29uc3QgcHJldmlvdXNJZCA9IHByZXZFZGl0aW5nSWRSZWYuY3VycmVudDtcclxuXHJcbiAgICBpZiAoY3VycmVudElkICYmIGN1cnJlbnRJZCAhPT0gcHJldmlvdXNJZCkge1xyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImVudGVyOiByYWYxXCIsIHsgaWQ6IGN1cnJlbnRJZCwgcHJldmlvdXNJZCB9KTtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZW50ZXI6IHJhZjJcIiwgeyBpZDogY3VycmVudElkLCBwcmV2aW91c0lkIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWN1cnJlbnRJZCAmJiBwcmV2aW91c0lkKSB7XHJcbiAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImV4aXQ6IGltbWVkaWF0ZVwiLCB7IGlkOiBwcmV2aW91c0lkIH0pO1xyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImV4aXQ6IHJhZjFcIiwgeyBpZDogcHJldmlvdXNJZCB9KTtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZXhpdDogcmFmMlwiLCB7IGlkOiBwcmV2aW91c0lkIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcmV2RWRpdGluZ0lkUmVmLmN1cnJlbnQgPSBjdXJyZW50SWQ7XHJcbiAgfSwgW2VkaXRpbmcuaWQsIGNhcHR1cmVJbmxpbmVTbmFwc2hvdF0pO1xyXG5cclxuICBjb25zdCBmdWVudGVzTmVjZXNhcmlhcyA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgLy8gZnVlbnRlcyB1c2FkYXMgZW4gdGV4dG9zICsgY291bnRkb3duIChzaSBhcGxpY2EpICsgZm9ybWFzIGNvbiB0ZXh0byAocmVjdClcclxuICAgIGNvbnN0IGZvbnRzID0gKG9iamV0b3MgfHwgW10pXHJcbiAgICAgIC5maWx0ZXIobyA9PiAoby50aXBvID09PSBcInRleHRvXCIgfHwgby50aXBvID09PSBcImNvdW50ZG93blwiIHx8IChvLnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvLmZpZ3VyYSA9PT0gXCJyZWN0XCIpKSAmJiBvLmZvbnRGYW1pbHkpXHJcbiAgICAgIC5tYXAobyA9PiBTdHJpbmcoby5mb250RmFtaWx5KS5yZXBsYWNlKC9bJ1wiXS9nLCBcIlwiKS5zcGxpdChcIixcIilbMF0udHJpbSgpKVxyXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xyXG5cclxuICAgIHJldHVybiBbLi4ubmV3IFNldChmb250cyldO1xyXG4gIH0sIFtvYmpldG9zXSk7XHJcblxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcclxuICAgIHdpbmRvdy5lZGl0aW5nID0gZWRpdGluZztcclxuICB9LCBbZWRpdGluZy5pZCwgZWRpdGluZy52YWx1ZV0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQgPSB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbDtcclxuICAgIHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCA9IGVkaXRpbmc/LmlkIHx8IG51bGw7XHJcblxyXG4gICAgaW5saW5lRGVidWdMb2coXCJzeW5jLWdsb2JhbC1lZGl0aW5nXCIsIHtcclxuICAgICAgZWRpdGluZ0lkOiBlZGl0aW5nPy5pZCB8fCBudWxsLFxyXG4gICAgICB2YWx1ZUxlbmd0aDogU3RyaW5nKGVkaXRpbmc/LnZhbHVlID8/IFwiXCIpLmxlbmd0aCxcclxuICAgICAgcHJldmlvdXNDdXJyZW50RWRpdGluZ0lkLFxyXG4gICAgICBuZXh0Q3VycmVudEVkaXRpbmdJZDogd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaW5saW5lRGVidWdMb2coXCJzeW5jLWdsb2JhbC1lZGl0aW5nLWNsZWFudXBcIiwge1xyXG4gICAgICAgIGVkaXRpbmdJZDogZWRpdGluZz8uaWQgfHwgbnVsbCxcclxuICAgICAgICBjdXJyZW50RWRpdGluZ0lkOiB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbCxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh3aW5kb3cuZWRpdGluZyAmJiB3aW5kb3cuZWRpdGluZy5pZCA9PT0gZWRpdGluZy5pZCkge1xyXG4gICAgICAgIGRlbGV0ZSB3aW5kb3cuZWRpdGluZztcclxuICAgICAgfVxyXG4gICAgICBpZiAod2luZG93Ll9jdXJyZW50RWRpdGluZ0lkID09PSBlZGl0aW5nLmlkKSB7XHJcbiAgICAgICAgd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbZWRpdGluZy5pZF0pO1xyXG5cclxuXHJcbiAgLy8gPz8gRnVuY2nDs24gcGFyYSBhY3R1YWxpemFyIG9mZnNldHMgZGUgaW1hZ2VuIGRlIGZvbmRvIChTSU4gVU5ERUZJTkVEKVxyXG4gIGNvbnN0IGFjdHVhbGl6YXJPZmZzZXRGb25kbyA9IHVzZUNhbGxiYWNrKChzZWNjaW9uSWQsIG51ZXZvc09mZnNldHMsIGVzUHJldmlldyA9IGZhbHNlKSA9PiB7XHJcbiAgICBzZXRTZWNjaW9uZXMocHJldiA9PlxyXG4gICAgICBwcmV2Lm1hcChzID0+IHtcclxuICAgICAgICBpZiAocy5pZCAhPT0gc2VjY2lvbklkKSByZXR1cm4gcztcclxuXHJcbiAgICAgICAgLy8gPz8gQ1JFQVIgT0JKRVRPIExJTVBJT1xyXG4gICAgICAgIGNvbnN0IHNlY2Npb25BY3R1YWxpemFkYSA9IHsgLi4ucyB9O1xyXG5cclxuICAgICAgICAvLyA/PyBTT0xPIEFHUkVHQVIgQ0FNUE9TIFNJIFRJRU5FTiBWQUxPUkVTIFbDgUxJRE9TXHJcbiAgICAgICAgaWYgKG51ZXZvc09mZnNldHMub2Zmc2V0WCAhPT0gdW5kZWZpbmVkICYmIG51ZXZvc09mZnNldHMub2Zmc2V0WCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgc2VjY2lvbkFjdHVhbGl6YWRhLmZvbmRvSW1hZ2VuT2Zmc2V0WCA9IG51ZXZvc09mZnNldHMub2Zmc2V0WDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG51ZXZvc09mZnNldHMub2Zmc2V0WSAhPT0gdW5kZWZpbmVkICYmIG51ZXZvc09mZnNldHMub2Zmc2V0WSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgc2VjY2lvbkFjdHVhbGl6YWRhLmZvbmRvSW1hZ2VuT2Zmc2V0WSA9IG51ZXZvc09mZnNldHMub2Zmc2V0WTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzZWNjaW9uQWN0dWFsaXphZGE7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH0sIFtzZXRTZWNjaW9uZXNdKTtcclxuXHJcbiAgLy8gQXNpZ25hIHVuYSBpbWFnZW4gKHBvciBVUkwpIGEgbGEgY2VsZGEgYWN0aXZhXHJcbiAgZnVuY3Rpb24gYXNpZ25hckltYWdlbkFHYWxlcmlhKHVybCkge1xyXG4gICAgc2V0T2JqZXRvcygocHJldikgPT4ge1xyXG4gICAgICBpZiAoIWNlbGRhR2FsZXJpYUFjdGl2YSkgcmV0dXJuIHByZXY7XHJcbiAgICAgIGNvbnN0IHsgb2JqSWQsIGluZGV4IH0gPSBjZWxkYUdhbGVyaWFBY3RpdmE7XHJcbiAgICAgIGNvbnN0IGkgPSBwcmV2LmZpbmRJbmRleChvID0+IG8uaWQgPT09IG9iaklkICYmIG8udGlwbyA9PT0gXCJnYWxlcmlhXCIpO1xyXG4gICAgICBpZiAoaSA9PT0gLTEpIHJldHVybiBwcmV2O1xyXG5cclxuICAgICAgY29uc3QgY29waWEgPSBzdHJ1Y3R1cmVkQ2xvbmUocHJldik7XHJcbiAgICAgIGNvbnN0IGcgPSBjb3BpYVtpXTtcclxuICAgICAgLy8gU2VndXJpZGFkOiBxdWUgZXhpc3RhIHkgcXVlIGhheWEgY2VsbHNbaW5kZXhdXHJcbiAgICAgIGlmICghZz8uY2VsbHMgfHwgIWcuY2VsbHNbaW5kZXhdKSByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgIGcuY2VsbHNbaW5kZXhdID0ge1xyXG4gICAgICAgIC4uLihnLmNlbGxzW2luZGV4XSA/PyB7fSksXHJcbiAgICAgICAgbWVkaWFVcmw6IHVybCxcclxuICAgICAgICBmaXQ6IGcuY2VsbHNbaW5kZXhdPy5maXQgPz8gXCJjb3ZlclwiLFxyXG4gICAgICAgIGJnOiBnLmNlbGxzW2luZGV4XT8uYmcgPz8gXCIjZWVlXCIsXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBjb3BpYTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gTGltcGlhciBmbGFnIGRlIHJlc2l6ZSBhbCBtb250YXIgZWwgY29tcG9uZW50ZVxyXG4gICAgd2luZG93Ll9yZXNpemVEYXRhID0gbnVsbDtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IFttb3N0cmFyUGFuZWxaLCBzZXRNb3N0cmFyUGFuZWxaXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNTZWxlY3Rpb25Sb3RhdGluZywgc2V0SXNTZWxlY3Rpb25Sb3RhdGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIGNvbnN0IGxvZ09wdGlvbkJ1dHRvbk1lbnVEZWJ1ZyA9IHVzZUNhbGxiYWNrKChldmVudE5hbWUsIHBheWxvYWQgPSB7fSkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgd2luZG93Ll9fREJHX09QVElPTl9CVVRUT04gIT09IHRydWUpIHJldHVybjtcclxuICAgIGNvbnNvbGUubG9nKGBbT1BUSU9OLUJVVFRPTl1bTUVOVV0gJHtldmVudE5hbWV9YCwge1xyXG4gICAgICB0czogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAuLi5wYXlsb2FkLFxyXG4gICAgfSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCB0b2dnbGVQYW5lbE9wY2lvbmVzID0gdXNlQ2FsbGJhY2soKHNvdXJjZSA9IFwidW5rbm93blwiLCBuYXRpdmVFdmVudCA9IG51bGwpID0+IHtcclxuICAgIHNldE1vc3RyYXJQYW5lbFooKHByZXYpID0+IHtcclxuICAgICAgY29uc3QgbmV4dCA9ICFwcmV2O1xyXG4gICAgICBsb2dPcHRpb25CdXR0b25NZW51RGVidWcoXCJ0b2dnbGVcIiwge1xyXG4gICAgICAgIHNvdXJjZSxcclxuICAgICAgICBwcmV2LFxyXG4gICAgICAgIG5leHQsXHJcbiAgICAgICAgc2VsZWN0ZWRJZDogZWxlbWVudG9zU2VsZWNjaW9uYWRvcz8uWzBdID8/IG51bGwsXHJcbiAgICAgICAgc2VsZWN0aW9uQ291bnQ6IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoLFxyXG4gICAgICAgIGlzTW9iaWxlLFxyXG4gICAgICAgIG5hdGl2ZUV2ZW50VHlwZTogbmF0aXZlRXZlbnQ/LnR5cGUgPz8gbnVsbCxcclxuICAgICAgICBwb2ludGVyVHlwZTogbmF0aXZlRXZlbnQ/LnBvaW50ZXJUeXBlID8/IG51bGwsXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbmV4dDtcclxuICAgIH0pO1xyXG4gIH0sIFtlbGVtZW50b3NTZWxlY2Npb25hZG9zLCBpc01vYmlsZSwgbG9nT3B0aW9uQnV0dG9uTWVudURlYnVnXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsb2dPcHRpb25CdXR0b25NZW51RGVidWcoXCJwYW5lbC1zdGF0ZVwiLCB7XHJcbiAgICAgIG9wZW46IG1vc3RyYXJQYW5lbFosXHJcbiAgICAgIHNlbGVjdGVkSWQ6IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3M/LlswXSA/PyBudWxsLFxyXG4gICAgICBzZWxlY3Rpb25Db3VudDogZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGgsXHJcbiAgICAgIGlzTW9iaWxlLFxyXG4gICAgfSk7XHJcbiAgfSwgW1xyXG4gICAgbW9zdHJhclBhbmVsWixcclxuICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICBpc01vYmlsZSxcclxuICAgIGxvZ09wdGlvbkJ1dHRvbk1lbnVEZWJ1ZyxcclxuICBdKTtcclxuXHJcbiAgY29uc3QgbW92ZXJFbGVtZW50byA9IChhY2Npb24pID0+IHtcclxuICAgIGNvbnN0IGluZGV4ID0gb2JqZXRvcy5maW5kSW5kZXgoKG8pID0+IG8uaWQgPT09IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NbMF0pO1xyXG4gICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG51ZXZvcyA9IFsuLi5vYmpldG9zXTtcclxuICAgIGNvbnN0IFtlbGVtZW50b10gPSBudWV2b3Muc3BsaWNlKGluZGV4LCAxKTtcclxuXHJcbiAgICBpZiAoYWNjaW9uID09PSBcImFsLWZyZW50ZVwiKSB7XHJcbiAgICAgIG51ZXZvcy5wdXNoKGVsZW1lbnRvKTtcclxuICAgIH0gZWxzZSBpZiAoYWNjaW9uID09PSBcImFsLWZvbmRvXCIpIHtcclxuICAgICAgbnVldm9zLnVuc2hpZnQoZWxlbWVudG8pO1xyXG4gICAgfSBlbHNlIGlmIChhY2Npb24gPT09IFwic3ViaXJcIiAmJiBpbmRleCA8IG9iamV0b3MubGVuZ3RoIC0gMSkge1xyXG4gICAgICBudWV2b3Muc3BsaWNlKGluZGV4ICsgMSwgMCwgZWxlbWVudG8pO1xyXG4gICAgfSBlbHNlIGlmIChhY2Npb24gPT09IFwiYmFqYXJcIiAmJiBpbmRleCA+IDApIHtcclxuICAgICAgbnVldm9zLnNwbGljZShpbmRleCAtIDEsIDAsIGVsZW1lbnRvKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG51ZXZvcy5zcGxpY2UoaW5kZXgsIDAsIGVsZW1lbnRvKTsgLy8gc2luIGNhbWJpb3NcclxuICAgIH1cclxuXHJcbiAgICBzZXRPYmpldG9zKG51ZXZvcyk7XHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKTtcclxuICB9O1xyXG5cclxuXHJcblxyXG5cclxuICBjb25zdCB7XHJcbiAgICBvbkRlc2hhY2VyLFxyXG4gICAgb25SZWhhY2VyLFxyXG4gICAgb25EdXBsaWNhcixcclxuICAgIG9uRWxpbWluYXIsXHJcbiAgICBvbkNvcGlhcixcclxuICAgIG9uUGVnYXIsXHJcbiAgICBvbkNhbWJpYXJBbGluZWFjaW9uXHJcbiAgfSA9IHVzZUVkaXRvckhhbmRsZXJzKHtcclxuICAgIG9iamV0b3MsXHJcbiAgICBzZXRPYmpldG9zLFxyXG4gICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICBoaXN0b3JpYWwsXHJcbiAgICBzZXRIaXN0b3JpYWwsXHJcbiAgICBmdXR1cm9zLFxyXG4gICAgc2V0RnV0dXJvcyxcclxuICAgIHNldFNlY2Npb25lcyxcclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYsXHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaXHJcbiAgfSk7XHJcblxyXG5cclxuICB1c2VIaXN0b3J5TWFuYWdlcih7XHJcbiAgICBjYXJnYWRvLFxyXG4gICAgb2JqZXRvcyxcclxuICAgIHNlY2Npb25lcyxcclxuICAgIHNldEhpc3RvcmlhbCxcclxuICAgIHNldEZ1dHVyb3MsXHJcbiAgICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxyXG4gIH0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCk7XHJcbiAgICBpZiAoIXN0YWdlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgY29udGVudCA9IHN0YWdlLmNvbnRlbnQ7XHJcbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcclxuXHJcbiAgICAvLyA/IEVzdGFkbyBiYXNlOiBzY3JvbGwgdmVydGljYWwgcGVybWl0aWRvIHNvYnJlIGNhbnZhcyB2YWPDrW9cclxuICAgIGNvbnN0IHNldFNjcm9sbE1vZGUgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnRlbnQuc3R5bGUudG91Y2hBY3Rpb24gPSBcInBhbi15XCI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vID8gRHVyYW50ZSBkcmFnOiBibG9xdWVhciBzY3JvbGwgcGFyYSBlZGl0YXIgZmlub1xyXG4gICAgY29uc3Qgc2V0RWRpdE1vZGUgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnRlbnQuc3R5bGUudG91Y2hBY3Rpb24gPSBcIm5vbmVcIjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gPyBOVUVWTzogZXN0YWRvIFJlYWN0IGNvbmZpYWJsZSBwYXJhIFVJIChUcmFuc2Zvcm1lci9ob3Zlci9ldGMuKVxyXG4gICAgY29uc3Qgb25EcmFnU3RhcnQgPSAoKSA9PiB7XHJcbiAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uRHJhZ0VuZCA9ICgpID0+IHtcclxuICAgICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vID8gRmFpbHNhZmU6IHBvciBzaSB0ZXJtaW5hIOKAnHJhcm/igJ0gKHRvdWNoIGNhbmNlbCwgcG9pbnRlciB1cCwgZXRjLilcclxuICAgIGNvbnN0IHN0b3BEcmFnZ2luZyA9ICgpID0+IHtcclxuICAgICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7XHJcbiAgICAgIHNldFNjcm9sbE1vZGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gSW5pY2lhbFxyXG4gICAgc2V0U2Nyb2xsTW9kZSgpO1xyXG4gICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7IC8vID8/IHBvciBsYXMgZHVkYXMsIGFsIG1vbnRhclxyXG4gICAgY29udGVudC5zdHlsZS5XZWJraXRVc2VyU2VsZWN0ID0gXCJub25lXCI7XHJcbiAgICBjb250ZW50LnN0eWxlLldlYmtpdFRvdWNoQ2FsbG91dCA9IFwibm9uZVwiO1xyXG5cclxuICAgIC8vIEtvbnZhIGV2ZW50c1xyXG4gICAgc3RhZ2Uub24oXCJkcmFnc3RhcnRcIiwgc2V0RWRpdE1vZGUpO1xyXG4gICAgc3RhZ2Uub24oXCJkcmFnZW5kXCIsIHNldFNjcm9sbE1vZGUpO1xyXG5cclxuICAgIC8vID8gTlVFVk8gKFVJIHN0YXRlKVxyXG4gICAgc3RhZ2Uub24oXCJkcmFnc3RhcnRcIiwgb25EcmFnU3RhcnQpO1xyXG4gICAgc3RhZ2Uub24oXCJkcmFnZW5kXCIsIG9uRHJhZ0VuZCk7XHJcblxyXG4gICAgLy8gRmFpbHNhZmVzIChzaSBlbCBkcmFnIHRlcm1pbmEgcmFybylcclxuICAgIHN0YWdlLm9uKFwidG91Y2hlbmRcIiwgc3RvcERyYWdnaW5nKTtcclxuICAgIHN0YWdlLm9uKFwicG9pbnRlcnVwXCIsIHN0b3BEcmFnZ2luZyk7XHJcbiAgICBzdGFnZS5vbihcIm1vdXNldXBcIiwgc3RvcERyYWdnaW5nKTtcclxuICAgIHN0YWdlLm9uKFwidG91Y2hjYW5jZWxcIiwgc3RvcERyYWdnaW5nKTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBzdGFnZS5vZmYoXCJkcmFnc3RhcnRcIiwgc2V0RWRpdE1vZGUpO1xyXG4gICAgICBzdGFnZS5vZmYoXCJkcmFnZW5kXCIsIHNldFNjcm9sbE1vZGUpO1xyXG5cclxuICAgICAgc3RhZ2Uub2ZmKFwiZHJhZ3N0YXJ0XCIsIG9uRHJhZ1N0YXJ0KTtcclxuICAgICAgc3RhZ2Uub2ZmKFwiZHJhZ2VuZFwiLCBvbkRyYWdFbmQpO1xyXG5cclxuICAgICAgc3RhZ2Uub2ZmKFwidG91Y2hlbmRcIiwgc3RvcERyYWdnaW5nKTtcclxuICAgICAgc3RhZ2Uub2ZmKFwicG9pbnRlcnVwXCIsIHN0b3BEcmFnZ2luZyk7XHJcbiAgICAgIHN0YWdlLm9mZihcIm1vdXNldXBcIiwgc3RvcERyYWdnaW5nKTtcclxuICAgICAgc3RhZ2Uub2ZmKFwidG91Y2hjYW5jZWxcIiwgc3RvcERyYWdnaW5nKTtcclxuICAgIH07XHJcbiAgfSwgW3NldElzRHJhZ2dpbmddKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IHN0YWdlID0gc3RhZ2VSZWYuY3VycmVudD8uZ2V0U3RhZ2U/LigpIHx8IHN0YWdlUmVmLmN1cnJlbnQ7XHJcbiAgICBjb25zdCBjb250ZW50ID0gc3RhZ2U/LmNvbnRlbnQgfHwgc3RhZ2U/LmNvbnRhaW5lcj8uKCk7XHJcbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBzZXREcmFnRGlzdGFuY2VGb3JJbnB1dCA9IChwb2ludGVyVHlwZSkgPT4ge1xyXG4gICAgICBjb25zdCBpc1RvdWNoTGlrZSA9XHJcbiAgICAgICAgcG9pbnRlclR5cGUgPT09IFwidG91Y2hcIiB8fFxyXG4gICAgICAgIHBvaW50ZXJUeXBlID09PSBcInBlblwiIHx8XHJcbiAgICAgICAgKHR5cGVvZiBwb2ludGVyVHlwZSAhPT0gXCJzdHJpbmdcIiAmJiBpc01vYmlsZSk7XHJcbiAgICAgIEtvbnZhLmRyYWdEaXN0YW5jZSA9IGlzVG91Y2hMaWtlID8gMTQgOiA1O1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvblBvaW50ZXJEb3duID0gKGV2ZW50KSA9PiBzZXREcmFnRGlzdGFuY2VGb3JJbnB1dChldmVudC5wb2ludGVyVHlwZSk7XHJcbiAgICBjb25zdCBvblRvdWNoU3RhcnQgPSAoKSA9PiBzZXREcmFnRGlzdGFuY2VGb3JJbnB1dChcInRvdWNoXCIpO1xyXG4gICAgY29uc3Qgb25Nb3VzZURvd24gPSAoKSA9PiBzZXREcmFnRGlzdGFuY2VGb3JJbnB1dChcIm1vdXNlXCIpO1xyXG5cclxuICAgIHNldERyYWdEaXN0YW5jZUZvcklucHV0KGlzTW9iaWxlID8gXCJ0b3VjaFwiIDogXCJtb3VzZVwiKTtcclxuXHJcbiAgICBjb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBvblBvaW50ZXJEb3duLCB7IHBhc3NpdmU6IHRydWUgfSk7XHJcbiAgICBjb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIG9uVG91Y2hTdGFydCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xyXG4gICAgY29udGVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uTW91c2VEb3duLCB7IHBhc3NpdmU6IHRydWUgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgY29udGVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgb25Qb2ludGVyRG93bik7XHJcbiAgICAgIGNvbnRlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgb25Ub3VjaFN0YXJ0KTtcclxuICAgICAgY29udGVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uTW91c2VEb3duKTtcclxuICAgIH07XHJcbiAgfSwgW2lzTW9iaWxlXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIC8vIFJlY29yZGFyIMO6bHRpbWEgc2VjY2nDs24gYWN0aXZhXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNlY2Npb25BY3RpdmFJZFJlZi5jdXJyZW50ID0gc2VjY2lvbkFjdGl2YUlkO1xyXG4gIH0sIFtzZWNjaW9uQWN0aXZhSWRdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChzZWNjaW9uQWN0aXZhSWQpIHdpbmRvdy5fbGFzdFNlY2Npb25BY3RpdmFJZCA9IHNlY2Npb25BY3RpdmFJZDtcclxuICB9LCBbc2VjY2lvbkFjdGl2YUlkXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIW1vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkKSB7XHJcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNhbGlyLW1vZG8tbW92ZXItZm9uZG9cIikpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgIG5ldyBDdXN0b21FdmVudChcImFjdGl2YXItbW9kby1tb3Zlci1mb25kb1wiLCB7XHJcbiAgICAgICAgZGV0YWlsOiB7IHNlY3Rpb25JZDogbW9iaWxlQmFja2dyb3VuZEVkaXRTZWN0aW9uSWQgfSxcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfSwgW21vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkXSk7XHJcblxyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghbnVldm9UZXh0b1JlZi5jdXJyZW50KSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qgb2JqID0gb2JqZXRvcy5maW5kKChvKSA9PiBvLmlkID09PSBudWV2b1RleHRvUmVmLmN1cnJlbnQpO1xyXG4gICAgaWYgKG9iaikge1xyXG4gICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtvYmouaWRdKTtcclxuICAgICAgLy8gTk8gaW5pY2lhciBlZGljacOzbiBhdXRvbcOhdGljYW1lbnRlIC0gc29sbyBzZWxlY2Npb25hclxyXG4gICAgICBudWV2b1RleHRvUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gIH0sIFtvYmpldG9zXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBoYW5kbGVDbGlja0Z1ZXJhID0gKGUpID0+IHtcclxuICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KFwiLnBvcHVwLWZ1ZW50ZVwiKSkge1xyXG4gICAgICAgIHNldE1vc3RyYXJTZWxlY3RvckZ1ZW50ZShmYWxzZSk7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tGdWVyYSk7XHJcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja0Z1ZXJhKTtcclxuICB9LCBbXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAob25IaXN0b3JpYWxDaGFuZ2UpIHtcclxuXHJcbiAgICAgIG9uSGlzdG9yaWFsQ2hhbmdlKGhpc3RvcmlhbCk7XHJcbiAgICB9XHJcbiAgfSwgW2hpc3RvcmlhbCwgb25IaXN0b3JpYWxDaGFuZ2VdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChvbkZ1dHVyb3NDaGFuZ2UpIHtcclxuXHJcbiAgICAgIG9uRnV0dXJvc0NoYW5nZShmdXR1cm9zKTtcclxuICAgIH1cclxuICB9LCBbZnV0dXJvcywgb25GdXR1cm9zQ2hhbmdlXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBQcmUtY2FyZ2FyIGZ1ZW50ZXMgcG9wdWxhcmVzIGFsIGluaWNpYXJcclxuICAgIGZvbnRNYW5hZ2VyLnByZWxvYWRQb3B1bGFyRm9udHMoKTtcclxuXHJcbiAgICAvLyBFc2N1Y2hhciBldmVudG8gZGUgZnVlbnRlcyBjYXJnYWRhcyBwYXJhIHJlZGlidWphclxyXG4gICAgY29uc3QgaGFuZGxlRm9udHNMb2FkZWQgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChzdGFnZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgc3RhZ2VSZWYuY3VycmVudC5iYXRjaERyYXcoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZm9udHMtbG9hZGVkJywgaGFuZGxlRm9udHNMb2FkZWQpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb250cy1sb2FkZWQnLCBoYW5kbGVGb250c0xvYWRlZCk7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBhbGl2ZSA9IHRydWU7XHJcblxyXG4gICAgYXN5bmMgZnVuY3Rpb24gcHJlY2FyZ2FyKCkge1xyXG4gICAgICAvLyBTb2xvIHByZWNhcmdhciBmdWVudGVzIG51ZXZhcyBwYXJhIGV2aXRhciByZS1yZW5kZXJzIGdsb2JhbGVzIGRlbCBzdGFnZVxyXG4gICAgICBpZiAoIWZ1ZW50ZXNOZWNlc2FyaWFzLmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgICBjb25zdCBwZW5kaWVudGVzID0gZnVlbnRlc05lY2VzYXJpYXMuZmlsdGVyKFxyXG4gICAgICAgIChmb250TmFtZSkgPT4gIWxvYWRlZEZvbnRGYW1pbGllc1JlZi5jdXJyZW50Lmhhcyhmb250TmFtZSlcclxuICAgICAgKTtcclxuICAgICAgaWYgKCFwZW5kaWVudGVzLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyA/IElkZWFsOiBxdWUgZm9udE1hbmFnZXIubG9hZEZvbnRzIGRldnVlbHZhIFByb21pc2VcclxuICAgICAgICAvLyBTaSBob3kgbm8gZGV2dWVsdmUsIGlndWFsIGxvIHJlc29sdmVtb3MgY29uIGRvY3VtZW50LmZvbnRzIG3DoXMgYWJham8uXHJcbiAgICAgICAgY29uc3QgbWF5YmVQcm9taXNlID0gZm9udE1hbmFnZXIubG9hZEZvbnRzPy4ocGVuZGllbnRlcyk7XHJcblxyXG4gICAgICAgIC8vIFNpIGRldnVlbHZlIHByb21pc2UsIGVzcGVyYW1vc1xyXG4gICAgICAgIGlmIChtYXliZVByb21pc2UgJiYgdHlwZW9mIG1heWJlUHJvbWlzZS50aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgIGF3YWl0IG1heWJlUHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID8gU2VndW5kbyBzZWd1cm86IGVzcGVyYXIgYSBxdWUgZWwgYnJvd3NlciBjb25maXJtZVxyXG4gICAgICAgIC8vIChlc3RvIGdhcmFudGl6YSBxdWUgbm8gaGF5YSBmYWxsYmFjaylcclxuICAgICAgICBpZiAoZG9jdW1lbnQ/LmZvbnRzPy5sb2FkKSB7XHJcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgcGVuZGllbnRlcy5tYXAoZiA9PlxyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmxvYWQoYDE2cHggXCIke2Z9XCJgKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFsaXZlKSByZXR1cm47XHJcbiAgICAgICAgcGVuZGllbnRlcy5mb3JFYWNoKChmb250TmFtZSkgPT4gbG9hZGVkRm9udEZhbWlsaWVzUmVmLmN1cnJlbnQuYWRkKGZvbnROYW1lKSk7XHJcblxyXG4gICAgICAgIC8vIFJlZHJhdyBwb3Igc2kgYWNhc29cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgc3RhZ2VSZWYuY3VycmVudD8uYmF0Y2hEcmF3Py4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIj8/IEVycm9yIHByZWNhcmdhbmRvIGZ1ZW50ZXM6XCIsIGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU29sbyBwcmVjYXJnYXIgY3VhbmRvIHlhIGNhcmdhc3RlIGVsIGJvcnJhZG9yIChwYXJhIGV2aXRhciBvdmVybGF5IHJhcm8pXHJcbiAgICBpZiAoY2FyZ2FkbykgcHJlY2FyZ2FyKCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHsgYWxpdmUgPSBmYWxzZTsgfTtcclxuICB9LCBbY2FyZ2FkbywgZnVlbnRlc05lY2VzYXJpYXNdKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcblxyXG4gIH0sIFtzZWxlY2Npb25BY3RpdmEsIGFyZWFTZWxlY2Npb24sIGluaWNpb1NlbGVjY2lvbl0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICBjb25zdCBhY3R1YWxpemFyT2JqZXRvID0gKGluZGV4LCBudWV2bykgPT4ge1xyXG4gICAgY29uc3QgbnVldm9zID0gWy4uLm9iamV0b3NdO1xyXG4gICAgY29uc3QgeyBmcm9tVHJhbnNmb3JtLCAuLi5jbGVhbk51ZXZvIH0gPSBudWV2bztcclxuXHJcbiAgICAvLyBQcmVzZXJ2YXIgZGF0b3MgZXNwZWPDrWZpY29zIHNlZ8O6biBlbCB0aXBvIGRlIG9iamV0b1xyXG4gICAgaWYgKG51ZXZvc1tpbmRleF0udGlwbyA9PT0gJ2Zvcm1hJyAmJiBudWV2b3NbaW5kZXhdLmZpZ3VyYSA9PT0gJ2xpbmUnKSB7XHJcbiAgICAgIC8vIFBhcmEgbMOtbmVhcywgYXNlZ3VyYXIgcXVlIGxvcyBwdW50b3Mgc2UgcHJlc2VydmVuXHJcbiAgICAgIG51ZXZvc1tpbmRleF0gPSB7XHJcbiAgICAgICAgLi4ubnVldm9zW2luZGV4XSxcclxuICAgICAgICAuLi5jbGVhbk51ZXZvLFxyXG4gICAgICAgIHBvaW50czogY2xlYW5OdWV2by5wb2ludHMgfHwgbnVldm9zW2luZGV4XS5wb2ludHMgfHwgWzAsIDAsIDEwMCwgMF1cclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG51ZXZvc1tpbmRleF0gPSB7IC4uLm51ZXZvc1tpbmRleF0sIC4uLmNsZWFuTnVldm8gfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRPYmpldG9zKG51ZXZvcyk7XHJcbiAgfTtcclxuXHJcblxyXG4gIGNvbnN0IGFjdHVhbGl6YXJPYmpldG9Qb3JJZCA9IChpZCwgY2FtYmlvcykgPT4ge1xyXG4gICAgY29uc3QgaW5kZXggPSBvYmpldG9zLmZpbmRJbmRleCgobykgPT4gby5pZCA9PT0gaWQpO1xyXG4gICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGNvbnNvbGUud2FybihcIj8gTm8gc2UgZW5jb250csOzIGVsIG9iamV0byBjb24gSUQ6XCIsIGlkKTtcclxuICAgIGFjdHVhbGl6YXJPYmpldG8oaW5kZXgsIGNhbWJpb3MpO1xyXG4gIH07XHJcblxyXG5cclxuXHJcblxyXG4gIGNvbnN0IG5vcm1hbGl6YXJNZWRpZGFzR2FsZXJpYSA9IHVzZUNhbGxiYWNrKChnYWxlcmlhLCB3aWR0aENhbmRpZGF0ZSwgeENhbmRpZGF0ZSkgPT4ge1xyXG4gICAgY29uc3QgY2FudmFzV2lkdGggPSA4MDA7XHJcbiAgICBjb25zdCByb3dzID0gTWF0aC5tYXgoMSwgTnVtYmVyKGdhbGVyaWE/LnJvd3MpIHx8IDEpO1xyXG4gICAgY29uc3QgY29scyA9IE1hdGgubWF4KDEsIE51bWJlcihnYWxlcmlhPy5jb2xzKSB8fCAxKTtcclxuICAgIGNvbnN0IGdhcCA9IE1hdGgubWF4KDAsIE51bWJlcihnYWxlcmlhPy5nYXApIHx8IDApO1xyXG4gICAgY29uc3QgY2VsbFJhdGlvID1cclxuICAgICAgZ2FsZXJpYT8ucmF0aW8gPT09IFwiNDozXCJcclxuICAgICAgICA/IDMgLyA0XHJcbiAgICAgICAgOiBnYWxlcmlhPy5yYXRpbyA9PT0gXCIxNjo5XCJcclxuICAgICAgICAgID8gOSAvIDE2XHJcbiAgICAgICAgICA6IDE7XHJcblxyXG4gICAgY29uc3QgbWluR3JpZFdpZHRoID0gZ2FwICogKGNvbHMgLSAxKSArIGNvbHM7XHJcbiAgICBsZXQgd2lkdGhQY3QgPSAoTnVtYmVyKHdpZHRoQ2FuZGlkYXRlKSAvIGNhbnZhc1dpZHRoKSAqIDEwMDtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHdpZHRoUGN0KSkgd2lkdGhQY3QgPSBOdW1iZXIoZ2FsZXJpYT8ud2lkdGhQY3QpO1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUod2lkdGhQY3QpKSB3aWR0aFBjdCA9IDcwO1xyXG4gICAgd2lkdGhQY3QgPSBNYXRoLm1heCgxMCwgTWF0aC5taW4oMTAwLCB3aWR0aFBjdCkpO1xyXG5cclxuICAgIGxldCB3aWR0aCA9IChjYW52YXNXaWR0aCAqIHdpZHRoUGN0KSAvIDEwMDtcclxuICAgIHdpZHRoID0gTWF0aC5taW4oY2FudmFzV2lkdGgsIE1hdGgubWF4KG1pbkdyaWRXaWR0aCwgd2lkdGgpKTtcclxuICAgIHdpZHRoUGN0ID0gTWF0aC5tYXgoMTAsIE1hdGgubWluKDEwMCwgKHdpZHRoIC8gY2FudmFzV2lkdGgpICogMTAwKSk7XHJcblxyXG4gICAgY29uc3QgbWF4WCA9IE1hdGgubWF4KDAsIGNhbnZhc1dpZHRoIC0gd2lkdGgpO1xyXG4gICAgY29uc3QgZmFsbGJhY2tYID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcihnYWxlcmlhPy54KSkgPyBOdW1iZXIoZ2FsZXJpYS54KSA6IDA7XHJcbiAgICBjb25zdCByYXdYID0gTnVtYmVyLmlzRmluaXRlKE51bWJlcih4Q2FuZGlkYXRlKSkgPyBOdW1iZXIoeENhbmRpZGF0ZSkgOiBmYWxsYmFja1g7XHJcbiAgICBjb25zdCB4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocmF3WCwgbWF4WCkpO1xyXG5cclxuICAgIGNvbnN0IGNlbGxXID0gTWF0aC5tYXgoMSwgKHdpZHRoIC0gZ2FwICogKGNvbHMgLSAxKSkgLyBjb2xzKTtcclxuICAgIGNvbnN0IGNlbGxIID0gY2VsbFcgKiBjZWxsUmF0aW87XHJcbiAgICBjb25zdCBoZWlnaHQgPSByb3dzICogY2VsbEggKyBnYXAgKiAocm93cyAtIDEpO1xyXG5cclxuICAgIHJldHVybiB7IHdpZHRoLCBoZWlnaHQsIHdpZHRoUGN0LCB4IH07XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBhY3R1YWxpemFyTGluZWEgPSAobGluZUlkLCBudWV2YURhdGEpID0+IHtcclxuICAgIGNvbnN0IGluZGV4ID0gb2JqZXRvcy5maW5kSW5kZXgob2JqID0+IG9iai5pZCA9PT0gbGluZUlkKTtcclxuXHJcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobnVldmFEYXRhLmlzUHJldmlldykge1xyXG4gICAgICAvLyBQcmV2aWV3OiBTb2xvIGFjdHVhbGl6YWNpw7NuIHZpc3VhbCBzaW4gaGlzdG9yaWFsXHJcbiAgICAgIHNldE9iamV0b3MocHJldiA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9zID0gWy4uLnByZXZdO1xyXG4gICAgICAgIGNvbnN0IHsgaXNQcmV2aWV3LCAuLi5jbGVhbkRhdGEgfSA9IG51ZXZhRGF0YTtcclxuXHJcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxvcyBwdW50b3Mgc2llbXByZSBzZWFuIHVuIGFycmF5IHbDoWxpZG9cclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnBvaW50cykge1xyXG4gICAgICAgICAgY2xlYW5EYXRhLnBvaW50cyA9IGNsZWFuRGF0YS5wb2ludHMubWFwKHAgPT4gcGFyc2VGbG9hdChwKSB8fCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID8/IFBSRVNFUlZBUiBzdHJva2VXaWR0aCBzaSBleGlzdGVcclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnN0cm9rZVdpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGNsZWFuRGF0YS5zdHJva2VXaWR0aCA9IHBhcnNlSW50KGNsZWFuRGF0YS5zdHJva2VXaWR0aCkgfHwgMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG51ZXZvc1tpbmRleF0gPSB7IC4uLm51ZXZvc1tpbmRleF0sIC4uLmNsZWFuRGF0YSB9O1xyXG4gICAgICAgIHJldHVybiBudWV2b3M7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChudWV2YURhdGEuaXNGaW5hbCkge1xyXG4gICAgICAvLyBGaW5hbDogR3VhcmRhciBlbiBoaXN0b3JpYWxcclxuICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICBjb25zdCBudWV2b3MgPSBbLi4ucHJldl07XHJcbiAgICAgICAgY29uc3QgeyBpc0ZpbmFsLCAuLi5jbGVhbkRhdGEgfSA9IG51ZXZhRGF0YTtcclxuXHJcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxvcyBwdW50b3Mgc2llbXByZSBzZWFuIHVuIGFycmF5IHbDoWxpZG9cclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnBvaW50cykge1xyXG4gICAgICAgICAgY2xlYW5EYXRhLnBvaW50cyA9IGNsZWFuRGF0YS5wb2ludHMubWFwKHAgPT4gcGFyc2VGbG9hdChwKSB8fCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vID8/IFBSRVNFUlZBUiBzdHJva2VXaWR0aCBzaSBleGlzdGVcclxuICAgICAgICBpZiAoY2xlYW5EYXRhLnN0cm9rZVdpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGNsZWFuRGF0YS5zdHJva2VXaWR0aCA9IHBhcnNlSW50KGNsZWFuRGF0YS5zdHJva2VXaWR0aCkgfHwgMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG51ZXZvc1tpbmRleF0gPSB7IC4uLm51ZXZvc1tpbmRleF0sIC4uLmNsZWFuRGF0YSB9O1xyXG4gICAgICAgIHJldHVybiBudWV2b3M7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAvLyA/PyBNw6l0cmljYXMgZGUgdGV4dG8gY29uc2lzdGVudGVzIGNvbiBlbCByZW5kZXIgZGUgRWxlbWVudG9DYW52YXNcclxuICBjb25zdCBvYnRlbmVyTWV0cmljYXNUZXh0byA9ICh0ZXh0bywge1xyXG4gICAgZm9udFNpemUgPSAyNCxcclxuICAgIGZvbnRGYW1pbHkgPSBcInNhbnMtc2VyaWZcIixcclxuICAgIGZvbnRXZWlnaHQgPSBcIm5vcm1hbFwiLFxyXG4gICAgZm9udFN0eWxlID0gXCJub3JtYWxcIixcclxuICAgIGxpbmVIZWlnaHQgPSAxLjIsXHJcbiAgfSA9IHt9KSA9PiB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgIGlmICghY3R4KSB7XHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrU2l6ZSA9IE51bWJlci5pc0Zpbml0ZShmb250U2l6ZSkgJiYgZm9udFNpemUgPiAwID8gZm9udFNpemUgOiAyNDtcclxuICAgICAgcmV0dXJuIHsgd2lkdGg6IE1hdGgubWF4KDIwLCBTdHJpbmcodGV4dG8gPz8gXCJcIikubGVuZ3RoICogKGZhbGxiYWNrU2l6ZSAqIDAuNTUpKSwgaGVpZ2h0OiBmYWxsYmFja1NpemUgKiBsaW5lSGVpZ2h0IH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FmZUZvbnRTaXplID0gTnVtYmVyLmlzRmluaXRlKGZvbnRTaXplKSAmJiBmb250U2l6ZSA+IDAgPyBmb250U2l6ZSA6IDI0O1xyXG4gICAgY29uc3Qgc2FmZUxpbmVIZWlnaHQgPSBOdW1iZXIuaXNGaW5pdGUobGluZUhlaWdodCkgJiYgbGluZUhlaWdodCA+IDAgPyBsaW5lSGVpZ2h0IDogMS4yO1xyXG4gICAgY29uc3Qgc2FmZUZhbWlseSA9IFN0cmluZyhmb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwiKTtcclxuICAgIGNvbnN0IGZvbnRGb3JDYW52YXMgPSBzYWZlRmFtaWx5LmluY2x1ZGVzKFwiLFwiKVxyXG4gICAgICA/IHNhZmVGYW1pbHlcclxuICAgICAgOiAoL1xccy8udGVzdChzYWZlRmFtaWx5KSA/IGBcIiR7c2FmZUZhbWlseX1cImAgOiBzYWZlRmFtaWx5KTtcclxuXHJcbiAgICBjdHguZm9udCA9IGAke2ZvbnRTdHlsZSB8fCBcIm5vcm1hbFwifSAke2ZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn0gJHtzYWZlRm9udFNpemV9cHggJHtmb250Rm9yQ2FudmFzfWA7XHJcblxyXG4gICAgY29uc3QgcmF3VGV4dCA9IFN0cmluZyh0ZXh0byA/PyBcIlwiKTtcclxuICAgIGNvbnN0IHNhZmVUZXh0ID0gcmF3VGV4dC5yZXBsYWNlKC9bIFxcdF0rJC9nbSwgXCJcIik7XHJcbiAgICBjb25zdCBsaW5lcyA9IHNhZmVUZXh0LnNwbGl0KC9cXHI/XFxuLyk7XHJcbiAgICBjb25zdCBtYXhMaW5lV2lkdGggPSBNYXRoLm1heCguLi5saW5lcy5tYXAoKGxpbmUpID0+IGN0eC5tZWFzdXJlVGV4dChsaW5lKS53aWR0aCksIDIwKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB3aWR0aDogbWF4TGluZVdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IHNhZmVGb250U2l6ZSAqIHNhZmVMaW5lSGVpZ2h0ICogTWF0aC5tYXgobGluZXMubGVuZ3RoLCAxKSxcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbWVkaXJBbmNob1RleHRvS29udmEgPSB1c2VDYWxsYmFjaygob2JqVGV4dG8sIHRleHRvT2JqZXRpdm8sIGZvbnRTaXplT3ZlcnJpZGUgPSBudWxsKSA9PiB7XHJcbiAgICBpZiAoIW9ialRleHRvIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNhZmVUZXh0ID0gU3RyaW5nKHRleHRvT2JqZXRpdm8gPz8gXCJcIikucmVwbGFjZSgvWyBcXHRdKyQvZ20sIFwiXCIpO1xyXG4gICAgICBjb25zdCBzYWZlRm9udEZhbWlseSA9IGZvbnRNYW5hZ2VyLmlzRm9udEF2YWlsYWJsZShvYmpUZXh0by5mb250RmFtaWx5KVxyXG4gICAgICAgID8gb2JqVGV4dG8uZm9udEZhbWlseVxyXG4gICAgICAgIDogXCJzYW5zLXNlcmlmXCI7XHJcbiAgICAgIGNvbnN0IHNhZmVGb250U2l6ZSA9XHJcbiAgICAgICAgTnVtYmVyLmlzRmluaXRlKGZvbnRTaXplT3ZlcnJpZGUpICYmIGZvbnRTaXplT3ZlcnJpZGUgPiAwXHJcbiAgICAgICAgICA/IGZvbnRTaXplT3ZlcnJpZGVcclxuICAgICAgICAgIDogKE51bWJlci5pc0Zpbml0ZShvYmpUZXh0by5mb250U2l6ZSkgJiYgb2JqVGV4dG8uZm9udFNpemUgPiAwXHJcbiAgICAgICAgICAgID8gb2JqVGV4dG8uZm9udFNpemVcclxuICAgICAgICAgICAgOiAyNCk7XHJcbiAgICAgIGNvbnN0IGJhc2VMaW5lSGVpZ2h0ID1cclxuICAgICAgICBOdW1iZXIuaXNGaW5pdGUob2JqVGV4dG8ubGluZUhlaWdodCkgJiYgb2JqVGV4dG8ubGluZUhlaWdodCA+IDBcclxuICAgICAgICAgID8gb2JqVGV4dG8ubGluZUhlaWdodFxyXG4gICAgICAgICAgOiAxLjI7XHJcblxyXG4gICAgICBjb25zdCBwcm9iZSA9IG5ldyBLb252YS5UZXh0KHtcclxuICAgICAgICB0ZXh0OiBzYWZlVGV4dCxcclxuICAgICAgICBmb250U2l6ZTogc2FmZUZvbnRTaXplLFxyXG4gICAgICAgIGZvbnRGYW1pbHk6IHNhZmVGb250RmFtaWx5LFxyXG4gICAgICAgIGZvbnRXZWlnaHQ6IG9ialRleHRvLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIixcclxuICAgICAgICBmb250U3R5bGU6IHJlc29sdmVLb252YUZvbnRTdHlsZShcclxuICAgICAgICAgIG9ialRleHRvLmZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiLFxyXG4gICAgICAgICAgb2JqVGV4dG8uZm9udFdlaWdodCB8fCBcIm5vcm1hbFwiXHJcbiAgICAgICAgKSxcclxuICAgICAgICBsaW5lSGVpZ2h0OiBiYXNlTGluZUhlaWdodCAqIDAuOTIsXHJcbiAgICAgICAgcGFkZGluZzogMCxcclxuICAgICAgICB3cmFwOiBcIm5vbmVcIixcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCB3aWR0aCA9IE51bWJlcihwcm9iZS5nZXRUZXh0V2lkdGg/LigpIHx8IDApO1xyXG4gICAgICBwcm9iZS5kZXN0cm95KCk7XHJcblxyXG4gICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHdpZHRoKSAmJiB3aWR0aCA+IDAgPyB3aWR0aCA6IG51bGw7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBtZWRpckFsdG9UZXh0b0tvbnZhID0gdXNlQ2FsbGJhY2soKG9ialRleHRvLCB0ZXh0b09iamV0aXZvLCBmb250U2l6ZU92ZXJyaWRlID0gbnVsbCkgPT4ge1xyXG4gICAgaWYgKCFvYmpUZXh0byB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzYWZlVGV4dCA9IFN0cmluZyh0ZXh0b09iamV0aXZvID8/IFwiXCIpLnJlcGxhY2UoL1sgXFx0XSskL2dtLCBcIlwiKTtcclxuICAgICAgY29uc3Qgc2FmZUZvbnRGYW1pbHkgPSBmb250TWFuYWdlci5pc0ZvbnRBdmFpbGFibGUob2JqVGV4dG8uZm9udEZhbWlseSlcclxuICAgICAgICA/IG9ialRleHRvLmZvbnRGYW1pbHlcclxuICAgICAgICA6IFwic2Fucy1zZXJpZlwiO1xyXG4gICAgICBjb25zdCBzYWZlRm9udFNpemUgPVxyXG4gICAgICAgIE51bWJlci5pc0Zpbml0ZShmb250U2l6ZU92ZXJyaWRlKSAmJiBmb250U2l6ZU92ZXJyaWRlID4gMFxyXG4gICAgICAgICAgPyBmb250U2l6ZU92ZXJyaWRlXHJcbiAgICAgICAgICA6IChOdW1iZXIuaXNGaW5pdGUob2JqVGV4dG8uZm9udFNpemUpICYmIG9ialRleHRvLmZvbnRTaXplID4gMFxyXG4gICAgICAgICAgICA/IG9ialRleHRvLmZvbnRTaXplXHJcbiAgICAgICAgICAgIDogMjQpO1xyXG4gICAgICBjb25zdCBiYXNlTGluZUhlaWdodCA9XHJcbiAgICAgICAgTnVtYmVyLmlzRmluaXRlKG9ialRleHRvLmxpbmVIZWlnaHQpICYmIG9ialRleHRvLmxpbmVIZWlnaHQgPiAwXHJcbiAgICAgICAgICA/IG9ialRleHRvLmxpbmVIZWlnaHRcclxuICAgICAgICAgIDogMS4yO1xyXG5cclxuICAgICAgY29uc3QgcHJvYmUgPSBuZXcgS29udmEuVGV4dCh7XHJcbiAgICAgICAgdGV4dDogc2FmZVRleHQsXHJcbiAgICAgICAgZm9udFNpemU6IHNhZmVGb250U2l6ZSxcclxuICAgICAgICBmb250RmFtaWx5OiBzYWZlRm9udEZhbWlseSxcclxuICAgICAgICBmb250V2VpZ2h0OiBvYmpUZXh0by5mb250V2VpZ2h0IHx8IFwibm9ybWFsXCIsXHJcbiAgICAgICAgZm9udFN0eWxlOiByZXNvbHZlS29udmFGb250U3R5bGUoXHJcbiAgICAgICAgICBvYmpUZXh0by5mb250U3R5bGUgfHwgXCJub3JtYWxcIixcclxuICAgICAgICAgIG9ialRleHRvLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIlxyXG4gICAgICAgICksXHJcbiAgICAgICAgbGluZUhlaWdodDogYmFzZUxpbmVIZWlnaHQgKiAwLjkyLFxyXG4gICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgd3JhcDogXCJub25lXCIsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgaGVpZ2h0ID0gTnVtYmVyKHByb2JlLmhlaWdodD8uKCkgfHwgMCk7XHJcbiAgICAgIHByb2JlLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUoaGVpZ2h0KSAmJiBoZWlnaHQgPiAwID8gaGVpZ2h0IDogbnVsbDtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IGNhbGN1bGFyWFRleHRvQ2VudHJhZG9Qb3JUYW1hbm8gPSB1c2VDYWxsYmFjaygob2JqVGV4dG8sIG5leHRGb250U2l6ZSkgPT4ge1xyXG4gICAgaWYgKCFvYmpUZXh0byB8fCBvYmpUZXh0by50aXBvICE9PSBcInRleHRvXCIpIHJldHVybiBOdW1iZXIuaXNGaW5pdGUob2JqVGV4dG8/LngpID8gb2JqVGV4dG8ueCA6IDA7XHJcblxyXG4gICAgY29uc3Qgc2FmZU5leHRTaXplID1cclxuICAgICAgTnVtYmVyLmlzRmluaXRlKG5leHRGb250U2l6ZSkgJiYgbmV4dEZvbnRTaXplID4gMFxyXG4gICAgICAgID8gbmV4dEZvbnRTaXplXHJcbiAgICAgICAgOiAoTnVtYmVyLmlzRmluaXRlKG9ialRleHRvLmZvbnRTaXplKSAmJiBvYmpUZXh0by5mb250U2l6ZSA+IDAgPyBvYmpUZXh0by5mb250U2l6ZSA6IDI0KTtcclxuXHJcbiAgICBjb25zdCBiYXNlTGluZUhlaWdodCA9XHJcbiAgICAgIHR5cGVvZiBvYmpUZXh0by5saW5lSGVpZ2h0ID09PSBcIm51bWJlclwiICYmIG9ialRleHRvLmxpbmVIZWlnaHQgPiAwXHJcbiAgICAgICAgPyBvYmpUZXh0by5saW5lSGVpZ2h0XHJcbiAgICAgICAgOiAxLjI7XHJcblxyXG4gICAgY29uc3QgcHJldmlvdXNNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzVGV4dG8ob2JqVGV4dG8udGV4dG8sIHtcclxuICAgICAgZm9udFNpemU6IG9ialRleHRvLmZvbnRTaXplLFxyXG4gICAgICBmb250RmFtaWx5OiBvYmpUZXh0by5mb250RmFtaWx5LFxyXG4gICAgICBmb250V2VpZ2h0OiBvYmpUZXh0by5mb250V2VpZ2h0LFxyXG4gICAgICBmb250U3R5bGU6IG9ialRleHRvLmZvbnRTdHlsZSxcclxuICAgICAgbGluZUhlaWdodDogYmFzZUxpbmVIZWlnaHQgKiAwLjkyLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgbmV4dE1ldHJpY3MgPSBvYnRlbmVyTWV0cmljYXNUZXh0byhvYmpUZXh0by50ZXh0bywge1xyXG4gICAgICBmb250U2l6ZTogc2FmZU5leHRTaXplLFxyXG4gICAgICBmb250RmFtaWx5OiBvYmpUZXh0by5mb250RmFtaWx5LFxyXG4gICAgICBmb250V2VpZ2h0OiBvYmpUZXh0by5mb250V2VpZ2h0LFxyXG4gICAgICBmb250U3R5bGU6IG9ialRleHRvLmZvbnRTdHlsZSxcclxuICAgICAgbGluZUhlaWdodDogYmFzZUxpbmVIZWlnaHQgKiAwLjkyLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcHJldmlvdXNXaWR0aEZyb21Lb252YSA9IG1lZGlyQW5jaG9UZXh0b0tvbnZhKFxyXG4gICAgICBvYmpUZXh0byxcclxuICAgICAgb2JqVGV4dG8udGV4dG8sXHJcbiAgICAgIG9ialRleHRvLmZvbnRTaXplXHJcbiAgICApO1xyXG4gICAgY29uc3QgbmV4dFdpZHRoRnJvbUtvbnZhID0gbWVkaXJBbmNob1RleHRvS29udmEoXHJcbiAgICAgIG9ialRleHRvLFxyXG4gICAgICBvYmpUZXh0by50ZXh0byxcclxuICAgICAgc2FmZU5leHRTaXplXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHByZXZpb3VzV2lkdGggPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUocHJldmlvdXNXaWR0aEZyb21Lb252YSkgJiYgcHJldmlvdXNXaWR0aEZyb21Lb252YSA+IDBcclxuICAgICAgICA/IHByZXZpb3VzV2lkdGhGcm9tS29udmFcclxuICAgICAgICA6IHByZXZpb3VzTWV0cmljcy53aWR0aDtcclxuICAgIGNvbnN0IG5leHRXaWR0aCA9XHJcbiAgICAgIE51bWJlci5pc0Zpbml0ZShuZXh0V2lkdGhGcm9tS29udmEpICYmIG5leHRXaWR0aEZyb21Lb252YSA+IDBcclxuICAgICAgICA/IG5leHRXaWR0aEZyb21Lb252YVxyXG4gICAgICAgIDogbmV4dE1ldHJpY3Mud2lkdGg7XHJcblxyXG4gICAgY29uc3QgY3VycmVudFggPSBOdW1iZXIuaXNGaW5pdGUob2JqVGV4dG8ueCkgPyBvYmpUZXh0by54IDogMDtcclxuICAgIGNvbnN0IGNlbnRlclggPSBjdXJyZW50WCArIChwcmV2aW91c1dpZHRoIC8gMik7XHJcbiAgICByZXR1cm4gY2VudGVyWCAtIChuZXh0V2lkdGggLyAyKTtcclxuICB9LCBbb2J0ZW5lck1ldHJpY2FzVGV4dG8sIG1lZGlyQW5jaG9UZXh0b0tvbnZhXSk7XHJcblxyXG4gIGNvbnN0IGNhbGN1bGFyWFRleHRvRGVzZGVDZW50cm8gPSB1c2VDYWxsYmFjaygob2JqVGV4dG8sIG5leHRGb250U2l6ZSwgY2VudGVyWCkgPT4ge1xyXG4gICAgaWYgKCFvYmpUZXh0byB8fCBvYmpUZXh0by50aXBvICE9PSBcInRleHRvXCIpIHtcclxuICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShvYmpUZXh0bz8ueCkgPyBvYmpUZXh0by54IDogMDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzYWZlQ2VudGVyWCA9IE51bWJlcihjZW50ZXJYKTtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHNhZmVDZW50ZXJYKSkge1xyXG4gICAgICByZXR1cm4gY2FsY3VsYXJYVGV4dG9DZW50cmFkb1BvclRhbWFubyhvYmpUZXh0bywgbmV4dEZvbnRTaXplKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzYWZlTmV4dFNpemUgPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUobmV4dEZvbnRTaXplKSAmJiBuZXh0Rm9udFNpemUgPiAwXHJcbiAgICAgICAgPyBuZXh0Rm9udFNpemVcclxuICAgICAgICA6IChOdW1iZXIuaXNGaW5pdGUob2JqVGV4dG8uZm9udFNpemUpICYmIG9ialRleHRvLmZvbnRTaXplID4gMCA/IG9ialRleHRvLmZvbnRTaXplIDogMjQpO1xyXG4gICAgY29uc3QgYmFzZUxpbmVIZWlnaHQgPVxyXG4gICAgICB0eXBlb2Ygb2JqVGV4dG8ubGluZUhlaWdodCA9PT0gXCJudW1iZXJcIiAmJiBvYmpUZXh0by5saW5lSGVpZ2h0ID4gMFxyXG4gICAgICAgID8gb2JqVGV4dG8ubGluZUhlaWdodFxyXG4gICAgICAgIDogMS4yO1xyXG5cclxuICAgIGNvbnN0IG5leHRNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzVGV4dG8ob2JqVGV4dG8udGV4dG8sIHtcclxuICAgICAgZm9udFNpemU6IHNhZmVOZXh0U2l6ZSxcclxuICAgICAgZm9udEZhbWlseTogb2JqVGV4dG8uZm9udEZhbWlseSxcclxuICAgICAgZm9udFdlaWdodDogb2JqVGV4dG8uZm9udFdlaWdodCxcclxuICAgICAgZm9udFN0eWxlOiBvYmpUZXh0by5mb250U3R5bGUsXHJcbiAgICAgIGxpbmVIZWlnaHQ6IGJhc2VMaW5lSGVpZ2h0ICogMC45MixcclxuICAgIH0pO1xyXG4gICAgY29uc3QgbmV4dFdpZHRoRnJvbUtvbnZhID0gbWVkaXJBbmNob1RleHRvS29udmEoXHJcbiAgICAgIG9ialRleHRvLFxyXG4gICAgICBvYmpUZXh0by50ZXh0byxcclxuICAgICAgc2FmZU5leHRTaXplXHJcbiAgICApO1xyXG4gICAgY29uc3QgbmV4dFdpZHRoID1cclxuICAgICAgTnVtYmVyLmlzRmluaXRlKG5leHRXaWR0aEZyb21Lb252YSkgJiYgbmV4dFdpZHRoRnJvbUtvbnZhID4gMFxyXG4gICAgICAgID8gbmV4dFdpZHRoRnJvbUtvbnZhXHJcbiAgICAgICAgOiBuZXh0TWV0cmljcy53aWR0aDtcclxuXHJcbiAgICByZXR1cm4gc2FmZUNlbnRlclggLSAobmV4dFdpZHRoIC8gMik7XHJcbiAgfSwgW1xyXG4gICAgY2FsY3VsYXJYVGV4dG9DZW50cmFkb1BvclRhbWFubyxcclxuICAgIG9idGVuZXJNZXRyaWNhc1RleHRvLFxyXG4gICAgbWVkaXJBbmNob1RleHRvS29udmEsXHJcbiAgXSk7XHJcblxyXG4gIGNvbnN0IGNhbGN1bGFyWVRleHRvRGVzZGVDZW50cm8gPSB1c2VDYWxsYmFjaygob2JqVGV4dG8sIG5leHRGb250U2l6ZSwgY2VudGVyWSkgPT4ge1xyXG4gICAgaWYgKCFvYmpUZXh0byB8fCBvYmpUZXh0by50aXBvICE9PSBcInRleHRvXCIpIHtcclxuICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShvYmpUZXh0bz8ueSkgPyBvYmpUZXh0by55IDogMDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzYWZlQ2VudGVyWSA9IE51bWJlcihjZW50ZXJZKTtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHNhZmVDZW50ZXJZKSkge1xyXG4gICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG9ialRleHRvLnkpID8gb2JqVGV4dG8ueSA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FmZU5leHRTaXplID1cclxuICAgICAgTnVtYmVyLmlzRmluaXRlKG5leHRGb250U2l6ZSkgJiYgbmV4dEZvbnRTaXplID4gMFxyXG4gICAgICAgID8gbmV4dEZvbnRTaXplXHJcbiAgICAgICAgOiAoTnVtYmVyLmlzRmluaXRlKG9ialRleHRvLmZvbnRTaXplKSAmJiBvYmpUZXh0by5mb250U2l6ZSA+IDAgPyBvYmpUZXh0by5mb250U2l6ZSA6IDI0KTtcclxuICAgIGNvbnN0IGJhc2VMaW5lSGVpZ2h0ID1cclxuICAgICAgdHlwZW9mIG9ialRleHRvLmxpbmVIZWlnaHQgPT09IFwibnVtYmVyXCIgJiYgb2JqVGV4dG8ubGluZUhlaWdodCA+IDBcclxuICAgICAgICA/IG9ialRleHRvLmxpbmVIZWlnaHRcclxuICAgICAgICA6IDEuMjtcclxuXHJcbiAgICBjb25zdCBuZXh0TWV0cmljcyA9IG9idGVuZXJNZXRyaWNhc1RleHRvKG9ialRleHRvLnRleHRvLCB7XHJcbiAgICAgIGZvbnRTaXplOiBzYWZlTmV4dFNpemUsXHJcbiAgICAgIGZvbnRGYW1pbHk6IG9ialRleHRvLmZvbnRGYW1pbHksXHJcbiAgICAgIGZvbnRXZWlnaHQ6IG9ialRleHRvLmZvbnRXZWlnaHQsXHJcbiAgICAgIGZvbnRTdHlsZTogb2JqVGV4dG8uZm9udFN0eWxlLFxyXG4gICAgICBsaW5lSGVpZ2h0OiBiYXNlTGluZUhlaWdodCAqIDAuOTIsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IG5leHRIZWlnaHRGcm9tS29udmEgPSBtZWRpckFsdG9UZXh0b0tvbnZhKFxyXG4gICAgICBvYmpUZXh0byxcclxuICAgICAgb2JqVGV4dG8udGV4dG8sXHJcbiAgICAgIHNhZmVOZXh0U2l6ZVxyXG4gICAgKTtcclxuICAgIGNvbnN0IG5leHRIZWlnaHQgPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUobmV4dEhlaWdodEZyb21Lb252YSkgJiYgbmV4dEhlaWdodEZyb21Lb252YSA+IDBcclxuICAgICAgICA/IG5leHRIZWlnaHRGcm9tS29udmFcclxuICAgICAgICA6IG5leHRNZXRyaWNzLmhlaWdodDtcclxuXHJcbiAgICByZXR1cm4gc2FmZUNlbnRlclkgLSAobmV4dEhlaWdodCAvIDIpO1xyXG4gIH0sIFtvYnRlbmVyTWV0cmljYXNUZXh0bywgbWVkaXJBbHRvVGV4dG9Lb252YV0pO1xyXG5cclxuICBjb25zdCBjYWxjdWxhclBvc1RleHRvRGVzZGVDZW50cm8gPSB1c2VDYWxsYmFjaygoXHJcbiAgICBvYmpUZXh0byxcclxuICAgIG5leHRGb250U2l6ZSxcclxuICAgIGNlbnRlclgsXHJcbiAgICBjZW50ZXJZLFxyXG4gICAgcm90YXRpb25EZWcgPSAwXHJcbiAgKSA9PiB7XHJcbiAgICBpZiAoIW9ialRleHRvIHx8IG9ialRleHRvLnRpcG8gIT09IFwidGV4dG9cIikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IE51bWJlci5pc0Zpbml0ZShvYmpUZXh0bz8ueCkgPyBvYmpUZXh0by54IDogMCxcclxuICAgICAgICB5OiBudWxsLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNhZmVOZXh0U2l6ZSA9XHJcbiAgICAgIE51bWJlci5pc0Zpbml0ZShuZXh0Rm9udFNpemUpICYmIG5leHRGb250U2l6ZSA+IDBcclxuICAgICAgICA/IG5leHRGb250U2l6ZVxyXG4gICAgICAgIDogKE51bWJlci5pc0Zpbml0ZShvYmpUZXh0by5mb250U2l6ZSkgJiYgb2JqVGV4dG8uZm9udFNpemUgPiAwID8gb2JqVGV4dG8uZm9udFNpemUgOiAyNCk7XHJcbiAgICBjb25zdCBzYWZlQ2VudGVyWCA9IE51bWJlcihjZW50ZXJYKTtcclxuICAgIGNvbnN0IHNhZmVDZW50ZXJZID0gTnVtYmVyKGNlbnRlclkpO1xyXG4gICAgY29uc3Qgc2FmZVJvdGF0aW9uID0gTnVtYmVyKHJvdGF0aW9uRGVnKTtcclxuICAgIGNvbnN0IHRoZXRhID0gKE51bWJlci5pc0Zpbml0ZShzYWZlUm90YXRpb24pID8gc2FmZVJvdGF0aW9uIDogMCkgKiAoTWF0aC5QSSAvIDE4MCk7XHJcblxyXG4gICAgY29uc3QgYmFzZUxpbmVIZWlnaHQgPVxyXG4gICAgICB0eXBlb2Ygb2JqVGV4dG8ubGluZUhlaWdodCA9PT0gXCJudW1iZXJcIiAmJiBvYmpUZXh0by5saW5lSGVpZ2h0ID4gMFxyXG4gICAgICAgID8gb2JqVGV4dG8ubGluZUhlaWdodFxyXG4gICAgICAgIDogMS4yO1xyXG5cclxuICAgIGNvbnN0IG1ldHJpY3MgPSBvYnRlbmVyTWV0cmljYXNUZXh0byhvYmpUZXh0by50ZXh0bywge1xyXG4gICAgICBmb250U2l6ZTogc2FmZU5leHRTaXplLFxyXG4gICAgICBmb250RmFtaWx5OiBvYmpUZXh0by5mb250RmFtaWx5LFxyXG4gICAgICBmb250V2VpZ2h0OiBvYmpUZXh0by5mb250V2VpZ2h0LFxyXG4gICAgICBmb250U3R5bGU6IG9ialRleHRvLmZvbnRTdHlsZSxcclxuICAgICAgbGluZUhlaWdodDogYmFzZUxpbmVIZWlnaHQgKiAwLjkyLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB3aWR0aEZyb21Lb252YSA9IG1lZGlyQW5jaG9UZXh0b0tvbnZhKFxyXG4gICAgICBvYmpUZXh0byxcclxuICAgICAgb2JqVGV4dG8udGV4dG8sXHJcbiAgICAgIHNhZmVOZXh0U2l6ZVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGhlaWdodEZyb21Lb252YSA9IG1lZGlyQWx0b1RleHRvS29udmEoXHJcbiAgICAgIG9ialRleHRvLFxyXG4gICAgICBvYmpUZXh0by50ZXh0byxcclxuICAgICAgc2FmZU5leHRTaXplXHJcbiAgICApO1xyXG4gICAgY29uc3Qgd2lkdGggPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUod2lkdGhGcm9tS29udmEpICYmIHdpZHRoRnJvbUtvbnZhID4gMFxyXG4gICAgICAgID8gd2lkdGhGcm9tS29udmFcclxuICAgICAgICA6IG1ldHJpY3Mud2lkdGg7XHJcbiAgICBjb25zdCBoZWlnaHQgPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUoaGVpZ2h0RnJvbUtvbnZhKSAmJiBoZWlnaHRGcm9tS29udmEgPiAwXHJcbiAgICAgICAgPyBoZWlnaHRGcm9tS29udmFcclxuICAgICAgICA6IG1ldHJpY3MuaGVpZ2h0O1xyXG5cclxuICAgIGNvbnN0IGhhbGZXID0gd2lkdGggLyAyO1xyXG4gICAgY29uc3QgaGFsZkggPSBoZWlnaHQgLyAyO1xyXG4gICAgY29uc3QgY2VudGVyT2Zmc2V0WCA9IChoYWxmVyAqIE1hdGguY29zKHRoZXRhKSkgLSAoaGFsZkggKiBNYXRoLnNpbih0aGV0YSkpO1xyXG4gICAgY29uc3QgY2VudGVyT2Zmc2V0WSA9IChoYWxmVyAqIE1hdGguc2luKHRoZXRhKSkgKyAoaGFsZkggKiBNYXRoLmNvcyh0aGV0YSkpO1xyXG4gICAgY29uc3QgZmFsbGJhY2tYID0gY2FsY3VsYXJYVGV4dG9EZXNkZUNlbnRybyhvYmpUZXh0bywgc2FmZU5leHRTaXplLCBzYWZlQ2VudGVyWCk7XHJcbiAgICBjb25zdCBmYWxsYmFja1kgPSBjYWxjdWxhcllUZXh0b0Rlc2RlQ2VudHJvKG9ialRleHRvLCBzYWZlTmV4dFNpemUsIHNhZmVDZW50ZXJZKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiBOdW1iZXIuaXNGaW5pdGUoc2FmZUNlbnRlclgpXHJcbiAgICAgICAgPyBzYWZlQ2VudGVyWCAtIGNlbnRlck9mZnNldFhcclxuICAgICAgICA6IGZhbGxiYWNrWCxcclxuICAgICAgeTogTnVtYmVyLmlzRmluaXRlKHNhZmVDZW50ZXJZKVxyXG4gICAgICAgID8gc2FmZUNlbnRlclkgLSBjZW50ZXJPZmZzZXRZXHJcbiAgICAgICAgOiBmYWxsYmFja1ksXHJcbiAgICAgIHdpZHRoLFxyXG4gICAgICBoZWlnaHQsXHJcbiAgICB9O1xyXG4gIH0sIFtcclxuICAgIG9idGVuZXJNZXRyaWNhc1RleHRvLFxyXG4gICAgbWVkaXJBbmNob1RleHRvS29udmEsXHJcbiAgICBtZWRpckFsdG9UZXh0b0tvbnZhLFxyXG4gICAgY2FsY3VsYXJYVGV4dG9EZXNkZUNlbnRybyxcclxuICAgIGNhbGN1bGFyWVRleHRvRGVzZGVDZW50cm8sXHJcbiAgXSk7XHJcblxyXG4gIGNvbnN0IGFqdXN0YXJGb250U2l6ZUFBbmNob1Zpc3VhbCA9IHVzZUNhbGxiYWNrKChvYmpUZXh0bywgcHJvcG9zZWRGb250U2l6ZSwgdGFyZ2V0VmlzdWFsV2lkdGgpID0+IHtcclxuICAgIGNvbnN0IHNhZmVQcm9wb3NlZCA9IE51bWJlcihwcm9wb3NlZEZvbnRTaXplKTtcclxuICAgIGNvbnN0IHNhZmVUYXJnZXRXaWR0aCA9IE51bWJlcih0YXJnZXRWaXN1YWxXaWR0aCk7XHJcbiAgICB0ZXh0UmVzaXplRGVidWcoXCJmaXQtd2lkdGg6c3RhcnRcIiwge1xyXG4gICAgICBpZDogb2JqVGV4dG8/LmlkID8/IG51bGwsXHJcbiAgICAgIHByb3Bvc2VkRm9udFNpemU6IHNhZmVQcm9wb3NlZCxcclxuICAgICAgdGFyZ2V0VmlzdWFsV2lkdGg6IHNhZmVUYXJnZXRXaWR0aCxcclxuICAgICAgY3VycmVudEZvbnRTaXplOiBvYmpUZXh0bz8uZm9udFNpemUgPz8gbnVsbCxcclxuICAgIH0pO1xyXG4gICAgaWYgKCFvYmpUZXh0byB8fCBvYmpUZXh0by50aXBvICE9PSBcInRleHRvXCIpIHtcclxuICAgICAgdGV4dFJlc2l6ZURlYnVnKFwiZml0LXdpZHRoOnNraXAtaW52YWxpZC1vYmpcIiwgeyBpZDogb2JqVGV4dG8/LmlkID8/IG51bGwgfSk7XHJcbiAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUoc2FmZVByb3Bvc2VkKSAmJiBzYWZlUHJvcG9zZWQgPiAwID8gc2FmZVByb3Bvc2VkIDogMjQ7XHJcbiAgICB9XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShzYWZlUHJvcG9zZWQpIHx8IHNhZmVQcm9wb3NlZCA8PSAwKSB7XHJcbiAgICAgIHRleHRSZXNpemVEZWJ1ZyhcImZpdC13aWR0aDpza2lwLWludmFsaWQtc2l6ZVwiLCB7IGlkOiBvYmpUZXh0bz8uaWQgPz8gbnVsbCB9KTtcclxuICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShvYmpUZXh0by5mb250U2l6ZSkgJiYgb2JqVGV4dG8uZm9udFNpemUgPiAwID8gb2JqVGV4dG8uZm9udFNpemUgOiAyNDtcclxuICAgIH1cclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHNhZmVUYXJnZXRXaWR0aCkgfHwgc2FmZVRhcmdldFdpZHRoIDw9IDApIHtcclxuICAgICAgdGV4dFJlc2l6ZURlYnVnKFwiZml0LXdpZHRoOnNraXAtaW52YWxpZC13aWR0aFwiLCB7IGlkOiBvYmpUZXh0bz8uaWQgPz8gbnVsbCB9KTtcclxuICAgICAgcmV0dXJuIHNhZmVQcm9wb3NlZDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV4dFNpemUgPSBNYXRoLm1heCg2LCBzYWZlUHJvcG9zZWQpO1xyXG5cclxuICAgIC8vIERvcyBpdGVyYWNpb25lcyBhbGNhbnphbiBwYXJhIGNvbXBlbnNhciBlbCBkZXNhanVzdGUgZW50cmUgcHJldmlldyBlc2NhbGFkbyB5IHJlbmRlciBmaW5hbC5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSArPSAxKSB7XHJcbiAgICAgIGNvbnN0IG1lYXN1cmVkV2lkdGggPSBtZWRpckFuY2hvVGV4dG9Lb252YShcclxuICAgICAgICBvYmpUZXh0byxcclxuICAgICAgICBvYmpUZXh0by50ZXh0byxcclxuICAgICAgICBuZXh0U2l6ZVxyXG4gICAgICApO1xyXG4gICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShtZWFzdXJlZFdpZHRoKSB8fCBtZWFzdXJlZFdpZHRoIDw9IDApIHtcclxuICAgICAgICB0ZXh0UmVzaXplRGVidWcoXCJmaXQtd2lkdGg6YnJlYWstbm8tbWVhc3VyZVwiLCB7XHJcbiAgICAgICAgICBpZDogb2JqVGV4dG8/LmlkID8/IG51bGwsXHJcbiAgICAgICAgICBpdGVyYXRpb246IGksXHJcbiAgICAgICAgICBtZWFzdXJlZFdpZHRoLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCByYXRpbyA9IHNhZmVUYXJnZXRXaWR0aCAvIG1lYXN1cmVkV2lkdGg7XHJcbiAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHJhdGlvKSB8fCByYXRpbyA8PSAwKSB7XHJcbiAgICAgICAgdGV4dFJlc2l6ZURlYnVnKFwiZml0LXdpZHRoOmJyZWFrLWludmFsaWQtcmF0aW9cIiwge1xyXG4gICAgICAgICAgaWQ6IG9ialRleHRvPy5pZCA/PyBudWxsLFxyXG4gICAgICAgICAgaXRlcmF0aW9uOiBpLFxyXG4gICAgICAgICAgcmF0aW8sXHJcbiAgICAgICAgICBtZWFzdXJlZFdpZHRoLFxyXG4gICAgICAgICAgdGFyZ2V0VmlzdWFsV2lkdGg6IHNhZmVUYXJnZXRXaWR0aCxcclxuICAgICAgICB9KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY2FuZGlkYXRlID0gTWF0aC5tYXgoNiwgbmV4dFNpemUgKiByYXRpbyk7XHJcbiAgICAgIHRleHRSZXNpemVEZWJ1ZyhcImZpdC13aWR0aDppdGVyXCIsIHtcclxuICAgICAgICBpZDogb2JqVGV4dG8/LmlkID8/IG51bGwsXHJcbiAgICAgICAgaXRlcmF0aW9uOiBpLFxyXG4gICAgICAgIG1lYXN1cmVkV2lkdGgsXHJcbiAgICAgICAgcmF0aW8sXHJcbiAgICAgICAgcHJldlNpemU6IG5leHRTaXplLFxyXG4gICAgICAgIGNhbmRpZGF0ZSxcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChNYXRoLmFicyhjYW5kaWRhdGUgLSBuZXh0U2l6ZSkgPD0gMC4wMSkge1xyXG4gICAgICAgIG5leHRTaXplID0gY2FuZGlkYXRlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIG5leHRTaXplID0gY2FuZGlkYXRlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZmluYWxTaXplID0gTnVtYmVyKG5leHRTaXplLnRvRml4ZWQoMykpO1xyXG4gICAgdGV4dFJlc2l6ZURlYnVnKFwiZml0LXdpZHRoOmVuZFwiLCB7XHJcbiAgICAgIGlkOiBvYmpUZXh0bz8uaWQgPz8gbnVsbCxcclxuICAgICAgZmluYWxTaXplLFxyXG4gICAgICB0YXJnZXRWaXN1YWxXaWR0aDogc2FmZVRhcmdldFdpZHRoLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZmluYWxTaXplO1xyXG4gIH0sIFttZWRpckFuY2hvVGV4dG9Lb252YSwgdGV4dFJlc2l6ZURlYnVnXSk7XHJcblxyXG4gIGNvbnN0IGNhbGN1bGFyWFRleHRvQ2VudHJhZG8gPSB1c2VDYWxsYmFjaygob2JqVGV4dG8sIHRleHRvT2JqZXRpdm8pID0+IHtcclxuICAgIGlmICghb2JqVGV4dG8gfHwgb2JqVGV4dG8udGlwbyAhPT0gXCJ0ZXh0b1wiKSByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG9ialRleHRvPy54KSA/IG9ialRleHRvLnggOiAwO1xyXG5cclxuICAgIGNvbnN0IGJhc2VMaW5lSGVpZ2h0ID1cclxuICAgICAgdHlwZW9mIG9ialRleHRvLmxpbmVIZWlnaHQgPT09IFwibnVtYmVyXCIgJiYgb2JqVGV4dG8ubGluZUhlaWdodCA+IDBcclxuICAgICAgICA/IG9ialRleHRvLmxpbmVIZWlnaHRcclxuICAgICAgICA6IDEuMjtcclxuXHJcbiAgICBjb25zdCBwcmV2aW91c01ldHJpY3MgPSBvYnRlbmVyTWV0cmljYXNUZXh0byhvYmpUZXh0by50ZXh0bywge1xyXG4gICAgICBmb250U2l6ZTogb2JqVGV4dG8uZm9udFNpemUsXHJcbiAgICAgIGZvbnRGYW1pbHk6IG9ialRleHRvLmZvbnRGYW1pbHksXHJcbiAgICAgIGZvbnRXZWlnaHQ6IG9ialRleHRvLmZvbnRXZWlnaHQsXHJcbiAgICAgIGZvbnRTdHlsZTogb2JqVGV4dG8uZm9udFN0eWxlLFxyXG4gICAgICBsaW5lSGVpZ2h0OiBiYXNlTGluZUhlaWdodCAqIDAuOTIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBuZXh0TWV0cmljcyA9IG9idGVuZXJNZXRyaWNhc1RleHRvKHRleHRvT2JqZXRpdm8sIHtcclxuICAgICAgZm9udFNpemU6IG9ialRleHRvLmZvbnRTaXplLFxyXG4gICAgICBmb250RmFtaWx5OiBvYmpUZXh0by5mb250RmFtaWx5LFxyXG4gICAgICBmb250V2VpZ2h0OiBvYmpUZXh0by5mb250V2VpZ2h0LFxyXG4gICAgICBmb250U3R5bGU6IG9ialRleHRvLmZvbnRTdHlsZSxcclxuICAgICAgbGluZUhlaWdodDogYmFzZUxpbmVIZWlnaHQgKiAwLjkyLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcHJldmlvdXNXaWR0aEZyb21Lb252YSA9IG1lZGlyQW5jaG9UZXh0b0tvbnZhKG9ialRleHRvLCBvYmpUZXh0by50ZXh0byk7XHJcbiAgICBjb25zdCBuZXh0V2lkdGhGcm9tS29udmEgPSBtZWRpckFuY2hvVGV4dG9Lb252YShvYmpUZXh0bywgdGV4dG9PYmpldGl2byk7XHJcblxyXG4gICAgY29uc3QgcHJldmlvdXNXaWR0aCA9XHJcbiAgICAgIE51bWJlci5pc0Zpbml0ZShwcmV2aW91c1dpZHRoRnJvbUtvbnZhKSAmJiBwcmV2aW91c1dpZHRoRnJvbUtvbnZhID4gMFxyXG4gICAgICAgID8gcHJldmlvdXNXaWR0aEZyb21Lb252YVxyXG4gICAgICAgIDogcHJldmlvdXNNZXRyaWNzLndpZHRoO1xyXG4gICAgY29uc3QgbmV4dFdpZHRoID1cclxuICAgICAgTnVtYmVyLmlzRmluaXRlKG5leHRXaWR0aEZyb21Lb252YSkgJiYgbmV4dFdpZHRoRnJvbUtvbnZhID4gMFxyXG4gICAgICAgID8gbmV4dFdpZHRoRnJvbUtvbnZhXHJcbiAgICAgICAgOiBuZXh0TWV0cmljcy53aWR0aDtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50WCA9IE51bWJlci5pc0Zpbml0ZShvYmpUZXh0by54KSA/IG9ialRleHRvLnggOiAwO1xyXG4gICAgY29uc3QgY2VudGVyWCA9IGN1cnJlbnRYICsgKHByZXZpb3VzV2lkdGggLyAyKTtcclxuICAgIHJldHVybiBjZW50ZXJYIC0gKG5leHRXaWR0aCAvIDIpO1xyXG4gIH0sIFtvYnRlbmVyTWV0cmljYXNUZXh0bywgbWVkaXJBbmNob1RleHRvS29udmFdKTtcclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBkZXNjcmliZVRhcmdldCA9ICh0YXJnZXQpID0+IHtcclxuICAgICAgaWYgKHRhcmdldCA9PT0gd2luZG93KSByZXR1cm4gXCJ3aW5kb3dcIjtcclxuICAgICAgaWYgKHRhcmdldCA9PT0gZG9jdW1lbnQpIHJldHVybiBcImRvY3VtZW50XCI7XHJcbiAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm4gXCJ1bmtub3duXCI7XHJcbiAgICAgIGNvbnN0IHRhZyA9IFN0cmluZyh0YXJnZXQudGFnTmFtZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBjb25zdCBpZCA9IHRhcmdldC5pZCA/IGAjJHt0YXJnZXQuaWR9YCA6IFwiXCI7XHJcbiAgICAgIGNvbnN0IGNsYXNzZXMgPSB0YXJnZXQuY2xhc3NMaXN0Py5sZW5ndGhcclxuICAgICAgICA/IGAuJHtBcnJheS5mcm9tKHRhcmdldC5jbGFzc0xpc3QpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpfWBcclxuICAgICAgICA6IFwiXCI7XHJcbiAgICAgIHJldHVybiBgJHt0YWd9JHtpZH0ke2NsYXNzZXN9YCB8fCBcImVsZW1lbnRcIjtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgaXNJbnNpZGVGbG9hdGluZ1VpID0gKHRhcmdldCkgPT4ge1xyXG4gICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICByZXR1cm4gQm9vbGVhbihcclxuICAgICAgICB0YXJnZXQuY2xvc2VzdChcIi5tZW51LXotaW5kZXhcIikgfHxcclxuICAgICAgICB0YXJnZXQuY2xvc2VzdCgnW2RhdGEtb3B0aW9uLWJ1dHRvbj1cInRydWVcIl0nKVxyXG4gICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVQb2ludGVyT3V0c2lkZSA9IChldmVudCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnNpZGVGbG9hdGluZ1VpID0gaXNJbnNpZGVGbG9hdGluZ1VpKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgIGlmIChpbnNpZGVGbG9hdGluZ1VpKSB7XHJcbiAgICAgICAgbG9nT3B0aW9uQnV0dG9uTWVudURlYnVnKFwib3V0c2lkZS1pZ25vcmVcIiwge1xyXG4gICAgICAgICAgc291cmNlOiBcImdsb2JhbC1wb2ludGVyZG93blwiLFxyXG4gICAgICAgICAgdGFyZ2V0OiBkZXNjcmliZVRhcmdldChldmVudC50YXJnZXQpLFxyXG4gICAgICAgICAgZXZlbnRUeXBlOiBldmVudC50eXBlLFxyXG4gICAgICAgICAgcG9pbnRlclR5cGU6IGV2ZW50LnBvaW50ZXJUeXBlID8/IG51bGwsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRNb3N0cmFyUGFuZWxaKChwcmV2KSA9PiB7XHJcbiAgICAgICAgaWYgKCFwcmV2KSByZXR1cm4gcHJldjtcclxuICAgICAgICBsb2dPcHRpb25CdXR0b25NZW51RGVidWcoXCJvdXRzaWRlLWNsb3NlXCIsIHtcclxuICAgICAgICAgIHNvdXJjZTogXCJnbG9iYWwtcG9pbnRlcmRvd25cIixcclxuICAgICAgICAgIHRhcmdldDogZGVzY3JpYmVUYXJnZXQoZXZlbnQudGFyZ2V0KSxcclxuICAgICAgICAgIGV2ZW50VHlwZTogZXZlbnQudHlwZSxcclxuICAgICAgICAgIHBvaW50ZXJUeXBlOiBldmVudC5wb2ludGVyVHlwZSA/PyBudWxsLFxyXG4gICAgICAgICAgcHJldixcclxuICAgICAgICAgIG5leHQ6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIFwiUG9pbnRlckV2ZW50XCIgaW4gd2luZG93KSB7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBoYW5kbGVQb2ludGVyT3V0c2lkZSwgdHJ1ZSk7XHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIGhhbmRsZVBvaW50ZXJPdXRzaWRlLCB0cnVlKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZVBvaW50ZXJPdXRzaWRlLCB0cnVlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVBvaW50ZXJPdXRzaWRlLCB7XHJcbiAgICAgIGNhcHR1cmU6IHRydWUsXHJcbiAgICAgIHBhc3NpdmU6IHRydWUsXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZVBvaW50ZXJPdXRzaWRlLCB0cnVlKTtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgaGFuZGxlUG9pbnRlck91dHNpZGUsIHRydWUpO1xyXG4gICAgfTtcclxuICB9LCBbbG9nT3B0aW9uQnV0dG9uTWVudURlYnVnXSk7XHJcblxyXG5cclxuXHJcbiAgY29uc3QgYWN0dWFsaXphckZvbmRvU2VjY2lvbiA9IChpZCwgbnVldm9Gb25kbykgPT4ge1xyXG4gICAgc2V0U2VjY2lvbmVzKChwcmV2KSA9PlxyXG4gICAgICBwcmV2Lm1hcCgocykgPT4gcy5pZCA9PT0gaWQgPyB7IC4uLnMsIGZvbmRvOiBudWV2b0ZvbmRvIH0gOiBzKVxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICB1c2VLZXlib2FyZFNob3J0Y3V0cyh7XHJcbiAgICBvbkRlc2hhY2VyLFxyXG4gICAgb25SZWhhY2VyLFxyXG4gICAgb25EdXBsaWNhcixcclxuICAgIG9uRWxpbWluYXIsXHJcbiAgICBvbkRlc2VsZWNjaW9uYXI6ICgpID0+IHtcclxuICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW10pO1xyXG4gICAgICAgIHNldE1vc3RyYXJQYW5lbFooZmFsc2UpO1xyXG4gICAgICAgIHNldE1vc3RyYXJTdWJtZW51Q2FwYShmYWxzZSk7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKGZhbHNlKTtcclxuICAgICAgICBzZXRNb3N0cmFyU2VsZWN0b3JUYW1hbm8oZmFsc2UpO1xyXG4gICAgICAgIHNldEhvdmVySWQobnVsbCk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvbkNvcGlhcixcclxuICAgIG9uUGVnYXIsXHJcbiAgICBvbkNhbWJpYXJBbGluZWFjaW9uLFxyXG4gICAgaXNFZGl0aW5nOiAhIWVkaXRpbmcuaWQsXHJcbiAgICB0aWVuZVNlbGVjY2lvbjogZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPiAwXHJcbiAgfSk7XHJcblxyXG5cclxuICBjb25zdCBjYW1iaWFyQ29sb3JGb25kb1NlY2Npb24gPSB1c2VDYWxsYmFjaygoc2VjY2lvbklkLCBudWV2b0NvbG9yKSA9PiB7XHJcblxyXG4gICAgc2V0U2VjY2lvbmVzKHByZXYgPT5cclxuICAgICAgcHJldi5tYXAocyA9PiB7XHJcbiAgICAgICAgaWYgKHMuaWQgIT09IHNlY2Npb25JZCkgcmV0dXJuIHM7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4ucywgZm9uZG86IG51ZXZvQ29sb3IgfTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfSwgW3NldFNlY2Npb25lc10pO1xyXG5cclxuXHJcbiAgdXNlRWRpdG9yV2luZG93QnJpZGdlKHtcclxuICAgIHNlY2Npb25lc09yZGVuYWRhcyxcclxuICAgIHNlY2Npb25lcyxcclxuICAgIHNlY2Npb25BY3RpdmFJZCxcclxuICAgIG9iamV0b3MsXHJcbiAgICBhbHRvQ2FudmFzLFxyXG4gICAgY2FsY3VsYXJPZmZzZXRZLFxyXG5cclxuICAgIGNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbixcclxuXHJcbiAgICBvbkRlc2hhY2VyLFxyXG4gICAgb25SZWhhY2VyLFxyXG4gICAgaGlzdG9yaWFsTGVuZ3RoOiBoaXN0b3JpYWwubGVuZ3RoLFxyXG4gICAgZnV0dXJvc0xlbmd0aDogZnV0dXJvcy5sZW5ndGgsXHJcblxyXG4gICAgc3RhZ2VSZWYsXHJcbiAgfSk7XHJcblxyXG5cclxuICBjb25zdCBlc1NlY2Npb25QYW50YWxsYUJ5SWQgPSB1c2VDYWxsYmFjaygoc2VjY2lvbklkKSA9PiB7XHJcbiAgICBjb25zdCBzID0gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmQoeCA9PiB4LmlkID09PSBzZWNjaW9uSWQpO1xyXG4gICAgcmV0dXJuIHMgJiYgbm9ybWFsaXphckFsdG9Nb2RvKHMuYWx0b01vZG8pID09PSBcInBhbnRhbGxhXCI7XHJcbiAgfSwgW3NlY2Npb25lc09yZGVuYWRhc10pO1xyXG5cclxuXHJcbiAgY29uc3QgYWx0b0NhbnZhc0RpbmFtaWNvID0gc2VjY2lvbmVzT3JkZW5hZGFzLnJlZHVjZSgoYWNjLCBzKSA9PiBhY2MgKyBzLmFsdHVyYSwgMCkgfHwgODAwO1xyXG5cclxuICBjb25zdCBhYnJpck1vZGFsQm9ycmFyU2VjY2lvbiA9IHVzZUNhbGxiYWNrKChzZWNjaW9uSWQpID0+IHtcclxuICAgIGlmICghc2VjY2lvbklkIHx8IGlzRGVsZXRpbmdTZWN0aW9uKSByZXR1cm47XHJcbiAgICBzZXREZWxldGVTZWN0aW9uTW9kYWwoeyBpc09wZW46IHRydWUsIHNlY3Rpb25JZDogc2VjY2lvbklkIH0pO1xyXG4gIH0sIFtpc0RlbGV0aW5nU2VjdGlvbl0pO1xyXG5cclxuICBjb25zdCBjZXJyYXJNb2RhbEJvcnJhclNlY2Npb24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBpZiAoaXNEZWxldGluZ1NlY3Rpb24pIHJldHVybjtcclxuICAgIHNldERlbGV0ZVNlY3Rpb25Nb2RhbCh7IGlzT3BlbjogZmFsc2UsIHNlY3Rpb25JZDogbnVsbCB9KTtcclxuICB9LCBbaXNEZWxldGluZ1NlY3Rpb25dKTtcclxuXHJcbiAgY29uc3QgY29uZmlybWFyQm9ycmFyU2VjY2lvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHNlY2Npb25JZCA9IGRlbGV0ZVNlY3Rpb25Nb2RhbC5zZWN0aW9uSWQ7XHJcbiAgICBpZiAoIXNlY2Npb25JZCB8fCBpc0RlbGV0aW5nU2VjdGlvbikgcmV0dXJuO1xyXG5cclxuICAgIHNldElzRGVsZXRpbmdTZWN0aW9uKHRydWUpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgYm9ycmFyU2VjY2lvbkV4dGVybmFsKHtcclxuICAgICAgICBzZWNjaW9uSWQsXHJcbiAgICAgICAgc2VjY2lvbmVzLFxyXG4gICAgICAgIG9iamV0b3MsXHJcbiAgICAgICAgc2x1ZyxcclxuICAgICAgICBzZWNjaW9uQWN0aXZhSWQsXHJcbiAgICAgICAgc2V0U2VjY2lvbmVzLFxyXG4gICAgICAgIHNldE9iamV0b3MsXHJcbiAgICAgICAgc2V0U2VjY2lvbkFjdGl2YUlkLFxyXG4gICAgICB9KTtcclxuICAgICAgc2V0RGVsZXRlU2VjdGlvbk1vZGFsKHsgaXNPcGVuOiBmYWxzZSwgc2VjdGlvbklkOiBudWxsIH0pO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNEZWxldGluZ1NlY3Rpb24oZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtcclxuICAgIGRlbGV0ZVNlY3Rpb25Nb2RhbC5zZWN0aW9uSWQsXHJcbiAgICBpc0RlbGV0aW5nU2VjdGlvbixcclxuICAgIHNlY2Npb25lcyxcclxuICAgIG9iamV0b3MsXHJcbiAgICBzbHVnLFxyXG4gICAgc2VjY2lvbkFjdGl2YUlkLFxyXG4gICAgc2V0U2VjY2lvbmVzLFxyXG4gICAgc2V0T2JqZXRvcyxcclxuICAgIHNldFNlY2Npb25BY3RpdmFJZCxcclxuICBdKTtcclxuXHJcblxyXG4gIC8vIDMpIENhZGEgdmV6IHF1ZSBlbCB1c3VhcmlvIHNlbGVjY2lvbmEgdW5hIHNlY2Npw7NuLCBhY3R1YWxpemFtb3MgZ2xvYmFsIHkgbm90aWZpY2Ftb3NcclxuICBjb25zdCBvblNlbGVjdFNlY2Npb24gPSB1c2VDYWxsYmFjaygoaWQpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHNldFNlY2Npb25BY3RpdmFJZChpZCk7XHJcbiAgICAgIHdpbmRvdy5fc2VjY2lvbkFjdGl2YUlkID0gaWQ7XHJcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInNlY2Npb24tYWN0aXZhXCIsIHsgZGV0YWlsOiB7IGlkIH0gfSkpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJObyBwdWRlIGVtaXRpciBzZWNjaW9uLWFjdGl2YTpcIiwgZSk7XHJcbiAgICB9XHJcbiAgfSwgW3NldFNlY2Npb25BY3RpdmFJZF0pO1xyXG5cclxuICBjb25zdCByZXNvbHZlclZpZXdwb3J0U2Nyb2xsU2VjY2lvbmVzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCkgfHwgc3RhZ2VSZWYuY3VycmVudCB8fCBudWxsO1xyXG4gICAgY29uc3Qgc3RhZ2VDb250YWluZXIgPSBzdGFnZT8uY29udGFpbmVyPy4oKTtcclxuICAgIGlmICghc3RhZ2VDb250YWluZXIgfHwgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgY29uc3QgbWFpbkVsZW1lbnQgPSBzdGFnZUNvbnRhaW5lci5jbG9zZXN0Py4oXCJtYWluXCIpO1xyXG4gICAgaWYgKG1haW5FbGVtZW50KSByZXR1cm4gbWFpbkVsZW1lbnQ7XHJcblxyXG4gICAgbGV0IGN1cnJlbnQgPSBzdGFnZUNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xyXG4gICAgd2hpbGUgKGN1cnJlbnQgJiYgY3VycmVudCAhPT0gZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGN1cnJlbnQpO1xyXG4gICAgICBjb25zdCBvdmVyZmxvd1kgPSBTdHJpbmcoc3R5bGUub3ZlcmZsb3dZIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGNvbnN0IG92ZXJmbG93ID0gU3RyaW5nKHN0eWxlLm92ZXJmbG93IHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGNvbnN0IGlzU2Nyb2xsYWJsZSA9XHJcbiAgICAgICAgb3ZlcmZsb3dZID09PSBcImF1dG9cIiB8fFxyXG4gICAgICAgIG92ZXJmbG93WSA9PT0gXCJzY3JvbGxcIiB8fFxyXG4gICAgICAgIG92ZXJmbG93WSA9PT0gXCJvdmVybGF5XCIgfHxcclxuICAgICAgICBvdmVyZmxvdyA9PT0gXCJhdXRvXCIgfHxcclxuICAgICAgICBvdmVyZmxvdyA9PT0gXCJzY3JvbGxcIiB8fFxyXG4gICAgICAgIG92ZXJmbG93ID09PSBcIm92ZXJsYXlcIjtcclxuXHJcbiAgICAgIGlmIChpc1Njcm9sbGFibGUgJiYgY3VycmVudC5zY3JvbGxIZWlnaHQgPiBjdXJyZW50LmNsaWVudEhlaWdodCArIDEpIHtcclxuICAgICAgICByZXR1cm4gY3VycmVudDtcclxuICAgICAgfVxyXG4gICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB3aW5kb3c7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBzaW5jcm9uaXphclNlY2Npb25WaXNpYmxlUG9yU2Nyb2xsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKCFzZWNjaW9uZXNPcmRlbmFkYXMubGVuZ3RoIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBzdGFnZSA9IHN0YWdlUmVmLmN1cnJlbnQ/LmdldFN0YWdlPy4oKSB8fCBzdGFnZVJlZi5jdXJyZW50IHx8IG51bGw7XHJcbiAgICBjb25zdCBzdGFnZUNvbnRhaW5lciA9IHN0YWdlPy5jb250YWluZXI/LigpO1xyXG4gICAgaWYgKCFzdGFnZUNvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHN0YWdlUmVjdCA9IHN0YWdlQ29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdD8uKCk7XHJcbiAgICBpZiAoIXN0YWdlUmVjdCB8fCAhTnVtYmVyLmlzRmluaXRlKHN0YWdlUmVjdC50b3ApIHx8ICFOdW1iZXIuaXNGaW5pdGUoc3RhZ2VSZWN0LmhlaWdodCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZpZXdwb3J0ID0gYXV0b1NlY3Rpb25WaWV3cG9ydFJlZi5jdXJyZW50IHx8IHJlc29sdmVyVmlld3BvcnRTY3JvbGxTZWNjaW9uZXMoKTtcclxuICAgIGlmICghdmlld3BvcnQpIHJldHVybjtcclxuXHJcbiAgICBsZXQgdmlld3BvcnRUb3AgPSAwO1xyXG4gICAgbGV0IHZpZXdwb3J0Qm90dG9tID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgMDtcclxuXHJcbiAgICBpZiAodmlld3BvcnQgIT09IHdpbmRvdykge1xyXG4gICAgICBjb25zdCB2aWV3cG9ydFJlY3QgPSB2aWV3cG9ydC5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpO1xyXG4gICAgICBpZiAoIXZpZXdwb3J0UmVjdCkgcmV0dXJuO1xyXG4gICAgICB2aWV3cG9ydFRvcCA9IHZpZXdwb3J0UmVjdC50b3A7XHJcbiAgICAgIHZpZXdwb3J0Qm90dG9tID0gdmlld3BvcnRSZWN0LmJvdHRvbTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2aWV3cG9ydFRvcCkgfHwgIU51bWJlci5pc0Zpbml0ZSh2aWV3cG9ydEJvdHRvbSkgfHwgdmlld3BvcnRCb3R0b20gPD0gdmlld3BvcnRUb3ApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFsdHVyYVN0YWdlUHggPSBOdW1iZXIoc3RhZ2VSZWN0LmhlaWdodCB8fCAwKTtcclxuICAgIGNvbnN0IGFsdHVyYUNhbnZhcyA9IE1hdGgubWF4KDEsIE51bWJlcihhbHRvQ2FudmFzRGluYW1pY28pIHx8IDEpO1xyXG4gICAgaWYgKCEoYWx0dXJhU3RhZ2VQeCA+IDApKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgcHhQb3JVbmlkYWQgPSBhbHR1cmFTdGFnZVB4IC8gYWx0dXJhQ2FudmFzO1xyXG4gICAgaWYgKCEocHhQb3JVbmlkYWQgPiAwKSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGNlbnRyb1ZpZXdwb3J0ID0gKHZpZXdwb3J0VG9wICsgdmlld3BvcnRCb3R0b20pIC8gMjtcclxuICAgIGxldCBtZWpvcklkID0gbnVsbDtcclxuICAgIGxldCBtZWpvclZpc2libGUgPSAwO1xyXG4gICAgbGV0IG1lam9yUmF0aW8gPSAtMTtcclxuICAgIGxldCBtZWpvckRpc3RhbmNpYUNlbnRybyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcclxuXHJcbiAgICBzZWNjaW9uZXNPcmRlbmFkYXMuZm9yRWFjaCgoc2VjY2lvbiwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3QgYWx0dXJhU2VjY2lvbiA9IE1hdGgubWF4KDEsIE51bWJlcihzZWNjaW9uLmFsdHVyYSkgfHwgMSk7XHJcbiAgICAgIGNvbnN0IG9mZnNldFkgPSBjYWxjdWxhck9mZnNldFkoc2VjY2lvbmVzT3JkZW5hZGFzLCBpbmRleCk7XHJcbiAgICAgIGNvbnN0IHRvcCA9IHN0YWdlUmVjdC50b3AgKyBvZmZzZXRZICogcHhQb3JVbmlkYWQ7XHJcbiAgICAgIGNvbnN0IGJvdHRvbSA9IHRvcCArIGFsdHVyYVNlY2Npb24gKiBweFBvclVuaWRhZDtcclxuXHJcbiAgICAgIGNvbnN0IHZpc2libGUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihib3R0b20sIHZpZXdwb3J0Qm90dG9tKSAtIE1hdGgubWF4KHRvcCwgdmlld3BvcnRUb3ApKTtcclxuICAgICAgaWYgKHZpc2libGUgPD0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3QgcmF0aW9WaXNpYmxlID0gdmlzaWJsZSAvIChhbHR1cmFTZWNjaW9uICogcHhQb3JVbmlkYWQpO1xyXG4gICAgICBjb25zdCBkaXN0YW5jaWFDZW50cm8gPSBNYXRoLmFicygodG9wICsgYm90dG9tKSAvIDIgLSBjZW50cm9WaWV3cG9ydCk7XHJcblxyXG4gICAgICBjb25zdCBtZWpvcmFQb3JWaXNpYmxlID0gdmlzaWJsZSA+IG1lam9yVmlzaWJsZSArIDE7XHJcbiAgICAgIGNvbnN0IGVtcGF0ZVZpc2libGUgPSBNYXRoLmFicyh2aXNpYmxlIC0gbWVqb3JWaXNpYmxlKSA8PSAxO1xyXG4gICAgICBjb25zdCBtZWpvcmFQb3JSYXRpbyA9IGVtcGF0ZVZpc2libGUgJiYgcmF0aW9WaXNpYmxlID4gbWVqb3JSYXRpbyArIDAuMDAxO1xyXG4gICAgICBjb25zdCBlbXBhdGVSYXRpbyA9IGVtcGF0ZVZpc2libGUgJiYgTWF0aC5hYnMocmF0aW9WaXNpYmxlIC0gbWVqb3JSYXRpbykgPD0gMC4wMDE7XHJcbiAgICAgIGNvbnN0IG1lam9yYVBvckNlbnRybyA9IGVtcGF0ZVJhdGlvICYmIGRpc3RhbmNpYUNlbnRybyA8IG1lam9yRGlzdGFuY2lhQ2VudHJvO1xyXG5cclxuICAgICAgaWYgKG1lam9yYVBvclZpc2libGUgfHwgbWVqb3JhUG9yUmF0aW8gfHwgbWVqb3JhUG9yQ2VudHJvKSB7XHJcbiAgICAgICAgbWVqb3JJZCA9IHNlY2Npb24uaWQ7XHJcbiAgICAgICAgbWVqb3JWaXNpYmxlID0gdmlzaWJsZTtcclxuICAgICAgICBtZWpvclJhdGlvID0gcmF0aW9WaXNpYmxlO1xyXG4gICAgICAgIG1lam9yRGlzdGFuY2lhQ2VudHJvID0gZGlzdGFuY2lhQ2VudHJvO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIW1lam9ySWQpIHJldHVybjtcclxuICAgIGlmIChzZWNjaW9uQWN0aXZhSWRSZWYuY3VycmVudCA9PT0gbWVqb3JJZCkgcmV0dXJuO1xyXG5cclxuICAgIG9uU2VsZWN0U2VjY2lvbihtZWpvcklkKTtcclxuICB9LCBbYWx0b0NhbnZhc0RpbmFtaWNvLCBvblNlbGVjdFNlY2Npb24sIHJlc29sdmVyVmlld3BvcnRTY3JvbGxTZWNjaW9uZXMsIHNlY2Npb25lc09yZGVuYWRhc10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBpZiAoIXNlY2Npb25lc09yZGVuYWRhcy5sZW5ndGgpIHJldHVybiB1bmRlZmluZWQ7XHJcblxyXG4gICAgYXV0b1NlY3Rpb25WaWV3cG9ydFJlZi5jdXJyZW50ID0gcmVzb2x2ZXJWaWV3cG9ydFNjcm9sbFNlY2Npb25lcygpO1xyXG4gICAgY29uc3Qgc2Nyb2xsVGFyZ2V0ID0gYXV0b1NlY3Rpb25WaWV3cG9ydFJlZi5jdXJyZW50IHx8IHdpbmRvdztcclxuXHJcbiAgICBjb25zdCBzY2hlZHVsZVN5bmMgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChhdXRvU2VjdGlvblNjcm9sbFJhZlJlZi5jdXJyZW50KSByZXR1cm47XHJcbiAgICAgIGF1dG9TZWN0aW9uU2Nyb2xsUmFmUmVmLmN1cnJlbnQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICBhdXRvU2VjdGlvblNjcm9sbFJhZlJlZi5jdXJyZW50ID0gMDtcclxuICAgICAgICBzaW5jcm9uaXphclNlY2Npb25WaXNpYmxlUG9yU2Nyb2xsKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBzY2hlZHVsZVN5bmMoKTtcclxuXHJcbiAgICBjb25zdCBldmVudFRhcmdldCA9IHNjcm9sbFRhcmdldCA9PT0gd2luZG93ID8gd2luZG93IDogc2Nyb2xsVGFyZ2V0O1xyXG4gICAgZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBzY2hlZHVsZVN5bmMsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHNjaGVkdWxlU3luYyk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIHNjaGVkdWxlU3luYyk7XHJcblxyXG4gICAgaWYgKHdpbmRvdy52aXN1YWxWaWV3cG9ydCkge1xyXG4gICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBzY2hlZHVsZVN5bmMpO1xyXG4gICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBzY2hlZHVsZVN5bmMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgc2NoZWR1bGVTeW5jKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgc2NoZWR1bGVTeW5jKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBzY2hlZHVsZVN5bmMpO1xyXG4gICAgICBpZiAod2luZG93LnZpc3VhbFZpZXdwb3J0KSB7XHJcbiAgICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgc2NoZWR1bGVTeW5jKTtcclxuICAgICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBzY2hlZHVsZVN5bmMpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChhdXRvU2VjdGlvblNjcm9sbFJhZlJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGF1dG9TZWN0aW9uU2Nyb2xsUmFmUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgIGF1dG9TZWN0aW9uU2Nyb2xsUmFmUmVmLmN1cnJlbnQgPSAwO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFtyZXNvbHZlclZpZXdwb3J0U2Nyb2xsU2VjY2lvbmVzLCBzZWNjaW9uZXNPcmRlbmFkYXMubGVuZ3RoLCBzaW5jcm9uaXphclNlY2Npb25WaXNpYmxlUG9yU2Nyb2xsXSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAvLyA/PyBOVUVWTyBIT09LIFBBUkEgR1XDjUFTXHJcbiAgY29uc3Qge1xyXG4gICAgZ3VpYUxpbmVhcyxcclxuICAgIG1vc3RyYXJHdWlhcyxcclxuICAgIGxpbXBpYXJHdWlhcyxcclxuICAgIGNvbmZpZ3VyYXJEcmFnRW5kXHJcbiAgfSA9IHVzZUd1aWFzQ2VudHJhZG8oe1xyXG4gICAgYW5jaG9DYW52YXM6IDgwMCxcclxuICAgIGFsdG9DYW52YXM6IGFsdG9DYW52YXNEaW5hbWljbyxcclxuICAgIC8vIFVYOiBndcOtYSBkZSBzZWNjacOzbiBzb2xvIGFsIGNlbnRyYXIsIGNvbiBpbcOhbiBzdXRpbC5cclxuICAgIG1hcmdlblNlbnNpYmlsaWRhZDogOCxcclxuICAgIG1hZ25ldFJhZGl1czogMTAsXHJcbiAgICBzZWN0aW9uTWFnbmV0UmFkaXVzOiA2LFxyXG4gICAgc25hcFN0cmVuZ3RoOiAwLjgsXHJcbiAgICBzZWN0aW9uU25hcFN0cmVuZ3RoOiAxLFxyXG4gICAgc2VjdGlvbkxpbmVUb2xlcmFuY2U6IDAuNzUsXHJcbiAgICBzbmFwVG9FZGdlczogdHJ1ZSxcclxuICAgIHNuYXBUb0NlbnRlcnM6IHRydWUsXHJcbiAgICBzZWNjaW9uZXNPcmRlbmFkYXNcclxuICB9KTtcclxuXHJcbiAgLy8gPz8gRnVuY2nDs24gcGFyYSBhY3R1YWxpemFyIHBvc2ljacOzbiBkZWwgYm90w7NuIFNJTiByZS1yZW5kZXJcclxuICBjb25zdCB7IGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgfSA9IHVzZU9wdGlvbkJ1dHRvblBvc2l0aW9uKHtcclxuICAgIGJvdG9uT3BjaW9uZXNSZWYsXHJcbiAgICBsYXlvdXRSb290UmVmOiBlZGl0b3JPdmVybGF5Um9vdFJlZixcclxuICAgIGVsZW1lbnRSZWZzLFxyXG4gICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICAgIHN0YWdlUmVmLFxyXG4gICAgZXNjYWxhVmlzdWFsLFxyXG4gICAgZXNjYWxhQWN0aXZhLFxyXG4gICAgaXNNb2JpbGUsXHJcbiAgICBidXR0b25TaXplOiBvcHRpb25CdXR0b25TaXplLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVUcmFuc2Zvcm1JbnRlcmFjdGlvblN0YXJ0ID0gdXNlQ2FsbGJhY2soKHBheWxvYWQgPSB7fSkgPT4ge1xyXG4gICAgY29uc3Qgcm90YXRpbmcgPSBwYXlsb2FkPy5pc1JvdGF0ZSA9PT0gdHJ1ZTtcclxuICAgIHNldElzU2VsZWN0aW9uUm90YXRpbmcocm90YXRpbmcpO1xyXG4gICAgaWYgKHJvdGF0aW5nKSB7XHJcbiAgICAgIHNldE1vc3RyYXJQYW5lbFooZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlVHJhbnNmb3JtSW50ZXJhY3Rpb25FbmQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBzZXRJc1NlbGVjdGlvblJvdGF0aW5nKGZhbHNlKTtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgIGlmICh0eXBlb2YgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcyhcInRyYW5zZm9ybS1pbnRlcmFjdGlvbi1lbmRcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sIFthY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPT09IDEgJiYgIWVkaXRpbmcuaWQpIHJldHVybjtcclxuICAgIHNldElzU2VsZWN0aW9uUm90YXRpbmcoZmFsc2UpO1xyXG4gIH0sIFtlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCwgZWRpdGluZy5pZF0pO1xyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBvbkRyYWdTdGFydEdsb2JhbCA9ICgpID0+IHtcclxuICAgICAgLy8gbGltcGlhciBob3Zlci9wcmVzZWxlY2Npw7NuIGlubWVkaWF0YW1lbnRlIHBhcmEgZXZpdGFyIFwiZmxhc2hcIiB2aXN1YWxcclxuICAgICAgZmx1c2hTeW5jKCgpID0+IHtcclxuICAgICAgICBzZXRIb3ZlcklkKG51bGwpO1xyXG4gICAgICAgIHNldEVsZW1lbnRvc1ByZVNlbGVjY2lvbmFkb3MoW10pO1xyXG4gICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IG9uRHJhZ0VuZEdsb2JhbCA9ICgpID0+IHtcclxuICAgICAgLy8gbmFkYSBwb3IgYWhvcmE7IHNpIHF1aXNpZXJhcywgcG9kcsOtYXMgcmVjYWxjdWxhciBhbGdvIGFjw6FcclxuICAgIH07XHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZ2luZy1zdGFydFwiLCBvbkRyYWdTdGFydEdsb2JhbCk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdnaW5nLWVuZFwiLCBvbkRyYWdFbmRHbG9iYWwpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnZ2luZy1zdGFydFwiLCBvbkRyYWdTdGFydEdsb2JhbCk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ2dpbmctZW5kXCIsIG9uRHJhZ0VuZEdsb2JhbCk7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gIC8vID8/IE9QVElNSVpBQ0nDk046IExpbXBpYXIgY2FjaGUgZGUgaW50ZXJzZWNjacOzbiBhbCBjYW1iaWFyIHNlbGVjY2nDs25cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gTGltcGlhciBjYWNoZSBjdWFuZG8gY2FtYmlhIGxhIHNlbGVjY2nDs25cclxuICAgIGlmICh3aW5kb3cuX2xpbmVJbnRlcnNlY3Rpb25DYWNoZSkge1xyXG4gICAgICB3aW5kb3cuX2xpbmVJbnRlcnNlY3Rpb25DYWNoZSA9IHt9O1xyXG4gICAgfVxyXG4gIH0sIFtlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aF0pO1xyXG5cclxuICAvLyA/PyBPUFRJTUlaQUNJw5NOOiBGb3J6YXIgYWN0dWFsaXphY2nDs24gZGUgbMOtbmVhcyBkZXNwdcOpcyBkZSBkcmFnIGdydXBhbFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAod2luZG93Ll9ncnVwb0xpZGVyIHx8IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgLy8gU29sbyBjb3JyZXIgZXN0YSBvcHRpbWl6YWNpw7NuIGN1YW5kbyBhY2FiYSBkZSBmaW5hbGl6YXIgdW4gZHJhZyBncnVwYWwuXHJcbiAgICBjb25zdCBub3cgPVxyXG4gICAgICB0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgPyBwZXJmb3JtYW5jZS5ub3coKVxyXG4gICAgICAgIDogRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IHJlY2VudGx5RW5kZWRHcm91cERyYWcgPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUod2luZG93Ll9za2lwVW50aWwpICYmIHdpbmRvdy5fc2tpcFVudGlsID4gbm93O1xyXG4gICAgaWYgKCFyZWNlbnRseUVuZGVkR3JvdXBEcmFnKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaGF5TGluZWFzID0gb2JqZXRvcy5zb21lKG9iaiA9PlxyXG4gICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG9iai5pZCkgJiZcclxuICAgICAgb2JqLnRpcG8gPT09ICdmb3JtYScgJiZcclxuICAgICAgb2JqLmZpZ3VyYSA9PT0gJ2xpbmUnXHJcbiAgICApO1xyXG4gICAgaWYgKCFoYXlMaW5lYXMpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50W2lkXTtcclxuICAgICAgICBpZiAobm9kZSAmJiBub2RlLmdldExheWVyKSB7XHJcbiAgICAgICAgICBub2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LCA1MCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XHJcbiAgfSwgW2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MsIG9iamV0b3NdKTtcclxuXHJcblxyXG4gIGNvbnN0IGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEgPSB1c2VNZW1vKCgpID0+IHtcclxuICAgIHJldHVybiAobGluZU9iaiwgYXJlYSwgc3RhZ2UpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBpZiAoIWxpbmVPYmogfHwgIWFyZWEgfHwgIWxpbmVPYmoucG9pbnRzKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGxldCBwb2ludHMgPSBsaW5lT2JqLnBvaW50cztcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocG9pbnRzKSB8fCBwb2ludHMubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgcG9pbnRzID0gWzAsIDAsIDEwMCwgMF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwdW50b3NMaW1waW9zID0gW1xyXG4gICAgICAgICAgcGFyc2VGbG9hdChwb2ludHNbMF0pIHx8IDAsXHJcbiAgICAgICAgICBwYXJzZUZsb2F0KHBvaW50c1sxXSkgfHwgMCxcclxuICAgICAgICAgIHBhcnNlRmxvYXQocG9pbnRzWzJdKSB8fCAxMDAsXHJcbiAgICAgICAgICBwYXJzZUZsb2F0KHBvaW50c1szXSkgfHwgMFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vID8/IFVTQVIgTEEgUE9TSUNJw5NOIERFTCBOT0RPIFJFQUwgRU4gRUwgU1RBR0VcclxuICAgICAgICBjb25zdCBub2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2xpbmVPYmouaWRdO1xyXG4gICAgICAgIGNvbnN0IGxpbmVYID0gbm9kZSA/IG5vZGUueCgpIDogKGxpbmVPYmoueCB8fCAwKTtcclxuICAgICAgICBjb25zdCBsaW5lWSA9IG5vZGUgPyBub2RlLnkoKSA6IChsaW5lT2JqLnkgfHwgMCk7XHJcblxyXG4gICAgICAgIC8vIENvb3JkZW5hZGFzIGFic29sdXRhcyBkZSBsb3MgcHVudG9zXHJcbiAgICAgICAgY29uc3Qgc3RhcnRYID0gbGluZVggKyBwdW50b3NMaW1waW9zWzBdO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0WSA9IGxpbmVZICsgcHVudG9zTGltcGlvc1sxXTtcclxuICAgICAgICBjb25zdCBlbmRYID0gbGluZVggKyBwdW50b3NMaW1waW9zWzJdO1xyXG4gICAgICAgIGNvbnN0IGVuZFkgPSBsaW5lWSArIHB1bnRvc0xpbXBpb3NbM107XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gPz8gTcOJVE9ETyAxOiBWZXJpZmljYXIgc2kgYWxnw7puIHB1bnRvIGVzdMOhIGRlbnRybyBkZWwgw6FyZWFcclxuICAgICAgICBjb25zdCBzdGFydERlbnRybyA9IChcclxuICAgICAgICAgIHN0YXJ0WCA+PSBhcmVhLnggJiYgc3RhcnRYIDw9IGFyZWEueCArIGFyZWEud2lkdGggJiZcclxuICAgICAgICAgIHN0YXJ0WSA+PSBhcmVhLnkgJiYgc3RhcnRZIDw9IGFyZWEueSArIGFyZWEuaGVpZ2h0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZW5kRGVudHJvID0gKFxyXG4gICAgICAgICAgZW5kWCA+PSBhcmVhLnggJiYgZW5kWCA8PSBhcmVhLnggKyBhcmVhLndpZHRoICYmXHJcbiAgICAgICAgICBlbmRZID49IGFyZWEueSAmJiBlbmRZIDw9IGFyZWEueSArIGFyZWEuaGVpZ2h0XHJcbiAgICAgICAgKTtcclxuXHJcblxyXG4gICAgICAgIGlmIChzdGFydERlbnRybyB8fCBlbmREZW50cm8pIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gPz8gTcOJVE9ETyAyOiBWZXJpZmljYXIgaW50ZXJzZWNjacOzbiBsw61uZWEtcmVjdMOhbmd1bG9cclxuICAgICAgICBjb25zdCBpbnRlcnNlY3RhID0gbGluZUludGVyc2VjdHNSZWN0KFxyXG4gICAgICAgICAgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksXHJcbiAgICAgICAgICBhcmVhLngsIGFyZWEueSwgYXJlYS54ICsgYXJlYS53aWR0aCwgYXJlYS55ICsgYXJlYS5oZWlnaHRcclxuICAgICAgICApO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKGludGVyc2VjdGEpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBGdW5jacOzbiBhdXhpbGlhciBwYXJhIHZlcmlmaWNhciBpbnRlcnNlY2Npw7NuIGzDrW5lYS1yZWN0w6FuZ3Vsb1xyXG4gIGZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzUmVjdCh4MSwgeTEsIHgyLCB5MiwgcmVjdExlZnQsIHJlY3RUb3AsIHJlY3RSaWdodCwgcmVjdEJvdHRvbSkge1xyXG4gICAgLy8gVmVyaWZpY2FyIHNpIGxhIGzDrW5lYSBpbnRlcnNlY3RhIGNvbiBhbGd1bm8gZGUgbG9zIDQgbGFkb3MgZGVsIHJlY3TDoW5ndWxvXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0VG9wLCByZWN0UmlnaHQsIHJlY3RUb3ApIHx8IC8vIFRvcFxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RSaWdodCwgcmVjdFRvcCwgcmVjdFJpZ2h0LCByZWN0Qm90dG9tKSB8fCAvLyBSaWdodFxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0Qm90dG9tLCByZWN0UmlnaHQsIHJlY3RCb3R0b20pIHx8IC8vIEJvdHRvbVxyXG4gICAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0VG9wLCByZWN0TGVmdCwgcmVjdEJvdHRvbSkgLy8gTGVmdFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIEZ1bmNpw7NuIGF1eGlsaWFyIHBhcmEgdmVyaWZpY2FyIGludGVyc2VjY2nDs24gbMOtbmVhLWzDrW5lYVxyXG4gIGZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzTGluZSh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpIHtcclxuICAgIGNvbnN0IGRlbm9tID0gKHgxIC0geDIpICogKHkzIC0geTQpIC0gKHkxIC0geTIpICogKHgzIC0geDQpO1xyXG4gICAgaWYgKE1hdGguYWJzKGRlbm9tKSA8IDAuMDAwMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGNvbnN0IHQgPSAoKHgxIC0geDMpICogKHkzIC0geTQpIC0gKHkxIC0geTMpICogKHgzIC0geDQpKSAvIGRlbm9tO1xyXG4gICAgY29uc3QgdSA9IC0oKHgxIC0geDIpICogKHkxIC0geTMpIC0gKHkxIC0geTIpICogKHgxIC0geDMpKSAvIGRlbm9tO1xyXG5cclxuICAgIHJldHVybiB0ID49IDAgJiYgdCA8PSAxICYmIHUgPj0gMCAmJiB1IDw9IDE7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gPz8gQWp1c3RhciBlbCB0cmFuc2Zvcm1lciBjdWFuZG8gY2FtYmlhIGVsIHRleHRvIGlubGluZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWVkaXRpbmcuaWQgfHwgIWVsZW1lbnRSZWZzLmN1cnJlbnRbZWRpdGluZy5pZF0pIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBub2RlID0gZWxlbWVudFJlZnMuY3VycmVudFtlZGl0aW5nLmlkXTtcclxuICAgIGNvbnN0IG9iamV0b0VuRWRpY2lvbiA9IG9iamV0b3MuZmluZCgobykgPT4gby5pZCA9PT0gZWRpdGluZy5pZCk7XHJcbiAgICBpZiAoIW9iamV0b0VuRWRpY2lvbikgcmV0dXJuO1xyXG4gICAgY29uc3Qgbm9kZUNsYXNzID0gbm9kZS5nZXRDbGFzc05hbWU/LigpO1xyXG4gICAgY29uc3QgYmVmb3JlTWV0cmljcyA9IG9idGVuZXJNZXRyaWNhc05vZG9JbmxpbmUobm9kZSk7XHJcbiAgICBjb25zdCBlZGl0aW5nVmFsdWUgPSBTdHJpbmcoZWRpdGluZy52YWx1ZSA/PyBcIlwiKTtcclxuXHJcbiAgICBjb25zdCBzaG91bGRLZWVwQ2VudGVyUHJldmlldyA9XHJcbiAgICAgIG9iamV0b0VuRWRpY2lvbi50aXBvID09PSBcInRleHRvXCIgJiZcclxuICAgICAgIW9iamV0b0VuRWRpY2lvbi5fX2dyb3VwQWxpZ24gJiZcclxuICAgICAgIU51bWJlci5pc0Zpbml0ZShvYmpldG9FbkVkaWNpb24ud2lkdGgpICYmXHJcbiAgICAgIG9iamV0b0VuRWRpY2lvbi5fX2F1dG9XaWR0aCAhPT0gZmFsc2U7XHJcblxyXG4gICAgY29uc3QgZXhwZWN0ZWRYID0gc2hvdWxkS2VlcENlbnRlclByZXZpZXdcclxuICAgICAgPyBjYWxjdWxhclhUZXh0b0NlbnRyYWRvKG9iamV0b0VuRWRpY2lvbiwgZWRpdGluZ1ZhbHVlKVxyXG4gICAgICA6IChOdW1iZXIuaXNGaW5pdGUob2JqZXRvRW5FZGljaW9uLngpID8gb2JqZXRvRW5FZGljaW9uLnggOiBudWxsKTtcclxuXHJcbiAgICBpbmxpbmVEZWJ1Z0xvZyhcInByZXZpZXctZWZmZWN0LXN0YXJ0XCIsIHtcclxuICAgICAgaWQ6IGVkaXRpbmcuaWQsXHJcbiAgICAgIHZhbHVlTGVuZ3RoOiBlZGl0aW5nVmFsdWUubGVuZ3RoLFxyXG4gICAgICBub2RlQ2xhc3MsXHJcbiAgICAgIG9ialg6IG9iamV0b0VuRWRpY2lvbi54ID8/IG51bGwsXHJcbiAgICAgIG9ialk6IG9iamV0b0VuRWRpY2lvbi55ID8/IG51bGwsXHJcbiAgICAgIHNob3VsZEtlZXBDZW50ZXJQcmV2aWV3LFxyXG4gICAgICBleHBlY3RlZFgsXHJcbiAgICAgIGJlZm9yZU1ldHJpY3MsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyA/PyBBY3R1YWxpemFyIGVsIHRyYW5zZm9ybWVyIHNpIGVzdMOhIHByZXNlbnRlXHJcbiAgICBjb25zdCB0cmFuc2Zvcm1lciA9IG5vZGUuZ2V0U3RhZ2UoKT8uZmluZE9uZSgnVHJhbnNmb3JtZXInKTtcclxuICAgIGlmICh0cmFuc2Zvcm1lciAmJiB0cmFuc2Zvcm1lci5ub2RlcyAmJiB0cmFuc2Zvcm1lci5ub2RlcygpLmluY2x1ZGVzKG5vZGUpKSB7XHJcbiAgICAgIHRyYW5zZm9ybWVyLmZvcmNlVXBkYXRlKCk7IC8vIEFjdHVhbGl6YSBtYW51YWxtZW50ZSBlbCB0cmFuc2Zvcm1lclxyXG4gICAgICB0cmFuc2Zvcm1lci5nZXRMYXllcigpPy5iYXRjaERyYXcoKTsgLy8gUmVkaWJ1amFcclxuXHJcbiAgICAgIGxldCB0cmFuc2Zvcm1lclJlY3QgPSBudWxsO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHRyYW5zZm9ybWVyUmVjdCA9IHRyYW5zZm9ybWVyLmdldENsaWVudFJlY3Qoe1xyXG4gICAgICAgICAgc2tpcFRyYW5zZm9ybTogZmFsc2UsXHJcbiAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxyXG4gICAgICAgICAgc2tpcFN0cm9rZTogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgdHJhbnNmb3JtZXJSZWN0ID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaW5saW5lRGVidWdMb2coXCJwcmV2aWV3LXRyYW5zZm9ybWVyLXVwZGF0ZWRcIiwge1xyXG4gICAgICAgIGlkOiBlZGl0aW5nLmlkLFxyXG4gICAgICAgIHRyYW5zZm9ybWVyUmVjdDogdHJhbnNmb3JtZXJSZWN0XHJcbiAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICB4OiB0cmFuc2Zvcm1lclJlY3QueCxcclxuICAgICAgICAgICAgICB5OiB0cmFuc2Zvcm1lclJlY3QueSxcclxuICAgICAgICAgICAgICB3aWR0aDogdHJhbnNmb3JtZXJSZWN0LndpZHRoLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogdHJhbnNmb3JtZXJSZWN0LmhlaWdodCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgOiBudWxsLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhZnRlck1ldHJpY3MgPSBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lKG5vZGUpO1xyXG4gICAgY29uc3QgYWZ0ZXJYID1cclxuICAgICAgdHlwZW9mIG5vZGUueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiBhZnRlck1ldHJpY3M/LnggPz8gbnVsbDtcclxuICAgIGlubGluZURlYnVnTG9nKFwicHJldmlldy1wcm9wcy1zeW5jXCIsIHtcclxuICAgICAgaWQ6IGVkaXRpbmcuaWQsXHJcbiAgICAgIHZhbHVlTGVuZ3RoOiBlZGl0aW5nVmFsdWUubGVuZ3RoLFxyXG4gICAgICBleHBlY3RlZFgsXHJcbiAgICAgIGFmdGVyWCxcclxuICAgICAgZGVsdGFYOlxyXG4gICAgICAgIE51bWJlci5pc0Zpbml0ZShhZnRlclgpICYmIE51bWJlci5pc0Zpbml0ZShleHBlY3RlZFgpXHJcbiAgICAgICAgICA/IGFmdGVyWCAtIGV4cGVjdGVkWFxyXG4gICAgICAgICAgOiBudWxsLFxyXG4gICAgICBiZWZvcmVNZXRyaWNzLFxyXG4gICAgICBhZnRlck1ldHJpY3MsXHJcbiAgICB9KTtcclxuICB9LCBbZWRpdGluZy5pZCwgZWRpdGluZy52YWx1ZSwgb2JqZXRvcywgb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZSwgY2FsY3VsYXJYVGV4dG9DZW50cmFkb10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgcGVuZGluZyA9IGlubGluZUNvbW1pdERlYnVnUmVmLmN1cnJlbnQ7XHJcbiAgICBpZiAoIXBlbmRpbmc/LmlkKSByZXR1cm47XHJcbiAgICBpZiAoZWRpdGluZy5pZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGZpbmFsT2JqID0gb2JqZXRvcy5maW5kKChvKSA9PiBvLmlkID09PSBwZW5kaW5nLmlkKTtcclxuICAgIGNvbnN0IGZpbmFsTm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbcGVuZGluZy5pZF07XHJcbiAgICBjb25zdCBmaW5hbE5vZGVNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZShmaW5hbE5vZGUpO1xyXG4gICAgY29uc3QgZmluYWxYID0gTnVtYmVyLmlzRmluaXRlKGZpbmFsT2JqPy54KSA/IGZpbmFsT2JqLnggOiBudWxsO1xyXG4gICAgY29uc3QgZGVsdGFGaW5hbFZzRXhwZWN0ZWQgPVxyXG4gICAgICBOdW1iZXIuaXNGaW5pdGUoZmluYWxYKSAmJiBOdW1iZXIuaXNGaW5pdGUocGVuZGluZy5leHBlY3RlZFgpXHJcbiAgICAgICAgPyBmaW5hbFggLSBwZW5kaW5nLmV4cGVjdGVkWFxyXG4gICAgICAgIDogbnVsbDtcclxuXHJcbiAgICBpbmxpbmVEZWJ1Z0xvZyhcImZpbmlzaC1wb3N0LWNvbW1pdFwiLCB7XHJcbiAgICAgIC4uLnBlbmRpbmcsXHJcbiAgICAgIGZpbmFsWCxcclxuICAgICAgZGVsdGFGaW5hbFZzRXhwZWN0ZWQsXHJcbiAgICAgIGZpbmFsTm9kZU1ldHJpY3MsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpbmxpbmVDb21taXREZWJ1Z1JlZi5jdXJyZW50ID0geyBpZDogbnVsbCB9O1xyXG4gIH0sIFtlZGl0aW5nLmlkLCBvYmpldG9zLCBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICB3aW5kb3cuX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MgPSBlbGVtZW50b3NTZWxlY2Npb25hZG9zO1xyXG4gICAgd2luZG93Ll9vYmpldG9zQWN0dWFsZXMgPSBvYmpldG9zO1xyXG4gICAgd2luZG93Ll9lbGVtZW50UmVmcyA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ7XHJcbiAgICB3aW5kb3cuX3NlY2Npb25lc09yZGVuYWRhcyA9IFsuLi5zZWNjaW9uZXNdLnNvcnQoKGEsIGIpID0+IGEub3JkZW4gLSBiLm9yZGVuKTtcclxuICAgIHdpbmRvdy5fYWx0b0NhbnZhcyA9IGFsdG9DYW52YXM7XHJcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcclxuICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiZWRpdG9yLXNlbGVjdGlvbi1jaGFuZ2VcIiwge1xyXG4gICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgaWRzOiBbLi4uZWxlbWVudG9zU2VsZWNjaW9uYWRvc10sXHJcbiAgICAgICAgICBhY3RpdmVTZWN0aW9uSWQ6IHNlY2Npb25BY3RpdmFJZCB8fCBudWxsLFxyXG4gICAgICAgICAgZ2FsbGVyeUNlbGw6IGNlbGRhR2FsZXJpYUFjdGl2YSB8fCBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH0sIFtlbGVtZW50b3NTZWxlY2Npb25hZG9zLCBvYmpldG9zLCBzZWNjaW9uZXMsIGFsdG9DYW52YXMsIHNlY2Npb25BY3RpdmFJZCwgY2VsZGFHYWxlcmlhQWN0aXZhXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWNlbGRhR2FsZXJpYUFjdGl2YSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHsgb2JqSWQgfSA9IGNlbGRhR2FsZXJpYUFjdGl2YTtcclxuICAgIGNvbnN0IGdhbGVyaWFFeGlzdGUgPSBvYmpldG9zLnNvbWUoKG8pID0+IG8uaWQgPT09IG9iaklkICYmIG8udGlwbyA9PT0gXCJnYWxlcmlhXCIpO1xyXG4gICAgaWYgKCFnYWxlcmlhRXhpc3RlKSB7XHJcbiAgICAgIHNldENlbGRhR2FsZXJpYUFjdGl2YShudWxsKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCAhPT0gMSB8fCBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdICE9PSBvYmpJZCkge1xyXG4gICAgICBzZXRDZWxkYUdhbGVyaWFBY3RpdmEobnVsbCk7XHJcbiAgICB9XHJcbiAgfSwgW2NlbGRhR2FsZXJpYUFjdGl2YSwgZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgb2JqZXRvc10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgd2luZG93Ll9jZWxkYUdhbGVyaWFBY3RpdmEgPSBjZWxkYUdhbGVyaWFBY3RpdmEgfHwgbnVsbDtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KFxyXG4gICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJlZGl0b3ItZ2FsbGVyeS1jZWxsLWNoYW5nZVwiLCB7XHJcbiAgICAgICAgZGV0YWlsOiB7IGNlbGw6IGNlbGRhR2FsZXJpYUFjdGl2YSB8fCBudWxsIH0sXHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gIH0sIFtjZWxkYUdhbGVyaWFBY3RpdmFdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KFxyXG4gICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJzZWNjaW9uLWFjdGl2YVwiLCB7XHJcbiAgICAgICAgZGV0YWlsOiB7IGlkOiBzZWNjaW9uQWN0aXZhSWQgfHwgbnVsbCB9LFxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9LCBbc2VjY2lvbkFjdGl2YUlkXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIHdpbmRvdy5zZXRIb3ZlcklkR2xvYmFsID0gc2V0SG92ZXJJZDtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmICh3aW5kb3cuc2V0SG92ZXJJZEdsb2JhbCA9PT0gc2V0SG92ZXJJZCkge1xyXG4gICAgICAgIGRlbGV0ZSB3aW5kb3cuc2V0SG92ZXJJZEdsb2JhbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWhvdmVySWQpIHJldHVybjtcclxuICAgIGNvbnN0IGV4aXN0cyA9IG9iamV0b3Muc29tZSgobykgPT4gby5pZCA9PT0gaG92ZXJJZCk7XHJcbiAgICBpZiAoIWV4aXN0cykgc2V0SG92ZXJJZChudWxsKTtcclxuICB9LCBbaG92ZXJJZCwgb2JqZXRvc10pO1xyXG5cclxuXHJcblxyXG4gIC8vIENsZWFudXAgZGVsIHNpc3RlbWEgaW1wZXJhdGl2b1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpbXBlcmF0aXZlT2JqZWN0cy5jbGVhbnVwKCk7XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuICBjb25zdCBzdGFnZUdlc3R1cmVzID0gdXNlU3RhZ2VHZXN0dXJlcyh7XHJcbiAgICBzZWNjaW9uZXMsXHJcbiAgICBvYmpldG9zLFxyXG4gICAgZWxlbWVudFJlZnMsXHJcbiAgICBkcmFnU3RhcnRQb3MsXHJcbiAgICBoYXNEcmFnZ2VkLFxyXG4gICAgc2VsZWNjaW9uQWN0aXZhLFxyXG4gICAgaW5pY2lvU2VsZWNjaW9uLFxyXG4gICAgYXJlYVNlbGVjY2lvbixcclxuICAgIGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEsXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgc2V0RWxlbWVudG9zUHJlU2VsZWNjaW9uYWRvcyxcclxuICAgIHNldFNlbGVjY2lvbkFjdGl2YSxcclxuICAgIHNldEluaWNpb1NlbGVjY2lvbixcclxuICAgIHNldEFyZWFTZWxlY2Npb24sXHJcbiAgICBvblNlbGVjdFNlY2Npb24sXHJcbiAgICBjZXJyYXJNZW51c0Zsb3RhbnRlcyxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgbW9iaWxlQ2FudmFzVG9vbGJhck9mZnNldCA9IG1vYmlsZVRleHRUb29sYmFyVmlzaWJsZVxyXG4gICAgPyBtb2JpbGVCb3R0b21UeXBvZ3JhcGh5U3RyaXBWaXNpYmxlXHJcbiAgICAgID8gODhcclxuICAgICAgOiAzMlxyXG4gICAgOiAwO1xyXG5cclxuICBjb25zdCBtb2JpbGVTZWN0aW9uQWN0aW9uc1RvcCA9IG1vYmlsZUJvdHRvbVR5cG9ncmFwaHlTdHJpcFZpc2libGVcclxuICAgID8gXCJjYWxjKDE3MnB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC10b3AsIDBweCkpXCJcclxuICAgIDogbW9iaWxlVGV4dFRvb2xiYXJWaXNpYmxlXHJcbiAgICAgID8gXCJjYWxjKDExOHB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC10b3AsIDBweCkpXCJcclxuICAgICAgOiBcImNhbGMoNjRweCArIGVudihzYWZlLWFyZWEtaW5zZXQtdG9wLCAwcHgpKVwiO1xyXG5cclxuICBjb25zdCBzY2FsZWRDYW52YXNIZWlnaHRDb21wZW5zYXRpb24gPSBpc01vYmlsZSAmJlxyXG4gICAgTnVtYmVyLmlzRmluaXRlKGVzY2FsYVZpc3VhbCkgJiZcclxuICAgIE51bWJlci5pc0Zpbml0ZShhbHRvQ2FudmFzRGluYW1pY28pXHJcbiAgICA/IChlc2NhbGFWaXN1YWwgLSAxKSAqIGFsdG9DYW52YXNEaW5hbWljb1xyXG4gICAgOiAwO1xyXG5cclxuXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2XHJcbiAgICAgIHJlZj17ZWRpdG9yT3ZlcmxheVJvb3RSZWZ9XHJcbiAgICAgIGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIlxyXG4gICAgICBzdHlsZT17e1xyXG4gICAgICAgIC8vID8gRGVqYW1vcyBxdWUgZWwgc2Nyb2xsIGxvIG1hbmVqZSBlbCA8bWFpbj4gZGVsIERhc2hib2FyZExheW91dCAodW4gc29sbyBzY3JvbGwpXHJcbiAgICAgICAgbWFyZ2luVG9wOiAwLFxyXG4gICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgb3ZlcmZsb3dYOiBcImhpZGRlblwiLFxyXG5cclxuICAgICAgICAvLyA/IFVYIG1vYmlsZTogcGVybWl0aXIgc2Nyb2xsIHZlcnRpY2FsIG5hdHVyYWwgYWxyZWRlZG9yIGRlbCBjYW52YXNcclxuICAgICAgICB0b3VjaEFjdGlvbjogXCJwYW4teVwiLFxyXG4gICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiBcInRvdWNoXCIsXHJcblxyXG4gICAgICAgIC8vID8gZXNwYWNpbyBwYXJhIHF1ZSBubyDigJxjaG9xdWXigJ0gY29uIGhlYWRlciAvIGJhcnJhc1xyXG4gICAgICAgIHBhZGRpbmdUb3A6IDEyICsgbW9iaWxlQ2FudmFzVG9vbGJhck9mZnNldCxcclxuICAgICAgICBwYWRkaW5nQm90dG9tOiBcImNhbGMoOTZweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tLCAwcHgpKVwiLFxyXG4gICAgICAgIHRyYW5zaXRpb246IFwicGFkZGluZy10b3AgMTgwbXMgZWFzZVwiLFxyXG4gICAgICB9fVxyXG4gICAgPlxyXG5cclxuXHJcbiAgICAgIDxkaXZcclxuICAgICAgICByZWY9e2NvbnRlbmVkb3JSZWZ9XHJcbiAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgIG1heFdpZHRoOiBcIjEyMDBweFwiLFxyXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNmNWY1ZjVcIixcclxuICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxyXG4gICAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXHJcbiAgICAgICAgICBwYWRkaW5nVG9wOiBcIjIwcHhcIiwgLy8gPyBNRU5PUyBQQURESU5HIElOVEVSTk9cclxuICAgICAgICAgIHBhZGRpbmdCb3R0b206IFwiY2FsYyg0MHB4ICsgZW52KHNhZmUtYXJlYS1pbnNldC1ib3R0b20sIDBweCkpXCIsIC8vID8gRVNQQUNJTyBJTkZFUklPUlxyXG4gICAgICAgIH19XHJcbiAgICAgID5cclxuXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgc2NhbGUoJHtlc2NhbGFWaXN1YWx9KWAsXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJ3RvcCBjZW50ZXInLFxyXG4gICAgICAgICAgICB3aWR0aDogem9vbSA9PT0gMC44ID8gXCIxMjIwcHhcIiA6IFwiMTAwMHB4XCIsIC8vID8gOTIwcHggY2FudmFzICsgMTUwcHggY2FkYSBsYWRvXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogc2NhbGVkQ2FudmFzSGVpZ2h0Q29tcGVuc2F0aW9uLFxyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+XHJcblxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiXHJcbiAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IHpvb20gPT09IDAuOCA/IFwiMTIyMHB4XCIgOiBcIjEwMDBweFwiLCAvLyA/IEFKVVNUQVIgU0VHw5pOIFpPT01cclxuICAgICAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcclxuICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgID5cclxuXHJcbiAgICAgICAgICAgIHsvKiBCb3RvbmVzIGRlIG9yZGVuIGRlIHNlY2Npw7NuICovfVxyXG4gICAgICAgICAgICB7c2VjY2lvbkFjdGl2YUlkICYmIHNlY2Npb25lc09yZGVuYWRhcy5tYXAoKHNlY2Npb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKHNlY2Npb24uaWQgIT09IHNlY2Npb25BY3RpdmFJZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSBjYWxjdWxhck9mZnNldFkoc2VjY2lvbmVzT3JkZW5hZGFzLCBpbmRleCwgYWx0b0NhbnZhcyk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXNQcmltZXJhID0gaW5kZXggPT09IDA7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXNVbHRpbWEgPSBpbmRleCA9PT0gc2VjY2lvbmVzT3JkZW5hZGFzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXN0YUFuaW1hbmRvID0gc2VjY2lvbmVzQW5pbWFuZG8uaW5jbHVkZXMoc2VjY2lvbi5pZCk7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkJ1dHRvbkJhc2UgPVxyXG4gICAgICAgICAgICAgICAgXCJweC0zIHB5LTIgcm91bmRlZC14bCB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIGJvcmRlciBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXMtdmlzaWJsZTpyaW5nLTIgZm9jdXMtdmlzaWJsZTpyaW5nLVsjZGNjYWY3XVwiO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25CdXR0b25EaXNhYmxlZCA9XHJcbiAgICAgICAgICAgICAgICBcImN1cnNvci1ub3QtYWxsb3dlZCBib3JkZXItZ3JheS0yMDAgYmctZ3JheS0xMDAgdGV4dC1ncmF5LTQwMCBzaGFkb3ctbm9uZVwiO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25CdXR0b25QcmltYXJ5ID1cclxuICAgICAgICAgICAgICAgIFwiYm9yZGVyLVsjY2NiNmVmXSBiZy1ncmFkaWVudC10by1yIGZyb20tWyM4YTU3Y2ZdIHZpYS1bIzc3M2RiZV0gdG8tWyM2NzM3YjNdIHRleHQtd2hpdGUgc2hhZG93LVswXzEwcHhfMjJweF9yZ2JhKDExOSw2MSwxOTAsMC4zMCldIGhvdmVyOi10cmFuc2xhdGUteS1bMXB4XSBob3Zlcjpmcm9tLVsjN2Y0ZmM1XSBob3Zlcjp2aWEtWyM2ZjNiYmNdIGhvdmVyOnRvLVsjNWYzMWE4XSBob3ZlcjpzaGFkb3ctWzBfMTRweF8yOHB4X3JnYmEoMTE5LDYxLDE5MCwwLjM4KV1cIjtcclxuICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uQnV0dG9uTmV1dHJhbCA9XHJcbiAgICAgICAgICAgICAgICBcImJvcmRlci1bI2U0ZDdmNl0gYmctd2hpdGUvOTUgdGV4dC1bIzVmMzU5Nl0gc2hhZG93LVswXzZweF8xNnB4X3JnYmEoMTUsMjMsNDIsMC4wNildIGhvdmVyOi10cmFuc2xhdGUteS1bMXB4XSBob3Zlcjpib3JkZXItWyNjZGI5ZWVdIGhvdmVyOmJnLVsjZmFmNmZmXSBob3ZlcjpzaGFkb3ctWzBfMTJweF8yNHB4X3JnYmEoMTE5LDYxLDE5MCwwLjE2KV1cIjtcclxuICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uQnV0dG9uU3VjY2VzcyA9XHJcbiAgICAgICAgICAgICAgICBcImJvcmRlci1lbWVyYWxkLTMwMCBiZy1ncmFkaWVudC10by1yIGZyb20tZW1lcmFsZC01MDAgdG8tZW1lcmFsZC02MDAgdGV4dC13aGl0ZSBzaGFkb3ctWzBfMTBweF8yMnB4X3JnYmEoNSwxNTAsMTA1LDAuMjgpXSBob3ZlcjotdHJhbnNsYXRlLXktWzFweF0gaG92ZXI6ZnJvbS1lbWVyYWxkLTYwMCBob3Zlcjp0by1lbWVyYWxkLTcwMCBob3ZlcjpzaGFkb3ctWzBfMTRweF8yOHB4X3JnYmEoNSwxNTAsMTA1LDAuMzYpXVwiO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25CdXR0b25EYW5nZXIgPVxyXG4gICAgICAgICAgICAgICAgXCJib3JkZXItcm9zZS0zMDAgYmctZ3JhZGllbnQtdG8tciBmcm9tLXJvc2UtNTAwIHRvLXJlZC02MDAgdGV4dC13aGl0ZSBzaGFkb3ctWzBfMTBweF8yMnB4X3JnYmEoMjI1LDI5LDcyLDAuMjgpXSBob3ZlcjotdHJhbnNsYXRlLXktWzFweF0gaG92ZXI6ZnJvbS1yb3NlLTYwMCBob3Zlcjp0by1yZWQtNzAwIGhvdmVyOnNoYWRvdy1bMF8xNHB4XzI4cHhfcmdiYSgyMjUsMjksNzIsMC4zNildXCI7XHJcblxyXG4gICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkJ1dHRvbnMgPSAoXHJcbiAgICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgICB7LyogQm90w7NuIFN1YmlyICovfVxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgIG1vdmVyU2VjY2lvbkV4dGVybmFsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY2Npb246IFwic3ViaXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbHVnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlY2Npb25lc0FuaW1hbmRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2VzUHJpbWVyYSB8fCBlc3RhQW5pbWFuZG99XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzZWN0aW9uQnV0dG9uQmFzZX0gJHtlc1ByaW1lcmEgfHwgZXN0YUFuaW1hbmRvXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IHNlY3Rpb25CdXR0b25EaXNhYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgOiBzZWN0aW9uQnV0dG9uUHJpbWFyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSAke2VzdGFBbmltYW5kbyA/IFwiYW5pbWF0ZS1wdWxzZVwiIDogXCJcIn1gfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtlc1ByaW1lcmEgPyBcIllhIGVzIGxhIHByaW1lcmEgc2VjY2nDs25cIiA6IFwiU3ViaXIgc2VjY2nDs25cIn1cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPE1vdmVVcCBjbGFzc05hbWU9XCJ3LTMuNSBoLTMuNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFN1YmlyIHNlY2Npw7NuXHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICB7LyogQm90w7NuIEJhamFyICovfVxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgIG1vdmVyU2VjY2lvbkV4dGVybmFsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY2Npb246IFwiYmFqYXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbHVnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlY2Npb25lc0FuaW1hbmRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2VzVWx0aW1hIHx8IGVzdGFBbmltYW5kb31cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3NlY3Rpb25CdXR0b25CYXNlfSAke2VzVWx0aW1hIHx8IGVzdGFBbmltYW5kb1xyXG4gICAgICAgICAgICAgICAgICAgICAgPyBzZWN0aW9uQnV0dG9uRGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgIDogc2VjdGlvbkJ1dHRvblByaW1hcnlcclxuICAgICAgICAgICAgICAgICAgICAgIH0gJHtlc3RhQW5pbWFuZG8gPyBcImFuaW1hdGUtcHVsc2VcIiA6IFwiXCJ9YH1cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17ZXNVbHRpbWEgPyBcIllhIGVzIGxhIMO6bHRpbWEgc2VjY2nDs25cIiA6IFwiQmFqYXIgc2VjY2nDs25cIn1cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8TW92ZURvd24gY2xhc3NOYW1lPVwidy0zLjUgaC0zLjVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgQmFqYXIgc2VjY2nDs25cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIEJvdMOzbiBBw7FhZGlyIHNlY2Npw7NuICovfVxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ3JlYXJTZWNjaW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtlc3RhQW5pbWFuZG99XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzZWN0aW9uQnV0dG9uQmFzZX0gJHtlc3RhQW5pbWFuZG9cclxuICAgICAgICAgICAgICAgICAgICAgID8gYCR7c2VjdGlvbkJ1dHRvbkRpc2FibGVkfSBhbmltYXRlLXB1bHNlYFxyXG4gICAgICAgICAgICAgICAgICAgICAgOiBzZWN0aW9uQnV0dG9uUHJpbWFyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJBw7FhZGlyIHVuYSBudWV2YSBzZWNjacOzbiBkZWJham9cIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxQbHVzQ2lyY2xlIGNsYXNzTmFtZT1cInctMy41IGgtMy41XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIEHDsWFkaXIgc2VjY2nDs25cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7c2VjdGlvbkJ1dHRvbkJhc2V9ICR7c2VjdGlvbkJ1dHRvbk5ldXRyYWx9IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBnYXAtMmB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJDYW1iaWFyIGNvbG9yIGRlIGZvbmRvIGRlIGVzdGEgc2VjY2nDs25cIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMy41IHctMy41IHJvdW5kZWQgYm9yZGVyIGJvcmRlci13aGl0ZS84MCBzaGFkb3ctc21cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IHNlY2Npb24uZm9uZG8gfHwgXCIjZmZmZmZmXCIgfX1cclxuICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICBGb25kbyBzZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8U2VsZWN0b3JDb2xvclNlY2Npb25cclxuICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb249e3NlY2Npb259XHJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZXN0YUFuaW1hbmRvIHx8IGlzRGVsZXRpbmdTZWN0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhpZCwgY29sb3IpID0+IGNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbihpZCwgY29sb3IpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgeygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb1NlY2Npb24gPSBub3JtYWxpemFyQWx0b01vZG8oc2VjY2lvbi5hbHRvTW9kbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNQYW50YWxsYSA9IG1vZG9TZWNjaW9uID09PSBcInBhbnRhbGxhXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogVG9nZ2xlIFBhbnRhbGxhIGNvbXBsZXRhICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdG9nZ2xlUGFudGFsbGFDb21wbGV0YVNlY2Npb24oc2VjY2lvbi5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzZWN0aW9uQnV0dG9uQmFzZX0gJHtlc1BhbnRhbGxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlY3Rpb25CdXR0b25QcmltYXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlY3Rpb25CdXR0b25OZXV0cmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkhhY2UgcXVlIGVzdGEgc2VjY2nDs24gc2VhIGRlIHBhbnRhbGxhIGNvbXBsZXRhICgxMDB2aCkgYWwgcHVibGljYXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNb25pdG9yIGNsYXNzTmFtZT1cInctMy41IGgtMy41XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlc1BhbnRhbGxhID8gXCJQYW50YWxsYSBjb21wbGV0YTogT05cIiA6IFwiUGFudGFsbGEgY29tcGxldGE6IE9GRlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogQm90w7NuIERlc2FuY2xhciBmb25kbyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAge3NlY2Npb24uZm9uZG9UaXBvID09PSBcImltYWdlblwiICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNhbmNsYXJGb25kbyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpldG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlY2Npb25lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRPYmpldG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3NlY3Rpb25CdXR0b25CYXNlfSAke3NlY3Rpb25CdXR0b25OZXV0cmFsfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkRlc2FuY2xhciBpbWFnZW4gZGUgZm9uZG9cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxVbmxpbmsyIGNsYXNzTmFtZT1cInctMy41IGgtMy41XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVzYW5jbGFyIGZvbmRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VjY2lvbi5mb25kb1RpcG8gPT09IFwiaW1hZ2VuXCIgJiYgaXNNb2JpbGUgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9iaWxlQmFja2dyb3VuZEVkaXRTZWN0aW9uSWQoKHByZXYpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9PT0gc2VjY2lvbi5pZCA/IG51bGwgOiBzZWNjaW9uLmlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzZWN0aW9uQnV0dG9uQmFzZX0gJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlQmFja2dyb3VuZEVkaXRTZWN0aW9uSWQgPT09IHNlY2Npb24uaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYm9yZGVyLWluZGlnby0zMDAgYmctZ3JhZGllbnQtdG8tciBmcm9tLWluZGlnby01MDAgdG8taW5kaWdvLTYwMCB0ZXh0LXdoaXRlIHNoYWRvdy1bMF8xMHB4XzIycHhfcmdiYSg3OSw3MCwyMjksMC4yOCldIGhvdmVyOi10cmFuc2xhdGUteS1bMXB4XSBob3Zlcjpmcm9tLWluZGlnby02MDAgaG92ZXI6dG8taW5kaWdvLTcwMCBob3ZlcjpzaGFkb3ctWzBfMTRweF8yOHB4X3JnYmEoNzksNzAsMjI5LDAuMzYpXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWN0aW9uQnV0dG9uTmV1dHJhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vZG8gbW92ZXIgZm9uZG8gZW4gbW9iaWxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bW9iaWxlQmFja2dyb3VuZEVkaXRTZWN0aW9uSWQgPT09IHNlY2Npb24uaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcIk1vdmVyIGZvbmRvOiBPTlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJNb3ZlciBmb25kb1wifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfSkoKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBCb3TDs24gR3VhcmRhciBjb21vIHBsYW50aWxsYSAqL31cclxuICAgICAgICAgICAgICAgICAgeyFsb2FkaW5nQ2xhaW1zICYmIGVzQWRtaW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkYXJTZWNjaW9uQ29tb1BsYW50aWxsYSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpldG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZXN0YUFuaW1hbmRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtzZWN0aW9uQnV0dG9uQmFzZX0gJHtlc3RhQW5pbWFuZG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWN0aW9uQnV0dG9uRGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWN0aW9uQnV0dG9uU3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICR7ZXN0YUFuaW1hbmRvID8gXCJhbmltYXRlLXB1bHNlXCIgOiBcIlwifWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkd1YXJkYXIgZXN0YSBzZWNjacOzbiBjb21vIHBsYW50aWxsYVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0xLjVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPExheWVycyBjbGFzc05hbWU9XCJ3LTMuNSBoLTMuNVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBsYW50aWxsYVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIEJvdMOzbiBCb3JyYXIgc2VjY2nDs24gKi99XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9iaWxlU2VjdGlvbkFjdGlvbnNPcGVuKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIGFicmlyTW9kYWxCb3JyYXJTZWNjaW9uKHNlY2Npb24uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2VzdGFBbmltYW5kbyB8fCBpc0RlbGV0aW5nU2VjdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3NlY3Rpb25CdXR0b25CYXNlfSAke2VzdGFBbmltYW5kbyB8fCBpc0RlbGV0aW5nU2VjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgPyBzZWN0aW9uQnV0dG9uRGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAgIDogc2VjdGlvbkJ1dHRvbkRhbmdlclxyXG4gICAgICAgICAgICAgICAgICAgICAgfSAke2VzdGFBbmltYW5kbyB8fCBpc0RlbGV0aW5nU2VjdGlvbiA/IFwiYW5pbWF0ZS1wdWxzZVwiIDogXCJcIn1gfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiQm9ycmFyIGVzdGEgc2VjY2nDs24geSB0b2RvcyBzdXMgZWxlbWVudG9zXCJcclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMS41XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT1cInctMy41IGgtMy41XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgIEJvcnJhciBzZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVBvcnRhbChcclxuICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIHotWzkwXSBmbGV4IGZsZXgtY29sIGl0ZW1zLWVuZCBnYXAtMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgIHRvcDogbW9iaWxlU2VjdGlvbkFjdGlvbnNUb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICByaWdodDogXCJtYXgoOHB4LCBlbnYoc2FmZS1hcmVhLWluc2V0LXJpZ2h0LCAwcHgpKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldE1vYmlsZVNlY3Rpb25BY3Rpb25zT3BlbigocHJldikgPT4gIXByZXYpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBoLTkgdy05IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLWZ1bGwgYm9yZGVyIGJvcmRlci1bI2NjYjZlZl0gYmctZ3JhZGllbnQtdG8tciBmcm9tLVsjOGE1N2NmXSB2aWEtWyM3NzNkYmVdIHRvLVsjNjczN2IzXSB0ZXh0LXdoaXRlIHNoYWRvdy1bMF8xMHB4XzIycHhfcmdiYSgxMTksNjEsMTkwLDAuMzUpXSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgaG92ZXI6LXRyYW5zbGF0ZS15LVsxcHhdIGhvdmVyOmZyb20tWyM3ZjRmYzVdIGhvdmVyOnZpYS1bIzZmM2JiY10gaG92ZXI6dG8tWyM1ZjMxYThdIGhvdmVyOnNoYWRvdy1bMF8xNHB4XzI4cHhfcmdiYSgxMTksNjEsMTkwLDAuNDIpXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkFjY2lvbmVzIGRlIHNlY2Npw7NuXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7bW9iaWxlU2VjdGlvbkFjdGlvbnNPcGVuID8gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2hldnJvblVwIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPENoZXZyb25Eb3duIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAge21vYmlsZVNlY3Rpb25BY3Rpb25zT3BlbiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctW21pbig4NHZ3LDIzMHB4KV0gbWF4LWgtWzYydmhdIG92ZXJmbG93LXktYXV0byByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItcHVycGxlLTIwMCBiZy13aGl0ZS85NSBwLTIgc2hhZG93LTJ4bCBiYWNrZHJvcC1ibHVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtMlwiPnthY3Rpb25CdXR0b25zfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+LFxyXG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LFxyXG4gICAgICAgICAgICAgICAgICBgb3JkZW4tbW9iaWxlLSR7c2VjY2lvbi5pZH1gXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAga2V5PXtgb3JkZW4tJHtzZWNjaW9uLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGZsZXggZmxleC1jb2wgZ2FwLTJcIlxyXG4gICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0WSArIDIwLFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtMTUwLFxyXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogMjUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IDI2MCxcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAge2FjdGlvbkJ1dHRvbnN9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KX1cclxuXHJcblxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogODAwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBhbHRvQ2FudmFzRGluYW1pY28sXHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG5cclxuICAgICAgICAgICAgICA8U3RhZ2VcclxuICAgICAgICAgICAgICAgIHJlZj17c3RhZ2VSZWZ9XHJcbiAgICAgICAgICAgICAgICB3aWR0aD17ODAwfVxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0PXthbHRvQ2FudmFzRGluYW1pY299XHJcbiAgICAgICAgICAgICAgICBwZXJmZWN0RHJhd0VuYWJsZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0PXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIGhpdEdyYXBoRW5hYmxlZD17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwid2hpdGVcIixcclxuICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IFwidmlzaWJsZVwiLFxyXG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICBib3hTaGFkb3c6IFwiMCA0cHggMjBweCByZ2JhKDAsMCwwLDAuNSlcIixcclxuICAgICAgICAgICAgICAgIH19XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXtzdGFnZUdlc3R1cmVzLm9uTW91c2VEb3dufVxyXG5cclxuICAgICAgICAgICAgICAgIG9uVG91Y2hTdGFydD17c3RhZ2VHZXN0dXJlcy5vblRvdWNoU3RhcnR9XHJcblxyXG4gICAgICAgICAgICAgICAgb25Ub3VjaE1vdmU9e3N0YWdlR2VzdHVyZXMub25Ub3VjaE1vdmV9XHJcblxyXG4gICAgICAgICAgICAgICAgb25Ub3VjaEVuZD17c3RhZ2VHZXN0dXJlcy5vblRvdWNoRW5kfVxyXG5cclxuICAgICAgICAgICAgICAgIG9uTW91c2VNb3ZlPXtzdGFnZUdlc3R1cmVzLm9uTW91c2VNb3ZlfVxyXG5cclxuICAgICAgICAgICAgICAgIG9uTW91c2VVcD17c3RhZ2VHZXN0dXJlcy5vbk1vdXNlVXB9XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPENhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcblxyXG4gICAgICAgICAgICAgICAgICB7c2VjY2lvbmVzT3JkZW5hZGFzLmZsYXRNYXAoKHNlY2Npb24sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWx0dXJhUHggPSBzZWNjaW9uLmFsdHVyYTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgaW5kZXgsIGFsdG9DYW52YXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzQWN0aXZhID0gc2VjY2lvbi5pZCA9PT0gc2VjY2lvbkFjdGl2YUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzdGFBbmltYW5kbyA9IHNlY2Npb25lc0FuaW1hbmRvLmluY2x1ZGVzKHNlY2Npb24uaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50b3MgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBGb25kbyBkZSBzZWNjacOzbiAtIHB1ZWRlIHNlciBjb2xvciBvIGltYWdlblxyXG4gICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbi5mb25kb1RpcG8gPT09IFwiaW1hZ2VuXCIgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb25kb1NlY2Npb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Bmb25kby0ke3NlY2Npb24uaWR9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNjaW9uPXtzZWNjaW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFk9e29mZnNldFl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0dXJhUHg9e2FsdHVyYVB4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoKSA9PiBvblNlbGVjdFNlY2Npb24oc2VjY2lvbi5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVGb25kb09mZnNldD17YWN0dWFsaXphck9mZnNldEZvbmRvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzTW9iaWxlPXtpc01vYmlsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2JpbGVCYWNrZ3JvdW5kRWRpdEVuYWJsZWQ9e21vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkID09PSBzZWNjaW9uLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQmFja2dyb3VuZEltYWdlU3RhdHVzQ2hhbmdlPXtoYW5kbGVCYWNrZ3JvdW5kSW1hZ2VTdGF0dXNDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YHNlY2Npb24tJHtzZWNjaW9uLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e3NlY2Npb24uaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeD17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB5PXtvZmZzZXRZfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs4MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXthbHR1cmFQeH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPXtzZWNjaW9uLmZvbmRvIHx8IFwiI2ZmZmZmZlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cInRyYW5zcGFyZW50XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uU2VsZWN0U2VjY2lvbihzZWNjaW9uLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvblRhcD17KCkgPT4gb25TZWxlY3RTZWNjaW9uKHNlY2Npb24uaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIF07XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudG9zO1xyXG4gICAgICAgICAgICAgICAgICB9KX1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICB7LyogQ29udHJvbCBkZSBhbHR1cmEgcGFyYSBzZWNjacOzbiBhY3RpdmEgKi99XHJcbiAgICAgICAgICAgICAgICAgIHtzZWNjaW9uQWN0aXZhSWQgJiYgc2VjY2lvbmVzT3JkZW5hZGFzLm1hcCgoc2VjY2lvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjY2lvbi5pZCAhPT0gc2VjY2lvbkFjdGl2YUlkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXNPcmRlbmFkYXMsIGluZGV4LCBhbHRvQ2FudmFzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sWSA9IG9mZnNldFkgKyBzZWNjaW9uLmFsdHVyYSAtIDU7IC8vIDVweCBhbnRlcyBkZWwgZmluYWxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb1NlY2Npb24gPSBub3JtYWxpemFyQWx0b01vZG8oc2VjY2lvbi5hbHRvTW9kbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVybWl0ZVJlc2l6ZUFsdHVyYSA9IChtb2RvU2VjY2lvbiAhPT0gXCJwYW50YWxsYVwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAgbmFtZT1cInVpXCIga2V5PXtgY29udHJvbC1hbHR1cmEtJHtzZWNjaW9uLmlkfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogTMOtbmVhIGluZGljYWRvcmEgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInVpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludHM9e1s1MCwgY29udHJvbFksIDc1MCwgY29udHJvbFldfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM3NzNkYmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhc2g9e1s1LCA1XX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIENvbnRyb2wgY2VudHJhbCBtZWpvcmFkbyAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeD17NDAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHk9e2NvbnRyb2xZfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17cGVybWl0ZVJlc2l6ZUFsdHVyYX0gICAgICAgICAgICAgICAgIC8vID8gY2xhdmU6IHNpIGVzIGZhbHNlLCBubyBjYXB0dXJhIGV2ZW50b3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5PXtwZXJtaXRlUmVzaXplQWx0dXJhID8gMSA6IDAuMjV9ICAgICAgICAvLyA/IHZpc3VhbCBkZXNoYWJpbGl0YWRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qb2ludGVyRG93bj17cGVybWl0ZVJlc2l6ZUFsdHVyYSA/IChlKSA9PiBpbmljaWFyQ29udHJvbEFsdHVyYShlLCBzZWNjaW9uLmlkKSA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXRlUmVzaXplQWx0dXJhICYmICFzdXBwb3J0c1BvaW50ZXJFdmVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZSkgPT4gaW5pY2lhckNvbnRyb2xBbHR1cmEoZSwgc2VjY2lvbi5pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ub3VjaFN0YXJ0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pdGVSZXNpemVBbHR1cmEgJiYgIXN1cHBvcnRzUG9pbnRlckV2ZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlKSA9PiBpbmljaWFyQ29udHJvbEFsdHVyYShlLCBzZWNjaW9uLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29udHJvbGFuZG9BbHR1cmEgJiYgcGVybWl0ZVJlc2l6ZUFsdHVyYSkgc2V0R2xvYmFsQ3Vyc29yKFwibnMtcmVzaXplXCIsIHN0YWdlUmVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250cm9sYW5kb0FsdHVyYSAmJiBwZXJtaXRlUmVzaXplQWx0dXJhKSBjbGVhckdsb2JhbEN1cnNvcihzdGFnZVJlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Lyogw4FyZWEgZGUgZGV0ZWNjacOzbiAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeD17LTQ1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeT17LTIyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezkwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs0NH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEZvbmRvIGRlbCBjb250cm9sIGNvbiBlc3RhZG8gYWN0aXZvICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxSZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PXstMjV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PXstNn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs1MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MTJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPXtjb250cm9sYW5kb0FsdHVyYSA9PT0gc2VjY2lvbi5pZCA/IFwiIzc3M2RiZVwiIDogXCJyZ2JhKDExOSwgNjEsIDE5MCwgMC45KVwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUmFkaXVzPXs2fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Q29sb3I9XCJyZ2JhKDAsMCwwLDAuMylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Qmx1cj17Y29udHJvbGFuZG9BbHR1cmEgPT09IHNlY2Npb24uaWQgPyA4IDogNn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldD17eyB4OiAwLCB5OiBjb250cm9sYW5kb0FsdHVyYSA9PT0gc2VjY2lvbi5pZCA/IDQgOiAzIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBBbmltYWNpw7NuIGRlIHB1bHNvIGR1cmFudGUgZWwgY29udHJvbCAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29udHJvbGFuZG9BbHR1cmEgPT09IHNlY2Npb24uaWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeD17LTMwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PXstOH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezYwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezE2fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwidHJhbnNwYXJlbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCIjNzczZGJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lclJhZGl1cz17OH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eT17MC42fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogSW5kaWNhZG9yIHZpc3VhbCAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeD17LTZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PXstM31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9XCI/P1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZT17MTB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwid2hpdGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseT1cIkFyaWFsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFB1bnRvcyBkZSBhZ2FycmUgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPENpcmNsZSB4PXstMTV9IHk9ezB9IHJhZGl1cz17MS41fSBmaWxsPVwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIgbGlzdGVuaW5nPXtmYWxzZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2lyY2xlIHg9ey0xMH0geT17MH0gcmFkaXVzPXsxLjV9IGZpbGw9XCJyZ2JhKDI1NSwyNTUsMjU1LDAuOClcIiBsaXN0ZW5pbmc9e2ZhbHNlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxDaXJjbGUgeD17MTB9IHk9ezB9IHJhZGl1cz17MS41fSBmaWxsPVwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCIgbGlzdGVuaW5nPXtmYWxzZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2lyY2xlIHg9ezE1fSB5PXswfSByYWRpdXM9ezEuNX0gZmlsbD1cInJnYmEoMjU1LDI1NSwyNTUsMC44KVwiIGxpc3RlbmluZz17ZmFsc2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIEZvbmRvIGRlbCBpbmRpY2Fkb3IgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeD17NzU1fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHk9e2NvbnRyb2xZIC0gMTB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezQwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17MjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD1cInJnYmEoMTE5LCA2MSwgMTkwLCAwLjEpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCJyZ2JhKDExOSwgNjEsIDE5MCwgMC4zKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29ybmVyUmFkaXVzPXs0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogVGV4dG8gZGVsIGluZGljYWRvciAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB4PXs3NjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeT17Y29udHJvbFkgLSA2fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9e2Ake01hdGgucm91bmQoc2VjY2lvbi5hbHR1cmEpfXB4YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZT17MTF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD1cIiM3NzNkYmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk9XCJBcmlhbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodD1cImJvbGRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L0dyb3VwPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH0pfVxyXG5cclxuICAgICAgICAgICAgICAgICAgey8qIE92ZXJsYXkgbWVqb3JhZG8gZHVyYW50ZSBjb250cm9sIGRlIGFsdHVyYSAqL31cclxuICAgICAgICAgICAgICAgICAge2NvbnRyb2xhbmRvQWx0dXJhICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8R3JvdXAgbmFtZT1cInVpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7LyogT3ZlcmxheSBzdXRpbCAqL31cclxuICAgICAgICAgICAgICAgICAgICAgIDxSZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs4MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17YWx0b0NhbnZhc0RpbmFtaWNvfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwicmdiYSgxMTksIDYxLCAxOTAsIDAuMDUpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgey8qIEluZGljYWRvciBkZSBsYSBzZWNjacOzbiBxdWUgc2UgZXN0w6EgbW9kaWZpY2FuZG8gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICB7c2VjY2lvbmVzT3JkZW5hZGFzLm1hcCgoc2VjY2lvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXNPcmRlbmFkYXMsIGluZGV4LCBhbHRvQ2FudmFzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZG9TZWNjaW9uID0gbm9ybWFsaXphckFsdG9Nb2RvKHNlY2Npb24uYWx0b01vZG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJtaXRlUmVzaXplQWx0dXJhID0gKG1vZG9TZWNjaW9uICE9PSBcInBhbnRhbGxhXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8R3JvdXAga2V5PXtzZWNjaW9uLmlkfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBSZWN0IOKAnGZvbmRv4oCdIGNsaWNrZWFibGUgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PXtvZmZzZXRZfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17ODAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9e3NlY2Npb24uYWx0dXJhfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPXtzZWNjaW9uLmZvbmRvIHx8IFwidHJhbnNwYXJlbnRcIn0gLy8gcG9kw6lzIHBvbmVyIGJsYW5jbyB1IG90cm8gY29sb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25TZWxlY3RTZWNjaW9uKHNlY2Npb24uaWQpfSAgIC8vID8/IGRpc3BhcmEgZWwgZXZlbnRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBSZWN0IGhpZ2hsaWdodCBzaSBlc3TDoXMgY29udHJvbGFuZG8gbGEgYWx0dXJhICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlY2Npb24uaWQgPT09IGNvbnRyb2xhbmRvQWx0dXJhICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9e29mZnNldFl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezgwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9e3NlY2Npb24uYWx0dXJhfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiIzc3M2RiZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzaD17WzgsIDRdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvR3JvdXA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPC9Hcm91cD5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAge29iamV0b3MubWFwKChvYmosIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyA/PyBEZXRlcm1pbmFyIHNpIGVzdMOhIGVuIG1vZG8gZWRpY2nDs25cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0luRWRpdE1vZGUgPSBlZGl0aW5nLmlkID09PSBvYmouaWQgJiYgZWxlbWVudG9zU2VsZWNjaW9uYWRvc1swXSA9PT0gb2JqLmlkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyA/Pz8gQ2FzbyBlc3BlY2lhbDogbGEgZ2FsZXLDrWEgbGEgcmVuZGVyaXphbW9zIGFjw6EgKG5vIHVzYSBFbGVtZW50b0NhbnZhcylcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnRpcG8gPT09IFwiZ2FsZXJpYVwiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPEdhbGVyaWFLb252YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17b2JqLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9iaj17b2JqfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyUmVmPXtyZWdpc3RlclJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkhvdmVyPXtzZXRIb3ZlcklkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ9e2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMob2JqLmlkKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxkYUdhbGVyaWFBY3RpdmE9e2NlbGRhR2FsZXJpYUFjdGl2YX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvblBpY2tDZWxsPXsoaW5mbykgPT4gc2V0Q2VsZGFHYWxlcmlhQWN0aXZhKGluZm8pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhcz17c2VjY2lvbmVzT3JkZW5hZGFzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdG9DYW52YXM9e2FsdG9DYW52YXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9eyhpZCwgZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZT8uZXZ0ICYmIChlLmV2dC5jYW5jZWxCdWJibGUgPSB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW2lkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbz17KHBvcywgaWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RyYXJHdWlhcyhwb3MsIGlkLCBvYmpldG9zLCBlbGVtZW50UmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG89eyhkcmFnSWQgPSBvYmouaWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhkcmFnSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW2RyYWdJZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SG92ZXJJZChudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmRQZXJzb25hbGl6YWRvPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbXBpYXJHdWlhcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhpZCwgbnVldm8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MoKHByZXYpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHByZXYuZmluZEluZGV4KChvKSA9PiBvLmlkID09PSBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAtMSkgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRbaV0gPSB7IC4uLnVwZGF0ZWRbaV0sIC4uLm51ZXZvIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJjb3VudGRvd25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPENvdW50ZG93bktvbnZhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtvYmouaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqPXtvYmp9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWY9e3JlZ2lzdGVyUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uSG92ZXI9e3NldEhvdmVySWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17ZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvYmouaWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhcz17c2VjY2lvbmVzT3JkZW5hZGFzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdG9DYW52YXM9e2FsdG9DYW52YXN9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gc2VsZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXsoaWQsIGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU/LmV2dCAmJiAoZS5ldnQuY2FuY2VsQnViYmxlID0gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtpZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gUFJFVklFVyBsaXZpYW5vIChubyB0b2NhciBlc3RhZG8gZGVsIG9iamV0byBwYXJhIHF1ZSBubyBoYXlhIGxhZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG89eyhkcmFnSWQgPSBvYmouaWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhkcmFnSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW2RyYWdJZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SG92ZXJJZChudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbz17KHBvcywgaWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0cmFyR3VpYXMocG9zLCBpZCwgb2JqZXRvcywgZWxlbWVudFJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gRklOIGRlIGRyYWc6IGxpbXBpYXIgZ3XDrWFzIC8gVUkgYXV4aWxpYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmRQZXJzb25hbGl6YWRvPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0RyYWdnaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbXBpYXJHdWlhcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gcmVmcyBwYXJhIGVsIG1vdG9yIGRlIGRyYWdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnU3RhcnRQb3M9e2RyYWdTdGFydFBvc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNEcmFnZ2VkPXtoYXNEcmFnZ2VkfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/IMKhQ2xhdmUhIEFsIGZpbmFsaXphciwgdHJhdGFtb3MgeC95IGFic29sdXRhcyBjb21vIGVuIEVsZW1lbnRvQ2FudmFzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoaWQsIGNhbWJpb3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE9iamV0b3MocHJldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBwcmV2LmZpbmRJbmRleChvID0+IG8uaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IC0xKSByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iak9yaWdpbmFsID0gcHJldltpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IFNpIG5vIGVzIGZpbmFsIGRlIGRyYWcsIG1lcmdlYW1vcyBzaW4gbcOhcyAobm8gdG9jYXIgY29vcmRzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhbWJpb3MuZmluYWxpem9EcmFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IFsuLi5wcmV2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkW2ldID0geyAuLi51cGRhdGVkW2ldLCAuLi5jYW1iaW9zIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IEZpbmFsIGRlIGRyYWc6ICdjYW1iaW9zLnknIHZpZW5lIEFCU09MVVRBIChTdGFnZSBjb29yZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbnVldmFTZWNjaW9uLCBjb29yZGVuYWRhc0FqdXN0YWRhcyB9ID0gZGV0ZXJtaW5hck51ZXZhU2VjY2lvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW1iaW9zLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqT3JpZ2luYWwuc2VjY2lvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSB7IC4uLmNhbWJpb3MgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5leHQuZmluYWxpem9EcmFnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51ZXZhU2VjY2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSB7IC4uLm5leHQsIC4uLmNvb3JkZW5hZGFzQWp1c3RhZGFzLCBzZWNjaW9uSWQ6IG51ZXZhU2VjY2lvbiB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnZlcnRpciB5IGFic29sdXRhID8geSByZWxhdGl2YSBhIGxhIHNlY2Npw7NuIGFjdHVhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQueSA9IGNvbnZlcnRpckFic0FSZWwoY2FtYmlvcy55LCBvYmpPcmlnaW5hbC5zZWNjaW9uSWQsIHNlY2Npb25lc09yZGVuYWRhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRbaV0gPSB7IC4uLnVwZGF0ZWRbaV0sIC4uLm5leHQgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmpQcmV2aWV3ID1cclxuICAgICAgICAgICAgICAgICAgICAgIGVkaXRpbmcuaWQgPT09IG9iai5pZCAmJiBvYmoudGlwbyA9PT0gXCJ0ZXh0b1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b1ByZXZpZXcgPSBTdHJpbmcoZWRpdGluZy52YWx1ZSA/PyBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aWV3T2JqID0geyAuLi5vYmosIHRleHRvOiB0ZXh0b1ByZXZpZXcgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRLZWVwQ2VudGVyUHJldmlldyA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhb2JqLl9fZ3JvdXBBbGlnbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIU51bWJlci5pc0Zpbml0ZShvYmoud2lkdGgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouX19hdXRvV2lkdGggIT09IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkS2VlcENlbnRlclByZXZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpZXdYID0gY2FsY3VsYXJYVGV4dG9DZW50cmFkbyhvYmosIHRleHRvUHJldmlldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHByZXZpZXdYKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3T2JqLnggPSBwcmV2aWV3WDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aWV3T2JqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogb2JqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPEVsZW1lbnRvQ2FudmFzXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29iai5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5vYmpQcmV2aWV3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IHlMb2NhbDogZW4gc2VjY2nDs24gcGFudGFsbGEgdXNhbW9zIHlOb3JtICogNTAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmFsbGJhY2sgbGVnYWN5OiBzaSBubyBoYXkgeU5vcm0sIHVzYW1vcyBvYmoueVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHk6ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHhTZWMgPSBzZWNjaW9uZXNPcmRlbmFkYXMuZmluZEluZGV4KHMgPT4gcy5pZCA9PT0gb2JqUHJldmlldy5zZWNjaW9uSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXNPcmRlbmFkYXMsIGlkeFNlYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeUxvY2FsID0gZXNTZWNjaW9uUGFudGFsbGFCeUlkKG9ialByZXZpZXcuc2VjY2lvbklkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChOdW1iZXIuaXNGaW5pdGUob2JqUHJldmlldy55Tm9ybSkgPyAob2JqUHJldmlldy55Tm9ybSAqIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IpIDogb2JqUHJldmlldy55KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG9ialByZXZpZXcueTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geUxvY2FsICsgb2Zmc2V0WTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmNob0NhbnZhcz17ODAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXshaXNJbkVkaXRNb2RlICYmIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMob2JqLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbkNvdW50PXtlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHByZVNlbGVjY2lvbmFkbz17IWlzSW5FZGl0TW9kZSAmJiBlbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG9iai5pZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0luRWRpdE1vZGU9e2lzSW5FZGl0TW9kZX0gLy8gPz8gTlVFVkEgUFJPUFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkhvdmVyPXtpc0luRWRpdE1vZGUgPyBudWxsIDogc2V0SG92ZXJJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJSZWY9e3JlZ2lzdGVyUmVmfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0VGV4dEVkaXQ9e2lzSW5FZGl0TW9kZSA/IG51bGwgOiAoaWQsIHRleHRvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVNZXRyaWNzID0gb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZShub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQgPSB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbmxpbmVPdmVybGF5TW91bnRlZElkKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImVudGVyOiBwcmUtc3RhcnRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0lkOiBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0b0xlbmd0aDogU3RyaW5nKHRleHRvID8/IFwiXCIpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPSBpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVFZGl0UHJldmlld1JlZi5jdXJyZW50ID0geyBpZDogbnVsbCwgY2VudGVyWDogbnVsbCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwic3RhcnQtaW5saW5lLWVkaXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0b0xlbmd0aDogU3RyaW5nKHRleHRvID8/IFwiXCIpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFg6IG9iaj8ueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0WTogb2JqPy55ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0N1cnJlbnRFZGl0aW5nSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0Q3VycmVudEVkaXRpbmdJZDogd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZU1ldHJpY3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RWRpdChpZCwgdGV4dG8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU/LmRyYWdnYWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZT8uZ2V0TGF5ZXI/LigpPy5iYXRjaERyYXc/LigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImVudGVyOiBhZnRlci1zdGFydC1zeW5jXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJZDogcHJldmlvdXNDdXJyZW50RWRpdGluZ0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEN1cnJlbnRFZGl0aW5nSWQ6IHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0aW5nSWQ9e2VkaXRpbmcuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZU92ZXJsYXlNb3VudGVkSWQ9e2lubGluZU92ZXJsYXlNb3VudGVkSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZVZpc2liaWxpdHlNb2RlPXtpbmxpbmVEZWJ1Z0FCLnZpc2liaWxpdHlTb3VyY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaElubGluZUVkaXQ9e2ZpbmlzaEVkaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0PXtpc0luRWRpdE1vZGUgPyBudWxsIDogKGlkLCBvYmosIGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnRpcG8gPT09IFwicnN2cC1ib3RvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdGluZy5pZCAmJiBlZGl0aW5nLmlkICE9PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoRWRpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZT8uZXZ0ICYmIChlLmV2dC5jYW5jZWxCdWJibGUgPSB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNTaGlmdCA9IGU/LmV2dD8uc2hpZnRLZXk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoKHByZXYpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXNTaGlmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldi5pbmNsdWRlcyhpZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJldi5maWx0ZXIoKHgpID0+IHggIT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLnByZXYsIGlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhpZCwgbnVldm8pID0+IHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IE5VRVZPOiBNYW5lamFyIHByZXZpZXcgaW5tZWRpYXRvIGRlIGRyYWcgZ3J1cGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51ZXZvLmlzRHJhZ1ByZXZpZXcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRPYmpldG9zKHByZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHByZXYuZmluZEluZGV4KG8gPT4gby5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgaXNEcmFnUHJldmlldywgc2tpcEhpc3RvcmlhbCwgLi4uY2xlYW5OdWV2byB9ID0gbnVldm87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRbaW5kZXhdID0geyAuLi51cGRhdGVkW2luZGV4XSwgLi4uY2xlYW5OdWV2byB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gTUFORUpBUiBTT0xPIGJhdGNoIHVwZGF0ZSBmaW5hbCBkZSBkcmFnIGdydXBhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWV2by5pc0JhdGNoVXBkYXRlRmluYWwgJiYgaWQgPT09ICdCQVRDSF9VUERBVEVfR1JPVVBfRklOQUwnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBlbGVtZW50b3MsIGRyYWdJbmljaWFsLCBkZWx0YVgsIGRlbHRhWSB9ID0gbnVldm87XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXYubWFwKG9iamV0byA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRvcy5pbmNsdWRlcyhvYmpldG8uaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZHJhZ0luaWNpYWwgJiYgZHJhZ0luaWNpYWxbb2JqZXRvLmlkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NJbmljaWFsID0gZHJhZ0luaWNpYWxbb2JqZXRvLmlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5vYmpldG8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogcG9zSW5pY2lhbC54ICsgZGVsdGFYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHBvc0luaWNpYWwueSArIGRlbHRhWVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZXRvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gTk8gcHJvY2VzYXIgc2kgdmllbmUgZGVsIFRyYW5zZm9ybVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWV2by5mcm9tVHJhbnNmb3JtKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqT3JpZ2luYWwgPSBvYmpldG9zLmZpbmQoKG8pID0+IG8uaWQgPT09IGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9iak9yaWdpbmFsKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IFBhcmEgZHJhZyBmaW5hbCwgcHJvY2VzYXIgaW5tZWRpYXRhbWVudGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVldm8uZmluYWxpem9EcmFnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBudWV2YVNlY2Npb24sIGNvb3JkZW5hZGFzQWp1c3RhZGFzIH0gPSBkZXRlcm1pbmFyTnVldmFTZWNjaW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWV2by55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpPcmlnaW5hbC5zZWNjaW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29vcmRlbmFkYXNGaW5hbGVzID0geyAuLi5udWV2byB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvb3JkZW5hZGFzRmluYWxlcy5maW5hbGl6b0RyYWc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51ZXZhU2VjY2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGVuYWRhc0ZpbmFsZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29vcmRlbmFkYXNGaW5hbGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvb3JkZW5hZGFzQWp1c3RhZGFzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25JZDogbnVldmFTZWNjaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGVuYWRhc0ZpbmFsZXMueSA9IGNvbnZlcnRpckFic0FSZWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVldm8ueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpPcmlnaW5hbC5zZWNjaW9uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzT3JkZW5hZGFzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSkgRGV0ZXJtaW5hciBzZWNjacOzbiBmaW5hbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VjY2lvbkZpbmFsSWQgPSBjb29yZGVuYWRhc0ZpbmFsZXMuc2VjY2lvbklkIHx8IG9iak9yaWdpbmFsLnNlY2Npb25JZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyKSBPYnRlbmVyIHlSZWxQeCAoeSByZWxhdGl2YSBkZW50cm8gZGUgbGEgc2VjY2nDs24gZW4gcHgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeVJlbFB4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWV2YVNlY2Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29vcmRlbmFkYXNBanVzdGFkYXMgbm9ybWFsbWVudGUgeWEgdHJhZSB5IHJlbGF0aXZhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlSZWxQeCA9IE51bWJlci5pc0Zpbml0ZShjb29yZGVuYWRhc0ZpbmFsZXMueSkgPyBjb29yZGVuYWRhc0ZpbmFsZXMueSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaSBubyBjYW1iacOzIGRlIHNlY2Npw7NuLCBjb252ZXJ0aW1vcyBkZXNkZSB5IGFic29sdXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlSZWxQeCA9IE51bWJlci5pc0Zpbml0ZShjb29yZGVuYWRhc0ZpbmFsZXMueSkgPyBjb29yZGVuYWRhc0ZpbmFsZXMueSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMykgQXBsaWNhciBwb2zDrXRpY2EgcGFudGFsbGE6IGd1YXJkYXIgeU5vcm1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlc1NlY2Npb25QYW50YWxsYUJ5SWQoc2VjY2lvbkZpbmFsSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHlOb3JtID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgeVJlbFB4IC8gQUxUVVJBX1BBTlRBTExBX0VESVRPUikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGVuYWRhc0ZpbmFsZXMueU5vcm0gPSB5Tm9ybTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvb3JkZW5hZGFzRmluYWxlcy55OyAvLyA/IGNsYXZlOiBldml0YW1vcyBtZXpjbGFyIHNpc3RlbWFzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWpvOiBndWFyZGFyIHkgZW4gcHhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRlbmFkYXNGaW5hbGVzLnkgPSB5UmVsUHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb29yZGVuYWRhc0ZpbmFsZXMueU5vcm07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGlubWVkaWF0YW1lbnRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRPYmpldG9zKHByZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHByZXYuZmluZEluZGV4KG8gPT4gby5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRbaW5kZXhdID0geyAuLi51cGRhdGVkW2luZGV4XSwgLi4uY29vcmRlbmFkYXNGaW5hbGVzIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gUGFyYSBvdHJvcyBjYW1iaW9zICh0cmFuc2Zvcm0sIGV0Yy4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGF5RGlmZXJlbmNpYXMgPSBPYmplY3Qua2V5cyhudWV2bykuc29tZShrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsb3JBbnRlcmlvciA9IG9iak9yaWdpbmFsW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxvck51ZXZvID0gbnVldm9ba2V5XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbG9yQW50ZXJpb3IgPT09ICdudW1iZXInICYmIHR5cGVvZiB2YWxvck51ZXZvID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnModmFsb3JBbnRlcmlvciAtIHZhbG9yTnVldm8pID4gMC4wMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsb3JBbnRlcmlvciAhPT0gdmFsb3JOdWV2bztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXlEaWZlcmVuY2lhcykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNjaW9uSWQgPSBudWV2by5zZWNjaW9uSWQgfHwgb2JqT3JpZ2luYWwuc2VjY2lvbklkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY2Npb24gPSBzZWNjaW9uZXNPcmRlbmFkYXMuZmluZCgocykgPT4gcy5pZCA9PT0gc2VjY2lvbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlY2Npb24pIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcHJldi5maW5kSW5kZXgobyA9PiBvLmlkID09PSBpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gcHJldjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFtpbmRleF0gPSB7IC4uLnVwZGF0ZWRbaW5kZXhdLCAuLi5udWV2byB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0UGVyc29uYWxpemFkbz17aXNJbkVkaXRNb2RlID8gbnVsbCA6IChkcmFnSWQgPSBvYmouaWQsIGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY2Npb25BY3R1YWwgPSBBcnJheS5pc0FycmF5KHdpbmRvdy5fZWxlbWVudG9zU2VsZWNjaW9uYWRvcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gd2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3M7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VsZWNjaW9uQWN0dWFsLmluY2x1ZGVzKGRyYWdJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW2RyYWdJZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmx1c2hTeW5jKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEhvdmVySWQobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zKFtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzRHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG89e2lzSW5FZGl0TW9kZSA/IG51bGwgOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SXNEcmFnZ2luZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhckRyYWdFbmQoW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbz17aXNJbkVkaXRNb2RlID8gbnVsbCA6IChwb3MsIGVsZW1lbnRJZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtb3N0cmFyR3VpYXMocG9zLCBlbGVtZW50SWQsIG9iamV0b3MsIGVsZW1lbnRSZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoZWxlbWVudElkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnU3RhcnRQb3M9e2RyYWdTdGFydFBvc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRHJhZ2dlZD17aGFzRHJhZ2dlZH1cclxuICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgfSl9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHtzZWxlY2Npb25BY3RpdmEgJiYgYXJlYVNlbGVjY2lvbiAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFJlY3RcclxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ1aVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB4PXthcmVhU2VsZWNjaW9uLnh9XHJcbiAgICAgICAgICAgICAgICAgICAgICB5PXthcmVhU2VsZWNjaW9uLnl9XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17YXJlYVNlbGVjY2lvbi53aWR0aH1cclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17YXJlYVNlbGVjY2lvbi5oZWlnaHR9XHJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwicmdiYSgxMTksIDYxLCAxOTAsIDAuMSlcIiAvLyB2aW9sZXRhIGNsYXJvXHJcbiAgICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCIjNzczZGJlXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgZGFzaD17WzQsIDRdfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAge2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID4gMCAmJiAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8U2VsZWN0aW9uQm91bmRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudHM9e2VsZW1lbnRvc1NlbGVjY2lvbmFkb3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRSZWZzPXtlbGVtZW50UmVmc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZXRvcz17b2JqZXRvc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEcmFnZ2luZz17aXNEcmFnZ2luZ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGU9e2lzTW9iaWxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblRyYW5zZm9ybUludGVyYWN0aW9uU3RhcnQ9e2hhbmRsZVRyYW5zZm9ybUludGVyYWN0aW9uU3RhcnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhbnNmb3JtSW50ZXJhY3Rpb25FbmQ9e2hhbmRsZVRyYW5zZm9ybUludGVyYWN0aW9uRW5kfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblRyYW5zZm9ybT17KG5ld0F0dHJzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmpJbmRleCA9IG9iamV0b3MuZmluZEluZGV4KG8gPT4gby5pZCA9PT0gaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmpJbmRleCAhPT0gLTEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdBdHRycy5pc1ByZXZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmV2aWV3OiBhY3R1YWxpemFjacOzbiBzaW4gaGlzdG9yaWFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0T2JqZXRvcyhwcmV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvcyA9IFsuLi5wcmV2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRvID0gbnVldm9zW29iakluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvdW50ZG93bjogZHVyYW50ZSBwcmV2aWV3IGRlamFtb3MgcXVlIEtvbnZhIGVzY2FsZSBlbCBub2RvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW4gdG9jYXIgZXN0YWRvIFJlYWN0IHBhcmEgZXZpdGFyIGRlc2luY3Jvbml6YWNpw7NuIGNvbiBUcmFuc2Zvcm1lci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8udGlwbyA9PT0gXCJjb3VudGRvd25cIiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8udGlwbyA9PT0gXCJmb3JtYVwiICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGVsZW1lbnRvLmZpZ3VyYSA9PT0gXCJjaXJjbGVcIiB8fCBlbGVtZW50by5maWd1cmEgPT09IFwidHJpYW5nbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50by50aXBvID09PSBcInRleHRvXCIgJiYgTnVtYmVyLmlzRmluaXRlKG5ld0F0dHJzLmZvbnRTaXplKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJhIHRleHRvIGRlamFtb3MgcXVlIEtvbnZhIGhhZ2EgZWwgcHJldmlldyBkZSBlc2NhbGEgZW4gdml2by5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlc3RhZG8gUmVhY3QgZW4gY2FkYSBmcmFtZSBnZW5lcmEgbWljcm8taml0dGVyIHZpc3VhbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZEVsZW1lbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVsZW1lbnRvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogbmV3QXR0cnMucm90YXRpb24gfHwgZWxlbWVudG8ucm90YXRpb24gfHwgMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudG8udGlwbyA9PT0gXCJnYWxlcmlhXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2FsbGVyeU1ldHJpY3MgPSBub3JtYWxpemFyTWVkaWRhc0dhbGVyaWEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cnMud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QXR0cnMueFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC53aWR0aCA9IGdhbGxlcnlNZXRyaWNzLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC5oZWlnaHQgPSBnYWxsZXJ5TWV0cmljcy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbGVtZW50LndpZHRoUGN0ID0gZ2FsbGVyeU1ldHJpY3Mud2lkdGhQY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbGVtZW50LnggPSBnYWxsZXJ5TWV0cmljcy54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC5yb3RhdGlvbiA9IGVsZW1lbnRvLnJvdGF0aW9uIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbGVtZW50LnNjYWxlWCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRFbGVtZW50LnNjYWxlWSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3QXR0cnMud2lkdGggIT09IHVuZGVmaW5lZCkgdXBkYXRlZEVsZW1lbnQud2lkdGggPSBuZXdBdHRycy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0F0dHJzLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVkRWxlbWVudC5oZWlnaHQgPSBuZXdBdHRycy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdBdHRycy5yYWRpdXMgIT09IHVuZGVmaW5lZCkgdXBkYXRlZEVsZW1lbnQucmFkaXVzID0gbmV3QXR0cnMucmFkaXVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC5zY2FsZVggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRWxlbWVudC5zY2FsZVkgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51ZXZvc1tvYmpJbmRleF0gPSB1cGRhdGVkRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWV2b3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8/IEFDVFVBTElaQVIgUE9TSUNJw5NOIERFTCBCT1TDk04gRFVSQU5URSBUUkFOU0ZPUk1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3QXR0cnMuaXNGaW5hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmFsOiBhY3R1YWxpemFjacOzbiBjb21wbGV0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5fcmVzaXplRGF0YSA9IHsgaXNSZXNpemluZzogZmFsc2UgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBpc1ByZXZpZXcsIGlzRmluYWwsIC4uLmNsZWFuQXR0cnMgfSA9IG5ld0F0dHJzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA/PyBDT05WRVJUSVIgY29vcmRlbmFkYXMgYWJzb2x1dGFzIGEgcmVsYXRpdmFzIEFOVEVTIGRlIGd1YXJkYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmpPcmlnaW5hbCA9IG9iamV0b3Nbb2JqSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbEF0dHJzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2xlYW5BdHRycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGNvbnZlcnRpckFic0FSZWwoY2xlYW5BdHRycy55LCBvYmpPcmlnaW5hbC5zZWNjaW9uSWQsIHNlY2Npb25lc09yZGVuYWRhcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tVHJhbnNmb3JtOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPyBDT1VOVERPV046IGNvbnNlcnZhciBlc2NhbGEgZmluYWwgZGVsIGRyYWcgKHNpbiByZWNvbnZlcnNpw7NuIGEgY2hpcFdpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhcmEgcXVlIGVsIHRhbWHDsW8gZmluYWwgY29pbmNpZGEgZXhhY3RhbWVudGUgY29uIGxvIHNvbHRhZG8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iak9yaWdpbmFsLnRpcG8gPT09IFwidGV4dG9cIiAmJiBOdW1iZXIuaXNGaW5pdGUoY2xlYW5BdHRycy5mb250U2l6ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZEZvbnRTaXplID0gTWF0aC5tYXgoNiwgTnVtYmVyKGNsZWFuQXR0cnMuZm9udFNpemUpIHx8IDYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxGb250U2l6ZSA9IE51bWJlci5pc0Zpbml0ZShvYmpPcmlnaW5hbC5mb250U2l6ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvYmpPcmlnaW5hbC5mb250U2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDI0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm90YXRpb25GaW5hbCA9IE51bWJlci5pc0Zpbml0ZShjbGVhbkF0dHJzLnJvdGF0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNsZWFuQXR0cnMucm90YXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoTnVtYmVyLmlzRmluaXRlKG9iak9yaWdpbmFsLnJvdGF0aW9uKSA/IG9iak9yaWdpbmFsLnJvdGF0aW9uIDogMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1JvdGF0aW9uID0gTnVtYmVyLmlzRmluaXRlKG9iak9yaWdpbmFsLnJvdGF0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG9iak9yaWdpbmFsLnJvdGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uQ2hhbmdlZCA9IE1hdGguYWJzKHJvdGF0aW9uRmluYWwgLSBwcmV2aW91c1JvdGF0aW9uKSA+IDAuMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvbnRTaXplQ2hhbmdlZCA9IE1hdGguYWJzKHJlcXVlc3RlZEZvbnRTaXplIC0gb3JpZ2luYWxGb250U2l6ZSkgPiAwLjA1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkTWF0Y2hWaXN1YWxXaWR0aCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iak9yaWdpbmFsLl9fYXV0b1dpZHRoICE9PSBmYWxzZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhTnVtYmVyLmlzRmluaXRlKG9iak9yaWdpbmFsLndpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhcm90YXRpb25DaGFuZ2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dEZvbnRTaXplID0gc2hvdWxkTWF0Y2hWaXN1YWxXaWR0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFqdXN0YXJGb250U2l6ZUFBbmNob1Zpc3VhbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpPcmlnaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRGb250U2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbkF0dHJzLnRleHRWaXN1YWxXaWR0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcmVxdWVzdGVkRm9udFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRVc2VOb2RlUG9zZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uQ2hhbmdlZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZm9udFNpemVDaGFuZ2VkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShjbGVhbkF0dHJzLngpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShjbGVhbkF0dHJzLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VudGVyZWRQb3NBYnMgPSBzaG91bGRVc2VOb2RlUG9zZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgeDogTnVtYmVyKGNsZWFuQXR0cnMueCksIHk6IE51bWJlcihjbGVhbkF0dHJzLnkpIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjYWxjdWxhclBvc1RleHRvRGVzZGVDZW50cm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqT3JpZ2luYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEZvbnRTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuQXR0cnMudGV4dENlbnRlclgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5BdHRycy50ZXh0Q2VudGVyWSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbkZpbmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXJlZFggPSBjZW50ZXJlZFBvc0Ficy54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VudGVyZWRZQWJzID0gY2VudGVyZWRQb3NBYnMueTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlcmVkWSA9IE51bWJlci5pc0Zpbml0ZShjZW50ZXJlZFlBYnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY29udmVydGlyQWJzQVJlbChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFlBYnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqT3JpZ2luYWwuc2VjY2lvbklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKE51bWJlci5pc0Zpbml0ZShvYmpPcmlnaW5hbC55KSA/IG9iak9yaWdpbmFsLnkgOiAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRSZXNpemVEZWJ1ZyhcInRyYW5zZm9ybS1maW5hbDp0ZXh0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG9iak9yaWdpbmFsPy5pZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRGb250U2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEZvbnRTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRNYXRjaFZpc3VhbFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbkZvbnRTaXplOiBjbGVhbkF0dHJzLmZvbnRTaXplID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRWaXN1YWxXaWR0aDogY2xlYW5BdHRycy50ZXh0VmlzdWFsV2lkdGggPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENlbnRlclg6IGNsZWFuQXR0cnMudGV4dENlbnRlclggPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENlbnRlclk6IGNsZWFuQXR0cnMudGV4dENlbnRlclkgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb25GaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb25DaGFuZ2VkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZUNoYW5nZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFVzZU5vZGVQb3NlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcmVkWUFicyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyZWRZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFg6IG9iak9yaWdpbmFsPy54ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsWTogb2JqT3JpZ2luYWw/LnkgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxBdHRycyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZmluYWxBdHRycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IG5leHRGb250U2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogTnVtYmVyLmlzRmluaXRlKGNlbnRlcmVkWClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNlbnRlcmVkWFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKE51bWJlci5pc0Zpbml0ZShvYmpPcmlnaW5hbC54KSA/IG9iak9yaWdpbmFsLnggOiAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogY2VudGVyZWRZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmluYWxBdHRycy50ZXh0Q2VudGVyWDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbEF0dHJzLnRleHRDZW50ZXJZO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsQXR0cnMudGV4dFZpc3VhbFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFJlc2l6ZURlYnVnKFwidHJhbnNmb3JtLWZpbmFsOnRleHQtYXR0cnNcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogb2JqT3JpZ2luYWw/LmlkID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRm9udFNpemU6IGZpbmFsQXR0cnMuZm9udFNpemUgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxYOiBmaW5hbEF0dHJzLnggPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxZOiBmaW5hbEF0dHJzLnkgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqT3JpZ2luYWwudGlwbyA9PT0gXCJjb3VudGRvd25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxBdHRycyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZmluYWxBdHRycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiBOdW1iZXIuaXNGaW5pdGUoY2xlYW5BdHRycy5zY2FsZVgpID8gY2xlYW5BdHRycy5zY2FsZVggOiAob2JqT3JpZ2luYWwuc2NhbGVYID8/IDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IE51bWJlci5pc0Zpbml0ZShjbGVhbkF0dHJzLnNjYWxlWSkgPyBjbGVhbkF0dHJzLnNjYWxlWSA6IChvYmpPcmlnaW5hbC5zY2FsZVkgPz8gMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsQXR0cnMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmluYWxBdHRycy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmpPcmlnaW5hbC50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqT3JpZ2luYWwuZmlndXJhID09PSBcImNpcmNsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbEF0dHJzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5maW5hbEF0dHJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBOdW1iZXIuaXNGaW5pdGUoY2xlYW5BdHRycy54KSA/IGNsZWFuQXR0cnMueCA6IChvYmpPcmlnaW5hbC54IHx8IDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM6IE51bWJlci5pc0Zpbml0ZShjbGVhbkF0dHJzLnJhZGl1cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGNsZWFuQXR0cnMucmFkaXVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAob2JqT3JpZ2luYWwucmFkaXVzIHx8IDUwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsQXR0cnMud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmluYWxBdHRycy5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvYmpPcmlnaW5hbC50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqT3JpZ2luYWwuZmlndXJhID09PSBcInRyaWFuZ2xlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsQXR0cnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZpbmFsQXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IE51bWJlci5pc0Zpbml0ZShjbGVhbkF0dHJzLngpID8gY2xlYW5BdHRycy54IDogKG9iak9yaWdpbmFsLnggfHwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1czogTnVtYmVyLmlzRmluaXRlKGNsZWFuQXR0cnMucmFkaXVzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY2xlYW5BdHRycy5yYWRpdXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChvYmpPcmlnaW5hbC5yYWRpdXMgfHwgNjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmluYWxBdHRycy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmaW5hbEF0dHJzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iak9yaWdpbmFsLnRpcG8gPT09IFwiZ2FsZXJpYVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnYWxsZXJ5TWV0cmljcyA9IG5vcm1hbGl6YXJNZWRpZGFzR2FsZXJpYShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqT3JpZ2luYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuQXR0cnMud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuQXR0cnMueFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsQXR0cnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZpbmFsQXR0cnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGdhbGxlcnlNZXRyaWNzLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBnYWxsZXJ5TWV0cmljcy53aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBnYWxsZXJ5TWV0cmljcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoUGN0OiBnYWxsZXJ5TWV0cmljcy53aWR0aFBjdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IG9iak9yaWdpbmFsLnJvdGF0aW9uIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVZOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vID8gb2Zmc2V0WSBzb2xvIHBhcmEgZGVidWcgKGV2aXRhIFJlZmVyZW5jZUVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvZmZzZXRZID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmRJbmRleChzID0+IHMuaWQgPT09IG9iak9yaWdpbmFsLnNlY2Npb25JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWZlID0gaWR4ID49IDAgPyBpZHggOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90YTogZW4gdHUgY8OzZGlnbyBsbyBsbGFtw6FzIGEgdmVjZXMgY29uIDIgcGFyYW1zLCBhIHZlY2VzIGNvbiAzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWPDoSB1c2Ftb3MgMywgY29uc2lzdGVudGUgY29uIG90cmFzIHBhcnRlcyBkZWwgYXJjaGl2by5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFkgPSBjYWxjdWxhck9mZnNldFkoc2VjY2lvbmVzT3JkZW5hZGFzLCBzYWZlLCBhbHRvQ2FudmFzKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqT3JpZ2luYWwudGlwbyA9PT0gXCJjb3VudGRvd25cIiB8fCBvYmpPcmlnaW5hbC50aXBvID09PSBcInRleHRvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmpPcmlnaW5hbC50aXBvID09PSBcInRleHRvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWl0U25hcHNob3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG9iak9yaWdpbmFsPy5pZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRm9udFNpemU6IGZpbmFsQXR0cnMuZm9udFNpemUgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFg6IGZpbmFsQXR0cnMueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsWTogZmluYWxBdHRycy55ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBvYmpPcmlnaW5hbD8uc2VjY2lvbklkID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRSZXNpemVEZWJ1ZyhcInRyYW5zZm9ybS1maW5hbDpjb21taXRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbW1pdFNuYXBzaG90LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGV4dFJlc2l6ZURlYnVnRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVBZnRlckNvbW1pdCA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ/Lltjb21taXRTbmFwc2hvdC5pZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm9kZUFmdGVyQ29tbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFJlc2l6ZURlYnVnKFwidHJhbnNmb3JtLWZpbmFsOnBvc3QtcmVuZGVyOm5vLW5vZGVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbW1pdFNuYXBzaG90LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3RBZnRlckNvbW1pdCA9IG5vZGVBZnRlckNvbW1pdC5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFJlc2l6ZURlYnVnKFwidHJhbnNmb3JtLWZpbmFsOnBvc3QtcmVuZGVyXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbW1pdFNuYXBzaG90LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVg6IHR5cGVvZiBub2RlQWZ0ZXJDb21taXQueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZUFmdGVyQ29tbWl0LngoKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlWTogdHlwZW9mIG5vZGVBZnRlckNvbW1pdC55ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlQWZ0ZXJDb21taXQueSgpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTY2FsZVg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBub2RlQWZ0ZXJDb21taXQuc2NhbGVYID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5vZGVBZnRlckNvbW1pdC5zY2FsZVgoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVTY2FsZVk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBub2RlQWZ0ZXJDb21taXQuc2NhbGVZID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5vZGVBZnRlckNvbW1pdC5zY2FsZVkoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVGb250U2l6ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG5vZGVBZnRlckNvbW1pdC5mb250U2l6ZSA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBub2RlQWZ0ZXJDb21taXQuZm9udFNpemUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVSZWN0V2lkdGg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShyZWN0QWZ0ZXJDb21taXQ/LndpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcmVjdEFmdGVyQ29tbWl0LndpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVJlY3RIZWlnaHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShyZWN0QWZ0ZXJDb21taXQ/LmhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHJlY3RBZnRlckNvbW1pdC5oZWlnaHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRSZXNpemVEZWJ1ZyhcInRyYW5zZm9ybS1maW5hbDpwb3N0LXJlbmRlcjplcnJvclwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY29tbWl0U25hcHNob3QuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnI/Lm1lc3NhZ2UgfHwgU3RyaW5nKGVyciksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3R1YWxpemFyT2JqZXRvKG9iakluZGV4LCBmaW5hbEF0dHJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsaXphck9iamV0byhvYmpJbmRleCwgZmluYWxBdHRycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9KSgpfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBObyBtb3N0cmFyIGhvdmVyIGR1cmFudGUgZHJhZy9yZXNpemUvZWRpY2nDs24gTkkgY3VhbmRvIGhheSBsw61kZXIgZGUgZ3J1cG8gKi99XHJcbiAgICAgICAgICAgICAgICAgIHshd2luZG93Ll9yZXNpemVEYXRhPy5pc1Jlc2l6aW5nICYmICFpc0RyYWdnaW5nICYmICF3aW5kb3cuX2lzRHJhZ2dpbmcgJiYgIXdpbmRvdy5fZ3J1cG9MaWRlciAmJiAhZWRpdGluZy5pZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEhvdmVySW5kaWNhdG9yIGhvdmVyZWRFbGVtZW50PXtob3ZlcklkfSBlbGVtZW50UmVmcz17ZWxlbWVudFJlZnN9IG9iamV0b3M9e29iamV0b3N9IC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiA/PyBDb250cm9sZXMgZXNwZWNpYWxlcyBwYXJhIGzDrW5lYXMgc2VsZWNjaW9uYWRhcyAqL31cclxuICAgICAgICAgICAgICAgICAge2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAxICYmICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudG9TZWxlY2Npb25hZG8gPSBvYmpldG9zLmZpbmQob2JqID0+IG9iai5pZCA9PT0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRvU2VsZWNjaW9uYWRvPy50aXBvID09PSAnZm9ybWEnICYmIGVsZW1lbnRvU2VsZWNjaW9uYWRvPy5maWd1cmEgPT09ICdsaW5lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpbmVDb250cm9sc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ1aVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgbGluZS1jb250cm9scy0ke2VsZW1lbnRvU2VsZWNjaW9uYWRvLmlkfS0ke0pTT04uc3RyaW5naWZ5KGVsZW1lbnRvU2VsZWNjaW9uYWRvLnBvaW50cyl9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lRWxlbWVudD17ZWxlbWVudG9TZWxlY2Npb25hZG99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFJlZnM9e2VsZW1lbnRSZWZzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlTGluZT17YWN0dWFsaXphckxpbmVhfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFsdG9DYW52YXM9e2FsdG9DYW52YXNEaW5hbWljb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc01vYmlsZT17aXNNb2JpbGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gPz8gTlVFVkEgUFJPUDogUGFzYXIgaW5mb3JtYWNpw7NuIHNvYnJlIGRyYWcgZ3J1cGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEcmFnR3J1cGFsQWN0aXZlPXt3aW5kb3cuX2dydXBvTGlkZXIgIT09IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcz17ZWxlbWVudG9zU2VsZWNjaW9uYWRvc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICB9KSgpfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiBMw61uZWFzIGRlIGd1w61hIGRpbsOhbWljYXMgbWVqb3JhZGFzICovfVxyXG4gICAgICAgICAgICAgICAgICB7Z3VpYUxpbmVhcy5tYXAoKGxpbmVhLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5hciBlbCBlc3RpbG8gdmlzdWFsIHNlZ8O6biBlbCB0aXBvXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNMaW5lYVNlY2Npb24gPSBsaW5lYS5wcmlvcml0eSA9PT0gJ3NlY2Npb24nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgPExpbmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInVpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtsaW5lYS50eXBlfS0ke2l9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzPXtsaW5lYS5wb2ludHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT17ZXNMaW5lYVNlY2Npb24gPyBcIiM3NzNkYmVcIiA6IFwiIzkzMzNlYVwifSAvLyBWaW9sZXRhIG3DoXMgaW50ZW5zbyBwYXJhIHNlY2Npw7NuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtlc0xpbmVhU2VjY2lvbiA/IDIgOiAxfSAvLyBMw61uZWFzIGRlIHNlY2Npw7NuIG3DoXMgZ3J1ZXNhc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNoPXtsaW5lYS5zdHlsZSA9PT0gJ2Rhc2hlZCcgPyBbOCwgNl0gOiB1bmRlZmluZWR9IC8vIFB1bnRlYWRvIHBhcmEgZWxlbWVudG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk9e2VzTGluZWFTZWNjaW9uID8gMC45IDogMC43fSAvLyBMw61uZWFzIGRlIHNlY2Npw7NuIG3DoXMgb3BhY2FzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVmZWN0byBzdXRpbCBkZSByZXNwbGFuZG9yIHBhcmEgbMOtbmVhcyBkZSBzZWNjacOzblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcj17ZXNMaW5lYVNlY2Npb24gPyBcInJnYmEoMTE5LCA2MSwgMTkwLCAwLjMpXCIgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0JsdXI9e2VzTGluZWFTZWNjaW9uID8gNCA6IDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0VuYWJsZWQ9e2VzTGluZWFTZWNjaW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9KX1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgPC9DYW52YXNFbGVtZW50c0xheWVyPlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiA/IE92ZXJsYXkgc3VwZXJpb3I6IGJvcmRlIGRlIHNlY2Npw7NuIGFjdGl2YSBTSUVNUFJFIGFycmliYSBkZSB0b2RvICovfVxyXG4gICAgICAgICAgICAgICAgPENhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcbiAgICAgICAgICAgICAgICAgIHsoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VjY2lvbkFjdGl2YUlkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzZWNjaW9uZXNPcmRlbmFkYXMuZmluZEluZGV4KHMgPT4gcy5pZCA9PT0gc2VjY2lvbkFjdGl2YUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VjY2lvbiA9IHNlY2Npb25lc09yZGVuYWRhc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXNPcmRlbmFkYXMsIGluZGV4LCBhbHRvQ2FudmFzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlc3RhQW5pbWFuZG8gPSBzZWNjaW9uZXNBbmltYW5kby5pbmNsdWRlcyhzZWNjaW9uLmlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgIDxSZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YG92ZXJsYXktYm9yZGVyLXNlY2Npb24tJHtzZWNjaW9uLmlkfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk9e29mZnNldFl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs4MDB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17c2VjY2lvbi5hbHR1cmF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM3NzNkYmVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17ZXN0YUFuaW1hbmRvID8gNCA6IDN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcm5lclJhZGl1cz17MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Q29sb3I9e2VzdGFBbmltYW5kbyA/IFwicmdiYSgxMTksIDYxLCAxOTAsIDAuNClcIiA6IFwicmdiYSgxMTksIDYxLCAxOTAsIDAuMjUpXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd0JsdXI9e2VzdGFBbmltYW5kbyA/IDE2IDogMTJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd09mZnNldD17eyB4OiAwLCB5OiBlc3RhQW5pbWFuZG8gPyA0IDogMyB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICB9KSgpfVxyXG4gICAgICAgICAgICAgICAgPC9DYW52YXNFbGVtZW50c0xheWVyPlxyXG5cclxuICAgICAgICAgICAgICA8L1N0YWdlPlxyXG5cclxuXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAge2VkaXRpbmcuaWQgJiYgZWxlbWVudFJlZnMuY3VycmVudFtlZGl0aW5nLmlkXSAmJiAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9iamV0b0VuRWRpY2lvbiA9IG9iamV0b3MuZmluZChvID0+IG8uaWQgPT09IGVkaXRpbmcuaWQpO1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPElubGluZVRleHRFZGl0b3JcclxuICAgICAgICAgICAgICAgICAgZWRpdGluZ0lkPXtlZGl0aW5nLmlkfVxyXG4gICAgICAgICAgICAgICAgICBub2RlPXtlbGVtZW50UmVmcy5jdXJyZW50W2VkaXRpbmcuaWRdfVxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZT17ZWRpdGluZy52YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgdGV4dEFsaWduPXtvYmpldG9FbkVkaWNpb24/LmFsaWduIHx8ICdsZWZ0J30gLy8gPz8gU29sbyBwYXNhciBhbGluZWFjacOzblxyXG4gICAgICAgICAgICAgICAgICBvbk92ZXJsYXlNb3VudENoYW5nZT17aGFuZGxlSW5saW5lT3ZlcmxheU1vdW50Q2hhbmdlfVxyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KG5leHRWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUZXh0ID0gU3RyaW5nKG5leHRWYWx1ZSA/PyBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2U3RhdHMgPSBnZXRJbmxpbmVMaW5lU3RhdHMoZWRpdGluZy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFN0YXRzID0gZ2V0SW5saW5lTGluZVN0YXRzKG5leHRUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcmV2U3RhdHMubGluZUNvdW50ICE9PSBuZXh0U3RhdHMubGluZUNvdW50IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICBwcmV2U3RhdHMudHJhaWxpbmdOZXdsaW5lcyAhPT0gbmV4dFN0YXRzLnRyYWlsaW5nTmV3bGluZXNcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwibGluZWJyZWFrLW1vZGVsLXN5bmNcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZWRpdGluZy5pZCB8fCB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkxlbmd0aDogcHJldlN0YXRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dExlbmd0aDogbmV4dFN0YXRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkxpbmVDb3VudDogcHJldlN0YXRzLmxpbmVDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dExpbmVDb3VudDogbmV4dFN0YXRzLmxpbmVDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlRyYWlsaW5nTmV3bGluZXM6IHByZXZTdGF0cy50cmFpbGluZ05ld2xpbmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0VHJhaWxpbmdOZXdsaW5lczogbmV4dFN0YXRzLnRyYWlsaW5nTmV3bGluZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiaW5wdXQ6IGJlZm9yZS1yZW5kZXJcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGVkaXRpbmcuaWQgfHwgd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUxlbmd0aDogbmV4dFRleHQubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUVkaXQobmV4dFZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgb25EZWJ1Z0V2ZW50PXsoZXZlbnROYW1lLCBwYXlsb2FkID0ge30pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoZXZlbnROYW1lLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogcGF5bG9hZD8uaWQgfHwgZWRpdGluZy5pZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgLi4ucGF5bG9hZCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgb25GaW5pc2g9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5pc2hJZCA9IGVkaXRpbmcuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZmluaXNoOiBibHVyXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlTGVuZ3RoOiBTdHJpbmcoZWRpdGluZy52YWx1ZSA/PyBcIlwiKS5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dG9OdWV2b1JhdyA9IFN0cmluZyhlZGl0aW5nLnZhbHVlID8/IFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTnVldm9WYWxpZGFkbyA9IHRleHRvTnVldm9SYXcudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gb2JqZXRvcy5maW5kSW5kZXgobyA9PiBvLmlkID09PSBmaW5pc2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZXRvID0gb2JqZXRvc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGl2ZU5vZGVBdEZpbmlzaCA9IGVsZW1lbnRSZWZzLmN1cnJlbnRbZmluaXNoSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpdmVNZXRyaWNzQXRGaW5pc2ggPSBvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lKGxpdmVOb2RlQXRGaW5pc2gpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmxpbmVEZWJ1Z0xvZyhcImZpbmlzaC1zdGFydFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICByYXdMZW5ndGg6IHRleHRvTnVldm9SYXcubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdHJpbW1lZExlbmd0aDogdGV4dG9OdWV2b1ZhbGlkYWRvLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFg6IG9iamV0bz8ueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb2JqZWN0WTogb2JqZXRvPy55ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3UmVmOiB7IC4uLmlubGluZUVkaXRQcmV2aWV3UmVmLmN1cnJlbnQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIGxpdmVNZXRyaWNzQXRGaW5pc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIj8gRWwgb2JqZXRvIHlhIG5vIGV4aXN0ZS4gQ2FuY2VsYW5kbyBndWFyZGFkby5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVEZWJ1Z0xvZyhcImZpbmlzaC1hYm9ydC1taXNzaW5nLW9iamVjdFwiLCB7IGlkOiBmaW5pc2hJZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNvbW1pdERlYnVnUmVmLmN1cnJlbnQgPSB7IGlkOiBudWxsIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hFZGl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyA/PyBQb2TDqXMgcGVybWl0aXIgdGV4dG8gdmFjw61vIGVuIGZvcm1hcyBzaSBxdWVyw6lzICh5byBsbyBwZXJtaXRpcsOtYSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dG9OdWV2b1ZhbGlkYWRvID09PSBcIlwiICYmIG9iamV0by50aXBvID09PSBcInRleHRvXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIj8/IEVsIHRleHRvIGVzdMOhIHZhY8Otby4gTm8gc2UgYWN0dWFsaXphLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwiZmluaXNoLWFib3J0LWVtcHR5XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYXdMZW5ndGg6IHRleHRvTnVldm9SYXcubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmltbWVkTGVuZ3RoOiB0ZXh0b051ZXZvVmFsaWRhZG8ubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDb21taXREZWJ1Z1JlZi5jdXJyZW50ID0geyBpZDogbnVsbCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgaW5saW5lRWRpdFByZXZpZXdSZWYuY3VycmVudCA9IHsgaWQ6IG51bGwsIGNlbnRlclg6IG51bGwgfTtcclxuICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEVkaXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdHVhbGl6YWRvID0gWy4uLm9iamV0b3NdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoID0geyB0ZXh0bzogdGV4dG9OdWV2b1JhdyB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRLZWVwQ2VudGVyWCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmpldG8udGlwbyA9PT0gXCJ0ZXh0b1wiICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAhb2JqZXRvLl9fZ3JvdXBBbGlnbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgIU51bWJlci5pc0Zpbml0ZShvYmpldG8ud2lkdGgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICBvYmpldG8uX19hdXRvV2lkdGggIT09IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkS2VlcENlbnRlclgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRYID0gY2FsY3VsYXJYVGV4dG9DZW50cmFkbyhvYmpldG8sIHRleHRvTnVldm9SYXcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFggPSBOdW1iZXIuaXNGaW5pdGUob2JqZXRvLngpID8gb2JqZXRvLnggOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShuZXh0WCkgJiYgTWF0aC5hYnMobmV4dFggLSBjdXJyZW50WCkgPiAwLjAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoLnggPSBuZXh0WDtcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVEZWJ1Z0xvZyhcImZpbmlzaC1jZW50ZXItY29tcHV0ZWRcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZEtlZXBDZW50ZXJYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50WCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoWDogcGF0Y2gueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWxpemFkb1tpbmRleF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAuLi5hY3R1YWxpemFkb1tpbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAuLi5wYXRjaFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkWCA9IE51bWJlci5pc0Zpbml0ZShwYXRjaC54KVxyXG4gICAgICAgICAgICAgICAgICAgICAgPyBwYXRjaC54XHJcbiAgICAgICAgICAgICAgICAgICAgICA6IChOdW1iZXIuaXNGaW5pdGUob2JqZXRvLngpID8gb2JqZXRvLnggOiBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICBpbmxpbmVDb21taXREZWJ1Z1JlZi5jdXJyZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgb2JqZWN0WEJlZm9yZUNvbW1pdDogTnVtYmVyLmlzRmluaXRlKG9iamV0by54KSA/IG9iamV0by54IDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIGxpdmVOb2RlWEF0RmluaXNoOiBOdW1iZXIuaXNGaW5pdGUobGl2ZU1ldHJpY3NBdEZpbmlzaD8ueClcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBsaXZlTWV0cmljc0F0RmluaXNoLnhcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgcHJldmlld0NlbnRlclg6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGVuZ3RoOiB0ZXh0b051ZXZvUmF3Lmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbmxpbmVEZWJ1Z0xvZyhcImZpbmlzaC1hcHBseS1wYXRjaFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwYXRjaCxcclxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkWCxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2dGaW5pc2hWaXNpYmlsaXR5Q2hlY2sgPSAocGhhc2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhZmVJZCA9IFN0cmluZyhmaW5pc2hJZCB8fCBcIlwiKS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdmVybGF5RG9tUHJlc2VudCA9IHNhZmVJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IEJvb2xlYW4oZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtaW5saW5lLWVkaXRvci1pZD1cIiR7c2FmZUlkfVwiXWApKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGl2ZU5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50W2ZpbmlzaElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlubGluZURlYnVnTG9nKFwiZmluaXNoLXZpc2liaWxpdHktY2hlY2tcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaGFzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFjdGl2ZUVkaXRpbmdJZDogZWRpdGluZy5pZCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxFZGl0aW5nSWQ6IHdpbmRvdy5lZGl0aW5nPy5pZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RWRpdGluZ0lkOiB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheU1vdW50ZWRJZDogaW5saW5lT3ZlcmxheU1vdW50ZWRJZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5RG9tUHJlc2VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZU9wYWNpdHk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGxpdmVOb2RlPy5vcGFjaXR5ID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbGl2ZU5vZGUub3BhY2l0eSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVWaXNpYmxlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBsaXZlTm9kZT8udmlzaWJsZSA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGxpdmVOb2RlLnZpc2libGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlTWV0cmljczogb2J0ZW5lck1ldHJpY2FzTm9kb0lubGluZShsaXZlTm9kZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0ZpbmlzaFZpc2liaWxpdHlDaGVjayhcImJlZm9yZS1jb21taXRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImZpbmlzaDogYmVmb3JlLWZsdXNoXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkWCxcclxuICAgICAgICAgICAgICAgICAgICAgIHBhdGNoWDogcGF0Y2gueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsdXNoU3luYygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzZXRPYmpldG9zKGFjdHVhbGl6YWRvKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoXCJmaW5pc2g6IGFmdGVyLWZsdXNoXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkWCxcclxuICAgICAgICAgICAgICAgICAgICAgIHBhdGNoWDogcGF0Y2gueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0ZpbmlzaFZpc2liaWxpdHlDaGVjayhcImFmdGVyLWNvbW1pdC1iZWZvcmUtZmluaXNoRWRpdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpbmxpbmVFZGl0UHJldmlld1JlZi5jdXJyZW50ID0geyBpZDogbnVsbCwgY2VudGVyWDogbnVsbCB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsdXNoU3luYygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hFZGl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhZ2VBZnRlckZpbmlzaEVkaXQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgc3RhZ2VSZWYuY3VycmVudD8uZ2V0U3RhZ2U/LigpIHx8IHN0YWdlUmVmLmN1cnJlbnQgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0YWdlQWZ0ZXJGaW5pc2hFZGl0Py5iYXRjaERyYXcgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgc3RhZ2VBZnRlckZpbmlzaEVkaXQuYmF0Y2hEcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0ZpbmlzaFZpc2liaWxpdHlDaGVjayhcImFmdGVyLWZpbmlzaEVkaXQtc3luY1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Ll9jdXJyZW50RWRpdGluZ0lkID09PSBmaW5pc2hJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlubGluZVNuYXBzaG90KFwiZmluaXNoOiBhZnRlci1maW5pc2hFZGl0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBmaW5pc2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkWCxcclxuICAgICAgICAgICAgICAgICAgICAgIHBhdGNoWDogcGF0Y2gueCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsb2dGaW5pc2hWaXNpYmlsaXR5Q2hlY2soXCJhZnRlci1maW5pc2hFZGl0LXJhZjFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSW5saW5lU25hcHNob3QoXCJmaW5pc2g6IHJhZjFcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZmluaXNoSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hYOiBwYXRjaC54ID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJbmxpbmVTbmFwc2hvdChcImZpbmlzaDogcmFmMlwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGZpbmlzaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkWCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRjaFg6IHBhdGNoLnggPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgc2NhbGVWaXN1YWw9e2VzY2FsYVZpc3VhbH1cclxuICAgICAgICAgICAgICAgICAgZmluaXNoTW9kZT17aW5saW5lRGVidWdBQi5maW5pc2hNb2RlfVxyXG4gICAgICAgICAgICAgICAgICB3aWR0aE1vZGU9e2lubGluZURlYnVnQUIub3ZlcmxheVdpZHRoTW9kZX1cclxuXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pKCl9XHJcblxyXG5cclxuICAgICAgICAgICAgey8qIFN0YWdlIGV4dHJhIHNvbG8gZW4gZGVza3RvcCBwYXJhIG5vIGR1cGxpY2FyIG1lbW9yaWEgZW4gbW9iaWxlICovfVxyXG4gICAgICAgICAgICB7IWlzTW9iaWxlICYmIChcclxuICAgICAgICAgICAgICA8RGl2aWRlcnNPdmVybGF5U3RhZ2VcclxuICAgICAgICAgICAgICAgIHpvb209e3pvb219XHJcbiAgICAgICAgICAgICAgICBhbHRvQ2FudmFzRGluYW1pY289e2FsdG9DYW52YXNEaW5hbWljb31cclxuICAgICAgICAgICAgICAgIHNlY2Npb25lc09yZGVuYWRhcz17c2VjY2lvbmVzT3JkZW5hZGFzfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICl9XHJcblxyXG5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuXHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG5cclxuICAgICAgPC9kaXY+XHJcblxyXG5cclxuXHJcbiAgICAgIHsvKiA/IEJvdMOzbiBkZSBvcGNpb25lcyBQRUdBRE8gYSBsYSBlc3F1aW5hIHN1cGVyaW9yIGRlcmVjaGEgZGVsIGVsZW1lbnRvICovfVxyXG4gICAgICB7ZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPT09IDEgJiYgIWVkaXRpbmcuaWQgJiYgIWlzU2VsZWN0aW9uUm90YXRpbmcgJiYgKFxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIHJlZj17Ym90b25PcGNpb25lc1JlZn1cclxuICAgICAgICAgIGRhdGEtb3B0aW9uLWJ1dHRvbj1cInRydWVcIlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgei01MCBiZy13aGl0ZSBib3JkZXItMiBib3JkZXItcHVycGxlLTUwMCByb3VuZGVkLWZ1bGwgc2hhZG93LWxnIGhvdmVyOnNoYWRvdy14bCB0cmFuc2l0aW9uLXNoYWRvdyBkdXJhdGlvbi0yMDBcIlxyXG4gICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgbGVmdDogXCIwcHhcIixcclxuICAgICAgICAgICAgdG9wOiBcIjBweFwiLFxyXG4gICAgICAgICAgICB3aWR0aDogYCR7b3B0aW9uQnV0dG9uU2l6ZX1weGAsXHJcbiAgICAgICAgICAgIGhlaWdodDogYCR7b3B0aW9uQnV0dG9uU2l6ZX1weGAsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiLFxyXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxyXG4gICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcclxuICAgICAgICAgICAgcG9pbnRlckV2ZW50czogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb246IFwibm9uZVwiLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjk1KVwiLFxyXG4gICAgICAgICAgICBiYWNrZHJvcEZpbHRlcjogXCJibHVyKDRweClcIixcclxuICAgICAgICAgICAgYm9yZGVyOiBcIjJweCBzb2xpZCAjNzczZGJlXCIsXHJcbiAgICAgICAgICAgIHRvdWNoQWN0aW9uOiBcIm1hbmlwdWxhdGlvblwiLFxyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICBvblBvaW50ZXJEb3duPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgIHRvZ2dsZVBhbmVsT3BjaW9uZXMoXCJnZWFyLXBvaW50ZXJkb3duXCIsIGUubmF0aXZlRXZlbnQgfHwgZSk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8gQ2xpY2sgZGUgdGVjbGFkbyAoRW50ZXIvRXNwYWNpbykgY3VhbmRvIG5vIGhheSBwb2ludGVyIGludGVyYWN0aW9uLlxyXG4gICAgICAgICAgICAgIGlmIChlLmRldGFpbCAhPT0gMCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgdG9nZ2xlUGFuZWxPcGNpb25lcyhcImdlYXIta2V5Ym9hcmQtY2xpY2tcIiwgZS5uYXRpdmVFdmVudCB8fCBlKTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiaG92ZXI6YmctcHVycGxlLTUwIHctZnVsbCBoLWZ1bGwgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgdGl0bGU9XCJPcGNpb25lcyBkZWwgZWxlbWVudG9cIlxyXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiT3BjaW9uZXMgZGVsIGVsZW1lbnRvXCJcclxuICAgICAgICAgICAgc3R5bGU9e3sgdG91Y2hBY3Rpb246IFwibWFuaXB1bGF0aW9uXCIgfX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPFNldHRpbmdzXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1wdXJwbGUtNzAwXCJcclxuICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogaXNNb2JpbGUgPyAxOCA6IDE0LCBoZWlnaHQ6IGlzTW9iaWxlID8gMTggOiAxNCB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcblxyXG5cclxuXHJcbiAgICAgIHttb3N0cmFyUGFuZWxaICYmIChcclxuICAgICAgICA8TWVudU9wY2lvbmVzRWxlbWVudG9cclxuICAgICAgICAgIGlzT3Blbj17bW9zdHJhclBhbmVsWn1cclxuICAgICAgICAgIGJvdG9uT3BjaW9uZXNSZWY9e2JvdG9uT3BjaW9uZXNSZWZ9XHJcbiAgICAgICAgICBlbGVtZW50b1NlbGVjY2lvbmFkbz17b2JqZXRvcy5maW5kKG8gPT4gby5pZCA9PT0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc1swXSl9XHJcbiAgICAgICAgICBvbkNvcGlhcj17b25Db3BpYXJ9XHJcbiAgICAgICAgICBvblBlZ2FyPXtvblBlZ2FyfVxyXG4gICAgICAgICAgb25EdXBsaWNhcj17b25EdXBsaWNhcn1cclxuICAgICAgICAgIG9uRWxpbWluYXI9e29uRWxpbWluYXJ9XHJcbiAgICAgICAgICBtb3ZlckVsZW1lbnRvPXttb3ZlckVsZW1lbnRvfVxyXG4gICAgICAgICAgb25DZXJyYXI9eygpID0+IHNldE1vc3RyYXJQYW5lbFooZmFsc2UpfVxyXG4gICAgICAgICAgcmVlbXBsYXphckZvbmRvPXtyZWVtcGxhemFyRm9uZG99XHJcbiAgICAgICAgICBzZWNjaW9uZXM9e3NlY2Npb25lc31cclxuICAgICAgICAgIG9iamV0b3M9e29iamV0b3N9XHJcbiAgICAgICAgICBzZXRTZWNjaW9uZXM9e3NldFNlY2Npb25lc31cclxuICAgICAgICAgIHNldE9iamV0b3M9e3NldE9iamV0b3N9XHJcbiAgICAgICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zPXtzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICl9XHJcblxyXG5cclxuICAgICAgPEZsb2F0aW5nVGV4dFRvb2xiYXJcclxuICAgICAgICBvYmpldG9TZWxlY2Npb25hZG89e29iamV0b1NlbGVjY2lvbmFkb31cclxuICAgICAgICBzZXRPYmpldG9zPXtzZXRPYmpldG9zfVxyXG4gICAgICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3M9e2VsZW1lbnRvc1NlbGVjY2lvbmFkb3N9XHJcbiAgICAgICAgbW9zdHJhclNlbGVjdG9yRnVlbnRlPXttb3N0cmFyU2VsZWN0b3JGdWVudGV9XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlPXtzZXRNb3N0cmFyU2VsZWN0b3JGdWVudGV9XHJcbiAgICAgICAgbW9zdHJhclNlbGVjdG9yVGFtYW5vPXttb3N0cmFyU2VsZWN0b3JUYW1hbm99XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vPXtzZXRNb3N0cmFyU2VsZWN0b3JUYW1hbm99XHJcbiAgICAgICAgQUxMX0ZPTlRTPXtBTExfRk9OVFN9XHJcbiAgICAgICAgZm9udE1hbmFnZXI9e2ZvbnRNYW5hZ2VyfVxyXG4gICAgICAgIHRhbWFuaW9zRGlzcG9uaWJsZXM9e3RhbWFuaW9zRGlzcG9uaWJsZXN9XHJcbiAgICAgICAgb25DYW1iaWFyQWxpbmVhY2lvbj17b25DYW1iaWFyQWxpbmVhY2lvbn1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIDxDb25maXJtRGVsZXRlU2VjdGlvbk1vZGFsXHJcbiAgICAgICAgaXNPcGVuPXtkZWxldGVTZWN0aW9uTW9kYWwuaXNPcGVufVxyXG4gICAgICAgIHNlY3Rpb25OYW1lPXtzZWNjaW9uUGVuZGllbnRlRWxpbWluYXI/LnRpcG99XHJcbiAgICAgICAgaXRlbUNvdW50PXtjYW50aWRhZEVsZW1lbnRvc1NlY2Npb25QZW5kaWVudGV9XHJcbiAgICAgICAgaXNEZWxldGluZz17aXNEZWxldGluZ1NlY3Rpb259XHJcbiAgICAgICAgb25DYW5jZWw9e2NlcnJhck1vZGFsQm9ycmFyU2VjY2lvbn1cclxuICAgICAgICBvbkNvbmZpcm09e2NvbmZpcm1hckJvcnJhclNlY2Npb259XHJcbiAgICAgIC8+XHJcblxyXG5cclxuXHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG5cclxufVxyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VNZW1vIiwidXNlQ2FsbGJhY2siLCJjcmVhdGVQb3J0YWwiLCJmbHVzaFN5bmMiLCJTdGFnZSIsIkxpbmUiLCJSZWN0IiwiVGV4dCIsIkltYWdlIiwiS29udmFJbWFnZSIsIkdyb3VwIiwiQ2lyY2xlIiwiRWxlbWVudG9DYW52YXMiLCJMaW5lQ29udHJvbHMiLCJjYWxjdWxhck9mZnNldFkiLCJjb252ZXJ0aXJBYnNBUmVsIiwiZGV0ZXJtaW5hck51ZXZhU2VjY2lvbiIsImNyZWFyU2VjY2lvbiIsInVzZVBsYW50aWxsYXNEZVNlY2Npb24iLCJ1c2VJbXBlcmF0aXZlT2JqZWN0cyIsIlNlbGVjdGlvbkJvdW5kcyIsIkhvdmVySW5kaWNhdG9yIiwiTGluZVRvb2xiYXIiLCJ1c2VLZXlib2FyZFNob3J0Y3V0cyIsImZvbnRNYW5hZ2VyIiwidXNlSW5saW5lRWRpdG9yIiwiU2hhcGVUb29sYmFyIiwidXNlRWRpdG9ySGFuZGxlcnMiLCJJbmxpbmVUZXh0RWRpdG9yIiwiRm9udFNlbGVjdG9yIiwicmVlbXBsYXphckZvbmRvU2VjY2lvbiIsInJlZW1wbGF6YXJGb25kbyIsImRlc2FuY2xhckltYWdlbkRlRm9uZG8iLCJkZXNhbmNsYXJGb25kbyIsImJvcnJhclNlY2Npb24iLCJib3JyYXJTZWNjaW9uRXh0ZXJuYWwiLCJtb3ZlclNlY2Npb24iLCJtb3ZlclNlY2Npb25FeHRlcm5hbCIsInZhbGlkYXJQdW50b3NMaW5lYSIsImRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEiLCJndWFyZGFyU2VjY2lvbkNvbW9QbGFudGlsbGEiLCJHYWxlcmlhS29udmEiLCJGb25kb1NlY2Npb24iLCJNZW51T3BjaW9uZXNFbGVtZW50byIsImNhbGNHYWxsZXJ5TGF5b3V0IiwiQ291bnRkb3duS29udmEiLCJ1c2VHdWlhc0NlbnRyYWRvIiwiRmxvYXRpbmdUZXh0VG9vbGJhciIsIlNlbGVjdG9yQ29sb3JTZWNjaW9uIiwiS29udmEiLCJBTExfRk9OVFMiLCJ1c2VBdXRoQ2xhaW1zIiwiVHJhc2gyIiwiTGF5ZXJzIiwiTW92ZVVwIiwiTW92ZURvd24iLCJQbHVzQ2lyY2xlIiwiU2V0dGluZ3MiLCJVbmxpbmsyIiwiTW9uaXRvciIsIkNoZXZyb25Eb3duIiwiQ2hldnJvblVwIiwidXNlQm9ycmFkb3JTeW5jIiwidXNlU2VjdGlvbnNNYW5hZ2VyIiwiQ29uZmlybURlbGV0ZVNlY3Rpb25Nb2RhbCIsInVzZUVkaXRvckV2ZW50cyIsInVzZUVkaXRvcldpbmRvd0JyaWRnZSIsInVzZUhpc3RvcnlNYW5hZ2VyIiwidXNlQ2FudmFzU2NhbGVMYXlvdXQiLCJ1c2VDYW52YXNJbnRlcmFjdGlvblN0YXRlIiwidXNlU3RhZ2VHZXN0dXJlcyIsInVzZU9wdGlvbkJ1dHRvblBvc2l0aW9uIiwiQ2FudmFzRWxlbWVudHNMYXllciIsIkRpdmlkZXJzT3ZlcmxheVN0YWdlIiwiZHJhZ0Rpc3RhbmNlIiwicmVzb2x2ZUtvbnZhUGl4ZWxSYXRpbyIsImRwciIsIk51bWJlciIsIndpbmRvdyIsImRldmljZVBpeGVsUmF0aW8iLCJjb2Fyc2VQb2ludGVyIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJtaW5TaWRlIiwiTWF0aCIsIm1pbiIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsIm1vYmlsZUxpa2UiLCJwaXhlbFJhdGlvIiwiQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEEiLCJBTFRVUkFfUEFOVEFMTEFfRURJVE9SIiwibm9ybWFsaXphckFsdG9Nb2RvIiwibW9kbyIsIm0iLCJTdHJpbmciLCJ0b0xvd2VyQ2FzZSIsImlzQm9sZEZvbnRXZWlnaHQiLCJ3ZWlnaHQiLCJub3JtYWxpemVkIiwiaW5jbHVkZXMiLCJyZXNvbHZlS29udmFGb250U3R5bGUiLCJmb250U3R5bGUiLCJmb250V2VpZ2h0Iiwic3R5bGUiLCJpc0l0YWxpYyIsImlzQm9sZCIsImxpbXBpYXJPYmpldG9VbmRlZmluZWQiLCJvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJvYmpMaW1waW8iLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImtleSIsInZhbG9yIiwidW5kZWZpbmVkIiwic2V0R2xvYmFsQ3Vyc29yIiwiY3Vyc29yIiwic3RhZ2VSZWYiLCJkb2N1bWVudCIsImJvZHkiLCJzdGFnZSIsImN1cnJlbnQiLCJjb250YWluZXIiLCJjYW52YXMiLCJxdWVyeVNlbGVjdG9yIiwicGFyZW50RWxlbWVudCIsImNsZWFyR2xvYmFsQ3Vyc29yIiwiaXNJbmxpbmVEZWJ1Z0VuYWJsZWQiLCJfX0lOTElORV9ERUJVRyIsImZvcm1hdElubGluZUxvZ1BheWxvYWQiLCJwYXlsb2FkIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiaW5saW5lRGVidWdMb2ciLCJldmVudCIsImVzc2VudGlhbEV2ZW50cyIsIlNldCIsImhhcyIsInRzIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29uc29sZSIsImxvZyIsIm5leHRJbmxpbmVGcmFtZU1ldGEiLCJmcmFtZSIsInBlcmZNcyIsInByZXYiLCJfX0lOTElORV9GUkFNRV9TRVEiLCJuZXh0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJ0b0ZpeGVkIiwiZ2V0SW5saW5lTGluZVN0YXRzIiwidmFsdWUiLCJyZXBsYWNlIiwidHJhaWxpbmciLCJtYXRjaCIsImxlbmd0aCIsImxpbmVDb3VudCIsInNwbGl0IiwidHJhaWxpbmdOZXdsaW5lcyIsIm5vcm1hbGl6ZUlubGluZURlYnVnQUIiLCJyYXdDb25maWciLCJyYXciLCJ2aXNpYmlsaXR5U291cmNlIiwiZmluaXNoTW9kZSIsIm92ZXJsYXlXaWR0aE1vZGUiLCJDYW52YXNFZGl0b3IiLCJzbHVnIiwiem9vbSIsIm9uSGlzdG9yaWFsQ2hhbmdlIiwib25GdXR1cm9zQ2hhbmdlIiwidXNlcklkIiwib25TdGFydHVwU3RhdHVzQ2hhbmdlIiwib2JqZXRvcyIsInNldE9iamV0b3MiLCJjZWxkYUdhbGVyaWFBY3RpdmEiLCJzZXRDZWxkYUdhbGVyaWFBY3RpdmEiLCJzZWNjaW9uZXMiLCJzZXRTZWNjaW9uZXMiLCJoaXN0b3JpYWwiLCJzZXRIaXN0b3JpYWwiLCJmdXR1cm9zIiwic2V0RnV0dXJvcyIsImVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwiY2FyZ2FkbyIsInNldENhcmdhZG8iLCJkcmFnU3RhcnRQb3MiLCJoYXNEcmFnZ2VkIiwiaXNEcmFnZ2luZyIsInNldElzRHJhZ2dpbmciLCJpbXBlcmF0aXZlT2JqZWN0cyIsImFuaW1hbmRvU2VjY2lvbiIsInNldEFuaW1hbmRvU2VjY2lvbiIsInNlY2Npb25BY3RpdmFJZCIsInNldFNlY2Npb25BY3RpdmFJZCIsInNlbGVjY2lvbkFjdGl2YSIsInNldFNlbGVjY2lvbkFjdGl2YSIsImluaWNpb1NlbGVjY2lvbiIsInNldEluaWNpb1NlbGVjY2lvbiIsImFyZWFTZWxlY2Npb24iLCJzZXRBcmVhU2VsZWNjaW9uIiwiZWxlbWVudG9zUHJlU2VsZWNjaW9uYWRvcyIsInNldEVsZW1lbnRvc1ByZVNlbGVjY2lvbmFkb3MiLCJndWlhTGF5ZXJSZWYiLCJob3ZlcklkIiwic2V0SG92ZXJJZCIsImFsdG9DYW52YXMiLCJyZWR1Y2UiLCJhY2MiLCJzIiwiYWx0dXJhIiwic2VjY2lvbmVzQW5pbWFuZG8iLCJzZXRTZWNjaW9uZXNBbmltYW5kbyIsInJlZnJlc2NhciIsInJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24iLCJlbGVtZW50b0NvcGlhZG8iLCJzZXRFbGVtZW50b0NvcGlhZG8iLCJlbGVtZW50UmVmcyIsImlubGluZUVkaXRQcmV2aWV3UmVmIiwiaWQiLCJjZW50ZXJYIiwiaW5saW5lQ29tbWl0RGVidWdSZWYiLCJwcmV2RWRpdGluZ0lkUmVmIiwiaW5saW5lUmVuZGVyVmFsdWVSZWYiLCJpbmxpbmVPdmVybGF5TW91bnRlZElkIiwic2V0SW5saW5lT3ZlcmxheU1vdW50ZWRJZCIsImNvbnRlbmVkb3JSZWYiLCJlZGl0b3JPdmVybGF5Um9vdFJlZiIsImF1dG9TZWN0aW9uVmlld3BvcnRSZWYiLCJhdXRvU2VjdGlvblNjcm9sbFJhZlJlZiIsInNlY2Npb25BY3RpdmFJZFJlZiIsImlnbm9yZU5leHRVcGRhdGVSZWYiLCJhbmNob1N0YWdlIiwic2V0QW5jaG9TdGFnZSIsIm1vc3RyYXJTZWxlY3RvckZ1ZW50ZSIsInNldE1vc3RyYXJTZWxlY3RvckZ1ZW50ZSIsIm1vc3RyYXJTdWJtZW51Q2FwYSIsInNldE1vc3RyYXJTdWJtZW51Q2FwYSIsImZ1ZW50ZXNEaXNwb25pYmxlcyIsImVzQWRtaW4iLCJsb2FkaW5nQ2xhaW1zIiwiYmFja2dyb3VuZExvYWRCeVNlY3Rpb24iLCJzZXRCYWNrZ3JvdW5kTG9hZEJ5U2VjdGlvbiIsInN0YXJ0dXBTdGF0dXNGaW5hbGl6ZWRSZWYiLCJtb2JpbGVCYWNrZ3JvdW5kRWRpdFNlY3Rpb25JZCIsInNldE1vYmlsZUJhY2tncm91bmRFZGl0U2VjdGlvbklkIiwiZGVsZXRlU2VjdGlvbk1vZGFsIiwic2V0RGVsZXRlU2VjdGlvbk1vZGFsIiwiaXNPcGVuIiwic2VjdGlvbklkIiwiaXNEZWxldGluZ1NlY3Rpb24iLCJzZXRJc0RlbGV0aW5nU2VjdGlvbiIsIm1vYmlsZVNlY3Rpb25BY3Rpb25zT3BlbiIsInNldE1vYmlsZVNlY3Rpb25BY3Rpb25zT3BlbiIsInN1cHBvcnRzUG9pbnRlckV2ZW50cyIsIlBvaW50ZXJFdmVudCIsImlzVGV4dFJlc2l6ZURlYnVnRW5hYmxlZCIsIkJvb2xlYW4iLCJfX0RCR19URVhUX1JFU0laRSIsInRleHRSZXNpemVEZWJ1ZyIsImFyZ3MiLCJjb250cm9sYW5kb0FsdHVyYSIsImluaWNpYXJDb250cm9sQWx0dXJhIiwiZmluYWxpemFyQ29udHJvbEFsdHVyYSIsInRvZ2dsZVBhbnRhbGxhQ29tcGxldGFTZWNjaW9uIiwiaGFuZGxlQ3JlYXJTZWNjaW9uIiwibnVldm9UZXh0b1JlZiIsInNlY2Npb25lc09yZGVuYWRhcyIsInNvcnQiLCJhIiwiYiIsIm9yZGVuIiwiaGFuZGxlQmFja2dyb3VuZEltYWdlU3RhdHVzQ2hhbmdlIiwiaGFzQmFja2dyb3VuZEltYWdlIiwiaW1hZ2VVcmwiLCJpbmNvbWluZ1N0YXR1cyIsInN0YXR1cyIsImJhY2tncm91bmRMb2FkU3VtbWFyeSIsInNlY3Rpb25zV2l0aEJhY2tncm91bmRJbWFnZSIsImZpbHRlciIsInNlY2Npb24iLCJmb25kb1RpcG8iLCJmb25kb0ltYWdlbiIsInRyaW0iLCJsb2FkZWQiLCJmYWlsZWQiLCJwZW5kaW5nIiwidG90YWwiLCJmaXJzdFNlY3Rpb25CYWNrZ3JvdW5kUmVhZHkiLCJmaXJzdFNlY3Rpb24iLCJzdGFydHVwUmVhZHkiLCJkcmFmdExvYWRlZCIsInRvdGFsQmFja2dyb3VuZHMiLCJsb2FkZWRCYWNrZ3JvdW5kcyIsImZhaWxlZEJhY2tncm91bmRzIiwicGVuZGluZ0JhY2tncm91bmRzIiwiY2FuY2VsbGVkIiwicmFmQSIsInJhZkIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInNlY2Npb25QZW5kaWVudGVFbGltaW5hciIsImZpbmQiLCJjYW50aWRhZEVsZW1lbnRvc1NlY2Npb25QZW5kaWVudGUiLCJzZWNjaW9uSWQiLCJlZGl0aW5nIiwic3RhcnRFZGl0IiwidXBkYXRlRWRpdCIsImZpbmlzaEVkaXQiLCJvYnRlbmVyTWV0cmljYXNOb2RvSW5saW5lIiwibm9kZSIsImNsYXNzTmFtZSIsImdldENsYXNzTmFtZSIsIngiLCJ5IiwidGV4dFdpZHRoIiwiZ2V0VGV4dFdpZHRoIiwiY2VpbCIsInJlY3QiLCJnZXRDbGllbnRSZWN0Iiwic2tpcFRyYW5zZm9ybSIsInNraXBTaGFkb3ciLCJza2lwU3Ryb2tlIiwid2lkdGgiLCJoZWlnaHQiLCJjZXJyYXJNZW51c0Zsb3RhbnRlcyIsInNldE1vc3RyYXJQYW5lbFoiLCJzZXRNb3N0cmFyU2VsZWN0b3JUYW1hbm8iLCJvYmpldG9TZWxlY2Npb25hZG8iLCJvIiwibW9zdHJhclNlbGVjdG9yVGFtYW5vIiwidGFtYW5pb3NEaXNwb25pYmxlcyIsImZyb20iLCJfIiwiaSIsImJvdG9uT3BjaW9uZXNSZWYiLCJfcmVmRXZlbnRRdWV1ZWQiLCJyZWdpc3RlclJlZiIsInJlZ2lzdGVyT2JqZWN0IiwiYWRkIiwiZGVsZXRlIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwibG9hZGVkRm9udEZhbWlsaWVzUmVmIiwiaXNNb2JpbGUiLCJpc01vYmlsZVBvcnRyYWl0Iiwic2NhbGUiLCJhbmNob0NvbnRlbmVkb3IiLCJlc2NhbGFBY3RpdmEiLCJlc2NhbGFWaXN1YWwiLCJ3cmFwcGVyQmFzZVdpZHRoIiwiZXNjYWxhRml0TW9iaWxlUG9ydHJhaXQiLCJtb2JpbGVUeXBvZ3JhcGh5VG9vbGJhclZpc2libGUiLCJ0aXBvIiwiZmlndXJhIiwidGV4dG8iLCJtb2JpbGVUZXh0VG9vbGJhclZpc2libGUiLCJtb2JpbGVGb250U3RyaXBWaXNpYmxlIiwibW9iaWxlU2l6ZVN0cmlwVmlzaWJsZSIsIm1vYmlsZUJvdHRvbVR5cG9ncmFwaHlTdHJpcFZpc2libGUiLCJvcHRpb25CdXR0b25TaXplIiwiZGVzaXJlZFJhdGlvIiwiZ2V0U3RhZ2UiLCJiYXRjaERyYXciLCJpbmxpbmVEZWJ1Z0FCIiwiX19JTkxJTkVfQUIiLCJoYW5kbGVJbmxpbmVPdmVybGF5TW91bnRDaGFuZ2UiLCJtb3VudGVkIiwic2FmZUlkIiwicHJldmlvdXMiLCJwcmV2aW91c092ZXJsYXlNb3VudGVkSWQiLCJuZXh0T3ZlcmxheU1vdW50ZWRJZCIsImNhcHR1cmVJbmxpbmVTbmFwc2hvdCIsImV2ZW50TmFtZSIsImV4dHJhIiwiX19JTkxJTkVfU05BUFNIT1QiLCJzbmFwc2hvdEFsbG93bGlzdCIsImZyYW1lTWV0YSIsInNuYXBzaG90SWQiLCJub2RlTWV0cmljcyIsIm9iak1ldHJpY3MiLCJpc0Zpbml0ZSIsInRleHRvTGVuZ3RoIiwiZm9udFNpemUiLCJsaW5lSGVpZ2h0Iiwic3RhZ2VSZWN0IiwiciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImlubGluZVJlY3QiLCJpbmxpbmVTdHlsZSIsImlubGluZUNvbnRlbnRSZWN0IiwiaW5saW5lQ29udGVudE1ldHJpY3MiLCJvdmVybGF5RWwiLCJsZWZ0IiwidG9wIiwibWluV2lkdGgiLCJtYXhXaWR0aCIsImNvbnRlbnRFbCIsImNvbnRlbnRSZWN0Iiwic2Nyb2xsV2lkdGgiLCJjbGllbnRXaWR0aCIsImlzRm9jdXNlZCIsImFjdGl2ZUVsZW1lbnQiLCJ0cmFuc2Zvcm1lclJlY3QiLCJ0cmFuc2Zvcm1lciIsImZpbmRPbmUiLCJ0clJlY3QiLCJub2RlcyIsIm5vZGVzQ291bnQiLCJpbmNsdWRlc1NuYXBzaG90Tm9kZSIsImVkaXRpbmdJZCIsImN1cnJlbnRFZGl0aW5nSWQiLCJfY3VycmVudEVkaXRpbmdJZCIsIm92ZXJsYXlNb3VudGVkSWQiLCJpbmxpbmVBQiIsInNjcm9sbFgiLCJzY3JvbGxZIiwiY3VycmVudElkIiwiY3VycmVudFZhbHVlIiwicHJldlN0YXRzIiwibmV4dFN0YXRzIiwibGluZWJyZWFrQ2hhbmdlZCIsImluY2x1ZGVzRWRpdGluZ05vZGUiLCJvdmVybGF5UmVjdCIsImNyIiwicHJldkxlbmd0aCIsIm5leHRMZW5ndGgiLCJwcmV2TGluZUNvdW50IiwibmV4dExpbmVDb3VudCIsInByZXZUcmFpbGluZ05ld2xpbmVzIiwibmV4dFRyYWlsaW5nTmV3bGluZXMiLCJwcmV2aW91c0xlbmd0aCIsInZhbHVlTGVuZ3RoIiwibm9ybWFsaXplZEFCIiwiZW5hYmxlZCIsImZyYW1lU2VxIiwicHJldmlvdXNJZCIsImZ1ZW50ZXNOZWNlc2FyaWFzIiwiZm9udHMiLCJmb250RmFtaWx5IiwicHJldmlvdXNDdXJyZW50RWRpdGluZ0lkIiwibmV4dEN1cnJlbnRFZGl0aW5nSWQiLCJhY3R1YWxpemFyT2Zmc2V0Rm9uZG8iLCJudWV2b3NPZmZzZXRzIiwiZXNQcmV2aWV3Iiwic2VjY2lvbkFjdHVhbGl6YWRhIiwib2Zmc2V0WCIsImZvbmRvSW1hZ2VuT2Zmc2V0WCIsIm9mZnNldFkiLCJmb25kb0ltYWdlbk9mZnNldFkiLCJhc2lnbmFySW1hZ2VuQUdhbGVyaWEiLCJ1cmwiLCJvYmpJZCIsImluZGV4IiwiZmluZEluZGV4IiwiY29waWEiLCJzdHJ1Y3R1cmVkQ2xvbmUiLCJnIiwiY2VsbHMiLCJtZWRpYVVybCIsImZpdCIsImJnIiwiX3Jlc2l6ZURhdGEiLCJtb3N0cmFyUGFuZWxaIiwiaXNTZWxlY3Rpb25Sb3RhdGluZyIsInNldElzU2VsZWN0aW9uUm90YXRpbmciLCJsb2dPcHRpb25CdXR0b25NZW51RGVidWciLCJfX0RCR19PUFRJT05fQlVUVE9OIiwidG9nZ2xlUGFuZWxPcGNpb25lcyIsInNvdXJjZSIsIm5hdGl2ZUV2ZW50Iiwic2VsZWN0ZWRJZCIsInNlbGVjdGlvbkNvdW50IiwibmF0aXZlRXZlbnRUeXBlIiwidHlwZSIsInBvaW50ZXJUeXBlIiwib3BlbiIsIm1vdmVyRWxlbWVudG8iLCJhY2Npb24iLCJudWV2b3MiLCJlbGVtZW50byIsInNwbGljZSIsInB1c2giLCJ1bnNoaWZ0Iiwib25EZXNoYWNlciIsIm9uUmVoYWNlciIsIm9uRHVwbGljYXIiLCJvbkVsaW1pbmFyIiwib25Db3BpYXIiLCJvblBlZ2FyIiwib25DYW1iaWFyQWxpbmVhY2lvbiIsImNvbnRlbnQiLCJzZXRTY3JvbGxNb2RlIiwidG91Y2hBY3Rpb24iLCJzZXRFZGl0TW9kZSIsIm9uRHJhZ1N0YXJ0Iiwib25EcmFnRW5kIiwic3RvcERyYWdnaW5nIiwiV2Via2l0VXNlclNlbGVjdCIsIldlYmtpdFRvdWNoQ2FsbG91dCIsIm9uIiwib2ZmIiwic2V0RHJhZ0Rpc3RhbmNlRm9ySW5wdXQiLCJpc1RvdWNoTGlrZSIsIm9uUG9pbnRlckRvd24iLCJvblRvdWNoU3RhcnQiLCJvbk1vdXNlRG93biIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9sYXN0U2VjY2lvbkFjdGl2YUlkIiwiRXZlbnQiLCJoYW5kbGVDbGlja0Z1ZXJhIiwiZSIsInRhcmdldCIsImNsb3Nlc3QiLCJwcmVsb2FkUG9wdWxhckZvbnRzIiwiaGFuZGxlRm9udHNMb2FkZWQiLCJhbGl2ZSIsInByZWNhcmdhciIsInBlbmRpZW50ZXMiLCJmb250TmFtZSIsIm1heWJlUHJvbWlzZSIsImxvYWRGb250cyIsInRoZW4iLCJsb2FkIiwiUHJvbWlzZSIsImFsbCIsImYiLCJ3YXJuIiwiYWN0dWFsaXphck9iamV0byIsIm51ZXZvIiwiZnJvbVRyYW5zZm9ybSIsImNsZWFuTnVldm8iLCJwb2ludHMiLCJhY3R1YWxpemFyT2JqZXRvUG9ySWQiLCJjYW1iaW9zIiwibm9ybWFsaXphck1lZGlkYXNHYWxlcmlhIiwiZ2FsZXJpYSIsIndpZHRoQ2FuZGlkYXRlIiwieENhbmRpZGF0ZSIsImNhbnZhc1dpZHRoIiwicm93cyIsIm1heCIsImNvbHMiLCJnYXAiLCJjZWxsUmF0aW8iLCJyYXRpbyIsIm1pbkdyaWRXaWR0aCIsIndpZHRoUGN0IiwibWF4WCIsImZhbGxiYWNrWCIsInJhd1giLCJjZWxsVyIsImNlbGxIIiwiYWN0dWFsaXphckxpbmVhIiwibGluZUlkIiwibnVldmFEYXRhIiwiaXNQcmV2aWV3IiwiY2xlYW5EYXRhIiwicCIsInBhcnNlRmxvYXQiLCJzdHJva2VXaWR0aCIsInBhcnNlSW50IiwiaXNGaW5hbCIsIm9idGVuZXJNZXRyaWNhc1RleHRvIiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJmYWxsYmFja1NpemUiLCJzYWZlRm9udFNpemUiLCJzYWZlTGluZUhlaWdodCIsInNhZmVGYW1pbHkiLCJmb250Rm9yQ2FudmFzIiwidGVzdCIsImZvbnQiLCJyYXdUZXh0Iiwic2FmZVRleHQiLCJsaW5lcyIsIm1heExpbmVXaWR0aCIsImxpbmUiLCJtZWFzdXJlVGV4dCIsIm1lZGlyQW5jaG9UZXh0b0tvbnZhIiwib2JqVGV4dG8iLCJ0ZXh0b09iamV0aXZvIiwiZm9udFNpemVPdmVycmlkZSIsInNhZmVGb250RmFtaWx5IiwiaXNGb250QXZhaWxhYmxlIiwiYmFzZUxpbmVIZWlnaHQiLCJwcm9iZSIsInRleHQiLCJwYWRkaW5nIiwid3JhcCIsImRlc3Ryb3kiLCJtZWRpckFsdG9UZXh0b0tvbnZhIiwiY2FsY3VsYXJYVGV4dG9DZW50cmFkb1BvclRhbWFubyIsIm5leHRGb250U2l6ZSIsInNhZmVOZXh0U2l6ZSIsInByZXZpb3VzTWV0cmljcyIsIm5leHRNZXRyaWNzIiwicHJldmlvdXNXaWR0aEZyb21Lb252YSIsIm5leHRXaWR0aEZyb21Lb252YSIsInByZXZpb3VzV2lkdGgiLCJuZXh0V2lkdGgiLCJjdXJyZW50WCIsImNhbGN1bGFyWFRleHRvRGVzZGVDZW50cm8iLCJzYWZlQ2VudGVyWCIsImNhbGN1bGFyWVRleHRvRGVzZGVDZW50cm8iLCJjZW50ZXJZIiwic2FmZUNlbnRlclkiLCJuZXh0SGVpZ2h0RnJvbUtvbnZhIiwibmV4dEhlaWdodCIsImNhbGN1bGFyUG9zVGV4dG9EZXNkZUNlbnRybyIsInJvdGF0aW9uRGVnIiwic2FmZVJvdGF0aW9uIiwidGhldGEiLCJQSSIsIm1ldHJpY3MiLCJ3aWR0aEZyb21Lb252YSIsImhlaWdodEZyb21Lb252YSIsImhhbGZXIiwiaGFsZkgiLCJjZW50ZXJPZmZzZXRYIiwiY29zIiwic2luIiwiY2VudGVyT2Zmc2V0WSIsImZhbGxiYWNrWSIsImFqdXN0YXJGb250U2l6ZUFBbmNob1Zpc3VhbCIsInByb3Bvc2VkRm9udFNpemUiLCJ0YXJnZXRWaXN1YWxXaWR0aCIsInNhZmVQcm9wb3NlZCIsInNhZmVUYXJnZXRXaWR0aCIsImN1cnJlbnRGb250U2l6ZSIsIm5leHRTaXplIiwibWVhc3VyZWRXaWR0aCIsIml0ZXJhdGlvbiIsImNhbmRpZGF0ZSIsInByZXZTaXplIiwiYWJzIiwiZmluYWxTaXplIiwiY2FsY3VsYXJYVGV4dG9DZW50cmFkbyIsImRlc2NyaWJlVGFyZ2V0IiwiRWxlbWVudCIsInRhZyIsInRhZ05hbWUiLCJjbGFzc2VzIiwiY2xhc3NMaXN0Iiwic2xpY2UiLCJqb2luIiwiaXNJbnNpZGVGbG9hdGluZ1VpIiwiaGFuZGxlUG9pbnRlck91dHNpZGUiLCJpbnNpZGVGbG9hdGluZ1VpIiwiZXZlbnRUeXBlIiwiY2FwdHVyZSIsImFjdHVhbGl6YXJGb25kb1NlY2Npb24iLCJudWV2b0ZvbmRvIiwiZm9uZG8iLCJvbkRlc2VsZWNjaW9uYXIiLCJpc0VkaXRpbmciLCJ0aWVuZVNlbGVjY2lvbiIsImNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbiIsIm51ZXZvQ29sb3IiLCJoaXN0b3JpYWxMZW5ndGgiLCJmdXR1cm9zTGVuZ3RoIiwiZXNTZWNjaW9uUGFudGFsbGFCeUlkIiwiYWx0b01vZG8iLCJhbHRvQ2FudmFzRGluYW1pY28iLCJhYnJpck1vZGFsQm9ycmFyU2VjY2lvbiIsImNlcnJhck1vZGFsQm9ycmFyU2VjY2lvbiIsImNvbmZpcm1hckJvcnJhclNlY2Npb24iLCJvblNlbGVjdFNlY2Npb24iLCJfc2VjY2lvbkFjdGl2YUlkIiwicmVzb2x2ZXJWaWV3cG9ydFNjcm9sbFNlY2Npb25lcyIsInN0YWdlQ29udGFpbmVyIiwibWFpbkVsZW1lbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwib3ZlcmZsb3dZIiwib3ZlcmZsb3ciLCJpc1Njcm9sbGFibGUiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJzaW5jcm9uaXphclNlY2Npb25WaXNpYmxlUG9yU2Nyb2xsIiwidmlld3BvcnQiLCJ2aWV3cG9ydFRvcCIsInZpZXdwb3J0Qm90dG9tIiwiZG9jdW1lbnRFbGVtZW50Iiwidmlld3BvcnRSZWN0IiwiYm90dG9tIiwiYWx0dXJhU3RhZ2VQeCIsImFsdHVyYUNhbnZhcyIsInB4UG9yVW5pZGFkIiwiY2VudHJvVmlld3BvcnQiLCJtZWpvcklkIiwibWVqb3JWaXNpYmxlIiwibWVqb3JSYXRpbyIsIm1lam9yRGlzdGFuY2lhQ2VudHJvIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJhbHR1cmFTZWNjaW9uIiwidmlzaWJsZSIsInJhdGlvVmlzaWJsZSIsImRpc3RhbmNpYUNlbnRybyIsIm1lam9yYVBvclZpc2libGUiLCJlbXBhdGVWaXNpYmxlIiwibWVqb3JhUG9yUmF0aW8iLCJlbXBhdGVSYXRpbyIsIm1lam9yYVBvckNlbnRybyIsInNjcm9sbFRhcmdldCIsInNjaGVkdWxlU3luYyIsImV2ZW50VGFyZ2V0IiwidmlzdWFsVmlld3BvcnQiLCJndWlhTGluZWFzIiwibW9zdHJhckd1aWFzIiwibGltcGlhckd1aWFzIiwiY29uZmlndXJhckRyYWdFbmQiLCJhbmNob0NhbnZhcyIsIm1hcmdlblNlbnNpYmlsaWRhZCIsIm1hZ25ldFJhZGl1cyIsInNlY3Rpb25NYWduZXRSYWRpdXMiLCJzbmFwU3RyZW5ndGgiLCJzZWN0aW9uU25hcFN0cmVuZ3RoIiwic2VjdGlvbkxpbmVUb2xlcmFuY2UiLCJzbmFwVG9FZGdlcyIsInNuYXBUb0NlbnRlcnMiLCJhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzIiwibGF5b3V0Um9vdFJlZiIsImJ1dHRvblNpemUiLCJoYW5kbGVUcmFuc2Zvcm1JbnRlcmFjdGlvblN0YXJ0Iiwicm90YXRpbmciLCJpc1JvdGF0ZSIsImhhbmRsZVRyYW5zZm9ybUludGVyYWN0aW9uRW5kIiwib25EcmFnU3RhcnRHbG9iYWwiLCJvbkRyYWdFbmRHbG9iYWwiLCJfbGluZUludGVyc2VjdGlvbkNhY2hlIiwiX2dydXBvTGlkZXIiLCJyZWNlbnRseUVuZGVkR3JvdXBEcmFnIiwiX3NraXBVbnRpbCIsImhheUxpbmVhcyIsInNvbWUiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJnZXRMYXllciIsImNsZWFyVGltZW91dCIsImxpbmVPYmoiLCJhcmVhIiwicHVudG9zTGltcGlvcyIsIl9lbGVtZW50UmVmcyIsImxpbmVYIiwibGluZVkiLCJzdGFydFgiLCJzdGFydFkiLCJlbmRYIiwiZW5kWSIsInN0YXJ0RGVudHJvIiwiZW5kRGVudHJvIiwiaW50ZXJzZWN0YSIsImxpbmVJbnRlcnNlY3RzUmVjdCIsIngxIiwieTEiLCJ4MiIsInkyIiwicmVjdExlZnQiLCJyZWN0VG9wIiwicmVjdFJpZ2h0IiwicmVjdEJvdHRvbSIsImxpbmVJbnRlcnNlY3RzTGluZSIsIngzIiwieTMiLCJ4NCIsInk0IiwiZGVub20iLCJ0IiwidSIsIm9iamV0b0VuRWRpY2lvbiIsIm5vZGVDbGFzcyIsImJlZm9yZU1ldHJpY3MiLCJlZGl0aW5nVmFsdWUiLCJzaG91bGRLZWVwQ2VudGVyUHJldmlldyIsIl9fZ3JvdXBBbGlnbiIsIl9fYXV0b1dpZHRoIiwiZXhwZWN0ZWRYIiwib2JqWCIsIm9ialkiLCJmb3JjZVVwZGF0ZSIsImFmdGVyTWV0cmljcyIsImFmdGVyWCIsImRlbHRhWCIsImZpbmFsT2JqIiwiZmluYWxOb2RlIiwiZmluYWxOb2RlTWV0cmljcyIsImZpbmFsWCIsImRlbHRhRmluYWxWc0V4cGVjdGVkIiwiX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJfb2JqZXRvc0FjdHVhbGVzIiwiX3NlY2Npb25lc09yZGVuYWRhcyIsIl9hbHRvQ2FudmFzIiwiaWRzIiwiYWN0aXZlU2VjdGlvbklkIiwiZ2FsbGVyeUNlbGwiLCJnYWxlcmlhRXhpc3RlIiwiX2NlbGRhR2FsZXJpYUFjdGl2YSIsImNlbGwiLCJzZXRIb3ZlcklkR2xvYmFsIiwiZXhpc3RzIiwiY2xlYW51cCIsInN0YWdlR2VzdHVyZXMiLCJtb2JpbGVDYW52YXNUb29sYmFyT2Zmc2V0IiwibW9iaWxlU2VjdGlvbkFjdGlvbnNUb3AiLCJzY2FsZWRDYW52YXNIZWlnaHRDb21wZW5zYXRpb24iLCJkaXYiLCJyZWYiLCJtYXJnaW5Ub3AiLCJwb3NpdGlvbiIsIm92ZXJmbG93WCIsIldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJ0cmFuc2l0aW9uIiwiYmFja2dyb3VuZENvbG9yIiwiZGlzcGxheSIsImp1c3RpZnlDb250ZW50IiwidHJhbnNmb3JtIiwidHJhbnNmb3JtT3JpZ2luIiwibWFyZ2luQm90dG9tIiwiZXNQcmltZXJhIiwiZXNVbHRpbWEiLCJlc3RhQW5pbWFuZG8iLCJzZWN0aW9uQnV0dG9uQmFzZSIsInNlY3Rpb25CdXR0b25EaXNhYmxlZCIsInNlY3Rpb25CdXR0b25QcmltYXJ5Iiwic2VjdGlvbkJ1dHRvbk5ldXRyYWwiLCJzZWN0aW9uQnV0dG9uU3VjY2VzcyIsInNlY3Rpb25CdXR0b25EYW5nZXIiLCJhY3Rpb25CdXR0b25zIiwiYnV0dG9uIiwib25DbGljayIsImRpcmVjY2lvbiIsImRpc2FibGVkIiwidGl0bGUiLCJzcGFuIiwib25DaGFuZ2UiLCJjb2xvciIsIm1vZG9TZWNjaW9uIiwiZXNQYW50YWxsYSIsInJpZ2h0IiwiekluZGV4IiwicGVyZmVjdERyYXdFbmFibGVkIiwibGlzdGVuaW5nIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwicHJldmVudERlZmF1bHQiLCJoaXRHcmFwaEVuYWJsZWQiLCJiYWNrZ3JvdW5kIiwiYm94U2hhZG93Iiwib25Ub3VjaE1vdmUiLCJvblRvdWNoRW5kIiwib25Nb3VzZU1vdmUiLCJvbk1vdXNlVXAiLCJmbGF0TWFwIiwiYWx0dXJhUHgiLCJlc0FjdGl2YSIsImVsZW1lbnRvcyIsIm9uU2VsZWN0Iiwib25VcGRhdGVGb25kb09mZnNldCIsIm1vYmlsZUJhY2tncm91bmRFZGl0RW5hYmxlZCIsIm9uQmFja2dyb3VuZEltYWdlU3RhdHVzQ2hhbmdlIiwiZmlsbCIsInN0cm9rZSIsIm9uVGFwIiwiY29udHJvbFkiLCJwZXJtaXRlUmVzaXplQWx0dXJhIiwibmFtZSIsImRhc2giLCJvcGFjaXR5Iiwib25Nb3VzZUVudGVyIiwib25Nb3VzZUxlYXZlIiwiZHJhZ2dhYmxlIiwiY29ybmVyUmFkaXVzIiwic2hhZG93Q29sb3IiLCJzaGFkb3dCbHVyIiwic2hhZG93T2Zmc2V0IiwicmFkaXVzIiwicm91bmQiLCJpc0luRWRpdE1vZGUiLCJvbkhvdmVyIiwiaXNTZWxlY3RlZCIsIm9uUGlja0NlbGwiLCJpbmZvIiwiZXZ0IiwiY2FuY2VsQnViYmxlIiwib25EcmFnTW92ZVBlcnNvbmFsaXphZG8iLCJwb3MiLCJfaXNEcmFnZ2luZyIsIm9uRHJhZ1N0YXJ0UGVyc29uYWxpemFkbyIsImRyYWdJZCIsIm9uRHJhZ0VuZFBlcnNvbmFsaXphZG8iLCJ1cGRhdGVkIiwib2JqT3JpZ2luYWwiLCJmaW5hbGl6b0RyYWciLCJudWV2YVNlY2Npb24iLCJjb29yZGVuYWRhc0FqdXN0YWRhcyIsIm9ialByZXZpZXciLCJ0ZXh0b1ByZXZpZXciLCJwcmV2aWV3T2JqIiwicHJldmlld1giLCJpZHhTZWMiLCJ5TG9jYWwiLCJ5Tm9ybSIsInByZVNlbGVjY2lvbmFkbyIsIm9uU3RhcnRUZXh0RWRpdCIsIm9iamVjdFgiLCJvYmplY3RZIiwiaW5saW5lVmlzaWJpbGl0eU1vZGUiLCJmaW5pc2hJbmxpbmVFZGl0IiwiZXNTaGlmdCIsInNoaWZ0S2V5IiwiaXNEcmFnUHJldmlldyIsInNraXBIaXN0b3JpYWwiLCJpc0JhdGNoVXBkYXRlRmluYWwiLCJkcmFnSW5pY2lhbCIsImRlbHRhWSIsIm9iamV0byIsInBvc0luaWNpYWwiLCJjb29yZGVuYWRhc0ZpbmFsZXMiLCJzZWNjaW9uRmluYWxJZCIsInlSZWxQeCIsImhheURpZmVyZW5jaWFzIiwidmFsb3JBbnRlcmlvciIsInZhbG9yTnVldm8iLCJzZWxlY2Npb25BY3R1YWwiLCJlbGVtZW50SWQiLCJzZWxlY3RlZEVsZW1lbnRzIiwib25UcmFuc2Zvcm1JbnRlcmFjdGlvblN0YXJ0Iiwib25UcmFuc2Zvcm1JbnRlcmFjdGlvbkVuZCIsIm9uVHJhbnNmb3JtIiwibmV3QXR0cnMiLCJvYmpJbmRleCIsInVwZGF0ZWRFbGVtZW50Iiwicm90YXRpb24iLCJnYWxsZXJ5TWV0cmljcyIsInNjYWxlWCIsInNjYWxlWSIsImlzUmVzaXppbmciLCJjbGVhbkF0dHJzIiwiZmluYWxBdHRycyIsInJlcXVlc3RlZEZvbnRTaXplIiwib3JpZ2luYWxGb250U2l6ZSIsInJvdGF0aW9uRmluYWwiLCJwcmV2aW91c1JvdGF0aW9uIiwicm90YXRpb25DaGFuZ2VkIiwiZm9udFNpemVDaGFuZ2VkIiwic2hvdWxkTWF0Y2hWaXN1YWxXaWR0aCIsInRleHRWaXN1YWxXaWR0aCIsInNob3VsZFVzZU5vZGVQb3NlIiwiY2VudGVyZWRQb3NBYnMiLCJ0ZXh0Q2VudGVyWCIsInRleHRDZW50ZXJZIiwiY2VudGVyZWRYIiwiY2VudGVyZWRZQWJzIiwiY2VudGVyZWRZIiwiY2xlYW5Gb250U2l6ZSIsIm9yaWdpbmFsWCIsIm9yaWdpbmFsWSIsImZpbmFsRm9udFNpemUiLCJmaW5hbFkiLCJpZHgiLCJzYWZlIiwiY29tbWl0U25hcHNob3QiLCJub2RlQWZ0ZXJDb21taXQiLCJyZWN0QWZ0ZXJDb21taXQiLCJub2RlWCIsIm5vZGVZIiwibm9kZVNjYWxlWCIsIm5vZGVTY2FsZVkiLCJub2RlRm9udFNpemUiLCJub2RlUmVjdFdpZHRoIiwibm9kZVJlY3RIZWlnaHQiLCJlcnIiLCJtZXNzYWdlIiwiaG92ZXJlZEVsZW1lbnQiLCJlbGVtZW50b1NlbGVjY2lvbmFkbyIsImxpbmVFbGVtZW50Iiwib25VcGRhdGVMaW5lIiwiaXNEcmFnR3J1cGFsQWN0aXZlIiwibGluZWEiLCJlc0xpbmVhU2VjY2lvbiIsInByaW9yaXR5Iiwic2hhZG93RW5hYmxlZCIsInRleHRBbGlnbiIsImFsaWduIiwib25PdmVybGF5TW91bnRDaGFuZ2UiLCJuZXh0VmFsdWUiLCJuZXh0VGV4dCIsIm9uRGVidWdFdmVudCIsIm9uRmluaXNoIiwiZmluaXNoSWQiLCJ0ZXh0b051ZXZvUmF3IiwidGV4dG9OdWV2b1ZhbGlkYWRvIiwibGl2ZU5vZGVBdEZpbmlzaCIsImxpdmVNZXRyaWNzQXRGaW5pc2giLCJyYXdMZW5ndGgiLCJ0cmltbWVkTGVuZ3RoIiwicHJldmlld1JlZiIsImFjdHVhbGl6YWRvIiwicGF0Y2giLCJzaG91bGRLZWVwQ2VudGVyWCIsIm5leHRYIiwicGF0Y2hYIiwib2JqZWN0WEJlZm9yZUNvbW1pdCIsImxpdmVOb2RlWEF0RmluaXNoIiwicHJldmlld0NlbnRlclgiLCJ0ZXh0TGVuZ3RoIiwibG9nRmluaXNoVmlzaWJpbGl0eUNoZWNrIiwicGhhc2UiLCJvdmVybGF5RG9tUHJlc2VudCIsImxpdmVOb2RlIiwicmVhY3RpdmVFZGl0aW5nSWQiLCJnbG9iYWxFZGl0aW5nSWQiLCJub2RlT3BhY2l0eSIsIm5vZGVWaXNpYmxlIiwic3RhZ2VBZnRlckZpbmlzaEVkaXQiLCJzY2FsZVZpc3VhbCIsIndpZHRoTW9kZSIsImRhdGEtb3B0aW9uLWJ1dHRvbiIsImFsaWduSXRlbXMiLCJwb2ludGVyRXZlbnRzIiwiYmFja2Ryb3BGaWx0ZXIiLCJib3JkZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJhcmlhLWxhYmVsIiwib25DZXJyYXIiLCJzZWN0aW9uTmFtZSIsIml0ZW1Db3VudCIsImlzRGVsZXRpbmciLCJvbkNhbmNlbCIsIm9uQ29uZmlybSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/CanvasEditor.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/ElementoCanvas.jsx":
/*!*******************************************!*\
  !*** ./src/components/ElementoCanvas.jsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ElementoCanvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! use-image */ \"use-image\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/models/lineConstants */ \"(pages-dir-node)/./src/models/lineConstants.js\");\n/* harmony import */ var _drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/drag/dragGrupal */ \"(pages-dir-node)/./src/drag/dragGrupal.js\");\n/* harmony import */ var _drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/drag/dragIndividual */ \"(pages-dir-node)/./src/drag/dragIndividual.js\");\n/* harmony import */ var _utils_getTextMetrics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/utils/getTextMetrics */ \"(pages-dir-node)/./src/utils/getTextMetrics.js\");\n// ElementoCanvas.jsx - REEMPLAZAR TODO EL ARCHIVO\n\n\n\n\n\n\n\n\nfunction normalizeFontSize(value, fallback = 24) {\n    const parsed = Number(value);\n    return Number.isFinite(parsed) && parsed > 0 ? parsed : fallback;\n}\nfunction isBoldFontWeight(weight) {\n    const normalized = String(weight || \"normal\").toLowerCase();\n    return normalized === \"bold\" || normalized === \"bolder\" || [\n        \"500\",\n        \"600\",\n        \"700\",\n        \"800\",\n        \"900\"\n    ].includes(normalized);\n}\nfunction resolveKonvaFontStyle(fontStyle, fontWeight) {\n    const style = String(fontStyle || \"normal\").toLowerCase();\n    const isItalic = style.includes(\"italic\") || style.includes(\"oblique\");\n    const isBold = style.includes(\"bold\") || isBoldFontWeight(fontWeight);\n    if (isBold && isItalic) return \"bold italic\";\n    if (isBold) return \"bold\";\n    if (isItalic) return \"italic\";\n    return \"normal\";\n}\nfunction ElementoCanvas({ obj, isSelected, isInEditMode, onSelect, onChange, editingId, registerRef, onHover, preSeleccionado, selectionCount = 0, onDragMovePersonalizado, onDragStartPersonalizado, onDragEndPersonalizado, dragStartPos, hasDragged, onStartTextEdit, editingMode = false, inlineOverlayMountedId = null, inlineVisibilityMode = \"reactive\" }) {\n    const [img] = use_image__WEBPACK_IMPORTED_MODULE_2___default()(obj.src || null, \"anonymous\");\n    const [measuredTextWidth, setMeasuredTextWidth] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const textNodeRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    const baseTextLayoutRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null); // guarda el centro/baseline inicial\n    // 🔥 PREVENIR onChange RECURSIVO PARA AUTOFIX\n    const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleChange]\": (id, newData)=>{\n            if (newData.fromAutoFix || !onChange) return;\n            onChange(id, newData);\n        }\n    }[\"ElementoCanvas.useCallback[handleChange]\"], [\n        onChange\n    ]);\n    const handleRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleRef]\": (node)=>{\n            if (registerRef) {\n                registerRef(obj.id, node || null);\n            // ❌ NO despachar \"element-ref-registrado\" acá\n            // CanvasEditor.registerRef ya lo hace.\n            }\n        }\n    }[\"ElementoCanvas.useCallback[handleRef]\"], [\n        obj.id,\n        registerRef\n    ]);\n    // ✅ Click con estado fresco (evita stale closures del useMemo)\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleClick]\": (e)=>{\n            e.cancelBubble = true;\n            if (!hasDragged.current) {\n                // 🧠 Texto normal\n                if (obj.tipo === \"texto\") {\n                    if (isSelected) {\n                        onStartTextEdit?.(obj.id, obj.texto);\n                    } else {\n                        onSelect(obj.id, obj, e);\n                    }\n                } else if (obj.tipo === \"forma\" && obj.figura === \"rect\") {\n                    if (isSelected) {\n                        onStartTextEdit?.(obj.id, obj.texto || \"\");\n                    } else {\n                        onSelect(obj.id, obj, e);\n                    }\n                } else {\n                    onSelect(obj.id, obj, e);\n                }\n            }\n        }\n    }[\"ElementoCanvas.useCallback[handleClick]\"], [\n        obj,\n        isSelected,\n        onSelect,\n        onStartTextEdit\n    ]);\n    // 🔥 MEMOIZAR PROPIEDADES COMUNES\n    const commonProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)({\n        \"ElementoCanvas.useMemo[commonProps]\": ()=>({\n                x: obj.x ?? 0,\n                y: obj.y ?? 0,\n                rotation: obj.rotation || 0,\n                scaleX: obj.scaleX || 1,\n                scaleY: obj.scaleY || 1,\n                draggable: !editingMode,\n                listening: !isInEditMode,\n                onMouseDown: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        e.cancelBubble = true;\n                        hasDragged.current = false;\n                        e.currentTarget?.draggable(true);\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onMouseUp: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        if (e.currentTarget?.draggable && !hasDragged.current) {\n                            e.currentTarget.draggable(false);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onClick: handleClick,\n                onTap: handleClick,\n                onDragStart: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        onDragStartPersonalizado?.(obj.id, e);\n                        window._dragCount = 0;\n                        window._lastMouse = null;\n                        window._lastElement = null;\n                        hasDragged.current = true;\n                        window._isDragging = true;\n                        // 🔥 Intentar drag grupal\n                        const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.startDragGrupalLider)(e, obj);\n                        if (!fueGrupal) {\n                            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.startDragIndividual)(e, dragStartPos);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onDragMove: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        hasDragged.current = true;\n                        const stage = e.target.getStage();\n                        const mousePos = stage.getPointerPosition();\n                        const elementPos = {\n                            x: e.target.x(),\n                            y: e.target.y()\n                        };\n                        window._lastMouse = mousePos;\n                        window._lastElement = elementPos;\n                        // 🔥 DRAG GRUPAL - SOLO EL LÍDER PROCESA\n                        if (window._grupoLider && obj.id === window._grupoLider) {\n                            (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.previewDragGrupal)(e, obj, onChange);\n                            onDragMovePersonalizado?.({\n                                x: e.target.x(),\n                                y: e.target.y()\n                            }, obj.id);\n                            return;\n                        }\n                        // 🔥 SI ES SEGUIDOR DEL GRUPO, NO PROCESAR\n                        if (window._grupoLider) {\n                            const elementosSeleccionados = window._elementosSeleccionados || [];\n                            if (elementosSeleccionados.includes(obj.id) && obj.id !== window._grupoLider) {\n                                return;\n                            }\n                        }\n                        // 🔄 DRAG INDIVIDUAL - Solo si no hay drag grupal activo\n                        if (!window._grupoLider) {\n                            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.previewDragIndividual)(e, obj, onDragMovePersonalizado);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onDragEnd: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        window._isDragging = false;\n                        const node = e.currentTarget;\n                        // 🔥 Intentar drag grupal\n                        const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.endDragGrupal)(e, obj, onChange, hasDragged);\n                        if (fueGrupal) {\n                            onDragEndPersonalizado?.();\n                            return;\n                        }\n                        // 🔄 DRAG INDIVIDUAL (no cambió)\n                        (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.endDragIndividual)(obj, node, onChange, onDragEndPersonalizado, hasDragged);\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"]\n            })\n    }[\"ElementoCanvas.useMemo[commonProps]\"], [\n        obj,\n        editingMode,\n        isInEditMode,\n        handleClick,\n        onDragMovePersonalizado,\n        onDragStartPersonalizado,\n        onDragEndPersonalizado,\n        dragStartPos,\n        hasDragged,\n        onChange\n    ]);\n    // 🔥 MEMOIZAR HANDLERS HOVER\n    const handleMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleMouseEnter]\": ()=>{\n            if (!onHover || window._isDragging || isInEditMode) return;\n            onHover(obj.id);\n        }\n    }[\"ElementoCanvas.useCallback[handleMouseEnter]\"], [\n        onHover,\n        obj.id,\n        isInEditMode\n    ]);\n    const handleMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleMouseLeave]\": ()=>{\n            if (!onHover || isInEditMode) return;\n            onHover(null);\n        }\n    }[\"ElementoCanvas.useCallback[handleMouseLeave]\"], [\n        onHover,\n        isInEditMode\n    ]);\n    const recalcGroupAlign = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[recalcGroupAlign]\": ()=>{\n            if (obj.tipo !== \"texto\") return;\n            if (!obj.__groupAlign || !obj.__groupId) return;\n            if (true) return;\n            const refs = window._elementRefs || {};\n            const getObj = window.__getObjById || ({\n                \"ElementoCanvas.useCallback[recalcGroupAlign]\": ()=>null\n            })[\"ElementoCanvas.useCallback[recalcGroupAlign]\"];\n            let maxW = 0;\n            let thisW = 0;\n            for (const [id, node] of Object.entries(refs)){\n                const o = getObj(id);\n                if (!o || o.tipo !== \"texto\" || o.__groupId !== obj.__groupId) continue;\n                const w = node?.getTextWidth ? Math.ceil(node.getTextWidth()) : 0;\n                if (id === obj.id) thisW = w;\n                if (w > maxW) maxW = w;\n            }\n            if (!maxW || !thisW) return;\n            const baseX = Number.isFinite(obj.__groupOriginX) ? obj.__groupOriginX : obj.x || 0;\n            let targetX = baseX;\n            if (obj.__groupAlign === \"center\") {\n                targetX = baseX + (maxW - thisW) / 2;\n            } else if (obj.__groupAlign === \"right\") {\n                targetX = baseX + (maxW - thisW);\n            }\n            if (Math.abs((obj.x || 0) - targetX) > 0.5) {\n                onChange(obj.id, {\n                    x: targetX\n                });\n            }\n        }\n    }[\"ElementoCanvas.useCallback[recalcGroupAlign]\"], [\n        obj.id,\n        obj.x,\n        obj.tipo,\n        obj.__groupAlign,\n        obj.__groupId,\n        obj.__groupOriginX,\n        onChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            // Recalcular cuando este texto cambia y tras montar sus vecinos\n            let r1, r2;\n            r1 = requestAnimationFrame({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    r2 = requestAnimationFrame({\n                        \"ElementoCanvas.useEffect\": ()=>{\n                            recalcGroupAlign();\n                        }\n                    }[\"ElementoCanvas.useEffect\"]);\n                }\n            }[\"ElementoCanvas.useEffect\"]);\n            return ({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    if (r1) cancelAnimationFrame(r1);\n                    if (r2) cancelAnimationFrame(r2);\n                }\n            })[\"ElementoCanvas.useEffect\"];\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        recalcGroupAlign,\n        obj.texto,\n        obj.fontFamily,\n        obj.fontSize,\n        obj.fontStyle,\n        obj.fontWeight\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            if (!obj || obj.tipo !== \"texto\") return;\n            if (obj.__groupAlign) return;\n            const isAutoWidth = !obj.width && obj.__autoWidth !== false;\n            if (!isAutoWidth) return;\n            let raf1 = null;\n            let raf2 = null;\n            raf1 = requestAnimationFrame({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    raf2 = requestAnimationFrame({\n                        \"ElementoCanvas.useEffect\": ()=>{\n                            const node = textNodeRef.current;\n                            if (!node || typeof node.getTextWidth !== \"function\") return;\n                            const wReal = Math.ceil(node.getTextWidth() || 0);\n                            if (wReal > 0) setMeasuredTextWidth(wReal);\n                        }\n                    }[\"ElementoCanvas.useEffect\"]);\n                }\n            }[\"ElementoCanvas.useEffect\"]);\n            return ({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    if (raf1) cancelAnimationFrame(raf1);\n                    if (raf2) cancelAnimationFrame(raf2);\n                }\n            })[\"ElementoCanvas.useEffect\"];\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj?.id,\n        obj?.texto,\n        obj?.fontFamily,\n        obj?.fontSize,\n        obj?.fontStyle,\n        obj?.fontWeight,\n        obj?.lineHeight,\n        obj?.width,\n        obj?.__autoWidth,\n        obj?.__groupAlign\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            setMeasuredTextWidth(null);\n            // también conviene resetear el layout base cuando cambia de texto\n            if (obj?.tipo === \"texto\") baseTextLayoutRef.current = null;\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj?.id\n    ]);\n    const groupRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            // Cachear cuando cambie el color\n            if (groupRef.current && obj.tipo === \"icono\" && obj.color && obj.color !== \"#000000\") {\n                groupRef.current.cache();\n                groupRef.current.getLayer()?.batchDraw();\n            }\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj.color,\n        obj.id\n    ]);\n    // Convierte \"minX minY width height\" -> números\n    function parseViewBox(vb) {\n        if (!vb || typeof vb !== \"string\") return null;\n        const parts = vb.trim().split(/\\s+/).map(Number);\n        if (parts.length !== 4 || parts.some((n)=>Number.isNaN(n))) return null;\n        const [minX, minY, vbWidth, vbHeight] = parts;\n        return {\n            minX,\n            minY,\n            vbWidth,\n            vbHeight\n        };\n    }\n    if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n        let linePoints = obj.points;\n        let pointsFixed = false;\n        if (!linePoints || !Array.isArray(linePoints) || linePoints.length < 4) {\n            linePoints = [\n                0,\n                0,\n                _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.DEFAULT_LENGTH,\n                0\n            ]; // Usar constante\n            pointsFixed = true;\n        } else {\n            const puntosValidados = [];\n            for(let i = 0; i < 4; i++){\n                const punto = parseFloat(linePoints[i]);\n                puntosValidados.push(isNaN(punto) ? 0 : punto);\n            }\n            if (JSON.stringify(puntosValidados) !== JSON.stringify(linePoints.slice(0, 4))) {\n                linePoints = puntosValidados;\n                pointsFixed = true;\n            } else {\n                linePoints = linePoints.slice(0, 4);\n            }\n        }\n        if (pointsFixed && handleChange) {\n            setTimeout(()=>{\n                handleChange(obj.id, {\n                    points: linePoints,\n                    fromAutoFix: true\n                });\n            }, 0);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Line, {\n            ...commonProps,\n            ref: handleRef,\n            points: linePoints,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            stroke: obj.color || _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.DEFAULT_COLOR,\n            strokeWidth: obj.strokeWidth || _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.STROKE_WIDTH,\n            tension: 0,\n            lineCap: \"round\",\n            lineJoin: \"round\",\n            perfectDrawEnabled: false,\n            hitStrokeWidth: Math.max(_models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.HIT_STROKE_WIDTH, obj.strokeWidth || 2),\n            shadowForStrokeEnabled: false,\n            opacity: isSelected ? 1 : 0.95,\n            shadowColor: isSelected ? \"rgba(119, 61, 190, 0.3)\" : \"transparent\",\n            shadowBlur: isSelected ? 8 : 0,\n            shadowOffset: {\n                x: 0,\n                y: 2\n            }\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 399,\n            columnNumber: 7\n        }, this);\n    }\n    if (obj.tipo === \"texto\") {\n        const visibilityMode = inlineVisibilityMode === \"window\" ? \"window\" : \"reactive\";\n        const isEditingByWindow = window._currentEditingId === obj.id;\n        const isEditingByReactive = editingId === obj.id;\n        const overlayDomPresentLoose = (()=>{\n            if (typeof document === \"undefined\") return false;\n            const safeId = String(obj.id).replace(/\"/g, '\\\\\"');\n            return Boolean(document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`));\n        })();\n        const overlayDomPresent = inlineOverlayMountedId === obj.id && overlayDomPresentLoose;\n        const isEditingByOverlay = overlayDomPresent;\n        const isEditing = visibilityMode === \"reactive\" ? isEditingByReactive || isEditingByOverlay : isEditingByWindow || isEditingByReactive || isEditingByOverlay;\n        const fontFamily = obj.fontFamily || \"sans-serif\";\n        const align = (obj.align || \"left\").toLowerCase();\n        const fillColor = obj.colorTexto ?? obj.fill ?? obj.color ?? \"#000\";\n        const baseLineHeight = typeof obj.lineHeight === \"number\" && obj.lineHeight > 0 ? obj.lineHeight : 1.2;\n        const lineHeight = baseLineHeight * 0.92;\n        // ✅ Evita bbox sobrado a la derecha por espacios/tabs invisibles al final de línea\n        const rawText = String(obj.texto ?? \"\");\n        const safeText = rawText.replace(/[ \\t]+$/gm, \"\");\n        // ✅ VALIDACIÓN: Asegurar valores numéricos válidos\n        const validX = typeof obj.x === \"number\" && !isNaN(obj.x) ? obj.x : 0;\n        const validY = typeof obj.y === \"number\" && !isNaN(obj.y) ? obj.y : 0;\n        const validFontSize = normalizeFontSize(obj.fontSize, 24);\n        const textDecoration = typeof obj.textDecoration === \"string\" && obj.textDecoration.trim().length > 0 ? obj.textDecoration : \"none\";\n        // 🔹 PASO 1: Calcular dimensiones del texto PRIMERO\n        const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n        const style = obj.fontStyle || \"normal\";\n        const weight = obj.fontWeight || \"normal\";\n        const konvaFontStyle = resolveKonvaFontStyle(style, weight);\n        // ✅ si la fuente tiene espacios, envolverla en comillas para que canvas no caiga a fallback\n        const fontForCanvas = fontFamily.includes(\",\") ? fontFamily : /\\s/.test(fontFamily) ? `\"${fontFamily}\"` : fontFamily;\n        // ✅ orden correcto: style -> weight -> size -> family\n        ctx.font = `${style} ${weight} ${validFontSize}px ${fontForCanvas}`;\n        const lines = safeText.split(/\\r?\\n/);\n        const maxLineWidth = Math.max(...lines.map((line)=>ctx.measureText(line).width), 20);\n        const numLines = lines.length;\n        const textWidth = Math.ceil(maxLineWidth);\n        const textHeight = validFontSize * lineHeight * numLines;\n        // 🔹 PASO 2: Calcular posición solo una vez y congelar el centro\n        let positionRaw = (0,_utils_getTextMetrics__WEBPACK_IMPORTED_MODULE_7__.getCenteredTextPosition)({\n            rectY: validY,\n            rectHeight: textHeight,\n            fontSize: validFontSize,\n            fontFamily,\n            fontWeight: obj.fontWeight || \"normal\",\n            fontStyle: obj.fontStyle || \"normal\"\n        });\n        // Inicializar layout base solo la PRIMERA vez\n        if (!baseTextLayoutRef.current) {\n            baseTextLayoutRef.current = {\n                // centro vertical \"ideal\" que queremos conservar\n                rectCenter: positionRaw.rectCenter,\n                // offset desde el centro al baseline (depende solo de la fuente/tamaño)\n                baselineToCenter: positionRaw.baseline - positionRaw.rectCenter,\n                ascent: positionRaw.ascent,\n                descent: positionRaw.descent\n            };\n        }\n        const base = baseTextLayoutRef.current;\n        const rectCenterFixed = base.rectCenter;\n        const baselineY = rectCenterFixed + base.baselineToCenter;\n        const textTopFixed = baselineY - base.ascent;\n        const position = {\n            baseline: baselineY,\n            textTop: textTopFixed,\n            ascent: base.ascent,\n            descent: base.descent,\n            rectCenter: rectCenterFixed\n        };\n        // 🔍 Debug: información completa de posición y centrado\n        // ⚠️ Warning si hay valores inválidos\n        if (obj.x !== validX || obj.y !== validY || obj.fontSize !== validFontSize) {\n            console.warn(\"⚠️ Objeto de texto tiene valores inválidos:\", {\n                id: obj.id,\n                x: obj.x,\n                y: obj.y,\n                fontSize: obj.fontSize\n            });\n        }\n        const ANCHO_CANVAS = 800;\n        const availableWidth = Math.max(1, ANCHO_CANVAS - validX);\n        // ancho real del texto (máxima línea, según tu cálculo actual)\n        const realTextWidth = Math.max(1, textWidth);\n        // ✅ Si entra, NO usamos width (bounds ajustado)\n        // ✅ Si no entra, usamos width=available y wrap por caracteres para cortar en el borde\n        const shouldWrapToCanvasEdge = realTextWidth > availableWidth;\n        const wrapToUse = shouldWrapToCanvasEdge ? \"char\" : \"none\";\n        const widthToUse = shouldWrapToCanvasEdge ? availableWidth : undefined;\n        const inlineCaretOnlyMode = true;\n        const appliedOpacity = isEditing && !inlineCaretOnlyMode ? 0 : 1;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                ...commonProps,\n                ref: (node)=>{\n                    textNodeRef.current = node;\n                    handleRef(node); // registra + dispara \"element-ref-registrado\"\n                },\n                onMouseEnter: handleMouseEnter,\n                onMouseLeave: handleMouseLeave,\n                text: safeText,\n                x: validX,\n                y: obj.y,\n                wrap: wrapToUse,\n                width: widthToUse,\n                align: align,\n                fontSize: validFontSize,\n                fontFamily: fontFamily,\n                fontWeight: obj.fontWeight || \"normal\",\n                fontStyle: konvaFontStyle,\n                textDecoration: textDecoration,\n                lineHeight: lineHeight,\n                fill: fillColor,\n                opacity: appliedOpacity,\n                verticalAlign: \"top\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                lineNumber: 547,\n                columnNumber: 9\n            }, this)\n        }, void 0, false);\n    }\n    if (obj.tipo === \"rsvp-boton\") {\n        const fontFamily = obj.fontFamily || \"sans-serif\";\n        const width = obj.ancho || 200;\n        const height = obj.alto || 50;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    ...commonProps,\n                    width: width,\n                    height: height,\n                    cornerRadius: 8,\n                    fill: obj.color || \"#773dbe\",\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 2 : 0,\n                    onClick: (e)=>{\n                        e.cancelBubble = true;\n                        onSelect?.(obj.id, obj, e);\n                    },\n                    onDragMove: (e)=>{\n                        const nuevaPos = e.target.position();\n                        const textoNode = window._elementRefs?.[`${obj.id}-text`];\n                        if (textoNode) {\n                            textoNode.x(nuevaPos.x);\n                            textoNode.y(nuevaPos.y);\n                            textoNode.getLayer()?.batchDraw();\n                        }\n                    }\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 586,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                    ref: (node)=>{\n                        if (registerRef) {\n                            registerRef(`${obj.id}-text`, node || null); // si querés manipular el texto aparte\n                        }\n                    },\n                    x: obj.x,\n                    y: obj.y,\n                    width: width,\n                    height: height,\n                    text: obj.texto || \"Confirmar asistencia\",\n                    fontSize: normalizeFontSize(obj.fontSize, 18),\n                    fontFamily: fontFamily,\n                    fontStyle: resolveKonvaFontStyle(obj.fontStyle || \"normal\", obj.fontWeight || \"bold\"),\n                    fontWeight: obj.fontWeight || \"bold\",\n                    textDecoration: obj.textDecoration || \"none\",\n                    fill: obj.colorTexto || \"#ffffff\",\n                    align: obj.align || \"center\",\n                    verticalAlign: \"middle\",\n                    listening: false,\n                    opacity: isInEditMode ? 0 : 1\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 610,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    if (obj.tipo === \"imagen\" && img) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Image, {\n            ...commonProps,\n            ref: handleRef,\n            id: obj.id,\n            image: img,\n            crossOrigin: \"anonymous\",\n            width: obj.width || img.width,\n            height: obj.height || img.height,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n            strokeWidth: isSelected || preSeleccionado ? 1 : 0\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 641,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- ICONO SVG (tipo:\"icono\", formato:\"svg\") — CON HITBOX FUNCIONAL ---------------- */ if (obj.tipo === \"icono\" && obj.formato === \"svg\") {\n        const color = obj.color || \"#000000\";\n        const paths = Array.isArray(obj.paths) ? obj.paths : [];\n        const W = Number(obj.width) || 128;\n        const H = Number(obj.height) || 128;\n        const vb = parseViewBox(obj.viewBox) || {\n            minX: 0,\n            minY: 0,\n            vbWidth: 100,\n            vbHeight: 100\n        };\n        const showIconSelectionFrame = (isSelected || preSeleccionado) && selectionCount <= 1;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n            ...commonProps,\n            ref: handleRef,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            width: W,\n            height: H,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    fill: \"rgba(0,0,0,0.001)\" // Casi transparente pero clickeable\n                    ,\n                    stroke: \"transparent\" // Sin borde\n                    ,\n                    listening: true,\n                    draggable: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 677,\n                    columnNumber: 9\n                }, this),\n                paths.map((p, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Path, {\n                        data: p.d,\n                        fill: color,\n                        scaleX: W / vb.vbWidth,\n                        scaleY: H / vb.vbHeight,\n                        x: -vb.minX * (W / vb.vbWidth),\n                        y: -vb.minY * (H / vb.vbHeight),\n                        listening: false,\n                        perfectDrawEnabled: false\n                    }, i, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                        lineNumber: 690,\n                        columnNumber: 11\n                    }, this)),\n                showIconSelectionFrame && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    stroke: \"#773dbe\",\n                    strokeWidth: 1,\n                    fill: \"transparent\",\n                    listening: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 705,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 668,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- ICONO RASTER (PNG/JPG/WEBP) – sin recolor ---------------- */ if (obj.tipo === \"icono\" && (obj.formato === \"png\" || obj.formato === \"jpg\" || obj.formato === \"webp\")) {\n        const [img] = use_image__WEBPACK_IMPORTED_MODULE_2___default()(obj.url, \"anonymous\");\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Image, {\n            ...commonProps,\n            ref: handleRef,\n            image: img,\n            crossOrigin: \"anonymous\",\n            width: obj.width || (img?.width ?? 120),\n            height: obj.height || (img?.height ?? 120),\n            listening: true,\n            // UX cursor (sin romper tu hover)\n            onMouseEnter: (e)=>{\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"grab\";\n                handleMouseEnter?.(e);\n            },\n            onMouseLeave: (e)=>{\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"default\";\n                handleMouseLeave?.(e);\n            },\n            // ✅ CLAVE: NO pisar el onClick/onTap ni el onDragEnd \"real\" del sistema\n            // Si querés mantener un comportamiento extra en click, hacelo sin cambiar la firma:\n            onClick: (e)=>{\n                // delega al commonProps.onClick (selección consistente)\n                commonProps.onClick?.(e);\n            },\n            onTap: (e)=>{\n                // en Konva, tap suele mapear a click; si querés, delegalo igual\n                commonProps.onClick?.(e);\n            },\n            // ✅ CLAVE: delegar a commonProps.onDragEnd para que:\n            // - se limpien guías (onDragEndPersonalizado)\n            // - se haga finalizoDrag + ABS→REL\n            onDragEnd: (e)=>{\n                commonProps.onDragEnd?.(e);\n                // limpieza de cursor (extra)\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"default\";\n            }\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 726,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- LEGACY: ICONO SVG (tipo: \"icono-svg\" con obj.d) ---------------- */ if (obj.tipo === \"icono-svg\") {\n        const W = Number(obj.width) || 128;\n        const H = Number(obj.height) || 128;\n        const showLegacyIconSelectionFrame = (isSelected || preSeleccionado) && selectionCount <= 1;\n        const vb = parseViewBox(obj.viewBox) || {\n            minX: 0,\n            minY: 0,\n            vbWidth: 100,\n            vbHeight: 100\n        };\n        const scaleX = vb.vbWidth ? W / vb.vbWidth : 1;\n        const scaleY = vb.vbHeight ? H / vb.vbHeight : 1;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n            ...commonProps,\n            ref: handleRef,\n            draggable: true,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            onClick: (e)=>commonProps.onClick?.(e),\n            onTap: (e)=>commonProps.onTap?.(e),\n            onDragEnd: (e)=>{\n                commonProps.onDragEnd?.(e);\n            },\n            onTransformEnd: (e)=>{\n                const node = e.target;\n                const scaleXNode = typeof node.scaleX === \"function\" ? node.scaleX() : node.scaleX ?? 1;\n                const scaleYNode = typeof node.scaleY === \"function\" ? node.scaleY() : node.scaleY ?? 1;\n                const patch = {\n                    x: node.x(),\n                    y: node.y(),\n                    rotation: node.rotation() || 0,\n                    width: Math.max(1, W * Math.abs(scaleXNode || 1)),\n                    height: Math.max(1, H * Math.abs(scaleYNode || 1)),\n                    scaleX: 1,\n                    scaleY: 1,\n                    isFinal: true\n                };\n                onChange?.(obj.id, patch);\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    fill: \"rgba(0,0,0,0.001)\",\n                    stroke: showLegacyIconSelectionFrame ? \"#773dbe\" : undefined,\n                    strokeWidth: showLegacyIconSelectionFrame ? 1 : 0,\n                    listening: true\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 816,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n                    x: 0,\n                    y: 0,\n                    scaleX: scaleX,\n                    scaleY: scaleY,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n                        x: -vb.minX,\n                        y: -vb.minY,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Path, {\n                            data: obj.d,\n                            fill: obj.color || \"#000\",\n                            stroke: obj.color || \"#000\",\n                            strokeWidth: 1,\n                            perfectDrawEnabled: true,\n                            listening: false\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 828,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                        lineNumber: 827,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 826,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 786,\n            columnNumber: 7\n        }, this);\n    }\n    if (obj.tipo === \"forma\") {\n        const propsForma = {\n            ...commonProps,\n            fill: obj.color || \"#000000\"\n        };\n        switch(obj.figura){\n            case \"rect\":\n                // Opcional: normalizamos width/height para usar en ambos nodos\n                const width = Math.abs(obj.width || 100);\n                const height = Math.abs(obj.height || 100);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                            ...propsForma,\n                            ref: handleRef,\n                            onMouseEnter: handleMouseEnter,\n                            onMouseLeave: handleMouseLeave,\n                            width: width,\n                            height: height,\n                            cornerRadius: obj.cornerRadius || 0,\n                            stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                            strokeWidth: isSelected || preSeleccionado ? 1 : 0,\n                            // 🖱️ Doble click para entrar en edición inline\n                            onDblClick: (e)=>{\n                                e.cancelBubble = true;\n                                if (onStartTextEdit) {\n                                    onStartTextEdit(obj.id, obj.texto || \"\");\n                                }\n                            },\n                            onDblTap: (e)=>{\n                                e.cancelBubble = true;\n                                if (onStartTextEdit) {\n                                    onStartTextEdit(obj.id, obj.texto || \"\");\n                                }\n                            },\n                            // 🚚 Sincronizar el texto mientras se arrastra la forma\n                            onDragMove: (e)=>{\n                                // Mantener cualquier lógica de drag original que venga de commonProps\n                                if (typeof propsForma.onDragMove === \"function\") {\n                                    propsForma.onDragMove(e);\n                                }\n                                const { x, y } = e.target.position();\n                                const stage = e.target.getStage();\n                                const textoNode = stage?.findOne(`#${obj.id}-text`);\n                                if (textoNode) {\n                                    textoNode.x(x);\n                                    textoNode.y(y);\n                                    textoNode.getLayer()?.batchDraw();\n                                }\n                            },\n                            onDragEnd: (e)=>{\n                                // Mantener lógica original de dragEnd (guardar posición, drag grupal, etc.)\n                                if (typeof propsForma.onDragEnd === \"function\") {\n                                    propsForma.onDragEnd(e);\n                                }\n                                const { x, y } = e.target.position();\n                                const stage = e.target.getStage();\n                                const textoNode = stage?.findOne(`#${obj.id}-text`);\n                                if (textoNode) {\n                                    textoNode.x(x);\n                                    textoNode.y(y);\n                                    textoNode.getLayer()?.batchDraw();\n                                }\n                            }\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 861,\n                            columnNumber: 13\n                        }, this),\n                        obj.texto && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                            id: `${obj.id}-text`,\n                            ref: (node)=>{\n                                if (registerRef) {\n                                    registerRef(`${obj.id}-text`, node || null); // seguís usando tu sistema de refs\n                                }\n                            },\n                            x: obj.x,\n                            y: obj.y,\n                            width: width,\n                            height: height,\n                            text: obj.texto,\n                            fontSize: normalizeFontSize(obj.fontSize, 24),\n                            fontFamily: obj.fontFamily || \"sans-serif\",\n                            fontWeight: obj.fontWeight || \"normal\",\n                            fontStyle: resolveKonvaFontStyle(obj.fontStyle || \"normal\", obj.fontWeight || \"normal\"),\n                            textDecoration: obj.textDecoration || \"none\",\n                            fill: obj.colorTexto || \"#000000\",\n                            align: obj.align || \"center\",\n                            verticalAlign: \"middle\",\n                            listening: false,\n                            opacity: isInEditMode ? 0 : 1\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 921,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true);\n            case \"circle\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Circle, {\n                    ...propsForma,\n                    ref: handleRef,\n                    radius: obj.radius || 50,\n                    onMouseEnter: handleMouseEnter,\n                    onMouseLeave: handleMouseLeave,\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 951,\n                    columnNumber: 11\n                }, this);\n            case \"triangle\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.RegularPolygon, {\n                    ...propsForma,\n                    ref: handleRef,\n                    sides: 3,\n                    radius: obj.radius || 60,\n                    onMouseEnter: handleMouseEnter,\n                    onMouseLeave: handleMouseLeave,\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 964,\n                    columnNumber: 11\n                }, this);\n            default:\n                return null;\n        }\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0VsZW1lbnRvQ2FudmFzLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsa0RBQWtEOztBQUN1RDtBQUN4RTtBQUN5QztBQUNsQjtBQUNtQztBQUNXO0FBQ3JDO0FBRWpFLFNBQVN1QixrQkFBa0JDLEtBQUssRUFBRUMsV0FBVyxFQUFFO0lBQzdDLE1BQU1DLFNBQVNDLE9BQU9IO0lBQ3RCLE9BQU9HLE9BQU9DLFFBQVEsQ0FBQ0YsV0FBV0EsU0FBUyxJQUFJQSxTQUFTRDtBQUMxRDtBQUVBLFNBQVNJLGlCQUFpQkMsTUFBTTtJQUM5QixNQUFNQyxhQUFhQyxPQUFPRixVQUFVLFVBQVVHLFdBQVc7SUFDekQsT0FDRUYsZUFBZSxVQUNmQSxlQUFlLFlBQ2Y7UUFBQztRQUFPO1FBQU87UUFBTztRQUFPO0tBQU0sQ0FBQ0csUUFBUSxDQUFDSDtBQUVqRDtBQUVBLFNBQVNJLHNCQUFzQkMsU0FBUyxFQUFFQyxVQUFVO0lBQ2xELE1BQU1DLFFBQVFOLE9BQU9JLGFBQWEsVUFBVUgsV0FBVztJQUN2RCxNQUFNTSxXQUFXRCxNQUFNSixRQUFRLENBQUMsYUFBYUksTUFBTUosUUFBUSxDQUFDO0lBQzVELE1BQU1NLFNBQVNGLE1BQU1KLFFBQVEsQ0FBQyxXQUFXTCxpQkFBaUJRO0lBRTFELElBQUlHLFVBQVVELFVBQVUsT0FBTztJQUMvQixJQUFJQyxRQUFRLE9BQU87SUFDbkIsSUFBSUQsVUFBVSxPQUFPO0lBQ3JCLE9BQU87QUFDVDtBQU1lLFNBQVNFLGVBQWUsRUFDckNDLEdBQUcsRUFDSEMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLFFBQVEsRUFDUkMsUUFBUSxFQUNSQyxTQUFTLEVBQ1RDLFdBQVcsRUFDWEMsT0FBTyxFQUNQQyxlQUFlLEVBQ2ZDLGlCQUFpQixDQUFDLEVBQ2xCQyx1QkFBdUIsRUFDdkJDLHdCQUF3QixFQUN4QkMsc0JBQXNCLEVBQ3RCQyxZQUFZLEVBQ1pDLFVBQVUsRUFD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LGtCQUFrQixZQUFZaU47b0JBQ3BEMUUsYUFBYTlJLGNBQWNPLGtCQUFrQixJQUFJOzs7Ozs7WUFJdkQsS0FBSztnQkFDSCxxQkFDRSw4REFBQzVDLHVEQUFjQTtvQkFDWixHQUFHNlIsVUFBVTtvQkFDZC9HLEtBQUs3RztvQkFDTGlPLE9BQU87b0JBQ1BELFFBQVE3UCxJQUFJNlAsTUFBTSxJQUFJO29CQUN0QmxILGNBQWN0RTtvQkFDZHVFLGNBQWN0RTtvQkFDZHVFLFFBQVE1SSxjQUFjTyxrQkFBa0IsWUFBWWlOO29CQUNwRDFFLGFBQWE5SSxjQUFjTyxrQkFBa0IsSUFBSTs7Ozs7O1lBS3ZEO2dCQUNFLE9BQU87UUFDWDtJQUNGO0lBRUEsT0FBTztBQUNUIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXEVsZW1lbnRvQ2FudmFzLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBFbGVtZW50b0NhbnZhcy5qc3ggLSBSRUVNUExBWkFSIFRPRE8gRUwgQVJDSElWT1xyXG5pbXBvcnQgeyBUZXh0LCBJbWFnZSBhcyBLb252YUltYWdlLCBSZWN0LCBDaXJjbGUsIExpbmUsIFJlZ3VsYXJQb2x5Z29uLCBQYXRoLCBHcm91cCB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xyXG5pbXBvcnQgdXNlSW1hZ2UgZnJvbSBcInVzZS1pbWFnZVwiO1xyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VNZW1vLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IExJTkVfQ09OU1RBTlRTIH0gZnJvbSAnQC9tb2RlbHMvbGluZUNvbnN0YW50cyc7XHJcbmltcG9ydCB7IHByZXZpZXdEcmFnR3J1cGFsLCBzdGFydERyYWdHcnVwYWxMaWRlciwgZW5kRHJhZ0dydXBhbCB9IGZyb20gXCJAL2RyYWcvZHJhZ0dydXBhbFwiO1xyXG5pbXBvcnQgeyBzdGFydERyYWdJbmRpdmlkdWFsLCBwcmV2aWV3RHJhZ0luZGl2aWR1YWwsIGVuZERyYWdJbmRpdmlkdWFsIH0gZnJvbSBcIkAvZHJhZy9kcmFnSW5kaXZpZHVhbFwiO1xyXG5pbXBvcnQgeyBnZXRDZW50ZXJlZFRleHRQb3NpdGlvbiB9IGZyb20gXCJAL3V0aWxzL2dldFRleHRNZXRyaWNzXCI7XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVGb250U2l6ZSh2YWx1ZSwgZmFsbGJhY2sgPSAyNCkge1xyXG4gIGNvbnN0IHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XHJcbiAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShwYXJzZWQpICYmIHBhcnNlZCA+IDAgPyBwYXJzZWQgOiBmYWxsYmFjaztcclxufVxyXG5cclxuZnVuY3Rpb24gaXNCb2xkRm9udFdlaWdodCh3ZWlnaHQpIHtcclxuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHdlaWdodCB8fCBcIm5vcm1hbFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gIHJldHVybiAoXHJcbiAgICBub3JtYWxpemVkID09PSBcImJvbGRcIiB8fFxyXG4gICAgbm9ybWFsaXplZCA9PT0gXCJib2xkZXJcIiB8fFxyXG4gICAgW1wiNTAwXCIsIFwiNjAwXCIsIFwiNzAwXCIsIFwiODAwXCIsIFwiOTAwXCJdLmluY2x1ZGVzKG5vcm1hbGl6ZWQpXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzb2x2ZUtvbnZhRm9udFN0eWxlKGZvbnRTdHlsZSwgZm9udFdlaWdodCkge1xyXG4gIGNvbnN0IHN0eWxlID0gU3RyaW5nKGZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gIGNvbnN0IGlzSXRhbGljID0gc3R5bGUuaW5jbHVkZXMoXCJpdGFsaWNcIikgfHwgc3R5bGUuaW5jbHVkZXMoXCJvYmxpcXVlXCIpO1xyXG4gIGNvbnN0IGlzQm9sZCA9IHN0eWxlLmluY2x1ZGVzKFwiYm9sZFwiKSB8fCBpc0JvbGRGb250V2VpZ2h0KGZvbnRXZWlnaHQpO1xyXG5cclxuICBpZiAoaXNCb2xkICYmIGlzSXRhbGljKSByZXR1cm4gXCJib2xkIGl0YWxpY1wiO1xyXG4gIGlmIChpc0JvbGQpIHJldHVybiBcImJvbGRcIjtcclxuICBpZiAoaXNJdGFsaWMpIHJldHVybiBcIml0YWxpY1wiO1xyXG4gIHJldHVybiBcIm5vcm1hbFwiO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRWxlbWVudG9DYW52YXMoe1xyXG4gIG9iaixcclxuICBpc1NlbGVjdGVkLFxyXG4gIGlzSW5FZGl0TW9kZSxcclxuICBvblNlbGVjdCxcclxuICBvbkNoYW5nZSxcclxuICBlZGl0aW5nSWQsXHJcbiAgcmVnaXN0ZXJSZWYsXHJcbiAgb25Ib3ZlcixcbiAgcHJlU2VsZWNjaW9uYWRvLFxuICBzZWxlY3Rpb25Db3VudCA9IDAsXG4gIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvLFxuICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8sXG4gIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8sXG4gIGRyYWdTdGFydFBvcyxcclxuICBoYXNEcmFnZ2VkLFxyXG4gIG9uU3RhcnRUZXh0RWRpdCxcclxuICBlZGl0aW5nTW9kZSA9IGZhbHNlLFxyXG4gIGlubGluZU92ZXJsYXlNb3VudGVkSWQgPSBudWxsLFxyXG4gIGlubGluZVZpc2liaWxpdHlNb2RlID0gXCJyZWFjdGl2ZVwiXHJcbn0pIHtcclxuICBjb25zdCBbaW1nXSA9IHVzZUltYWdlKG9iai5zcmMgfHwgbnVsbCwgXCJhbm9ueW1vdXNcIik7XHJcbiAgY29uc3QgW21lYXN1cmVkVGV4dFdpZHRoLCBzZXRNZWFzdXJlZFRleHRXaWR0aF0gPSB1c2VTdGF0ZShudWxsKTtcclxuXHJcbiAgY29uc3QgdGV4dE5vZGVSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgYmFzZVRleHRMYXlvdXRSZWYgPSB1c2VSZWYobnVsbCk7IC8vIGd1YXJkYSBlbCBjZW50cm8vYmFzZWxpbmUgaW5pY2lhbFxyXG5cclxuXHJcbiAgLy8g8J+UpSBQUkVWRU5JUiBvbkNoYW5nZSBSRUNVUlNJVk8gUEFSQSBBVVRPRklYXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gdXNlQ2FsbGJhY2soKGlkLCBuZXdEYXRhKSA9PiB7XHJcbiAgICBpZiAobmV3RGF0YS5mcm9tQXV0b0ZpeCB8fCAhb25DaGFuZ2UpIHJldHVybjtcclxuICAgIG9uQ2hhbmdlKGlkLCBuZXdEYXRhKTtcclxuICB9LCBbb25DaGFuZ2VdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmVmID0gdXNlQ2FsbGJhY2soKG5vZGUpID0+IHtcclxuICAgIGlmIChyZWdpc3RlclJlZikge1xyXG4gICAgICByZWdpc3RlclJlZihvYmouaWQsIG5vZGUgfHwgbnVsbCk7XHJcbiAgICAgIC8vIOKdjCBOTyBkZXNwYWNoYXIgXCJlbGVtZW50LXJlZi1yZWdpc3RyYWRvXCIgYWPDoVxyXG4gICAgICAvLyBDYW52YXNFZGl0b3IucmVnaXN0ZXJSZWYgeWEgbG8gaGFjZS5cclxuICAgIH1cclxuICB9LCBbb2JqLmlkLCByZWdpc3RlclJlZl0pO1xyXG5cclxuXHJcblxyXG4gIC8vIOKchSBDbGljayBjb24gZXN0YWRvIGZyZXNjbyAoZXZpdGEgc3RhbGUgY2xvc3VyZXMgZGVsIHVzZU1lbW8pXHJcbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjayhcclxuICAgIChlKSA9PiB7XHJcbiAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgIGlmICghaGFzRHJhZ2dlZC5jdXJyZW50KSB7XHJcbiAgICAgICAgLy8g8J+noCBUZXh0byBub3JtYWxcclxuICAgICAgICBpZiAob2JqLnRpcG8gPT09IFwidGV4dG9cIikge1xyXG4gICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgb25TdGFydFRleHRFZGl0Py4ob2JqLmlkLCBvYmoudGV4dG8pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb25TZWxlY3Qob2JqLmlkLCBvYmosIGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g8J+GlSBGb3JtYSBjb24gdGV4dG8gKHJlY3QpXHJcbiAgICAgICAgZWxzZSBpZiAob2JqLnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvYmouZmlndXJhID09PSBcInJlY3RcIikge1xyXG4gICAgICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgb25TdGFydFRleHRFZGl0Py4ob2JqLmlkLCBvYmoudGV4dG8gfHwgXCJcIik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvblNlbGVjdChvYmouaWQsIG9iaiwgZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDwn6exIFBhcmEgdG9kbyBsbyBkZW3DoXNcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIG9uU2VsZWN0KG9iai5pZCwgb2JqLCBlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBbb2JqLCBpc1NlbGVjdGVkLCBvblNlbGVjdCwgb25TdGFydFRleHRFZGl0XVxyXG4gICk7XHJcblxyXG5cclxuXHJcbiAgLy8g8J+UpSBNRU1PSVpBUiBQUk9QSUVEQURFUyBDT01VTkVTXHJcbiAgY29uc3QgY29tbW9uUHJvcHMgPSB1c2VNZW1vKCgpID0+ICh7XHJcbiAgICB4OiBvYmoueCA/PyAwLFxyXG4gICAgeTogb2JqLnkgPz8gMCxcclxuICAgIHJvdGF0aW9uOiBvYmoucm90YXRpb24gfHwgMCxcclxuICAgIHNjYWxlWDogb2JqLnNjYWxlWCB8fCAxLFxyXG4gICAgc2NhbGVZOiBvYmouc2NhbGVZIHx8IDEsXHJcbiAgICBkcmFnZ2FibGU6ICFlZGl0aW5nTW9kZSxcclxuICAgIGxpc3RlbmluZzogIWlzSW5FZGl0TW9kZSxcclxuXHJcbiAgICBvbk1vdXNlRG93bjogKGUpID0+IHtcclxuICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICBoYXNEcmFnZ2VkLmN1cnJlbnQgPSBmYWxzZTtcclxuXHJcbiAgICAgIGUuY3VycmVudFRhcmdldD8uZHJhZ2dhYmxlKHRydWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbk1vdXNlVXA6IChlKSA9PiB7XHJcbiAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQ/LmRyYWdnYWJsZSAmJiAhaGFzRHJhZ2dlZC5jdXJyZW50KSB7XHJcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmRyYWdnYWJsZShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25DbGljazogaGFuZGxlQ2xpY2ssXHJcbiAgICBvblRhcDogaGFuZGxlQ2xpY2ssXHJcblxyXG4gICAgb25EcmFnU3RhcnQ6IChlKSA9PiB7XHJcblxyXG4gICAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8/LihvYmouaWQsIGUpO1xyXG5cclxuICAgICAgd2luZG93Ll9kcmFnQ291bnQgPSAwO1xyXG4gICAgICB3aW5kb3cuX2xhc3RNb3VzZSA9IG51bGw7XHJcbiAgICAgIHdpbmRvdy5fbGFzdEVsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgICAgaGFzRHJhZ2dlZC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgd2luZG93Ll9pc0RyYWdnaW5nID0gdHJ1ZTtcclxuXHJcblxyXG4gICAgICAvLyDwn5SlIEludGVudGFyIGRyYWcgZ3J1cGFsXHJcbiAgICAgIGNvbnN0IGZ1ZUdydXBhbCA9IHN0YXJ0RHJhZ0dydXBhbExpZGVyKGUsIG9iaik7XHJcbiAgICAgIGlmICghZnVlR3J1cGFsKSB7XHJcbiAgICAgICAgc3RhcnREcmFnSW5kaXZpZHVhbChlLCBkcmFnU3RhcnRQb3MpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBvbkRyYWdNb3ZlOiAoZSkgPT4ge1xyXG4gICAgICBoYXNEcmFnZ2VkLmN1cnJlbnQgPSB0cnVlO1xyXG5cclxuICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xyXG4gICAgICBjb25zdCBtb3VzZVBvcyA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpO1xyXG4gICAgICBjb25zdCBlbGVtZW50UG9zID0geyB4OiBlLnRhcmdldC54KCksIHk6IGUudGFyZ2V0LnkoKSB9O1xyXG5cclxuICAgICAgd2luZG93Ll9sYXN0TW91c2UgPSBtb3VzZVBvcztcclxuICAgICAgd2luZG93Ll9sYXN0RWxlbWVudCA9IGVsZW1lbnRQb3M7XHJcblxyXG4gICAgICAvLyDwn5SlIERSQUcgR1JVUEFMIC0gU09MTyBFTCBMw41ERVIgUFJPQ0VTQVxuICAgICAgaWYgKHdpbmRvdy5fZ3J1cG9MaWRlciAmJiBvYmouaWQgPT09IHdpbmRvdy5fZ3J1cG9MaWRlcikge1xuICAgICAgICBwcmV2aWV3RHJhZ0dydXBhbChlLCBvYmosIG9uQ2hhbmdlKTtcbiAgICAgICAgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8/Lih7IHg6IGUudGFyZ2V0LngoKSwgeTogZS50YXJnZXQueSgpIH0sIG9iai5pZCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXHJcbiAgICAgIC8vIPCflKUgU0kgRVMgU0VHVUlET1IgREVMIEdSVVBPLCBOTyBQUk9DRVNBUlxyXG4gICAgICBpZiAod2luZG93Ll9ncnVwb0xpZGVyKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyA9IHdpbmRvdy5fZWxlbWVudG9zU2VsZWNjaW9uYWRvcyB8fCBbXTtcclxuICAgICAgICBpZiAoZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvYmouaWQpICYmIG9iai5pZCAhPT0gd2luZG93Ll9ncnVwb0xpZGVyKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyDwn5SEIERSQUcgSU5ESVZJRFVBTCAtIFNvbG8gc2kgbm8gaGF5IGRyYWcgZ3J1cGFsIGFjdGl2b1xyXG4gICAgICBpZiAoIXdpbmRvdy5fZ3J1cG9MaWRlcikge1xyXG4gICAgICAgIHByZXZpZXdEcmFnSW5kaXZpZHVhbChlLCBvYmosIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG5cclxuXHJcbiAgICBvbkRyYWdFbmQ6IChlKSA9PiB7XHJcblxyXG4gICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgIGNvbnN0IG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQ7XHJcblxyXG4gICAgICAvLyDwn5SlIEludGVudGFyIGRyYWcgZ3J1cGFsXG4gICAgICBjb25zdCBmdWVHcnVwYWwgPSBlbmREcmFnR3J1cGFsKGUsIG9iaiwgb25DaGFuZ2UsIGhhc0RyYWdnZWQpO1xuICAgICAgaWYgKGZ1ZUdydXBhbCkge1xuICAgICAgICBvbkRyYWdFbmRQZXJzb25hbGl6YWRvPy4oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXHJcbiAgICAgIC8vIPCflIQgRFJBRyBJTkRJVklEVUFMIChubyBjYW1iacOzKVxyXG4gICAgICBlbmREcmFnSW5kaXZpZHVhbChvYmosIG5vZGUsIG9uQ2hhbmdlLCBvbkRyYWdFbmRQZXJzb25hbGl6YWRvLCBoYXNEcmFnZ2VkKTtcclxuXHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gIH0pLCBbXHJcbiAgICBvYmosXHJcbiAgICBlZGl0aW5nTW9kZSxcclxuICAgIGlzSW5FZGl0TW9kZSxcclxuICAgIGhhbmRsZUNsaWNrLFxyXG4gICAgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8sXHJcbiAgICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8sXHJcbiAgICBvbkRyYWdFbmRQZXJzb25hbGl6YWRvLFxyXG4gICAgZHJhZ1N0YXJ0UG9zLFxyXG4gICAgaGFzRHJhZ2dlZCxcclxuICAgIG9uQ2hhbmdlLFxyXG4gIF0pO1xyXG5cclxuICAvLyDwn5SlIE1FTU9JWkFSIEhBTkRMRVJTIEhPVkVSXHJcbiAgY29uc3QgaGFuZGxlTW91c2VFbnRlciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmICghb25Ib3ZlciB8fCB3aW5kb3cuX2lzRHJhZ2dpbmcgfHwgaXNJbkVkaXRNb2RlKSByZXR1cm47XHJcbiAgICBvbkhvdmVyKG9iai5pZCk7XHJcbiAgfSwgW29uSG92ZXIsIG9iai5pZCwgaXNJbkVkaXRNb2RlXSk7XHJcblxyXG5cclxuICBjb25zdCBoYW5kbGVNb3VzZUxlYXZlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKCFvbkhvdmVyIHx8IGlzSW5FZGl0TW9kZSkgcmV0dXJuO1xyXG4gICAgb25Ib3ZlcihudWxsKTtcclxuICB9LCBbb25Ib3ZlciwgaXNJbkVkaXRNb2RlXSk7XHJcblxyXG4gIGNvbnN0IHJlY2FsY0dyb3VwQWxpZ24gPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBpZiAob2JqLnRpcG8gIT09IFwidGV4dG9cIikgcmV0dXJuO1xyXG4gICAgaWYgKCFvYmouX19ncm91cEFsaWduIHx8ICFvYmouX19ncm91cElkKSByZXR1cm47XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygb25DaGFuZ2UgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHJlZnMgPSB3aW5kb3cuX2VsZW1lbnRSZWZzIHx8IHt9O1xyXG4gICAgY29uc3QgZ2V0T2JqID0gd2luZG93Ll9fZ2V0T2JqQnlJZCB8fCAoKCkgPT4gbnVsbCk7XHJcblxyXG4gICAgbGV0IG1heFcgPSAwO1xyXG4gICAgbGV0IHRoaXNXID0gMDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IFtpZCwgbm9kZV0gb2YgT2JqZWN0LmVudHJpZXMocmVmcykpIHtcclxuICAgICAgY29uc3QgbyA9IGdldE9iaihpZCk7XHJcbiAgICAgIGlmICghbyB8fCBvLnRpcG8gIT09IFwidGV4dG9cIiB8fCBvLl9fZ3JvdXBJZCAhPT0gb2JqLl9fZ3JvdXBJZCkgY29udGludWU7XHJcbiAgICAgIGNvbnN0IHcgPSBub2RlPy5nZXRUZXh0V2lkdGggPyBNYXRoLmNlaWwobm9kZS5nZXRUZXh0V2lkdGgoKSkgOiAwO1xyXG4gICAgICBpZiAoaWQgPT09IG9iai5pZCkgdGhpc1cgPSB3O1xyXG4gICAgICBpZiAodyA+IG1heFcpIG1heFcgPSB3O1xyXG4gICAgfVxyXG4gICAgaWYgKCFtYXhXIHx8ICF0aGlzVykgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGJhc2VYID0gTnVtYmVyLmlzRmluaXRlKG9iai5fX2dyb3VwT3JpZ2luWCkgPyBvYmouX19ncm91cE9yaWdpblggOiAob2JqLnggfHwgMCk7XHJcbiAgICBsZXQgdGFyZ2V0WCA9IGJhc2VYO1xyXG4gICAgaWYgKG9iai5fX2dyb3VwQWxpZ24gPT09IFwiY2VudGVyXCIpIHtcclxuICAgICAgdGFyZ2V0WCA9IGJhc2VYICsgKG1heFcgLSB0aGlzVykgLyAyO1xyXG4gICAgfSBlbHNlIGlmIChvYmouX19ncm91cEFsaWduID09PSBcInJpZ2h0XCIpIHtcclxuICAgICAgdGFyZ2V0WCA9IGJhc2VYICsgKG1heFcgLSB0aGlzVyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKE1hdGguYWJzKChvYmoueCB8fCAwKSAtIHRhcmdldFgpID4gMC41KSB7XHJcbiAgICAgIG9uQ2hhbmdlKG9iai5pZCwgeyB4OiB0YXJnZXRYIH0pO1xyXG4gICAgfVxyXG4gIH0sIFtvYmouaWQsIG9iai54LCBvYmoudGlwbywgb2JqLl9fZ3JvdXBBbGlnbiwgb2JqLl9fZ3JvdXBJZCwgb2JqLl9fZ3JvdXBPcmlnaW5YLCBvbkNoYW5nZV0pO1xyXG5cclxuXHJcblxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gUmVjYWxjdWxhciBjdWFuZG8gZXN0ZSB0ZXh0byBjYW1iaWEgeSB0cmFzIG1vbnRhciBzdXMgdmVjaW5vc1xyXG4gICAgbGV0IHIxLCByMjtcclxuICAgIHIxID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgcjIgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgIHJlY2FsY0dyb3VwQWxpZ24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmIChyMSkgY2FuY2VsQW5pbWF0aW9uRnJhbWUocjEpO1xyXG4gICAgICBpZiAocjIpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHIyKTtcclxuICAgIH07XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXHJcbiAgfSwgW3JlY2FsY0dyb3VwQWxpZ24sIG9iai50ZXh0bywgb2JqLmZvbnRGYW1pbHksIG9iai5mb250U2l6ZSwgb2JqLmZvbnRTdHlsZSwgb2JqLmZvbnRXZWlnaHRdKTtcclxuXHJcblxyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghb2JqIHx8IG9iai50aXBvICE9PSBcInRleHRvXCIpIHJldHVybjtcclxuICAgIGlmIChvYmouX19ncm91cEFsaWduKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaXNBdXRvV2lkdGggPSAhb2JqLndpZHRoICYmIG9iai5fX2F1dG9XaWR0aCAhPT0gZmFsc2U7XHJcbiAgICBpZiAoIWlzQXV0b1dpZHRoKSByZXR1cm47XHJcblxyXG4gICAgbGV0IHJhZjEgPSBudWxsO1xyXG4gICAgbGV0IHJhZjIgPSBudWxsO1xyXG5cclxuICAgIHJhZjEgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICByYWYyID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICBjb25zdCBub2RlID0gdGV4dE5vZGVSZWYuY3VycmVudDtcclxuICAgICAgICBpZiAoIW5vZGUgfHwgdHlwZW9mIG5vZGUuZ2V0VGV4dFdpZHRoICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3Qgd1JlYWwgPSBNYXRoLmNlaWwobm9kZS5nZXRUZXh0V2lkdGgoKSB8fCAwKTtcclxuICAgICAgICBpZiAod1JlYWwgPiAwKSBzZXRNZWFzdXJlZFRleHRXaWR0aCh3UmVhbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaWYgKHJhZjEpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZjEpO1xyXG4gICAgICBpZiAocmFmMikgY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmMik7XHJcbiAgICB9O1xyXG4gIH0sIFtcclxuICAgIG9iaj8uaWQsXHJcbiAgICBvYmo/LnRleHRvLFxyXG4gICAgb2JqPy5mb250RmFtaWx5LFxyXG4gICAgb2JqPy5mb250U2l6ZSxcclxuICAgIG9iaj8uZm9udFN0eWxlLFxyXG4gICAgb2JqPy5mb250V2VpZ2h0LFxyXG4gICAgb2JqPy5saW5lSGVpZ2h0LFxyXG4gICAgb2JqPy53aWR0aCxcclxuICAgIG9iaj8uX19hdXRvV2lkdGgsXHJcbiAgICBvYmo/Ll9fZ3JvdXBBbGlnbixcclxuICBdKTtcclxuXHJcblxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgc2V0TWVhc3VyZWRUZXh0V2lkdGgobnVsbCk7XHJcbiAgICAvLyB0YW1iacOpbiBjb252aWVuZSByZXNldGVhciBlbCBsYXlvdXQgYmFzZSBjdWFuZG8gY2FtYmlhIGRlIHRleHRvXHJcbiAgICBpZiAob2JqPy50aXBvID09PSBcInRleHRvXCIpIGJhc2VUZXh0TGF5b3V0UmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gIH0sIFtvYmo/LmlkXSk7XHJcblxyXG5cclxuXHJcbiAgY29uc3QgZ3JvdXBSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBDYWNoZWFyIGN1YW5kbyBjYW1iaWUgZWwgY29sb3JcclxuICAgIGlmIChncm91cFJlZi5jdXJyZW50ICYmIG9iai50aXBvID09PSBcImljb25vXCIgJiYgb2JqLmNvbG9yICYmIG9iai5jb2xvciAhPT0gXCIjMDAwMDAwXCIpIHtcclxuICAgICAgZ3JvdXBSZWYuY3VycmVudC5jYWNoZSgpO1xyXG4gICAgICBncm91cFJlZi5jdXJyZW50LmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgfVxyXG4gIH0sIFtvYmouY29sb3IsIG9iai5pZF0pO1xyXG5cclxuXHJcbiAgLy8gQ29udmllcnRlIFwibWluWCBtaW5ZIHdpZHRoIGhlaWdodFwiIC0+IG7Dum1lcm9zXHJcbiAgZnVuY3Rpb24gcGFyc2VWaWV3Qm94KHZiKSB7XHJcbiAgICBpZiAoIXZiIHx8IHR5cGVvZiB2YiAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBwYXJ0cyA9IHZiLnRyaW0oKS5zcGxpdCgvXFxzKy8pLm1hcChOdW1iZXIpO1xyXG4gICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gNCB8fCBwYXJ0cy5zb21lKChuKSA9PiBOdW1iZXIuaXNOYU4obikpKSByZXR1cm4gbnVsbDtcclxuICAgIGNvbnN0IFttaW5YLCBtaW5ZLCB2YldpZHRoLCB2YkhlaWdodF0gPSBwYXJ0cztcclxuICAgIHJldHVybiB7IG1pblgsIG1pblksIHZiV2lkdGgsIHZiSGVpZ2h0IH07XHJcbiAgfVxyXG5cclxuXHJcbiAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHtcclxuICAgIGxldCBsaW5lUG9pbnRzID0gb2JqLnBvaW50cztcclxuICAgIGxldCBwb2ludHNGaXhlZCA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghbGluZVBvaW50cyB8fCAhQXJyYXkuaXNBcnJheShsaW5lUG9pbnRzKSB8fCBsaW5lUG9pbnRzLmxlbmd0aCA8IDQpIHtcclxuICAgICAgbGluZVBvaW50cyA9IFswLCAwLCBMSU5FX0NPTlNUQU5UUy5ERUZBVUxUX0xFTkdUSCwgMF07IC8vIFVzYXIgY29uc3RhbnRlXHJcbiAgICAgIHBvaW50c0ZpeGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHB1bnRvc1ZhbGlkYWRvcyA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHB1bnRvID0gcGFyc2VGbG9hdChsaW5lUG9pbnRzW2ldKTtcclxuICAgICAgICBwdW50b3NWYWxpZGFkb3MucHVzaChpc05hTihwdW50bykgPyAwIDogcHVudG8pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoSlNPTi5zdHJpbmdpZnkocHVudG9zVmFsaWRhZG9zKSAhPT0gSlNPTi5zdHJpbmdpZnkobGluZVBvaW50cy5zbGljZSgwLCA0KSkpIHtcclxuICAgICAgICBsaW5lUG9pbnRzID0gcHVudG9zVmFsaWRhZG9zO1xyXG4gICAgICAgIHBvaW50c0ZpeGVkID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsaW5lUG9pbnRzID0gbGluZVBvaW50cy5zbGljZSgwLCA0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChwb2ludHNGaXhlZCAmJiBoYW5kbGVDaGFuZ2UpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlQ2hhbmdlKG9iai5pZCwge1xyXG4gICAgICAgICAgcG9pbnRzOiBsaW5lUG9pbnRzLFxyXG4gICAgICAgICAgZnJvbUF1dG9GaXg6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgfSwgMCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxMaW5lXHJcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxyXG4gICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgIHBvaW50cz17bGluZVBvaW50c31cclxuICAgICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XHJcbiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxyXG4gICAgICAgIHN0cm9rZT17b2JqLmNvbG9yIHx8IExJTkVfQ09OU1RBTlRTLkRFRkFVTFRfQ09MT1J9XHJcbiAgICAgICAgc3Ryb2tlV2lkdGg9e29iai5zdHJva2VXaWR0aCB8fCBMSU5FX0NPTlNUQU5UUy5TVFJPS0VfV0lEVEh9XHJcbiAgICAgICAgdGVuc2lvbj17MH1cclxuICAgICAgICBsaW5lQ2FwPVwicm91bmRcIlxyXG4gICAgICAgIGxpbmVKb2luPVwicm91bmRcIlxyXG4gICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgaGl0U3Ryb2tlV2lkdGg9e01hdGgubWF4KExJTkVfQ09OU1RBTlRTLkhJVF9TVFJPS0VfV0lEVEgsIG9iai5zdHJva2VXaWR0aCB8fCAyKX1cclxuICAgICAgICBzaGFkb3dGb3JTdHJva2VFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICBvcGFjaXR5PXtpc1NlbGVjdGVkID8gMSA6IDAuOTV9XHJcbiAgICAgICAgc2hhZG93Q29sb3I9e2lzU2VsZWN0ZWQgPyBcInJnYmEoMTE5LCA2MSwgMTkwLCAwLjMpXCIgOiBcInRyYW5zcGFyZW50XCJ9XHJcbiAgICAgICAgc2hhZG93Qmx1cj17aXNTZWxlY3RlZCA/IDggOiAwfVxyXG4gICAgICAgIHNoYWRvd09mZnNldD17eyB4OiAwLCB5OiAyIH19XHJcbiAgICAgIC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJ0ZXh0b1wiKSB7XHJcbiAgICBjb25zdCB2aXNpYmlsaXR5TW9kZSA9XHJcbiAgICAgIGlubGluZVZpc2liaWxpdHlNb2RlID09PSBcIndpbmRvd1wiID8gXCJ3aW5kb3dcIiA6IFwicmVhY3RpdmVcIjtcclxuICAgIGNvbnN0IGlzRWRpdGluZ0J5V2luZG93ID0gd2luZG93Ll9jdXJyZW50RWRpdGluZ0lkID09PSBvYmouaWQ7XHJcbiAgICBjb25zdCBpc0VkaXRpbmdCeVJlYWN0aXZlID0gZWRpdGluZ0lkID09PSBvYmouaWQ7XHJcbiAgICBjb25zdCBvdmVybGF5RG9tUHJlc2VudExvb3NlID0gKCgpID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBjb25zdCBzYWZlSWQgPSBTdHJpbmcob2JqLmlkKS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyk7XHJcbiAgICAgIHJldHVybiBCb29sZWFuKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlubGluZS1lZGl0b3ItaWQ9XCIke3NhZmVJZH1cIl1gKSk7XHJcbiAgICB9KSgpO1xyXG4gICAgY29uc3Qgb3ZlcmxheURvbVByZXNlbnQgPVxyXG4gICAgICBpbmxpbmVPdmVybGF5TW91bnRlZElkID09PSBvYmouaWQgJiYgb3ZlcmxheURvbVByZXNlbnRMb29zZTtcclxuICAgIGNvbnN0IGlzRWRpdGluZ0J5T3ZlcmxheSA9IG92ZXJsYXlEb21QcmVzZW50O1xyXG4gICAgY29uc3QgaXNFZGl0aW5nID1cclxuICAgICAgdmlzaWJpbGl0eU1vZGUgPT09IFwicmVhY3RpdmVcIlxyXG4gICAgICAgID8gKGlzRWRpdGluZ0J5UmVhY3RpdmUgfHwgaXNFZGl0aW5nQnlPdmVybGF5KVxyXG4gICAgICAgIDogKGlzRWRpdGluZ0J5V2luZG93IHx8IGlzRWRpdGluZ0J5UmVhY3RpdmUgfHwgaXNFZGl0aW5nQnlPdmVybGF5KTtcclxuICAgIGNvbnN0IGZvbnRGYW1pbHkgPSBvYmouZm9udEZhbWlseSB8fCBcInNhbnMtc2VyaWZcIjtcclxuICAgIGNvbnN0IGFsaWduID0gKG9iai5hbGlnbiB8fCBcImxlZnRcIikudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IGZpbGxDb2xvciA9IG9iai5jb2xvclRleHRvID8/IG9iai5maWxsID8/IG9iai5jb2xvciA/PyBcIiMwMDBcIjtcclxuICAgIGNvbnN0IGJhc2VMaW5lSGVpZ2h0ID1cclxuICAgICAgdHlwZW9mIG9iai5saW5lSGVpZ2h0ID09PSBcIm51bWJlclwiICYmIG9iai5saW5lSGVpZ2h0ID4gMCA/IG9iai5saW5lSGVpZ2h0IDogMS4yO1xyXG4gICAgY29uc3QgbGluZUhlaWdodCA9IGJhc2VMaW5lSGVpZ2h0ICogMC45MjtcclxuXHJcblxyXG4gICAgLy8g4pyFIEV2aXRhIGJib3ggc29icmFkbyBhIGxhIGRlcmVjaGEgcG9yIGVzcGFjaW9zL3RhYnMgaW52aXNpYmxlcyBhbCBmaW5hbCBkZSBsw61uZWFcclxuICAgIGNvbnN0IHJhd1RleHQgPSBTdHJpbmcob2JqLnRleHRvID8/IFwiXCIpO1xyXG4gICAgY29uc3Qgc2FmZVRleHQgPSByYXdUZXh0LnJlcGxhY2UoL1sgXFx0XSskL2dtLCBcIlwiKTtcclxuXHJcblxyXG4gICAgLy8g4pyFIFZBTElEQUNJw5NOOiBBc2VndXJhciB2YWxvcmVzIG51bcOpcmljb3MgdsOhbGlkb3NcclxuICAgIGNvbnN0IHZhbGlkWCA9IHR5cGVvZiBvYmoueCA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4ob2JqLngpID8gb2JqLnggOiAwO1xyXG4gICAgY29uc3QgdmFsaWRZID0gdHlwZW9mIG9iai55ID09PSBcIm51bWJlclwiICYmICFpc05hTihvYmoueSkgPyBvYmoueSA6IDA7XHJcbiAgICBjb25zdCB2YWxpZEZvbnRTaXplID0gbm9ybWFsaXplRm9udFNpemUob2JqLmZvbnRTaXplLCAyNCk7XHJcbiAgICBjb25zdCB0ZXh0RGVjb3JhdGlvbiA9XHJcbiAgICAgIHR5cGVvZiBvYmoudGV4dERlY29yYXRpb24gPT09IFwic3RyaW5nXCIgJiYgb2JqLnRleHREZWNvcmF0aW9uLnRyaW0oKS5sZW5ndGggPiAwXHJcbiAgICAgICAgPyBvYmoudGV4dERlY29yYXRpb25cclxuICAgICAgICA6IFwibm9uZVwiO1xyXG5cclxuICAgIC8vIPCflLkgUEFTTyAxOiBDYWxjdWxhciBkaW1lbnNpb25lcyBkZWwgdGV4dG8gUFJJTUVST1xyXG4gICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICBjb25zdCBzdHlsZSA9IG9iai5mb250U3R5bGUgfHwgXCJub3JtYWxcIjtcclxuICAgIGNvbnN0IHdlaWdodCA9IG9iai5mb250V2VpZ2h0IHx8IFwibm9ybWFsXCI7XHJcbiAgICBjb25zdCBrb252YUZvbnRTdHlsZSA9IHJlc29sdmVLb252YUZvbnRTdHlsZShzdHlsZSwgd2VpZ2h0KTtcclxuXHJcbiAgICAvLyDinIUgc2kgbGEgZnVlbnRlIHRpZW5lIGVzcGFjaW9zLCBlbnZvbHZlcmxhIGVuIGNvbWlsbGFzIHBhcmEgcXVlIGNhbnZhcyBubyBjYWlnYSBhIGZhbGxiYWNrXHJcbiAgICBjb25zdCBmb250Rm9yQ2FudmFzID0gZm9udEZhbWlseS5pbmNsdWRlcyhcIixcIilcclxuICAgICAgPyBmb250RmFtaWx5XHJcbiAgICAgIDogKC9cXHMvLnRlc3QoZm9udEZhbWlseSkgPyBgXCIke2ZvbnRGYW1pbHl9XCJgIDogZm9udEZhbWlseSk7XHJcblxyXG4gICAgLy8g4pyFIG9yZGVuIGNvcnJlY3RvOiBzdHlsZSAtPiB3ZWlnaHQgLT4gc2l6ZSAtPiBmYW1pbHlcclxuICAgIGN0eC5mb250ID0gYCR7c3R5bGV9ICR7d2VpZ2h0fSAke3ZhbGlkRm9udFNpemV9cHggJHtmb250Rm9yQ2FudmFzfWA7XHJcblxyXG4gICAgY29uc3QgbGluZXMgPSBzYWZlVGV4dC5zcGxpdCgvXFxyP1xcbi8pO1xyXG4gICAgY29uc3QgbWF4TGluZVdpZHRoID0gTWF0aC5tYXgoLi4ubGluZXMubWFwKGxpbmUgPT4gY3R4Lm1lYXN1cmVUZXh0KGxpbmUpLndpZHRoKSwgMjApO1xyXG4gICAgY29uc3QgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XHJcbiAgICBjb25zdCB0ZXh0V2lkdGggPSBNYXRoLmNlaWwobWF4TGluZVdpZHRoKTtcclxuICAgIGNvbnN0IHRleHRIZWlnaHQgPSB2YWxpZEZvbnRTaXplICogbGluZUhlaWdodCAqIG51bUxpbmVzO1xyXG5cclxuICAgIC8vIPCflLkgUEFTTyAyOiBDYWxjdWxhciBwb3NpY2nDs24gc29sbyB1bmEgdmV6IHkgY29uZ2VsYXIgZWwgY2VudHJvXHJcbiAgICBsZXQgcG9zaXRpb25SYXcgPSBnZXRDZW50ZXJlZFRleHRQb3NpdGlvbih7XHJcbiAgICAgIHJlY3RZOiB2YWxpZFksXHJcbiAgICAgIHJlY3RIZWlnaHQ6IHRleHRIZWlnaHQsXHJcbiAgICAgIGZvbnRTaXplOiB2YWxpZEZvbnRTaXplLFxyXG4gICAgICBmb250RmFtaWx5LFxyXG4gICAgICBmb250V2VpZ2h0OiBvYmouZm9udFdlaWdodCB8fCBcIm5vcm1hbFwiLFxyXG4gICAgICBmb250U3R5bGU6IG9iai5mb250U3R5bGUgfHwgXCJub3JtYWxcIixcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEluaWNpYWxpemFyIGxheW91dCBiYXNlIHNvbG8gbGEgUFJJTUVSQSB2ZXpcclxuICAgIGlmICghYmFzZVRleHRMYXlvdXRSZWYuY3VycmVudCkge1xyXG4gICAgICBiYXNlVGV4dExheW91dFJlZi5jdXJyZW50ID0ge1xyXG4gICAgICAgIC8vIGNlbnRybyB2ZXJ0aWNhbCBcImlkZWFsXCIgcXVlIHF1ZXJlbW9zIGNvbnNlcnZhclxyXG4gICAgICAgIHJlY3RDZW50ZXI6IHBvc2l0aW9uUmF3LnJlY3RDZW50ZXIsXHJcbiAgICAgICAgLy8gb2Zmc2V0IGRlc2RlIGVsIGNlbnRybyBhbCBiYXNlbGluZSAoZGVwZW5kZSBzb2xvIGRlIGxhIGZ1ZW50ZS90YW1hw7FvKVxyXG4gICAgICAgIGJhc2VsaW5lVG9DZW50ZXI6IHBvc2l0aW9uUmF3LmJhc2VsaW5lIC0gcG9zaXRpb25SYXcucmVjdENlbnRlcixcclxuICAgICAgICBhc2NlbnQ6IHBvc2l0aW9uUmF3LmFzY2VudCxcclxuICAgICAgICBkZXNjZW50OiBwb3NpdGlvblJhdy5kZXNjZW50LFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJhc2UgPSBiYXNlVGV4dExheW91dFJlZi5jdXJyZW50O1xyXG4gICAgY29uc3QgcmVjdENlbnRlckZpeGVkID0gYmFzZS5yZWN0Q2VudGVyO1xyXG4gICAgY29uc3QgYmFzZWxpbmVZID0gcmVjdENlbnRlckZpeGVkICsgYmFzZS5iYXNlbGluZVRvQ2VudGVyO1xyXG4gICAgY29uc3QgdGV4dFRvcEZpeGVkID0gYmFzZWxpbmVZIC0gYmFzZS5hc2NlbnQ7XHJcblxyXG4gICAgY29uc3QgcG9zaXRpb24gPSB7XHJcbiAgICAgIGJhc2VsaW5lOiBiYXNlbGluZVksXHJcbiAgICAgIHRleHRUb3A6IHRleHRUb3BGaXhlZCxcclxuICAgICAgYXNjZW50OiBiYXNlLmFzY2VudCxcclxuICAgICAgZGVzY2VudDogYmFzZS5kZXNjZW50LFxyXG4gICAgICByZWN0Q2VudGVyOiByZWN0Q2VudGVyRml4ZWQsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIPCflI0gRGVidWc6IGluZm9ybWFjacOzbiBjb21wbGV0YSBkZSBwb3NpY2nDs24geSBjZW50cmFkb1xyXG5cclxuXHJcbiAgICAvLyDimqDvuI8gV2FybmluZyBzaSBoYXkgdmFsb3JlcyBpbnbDoWxpZG9zXHJcbiAgICBpZiAob2JqLnggIT09IHZhbGlkWCB8fCBvYmoueSAhPT0gdmFsaWRZIHx8IG9iai5mb250U2l6ZSAhPT0gdmFsaWRGb250U2l6ZSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gT2JqZXRvIGRlIHRleHRvIHRpZW5lIHZhbG9yZXMgaW52w6FsaWRvczpcIiwge1xyXG4gICAgICAgIGlkOiBvYmouaWQsXHJcbiAgICAgICAgeDogb2JqLngsXHJcbiAgICAgICAgeTogb2JqLnksXHJcbiAgICAgICAgZm9udFNpemU6IG9iai5mb250U2l6ZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IEFOQ0hPX0NBTlZBUyA9IDgwMDtcclxuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gTWF0aC5tYXgoMSwgQU5DSE9fQ0FOVkFTIC0gdmFsaWRYKTtcclxuXHJcbiAgICAvLyBhbmNobyByZWFsIGRlbCB0ZXh0byAobcOheGltYSBsw61uZWEsIHNlZ8O6biB0dSBjw6FsY3VsbyBhY3R1YWwpXHJcbiAgICBjb25zdCByZWFsVGV4dFdpZHRoID0gTWF0aC5tYXgoMSwgdGV4dFdpZHRoKTtcclxuXHJcbiAgICAvLyDinIUgU2kgZW50cmEsIE5PIHVzYW1vcyB3aWR0aCAoYm91bmRzIGFqdXN0YWRvKVxyXG4gICAgLy8g4pyFIFNpIG5vIGVudHJhLCB1c2Ftb3Mgd2lkdGg9YXZhaWxhYmxlIHkgd3JhcCBwb3IgY2FyYWN0ZXJlcyBwYXJhIGNvcnRhciBlbiBlbCBib3JkZVxyXG4gICAgY29uc3Qgc2hvdWxkV3JhcFRvQ2FudmFzRWRnZSA9IHJlYWxUZXh0V2lkdGggPiBhdmFpbGFibGVXaWR0aDtcclxuXHJcbiAgICBjb25zdCB3cmFwVG9Vc2UgPSBzaG91bGRXcmFwVG9DYW52YXNFZGdlID8gXCJjaGFyXCIgOiBcIm5vbmVcIjtcclxuICAgIGNvbnN0IHdpZHRoVG9Vc2UgPSBzaG91bGRXcmFwVG9DYW52YXNFZGdlID8gYXZhaWxhYmxlV2lkdGggOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBpbmxpbmVDYXJldE9ubHlNb2RlID0gdHJ1ZTtcclxuICAgIGNvbnN0IGFwcGxpZWRPcGFjaXR5ID1cclxuICAgICAgaXNFZGl0aW5nICYmICFpbmxpbmVDYXJldE9ubHlNb2RlID8gMCA6IDE7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPD5cclxuICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgey4uLmNvbW1vblByb3BzfVxyXG4gICAgICAgICAgcmVmPXsobm9kZSkgPT4ge1xyXG4gICAgICAgICAgICB0ZXh0Tm9kZVJlZi5jdXJyZW50ID0gbm9kZTtcclxuICAgICAgICAgICAgaGFuZGxlUmVmKG5vZGUpOyAvLyByZWdpc3RyYSArIGRpc3BhcmEgXCJlbGVtZW50LXJlZi1yZWdpc3RyYWRvXCJcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XHJcbiAgICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XHJcbiAgICAgICAgICB0ZXh0PXtzYWZlVGV4dH1cclxuICAgICAgICAgIHg9e3ZhbGlkWH1cclxuICAgICAgICAgIHk9e29iai55fVxyXG4gICAgICAgICAgd3JhcD17d3JhcFRvVXNlfVxyXG4gICAgICAgICAgd2lkdGg9e3dpZHRoVG9Vc2V9XHJcbiAgICAgICAgICBhbGlnbj17YWxpZ259XHJcbiAgICAgICAgICBmb250U2l6ZT17dmFsaWRGb250U2l6ZX1cclxuICAgICAgICAgIGZvbnRGYW1pbHk9e2ZvbnRGYW1pbHl9XHJcbiAgICAgICAgICBmb250V2VpZ2h0PXtvYmouZm9udFdlaWdodCB8fCBcIm5vcm1hbFwifVxyXG4gICAgICAgICAgZm9udFN0eWxlPXtrb252YUZvbnRTdHlsZX1cclxuICAgICAgICAgIHRleHREZWNvcmF0aW9uPXt0ZXh0RGVjb3JhdGlvbn1cclxuICAgICAgICAgIGxpbmVIZWlnaHQ9e2xpbmVIZWlnaHR9XHJcbiAgICAgICAgICBmaWxsPXtmaWxsQ29sb3J9XHJcbiAgICAgICAgICBvcGFjaXR5PXthcHBsaWVkT3BhY2l0eX1cclxuICAgICAgICAgIHZlcnRpY2FsQWxpZ249XCJ0b3BcIlxyXG4gICAgICAgIC8+XHJcblxyXG5cclxuICAgICAgPC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgaWYgKG9iai50aXBvID09PSBcInJzdnAtYm90b25cIikge1xyXG4gICAgY29uc3QgZm9udEZhbWlseSA9IG9iai5mb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwiO1xyXG5cclxuICAgIGNvbnN0IHdpZHRoID0gb2JqLmFuY2hvIHx8IDIwMDtcclxuICAgIGNvbnN0IGhlaWdodCA9IG9iai5hbHRvIHx8IDUwO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDw+XHJcbiAgICAgICAgey8qIPCfn6MgQm90w7NuIChmb25kbykgKi99XHJcbiAgICAgICAgPFJlY3RcclxuICAgICAgICAgIHsuLi5jb21tb25Qcm9wc31cclxuICAgICAgICAgIHdpZHRoPXt3aWR0aH1cclxuICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxyXG4gICAgICAgICAgY29ybmVyUmFkaXVzPXs4fVxyXG4gICAgICAgICAgZmlsbD17b2JqLmNvbG9yIHx8IFwiIzc3M2RiZVwifVxyXG4gICAgICAgICAgc3Ryb2tlPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IFwiIzc3M2RiZVwiIDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgc3Ryb2tlV2lkdGg9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gMiA6IDB9XHJcbiAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIG9uU2VsZWN0Py4ob2JqLmlkLCBvYmosIGUpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uRHJhZ01vdmU9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG51ZXZhUG9zID0gZS50YXJnZXQucG9zaXRpb24oKTtcclxuICAgICAgICAgICAgY29uc3QgdGV4dG9Ob2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2Ake29iai5pZH0tdGV4dGBdO1xyXG4gICAgICAgICAgICBpZiAodGV4dG9Ob2RlKSB7XHJcbiAgICAgICAgICAgICAgdGV4dG9Ob2RlLngobnVldmFQb3MueCk7XHJcbiAgICAgICAgICAgICAgdGV4dG9Ob2RlLnkobnVldmFQb3MueSk7XHJcbiAgICAgICAgICAgICAgdGV4dG9Ob2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcblxyXG4gICAgICAgIHsvKiDwn5SkIFRleHRvIGVuY2ltYSBkZWwgYm90w7NuICovfVxyXG4gICAgICAgIDxUZXh0XHJcbiAgICAgICAgICByZWY9eyhub2RlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZWdpc3RlclJlZikge1xyXG4gICAgICAgICAgICAgIHJlZ2lzdGVyUmVmKGAke29iai5pZH0tdGV4dGAsIG5vZGUgfHwgbnVsbCk7IC8vIHNpIHF1ZXLDqXMgbWFuaXB1bGFyIGVsIHRleHRvIGFwYXJ0ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgeD17b2JqLnh9XHJcbiAgICAgICAgICB5PXtvYmoueX1cclxuICAgICAgICAgIHdpZHRoPXt3aWR0aH1cclxuICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxyXG4gICAgICAgICAgdGV4dD17b2JqLnRleHRvIHx8IFwiQ29uZmlybWFyIGFzaXN0ZW5jaWFcIn1cclxuICAgICAgICAgIGZvbnRTaXplPXtub3JtYWxpemVGb250U2l6ZShvYmouZm9udFNpemUsIDE4KX1cclxuICAgICAgICAgIGZvbnRGYW1pbHk9e2ZvbnRGYW1pbHl9XHJcbiAgICAgICAgICBmb250U3R5bGU9e3Jlc29sdmVLb252YUZvbnRTdHlsZShvYmouZm9udFN0eWxlIHx8IFwibm9ybWFsXCIsIG9iai5mb250V2VpZ2h0IHx8IFwiYm9sZFwiKX1cclxuICAgICAgICAgIGZvbnRXZWlnaHQ9e29iai5mb250V2VpZ2h0IHx8IFwiYm9sZFwifVxyXG4gICAgICAgICAgdGV4dERlY29yYXRpb249e29iai50ZXh0RGVjb3JhdGlvbiB8fCBcIm5vbmVcIn1cclxuICAgICAgICAgIGZpbGw9e29iai5jb2xvclRleHRvIHx8IFwiI2ZmZmZmZlwifVxyXG4gICAgICAgICAgYWxpZ249e29iai5hbGlnbiB8fCBcImNlbnRlclwifVxyXG4gICAgICAgICAgdmVydGljYWxBbGlnbj1cIm1pZGRsZVwiXHJcbiAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgb3BhY2l0eT17aXNJbkVkaXRNb2RlID8gMCA6IDF9XHJcbiAgICAgICAgLz5cclxuXHJcbiAgICAgIDwvPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG5cclxuXHJcbiAgaWYgKG9iai50aXBvID09PSBcImltYWdlblwiICYmIGltZykge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEtvbnZhSW1hZ2VcclxuICAgICAgICB7Li4uY29tbW9uUHJvcHN9XHJcbiAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XHJcbiAgICAgICAgaWQ9e29iai5pZH1cclxuICAgICAgICBpbWFnZT17aW1nfVxyXG4gICAgICAgIGNyb3NzT3JpZ2luPVwiYW5vbnltb3VzXCJcclxuICAgICAgICB3aWR0aD17b2JqLndpZHRoIHx8IGltZy53aWR0aH1cclxuICAgICAgICBoZWlnaHQ9e29iai5oZWlnaHQgfHwgaW1nLmhlaWdodH1cclxuICAgICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XHJcbiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxyXG4gICAgICAgIHN0cm9rZT17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyBcIiM3NzNkYmVcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICBzdHJva2VXaWR0aD17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyAxIDogMH1cclxuICAgICAgLz5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLSBJQ09OTyBTVkcgKHRpcG86XCJpY29ub1wiLCBmb3JtYXRvOlwic3ZnXCIpIOKAlCBDT04gSElUQk9YIEZVTkNJT05BTCAtLS0tLS0tLS0tLS0tLS0tICovXHJcbiAgaWYgKG9iai50aXBvID09PSBcImljb25vXCIgJiYgb2JqLmZvcm1hdG8gPT09IFwic3ZnXCIpIHtcbiAgICBjb25zdCBjb2xvciA9IG9iai5jb2xvciB8fCBcIiMwMDAwMDBcIjtcbiAgICBjb25zdCBwYXRocyA9IEFycmF5LmlzQXJyYXkob2JqLnBhdGhzKSA/IG9iai5wYXRocyA6IFtdO1xuICAgIGNvbnN0IFcgPSBOdW1iZXIob2JqLndpZHRoKSB8fCAxMjg7XG4gICAgY29uc3QgSCA9IE51bWJlcihvYmouaGVpZ2h0KSB8fCAxMjg7XG4gICAgY29uc3QgdmIgPSBwYXJzZVZpZXdCb3gob2JqLnZpZXdCb3gpIHx8IHsgbWluWDogMCwgbWluWTogMCwgdmJXaWR0aDogMTAwLCB2YkhlaWdodDogMTAwIH07XG4gICAgY29uc3Qgc2hvd0ljb25TZWxlY3Rpb25GcmFtZSA9IChpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbykgJiYgc2VsZWN0aW9uQ291bnQgPD0gMTtcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEdyb3VwXHJcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxyXG4gICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cclxuICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XHJcbiAgICAgICAgd2lkdGg9e1d9XHJcbiAgICAgICAgaGVpZ2h0PXtIfVxyXG4gICAgICA+XHJcbiAgICAgICAgey8qIPCflKUgSElUQk9YIElOVklTSUJMRSAtIFNPTE8gcGFyYSBldmVudG9zIGRlIGRyYWcvY2xpY2sgKi99XHJcbiAgICAgICAgPFJlY3RcclxuICAgICAgICAgIHg9ezB9XHJcbiAgICAgICAgICB5PXswfVxyXG4gICAgICAgICAgd2lkdGg9e1d9XHJcbiAgICAgICAgICBoZWlnaHQ9e0h9XHJcbiAgICAgICAgICBmaWxsPVwicmdiYSgwLDAsMCwwLjAwMSlcIiAgLy8gQ2FzaSB0cmFuc3BhcmVudGUgcGVybyBjbGlja2VhYmxlXHJcbiAgICAgICAgICBzdHJva2U9XCJ0cmFuc3BhcmVudFwiICAgICAgLy8gU2luIGJvcmRlXHJcbiAgICAgICAgICBsaXN0ZW5pbmc9e3RydWV9ICAgICAgICAgIC8vIERFQkUgcmVjaWJpciBldmVudG9zXHJcbiAgICAgICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxyXG4gICAgICAgIC8+XHJcblxyXG4gICAgICAgIHsvKiBDb250ZW5pZG8gU1ZHIHZpc3VhbCAtIE5PIG1hbmVqYSBldmVudG9zICovfVxyXG4gICAgICAgIHtwYXRocy5tYXAoKHAsIGkpID0+IChcclxuICAgICAgICAgIDxQYXRoXHJcbiAgICAgICAgICAgIGtleT17aX1cclxuICAgICAgICAgICAgZGF0YT17cC5kfVxyXG4gICAgICAgICAgICBmaWxsPXtjb2xvcn1cclxuICAgICAgICAgICAgc2NhbGVYPXtXIC8gdmIudmJXaWR0aH1cclxuICAgICAgICAgICAgc2NhbGVZPXtIIC8gdmIudmJIZWlnaHR9XHJcbiAgICAgICAgICAgIHg9ey12Yi5taW5YICogKFcgLyB2Yi52YldpZHRoKX1cclxuICAgICAgICAgICAgeT17LXZiLm1pblkgKiAoSCAvIHZiLnZiSGVpZ2h0KX1cclxuICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX0gICAgICAgIC8vIE5PIG1hbmVqYSBldmVudG9zXHJcbiAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICkpfVxyXG5cclxuICAgICAgICB7LyogTWFyY28gZGUgc2VsZWNjacOzbiB2aXN1YWwgKi99XHJcbiAgICAgICAge3Nob3dJY29uU2VsZWN0aW9uRnJhbWUgJiYgKFxuICAgICAgICAgIDxSZWN0XG4gICAgICAgICAgICB4PXswfVxuICAgICAgICAgICAgeT17MH1cbiAgICAgICAgICAgIHdpZHRoPXtXfVxuICAgICAgICAgICAgaGVpZ2h0PXtIfVxyXG4gICAgICAgICAgICBzdHJva2U9XCIjNzczZGJlXCJcclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXHJcbiAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9ICAgICAgICAvLyBTb2xvIHZpc3VhbFxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApfVxyXG4gICAgICA8L0dyb3VwPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tIElDT05PIFJBU1RFUiAoUE5HL0pQRy9XRUJQKSDigJMgc2luIHJlY29sb3IgLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJpY29ub1wiICYmIChvYmouZm9ybWF0byA9PT0gXCJwbmdcIiB8fCBvYmouZm9ybWF0byA9PT0gXCJqcGdcIiB8fCBvYmouZm9ybWF0byA9PT0gXCJ3ZWJwXCIpKSB7XHJcbiAgICBjb25zdCBbaW1nXSA9IHVzZUltYWdlKG9iai51cmwsIFwiYW5vbnltb3VzXCIpO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxLb252YUltYWdlXHJcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxyXG4gICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgIGltYWdlPXtpbWd9XHJcbiAgICAgICAgY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIlxyXG4gICAgICAgIHdpZHRoPXtvYmoud2lkdGggfHwgKGltZz8ud2lkdGggPz8gMTIwKX1cclxuICAgICAgICBoZWlnaHQ9e29iai5oZWlnaHQgfHwgKGltZz8uaGVpZ2h0ID8/IDEyMCl9XHJcbiAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxyXG5cclxuICAgICAgICAvLyBVWCBjdXJzb3IgKHNpbiByb21wZXIgdHUgaG92ZXIpXHJcbiAgICAgICAgb25Nb3VzZUVudGVyPXsoZSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0U3RhZ2UoKTtcclxuICAgICAgICAgIGlmIChzdGFnZSkgc3RhZ2UuY29udGFpbmVyKCkuc3R5bGUuY3Vyc29yID0gXCJncmFiXCI7XHJcbiAgICAgICAgICBoYW5kbGVNb3VzZUVudGVyPy4oZSk7XHJcbiAgICAgICAgfX1cclxuICAgICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzdGFnZSA9IGUuY3VycmVudFRhcmdldC5nZXRTdGFnZSgpO1xyXG4gICAgICAgICAgaWYgKHN0YWdlKSBzdGFnZS5jb250YWluZXIoKS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICAgIGhhbmRsZU1vdXNlTGVhdmU/LihlKTtcclxuICAgICAgICB9fVxyXG5cclxuICAgICAgICAvLyDinIUgQ0xBVkU6IE5PIHBpc2FyIGVsIG9uQ2xpY2svb25UYXAgbmkgZWwgb25EcmFnRW5kIFwicmVhbFwiIGRlbCBzaXN0ZW1hXHJcbiAgICAgICAgLy8gU2kgcXVlcsOpcyBtYW50ZW5lciB1biBjb21wb3J0YW1pZW50byBleHRyYSBlbiBjbGljaywgaGFjZWxvIHNpbiBjYW1iaWFyIGxhIGZpcm1hOlxyXG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAvLyBkZWxlZ2EgYWwgY29tbW9uUHJvcHMub25DbGljayAoc2VsZWNjacOzbiBjb25zaXN0ZW50ZSlcclxuICAgICAgICAgIGNvbW1vblByb3BzLm9uQ2xpY2s/LihlKTtcclxuICAgICAgICB9fVxyXG4gICAgICAgIG9uVGFwPXsoZSkgPT4ge1xyXG4gICAgICAgICAgLy8gZW4gS29udmEsIHRhcCBzdWVsZSBtYXBlYXIgYSBjbGljazsgc2kgcXVlcsOpcywgZGVsZWdhbG8gaWd1YWxcclxuICAgICAgICAgIGNvbW1vblByb3BzLm9uQ2xpY2s/LihlKTtcclxuICAgICAgICB9fVxyXG5cclxuICAgICAgICAvLyDinIUgQ0xBVkU6IGRlbGVnYXIgYSBjb21tb25Qcm9wcy5vbkRyYWdFbmQgcGFyYSBxdWU6XHJcbiAgICAgICAgLy8gLSBzZSBsaW1waWVuIGd1w61hcyAob25EcmFnRW5kUGVyc29uYWxpemFkbylcclxuICAgICAgICAvLyAtIHNlIGhhZ2EgZmluYWxpem9EcmFnICsgQUJT4oaSUkVMXHJcbiAgICAgICAgb25EcmFnRW5kPXsoZSkgPT4ge1xyXG4gICAgICAgICAgY29tbW9uUHJvcHMub25EcmFnRW5kPy4oZSk7XHJcblxyXG4gICAgICAgICAgLy8gbGltcGllemEgZGUgY3Vyc29yIChleHRyYSlcclxuICAgICAgICAgIGNvbnN0IHN0YWdlID0gZS5jdXJyZW50VGFyZ2V0LmdldFN0YWdlKCk7XHJcbiAgICAgICAgICBpZiAoc3RhZ2UpIHN0YWdlLmNvbnRhaW5lcigpLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIH19XHJcbiAgICAgIC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLSBMRUdBQ1k6IElDT05PIFNWRyAodGlwbzogXCJpY29uby1zdmdcIiBjb24gb2JqLmQpIC0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICBpZiAob2JqLnRpcG8gPT09IFwiaWNvbm8tc3ZnXCIpIHtcbiAgICBjb25zdCBXID0gTnVtYmVyKG9iai53aWR0aCkgfHwgMTI4O1xuICAgIGNvbnN0IEggPSBOdW1iZXIob2JqLmhlaWdodCkgfHwgMTI4O1xuICAgIGNvbnN0IHNob3dMZWdhY3lJY29uU2VsZWN0aW9uRnJhbWUgPSAoaXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8pICYmIHNlbGVjdGlvbkNvdW50IDw9IDE7XG5cclxuICAgIGNvbnN0IHZiID0gcGFyc2VWaWV3Qm94KG9iai52aWV3Qm94KSB8fCB7IG1pblg6IDAsIG1pblk6IDAsIHZiV2lkdGg6IDEwMCwgdmJIZWlnaHQ6IDEwMCB9O1xyXG4gICAgY29uc3Qgc2NhbGVYID0gdmIudmJXaWR0aCA/IFcgLyB2Yi52YldpZHRoIDogMTtcclxuICAgIGNvbnN0IHNjYWxlWSA9IHZiLnZiSGVpZ2h0ID8gSCAvIHZiLnZiSGVpZ2h0IDogMTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8R3JvdXBcclxuICAgICAgICB7Li4uY29tbW9uUHJvcHN9XHJcbiAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XHJcbiAgICAgICAgZHJhZ2dhYmxlPXt0cnVlfVxyXG4gICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cclxuICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XHJcbiAgICAgICAgb25DbGljaz17KGUpID0+IGNvbW1vblByb3BzLm9uQ2xpY2s/LihlKX1cclxuICAgICAgICBvblRhcD17KGUpID0+IGNvbW1vblByb3BzLm9uVGFwPy4oZSl9XHJcbiAgICAgICAgb25EcmFnRW5kPXsoZSkgPT4ge1xyXG4gICAgICAgICAgY29tbW9uUHJvcHMub25EcmFnRW5kPy4oZSk7XHJcbiAgICAgICAgfX1cclxuICAgICAgICBvblRyYW5zZm9ybUVuZD17KGUpID0+IHtcclxuICAgICAgICAgIGNvbnN0IG5vZGUgPSBlLnRhcmdldDtcclxuICAgICAgICAgIGNvbnN0IHNjYWxlWE5vZGUgPVxyXG4gICAgICAgICAgICB0eXBlb2Ygbm9kZS5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVYKCkgOiAobm9kZS5zY2FsZVggPz8gMSk7XHJcbiAgICAgICAgICBjb25zdCBzY2FsZVlOb2RlID1cclxuICAgICAgICAgICAgdHlwZW9mIG5vZGUuc2NhbGVZID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWSgpIDogKG5vZGUuc2NhbGVZID8/IDEpO1xyXG4gICAgICAgICAgY29uc3QgcGF0Y2ggPSB7XHJcbiAgICAgICAgICAgIHg6IG5vZGUueCgpLFxyXG4gICAgICAgICAgICB5OiBub2RlLnkoKSxcclxuICAgICAgICAgICAgcm90YXRpb246IG5vZGUucm90YXRpb24oKSB8fCAwLFxyXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5tYXgoMSwgVyAqIE1hdGguYWJzKHNjYWxlWE5vZGUgfHwgMSkpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGgubWF4KDEsIEggKiBNYXRoLmFicyhzY2FsZVlOb2RlIHx8IDEpKSxcclxuICAgICAgICAgICAgc2NhbGVYOiAxLFxyXG4gICAgICAgICAgICBzY2FsZVk6IDEsXHJcbiAgICAgICAgICAgIGlzRmluYWw6IHRydWUsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgb25DaGFuZ2U/LihvYmouaWQsIHBhdGNoKTtcclxuICAgICAgICB9fVxyXG4gICAgICA+XHJcbiAgICAgICAgPFJlY3RcbiAgICAgICAgICB4PXswfVxuICAgICAgICAgIHk9ezB9XG4gICAgICAgICAgd2lkdGg9e1d9XG4gICAgICAgICAgaGVpZ2h0PXtIfVxuICAgICAgICAgIGZpbGw9XCJyZ2JhKDAsMCwwLDAuMDAxKVwiXG4gICAgICAgICAgc3Ryb2tlPXtzaG93TGVnYWN5SWNvblNlbGVjdGlvbkZyYW1lID8gXCIjNzczZGJlXCIgOiB1bmRlZmluZWR9XG4gICAgICAgICAgc3Ryb2tlV2lkdGg9e3Nob3dMZWdhY3lJY29uU2VsZWN0aW9uRnJhbWUgPyAxIDogMH1cbiAgICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgIC8+XG4gICAgICAgIDxHcm91cCB4PXswfSB5PXswfSBzY2FsZVg9e3NjYWxlWH0gc2NhbGVZPXtzY2FsZVl9PlxyXG4gICAgICAgICAgPEdyb3VwIHg9ey12Yi5taW5YfSB5PXstdmIubWluWX0+XHJcbiAgICAgICAgICAgIDxQYXRoXHJcbiAgICAgICAgICAgICAgZGF0YT17b2JqLmR9XHJcbiAgICAgICAgICAgICAgZmlsbD17b2JqLmNvbG9yIHx8IFwiIzAwMFwifVxyXG4gICAgICAgICAgICAgIHN0cm9rZT17b2JqLmNvbG9yIHx8IFwiIzAwMFwifVxyXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsxfVxyXG4gICAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZFxyXG4gICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L0dyb3VwPlxyXG4gICAgICAgIDwvR3JvdXA+XHJcbiAgICAgIDwvR3JvdXA+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJmb3JtYVwiKSB7XHJcbiAgICBjb25zdCBwcm9wc0Zvcm1hID0ge1xyXG4gICAgICAuLi5jb21tb25Qcm9wcyxcclxuICAgICAgZmlsbDogb2JqLmNvbG9yIHx8IFwiIzAwMDAwMFwiLFxyXG4gICAgfTtcclxuXHJcbiAgICBzd2l0Y2ggKG9iai5maWd1cmEpIHtcclxuICAgICAgY2FzZSBcInJlY3RcIjpcclxuICAgICAgICAvLyBPcGNpb25hbDogbm9ybWFsaXphbW9zIHdpZHRoL2hlaWdodCBwYXJhIHVzYXIgZW4gYW1ib3Mgbm9kb3NcclxuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGguYWJzKG9iai53aWR0aCB8fCAxMDApO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGguYWJzKG9iai5oZWlnaHQgfHwgMTAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgIHsvKiDwn5+qIEZvcm1hICovfVxyXG4gICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgIHsuLi5wcm9wc0Zvcm1hfVxyXG4gICAgICAgICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cclxuICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XHJcbiAgICAgICAgICAgICAgd2lkdGg9e3dpZHRofVxyXG4gICAgICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxyXG4gICAgICAgICAgICAgIGNvcm5lclJhZGl1cz17b2JqLmNvcm5lclJhZGl1cyB8fCAwfVxyXG4gICAgICAgICAgICAgIHN0cm9rZT17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyBcIiM3NzNkYmVcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICBzdHJva2VXaWR0aD17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyAxIDogMH1cclxuICAgICAgICAgICAgICAvLyDwn5ax77iPIERvYmxlIGNsaWNrIHBhcmEgZW50cmFyIGVuIGVkaWNpw7NuIGlubGluZVxyXG4gICAgICAgICAgICAgIG9uRGJsQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAob25TdGFydFRleHRFZGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgIG9uU3RhcnRUZXh0RWRpdChvYmouaWQsIG9iai50ZXh0byB8fCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIG9uRGJsVGFwPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uU3RhcnRUZXh0RWRpdCkge1xyXG4gICAgICAgICAgICAgICAgICBvblN0YXJ0VGV4dEVkaXQob2JqLmlkLCBvYmoudGV4dG8gfHwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAvLyDwn5qaIFNpbmNyb25pemFyIGVsIHRleHRvIG1pZW50cmFzIHNlIGFycmFzdHJhIGxhIGZvcm1hXHJcbiAgICAgICAgICAgICAgb25EcmFnTW92ZT17KGUpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIE1hbnRlbmVyIGN1YWxxdWllciBsw7NnaWNhIGRlIGRyYWcgb3JpZ2luYWwgcXVlIHZlbmdhIGRlIGNvbW1vblByb3BzXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BzRm9ybWEub25EcmFnTW92ZSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIHByb3BzRm9ybWEub25EcmFnTW92ZShlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHgsIHkgfSA9IGUudGFyZ2V0LnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFnZSA9IGUudGFyZ2V0LmdldFN0YWdlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b05vZGUgPSBzdGFnZT8uZmluZE9uZShgIyR7b2JqLmlkfS10ZXh0YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0b05vZGUueCh4KTtcclxuICAgICAgICAgICAgICAgICAgdGV4dG9Ob2RlLnkoeSk7XHJcbiAgICAgICAgICAgICAgICAgIHRleHRvTm9kZS5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIG9uRHJhZ0VuZD17KGUpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIE1hbnRlbmVyIGzDs2dpY2Egb3JpZ2luYWwgZGUgZHJhZ0VuZCAoZ3VhcmRhciBwb3NpY2nDs24sIGRyYWcgZ3J1cGFsLCBldGMuKVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wc0Zvcm1hLm9uRHJhZ0VuZCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIHByb3BzRm9ybWEub25EcmFnRW5kKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gZS50YXJnZXQucG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTm9kZSA9IHN0YWdlPy5maW5kT25lKGAjJHtvYmouaWR9LXRleHRgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dG9Ob2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRleHRvTm9kZS54KHgpO1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0b05vZGUueSh5KTtcclxuICAgICAgICAgICAgICAgICAgdGV4dG9Ob2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICB7Lyog4pyP77iPIFRleHRvIGVuY2ltYSBkZSBsYSBmb3JtYSAqL31cclxuICAgICAgICAgICAge29iai50ZXh0byAmJiAoXHJcbiAgICAgICAgICAgICAgPFRleHRcclxuICAgICAgICAgICAgICAgIGlkPXtgJHtvYmouaWR9LXRleHRgfSAgICAgICAgICAvLyDwn5GIIGlkIHBhcmEgcG9kZXIgZW5jb250cmFybG8gZGVzZGUgZWwgUmVjdFxyXG4gICAgICAgICAgICAgICAgcmVmPXsobm9kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAocmVnaXN0ZXJSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlclJlZihgJHtvYmouaWR9LXRleHRgLCBub2RlIHx8IG51bGwpOyAvLyBzZWd1w61zIHVzYW5kbyB0dSBzaXN0ZW1hIGRlIHJlZnNcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIHg9e29iai54fVxyXG4gICAgICAgICAgICAgICAgeT17b2JqLnl9XHJcbiAgICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ9e2hlaWdodH1cclxuICAgICAgICAgICAgICAgIHRleHQ9e29iai50ZXh0b31cclxuICAgICAgICAgICAgICAgIGZvbnRTaXplPXtub3JtYWxpemVGb250U2l6ZShvYmouZm9udFNpemUsIDI0KX1cclxuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk9e29iai5mb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwifVxyXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodD17b2JqLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn1cclxuICAgICAgICAgICAgICAgIGZvbnRTdHlsZT17cmVzb2x2ZUtvbnZhRm9udFN0eWxlKG9iai5mb250U3R5bGUgfHwgXCJub3JtYWxcIiwgb2JqLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIil9XHJcbiAgICAgICAgICAgICAgICB0ZXh0RGVjb3JhdGlvbj17b2JqLnRleHREZWNvcmF0aW9uIHx8IFwibm9uZVwifVxyXG4gICAgICAgICAgICAgICAgZmlsbD17b2JqLmNvbG9yVGV4dG8gfHwgXCIjMDAwMDAwXCJ9XHJcbiAgICAgICAgICAgICAgICBhbGlnbj17b2JqLmFsaWduIHx8IFwiY2VudGVyXCJ9XHJcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduPVwibWlkZGxlXCJcclxuICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9ICAgICAgICAgICAgICAvLyDwn5GIIGVsIHRleHRvIG5vIHJvYmEgZXZlbnRvcywgbG9zIHJlY2liZSBlbCBSZWN0XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5PXtpc0luRWRpdE1vZGUgPyAwIDogMX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC8+XHJcbiAgICAgICAgKTtcclxuXHJcblxyXG4gICAgICBjYXNlIFwiY2lyY2xlXCI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIDxDaXJjbGVcclxuICAgICAgICAgICAgey4uLnByb3BzRm9ybWF9XHJcbiAgICAgICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgICAgICByYWRpdXM9e29iai5yYWRpdXMgfHwgNTB9XHJcbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cclxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxyXG4gICAgICAgICAgICBzdHJva2U9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gXCIjNzczZGJlXCIgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDEgOiAwfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgY2FzZSBcInRyaWFuZ2xlXCI6XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIDxSZWd1bGFyUG9seWdvblxyXG4gICAgICAgICAgICB7Li4ucHJvcHNGb3JtYX1cclxuICAgICAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XHJcbiAgICAgICAgICAgIHNpZGVzPXszfVxyXG4gICAgICAgICAgICByYWRpdXM9e29iai5yYWRpdXMgfHwgNjB9XHJcbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17aGFuZGxlTW91c2VFbnRlcn1cclxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxyXG4gICAgICAgICAgICBzdHJva2U9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gXCIjNzczZGJlXCIgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDEgOiAwfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG4iXSwibmFtZXMiOlsiVGV4dCIsIkltYWdlIiwiS29udmFJbWFnZSIsIlJlY3QiLCJDaXJjbGUiLCJMaW5lIiwiUmVndWxhclBvbHlnb24iLCJQYXRoIiwiR3JvdXAiLCJ1c2VJbWFnZSIsInVzZVN0YXRlIiwidXNlUmVmIiwidXNlTWVtbyIsInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwiTElORV9DT05TVEFOVFMiLCJwcmV2aWV3RHJhZ0dydXBhbCIsInN0YXJ0RHJhZ0dydXBhbExpZGVyIiwiZW5kRHJhZ0dydXBhbCIsInN0YXJ0RHJhZ0luZGl2aWR1YWwiLCJwcmV2aWV3RHJhZ0luZGl2aWR1YWwiLCJlbmREcmFnSW5kaXZpZHVhbCIsImdldENlbnRlcmVkVGV4dFBvc2l0aW9uIiwibm9ybWFsaXplRm9udFNpemUiLCJ2YWx1ZSIsImZhbGxiYWNrIiwicGFyc2VkIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJpc0JvbGRGb250V2VpZ2h0Iiwid2VpZ2h0Iiwibm9ybWFsaXplZCIsIlN0cmluZyIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJyZXNvbHZlS29udmFGb250U3R5bGUiLCJmb250U3R5bGUiLCJmb250V2VpZ2h0Iiwic3R5bGUiLCJpc0l0YWxpYyIsImlzQm9sZCIsIkVsZW1lbnRvQ2FudmFzIiwib2JqIiwiaXNTZWxlY3RlZCIsImlzSW5FZGl0TW9kZSIsIm9uU2VsZWN0Iiwib25DaGFuZ2UiLCJlZGl0aW5nSWQiLCJyZWdpc3RlclJlZiIsIm9uSG92ZXIiLCJwcmVTZWxlY2Npb25hZG8iLCJzZWxlY3Rpb25Db3VudCIsIm9uRHJhZ01vdmVQZXJzb25hbGl6YWRvIiwib25EcmFnU3RhcnRQZXJzb25hbGl6YWRvIiwib25EcmFnRW5kUGVyc29uYWxpemFkbyIsImRyYWdTdGFydFBvcyIsImhhc0RyYWdnZWQiLCJvblN0YXJ0VGV4dEVkaXQiLCJlZGl0aW5nTW9kZSIsImlubGluZU92ZXJsYXlNb3VudGVkSWQiLCJpbmxpbmVWaXNpYmlsaXR5TW9kZSIsImltZyIsInNyYyIsIm1lYXN1cmVkVGV4dFdpZHRoIiwic2V0TWVhc3VyZWRUZXh0V2lkdGgiLCJ0ZXh0Tm9kZVJlZiIsImJhc2VUZXh0TGF5b3V0UmVmIiwiaGFuZGxlQ2hhbmdlIiwiaWQiLCJuZXdEYXRhIiwiZnJvbUF1dG9GaXgiLCJoYW5kbGVSZWYiLCJub2RlIiwiaGFuZGxlQ2xpY2siLCJlIiwiY2FuY2VsQnViYmxlIiwiY3VycmVudCIsInRpcG8iLCJ0ZXh0byIsImZpZ3VyYSIsImNvbW1vblByb3BzIiwieCIsInkiLCJyb3RhdGlvbiIsInNjYWxlWCIsInNjYWxlWSIsImRyYWdnYWJsZSIsImxpc3RlbmluZyIsIm9uTW91c2VEb3duIiwiY3VycmVudFRhcmdldCIsIm9uTW91c2VVcCIsIm9uQ2xpY2siLCJvblRhcCIsIm9uRHJhZ1N0YXJ0Iiwid2luZG93IiwiX2RyYWdDb3VudCIsIl9sYXN0TW91c2UiLCJfbGFzdEVsZW1lbnQiLCJfaXNEcmFnZ2luZyIsImZ1ZUdydXBhbCIsIm9uRHJhZ01vdmUiLCJzdGFnZSIsInRhcmdldCIsImdldFN0YWdlIiwibW91c2VQb3MiLCJnZXRQb2ludGVyUG9zaXRpb24iLCJlbGVtZW50UG9zIiwiX2dydXBvTGlkZXIiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwiX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJvbkRyYWdFbmQiLCJoYW5kbGVNb3VzZUVudGVyIiwiaGFuZGxlTW91c2VMZWF2ZSIsInJlY2FsY0dyb3VwQWxpZ24iLCJfX2dyb3VwQWxpZ24iLCJfX2dyb3VwSWQiLCJyZWZzIiwiX2VsZW1lbnRSZWZzIiwiZ2V0T2JqIiwiX19nZXRPYmpCeUlkIiwibWF4VyIsInRoaXNXIiwiT2JqZWN0IiwiZW50cmllcyIsIm8iLCJ3IiwiZ2V0VGV4dFdpZHRoIiwiTWF0aCIsImNlaWwiLCJiYXNlWCIsIl9fZ3JvdXBPcmlnaW5YIiwidGFyZ2V0WCIsImFicyIsInIxIiwicjIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImlzQXV0b1dpZHRoIiwid2lkdGgiLCJfX2F1dG9XaWR0aCIsInJhZjEiLCJyYWYyIiwid1JlYWwiLCJsaW5lSGVpZ2h0IiwiZ3JvdXBSZWYiLCJjb2xvciIsImNhY2hlIiwiZ2V0TGF5ZXIiLCJiYXRjaERyYXciLCJwYXJzZVZpZXdCb3giLCJ2YiIsInBhcnRzIiwidHJpbSIsInNwbGl0IiwibWFwIiwibGVuZ3RoIiwic29tZSIsIm4iLCJpc05hTiIsIm1pblgiLCJtaW5ZIiwidmJXaWR0aCIsInZiSGVpZ2h0IiwibGluZVBvaW50cyIsInBvaW50cyIsInBvaW50c0ZpeGVkIiwiQXJyYXkiLCJpc0FycmF5IiwiREVGQVVMVF9MRU5HVEgiLCJwdW50b3NWYWxpZGFkb3MiLCJpIiwicHVudG8iLCJwYXJzZUZsb2F0IiwicHVzaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzbGljZSIsInNldFRpbWVvdXQiLCJyZWYiLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlTGVhdmUiLCJzdHJva2UiLCJERUZBVUxUX0NPTE9SIiwic3Ryb2tlV2lkdGgiLCJTVFJPS0VfV0lEVEgiLCJ0ZW5zaW9uIiwibGluZUNhcCIsImxpbmVKb2luIiwicGVyZmVjdERyYXdFbmFibGVkIiwiaGl0U3Ryb2tlV2lkdGgiLCJtYXgiLCJISVRfU1RST0tFX1dJRFRIIiwic2hhZG93Rm9yU3Ryb2tlRW5hYmxlZCIsIm9wYWNpdHkiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXQiLCJ2aXNpYmlsaXR5TW9kZSIsImlzRWRpdGluZ0J5V2luZG93IiwiX2N1cnJlbnRFZGl0aW5nSWQiLCJpc0VkaXRpbmdCeVJlYWN0aXZlIiwib3ZlcmxheURvbVByZXNlbnRMb29zZSIsImRvY3VtZW50Iiwic2FmZUlkIiwicmVwbGFjZSIsIkJvb2xlYW4iLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheURvbVByZXNlbnQiLCJpc0VkaXRpbmdCeU92ZXJsYXkiLCJpc0VkaXRpbmciLCJhbGlnbiIsImZpbGxDb2xvciIsImNvbG9yVGV4dG8iLCJmaWxsIiwiYmFzZUxpbmVIZWlnaHQiLCJyYXdUZXh0Iiwic2FmZVRleHQiLCJ2YWxpZFgiLCJ2YWxpZFkiLCJ2YWxpZEZvbnRTaXplIiwidGV4dERlY29yYXRpb24iLCJjdHgiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImtvbnZhRm9udFN0eWxlIiwiZm9udEZvckNhbnZhcyIsInRlc3QiLCJmb250IiwibGluZXMiLCJtYXhMaW5lV2lkdGgiLCJsaW5lIiwibWVhc3VyZVRleHQiLCJudW1MaW5lcyIsInRleHRXaWR0aCIsInRleHRIZWlnaHQiLCJwb3NpdGlvblJhdyIsInJlY3RZIiwicmVjdEhlaWdodCIsInJlY3RDZW50ZXIiLCJiYXNlbGluZVRvQ2VudGVyIiwiYmFzZWxpbmUiLCJhc2NlbnQiLCJkZXNjZW50IiwiYmFzZSIsInJlY3RDZW50ZXJGaXhlZCIsImJhc2VsaW5lWSIsInRleHRUb3BGaXhlZCIsInBvc2l0aW9uIiwidGV4dFRvcCIsImNvbnNvbGUiLCJ3YXJuIiwiQU5DSE9fQ0FOVkFTIiwiYXZhaWxhYmxlV2lkdGgiLCJyZWFsVGV4dFdpZHRoIiwic2hvdWxkV3JhcFRvQ2FudmFzRWRnZSIsIndyYXBUb1VzZSIsIndpZHRoVG9Vc2UiLCJ1bmRlZmluZWQiLCJpbmxpbmVDYXJldE9ubHlNb2RlIiwiYXBwbGllZE9wYWNpdHkiLCJ0ZXh0Iiwid3JhcCIsInZlcnRpY2FsQWxpZ24iLCJhbmNobyIsImhlaWdodCIsImFsdG8iLCJjb3JuZXJSYWRpdXMiLCJudWV2YVBvcyIsInRleHRvTm9kZSIsImltYWdlIiwiY3Jvc3NPcmlnaW4iLCJmb3JtYXRvIiwicGF0aHMiLCJXIiwiSCIsInZpZXdCb3giLCJzaG93SWNvblNlbGVjdGlvbkZyYW1lIiwicCIsImRhdGEiLCJkIiwidXJsIiwiY29udGFpbmVyIiwiY3Vyc29yIiwic2hvd0xlZ2FjeUljb25TZWxlY3Rpb25GcmFtZSIsIm9uVHJhbnNmb3JtRW5kIiwic2NhbGVYTm9kZSIsInNjYWxlWU5vZGUiLCJwYXRjaCIsImlzRmluYWwiLCJwcm9wc0Zvcm1hIiwib25EYmxDbGljayIsIm9uRGJsVGFwIiwiZmluZE9uZSIsInJhZGl1cyIsInNpZGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/ElementoCanvas.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/FontSelector.jsx":
/*!*****************************************!*\
  !*** ./src/components/FontSelector.jsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _barrel_optimize_names_Check_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Check!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=Check!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _utils_fontManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/fontManager */ \"(pages-dir-node)/./src/utils/fontManager.js\");\n/* harmony import */ var _config_fonts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config/fonts */ \"(pages-dir-node)/./src/config/fonts.js\");\n\n\n\n\n\n\nconst INITIAL_PRELOAD_COUNT = 8;\nconst FontSelector = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(({ currentFont, onFontChange, isOpen, onClose, panelStyle = null })=>{\n    const [searchTerm, setSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const selectedCategory = 'all';\n    const [applyingFont, setApplyingFont] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const applyRequestRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const filteredFonts = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"FontSelector.useMemo[filteredFonts]\": ()=>_config_fonts__WEBPACK_IMPORTED_MODULE_4__.ALL_FONTS.filter({\n                \"FontSelector.useMemo[filteredFonts]\": (font)=>{\n                    const matchesSearch = font.nombre.toLowerCase().includes(searchTerm.toLowerCase());\n                    const matchesCategory = selectedCategory === 'all' || font.categoria === selectedCategory;\n                    return matchesSearch && matchesCategory;\n                }\n            }[\"FontSelector.useMemo[filteredFonts]\"])\n    }[\"FontSelector.useMemo[filteredFonts]\"], [\n        searchTerm,\n        selectedCategory\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontSelector.useEffect\": ()=>{\n            setIsClient(true);\n        }\n    }[\"FontSelector.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontSelector.useEffect\": ()=>{\n            if (!isOpen) return;\n            const handleClickOutside = {\n                \"FontSelector.useEffect.handleClickOutside\": (event)=>{\n                    if (containerRef.current && !containerRef.current.contains(event.target)) {\n                        onClose();\n                    }\n                }\n            }[\"FontSelector.useEffect.handleClickOutside\"];\n            document.addEventListener('mousedown', handleClickOutside);\n            return ({\n                \"FontSelector.useEffect\": ()=>document.removeEventListener('mousedown', handleClickOutside)\n            })[\"FontSelector.useEffect\"];\n        }\n    }[\"FontSelector.useEffect\"], [\n        isOpen,\n        onClose\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontSelector.useEffect\": ()=>{\n            if (!isOpen) return;\n            const fontsToWarm = filteredFonts.slice(0, INITIAL_PRELOAD_COUNT).map({\n                \"FontSelector.useEffect.fontsToWarm\": (font)=>font.valor\n            }[\"FontSelector.useEffect.fontsToWarm\"]);\n            if (!fontsToWarm.length) return;\n            void _utils_fontManager__WEBPACK_IMPORTED_MODULE_3__.fontManager.loadFonts(fontsToWarm);\n        }\n    }[\"FontSelector.useEffect\"], [\n        isOpen,\n        filteredFonts\n    ]);\n    const handleSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FontSelector.useCallback[handleSelect]\": async (fontValue)=>{\n            if (!fontValue) return;\n            const requestId = applyRequestRef.current + 1;\n            applyRequestRef.current = requestId;\n            setApplyingFont(fontValue);\n            try {\n                await onFontChange(fontValue);\n            } finally{\n                if (applyRequestRef.current === requestId) {\n                    setApplyingFont(null);\n                }\n            }\n        }\n    }[\"FontSelector.useCallback[handleSelect]\"], [\n        onFontChange\n    ]);\n    const panelNode = /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        className: `${panelStyle ? \"fixed\" : \"absolute top-full left-0 mt-2\"} bg-white border border-gray-200 rounded-2xl shadow-xl p-4 w-80 max-h-[500px] overflow-hidden popup-fuente z-50 ${isOpen ? 'block' : 'hidden'}`,\n        style: panelStyle || undefined,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"text\",\n                placeholder: \"Buscar fuente...\",\n                value: searchTerm,\n                onChange: (event)=>setSearchTerm(event.target.value),\n                className: \"w-full px-3 py-2 border rounded-lg text-sm mb-3\",\n                autoFocus: true\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 90,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"overflow-y-auto max-h-[350px] -mx-2 px-2\",\n                children: filteredFonts.length > 0 ? filteredFonts.map((fuente)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FontItem, {\n                        font: fuente,\n                        isActive: currentFont === fuente.valor,\n                        isApplying: applyingFont === fuente.valor,\n                        isDisabled: applyingFont === fuente.valor,\n                        onSelect: ()=>handleSelect(fuente.valor)\n                    }, fuente.valor, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 102,\n                        columnNumber: 13\n                    }, undefined)) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"text-gray-500 text-center py-4\",\n                    children: \"No se encontraron fuentes\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                    lineNumber: 112,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 99,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n        lineNumber: 83,\n        columnNumber: 5\n    }, undefined);\n    if (panelStyle && isClient && typeof document !== \"undefined\") {\n        return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(panelNode, document.body);\n    }\n    return panelNode;\n});\nconst FontItem = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(({ font, isActive, onSelect, isApplying, isDisabled })=>{\n    const [isLoaded, setIsLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        \"FontItem.useState\": ()=>_utils_fontManager__WEBPACK_IMPORTED_MODULE_3__.fontManager.isFontAvailable(font.valor)\n    }[\"FontItem.useState\"]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [loadFailed, setLoadFailed] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const itemRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const loadPreviewFont = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FontItem.useCallback[loadPreviewFont]\": async ()=>{\n            if (isLoaded || isLoading) return isLoaded;\n            setIsLoading(true);\n            setLoadFailed(false);\n            try {\n                const result = await _utils_fontManager__WEBPACK_IMPORTED_MODULE_3__.fontManager.loadFonts([\n                    font.valor\n                ]);\n                const hasFailure = Array.isArray(result?.failed) && result.failed.length > 0;\n                const ready = _utils_fontManager__WEBPACK_IMPORTED_MODULE_3__.fontManager.isFontAvailable(font.valor);\n                setIsLoaded(ready);\n                setLoadFailed(!ready && hasFailure);\n                return ready;\n            } catch  {\n                setLoadFailed(true);\n                return false;\n            } finally{\n                setIsLoading(false);\n            }\n        }\n    }[\"FontItem.useCallback[loadPreviewFont]\"], [\n        font.valor,\n        isLoaded,\n        isLoading\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontItem.useEffect\": ()=>{\n            setIsLoaded(_utils_fontManager__WEBPACK_IMPORTED_MODULE_3__.fontManager.isFontAvailable(font.valor));\n            setLoadFailed(false);\n        }\n    }[\"FontItem.useEffect\"], [\n        font.valor\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FontItem.useEffect\": ()=>{\n            if (!itemRef.current || isLoaded) return;\n            if (typeof IntersectionObserver === 'undefined') {\n                void loadPreviewFont();\n                return;\n            }\n            const observer = new IntersectionObserver({\n                \"FontItem.useEffect\": (entries)=>{\n                    const entry = entries[0];\n                    if (!entry?.isIntersecting) return;\n                    void loadPreviewFont();\n                    observer.disconnect();\n                }\n            }[\"FontItem.useEffect\"], {\n                threshold: 0.15,\n                rootMargin: '120px 0px'\n            });\n            observer.observe(itemRef.current);\n            return ({\n                \"FontItem.useEffect\": ()=>observer.disconnect()\n            })[\"FontItem.useEffect\"];\n        }\n    }[\"FontItem.useEffect\"], [\n        isLoaded,\n        loadPreviewFont\n    ]);\n    const handleClick = async ()=>{\n        if (isDisabled) return;\n        if (!isLoaded && !isLoading) {\n            void loadPreviewFont();\n        }\n        await onSelect();\n    };\n    const showSpinner = isLoading || isApplying;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: itemRef,\n        onClick: handleClick,\n        onMouseEnter: ()=>{\n            if (!isLoaded && !isLoading) {\n                void loadPreviewFont();\n            }\n        },\n        className: `flex items-center justify-between px-3 py-2 rounded-md transition-colors duration-150 ${isDisabled ? 'opacity-60 cursor-not-allowed' : 'cursor-pointer'} ${isActive ? 'bg-purple-50' : 'hover:bg-gray-50'}`,\n        title: font.valor,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col flex-1 min-w-0\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-sm text-gray-800 truncate\",\n                        style: {\n                            fontFamily: font.valor\n                        },\n                        children: font.nombre\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 209,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-[11px] text-gray-500\",\n                        children: font.categoria\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 215,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 208,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2 ml-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-lg text-gray-400\",\n                        style: {\n                            fontFamily: font.valor,\n                            lineHeight: 1\n                        },\n                        children: \"AaBbCc\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 219,\n                        columnNumber: 9\n                    }, undefined),\n                    showSpinner && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 230,\n                        columnNumber: 11\n                    }, undefined),\n                    !showSpinner && isActive && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Check_lucide_react__WEBPACK_IMPORTED_MODULE_5__.Check, {\n                        className: \"w-4 h-4 text-purple-600\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 233,\n                        columnNumber: 38\n                    }, undefined),\n                    !showSpinner && loadFailed && !isLoaded && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-[10px] text-amber-600\",\n                        children: \"Lento\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                        lineNumber: 236,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n                lineNumber: 218,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\FontSelector.jsx\",\n        lineNumber: 195,\n        columnNumber: 5\n    }, undefined);\n});\nFontItem.displayName = 'FontItem';\nFontSelector.displayName = 'FontSelector';\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FontSelector);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0ZvbnRTZWxlY3Rvci5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Y7QUFDdkM7QUFDSjtBQUNjO0FBQ1A7QUFFNUMsTUFBTVUsd0JBQXdCO0FBRTlCLE1BQU1DLDZCQUFlTiwyQ0FBSUEsQ0FBQyxDQUFDLEVBQ3pCTyxXQUFXLEVBQ1hDLFlBQVksRUFDWkMsTUFBTSxFQUNOQyxPQUFPLEVBQ1BDLGFBQWEsSUFBSSxFQUNsQjtJQUNDLE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHbEIsK0NBQVFBLENBQUM7SUFDN0MsTUFBTW1CLG1CQUFtQjtJQUN6QixNQUFNLENBQUNDLGNBQWNDLGdCQUFnQixHQUFHckIsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDc0IsVUFBVUMsWUFBWSxHQUFHdkIsK0NBQVFBLENBQUM7SUFDekMsTUFBTXdCLGVBQWV0Qiw2Q0FBTUEsQ0FBQztJQUM1QixNQUFNdUIsa0JBQWtCdkIsNkNBQU1BLENBQUM7SUFFL0IsTUFBTXdCLGdCQUFnQnZCLDhDQUFPQTsrQ0FDM0IsSUFDRU0sb0RBQVNBLENBQUNrQixNQUFNO3VEQUFDLENBQUNDO29CQUNoQixNQUFNQyxnQkFBZ0JELEtBQUtFLE1BQU0sQ0FDOUJDLFdBQVcsR0FDWEMsUUFBUSxDQUFDZixXQUFXYyxXQUFXO29CQUNsQyxNQUFNRSxrQkFDSmQscUJBQXFCLFNBQVNTLEtBQUtNLFNBQVMsS0FBS2Y7b0JBQ25ELE9BQU9VLGlCQUFpQkk7Z0JBQzFCOzs4Q0FDRjtRQUFDaEI7UUFBWUU7S0FBaUI7SUFHaENsQixnREFBU0E7a0NBQUM7WUFDUnNCLFlBQVk7UUFDZDtpQ0FBRyxFQUFFO0lBRUx0QixnREFBU0E7a0NBQUM7WUFDUixJQUFJLENBQUNhLFFBQVE7WUFFYixNQUFNcUI7NkRBQXFCLENBQUNDO29CQUMxQixJQUFJWixhQUFhYSxPQUFPLElBQUksQ0FBQ2IsYUFBYWEsT0FBTyxDQUFDQyxRQUFRLENB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YVxcc3JjXFxjb21wb25lbnRzXFxGb250U2VsZWN0b3IuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlTWVtbywgdXNlQ2FsbGJhY2ssIG1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjcmVhdGVQb3J0YWwgfSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyBDaGVjayB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyBmb250TWFuYWdlciB9IGZyb20gJy4uL3V0aWxzL2ZvbnRNYW5hZ2VyJztcbmltcG9ydCB7IEFMTF9GT05UUyB9IGZyb20gJy4uL2NvbmZpZy9mb250cyc7XG5cbmNvbnN0IElOSVRJQUxfUFJFTE9BRF9DT1VOVCA9IDg7XG5cbmNvbnN0IEZvbnRTZWxlY3RvciA9IG1lbW8oKHtcbiAgY3VycmVudEZvbnQsXG4gIG9uRm9udENoYW5nZSxcbiAgaXNPcGVuLFxuICBvbkNsb3NlLFxuICBwYW5lbFN0eWxlID0gbnVsbCxcbn0pID0+IHtcbiAgY29uc3QgW3NlYXJjaFRlcm0sIHNldFNlYXJjaFRlcm1dID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gJ2FsbCc7XG4gIGNvbnN0IFthcHBseWluZ0ZvbnQsIHNldEFwcGx5aW5nRm9udF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2lzQ2xpZW50LCBzZXRJc0NsaWVudF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYXBwbHlSZXF1ZXN0UmVmID0gdXNlUmVmKDApO1xuXG4gIGNvbnN0IGZpbHRlcmVkRm9udHMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBBTExfRk9OVFMuZmlsdGVyKChmb250KSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXNTZWFyY2ggPSBmb250Lm5vbWJyZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGNvbnN0IG1hdGNoZXNDYXRlZ29yeSA9XG4gICAgICAgICAgc2VsZWN0ZWRDYXRlZ29yeSA9PT0gJ2FsbCcgfHwgZm9udC5jYXRlZ29yaWEgPT09IHNlbGVjdGVkQ2F0ZWdvcnk7XG4gICAgICAgIHJldHVybiBtYXRjaGVzU2VhcmNoICYmIG1hdGNoZXNDYXRlZ29yeTtcbiAgICAgIH0pLFxuICAgIFtzZWFyY2hUZXJtLCBzZWxlY3RlZENhdGVnb3J5XVxuICApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNDbGllbnQodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNPcGVuKSByZXR1cm47XG5cbiAgICBjb25zdCBoYW5kbGVDbGlja091dHNpZGUgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChjb250YWluZXJSZWYuY3VycmVudCAmJiAhY29udGFpbmVyUmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICBvbkNsb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrT3V0c2lkZSk7XG4gIH0sIFtpc09wZW4sIG9uQ2xvc2VdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNPcGVuKSByZXR1cm47XG5cbiAgICBjb25zdCBmb250c1RvV2FybSA9IGZpbHRlcmVkRm9udHNcbiAgICAgIC5zbGljZSgwLCBJTklUSUFMX1BSRUxPQURfQ09VTlQpXG4gICAgICAubWFwKChmb250KSA9PiBmb250LnZhbG9yKTtcblxuICAgIGlmICghZm9udHNUb1dhcm0ubGVuZ3RoKSByZXR1cm47XG4gICAgdm9pZCBmb250TWFuYWdlci5sb2FkRm9udHMoZm9udHNUb1dhcm0pO1xuICB9LCBbaXNPcGVuLCBmaWx0ZXJlZEZvbnRzXSk7XG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0ID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKGZvbnRWYWx1ZSkgPT4ge1xuICAgICAgaWYgKCFmb250VmFsdWUpIHJldHVybjtcblxuICAgICAgY29uc3QgcmVxdWVzdElkID0gYXBwbHlSZXF1ZXN0UmVmLmN1cnJlbnQgKyAxO1xuICAgICAgYXBwbHlSZXF1ZXN0UmVmLmN1cnJlbnQgPSByZXF1ZXN0SWQ7XG4gICAgICBzZXRBcHBseWluZ0ZvbnQoZm9udFZhbHVlKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG9uRm9udENoYW5nZShmb250VmFsdWUpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGFwcGx5UmVxdWVzdFJlZi5jdXJyZW50ID09PSByZXF1ZXN0SWQpIHtcbiAgICAgICAgICBzZXRBcHBseWluZ0ZvbnQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIFtvbkZvbnRDaGFuZ2VdXG4gICk7XG5cbiAgY29uc3QgcGFuZWxOb2RlID0gKFxuICAgIDxkaXZcbiAgICAgIHJlZj17Y29udGFpbmVyUmVmfVxuICAgICAgY2xhc3NOYW1lPXtgJHtwYW5lbFN0eWxlID8gXCJmaXhlZFwiIDogXCJhYnNvbHV0ZSB0b3AtZnVsbCBsZWZ0LTAgbXQtMlwifSBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHJvdW5kZWQtMnhsIHNoYWRvdy14bCBwLTQgdy04MCBtYXgtaC1bNTAwcHhdIG92ZXJmbG93LWhpZGRlbiBwb3B1cC1mdWVudGUgei01MCAke1xuICAgICAgICBpc09wZW4gPyAnYmxvY2snIDogJ2hpZGRlbidcbiAgICAgIH1gfVxuICAgICAgc3R5bGU9e3BhbmVsU3R5bGUgfHwgdW5kZWZpbmVkfVxuICAgID5cbiAgICAgIDxpbnB1dFxuICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiQnVzY2FyIGZ1ZW50ZS4uLlwiXG4gICAgICAgIHZhbHVlPXtzZWFyY2hUZXJtfVxuICAgICAgICBvbkNoYW5nZT17KGV2ZW50KSA9PiBzZXRTZWFyY2hUZXJtKGV2ZW50LnRhcmdldC52YWx1ZSl9XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIHJvdW5kZWQtbGcgdGV4dC1zbSBtYi0zXCJcbiAgICAgICAgYXV0b0ZvY3VzXG4gICAgICAvPlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm92ZXJmbG93LXktYXV0byBtYXgtaC1bMzUwcHhdIC1teC0yIHB4LTJcIj5cbiAgICAgICAge2ZpbHRlcmVkRm9udHMubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICBmaWx0ZXJlZEZvbnRzLm1hcCgoZnVlbnRlKSA9PiAoXG4gICAgICAgICAgICA8Rm9udEl0ZW1cbiAgICAgICAgICAgICAga2V5PXtmdWVudGUudmFsb3J9XG4gICAgICAgICAgICAgIGZvbnQ9e2Z1ZW50ZX1cbiAgICAgICAgICAgICAgaXNBY3RpdmU9e2N1cnJlbnRGb250ID09PSBmdWVudGUudmFsb3J9XG4gICAgICAgICAgICAgIGlzQXBwbHlpbmc9e2FwcGx5aW5nRm9udCA9PT0gZnVlbnRlLnZhbG9yfVxuICAgICAgICAgICAgICBpc0Rpc2FibGVkPXthcHBseWluZ0ZvbnQgPT09IGZ1ZW50ZS52YWxvcn1cbiAgICAgICAgICAgICAgb25TZWxlY3Q9eygpID0+IGhhbmRsZVNlbGVjdChmdWVudGUudmFsb3IpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApKVxuICAgICAgICApIDogKFxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDAgdGV4dC1jZW50ZXIgcHktNFwiPk5vIHNlIGVuY29udHJhcm9uIGZ1ZW50ZXM8L3A+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcblxuICBpZiAocGFuZWxTdHlsZSAmJiBpc0NsaWVudCAmJiB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4gY3JlYXRlUG9ydGFsKHBhbmVsTm9kZSwgZG9jdW1lbnQuYm9keSk7XG4gIH1cblxuICByZXR1cm4gcGFuZWxOb2RlO1xufSk7XG5cbmNvbnN0IEZvbnRJdGVtID0gbWVtbygoeyBmb250LCBpc0FjdGl2ZSwgb25TZWxlY3QsIGlzQXBwbHlpbmcsIGlzRGlzYWJsZWQgfSkgPT4ge1xuICBjb25zdCBbaXNMb2FkZWQsIHNldElzTG9hZGVkXSA9IHVzZVN0YXRlKCgpID0+XG4gICAgZm9udE1hbmFnZXIuaXNGb250QXZhaWxhYmxlKGZvbnQudmFsb3IpXG4gICk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2FkRmFpbGVkLCBzZXRMb2FkRmFpbGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgaXRlbVJlZiA9IHVzZVJlZihudWxsKTtcblxuICBjb25zdCBsb2FkUHJldmlld0ZvbnQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKGlzTG9hZGVkIHx8IGlzTG9hZGluZykgcmV0dXJuIGlzTG9hZGVkO1xuXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgIHNldExvYWRGYWlsZWQoZmFsc2UpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZvbnRNYW5hZ2VyLmxvYWRGb250cyhbZm9udC52YWxvcl0pO1xuICAgICAgY29uc3QgaGFzRmFpbHVyZSA9IEFycmF5LmlzQXJyYXkocmVzdWx0Py5mYWlsZWQpICYmIHJlc3VsdC5mYWlsZWQubGVuZ3RoID4gMDtcbiAgICAgIGNvbnN0IHJlYWR5ID0gZm9udE1hbmFnZXIuaXNGb250QXZhaWxhYmxlKGZvbnQudmFsb3IpO1xuICAgICAgc2V0SXNMb2FkZWQocmVhZHkpO1xuICAgICAgc2V0TG9hZEZhaWxlZCghcmVhZHkgJiYgaGFzRmFpbHVyZSk7XG4gICAgICByZXR1cm4gcmVhZHk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBzZXRMb2FkRmFpbGVkKHRydWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2ZvbnQudmFsb3IsIGlzTG9hZGVkLCBpc0xvYWRpbmddKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldElzTG9hZGVkKGZvbnRNYW5hZ2VyLmlzRm9udEF2YWlsYWJsZShmb250LnZhbG9yKSk7XG4gICAgc2V0TG9hZEZhaWxlZChmYWxzZSk7XG4gIH0sIFtmb250LnZhbG9yXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWl0ZW1SZWYuY3VycmVudCB8fCBpc0xvYWRlZCkgcmV0dXJuO1xuXG4gICAgaWYgKHR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZvaWQgbG9hZFByZXZpZXdGb250KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbMF07XG4gICAgICAgIGlmICghZW50cnk/LmlzSW50ZXJzZWN0aW5nKSByZXR1cm47XG5cbiAgICAgICAgdm9pZCBsb2FkUHJldmlld0ZvbnQoKTtcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgfSxcbiAgICAgIHsgdGhyZXNob2xkOiAwLjE1LCByb290TWFyZ2luOiAnMTIwcHggMHB4JyB9XG4gICAgKTtcblxuICAgIG9ic2VydmVyLm9ic2VydmUoaXRlbVJlZi5jdXJyZW50KTtcbiAgICByZXR1cm4gKCkgPT4gb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICB9LCBbaXNMb2FkZWQsIGxvYWRQcmV2aWV3Rm9udF0pO1xuXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChpc0Rpc2FibGVkKSByZXR1cm47XG5cbiAgICBpZiAoIWlzTG9hZGVkICYmICFpc0xvYWRpbmcpIHtcbiAgICAgIHZvaWQgbG9hZFByZXZpZXdGb250KCk7XG4gICAgfVxuXG4gICAgYXdhaXQgb25TZWxlY3QoKTtcbiAgfTtcblxuICBjb25zdCBzaG93U3Bpbm5lciA9IGlzTG9hZGluZyB8fCBpc0FwcGx5aW5nO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgcmVmPXtpdGVtUmVmfVxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHtcbiAgICAgICAgaWYgKCFpc0xvYWRlZCAmJiAhaXNMb2FkaW5nKSB7XG4gICAgICAgICAgdm9pZCBsb2FkUHJldmlld0ZvbnQoKTtcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC0zIHB5LTIgcm91bmRlZC1tZCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTAgJHtcbiAgICAgICAgaXNEaXNhYmxlZCA/ICdvcGFjaXR5LTYwIGN1cnNvci1ub3QtYWxsb3dlZCcgOiAnY3Vyc29yLXBvaW50ZXInXG4gICAgICB9ICR7aXNBY3RpdmUgPyAnYmctcHVycGxlLTUwJyA6ICdob3ZlcjpiZy1ncmF5LTUwJ31gfVxuICAgICAgdGl0bGU9e2ZvbnQudmFsb3J9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktODAwIHRydW5jYXRlXCJcbiAgICAgICAgICBzdHlsZT17eyBmb250RmFtaWx5OiBmb250LnZhbG9yIH19XG4gICAgICAgID5cbiAgICAgICAgICB7Zm9udC5ub21icmV9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bMTFweF0gdGV4dC1ncmF5LTUwMFwiPntmb250LmNhdGVnb3JpYX08L3NwYW4+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtbC0yXCI+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1sZyB0ZXh0LWdyYXktNDAwXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgZm9udEZhbWlseTogZm9udC52YWxvcixcbiAgICAgICAgICAgIGxpbmVIZWlnaHQ6IDEsXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIEFhQmJDY1xuICAgICAgICA8L3NwYW4+XG5cbiAgICAgICAge3Nob3dTcGlubmVyICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNCBoLTQgYm9yZGVyLTIgYm9yZGVyLWdyYXktMzAwIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICApfVxuXG4gICAgICAgIHshc2hvd1NwaW5uZXIgJiYgaXNBY3RpdmUgJiYgPENoZWNrIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1wdXJwbGUtNjAwXCIgLz59XG5cbiAgICAgICAgeyFzaG93U3Bpbm5lciAmJiBsb2FkRmFpbGVkICYmICFpc0xvYWRlZCAmJiAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1bMTBweF0gdGV4dC1hbWJlci02MDBcIj5MZW50bzwvc3Bhbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufSk7XG5cbkZvbnRJdGVtLmRpc3BsYXlOYW1lID0gJ0ZvbnRJdGVtJztcbkZvbnRTZWxlY3Rvci5kaXNwbGF5TmFtZSA9ICdGb250U2VsZWN0b3InO1xuXG5leHBvcnQgZGVmYXVsdCBGb250U2VsZWN0b3I7XHJcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZU1lbW8iLCJ1c2VDYWxsYmFjayIsIm1lbW8iLCJjcmVhdGVQb3J0YWwiLCJDaGVjayIsImZvbnRNYW5hZ2VyIiwiQUxMX0ZPTlRTIiwiSU5JVElBTF9QUkVMT0FEX0NPVU5UIiwiRm9udFNlbGVjdG9yIiwiY3VycmVudEZvbnQiLCJvbkZvbnRDaGFuZ2UiLCJpc09wZW4iLCJvbkNsb3NlIiwicGFuZWxTdHlsZSIsInNlYXJjaFRlcm0iLCJzZXRTZWFyY2hUZXJtIiwic2VsZWN0ZWRDYXRlZ29yeSIsImFwcGx5aW5nRm9udCIsInNldEFwcGx5aW5nRm9udCIsImlzQ2xpZW50Iiwic2V0SXNDbGllbnQiLCJjb250YWluZXJSZWYiLCJhcHBseVJlcXVlc3RSZWYiLCJmaWx0ZXJlZEZvbnRzIiwiZmlsdGVyIiwiZm9udCIsIm1hdGNoZXNTZWFyY2giLCJub21icmUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwibWF0Y2hlc0NhdGVnb3J5IiwiY2F0ZWdvcmlhIiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiZXZlbnQiLCJjdXJyZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZm9udHNUb1dhcm0iLCJzbGljZSIsIm1hcCIsInZhbG9yIiwibGVuZ3RoIiwibG9hZEZvbnRzIiwiaGFuZGxlU2VsZWN0IiwiZm9udFZhbHVlIiwicmVxdWVzdElkIiwicGFuZWxOb2RlIiwiZGl2IiwicmVmIiwiY2xhc3NOYW1lIiwic3R5bGUiLCJ1bmRlZmluZWQiLCJpbnB1dCIsInR5cGUiLCJwbGFjZWhvbGRlciIsInZhbHVlIiwib25DaGFuZ2UiLCJhdXRvRm9jdXMiLCJmdWVudGUiLCJGb250SXRlbSIsImlzQWN0aXZlIiwiaXNBcHBseWluZyIsImlzRGlzYWJsZWQiLCJvblNlbGVjdCIsInAiLCJib2R5IiwiaXNMb2FkZWQiLCJzZXRJc0xvYWRlZCIsImlzRm9udEF2YWlsYWJsZSIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImxvYWRGYWlsZWQiLCJzZXRMb2FkRmFpbGVkIiwiaXRlbVJlZiIsImxvYWRQcmV2aWV3Rm9udCIsInJlc3VsdCIsImhhc0ZhaWx1cmUiLCJBcnJheSIsImlzQXJyYXkiLCJmYWlsZWQiLCJyZWFkeSIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwib2JzZXJ2ZXIiLCJlbnRyaWVzIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsImRpc2Nvbm5lY3QiLCJ0aHJlc2hvbGQiLCJyb290TWFyZ2luIiwib2JzZXJ2ZSIsImhhbmRsZUNsaWNrIiwic2hvd1NwaW5uZXIiLCJvbkNsaWNrIiwib25Nb3VzZUVudGVyIiwidGl0bGUiLCJzcGFuIiwiZm9udEZhbWlseSIsImxpbmVIZWlnaHQiLCJkaXNwbGF5TmFtZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/FontSelector.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/HoverIndicator.jsx":
/*!*******************************************!*\
  !*** ./src/components/HoverIndicator.jsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ HoverIndicator)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction HoverIndicator({ hoveredElement, elementRefs, objetos = [] }) {\n    if (!hoveredElement || !elementRefs?.current?.[hoveredElement]) return null;\n    const node = elementRefs.current[hoveredElement];\n    if (!node?.getStage?.()) return null;\n    const hoveredObj = Array.isArray(objetos) ? objetos.find((o)=>o.id === hoveredElement) : null;\n    let box = null;\n    if (hoveredObj?.tipo === \"galeria\" && Number.isFinite(Number(hoveredObj.width)) && Number.isFinite(Number(hoveredObj.height))) {\n        const absPos = typeof node.getAbsolutePosition === \"function\" ? node.getAbsolutePosition() : {\n            x: typeof node.x === \"function\" ? node.x() : 0,\n            y: typeof node.y === \"function\" ? node.y() : 0\n        };\n        box = {\n            x: absPos.x,\n            y: absPos.y,\n            width: Number(hoveredObj.width),\n            height: Number(hoveredObj.height)\n        };\n    } else {\n        box = node.getClientRect();\n    }\n    if (!box || isNaN(box.x) || isNaN(box.y) || box.width <= 0 || box.height <= 0) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n        name: \"ui-hover-indicator\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n            x: box.x - 2,\n            y: box.y - 2,\n            width: box.width + 4,\n            height: box.height + 4,\n            fill: \"transparent\",\n            stroke: \"#9333EA\",\n            strokeWidth: 2,\n            listening: false\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\HoverIndicator.jsx\",\n            lineNumber: 43,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\HoverIndicator.jsx\",\n        lineNumber: 42,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0hvdmVySW5kaWNhdG9yLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFFM0IsU0FBU0UsZUFBZSxFQUFFQyxjQUFjLEVBQUVDLFdBQVcsRUFBRUMsVUFBVSxFQUFFLEVBQUU7SUFDbEYsSUFBSSxDQUFDRixrQkFBa0IsQ0FBQ0MsYUFBYUUsU0FBUyxDQUFDSCxlQUFlLEVBQUUsT0FBTztJQUV2RSxNQUFNSSxPQUFPSCxZQUFZRSxPQUFPLENBQUNILGVBQWU7SUFDaEQsSUFBSSxDQUFDSSxNQUFNQyxjQUFjLE9BQU87SUFFaEMsTUFBTUMsYUFBYUMsTUFBTUMsT0FBTyxDQUFDTixXQUM3QkEsUUFBUU8sSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS1gsa0JBQzdCO0lBRUosSUFBSVksTUFBTTtJQUNWLElBQ0VOLFlBQVlPLFNBQVMsYUFDckJDLE9BQU9DLFFBQVEsQ0FBQ0QsT0FBT1IsV0FBV1UsS0FBSyxNQUN2Q0YsT0FBT0MsUUFBUSxDQUFDRCxPQUFPUixXQUFXVyxNQUFNLElBQ3hDO1FBQ0EsTUFBTUMsU0FDSixPQUFPZCxLQUFLZSxtQkFBbUIsS0FBSyxhQUNoQ2YsS0FBS2UsbUJBQW1CLEtBQ3hCO1lBQ0VDLEdBQUcsT0FBT2hCLEtBQUtnQixDQUFDLEtBQUssYUFBYWhCLEtBQUtnQixDQUFDLEtBQUs7WUFDN0NDLEdBQUcsT0FBT2pCLEtBQUtpQixDQUFDLEtBQUssYUFBYWpCLEtBQUtpQixDQUFDLEtBQUs7UUFDL0M7UUFFTlQsTUFBTTtZQUNKUSxHQUFHRixPQUFPRSxDQUFDO1lBQ1hDLEdBQUdILE9BQU9HLENBQUM7WUFDWEwsT0FBT0YsT0FBT1IsV0FBV1UsS0FBSztZQUM5QkMsUUFBUUgsT0FBT1IsV0FBV1csTUFBTTtRQUNsQztJQUNGLE9BQU87UUFDTEwsTUFBTVIsS0FBS2tCLGFBQWE7SUFDMUI7SUFFQSxJQUFJLENBQUNWLE9BQU9XLE1BQU1YLElBQUlRLENBQUMsS0FBS0csTUFBTVgsSUFBSVMsQ0FBQyxLQUFLVCxJQUFJSSxLQUFLLElBQUksS0FBS0osSUFBSUssTUFBTSxJQUFJLEdBQUc7UUFDN0UsT0FBTztJQUNUO0lBRUEscUJBQ0UsOERBQUNuQiw4Q0FBS0E7UUFBQzBCLE1BQUs7a0JBQ1YsNEVBQUMzQiw2Q0FBSUE7WUFDSHVCLEdBQUdSLElBQUlRLENBQUMsR0FBRztZQUNYQyxHQUFHVCxJQUFJUyxDQUFDLEdBQUc7WUFDWEwsT0FBT0osSUFBSUksS0FBSyxHQUFHO1lBQ25CQyxRQUFRTCxJQUFJSyxNQUFNLEdBQUc7WUFDckJRLE1BQUs7WUFDTEMsUUFBTztZQUNQQyxhQUFhO1lBQ2JDLFdBQVc7Ozs7Ozs7Ozs7O0FBSW5CIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXEhvdmVySW5kaWNhdG9yLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWN0LCBHcm91cCB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb3ZlckluZGljYXRvcih7IGhvdmVyZWRFbGVtZW50LCBlbGVtZW50UmVmcywgb2JqZXRvcyA9IFtdIH0pIHtcbiAgaWYgKCFob3ZlcmVkRWxlbWVudCB8fCAhZWxlbWVudFJlZnM/LmN1cnJlbnQ/Lltob3ZlcmVkRWxlbWVudF0pIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IG5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50W2hvdmVyZWRFbGVtZW50XTtcbiAgaWYgKCFub2RlPy5nZXRTdGFnZT8uKCkpIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGhvdmVyZWRPYmogPSBBcnJheS5pc0FycmF5KG9iamV0b3MpXG4gICAgPyBvYmpldG9zLmZpbmQoKG8pID0+IG8uaWQgPT09IGhvdmVyZWRFbGVtZW50KVxuICAgIDogbnVsbDtcblxuICBsZXQgYm94ID0gbnVsbDtcbiAgaWYgKFxuICAgIGhvdmVyZWRPYmo/LnRpcG8gPT09IFwiZ2FsZXJpYVwiICYmXG4gICAgTnVtYmVyLmlzRmluaXRlKE51bWJlcihob3ZlcmVkT2JqLndpZHRoKSkgJiZcbiAgICBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKGhvdmVyZWRPYmouaGVpZ2h0KSlcbiAgKSB7XG4gICAgY29uc3QgYWJzUG9zID1cbiAgICAgIHR5cGVvZiBub2RlLmdldEFic29sdXRlUG9zaXRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IG5vZGUuZ2V0QWJzb2x1dGVQb3NpdGlvbigpXG4gICAgICAgIDoge1xuICAgICAgICAgICAgeDogdHlwZW9mIG5vZGUueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiAwLFxuICAgICAgICAgICAgeTogdHlwZW9mIG5vZGUueSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS55KCkgOiAwLFxuICAgICAgICAgIH07XG5cbiAgICBib3ggPSB7XG4gICAgICB4OiBhYnNQb3MueCxcbiAgICAgIHk6IGFic1Bvcy55LFxuICAgICAgd2lkdGg6IE51bWJlcihob3ZlcmVkT2JqLndpZHRoKSxcbiAgICAgIGhlaWdodDogTnVtYmVyKGhvdmVyZWRPYmouaGVpZ2h0KSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCgpO1xuICB9XG5cbiAgaWYgKCFib3ggfHwgaXNOYU4oYm94LngpIHx8IGlzTmFOKGJveC55KSB8fCBib3gud2lkdGggPD0gMCB8fCBib3guaGVpZ2h0IDw9IDApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEdyb3VwIG5hbWU9XCJ1aS1ob3Zlci1pbmRpY2F0b3JcIj5cbiAgICAgIDxSZWN0XG4gICAgICAgIHg9e2JveC54IC0gMn1cbiAgICAgICAgeT17Ym94LnkgLSAyfVxuICAgICAgICB3aWR0aD17Ym94LndpZHRoICsgNH1cbiAgICAgICAgaGVpZ2h0PXtib3guaGVpZ2h0ICsgNH1cbiAgICAgICAgZmlsbD1cInRyYW5zcGFyZW50XCJcbiAgICAgICAgc3Ryb2tlPVwiIzkzMzNFQVwiXG4gICAgICAgIHN0cm9rZVdpZHRoPXsyfVxuICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxuICAgICAgLz5cbiAgICA8L0dyb3VwPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlJlY3QiLCJHcm91cCIsIkhvdmVySW5kaWNhdG9yIiwiaG92ZXJlZEVsZW1lbnQiLCJlbGVtZW50UmVmcyIsIm9iamV0b3MiLCJjdXJyZW50Iiwibm9kZSIsImdldFN0YWdlIiwiaG92ZXJlZE9iaiIsIkFycmF5IiwiaXNBcnJheSIsImZpbmQiLCJvIiwiaWQiLCJib3giLCJ0aXBvIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ3aWR0aCIsImhlaWdodCIsImFic1BvcyIsImdldEFic29sdXRlUG9zaXRpb24iLCJ4IiwieSIsImdldENsaWVudFJlY3QiLCJpc05hTiIsIm5hbWUiLCJmaWxsIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJsaXN0ZW5pbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/HoverIndicator.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/InlineTextEditor.jsx":
/*!*********************************************!*\
  !*** ./src/components/InlineTextEditor.jsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InlineTextEditor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nfunction isInlineDebugEnabled() {\n    return  false && 0;\n}\nfunction formatInlineLogPayload(payload = {}) {\n    try {\n        return JSON.stringify(payload, null, 2);\n    } catch (error) {\n        return String(error || payload);\n    }\n}\nfunction nextInlineFrameMeta() {\n    if (true) {\n        return {\n            frame: null,\n            perfMs: null\n        };\n    }\n    const prev = Number(window.__INLINE_FRAME_SEQ || 0);\n    const next = prev + 1;\n    window.__INLINE_FRAME_SEQ = next;\n    const perfMs = typeof window.performance?.now === \"function\" ? Number(window.performance.now().toFixed(3)) : null;\n    return {\n        frame: next,\n        perfMs\n    };\n}\nfunction normalizeFinishMode(mode) {\n    if (mode === \"immediate\" || mode === \"raf\" || mode === \"timeout100\") return mode;\n    return \"raf\";\n}\nfunction normalizeWidthMode(mode) {\n    return mode === \"fit-content\" ? \"fit-content\" : \"measured\";\n}\nfunction isBoldFontWeight(weight) {\n    const normalized = String(weight || \"normal\").toLowerCase();\n    return normalized === \"bold\" || normalized === \"bolder\" || [\n        \"500\",\n        \"600\",\n        \"700\",\n        \"800\",\n        \"900\"\n    ].includes(normalized);\n}\nfunction normalizeInlineFontProps(rawFontStyle, rawFontWeight) {\n    const styleToken = String(rawFontStyle || \"normal\").toLowerCase();\n    const weightToken = String(rawFontWeight || \"\").toLowerCase();\n    const italic = styleToken.includes(\"italic\") || styleToken.includes(\"oblique\");\n    const boldFromStyle = styleToken.includes(\"bold\");\n    const boldFromWeight = isBoldFontWeight(weightToken);\n    const bold = boldFromStyle || boldFromWeight;\n    return {\n        fontStyle: italic ? \"italic\" : \"normal\",\n        fontWeight: bold ? \"bold\" : \"normal\"\n    };\n}\nfunction normalizeEditorText(rawText, { trimPhantomTrailingNewline = true } = {}) {\n    const normalized = String(rawText ?? \"\").replace(/\\r\\n/g, \"\\n\").replace(/\\u200B/g, \"\");\n    if (!trimPhantomTrailingNewline) return normalized;\n    const trailingNewlines = normalized.match(/\\n+$/)?.[0].length || 0;\n    if (trailingNewlines >= 2) {\n        // contentEditable puede reportar una linea vacia extra temporal al hacer Enter.\n        return normalized.slice(0, -1);\n    }\n    return normalized;\n}\nfunction countLines(text) {\n    const normalized = String(text ?? \"\").replace(/\\r\\n/g, \"\\n\");\n    return normalized === \"\" ? 1 : normalized.split(\"\\n\").length;\n}\nfunction countTrailingNewlines(text) {\n    const normalized = String(text ?? \"\").replace(/\\r\\n/g, \"\\n\");\n    const trailing = normalized.match(/\\n+$/)?.[0];\n    return trailing ? trailing.length : 0;\n}\nfunction rectToPayload(rect) {\n    if (!rect) return null;\n    return {\n        x: rect.x,\n        y: rect.y,\n        width: rect.width,\n        height: rect.height\n    };\n}\nfunction getFullRangeRect(el) {\n    if (!el) return null;\n    if (el instanceof HTMLInputElement) return null;\n    try {\n        const range = document.createRange();\n        range.selectNodeContents(el);\n        const rect = range.getBoundingClientRect();\n        return rectToPayload(rect);\n    } catch  {\n        return null;\n    }\n}\nfunction getSelectionRectInEditor(el) {\n    if (!el || \"undefined\" === \"undefined\") return {\n        inEditor: false,\n        rect: null\n    };\n    if (el instanceof HTMLInputElement) {\n        const isFocused = document.activeElement === el;\n        return {\n            inEditor: isFocused,\n            rect: isFocused ? rectToPayload(el.getBoundingClientRect()) : null\n        };\n    }\n    const sel = window.getSelection?.();\n    if (!sel || sel.rangeCount === 0) return {\n        inEditor: false,\n        rect: null\n    };\n    try {\n        const range = sel.getRangeAt(0);\n        const startIn = el.contains(range.startContainer);\n        const endIn = el.contains(range.endContainer);\n        if (!startIn || !endIn) return {\n            inEditor: false,\n            rect: null\n        };\n        const rect = range.getBoundingClientRect();\n        return {\n            inEditor: true,\n            rect: rectToPayload(rect)\n        };\n    } catch  {\n        return {\n            inEditor: false,\n            rect: null\n        };\n    }\n}\nfunction getCollapsedCaretProbeRectInEditor(el) {\n    if (!el || el instanceof HTMLInputElement || \"undefined\" === \"undefined\") return null;\n    const sel = window.getSelection?.();\n    if (!sel || sel.rangeCount === 0) return null;\n    let originalRange = null;\n    let marker = null;\n    try {\n        const activeRange = sel.getRangeAt(0);\n        if (!el.contains(activeRange.startContainer) || !el.contains(activeRange.endContainer)) {\n            return null;\n        }\n        originalRange = activeRange.cloneRange();\n        const probeRange = activeRange.cloneRange();\n        probeRange.collapse(true);\n        marker = document.createElement(\"span\");\n        marker.textContent = \"\\u200b\";\n        marker.style.display = \"inline-block\";\n        marker.style.width = \"0px\";\n        marker.style.padding = \"0\";\n        marker.style.margin = \"0\";\n        marker.style.border = \"0\";\n        marker.style.lineHeight = \"1\";\n        marker.style.pointerEvents = \"none\";\n        probeRange.insertNode(marker);\n        const rect = marker.getBoundingClientRect();\n        if (marker.parentNode) {\n            marker.parentNode.removeChild(marker);\n            marker.parentNode?.normalize?.();\n        }\n        sel.removeAllRanges();\n        sel.addRange(originalRange);\n        return rectToPayload(rect);\n    } catch  {\n        try {\n            if (marker?.parentNode) {\n                marker.parentNode.removeChild(marker);\n            }\n            if (originalRange && sel) {\n                sel.removeAllRanges();\n                sel.addRange(originalRange);\n            }\n        } catch  {\n        // no-op\n        }\n        return null;\n    }\n}\nfunction roundMetric(value, digits = 4) {\n    return Number.isFinite(value) ? Number(value.toFixed(digits)) : null;\n}\nfunction getFirstGlyphRectInEditor(el) {\n    if (!el || el instanceof HTMLInputElement || typeof document === \"undefined\") return null;\n    try {\n        const walker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT);\n        let textNode = null;\n        while(walker.nextNode()){\n            const node = walker.currentNode;\n            const text = node?.nodeValue || \"\";\n            if (text.length > 0) {\n                textNode = node;\n                break;\n            }\n        }\n        if (!textNode) return null;\n        const range = document.createRange();\n        range.setStart(textNode, 0);\n        range.setEnd(textNode, Math.min(1, textNode.nodeValue.length));\n        return rectToPayload(range.getBoundingClientRect());\n    } catch  {\n        return null;\n    }\n}\nfunction measureCanvasInkMetrics({ fontStyle, fontWeight, fontSizePx, fontFamily, probeText }) {\n    if (typeof document === \"undefined\") return null;\n    try {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) return null;\n        const safeFamily = String(fontFamily || \"sans-serif\");\n        const familyForCanvas = safeFamily.includes(\",\") ? safeFamily : /\\s/.test(safeFamily) ? `\"${safeFamily}\"` : safeFamily;\n        ctx.font = `${fontStyle || \"normal\"} ${fontWeight || \"normal\"} ${fontSizePx}px ${familyForCanvas}`;\n        const m = ctx.measureText(probeText || \"Hg\");\n        const ascent = Number(m.actualBoundingBoxAscent || 0);\n        const descent = Number(m.actualBoundingBoxDescent || 0);\n        const inkHeight = ascent + descent;\n        const fontAscent = Number(m.fontBoundingBoxAscent || 0);\n        const fontDescent = Number(m.fontBoundingBoxDescent || 0);\n        return {\n            probeText,\n            actualAscentPx: roundMetric(ascent),\n            actualDescentPx: roundMetric(descent),\n            actualInkHeightPx: roundMetric(inkHeight),\n            fontAscentPx: roundMetric(fontAscent),\n            fontDescentPx: roundMetric(fontDescent),\n            fontBoxHeightPx: roundMetric(fontAscent + fontDescent)\n        };\n    } catch  {\n        return null;\n    }\n}\nfunction measureDomInkProbe({ fontStyle, fontWeight, fontSizePx, fontFamily, lineHeightPx, probeText }) {\n    if (typeof document === \"undefined\") return null;\n    let host = null;\n    try {\n        host = document.createElement(\"div\");\n        host.style.position = \"fixed\";\n        host.style.left = \"-100000px\";\n        host.style.top = \"-100000px\";\n        host.style.margin = \"0\";\n        host.style.padding = \"0\";\n        host.style.border = \"0\";\n        host.style.whiteSpace = \"pre\";\n        host.style.fontSize = `${fontSizePx}px`;\n        host.style.fontFamily = fontFamily || \"sans-serif\";\n        host.style.fontWeight = fontWeight || \"normal\";\n        host.style.fontStyle = fontStyle || \"normal\";\n        host.style.lineHeight = `${lineHeightPx}px`;\n        host.style.boxSizing = \"border-box\";\n        host.style.pointerEvents = \"none\";\n        host.style.userSelect = \"none\";\n        const span = document.createElement(\"span\");\n        span.style.margin = \"0\";\n        span.style.padding = \"0\";\n        span.style.border = \"0\";\n        span.style.whiteSpace = \"pre\";\n        span.textContent = probeText || \"Hg\";\n        host.appendChild(span);\n        document.body.appendChild(host);\n        const hostRect = host.getBoundingClientRect();\n        const spanRect = span.getBoundingClientRect();\n        return {\n            probeText,\n            hostHeightPx: roundMetric(hostRect.height),\n            glyphHeightPx: roundMetric(spanRect.height),\n            glyphTopInsetPx: roundMetric(spanRect.top - hostRect.top),\n            glyphBottomInsetPx: roundMetric(hostRect.bottom - spanRect.bottom)\n        };\n    } catch  {\n        return null;\n    } finally{\n        if (host && host.parentNode) {\n            host.parentNode.removeChild(host);\n        }\n    }\n}\nconst INLINE_LAYOUT_VERSION = \"linebreak-unified-editor-v9\";\nfunction InlineTextEditor({ editingId = null, node, value, onChange, onFinish, textAlign, scaleVisual = 1, finishMode = \"raf\", widthMode = \"measured\", onOverlayMountChange = null, onDebugEvent = null }) {\n    if (!node) return null;\n    const editorRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const textCenterXDomRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const DEBUG_MODE = isInlineDebugEnabled();\n    const normalizedFinishMode = normalizeFinishMode(finishMode);\n    const normalizedWidthMode = normalizeWidthMode(widthMode);\n    // Stage (lo necesitamos para rects y posiciones)\n    const stage = node.getStage();\n    if (!stage) return null;\n    const stageBox = stage.container().getBoundingClientRect();\n    const stageScaleX = typeof stage.scaleX === \"function\" ? stage.scaleX() : stage.scaleX || 1;\n    const stageScaleY = typeof stage.scaleY === \"function\" ? stage.scaleY() : stage.scaleY || 1;\n    const totalScaleX = (scaleVisual || 1) * (stageScaleX || 1);\n    const totalScaleY = (scaleVisual || 1) * (stageScaleY || 1);\n    // Detectar el nodo de texto real para estilo (color, fuente, etc.)\n    const textNode = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)({\n        \"InlineTextEditor.useMemo[textNode]\": ()=>{\n            try {\n                if (typeof node.getClassName === \"function\") {\n                    const cls = node.getClassName();\n                    if (cls === \"Text\") {\n                        return node;\n                    }\n                }\n                const nodeId = (typeof node.id === \"function\" ? node.id() : node?.attrs?.id) || null;\n                if (nodeId && typeof stage?.findOne === \"function\") {\n                    const pairedText = stage.findOne(`#${nodeId}-text`);\n                    if (pairedText?.getClassName?.() === \"Text\") {\n                        return pairedText;\n                    }\n                }\n                if (typeof node.findOne === \"function\") {\n                    const found = node.findOne({\n                        \"InlineTextEditor.useMemo[textNode].found\": (n)=>n.getClassName() === \"Text\"\n                    }[\"InlineTextEditor.useMemo[textNode].found\"]);\n                    if (found) return found;\n                }\n                if (typeof node.findAncestor === \"function\") {\n                    const ancestorText = node.findAncestor({\n                        \"InlineTextEditor.useMemo[textNode].ancestorText\": (n)=>n.getClassName && n.getClassName() === \"Text\"\n                    }[\"InlineTextEditor.useMemo[textNode].ancestorText\"]);\n                    if (ancestorText) return ancestorText;\n                }\n                return node;\n            } catch (error) {\n                console.warn(\"Error buscando textNode para InlineTextEditor:\", error);\n                return node;\n            }\n        }\n    }[\"InlineTextEditor.useMemo[textNode]\"], [\n        node,\n        stage\n    ]);\n    const nodeProps = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)({\n        \"InlineTextEditor.useMemo[nodeProps]\": ()=>{\n            try {\n                const getProp = {\n                    \"InlineTextEditor.useMemo[nodeProps].getProp\": (n, getterName, fallback)=>{\n                        if (!n) return fallback;\n                        if (typeof n.getAttr === \"function\") {\n                            const attrValue = n.getAttr(getterName);\n                            if (typeof attrValue !== \"undefined\" && attrValue !== null && attrValue !== \"\") {\n                                return attrValue;\n                            }\n                        }\n                        const fn = n[getterName];\n                        if (typeof fn === \"function\") return fn.call(n);\n                        if (typeof n[getterName] !== \"undefined\" && n[getterName] !== null && n[getterName] !== \"\") {\n                            return n[getterName];\n                        }\n                        return fallback;\n                    }\n                }[\"InlineTextEditor.useMemo[nodeProps].getProp\"];\n                const rawFontStyle = getProp(textNode, \"fontStyle\", \"normal\");\n                const rawFontWeight = getProp(textNode, \"fontWeight\", \"normal\");\n                const normalizedFont = normalizeInlineFontProps(rawFontStyle, rawFontWeight);\n                return {\n                    fontSize: getProp(textNode, \"fontSize\", 24),\n                    fontFamily: getProp(textNode, \"fontFamily\", \"sans-serif\"),\n                    fontWeight: normalizedFont.fontWeight,\n                    fontStyle: normalizedFont.fontStyle,\n                    fill: getProp(textNode, \"fill\", \"#000\"),\n                    lineHeightKonva: getProp(textNode, \"lineHeight\", 1.2)\n                };\n            } catch (error) {\n                console.warn(\"Error obteniendo propiedades del textNode:\", error);\n                return {\n                    fontSize: 24,\n                    fontFamily: \"sans-serif\",\n                    fontWeight: \"normal\",\n                    fontStyle: \"normal\",\n                    fill: \"#000\",\n                    lineHeightKonva: 1.2\n                };\n            }\n        }\n    }[\"InlineTextEditor.useMemo[nodeProps]\"], [\n        textNode\n    ]);\n    const konvaLineHeight = nodeProps.lineHeightKonva;\n    const rectSourceNode = textNode || node;\n    const rect = rectSourceNode.getClientRect({\n        relativeTo: stage,\n        skipStroke: true\n    });\n    const PADDING_X = 0;\n    const PADDING_Y = 0;\n    const fontSizePx = Math.max(1, Number(nodeProps.fontSize || 24) * totalScaleY);\n    const lineHeightPx = Math.max(1, fontSizePx * konvaLineHeight);\n    const rawValue = String(value ?? \"\");\n    const normalizedValue = rawValue.replace(/\\r\\n/g, \"\\n\");\n    const normalizedValueForSingleLine = normalizedValue.replace(/\\n+$/g, \"\");\n    const isSingleLine = !normalizedValue.includes(\"\\n\");\n    const verticalInsetPx = 0;\n    const editableLineHeightPx = lineHeightPx;\n    const className = typeof node.getClassName === \"function\" ? node.getClassName() : \"Text\";\n    const isTextNode = className === \"Text\";\n    const baseTextWidth = Math.max(20, rect.width * totalScaleX);\n    const measuredContentWidth = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)({\n        \"InlineTextEditor.useMemo[measuredContentWidth]\": ()=>{\n            if (normalizedWidthMode !== \"measured\") return null;\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            if (!ctx) return baseTextWidth;\n            const safeFontFamily = String(nodeProps.fontFamily || \"sans-serif\");\n            const fontFamilyForCanvas = safeFontFamily.includes(\",\") ? safeFontFamily : /\\s/.test(safeFontFamily) ? `\"${safeFontFamily}\"` : safeFontFamily;\n            ctx.font = `${nodeProps.fontStyle || \"normal\"} ${nodeProps.fontWeight || \"normal\"} ${fontSizePx}px ${fontFamilyForCanvas}`;\n            const textValue = isSingleLine ? normalizedValueForSingleLine : normalizedValue;\n            const lines = textValue.split(/\\r?\\n/);\n            const maxLineWidth = Math.max(...lines.map({\n                \"InlineTextEditor.useMemo[measuredContentWidth].maxLineWidth\": (line)=>ctx.measureText(line).width\n            }[\"InlineTextEditor.useMemo[measuredContentWidth].maxLineWidth\"]), 0);\n            return Math.max(20, Math.ceil(maxLineWidth));\n        }\n    }[\"InlineTextEditor.useMemo[measuredContentWidth]\"], [\n        normalizedWidthMode,\n        nodeProps.fontFamily,\n        nodeProps.fontSize,\n        nodeProps.fontStyle,\n        nodeProps.fontWeight,\n        totalScaleY,\n        isSingleLine,\n        normalizedValue,\n        normalizedValueForSingleLine\n    ]);\n    const effectiveTextWidth = normalizedWidthMode === \"measured\" && Number.isFinite(measuredContentWidth) ? measuredContentWidth : baseTextWidth;\n    const minWidthPx = normalizedWidthMode === \"measured\" ? effectiveTextWidth : baseTextWidth;\n    const cardWidth = effectiveTextWidth + PADDING_X * 2;\n    let left;\n    let top;\n    if (isTextNode) {\n        if (textCenterXDomRef.current == null) {\n            const centerXCanvas = rect.x + rect.width / 2;\n            textCenterXDomRef.current = stageBox.left + centerXCanvas * totalScaleX + window.scrollX;\n        }\n        top = stageBox.top + rect.y * totalScaleY + window.scrollY - PADDING_Y;\n        left = textCenterXDomRef.current - cardWidth / 2;\n    } else {\n        const centerXCanvas = rect.x + rect.width / 2;\n        const centerYCanvas = rect.y + rect.height / 2;\n        const centerXDom = stageBox.left + centerXCanvas * totalScaleX + window.scrollX;\n        const centerYDom = stageBox.top + centerYCanvas * totalScaleY + window.scrollY;\n        const approxHeight = nodeProps.fontSize * konvaLineHeight * totalScaleY + PADDING_Y * 2;\n        left = centerXDom - cardWidth / 2;\n        top = centerYDom - approxHeight / 2;\n    }\n    const emitDebug = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"InlineTextEditor.useCallback[emitDebug]\": (eventName, extra = {})=>{\n            if (!DEBUG_MODE) return;\n            const essentialEvents = new Set([\n                \"overlay: after-focus\",\n                \"input: linebreak\"\n            ]);\n            if (!essentialEvents.has(eventName)) return;\n            const ts = new Date().toISOString();\n            const frameMeta = nextInlineFrameMeta();\n            const overlayEl = editorRef.current?.parentElement || null;\n            const overlayRect = overlayEl?.getBoundingClientRect?.() || null;\n            const contentRect = editorRef.current?.getBoundingClientRect?.() || null;\n            const computedStyle = editorRef.current ? window.getComputedStyle(editorRef.current) : null;\n            const fullRangeRect = getFullRangeRect(editorRef.current);\n            const selectionInfo = getSelectionRectInEditor(editorRef.current);\n            const projectedKonvaRect = {\n                x: stageBox.left + rect.x * totalScaleX + window.scrollX,\n                y: stageBox.top + rect.y * totalScaleY + window.scrollY,\n                width: rect.width * totalScaleX,\n                height: rect.height * totalScaleY\n            };\n            const overlayToKonvaDy = overlayRect ? overlayRect.y - projectedKonvaRect.y : null;\n            const contentToKonvaDy = contentRect ? contentRect.y - projectedKonvaRect.y : null;\n            const fullRangeToContentDy = fullRangeRect && contentRect ? fullRangeRect.y - contentRect.y : null;\n            const caretToContentDy = selectionInfo.inEditor && selectionInfo.rect && contentRect ? selectionInfo.rect.y - contentRect.y : null;\n            const caretProbeRect = getCollapsedCaretProbeRectInEditor(editorRef.current);\n            const caretProbeToContentDy = caretProbeRect && contentRect ? caretProbeRect.y - contentRect.y : null;\n            const caretProbeHeightPx = caretProbeRect ? caretProbeRect.height : null;\n            const firstGlyphRect = getFirstGlyphRectInEditor(editorRef.current);\n            const firstGlyphToContentDy = firstGlyphRect && contentRect ? firstGlyphRect.y - contentRect.y : null;\n            const firstGlyphHeightPx = firstGlyphRect ? firstGlyphRect.height : null;\n            const probeText = (isSingleLine ? normalizedValueForSingleLine : normalizedValue.split(/\\r?\\n/)[0] || \"\").replace(/\\u200B/g, \"\").slice(0, 32) || \"HgAy\";\n            const canvasInkMetrics = measureCanvasInkMetrics({\n                fontStyle: nodeProps.fontStyle,\n                fontWeight: nodeProps.fontWeight,\n                fontSizePx,\n                fontFamily: nodeProps.fontFamily,\n                probeText\n            });\n            const domInkProbe = measureDomInkProbe({\n                fontStyle: nodeProps.fontStyle,\n                fontWeight: nodeProps.fontWeight,\n                fontSizePx,\n                fontFamily: nodeProps.fontFamily,\n                lineHeightPx: editableLineHeightPx,\n                probeText\n            });\n            const canvasInkTopInsetPx = canvasInkMetrics && Number.isFinite(canvasInkMetrics.actualInkHeightPx) ? (editableLineHeightPx - canvasInkMetrics.actualInkHeightPx) / 2 : null;\n            const domVsCanvasTopInsetDeltaPx = domInkProbe && Number.isFinite(canvasInkTopInsetPx) ? domInkProbe.glyphTopInsetPx - canvasInkTopInsetPx : null;\n            const liveVsProbeGlyphTopDeltaPx = Number.isFinite(firstGlyphToContentDy) && domInkProbe ? firstGlyphToContentDy - domInkProbe.glyphTopInsetPx : null;\n            const payload = {\n                ...frameMeta,\n                id: editingId || null,\n                eventName,\n                valueLength: rawValue.length,\n                left,\n                top,\n                baseTextWidth,\n                effectiveTextWidth,\n                finishMode: normalizedFinishMode,\n                widthMode: normalizedWidthMode,\n                overlayRect: overlayRect ? {\n                    x: overlayRect.x,\n                    y: overlayRect.y,\n                    width: overlayRect.width,\n                    height: overlayRect.height\n                } : null,\n                contentRect: contentRect ? {\n                    x: contentRect.x,\n                    y: contentRect.y,\n                    width: contentRect.width,\n                    height: contentRect.height\n                } : null,\n                contentScrollWidth: editorRef.current?.scrollWidth ?? null,\n                contentClientWidth: editorRef.current?.clientWidth ?? null,\n                isFocused: document.activeElement === editorRef.current,\n                projectedKonvaRect,\n                overlayToKonvaDy,\n                contentToKonvaDy,\n                fullRangeRect,\n                selectionInEditor: selectionInfo.inEditor,\n                selectionRect: selectionInfo.rect,\n                fullRangeToContentDy,\n                caretToContentDy,\n                caretProbeRect,\n                caretProbeToContentDy,\n                caretProbeHeightPx,\n                firstGlyphRect,\n                firstGlyphToContentDy,\n                firstGlyphHeightPx,\n                computedFontSize: computedStyle?.fontSize ?? null,\n                computedLineHeight: computedStyle?.lineHeight ?? null,\n                computedPaddingTop: computedStyle?.paddingTop ?? null,\n                computedPaddingBottom: computedStyle?.paddingBottom ?? null,\n                computedBorderTop: computedStyle?.borderTopWidth ?? null,\n                computedBorderBottom: computedStyle?.borderBottomWidth ?? null,\n                fontSizePx,\n                lineHeightPx,\n                isSingleLine,\n                verticalInsetPx,\n                editableLineHeightPx,\n                editorTag: !editorRef.current ? null : editorRef.current instanceof HTMLInputElement ? \"input\" : \"contentEditable\",\n                normalizedValueLength: isSingleLine ? normalizedValueForSingleLine.length : normalizedValue.length,\n                hadTrailingNewline: isSingleLine && normalizedValueForSingleLine.length !== normalizedValue.length,\n                canvasInkMetrics,\n                domInkProbe,\n                canvasInkTopInsetPx: roundMetric(canvasInkTopInsetPx),\n                domVsCanvasTopInsetDeltaPx: roundMetric(domVsCanvasTopInsetDeltaPx),\n                liveVsProbeGlyphTopDeltaPx: roundMetric(liveVsProbeGlyphTopDeltaPx),\n                layoutModelVersion: INLINE_LAYOUT_VERSION,\n                ...extra\n            };\n            const body = formatInlineLogPayload(payload);\n            console.log(`[INLINE][${ts}] ${eventName}\\n${body}`);\n            if (typeof onDebugEvent === \"function\") {\n                onDebugEvent(eventName, payload);\n            }\n        }\n    }[\"InlineTextEditor.useCallback[emitDebug]\"], [\n        DEBUG_MODE,\n        editingId,\n        rawValue,\n        normalizedValue,\n        normalizedValueForSingleLine,\n        left,\n        top,\n        baseTextWidth,\n        effectiveTextWidth,\n        normalizedFinishMode,\n        normalizedWidthMode,\n        onDebugEvent,\n        stageBox.left,\n        stageBox.top,\n        rect.x,\n        rect.y,\n        rect.width,\n        rect.height,\n        totalScaleX,\n        totalScaleY,\n        fontSizePx,\n        lineHeightPx,\n        isSingleLine,\n        verticalInsetPx,\n        editableLineHeightPx\n    ]);\n    // Inicializar contenido + foco + caret antes del primer paint visible\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useLayoutEffect)({\n        \"InlineTextEditor.useLayoutEffect\": ()=>{\n            const el = editorRef.current;\n            if (!el) return;\n            let initialText = normalizedValue;\n            if (window._preFillChar) {\n                initialText = (initialText || \"\") + window._preFillChar;\n                onChange(initialText);\n                window._preFillChar = null;\n            }\n            if (el instanceof HTMLInputElement) {\n                el.value = initialText;\n                emitDebug(\"overlay: before-focus\");\n                el.focus();\n                const len = initialText.length;\n                try {\n                    el.setSelectionRange(len, len);\n                } catch  {\n                // no-op\n                }\n            } else {\n                el.innerText = initialText;\n                emitDebug(\"overlay: before-focus\");\n                el.focus();\n                const range = document.createRange();\n                range.selectNodeContents(el);\n                range.collapse(false);\n                const sel = window.getSelection();\n                sel.removeAllRanges();\n                sel.addRange(range);\n            }\n            if (typeof onOverlayMountChange === \"function\" && editingId) {\n                onOverlayMountChange(editingId, true);\n            }\n            emitDebug(\"overlay: after-focus\");\n            return ({\n                \"InlineTextEditor.useLayoutEffect\": ()=>{\n                    emitDebug(\"overlay: before-unmount\");\n                    const closingId = editingId || null;\n                    requestAnimationFrame({\n                        \"InlineTextEditor.useLayoutEffect\": ()=>{\n                            const safeId = String(closingId || \"\").replace(/\"/g, '\\\\\"');\n                            const overlayStillPresent = safeId ? Boolean(document.querySelector(`[data-inline-editor-id=\"${safeId}\"]`)) : false;\n                            emitDebug(\"overlay: after-unmount-raf\", {\n                                id: closingId,\n                                overlayStillPresent,\n                                currentEditingId: window._currentEditingId ?? null,\n                                globalEditingId: window.editing?.id ?? null\n                            });\n                        }\n                    }[\"InlineTextEditor.useLayoutEffect\"]);\n                    if (typeof onOverlayMountChange === \"function\" && editingId) {\n                        onOverlayMountChange(editingId, false);\n                    }\n                }\n            })[\"InlineTextEditor.useLayoutEffect\"];\n        }\n    }[\"InlineTextEditor.useLayoutEffect\"], [\n        editingId\n    ]); // eslint-disable-line react-hooks/exhaustive-deps\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"InlineTextEditor.useEffect\": ()=>{\n            const el = editorRef.current;\n            if (!el) return;\n            el.scrollLeft = 0;\n            el.scrollTop = 0;\n        }\n    }[\"InlineTextEditor.useEffect\"], []);\n    const triggerFinish = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"InlineTextEditor.useCallback[triggerFinish]\": (trigger = \"blur\")=>{\n            emitDebug(\"finish: blur\", {\n                id: editingId || null,\n                mode: normalizedFinishMode,\n                trigger\n            });\n            if (normalizedFinishMode === \"immediate\") {\n                onFinish();\n                return;\n            }\n            if (normalizedFinishMode === \"raf\") {\n                requestAnimationFrame({\n                    \"InlineTextEditor.useCallback[triggerFinish]\": ()=>{\n                        onFinish();\n                    }\n                }[\"InlineTextEditor.useCallback[triggerFinish]\"]);\n                return;\n            }\n            setTimeout(onFinish, 100);\n        }\n    }[\"InlineTextEditor.useCallback[triggerFinish]\"], [\n        editingId,\n        emitDebug,\n        normalizedFinishMode,\n        onFinish\n    ]);\n    return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_1__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            \"data-inline-editor-id\": editingId || \"\",\n            \"data-inline-editor\": \"true\",\n            \"data-inline-width-mode\": normalizedWidthMode,\n            \"data-inline-finish-mode\": normalizedFinishMode,\n            style: {\n                position: \"fixed\",\n                left: `${left}px`,\n                top: `${top}px`,\n                display: \"block\",\n                verticalAlign: \"top\",\n                width: normalizedWidthMode === \"measured\" ? `${effectiveTextWidth}px` : \"fit-content\",\n                minWidth: `${minWidthPx}px`,\n                maxWidth: \"min(100vw - 40px, 1200px)\",\n                background: \"transparent\",\n                borderRadius: 0,\n                boxShadow: \"none\",\n                border: \"none\",\n                padding: `${PADDING_Y}px ${PADDING_X}px`,\n                zIndex: 9999,\n                boxSizing: \"border-box\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: editorRef,\n                contentEditable: true,\n                suppressContentEditableWarning: true,\n                style: {\n                    display: \"block\",\n                    verticalAlign: \"top\",\n                    width: normalizedWidthMode === \"measured\" ? `${effectiveTextWidth}px` : undefined,\n                    minWidth: `${minWidthPx}px`,\n                    whiteSpace: \"pre\",\n                    overflowWrap: \"normal\",\n                    wordBreak: \"normal\",\n                    overflow: \"visible\",\n                    fontSize: `${fontSizePx}px`,\n                    fontFamily: nodeProps.fontFamily,\n                    fontWeight: nodeProps.fontWeight,\n                    fontStyle: nodeProps.fontStyle,\n                    lineHeight: `${editableLineHeightPx}px`,\n                    minHeight: `${lineHeightPx}px`,\n                    color: \"transparent\",\n                    caretColor: nodeProps.fill,\n                    WebkitTextFillColor: \"transparent\",\n                    background: \"transparent\",\n                    borderRadius: 0,\n                    paddingTop: `${verticalInsetPx}px`,\n                    paddingBottom: `${verticalInsetPx}px`,\n                    paddingLeft: 0,\n                    paddingRight: 0,\n                    margin: 0,\n                    outline: \"none\",\n                    boxSizing: \"border-box\",\n                    textAlign: textAlign || \"left\"\n                },\n                onInput: (e)=>{\n                    const domRaw = String(e.currentTarget.innerText || \"\");\n                    const domNormalized = domRaw.replace(/\\r\\n/g, \"\\n\").replace(/\\u200B/g, \"\");\n                    const nextValue = normalizeEditorText(domRaw);\n                    const prevValue = normalizedValue;\n                    const prevLineCount = countLines(prevValue);\n                    const nextLineCount = countLines(nextValue);\n                    const prevTrailingNewlines = countTrailingNewlines(prevValue);\n                    const nextTrailingNewlines = countTrailingNewlines(nextValue);\n                    const domLineCount = countLines(domNormalized);\n                    const domTrailingNewlines = countTrailingNewlines(domNormalized);\n                    const normalizationChanged = domNormalized !== nextValue;\n                    onChange(nextValue);\n                    if (prevLineCount !== nextLineCount || prevTrailingNewlines !== nextTrailingNewlines || normalizationChanged) {\n                        emitDebug(\"input: linebreak\", {\n                            source: \"unified-contentEditable\",\n                            prevLength: prevValue.length,\n                            nextLength: nextValue.length,\n                            prevLineCount,\n                            nextLineCount,\n                            prevTrailingNewlines,\n                            nextTrailingNewlines,\n                            domLength: domNormalized.length,\n                            domLineCount,\n                            domTrailingNewlines,\n                            normalizationChanged\n                        });\n                    }\n                },\n                onKeyDown: (e)=>{\n                    if (e.key === \"Enter\" && !e.isComposing) {\n                        e.stopPropagation();\n                    }\n                },\n                onBlur: ()=>{\n                    triggerFinish(\"blur\");\n                }\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\InlineTextEditor.jsx\",\n                lineNumber: 812,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\InlineTextEditor.jsx\",\n            lineNumber: 786,\n            columnNumber: 7\n        }, this)\n    }, void 0, false), document.body);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0lubGluZVRleHRFZGl0b3IuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXlDO0FBQ3dDO0FBRWpGLFNBQVNNO0lBQ1AsT0FBTyxNQUE2QixJQUFJQyxDQUErQjtBQUN6RTtBQUVBLFNBQVNFLHVCQUF1QkMsVUFBVSxDQUFDLENBQUM7SUFDMUMsSUFBSTtRQUNGLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQ0YsU0FBUyxNQUFNO0lBQ3ZDLEVBQUUsT0FBT0csT0FBTztRQUNkLE9BQU9DLE9BQU9ELFNBQVNIO0lBQ3pCO0FBQ0Y7QUFFQSxTQUFTSztJQUNQLElBQUksSUFBNkIsRUFBRTtRQUNqQyxPQUFPO1lBQUVDLE9BQU87WUFBTUMsUUFBUTtRQUFLO0lBQ3JDO0lBQ0EsTUFBTUMsT0FBT0MsT0FBT1osT0FBT2Esa0JBQWtCLElBQUk7SUFDakQsTUFBTUMsT0FBT0gsT0FBTztJQUNwQlgsT0FBT2Esa0JBQWtCLEdBQUdDO0lBQzVCLE1BQU1KLFNBQ0osT0FBT1YsT0FBT2UsV0FBVyxFQUFFQyxRQUFRLGFBQy9CSixPQUFPWixPQUFPZSxXQUFXLENBQUNDLEdBQUcsR0FBR0MsT0FBTyxDQUFDLE1BQ3hDO0lBQ04sT0FBTztRQUFFUixPQUFPSztRQUFNSjtJQUFPO0FBQy9CO0FBRUEsU0FBU1Esb0JBQW9CQyxJQUFJO0lBQy9CLElBQUlBLFNBQVMsZUFBZUEsU0FBUyxTQUFTQSxTQUFTLGNBQWMsT0FBT0E7SUFDNUUsT0FBTztBQUNUO0FBRUEsU0FBU0MsbUJBQW1CRCxJQUFJO0lBQzlCLE9BQU9BLFNBQVMsZ0JBQWdCLGdCQUFnQjtBQUNsRDtBQUVBLFNBQVNFLGlCQUFpQkMsTUFBTTtJQUM5QixNQUFNQyxhQUFhaEIsT0FBT2UsVUFBVSxVQUFVRSxXQUFXO0lBQ3pELE9BQ0VELGVBQWUsVUFDZkEsZUFBZSxZQUNmO1FBQUM7UUFBTztRQUFPO1FBQU87UUFBTztLQUFNLENBQUNFLFFBQVEsQ0FBQ0Y7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LHlCQUF5QkMsd0JBQ3pCRyxzQkFDQTt3QkFDQXBILFVBQVUsb0JBQW9COzRCQUM1QnFILFFBQVE7NEJBQ1JDLFlBQVlULFVBQVU5VCxNQUFNOzRCQUM1QndVLFlBQVlYLFVBQVU3VCxNQUFNOzRCQUM1QitUOzRCQUNBQzs0QkFDQUM7NEJBQ0FDOzRCQUNBTyxXQUFXYixjQUFjNVQsTUFBTTs0QkFDL0JtVTs0QkFDQUM7NEJBQ0FDO3dCQUNGO29CQUNGO2dCQUNGO2dCQUNBSyxXQUFXLENBQUNqQjtvQkFDVixJQUFJQSxFQUFFa0IsR0FBRyxLQUFLLFdBQVcsQ0FBQ2xCLEVBQUVtQixXQUFXLEVBQUU7d0JBQ3ZDbkIsRUFBRW9CLGVBQWU7b0JBQ25CO2dCQUNGO2dCQUNBQyxRQUFRO29CQUNObkQsY0FBYztnQkFDaEI7Ozs7Ozs7Ozs7O3VCQUlOMVEsU0FBU2lHLElBQUk7QUFFakIiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcSW5saW5lVGV4dEVkaXRvci5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlUG9ydGFsIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHsgdXNlTWVtbywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUxheW91dEVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcblxuZnVuY3Rpb24gaXNJbmxpbmVEZWJ1Z0VuYWJsZWQoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5fX0lOTElORV9ERUJVRyAhPT0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdElubGluZUxvZ1BheWxvYWQocGF5bG9hZCA9IHt9KSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBTdHJpbmcoZXJyb3IgfHwgcGF5bG9hZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbmV4dElubGluZUZyYW1lTWV0YSgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4geyBmcmFtZTogbnVsbCwgcGVyZk1zOiBudWxsIH07XG4gIH1cbiAgY29uc3QgcHJldiA9IE51bWJlcih3aW5kb3cuX19JTkxJTkVfRlJBTUVfU0VRIHx8IDApO1xuICBjb25zdCBuZXh0ID0gcHJldiArIDE7XG4gIHdpbmRvdy5fX0lOTElORV9GUkFNRV9TRVEgPSBuZXh0O1xuICBjb25zdCBwZXJmTXMgPVxuICAgIHR5cGVvZiB3aW5kb3cucGVyZm9ybWFuY2U/Lm5vdyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IE51bWJlcih3aW5kb3cucGVyZm9ybWFuY2Uubm93KCkudG9GaXhlZCgzKSlcbiAgICAgIDogbnVsbDtcbiAgcmV0dXJuIHsgZnJhbWU6IG5leHQsIHBlcmZNcyB9O1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVGaW5pc2hNb2RlKG1vZGUpIHtcbiAgaWYgKG1vZGUgPT09IFwiaW1tZWRpYXRlXCIgfHwgbW9kZSA9PT0gXCJyYWZcIiB8fCBtb2RlID09PSBcInRpbWVvdXQxMDBcIikgcmV0dXJuIG1vZGU7XG4gIHJldHVybiBcInJhZlwiO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVXaWR0aE1vZGUobW9kZSkge1xuICByZXR1cm4gbW9kZSA9PT0gXCJmaXQtY29udGVudFwiID8gXCJmaXQtY29udGVudFwiIDogXCJtZWFzdXJlZFwiO1xufVxuXG5mdW5jdGlvbiBpc0JvbGRGb250V2VpZ2h0KHdlaWdodCkge1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHdlaWdodCB8fCBcIm5vcm1hbFwiKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gKFxuICAgIG5vcm1hbGl6ZWQgPT09IFwiYm9sZFwiIHx8XG4gICAgbm9ybWFsaXplZCA9PT0gXCJib2xkZXJcIiB8fFxuICAgIFtcIjUwMFwiLCBcIjYwMFwiLCBcIjcwMFwiLCBcIjgwMFwiLCBcIjkwMFwiXS5pbmNsdWRlcyhub3JtYWxpemVkKVxuICApO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVJbmxpbmVGb250UHJvcHMocmF3Rm9udFN0eWxlLCByYXdGb250V2VpZ2h0KSB7XG4gIGNvbnN0IHN0eWxlVG9rZW4gPSBTdHJpbmcocmF3Rm9udFN0eWxlIHx8IFwibm9ybWFsXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHdlaWdodFRva2VuID0gU3RyaW5nKHJhd0ZvbnRXZWlnaHQgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBpdGFsaWMgPSBzdHlsZVRva2VuLmluY2x1ZGVzKFwiaXRhbGljXCIpIHx8IHN0eWxlVG9rZW4uaW5jbHVkZXMoXCJvYmxpcXVlXCIpO1xuICBjb25zdCBib2xkRnJvbVN0eWxlID0gc3R5bGVUb2tlbi5pbmNsdWRlcyhcImJvbGRcIik7XG4gIGNvbnN0IGJvbGRGcm9tV2VpZ2h0ID0gaXNCb2xkRm9udFdlaWdodCh3ZWlnaHRUb2tlbik7XG4gIGNvbnN0IGJvbGQgPSBib2xkRnJvbVN0eWxlIHx8IGJvbGRGcm9tV2VpZ2h0O1xuXG4gIHJldHVybiB7XG4gICAgZm9udFN0eWxlOiBpdGFsaWMgPyBcIml0YWxpY1wiIDogXCJub3JtYWxcIixcbiAgICBmb250V2VpZ2h0OiBib2xkID8gXCJib2xkXCIgOiBcIm5vcm1hbFwiLFxuICB9O1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVFZGl0b3JUZXh0KHJhd1RleHQsIHsgdHJpbVBoYW50b21UcmFpbGluZ05ld2xpbmUgPSB0cnVlIH0gPSB7fSkge1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHJhd1RleHQgPz8gXCJcIilcbiAgICAucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpXG4gICAgLnJlcGxhY2UoL1xcdTIwMEIvZywgXCJcIik7XG4gIGlmICghdHJpbVBoYW50b21UcmFpbGluZ05ld2xpbmUpIHJldHVybiBub3JtYWxpemVkO1xuICBjb25zdCB0cmFpbGluZ05ld2xpbmVzID0gbm9ybWFsaXplZC5tYXRjaCgvXFxuKyQvKT8uWzBdLmxlbmd0aCB8fCAwO1xuICBpZiAodHJhaWxpbmdOZXdsaW5lcyA+PSAyKSB7XG4gICAgLy8gY29udGVudEVkaXRhYmxlIHB1ZWRlIHJlcG9ydGFyIHVuYSBsaW5lYSB2YWNpYSBleHRyYSB0ZW1wb3JhbCBhbCBoYWNlciBFbnRlci5cbiAgICByZXR1cm4gbm9ybWFsaXplZC5zbGljZSgwLCAtMSk7XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG5cbmZ1bmN0aW9uIGNvdW50TGluZXModGV4dCkge1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHRleHQgPz8gXCJcIikucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xuICByZXR1cm4gbm9ybWFsaXplZCA9PT0gXCJcIiA/IDEgOiBub3JtYWxpemVkLnNwbGl0KFwiXFxuXCIpLmxlbmd0aDtcbn1cblxuZnVuY3Rpb24gY291bnRUcmFpbGluZ05ld2xpbmVzKHRleHQpIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFN0cmluZyh0ZXh0ID8/IFwiXCIpLnJlcGxhY2UoL1xcclxcbi9nLCBcIlxcblwiKTtcbiAgY29uc3QgdHJhaWxpbmcgPSBub3JtYWxpemVkLm1hdGNoKC9cXG4rJC8pPy5bMF07XG4gIHJldHVybiB0cmFpbGluZyA/IHRyYWlsaW5nLmxlbmd0aCA6IDA7XG59XG5cbmZ1bmN0aW9uIHJlY3RUb1BheWxvYWQocmVjdCkge1xuICBpZiAoIXJlY3QpIHJldHVybiBudWxsO1xuICByZXR1cm4ge1xuICAgIHg6IHJlY3QueCxcbiAgICB5OiByZWN0LnksXG4gICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0RnVsbFJhbmdlUmVjdChlbCkge1xuICBpZiAoIWVsKSByZXR1cm4gbnVsbDtcbiAgaWYgKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbCk7XG4gICAgY29uc3QgcmVjdCA9IHJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiByZWN0VG9QYXlsb2FkKHJlY3QpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb25SZWN0SW5FZGl0b3IoZWwpIHtcbiAgaWYgKCFlbCB8fCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4geyBpbkVkaXRvcjogZmFsc2UsIHJlY3Q6IG51bGwgfTtcbiAgaWYgKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGlzRm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsO1xuICAgIHJldHVybiB7XG4gICAgICBpbkVkaXRvcjogaXNGb2N1c2VkLFxuICAgICAgcmVjdDogaXNGb2N1c2VkID8gcmVjdFRvUGF5bG9hZChlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkgOiBudWxsLFxuICAgIH07XG4gIH1cbiAgY29uc3Qgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbj8uKCk7XG4gIGlmICghc2VsIHx8IHNlbC5yYW5nZUNvdW50ID09PSAwKSByZXR1cm4geyBpbkVkaXRvcjogZmFsc2UsIHJlY3Q6IG51bGwgfTtcbiAgdHJ5IHtcbiAgICBjb25zdCByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xuICAgIGNvbnN0IHN0YXJ0SW4gPSBlbC5jb250YWlucyhyYW5nZS5zdGFydENvbnRhaW5lcik7XG4gICAgY29uc3QgZW5kSW4gPSBlbC5jb250YWlucyhyYW5nZS5lbmRDb250YWluZXIpO1xuICAgIGlmICghc3RhcnRJbiB8fCAhZW5kSW4pIHJldHVybiB7IGluRWRpdG9yOiBmYWxzZSwgcmVjdDogbnVsbCB9O1xuICAgIGNvbnN0IHJlY3QgPSByYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4geyBpbkVkaXRvcjogdHJ1ZSwgcmVjdDogcmVjdFRvUGF5bG9hZChyZWN0KSB9O1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4geyBpbkVkaXRvcjogZmFsc2UsIHJlY3Q6IG51bGwgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDb2xsYXBzZWRDYXJldFByb2JlUmVjdEluRWRpdG9yKGVsKSB7XG4gIGlmICghZWwgfHwgZWwgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50IHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xuICBjb25zdCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uPy4oKTtcbiAgaWYgKCFzZWwgfHwgc2VsLnJhbmdlQ291bnQgPT09IDApIHJldHVybiBudWxsO1xuICBsZXQgb3JpZ2luYWxSYW5nZSA9IG51bGw7XG4gIGxldCBtYXJrZXIgPSBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IGFjdGl2ZVJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgaWYgKCFlbC5jb250YWlucyhhY3RpdmVSYW5nZS5zdGFydENvbnRhaW5lcikgfHwgIWVsLmNvbnRhaW5zKGFjdGl2ZVJhbmdlLmVuZENvbnRhaW5lcikpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBvcmlnaW5hbFJhbmdlID0gYWN0aXZlUmFuZ2UuY2xvbmVSYW5nZSgpO1xuICAgIGNvbnN0IHByb2JlUmFuZ2UgPSBhY3RpdmVSYW5nZS5jbG9uZVJhbmdlKCk7XG4gICAgcHJvYmVSYW5nZS5jb2xsYXBzZSh0cnVlKTtcblxuICAgIG1hcmtlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIG1hcmtlci50ZXh0Q29udGVudCA9IFwiXFx1MjAwYlwiO1xuICAgIG1hcmtlci5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcbiAgICBtYXJrZXIuc3R5bGUud2lkdGggPSBcIjBweFwiO1xuICAgIG1hcmtlci5zdHlsZS5wYWRkaW5nID0gXCIwXCI7XG4gICAgbWFya2VyLnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xuICAgIG1hcmtlci5zdHlsZS5ib3JkZXIgPSBcIjBcIjtcbiAgICBtYXJrZXIuc3R5bGUubGluZUhlaWdodCA9IFwiMVwiO1xuICAgIG1hcmtlci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG5cbiAgICBwcm9iZVJhbmdlLmluc2VydE5vZGUobWFya2VyKTtcbiAgICBjb25zdCByZWN0ID0gbWFya2VyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgaWYgKG1hcmtlci5wYXJlbnROb2RlKSB7XG4gICAgICBtYXJrZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtYXJrZXIpO1xuICAgICAgbWFya2VyLnBhcmVudE5vZGU/Lm5vcm1hbGl6ZT8uKCk7XG4gICAgfVxuICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICBzZWwuYWRkUmFuZ2Uob3JpZ2luYWxSYW5nZSk7XG4gICAgcmV0dXJuIHJlY3RUb1BheWxvYWQocmVjdCk7XG4gIH0gY2F0Y2gge1xuICAgIHRyeSB7XG4gICAgICBpZiAobWFya2VyPy5wYXJlbnROb2RlKSB7XG4gICAgICAgIG1hcmtlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1hcmtlcik7XG4gICAgICB9XG4gICAgICBpZiAob3JpZ2luYWxSYW5nZSAmJiBzZWwpIHtcbiAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICBzZWwuYWRkUmFuZ2Uob3JpZ2luYWxSYW5nZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBuby1vcFxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiByb3VuZE1ldHJpYyh2YWx1ZSwgZGlnaXRzID0gNCkge1xuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHZhbHVlKSA/IE51bWJlcih2YWx1ZS50b0ZpeGVkKGRpZ2l0cykpIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0Rmlyc3RHbHlwaFJlY3RJbkVkaXRvcihlbCkge1xuICBpZiAoIWVsIHx8IGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCB8fCB0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IHdhbGtlciA9IGRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoZWwsIE5vZGVGaWx0ZXIuU0hPV19URVhUKTtcbiAgICBsZXQgdGV4dE5vZGUgPSBudWxsO1xuICAgIHdoaWxlICh3YWxrZXIubmV4dE5vZGUoKSkge1xuICAgICAgY29uc3Qgbm9kZSA9IHdhbGtlci5jdXJyZW50Tm9kZTtcbiAgICAgIGNvbnN0IHRleHQgPSBub2RlPy5ub2RlVmFsdWUgfHwgXCJcIjtcbiAgICAgIGlmICh0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGV4dE5vZGUgPSBub2RlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0ZXh0Tm9kZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgIHJhbmdlLnNldFN0YXJ0KHRleHROb2RlLCAwKTtcbiAgICByYW5nZS5zZXRFbmQodGV4dE5vZGUsIE1hdGgubWluKDEsIHRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGgpKTtcbiAgICByZXR1cm4gcmVjdFRvUGF5bG9hZChyYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1lYXN1cmVDYW52YXNJbmtNZXRyaWNzKHtcbiAgZm9udFN0eWxlLFxuICBmb250V2VpZ2h0LFxuICBmb250U2l6ZVB4LFxuICBmb250RmFtaWx5LFxuICBwcm9iZVRleHQsXG59KSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBpZiAoIWN0eCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3Qgc2FmZUZhbWlseSA9IFN0cmluZyhmb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwiKTtcbiAgICBjb25zdCBmYW1pbHlGb3JDYW52YXMgPSBzYWZlRmFtaWx5LmluY2x1ZGVzKFwiLFwiKVxuICAgICAgPyBzYWZlRmFtaWx5XG4gICAgICA6ICgvXFxzLy50ZXN0KHNhZmVGYW1pbHkpID8gYFwiJHtzYWZlRmFtaWx5fVwiYCA6IHNhZmVGYW1pbHkpO1xuICAgIGN0eC5mb250ID0gYCR7Zm9udFN0eWxlIHx8IFwibm9ybWFsXCJ9ICR7Zm9udFdlaWdodCB8fCBcIm5vcm1hbFwifSAke2ZvbnRTaXplUHh9cHggJHtmYW1pbHlGb3JDYW52YXN9YDtcbiAgICBjb25zdCBtID0gY3R4Lm1lYXN1cmVUZXh0KHByb2JlVGV4dCB8fCBcIkhnXCIpO1xuICAgIGNvbnN0IGFzY2VudCA9IE51bWJlcihtLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50IHx8IDApO1xuICAgIGNvbnN0IGRlc2NlbnQgPSBOdW1iZXIobS5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQgfHwgMCk7XG4gICAgY29uc3QgaW5rSGVpZ2h0ID0gYXNjZW50ICsgZGVzY2VudDtcbiAgICBjb25zdCBmb250QXNjZW50ID0gTnVtYmVyKG0uZm9udEJvdW5kaW5nQm94QXNjZW50IHx8IDApO1xuICAgIGNvbnN0IGZvbnREZXNjZW50ID0gTnVtYmVyKG0uZm9udEJvdW5kaW5nQm94RGVzY2VudCB8fCAwKTtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvYmVUZXh0LFxuICAgICAgYWN0dWFsQXNjZW50UHg6IHJvdW5kTWV0cmljKGFzY2VudCksXG4gICAgICBhY3R1YWxEZXNjZW50UHg6IHJvdW5kTWV0cmljKGRlc2NlbnQpLFxuICAgICAgYWN0dWFsSW5rSGVpZ2h0UHg6IHJvdW5kTWV0cmljKGlua0hlaWdodCksXG4gICAgICBmb250QXNjZW50UHg6IHJvdW5kTWV0cmljKGZvbnRBc2NlbnQpLFxuICAgICAgZm9udERlc2NlbnRQeDogcm91bmRNZXRyaWMoZm9udERlc2NlbnQpLFxuICAgICAgZm9udEJveEhlaWdodFB4OiByb3VuZE1ldHJpYyhmb250QXNjZW50ICsgZm9udERlc2NlbnQpLFxuICAgIH07XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1lYXN1cmVEb21JbmtQcm9iZSh7XG4gIGZvbnRTdHlsZSxcbiAgZm9udFdlaWdodCxcbiAgZm9udFNpemVQeCxcbiAgZm9udEZhbWlseSxcbiAgbGluZUhlaWdodFB4LFxuICBwcm9iZVRleHQsXG59KSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBudWxsO1xuICBsZXQgaG9zdCA9IG51bGw7XG4gIHRyeSB7XG4gICAgaG9zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaG9zdC5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICBob3N0LnN0eWxlLmxlZnQgPSBcIi0xMDAwMDBweFwiO1xuICAgIGhvc3Quc3R5bGUudG9wID0gXCItMTAwMDAwcHhcIjtcbiAgICBob3N0LnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xuICAgIGhvc3Quc3R5bGUucGFkZGluZyA9IFwiMFwiO1xuICAgIGhvc3Quc3R5bGUuYm9yZGVyID0gXCIwXCI7XG4gICAgaG9zdC5zdHlsZS53aGl0ZVNwYWNlID0gXCJwcmVcIjtcbiAgICBob3N0LnN0eWxlLmZvbnRTaXplID0gYCR7Zm9udFNpemVQeH1weGA7XG4gICAgaG9zdC5zdHlsZS5mb250RmFtaWx5ID0gZm9udEZhbWlseSB8fCBcInNhbnMtc2VyaWZcIjtcbiAgICBob3N0LnN0eWxlLmZvbnRXZWlnaHQgPSBmb250V2VpZ2h0IHx8IFwibm9ybWFsXCI7XG4gICAgaG9zdC5zdHlsZS5mb250U3R5bGUgPSBmb250U3R5bGUgfHwgXCJub3JtYWxcIjtcbiAgICBob3N0LnN0eWxlLmxpbmVIZWlnaHQgPSBgJHtsaW5lSGVpZ2h0UHh9cHhgO1xuICAgIGhvc3Quc3R5bGUuYm94U2l6aW5nID0gXCJib3JkZXItYm94XCI7XG4gICAgaG9zdC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgaG9zdC5zdHlsZS51c2VyU2VsZWN0ID0gXCJub25lXCI7XG5cbiAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgc3Bhbi5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcbiAgICBzcGFuLnN0eWxlLnBhZGRpbmcgPSBcIjBcIjtcbiAgICBzcGFuLnN0eWxlLmJvcmRlciA9IFwiMFwiO1xuICAgIHNwYW4uc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlXCI7XG4gICAgc3Bhbi50ZXh0Q29udGVudCA9IHByb2JlVGV4dCB8fCBcIkhnXCI7XG4gICAgaG9zdC5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhvc3QpO1xuXG4gICAgY29uc3QgaG9zdFJlY3QgPSBob3N0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHNwYW5SZWN0ID0gc3Bhbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvYmVUZXh0LFxuICAgICAgaG9zdEhlaWdodFB4OiByb3VuZE1ldHJpYyhob3N0UmVjdC5oZWlnaHQpLFxuICAgICAgZ2x5cGhIZWlnaHRQeDogcm91bmRNZXRyaWMoc3BhblJlY3QuaGVpZ2h0KSxcbiAgICAgIGdseXBoVG9wSW5zZXRQeDogcm91bmRNZXRyaWMoc3BhblJlY3QudG9wIC0gaG9zdFJlY3QudG9wKSxcbiAgICAgIGdseXBoQm90dG9tSW5zZXRQeDogcm91bmRNZXRyaWMoaG9zdFJlY3QuYm90dG9tIC0gc3BhblJlY3QuYm90dG9tKSxcbiAgICB9O1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoaG9zdCAmJiBob3N0LnBhcmVudE5vZGUpIHtcbiAgICAgIGhvc3QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChob3N0KTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgSU5MSU5FX0xBWU9VVF9WRVJTSU9OID0gXCJsaW5lYnJlYWstdW5pZmllZC1lZGl0b3ItdjlcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW5saW5lVGV4dEVkaXRvcih7XG4gIGVkaXRpbmdJZCA9IG51bGwsXG4gIG5vZGUsXG4gIHZhbHVlLFxuICBvbkNoYW5nZSxcbiAgb25GaW5pc2gsXG4gIHRleHRBbGlnbixcbiAgc2NhbGVWaXN1YWwgPSAxLFxuICBmaW5pc2hNb2RlID0gXCJyYWZcIixcbiAgd2lkdGhNb2RlID0gXCJtZWFzdXJlZFwiLFxuICBvbk92ZXJsYXlNb3VudENoYW5nZSA9IG51bGwsXG4gIG9uRGVidWdFdmVudCA9IG51bGwsXG59KSB7XG4gIGlmICghbm9kZSkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgZWRpdG9yUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCB0ZXh0Q2VudGVyWERvbVJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgREVCVUdfTU9ERSA9IGlzSW5saW5lRGVidWdFbmFibGVkKCk7XG5cbiAgY29uc3Qgbm9ybWFsaXplZEZpbmlzaE1vZGUgPSBub3JtYWxpemVGaW5pc2hNb2RlKGZpbmlzaE1vZGUpO1xuICBjb25zdCBub3JtYWxpemVkV2lkdGhNb2RlID0gbm9ybWFsaXplV2lkdGhNb2RlKHdpZHRoTW9kZSk7XG5cbiAgLy8gU3RhZ2UgKGxvIG5lY2VzaXRhbW9zIHBhcmEgcmVjdHMgeSBwb3NpY2lvbmVzKVxuICBjb25zdCBzdGFnZSA9IG5vZGUuZ2V0U3RhZ2UoKTtcbiAgaWYgKCFzdGFnZSkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3Qgc3RhZ2VCb3ggPSBzdGFnZS5jb250YWluZXIoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICBjb25zdCBzdGFnZVNjYWxlWCA9XG4gICAgdHlwZW9mIHN0YWdlLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiID8gc3RhZ2Uuc2NhbGVYKCkgOiBzdGFnZS5zY2FsZVggfHwgMTtcbiAgY29uc3Qgc3RhZ2VTY2FsZVkgPVxuICAgIHR5cGVvZiBzdGFnZS5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IHN0YWdlLnNjYWxlWSgpIDogc3RhZ2Uuc2NhbGVZIHx8IDE7XG5cbiAgY29uc3QgdG90YWxTY2FsZVggPSAoc2NhbGVWaXN1YWwgfHwgMSkgKiAoc3RhZ2VTY2FsZVggfHwgMSk7XG4gIGNvbnN0IHRvdGFsU2NhbGVZID0gKHNjYWxlVmlzdWFsIHx8IDEpICogKHN0YWdlU2NhbGVZIHx8IDEpO1xuXG4gIC8vIERldGVjdGFyIGVsIG5vZG8gZGUgdGV4dG8gcmVhbCBwYXJhIGVzdGlsbyAoY29sb3IsIGZ1ZW50ZSwgZXRjLilcbiAgY29uc3QgdGV4dE5vZGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKHR5cGVvZiBub2RlLmdldENsYXNzTmFtZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNvbnN0IGNscyA9IG5vZGUuZ2V0Q2xhc3NOYW1lKCk7XG4gICAgICAgIGlmIChjbHMgPT09IFwiVGV4dFwiKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm9kZUlkID1cbiAgICAgICAgKHR5cGVvZiBub2RlLmlkID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLmlkKCkgOiBub2RlPy5hdHRycz8uaWQpIHx8IG51bGw7XG4gICAgICBpZiAobm9kZUlkICYmIHR5cGVvZiBzdGFnZT8uZmluZE9uZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNvbnN0IHBhaXJlZFRleHQgPSBzdGFnZS5maW5kT25lKGAjJHtub2RlSWR9LXRleHRgKTtcbiAgICAgICAgaWYgKHBhaXJlZFRleHQ/LmdldENsYXNzTmFtZT8uKCkgPT09IFwiVGV4dFwiKSB7XG4gICAgICAgICAgcmV0dXJuIHBhaXJlZFRleHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBub2RlLmZpbmRPbmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjb25zdCBmb3VuZCA9IG5vZGUuZmluZE9uZSgobikgPT4gbi5nZXRDbGFzc05hbWUoKSA9PT0gXCJUZXh0XCIpO1xuICAgICAgICBpZiAoZm91bmQpIHJldHVybiBmb3VuZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBub2RlLmZpbmRBbmNlc3RvciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNvbnN0IGFuY2VzdG9yVGV4dCA9IG5vZGUuZmluZEFuY2VzdG9yKFxuICAgICAgICAgIChuKSA9PiBuLmdldENsYXNzTmFtZSAmJiBuLmdldENsYXNzTmFtZSgpID09PSBcIlRleHRcIlxuICAgICAgICApO1xuICAgICAgICBpZiAoYW5jZXN0b3JUZXh0KSByZXR1cm4gYW5jZXN0b3JUZXh0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgYnVzY2FuZG8gdGV4dE5vZGUgcGFyYSBJbmxpbmVUZXh0RWRpdG9yOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH0sIFtub2RlLCBzdGFnZV0pO1xuXG4gIGNvbnN0IG5vZGVQcm9wcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBnZXRQcm9wID0gKG4sIGdldHRlck5hbWUsIGZhbGxiYWNrKSA9PiB7XG4gICAgICAgIGlmICghbikgcmV0dXJuIGZhbGxiYWNrO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygbi5nZXRBdHRyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBuLmdldEF0dHIoZ2V0dGVyTmFtZSk7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhdHRyVmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgYXR0clZhbHVlICE9PSBudWxsICYmIGF0dHJWYWx1ZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmbiA9IG5bZ2V0dGVyTmFtZV07XG4gICAgICAgIGlmICh0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGZuLmNhbGwobik7XG4gICAgICAgIGlmICh0eXBlb2YgbltnZXR0ZXJOYW1lXSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuW2dldHRlck5hbWVdICE9PSBudWxsICYmIG5bZ2V0dGVyTmFtZV0gIT09IFwiXCIpIHtcbiAgICAgICAgICByZXR1cm4gbltnZXR0ZXJOYW1lXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByYXdGb250U3R5bGUgPSBnZXRQcm9wKHRleHROb2RlLCBcImZvbnRTdHlsZVwiLCBcIm5vcm1hbFwiKTtcbiAgICAgIGNvbnN0IHJhd0ZvbnRXZWlnaHQgPSBnZXRQcm9wKHRleHROb2RlLCBcImZvbnRXZWlnaHRcIiwgXCJub3JtYWxcIik7XG4gICAgICBjb25zdCBub3JtYWxpemVkRm9udCA9IG5vcm1hbGl6ZUlubGluZUZvbnRQcm9wcyhyYXdGb250U3R5bGUsIHJhd0ZvbnRXZWlnaHQpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBmb250U2l6ZTogZ2V0UHJvcCh0ZXh0Tm9kZSwgXCJmb250U2l6ZVwiLCAyNCksXG4gICAgICAgIGZvbnRGYW1pbHk6IGdldFByb3AodGV4dE5vZGUsIFwiZm9udEZhbWlseVwiLCBcInNhbnMtc2VyaWZcIiksXG4gICAgICAgIGZvbnRXZWlnaHQ6IG5vcm1hbGl6ZWRGb250LmZvbnRXZWlnaHQsXG4gICAgICAgIGZvbnRTdHlsZTogbm9ybWFsaXplZEZvbnQuZm9udFN0eWxlLFxuICAgICAgICBmaWxsOiBnZXRQcm9wKHRleHROb2RlLCBcImZpbGxcIiwgXCIjMDAwXCIpLFxuICAgICAgICBsaW5lSGVpZ2h0S29udmE6IGdldFByb3AodGV4dE5vZGUsIFwibGluZUhlaWdodFwiLCAxLjIpLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFwiRXJyb3Igb2J0ZW5pZW5kbyBwcm9waWVkYWRlcyBkZWwgdGV4dE5vZGU6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvbnRTaXplOiAyNCxcbiAgICAgICAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXG4gICAgICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgICAgIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgICAgICAgZmlsbDogXCIjMDAwXCIsXG4gICAgICAgIGxpbmVIZWlnaHRLb252YTogMS4yLFxuICAgICAgfTtcbiAgICB9XG4gIH0sIFt0ZXh0Tm9kZV0pO1xuXG4gIGNvbnN0IGtvbnZhTGluZUhlaWdodCA9IG5vZGVQcm9wcy5saW5lSGVpZ2h0S29udmE7XG4gIGNvbnN0IHJlY3RTb3VyY2VOb2RlID0gdGV4dE5vZGUgfHwgbm9kZTtcbiAgY29uc3QgcmVjdCA9IHJlY3RTb3VyY2VOb2RlLmdldENsaWVudFJlY3QoeyByZWxhdGl2ZVRvOiBzdGFnZSwgc2tpcFN0cm9rZTogdHJ1ZSB9KTtcblxuICBjb25zdCBQQURESU5HX1ggPSAwO1xuICBjb25zdCBQQURESU5HX1kgPSAwO1xuICBjb25zdCBmb250U2l6ZVB4ID0gTWF0aC5tYXgoMSwgTnVtYmVyKG5vZGVQcm9wcy5mb250U2l6ZSB8fCAyNCkgKiB0b3RhbFNjYWxlWSk7XG4gIGNvbnN0IGxpbmVIZWlnaHRQeCA9IE1hdGgubWF4KDEsIGZvbnRTaXplUHggKiBrb252YUxpbmVIZWlnaHQpO1xuICBjb25zdCByYXdWYWx1ZSA9IFN0cmluZyh2YWx1ZSA/PyBcIlwiKTtcbiAgY29uc3Qgbm9ybWFsaXplZFZhbHVlID0gcmF3VmFsdWUucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xuICBjb25zdCBub3JtYWxpemVkVmFsdWVGb3JTaW5nbGVMaW5lID0gbm9ybWFsaXplZFZhbHVlLnJlcGxhY2UoL1xcbiskL2csIFwiXCIpO1xuICBjb25zdCBpc1NpbmdsZUxpbmUgPSAhbm9ybWFsaXplZFZhbHVlLmluY2x1ZGVzKFwiXFxuXCIpO1xuICBjb25zdCB2ZXJ0aWNhbEluc2V0UHggPSAwO1xuICBjb25zdCBlZGl0YWJsZUxpbmVIZWlnaHRQeCA9IGxpbmVIZWlnaHRQeDtcblxuICBjb25zdCBjbGFzc05hbWUgPVxuICAgIHR5cGVvZiBub2RlLmdldENsYXNzTmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5nZXRDbGFzc05hbWUoKSA6IFwiVGV4dFwiO1xuICBjb25zdCBpc1RleHROb2RlID0gY2xhc3NOYW1lID09PSBcIlRleHRcIjtcblxuICBjb25zdCBiYXNlVGV4dFdpZHRoID0gTWF0aC5tYXgoMjAsIHJlY3Qud2lkdGggKiB0b3RhbFNjYWxlWCk7XG5cbiAgY29uc3QgbWVhc3VyZWRDb250ZW50V2lkdGggPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobm9ybWFsaXplZFdpZHRoTW9kZSAhPT0gXCJtZWFzdXJlZFwiKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgaWYgKCFjdHgpIHJldHVybiBiYXNlVGV4dFdpZHRoO1xuXG4gICAgY29uc3Qgc2FmZUZvbnRGYW1pbHkgPSBTdHJpbmcobm9kZVByb3BzLmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCIpO1xuICAgIGNvbnN0IGZvbnRGYW1pbHlGb3JDYW52YXMgPSBzYWZlRm9udEZhbWlseS5pbmNsdWRlcyhcIixcIilcbiAgICAgID8gc2FmZUZvbnRGYW1pbHlcbiAgICAgIDogKC9cXHMvLnRlc3Qoc2FmZUZvbnRGYW1pbHkpID8gYFwiJHtzYWZlRm9udEZhbWlseX1cImAgOiBzYWZlRm9udEZhbWlseSk7XG4gICAgY3R4LmZvbnQgPSBgJHtub2RlUHJvcHMuZm9udFN0eWxlIHx8IFwibm9ybWFsXCJ9ICR7bm9kZVByb3BzLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn0gJHtmb250U2l6ZVB4fXB4ICR7Zm9udEZhbWlseUZvckNhbnZhc31gO1xuXG4gICAgY29uc3QgdGV4dFZhbHVlID0gaXNTaW5nbGVMaW5lID8gbm9ybWFsaXplZFZhbHVlRm9yU2luZ2xlTGluZSA6IG5vcm1hbGl6ZWRWYWx1ZTtcbiAgICBjb25zdCBsaW5lcyA9IHRleHRWYWx1ZS5zcGxpdCgvXFxyP1xcbi8pO1xuICAgIGNvbnN0IG1heExpbmVXaWR0aCA9IE1hdGgubWF4KC4uLmxpbmVzLm1hcCgobGluZSkgPT4gY3R4Lm1lYXN1cmVUZXh0KGxpbmUpLndpZHRoKSwgMCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDIwLCBNYXRoLmNlaWwobWF4TGluZVdpZHRoKSk7XG4gIH0sIFtcbiAgICBub3JtYWxpemVkV2lkdGhNb2RlLFxuICAgIG5vZGVQcm9wcy5mb250RmFtaWx5LFxuICAgIG5vZGVQcm9wcy5mb250U2l6ZSxcbiAgICBub2RlUHJvcHMuZm9udFN0eWxlLFxuICAgIG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgIHRvdGFsU2NhbGVZLFxuICAgIGlzU2luZ2xlTGluZSxcbiAgICBub3JtYWxpemVkVmFsdWUsXG4gICAgbm9ybWFsaXplZFZhbHVlRm9yU2luZ2xlTGluZSxcbiAgXSk7XG5cbiAgY29uc3QgZWZmZWN0aXZlVGV4dFdpZHRoID1cbiAgICBub3JtYWxpemVkV2lkdGhNb2RlID09PSBcIm1lYXN1cmVkXCIgJiYgTnVtYmVyLmlzRmluaXRlKG1lYXN1cmVkQ29udGVudFdpZHRoKVxuICAgICAgPyBtZWFzdXJlZENvbnRlbnRXaWR0aFxuICAgICAgOiBiYXNlVGV4dFdpZHRoO1xuICBjb25zdCBtaW5XaWR0aFB4ID1cbiAgICBub3JtYWxpemVkV2lkdGhNb2RlID09PSBcIm1lYXN1cmVkXCIgPyBlZmZlY3RpdmVUZXh0V2lkdGggOiBiYXNlVGV4dFdpZHRoO1xuXG4gIGNvbnN0IGNhcmRXaWR0aCA9IGVmZmVjdGl2ZVRleHRXaWR0aCArIFBBRERJTkdfWCAqIDI7XG4gIGxldCBsZWZ0O1xuICBsZXQgdG9wO1xuXG4gIGlmIChpc1RleHROb2RlKSB7XG4gICAgaWYgKHRleHRDZW50ZXJYRG9tUmVmLmN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgY29uc3QgY2VudGVyWENhbnZhcyA9IHJlY3QueCArIHJlY3Qud2lkdGggLyAyO1xuICAgICAgdGV4dENlbnRlclhEb21SZWYuY3VycmVudCA9XG4gICAgICAgIHN0YWdlQm94LmxlZnQgKyBjZW50ZXJYQ2FudmFzICogdG90YWxTY2FsZVggKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICB9XG5cbiAgICB0b3AgPVxuICAgICAgc3RhZ2VCb3gudG9wICtcbiAgICAgIHJlY3QueSAqIHRvdGFsU2NhbGVZICtcbiAgICAgIHdpbmRvdy5zY3JvbGxZIC1cbiAgICAgIFBBRERJTkdfWTtcbiAgICBsZWZ0ID0gdGV4dENlbnRlclhEb21SZWYuY3VycmVudCAtIGNhcmRXaWR0aCAvIDI7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY2VudGVyWENhbnZhcyA9IHJlY3QueCArIHJlY3Qud2lkdGggLyAyO1xuICAgIGNvbnN0IGNlbnRlcllDYW52YXMgPSByZWN0LnkgKyByZWN0LmhlaWdodCAvIDI7XG5cbiAgICBjb25zdCBjZW50ZXJYRG9tID1cbiAgICAgIHN0YWdlQm94LmxlZnQgKyBjZW50ZXJYQ2FudmFzICogdG90YWxTY2FsZVggKyB3aW5kb3cuc2Nyb2xsWDtcbiAgICBjb25zdCBjZW50ZXJZRG9tID1cbiAgICAgIHN0YWdlQm94LnRvcCArIGNlbnRlcllDYW52YXMgKiB0b3RhbFNjYWxlWSArIHdpbmRvdy5zY3JvbGxZO1xuXG4gICAgY29uc3QgYXBwcm94SGVpZ2h0ID1cbiAgICAgIG5vZGVQcm9wcy5mb250U2l6ZSAqIGtvbnZhTGluZUhlaWdodCAqIHRvdGFsU2NhbGVZICsgUEFERElOR19ZICogMjtcblxuICAgIGxlZnQgPSBjZW50ZXJYRG9tIC0gY2FyZFdpZHRoIC8gMjtcbiAgICB0b3AgPSBjZW50ZXJZRG9tIC0gYXBwcm94SGVpZ2h0IC8gMjtcbiAgfVxuXG4gIGNvbnN0IGVtaXREZWJ1ZyA9IHVzZUNhbGxiYWNrKChldmVudE5hbWUsIGV4dHJhID0ge30pID0+IHtcbiAgICBpZiAoIURFQlVHX01PREUpIHJldHVybjtcbiAgICBjb25zdCBlc3NlbnRpYWxFdmVudHMgPSBuZXcgU2V0KFtcbiAgICAgIFwib3ZlcmxheTogYWZ0ZXItZm9jdXNcIixcbiAgICAgIFwiaW5wdXQ6IGxpbmVicmVha1wiLFxuICAgIF0pO1xuICAgIGlmICghZXNzZW50aWFsRXZlbnRzLmhhcyhldmVudE5hbWUpKSByZXR1cm47XG4gICAgY29uc3QgdHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgZnJhbWVNZXRhID0gbmV4dElubGluZUZyYW1lTWV0YSgpO1xuICAgIGNvbnN0IG92ZXJsYXlFbCA9IGVkaXRvclJlZi5jdXJyZW50Py5wYXJlbnRFbGVtZW50IHx8IG51bGw7XG4gICAgY29uc3Qgb3ZlcmxheVJlY3QgPSBvdmVybGF5RWw/LmdldEJvdW5kaW5nQ2xpZW50UmVjdD8uKCkgfHwgbnVsbDtcbiAgICBjb25zdCBjb250ZW50UmVjdCA9IGVkaXRvclJlZi5jdXJyZW50Py5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpIHx8IG51bGw7XG4gICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGVkaXRvclJlZi5jdXJyZW50XG4gICAgICA/IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVkaXRvclJlZi5jdXJyZW50KVxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGZ1bGxSYW5nZVJlY3QgPSBnZXRGdWxsUmFuZ2VSZWN0KGVkaXRvclJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBzZWxlY3Rpb25JbmZvID0gZ2V0U2VsZWN0aW9uUmVjdEluRWRpdG9yKGVkaXRvclJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBwcm9qZWN0ZWRLb252YVJlY3QgPSB7XG4gICAgICB4OiBzdGFnZUJveC5sZWZ0ICsgcmVjdC54ICogdG90YWxTY2FsZVggKyB3aW5kb3cuc2Nyb2xsWCxcbiAgICAgIHk6IHN0YWdlQm94LnRvcCArIHJlY3QueSAqIHRvdGFsU2NhbGVZICsgd2luZG93LnNjcm9sbFksXG4gICAgICB3aWR0aDogcmVjdC53aWR0aCAqIHRvdGFsU2NhbGVYLFxuICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCAqIHRvdGFsU2NhbGVZLFxuICAgIH07XG4gICAgY29uc3Qgb3ZlcmxheVRvS29udmFEeSA9IG92ZXJsYXlSZWN0XG4gICAgICA/IG92ZXJsYXlSZWN0LnkgLSBwcm9qZWN0ZWRLb252YVJlY3QueVxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGNvbnRlbnRUb0tvbnZhRHkgPSBjb250ZW50UmVjdFxuICAgICAgPyBjb250ZW50UmVjdC55IC0gcHJvamVjdGVkS29udmFSZWN0LnlcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBmdWxsUmFuZ2VUb0NvbnRlbnREeSA9XG4gICAgICBmdWxsUmFuZ2VSZWN0ICYmIGNvbnRlbnRSZWN0ID8gZnVsbFJhbmdlUmVjdC55IC0gY29udGVudFJlY3QueSA6IG51bGw7XG4gICAgY29uc3QgY2FyZXRUb0NvbnRlbnREeSA9XG4gICAgICBzZWxlY3Rpb25JbmZvLmluRWRpdG9yICYmIHNlbGVjdGlvbkluZm8ucmVjdCAmJiBjb250ZW50UmVjdFxuICAgICAgICA/IHNlbGVjdGlvbkluZm8ucmVjdC55IC0gY29udGVudFJlY3QueVxuICAgICAgICA6IG51bGw7XG4gICAgY29uc3QgY2FyZXRQcm9iZVJlY3QgPSBnZXRDb2xsYXBzZWRDYXJldFByb2JlUmVjdEluRWRpdG9yKGVkaXRvclJlZi5jdXJyZW50KTtcbiAgICBjb25zdCBjYXJldFByb2JlVG9Db250ZW50RHkgPVxuICAgICAgY2FyZXRQcm9iZVJlY3QgJiYgY29udGVudFJlY3QgPyBjYXJldFByb2JlUmVjdC55IC0gY29udGVudFJlY3QueSA6IG51bGw7XG4gICAgY29uc3QgY2FyZXRQcm9iZUhlaWdodFB4ID0gY2FyZXRQcm9iZVJlY3QgPyBjYXJldFByb2JlUmVjdC5oZWlnaHQgOiBudWxsO1xuICAgIGNvbnN0IGZpcnN0R2x5cGhSZWN0ID0gZ2V0Rmlyc3RHbHlwaFJlY3RJbkVkaXRvcihlZGl0b3JSZWYuY3VycmVudCk7XG4gICAgY29uc3QgZmlyc3RHbHlwaFRvQ29udGVudER5ID1cbiAgICAgIGZpcnN0R2x5cGhSZWN0ICYmIGNvbnRlbnRSZWN0ID8gZmlyc3RHbHlwaFJlY3QueSAtIGNvbnRlbnRSZWN0LnkgOiBudWxsO1xuICAgIGNvbnN0IGZpcnN0R2x5cGhIZWlnaHRQeCA9IGZpcnN0R2x5cGhSZWN0ID8gZmlyc3RHbHlwaFJlY3QuaGVpZ2h0IDogbnVsbDtcbiAgICBjb25zdCBwcm9iZVRleHQgPSAoXG4gICAgICBpc1NpbmdsZUxpbmVcbiAgICAgICAgPyBub3JtYWxpemVkVmFsdWVGb3JTaW5nbGVMaW5lXG4gICAgICAgIDogKG5vcm1hbGl6ZWRWYWx1ZS5zcGxpdCgvXFxyP1xcbi8pWzBdIHx8IFwiXCIpXG4gICAgKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMEIvZywgXCJcIilcbiAgICAgIC5zbGljZSgwLCAzMikgfHwgXCJIZ0F5XCI7XG4gICAgY29uc3QgY2FudmFzSW5rTWV0cmljcyA9IG1lYXN1cmVDYW52YXNJbmtNZXRyaWNzKHtcbiAgICAgIGZvbnRTdHlsZTogbm9kZVByb3BzLmZvbnRTdHlsZSxcbiAgICAgIGZvbnRXZWlnaHQ6IG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgICAgZm9udFNpemVQeCxcbiAgICAgIGZvbnRGYW1pbHk6IG5vZGVQcm9wcy5mb250RmFtaWx5LFxuICAgICAgcHJvYmVUZXh0LFxuICAgIH0pO1xuICAgIGNvbnN0IGRvbUlua1Byb2JlID0gbWVhc3VyZURvbUlua1Byb2JlKHtcbiAgICAgIGZvbnRTdHlsZTogbm9kZVByb3BzLmZvbnRTdHlsZSxcbiAgICAgIGZvbnRXZWlnaHQ6IG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgICAgZm9udFNpemVQeCxcbiAgICAgIGZvbnRGYW1pbHk6IG5vZGVQcm9wcy5mb250RmFtaWx5LFxuICAgICAgbGluZUhlaWdodFB4OiBlZGl0YWJsZUxpbmVIZWlnaHRQeCxcbiAgICAgIHByb2JlVGV4dCxcbiAgICB9KTtcbiAgICBjb25zdCBjYW52YXNJbmtUb3BJbnNldFB4ID1cbiAgICAgIGNhbnZhc0lua01ldHJpY3MgJiYgTnVtYmVyLmlzRmluaXRlKGNhbnZhc0lua01ldHJpY3MuYWN0dWFsSW5rSGVpZ2h0UHgpXG4gICAgICAgID8gKGVkaXRhYmxlTGluZUhlaWdodFB4IC0gY2FudmFzSW5rTWV0cmljcy5hY3R1YWxJbmtIZWlnaHRQeCkgLyAyXG4gICAgICAgIDogbnVsbDtcbiAgICBjb25zdCBkb21Wc0NhbnZhc1RvcEluc2V0RGVsdGFQeCA9XG4gICAgICBkb21JbmtQcm9iZSAmJiBOdW1iZXIuaXNGaW5pdGUoY2FudmFzSW5rVG9wSW5zZXRQeClcbiAgICAgICAgPyBkb21JbmtQcm9iZS5nbHlwaFRvcEluc2V0UHggLSBjYW52YXNJbmtUb3BJbnNldFB4XG4gICAgICAgIDogbnVsbDtcbiAgICBjb25zdCBsaXZlVnNQcm9iZUdseXBoVG9wRGVsdGFQeCA9XG4gICAgICBOdW1iZXIuaXNGaW5pdGUoZmlyc3RHbHlwaFRvQ29udGVudER5KSAmJiBkb21JbmtQcm9iZVxuICAgICAgICA/IGZpcnN0R2x5cGhUb0NvbnRlbnREeSAtIGRvbUlua1Byb2JlLmdseXBoVG9wSW5zZXRQeFxuICAgICAgICA6IG51bGw7XG5cbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgLi4uZnJhbWVNZXRhLFxuICAgICAgaWQ6IGVkaXRpbmdJZCB8fCBudWxsLFxuICAgICAgZXZlbnROYW1lLFxuICAgICAgdmFsdWVMZW5ndGg6IHJhd1ZhbHVlLmxlbmd0aCxcbiAgICAgIGxlZnQsXG4gICAgICB0b3AsXG4gICAgICBiYXNlVGV4dFdpZHRoLFxuICAgICAgZWZmZWN0aXZlVGV4dFdpZHRoLFxuICAgICAgZmluaXNoTW9kZTogbm9ybWFsaXplZEZpbmlzaE1vZGUsXG4gICAgICB3aWR0aE1vZGU6IG5vcm1hbGl6ZWRXaWR0aE1vZGUsXG4gICAgICBvdmVybGF5UmVjdDogb3ZlcmxheVJlY3RcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB4OiBvdmVybGF5UmVjdC54LFxuICAgICAgICAgICAgeTogb3ZlcmxheVJlY3QueSxcbiAgICAgICAgICAgIHdpZHRoOiBvdmVybGF5UmVjdC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogb3ZlcmxheVJlY3QuaGVpZ2h0LFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgICAgY29udGVudFJlY3Q6IGNvbnRlbnRSZWN0XG4gICAgICAgID8ge1xuICAgICAgICAgICAgeDogY29udGVudFJlY3QueCxcbiAgICAgICAgICAgIHk6IGNvbnRlbnRSZWN0LnksXG4gICAgICAgICAgICB3aWR0aDogY29udGVudFJlY3Qud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGNvbnRlbnRSZWN0LmhlaWdodCxcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICAgIGNvbnRlbnRTY3JvbGxXaWR0aDogZWRpdG9yUmVmLmN1cnJlbnQ/LnNjcm9sbFdpZHRoID8/IG51bGwsXG4gICAgICBjb250ZW50Q2xpZW50V2lkdGg6IGVkaXRvclJlZi5jdXJyZW50Py5jbGllbnRXaWR0aCA/PyBudWxsLFxuICAgICAgaXNGb2N1c2VkOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBlZGl0b3JSZWYuY3VycmVudCxcbiAgICAgIHByb2plY3RlZEtvbnZhUmVjdCxcbiAgICAgIG92ZXJsYXlUb0tvbnZhRHksXG4gICAgICBjb250ZW50VG9Lb252YUR5LFxuICAgICAgZnVsbFJhbmdlUmVjdCxcbiAgICAgIHNlbGVjdGlvbkluRWRpdG9yOiBzZWxlY3Rpb25JbmZvLmluRWRpdG9yLFxuICAgICAgc2VsZWN0aW9uUmVjdDogc2VsZWN0aW9uSW5mby5yZWN0LFxuICAgICAgZnVsbFJhbmdlVG9Db250ZW50RHksXG4gICAgICBjYXJldFRvQ29udGVudER5LFxuICAgICAgY2FyZXRQcm9iZVJlY3QsXG4gICAgICBjYXJldFByb2JlVG9Db250ZW50RHksXG4gICAgICBjYXJldFByb2JlSGVpZ2h0UHgsXG4gICAgICBmaXJzdEdseXBoUmVjdCxcbiAgICAgIGZpcnN0R2x5cGhUb0NvbnRlbnREeSxcbiAgICAgIGZpcnN0R2x5cGhIZWlnaHRQeCxcbiAgICAgIGNvbXB1dGVkRm9udFNpemU6IGNvbXB1dGVkU3R5bGU/LmZvbnRTaXplID8/IG51bGwsXG4gICAgICBjb21wdXRlZExpbmVIZWlnaHQ6IGNvbXB1dGVkU3R5bGU/LmxpbmVIZWlnaHQgPz8gbnVsbCxcbiAgICAgIGNvbXB1dGVkUGFkZGluZ1RvcDogY29tcHV0ZWRTdHlsZT8ucGFkZGluZ1RvcCA/PyBudWxsLFxuICAgICAgY29tcHV0ZWRQYWRkaW5nQm90dG9tOiBjb21wdXRlZFN0eWxlPy5wYWRkaW5nQm90dG9tID8/IG51bGwsXG4gICAgICBjb21wdXRlZEJvcmRlclRvcDogY29tcHV0ZWRTdHlsZT8uYm9yZGVyVG9wV2lkdGggPz8gbnVsbCxcbiAgICAgIGNvbXB1dGVkQm9yZGVyQm90dG9tOiBjb21wdXRlZFN0eWxlPy5ib3JkZXJCb3R0b21XaWR0aCA/PyBudWxsLFxuICAgICAgZm9udFNpemVQeCxcbiAgICAgIGxpbmVIZWlnaHRQeCxcbiAgICAgIGlzU2luZ2xlTGluZSxcbiAgICAgIHZlcnRpY2FsSW5zZXRQeCxcbiAgICAgIGVkaXRhYmxlTGluZUhlaWdodFB4LFxuICAgICAgZWRpdG9yVGFnOiAhZWRpdG9yUmVmLmN1cnJlbnRcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogZWRpdG9yUmVmLmN1cnJlbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgICAgPyBcImlucHV0XCJcbiAgICAgICAgICA6IFwiY29udGVudEVkaXRhYmxlXCIsXG4gICAgICBub3JtYWxpemVkVmFsdWVMZW5ndGg6IGlzU2luZ2xlTGluZVxuICAgICAgICA/IG5vcm1hbGl6ZWRWYWx1ZUZvclNpbmdsZUxpbmUubGVuZ3RoXG4gICAgICAgIDogbm9ybWFsaXplZFZhbHVlLmxlbmd0aCxcbiAgICAgIGhhZFRyYWlsaW5nTmV3bGluZTpcbiAgICAgICAgaXNTaW5nbGVMaW5lICYmIG5vcm1hbGl6ZWRWYWx1ZUZvclNpbmdsZUxpbmUubGVuZ3RoICE9PSBub3JtYWxpemVkVmFsdWUubGVuZ3RoLFxuICAgICAgY2FudmFzSW5rTWV0cmljcyxcbiAgICAgIGRvbUlua1Byb2JlLFxuICAgICAgY2FudmFzSW5rVG9wSW5zZXRQeDogcm91bmRNZXRyaWMoY2FudmFzSW5rVG9wSW5zZXRQeCksXG4gICAgICBkb21Wc0NhbnZhc1RvcEluc2V0RGVsdGFQeDogcm91bmRNZXRyaWMoZG9tVnNDYW52YXNUb3BJbnNldERlbHRhUHgpLFxuICAgICAgbGl2ZVZzUHJvYmVHbHlwaFRvcERlbHRhUHg6IHJvdW5kTWV0cmljKGxpdmVWc1Byb2JlR2x5cGhUb3BEZWx0YVB4KSxcbiAgICAgIGxheW91dE1vZGVsVmVyc2lvbjogSU5MSU5FX0xBWU9VVF9WRVJTSU9OLFxuICAgICAgLi4uZXh0cmEsXG4gICAgfTtcblxuICAgIGNvbnN0IGJvZHkgPSBmb3JtYXRJbmxpbmVMb2dQYXlsb2FkKHBheWxvYWQpO1xuICAgIGNvbnNvbGUubG9nKGBbSU5MSU5FXVske3RzfV0gJHtldmVudE5hbWV9XFxuJHtib2R5fWApO1xuICAgIGlmICh0eXBlb2Ygb25EZWJ1Z0V2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIG9uRGVidWdFdmVudChldmVudE5hbWUsIHBheWxvYWQpO1xuICAgIH1cbiAgfSwgW1xuICAgIERFQlVHX01PREUsXG4gICAgZWRpdGluZ0lkLFxuICAgIHJhd1ZhbHVlLFxuICAgIG5vcm1hbGl6ZWRWYWx1ZSxcbiAgICBub3JtYWxpemVkVmFsdWVGb3JTaW5nbGVMaW5lLFxuICAgIGxlZnQsXG4gICAgdG9wLFxuICAgIGJhc2VUZXh0V2lkdGgsXG4gICAgZWZmZWN0aXZlVGV4dFdpZHRoLFxuICAgIG5vcm1hbGl6ZWRGaW5pc2hNb2RlLFxuICAgIG5vcm1hbGl6ZWRXaWR0aE1vZGUsXG4gICAgb25EZWJ1Z0V2ZW50LFxuICAgIHN0YWdlQm94LmxlZnQsXG4gICAgc3RhZ2VCb3gudG9wLFxuICAgIHJlY3QueCxcbiAgICByZWN0LnksXG4gICAgcmVjdC53aWR0aCxcbiAgICByZWN0LmhlaWdodCxcbiAgICB0b3RhbFNjYWxlWCxcbiAgICB0b3RhbFNjYWxlWSxcbiAgICBmb250U2l6ZVB4LFxuICAgIGxpbmVIZWlnaHRQeCxcbiAgICBpc1NpbmdsZUxpbmUsXG4gICAgdmVydGljYWxJbnNldFB4LFxuICAgIGVkaXRhYmxlTGluZUhlaWdodFB4LFxuICBdKTtcblxuICAvLyBJbmljaWFsaXphciBjb250ZW5pZG8gKyBmb2NvICsgY2FyZXQgYW50ZXMgZGVsIHByaW1lciBwYWludCB2aXNpYmxlXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZWwgPSBlZGl0b3JSZWYuY3VycmVudDtcbiAgICBpZiAoIWVsKSByZXR1cm47XG5cbiAgICBsZXQgaW5pdGlhbFRleHQgPSBub3JtYWxpemVkVmFsdWU7XG5cbiAgICBpZiAod2luZG93Ll9wcmVGaWxsQ2hhcikge1xuICAgICAgaW5pdGlhbFRleHQgPSAoaW5pdGlhbFRleHQgfHwgXCJcIikgKyB3aW5kb3cuX3ByZUZpbGxDaGFyO1xuICAgICAgb25DaGFuZ2UoaW5pdGlhbFRleHQpO1xuICAgICAgd2luZG93Ll9wcmVGaWxsQ2hhciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGVsIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgZWwudmFsdWUgPSBpbml0aWFsVGV4dDtcbiAgICAgIGVtaXREZWJ1ZyhcIm92ZXJsYXk6IGJlZm9yZS1mb2N1c1wiKTtcbiAgICAgIGVsLmZvY3VzKCk7XG4gICAgICBjb25zdCBsZW4gPSBpbml0aWFsVGV4dC5sZW5ndGg7XG4gICAgICB0cnkge1xuICAgICAgICBlbC5zZXRTZWxlY3Rpb25SYW5nZShsZW4sIGxlbik7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgLy8gbm8tb3BcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuaW5uZXJUZXh0ID0gaW5pdGlhbFRleHQ7XG4gICAgICBlbWl0RGVidWcoXCJvdmVybGF5OiBiZWZvcmUtZm9jdXNcIik7XG4gICAgICBlbC5mb2N1cygpO1xuICAgICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGVsKTtcbiAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTtcbiAgICAgIGNvbnN0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvbk92ZXJsYXlNb3VudENoYW5nZSA9PT0gXCJmdW5jdGlvblwiICYmIGVkaXRpbmdJZCkge1xuICAgICAgb25PdmVybGF5TW91bnRDaGFuZ2UoZWRpdGluZ0lkLCB0cnVlKTtcbiAgICB9XG4gICAgZW1pdERlYnVnKFwib3ZlcmxheTogYWZ0ZXItZm9jdXNcIik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGVtaXREZWJ1ZyhcIm92ZXJsYXk6IGJlZm9yZS11bm1vdW50XCIpO1xuICAgICAgY29uc3QgY2xvc2luZ0lkID0gZWRpdGluZ0lkIHx8IG51bGw7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCBzYWZlSWQgPSBTdHJpbmcoY2xvc2luZ0lkIHx8IFwiXCIpLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcbiAgICAgICAgY29uc3Qgb3ZlcmxheVN0aWxsUHJlc2VudCA9IHNhZmVJZFxuICAgICAgICAgID8gQm9vbGVhbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmxpbmUtZWRpdG9yLWlkPVwiJHtzYWZlSWR9XCJdYCkpXG4gICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgZW1pdERlYnVnKFwib3ZlcmxheTogYWZ0ZXItdW5tb3VudC1yYWZcIiwge1xuICAgICAgICAgIGlkOiBjbG9zaW5nSWQsXG4gICAgICAgICAgb3ZlcmxheVN0aWxsUHJlc2VudCxcbiAgICAgICAgICBjdXJyZW50RWRpdGluZ0lkOiB3aW5kb3cuX2N1cnJlbnRFZGl0aW5nSWQgPz8gbnVsbCxcbiAgICAgICAgICBnbG9iYWxFZGl0aW5nSWQ6IHdpbmRvdy5lZGl0aW5nPy5pZCA/PyBudWxsLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiBvbk92ZXJsYXlNb3VudENoYW5nZSA9PT0gXCJmdW5jdGlvblwiICYmIGVkaXRpbmdJZCkge1xuICAgICAgICBvbk92ZXJsYXlNb3VudENoYW5nZShlZGl0aW5nSWQsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbZWRpdGluZ0lkXSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBlbCA9IGVkaXRvclJlZi5jdXJyZW50O1xuICAgIGlmICghZWwpIHJldHVybjtcbiAgICBlbC5zY3JvbGxMZWZ0ID0gMDtcbiAgICBlbC5zY3JvbGxUb3AgPSAwO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdHJpZ2dlckZpbmlzaCA9IHVzZUNhbGxiYWNrKCh0cmlnZ2VyID0gXCJibHVyXCIpID0+IHtcbiAgICBlbWl0RGVidWcoXCJmaW5pc2g6IGJsdXJcIiwge1xuICAgICAgaWQ6IGVkaXRpbmdJZCB8fCBudWxsLFxuICAgICAgbW9kZTogbm9ybWFsaXplZEZpbmlzaE1vZGUsXG4gICAgICB0cmlnZ2VyLFxuICAgIH0pO1xuICAgIGlmIChub3JtYWxpemVkRmluaXNoTW9kZSA9PT0gXCJpbW1lZGlhdGVcIikge1xuICAgICAgb25GaW5pc2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG5vcm1hbGl6ZWRGaW5pc2hNb2RlID09PSBcInJhZlwiKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBvbkZpbmlzaCgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFRpbWVvdXQob25GaW5pc2gsIDEwMCk7XG4gIH0sIFtlZGl0aW5nSWQsIGVtaXREZWJ1Zywgbm9ybWFsaXplZEZpbmlzaE1vZGUsIG9uRmluaXNoXSk7XG5cbiAgcmV0dXJuIGNyZWF0ZVBvcnRhbChcbiAgICA8PlxuICAgICAgPGRpdlxuICAgICAgICBkYXRhLWlubGluZS1lZGl0b3ItaWQ9e2VkaXRpbmdJZCB8fCBcIlwifVxuICAgICAgICBkYXRhLWlubGluZS1lZGl0b3I9XCJ0cnVlXCJcbiAgICAgICAgZGF0YS1pbmxpbmUtd2lkdGgtbW9kZT17bm9ybWFsaXplZFdpZHRoTW9kZX1cbiAgICAgICAgZGF0YS1pbmxpbmUtZmluaXNoLW1vZGU9e25vcm1hbGl6ZWRGaW5pc2hNb2RlfVxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgICAgbGVmdDogYCR7bGVmdH1weGAsXG4gICAgICAgICAgdG9wOiBgJHt0b3B9cHhgLFxuICAgICAgICAgIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiLFxuICAgICAgICAgIHdpZHRoOlxuICAgICAgICAgICAgbm9ybWFsaXplZFdpZHRoTW9kZSA9PT0gXCJtZWFzdXJlZFwiXG4gICAgICAgICAgICAgID8gYCR7ZWZmZWN0aXZlVGV4dFdpZHRofXB4YFxuICAgICAgICAgICAgICA6IFwiZml0LWNvbnRlbnRcIixcbiAgICAgICAgICBtaW5XaWR0aDogYCR7bWluV2lkdGhQeH1weGAsXG4gICAgICAgICAgbWF4V2lkdGg6IFwibWluKDEwMHZ3IC0gNDBweCwgMTIwMHB4KVwiLFxuICAgICAgICAgIGJhY2tncm91bmQ6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICBib3JkZXJSYWRpdXM6IDAsXG4gICAgICAgICAgYm94U2hhZG93OiBcIm5vbmVcIixcbiAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgIHBhZGRpbmc6IGAke1BBRERJTkdfWX1weCAke1BBRERJTkdfWH1weGAsXG4gICAgICAgICAgekluZGV4OiA5OTk5LFxuICAgICAgICAgIGJveFNpemluZzogXCJib3JkZXItYm94XCIsXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICByZWY9e2VkaXRvclJlZn1cbiAgICAgICAgICBjb250ZW50RWRpdGFibGVcbiAgICAgICAgICBzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmdcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgZGlzcGxheTogXCJibG9ja1wiLFxuICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0b3BcIixcbiAgICAgICAgICAgIHdpZHRoOlxuICAgICAgICAgICAgICBub3JtYWxpemVkV2lkdGhNb2RlID09PSBcIm1lYXN1cmVkXCJcbiAgICAgICAgICAgICAgICA/IGAke2VmZmVjdGl2ZVRleHRXaWR0aH1weGBcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1pbldpZHRoOiBgJHttaW5XaWR0aFB4fXB4YCxcbiAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlXCIsXG4gICAgICAgICAgICBvdmVyZmxvd1dyYXA6IFwibm9ybWFsXCIsXG4gICAgICAgICAgICB3b3JkQnJlYWs6IFwibm9ybWFsXCIsXG4gICAgICAgICAgICBvdmVyZmxvdzogXCJ2aXNpYmxlXCIsXG4gICAgICAgICAgICBmb250U2l6ZTogYCR7Zm9udFNpemVQeH1weGAsXG4gICAgICAgICAgICBmb250RmFtaWx5OiBub2RlUHJvcHMuZm9udEZhbWlseSxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6IG5vZGVQcm9wcy5mb250V2VpZ2h0LFxuICAgICAgICAgICAgZm9udFN0eWxlOiBub2RlUHJvcHMuZm9udFN0eWxlLFxuICAgICAgICAgICAgbGluZUhlaWdodDogYCR7ZWRpdGFibGVMaW5lSGVpZ2h0UHh9cHhgLFxuICAgICAgICAgICAgbWluSGVpZ2h0OiBgJHtsaW5lSGVpZ2h0UHh9cHhgLFxuICAgICAgICAgICAgY29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgIGNhcmV0Q29sb3I6IG5vZGVQcm9wcy5maWxsLFxuICAgICAgICAgICAgV2Via2l0VGV4dEZpbGxDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgYmFja2dyb3VuZDogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAwLFxuICAgICAgICAgICAgcGFkZGluZ1RvcDogYCR7dmVydGljYWxJbnNldFB4fXB4YCxcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IGAke3ZlcnRpY2FsSW5zZXRQeH1weGAsXG4gICAgICAgICAgICBwYWRkaW5nTGVmdDogMCxcbiAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMCxcbiAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgIG91dGxpbmU6IFwibm9uZVwiLFxuICAgICAgICAgICAgYm94U2l6aW5nOiBcImJvcmRlci1ib3hcIixcbiAgICAgICAgICAgIHRleHRBbGlnbjogdGV4dEFsaWduIHx8IFwibGVmdFwiLFxuICAgICAgICAgIH19XG4gICAgICAgICAgb25JbnB1dD17KGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRvbVJhdyA9IFN0cmluZyhlLmN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0IHx8IFwiXCIpO1xuICAgICAgICAgICAgY29uc3QgZG9tTm9ybWFsaXplZCA9IGRvbVJhd1xuICAgICAgICAgICAgICAucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHUyMDBCL2csIFwiXCIpO1xuICAgICAgICAgICAgY29uc3QgbmV4dFZhbHVlID0gbm9ybWFsaXplRWRpdG9yVGV4dChkb21SYXcpO1xuICAgICAgICAgICAgY29uc3QgcHJldlZhbHVlID0gbm9ybWFsaXplZFZhbHVlO1xuXG4gICAgICAgICAgICBjb25zdCBwcmV2TGluZUNvdW50ID0gY291bnRMaW5lcyhwcmV2VmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgbmV4dExpbmVDb3VudCA9IGNvdW50TGluZXMobmV4dFZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZUcmFpbGluZ05ld2xpbmVzID0gY291bnRUcmFpbGluZ05ld2xpbmVzKHByZXZWYWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBuZXh0VHJhaWxpbmdOZXdsaW5lcyA9IGNvdW50VHJhaWxpbmdOZXdsaW5lcyhuZXh0VmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgZG9tTGluZUNvdW50ID0gY291bnRMaW5lcyhkb21Ob3JtYWxpemVkKTtcbiAgICAgICAgICAgIGNvbnN0IGRvbVRyYWlsaW5nTmV3bGluZXMgPSBjb3VudFRyYWlsaW5nTmV3bGluZXMoZG9tTm9ybWFsaXplZCk7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemF0aW9uQ2hhbmdlZCA9IGRvbU5vcm1hbGl6ZWQgIT09IG5leHRWYWx1ZTtcblxuICAgICAgICAgICAgb25DaGFuZ2UobmV4dFZhbHVlKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBwcmV2TGluZUNvdW50ICE9PSBuZXh0TGluZUNvdW50IHx8XG4gICAgICAgICAgICAgIHByZXZUcmFpbGluZ05ld2xpbmVzICE9PSBuZXh0VHJhaWxpbmdOZXdsaW5lcyB8fFxuICAgICAgICAgICAgICBub3JtYWxpemF0aW9uQ2hhbmdlZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGVtaXREZWJ1ZyhcImlucHV0OiBsaW5lYnJlYWtcIiwge1xuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJ1bmlmaWVkLWNvbnRlbnRFZGl0YWJsZVwiLFxuICAgICAgICAgICAgICAgIHByZXZMZW5ndGg6IHByZXZWYWx1ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbmV4dExlbmd0aDogbmV4dFZhbHVlLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBwcmV2TGluZUNvdW50LFxuICAgICAgICAgICAgICAgIG5leHRMaW5lQ291bnQsXG4gICAgICAgICAgICAgICAgcHJldlRyYWlsaW5nTmV3bGluZXMsXG4gICAgICAgICAgICAgICAgbmV4dFRyYWlsaW5nTmV3bGluZXMsXG4gICAgICAgICAgICAgICAgZG9tTGVuZ3RoOiBkb21Ob3JtYWxpemVkLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBkb21MaW5lQ291bnQsXG4gICAgICAgICAgICAgICAgZG9tVHJhaWxpbmdOZXdsaW5lcyxcbiAgICAgICAgICAgICAgICBub3JtYWxpemF0aW9uQ2hhbmdlZCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiAhZS5pc0NvbXBvc2luZykge1xuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgb25CbHVyPXsoKSA9PiB7XG4gICAgICAgICAgICB0cmlnZ2VyRmluaXNoKFwiYmx1clwiKTtcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgPC8+LFxuICAgIGRvY3VtZW50LmJvZHlcbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVQb3J0YWwiLCJ1c2VNZW1vIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlTGF5b3V0RWZmZWN0IiwidXNlQ2FsbGJhY2siLCJpc0lubGluZURlYnVnRW5hYmxlZCIsIndpbmRvdyIsIl9fSU5MSU5FX0RFQlVHIiwiZm9ybWF0SW5saW5lTG9nUGF5bG9hZCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJTdHJpbmciLCJuZXh0SW5saW5lRnJhbWVNZXRhIiwiZnJhbWUiLCJwZXJmTXMiLCJwcmV2IiwiTnVtYmVyIiwiX19JTkxJTkVfRlJBTUVfU0VRIiwibmV4dCIsInBlcmZvcm1hbmNlIiwibm93IiwidG9GaXhlZCIsIm5vcm1hbGl6ZUZpbmlzaE1vZGUiLCJtb2RlIiwibm9ybWFsaXplV2lkdGhNb2RlIiwiaXNCb2xkRm9udFdlaWdodCIsIndlaWdodCIsIm5vcm1hbGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwibm9ybWFsaXplSW5saW5lRm9udFByb3BzIiwicmF3Rm9udFN0eWxlIiwicmF3Rm9udFdlaWdodCIsInN0eWxlVG9rZW4iLCJ3ZWlnaHRUb2tlbiIsIml0YWxpYyIsImJvbGRGcm9tU3R5bGUiLCJib2xkRnJvbVdlaWdodCIsImJvbGQiLCJmb250U3R5bGUiLCJmb250V2VpZ2h0Iiwibm9ybWFsaXplRWRpdG9yVGV4dCIsInJhd1RleHQiLCJ0cmltUGhhbnRvbVRyYWlsaW5nTmV3bGluZSIsInJlcGxhY2UiLCJ0cmFpbGluZ05ld2xpbmVzIiwibWF0Y2giLCJsZW5ndGgiLCJzbGljZSIsImNvdW50TGluZXMiLCJ0ZXh0Iiwic3BsaXQiLCJjb3VudFRyYWlsaW5nTmV3bGluZXMiLCJ0cmFpbGluZyIsInJlY3RUb1BheWxvYWQiLCJyZWN0IiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsImdldEZ1bGxSYW5nZVJlY3QiLCJlbCIsIkhUTUxJbnB1dEVsZW1lbnQiLCJyYW5nZSIsImRvY3VtZW50IiwiY3JlYXRlUmFuZ2UiLCJzZWxlY3ROb2RlQ29udGVudHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJnZXRTZWxlY3Rpb25SZWN0SW5FZGl0b3IiLCJpbkVkaXRvciIsImlzRm9jdXNlZCIsImFjdGl2ZUVsZW1lbnQiLCJzZWwiLCJnZXRTZWxlY3Rpb24iLCJyYW5nZUNvdW50IiwiZ2V0UmFuZ2VBdCIsInN0YXJ0SW4iLCJjb250YWlucyIsInN0YXJ0Q29udGFpbmVyIiwiZW5kSW4iLCJlbmRDb250YWluZXIiLCJnZXRDb2xsYXBzZWRDYXJldFByb2JlUmVjdEluRWRpdG9yIiwib3JpZ2luYWxSYW5nZSIsIm1hcmtlciIsImFjdGl2ZVJhbmdlIiwiY2xvbmVSYW5nZSIsInByb2JlUmFuZ2UiLCJjb2xsYXBzZSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInN0eWxlIiwiZGlzcGxheSIsInBhZGRpbmciLCJtYXJnaW4iLCJib3JkZXIiLCJsaW5lSGVpZ2h0IiwicG9pbnRlckV2ZW50cyIsImluc2VydE5vZGUiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJub3JtYWxpemUiLCJyZW1vdmVBbGxSYW5nZXMiLCJhZGRSYW5nZSIsInJvdW5kTWV0cmljIiwidmFsdWUiLCJkaWdpdHMiLCJpc0Zpbml0ZSIsImdldEZpcnN0R2x5cGhSZWN0SW5FZGl0b3IiLCJ3YWxrZXIiLCJjcmVhdGVUcmVlV2Fsa2VyIiwiTm9kZUZpbHRlciIsIlNIT1dfVEVYVCIsInRleHROb2RlIiwibmV4dE5vZGUiLCJub2RlIiwiY3VycmVudE5vZGUiLCJub2RlVmFsdWUiLCJzZXRTdGFydCIsInNldEVuZCIsIk1hdGgiLCJtaW4iLCJtZWFzdXJlQ2FudmFzSW5rTWV0cmljcyIsImZvbnRTaXplUHgiLCJmb250RmFtaWx5IiwicHJvYmVUZXh0IiwiY2FudmFzIiwiY3R4IiwiZ2V0Q29udGV4dCIsInNhZmVGYW1pbHkiLCJmYW1pbHlGb3JDYW52YXMiLCJ0ZXN0IiwiZm9udCIsIm0iLCJtZWFzdXJlVGV4dCIsImFzY2VudCIsImFjdHVhbEJvdW5kaW5nQm94QXNjZW50IiwiZGVzY2VudCIsImFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCIsImlua0hlaWdodCIsImZvbnRBc2NlbnQiLCJmb250Qm91bmRpbmdCb3hBc2NlbnQiLCJmb250RGVzY2VudCIsImZvbnRCb3VuZGluZ0JveERlc2NlbnQiLCJhY3R1YWxBc2NlbnRQeCIsImFjdHVhbERlc2NlbnRQeCIsImFjdHVhbElua0hlaWdodFB4IiwiZm9udEFzY2VudFB4IiwiZm9udERlc2NlbnRQeCIsImZvbnRCb3hIZWlnaHRQeCIsIm1lYXN1cmVEb21JbmtQcm9iZSIsImxpbmVIZWlnaHRQeCIsImhvc3QiLCJwb3NpdGlvbiIsImxlZnQiLCJ0b3AiLCJ3aGl0ZVNwYWNlIiwiZm9udFNpemUiLCJib3hTaXppbmciLCJ1c2VyU2VsZWN0Iiwic3BhbiIsImFwcGVuZENoaWxkIiwiYm9keSIsImhvc3RSZWN0Iiwic3BhblJlY3QiLCJob3N0SGVpZ2h0UHgiLCJnbHlwaEhlaWdodFB4IiwiZ2x5cGhUb3BJbnNldFB4IiwiZ2x5cGhCb3R0b21JbnNldFB4IiwiYm90dG9tIiwiSU5MSU5FX0xBWU9VVF9WRVJTSU9OIiwiSW5saW5lVGV4dEVkaXRvciIsImVkaXRpbmdJZCIsIm9uQ2hhbmdlIiwib25GaW5pc2giLCJ0ZXh0QWxpZ24iLCJzY2FsZVZpc3VhbCIsImZpbmlzaE1vZGUiLCJ3aWR0aE1vZGUiLCJvbk92ZXJsYXlNb3VudENoYW5nZSIsIm9uRGVidWdFdmVudCIsImVkaXRvclJlZiIsInRleHRDZW50ZXJYRG9tUmVmIiwiREVCVUdfTU9ERSIsIm5vcm1hbGl6ZWRGaW5pc2hNb2RlIiwibm9ybWFsaXplZFdpZHRoTW9kZSIsInN0YWdlIiwiZ2V0U3RhZ2UiLCJzdGFnZUJveCIsImNvbnRhaW5lciIsInN0YWdlU2NhbGVYIiwic2NhbGVYIiwic3RhZ2VTY2FsZVkiLCJzY2FsZVkiLCJ0b3RhbFNjYWxlWCIsInRvdGFsU2NhbGVZIiwiZ2V0Q2xhc3NOYW1lIiwiY2xzIiwibm9kZUlkIiwiaWQiLCJhdHRycyIsImZpbmRPbmUiLCJwYWlyZWRUZXh0IiwiZm91bmQiLCJuIiwiZmluZEFuY2VzdG9yIiwiYW5jZXN0b3JUZXh0IiwiY29uc29sZSIsIndhcm4iLCJub2RlUHJvcHMiLCJnZXRQcm9wIiwiZ2V0dGVyTmFtZSIsImZhbGxiYWNrIiwiZ2V0QXR0ciIsImF0dHJWYWx1ZSIsImZuIiwiY2FsbCIsIm5vcm1hbGl6ZWRGb250IiwiZmlsbCIsImxpbmVIZWlnaHRLb252YSIsImtvbnZhTGluZUhlaWdodCIsInJlY3RTb3VyY2VOb2RlIiwiZ2V0Q2xpZW50UmVjdCIsInJlbGF0aXZlVG8iLCJza2lwU3Ryb2tlIiwiUEFERElOR19YIiwiUEFERElOR19ZIiwibWF4IiwicmF3VmFsdWUiLCJub3JtYWxpemVkVmFsdWUiLCJub3JtYWxpemVkVmFsdWVGb3JTaW5nbGVMaW5lIiwiaXNTaW5nbGVMaW5lIiwidmVydGljYWxJbnNldFB4IiwiZWRpdGFibGVMaW5lSGVpZ2h0UHgiLCJjbGFzc05hbWUiLCJpc1RleHROb2RlIiwiYmFzZVRleHRXaWR0aCIsIm1lYXN1cmVkQ29udGVudFdpZHRoIiwic2FmZUZvbnRGYW1pbHkiLCJmb250RmFtaWx5Rm9yQ2FudmFzIiwidGV4dFZhbHVlIiwibGluZXMiLCJtYXhMaW5lV2lkdGgiLCJtYXAiLCJsaW5lIiwiY2VpbCIsImVmZmVjdGl2ZVRleHRXaWR0aCIsIm1pbldpZHRoUHgiLCJjYXJkV2lkdGgiLCJjdXJyZW50IiwiY2VudGVyWENhbnZhcyIsInNjcm9sbFgiLCJzY3JvbGxZIiwiY2VudGVyWUNhbnZhcyIsImNlbnRlclhEb20iLCJjZW50ZXJZRG9tIiwiYXBwcm94SGVpZ2h0IiwiZW1pdERlYnVnIiwiZXZlbnROYW1lIiwiZXh0cmEiLCJlc3NlbnRpYWxFdmVudHMiLCJTZXQiLCJoYXMiLCJ0cyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImZyYW1lTWV0YSIsIm92ZXJsYXlFbCIsInBhcmVudEVsZW1lbnQiLCJvdmVybGF5UmVjdCIsImNvbnRlbnRSZWN0IiwiY29tcHV0ZWRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJmdWxsUmFuZ2VSZWN0Iiwic2VsZWN0aW9uSW5mbyIsInByb2plY3RlZEtvbnZhUmVjdCIsIm92ZXJsYXlUb0tvbnZhRHkiLCJjb250ZW50VG9Lb252YUR5IiwiZnVsbFJhbmdlVG9Db250ZW50RHkiLCJjYXJldFRvQ29udGVudER5IiwiY2FyZXRQcm9iZVJlY3QiLCJjYXJldFByb2JlVG9Db250ZW50RHkiLCJjYXJldFByb2JlSGVpZ2h0UHgiLCJmaXJzdEdseXBoUmVjdCIsImZpcnN0R2x5cGhUb0NvbnRlbnREeSIsImZpcnN0R2x5cGhIZWlnaHRQeCIsImNhbnZhc0lua01ldHJpY3MiLCJkb21JbmtQcm9iZSIsImNhbnZhc0lua1RvcEluc2V0UHgiLCJkb21Wc0NhbnZhc1RvcEluc2V0RGVsdGFQeCIsImxpdmVWc1Byb2JlR2x5cGhUb3BEZWx0YVB4IiwidmFsdWVMZW5ndGgiLCJjb250ZW50U2Nyb2xsV2lkdGgiLCJzY3JvbGxXaWR0aCIsImNvbnRlbnRDbGllbnRXaWR0aCIsImNsaWVudFdpZHRoIiwic2VsZWN0aW9uSW5FZGl0b3IiLCJzZWxlY3Rpb25SZWN0IiwiY29tcHV0ZWRGb250U2l6ZSIsImNvbXB1dGVkTGluZUhlaWdodCIsImNvbXB1dGVkUGFkZGluZ1RvcCIsInBhZGRpbmdUb3AiLCJjb21wdXRlZFBhZGRpbmdCb3R0b20iLCJwYWRkaW5nQm90dG9tIiwiY29tcHV0ZWRCb3JkZXJUb3AiLCJib3JkZXJUb3BXaWR0aCIsImNvbXB1dGVkQm9yZGVyQm90dG9tIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJlZGl0b3JUYWciLCJub3JtYWxpemVkVmFsdWVMZW5ndGgiLCJoYWRUcmFpbGluZ05ld2xpbmUiLCJsYXlvdXRNb2RlbFZlcnNpb24iLCJsb2ciLCJpbml0aWFsVGV4dCIsIl9wcmVGaWxsQ2hhciIsImZvY3VzIiwibGVuIiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJpbm5lclRleHQiLCJjbG9zaW5nSWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzYWZlSWQiLCJvdmVybGF5U3RpbGxQcmVzZW50IiwiQm9vbGVhbiIsInF1ZXJ5U2VsZWN0b3IiLCJjdXJyZW50RWRpdGluZ0lkIiwiX2N1cnJlbnRFZGl0aW5nSWQiLCJnbG9iYWxFZGl0aW5nSWQiLCJlZGl0aW5nIiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsInRyaWdnZXJGaW5pc2giLCJ0cmlnZ2VyIiwic2V0VGltZW91dCIsImRpdiIsImRhdGEtaW5saW5lLWVkaXRvci1pZCIsImRhdGEtaW5saW5lLWVkaXRvciIsImRhdGEtaW5saW5lLXdpZHRoLW1vZGUiLCJkYXRhLWlubGluZS1maW5pc2gtbW9kZSIsInZlcnRpY2FsQWxpZ24iLCJtaW5XaWR0aCIsIm1heFdpZHRoIiwiYmFja2dyb3VuZCIsImJvcmRlclJhZGl1cyIsImJveFNoYWRvdyIsInpJbmRleCIsInJlZiIsImNvbnRlbnRFZGl0YWJsZSIsInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyIsInVuZGVmaW5lZCIsIm92ZXJmbG93V3JhcCIsIndvcmRCcmVhayIsIm92ZXJmbG93IiwibWluSGVpZ2h0IiwiY29sb3IiLCJjYXJldENvbG9yIiwiV2Via2l0VGV4dEZpbGxDb2xvciIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Iiwib3V0bGluZSIsIm9uSW5wdXQiLCJlIiwiZG9tUmF3IiwiY3VycmVudFRhcmdldCIsImRvbU5vcm1hbGl6ZWQiLCJuZXh0VmFsdWUiLCJwcmV2VmFsdWUiLCJwcmV2TGluZUNvdW50IiwibmV4dExpbmVDb3VudCIsInByZXZUcmFpbGluZ05ld2xpbmVzIiwibmV4dFRyYWlsaW5nTmV3bGluZXMiLCJkb21MaW5lQ291bnQiLCJkb21UcmFpbGluZ05ld2xpbmVzIiwibm9ybWFsaXphdGlvbkNoYW5nZWQiLCJzb3VyY2UiLCJwcmV2TGVuZ3RoIiwibmV4dExlbmd0aCIsImRvbUxlbmd0aCIsIm9uS2V5RG93biIsImtleSIsImlzQ29tcG9zaW5nIiwic3RvcFByb3BhZ2F0aW9uIiwib25CbHVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/InlineTextEditor.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/LineControls.jsx":
/*!*****************************************!*\
  !*** ./src/components/LineControls.jsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LineControls)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _drag_dragGrupal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/drag/dragGrupal */ \"(pages-dir-node)/./src/drag/dragGrupal.js\");\n/* harmony import */ var _components_editor_mobile_useIsTouchLike__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/editor/mobile/useIsTouchLike */ \"(pages-dir-node)/./src/components/editor/mobile/useIsTouchLike.js\");\n// LineControls.jsx - Versión optimizada para transformación fluida\n\n\n\n\n\n// 🚀 Utilidad para forzar repintado rápido\nconst batchDraw = (node)=>node.getLayer() && node.getLayer().batchDraw();\nconst DEBUG_LINE_CONTROLS = false;\nconst lcLog = (...args)=>{\n    if (!DEBUG_LINE_CONTROLS) return;\n    console.log(...args);\n};\nconst lcError = (...args)=>{\n    if (!DEBUG_LINE_CONTROLS) return;\n    console.error(...args);\n};\nfunction LineControls({ lineElement, elementRefs, onUpdateLine, altoCanvas, isDragGrupalActive = false, elementosSeleccionados = [], isMobile = false }) {\n    const [draggingPoint, setDraggingPoint] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const dragStartPos = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const [lineBeingDragged, setLineBeingDragged] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isGroupDrag, setIsGroupDrag] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const isTouchLike = (0,_components_editor_mobile_useIsTouchLike__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(isMobile);\n    const pointRadius = isTouchLike ? 12 : 10;\n    const pointHitStrokeWidth = isTouchLike ? 44 : 28;\n    const [nodePos, setNodePos] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n        x: lineElement?.x || 0,\n        y: lineElement?.y || 0\n    });\n    // 🔥 CACHE PARA EVITAR RECÁLCULOS INNECESARIOS\n    const pointsCache = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const lastUpdateTime = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n    const isValidLine = !!lineElement && lineElement.tipo === \"forma\" && lineElement.figura === \"line\";\n    const lineId = lineElement?.id ?? null;\n    const nodeRef = lineId ? elementRefs.current?.[lineId] : null;\n    // 🔥 SYNC OPTIMIZADO CON THROTTLE\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"LineControls.useEffect\": ()=>{\n            if (!isValidLine || !nodeRef) return;\n            const syncPos = {\n                \"LineControls.useEffect.syncPos\": ()=>{\n                    // 🚀 THROTTLE: Solo actualizar cada 8ms (120fps máximo)\n                    const now = performance.now();\n                    if (now - lastUpdateTime.current < 8) return;\n                    lastUpdateTime.current = now;\n                    setNodePos({\n                        x: nodeRef.x(),\n                        y: nodeRef.y()\n                    });\n                }\n            }[\"LineControls.useEffect.syncPos\"];\n            syncPos();\n            nodeRef.on('dragmove', syncPos);\n            return ({\n                \"LineControls.useEffect\": ()=>{\n                    nodeRef.off('dragmove', syncPos);\n                }\n            })[\"LineControls.useEffect\"];\n        }\n    }[\"LineControls.useEffect\"], [\n        isValidLine,\n        nodeRef\n    ]);\n    // 🔥 DETECTAR DRAG GRUPAL MEJORADO\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"LineControls.useEffect\": ()=>{\n            if (!isValidLine || !lineId) {\n                setIsGroupDrag(false);\n                return;\n            }\n            const isPartOfMultipleSelection = elementosSeleccionados.length > 1;\n            const isThisLineSelected = elementosSeleccionados.includes(lineId);\n            setIsGroupDrag(isDragGrupalActive && isPartOfMultipleSelection && isThisLineSelected);\n        }\n    }[\"LineControls.useEffect\"], [\n        isValidLine,\n        isDragGrupalActive,\n        elementosSeleccionados,\n        lineId\n    ]);\n    // 🔥 DETECTAR DRAG DE LÍNEA Y COORDINACIÓN CON DRAG GRUPAL\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)({\n        \"LineControls.useEffect\": ()=>{\n            if (!isValidLine || !nodeRef || !lineId) return;\n            const handleDragStart = {\n                \"LineControls.useEffect.handleDragStart\": (e)=>{\n                    lcLog(\"🎬 [LINE CONTROLS] Drag start para línea:\", lineId);\n                    setLineBeingDragged(true);\n                    // 🎯 COORDINACIÓN CON DRAG GRUPAL\n                    const elementosSeleccionados = window._elementosSeleccionados || [];\n                    lcLog(\"📋 [LINE CONTROLS] Elementos seleccionados:\", elementosSeleccionados);\n                    lcLog(\"📏 [LINE CONTROLS] ¿Esta línea está en selección?\", elementosSeleccionados.includes(lineId));\n                    lcLog(\"🔢 [LINE CONTROLS] ¿Múltiples elementos?\", elementosSeleccionados.length > 1);\n                    if (elementosSeleccionados.length > 1 && elementosSeleccionados.includes(lineId)) {\n                        lcLog(\"🎯 [LINE CONTROLS] Intentando iniciar drag grupal desde línea...\");\n                        try {\n                            const isGroupLeader = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_3__.startDragGrupalLider)(e, lineElement);\n                            lcLog(\"👑 [LINE CONTROLS] ¿Es líder del grupo?\", isGroupLeader);\n                            if (!isGroupLeader) {\n                                lcLog(\"🚫 [LINE CONTROLS] No es líder, deshabilitando drag individual...\");\n                                setTimeout({\n                                    \"LineControls.useEffect.handleDragStart\": ()=>{\n                                        if (nodeRef && nodeRef.draggable) {\n                                            const wasDraggable = nodeRef.draggable();\n                                            nodeRef.draggable(false);\n                                            lcLog(`🔒 [LINE CONTROLS] Drag deshabilitado para línea ${lineId} (era: ${wasDraggable})`);\n                                        }\n                                    }\n                                }[\"LineControls.useEffect.handleDragStart\"], 0);\n                            } else {\n                                lcLog(\"👑 [LINE CONTROLS] Línea es líder del drag grupal\");\n                            }\n                        } catch (error) {\n                            lcError(\"❌ [LINE CONTROLS] Error en drag grupal:\", error);\n                        }\n                    } else {\n                        lcLog(\"📏 [LINE CONTROLS] Drag individual normal para línea\");\n                    }\n                }\n            }[\"LineControls.useEffect.handleDragStart\"];\n            const handleDragEnd = {\n                \"LineControls.useEffect.handleDragEnd\": ()=>{\n                    lcLog(\"🏁 [LINE CONTROLS] Drag end para línea:\", lineId);\n                    setLineBeingDragged(false);\n                    // Reactivar drag después de un breve delay\n                    setTimeout({\n                        \"LineControls.useEffect.handleDragEnd\": ()=>{\n                            if (nodeRef && nodeRef.draggable) {\n                                const wasDraggable = nodeRef.draggable();\n                                nodeRef.draggable(true);\n                                lcLog(`🔓 [LINE CONTROLS] Drag reactivado para línea ${lineId} (era: ${wasDraggable})`);\n                            }\n                        }\n                    }[\"LineControls.useEffect.handleDragEnd\"], 100);\n                }\n            }[\"LineControls.useEffect.handleDragEnd\"];\n            nodeRef.on('dragstart', handleDragStart);\n            nodeRef.on('dragend', handleDragEnd);\n            return ({\n                \"LineControls.useEffect\": ()=>{\n                    nodeRef.off('dragstart', handleDragStart);\n                    nodeRef.off('dragend', handleDragEnd);\n                }\n            })[\"LineControls.useEffect\"];\n        }\n    }[\"LineControls.useEffect\"], [\n        isValidLine,\n        nodeRef,\n        lineId,\n        lineElement\n    ]);\n    // 🔥 CÁLCULOS MEMOIZADOS\n    const points = isValidLine && Array.isArray(lineElement.points) ? lineElement.points : [\n        0,\n        0,\n        100,\n        0\n    ];\n    const puntosValidados = points.slice(0, 4).map((p, i)=>{\n        const punto = parseFloat(p || 0);\n        return isNaN(punto) ? i === 2 ? 100 : 0 : punto;\n    });\n    const [normalizedStartX, normalizedStartY, normalizedEndX, normalizedEndY] = puntosValidados;\n    const startAbsoluteX = nodePos.x + normalizedStartX;\n    const startAbsoluteY = nodePos.y + normalizedStartY;\n    const endAbsoluteX = nodePos.x + normalizedEndX;\n    const endAbsoluteY = nodePos.y + normalizedEndY;\n    // 🔥 HANDLER OPTIMIZADO PARA DRAG START\n    const handlePointDragStart = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"LineControls.useCallback[handlePointDragStart]\": (pointType, e)=>{\n            setDraggingPoint(pointType);\n            dragStartPos.current = e.target.getStage().getPointerPosition();\n            e.cancelBubble = true;\n            // 🔥 LIMPIAR CACHE AL INICIAR\n            pointsCache.current = null;\n        }\n    }[\"LineControls.useCallback[handlePointDragStart]\"], []);\n    // 🔥 HANDLER ULTRA-OPTIMIZADO PARA DRAG MOVE\n    const handlePointDragMove = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"LineControls.useCallback[handlePointDragMove]\": (pointType, e)=>{\n            if (!isValidLine || !nodeRef || !lineId) return;\n            if (draggingPoint !== pointType) return;\n            const stage = e.target.getStage();\n            const pointerPos = stage.getPointerPosition();\n            if (!pointerPos) return;\n            // 🚀 THROTTLE AGRESIVO: Solo cada 4ms (250fps)\n            const now = performance.now();\n            if (now - lastUpdateTime.current < 4) return;\n            lastUpdateTime.current = now;\n            // 🔥 USAR POSICIÓN REAL DEL NODO EN TIEMPO REAL\n            const realNodeX = nodeRef.x();\n            const realNodeY = nodeRef.y();\n            const newPointX = pointerPos.x - realNodeX;\n            const newPointY = pointerPos.y - realNodeY;\n            let newPoints;\n            if (pointType === 'start') {\n                newPoints = [\n                    newPointX,\n                    newPointY,\n                    normalizedEndX,\n                    normalizedEndY\n                ];\n            } else {\n                newPoints = [\n                    normalizedStartX,\n                    normalizedStartY,\n                    newPointX,\n                    newPointY\n                ];\n            }\n            // 🚀 ACTUALIZACIÓN DIRECTA SIN REACT RE-RENDER\n            const lineNode = elementRefs.current?.[lineId];\n            if (lineNode) {\n                // 🔥 SOLO ACTUALIZAR SI LOS PUNTOS CAMBIARON SIGNIFICATIVAMENTE\n                const pointsStr = newPoints.join(',');\n                if (pointsCache.current !== pointsStr) {\n                    pointsCache.current = pointsStr;\n                    // 🚀 FEEDBACK INSTANTÁNEO\n                    lineNode.points(newPoints);\n                    // 🔥 USAR requestAnimationFrame PARA BATCH DRAW ÓPTIMO\n                    if (!window._lineDrawScheduled) {\n                        window._lineDrawScheduled = true;\n                        requestAnimationFrame({\n                            \"LineControls.useCallback[handlePointDragMove]\": ()=>{\n                                batchDraw(lineNode);\n                                window._lineDrawScheduled = false;\n                            }\n                        }[\"LineControls.useCallback[handlePointDragMove]\"]);\n                    }\n                }\n            }\n        }\n    }[\"LineControls.useCallback[handlePointDragMove]\"], [\n        isValidLine,\n        lineId,\n        draggingPoint,\n        normalizedStartX,\n        normalizedStartY,\n        normalizedEndX,\n        normalizedEndY,\n        nodeRef,\n        elementRefs\n    ]);\n    // 🔥 HANDLER OPTIMIZADO PARA DRAG END\n    const handlePointDragEnd = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)({\n        \"LineControls.useCallback[handlePointDragEnd]\": (pointType, e)=>{\n            if (!isValidLine || !nodeRef || !lineId) return;\n            if (draggingPoint !== pointType) return;\n            const stage = e.target.getStage();\n            const pointerPos = stage.getPointerPosition();\n            if (!pointerPos) return;\n            // 🔥 USAR POSICIÓN REAL DEL NODO EN TIEMPO REAL\n            const realNodeX = nodeRef.x();\n            const realNodeY = nodeRef.y();\n            const newPointX = pointerPos.x - realNodeX;\n            const newPointY = pointerPos.y - realNodeY;\n            let newPoints;\n            if (pointType === 'start') {\n                newPoints = [\n                    newPointX,\n                    newPointY,\n                    normalizedEndX,\n                    normalizedEndY\n                ];\n            } else {\n                newPoints = [\n                    normalizedStartX,\n                    normalizedStartY,\n                    newPointX,\n                    newPointY\n                ];\n            }\n            // 🔥 ACTUALIZACIÓN FINAL CON DEBOUNCE\n            if (onUpdateLine) {\n                onUpdateLine(lineId, {\n                    points: newPoints,\n                    isFinal: true\n                });\n            }\n            setDraggingPoint(null);\n            dragStartPos.current = null;\n            pointsCache.current = null; // 🔥 LIMPIAR CACHE\n        }\n    }[\"LineControls.useCallback[handlePointDragEnd]\"], [\n        isValidLine,\n        lineId,\n        draggingPoint,\n        normalizedStartX,\n        normalizedStartY,\n        normalizedEndX,\n        normalizedEndY,\n        nodeRef,\n        onUpdateLine\n    ]);\n    if (!isValidLine || !nodeRef) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n        name: \"ui\",\n        children: !lineBeingDragged && !isGroupDrag && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Circle, {\n                    x: startAbsoluteX,\n                    y: startAbsoluteY,\n                    radius: pointRadius,\n                    fill: draggingPoint === 'start' ? \"#2563eb\" : \"#3b82f6\",\n                    stroke: \"#ffffff\",\n                    strokeWidth: 2.5,\n                    draggable: true,\n                    onDragStart: (e)=>handlePointDragStart('start', e),\n                    onDragMove: (e)=>handlePointDragMove('start', e),\n                    onDragEnd: (e)=>handlePointDragEnd('start', e),\n                    onMouseEnter: (e)=>{\n                        e.target.getStage().container().style.cursor = 'crosshair';\n                    },\n                    onMouseLeave: (e)=>{\n                        if (!draggingPoint) {\n                            e.target.getStage().container().style.cursor = 'default';\n                        }\n                    },\n                    shadowColor: \"rgba(59, 130, 246, 0.3)\",\n                    shadowBlur: 4,\n                    shadowOffset: {\n                        x: 0,\n                        y: 3\n                    },\n                    // 🚀 OPTIMIZACIONES DE RENDIMIENTO\n                    perfectDrawEnabled: false,\n                    shadowForStrokeEnabled: false,\n                    hitStrokeWidth: pointHitStrokeWidth\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n                    lineNumber: 274,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Circle, {\n                    x: endAbsoluteX,\n                    y: endAbsoluteY,\n                    radius: pointRadius,\n                    fill: draggingPoint === 'end' ? \"#2563eb\" : \"#3b82f6\",\n                    stroke: \"#ffffff\",\n                    strokeWidth: 2.5,\n                    draggable: true,\n                    onDragStart: (e)=>handlePointDragStart('end', e),\n                    onDragMove: (e)=>handlePointDragMove('end', e),\n                    onDragEnd: (e)=>handlePointDragEnd('end', e),\n                    onMouseEnter: (e)=>{\n                        e.target.getStage().container().style.cursor = 'crosshair';\n                    },\n                    onMouseLeave: (e)=>{\n                        if (!draggingPoint) {\n                            e.target.getStage().container().style.cursor = 'default';\n                        }\n                    },\n                    shadowColor: \"rgba(59, 130, 246, 0.3)\",\n                    shadowBlur: 6,\n                    shadowOffset: {\n                        x: 0,\n                        y: 3\n                    },\n                    // 🚀 OPTIMIZACIONES DE RENDIMIENTO\n                    perfectDrawEnabled: false,\n                    shadowForStrokeEnabled: false,\n                    hitStrokeWidth: pointHitStrokeWidth\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n                    lineNumber: 303,\n                    columnNumber: 11\n                }, this),\n                draggingPoint && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Line, {\n                    name: \"ui\",\n                    points: [\n                        startAbsoluteX,\n                        startAbsoluteY,\n                        endAbsoluteX,\n                        endAbsoluteY\n                    ],\n                    stroke: \"rgba(119, 61, 190, 0.4)\",\n                    strokeWidth: 1,\n                    dash: [\n                        4,\n                        4\n                    ],\n                    listening: false,\n                    perfectDrawEnabled: false,\n                    shadowForStrokeEnabled: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n                    lineNumber: 333,\n                    columnNumber: 13\n                }, this)\n            ]\n        }, void 0, true)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineControls.jsx\",\n        lineNumber: 269,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0xpbmVDb250cm9scy5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsbUVBQW1FOztBQUNqQjtBQUNlO0FBQ1I7QUFDYztBQUd2RSwyQ0FBMkM7QUFDM0MsTUFBTVMsWUFBWSxDQUFDQyxPQUFTQSxLQUFLQyxRQUFRLE1BQU1ELEtBQUtDLFFBQVEsR0FBR0YsU0FBUztBQUN4RSxNQUFNRyxzQkFBc0I7QUFDNUIsTUFBTUMsUUFBUSxDQUFDLEdBQUdDO0lBQ2hCLElBQUksQ0FBQ0YscUJBQXFCO0lBQzFCRyxRQUFRQyxHQUFHLElBQUlGO0FBQ2pCO0FBQ0EsTUFBTUcsVUFBVSxDQUFDLEdBQUdIO0lBQ2xCLElBQUksQ0FBQ0YscUJBQXFCO0lBQzFCRyxRQUFRRyxLQUFLLElBQUlKO0FBQ25CO0FBRWUsU0FBU0ssYUFBYSxFQUNuQ0MsV0FBVyxFQUNYQyxXQUFXLEVBQ1hDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyxxQkFBcUIsS0FBSyxFQUMxQkMseUJBQXlCLEVBQUUsRUFDM0JDLFdBQVcsS0FBSyxFQUNqQjtJQUNDLE1BQU0sQ0FBQ0MsZUFBZUMsaUJBQWlCLEdBQUd6QiwrQ0FBUUEsQ0FBQztJQUNuRCxNQUFNMEIsZUFBZXpCLDZDQUFNQSxDQUFDO0lBQzVCLE1BQU0sQ0FBQzBCLGtCQUFrQkMsb0JBQW9CLEdBQUc1QiwrQ0FBUUEsQ0FBQztJQUN6RCxNQUFNLENBQUM2QixhQUFhQyxlQUFlLEdBQUc5QiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNK0IsY0FBYzFCLG9GQUFjQSxDQUFDa0I7SUFDbkMsTUFBTVMsY0FBY0QsY0FBYyxLQUFLO0lBQ3ZDLE1BQU1FLHNCQUFzQkYsY0FBYyxLQUFLO0lBQy9DLE1BQU0sQ0FBQ0csU0FBU0MsV0FBVyxHQUFHbkMsK0NBQVFBLENBQUM7UUFDckNvQyxHQUFHbkIsYUFBYW1CLEtBQUs7UUFDckJDLEdBQUdwQixhQUFhb0IsS0FBSztJQUN2QjtJQUVBLCtD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LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaW5lQ29udHJvbHMuanN4IC0gVmVyc2nDs24gb3B0aW1pemFkYSBwYXJhIHRyYW5zZm9ybWFjacOzbiBmbHVpZGFcbmltcG9ydCB7IENpcmNsZSwgR3JvdXAsIExpbmUgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHN0YXJ0RHJhZ0dydXBhbExpZGVyIH0gZnJvbSBcIkAvZHJhZy9kcmFnR3J1cGFsXCI7XG5pbXBvcnQgdXNlSXNUb3VjaExpa2UgZnJvbSBcIkAvY29tcG9uZW50cy9lZGl0b3IvbW9iaWxlL3VzZUlzVG91Y2hMaWtlXCI7XG5cblxuLy8g8J+agCBVdGlsaWRhZCBwYXJhIGZvcnphciByZXBpbnRhZG8gcsOhcGlkb1xuY29uc3QgYmF0Y2hEcmF3ID0gKG5vZGUpID0+IG5vZGUuZ2V0TGF5ZXIoKSAmJiBub2RlLmdldExheWVyKCkuYmF0Y2hEcmF3KCk7XG5jb25zdCBERUJVR19MSU5FX0NPTlRST0xTID0gZmFsc2U7XG5jb25zdCBsY0xvZyA9ICguLi5hcmdzKSA9PiB7XG4gIGlmICghREVCVUdfTElORV9DT05UUk9MUykgcmV0dXJuO1xuICBjb25zb2xlLmxvZyguLi5hcmdzKTtcbn07XG5jb25zdCBsY0Vycm9yID0gKC4uLmFyZ3MpID0+IHtcbiAgaWYgKCFERUJVR19MSU5FX0NPTlRST0xTKSByZXR1cm47XG4gIGNvbnNvbGUuZXJyb3IoLi4uYXJncyk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMaW5lQ29udHJvbHMoe1xuICBsaW5lRWxlbWVudCxcbiAgZWxlbWVudFJlZnMsXG4gIG9uVXBkYXRlTGluZSxcbiAgYWx0b0NhbnZhcyxcbiAgaXNEcmFnR3J1cGFsQWN0aXZlID0gZmFsc2UsICAvLyDwn5SlIE5VRVZBIFBST1BcbiAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyA9IFtdLFxuICBpc01vYmlsZSA9IGZhbHNlLFxufSkge1xuICBjb25zdCBbZHJhZ2dpbmdQb2ludCwgc2V0RHJhZ2dpbmdQb2ludF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgZHJhZ1N0YXJ0UG9zID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbbGluZUJlaW5nRHJhZ2dlZCwgc2V0TGluZUJlaW5nRHJhZ2dlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0dyb3VwRHJhZywgc2V0SXNHcm91cERyYWddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpc1RvdWNoTGlrZSA9IHVzZUlzVG91Y2hMaWtlKGlzTW9iaWxlKTtcbiAgY29uc3QgcG9pbnRSYWRpdXMgPSBpc1RvdWNoTGlrZSA/IDEyIDogMTA7XG4gIGNvbnN0IHBvaW50SGl0U3Ryb2tlV2lkdGggPSBpc1RvdWNoTGlrZSA/IDQ0IDogMjg7XG4gIGNvbnN0IFtub2RlUG9zLCBzZXROb2RlUG9zXSA9IHVzZVN0YXRlKHtcbiAgICB4OiBsaW5lRWxlbWVudD8ueCB8fCAwLFxuICAgIHk6IGxpbmVFbGVtZW50Py55IHx8IDAsXG4gIH0pO1xuXG4gIC8vIPCflKUgQ0FDSEUgUEFSQSBFVklUQVIgUkVDw4FMQ1VMT1MgSU5ORUNFU0FSSU9TXG4gIGNvbnN0IHBvaW50c0NhY2hlID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBsYXN0VXBkYXRlVGltZSA9IHVzZVJlZigwKTtcbiAgY29uc3QgaXNWYWxpZExpbmUgPVxuICAgICEhbGluZUVsZW1lbnQgJiZcbiAgICBsaW5lRWxlbWVudC50aXBvID09PSBcImZvcm1hXCIgJiZcbiAgICBsaW5lRWxlbWVudC5maWd1cmEgPT09IFwibGluZVwiO1xuICBjb25zdCBsaW5lSWQgPSBsaW5lRWxlbWVudD8uaWQgPz8gbnVsbDtcbiAgY29uc3Qgbm9kZVJlZiA9IGxpbmVJZCA/IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltsaW5lSWRdIDogbnVsbDtcblxuICAvLyDwn5SlIFNZTkMgT1BUSU1JWkFETyBDT04gVEhST1RUTEVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzVmFsaWRMaW5lIHx8ICFub2RlUmVmKSByZXR1cm47XG5cbiAgICBjb25zdCBzeW5jUG9zID0gKCkgPT4ge1xuICAgICAgLy8g8J+agCBUSFJPVFRMRTogU29sbyBhY3R1YWxpemFyIGNhZGEgOG1zICgxMjBmcHMgbcOheGltbylcbiAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgaWYgKG5vdyAtIGxhc3RVcGRhdGVUaW1lLmN1cnJlbnQgPCA4KSByZXR1cm47XG4gICAgICBsYXN0VXBkYXRlVGltZS5jdXJyZW50ID0gbm93O1xuXG4gICAgICBzZXROb2RlUG9zKHsgeDogbm9kZVJlZi54KCksIHk6IG5vZGVSZWYueSgpIH0pO1xuICAgIH07XG5cbiAgICBzeW5jUG9zKCk7XG4gICAgbm9kZVJlZi5vbignZHJhZ21vdmUnLCBzeW5jUG9zKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBub2RlUmVmLm9mZignZHJhZ21vdmUnLCBzeW5jUG9zKTtcbiAgICB9O1xuICB9LCBbaXNWYWxpZExpbmUsIG5vZGVSZWZdKTtcblxuXG5cbiAgLy8g8J+UpSBERVRFQ1RBUiBEUkFHIEdSVVBBTCBNRUpPUkFET1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNWYWxpZExpbmUgfHwgIWxpbmVJZCkge1xuICAgICAgc2V0SXNHcm91cERyYWcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlzUGFydE9mTXVsdGlwbGVTZWxlY3Rpb24gPSBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaXNUaGlzTGluZVNlbGVjdGVkID0gZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhsaW5lSWQpO1xuXG4gICAgc2V0SXNHcm91cERyYWcoaXNEcmFnR3J1cGFsQWN0aXZlICYmIGlzUGFydE9mTXVsdGlwbGVTZWxlY3Rpb24gJiYgaXNUaGlzTGluZVNlbGVjdGVkKTtcbiAgfSwgW2lzVmFsaWRMaW5lLCBpc0RyYWdHcnVwYWxBY3RpdmUsIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsIGxpbmVJZF0pO1xuXG5cblxuICAvLyDwn5SlIERFVEVDVEFSIERSQUcgREUgTMONTkVBIFkgQ09PUkRJTkFDScOTTiBDT04gRFJBRyBHUlVQQUxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzVmFsaWRMaW5lIHx8ICFub2RlUmVmIHx8ICFsaW5lSWQpIHJldHVybjtcblxuICAgIGNvbnN0IGhhbmRsZURyYWdTdGFydCA9IChlKSA9PiB7XG4gICAgICBsY0xvZyhcIvCfjqwgW0xJTkUgQ09OVFJPTFNdIERyYWcgc3RhcnQgcGFyYSBsw61uZWE6XCIsIGxpbmVJZCk7XG4gICAgICBzZXRMaW5lQmVpbmdEcmFnZ2VkKHRydWUpO1xuXG4gICAgICAvLyDwn46vIENPT1JESU5BQ0nDk04gQ09OIERSQUcgR1JVUEFMXG4gICAgICBjb25zdCBlbGVtZW50b3NTZWxlY2Npb25hZG9zID0gd2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zIHx8IFtdO1xuICAgICAgbGNMb2coXCLwn5OLIFtMSU5FIENPTlRST0xTXSBFbGVtZW50b3Mgc2VsZWNjaW9uYWRvczpcIiwgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyk7XG4gICAgICBsY0xvZyhcIvCfk48gW0xJTkUgQ09OVFJPTFNdIMK/RXN0YSBsw61uZWEgZXN0w6EgZW4gc2VsZWNjacOzbj9cIiwgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhsaW5lSWQpKTtcbiAgICAgIGxjTG9nKFwi8J+UoiBbTElORSBDT05UUk9MU10gwr9Nw7psdGlwbGVzIGVsZW1lbnRvcz9cIiwgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPiAxKTtcblxuICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID4gMSAmJiBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKGxpbmVJZCkpIHtcbiAgICAgICAgbGNMb2coXCLwn46vIFtMSU5FIENPTlRST0xTXSBJbnRlbnRhbmRvIGluaWNpYXIgZHJhZyBncnVwYWwgZGVzZGUgbMOtbmVhLi4uXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgaXNHcm91cExlYWRlciA9IHN0YXJ0RHJhZ0dydXBhbExpZGVyKGUsIGxpbmVFbGVtZW50KTtcbiAgICAgICAgICBsY0xvZyhcIvCfkZEgW0xJTkUgQ09OVFJPTFNdIMK/RXMgbMOtZGVyIGRlbCBncnVwbz9cIiwgaXNHcm91cExlYWRlcik7XG5cbiAgICAgICAgICBpZiAoIWlzR3JvdXBMZWFkZXIpIHtcbiAgICAgICAgICAgIGxjTG9nKFwi8J+aqyBbTElORSBDT05UUk9MU10gTm8gZXMgbMOtZGVyLCBkZXNoYWJpbGl0YW5kbyBkcmFnIGluZGl2aWR1YWwuLi5cIik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG5vZGVSZWYgJiYgbm9kZVJlZi5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3YXNEcmFnZ2FibGUgPSBub2RlUmVmLmRyYWdnYWJsZSgpO1xuICAgICAgICAgICAgICAgIG5vZGVSZWYuZHJhZ2dhYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBsY0xvZyhg8J+UkiBbTElORSBDT05UUk9MU10gRHJhZyBkZXNoYWJpbGl0YWRvIHBhcmEgbMOtbmVhICR7bGluZUlkfSAoZXJhOiAke3dhc0RyYWdnYWJsZX0pYCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsY0xvZyhcIvCfkZEgW0xJTkUgQ09OVFJPTFNdIEzDrW5lYSBlcyBsw61kZXIgZGVsIGRyYWcgZ3J1cGFsXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsY0Vycm9yKFwi4p2MIFtMSU5FIENPTlRST0xTXSBFcnJvciBlbiBkcmFnIGdydXBhbDpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsY0xvZyhcIvCfk48gW0xJTkUgQ09OVFJPTFNdIERyYWcgaW5kaXZpZHVhbCBub3JtYWwgcGFyYSBsw61uZWFcIik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZURyYWdFbmQgPSAoKSA9PiB7XG4gICAgICBsY0xvZyhcIvCfj4EgW0xJTkUgQ09OVFJPTFNdIERyYWcgZW5kIHBhcmEgbMOtbmVhOlwiLCBsaW5lSWQpO1xuICAgICAgc2V0TGluZUJlaW5nRHJhZ2dlZChmYWxzZSk7XG5cbiAgICAgIC8vIFJlYWN0aXZhciBkcmFnIGRlc3B1w6lzIGRlIHVuIGJyZXZlIGRlbGF5XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKG5vZGVSZWYgJiYgbm9kZVJlZi5kcmFnZ2FibGUpIHtcbiAgICAgICAgICBjb25zdCB3YXNEcmFnZ2FibGUgPSBub2RlUmVmLmRyYWdnYWJsZSgpO1xuICAgICAgICAgIG5vZGVSZWYuZHJhZ2dhYmxlKHRydWUpO1xuICAgICAgICAgIGxjTG9nKGDwn5STIFtMSU5FIENPTlRST0xTXSBEcmFnIHJlYWN0aXZhZG8gcGFyYSBsw61uZWEgJHtsaW5lSWR9IChlcmE6ICR7d2FzRHJhZ2dhYmxlfSlgKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICB9O1xuXG4gICAgbm9kZVJlZi5vbignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICBub2RlUmVmLm9uKCdkcmFnZW5kJywgaGFuZGxlRHJhZ0VuZCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbm9kZVJlZi5vZmYoJ2RyYWdzdGFydCcsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICBub2RlUmVmLm9mZignZHJhZ2VuZCcsIGhhbmRsZURyYWdFbmQpO1xuICAgIH07XG4gIH0sIFtpc1ZhbGlkTGluZSwgbm9kZVJlZiwgbGluZUlkLCBsaW5lRWxlbWVudF0pO1xuXG5cblxuICAvLyDwn5SlIEPDgUxDVUxPUyBNRU1PSVpBRE9TXG4gIGNvbnN0IHBvaW50cyA9IChpc1ZhbGlkTGluZSAmJiBBcnJheS5pc0FycmF5KGxpbmVFbGVtZW50LnBvaW50cykpXG4gICAgPyBsaW5lRWxlbWVudC5wb2ludHNcbiAgICA6IFswLCAwLCAxMDAsIDBdO1xuICBjb25zdCBwdW50b3NWYWxpZGFkb3MgPSBwb2ludHMuc2xpY2UoMCwgNCkubWFwKChwLCBpKSA9PiB7XG4gICAgY29uc3QgcHVudG8gPSBwYXJzZUZsb2F0KHAgfHwgMCk7XG4gICAgcmV0dXJuIGlzTmFOKHB1bnRvKSA/IChpID09PSAyID8gMTAwIDogMCkgOiBwdW50bztcbiAgfSk7XG5cbiAgY29uc3QgW25vcm1hbGl6ZWRTdGFydFgsIG5vcm1hbGl6ZWRTdGFydFksIG5vcm1hbGl6ZWRFbmRYLCBub3JtYWxpemVkRW5kWV0gPSBwdW50b3NWYWxpZGFkb3M7XG5cbiAgY29uc3Qgc3RhcnRBYnNvbHV0ZVggPSBub2RlUG9zLnggKyBub3JtYWxpemVkU3RhcnRYO1xuICBjb25zdCBzdGFydEFic29sdXRlWSA9IG5vZGVQb3MueSArIG5vcm1hbGl6ZWRTdGFydFk7XG4gIGNvbnN0IGVuZEFic29sdXRlWCA9IG5vZGVQb3MueCArIG5vcm1hbGl6ZWRFbmRYO1xuICBjb25zdCBlbmRBYnNvbHV0ZVkgPSBub2RlUG9zLnkgKyBub3JtYWxpemVkRW5kWTtcblxuICAvLyDwn5SlIEhBTkRMRVIgT1BUSU1JWkFETyBQQVJBIERSQUcgU1RBUlRcbiAgY29uc3QgaGFuZGxlUG9pbnREcmFnU3RhcnQgPSB1c2VDYWxsYmFjaygocG9pbnRUeXBlLCBlKSA9PiB7XG4gICAgc2V0RHJhZ2dpbmdQb2ludChwb2ludFR5cGUpO1xuICAgIGRyYWdTdGFydFBvcy5jdXJyZW50ID0gZS50YXJnZXQuZ2V0U3RhZ2UoKS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG5cbiAgICAvLyDwn5SlIExJTVBJQVIgQ0FDSEUgQUwgSU5JQ0lBUlxuICAgIHBvaW50c0NhY2hlLmN1cnJlbnQgPSBudWxsO1xuICB9LCBbXSk7XG5cbiAgLy8g8J+UpSBIQU5ETEVSIFVMVFJBLU9QVElNSVpBRE8gUEFSQSBEUkFHIE1PVkVcbiAgY29uc3QgaGFuZGxlUG9pbnREcmFnTW92ZSA9IHVzZUNhbGxiYWNrKChwb2ludFR5cGUsIGUpID0+IHtcbiAgICBpZiAoIWlzVmFsaWRMaW5lIHx8ICFub2RlUmVmIHx8ICFsaW5lSWQpIHJldHVybjtcbiAgICBpZiAoZHJhZ2dpbmdQb2ludCAhPT0gcG9pbnRUeXBlKSByZXR1cm47XG5cbiAgICBjb25zdCBzdGFnZSA9IGUudGFyZ2V0LmdldFN0YWdlKCk7XG4gICAgY29uc3QgcG9pbnRlclBvcyA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpO1xuICAgIGlmICghcG9pbnRlclBvcykgcmV0dXJuO1xuXG4gICAgLy8g8J+agCBUSFJPVFRMRSBBR1JFU0lWTzogU29sbyBjYWRhIDRtcyAoMjUwZnBzKVxuICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGlmIChub3cgLSBsYXN0VXBkYXRlVGltZS5jdXJyZW50IDwgNCkgcmV0dXJuO1xuICAgIGxhc3RVcGRhdGVUaW1lLmN1cnJlbnQgPSBub3c7XG5cbiAgICAvLyDwn5SlIFVTQVIgUE9TSUNJw5NOIFJFQUwgREVMIE5PRE8gRU4gVElFTVBPIFJFQUxcbiAgICBjb25zdCByZWFsTm9kZVggPSBub2RlUmVmLngoKTtcbiAgICBjb25zdCByZWFsTm9kZVkgPSBub2RlUmVmLnkoKTtcbiAgICBjb25zdCBuZXdQb2ludFggPSBwb2ludGVyUG9zLnggLSByZWFsTm9kZVg7XG4gICAgY29uc3QgbmV3UG9pbnRZID0gcG9pbnRlclBvcy55IC0gcmVhbE5vZGVZO1xuXG4gICAgbGV0IG5ld1BvaW50cztcbiAgICBpZiAocG9pbnRUeXBlID09PSAnc3RhcnQnKSB7XG4gICAgICBuZXdQb2ludHMgPSBbbmV3UG9pbnRYLCBuZXdQb2ludFksIG5vcm1hbGl6ZWRFbmRYLCBub3JtYWxpemVkRW5kWV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1BvaW50cyA9IFtub3JtYWxpemVkU3RhcnRYLCBub3JtYWxpemVkU3RhcnRZLCBuZXdQb2ludFgsIG5ld1BvaW50WV07XG4gICAgfVxuXG4gICAgLy8g8J+agCBBQ1RVQUxJWkFDScOTTiBESVJFQ1RBIFNJTiBSRUFDVCBSRS1SRU5ERVJcbiAgICBjb25zdCBsaW5lTm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltsaW5lSWRdO1xuICAgIGlmIChsaW5lTm9kZSkge1xuICAgICAgLy8g8J+UpSBTT0xPIEFDVFVBTElaQVIgU0kgTE9TIFBVTlRPUyBDQU1CSUFST04gU0lHTklGSUNBVElWQU1FTlRFXG4gICAgICBjb25zdCBwb2ludHNTdHIgPSBuZXdQb2ludHMuam9pbignLCcpO1xuICAgICAgaWYgKHBvaW50c0NhY2hlLmN1cnJlbnQgIT09IHBvaW50c1N0cikge1xuICAgICAgICBwb2ludHNDYWNoZS5jdXJyZW50ID0gcG9pbnRzU3RyO1xuXG4gICAgICAgIC8vIPCfmoAgRkVFREJBQ0sgSU5TVEFOVMOBTkVPXG4gICAgICAgIGxpbmVOb2RlLnBvaW50cyhuZXdQb2ludHMpO1xuXG4gICAgICAgIC8vIPCflKUgVVNBUiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgUEFSQSBCQVRDSCBEUkFXIMOTUFRJTU9cbiAgICAgICAgaWYgKCF3aW5kb3cuX2xpbmVEcmF3U2NoZWR1bGVkKSB7XG4gICAgICAgICAgd2luZG93Ll9saW5lRHJhd1NjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIGJhdGNoRHJhdyhsaW5lTm9kZSk7XG4gICAgICAgICAgICB3aW5kb3cuX2xpbmVEcmF3U2NoZWR1bGVkID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpc1ZhbGlkTGluZSwgbGluZUlkLCBkcmFnZ2luZ1BvaW50LCBub3JtYWxpemVkU3RhcnRYLCBub3JtYWxpemVkU3RhcnRZLCBub3JtYWxpemVkRW5kWCwgbm9ybWFsaXplZEVuZFksIG5vZGVSZWYsIGVsZW1lbnRSZWZzXSk7XG5cbiAgLy8g8J+UpSBIQU5ETEVSIE9QVElNSVpBRE8gUEFSQSBEUkFHIEVORFxuICBjb25zdCBoYW5kbGVQb2ludERyYWdFbmQgPSB1c2VDYWxsYmFjaygocG9pbnRUeXBlLCBlKSA9PiB7XG4gICAgaWYgKCFpc1ZhbGlkTGluZSB8fCAhbm9kZVJlZiB8fCAhbGluZUlkKSByZXR1cm47XG4gICAgaWYgKGRyYWdnaW5nUG9pbnQgIT09IHBvaW50VHlwZSkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgIGNvbnN0IHBvaW50ZXJQb3MgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICBpZiAoIXBvaW50ZXJQb3MpIHJldHVybjtcblxuICAgIC8vIPCflKUgVVNBUiBQT1NJQ0nDk04gUkVBTCBERUwgTk9ETyBFTiBUSUVNUE8gUkVBTFxuICAgIGNvbnN0IHJlYWxOb2RlWCA9IG5vZGVSZWYueCgpO1xuICAgIGNvbnN0IHJlYWxOb2RlWSA9IG5vZGVSZWYueSgpO1xuICAgIGNvbnN0IG5ld1BvaW50WCA9IHBvaW50ZXJQb3MueCAtIHJlYWxOb2RlWDtcbiAgICBjb25zdCBuZXdQb2ludFkgPSBwb2ludGVyUG9zLnkgLSByZWFsTm9kZVk7XG5cbiAgICBsZXQgbmV3UG9pbnRzO1xuICAgIGlmIChwb2ludFR5cGUgPT09ICdzdGFydCcpIHtcbiAgICAgIG5ld1BvaW50cyA9IFtuZXdQb2ludFgsIG5ld1BvaW50WSwgbm9ybWFsaXplZEVuZFgsIG5vcm1hbGl6ZWRFbmRZXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3UG9pbnRzID0gW25vcm1hbGl6ZWRTdGFydFgsIG5vcm1hbGl6ZWRTdGFydFksIG5ld1BvaW50WCwgbmV3UG9pbnRZXTtcbiAgICB9XG5cbiAgICAvLyDwn5SlIEFDVFVBTElaQUNJw5NOIEZJTkFMIENPTiBERUJPVU5DRVxuICAgIGlmIChvblVwZGF0ZUxpbmUpIHtcbiAgICAgIG9uVXBkYXRlTGluZShsaW5lSWQsIHtcbiAgICAgICAgcG9pbnRzOiBuZXdQb2ludHMsXG4gICAgICAgIGlzRmluYWw6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldERyYWdnaW5nUG9pbnQobnVsbCk7XG4gICAgZHJhZ1N0YXJ0UG9zLmN1cnJlbnQgPSBudWxsO1xuICAgIHBvaW50c0NhY2hlLmN1cnJlbnQgPSBudWxsOyAvLyDwn5SlIExJTVBJQVIgQ0FDSEVcbiAgfSwgW2lzVmFsaWRMaW5lLCBsaW5lSWQsIGRyYWdnaW5nUG9pbnQsIG5vcm1hbGl6ZWRTdGFydFgsIG5vcm1hbGl6ZWRTdGFydFksIG5vcm1hbGl6ZWRFbmRYLCBub3JtYWxpemVkRW5kWSwgbm9kZVJlZiwgb25VcGRhdGVMaW5lXSk7XG5cbiAgaWYgKCFpc1ZhbGlkTGluZSB8fCAhbm9kZVJlZikgcmV0dXJuIG51bGw7XG5cbiAgcmV0dXJuIChcbiAgICA8R3JvdXAgbmFtZT1cInVpXCI+XG4gICAgICB7Lyog8J+UpSBPQ1VMVEFSIENPTlRST0xFUyBEVVJBTlRFIERSQUcgSU5ESVZJRFVBTCBPIEdSVVBBTCAqL31cbiAgICAgIHshbGluZUJlaW5nRHJhZ2dlZCAmJiAhaXNHcm91cERyYWcgJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIHsvKiDwn5S0IFB1bnRvIGRlIGNvbnRyb2wgLSBJTklDSU8gKi99XG4gICAgICAgICAgPENpcmNsZVxuICAgICAgICAgICAgeD17c3RhcnRBYnNvbHV0ZVh9XG4gICAgICAgICAgICB5PXtzdGFydEFic29sdXRlWX1cbiAgICAgICAgICAgIHJhZGl1cz17cG9pbnRSYWRpdXN9XG4gICAgICAgICAgICBmaWxsPXtkcmFnZ2luZ1BvaW50ID09PSAnc3RhcnQnID8gXCIjMjU2M2ViXCIgOiBcIiMzYjgyZjZcIn1cbiAgICAgICAgICAgIHN0cm9rZT1cIiNmZmZmZmZcIlxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezIuNX1cbiAgICAgICAgICAgIGRyYWdnYWJsZT17dHJ1ZX1cbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnU3RhcnQoJ3N0YXJ0JywgZSl9XG4gICAgICAgICAgICBvbkRyYWdNb3ZlPXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnTW92ZSgnc3RhcnQnLCBlKX1cbiAgICAgICAgICAgIG9uRHJhZ0VuZD17KGUpID0+IGhhbmRsZVBvaW50RHJhZ0VuZCgnc3RhcnQnLCBlKX1cbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IHtcbiAgICAgICAgICAgICAgZS50YXJnZXQuZ2V0U3RhZ2UoKS5jb250YWluZXIoKS5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghZHJhZ2dpbmdQb2ludCkge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmdldFN0YWdlKCkuY29udGFpbmVyKCkuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgc2hhZG93Q29sb3I9XCJyZ2JhKDU5LCAxMzAsIDI0NiwgMC4zKVwiXG4gICAgICAgICAgICBzaGFkb3dCbHVyPXs0fVxuICAgICAgICAgICAgc2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IDMgfX1cbiAgICAgICAgICAgIC8vIPCfmoAgT1BUSU1JWkFDSU9ORVMgREUgUkVORElNSUVOVE9cbiAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICBzaGFkb3dGb3JTdHJva2VFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgICAgIGhpdFN0cm9rZVdpZHRoPXtwb2ludEhpdFN0cm9rZVdpZHRofSAvLyDDgXJlYSBkZSBjbGljayBtw6FzIGdyYW5kZVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7Lyog8J+UtCBQdW50byBkZSBjb250cm9sIC0gRklOQUwgKi99XG4gICAgICAgICAgPENpcmNsZVxuICAgICAgICAgICAgeD17ZW5kQWJzb2x1dGVYfVxuICAgICAgICAgICAgeT17ZW5kQWJzb2x1dGVZfVxuICAgICAgICAgICAgcmFkaXVzPXtwb2ludFJhZGl1c31cbiAgICAgICAgICAgIGZpbGw9e2RyYWdnaW5nUG9pbnQgPT09ICdlbmQnID8gXCIjMjU2M2ViXCIgOiBcIiMzYjgyZjZcIn1cbiAgICAgICAgICAgIHN0cm9rZT1cIiNmZmZmZmZcIlxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezIuNX1cbiAgICAgICAgICAgIGRyYWdnYWJsZT17dHJ1ZX1cbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnU3RhcnQoJ2VuZCcsIGUpfVxuICAgICAgICAgICAgb25EcmFnTW92ZT17KGUpID0+IGhhbmRsZVBvaW50RHJhZ01vdmUoJ2VuZCcsIGUpfVxuICAgICAgICAgICAgb25EcmFnRW5kPXsoZSkgPT4gaGFuZGxlUG9pbnREcmFnRW5kKCdlbmQnLCBlKX1cbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KGUpID0+IHtcbiAgICAgICAgICAgICAgZS50YXJnZXQuZ2V0U3RhZ2UoKS5jb250YWluZXIoKS5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJztcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghZHJhZ2dpbmdQb2ludCkge1xuICAgICAgICAgICAgICAgIGUudGFyZ2V0LmdldFN0YWdlKCkuY29udGFpbmVyKCkuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgc2hhZG93Q29sb3I9XCJyZ2JhKDU5LCAxMzAsIDI0NiwgMC4zKVwiXG4gICAgICAgICAgICBzaGFkb3dCbHVyPXs2fVxuICAgICAgICAgICAgc2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IDMgfX1cbiAgICAgICAgICAgIC8vIPCfmoAgT1BUSU1JWkFDSU9ORVMgREUgUkVORElNSUVOVE9cbiAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICBzaGFkb3dGb3JTdHJva2VFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgICAgIGhpdFN0cm9rZVdpZHRoPXtwb2ludEhpdFN0cm9rZVdpZHRofSAvLyDDgXJlYSBkZSBjbGljayBtw6FzIGdyYW5kZVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICB7Lyog8J+TjyBMw61uZWEgZGUgZ3XDrWEgZHVyYW50ZSBkcmFnIGRlIHB1bnRvcyAtIE9QVElNSVpBREEgKi99XG4gICAgICAgICAge2RyYWdnaW5nUG9pbnQgJiYgKFxuICAgICAgICAgICAgPExpbmVcbiAgICAgICAgICAgICAgbmFtZT1cInVpXCJcbiAgICAgICAgICAgICAgcG9pbnRzPXtbc3RhcnRBYnNvbHV0ZVgsIHN0YXJ0QWJzb2x1dGVZLCBlbmRBYnNvbHV0ZVgsIGVuZEFic29sdXRlWV19XG4gICAgICAgICAgICAgIHN0cm9rZT1cInJnYmEoMTE5LCA2MSwgMTkwLCAwLjQpXCJcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XG4gICAgICAgICAgICAgIGRhc2g9e1s0LCA0XX1cbiAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cbiAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cbiAgICAgICAgICAgICAgc2hhZG93Rm9yU3Ryb2tlRW5hYmxlZD17ZmFsc2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L0dyb3VwPlxuICApO1xufVxuXG5cblxuIl0sIm5hbWVzIjpbIkNpcmNsZSIsIkdyb3VwIiwiTGluZSIsInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJzdGFydERyYWdHcnVwYWxMaWRlciIsInVzZUlzVG91Y2hMaWtlIiwiYmF0Y2hEcmF3Iiwibm9kZSIsImdldExheWVyIiwiREVCVUdfTElORV9DT05UUk9MUyIsImxjTG9nIiwiYXJncyIsImNvbnNvbGUiLCJsb2ciLCJsY0Vycm9yIiwiZXJyb3IiLCJMaW5lQ29udHJvbHMiLCJsaW5lRWxlbWVudCIsImVsZW1lbnRSZWZzIiwib25VcGRhdGVMaW5lIiwiYWx0b0NhbnZhcyIsImlzRHJhZ0dydXBhbEFjdGl2ZSIsImVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJpc01vYmlsZSIsImRyYWdnaW5nUG9pbnQiLCJzZXREcmFnZ2luZ1BvaW50IiwiZHJhZ1N0YXJ0UG9zIiwibGluZUJlaW5nRHJhZ2dlZCIsInNldExpbmVCZWluZ0RyYWdnZWQiLCJpc0dyb3VwRHJhZyIsInNldElzR3JvdXBEcmFnIiwiaXNUb3VjaExpa2UiLCJwb2ludFJhZGl1cyIsInBvaW50SGl0U3Ryb2tlV2lkdGgiLCJub2RlUG9zIiwic2V0Tm9kZVBvcyIsIngiLCJ5IiwicG9pbnRzQ2FjaGUiLCJsYXN0VXBkYXRlVGltZSIsImlzVmFsaWRMaW5lIiwidGlwbyIsImZpZ3VyYSIsImxpbmVJZCIsImlkIiwibm9kZVJlZiIsImN1cnJlbnQiLCJzeW5jUG9zIiwibm93IiwicGVyZm9ybWFuY2UiLCJvbiIsIm9mZiIsImlzUGFydE9mTXVsdGlwbGVTZWxlY3Rpb24iLCJsZW5ndGgiLCJpc1RoaXNMaW5lU2VsZWN0ZWQiLCJpbmNsdWRlcyIsImhhbmRsZURyYWdTdGFydCIsImUiLCJ3aW5kb3ciLCJfZWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsImlzR3JvdXBMZWFkZXIiLCJzZXRUaW1lb3V0IiwiZHJhZ2dhYmxlIiwid2FzRHJhZ2dhYmxlIiwiaGFuZGxlRHJhZ0VuZCIsInBvaW50cyIsIkFycmF5IiwiaXNBcnJheSIsInB1bnRvc1ZhbGlkYWRvcyIsInNsaWNlIiwibWFwIiwicCIsImkiLCJwdW50byIsInBhcnNlRmxvYXQiLCJpc05hTiIsIm5vcm1hbGl6ZWRTdGFydFgiLCJub3JtYWxpemVkU3RhcnRZIiwibm9ybWFsaXplZEVuZFgiLCJub3JtYWxpemVkRW5kWSIsInN0YXJ0QWJzb2x1dGVYIiwic3RhcnRBYnNvbHV0ZVkiLCJlbmRBYnNvbHV0ZVgiLCJlbmRBYnNvbHV0ZVkiLCJoYW5kbGVQb2ludERyYWdTdGFydCIsInBvaW50VHlwZSIsInRhcmdldCIsImdldFN0YWdlIiwiZ2V0UG9pbnRlclBvc2l0aW9uIiwiY2FuY2VsQnViYmxlIiwiaGFuZGxlUG9pbnREcmFnTW92ZSIsInN0YWdlIiwicG9pbnRlclBvcyIsInJlYWxOb2RlWCIsInJlYWxOb2RlWSIsIm5ld1BvaW50WCIsIm5ld1BvaW50WSIsIm5ld1BvaW50cyIsImxpbmVOb2RlIiwicG9pbnRzU3RyIiwiam9pbiIsIl9saW5lRHJhd1NjaGVkdWxlZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImhhbmRsZVBvaW50RHJhZ0VuZCIsImlzRmluYWwiLCJuYW1lIiwicmFkaXVzIiwiZmlsbCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwib25EcmFnU3RhcnQiLCJvbkRyYWdNb3ZlIiwib25EcmFnRW5kIiwib25Nb3VzZUVudGVyIiwiY29udGFpbmVyIiwic3R5bGUiLCJjdXJzb3IiLCJvbk1vdXNlTGVhdmUiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXQiLCJwZXJmZWN0RHJhd0VuYWJsZWQiLCJzaGFkb3dGb3JTdHJva2VFbmFibGVkIiwiaGl0U3Ryb2tlV2lkdGgiLCJkYXNoIiwibGlzdGVuaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/LineControls.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/LineToolbar.jsx":
/*!****************************************!*\
  !*** ./src/components/LineToolbar.jsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LineToolbar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// components/LineToolbar.jsx\n\n\nfunction LineToolbar({ lineElement, onUpdateLine, style = {} }) {\n    const [mostrarSelectorGrosor, setMostrarSelectorGrosor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mostrarSelectorColor, setMostrarSelectorColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const grosorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const colorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Cerrar selectores al hacer clic fuera\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"LineToolbar.useEffect\": ()=>{\n            const handleClickFuera = {\n                \"LineToolbar.useEffect.handleClickFuera\": (e)=>{\n                    if (grosorRef.current && !grosorRef.current.contains(e.target)) {\n                        setMostrarSelectorGrosor(false);\n                    }\n                    if (colorRef.current && !colorRef.current.contains(e.target)) {\n                        setMostrarSelectorColor(false);\n                    }\n                }\n            }[\"LineToolbar.useEffect.handleClickFuera\"];\n            document.addEventListener('mousedown', handleClickFuera);\n            return ({\n                \"LineToolbar.useEffect\": ()=>document.removeEventListener('mousedown', handleClickFuera)\n            })[\"LineToolbar.useEffect\"];\n        }\n    }[\"LineToolbar.useEffect\"], []);\n    if (!lineElement || lineElement.tipo !== 'forma' || lineElement.figura !== 'line') {\n        return null;\n    }\n    const grosorActual = lineElement.strokeWidth || 3;\n    const colorActual = lineElement.color || \"#000000\";\n    // Grosores predefinidos\n    const grosoresDisponibles = [\n        1,\n        2,\n        3,\n        4,\n        5,\n        6,\n        8,\n        10,\n        12,\n        15,\n        18,\n        20,\n        24,\n        28,\n        32\n    ];\n    // Colores predefinidos populares\n    const coloresPredefinidos = [\n        \"#000000\",\n        \"#ffffff\",\n        \"#ff0000\",\n        \"#00ff00\",\n        \"#0000ff\",\n        \"#ffff00\",\n        \"#ff00ff\",\n        \"#00ffff\",\n        \"#ffa500\",\n        \"#800080\",\n        \"#808080\",\n        \"#a52a2a\"\n    ];\n    const actualizarGrosor = (nuevoGrosor)=>{\n        if (onUpdateLine) {\n            onUpdateLine(lineElement.id, {\n                strokeWidth: nuevoGrosor,\n                isFinal: true\n            });\n        }\n        setMostrarSelectorGrosor(false);\n    };\n    const actualizarColor = (nuevoColor)=>{\n        if (onUpdateLine) {\n            onUpdateLine(lineElement.id, {\n                color: nuevoColor,\n                isFinal: true\n            });\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed z-50 bg-white border rounded shadow p-2 flex gap-2 items-center line-toolbar\",\n        style: {\n            ...style,\n            width: \"auto\",\n            maxWidth: \"400px\",\n            animation: \"fadeInScale 0.15s ease-out\"\n        },\n        onMouseDown: (e)=>e.stopPropagation(),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                ref: grosorRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setMostrarSelectorGrosor(!mostrarSelectorGrosor),\n                        className: `flex items-center gap-2 px-3 py-2 rounded border text-sm transition-all duration-200 ${mostrarSelectorGrosor ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                        title: `Grosor: ${grosorActual}px`,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-gray-700 rounded-full\",\n                                        style: {\n                                            width: \"20px\",\n                                            height: `${Math.min(Math.max(grosorActual / 2, 1), 8)}px`,\n                                            minHeight: \"1px\"\n                                        }\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 96,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-xs font-medium\",\n                                        children: [\n                                            grosorActual,\n                                            \"px\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 104,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 95,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: `w-3 h-3 transition-transform ${mostrarSelectorGrosor ? 'rotate-180' : ''}`,\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                viewBox: \"0 0 24 24\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M19 9l-7 7-7-7\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 114,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 108,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 87,\n                        columnNumber: 9\n                    }, this),\n                    mostrarSelectorGrosor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-full left-0 mt-2 bg-white border rounded-lg shadow-xl p-3 z-50 min-w-[200px]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs font-medium text-gray-600 mb-2\",\n                                children: \"Seleccionar grosor:\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 121,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2 max-h-[200px] overflow-y-auto\",\n                                children: grosoresDisponibles.map((grosor)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>actualizarGrosor(grosor),\n                                        className: `w-full flex items-center justify-between p-2 rounded hover:bg-gray-100 transition-colors ${grosorActual === grosor ? 'bg-purple-50 border border-purple-300' : ''}`,\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex items-center gap-3\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"bg-gray-700 rounded-full\",\n                                                        style: {\n                                                            width: \"30px\",\n                                                            height: `${Math.min(Math.max(grosor / 2, 1), 12)}px`,\n                                                            minHeight: \"1px\"\n                                                        }\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                        lineNumber: 133,\n                                                        columnNumber: 21\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-sm\",\n                                                        children: [\n                                                            grosor,\n                                                            \"px\"\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                        lineNumber: 141,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                lineNumber: 131,\n                                                columnNumber: 19\n                                            }, this),\n                                            grosorActual === grosor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"w-4 h-4 text-purple-600\",\n                                                fill: \"none\",\n                                                stroke: \"currentColor\",\n                                                viewBox: \"0 0 24 24\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M5 13l4 4L19 7\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                    lineNumber: 147,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                lineNumber: 146,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, grosor, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 124,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 122,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"pt-3 mt-3 border-t\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"text-xs font-medium text-gray-600 block mb-1\",\n                                        children: \"Grosor personalizado (1-50):\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 155,\n                                        columnNumber: 3\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        type: \"number\",\n                                        min: 1,\n                                        max: 50,\n                                        defaultValue: grosorActual,\n                                        onChange: (e)=>{\n                                            const newWidth = parseInt(e.target.value);\n                                            if (!isNaN(newWidth) && newWidth > 0 && newWidth <= 50) {\n                                                onUpdateLine(lineElement.id, {\n                                                    strokeWidth: newWidth,\n                                                    isPreview: false,\n                                                    isFinal: true\n                                                });\n                                            }\n                                        },\n                                        className: \"w-full px-2 py-1 border rounded text-sm\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 158,\n                                        columnNumber: 3\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 154,\n                                columnNumber: 1\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 120,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                lineNumber: 86,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                ref: colorRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setMostrarSelectorColor(!mostrarSelectorColor),\n                        className: `flex items-center gap-2 px-3 py-2 rounded border text-sm transition-all duration-200 ${mostrarSelectorColor ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                        title: `Color: ${colorActual}`,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-5 h-5 rounded-full border-2 border-gray-300\",\n                                style: {\n                                    backgroundColor: colorActual\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 191,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-xs font-medium\",\n                                children: \"Color\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 195,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                className: `w-3 h-3 transition-transform ${mostrarSelectorColor ? 'rotate-180' : ''}`,\n                                fill: \"none\",\n                                stroke: \"currentColor\",\n                                viewBox: \"0 0 24 24\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M19 9l-7 7-7-7\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 204,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 198,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 183,\n                        columnNumber: 9\n                    }, this),\n                    mostrarSelectorColor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-full right-0 mt-2 bg-white border rounded-lg shadow-xl p-3 z-50 min-w-[250px]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs font-medium text-gray-600 mb-2\",\n                                children: \"Seleccionar color:\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 211,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mb-3\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"color\",\n                                    value: colorActual,\n                                    onChange: (e)=>actualizarColor(e.target.value),\n                                    className: \"w-full h-8 rounded border border-gray-300 cursor-pointer\",\n                                    title: \"Color personalizado\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 215,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 214,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-6 gap-2\",\n                                children: coloresPredefinidos.map((color)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>actualizarColor(color),\n                                        className: `w-8 h-8 rounded border-2 hover:border-purple-400 transition-colors ${colorActual === color ? 'border-purple-500 shadow-md' : 'border-gray-300'}`,\n                                        style: {\n                                            backgroundColor: color\n                                        },\n                                        title: color,\n                                        children: colorActual === color && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"w-4 h-4 mx-auto text-white drop-shadow-sm\",\n                                            fill: \"none\",\n                                            stroke: \"currentColor\",\n                                            viewBox: \"0 0 24 24\",\n                                            style: {\n                                                filter: color === \"#ffffff\" ? \"invert(1)\" : \"none\"\n                                            },\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 3,\n                                                d: \"M5 13l4 4L19 7\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                                lineNumber: 245,\n                                                columnNumber: 23\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                            lineNumber: 238,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, color, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                        lineNumber: 227,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 225,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"pt-2 mt-2 border-t text-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs text-gray-500 font-mono\",\n                                    children: colorActual\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                    lineNumber: 254,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                                lineNumber: 253,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 210,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                lineNumber: 182,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-1 px-2 py-1 bg-gray-50 rounded text-xs text-gray-600\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        className: \"w-3 h-3\",\n                        fill: \"none\",\n                        stroke: \"currentColor\",\n                        viewBox: \"0 0 24 24\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 2,\n                            d: \"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                            lineNumber: 263,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 262,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: \"L\\xednea\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                        lineNumber: 265,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n                lineNumber: 261,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\LineToolbar.jsx\",\n        lineNumber: 75,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL0xpbmVUb29sYmFyLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLDZCQUE2Qjs7QUFDdUI7QUFFckMsU0FBU0csWUFBWSxFQUNsQ0MsV0FBVyxFQUNYQyxZQUFZLEVBQ1pDLFFBQVEsQ0FBQyxDQUFDLEVBQ1g7SUFDQyxNQUFNLENBQUNDLHVCQUF1QkMseUJBQXlCLEdBQUdSLCtDQUFRQSxDQUFDO0lBQ25FLE1BQU0sQ0FBQ1Msc0JBQXNCQyx3QkFBd0IsR0FBR1YsK0NBQVFBLENBQUM7SUFDakUsTUFBTVcsWUFBWVYsNkNBQU1BLENBQUM7SUFDekIsTUFBTVcsV0FBV1gsNkNBQU1BLENBQUM7SUFFeEIsd0NBQXdDO0lBQ3hDQyxnREFBU0E7aUNBQUM7WUFDUixNQUFNVzswREFBbUIsQ0FBQ0M7b0JBQ3hCLElBQUlILFVBQVVJLE9BQU8sSUFBSSxDQUFDSixVQUFVSSxPQUFPLENBQUNDLFFBQVEsQ0FBQ0YsRUFBRUcsTUFBTSxHQUFHO3dCQUM5RFQseUJBQXlCO29CQUMzQjtvQkFDQSxJQUFJSSxTQUFTRyxPQUFPLElBQUksQ0FBQ0gsU0FBU0csT0FBTyxDQUFDQyxRQUFRLENBQUNGLEVBQUVHLE1BQU0sR0FBRzt3QkFDNURQLHdCQUF3QjtvQkFDMUI7Z0JBQ0Y7O1lBRUFRLFNBQVNDLGdCQUFnQixDQUFDLGFBQWFOO1lBQ3ZDO3lDQUFPLElBQU1LLFNBQVNFLG1CQUFtQixDQUFDLGFBQWFQOztRQUN6RDtnQ0FBRyxFQUFFO0lBRUwsSUFBSSxDQUFDVCxlQUFlQSxZQUFZaUIsSUFBSSxLQUFLLFdBQVdqQixZQUFZa0IsTUFBTSxLQUFLLFFBQVE7UUFDakYsT0FBTztJQUNUO0lBRUEsTUFBTUMsZUFBZW5CLFlBQVlvQixXQUFXLElBQUk7SUFDaEQsTUFBTUMsY0FBY3JCLFlBQVlzQixLQUFLLElBQUk7SUFFekMsd0JBQXdCO0lBQ3hCLE1BQU1DLHNCQUFzQjtRQUFDO1FBQUc7UUFBRztRQUFHO1FB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WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXExpbmVUb29sYmFyLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL0xpbmVUb29sYmFyLmpzeFxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExpbmVUb29sYmFyKHsgXHJcbiAgbGluZUVsZW1lbnQsIFxyXG4gIG9uVXBkYXRlTGluZSwgXHJcbiAgc3R5bGUgPSB7fSBcclxufSkge1xyXG4gIGNvbnN0IFttb3N0cmFyU2VsZWN0b3JHcm9zb3IsIHNldE1vc3RyYXJTZWxlY3Rvckdyb3Nvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW21vc3RyYXJTZWxlY3RvckNvbG9yLCBzZXRNb3N0cmFyU2VsZWN0b3JDb2xvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgZ3Jvc29yUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IGNvbG9yUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICAvLyBDZXJyYXIgc2VsZWN0b3JlcyBhbCBoYWNlciBjbGljIGZ1ZXJhXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUNsaWNrRnVlcmEgPSAoZSkgPT4ge1xyXG4gICAgICBpZiAoZ3Jvc29yUmVmLmN1cnJlbnQgJiYgIWdyb3NvclJlZi5jdXJyZW50LmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICAgIHNldE1vc3RyYXJTZWxlY3Rvckdyb3NvcihmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbG9yUmVmLmN1cnJlbnQgJiYgIWNvbG9yUmVmLmN1cnJlbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrRnVlcmEpO1xyXG4gICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZUNsaWNrRnVlcmEpO1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgaWYgKCFsaW5lRWxlbWVudCB8fCBsaW5lRWxlbWVudC50aXBvICE9PSAnZm9ybWEnIHx8IGxpbmVFbGVtZW50LmZpZ3VyYSAhPT0gJ2xpbmUnKSB7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGNvbnN0IGdyb3NvckFjdHVhbCA9IGxpbmVFbGVtZW50LnN0cm9rZVdpZHRoIHx8IDM7XHJcbiAgY29uc3QgY29sb3JBY3R1YWwgPSBsaW5lRWxlbWVudC5jb2xvciB8fCBcIiMwMDAwMDBcIjtcclxuXHJcbiAgLy8gR3Jvc29yZXMgcHJlZGVmaW5pZG9zXHJcbiAgY29uc3QgZ3Jvc29yZXNEaXNwb25pYmxlcyA9IFsxLCAyLCAzLCA0LCA1LCA2LCA4LCAxMCwgMTIsIDE1LCAxOCwgMjAsIDI0LCAyOCwgMzJdO1xyXG5cclxuICAvLyBDb2xvcmVzIHByZWRlZmluaWRvcyBwb3B1bGFyZXNcclxuICBjb25zdCBjb2xvcmVzUHJlZGVmaW5pZG9zID0gW1xyXG4gICAgXCIjMDAwMDAwXCIsIC8vIE5lZ3JvXHJcbiAgICBcIiNmZmZmZmZcIiwgLy8gQmxhbmNvXHJcbiAgICBcIiNmZjAwMDBcIiwgLy8gUm9qb1xyXG4gICAgXCIjMDBmZjAwXCIsIC8vIFZlcmRlXHJcbiAgICBcIiMwMDAwZmZcIiwgLy8gQXp1bFxyXG4gICAgXCIjZmZmZjAwXCIsIC8vIEFtYXJpbGxvXHJcbiAgICBcIiNmZjAwZmZcIiwgLy8gTWFnZW50YVxyXG4gICAgXCIjMDBmZmZmXCIsIC8vIEN5YW5cclxuICAgIFwiI2ZmYTUwMFwiLCAvLyBOYXJhbmphXHJcbiAgICBcIiM4MDAwODBcIiwgLy8gUMO6cnB1cmFcclxuICAgIFwiIzgwODA4MFwiLCAvLyBHcmlzXHJcbiAgICBcIiNhNTJhMmFcIiwgLy8gTWFycsOzblxyXG4gIF07XHJcblxyXG4gIGNvbnN0IGFjdHVhbGl6YXJHcm9zb3IgPSAobnVldm9Hcm9zb3IpID0+IHtcclxuICAgIGlmIChvblVwZGF0ZUxpbmUpIHtcclxuICAgICAgb25VcGRhdGVMaW5lKGxpbmVFbGVtZW50LmlkLCB7XHJcbiAgICAgICAgc3Ryb2tlV2lkdGg6IG51ZXZvR3Jvc29yLFxyXG4gICAgICAgIGlzRmluYWw6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRNb3N0cmFyU2VsZWN0b3JHcm9zb3IoZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFjdHVhbGl6YXJDb2xvciA9IChudWV2b0NvbG9yKSA9PiB7XHJcbiAgICBpZiAob25VcGRhdGVMaW5lKSB7XHJcbiAgICAgIG9uVXBkYXRlTGluZShsaW5lRWxlbWVudC5pZCwge1xyXG4gICAgICAgIGNvbG9yOiBudWV2b0NvbG9yLFxyXG4gICAgICAgIGlzRmluYWw6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXZcclxuICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei01MCBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBzaGFkb3cgcC0yIGZsZXggZ2FwLTIgaXRlbXMtY2VudGVyIGxpbmUtdG9vbGJhclwiXHJcbiAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgLi4uc3R5bGUsXHJcbiAgICAgICAgd2lkdGg6IFwiYXV0b1wiLFxyXG4gICAgICAgIG1heFdpZHRoOiBcIjQwMHB4XCIsXHJcbiAgICAgICAgYW5pbWF0aW9uOiBcImZhZGVJblNjYWxlIDAuMTVzIGVhc2Utb3V0XCIsIC8vIEFuaW1hY2nDs24gc3VhdmUgZGUgYXBhcmljacOzblxyXG4gICAgICB9fVxyXG4gICAgICBvbk1vdXNlRG93bj17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9IC8vIFByZXZlbmlyIGludGVyZmVyZW5jaWFzIGNvbiBlbCBjYW52YXNcclxuICAgID5cclxuICAgICAgey8qIPCfk48gQ29udHJvbCBkZSBncm9zb3IgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIiByZWY9e2dyb3NvclJlZn0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yR3Jvc29yKCFtb3N0cmFyU2VsZWN0b3JHcm9zb3IpfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcHgtMyBweS0yIHJvdW5kZWQgYm9yZGVyIHRleHQtc20gdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwICR7XHJcbiAgICAgICAgICAgIG1vc3RyYXJTZWxlY3Rvckdyb3NvciA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxyXG4gICAgICAgICAgfWB9XHJcbiAgICAgICAgICB0aXRsZT17YEdyb3NvcjogJHtncm9zb3JBY3R1YWx9cHhgfVxyXG4gICAgICAgID5cclxuICAgICAgICAgIHsvKiBQcmV2aXN1YWxpemFjacOzbiB2aXN1YWwgZGVsIGdyb3NvciAqL31cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgPGRpdiBcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTcwMCByb3VuZGVkLWZ1bGxcIlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogXCIyMHB4XCIsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGAke01hdGgubWluKE1hdGgubWF4KGdyb3NvckFjdHVhbCAvIDIsIDEpLCA4KX1weGAsXHJcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IFwiMXB4XCJcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtXCI+e2dyb3NvckFjdHVhbH1weDwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB7LyogRmxlY2hhICovfVxyXG4gICAgICAgICAgPHN2ZyBcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy0zIGgtMyB0cmFuc2l0aW9uLXRyYW5zZm9ybSAke21vc3RyYXJTZWxlY3Rvckdyb3NvciA/ICdyb3RhdGUtMTgwJyA6ICcnfWB9IFxyXG4gICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxyXG4gICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcclxuICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xOSA5bC03IDctNy03XCIgLz5cclxuICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICB7LyogRHJvcGRvd24gZGUgZ3Jvc29yZXMgKi99XHJcbiAgICAgICAge21vc3RyYXJTZWxlY3Rvckdyb3NvciAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC1mdWxsIGxlZnQtMCBtdC0yIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkLWxnIHNoYWRvdy14bCBwLTMgei01MCBtaW4tdy1bMjAwcHhdXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNjAwIG1iLTJcIj5TZWxlY2Npb25hciBncm9zb3I6PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yIG1heC1oLVsyMDBweF0gb3ZlcmZsb3cteS1hdXRvXCI+XHJcbiAgICAgICAgICAgICAge2dyb3NvcmVzRGlzcG9uaWJsZXMubWFwKChncm9zb3IpID0+IChcclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAga2V5PXtncm9zb3J9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGFjdHVhbGl6YXJHcm9zb3IoZ3Jvc29yKX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyAke1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3NvckFjdHVhbCA9PT0gZ3Jvc29yID8gJ2JnLXB1cnBsZS01MCBib3JkZXIgYm9yZGVyLXB1cnBsZS0zMDAnIDogJydcclxuICAgICAgICAgICAgICAgICAgfWB9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICB7LyogUHJldmlzdWFsaXphY2nDs24gdmlzdWFsICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTcwMCByb3VuZGVkLWZ1bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMzBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGAke01hdGgubWluKE1hdGgubWF4KGdyb3NvciAvIDIsIDEpLCAxMil9cHhgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IFwiMXB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+e2dyb3Nvcn1weDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB7LyogQ2hlY2ttYXJrIHNpIGVzdMOhIHNlbGVjY2lvbmFkbyAqL31cclxuICAgICAgICAgICAgICAgICAge2dyb3NvckFjdHVhbCA9PT0gZ3Jvc29yICYmIChcclxuICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1wdXJwbGUtNjAwXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNSAxM2w0IDRMMTkgN1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIHsvKiDwn5SiIElucHV0IG1hbnVhbCBwYXJhIGdyb3NvciAqL31cclxuPGRpdiBjbGFzc05hbWU9XCJwdC0zIG10LTMgYm9yZGVyLXRcIj5cclxuICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bSB0ZXh0LWdyYXktNjAwIGJsb2NrIG1iLTFcIj5cclxuICAgIEdyb3NvciBwZXJzb25hbGl6YWRvICgxLTUwKTpcclxuICA8L2xhYmVsPlxyXG4gIDxpbnB1dFxyXG4gICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICBtaW49ezF9XHJcbiAgICBtYXg9ezUwfVxyXG4gICAgZGVmYXVsdFZhbHVlPXtncm9zb3JBY3R1YWx9XHJcbiAgICBvbkNoYW5nZT17KGUpID0+IHtcclxuICAgICAgY29uc3QgbmV3V2lkdGggPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgIGlmICghaXNOYU4obmV3V2lkdGgpICYmIG5ld1dpZHRoID4gMCAmJiBuZXdXaWR0aCA8PSA1MCkge1xyXG4gICAgICAgIG9uVXBkYXRlTGluZShsaW5lRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IG5ld1dpZHRoLFxyXG4gICAgICAgICAgaXNQcmV2aWV3OiBmYWxzZSxcclxuICAgICAgICAgIGlzRmluYWw6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfX1cclxuICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0yIHB5LTEgYm9yZGVyIHJvdW5kZWQgdGV4dC1zbVwiXHJcbiAgLz5cclxuPC9kaXY+XHJcblxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7Lyog8J+OqCBDb250cm9sIGRlIGNvbG9yICovfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCIgcmVmPXtjb2xvclJlZn0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoIW1vc3RyYXJTZWxlY3RvckNvbG9yKX1cclxuICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMiByb3VuZGVkIGJvcmRlciB0ZXh0LXNtIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCAke1xyXG4gICAgICAgICAgICBtb3N0cmFyU2VsZWN0b3JDb2xvciA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxyXG4gICAgICAgICAgfWB9XHJcbiAgICAgICAgICB0aXRsZT17YENvbG9yOiAke2NvbG9yQWN0dWFsfWB9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgey8qIE11ZXN0cmEgZGUgY29sb3IgKi99XHJcbiAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTUgaC01IHJvdW5kZWQtZnVsbCBib3JkZXItMiBib3JkZXItZ3JheS0zMDBcIlxyXG4gICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yQWN0dWFsIH19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBmb250LW1lZGl1bVwiPkNvbG9yPC9zcGFuPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB7LyogRmxlY2hhICovfVxyXG4gICAgICAgICAgPHN2ZyBcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy0zIGgtMyB0cmFuc2l0aW9uLXRyYW5zZm9ybSAke21vc3RyYXJTZWxlY3RvckNvbG9yID8gJ3JvdGF0ZS0xODAnIDogJyd9YH0gXHJcbiAgICAgICAgICAgIGZpbGw9XCJub25lXCIgXHJcbiAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxyXG4gICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTE5IDlsLTcgNy03LTdcIiAvPlxyXG4gICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIHsvKiBEcm9wZG93biBkZSBjb2xvcmVzICovfVxyXG4gICAgICAgIHttb3N0cmFyU2VsZWN0b3JDb2xvciAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC1mdWxsIHJpZ2h0LTAgbXQtMiBiZy13aGl0ZSBib3JkZXIgcm91bmRlZC1sZyBzaGFkb3cteGwgcC0zIHotNTAgbWluLXctWzI1MHB4XVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTYwMCBtYi0yXCI+U2VsZWNjaW9uYXIgY29sb3I6PC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB7LyogU2VsZWN0b3IgZGUgY29sb3IgcGVyc29uYWxpemFkbyAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zXCI+XHJcbiAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICB0eXBlPVwiY29sb3JcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e2NvbG9yQWN0dWFsfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBhY3R1YWxpemFyQ29sb3IoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtOCByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JheS0zMDAgY3Vyc29yLXBvaW50ZXJcIlxyXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJDb2xvciBwZXJzb25hbGl6YWRvXCJcclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHsvKiBDb2xvcmVzIHByZWRlZmluaWRvcyAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy02IGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAge2NvbG9yZXNQcmVkZWZpbmlkb3MubWFwKChjb2xvcikgPT4gKFxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICBrZXk9e2NvbG9yfVxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBhY3R1YWxpemFyQ29sb3IoY29sb3IpfVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LTggaC04IHJvdW5kZWQgYm9yZGVyLTIgaG92ZXI6Ym9yZGVyLXB1cnBsZS00MDAgdHJhbnNpdGlvbi1jb2xvcnMgJHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckFjdHVhbCA9PT0gY29sb3IgPyAnYm9yZGVyLXB1cnBsZS01MDAgc2hhZG93LW1kJyA6ICdib3JkZXItZ3JheS0zMDAnXHJcbiAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yIH19XHJcbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtjb2xvcn1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgey8qIENoZWNrbWFyayBwYXJhIGNvbG9yIHNlbGVjY2lvbmFkbyAqL31cclxuICAgICAgICAgICAgICAgICAge2NvbG9yQWN0dWFsID09PSBjb2xvciAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBcclxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctNCBoLTQgbXgtYXV0byB0ZXh0LXdoaXRlIGRyb3Atc2hhZG93LXNtXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZpbHRlcjogY29sb3IgPT09IFwiI2ZmZmZmZlwiID8gXCJpbnZlcnQoMSlcIiA6IFwibm9uZVwiIH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXszfSBkPVwiTTUgMTNsNCA0TDE5IDdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgey8qIFZhbG9yIGhleCAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0yIG10LTIgYm9yZGVyLXQgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgZm9udC1tb25vXCI+e2NvbG9yQWN0dWFsfTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiDwn5OQIEluZm9ybWFjacOzbiBhZGljaW9uYWwgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgcHgtMiBweS0xIGJnLWdyYXktNTAgcm91bmRlZCB0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5cclxuICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctMyBoLTNcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xMyAxNmgtMXYtNGgtMW0xLTRoLjAxTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+XHJcbiAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPHNwYW4+TMOtbmVhPC9zcGFuPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJMaW5lVG9vbGJhciIsImxpbmVFbGVtZW50Iiwib25VcGRhdGVMaW5lIiwic3R5bGUiLCJtb3N0cmFyU2VsZWN0b3JHcm9zb3IiLCJzZXRNb3N0cmFyU2VsZWN0b3JHcm9zb3IiLCJtb3N0cmFyU2VsZWN0b3JDb2xvciIsInNldE1vc3RyYXJTZWxlY3RvckNvbG9yIiwiZ3Jvc29yUmVmIiwiY29sb3JSZWYiLCJoYW5kbGVDbGlja0Z1ZXJhIiwiZSIsImN1cnJlbnQiLCJjb250YWlucyIsInRhcmdldCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0aXBvIiwiZmlndXJhIiwiZ3Jvc29yQWN0dWFsIiwic3Ryb2tlV2lkdGgiLCJjb2xvckFjdHVhbCIsImNvbG9yIiwiZ3Jvc29yZXNEaXNwb25pYmxlcyIsImNvbG9yZXNQcmVkZWZpbmlkb3MiLCJhY3R1YWxpemFyR3Jvc29yIiwibnVldm9Hcm9zb3IiLCJpZCIsImlzRmluYWwiLCJhY3R1YWxpemFyQ29sb3IiLCJudWV2b0NvbG9yIiwiZGl2IiwiY2xhc3NOYW1lIiwid2lkdGgiLCJtYXhXaWR0aCIsImFuaW1hdGlvbiIsIm9uTW91c2VEb3duIiwic3RvcFByb3BhZ2F0aW9uIiwicmVmIiwiYnV0dG9uIiwib25DbGljayIsInRpdGxlIiwiaGVpZ2h0IiwiTWF0aCIsIm1pbiIsIm1heCIsIm1pbkhlaWdodCIsInNwYW4iLCJzdmciLCJmaWxsIiwic3Ryb2tlIiwidmlld0JveCIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJkIiwibWFwIiwiZ3Jvc29yIiwibGFiZWwiLCJpbnB1dCIsInR5cGUiLCJkZWZhdWx0VmFsdWUiLCJvbkNoYW5nZSIsIm5ld1dpZHRoIiwicGFyc2VJbnQiLCJ2YWx1ZSIsImlzTmFOIiwiaXNQcmV2aWV3IiwiYmFja2dyb3VuZENvbG9yIiwiZmlsdGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/LineToolbar.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/MenuOpcionesElemento.jsx":
/*!*************************************************!*\
  !*** ./src/components/MenuOpcionesElemento.jsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MenuOpcionesElemento)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _domain_motionEffects__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/domain/motionEffects */ \"(pages-dir-node)/./src/domain/motionEffects/index.js\");\n// C:\\Reservaeldia\\src\\components\\MenuOpcionesElemento.jsx\n\n\n\n\n\n// Normaliza y valida URL básica\nfunction sanitizeURL(url) {\n    if (!url) return \"\";\n    const t = String(url).trim();\n    const ok = /^(https?:\\/\\/|mailto:|tel:|whatsapp:)/i.test(t);\n    if (ok) return t;\n    // dominio simple -> completar\n    if (/^[\\w.-]+\\.[a-z]{2,}(\\/.*)?$/i.test(t)) return `https://${t}`;\n    try {\n        const u = new URL(t);\n        return u.toString();\n    } catch  {\n        return \"\";\n    }\n}\n/**\r\n * Menú contextual para un elemento seleccionado en el canvas.\r\n * - Se posiciona pegado al botón ⚙️ (botonOpcionesRef)\r\n * - Evita el \"flash\" inicial usando useLayoutEffect + visibility hasta tener posición lista\r\n */ function MenuOpcionesElemento({ isOpen, botonOpcionesRef, elementoSeleccionado, onCopiar, onPegar, onDuplicar, onEliminar, moverElemento, onCerrar, // Para \"Usar como fondo\"\nreemplazarFondo, secciones, objetos, setSecciones, setObjetos, setElementosSeleccionados }) {\n    // Estado local del submenu \"Orden de capa\"\n    const [mostrarSubmenuCapa, setMostrarSubmenuCapa] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Posición calculada del menú\n    const [pos, setPos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: -9999,\n        y: -9999\n    });\n    // Flag para mostrar el menú sólo cuando tenemos coords válidas\n    const [ready, setReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Ref del panel principal (para click-outside del padre)\n    const menuRootRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Ref del botón \"Orden de capa\" (ancla para posicionar el flyout)\n    const btnOrdenRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Ref del flyout (por si querés click-outside específico del flyout)\n    const submenuRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Posición del flyout\n    const [submenuPos, setSubmenuPos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: -9999,\n        y: -9999\n    });\n    const [submenuReady, setSubmenuReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isMobile, setIsMobile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mobileBottomOffset, setMobileBottomOffset] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(8);\n    const esImagen = elementoSeleccionado?.tipo === \"imagen\";\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (true) return;\n            const mq = window.matchMedia(\"(max-width: 768px)\");\n            const update = {\n                \"MenuOpcionesElemento.useEffect.update\": ()=>setIsMobile(mq.matches)\n            }[\"MenuOpcionesElemento.useEffect.update\"];\n            update();\n            mq.addEventListener?.(\"change\", update);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>mq.removeEventListener?.(\"change\", update)\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], []);\n    const calcularOffsetBottomMobile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"MenuOpcionesElemento.useCallback[calcularOffsetBottomMobile]\": ()=>{\n            if (true) return 8;\n            const viewportHeight = Math.max(0, window.innerHeight || 0);\n            const sidebar = document.querySelector(\"aside\");\n            if (!sidebar || typeof sidebar.getBoundingClientRect !== \"function\") {\n                return 8;\n            }\n            const rect = sidebar.getBoundingClientRect();\n            const overlapsBottom = rect.bottom >= viewportHeight - 1;\n            if (!overlapsBottom) return 8;\n            const obstructionHeight = Math.max(0, viewportHeight - rect.top);\n            return Math.max(8, Math.ceil(obstructionHeight + 8));\n        }\n    }[\"MenuOpcionesElemento.useCallback[calcularOffsetBottomMobile]\"], []);\n    // --- Helper: calcula la posición final del menú desde el rect del botón ⚙️\n    const calcularPosDesdeRect = (r)=>{\n        const menuWidth = 256; // w-64\n        const menuHeight = 300; // estimación\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        let x = r.right + 8; // por defecto a la derecha del botón\n        let y = r.top;\n        // Si se sale a la derecha, lo ponemos a la izquierda del botón\n        if (x + menuWidth > vw) x = r.left - menuWidth - 8;\n        // Si se sale por abajo, lo acomodamos hacia arriba\n        if (y + menuHeight > vh) y = Math.max(8, r.bottom - menuHeight);\n        return {\n            x,\n            y\n        };\n    };\n    // --- Submenú Enlace ---\n    const [mostrarSubmenuEnlace, setMostrarSubmenuEnlace] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const btnEnlaceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const submenuEnlaceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [enlacePos, setEnlacePos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: -9999,\n        y: -9999\n    });\n    const [enlaceReady, setEnlaceReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [urlInput, setUrlInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [urlError, setUrlError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [mostrarSubmenuEfectos, setMostrarSubmenuEfectos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const btnEfectosRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const submenuEfectosRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [efectosPos, setEfectosPos] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        x: -9999,\n        y: -9999\n    });\n    const [efectosReady, setEfectosReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const allowedMotionEffects = (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_3__.getAllowedMotionEffectsForElement)(elementoSeleccionado);\n    const currentMotionEffect = (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_3__.sanitizeMotionEffect)(elementoSeleccionado?.motionEffect);\n    // Al abrir el menú, pre-cargar la URL actual del elemento (si tiene)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!isOpen || !elementoSeleccionado) return;\n            const actual = elementoSeleccionado?.enlace?.href || elementoSeleccionado?.enlace || \"\";\n            setUrlInput(actual || \"\");\n            setUrlError(false);\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        isOpen,\n        elementoSeleccionado\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (isOpen) return;\n            setMostrarSubmenuCapa(false);\n            setMostrarSubmenuEnlace(false);\n            setMostrarSubmenuEfectos(false);\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        isOpen\n    ]);\n    // Posicionar el flyout de \"Enlace\"\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!mostrarSubmenuEnlace) {\n                setEnlaceReady(false);\n                setEnlacePos({\n                    x: -9999,\n                    y: -9999\n                });\n                return;\n            }\n            const btn = btnEnlaceRef.current;\n            if (!btn) return;\n            const r = btn.getBoundingClientRect();\n            const flyoutWidth = 320; // un poco más ancho para el input\n            const flyoutHeight = 160; // estimado\n            const gap = 8;\n            const vw = window.innerWidth;\n            const vh = window.innerHeight;\n            let x = r.right + gap;\n            let y = r.top;\n            if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n            if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n            setEnlacePos({\n                x,\n                y\n            });\n            setEnlaceReady(true);\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        mostrarSubmenuEnlace\n    ]);\n    // Reposicionar ante scroll/resize con el flyout abierto\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!mostrarSubmenuEnlace) return;\n            const handle = {\n                \"MenuOpcionesElemento.useEffect.handle\": ()=>{\n                    const btn = btnEnlaceRef.current;\n                    if (!btn) return;\n                    const r = btn.getBoundingClientRect();\n                    const flyoutWidth = 320, flyoutHeight = 160, gap = 8;\n                    const vw = window.innerWidth, vh = window.innerHeight;\n                    let x = r.right + gap;\n                    let y = r.top;\n                    if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n                    if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n                    setEnlacePos({\n                        x,\n                        y\n                    });\n                }\n            }[\"MenuOpcionesElemento.useEffect.handle\"];\n            window.addEventListener(\"resize\", handle);\n            window.addEventListener(\"scroll\", handle, true);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", handle);\n                    window.removeEventListener(\"scroll\", handle, true);\n                }\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        mostrarSubmenuEnlace\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!mostrarSubmenuEfectos) {\n                setEfectosReady(false);\n                setEfectosPos({\n                    x: -9999,\n                    y: -9999\n                });\n                return;\n            }\n            const btn = btnEfectosRef.current;\n            if (!btn) return;\n            const rect = btn.getBoundingClientRect();\n            const flyoutWidth = 300;\n            const flyoutHeight = 300;\n            const gap = 8;\n            const vw = window.innerWidth;\n            const vh = window.innerHeight;\n            let x = rect.right + gap;\n            let y = rect.top;\n            if (x + flyoutWidth > vw) x = rect.left - flyoutWidth - gap;\n            if (x < 8) x = 8;\n            if (y + flyoutHeight > vh) y = Math.max(8, rect.bottom - flyoutHeight);\n            setEfectosPos({\n                x,\n                y\n            });\n            setEfectosReady(true);\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        mostrarSubmenuEfectos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!mostrarSubmenuEfectos) return;\n            const handle = {\n                \"MenuOpcionesElemento.useEffect.handle\": ()=>{\n                    const btn = btnEfectosRef.current;\n                    if (!btn) return;\n                    const rect = btn.getBoundingClientRect();\n                    const flyoutWidth = 300;\n                    const flyoutHeight = 300;\n                    const gap = 8;\n                    const vw = window.innerWidth;\n                    const vh = window.innerHeight;\n                    let x = rect.right + gap;\n                    let y = rect.top;\n                    if (x + flyoutWidth > vw) x = rect.left - flyoutWidth - gap;\n                    if (x < 8) x = 8;\n                    if (y + flyoutHeight > vh) y = Math.max(8, rect.bottom - flyoutHeight);\n                    setEfectosPos({\n                        x,\n                        y\n                    });\n                }\n            }[\"MenuOpcionesElemento.useEffect.handle\"];\n            window.addEventListener(\"resize\", handle);\n            window.addEventListener(\"scroll\", handle, true);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", handle);\n                    window.removeEventListener(\"scroll\", handle, true);\n                }\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        mostrarSubmenuEfectos\n    ]);\n    const guardarEnlace = ()=>{\n        const limpio = sanitizeURL(urlInput);\n        if (!limpio) {\n            setUrlError(true);\n            return;\n        }\n        // Guardamos como objeto con target siempre _blank\n        setObjetos((prev)=>prev.map((o)=>{\n                if (o.id !== elementoSeleccionado?.id) return o;\n                return {\n                    ...o,\n                    enlace: {\n                        href: limpio,\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\"\n                    }\n                };\n            }));\n        setMostrarSubmenuEnlace(false);\n        onCerrar();\n    };\n    const quitarEnlace = ()=>{\n        setObjetos((prev)=>prev.map((o)=>{\n                if (o.id !== elementoSeleccionado?.id) return o;\n                const { enlace, ...rest } = o;\n                return rest;\n            }));\n        setMostrarSubmenuEnlace(false);\n        onCerrar();\n    };\n    const actualizarMotionEffect = (effect)=>{\n        const nextEffect = (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_3__.sanitizeMotionEffect)(effect);\n        setObjetos((prev)=>prev.map((item)=>{\n                if (item.id !== elementoSeleccionado?.id) return item;\n                return {\n                    ...item,\n                    motionEffect: nextEffect\n                };\n            }));\n        setMostrarSubmenuCapa(false);\n        setMostrarSubmenuEnlace(false);\n        setMostrarSubmenuEfectos(false);\n        onCerrar();\n    };\n    // 1) Posicionar ANTES del paint para evitar flicker\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!isOpen) {\n                // si está cerrado, reseteamos\n                setReady(false);\n                setPos({\n                    x: -9999,\n                    y: -9999\n                });\n                return;\n            }\n            if (isMobile) {\n                setReady(true);\n                return;\n            }\n            const btn = botonOpcionesRef?.current;\n            if (!btn) return;\n            const r = btn.getBoundingClientRect();\n            const p = calcularPosDesdeRect(r);\n            setPos(p);\n            setReady(true); // ya tenemos posición; mostrar menú\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        isOpen,\n        botonOpcionesRef,\n        isMobile\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!isOpen || !isMobile) {\n                setMobileBottomOffset(8);\n                return;\n            }\n            const updateBottomOffset = {\n                \"MenuOpcionesElemento.useLayoutEffect.updateBottomOffset\": ()=>{\n                    setMobileBottomOffset(calcularOffsetBottomMobile());\n                }\n            }[\"MenuOpcionesElemento.useLayoutEffect.updateBottomOffset\"];\n            updateBottomOffset();\n            window.addEventListener(\"resize\", updateBottomOffset);\n            window.addEventListener(\"orientationchange\", updateBottomOffset);\n            window.addEventListener(\"scroll\", updateBottomOffset, true);\n            return ({\n                \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n                    window.removeEventListener(\"resize\", updateBottomOffset);\n                    window.removeEventListener(\"orientationchange\", updateBottomOffset);\n                    window.removeEventListener(\"scroll\", updateBottomOffset, true);\n                }\n            })[\"MenuOpcionesElemento.useLayoutEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        isOpen,\n        isMobile,\n        calcularOffsetBottomMobile\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"MenuOpcionesElemento.useLayoutEffect\": ()=>{\n            if (!mostrarSubmenuCapa) {\n                setSubmenuReady(false);\n                setSubmenuPos({\n                    x: -9999,\n                    y: -9999\n                });\n                return;\n            }\n            const btn = btnOrdenRef.current;\n            if (!btn) return;\n            const r = btn.getBoundingClientRect();\n            const flyoutWidth = 224; // ~ w-56\n            const flyoutHeight = 180; // estimado\n            const gap = 8;\n            const vw = window.innerWidth;\n            const vh = window.innerHeight;\n            let x = r.right + gap; // por defecto, a la derecha del botón\n            let y = r.top;\n            // Si no entra a la derecha, lo abrimos a la izquierda del panel\n            if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n            // Si se pasa por abajo, lo “clamp” hacia arriba\n            if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n            setSubmenuPos({\n                x,\n                y\n            });\n            setSubmenuReady(true);\n        }\n    }[\"MenuOpcionesElemento.useLayoutEffect\"], [\n        mostrarSubmenuCapa\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!mostrarSubmenuCapa) return;\n            const handle = {\n                \"MenuOpcionesElemento.useEffect.handle\": ()=>{\n                    const btn = btnOrdenRef.current;\n                    if (!btn) return;\n                    const r = btn.getBoundingClientRect();\n                    const gap = 8, flyoutWidth = 224, flyoutHeight = 180;\n                    const vw = window.innerWidth, vh = window.innerHeight;\n                    let x = r.right + gap;\n                    let y = r.top;\n                    if (x + flyoutWidth > vw) x = r.left - flyoutWidth - gap;\n                    if (y + flyoutHeight > vh) y = Math.max(8, r.bottom - flyoutHeight);\n                    setSubmenuPos({\n                        x,\n                        y\n                    });\n                }\n            }[\"MenuOpcionesElemento.useEffect.handle\"];\n            window.addEventListener(\"resize\", handle);\n            window.addEventListener(\"scroll\", handle, true);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", handle);\n                    window.removeEventListener(\"scroll\", handle, true);\n                }\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        mostrarSubmenuCapa\n    ]);\n    // 2) Reposicionar ante scroll/resize mientras esté abierto\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"MenuOpcionesElemento.useEffect\": ()=>{\n            if (!isOpen) return;\n            const handle = {\n                \"MenuOpcionesElemento.useEffect.handle\": ()=>{\n                    const btn = botonOpcionesRef?.current;\n                    if (!btn) return;\n                    const r = btn.getBoundingClientRect();\n                    setPos(calcularPosDesdeRect(r));\n                }\n            }[\"MenuOpcionesElemento.useEffect.handle\"];\n            window.addEventListener(\"resize\", handle);\n            window.addEventListener(\"scroll\", handle, true);\n            return ({\n                \"MenuOpcionesElemento.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", handle);\n                    window.removeEventListener(\"scroll\", handle, true);\n                }\n            })[\"MenuOpcionesElemento.useEffect\"];\n        }\n    }[\"MenuOpcionesElemento.useEffect\"], [\n        isOpen,\n        botonOpcionesRef\n    ]);\n    if (!isOpen) return null;\n    const portalTarget = typeof document !== \"undefined\" ? document.body : null;\n    if (!portalTarget) return null;\n    return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: menuRootRef,\n        className: `fixed z-50 bg-white border shadow-xl p-3 text-sm space-y-1 menu-z-index ${isMobile ? \"rounded-2xl w-auto\" : \"rounded-lg w-64\"}`,\n        style: isMobile ? {\n            left: \"8px\",\n            right: \"8px\",\n            bottom: `calc(${mobileBottomOffset}px + env(safe-area-inset-bottom, 0px))`,\n            top: \"auto\",\n            borderColor: \"#773dbe\",\n            borderWidth: \"1px\",\n            maxHeight: \"70vh\",\n            overflowY: \"auto\",\n            animation: \"fadeInScale 0.15s ease-out\",\n            visibility: ready ? \"visible\" : \"hidden\"\n        } : {\n            left: `${pos.x}px`,\n            top: `${pos.y}px`,\n            borderColor: \"#773dbe\",\n            borderWidth: \"1px\",\n            maxHeight: \"400px\",\n            overflowY: \"auto\",\n            animation: \"fadeInScale 0.15s ease-out\",\n            visibility: ready ? \"visible\" : \"hidden\"\n        },\n        // Evitar que se propague el click al body (click-outside)\n        onMouseDown: (e)=>e.stopPropagation(),\n        onClick: (e)=>e.stopPropagation(),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onCopiar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Copy, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 482,\n                        columnNumber: 17\n                    }, this),\n                    \" Copiar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 475,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onPegar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.ClipboardPaste, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 493,\n                        columnNumber: 17\n                    }, this),\n                    \" Pegar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 486,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onDuplicar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.PlusCircle, {\n                        className: \"w-4 h-4\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 504,\n                        columnNumber: 17\n                    }, this),\n                    \" Duplicar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 497,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        ref: btnEnlaceRef,\n                        onClick: ()=>{\n                            // cerramos el de capa si estaba abierto, para no superponer\n                            setMostrarSubmenuCapa(false);\n                            setMostrarSubmenuEfectos(false);\n                            setMostrarSubmenuEnlace((prev)=>!prev);\n                        },\n                        className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Link2, {\n                                className: \"w-4 h-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 520,\n                                columnNumber: 21\n                            }, this),\n                            \" Enlace\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 510,\n                        columnNumber: 17\n                    }, this),\n                    mostrarSubmenuEnlace && /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: submenuEnlaceRef,\n                        className: \"fixed z-[60] bg-white border rounded shadow-lg p-3 space-y-3 menu-z-index\",\n                        style: {\n                            left: enlacePos.x,\n                            top: enlacePos.y,\n                            width: 320,\n                            visibility: enlaceReady ? \"visible\" : \"hidden\",\n                            borderColor: \"#773dbe\"\n                        },\n                        onMouseDown: (e)=>e.stopPropagation(),\n                        onClick: (e)=>e.stopPropagation(),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-sm font-medium\",\n                                children: \"Agregar enlace\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 539,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"text\",\n                                value: urlInput,\n                                onChange: (e)=>{\n                                    setUrlInput(e.target.value);\n                                    if (urlError) setUrlError(false);\n                                },\n                                onKeyDown: (e)=>{\n                                    if (e.key === \"Enter\") guardarEnlace();\n                                    if (e.key === \"Escape\") setMostrarSubmenuEnlace(false);\n                                },\n                                placeholder: \"https://ejemplo.com o mailto:...\",\n                                className: `w-full px-3 py-2 border rounded outline-none ${urlError ? \"border-red-500\" : \"border-gray-300\"}`\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 541,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-wrap gap-2 text-xs\",\n                                children: [\n                                    \"https://\",\n                                    \"mailto:\",\n                                    \"tel:\",\n                                    \"whatsapp:\"\n                                ].map((pref)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setUrlInput((u)=>u.startsWith(pref) ? u : pref + u),\n                                        className: \"px-2 py-1 bg-gray-100 rounded hover:bg-gray-200\",\n                                        children: pref\n                                    }, pref, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 560,\n                                        columnNumber: 37\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 558,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-1 sm:grid-cols-2 gap-2 items-center mt-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: quitarEnlace,\n                                        className: \"inline-flex items-center gap-2 px-2.5 py-1.5 text-[13px] text-red-600 hover:bg-red-50 rounded whitespace-nowrap\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.X, {\n                                                className: \"w-4 h-4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                                lineNumber: 577,\n                                                columnNumber: 37\n                                            }, this),\n                                            \"Quitar enlace\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 573,\n                                        columnNumber: 33\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center justify-end gap-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: ()=>setMostrarSubmenuEnlace(false),\n                                                className: \"px-2.5 py-1.5 text-[13px] rounded hover:bg-gray-100 whitespace-nowrap\",\n                                                children: \"Cancelar\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                                lineNumber: 583,\n                                                columnNumber: 37\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: guardarEnlace,\n                                                className: \"px-2.5 py-1.5 text-[13px] bg-[#773dbe] text-white rounded hover:opacity-90 whitespace-nowrap\",\n                                                children: \"Guardar\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                                lineNumber: 589,\n                                                columnNumber: 37\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 582,\n                                        columnNumber: 33\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 571,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-[11px] text-gray-500\",\n                                children: \"Se abrir\\xe1 siempre en una pesta\\xf1a nueva.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 599,\n                                columnNumber: 29\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 526,\n                        columnNumber: 25\n                    }, this), document.body)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 509,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        ref: btnEfectosRef,\n                        onClick: ()=>{\n                            setMostrarSubmenuCapa(false);\n                            setMostrarSubmenuEnlace(false);\n                            setMostrarSubmenuEfectos((prev)=>!prev);\n                        },\n                        className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"inline-flex h-4 w-4 items-center justify-center text-[11px] font-semibold\",\n                                children: \"Fx\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 620,\n                                columnNumber: 21\n                            }, this),\n                            \"Efectos\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 611,\n                        columnNumber: 17\n                    }, this),\n                    mostrarSubmenuEfectos && /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: submenuEfectosRef,\n                        className: \"fixed z-[60] bg-white border rounded shadow-lg p-2 space-y-1 menu-z-index\",\n                        style: {\n                            left: efectosPos.x,\n                            top: efectosPos.y,\n                            width: 300,\n                            maxHeight: 320,\n                            overflowY: \"auto\",\n                            visibility: efectosReady ? \"visible\" : \"hidden\",\n                            borderColor: \"#773dbe\"\n                        },\n                        onMouseDown: (e)=>e.stopPropagation(),\n                        onClick: (e)=>e.stopPropagation(),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"px-2 pb-1 text-xs font-semibold text-zinc-700\",\n                                children: \"Efectos del elemento\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 641,\n                                columnNumber: 29\n                            }, this),\n                            [\n                                {\n                                    value: \"none\",\n                                    label: \"Sin efecto\"\n                                },\n                                {\n                                    value: \"reveal\",\n                                    label: \"Aparicion al hacer scroll\"\n                                },\n                                {\n                                    value: \"draw\",\n                                    label: \"Dibujar linea\"\n                                },\n                                {\n                                    value: \"zoom\",\n                                    label: \"Zoom sutil\"\n                                },\n                                {\n                                    value: \"hover\",\n                                    label: \"Interaccion al tocar\"\n                                },\n                                {\n                                    value: \"pulse\",\n                                    label: \"Pulso suave\"\n                                }\n                            ].filter((option)=>allowedMotionEffects.includes(option.value)).map((option)=>{\n                                const isActive = currentMotionEffect === option.value;\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>actualizarMotionEffect(option.value),\n                                    className: `flex w-full items-center justify-between gap-2 rounded px-3 py-2 text-left text-sm transition ${isActive ? \"bg-purple-50 text-purple-800\" : \"hover:bg-gray-100\"}`,\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: option.label\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                            lineNumber: 665,\n                                            columnNumber: 45\n                                        }, this),\n                                        isActive ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs font-semibold\",\n                                            children: \"Activo\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                            lineNumber: 666,\n                                            columnNumber: 57\n                                        }, this) : null\n                                    ]\n                                }, option.value, true, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                    lineNumber: 657,\n                                    columnNumber: 41\n                                }, this);\n                            })\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 626,\n                        columnNumber: 25\n                    }, this), document.body)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 610,\n                columnNumber: 13\n            }, this),\n            esImagen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    reemplazarFondo({\n                        elementoImagen: elementoSeleccionado,\n                        secciones,\n                        objetos,\n                        setSecciones,\n                        setObjetos,\n                        setElementosSeleccionados,\n                        setMostrarPanelZ: onCerrar\n                    });\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-4 h-4 bg-gradient-to-br from-blue-400 to-purple-500 rounded\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 692,\n                        columnNumber: 21\n                    }, this),\n                    \"Usar como fondo\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 678,\n                columnNumber: 17\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>{\n                    onEliminar();\n                    onCerrar();\n                },\n                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Trash2, {\n                        className: \"w-4 h-4 text-red-500\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 705,\n                        columnNumber: 17\n                    }, this),\n                    \" Eliminar\"\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 698,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        ref: btnOrdenRef,\n                        onClick: ()=>{\n                            setMostrarSubmenuEnlace(false);\n                            setMostrarSubmenuEfectos(false);\n                            setMostrarSubmenuCapa((prev)=>!prev);\n                        },\n                        className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Layers, {\n                                className: \"w-4 h-4\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 719,\n                                columnNumber: 21\n                            }, this),\n                            \" Orden de capa\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 710,\n                        columnNumber: 17\n                    }, this),\n                    mostrarSubmenuCapa && /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: submenuRef,\n                        className: \"fixed z-[60] bg-white border rounded shadow-lg p-2 space-y-1 menu-z-index\",\n                        style: {\n                            left: submenuPos.x,\n                            top: submenuPos.y,\n                            width: 224,\n                            visibility: submenuReady ? \"visible\" : \"hidden\"\n                        },\n                        onMouseDown: (e)=>e.stopPropagation(),\n                        onClick: (e)=>e.stopPropagation(),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"al-frente\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.ArrowUp, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 745,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Traer al frente\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 737,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"subir\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.MoveUp, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 756,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Subir\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 748,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"bajar\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.MoveDown, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 767,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Bajar\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 759,\n                                columnNumber: 29\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    moverElemento(\"al-fondo\");\n                                    setMostrarSubmenuCapa(false);\n                                    onCerrar();\n                                },\n                                className: \"flex items-center gap-2 w-full text-left px-3 py-2 rounded hover:bg-gray-100 transition\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_ClipboardPaste_Copy_Layers_Link2_MoveDown_MoveUp_PlusCircle_Trash2_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.ArrowDown, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                        lineNumber: 778,\n                                        columnNumber: 33\n                                    }, this),\n                                    \" Enviar al fondo\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                                lineNumber: 770,\n                                columnNumber: 29\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                        lineNumber: 725,\n                        columnNumber: 25\n                    }, this), document.body)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n                lineNumber: 709,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\MenuOpcionesElemento.jsx\",\n        lineNumber: 442,\n        columnNumber: 9\n    }, this), portalTarget);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL01lbnVPcGNpb25lc0VsZW1lbnRvLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSwwREFBMEQ7O0FBQytCO0FBQ2hEO0FBSW5CO0FBSVU7QUFFaEMsZ0NBQWdDO0FBQ2hDLFNBQVNvQixZQUFZQyxHQUFHO0lBQ3BCLElBQUksQ0FBQ0EsS0FBSyxPQUFPO0lBQ2pCLE1BQU1DLElBQUlDLE9BQU9GLEtBQUtHLElBQUk7SUFDMUIsTUFBTUMsS0FBSyx5Q0FBeUNDLElBQUksQ0FBQ0o7SUFDekQsSUFBSUcsSUFBSSxPQUFPSDtJQUNmLDhCQUE4QjtJQUM5QixJQUFJLCtCQUErQkksSUFBSSxDQUFDSixJQUFJLE9BQU8sQ0FBQyxRQUFRLEVBQUVBLEdBQUc7SUFDakUsSUFBSTtRQUNBLE1BQU1LLElBQUksSUFBSUMsSUFBSU47UUFDbEIsT0FBT0ssRUFBRUUsUUFBUTtJQUNyQixFQUFFLE9BQU07UUFDSixPQUFPO0lBQ1g7QUFDSjtBQUdBOzs7O0NBSUMsR0FDYyxTQUFTQyxxQkFBcUIsRUFDekNDLE1BQU0sRUFDTkMsZ0JBQWdCLEVBQ2hCQyxvQkFBb0IsRUFDcEJDLFFBQVEsRUFDUkMsT0FBTyxFQUNQQyxVQUFVLEVBQ1ZDLFVBQVUsRUFDVkMsYUFBYSxFQUNiQyxRQUFRLEVBQ1IseUJBQXlCO0FBQ3pCQyxlQUFlLEVBQ2ZDLFNBQVMsRUFDVEMsT0FBTyxFQUNQQyxZQUFZLEVBQ1pDLFVBQVUsRUFDVkMseUJBQXlCLEVBQzVCO0lBQ0csMkNBQTJDO0lBQzNDLE1BQU0sQ0FBQ0Msb0JBQW9CQyxzQkFBc0IsR0FBRzNDLCtDQUFRQSxDQUFDO0lBRTdELDhCQUE4QjtJQUM5QixNQUFNLENBQUM0QyxLQUFLQyxPQUFPLEdBQUc3QywrQ0FBUUEsQ0FBQztRQUFFOEMsR0FBRyxDQUFDO1FBQU1DLEdBQUcsQ0FBQztJQUFLO0lBQ3BELCtEQUErRDtJQUMvRCxNQUFNLENBQUNDLE9BQU9DLFNBQVMsR0FB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ZW50by5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxNZW51T3BjaW9uZXNFbGVtZW50by5qc3hcclxuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZUxheW91dEVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgY3JlYXRlUG9ydGFsIH0gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IHtcbiAgICBDb3B5LCBUcmFzaDIsIExheWVycywgQXJyb3dEb3duLCBBcnJvd1VwLCBNb3ZlVXAsIE1vdmVEb3duLCBQbHVzQ2lyY2xlLCBDbGlwYm9hcmRQYXN0ZSxcbiAgICBMaW5rMiwgWFxufSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5pbXBvcnQge1xuICAgIGdldEFsbG93ZWRNb3Rpb25FZmZlY3RzRm9yRWxlbWVudCxcbiAgICBzYW5pdGl6ZU1vdGlvbkVmZmVjdCxcbn0gZnJvbSBcIkAvZG9tYWluL21vdGlvbkVmZmVjdHNcIjtcblxyXG4vLyBOb3JtYWxpemEgeSB2YWxpZGEgVVJMIGLDoXNpY2FcclxuZnVuY3Rpb24gc2FuaXRpemVVUkwodXJsKSB7XHJcbiAgICBpZiAoIXVybCkgcmV0dXJuIFwiXCI7XHJcbiAgICBjb25zdCB0ID0gU3RyaW5nKHVybCkudHJpbSgpO1xyXG4gICAgY29uc3Qgb2sgPSAvXihodHRwcz86XFwvXFwvfG1haWx0bzp8dGVsOnx3aGF0c2FwcDopL2kudGVzdCh0KTtcclxuICAgIGlmIChvaykgcmV0dXJuIHQ7XHJcbiAgICAvLyBkb21pbmlvIHNpbXBsZSAtPiBjb21wbGV0YXJcclxuICAgIGlmICgvXltcXHcuLV0rXFwuW2Etel17Mix9KFxcLy4qKT8kL2kudGVzdCh0KSkgcmV0dXJuIGBodHRwczovLyR7dH1gO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1ID0gbmV3IFVSTCh0KTtcclxuICAgICAgICByZXR1cm4gdS50b1N0cmluZygpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTWVuw7ogY29udGV4dHVhbCBwYXJhIHVuIGVsZW1lbnRvIHNlbGVjY2lvbmFkbyBlbiBlbCBjYW52YXMuXHJcbiAqIC0gU2UgcG9zaWNpb25hIHBlZ2FkbyBhbCBib3TDs24g4pqZ77iPIChib3Rvbk9wY2lvbmVzUmVmKVxyXG4gKiAtIEV2aXRhIGVsIFwiZmxhc2hcIiBpbmljaWFsIHVzYW5kbyB1c2VMYXlvdXRFZmZlY3QgKyB2aXNpYmlsaXR5IGhhc3RhIHRlbmVyIHBvc2ljacOzbiBsaXN0YVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWVudU9wY2lvbmVzRWxlbWVudG8oe1xyXG4gICAgaXNPcGVuLFxyXG4gICAgYm90b25PcGNpb25lc1JlZiwgICAgICAgICAgICAvLyByZWYgYWwgYm90w7NuIOKame+4j1xyXG4gICAgZWxlbWVudG9TZWxlY2Npb25hZG8sICAgICAgICAvLyBvYmpldG8gYWN0dWFsXHJcbiAgICBvbkNvcGlhcixcclxuICAgIG9uUGVnYXIsXHJcbiAgICBvbkR1cGxpY2FyLFxyXG4gICAgb25FbGltaW5hcixcclxuICAgIG1vdmVyRWxlbWVudG8sICAgICAgICAgICAgICAgLy8gKFwiYWwtZnJlbnRlXCIgfCBcImFsLWZvbmRvXCIgfCBcInN1YmlyXCIgfCBcImJhamFyXCIpXHJcbiAgICBvbkNlcnJhciwgICAgICAgICAgICAgICAgICAgIC8vIGNpZXJyYSBlbCBtZW7DuiBlbiBlbCBwYWRyZSAoc2V0TW9zdHJhclBhbmVsWihmYWxzZSkpXHJcbiAgICAvLyBQYXJhIFwiVXNhciBjb21vIGZvbmRvXCJcclxuICAgIHJlZW1wbGF6YXJGb25kbyxcclxuICAgIHNlY2Npb25lcyxcclxuICAgIG9iamV0b3MsXHJcbiAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICBzZXRPYmpldG9zLFxyXG4gICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxufSkge1xyXG4gICAgLy8gRXN0YWRvIGxvY2FsIGRlbCBzdWJtZW51IFwiT3JkZW4gZGUgY2FwYVwiXHJcbiAgICBjb25zdCBbbW9zdHJhclN1Ym1lbnVDYXBhLCBzZXRNb3N0cmFyU3VibWVudUNhcGFdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAgIC8vIFBvc2ljacOzbiBjYWxjdWxhZGEgZGVsIG1lbsO6XHJcbiAgICBjb25zdCBbcG9zLCBzZXRQb3NdID0gdXNlU3RhdGUoeyB4OiAtOTk5OSwgeTogLTk5OTkgfSk7XHJcbiAgICAvLyBGbGFnIHBhcmEgbW9zdHJhciBlbCBtZW7DuiBzw7NsbyBjdWFuZG8gdGVuZW1vcyBjb29yZHMgdsOhbGlkYXNcclxuICAgIGNvbnN0IFtyZWFkeSwgc2V0UmVhZHldID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAgIC8vIFJlZiBkZWwgcGFuZWwgcHJpbmNpcGFsIChwYXJhIGNsaWNrLW91dHNpZGUgZGVsIHBhZHJlKVxyXG4gICAgY29uc3QgbWVudVJvb3RSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gICAgLy8gUmVmIGRlbCBib3TDs24gXCJPcmRlbiBkZSBjYXBhXCIgKGFuY2xhIHBhcmEgcG9zaWNpb25hciBlbCBmbHlvdXQpXHJcbiAgICBjb25zdCBidG5PcmRlblJlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgICAvLyBSZWYgZGVsIGZseW91dCAocG9yIHNpIHF1ZXLDqXMgY2xpY2stb3V0c2lkZSBlc3BlY8OtZmljbyBkZWwgZmx5b3V0KVxyXG4gICAgY29uc3Qgc3VibWVudVJlZiA9IHVzZVJlZihudWxsKTtcclxuXHJcbiAgICAvLyBQb3NpY2nDs24gZGVsIGZseW91dFxyXG4gICAgY29uc3QgW3N1Ym1lbnVQb3MsIHNldFN1Ym1lbnVQb3NdID0gdXNlU3RhdGUoeyB4OiAtOTk5OSwgeTogLTk5OTkgfSk7XG4gICAgY29uc3QgW3N1Ym1lbnVSZWFkeSwgc2V0U3VibWVudVJlYWR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbaXNNb2JpbGUsIHNldElzTW9iaWxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbbW9iaWxlQm90dG9tT2Zmc2V0LCBzZXRNb2JpbGVCb3R0b21PZmZzZXRdID0gdXNlU3RhdGUoOCk7XG5cclxuXHJcbiAgICBjb25zdCBlc0ltYWdlbiA9IGVsZW1lbnRvU2VsZWNjaW9uYWRvPy50aXBvID09PSBcImltYWdlblwiO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcbiAgICAgICAgY29uc3QgbXEgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDc2OHB4KVwiKTtcbiAgICAgICAgY29uc3QgdXBkYXRlID0gKCkgPT4gc2V0SXNNb2JpbGUobXEubWF0Y2hlcyk7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICBtcS5hZGRFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IG1xLnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGNhbGN1bGFyT2Zmc2V0Qm90dG9tTW9iaWxlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIDg7XG5cbiAgICAgICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSBNYXRoLm1heCgwLCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCk7XG4gICAgICAgIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYXNpZGVcIik7XG4gICAgICAgIGlmICghc2lkZWJhciB8fCB0eXBlb2Ygc2lkZWJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIDg7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWN0ID0gc2lkZWJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3Qgb3ZlcmxhcHNCb3R0b20gPSByZWN0LmJvdHRvbSA+PSB2aWV3cG9ydEhlaWdodCAtIDE7XG4gICAgICAgIGlmICghb3ZlcmxhcHNCb3R0b20pIHJldHVybiA4O1xuXG4gICAgICAgIGNvbnN0IG9ic3RydWN0aW9uSGVpZ2h0ID0gTWF0aC5tYXgoMCwgdmlld3BvcnRIZWlnaHQgLSByZWN0LnRvcCk7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCg4LCBNYXRoLmNlaWwob2JzdHJ1Y3Rpb25IZWlnaHQgKyA4KSk7XG4gICAgfSwgW10pO1xuXHJcbiAgICAvLyAtLS0gSGVscGVyOiBjYWxjdWxhIGxhIHBvc2ljacOzbiBmaW5hbCBkZWwgbWVuw7ogZGVzZGUgZWwgcmVjdCBkZWwgYm90w7NuIOKame+4j1xyXG4gICAgY29uc3QgY2FsY3VsYXJQb3NEZXNkZVJlY3QgPSAocikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1lbnVXaWR0aCA9IDI1NjsgLy8gdy02NFxyXG4gICAgICAgIGNvbnN0IG1lbnVIZWlnaHQgPSAzMDA7IC8vIGVzdGltYWNpw7NuXHJcbiAgICAgICAgY29uc3QgdncgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjb25zdCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IHggPSByLnJpZ2h0ICsgODsgLy8gcG9yIGRlZmVjdG8gYSBsYSBkZXJlY2hhIGRlbCBib3TDs25cclxuICAgICAgICBsZXQgeSA9IHIudG9wO1xyXG5cclxuICAgICAgICAvLyBTaSBzZSBzYWxlIGEgbGEgZGVyZWNoYSwgbG8gcG9uZW1vcyBhIGxhIGl6cXVpZXJkYSBkZWwgYm90w7NuXHJcbiAgICAgICAgaWYgKHggKyBtZW51V2lkdGggPiB2dykgeCA9IHIubGVmdCAtIG1lbnVXaWR0aCAtIDg7XHJcblxyXG4gICAgICAgIC8vIFNpIHNlIHNhbGUgcG9yIGFiYWpvLCBsbyBhY29tb2RhbW9zIGhhY2lhIGFycmliYVxyXG4gICAgICAgIGlmICh5ICsgbWVudUhlaWdodCA+IHZoKSB5ID0gTWF0aC5tYXgoOCwgci5ib3R0b20gLSBtZW51SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgeCwgeSB9O1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gLS0tIFN1Ym1lbsO6IEVubGFjZSAtLS1cclxuICAgIGNvbnN0IFttb3N0cmFyU3VibWVudUVubGFjZSwgc2V0TW9zdHJhclN1Ym1lbnVFbmxhY2VdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gICAgY29uc3QgYnRuRW5sYWNlUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gICAgY29uc3Qgc3VibWVudUVubGFjZVJlZiA9IHVzZVJlZihudWxsKTtcclxuICAgIGNvbnN0IFtlbmxhY2VQb3MsIHNldEVubGFjZVBvc10gPSB1c2VTdGF0ZSh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcbiAgICBjb25zdCBbZW5sYWNlUmVhZHksIHNldEVubGFjZVJlYWR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbdXJsSW5wdXQsIHNldFVybElucHV0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICAgIGNvbnN0IFt1cmxFcnJvciwgc2V0VXJsRXJyb3JdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFttb3N0cmFyU3VibWVudUVmZWN0b3MsIHNldE1vc3RyYXJTdWJtZW51RWZlY3Rvc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgYnRuRWZlY3Rvc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCBzdWJtZW51RWZlY3Rvc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCBbZWZlY3Rvc1Bvcywgc2V0RWZlY3Rvc1Bvc10gPSB1c2VTdGF0ZSh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcbiAgICBjb25zdCBbZWZlY3Rvc1JlYWR5LCBzZXRFZmVjdG9zUmVhZHldID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gICAgY29uc3QgYWxsb3dlZE1vdGlvbkVmZmVjdHMgPSBnZXRBbGxvd2VkTW90aW9uRWZmZWN0c0ZvckVsZW1lbnQoZWxlbWVudG9TZWxlY2Npb25hZG8pO1xuICAgIGNvbnN0IGN1cnJlbnRNb3Rpb25FZmZlY3QgPSBzYW5pdGl6ZU1vdGlvbkVmZmVjdChlbGVtZW50b1NlbGVjY2lvbmFkbz8ubW90aW9uRWZmZWN0KTtcblxyXG4gICAgLy8gQWwgYWJyaXIgZWwgbWVuw7osIHByZS1jYXJnYXIgbGEgVVJMIGFjdHVhbCBkZWwgZWxlbWVudG8gKHNpIHRpZW5lKVxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc09wZW4gfHwgIWVsZW1lbnRvU2VsZWNjaW9uYWRvKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGFjdHVhbCA9IGVsZW1lbnRvU2VsZWNjaW9uYWRvPy5lbmxhY2U/LmhyZWYgfHwgZWxlbWVudG9TZWxlY2Npb25hZG8/LmVubGFjZSB8fCBcIlwiO1xuICAgICAgICBzZXRVcmxJbnB1dChhY3R1YWwgfHwgXCJcIik7XG4gICAgICAgIHNldFVybEVycm9yKGZhbHNlKTtcbiAgICB9LCBbaXNPcGVuLCBlbGVtZW50b1NlbGVjY2lvbmFkb10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGlzT3BlbikgcmV0dXJuO1xuICAgICAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoZmFsc2UpO1xuICAgICAgICBzZXRNb3N0cmFyU3VibWVudUVubGFjZShmYWxzZSk7XG4gICAgICAgIHNldE1vc3RyYXJTdWJtZW51RWZlY3RvcyhmYWxzZSk7XG4gICAgfSwgW2lzT3Blbl0pO1xuXHJcbiAgICAvLyBQb3NpY2lvbmFyIGVsIGZseW91dCBkZSBcIkVubGFjZVwiXHJcbiAgICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghbW9zdHJhclN1Ym1lbnVFbmxhY2UpIHtcclxuICAgICAgICAgICAgc2V0RW5sYWNlUmVhZHkoZmFsc2UpO1xyXG4gICAgICAgICAgICBzZXRFbmxhY2VQb3MoeyB4OiAtOTk5OSwgeTogLTk5OTkgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnRuID0gYnRuRW5sYWNlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKCFidG4pIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgciA9IGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCBmbHlvdXRXaWR0aCA9IDMyMDsgIC8vIHVuIHBvY28gbcOhcyBhbmNobyBwYXJhIGVsIGlucHV0XHJcbiAgICAgICAgY29uc3QgZmx5b3V0SGVpZ2h0ID0gMTYwOyAvLyBlc3RpbWFkb1xyXG4gICAgICAgIGNvbnN0IGdhcCA9IDg7XHJcbiAgICAgICAgY29uc3QgdncgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjb25zdCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IHggPSByLnJpZ2h0ICsgZ2FwO1xyXG4gICAgICAgIGxldCB5ID0gci50b3A7XHJcblxyXG4gICAgICAgIGlmICh4ICsgZmx5b3V0V2lkdGggPiB2dykgeCA9IHIubGVmdCAtIGZseW91dFdpZHRoIC0gZ2FwO1xyXG4gICAgICAgIGlmICh5ICsgZmx5b3V0SGVpZ2h0ID4gdmgpIHkgPSBNYXRoLm1heCg4LCByLmJvdHRvbSAtIGZseW91dEhlaWdodCk7XHJcblxyXG4gICAgICAgIHNldEVubGFjZVBvcyh7IHgsIHkgfSk7XHJcbiAgICAgICAgc2V0RW5sYWNlUmVhZHkodHJ1ZSk7XHJcbiAgICB9LCBbbW9zdHJhclN1Ym1lbnVFbmxhY2VdKTtcclxuXHJcbiAgICAvLyBSZXBvc2ljaW9uYXIgYW50ZSBzY3JvbGwvcmVzaXplIGNvbiBlbCBmbHlvdXQgYWJpZXJ0b1xyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFtb3N0cmFyU3VibWVudUVubGFjZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBoYW5kbGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidG4gPSBidG5FbmxhY2VSZWYuY3VycmVudDtcbiAgICAgICAgICAgIGlmICghYnRuKSByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHIgPSBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZseW91dFdpZHRoID0gMzIwLCBmbHlvdXRIZWlnaHQgPSAxNjAsIGdhcCA9IDg7XHJcbiAgICAgICAgICAgIGNvbnN0IHZ3ID0gd2luZG93LmlubmVyV2lkdGgsIHZoID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgbGV0IHggPSByLnJpZ2h0ICsgZ2FwO1xyXG4gICAgICAgICAgICBsZXQgeSA9IHIudG9wO1xyXG4gICAgICAgICAgICBpZiAoeCArIGZseW91dFdpZHRoID4gdncpIHggPSByLmxlZnQgLSBmbHlvdXRXaWR0aCAtIGdhcDtcclxuICAgICAgICAgICAgaWYgKHkgKyBmbHlvdXRIZWlnaHQgPiB2aCkgeSA9IE1hdGgubWF4KDgsIHIuYm90dG9tIC0gZmx5b3V0SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIHNldEVubGFjZVBvcyh7IHgsIHkgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGUpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZSwgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbbW9zdHJhclN1Ym1lbnVFbmxhY2VdKTtcblxuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghbW9zdHJhclN1Ym1lbnVFZmVjdG9zKSB7XG4gICAgICAgICAgICBzZXRFZmVjdG9zUmVhZHkoZmFsc2UpO1xuICAgICAgICAgICAgc2V0RWZlY3Rvc1Bvcyh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ0biA9IGJ0bkVmZWN0b3NSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKCFidG4pIHJldHVybjtcblxuICAgICAgICBjb25zdCByZWN0ID0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBmbHlvdXRXaWR0aCA9IDMwMDtcbiAgICAgICAgY29uc3QgZmx5b3V0SGVpZ2h0ID0gMzAwO1xuICAgICAgICBjb25zdCBnYXAgPSA4O1xuICAgICAgICBjb25zdCB2dyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICBjb25zdCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgICAgICBsZXQgeCA9IHJlY3QucmlnaHQgKyBnYXA7XG4gICAgICAgIGxldCB5ID0gcmVjdC50b3A7XG4gICAgICAgIGlmICh4ICsgZmx5b3V0V2lkdGggPiB2dykgeCA9IHJlY3QubGVmdCAtIGZseW91dFdpZHRoIC0gZ2FwO1xuICAgICAgICBpZiAoeCA8IDgpIHggPSA4O1xuICAgICAgICBpZiAoeSArIGZseW91dEhlaWdodCA+IHZoKSB5ID0gTWF0aC5tYXgoOCwgcmVjdC5ib3R0b20gLSBmbHlvdXRIZWlnaHQpO1xuXG4gICAgICAgIHNldEVmZWN0b3NQb3MoeyB4LCB5IH0pO1xuICAgICAgICBzZXRFZmVjdG9zUmVhZHkodHJ1ZSk7XG4gICAgfSwgW21vc3RyYXJTdWJtZW51RWZlY3Rvc10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFtb3N0cmFyU3VibWVudUVmZWN0b3MpIHJldHVybjtcblxuICAgICAgICBjb25zdCBoYW5kbGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidG4gPSBidG5FZmVjdG9zUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoIWJ0bikgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCByZWN0ID0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgZmx5b3V0V2lkdGggPSAzMDA7XG4gICAgICAgICAgICBjb25zdCBmbHlvdXRIZWlnaHQgPSAzMDA7XG4gICAgICAgICAgICBjb25zdCBnYXAgPSA4O1xuICAgICAgICAgICAgY29uc3QgdncgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgIGNvbnN0IHZoID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgICAgICBsZXQgeCA9IHJlY3QucmlnaHQgKyBnYXA7XG4gICAgICAgICAgICBsZXQgeSA9IHJlY3QudG9wO1xuICAgICAgICAgICAgaWYgKHggKyBmbHlvdXRXaWR0aCA+IHZ3KSB4ID0gcmVjdC5sZWZ0IC0gZmx5b3V0V2lkdGggLSBnYXA7XG4gICAgICAgICAgICBpZiAoeCA8IDgpIHggPSA4O1xuICAgICAgICAgICAgaWYgKHkgKyBmbHlvdXRIZWlnaHQgPiB2aCkgeSA9IE1hdGgubWF4KDgsIHJlY3QuYm90dG9tIC0gZmx5b3V0SGVpZ2h0KTtcblxuICAgICAgICAgICAgc2V0RWZlY3Rvc1Bvcyh7IHgsIHkgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGUsIHRydWUpO1xuICAgICAgICB9O1xuICAgIH0sIFttb3N0cmFyU3VibWVudUVmZWN0b3NdKTtcblxyXG4gICAgY29uc3QgZ3VhcmRhckVubGFjZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBsaW1waW8gPSBzYW5pdGl6ZVVSTCh1cmxJbnB1dCk7XHJcbiAgICAgICAgaWYgKCFsaW1waW8pIHtcclxuICAgICAgICAgICAgc2V0VXJsRXJyb3IodHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gR3VhcmRhbW9zIGNvbW8gb2JqZXRvIGNvbiB0YXJnZXQgc2llbXByZSBfYmxhbmtcclxuICAgICAgICBzZXRPYmpldG9zKHByZXYgPT5cclxuICAgICAgICAgICAgcHJldi5tYXAobyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoby5pZCAhPT0gZWxlbWVudG9TZWxlY2Npb25hZG8/LmlkKSByZXR1cm4gbztcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4ubyxcclxuICAgICAgICAgICAgICAgICAgICBlbmxhY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogbGltcGlvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiX2JsYW5rXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbDogXCJub29wZW5lciBub3JlZmVycmVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBzZXRNb3N0cmFyU3VibWVudUVubGFjZShmYWxzZSk7XHJcbiAgICAgICAgb25DZXJyYXIoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcXVpdGFyRW5sYWNlID0gKCkgPT4ge1xuICAgICAgICBzZXRPYmpldG9zKHByZXYgPT5cbiAgICAgICAgICAgIHByZXYubWFwKG8gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChvLmlkICE9PSBlbGVtZW50b1NlbGVjY2lvbmFkbz8uaWQpIHJldHVybiBvO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZW5sYWNlLCAuLi5yZXN0IH0gPSBvO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3Q7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBzZXRNb3N0cmFyU3VibWVudUVubGFjZShmYWxzZSk7XG4gICAgICAgIG9uQ2VycmFyKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGFjdHVhbGl6YXJNb3Rpb25FZmZlY3QgPSAoZWZmZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHRFZmZlY3QgPSBzYW5pdGl6ZU1vdGlvbkVmZmVjdChlZmZlY3QpO1xuICAgICAgICBzZXRPYmpldG9zKChwcmV2KSA9PlxuICAgICAgICAgICAgcHJldi5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCAhPT0gZWxlbWVudG9TZWxlY2Npb25hZG8/LmlkKSByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5pdGVtLCBtb3Rpb25FZmZlY3Q6IG5leHRFZmZlY3QgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVDYXBhKGZhbHNlKTtcbiAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVFbmxhY2UoZmFsc2UpO1xuICAgICAgICBzZXRNb3N0cmFyU3VibWVudUVmZWN0b3MoZmFsc2UpO1xuICAgICAgICBvbkNlcnJhcigpO1xuICAgIH07XG5cclxuXHJcblxyXG4gICAgLy8gMSkgUG9zaWNpb25hciBBTlRFUyBkZWwgcGFpbnQgcGFyYSBldml0YXIgZmxpY2tlclxyXG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc09wZW4pIHtcbiAgICAgICAgICAgIC8vIHNpIGVzdMOhIGNlcnJhZG8sIHJlc2V0ZWFtb3NcbiAgICAgICAgICAgIHNldFJlYWR5KGZhbHNlKTtcbiAgICAgICAgICAgIHNldFBvcyh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgICAgIHNldFJlYWR5KHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ0biA9IGJvdG9uT3BjaW9uZXNSZWY/LmN1cnJlbnQ7XG4gICAgICAgIGlmICghYnRuKSByZXR1cm47XG5cclxuICAgICAgICBjb25zdCByID0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGNvbnN0IHAgPSBjYWxjdWxhclBvc0Rlc2RlUmVjdChyKTtcclxuICAgICAgICBzZXRQb3MocCk7XHJcbiAgICAgICAgc2V0UmVhZHkodHJ1ZSk7IC8vIHlhIHRlbmVtb3MgcG9zaWNpw7NuOyBtb3N0cmFyIG1lbsO6XHJcbiAgICB9LCBbaXNPcGVuLCBib3Rvbk9wY2lvbmVzUmVmLCBpc01vYmlsZV0pO1xuXG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFpc09wZW4gfHwgIWlzTW9iaWxlKSB7XG4gICAgICAgICAgICBzZXRNb2JpbGVCb3R0b21PZmZzZXQoOCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1cGRhdGVCb3R0b21PZmZzZXQgPSAoKSA9PiB7XG4gICAgICAgICAgICBzZXRNb2JpbGVCb3R0b21PZmZzZXQoY2FsY3VsYXJPZmZzZXRCb3R0b21Nb2JpbGUoKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdXBkYXRlQm90dG9tT2Zmc2V0KCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUJvdHRvbU9mZnNldCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgdXBkYXRlQm90dG9tT2Zmc2V0KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdXBkYXRlQm90dG9tT2Zmc2V0LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHVwZGF0ZUJvdHRvbU9mZnNldCk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIHVwZGF0ZUJvdHRvbU9mZnNldCk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB1cGRhdGVCb3R0b21PZmZzZXQsIHRydWUpO1xuICAgICAgICB9O1xuICAgIH0sIFtpc09wZW4sIGlzTW9iaWxlLCBjYWxjdWxhck9mZnNldEJvdHRvbU1vYmlsZV0pO1xuXG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFtb3N0cmFyU3VibWVudUNhcGEpIHtcclxuICAgICAgICAgICAgc2V0U3VibWVudVJlYWR5KGZhbHNlKTtcclxuICAgICAgICAgICAgc2V0U3VibWVudVBvcyh7IHg6IC05OTk5LCB5OiAtOTk5OSB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBidG4gPSBidG5PcmRlblJlZi5jdXJyZW50O1xyXG4gICAgICAgIGlmICghYnRuKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHIgPSBidG4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgZmx5b3V0V2lkdGggPSAyMjQ7ICAgLy8gfiB3LTU2XHJcbiAgICAgICAgY29uc3QgZmx5b3V0SGVpZ2h0ID0gMTgwOyAgLy8gZXN0aW1hZG9cclxuICAgICAgICBjb25zdCBnYXAgPSA4O1xyXG4gICAgICAgIGNvbnN0IHZ3ID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgY29uc3QgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIGxldCB4ID0gci5yaWdodCArIGdhcDsgICAgIC8vIHBvciBkZWZlY3RvLCBhIGxhIGRlcmVjaGEgZGVsIGJvdMOzblxyXG4gICAgICAgIGxldCB5ID0gci50b3A7XHJcblxyXG4gICAgICAgIC8vIFNpIG5vIGVudHJhIGEgbGEgZGVyZWNoYSwgbG8gYWJyaW1vcyBhIGxhIGl6cXVpZXJkYSBkZWwgcGFuZWxcclxuICAgICAgICBpZiAoeCArIGZseW91dFdpZHRoID4gdncpIHggPSByLmxlZnQgLSBmbHlvdXRXaWR0aCAtIGdhcDtcclxuXHJcbiAgICAgICAgLy8gU2kgc2UgcGFzYSBwb3IgYWJham8sIGxvIOKAnGNsYW1w4oCdIGhhY2lhIGFycmliYVxyXG4gICAgICAgIGlmICh5ICsgZmx5b3V0SGVpZ2h0ID4gdmgpIHkgPSBNYXRoLm1heCg4LCByLmJvdHRvbSAtIGZseW91dEhlaWdodCk7XHJcblxyXG4gICAgICAgIHNldFN1Ym1lbnVQb3MoeyB4LCB5IH0pO1xyXG4gICAgICAgIHNldFN1Ym1lbnVSZWFkeSh0cnVlKTtcclxuICAgIH0sIFttb3N0cmFyU3VibWVudUNhcGFdKTtcclxuXHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIW1vc3RyYXJTdWJtZW51Q2FwYSkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYnRuID0gYnRuT3JkZW5SZWYuY3VycmVudDtcclxuICAgICAgICAgICAgaWYgKCFidG4pIHJldHVybjtcclxuICAgICAgICAgICAgY29uc3QgciA9IGJ0bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgY29uc3QgZ2FwID0gOCwgZmx5b3V0V2lkdGggPSAyMjQsIGZseW91dEhlaWdodCA9IDE4MDtcclxuICAgICAgICAgICAgY29uc3QgdncgPSB3aW5kb3cuaW5uZXJXaWR0aCwgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgeCA9IHIucmlnaHQgKyBnYXA7XHJcbiAgICAgICAgICAgIGxldCB5ID0gci50b3A7XHJcbiAgICAgICAgICAgIGlmICh4ICsgZmx5b3V0V2lkdGggPiB2dykgeCA9IHIubGVmdCAtIGZseW91dFdpZHRoIC0gZ2FwO1xyXG4gICAgICAgICAgICBpZiAoeSArIGZseW91dEhlaWdodCA+IHZoKSB5ID0gTWF0aC5tYXgoOCwgci5ib3R0b20gLSBmbHlvdXRIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgc2V0U3VibWVudVBvcyh7IHgsIHkgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGUsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZSwgdHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sIFttb3N0cmFyU3VibWVudUNhcGFdKTtcclxuXHJcblxyXG4gICAgLy8gMikgUmVwb3NpY2lvbmFyIGFudGUgc2Nyb2xsL3Jlc2l6ZSBtaWVudHJhcyBlc3TDqSBhYmllcnRvXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghaXNPcGVuKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgaGFuZGxlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBidG4gPSBib3Rvbk9wY2lvbmVzUmVmPy5jdXJyZW50O1xyXG4gICAgICAgICAgICBpZiAoIWJ0bikgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCByID0gYnRuLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBzZXRQb3MoY2FsY3VsYXJQb3NEZXNkZVJlY3QocikpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGUpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGUsIHRydWUpO1xyXG4gICAgICAgIH07XHJcbiAgICB9LCBbaXNPcGVuLCBib3Rvbk9wY2lvbmVzUmVmXSk7XHJcblxyXG4gICAgaWYgKCFpc09wZW4pIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgcG9ydGFsVGFyZ2V0ID0gdHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiID8gZG9jdW1lbnQuYm9keSA6IG51bGw7XG4gICAgaWYgKCFwb3J0YWxUYXJnZXQpIHJldHVybiBudWxsO1xuXG4gICAgcmV0dXJuIGNyZWF0ZVBvcnRhbChcbiAgICAgICAgPGRpdlxuICAgICAgICAgICAgcmVmPXttZW51Um9vdFJlZn1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGZpeGVkIHotNTAgYmctd2hpdGUgYm9yZGVyIHNoYWRvdy14bCBwLTMgdGV4dC1zbSBzcGFjZS15LTEgbWVudS16LWluZGV4ICR7aXNNb2JpbGUgPyBcInJvdW5kZWQtMnhsIHctYXV0b1wiIDogXCJyb3VuZGVkLWxnIHctNjRcIn1gfVxuICAgICAgICAgICAgc3R5bGU9e1xuICAgICAgICAgICAgICAgIGlzTW9iaWxlXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogXCI4cHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcIjhweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBgY2FsYygke21vYmlsZUJvdHRvbU9mZnNldH1weCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tLCAwcHgpKWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IFwiYXV0b1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFwiIzc3M2RiZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IFwiMXB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IFwiNzB2aFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogXCJmYWRlSW5TY2FsZSAwLjE1cyBlYXNlLW91dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogcmVhZHkgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBgJHtwb3MueH1weGAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGAke3Bvcy55fXB4YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcIiM3NzNkYmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiBcIjFweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBcIjQwMHB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6IFwiYXV0b1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBcImZhZGVJblNjYWxlIDAuMTVzIGVhc2Utb3V0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiByZWFkeSA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRXZpdGFyIHF1ZSBzZSBwcm9wYWd1ZSBlbCBjbGljayBhbCBib2R5IChjbGljay1vdXRzaWRlKVxuICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgICAgb25DbGljaz17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XG4gICAgICAgID5cbiAgICAgICAgICAgIHsvKiBDb3BpYXIgKi99XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkNvcGlhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2VycmFyKCk7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPENvcHkgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+IENvcGlhclxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgIHsvKiBQZWdhciAqL31cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUGVnYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBvbkNlcnJhcigpO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxDbGlwYm9hcmRQYXN0ZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gUGVnYXJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICB7LyogRHVwbGljYXIgKi99XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkR1cGxpY2FyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb25DZXJyYXIoKTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8UGx1c0NpcmNsZSBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gRHVwbGljYXJcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG5cclxuICAgICAgICAgICAgey8qIEVubGFjZSAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICByZWY9e2J0bkVubGFjZVJlZn1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2VycmFtb3MgZWwgZGUgY2FwYSBzaSBlc3RhYmEgYWJpZXJ0bywgcGFyYSBubyBzdXBlcnBvbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVFZmVjdG9zKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51RW5sYWNlKHByZXYgPT4gIXByZXYpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPExpbmsyIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPiBFbmxhY2VcclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgIHsvKiBGbHlvdXQgRW5sYWNlICovfVxyXG4gICAgICAgICAgICAgICAge21vc3RyYXJTdWJtZW51RW5sYWNlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUG9ydGFsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9e3N1Ym1lbnVFbmxhY2VSZWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCB6LVs2MF0gYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQgc2hhZG93LWxnIHAtMyBzcGFjZS15LTMgbWVudS16LWluZGV4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogZW5sYWNlUG9zLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBlbmxhY2VQb3MueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMzIwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IGVubGFjZVJlYWR5ID8gXCJ2aXNpYmxlXCIgOiBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcIiM3NzNkYmVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+QWdyZWdhciBlbmxhY2U8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VybElucHV0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRVcmxJbnB1dChlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmxFcnJvcikgc2V0VXJsRXJyb3IoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikgZ3VhcmRhckVubGFjZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHNldE1vc3RyYXJTdWJtZW51RW5sYWNlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiaHR0cHM6Ly9lamVtcGxvLmNvbSBvIG1haWx0bzouLi5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCBweC0zIHB5LTIgYm9yZGVyIHJvdW5kZWQgb3V0bGluZS1ub25lICR7dXJsRXJyb3IgPyBcImJvcmRlci1yZWQtNTAwXCIgOiBcImJvcmRlci1ncmF5LTMwMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQ2hpcHMgcsOhcGlkb3MgKG9wY2lvbmFsKSAqL31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXdyYXAgZ2FwLTIgdGV4dC14c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtbXCJodHRwczovL1wiLCBcIm1haWx0bzpcIiwgXCJ0ZWw6XCIsIFwid2hhdHNhcHA6XCJdLm1hcCgocHJlZikgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3ByZWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRVcmxJbnB1dCgodSkgPT4gKHUuc3RhcnRzV2l0aChwcmVmKSA/IHUgOiBwcmVmICsgdSkpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtMiBweS0xIGJnLWdyYXktMTAwIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0yMDBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cHJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogRm9vdGVyIHJlc3BvbnNpdm8gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgc206Z3JpZC1jb2xzLTIgZ2FwLTIgaXRlbXMtY2VudGVyIG10LTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQm90w7NuIFF1aXRhciBlbmxhY2UgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtxdWl0YXJFbmxhY2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBweC0yLjUgcHktMS41IHRleHQtWzEzcHhdIHRleHQtcmVkLTYwMCBob3ZlcjpiZy1yZWQtNTAgcm91bmRlZCB3aGl0ZXNwYWNlLW5vd3JhcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVpdGFyIGVubGFjZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQm90b25lcyBDYW5jZWxhciB5IEd1YXJkYXIgKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRNb3N0cmFyU3VibWVudUVubGFjZShmYWxzZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yLjUgcHktMS41IHRleHQtWzEzcHhdIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgd2hpdGVzcGFjZS1ub3dyYXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYW5jZWxhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17Z3VhcmRhckVubGFjZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTIuNSBweS0xLjUgdGV4dC1bMTNweF0gYmctWyM3NzNkYmVdIHRleHQtd2hpdGUgcm91bmRlZCBob3ZlcjpvcGFjaXR5LTkwIHdoaXRlc3BhY2Utbm93cmFwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR3VhcmRhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LVsxMXB4XSB0ZXh0LWdyYXktNTAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2UgYWJyaXLDoSBzaWVtcHJlIGVuIHVuYSBwZXN0YcOxYSBudWV2YS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgcmVmPXtidG5FZmVjdG9zUmVmfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVFbmxhY2UoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVFZmVjdG9zKChwcmV2KSA9PiAhcHJldik7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBoLTQgdy00IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LVsxMXB4XSBmb250LXNlbWlib2xkXCI+Rng8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIEVmZWN0b3NcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgIHttb3N0cmFyU3VibWVudUVmZWN0b3MgJiZcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUG9ydGFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17c3VibWVudUVmZWN0b3NSZWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei1bNjBdIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkIHNoYWRvdy1sZyBwLTIgc3BhY2UteS0xIG1lbnUtei1pbmRleFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogZWZlY3Rvc1Bvcy54LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGVmZWN0b3NQb3MueSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDMwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAzMjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93WTogXCJhdXRvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IGVmZWN0b3NSZWFkeSA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFwiIzc3M2RiZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtMiBwYi0xIHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXppbmMtNzAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVmZWN0b3MgZGVsIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiBcIm5vbmVcIiwgbGFiZWw6IFwiU2luIGVmZWN0b1wiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IFwicmV2ZWFsXCIsIGxhYmVsOiBcIkFwYXJpY2lvbiBhbCBoYWNlciBzY3JvbGxcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiBcImRyYXdcIiwgbGFiZWw6IFwiRGlidWphciBsaW5lYVwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IFwiem9vbVwiLCBsYWJlbDogXCJab29tIHN1dGlsXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogXCJob3ZlclwiLCBsYWJlbDogXCJJbnRlcmFjY2lvbiBhbCB0b2NhclwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6IFwicHVsc2VcIiwgbGFiZWw6IFwiUHVsc28gc3VhdmVcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigob3B0aW9uKSA9PiBhbGxvd2VkTW90aW9uRWZmZWN0cy5pbmNsdWRlcyhvcHRpb24udmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWN0aXZlID0gY3VycmVudE1vdGlvbkVmZmVjdCA9PT0gb3B0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17b3B0aW9uLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBhY3R1YWxpemFyTW90aW9uRWZmZWN0KG9wdGlvbi52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggdy1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gZ2FwLTIgcm91bmRlZCBweC0zIHB5LTIgdGV4dC1sZWZ0IHRleHQtc20gdHJhbnNpdGlvbiAke2lzQWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiYmctcHVycGxlLTUwIHRleHQtcHVycGxlLTgwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57b3B0aW9uLmxhYmVsfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzQWN0aXZlID8gPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyBmb250LXNlbWlib2xkXCI+QWN0aXZvPC9zcGFuPiA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogVXNhciBjb21vIGZvbmRvIChzb2xvIHNpIGVzIGltYWdlbikgKi99XG4gICAgICAgICAgICB7ZXNJbWFnZW4gJiYgKFxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVlbXBsYXphckZvbmRvKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvSW1hZ2VuOiBlbGVtZW50b1NlbGVjY2lvbmFkbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamV0b3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRPYmpldG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJQYW5lbFo6IG9uQ2VycmFyLCAvLyByZXV0aWxpemFtb3Mgb25DZXJyYXIgcGFyYSBjZXJyYXIgZWwgbWVuw7pcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy00IGgtNCBiZy1ncmFkaWVudC10by1iciBmcm9tLWJsdWUtNDAwIHRvLXB1cnBsZS01MDAgcm91bmRlZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgVXNhciBjb21vIGZvbmRvXHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgIHsvKiBFbGltaW5hciAqL31cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uRWxpbWluYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBvbkNlcnJhcigpO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxUcmFzaDIgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LXJlZC01MDBcIiAvPiBFbGltaW5hclxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgIHsvKiBTdWJtZW7DuiBPcmRlbiBkZSBjYXBhICovfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIHJlZj17YnRuT3JkZW5SZWZ9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51RW5sYWNlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51RWZlY3RvcyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoKHByZXYpID0+ICFwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxMYXllcnMgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+IE9yZGVuIGRlIGNhcGFcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxyXG5cclxuICAgICAgICAgICAgICAgIHttb3N0cmFyU3VibWVudUNhcGEgJiZcclxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVQb3J0YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17c3VibWVudVJlZn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIHotWzYwXSBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBzaGFkb3ctbGcgcC0yIHNwYWNlLXktMSBtZW51LXotaW5kZXhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBzdWJtZW51UG9zLngsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBzdWJtZW51UG9zLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIyNCwgICAgICAgICAgICAgIC8vIHctNTZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBzdWJtZW51UmVhZHkgPyBcInZpc2libGVcIiA6IFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyRWxlbWVudG8oXCJhbC1mcmVudGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTdWJtZW51Q2FwYShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2VycmFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3LWZ1bGwgdGV4dC1sZWZ0IHB4LTMgcHktMiByb3VuZGVkIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBcnJvd1VwIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPiBUcmFlciBhbCBmcmVudGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyRWxlbWVudG8oXCJzdWJpclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVDYXBhKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DZXJyYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1vdmVVcCBjbGFzc05hbWU9XCJ3LTQgaC00XCIgLz4gU3ViaXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVyRWxlbWVudG8oXCJiYWphclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclN1Ym1lbnVDYXBhKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DZXJyYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHctZnVsbCB0ZXh0LWxlZnQgcHgtMyBweS0yIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1vdmVEb3duIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPiBCYWphclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXJFbGVtZW50byhcImFsLWZvbmRvXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNb3N0cmFyU3VibWVudUNhcGEoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNlcnJhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdy1mdWxsIHRleHQtbGVmdCBweC0zIHB5LTIgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QXJyb3dEb3duIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPiBFbnZpYXIgYWwgZm9uZG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+LFxuICAgICAgICBwb3J0YWxUYXJnZXRcbiAgICApO1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VMYXlvdXRFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsImNyZWF0ZVBvcnRhbCIsIkNvcHkiLCJUcmFzaDIiLCJMYXllcnMiLCJBcnJvd0Rvd24iLCJBcnJvd1VwIiwiTW92ZVVwIiwiTW92ZURvd24iLCJQbHVzQ2lyY2xlIiwiQ2xpcGJvYXJkUGFzdGUiLCJMaW5rMiIsIlgiLCJnZXRBbGxvd2VkTW90aW9uRWZmZWN0c0ZvckVsZW1lbnQiLCJzYW5pdGl6ZU1vdGlvbkVmZmVjdCIsInNhbml0aXplVVJMIiwidXJsIiwidCIsIlN0cmluZyIsInRyaW0iLCJvayIsInRlc3QiLCJ1IiwiVVJMIiwidG9TdHJpbmciLCJNZW51T3BjaW9uZXNFbGVtZW50byIsImlzT3BlbiIsImJvdG9uT3BjaW9uZXNSZWYiLCJlbGVtZW50b1NlbGVjY2lvbmFkbyIsIm9uQ29waWFyIiwib25QZWdhciIsIm9uRHVwbGljYXIiLCJvbkVsaW1pbmFyIiwibW92ZXJFbGVtZW50byIsIm9uQ2VycmFyIiwicmVlbXBsYXphckZvbmRvIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsInNldFNlY2Npb25lcyIsInNldE9iamV0b3MiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwibW9zdHJhclN1Ym1lbnVDYXBhIiwic2V0TW9zdHJhclN1Ym1lbnVDYXBhIiwicG9zIiwic2V0UG9zIiwieCIsInkiLCJyZWFkeSIsInNldFJlYWR5IiwibWVudVJvb3RSZWYiLCJidG5PcmRlblJlZiIsInN1Ym1lbnVSZWYiLCJzdWJtZW51UG9zIiwic2V0U3VibWVudVBvcyIsInN1Ym1lbnVSZWFkeSIsInNldFN1Ym1lbnVSZWFkeSIsImlzTW9iaWxlIiwic2V0SXNNb2JpbGUiLCJtb2JpbGVCb3R0b21PZmZzZXQiLCJzZXRNb2JpbGVCb3R0b21PZmZzZXQiLCJlc0ltYWdlbiIsInRpcG8iLCJtcSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJ1cGRhdGUiLCJtYXRjaGVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjYWxjdWxhck9mZnNldEJvdHRvbU1vYmlsZSIsInZpZXdwb3J0SGVpZ2h0IiwiTWF0aCIsIm1heCIsImlubmVySGVpZ2h0Iiwic2lkZWJhciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJlY3QiLCJvdmVybGFwc0JvdHRvbSIsImJvdHRvbSIsIm9ic3RydWN0aW9uSGVpZ2h0IiwidG9wIiwiY2VpbCIsImNhbGN1bGFyUG9zRGVzZGVSZWN0IiwiciIsIm1lbnVXaWR0aCIsIm1lbnVIZWlnaHQiLCJ2dyIsImlubmVyV2lkdGgiLCJ2aCIsInJpZ2h0IiwibGVmdCIsIm1vc3RyYXJTdWJtZW51RW5sYWNlIiwic2V0TW9zdHJhclN1Ym1lbnVFbmxhY2UiLCJidG5FbmxhY2VSZWYiLCJzdWJtZW51RW5sYWNlUmVmIiwiZW5sYWNlUG9zIiwic2V0RW5sYWNlUG9zIiwiZW5sYWNlUmVhZHkiLCJzZXRFbmxhY2VSZWFkeSIsInVybElucHV0Iiwic2V0VXJsSW5wdXQiLCJ1cmxFcnJvciIsInNldFVybEVycm9yIiwibW9zdHJhclN1Ym1lbnVFZmVjdG9zIiwic2V0TW9zdHJhclN1Ym1lbnVFZmVjdG9zIiwiYnRuRWZlY3Rvc1JlZiIsInN1Ym1lbnVFZmVjdG9zUmVmIiwiZWZlY3Rvc1BvcyIsInNldEVmZWN0b3NQb3MiLCJlZmVjdG9zUmVhZHkiLCJzZXRFZmVjdG9zUmVhZHkiLCJhbGxvd2VkTW90aW9uRWZmZWN0cyIsImN1cnJlbnRNb3Rpb25FZmZlY3QiLCJtb3Rpb25FZmZlY3QiLCJhY3R1YWwiLCJlbmxhY2UiLCJocmVmIiwiYnRuIiwiY3VycmVudCIsImZseW91dFdpZHRoIiwiZmx5b3V0SGVpZ2h0IiwiZ2FwIiwiaGFuZGxlIiwiZ3VhcmRhckVubGFjZSIsImxpbXBpbyIsInByZXYiLCJtYXAiLCJvIiwiaWQiLCJ0YXJnZXQiLCJyZWwiLCJxdWl0YXJFbmxhY2UiLCJyZXN0IiwiYWN0dWFsaXphck1vdGlvbkVmZmVjdCIsImVmZmVjdCIsIm5leHRFZmZlY3QiLCJpdGVtIiwicCIsInVwZGF0ZUJvdHRvbU9mZnNldCIsInBvcnRhbFRhcmdldCIsImJvZHkiLCJkaXYiLCJyZWYiLCJjbGFzc05hbWUiLCJzdHlsZSIsImJvcmRlckNvbG9yIiwiYm9yZGVyV2lkdGgiLCJtYXhIZWlnaHQiLCJvdmVyZmxvd1kiLCJhbmltYXRpb24iLCJ2aXNpYmlsaXR5Iiwib25Nb3VzZURvd24iLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwib25DbGljayIsImJ1dHRvbiIsIndpZHRoIiwiaW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJvbkNoYW5nZSIsIm9uS2V5RG93biIsImtleSIsInBsYWNlaG9sZGVyIiwicHJlZiIsInN0YXJ0c1dpdGgiLCJzcGFuIiwibGFiZWwiLCJmaWx0ZXIiLCJvcHRpb24iLCJpbmNsdWRlcyIsImlzQWN0aXZlIiwiZWxlbWVudG9JbWFnZW4iLCJzZXRNb3N0cmFyUGFuZWxaIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/MenuOpcionesElemento.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/SelectionBounds.jsx":
/*!********************************************!*\
  !*** ./src/components/SelectionBounds.jsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SelectionBounds)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n// SelectionBounds.jsx\n\n\n\nconst DEBUG_SELECTION_BOUNDS = false;\nconst sbLog = (...args)=>{\n    if (!DEBUG_SELECTION_BOUNDS) return;\n    console.log(\"[SB]\", ...args);\n};\nconst slog = sbLog;\nconst TRDBG = (...args)=>{\n    if (!window.__DBG_TR) return;\n    console.log(\"[TRDBG]\", ...args);\n};\nconst TXTDBG = (...args)=>{\n    if (true) return;\n    if (!window.__DBG_TEXT_RESIZE) return;\n    console.log(\"[TEXT-TR]\", ...args);\n};\nfunction rectFromNodes(nodes) {\n    let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\n    for (const n of nodes){\n        if (!n?.getClientRect) continue;\n        const r = n.getClientRect({\n            skipTransform: false,\n            skipShadow: true,\n            skipStroke: true\n        });\n        minX = Math.min(minX, r.x);\n        minY = Math.min(minY, r.y);\n        maxX = Math.max(maxX, r.x + r.width);\n        maxY = Math.max(maxY, r.y + r.height);\n    }\n    if (minX === Infinity) return null;\n    return {\n        x: minX,\n        y: minY,\n        width: maxX - minX,\n        height: maxY - minY\n    };\n}\nfunction getCountdownScaledSize(node) {\n    try {\n        const hitbox = node?.findOne?.(\".countdown-hitbox\");\n        const baseW = typeof hitbox?.width === \"function\" ? hitbox.width() : NaN;\n        const baseH = typeof hitbox?.height === \"function\" ? hitbox.height() : NaN;\n        const sx = Math.abs(typeof node?.scaleX === \"function\" ? node.scaleX() || 1 : 1);\n        const sy = Math.abs(typeof node?.scaleY === \"function\" ? node.scaleY() || 1 : 1);\n        if (Number.isFinite(baseW) && Number.isFinite(baseH) && baseW > 0 && baseH > 0) {\n            return {\n                width: Math.abs(baseW * sx),\n                height: Math.abs(baseH * sy)\n            };\n        }\n    } catch  {}\n    try {\n        const r = node.getClientRect({\n            skipTransform: false,\n            skipShadow: true,\n            skipStroke: true\n        });\n        return {\n            width: Math.abs(r.width),\n            height: Math.abs(r.height)\n        };\n    } catch  {}\n    return {\n        width: 100,\n        height: 50\n    };\n}\n// 🎨 Componente para mostrar bounds sin transformer (líneas, etc.)\nconst BoundsIndicator = ({ selectedElements, elementRefs, objetos })=>{\n    const [forceUpdate, setForceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"BoundsIndicator.useEffect\": ()=>{\n            const firstRef = elementRefs.current?.[selectedElements[0]];\n            const stage = firstRef?.getStage?.();\n            if (!stage) return;\n            const handleDragMove = {\n                \"BoundsIndicator.useEffect.handleDragMove\": ()=>{\n                    setForceUpdate({\n                        \"BoundsIndicator.useEffect.handleDragMove\": (p)=>p + 1\n                    }[\"BoundsIndicator.useEffect.handleDragMove\"]);\n                }\n            }[\"BoundsIndicator.useEffect.handleDragMove\"];\n            stage.on(\"dragmove\", handleDragMove);\n            return ({\n                \"BoundsIndicator.useEffect\": ()=>{\n                    stage.off(\"dragmove\", handleDragMove);\n                }\n            })[\"BoundsIndicator.useEffect\"];\n        }\n    }[\"BoundsIndicator.useEffect\"], [\n        selectedElements.join(\",\")\n    ]);\n    const elementosData = selectedElements.map((id)=>objetos.find((obj)=>obj.id === id)).filter(Boolean);\n    if (elementosData.length === 0) {\n        return null;\n    }\n    let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\n    elementosData.forEach((obj)=>{\n        const node = elementRefs.current[obj.id];\n        if (!node) return;\n        try {\n            if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n                const points = obj.points || [\n                    0,\n                    0,\n                    100,\n                    0\n                ];\n                const cleanPoints = [\n                    parseFloat(points[0]) || 0,\n                    parseFloat(points[1]) || 0,\n                    parseFloat(points[2]) || 100,\n                    parseFloat(points[3]) || 0\n                ];\n                const realX = node.x();\n                const realY = node.y();\n                const x1 = realX + cleanPoints[0];\n                const y1 = realY + cleanPoints[1];\n                const x2 = realX + cleanPoints[2];\n                const y2 = realY + cleanPoints[3];\n                const linePadding = 5;\n                minX = Math.min(minX, x1 - linePadding, x2 - linePadding);\n                minY = Math.min(minY, y1 - linePadding, y2 - linePadding);\n                maxX = Math.max(maxX, x1 + linePadding, x2 + linePadding);\n                maxY = Math.max(maxY, y1 + linePadding, y2 + linePadding);\n            } else {\n                const box = node.getClientRect({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                });\n                const r = box;\n                const sx = node?.scaleX?.() ?? 1;\n                const sy = node?.scaleY?.() ?? 1;\n                slog(\"[BI]\", `id=${obj.id}`, `tipo=${obj.tipo}`, `sx=${sx.toFixed(3)}`, `sy=${sy.toFixed(3)}`, `rect(w=${r.width.toFixed(1)},h=${r.height.toFixed(1)})`);\n                const realX = box.x;\n                const realY = box.y;\n                let width = box.width;\n                let height = box.height;\n                if (obj.tipo === \"texto\" && node.getTextHeight) {\n                    const textHeight = node.getTextHeight();\n                    if (textHeight) {\n                        height = textHeight;\n                    }\n                }\n                minX = Math.min(minX, realX);\n                minY = Math.min(minY, realY);\n                maxX = Math.max(maxX, realX + width);\n                maxY = Math.max(maxY, realY + height);\n            }\n        } catch (error) {\n            const fallbackX = obj.x || 0;\n            const fallbackY = obj.y || 0;\n            const fallbackSize = 20;\n            minX = Math.min(minX, fallbackX);\n            minY = Math.min(minY, fallbackY);\n            maxX = Math.max(maxX, fallbackX + fallbackSize);\n            maxY = Math.max(maxY, fallbackY + fallbackSize);\n        }\n    });\n    if (minX === Infinity || maxX === -Infinity) {\n        const primerElemento = elementosData[0];\n        if (!primerElemento) return null;\n        minX = primerElemento.x || 0;\n        minY = primerElemento.y || 0;\n        maxX = minX + 100;\n        maxY = minY + 50;\n    }\n    const padding = 10;\n    const finalX = minX - padding;\n    const finalY = minY - padding;\n    const finalWidth = maxX - minX + padding * 2;\n    const finalHeight = maxY - minY + padding * 2;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n        name: \"ui\",\n        x: finalX,\n        y: finalY,\n        width: finalWidth,\n        height: finalHeight,\n        fill: \"transparent\",\n        stroke: \"#9333EA\",\n        strokeWidth: 1,\n        listening: false,\n        opacity: 0.7\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n        lineNumber: 188,\n        columnNumber: 5\n    }, undefined);\n};\nfunction SelectionBounds({ selectedElements, elementRefs, objetos, onTransform, onTransformInteractionStart = null, onTransformInteractionEnd = null, isDragging, isMobile = false }) {\n    const transformerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [transformTick, setTransformTick] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const lastNodesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const circleAnchorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const textTransformAnchorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const resizeHintTimersRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const lastResizeHintSelectionKeyRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(\"\");\n    const transformGestureRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        isRotate: false,\n        activeAnchor: null\n    });\n    const isTransformingResizeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const [isResizeGestureActive, setIsResizeGestureActive] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [pressedResizeAnchorName, setPressedResizeAnchorName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [resizeHintPhase, setResizeHintPhase] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const elementosSeleccionadosData = selectedElements.map((id)=>objetos.find((obj)=>obj.id === id)).filter(Boolean);\n    const primerElemento = elementosSeleccionadosData[0] || null;\n    const esTexto = primerElemento?.tipo === \"texto\";\n    const esCountdown = primerElemento?.tipo === \"countdown\";\n    const esGaleria = selectedElements.length === 1 && primerElemento?.tipo === \"galeria\";\n    const lockAspectCountdown = selectedElements.length === 1 && esCountdown;\n    const lockAspectText = selectedElements.length === 1 && esTexto;\n    const transformerAnchorSize = isMobile ? 32 : 14; //tamaño visual del nodo (más grande en mobile).\n    const transformerRotateOffset = isMobile ? 34 : 24; // distancia del handle de rotación al borde.\n    const transformerAnchorRadius = 999; //radio de esquina del nodo (999 lo hace circular).\n    const transformerPadding = isMobile ? 14 : 4; // espacio extra entre borde del transformer y elemento.\n    const transformerBorderStrokeWidth = isMobile ? 1.5 : 1; //grosor del borde del transformer.\n    const transformerAnchorFillColor = \"#9333EA\";\n    const transformerAnchorStrokeWidth = isMobile ? 1.4 : 2.5; //grosor del borde del nodo.\n    const transformerAnchorShadowBlur = isMobile ? 9 : 6; // qué tan difusa es la sombra base del nodo.\n    const transformerAnchorShadowOffsetY = isMobile ? 4 : 3; // desplazamiento vertical de esa sombra.\n    const transformerAnchorHitStrokeWidth = isMobile ? 62 : 20;\n    const transformerAnchorPressedHitStrokeWidth = isMobile ? 96 : 24;\n    const transformerAnchorStrokeColor = \"#ffffff\";\n    const transformerAnchorPressedHaloStrokeColor = isMobile ? \"rgba(255, 255, 255, 1)\" : transformerAnchorStrokeColor;\n    const transformerAnchorPressedHaloStrokeWidth = isMobile ? 8.8 : 3.2;\n    const transformerAnchorShadowColor = \"rgba(147, 51, 234, 0.3)\";\n    const transformerAnchorPressedFillColor = isMobile ? \"#C26BFF\" : transformerAnchorFillColor;\n    const transformerAnchorHintFillColor = isMobile ? \"#B56AF8\" : transformerAnchorFillColor;\n    const transformerAnchorPressedShadowColor = isMobile ? \"rgba(150, 32, 255, 1)\" : \"rgba(147, 51, 234, 0.7)\";\n    const transformerAnchorPressedShadowBlur = isMobile ? 92 : 18;\n    const transformerAnchorPressedShadowOffsetY = isMobile ? 0 : transformerAnchorShadowOffsetY + 1;\n    const transformerAnchorPressedScale = isMobile ? 1.2 : 1.1;\n    const transformerAnchorHintShadowColor = isMobile ? \"rgba(214, 165, 255, 0.95)\" : \"rgba(167, 86, 247, 0.8)\";\n    const transformerAnchorHintStrokeColor = \"rgba(255, 255, 255, 0.98)\";\n    const transformerAnchorHintStrongScale = isMobile ? 1.12 : 1.14;\n    const transformerAnchorHintSoftScale = isMobile ? 1.08 : 1.07;\n    const transformerAnchorHintStrongShadowBlur = isMobile ? 54 : 24;\n    const transformerAnchorHintSoftShadowBlur = isMobile ? 34 : 14;\n    const transformerAnchorHintHitStrokeWidth = isMobile ? 84 : 22;\n    const transformerHintBorderStrongStrokeWidth = isMobile ? 2.8 : 1.6;\n    const transformerHintBorderSoftStrokeWidth = isMobile ? 2.2 : 1.25;\n    const transformerRotationSnapTolerance = isMobile ? 8 : 5; //tolerancia para “encajar” rotación en ángulos fijos.\n    const esTriangulo = primerElemento?.tipo === \"forma\" && primerElemento?.figura === \"triangle\";\n    const hasGallery = elementosSeleccionadosData.some((o)=>o.tipo === \"galeria\");\n    const hayLineas = elementosSeleccionadosData.some((obj)=>obj.tipo === \"forma\" && obj.figura === \"line\");\n    const elementosTransformables = elementosSeleccionadosData.filter((obj)=>!(obj.tipo === \"forma\" && obj.figura === \"line\"));\n    const deberiaUsarTransformer = elementosTransformables.length > 0;\n    const selectedGeomKey = elementosSeleccionadosData.map((o)=>[\n            o.id,\n            o.x ?? 0,\n            o.y ?? 0,\n            o.width ?? \"\",\n            o.height ?? \"\",\n            o.scaleX ?? 1,\n            o.scaleY ?? 1,\n            o.rotation ?? 0,\n            o.chipWidth ?? \"\",\n            o.gap ?? \"\",\n            o.paddingX ?? \"\",\n            o.paddingY ?? \"\"\n        ].join(\":\")).join(\"|\");\n    const getTransformPose = (node)=>{\n        if (!node) return {\n            x: 0,\n            y: 0,\n            rotation: 0\n        };\n        if (esGaleria && typeof node.getParent === \"function\") {\n            const parent = node.getParent();\n            if (parent) {\n                return {\n                    x: typeof parent.x === \"function\" ? parent.x() : 0,\n                    y: typeof parent.y === \"function\" ? parent.y() : 0,\n                    rotation: typeof parent.rotation === \"function\" ? parent.rotation() || 0 : 0\n                };\n            }\n        }\n        return {\n            x: typeof node.x === \"function\" ? node.x() : 0,\n            y: typeof node.y === \"function\" ? node.y() : 0,\n            rotation: typeof node.rotation === \"function\" ? node.rotation() || 0 : 0\n        };\n    };\n    const clearResizeAnchorPressFeedback = ()=>{\n        if (isTransformingResizeRef.current) return;\n        setIsResizeGestureActive(false);\n        setPressedResizeAnchorName((current)=>current ? null : current);\n    };\n    const clearResizeHintTimers = ()=>{\n        if (!resizeHintTimersRef.current.length) return;\n        resizeHintTimersRef.current.forEach((timerId)=>clearTimeout(timerId));\n        resizeHintTimersRef.current = [];\n    };\n    const stopResizeHintPulse = ()=>{\n        clearResizeHintTimers();\n        setResizeHintPhase((current)=>current === 0 ? current : 0);\n    };\n    const stopNativeTransformerIfActive = ()=>{\n        const tr = transformerRef.current;\n        if (!tr) return false;\n        let nativeTransforming = false;\n        try {\n            nativeTransforming = Boolean(tr.isTransforming?.());\n        } catch  {}\n        if (!nativeTransforming) return false;\n        try {\n            tr.stopTransform?.();\n            tr.getLayer?.()?.batchDraw?.();\n        } catch  {}\n        return true;\n    };\n    const getResizeAnchorNameFromTarget = (target)=>{\n        if (!target) return null;\n        const isAnchorTarget = typeof target.hasName === \"function\" ? target.hasName(\"_anchor\") : typeof target.name === \"function\" && String(target.name() || \"\").includes(\"_anchor\");\n        if (!isAnchorTarget) return null;\n        const rawName = typeof target.name === \"function\" ? String(target.name() || \"\") : \"\";\n        const anchorName = rawName.split(\" \")[0] || null;\n        if (!anchorName) return null;\n        return anchorName;\n    };\n    const handleResizeAnchorPressStart = (event)=>{\n        let anchorName = getResizeAnchorNameFromTarget(event?.target);\n        if (!anchorName) {\n            const activeAnchor = typeof transformerRef.current?.getActiveAnchor === \"function\" ? transformerRef.current.getActiveAnchor() : null;\n            if (typeof activeAnchor === \"string\") {\n                anchorName = activeAnchor;\n            }\n        }\n        if (!anchorName) return;\n        setIsResizeGestureActive(true);\n        setPressedResizeAnchorName((current)=>current === anchorName ? current : anchorName);\n    };\n    const getBoxOverflowAmount = (box, stageWidth, stageHeight)=>{\n        if (!box) return Number.POSITIVE_INFINITY;\n        const x = Number(box.x);\n        const y = Number(box.y);\n        const width = Number(box.width);\n        const height = Number(box.height);\n        if (!Number.isFinite(x) || !Number.isFinite(y) || !Number.isFinite(width) || !Number.isFinite(height)) {\n            return Number.POSITIVE_INFINITY;\n        }\n        const left = Math.min(x, x + width);\n        const right = Math.max(x, x + width);\n        const top = Math.min(y, y + height);\n        const bottom = Math.max(y, y + height);\n        const overflowLeft = Math.max(0, -left);\n        const overflowTop = Math.max(0, -top);\n        const overflowRight = Math.max(0, right - stageWidth);\n        const overflowBottom = Math.max(0, bottom - stageHeight);\n        return overflowLeft + overflowTop + overflowRight + overflowBottom;\n    };\n    const keepBoxInsideStage = (oldBox, nextBox)=>{\n        const tr = transformerRef.current;\n        const stage = tr?.getStage?.();\n        const stageWidth = typeof stage?.width === \"function\" ? Number(stage.width()) : Number(stage?.attrs?.width);\n        const stageHeight = typeof stage?.height === \"function\" ? Number(stage.height()) : Number(stage?.attrs?.height);\n        if (!Number.isFinite(stageWidth) || stageWidth <= 0 || !Number.isFinite(stageHeight) || stageHeight <= 0) {\n            return nextBox;\n        }\n        const oldOverflow = getBoxOverflowAmount(oldBox, stageWidth, stageHeight);\n        const nextOverflow = getBoxOverflowAmount(nextBox, stageWidth, stageHeight);\n        const epsilon = 0.5;\n        if (!Number.isFinite(nextOverflow)) {\n            return oldBox;\n        }\n        if (nextOverflow <= epsilon) {\n            return nextBox;\n        }\n        // Permitir transformar de vuelta hacia adentro del canvas.\n        if (nextOverflow <= oldOverflow + epsilon) {\n            return nextBox;\n        }\n        // Si el resize empuja más afuera del canvas, mantener el estado anterior.\n        return oldBox;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const selectionKey = selectedElements.join(\",\");\n            if (!selectionKey || !deberiaUsarTransformer) {\n                stopResizeHintPulse();\n                lastResizeHintSelectionKeyRef.current = selectionKey;\n                return;\n            }\n            if (isDragging || isResizeGestureActive || isTransformingResizeRef.current) {\n                stopResizeHintPulse();\n                return;\n            }\n            if (selectionKey === lastResizeHintSelectionKeyRef.current) return;\n            lastResizeHintSelectionKeyRef.current = selectionKey;\n            clearResizeHintTimers();\n            setResizeHintPhase(2);\n            const pulseSteps = isMobile ? [\n                [\n                    1,\n                    360\n                ],\n                [\n                    2,\n                    680\n                ],\n                [\n                    1,\n                    980\n                ],\n                [\n                    2,\n                    1260\n                ],\n                [\n                    1,\n                    1520\n                ],\n                [\n                    0,\n                    1850\n                ]\n            ] : [\n                [\n                    1,\n                    120\n                ],\n                [\n                    2,\n                    220\n                ],\n                [\n                    1,\n                    360\n                ],\n                [\n                    0,\n                    560\n                ]\n            ];\n            resizeHintTimersRef.current = pulseSteps.map({\n                \"SelectionBounds.useEffect\": ([phase, delayMs])=>setTimeout({\n                        \"SelectionBounds.useEffect\": ()=>setResizeHintPhase(phase)\n                    }[\"SelectionBounds.useEffect\"], delayMs)\n            }[\"SelectionBounds.useEffect\"]);\n            return ({\n                \"SelectionBounds.useEffect\": ()=>{\n                    clearResizeHintTimers();\n                }\n            })[\"SelectionBounds.useEffect\"];\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        selectedElements.join(\",\"),\n        deberiaUsarTransformer,\n        isDragging,\n        isResizeGestureActive,\n        isMobile\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            if (!isResizeGestureActive) return;\n            const cleanupId = setTimeout({\n                \"SelectionBounds.useEffect.cleanupId\": ()=>{\n                    if (isTransformingResizeRef.current) return;\n                    if (window._resizeData?.isResizing) return;\n                    setIsResizeGestureActive(false);\n                    setPressedResizeAnchorName({\n                        \"SelectionBounds.useEffect.cleanupId\": (current)=>current ? null : current\n                    }[\"SelectionBounds.useEffect.cleanupId\"]);\n                }\n            }[\"SelectionBounds.useEffect.cleanupId\"], isMobile ? 900 : 700);\n            return ({\n                \"SelectionBounds.useEffect\": ()=>clearTimeout(cleanupId)\n            })[\"SelectionBounds.useEffect\"];\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        isResizeGestureActive,\n        isMobile,\n        selectedElements.join(\",\")\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const tr = transformerRef.current;\n            if (!tr) return;\n            try {\n                if (tr.isTransforming?.()) return;\n            } catch  {}\n            try {\n                tr.forceUpdate?.();\n            } catch  {}\n            tr.getLayer?.()?.batchDraw?.();\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        resizeHintPhase,\n        isResizeGestureActive,\n        pressedResizeAnchorName\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>({\n                \"SelectionBounds.useEffect\": ()=>{\n                    stopNativeTransformerIfActive();\n                    clearResizeHintTimers();\n                }\n            })[\"SelectionBounds.useEffect\"]\n    }[\"SelectionBounds.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            if (selectedElements.length === 0 || !deberiaUsarTransformer) {\n                stopResizeHintPulse();\n                stopNativeTransformerIfActive();\n                setIsResizeGestureActive(false);\n                setPressedResizeAnchorName({\n                    \"SelectionBounds.useEffect\": (current)=>current ? null : current\n                }[\"SelectionBounds.useEffect\"]);\n                return;\n            }\n            if (isDragging && !isTransformingResizeRef.current) {\n                stopResizeHintPulse();\n                setIsResizeGestureActive(false);\n                setPressedResizeAnchorName({\n                    \"SelectionBounds.useEffect\": (current)=>current ? null : current\n                }[\"SelectionBounds.useEffect\"]);\n            }\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        selectedElements.length,\n        isDragging,\n        deberiaUsarTransformer\n    ]);\n    // 🔥 Efecto principal del Transformer (SIN retry / SIN flicker)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const tr = transformerRef.current;\n            if (!tr) return;\n            const selKey = selectedElements.join(\",\");\n            const nativeTransforming = Boolean(tr.isTransforming?.());\n            TRDBG(\"EFFECT start\", {\n                selKey,\n                isDragging,\n                deberiaUsarTransformer,\n                hasGallery,\n                elementosTransformablesLen: elementosTransformables.length,\n                transformTick,\n                editingId: window.editing?.id || null,\n                nativeTransforming\n            });\n            // Evita re-attach del transformer mientras Konva esta en medio del gesto.\n            if (nativeTransforming || isTransformingResizeRef.current) {\n                TRDBG(\"EFFECT exit: transform in flight\", {\n                    selKey,\n                    nativeTransforming\n                });\n                return;\n            }\n            // Si no corresponde transformer, no hagas detach agresivo (evita flicker)\n            if (!deberiaUsarTransformer) {\n                TRDBG(\"EFFECT exit: no transformer or gallery\", {\n                    selKey\n                });\n                return;\n            }\n            // Resolver nodes desde refs (fuente de verdad)\n            let nodosTransformables = elementosTransformables.map({\n                \"SelectionBounds.useEffect.nodosTransformables\": (o)=>elementRefs.current?.[o.id]\n            }[\"SelectionBounds.useEffect.nodosTransformables\"]).filter(Boolean);\n            // Single select: usar ref fresco SIEMPRE\n            if (selectedElements.length === 1) {\n                const idSel = selectedElements[0];\n                const refNode = elementRefs.current?.[idSel] || null;\n                if (refNode && typeof refNode.getClientRect === \"function\") {\n                    if (esGaleria && typeof refNode.findOne === \"function\") {\n                        const galleryFrame = refNode.findOne(\".gallery-transform-frame\");\n                        if (galleryFrame && typeof galleryFrame.getClientRect === \"function\") {\n                            nodosTransformables = [\n                                galleryFrame\n                            ];\n                        } else {\n                            nodosTransformables = [\n                                refNode\n                            ];\n                        }\n                    } else {\n                        nodosTransformables = [\n                            refNode\n                        ];\n                    }\n                }\n            }\n            // Si aún no hay nodos (imagen cargando, etc.), NO despegar (evita parpadeo)\n            if (nodosTransformables.length === 0) {\n                TRDBG(\"EFFECT exit: no nodes yet\", {\n                    selKey,\n                    wantedIds: elementosTransformables.map({\n                        \"SelectionBounds.useEffect\": (o)=>o.id\n                    }[\"SelectionBounds.useEffect\"]),\n                    refsPresent: elementosTransformables.map({\n                        \"SelectionBounds.useEffect\": (o)=>!!elementRefs.current?.[o.id]\n                    }[\"SelectionBounds.useEffect\"])\n                });\n                return;\n            }\n            // Attach estable\n            TRDBG(\"ATTACH try\", {\n                selKey,\n                nodesCount: nodosTransformables.length,\n                nodeIds: nodosTransformables.map({\n                    \"SelectionBounds.useEffect\": (n)=>typeof n.id === \"function\" ? n.id() : n.attrs?.id\n                }[\"SelectionBounds.useEffect\"])\n            });\n            tr.nodes(nodosTransformables);\n            TRDBG(\"ATTACH done\", {\n                selKey,\n                trNodesCount: tr.nodes?.()?.length || 0\n            });\n            try {\n                tr.forceUpdate?.();\n            } catch  {}\n            tr.getLayer()?.batchDraw();\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        // Dependencias mínimas reales\n        selectedElements.join(\",\"),\n        deberiaUsarTransformer,\n        hasGallery,\n        elementosTransformables.length,\n        selectedGeomKey,\n        transformTick,\n        elementRefs\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const handler = {\n                \"SelectionBounds.useEffect.handler\": (e)=>{\n                    const id = e?.detail?.id;\n                    if (!id) return;\n                    TRDBG(\"REF event\", {\n                        id,\n                        isSelected: selectedElements.includes(id),\n                        selKey: selectedElements.join(\",\")\n                    });\n                    if (!selectedElements.includes(id)) return;\n                    setTransformTick({\n                        \"SelectionBounds.useEffect.handler\": (t)=>t + 1\n                    }[\"SelectionBounds.useEffect.handler\"]);\n                }\n            }[\"SelectionBounds.useEffect.handler\"];\n            window.addEventListener(\"element-ref-registrado\", handler);\n            return ({\n                \"SelectionBounds.useEffect\": ()=>window.removeEventListener(\"element-ref-registrado\", handler)\n            })[\"SelectionBounds.useEffect\"];\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        selectedElements.join(\",\")\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectionBounds.useEffect\": ()=>{\n            const firstId = selectedElements?.[0];\n            if (!firstId) return;\n            const firstNode = elementRefs.current?.[firstId];\n            const stage = firstNode?.getStage?.();\n            if (!stage) return;\n            let rafId = null;\n            const syncTransformer = {\n                \"SelectionBounds.useEffect.syncTransformer\": ()=>{\n                    if (rafId != null) return;\n                    rafId = requestAnimationFrame({\n                        \"SelectionBounds.useEffect.syncTransformer\": ()=>{\n                            rafId = null;\n                            const tr = transformerRef.current;\n                            if (!tr) return;\n                            try {\n                                if (tr.isTransforming?.()) return;\n                            } catch  {}\n                            try {\n                                tr.forceUpdate?.();\n                            } catch  {}\n                            tr.getLayer?.()?.batchDraw?.();\n                        }\n                    }[\"SelectionBounds.useEffect.syncTransformer\"]);\n                }\n            }[\"SelectionBounds.useEffect.syncTransformer\"];\n            stage.on(\"dragmove\", syncTransformer);\n            stage.on(\"dragend\", syncTransformer);\n            return ({\n                \"SelectionBounds.useEffect\": ()=>{\n                    stage.off(\"dragmove\", syncTransformer);\n                    stage.off(\"dragend\", syncTransformer);\n                    if (rafId != null) cancelAnimationFrame(rafId);\n                }\n            })[\"SelectionBounds.useEffect\"];\n        }\n    }[\"SelectionBounds.useEffect\"], [\n        selectedElements.join(\",\"),\n        elementRefs\n    ]);\n    // 🔥 Render\n    if (selectedElements.length === 0) return null;\n    if (hayLineas && elementosTransformables.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BoundsIndicator, {\n            selectedElements: selectedElements,\n            elementRefs: elementRefs,\n            objetos: objetos\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n            lineNumber: 737,\n            columnNumber: 7\n        }, this);\n    }\n    if (hayLineas && elementosTransformables.length > 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BoundsIndicator, {\n            selectedElements: selectedElements,\n            elementRefs: elementRefs,\n            objetos: objetos\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n            lineNumber: 747,\n            columnNumber: 7\n        }, this);\n    }\n    const isResizeHintVisible = resizeHintPhase > 0 && !isResizeGestureActive && !isTransformingResizeRef.current;\n    const transformerBorderStroke = isResizeHintVisible ? \"#A855F7\" : \"#9333EA\";\n    const transformerBorderVisualWidth = isResizeHintVisible ? resizeHintPhase === 2 ? transformerHintBorderStrongStrokeWidth : transformerHintBorderSoftStrokeWidth : transformerBorderStrokeWidth;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Transformer, {\n        name: \"ui\",\n        ref: transformerRef,\n        // 🔵 borde siempre visible\n        borderEnabled: true,\n        borderStroke: transformerBorderStroke,\n        borderStrokeWidth: transformerBorderVisualWidth,\n        padding: transformerPadding,\n        // ❌ nodos y rotación OFF durante drag\n        enabledAnchors: isDragging && !isResizeGestureActive ? [] : [\n            \"bottom-right\"\n        ],\n        rotateEnabled: !isDragging && !esGaleria,\n        onMouseDown: handleResizeAnchorPressStart,\n        onTouchStart: handleResizeAnchorPressStart,\n        onPointerDown: handleResizeAnchorPressStart,\n        onMouseUp: clearResizeAnchorPressFeedback,\n        onTouchEnd: clearResizeAnchorPressFeedback,\n        onPointerUp: clearResizeAnchorPressFeedback,\n        onTouchCancel: clearResizeAnchorPressFeedback,\n        onPointerCancel: clearResizeAnchorPressFeedback,\n        anchorFill: transformerAnchorFillColor,\n        anchorStroke: transformerAnchorStrokeColor,\n        anchorStrokeWidth: transformerAnchorStrokeWidth,\n        anchorSize: transformerAnchorSize,\n        anchorCornerRadius: transformerAnchorRadius,\n        anchorShadowColor: transformerAnchorShadowColor,\n        anchorShadowBlur: transformerAnchorShadowBlur,\n        anchorShadowOffset: {\n            x: 0,\n            y: transformerAnchorShadowOffsetY\n        },\n        anchorStyleFunc: (anchor)=>{\n            const anchorName = typeof anchor?.name === \"function\" ? String(anchor.name() || \"\").split(\" \")[0] : \"\";\n            const isResizeAnchorNode = Boolean(anchorName);\n            const isResizeActiveFallback = isResizeGestureActive || isTransformingResizeRef.current ||  false && 0;\n            const isPressedResizeAnchor = isResizeActiveFallback && isResizeAnchorNode && (!pressedResizeAnchorName || anchorName === pressedResizeAnchorName);\n            const isResizeHintAnchor = !isPressedResizeAnchor && !isResizeActiveFallback && isResizeAnchorNode && resizeHintPhase > 0;\n            const isStrongResizeHint = isResizeHintAnchor && resizeHintPhase === 2;\n            const anchorFillColor = isPressedResizeAnchor ? transformerAnchorPressedFillColor : isResizeHintAnchor ? transformerAnchorHintFillColor : transformerAnchorFillColor;\n            let anchorShadowColor = isPressedResizeAnchor ? transformerAnchorPressedShadowColor : isResizeHintAnchor ? transformerAnchorHintShadowColor : transformerAnchorShadowColor;\n            let anchorShadowBlur = isPressedResizeAnchor ? transformerAnchorPressedShadowBlur : isResizeHintAnchor ? isStrongResizeHint ? transformerAnchorHintStrongShadowBlur : transformerAnchorHintSoftShadowBlur : transformerAnchorShadowBlur;\n            let anchorShadowOpacity = isPressedResizeAnchor ? 1 : isResizeHintAnchor ? isStrongResizeHint ? isMobile ? 1 : 0.72 : isMobile ? 0.85 : 0.42 : isMobile ? 0.26 : 0.12;\n            let anchorStrokeColor = isPressedResizeAnchor ? transformerAnchorPressedHaloStrokeColor : isResizeHintAnchor ? transformerAnchorHintStrokeColor : transformerAnchorStrokeColor;\n            let anchorStrokeWidth = isPressedResizeAnchor ? transformerAnchorPressedHaloStrokeWidth : isResizeHintAnchor ? isStrongResizeHint ? isMobile ? 3.4 : 3.3 : isMobile ? 2.8 : 2.8 : transformerAnchorStrokeWidth;\n            const anchorHitStrokeWidth = isPressedResizeAnchor ? transformerAnchorPressedHitStrokeWidth : isResizeHintAnchor ? transformerAnchorHintHitStrokeWidth : transformerAnchorHitStrokeWidth;\n            let anchorScale = isPressedResizeAnchor ? transformerAnchorPressedScale : isResizeHintAnchor ? isStrongResizeHint ? transformerAnchorHintStrongScale : transformerAnchorHintSoftScale : 1;\n            anchor.shadowColor(anchorShadowColor);\n            anchor.fill(anchorFillColor);\n            anchor.shadowEnabled(true);\n            // En pressed, el halo nace más cerca del anillo para que se note mejor.\n            anchor.shadowForStrokeEnabled(true);\n            anchor.shadowOpacity(anchorShadowOpacity);\n            anchor.shadowBlur(anchorShadowBlur);\n            anchor.shadowOffset({\n                x: 0,\n                y: isPressedResizeAnchor ? transformerAnchorPressedShadowOffsetY : isResizeHintAnchor ? isMobile ? 0 : transformerAnchorShadowOffsetY : transformerAnchorShadowOffsetY\n            });\n            anchor.hitStrokeWidth(anchorHitStrokeWidth);\n            anchor.stroke(anchorStrokeColor);\n            anchor.strokeWidth(anchorStrokeWidth);\n            anchor.opacity(isResizeHintAnchor || isPressedResizeAnchor ? 1 : 0.98);\n            anchor.scale({\n                x: anchorScale,\n                y: anchorScale\n            });\n        },\n        keepRatio: lockAspectCountdown || esGaleria || lockAspectText,\n        centeredScaling: selectedElements.length === 1 && esTexto,\n        flipEnabled: false,\n        resizeEnabled: !isDragging || isResizeGestureActive,\n        rotationSnaps: [\n            0,\n            45,\n            90,\n            135,\n            180,\n            225,\n            270,\n            315\n        ],\n        rotateAnchorOffset: transformerRotateOffset,\n        rotationSnapTolerance: transformerRotationSnapTolerance,\n        boundBoxFunc: (oldBox, newBox)=>{\n            const minSize = esTexto ? 20 : 10;\n            const maxSize = 800;\n            if (esGaleria) {\n                const rows = Math.max(1, Number(primerElemento?.rows) || 1);\n                const cols = Math.max(1, Number(primerElemento?.cols) || 1);\n                const gap = Math.max(0, Number(primerElemento?.gap) || 0);\n                const cellRatio = primerElemento?.ratio === \"4:3\" ? 3 / 4 : primerElemento?.ratio === \"16:9\" ? 9 / 16 : 1;\n                const minGridWidth = gap * (cols - 1) + cols;\n                const nextWidth = Math.min(maxSize, Math.max(minSize, minGridWidth, Math.abs(newBox.width)));\n                const cellW = Math.max(1, (nextWidth - gap * (cols - 1)) / cols);\n                const cellH = cellW * cellRatio;\n                const nextHeight = rows * cellH + gap * (rows - 1);\n                return keepBoxInsideStage(oldBox, {\n                    ...newBox,\n                    width: nextWidth,\n                    height: Math.max(minSize, nextHeight)\n                });\n            }\n            if (newBox.width < minSize || newBox.height < minSize) {\n                return oldBox;\n            }\n            if (lockAspectCountdown) {\n                const baseW = Math.max(1, oldBox.width);\n                const baseH = Math.max(1, oldBox.height);\n                const ratio = baseW / baseH;\n                const dw = Math.abs(newBox.width - oldBox.width) / baseW;\n                const dh = Math.abs(newBox.height - oldBox.height) / baseH;\n                let width = newBox.width;\n                let height = newBox.height;\n                if (dh > dw) {\n                    width = height * ratio;\n                } else {\n                    height = width / ratio;\n                }\n                return keepBoxInsideStage(oldBox, {\n                    ...newBox,\n                    width: Math.min(Math.max(width, minSize), maxSize),\n                    height: Math.min(Math.max(height, minSize), maxSize)\n                });\n            }\n            if (primerElemento?.tipo === \"forma\" && primerElemento?.figura === \"circle\") {\n                const size = Math.max(newBox.width, newBox.height);\n                const finalSize = Math.min(size, maxSize);\n                return keepBoxInsideStage(oldBox, {\n                    ...newBox,\n                    width: finalSize,\n                    height: finalSize\n                });\n            }\n            if (esTriangulo) {\n                const safeOldW = Math.max(1, Math.abs(oldBox.width || minSize));\n                const safeOldH = Math.max(1, Math.abs(oldBox.height || minSize));\n                const scaleX = Math.abs(newBox.width) / safeOldW;\n                const scaleY = Math.abs(newBox.height) / safeOldH;\n                const uniformScale = Math.max(0.05, Math.min(scaleX, scaleY));\n                const width = Math.min(Math.max(safeOldW * uniformScale, minSize), maxSize);\n                const height = Math.min(Math.max(safeOldH * uniformScale, minSize), maxSize);\n                return keepBoxInsideStage(oldBox, {\n                    ...newBox,\n                    width,\n                    height\n                });\n            }\n            if (primerElemento?.tipo === \"imagen\" || primerElemento?.tipo === \"icono\") {\n                const scaleX = newBox.width / oldBox.width;\n                const scaleY = newBox.height / oldBox.height;\n                const uniformScale = Math.min(scaleX, scaleY);\n                const newWidth = oldBox.width * uniformScale;\n                const newHeight = oldBox.height * uniformScale;\n                return keepBoxInsideStage(oldBox, {\n                    ...newBox,\n                    width: Math.min(Math.max(newWidth, minSize), maxSize),\n                    height: Math.min(Math.max(newHeight, minSize), maxSize)\n                });\n            }\n            return keepBoxInsideStage(oldBox, {\n                ...newBox,\n                width: Math.min(newBox.width, maxSize),\n                height: Math.min(newBox.height, maxSize)\n            });\n        },\n        onTransformStart: (e)=>{\n            stopResizeHintPulse();\n            isTransformingResizeRef.current = true;\n            window._resizeData = {\n                isResizing: true\n            };\n            const tr = transformerRef.current;\n            const activeAnchor = typeof tr?.getActiveAnchor === \"function\" ? tr.getActiveAnchor() : null;\n            const isRotateGesture = typeof activeAnchor === \"string\" && activeAnchor.toLowerCase().includes(\"rotat\");\n            transformGestureRef.current = {\n                isRotate: isRotateGesture,\n                activeAnchor: activeAnchor ?? null\n            };\n            setIsResizeGestureActive(true);\n            if (activeAnchor) {\n                setPressedResizeAnchorName((current)=>current === activeAnchor ? current : activeAnchor);\n            }\n            if (typeof onTransformInteractionStart === \"function\") {\n                onTransformInteractionStart({\n                    isRotate: isRotateGesture,\n                    activeAnchor: activeAnchor ?? null,\n                    pointerType: e?.evt?.pointerType ?? null\n                });\n            }\n            try {\n                const nodes = tr?.nodes?.() || [];\n                circleAnchorRef.current = null;\n                textTransformAnchorRef.current = null;\n                if (nodes.length === 1 && primerElemento?.tipo === \"forma\" && primerElemento?.figura === \"circle\") {\n                    try {\n                        const r0 = nodes[0].getClientRect({\n                            skipTransform: false,\n                            skipShadow: true,\n                            skipStroke: true\n                        });\n                        circleAnchorRef.current = {\n                            left: r0.x,\n                            top: r0.y\n                        };\n                    } catch  {}\n                }\n                if (nodes.length === 1 && esTexto) {\n                    const node = nodes[0];\n                    let centerX = null;\n                    let centerY = null;\n                    let baseWidth = null;\n                    let baseHeight = null;\n                    let baseVisualWidth = null;\n                    try {\n                        const rect = node.getClientRect({\n                            skipTransform: false,\n                            skipShadow: true,\n                            skipStroke: true\n                        });\n                        if (Number.isFinite(rect?.x) && Number.isFinite(rect?.width)) {\n                            centerX = rect.x + rect.width / 2;\n                        }\n                        if (Number.isFinite(rect?.y) && Number.isFinite(rect?.height)) {\n                            centerY = rect.y + rect.height / 2;\n                        }\n                        if (Number.isFinite(rect?.width) && rect.width > 0) {\n                            baseWidth = rect.width;\n                            baseVisualWidth = rect.width;\n                        }\n                        if (Number.isFinite(rect?.height) && rect.height > 0) {\n                            baseHeight = rect.height;\n                        }\n                    } catch  {}\n                    const safeBaseFontSize = Number.isFinite(primerElemento?.fontSize) && primerElemento.fontSize > 0 ? primerElemento.fontSize : 24;\n                    textTransformAnchorRef.current = {\n                        y: typeof node?.y === \"function\" ? node.y() : 0,\n                        baseRotation: typeof node?.rotation === \"function\" ? node.rotation() || 0 : 0,\n                        centerX,\n                        centerY,\n                        baseWidth,\n                        baseHeight,\n                        baseFontSize: safeBaseFontSize,\n                        lastPreviewFontSize: safeBaseFontSize,\n                        lastPreviewCenterX: centerX,\n                        lastPreviewCenterY: centerY,\n                        lastPreviewVisualWidth: baseVisualWidth,\n                        previewTick: 0\n                    };\n                    TXTDBG(\"start\", {\n                        id: primerElemento?.id ?? null,\n                        baseFontSize: safeBaseFontSize,\n                        baseWidth,\n                        baseHeight,\n                        centerX,\n                        centerY,\n                        nodeX: typeof node?.x === \"function\" ? node.x() : null,\n                        nodeY: typeof node?.y === \"function\" ? node.y() : null,\n                        nodeScaleX: typeof node?.scaleX === \"function\" ? node.scaleX() : null,\n                        nodeScaleY: typeof node?.scaleY === \"function\" ? node.scaleY() : null\n                    });\n                }\n                const union = rectFromNodes(nodes);\n                const pad = typeof tr?.padding === \"function\" ? tr.padding() : 0;\n                const borderRect = union ? {\n                    x: union.x - pad,\n                    y: union.y - pad,\n                    width: union.width + pad * 2,\n                    height: union.height + pad * 2\n                } : null;\n                const n = nodes[0];\n                const id = n ? typeof n.id === \"function\" ? n.id() : n.attrs?.id : \"∅\";\n                const trRect = tr?.getClientRect?.({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                });\n                slog(\"[TR] start\", `id=${id}`, `nodes=${nodes.length}`, union ? `union(w=${union.width.toFixed(1)},h=${union.height.toFixed(1)})` : \"union(null)\", borderRect ? `border(w=${borderRect.width.toFixed(1)},h=${borderRect.height.toFixed(1)})` : \"border(null)\", trRect ? `trRect(w=${trRect.width.toFixed(1)},h=${trRect.height.toFixed(1)})` : \"trRect(null)\", `pad=${pad}`);\n            } catch  {}\n        },\n        onTransform: (e)=>{\n            if (!onTransform || !transformerRef.current) return;\n            const tr = transformerRef.current;\n            const nodes = typeof tr.nodes === \"function\" ? tr.nodes() || [] : [];\n            const node = nodes[0]; // ✅ nodo real (single select)\n            if (!node) return;\n            try {\n                const pose = getTransformPose(node);\n                const transformData = {\n                    x: pose.x,\n                    y: pose.y,\n                    rotation: pose.rotation,\n                    isPreview: true\n                };\n                if (esTexto) {\n                    const originalFontSize = primerElemento.fontSize || 24;\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    const anchorData = textTransformAnchorRef.current || null;\n                    const baseFontSize = Number.isFinite(anchorData?.baseFontSize) && anchorData.baseFontSize > 0 ? anchorData.baseFontSize : originalFontSize;\n                    const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                    let scaleFromRect = null;\n                    let liveRectWidth = null;\n                    const currentRotation = typeof node.rotation === \"function\" ? node.rotation() || 0 : 0;\n                    const baseRotation = Number(anchorData?.baseRotation);\n                    const rotationDelta = Number.isFinite(baseRotation) ? Math.abs(currentRotation - baseRotation) : 0;\n                    try {\n                        const rect = node.getClientRect({\n                            skipTransform: false,\n                            skipShadow: true,\n                            skipStroke: true\n                        });\n                        if (Number.isFinite(rect?.width) && rect.width > 0) {\n                            liveRectWidth = rect.width;\n                        }\n                        const baseWidth = Number(anchorData?.baseWidth);\n                        if (Number.isFinite(baseWidth) && baseWidth > 0 && Number.isFinite(rect?.width) && rect.width > 0) {\n                            scaleFromRect = rect.width / baseWidth;\n                        }\n                    } catch  {}\n                    const canUseRectScale = rotationDelta < 0.1;\n                    const effectiveScale = canUseRectScale && Number.isFinite(scaleFromRect) && scaleFromRect > 0 ? scaleFromRect : avgScale;\n                    transformData.fontSize = Math.max(6, Number((baseFontSize * effectiveScale).toFixed(3)));\n                    if (textTransformAnchorRef.current) {\n                        const tick = Number(textTransformAnchorRef.current.previewTick || 0) + 1;\n                        textTransformAnchorRef.current.previewTick = tick;\n                        textTransformAnchorRef.current.lastPreviewFontSize = transformData.fontSize;\n                        if (Number.isFinite(liveRectWidth) && liveRectWidth > 0) {\n                            textTransformAnchorRef.current.lastPreviewVisualWidth = liveRectWidth;\n                        }\n                        if (tick <= 2 || tick % 5 === 0) {\n                            TXTDBG(\"preview\", {\n                                id: primerElemento?.id ?? null,\n                                tick,\n                                scaleX,\n                                scaleY,\n                                avgScale,\n                                scaleFromRect,\n                                effectiveScale,\n                                baseFontSize,\n                                fontSize: transformData.fontSize,\n                                liveRectWidth,\n                                centerXTarget: textTransformAnchorRef.current?.centerX ?? null,\n                                nodeX: typeof node?.x === \"function\" ? node.x() : null,\n                                nodeY: typeof node?.y === \"function\" ? node.y() : null\n                            });\n                        }\n                    }\n                    transformData.scaleX = 1;\n                    transformData.scaleY = 1;\n                    if (canUseRectScale && Number.isFinite(textTransformAnchorRef.current?.y)) {\n                        transformData.y = textTransformAnchorRef.current.y;\n                    }\n                    if (Number.isFinite(textTransformAnchorRef.current?.centerX)) {\n                        transformData.textCenterX = textTransformAnchorRef.current.centerX;\n                        if (textTransformAnchorRef.current) {\n                            textTransformAnchorRef.current.lastPreviewCenterX = textTransformAnchorRef.current.centerX;\n                        }\n                    }\n                    if (Number.isFinite(textTransformAnchorRef.current?.centerY)) {\n                        transformData.textCenterY = textTransformAnchorRef.current.centerY;\n                        if (textTransformAnchorRef.current) {\n                            textTransformAnchorRef.current.lastPreviewCenterY = textTransformAnchorRef.current.centerY;\n                        }\n                    }\n                } else {\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    transformData.scaleX = scaleX;\n                    transformData.scaleY = scaleY;\n                    if (primerElemento?.tipo === \"countdown\") {\n                        const countdownSize = getCountdownScaledSize(node);\n                        transformData.width = countdownSize.width;\n                        transformData.height = countdownSize.height;\n                    } else if (esTriangulo) {\n                        const baseRadius = Number.isFinite(primerElemento?.radius) ? primerElemento.radius : 60;\n                        const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                        transformData.radius = Math.max(1, baseRadius * avgScale);\n                    } else {\n                        const originalWidth = primerElemento.width || 100;\n                        const originalHeight = primerElemento.height || 100;\n                        transformData.width = Math.abs(originalWidth * scaleX);\n                        transformData.height = Math.abs(originalHeight * scaleY);\n                    }\n                    if (primerElemento?.figura === \"circle\") {\n                        try {\n                            const liveRect = node.getClientRect({\n                                skipTransform: false,\n                                skipShadow: true,\n                                skipStroke: true\n                            });\n                            const diameter = Math.max(1, Math.max(liveRect.width, liveRect.height));\n                            transformData.radius = diameter / 2;\n                            const anchor = circleAnchorRef.current;\n                            if (anchor) {\n                                transformData.x = anchor.left + transformData.radius;\n                                transformData.y = anchor.top + transformData.radius;\n                            } else {\n                                transformData.x = liveRect.x + transformData.radius;\n                                transformData.y = liveRect.y + transformData.radius;\n                            }\n                        } catch  {}\n                    }\n                }\n                onTransform(transformData);\n                // --- LOG COMPACTO (opcional) ---\n                const id = (typeof node.id === \"function\" ? node.id() : node.attrs?.id) || \"∅\";\n                const sx = node.scaleX?.() ?? 1;\n                const sy = node.scaleY?.() ?? 1;\n                const r = node.getClientRect({\n                    skipTransform: false,\n                    skipShadow: true,\n                    skipStroke: true\n                });\n                slog(\"[TR] live\", `id=${id}`, `tipo=${primerElemento?.tipo || \"∅\"}`, `sx=${sx.toFixed(3)}`, `sy=${sy.toFixed(3)}`, `x=${(node.x?.() ?? 0).toFixed(1)}`, `y=${(node.y?.() ?? 0).toFixed(1)}`, `nodeRect(w=${r.width.toFixed(1)},h=${r.height.toFixed(1)})`, `w=${transformData.width ?? \"∅\"}`, `h=${transformData.height ?? \"∅\"}`);\n            } catch (error) {\n                console.warn(\"Error en onTransform:\", error);\n            }\n        },\n        onTransformEnd: (e)=>{\n            const interactionSnapshot = {\n                isRotate: Boolean(transformGestureRef.current?.isRotate),\n                activeAnchor: transformGestureRef.current?.activeAnchor ?? null,\n                pointerType: e?.evt?.pointerType ?? null\n            };\n            const notifyTransformInteractionEnd = ()=>{\n                if (typeof onTransformInteractionEnd === \"function\") {\n                    onTransformInteractionEnd(interactionSnapshot);\n                }\n                transformGestureRef.current = {\n                    isRotate: false,\n                    activeAnchor: null\n                };\n            };\n            try {\n                if (!transformerRef.current || !onTransform) return;\n                const tr = transformerRef.current;\n                const nodes = typeof tr.nodes === \"function\" ? tr.nodes() || [] : [];\n                // -------------------------\n                // MULTI-SELECCIÓN\n                // -------------------------\n                if (nodes.length > 1) {\n                    try {\n                        const tScaleX = typeof tr.scaleX === \"function\" ? tr.scaleX() || 1 : 1;\n                        const tScaleY = typeof tr.scaleY === \"function\" ? tr.scaleY() || 1 : 1;\n                        const avg = (Math.abs(tScaleX) + Math.abs(tScaleY)) / 2;\n                        const updates = nodes.map((n)=>{\n                            let id = null;\n                            try {\n                                id = (typeof n.id === \"function\" ? n.id() : n.attrs?.id) || null;\n                            } catch  {}\n                            if (!id) return null;\n                            const obj = (objetos || []).find((o)=>o.id === id);\n                            if (!obj) return null;\n                            const upd = {\n                                id,\n                                x: typeof n.x === \"function\" ? n.x() : obj.x,\n                                y: typeof n.y === \"function\" ? n.y() : obj.y,\n                                rotation: typeof n.rotation === \"function\" ? n.rotation() || 0 : obj.rotation || 0\n                            };\n                            if (obj.tipo === \"texto\") {\n                                const base = obj.fontSize || 24;\n                                upd.fontSize = Math.max(6, Math.round(base * avg));\n                                if (typeof n.scaleX === \"function\") {\n                                    n.scaleX(1);\n                                    n.scaleY(1);\n                                }\n                                return upd;\n                            }\n                            if (obj.tipo === \"forma\" && obj.figura === \"circle\") {\n                                const baseR = obj.radius || 50;\n                                upd.radius = baseR * avg;\n                                if (typeof n.scaleX === \"function\") {\n                                    n.scaleX(1);\n                                    n.scaleY(1);\n                                }\n                                return upd;\n                            }\n                            if (obj.tipo === \"forma\" && obj.figura === \"triangle\") {\n                                const baseR = obj.radius || 60;\n                                upd.radius = Math.max(1, baseR * avg);\n                                if (typeof n.scaleX === \"function\") {\n                                    n.scaleX(1);\n                                    n.scaleY(1);\n                                }\n                                return upd;\n                            }\n                            if (obj.tipo === \"countdown\") {\n                                const countdownSize = getCountdownScaledSize(n);\n                                upd.width = countdownSize.width;\n                                upd.height = countdownSize.height;\n                                return upd;\n                            }\n                            const baseW = obj.width != null ? obj.width : typeof n.width === \"function\" ? n.width() : 100;\n                            const baseH = obj.height != null ? obj.height : typeof n.height === \"function\" ? n.height() : 100;\n                            upd.width = Math.abs(baseW * tScaleX);\n                            upd.height = Math.abs(baseH * tScaleY);\n                            if (typeof n.scaleX === \"function\") {\n                                n.scaleX(1);\n                                n.scaleY(1);\n                            }\n                            return upd;\n                        }).filter(Boolean);\n                        onTransform({\n                            isFinal: true,\n                            batch: updates\n                        });\n                        if (typeof tr.scaleX === \"function\") {\n                            tr.scaleX(1);\n                            tr.scaleY(1);\n                        }\n                        tr.getLayer()?.batchDraw();\n                        window._resizeData = {\n                            isResizing: false\n                        };\n                        setTimeout(()=>{\n                            window._resizeData = null;\n                        }, 100);\n                        return;\n                    } catch (err) {\n                        console.warn(\"Error en onTransformEnd (multi):\", err);\n                        window._resizeData = null;\n                        return;\n                    }\n                }\n                // -------------------------\n                // SINGLE-SELECCIÓN\n                // -------------------------\n                const node = nodes[0];\n                if (!node) return;\n                const pose = getTransformPose(node);\n                const finalData = {\n                    x: pose.x,\n                    y: pose.y,\n                    rotation: pose.rotation,\n                    isFinal: true\n                };\n                let textPreviewEndSnapshot = null;\n                if (esTexto) {\n                    const originalFontSize = primerElemento.fontSize || 24;\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    const anchorData = textTransformAnchorRef.current || null;\n                    const baseFontSize = Number.isFinite(anchorData?.baseFontSize) && anchorData.baseFontSize > 0 ? anchorData.baseFontSize : originalFontSize;\n                    const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                    let scaleFromRect = null;\n                    let visualWidthFromRect = null;\n                    const currentRotation = typeof node.rotation === \"function\" ? node.rotation() || 0 : 0;\n                    const baseRotation = Number(anchorData?.baseRotation);\n                    const rotationDelta = Number.isFinite(baseRotation) ? Math.abs(currentRotation - baseRotation) : 0;\n                    try {\n                        const rect = node.getClientRect({\n                            skipTransform: false,\n                            skipShadow: true,\n                            skipStroke: true\n                        });\n                        if (Number.isFinite(rect?.width) && rect.width > 0) {\n                            visualWidthFromRect = rect.width;\n                        }\n                        const baseWidth = Number(anchorData?.baseWidth);\n                        if (Number.isFinite(baseWidth) && baseWidth > 0 && Number.isFinite(rect?.width) && rect.width > 0) {\n                            scaleFromRect = rect.width / baseWidth;\n                        }\n                    } catch  {}\n                    const canUseRectScale = rotationDelta < 0.1;\n                    const effectiveScale = canUseRectScale && Number.isFinite(scaleFromRect) && scaleFromRect > 0 ? scaleFromRect : avgScale;\n                    const computedFontSize = Math.max(6, Number((baseFontSize * effectiveScale).toFixed(3)));\n                    finalData.fontSize = Math.max(6, Number(Number.isFinite(anchorData?.lastPreviewFontSize) && anchorData.lastPreviewFontSize > 0 ? anchorData.lastPreviewFontSize : computedFontSize));\n                    finalData.scaleX = 1;\n                    finalData.scaleY = 1;\n                    if (canUseRectScale && Number.isFinite(anchorData?.y)) {\n                        finalData.y = anchorData.y;\n                    }\n                    if (Number.isFinite(anchorData?.lastPreviewCenterX)) {\n                        finalData.textCenterX = anchorData.lastPreviewCenterX;\n                    } else if (Number.isFinite(anchorData?.centerX)) {\n                        finalData.textCenterX = anchorData.centerX;\n                    }\n                    if (Number.isFinite(anchorData?.lastPreviewCenterY)) {\n                        finalData.textCenterY = anchorData.lastPreviewCenterY;\n                    } else if (Number.isFinite(anchorData?.centerY)) {\n                        finalData.textCenterY = anchorData.centerY;\n                    }\n                    const visualWidth = Number.isFinite(anchorData?.lastPreviewVisualWidth) && anchorData.lastPreviewVisualWidth > 0 ? anchorData.lastPreviewVisualWidth : visualWidthFromRect;\n                    if (Number.isFinite(visualWidth) && visualWidth > 0) {\n                        finalData.textVisualWidth = visualWidth;\n                    }\n                    textPreviewEndSnapshot = {\n                        id: primerElemento?.id ?? null,\n                        x: typeof node?.x === \"function\" ? node.x() : null,\n                        y: typeof node?.y === \"function\" ? node.y() : null,\n                        scaleX,\n                        scaleY,\n                        fontSize: typeof node?.fontSize === \"function\" ? node.fontSize() : null,\n                        rectWidth: Number.isFinite(visualWidthFromRect) ? visualWidthFromRect : null,\n                        rectHeight: null\n                    };\n                    try {\n                        const rectForSnapshot = node.getClientRect({\n                            skipTransform: false,\n                            skipShadow: true,\n                            skipStroke: true\n                        });\n                        if (Number.isFinite(rectForSnapshot?.height)) {\n                            textPreviewEndSnapshot.rectHeight = rectForSnapshot.height;\n                        }\n                    } catch  {}\n                    TXTDBG(\"end\", {\n                        id: primerElemento?.id ?? null,\n                        scaleX,\n                        scaleY,\n                        avgScale,\n                        scaleFromRect,\n                        effectiveScale,\n                        computedFontSize,\n                        finalFontSize: finalData.fontSize,\n                        textCenterX: finalData.textCenterX ?? null,\n                        textCenterY: finalData.textCenterY ?? null,\n                        textVisualWidth: finalData.textVisualWidth ?? null,\n                        nodeRectWidth: visualWidthFromRect,\n                        nodeX: typeof node?.x === \"function\" ? node.x() : null,\n                        nodeY: typeof node?.y === \"function\" ? node.y() : null\n                    });\n                    // Aplanar escala del texto en el release para evitar doble escalado\n                    // (escala del nodo + fontSize persistido).\n                    try {\n                        if (typeof node.scaleX === \"function\") node.scaleX(1);\n                        if (typeof node.scaleY === \"function\") node.scaleY(1);\n                        if (Number.isFinite(finalData.fontSize) && typeof node.fontSize === \"function\") {\n                            node.fontSize(finalData.fontSize);\n                        }\n                        const targetCenterX = Number(finalData.textCenterX);\n                        const targetCenterY = Number(finalData.textCenterY);\n                        if ((Number.isFinite(targetCenterX) || Number.isFinite(targetCenterY)) && typeof node.x === \"function\" && typeof node.y === \"function\") {\n                            try {\n                                const flattenedRect = node.getClientRect({\n                                    skipTransform: false,\n                                    skipShadow: true,\n                                    skipStroke: true\n                                });\n                                const flattenedCenterX = Number.isFinite(flattenedRect?.x) && Number.isFinite(flattenedRect?.width) ? flattenedRect.x + flattenedRect.width / 2 : null;\n                                const flattenedCenterY = Number.isFinite(flattenedRect?.y) && Number.isFinite(flattenedRect?.height) ? flattenedRect.y + flattenedRect.height / 2 : null;\n                                if (Number.isFinite(flattenedCenterX) && Number.isFinite(targetCenterX)) {\n                                    node.x(node.x() + (targetCenterX - flattenedCenterX));\n                                }\n                                if (Number.isFinite(flattenedCenterY) && Number.isFinite(targetCenterY)) {\n                                    node.y(node.y() + (targetCenterY - flattenedCenterY));\n                                }\n                            } catch  {}\n                        }\n                        node.getLayer()?.batchDraw();\n                    } catch (err) {\n                        console.warn(\"Error aplanando escala de texto (sync):\", err);\n                    }\n                    if (!canUseRectScale) {\n                        if (typeof node?.x === \"function\") {\n                            finalData.x = node.x();\n                        }\n                        if (typeof node?.y === \"function\") {\n                            finalData.y = node.y();\n                        }\n                    }\n                    // Para texto evitamos aplanar antes del commit en React,\n                    // así no aparece un frame intermedio con tamaño \"saltado\".\n                    textTransformAnchorRef.current = null;\n                } else {\n                    const scaleX = typeof node.scaleX === \"function\" ? node.scaleX() : 1;\n                    const scaleY = typeof node.scaleY === \"function\" ? node.scaleY() : 1;\n                    if (primerElemento?.tipo === \"countdown\") {\n                        // Countdown: persistir escala real para que el resultado final\n                        // sea exactamente el mismo que se ve al soltar.\n                        finalData.scaleX = scaleX;\n                        finalData.scaleY = scaleY;\n                        const countdownSize = getCountdownScaledSize(node);\n                        finalData.width = countdownSize.width;\n                        finalData.height = countdownSize.height;\n                    } else if (esTriangulo) {\n                        const baseRadius = Number.isFinite(primerElemento?.radius) ? primerElemento.radius : 60;\n                        const avgScale = (Math.abs(scaleX) + Math.abs(scaleY)) / 2;\n                        finalData.scaleX = 1;\n                        finalData.scaleY = 1;\n                        finalData.radius = Math.max(1, baseRadius * avgScale);\n                        try {\n                            node.scaleX(1);\n                            node.scaleY(1);\n                            if (typeof node.radius === \"function\") node.radius(finalData.radius);\n                            node.getLayer()?.batchDraw();\n                        } catch (err) {\n                            console.warn(\"Error aplanando escala de triángulo (sync):\", err);\n                        }\n                    } else {\n                        finalData.scaleX = 1;\n                        finalData.scaleY = 1;\n                        const originalWidth = primerElemento.width || 100;\n                        const originalHeight = primerElemento.height || 100;\n                        finalData.width = Math.abs(originalWidth * scaleX);\n                        finalData.height = Math.abs(originalHeight * scaleY);\n                        if (primerElemento?.figura === \"circle\") {\n                            try {\n                                const liveRect = node.getClientRect({\n                                    skipTransform: false,\n                                    skipShadow: true,\n                                    skipStroke: true\n                                });\n                                const diameter = Math.max(1, Math.max(liveRect.width, liveRect.height));\n                                finalData.radius = diameter / 2;\n                                const anchor = circleAnchorRef.current;\n                                if (anchor) {\n                                    finalData.x = anchor.left + finalData.radius;\n                                    finalData.y = anchor.top + finalData.radius;\n                                } else {\n                                    finalData.x = liveRect.x + finalData.radius;\n                                    finalData.y = liveRect.y + finalData.radius;\n                                }\n                            } catch  {}\n                        }\n                        // ✅ Aplanar escala INMEDIATO\n                        try {\n                            const fw = finalData.width;\n                            const fh = finalData.height;\n                            node.scaleX(1);\n                            node.scaleY(1);\n                            if (fw != null && typeof node.width === \"function\") node.width(fw);\n                            if (fh != null && typeof node.height === \"function\") node.height(fh);\n                            if (primerElemento?.figura === \"circle\" && finalData.radius != null && typeof node.radius === \"function\") {\n                                node.radius(finalData.radius);\n                            }\n                            node.getLayer()?.batchDraw();\n                        } catch (err) {\n                            console.warn(\"Error aplanando escalas (sync):\", err);\n                        }\n                    }\n                }\n                onTransform(finalData);\n                circleAnchorRef.current = null;\n                // ✅ Reatachar 1 vez, con ref fresco, en el próximo frame\n                try {\n                    const tr2 = transformerRef.current;\n                    if (!tr2) return;\n                    TRDBG(\"onTransformEnd -> schedule RAF reattach\", {\n                        selKey: selectedElements.join(\",\"),\n                        idSel: selectedElements?.[0] || null\n                    });\n                    requestAnimationFrame(()=>{\n                        const idSel = selectedElements?.[0];\n                        const freshNode = idSel ? elementRefs.current?.[idSel] : null;\n                        TRDBG(\"onTransformEnd RAF\", {\n                            idSel,\n                            hasFresh: !!freshNode,\n                            destroyed: !!freshNode?._destroyed,\n                            hasStage: !!freshNode?.getStage?.()\n                        });\n                        // Si el nodo no está listo, despegar y salir\n                        if (!freshNode || freshNode._destroyed || !freshNode.getStage?.()) {\n                            TRDBG(\"onTransformEnd RAF -> DETACH nodes([])\", {\n                                idSel\n                            });\n                            try {\n                                tr2.nodes([]);\n                                tr2.getLayer?.()?.batchDraw();\n                            } catch  {}\n                            return;\n                        }\n                        try {\n                            TRDBG(\"onTransformEnd RAF -> DETACH nodes([])\", {\n                                idSel\n                            });\n                            tr2.nodes([\n                                freshNode\n                            ]);\n                            tr2.forceUpdate();\n                            tr2.getLayer?.()?.batchDraw();\n                            if (textPreviewEndSnapshot && freshNode) {\n                                try {\n                                    const postRect = freshNode.getClientRect({\n                                        skipTransform: false,\n                                        skipShadow: true,\n                                        skipStroke: true\n                                    });\n                                    TXTDBG(\"post-commit:raf1\", {\n                                        id: idSel,\n                                        pre: textPreviewEndSnapshot,\n                                        post: {\n                                            x: typeof freshNode?.x === \"function\" ? freshNode.x() : null,\n                                            y: typeof freshNode?.y === \"function\" ? freshNode.y() : null,\n                                            scaleX: typeof freshNode?.scaleX === \"function\" ? freshNode.scaleX() : null,\n                                            scaleY: typeof freshNode?.scaleY === \"function\" ? freshNode.scaleY() : null,\n                                            fontSize: typeof freshNode?.fontSize === \"function\" ? freshNode.fontSize() : null,\n                                            rectWidth: Number.isFinite(postRect?.width) ? postRect.width : null,\n                                            rectHeight: Number.isFinite(postRect?.height) ? postRect.height : null\n                                        },\n                                        delta: {\n                                            width: Number.isFinite(postRect?.width) && Number.isFinite(textPreviewEndSnapshot.rectWidth) ? postRect.width - textPreviewEndSnapshot.rectWidth : null,\n                                            height: Number.isFinite(postRect?.height) && Number.isFinite(textPreviewEndSnapshot.rectHeight) ? postRect.height - textPreviewEndSnapshot.rectHeight : null\n                                        }\n                                    });\n                                } catch  {}\n                                requestAnimationFrame(()=>{\n                                    const freshNode2 = idSel ? elementRefs.current?.[idSel] : null;\n                                    if (!freshNode2) return;\n                                    try {\n                                        const postRect2 = freshNode2.getClientRect({\n                                            skipTransform: false,\n                                            skipShadow: true,\n                                            skipStroke: true\n                                        });\n                                        TXTDBG(\"post-commit:raf2\", {\n                                            id: idSel,\n                                            post: {\n                                                x: typeof freshNode2?.x === \"function\" ? freshNode2.x() : null,\n                                                y: typeof freshNode2?.y === \"function\" ? freshNode2.y() : null,\n                                                scaleX: typeof freshNode2?.scaleX === \"function\" ? freshNode2.scaleX() : null,\n                                                scaleY: typeof freshNode2?.scaleY === \"function\" ? freshNode2.scaleY() : null,\n                                                fontSize: typeof freshNode2?.fontSize === \"function\" ? freshNode2.fontSize() : null,\n                                                rectWidth: Number.isFinite(postRect2?.width) ? postRect2.width : null,\n                                                rectHeight: Number.isFinite(postRect2?.height) ? postRect2.height : null\n                                            },\n                                            deltaFromPre: {\n                                                width: Number.isFinite(postRect2?.width) && Number.isFinite(textPreviewEndSnapshot.rectWidth) ? postRect2.width - textPreviewEndSnapshot.rectWidth : null,\n                                                height: Number.isFinite(postRect2?.height) && Number.isFinite(textPreviewEndSnapshot.rectHeight) ? postRect2.height - textPreviewEndSnapshot.rectHeight : null\n                                            }\n                                        });\n                                    } catch  {}\n                                });\n                            }\n                        } catch  {}\n                    });\n                } catch  {}\n            } catch (error) {\n                console.warn(\"Error en onTransformEnd:\", error);\n                window._resizeData = null;\n            } finally{\n                isTransformingResizeRef.current = false;\n                setIsResizeGestureActive(false);\n                clearResizeAnchorPressFeedback();\n                notifyTransformInteractionEnd();\n            }\n        }\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectionBounds.jsx\",\n        lineNumber: 767,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL1NlbGVjdGlvbkJvdW5kcy5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHNCQUFzQjs7QUFDOEI7QUFDSjtBQUloRCxNQUFNSyx5QkFBeUI7QUFFL0IsTUFBTUMsUUFBUSxDQUFDLEdBQUdDO0lBQ2hCLElBQUksQ0FBQ0Ysd0JBQXdCO0lBQzdCRyxRQUFRQyxHQUFHLENBQUMsV0FBV0Y7QUFDekI7QUFDQSxNQUFNRyxPQUFPSjtBQUViLE1BQU1LLFFBQVEsQ0FBQyxHQUFHSjtJQUNoQixJQUFJLENBQUNLLE9BQU9DLFFBQVEsRUFBRTtJQUN0QkwsUUFBUUMsR0FBRyxDQUFDLGNBQWNGO0FBQzVCO0FBRUEsTUFBTU8sU0FBUyxDQUFDLEdBQUdQO0lBQ2pCLElBQUksSUFBNkIsRUFBRTtJQUNuQyxJQUFJLENBQUNLLE9BQU9HLGlCQUFpQixFQUFFO0lBQy9CUCxRQUFRQyxHQUFHLENBQUMsZ0JBQWdCRjtBQUM5QjtBQUdBLFNBQVNTLGNBQWNDLEtBQUs7SUFDMUIsSUFBSUMsT0FBT0MsVUFBVUMsT0FBT0QsVUFBVUUsT0FBTyxDQUFDRixVQUFVRyxPQUFPLENBQUNIO0lBRWhFLEtBQUssTUFBTUksS0FBS04sTUFBTztRQUNyQixJQUFJLENBQUNNLEdBQUdDLGVBQWU7UUFDdkIsTUFBTUMsSUFBSUYsRUFBRUMsYUFBYSxDQUFDO1lBQUVFLGVBQWU7WUFBT0MsWUFBWTtZQUFNQyxZQUFZO1FBQUs7UUFDckZWLE9BQU9XLEtBQUtDLEdBQUcsQ0FBQ1osTUFBTU8sRUFBRU0sQ0FBQztRQUN6QlgsT0FBT1MsS0FBS0MsR0FBRyxDQUFDVixNQUFNSyxFQUFFTyxDQUFDO1FBQ3pCWCxPQUFPUSxLQUFLSSxHQUFHLENBQUNaLE1BQU1JLEVBQUVNLENBQUMsR0FBR04sRUFBRVMsS0FBSztRQUNuQ1osT0FBT08sS0FBS0ksR0FBRyxDQUFDWCxNQUFNRyxFQUFFTyxDQUFDLEdBQUdQLEVBQUVVLE1BQU07SUFD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K1csdUJBQXVCTSxVQUFVLEdBQ3JEOzRDQUNSO3dDQUNGO29DQUNGLEVBQUUsT0FBTSxDQUFDO2dDQUNYOzRCQUNGO3dCQUNGLEVBQUUsT0FBTSxDQUFFO29CQUNaO2dCQUNGLEVBQUUsT0FBTSxDQUFFO1lBR1osRUFBRSxPQUFPOVQsT0FBTztnQkFDZGxGLFFBQVEwWCxJQUFJLENBQUMsNEJBQTRCeFM7Z0JBQ3pDOUUsT0FBTzROLFdBQVcsR0FBRztZQUN2QixTQUFVO2dCQUNSN0csd0JBQXdCbEUsT0FBTyxHQUFHO2dCQUNsQ29FLHlCQUF5QjtnQkFDekIwRDtnQkFDQThNO1lBQ0Y7UUFDRjs7Ozs7O0FBSU4iLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcU2VsZWN0aW9uQm91bmRzLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTZWxlY3Rpb25Cb3VuZHMuanN4XHJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBUcmFuc2Zvcm1lciwgUmVjdCB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xyXG5cclxuXHJcblxyXG5jb25zdCBERUJVR19TRUxFQ1RJT05fQk9VTkRTID0gZmFsc2U7XHJcblxyXG5jb25zdCBzYkxvZyA9ICguLi5hcmdzKSA9PiB7XHJcbiAgaWYgKCFERUJVR19TRUxFQ1RJT05fQk9VTkRTKSByZXR1cm47XHJcbiAgY29uc29sZS5sb2coXCJbU0JdXCIsIC4uLmFyZ3MpO1xyXG59O1xyXG5jb25zdCBzbG9nID0gc2JMb2c7XHJcblxyXG5jb25zdCBUUkRCRyA9ICguLi5hcmdzKSA9PiB7XHJcbiAgaWYgKCF3aW5kb3cuX19EQkdfVFIpIHJldHVybjtcclxuICBjb25zb2xlLmxvZyhcIltUUkRCR11cIiwgLi4uYXJncyk7XHJcbn07XHJcblxyXG5jb25zdCBUWFREQkcgPSAoLi4uYXJncykgPT4ge1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XHJcbiAgaWYgKCF3aW5kb3cuX19EQkdfVEVYVF9SRVNJWkUpIHJldHVybjtcclxuICBjb25zb2xlLmxvZyhcIltURVhULVRSXVwiLCAuLi5hcmdzKTtcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiByZWN0RnJvbU5vZGVzKG5vZGVzKSB7XHJcbiAgbGV0IG1pblggPSBJbmZpbml0eSwgbWluWSA9IEluZmluaXR5LCBtYXhYID0gLUluZmluaXR5LCBtYXhZID0gLUluZmluaXR5O1xyXG5cclxuICBmb3IgKGNvbnN0IG4gb2Ygbm9kZXMpIHtcclxuICAgIGlmICghbj8uZ2V0Q2xpZW50UmVjdCkgY29udGludWU7XHJcbiAgICBjb25zdCByID0gbi5nZXRDbGllbnRSZWN0KHsgc2tpcFRyYW5zZm9ybTogZmFsc2UsIHNraXBTaGFkb3c6IHRydWUsIHNraXBTdHJva2U6IHRydWUgfSk7XHJcbiAgICBtaW5YID0gTWF0aC5taW4obWluWCwgci54KTtcclxuICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCByLnkpO1xyXG4gICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIHIueCArIHIud2lkdGgpO1xyXG4gICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHIueSArIHIuaGVpZ2h0KTtcclxuICB9XHJcblxyXG4gIGlmIChtaW5YID09PSBJbmZpbml0eSkgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIHsgeDogbWluWCwgeTogbWluWSwgd2lkdGg6IG1heFggLSBtaW5YLCBoZWlnaHQ6IG1heFkgLSBtaW5ZIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvdW50ZG93blNjYWxlZFNpemUobm9kZSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBoaXRib3ggPSBub2RlPy5maW5kT25lPy4oXCIuY291bnRkb3duLWhpdGJveFwiKTtcclxuICAgIGNvbnN0IGJhc2VXID0gdHlwZW9mIGhpdGJveD8ud2lkdGggPT09IFwiZnVuY3Rpb25cIiA/IGhpdGJveC53aWR0aCgpIDogTmFOO1xyXG4gICAgY29uc3QgYmFzZUggPSB0eXBlb2YgaGl0Ym94Py5oZWlnaHQgPT09IFwiZnVuY3Rpb25cIiA/IGhpdGJveC5oZWlnaHQoKSA6IE5hTjtcclxuICAgIGNvbnN0IHN4ID0gTWF0aC5hYnModHlwZW9mIG5vZGU/LnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiID8gKG5vZGUuc2NhbGVYKCkgfHwgMSkgOiAxKTtcclxuICAgIGNvbnN0IHN5ID0gTWF0aC5hYnModHlwZW9mIG5vZGU/LnNjYWxlWSA9PT0gXCJmdW5jdGlvblwiID8gKG5vZGUuc2NhbGVZKCkgfHwgMSkgOiAxKTtcclxuXHJcbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGJhc2VXKSAmJiBOdW1iZXIuaXNGaW5pdGUoYmFzZUgpICYmIGJhc2VXID4gMCAmJiBiYXNlSCA+IDApIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB3aWR0aDogTWF0aC5hYnMoYmFzZVcgKiBzeCksXHJcbiAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyhiYXNlSCAqIHN5KSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9IGNhdGNoIHt9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByID0gbm9kZS5nZXRDbGllbnRSZWN0KHsgc2tpcFRyYW5zZm9ybTogZmFsc2UsIHNraXBTaGFkb3c6IHRydWUsIHNraXBTdHJva2U6IHRydWUgfSk7XHJcbiAgICByZXR1cm4geyB3aWR0aDogTWF0aC5hYnMoci53aWR0aCksIGhlaWdodDogTWF0aC5hYnMoci5oZWlnaHQpIH07XHJcbiAgfSBjYXRjaCB7fVxyXG5cclxuICByZXR1cm4geyB3aWR0aDogMTAwLCBoZWlnaHQ6IDUwIH07XHJcbn1cclxuXHJcblxyXG4vLyDwn46oIENvbXBvbmVudGUgcGFyYSBtb3N0cmFyIGJvdW5kcyBzaW4gdHJhbnNmb3JtZXIgKGzDrW5lYXMsIGV0Yy4pXHJcbmNvbnN0IEJvdW5kc0luZGljYXRvciA9ICh7IHNlbGVjdGVkRWxlbWVudHMsIGVsZW1lbnRSZWZzLCBvYmpldG9zIH0pID0+IHtcclxuICBjb25zdCBbZm9yY2VVcGRhdGUsIHNldEZvcmNlVXBkYXRlXSA9IHVzZVN0YXRlKDApO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgZmlyc3RSZWYgPSBlbGVtZW50UmVmcy5jdXJyZW50Py5bc2VsZWN0ZWRFbGVtZW50c1swXV07XHJcbiAgICBjb25zdCBzdGFnZSA9IGZpcnN0UmVmPy5nZXRTdGFnZT8uKCk7XHJcbiAgICBpZiAoIXN0YWdlKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaGFuZGxlRHJhZ01vdmUgPSAoKSA9PiB7XHJcbiAgICAgIHNldEZvcmNlVXBkYXRlKChwKSA9PiBwICsgMSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YWdlLm9uKFwiZHJhZ21vdmVcIiwgaGFuZGxlRHJhZ01vdmUpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgc3RhZ2Uub2ZmKFwiZHJhZ21vdmVcIiwgaGFuZGxlRHJhZ01vdmUpO1xyXG4gICAgfTtcclxuICB9LCBbc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKV0pO1xyXG5cclxuICBjb25zdCBlbGVtZW50b3NEYXRhID0gc2VsZWN0ZWRFbGVtZW50c1xyXG4gICAgLm1hcCgoaWQpID0+IG9iamV0b3MuZmluZCgob2JqKSA9PiBvYmouaWQgPT09IGlkKSlcclxuICAgIC5maWx0ZXIoQm9vbGVhbik7XHJcblxyXG4gIGlmIChlbGVtZW50b3NEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBsZXQgbWluWCA9IEluZmluaXR5LFxyXG4gICAgbWluWSA9IEluZmluaXR5LFxyXG4gICAgbWF4WCA9IC1JbmZpbml0eSxcclxuICAgIG1heFkgPSAtSW5maW5pdHk7XHJcblxyXG4gIGVsZW1lbnRvc0RhdGEuZm9yRWFjaCgob2JqKSA9PiB7XHJcbiAgICBjb25zdCBub2RlID0gZWxlbWVudFJlZnMuY3VycmVudFtvYmouaWRdO1xyXG4gICAgaWYgKCFub2RlKSByZXR1cm47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBvYmoucG9pbnRzIHx8IFswLCAwLCAxMDAsIDBdO1xyXG5cclxuICAgICAgICBjb25zdCBjbGVhblBvaW50cyA9IFtcclxuICAgICAgICAgIHBhcnNlRmxvYXQocG9pbnRzWzBdKSB8fCAwLFxyXG4gICAgICAgICAgcGFyc2VGbG9hdChwb2ludHNbMV0pIHx8IDAsXHJcbiAgICAgICAgICBwYXJzZUZsb2F0KHBvaW50c1syXSkgfHwgMTAwLFxyXG4gICAgICAgICAgcGFyc2VGbG9hdChwb2ludHNbM10pIHx8IDAsXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVhbFggPSBub2RlLngoKTtcclxuICAgICAgICBjb25zdCByZWFsWSA9IG5vZGUueSgpO1xyXG5cclxuICAgICAgICBjb25zdCB4MSA9IHJlYWxYICsgY2xlYW5Qb2ludHNbMF07XHJcbiAgICAgICAgY29uc3QgeTEgPSByZWFsWSArIGNsZWFuUG9pbnRzWzFdO1xyXG4gICAgICAgIGNvbnN0IHgyID0gcmVhbFggKyBjbGVhblBvaW50c1syXTtcclxuICAgICAgICBjb25zdCB5MiA9IHJlYWxZICsgY2xlYW5Qb2ludHNbM107XHJcblxyXG4gICAgICAgIGNvbnN0IGxpbmVQYWRkaW5nID0gNTtcclxuXHJcbiAgICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIHgxIC0gbGluZVBhZGRpbmcsIHgyIC0gbGluZVBhZGRpbmcpO1xyXG4gICAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCB5MSAtIGxpbmVQYWRkaW5nLCB5MiAtIGxpbmVQYWRkaW5nKTtcclxuICAgICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgeDEgKyBsaW5lUGFkZGluZywgeDIgKyBsaW5lUGFkZGluZyk7XHJcbiAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHkxICsgbGluZVBhZGRpbmcsIHkyICsgbGluZVBhZGRpbmcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCh7IHNraXBUcmFuc2Zvcm06IGZhbHNlLCBza2lwU2hhZG93OiB0cnVlLCBza2lwU3Ryb2tlOiB0cnVlIH0pO1xyXG4gICAgICAgIGNvbnN0IHIgPSBib3g7XHJcbiAgICAgICAgY29uc3Qgc3ggPSAobm9kZT8uc2NhbGVYPy4oKSA/PyAxKTtcclxuICAgICAgICBjb25zdCBzeSA9IChub2RlPy5zY2FsZVk/LigpID8/IDEpO1xyXG4gICAgICAgIHNsb2coXHJcbiAgICAgICAgICBcIltCSV1cIixcclxuICAgICAgICAgIGBpZD0ke29iai5pZH1gLFxyXG4gICAgICAgICAgYHRpcG89JHtvYmoudGlwb31gLFxyXG4gICAgICAgICAgYHN4PSR7c3gudG9GaXhlZCgzKX1gLFxyXG4gICAgICAgICAgYHN5PSR7c3kudG9GaXhlZCgzKX1gLFxyXG4gICAgICAgICAgYHJlY3Qodz0ke3Iud2lkdGgudG9GaXhlZCgxKX0saD0ke3IuaGVpZ2h0LnRvRml4ZWQoMSl9KWBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCByZWFsWCA9IGJveC54O1xyXG4gICAgICAgIGNvbnN0IHJlYWxZID0gYm94Lnk7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gYm94LndpZHRoO1xyXG4gICAgICAgIGxldCBoZWlnaHQgPSBib3guaGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAob2JqLnRpcG8gPT09IFwidGV4dG9cIiAmJiBub2RlLmdldFRleHRIZWlnaHQpIHtcclxuICAgICAgICAgIGNvbnN0IHRleHRIZWlnaHQgPSBub2RlLmdldFRleHRIZWlnaHQoKTtcclxuICAgICAgICAgIGlmICh0ZXh0SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IHRleHRIZWlnaHQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgcmVhbFgpO1xyXG4gICAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCByZWFsWSk7XHJcbiAgICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIHJlYWxYICsgd2lkdGgpO1xyXG4gICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCByZWFsWSArIGhlaWdodCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrWCA9IG9iai54IHx8IDA7XHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrWSA9IG9iai55IHx8IDA7XHJcbiAgICAgIGNvbnN0IGZhbGxiYWNrU2l6ZSA9IDIwO1xyXG5cclxuICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIGZhbGxiYWNrWCk7XHJcbiAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCBmYWxsYmFja1kpO1xyXG4gICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgZmFsbGJhY2tYICsgZmFsbGJhY2tTaXplKTtcclxuICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIGZhbGxiYWNrWSArIGZhbGxiYWNrU2l6ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGlmIChtaW5YID09PSBJbmZpbml0eSB8fCBtYXhYID09PSAtSW5maW5pdHkpIHtcclxuICAgIGNvbnN0IHByaW1lckVsZW1lbnRvID0gZWxlbWVudG9zRGF0YVswXTtcclxuICAgIGlmICghcHJpbWVyRWxlbWVudG8pIHJldHVybiBudWxsO1xyXG4gICAgbWluWCA9IHByaW1lckVsZW1lbnRvLnggfHwgMDtcclxuICAgIG1pblkgPSBwcmltZXJFbGVtZW50by55IHx8IDA7XHJcbiAgICBtYXhYID0gbWluWCArIDEwMDtcclxuICAgIG1heFkgPSBtaW5ZICsgNTA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBwYWRkaW5nID0gMTA7XHJcbiAgY29uc3QgZmluYWxYID0gbWluWCAtIHBhZGRpbmc7XHJcbiAgY29uc3QgZmluYWxZID0gbWluWSAtIHBhZGRpbmc7XHJcbiAgY29uc3QgZmluYWxXaWR0aCA9IG1heFggLSBtaW5YICsgcGFkZGluZyAqIDI7XHJcbiAgY29uc3QgZmluYWxIZWlnaHQgPSBtYXhZIC0gbWluWSArIHBhZGRpbmcgKiAyO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFJlY3RcclxuICAgICAgbmFtZT1cInVpXCJcclxuICAgICAgeD17ZmluYWxYfVxyXG4gICAgICB5PXtmaW5hbFl9XHJcbiAgICAgIHdpZHRoPXtmaW5hbFdpZHRofVxyXG4gICAgICBoZWlnaHQ9e2ZpbmFsSGVpZ2h0fVxyXG4gICAgICBmaWxsPVwidHJhbnNwYXJlbnRcIlxyXG4gICAgICBzdHJva2U9XCIjOTMzM0VBXCJcclxuICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgIG9wYWNpdHk9ezAuN31cclxuICAgIC8+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNlbGVjdGlvbkJvdW5kcyh7XHJcbiAgc2VsZWN0ZWRFbGVtZW50cyxcclxuICBlbGVtZW50UmVmcyxcclxuICBvYmpldG9zLFxyXG4gIG9uVHJhbnNmb3JtLFxyXG4gIG9uVHJhbnNmb3JtSW50ZXJhY3Rpb25TdGFydCA9IG51bGwsXHJcbiAgb25UcmFuc2Zvcm1JbnRlcmFjdGlvbkVuZCA9IG51bGwsXHJcbiAgaXNEcmFnZ2luZyxcclxuICBpc01vYmlsZSA9IGZhbHNlLFxyXG59KSB7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgW3RyYW5zZm9ybVRpY2ssIHNldFRyYW5zZm9ybVRpY2tdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgbGFzdE5vZGVzUmVmID0gdXNlUmVmKFtdKTtcclxuICBjb25zdCBjaXJjbGVBbmNob3JSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgdGV4dFRyYW5zZm9ybUFuY2hvclJlZiA9IHVzZVJlZihudWxsKTtcclxuICBjb25zdCByZXNpemVIaW50VGltZXJzUmVmID0gdXNlUmVmKFtdKTtcclxuICBjb25zdCBsYXN0UmVzaXplSGludFNlbGVjdGlvbktleVJlZiA9IHVzZVJlZihcIlwiKTtcclxuICBjb25zdCB0cmFuc2Zvcm1HZXN0dXJlUmVmID0gdXNlUmVmKHtcclxuICAgIGlzUm90YXRlOiBmYWxzZSxcclxuICAgIGFjdGl2ZUFuY2hvcjogbnVsbCxcclxuICB9KTtcclxuICBjb25zdCBpc1RyYW5zZm9ybWluZ1Jlc2l6ZVJlZiA9IHVzZVJlZihmYWxzZSk7XHJcbiAgY29uc3QgW2lzUmVzaXplR2VzdHVyZUFjdGl2ZSwgc2V0SXNSZXNpemVHZXN0dXJlQWN0aXZlXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbcHJlc3NlZFJlc2l6ZUFuY2hvck5hbWUsIHNldFByZXNzZWRSZXNpemVBbmNob3JOYW1lXSA9IHVzZVN0YXRlKG51bGwpO1xyXG4gIGNvbnN0IFtyZXNpemVIaW50UGhhc2UsIHNldFJlc2l6ZUhpbnRQaGFzZV0gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBlbGVtZW50b3NTZWxlY2Npb25hZG9zRGF0YSA9IHNlbGVjdGVkRWxlbWVudHNcclxuICAgIC5tYXAoKGlkKSA9PiBvYmpldG9zLmZpbmQoKG9iaikgPT4gb2JqLmlkID09PSBpZCkpXHJcbiAgICAuZmlsdGVyKEJvb2xlYW4pO1xyXG5cclxuICBjb25zdCBwcmltZXJFbGVtZW50byA9IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhWzBdIHx8IG51bGw7XHJcbiAgY29uc3QgZXNUZXh0byA9IHByaW1lckVsZW1lbnRvPy50aXBvID09PSBcInRleHRvXCI7XHJcbiAgY29uc3QgZXNDb3VudGRvd24gPSBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJjb3VudGRvd25cIjtcclxuICBjb25zdCBlc0dhbGVyaWEgPSBzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJnYWxlcmlhXCI7XHJcbiAgY29uc3QgbG9ja0FzcGVjdENvdW50ZG93biA9IHNlbGVjdGVkRWxlbWVudHMubGVuZ3RoID09PSAxICYmIGVzQ291bnRkb3duO1xyXG4gIGNvbnN0IGxvY2tBc3BlY3RUZXh0ID0gc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGggPT09IDEgJiYgZXNUZXh0bztcclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvclNpemUgPSBpc01vYmlsZSA/IDMyIDogMTQ7IC8vdGFtYcOxbyB2aXN1YWwgZGVsIG5vZG8gKG3DoXMgZ3JhbmRlIGVuIG1vYmlsZSkuXHJcbiAgY29uc3QgdHJhbnNmb3JtZXJSb3RhdGVPZmZzZXQgPSBpc01vYmlsZSA/IDM0IDogMjQ7IC8vIGRpc3RhbmNpYSBkZWwgaGFuZGxlIGRlIHJvdGFjacOzbiBhbCBib3JkZS5cclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvclJhZGl1cyA9IDk5OTsgLy9yYWRpbyBkZSBlc3F1aW5hIGRlbCBub2RvICg5OTkgbG8gaGFjZSBjaXJjdWxhcikuXHJcbiAgY29uc3QgdHJhbnNmb3JtZXJQYWRkaW5nID0gaXNNb2JpbGUgPyAxNCA6IDQ7IC8vIGVzcGFjaW8gZXh0cmEgZW50cmUgYm9yZGUgZGVsIHRyYW5zZm9ybWVyIHkgZWxlbWVudG8uXHJcbiAgY29uc3QgdHJhbnNmb3JtZXJCb3JkZXJTdHJva2VXaWR0aCA9IGlzTW9iaWxlID8gMS41IDogMTsgLy9ncm9zb3IgZGVsIGJvcmRlIGRlbCB0cmFuc2Zvcm1lci5cclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvckZpbGxDb2xvciA9IFwiIzkzMzNFQVwiO1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9yU3Ryb2tlV2lkdGggPSBpc01vYmlsZSA/IDEuNCA6IDIuNTsgLy9ncm9zb3IgZGVsIGJvcmRlIGRlbCBub2RvLlxyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9yU2hhZG93Qmx1ciA9IGlzTW9iaWxlID8gOSA6IDY7IC8vIHF1w6kgdGFuIGRpZnVzYSBlcyBsYSBzb21icmEgYmFzZSBkZWwgbm9kby5cclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvclNoYWRvd09mZnNldFkgPSBpc01vYmlsZSA/IDQgOiAzOyAvLyBkZXNwbGF6YW1pZW50byB2ZXJ0aWNhbCBkZSBlc2Egc29tYnJhLlxyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9ySGl0U3Ryb2tlV2lkdGggPSBpc01vYmlsZSA/IDYyIDogMjA7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGl0U3Ryb2tlV2lkdGggPSBpc01vYmlsZSA/IDk2IDogMjQ7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JTdHJva2VDb2xvciA9IFwiI2ZmZmZmZlwiO1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9yUHJlc3NlZEhhbG9TdHJva2VDb2xvciA9IGlzTW9iaWxlXHJcbiAgICA/IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAxKVwiXHJcbiAgICA6IHRyYW5zZm9ybWVyQW5jaG9yU3Ryb2tlQ29sb3I7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGFsb1N0cm9rZVdpZHRoID0gaXNNb2JpbGUgPyA4LjggOiAzLjI7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JTaGFkb3dDb2xvciA9IFwicmdiYSgxNDcsIDUxLCAyMzQsIDAuMylcIjtcclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvclByZXNzZWRGaWxsQ29sb3IgPSBpc01vYmlsZVxyXG4gICAgPyBcIiNDMjZCRkZcIlxyXG4gICAgOiB0cmFuc2Zvcm1lckFuY2hvckZpbGxDb2xvcjtcclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvckhpbnRGaWxsQ29sb3IgPSBpc01vYmlsZVxyXG4gICAgPyBcIiNCNTZBRjhcIlxyXG4gICAgOiB0cmFuc2Zvcm1lckFuY2hvckZpbGxDb2xvcjtcclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvclByZXNzZWRTaGFkb3dDb2xvciA9IGlzTW9iaWxlXHJcbiAgICA/IFwicmdiYSgxNTAsIDMyLCAyNTUsIDEpXCJcclxuICAgIDogXCJyZ2JhKDE0NywgNTEsIDIzNCwgMC43KVwiO1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9yUHJlc3NlZFNoYWRvd0JsdXIgPSBpc01vYmlsZSA/IDkyIDogMTg7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkU2hhZG93T2Zmc2V0WSA9XHJcbiAgICBpc01vYmlsZSA/IDAgOiB0cmFuc2Zvcm1lckFuY2hvclNoYWRvd09mZnNldFkgKyAxO1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9yUHJlc3NlZFNjYWxlID0gaXNNb2JpbGUgPyAxLjIgOiAxLjE7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JIaW50U2hhZG93Q29sb3IgPSBpc01vYmlsZVxyXG4gICAgPyBcInJnYmEoMjE0LCAxNjUsIDI1NSwgMC45NSlcIlxyXG4gICAgOiBcInJnYmEoMTY3LCA4NiwgMjQ3LCAwLjgpXCI7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JIaW50U3Ryb2tlQ29sb3IgPSBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC45OClcIjtcclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvckhpbnRTdHJvbmdTY2FsZSA9IGlzTW9iaWxlID8gMS4xMiA6IDEuMTQ7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JIaW50U29mdFNjYWxlID0gaXNNb2JpbGUgPyAxLjA4IDogMS4wNztcclxuICBjb25zdCB0cmFuc2Zvcm1lckFuY2hvckhpbnRTdHJvbmdTaGFkb3dCbHVyID0gaXNNb2JpbGUgPyA1NCA6IDI0O1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9ySGludFNvZnRTaGFkb3dCbHVyID0gaXNNb2JpbGUgPyAzNCA6IDE0O1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVyQW5jaG9ySGludEhpdFN0cm9rZVdpZHRoID0gaXNNb2JpbGUgPyA4NCA6IDIyO1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVySGludEJvcmRlclN0cm9uZ1N0cm9rZVdpZHRoID0gaXNNb2JpbGUgPyAyLjggOiAxLjY7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJIaW50Qm9yZGVyU29mdFN0cm9rZVdpZHRoID0gaXNNb2JpbGUgPyAyLjIgOiAxLjI1O1xyXG4gIGNvbnN0IHRyYW5zZm9ybWVyUm90YXRpb25TbmFwVG9sZXJhbmNlID0gaXNNb2JpbGUgPyA4IDogNTsgLy90b2xlcmFuY2lhIHBhcmEg4oCcZW5jYWphcuKAnSByb3RhY2nDs24gZW4gw6FuZ3Vsb3MgZmlqb3MuXHJcbiAgY29uc3QgZXNUcmlhbmd1bG8gPVxyXG4gICAgcHJpbWVyRWxlbWVudG8/LnRpcG8gPT09IFwiZm9ybWFcIiAmJlxyXG4gICAgcHJpbWVyRWxlbWVudG8/LmZpZ3VyYSA9PT0gXCJ0cmlhbmdsZVwiO1xyXG5cclxuICBjb25zdCBoYXNHYWxsZXJ5ID0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc0RhdGEuc29tZShcclxuICAgIChvKSA9PiBvLnRpcG8gPT09IFwiZ2FsZXJpYVwiXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgaGF5TGluZWFzID0gZWxlbWVudG9zU2VsZWNjaW9uYWRvc0RhdGEuc29tZShcclxuICAgIChvYmopID0+IG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJsaW5lXCJcclxuICApO1xyXG5cclxuICBjb25zdCBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlcyA9IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhLmZpbHRlcihcclxuICAgIChvYmopID0+ICEob2JqLnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvYmouZmlndXJhID09PSBcImxpbmVcIilcclxuICApO1xyXG5cclxuICBjb25zdCBkZWJlcmlhVXNhclRyYW5zZm9ybWVyID1cclxuICAgIGVsZW1lbnRvc1RyYW5zZm9ybWFibGVzLmxlbmd0aCA+IDA7XHJcblxyXG4gIGNvbnN0IHNlbGVjdGVkR2VvbUtleSA9IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhXHJcbiAgICAubWFwKChvKSA9PlxyXG4gICAgICBbXHJcbiAgICAgICAgby5pZCxcclxuICAgICAgICBvLnggPz8gMCxcclxuICAgICAgICBvLnkgPz8gMCxcclxuICAgICAgICBvLndpZHRoID8/IFwiXCIsXHJcbiAgICAgICAgby5oZWlnaHQgPz8gXCJcIixcclxuICAgICAgICBvLnNjYWxlWCA/PyAxLFxyXG4gICAgICAgIG8uc2NhbGVZID8/IDEsXHJcbiAgICAgICAgby5yb3RhdGlvbiA/PyAwLFxyXG4gICAgICAgIG8uY2hpcFdpZHRoID8/IFwiXCIsXHJcbiAgICAgICAgby5nYXAgPz8gXCJcIixcclxuICAgICAgICBvLnBhZGRpbmdYID8/IFwiXCIsXHJcbiAgICAgICAgby5wYWRkaW5nWSA/PyBcIlwiLFxyXG4gICAgICBdLmpvaW4oXCI6XCIpXHJcbiAgICApXHJcbiAgICAuam9pbihcInxcIik7XHJcblxyXG4gIGNvbnN0IGdldFRyYW5zZm9ybVBvc2UgPSAobm9kZSkgPT4ge1xyXG4gICAgaWYgKCFub2RlKSByZXR1cm4geyB4OiAwLCB5OiAwLCByb3RhdGlvbjogMCB9O1xyXG5cclxuICAgIGlmIChlc0dhbGVyaWEgJiYgdHlwZW9mIG5vZGUuZ2V0UGFyZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5nZXRQYXJlbnQoKTtcclxuICAgICAgaWYgKHBhcmVudCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB4OiB0eXBlb2YgcGFyZW50LnggPT09IFwiZnVuY3Rpb25cIiA/IHBhcmVudC54KCkgOiAwLFxyXG4gICAgICAgICAgeTogdHlwZW9mIHBhcmVudC55ID09PSBcImZ1bmN0aW9uXCIgPyBwYXJlbnQueSgpIDogMCxcclxuICAgICAgICAgIHJvdGF0aW9uOiB0eXBlb2YgcGFyZW50LnJvdGF0aW9uID09PSBcImZ1bmN0aW9uXCIgPyBwYXJlbnQucm90YXRpb24oKSB8fCAwIDogMCxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgeDogdHlwZW9mIG5vZGUueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiAwLFxyXG4gICAgICB5OiB0eXBlb2Ygbm9kZS55ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnkoKSA6IDAsXHJcbiAgICAgIHJvdGF0aW9uOiB0eXBlb2Ygbm9kZS5yb3RhdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5yb3RhdGlvbigpIHx8IDAgOiAwLFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuXHJcbiAgY29uc3QgY2xlYXJSZXNpemVBbmNob3JQcmVzc0ZlZWRiYWNrID0gKCkgPT4ge1xyXG4gICAgaWYgKGlzVHJhbnNmb3JtaW5nUmVzaXplUmVmLmN1cnJlbnQpIHJldHVybjtcclxuICAgIHNldElzUmVzaXplR2VzdHVyZUFjdGl2ZShmYWxzZSk7XHJcbiAgICBzZXRQcmVzc2VkUmVzaXplQW5jaG9yTmFtZSgoY3VycmVudCkgPT4gKGN1cnJlbnQgPyBudWxsIDogY3VycmVudCkpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNsZWFyUmVzaXplSGludFRpbWVycyA9ICgpID0+IHtcclxuICAgIGlmICghcmVzaXplSGludFRpbWVyc1JlZi5jdXJyZW50Lmxlbmd0aCkgcmV0dXJuO1xyXG4gICAgcmVzaXplSGludFRpbWVyc1JlZi5jdXJyZW50LmZvckVhY2goKHRpbWVySWQpID0+IGNsZWFyVGltZW91dCh0aW1lcklkKSk7XHJcbiAgICByZXNpemVIaW50VGltZXJzUmVmLmN1cnJlbnQgPSBbXTtcclxuICB9O1xyXG5cclxuICBjb25zdCBzdG9wUmVzaXplSGludFB1bHNlID0gKCkgPT4ge1xyXG4gICAgY2xlYXJSZXNpemVIaW50VGltZXJzKCk7XHJcbiAgICBzZXRSZXNpemVIaW50UGhhc2UoKGN1cnJlbnQpID0+IChjdXJyZW50ID09PSAwID8gY3VycmVudCA6IDApKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBzdG9wTmF0aXZlVHJhbnNmb3JtZXJJZkFjdGl2ZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHRyID0gdHJhbnNmb3JtZXJSZWYuY3VycmVudDtcclxuICAgIGlmICghdHIpIHJldHVybiBmYWxzZTtcclxuICAgIGxldCBuYXRpdmVUcmFuc2Zvcm1pbmcgPSBmYWxzZTtcclxuICAgIHRyeSB7XHJcbiAgICAgIG5hdGl2ZVRyYW5zZm9ybWluZyA9IEJvb2xlYW4odHIuaXNUcmFuc2Zvcm1pbmc/LigpKTtcclxuICAgIH0gY2F0Y2gge31cclxuICAgIGlmICghbmF0aXZlVHJhbnNmb3JtaW5nKSByZXR1cm4gZmFsc2U7XHJcbiAgICB0cnkge1xyXG4gICAgICB0ci5zdG9wVHJhbnNmb3JtPy4oKTtcclxuICAgICAgdHIuZ2V0TGF5ZXI/LigpPy5iYXRjaERyYXc/LigpO1xyXG4gICAgfSBjYXRjaCB7fVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZ2V0UmVzaXplQW5jaG9yTmFtZUZyb21UYXJnZXQgPSAodGFyZ2V0KSA9PiB7XHJcbiAgICBpZiAoIXRhcmdldCkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBpc0FuY2hvclRhcmdldCA9XHJcbiAgICAgIHR5cGVvZiB0YXJnZXQuaGFzTmFtZSA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgPyB0YXJnZXQuaGFzTmFtZShcIl9hbmNob3JcIilcclxuICAgICAgICA6IHR5cGVvZiB0YXJnZXQubmFtZSA9PT0gXCJmdW5jdGlvblwiICYmXHJcbiAgICAgICAgICBTdHJpbmcodGFyZ2V0Lm5hbWUoKSB8fCBcIlwiKS5pbmNsdWRlcyhcIl9hbmNob3JcIik7XHJcbiAgICBpZiAoIWlzQW5jaG9yVGFyZ2V0KSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICBjb25zdCByYXdOYW1lID1cclxuICAgICAgdHlwZW9mIHRhcmdldC5uYW1lID09PSBcImZ1bmN0aW9uXCIgPyBTdHJpbmcodGFyZ2V0Lm5hbWUoKSB8fCBcIlwiKSA6IFwiXCI7XHJcbiAgICBjb25zdCBhbmNob3JOYW1lID0gcmF3TmFtZS5zcGxpdChcIiBcIilbMF0gfHwgbnVsbDtcclxuICAgIGlmICghYW5jaG9yTmFtZSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gYW5jaG9yTmFtZTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXNpemVBbmNob3JQcmVzc1N0YXJ0ID0gKGV2ZW50KSA9PiB7XHJcbiAgICBsZXQgYW5jaG9yTmFtZSA9IGdldFJlc2l6ZUFuY2hvck5hbWVGcm9tVGFyZ2V0KGV2ZW50Py50YXJnZXQpO1xyXG4gICAgaWYgKCFhbmNob3JOYW1lKSB7XHJcbiAgICAgIGNvbnN0IGFjdGl2ZUFuY2hvciA9XHJcbiAgICAgICAgdHlwZW9mIHRyYW5zZm9ybWVyUmVmLmN1cnJlbnQ/LmdldEFjdGl2ZUFuY2hvciA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgICA/IHRyYW5zZm9ybWVyUmVmLmN1cnJlbnQuZ2V0QWN0aXZlQW5jaG9yKClcclxuICAgICAgICAgIDogbnVsbDtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBhY3RpdmVBbmNob3IgPT09IFwic3RyaW5nXCJcclxuICAgICAgKSB7XHJcbiAgICAgICAgYW5jaG9yTmFtZSA9IGFjdGl2ZUFuY2hvcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFhbmNob3JOYW1lKSByZXR1cm47XHJcbiAgICBzZXRJc1Jlc2l6ZUdlc3R1cmVBY3RpdmUodHJ1ZSk7XHJcbiAgICBzZXRQcmVzc2VkUmVzaXplQW5jaG9yTmFtZSgoY3VycmVudCkgPT5cclxuICAgICAgY3VycmVudCA9PT0gYW5jaG9yTmFtZSA/IGN1cnJlbnQgOiBhbmNob3JOYW1lXHJcbiAgICApO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGdldEJveE92ZXJmbG93QW1vdW50ID0gKGJveCwgc3RhZ2VXaWR0aCwgc3RhZ2VIZWlnaHQpID0+IHtcclxuICAgIGlmICghYm94KSByZXR1cm4gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xyXG4gICAgY29uc3QgeCA9IE51bWJlcihib3gueCk7XHJcbiAgICBjb25zdCB5ID0gTnVtYmVyKGJveC55KTtcclxuICAgIGNvbnN0IHdpZHRoID0gTnVtYmVyKGJveC53aWR0aCk7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBOdW1iZXIoYm94LmhlaWdodCk7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAhTnVtYmVyLmlzRmluaXRlKHgpIHx8XHJcbiAgICAgICFOdW1iZXIuaXNGaW5pdGUoeSkgfHxcclxuICAgICAgIU51bWJlci5pc0Zpbml0ZSh3aWR0aCkgfHxcclxuICAgICAgIU51bWJlci5pc0Zpbml0ZShoZWlnaHQpXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsZWZ0ID0gTWF0aC5taW4oeCwgeCArIHdpZHRoKTtcclxuICAgIGNvbnN0IHJpZ2h0ID0gTWF0aC5tYXgoeCwgeCArIHdpZHRoKTtcclxuICAgIGNvbnN0IHRvcCA9IE1hdGgubWluKHksIHkgKyBoZWlnaHQpO1xyXG4gICAgY29uc3QgYm90dG9tID0gTWF0aC5tYXgoeSwgeSArIGhlaWdodCk7XHJcblxyXG4gICAgY29uc3Qgb3ZlcmZsb3dMZWZ0ID0gTWF0aC5tYXgoMCwgLWxlZnQpO1xyXG4gICAgY29uc3Qgb3ZlcmZsb3dUb3AgPSBNYXRoLm1heCgwLCAtdG9wKTtcclxuICAgIGNvbnN0IG92ZXJmbG93UmlnaHQgPSBNYXRoLm1heCgwLCByaWdodCAtIHN0YWdlV2lkdGgpO1xyXG4gICAgY29uc3Qgb3ZlcmZsb3dCb3R0b20gPSBNYXRoLm1heCgwLCBib3R0b20gLSBzdGFnZUhlaWdodCk7XHJcblxyXG4gICAgcmV0dXJuIG92ZXJmbG93TGVmdCArIG92ZXJmbG93VG9wICsgb3ZlcmZsb3dSaWdodCArIG92ZXJmbG93Qm90dG9tO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGtlZXBCb3hJbnNpZGVTdGFnZSA9IChvbGRCb3gsIG5leHRCb3gpID0+IHtcclxuICAgIGNvbnN0IHRyID0gdHJhbnNmb3JtZXJSZWYuY3VycmVudDtcclxuICAgIGNvbnN0IHN0YWdlID0gdHI/LmdldFN0YWdlPy4oKTtcclxuICAgIGNvbnN0IHN0YWdlV2lkdGggPVxyXG4gICAgICB0eXBlb2Ygc3RhZ2U/LndpZHRoID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICA/IE51bWJlcihzdGFnZS53aWR0aCgpKVxyXG4gICAgICAgIDogTnVtYmVyKHN0YWdlPy5hdHRycz8ud2lkdGgpO1xyXG4gICAgY29uc3Qgc3RhZ2VIZWlnaHQgPVxyXG4gICAgICB0eXBlb2Ygc3RhZ2U/LmhlaWdodCA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgPyBOdW1iZXIoc3RhZ2UuaGVpZ2h0KCkpXHJcbiAgICAgICAgOiBOdW1iZXIoc3RhZ2U/LmF0dHJzPy5oZWlnaHQpO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgIU51bWJlci5pc0Zpbml0ZShzdGFnZVdpZHRoKSB8fFxyXG4gICAgICBzdGFnZVdpZHRoIDw9IDAgfHxcclxuICAgICAgIU51bWJlci5pc0Zpbml0ZShzdGFnZUhlaWdodCkgfHxcclxuICAgICAgc3RhZ2VIZWlnaHQgPD0gMFxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybiBuZXh0Qm94O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9sZE92ZXJmbG93ID0gZ2V0Qm94T3ZlcmZsb3dBbW91bnQob2xkQm94LCBzdGFnZVdpZHRoLCBzdGFnZUhlaWdodCk7XHJcbiAgICBjb25zdCBuZXh0T3ZlcmZsb3cgPSBnZXRCb3hPdmVyZmxvd0Ftb3VudChuZXh0Qm94LCBzdGFnZVdpZHRoLCBzdGFnZUhlaWdodCk7XHJcbiAgICBjb25zdCBlcHNpbG9uID0gMC41O1xyXG5cclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG5leHRPdmVyZmxvdykpIHtcclxuICAgICAgcmV0dXJuIG9sZEJveDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmV4dE92ZXJmbG93IDw9IGVwc2lsb24pIHtcclxuICAgICAgcmV0dXJuIG5leHRCb3g7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUGVybWl0aXIgdHJhbnNmb3JtYXIgZGUgdnVlbHRhIGhhY2lhIGFkZW50cm8gZGVsIGNhbnZhcy5cclxuICAgIGlmIChuZXh0T3ZlcmZsb3cgPD0gb2xkT3ZlcmZsb3cgKyBlcHNpbG9uKSB7XHJcbiAgICAgIHJldHVybiBuZXh0Qm94O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNpIGVsIHJlc2l6ZSBlbXB1amEgbcOhcyBhZnVlcmEgZGVsIGNhbnZhcywgbWFudGVuZXIgZWwgZXN0YWRvIGFudGVyaW9yLlxyXG4gICAgcmV0dXJuIG9sZEJveDtcclxuICB9O1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uS2V5ID0gc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKTtcclxuXHJcbiAgICBpZiAoIXNlbGVjdGlvbktleSB8fCAhZGViZXJpYVVzYXJUcmFuc2Zvcm1lcikge1xyXG4gICAgICBzdG9wUmVzaXplSGludFB1bHNlKCk7XHJcbiAgICAgIGxhc3RSZXNpemVIaW50U2VsZWN0aW9uS2V5UmVmLmN1cnJlbnQgPSBzZWxlY3Rpb25LZXk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNEcmFnZ2luZyB8fCBpc1Jlc2l6ZUdlc3R1cmVBY3RpdmUgfHwgaXNUcmFuc2Zvcm1pbmdSZXNpemVSZWYuY3VycmVudCkge1xyXG4gICAgICBzdG9wUmVzaXplSGludFB1bHNlKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2VsZWN0aW9uS2V5ID09PSBsYXN0UmVzaXplSGludFNlbGVjdGlvbktleVJlZi5jdXJyZW50KSByZXR1cm47XHJcbiAgICBsYXN0UmVzaXplSGludFNlbGVjdGlvbktleVJlZi5jdXJyZW50ID0gc2VsZWN0aW9uS2V5O1xyXG5cclxuICAgIGNsZWFyUmVzaXplSGludFRpbWVycygpO1xyXG4gICAgc2V0UmVzaXplSGludFBoYXNlKDIpO1xyXG5cclxuICAgIGNvbnN0IHB1bHNlU3RlcHMgPSBpc01vYmlsZVxyXG4gICAgICA/IFtcclxuICAgICAgICAgIFsxLCAzNjBdLFxyXG4gICAgICAgICAgWzIsIDY4MF0sXHJcbiAgICAgICAgICBbMSwgOTgwXSxcclxuICAgICAgICAgIFsyLCAxMjYwXSxcclxuICAgICAgICAgIFsxLCAxNTIwXSxcclxuICAgICAgICAgIFswLCAxODUwXSxcclxuICAgICAgICBdXHJcbiAgICAgIDogW1xyXG4gICAgICAgICAgWzEsIDEyMF0sXHJcbiAgICAgICAgICBbMiwgMjIwXSxcclxuICAgICAgICAgIFsxLCAzNjBdLFxyXG4gICAgICAgICAgWzAsIDU2MF0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICByZXNpemVIaW50VGltZXJzUmVmLmN1cnJlbnQgPSBwdWxzZVN0ZXBzLm1hcCgoW3BoYXNlLCBkZWxheU1zXSkgPT5cclxuICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRSZXNpemVIaW50UGhhc2UocGhhc2UpLCBkZWxheU1zKVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBjbGVhclJlc2l6ZUhpbnRUaW1lcnMoKTtcclxuICAgIH07XHJcbiAgfSwgW1xyXG4gICAgc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKSxcclxuICAgIGRlYmVyaWFVc2FyVHJhbnNmb3JtZXIsXHJcbiAgICBpc0RyYWdnaW5nLFxyXG4gICAgaXNSZXNpemVHZXN0dXJlQWN0aXZlLFxyXG4gICAgaXNNb2JpbGUsXHJcbiAgXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWlzUmVzaXplR2VzdHVyZUFjdGl2ZSkgcmV0dXJuO1xyXG4gICAgY29uc3QgY2xlYW51cElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGlmIChpc1RyYW5zZm9ybWluZ1Jlc2l6ZVJlZi5jdXJyZW50KSByZXR1cm47XHJcbiAgICAgIGlmICh3aW5kb3cuX3Jlc2l6ZURhdGE/LmlzUmVzaXppbmcpIHJldHVybjtcclxuICAgICAgc2V0SXNSZXNpemVHZXN0dXJlQWN0aXZlKGZhbHNlKTtcclxuICAgICAgc2V0UHJlc3NlZFJlc2l6ZUFuY2hvck5hbWUoKGN1cnJlbnQpID0+IChjdXJyZW50ID8gbnVsbCA6IGN1cnJlbnQpKTtcclxuICAgIH0sIGlzTW9iaWxlID8gOTAwIDogNzAwKTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KGNsZWFudXBJZCk7XHJcbiAgfSwgW2lzUmVzaXplR2VzdHVyZUFjdGl2ZSwgaXNNb2JpbGUsIHNlbGVjdGVkRWxlbWVudHMuam9pbihcIixcIildKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IHRyID0gdHJhbnNmb3JtZXJSZWYuY3VycmVudDtcclxuICAgIGlmICghdHIpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh0ci5pc1RyYW5zZm9ybWluZz8uKCkpIHJldHVybjtcclxuICAgIH0gY2F0Y2gge31cclxuICAgIHRyeSB7XHJcbiAgICAgIHRyLmZvcmNlVXBkYXRlPy4oKTtcclxuICAgIH0gY2F0Y2gge31cclxuICAgIHRyLmdldExheWVyPy4oKT8uYmF0Y2hEcmF3Py4oKTtcclxuICB9LCBbXHJcbiAgICByZXNpemVIaW50UGhhc2UsXHJcbiAgICBpc1Jlc2l6ZUdlc3R1cmVBY3RpdmUsXHJcbiAgICBwcmVzc2VkUmVzaXplQW5jaG9yTmFtZSxcclxuICBdKTtcclxuXHJcbiAgdXNlRWZmZWN0KFxyXG4gICAgKCkgPT4gKCkgPT4ge1xyXG4gICAgICBzdG9wTmF0aXZlVHJhbnNmb3JtZXJJZkFjdGl2ZSgpO1xyXG4gICAgICBjbGVhclJlc2l6ZUhpbnRUaW1lcnMoKTtcclxuICAgIH0sXHJcbiAgICBbXVxyXG4gICk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGggPT09IDAgfHwgIWRlYmVyaWFVc2FyVHJhbnNmb3JtZXIpIHtcclxuICAgICAgc3RvcFJlc2l6ZUhpbnRQdWxzZSgpO1xyXG4gICAgICBzdG9wTmF0aXZlVHJhbnNmb3JtZXJJZkFjdGl2ZSgpO1xyXG4gICAgICBzZXRJc1Jlc2l6ZUdlc3R1cmVBY3RpdmUoZmFsc2UpO1xyXG4gICAgICBzZXRQcmVzc2VkUmVzaXplQW5jaG9yTmFtZSgoY3VycmVudCkgPT4gKGN1cnJlbnQgPyBudWxsIDogY3VycmVudCkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaXNEcmFnZ2luZyAmJiAhaXNUcmFuc2Zvcm1pbmdSZXNpemVSZWYuY3VycmVudCkge1xyXG4gICAgICBzdG9wUmVzaXplSGludFB1bHNlKCk7XHJcbiAgICAgIHNldElzUmVzaXplR2VzdHVyZUFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIHNldFByZXNzZWRSZXNpemVBbmNob3JOYW1lKChjdXJyZW50KSA9PiAoY3VycmVudCA/IG51bGwgOiBjdXJyZW50KSk7XHJcbiAgICB9XHJcbiAgfSwgW3NlbGVjdGVkRWxlbWVudHMubGVuZ3RoLCBpc0RyYWdnaW5nLCBkZWJlcmlhVXNhclRyYW5zZm9ybWVyXSk7XHJcblxyXG4gIC8vIPCflKUgRWZlY3RvIHByaW5jaXBhbCBkZWwgVHJhbnNmb3JtZXIgKFNJTiByZXRyeSAvIFNJTiBmbGlja2VyKVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCB0ciA9IHRyYW5zZm9ybWVyUmVmLmN1cnJlbnQ7XHJcbiAgICBpZiAoIXRyKSByZXR1cm47XHJcblxyXG4gICAgY29uc3Qgc2VsS2V5ID0gc2VsZWN0ZWRFbGVtZW50cy5qb2luKFwiLFwiKTtcclxuICAgIGNvbnN0IG5hdGl2ZVRyYW5zZm9ybWluZyA9IEJvb2xlYW4odHIuaXNUcmFuc2Zvcm1pbmc/LigpKTtcclxuICAgIFRSREJHKFwiRUZGRUNUIHN0YXJ0XCIsIHtcclxuICAgICAgc2VsS2V5LFxyXG4gICAgICBpc0RyYWdnaW5nLFxyXG4gICAgICBkZWJlcmlhVXNhclRyYW5zZm9ybWVyLFxyXG4gICAgICBoYXNHYWxsZXJ5LFxyXG4gICAgICBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlc0xlbjogZWxlbWVudG9zVHJhbnNmb3JtYWJsZXMubGVuZ3RoLFxyXG4gICAgICB0cmFuc2Zvcm1UaWNrLFxyXG4gICAgICBlZGl0aW5nSWQ6IHdpbmRvdy5lZGl0aW5nPy5pZCB8fCBudWxsLFxyXG4gICAgICBuYXRpdmVUcmFuc2Zvcm1pbmcsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBFdml0YSByZS1hdHRhY2ggZGVsIHRyYW5zZm9ybWVyIG1pZW50cmFzIEtvbnZhIGVzdGEgZW4gbWVkaW8gZGVsIGdlc3RvLlxyXG4gICAgaWYgKG5hdGl2ZVRyYW5zZm9ybWluZyB8fCBpc1RyYW5zZm9ybWluZ1Jlc2l6ZVJlZi5jdXJyZW50KSB7XHJcbiAgICAgIFRSREJHKFwiRUZGRUNUIGV4aXQ6IHRyYW5zZm9ybSBpbiBmbGlnaHRcIiwgeyBzZWxLZXksIG5hdGl2ZVRyYW5zZm9ybWluZyB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNpIG5vIGNvcnJlc3BvbmRlIHRyYW5zZm9ybWVyLCBubyBoYWdhcyBkZXRhY2ggYWdyZXNpdm8gKGV2aXRhIGZsaWNrZXIpXHJcbiAgICBpZiAoIWRlYmVyaWFVc2FyVHJhbnNmb3JtZXIpIHtcclxuICAgICAgVFJEQkcoXCJFRkZFQ1QgZXhpdDogbm8gdHJhbnNmb3JtZXIgb3IgZ2FsbGVyeVwiLCB7IHNlbEtleSB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBSZXNvbHZlciBub2RlcyBkZXNkZSByZWZzIChmdWVudGUgZGUgdmVyZGFkKVxyXG4gICAgbGV0IG5vZG9zVHJhbnNmb3JtYWJsZXMgPSBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlc1xyXG4gICAgICAubWFwKChvKSA9PiBlbGVtZW50UmVmcy5jdXJyZW50Py5bby5pZF0pXHJcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XHJcblxyXG4gICAgLy8gU2luZ2xlIHNlbGVjdDogdXNhciByZWYgZnJlc2NvIFNJRU1QUkVcclxuICAgIGlmIChzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBjb25zdCBpZFNlbCA9IHNlbGVjdGVkRWxlbWVudHNbMF07XHJcbiAgICAgIGNvbnN0IHJlZk5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50Py5baWRTZWxdIHx8IG51bGw7XHJcbiAgICAgIGlmIChyZWZOb2RlICYmIHR5cGVvZiByZWZOb2RlLmdldENsaWVudFJlY3QgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgIGlmIChlc0dhbGVyaWEgJiYgdHlwZW9mIHJlZk5vZGUuZmluZE9uZSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICBjb25zdCBnYWxsZXJ5RnJhbWUgPSByZWZOb2RlLmZpbmRPbmUoXCIuZ2FsbGVyeS10cmFuc2Zvcm0tZnJhbWVcIik7XHJcbiAgICAgICAgICBpZiAoZ2FsbGVyeUZyYW1lICYmIHR5cGVvZiBnYWxsZXJ5RnJhbWUuZ2V0Q2xpZW50UmVjdCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIG5vZG9zVHJhbnNmb3JtYWJsZXMgPSBbZ2FsbGVyeUZyYW1lXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG5vZG9zVHJhbnNmb3JtYWJsZXMgPSBbcmVmTm9kZV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG5vZG9zVHJhbnNmb3JtYWJsZXMgPSBbcmVmTm9kZV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2kgYcO6biBubyBoYXkgbm9kb3MgKGltYWdlbiBjYXJnYW5kbywgZXRjLiksIE5PIGRlc3BlZ2FyIChldml0YSBwYXJwYWRlbylcclxuICAgIGlmIChub2Rvc1RyYW5zZm9ybWFibGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBUUkRCRyhcIkVGRkVDVCBleGl0OiBubyBub2RlcyB5ZXRcIiwge1xyXG4gICAgICAgIHNlbEtleSxcclxuICAgICAgICB3YW50ZWRJZHM6IGVsZW1lbnRvc1RyYW5zZm9ybWFibGVzLm1hcChvID0+IG8uaWQpLFxyXG4gICAgICAgIHJlZnNQcmVzZW50OiBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlcy5tYXAobyA9PiAhIWVsZW1lbnRSZWZzLmN1cnJlbnQ/LltvLmlkXSksXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIEF0dGFjaCBlc3RhYmxlXHJcbiAgICBUUkRCRyhcIkFUVEFDSCB0cnlcIiwge1xyXG4gICAgICBzZWxLZXksXHJcbiAgICAgIG5vZGVzQ291bnQ6IG5vZG9zVHJhbnNmb3JtYWJsZXMubGVuZ3RoLFxyXG4gICAgICBub2RlSWRzOiBub2Rvc1RyYW5zZm9ybWFibGVzLm1hcChuID0+ICh0eXBlb2Ygbi5pZCA9PT0gXCJmdW5jdGlvblwiID8gbi5pZCgpIDogbi5hdHRycz8uaWQpKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRyLm5vZGVzKG5vZG9zVHJhbnNmb3JtYWJsZXMpO1xyXG5cclxuICAgIFRSREJHKFwiQVRUQUNIIGRvbmVcIiwge1xyXG4gICAgICBzZWxLZXksXHJcbiAgICAgIHRyTm9kZXNDb3VudDogdHIubm9kZXM/LigpPy5sZW5ndGggfHwgMCxcclxuICAgIH0pO1xyXG5cclxuICAgIHRyeSB7IHRyLmZvcmNlVXBkYXRlPy4oKTsgfSBjYXRjaCB7IH1cclxuICAgIHRyLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG5cclxuICB9LCBbXHJcbiAgICAvLyBEZXBlbmRlbmNpYXMgbcOtbmltYXMgcmVhbGVzXHJcbiAgICBzZWxlY3RlZEVsZW1lbnRzLmpvaW4oXCIsXCIpLFxyXG4gICAgZGViZXJpYVVzYXJUcmFuc2Zvcm1lcixcclxuICAgIGhhc0dhbGxlcnksXHJcbiAgICBlbGVtZW50b3NUcmFuc2Zvcm1hYmxlcy5sZW5ndGgsXHJcbiAgICBzZWxlY3RlZEdlb21LZXksXHJcbiAgICB0cmFuc2Zvcm1UaWNrLFxyXG4gICAgZWxlbWVudFJlZnMsXHJcbiAgXSk7XHJcblxyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZXIgPSAoZSkgPT4ge1xyXG4gICAgICBjb25zdCBpZCA9IGU/LmRldGFpbD8uaWQ7XHJcbiAgICAgIGlmICghaWQpIHJldHVybjtcclxuXHJcbiAgICAgIFRSREJHKFwiUkVGIGV2ZW50XCIsIHtcclxuICAgICAgICBpZCxcclxuICAgICAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZEVsZW1lbnRzLmluY2x1ZGVzKGlkKSxcclxuICAgICAgICBzZWxLZXk6IHNlbGVjdGVkRWxlbWVudHMuam9pbihcIixcIiksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnRzLmluY2x1ZGVzKGlkKSkgcmV0dXJuO1xyXG4gICAgICBzZXRUcmFuc2Zvcm1UaWNrKHQgPT4gdCArIDEpO1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImVsZW1lbnQtcmVmLXJlZ2lzdHJhZG9cIiwgaGFuZGxlcik7XHJcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlbGVtZW50LXJlZi1yZWdpc3RyYWRvXCIsIGhhbmRsZXIpO1xyXG4gIH0sIFtzZWxlY3RlZEVsZW1lbnRzLmpvaW4oXCIsXCIpXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBmaXJzdElkID0gc2VsZWN0ZWRFbGVtZW50cz8uWzBdO1xyXG4gICAgaWYgKCFmaXJzdElkKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgZmlyc3ROb2RlID0gZWxlbWVudFJlZnMuY3VycmVudD8uW2ZpcnN0SWRdO1xyXG4gICAgY29uc3Qgc3RhZ2UgPSBmaXJzdE5vZGU/LmdldFN0YWdlPy4oKTtcclxuICAgIGlmICghc3RhZ2UpIHJldHVybjtcclxuXHJcbiAgICBsZXQgcmFmSWQgPSBudWxsO1xyXG4gICAgY29uc3Qgc3luY1RyYW5zZm9ybWVyID0gKCkgPT4ge1xyXG4gICAgICBpZiAocmFmSWQgIT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICByYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgcmFmSWQgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHRyID0gdHJhbnNmb3JtZXJSZWYuY3VycmVudDtcclxuICAgICAgICBpZiAoIXRyKSByZXR1cm47XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGlmICh0ci5pc1RyYW5zZm9ybWluZz8uKCkpIHJldHVybjtcclxuICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgdHJ5IHsgdHIuZm9yY2VVcGRhdGU/LigpOyB9IGNhdGNoIHsgfVxyXG4gICAgICAgIHRyLmdldExheWVyPy4oKT8uYmF0Y2hEcmF3Py4oKTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YWdlLm9uKFwiZHJhZ21vdmVcIiwgc3luY1RyYW5zZm9ybWVyKTtcclxuICAgIHN0YWdlLm9uKFwiZHJhZ2VuZFwiLCBzeW5jVHJhbnNmb3JtZXIpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIHN0YWdlLm9mZihcImRyYWdtb3ZlXCIsIHN5bmNUcmFuc2Zvcm1lcik7XHJcbiAgICAgIHN0YWdlLm9mZihcImRyYWdlbmRcIiwgc3luY1RyYW5zZm9ybWVyKTtcclxuICAgICAgaWYgKHJhZklkICE9IG51bGwpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZklkKTtcclxuICAgIH07XHJcbiAgfSwgW3NlbGVjdGVkRWxlbWVudHMuam9pbihcIixcIiksIGVsZW1lbnRSZWZzXSk7XHJcblxyXG5cclxuXHJcblxyXG4gIC8vIPCflKUgUmVuZGVyXHJcblxyXG4gIGlmIChzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XHJcblxyXG4gIGlmIChoYXlMaW5lYXMgJiYgZWxlbWVudG9zVHJhbnNmb3JtYWJsZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Qm91bmRzSW5kaWNhdG9yXHJcbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50cz17c2VsZWN0ZWRFbGVtZW50c31cclxuICAgICAgICBlbGVtZW50UmVmcz17ZWxlbWVudFJlZnN9XHJcbiAgICAgICAgb2JqZXRvcz17b2JqZXRvc31cclxuICAgICAgLz5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBpZiAoaGF5TGluZWFzICYmIGVsZW1lbnRvc1RyYW5zZm9ybWFibGVzLmxlbmd0aCA+IDApIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxCb3VuZHNJbmRpY2F0b3JcclxuICAgICAgICBzZWxlY3RlZEVsZW1lbnRzPXtzZWxlY3RlZEVsZW1lbnRzfVxyXG4gICAgICAgIGVsZW1lbnRSZWZzPXtlbGVtZW50UmVmc31cclxuICAgICAgICBvYmpldG9zPXtvYmpldG9zfVxyXG4gICAgICAvPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGlzUmVzaXplSGludFZpc2libGUgPVxyXG4gICAgcmVzaXplSGludFBoYXNlID4gMCAmJlxyXG4gICAgIWlzUmVzaXplR2VzdHVyZUFjdGl2ZSAmJlxyXG4gICAgIWlzVHJhbnNmb3JtaW5nUmVzaXplUmVmLmN1cnJlbnQ7XHJcbiAgY29uc3QgdHJhbnNmb3JtZXJCb3JkZXJTdHJva2UgPSBpc1Jlc2l6ZUhpbnRWaXNpYmxlID8gXCIjQTg1NUY3XCIgOiBcIiM5MzMzRUFcIjtcclxuICBjb25zdCB0cmFuc2Zvcm1lckJvcmRlclZpc3VhbFdpZHRoID0gaXNSZXNpemVIaW50VmlzaWJsZVxyXG4gICAgPyByZXNpemVIaW50UGhhc2UgPT09IDJcclxuICAgICAgPyB0cmFuc2Zvcm1lckhpbnRCb3JkZXJTdHJvbmdTdHJva2VXaWR0aFxyXG4gICAgICA6IHRyYW5zZm9ybWVySGludEJvcmRlclNvZnRTdHJva2VXaWR0aFxyXG4gICAgOiB0cmFuc2Zvcm1lckJvcmRlclN0cm9rZVdpZHRoO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFRyYW5zZm9ybWVyXHJcbiAgICAgIG5hbWU9XCJ1aVwiXHJcbiAgICAgIHJlZj17dHJhbnNmb3JtZXJSZWZ9XHJcblxyXG4gICAgICAvLyDwn5S1IGJvcmRlIHNpZW1wcmUgdmlzaWJsZVxyXG4gICAgICBib3JkZXJFbmFibGVkPXt0cnVlfVxyXG5cclxuICAgICAgYm9yZGVyU3Ryb2tlPXt0cmFuc2Zvcm1lckJvcmRlclN0cm9rZX1cclxuXHJcblxyXG4gICAgICBib3JkZXJTdHJva2VXaWR0aD17dHJhbnNmb3JtZXJCb3JkZXJWaXN1YWxXaWR0aH1cclxuICAgICAgcGFkZGluZz17dHJhbnNmb3JtZXJQYWRkaW5nfVxyXG5cclxuICAgICAgLy8g4p2MIG5vZG9zIHkgcm90YWNpw7NuIE9GRiBkdXJhbnRlIGRyYWdcclxuICAgICAgZW5hYmxlZEFuY2hvcnM9e2lzRHJhZ2dpbmcgJiYgIWlzUmVzaXplR2VzdHVyZUFjdGl2ZSA/IFtdIDogW1wiYm90dG9tLXJpZ2h0XCJdfVxyXG4gICAgICByb3RhdGVFbmFibGVkPXshaXNEcmFnZ2luZyAmJiAhZXNHYWxlcmlhfVxyXG4gICAgICBvbk1vdXNlRG93bj17aGFuZGxlUmVzaXplQW5jaG9yUHJlc3NTdGFydH1cclxuICAgICAgb25Ub3VjaFN0YXJ0PXtoYW5kbGVSZXNpemVBbmNob3JQcmVzc1N0YXJ0fVxyXG4gICAgICBvblBvaW50ZXJEb3duPXtoYW5kbGVSZXNpemVBbmNob3JQcmVzc1N0YXJ0fVxyXG4gICAgICBvbk1vdXNlVXA9e2NsZWFyUmVzaXplQW5jaG9yUHJlc3NGZWVkYmFja31cclxuICAgICAgb25Ub3VjaEVuZD17Y2xlYXJSZXNpemVBbmNob3JQcmVzc0ZlZWRiYWNrfVxyXG4gICAgICBvblBvaW50ZXJVcD17Y2xlYXJSZXNpemVBbmNob3JQcmVzc0ZlZWRiYWNrfVxyXG4gICAgICBvblRvdWNoQ2FuY2VsPXtjbGVhclJlc2l6ZUFuY2hvclByZXNzRmVlZGJhY2t9XHJcbiAgICAgIG9uUG9pbnRlckNhbmNlbD17Y2xlYXJSZXNpemVBbmNob3JQcmVzc0ZlZWRiYWNrfVxyXG5cclxuICAgICAgYW5jaG9yRmlsbD17dHJhbnNmb3JtZXJBbmNob3JGaWxsQ29sb3J9XHJcbiAgICAgIGFuY2hvclN0cm9rZT17dHJhbnNmb3JtZXJBbmNob3JTdHJva2VDb2xvcn1cclxuICAgICAgYW5jaG9yU3Ryb2tlV2lkdGg9e3RyYW5zZm9ybWVyQW5jaG9yU3Ryb2tlV2lkdGh9XHJcbiAgICAgIGFuY2hvclNpemU9e3RyYW5zZm9ybWVyQW5jaG9yU2l6ZX1cclxuICAgICAgYW5jaG9yQ29ybmVyUmFkaXVzPXt0cmFuc2Zvcm1lckFuY2hvclJhZGl1c31cclxuICAgICAgYW5jaG9yU2hhZG93Q29sb3I9e3RyYW5zZm9ybWVyQW5jaG9yU2hhZG93Q29sb3J9XHJcbiAgICAgIGFuY2hvclNoYWRvd0JsdXI9e3RyYW5zZm9ybWVyQW5jaG9yU2hhZG93Qmx1cn1cclxuICAgICAgYW5jaG9yU2hhZG93T2Zmc2V0PXt7IHg6IDAsIHk6IHRyYW5zZm9ybWVyQW5jaG9yU2hhZG93T2Zmc2V0WSB9fVxyXG4gICAgICBhbmNob3JTdHlsZUZ1bmM9eyhhbmNob3IpID0+IHtcclxuICAgICAgICBjb25zdCBhbmNob3JOYW1lID1cclxuICAgICAgICAgIHR5cGVvZiBhbmNob3I/Lm5hbWUgPT09IFwiZnVuY3Rpb25cIlxyXG4gICAgICAgICAgICA/IFN0cmluZyhhbmNob3IubmFtZSgpIHx8IFwiXCIpLnNwbGl0KFwiIFwiKVswXVxyXG4gICAgICAgICAgICA6IFwiXCI7XHJcbiAgICAgICAgY29uc3QgaXNSZXNpemVBbmNob3JOb2RlID0gQm9vbGVhbihhbmNob3JOYW1lKTtcclxuICAgICAgICBjb25zdCBpc1Jlc2l6ZUFjdGl2ZUZhbGxiYWNrID1cclxuICAgICAgICAgIGlzUmVzaXplR2VzdHVyZUFjdGl2ZSB8fFxyXG4gICAgICAgICAgaXNUcmFuc2Zvcm1pbmdSZXNpemVSZWYuY3VycmVudCB8fFxyXG4gICAgICAgICAgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiZcclxuICAgICAgICAgICAgQm9vbGVhbih3aW5kb3cuX3Jlc2l6ZURhdGE/LmlzUmVzaXppbmcpKTtcclxuICAgICAgICBjb25zdCBpc1ByZXNzZWRSZXNpemVBbmNob3IgPVxyXG4gICAgICAgICAgaXNSZXNpemVBY3RpdmVGYWxsYmFjayAmJlxyXG4gICAgICAgICAgaXNSZXNpemVBbmNob3JOb2RlICYmXHJcbiAgICAgICAgICAoIXByZXNzZWRSZXNpemVBbmNob3JOYW1lIHx8IGFuY2hvck5hbWUgPT09IHByZXNzZWRSZXNpemVBbmNob3JOYW1lKTtcclxuICAgICAgICBjb25zdCBpc1Jlc2l6ZUhpbnRBbmNob3IgPVxyXG4gICAgICAgICAgIWlzUHJlc3NlZFJlc2l6ZUFuY2hvciAmJlxyXG4gICAgICAgICAgIWlzUmVzaXplQWN0aXZlRmFsbGJhY2sgJiZcclxuICAgICAgICAgIGlzUmVzaXplQW5jaG9yTm9kZSAmJlxyXG4gICAgICAgICAgcmVzaXplSGludFBoYXNlID4gMDtcclxuICAgICAgICBjb25zdCBpc1N0cm9uZ1Jlc2l6ZUhpbnQgPSBpc1Jlc2l6ZUhpbnRBbmNob3IgJiYgcmVzaXplSGludFBoYXNlID09PSAyO1xyXG5cclxuICAgICAgICBjb25zdCBhbmNob3JGaWxsQ29sb3IgPSBpc1ByZXNzZWRSZXNpemVBbmNob3JcclxuICAgICAgICAgID8gdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkRmlsbENvbG9yXHJcbiAgICAgICAgICA6IGlzUmVzaXplSGludEFuY2hvclxyXG4gICAgICAgICAgICA/IHRyYW5zZm9ybWVyQW5jaG9ySGludEZpbGxDb2xvclxyXG4gICAgICAgICAgICA6IHRyYW5zZm9ybWVyQW5jaG9yRmlsbENvbG9yO1xyXG4gICAgICAgIGxldCBhbmNob3JTaGFkb3dDb2xvciA9IGlzUHJlc3NlZFJlc2l6ZUFuY2hvclxyXG4gICAgICAgICAgPyB0cmFuc2Zvcm1lckFuY2hvclByZXNzZWRTaGFkb3dDb2xvclxyXG4gICAgICAgICAgOiBpc1Jlc2l6ZUhpbnRBbmNob3JcclxuICAgICAgICAgICAgPyB0cmFuc2Zvcm1lckFuY2hvckhpbnRTaGFkb3dDb2xvclxyXG4gICAgICAgICAgICA6IHRyYW5zZm9ybWVyQW5jaG9yU2hhZG93Q29sb3I7XHJcbiAgICAgICAgbGV0IGFuY2hvclNoYWRvd0JsdXIgPSBpc1ByZXNzZWRSZXNpemVBbmNob3JcclxuICAgICAgICAgID8gdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkU2hhZG93Qmx1clxyXG4gICAgICAgICAgOiBpc1Jlc2l6ZUhpbnRBbmNob3JcclxuICAgICAgICAgICAgPyBpc1N0cm9uZ1Jlc2l6ZUhpbnRcclxuICAgICAgICAgICAgICA/IHRyYW5zZm9ybWVyQW5jaG9ySGludFN0cm9uZ1NoYWRvd0JsdXJcclxuICAgICAgICAgICAgICA6IHRyYW5zZm9ybWVyQW5jaG9ySGludFNvZnRTaGFkb3dCbHVyXHJcbiAgICAgICAgICAgIDogdHJhbnNmb3JtZXJBbmNob3JTaGFkb3dCbHVyO1xyXG4gICAgICAgIGxldCBhbmNob3JTaGFkb3dPcGFjaXR5ID0gaXNQcmVzc2VkUmVzaXplQW5jaG9yXHJcbiAgICAgICAgICA/IDFcclxuICAgICAgICAgIDogaXNSZXNpemVIaW50QW5jaG9yXHJcbiAgICAgICAgICAgID8gaXNTdHJvbmdSZXNpemVIaW50XHJcbiAgICAgICAgICAgICAgPyAoaXNNb2JpbGUgPyAxIDogMC43MilcclxuICAgICAgICAgICAgICA6IChpc01vYmlsZSA/IDAuODUgOiAwLjQyKVxyXG4gICAgICAgICAgICA6IChpc01vYmlsZSA/IDAuMjYgOiAwLjEyKTtcclxuICAgICAgICBsZXQgYW5jaG9yU3Ryb2tlQ29sb3IgPSBpc1ByZXNzZWRSZXNpemVBbmNob3JcclxuICAgICAgICAgID8gdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGFsb1N0cm9rZUNvbG9yXHJcbiAgICAgICAgICA6IGlzUmVzaXplSGludEFuY2hvclxyXG4gICAgICAgICAgICA/IHRyYW5zZm9ybWVyQW5jaG9ySGludFN0cm9rZUNvbG9yXHJcbiAgICAgICAgICAgIDogdHJhbnNmb3JtZXJBbmNob3JTdHJva2VDb2xvcjtcclxuICAgICAgICBsZXQgYW5jaG9yU3Ryb2tlV2lkdGggPSBpc1ByZXNzZWRSZXNpemVBbmNob3JcclxuICAgICAgICAgID8gdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGFsb1N0cm9rZVdpZHRoXHJcbiAgICAgICAgICA6IGlzUmVzaXplSGludEFuY2hvclxyXG4gICAgICAgICAgICA/IGlzU3Ryb25nUmVzaXplSGludFxyXG4gICAgICAgICAgICAgID8gKGlzTW9iaWxlID8gMy40IDogMy4zKVxyXG4gICAgICAgICAgICAgIDogKGlzTW9iaWxlID8gMi44IDogMi44KVxyXG4gICAgICAgICAgICA6IHRyYW5zZm9ybWVyQW5jaG9yU3Ryb2tlV2lkdGg7XHJcbiAgICAgICAgY29uc3QgYW5jaG9ySGl0U3Ryb2tlV2lkdGggPSBpc1ByZXNzZWRSZXNpemVBbmNob3JcclxuICAgICAgICAgID8gdHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGl0U3Ryb2tlV2lkdGhcclxuICAgICAgICAgIDogaXNSZXNpemVIaW50QW5jaG9yXHJcbiAgICAgICAgICAgID8gdHJhbnNmb3JtZXJBbmNob3JIaW50SGl0U3Ryb2tlV2lkdGhcclxuICAgICAgICAgICAgOiB0cmFuc2Zvcm1lckFuY2hvckhpdFN0cm9rZVdpZHRoO1xyXG4gICAgICAgIGxldCBhbmNob3JTY2FsZSA9IGlzUHJlc3NlZFJlc2l6ZUFuY2hvclxyXG4gICAgICAgICAgPyB0cmFuc2Zvcm1lckFuY2hvclByZXNzZWRTY2FsZVxyXG4gICAgICAgICAgOiBpc1Jlc2l6ZUhpbnRBbmNob3JcclxuICAgICAgICAgICAgPyBpc1N0cm9uZ1Jlc2l6ZUhpbnRcclxuICAgICAgICAgICAgICA/IHRyYW5zZm9ybWVyQW5jaG9ySGludFN0cm9uZ1NjYWxlXHJcbiAgICAgICAgICAgICAgOiB0cmFuc2Zvcm1lckFuY2hvckhpbnRTb2Z0U2NhbGVcclxuICAgICAgICAgICAgOiAxO1xyXG5cclxuICAgICAgICBhbmNob3Iuc2hhZG93Q29sb3IoYW5jaG9yU2hhZG93Q29sb3IpO1xyXG4gICAgICAgIGFuY2hvci5maWxsKGFuY2hvckZpbGxDb2xvcik7XHJcbiAgICAgICAgYW5jaG9yLnNoYWRvd0VuYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgLy8gRW4gcHJlc3NlZCwgZWwgaGFsbyBuYWNlIG3DoXMgY2VyY2EgZGVsIGFuaWxsbyBwYXJhIHF1ZSBzZSBub3RlIG1lam9yLlxyXG4gICAgICAgIGFuY2hvci5zaGFkb3dGb3JTdHJva2VFbmFibGVkKHRydWUpO1xyXG4gICAgICAgIGFuY2hvci5zaGFkb3dPcGFjaXR5KGFuY2hvclNoYWRvd09wYWNpdHkpO1xyXG4gICAgICAgIGFuY2hvci5zaGFkb3dCbHVyKGFuY2hvclNoYWRvd0JsdXIpO1xyXG4gICAgICAgIGFuY2hvci5zaGFkb3dPZmZzZXQoe1xyXG4gICAgICAgICAgeDogMCxcclxuICAgICAgICAgIHk6IGlzUHJlc3NlZFJlc2l6ZUFuY2hvclxyXG4gICAgICAgICAgICA/IHRyYW5zZm9ybWVyQW5jaG9yUHJlc3NlZFNoYWRvd09mZnNldFlcclxuICAgICAgICAgICAgOiBpc1Jlc2l6ZUhpbnRBbmNob3JcclxuICAgICAgICAgICAgICA/IChpc01vYmlsZSA/IDAgOiB0cmFuc2Zvcm1lckFuY2hvclNoYWRvd09mZnNldFkpXHJcbiAgICAgICAgICAgIDogdHJhbnNmb3JtZXJBbmNob3JTaGFkb3dPZmZzZXRZLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFuY2hvci5oaXRTdHJva2VXaWR0aChhbmNob3JIaXRTdHJva2VXaWR0aCk7XHJcbiAgICAgICAgYW5jaG9yLnN0cm9rZShhbmNob3JTdHJva2VDb2xvcik7XHJcbiAgICAgICAgYW5jaG9yLnN0cm9rZVdpZHRoKGFuY2hvclN0cm9rZVdpZHRoKTtcclxuICAgICAgICBhbmNob3Iub3BhY2l0eShpc1Jlc2l6ZUhpbnRBbmNob3IgfHwgaXNQcmVzc2VkUmVzaXplQW5jaG9yID8gMSA6IDAuOTgpO1xyXG4gICAgICAgIGFuY2hvci5zY2FsZSh7IHg6IGFuY2hvclNjYWxlLCB5OiBhbmNob3JTY2FsZSB9KTtcclxuICAgICAgfX1cclxuICAgICAga2VlcFJhdGlvPXtsb2NrQXNwZWN0Q291bnRkb3duIHx8IGVzR2FsZXJpYSB8fCBsb2NrQXNwZWN0VGV4dH1cclxuICAgICAgY2VudGVyZWRTY2FsaW5nPXtzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBlc1RleHRvfVxyXG4gICAgICBmbGlwRW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgIHJlc2l6ZUVuYWJsZWQ9eyFpc0RyYWdnaW5nIHx8IGlzUmVzaXplR2VzdHVyZUFjdGl2ZX1cclxuICAgICAgcm90YXRpb25TbmFwcz17WzAsIDQ1LCA5MCwgMTM1LCAxODAsIDIyNSwgMjcwLCAzMTVdfVxyXG4gICAgICByb3RhdGVBbmNob3JPZmZzZXQ9e3RyYW5zZm9ybWVyUm90YXRlT2Zmc2V0fVxyXG4gICAgICByb3RhdGlvblNuYXBUb2xlcmFuY2U9e3RyYW5zZm9ybWVyUm90YXRpb25TbmFwVG9sZXJhbmNlfVxyXG4gICAgICBib3VuZEJveEZ1bmM9eyhvbGRCb3gsIG5ld0JveCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1pblNpemUgPSBlc1RleHRvID8gMjAgOiAxMDtcclxuICAgICAgICBjb25zdCBtYXhTaXplID0gODAwO1xyXG4gICAgICAgIGlmIChlc0dhbGVyaWEpIHtcclxuICAgICAgICAgIGNvbnN0IHJvd3MgPSBNYXRoLm1heCgxLCBOdW1iZXIocHJpbWVyRWxlbWVudG8/LnJvd3MpIHx8IDEpO1xyXG4gICAgICAgICAgY29uc3QgY29scyA9IE1hdGgubWF4KDEsIE51bWJlcihwcmltZXJFbGVtZW50bz8uY29scykgfHwgMSk7XHJcbiAgICAgICAgICBjb25zdCBnYXAgPSBNYXRoLm1heCgwLCBOdW1iZXIocHJpbWVyRWxlbWVudG8/LmdhcCkgfHwgMCk7XHJcbiAgICAgICAgICBjb25zdCBjZWxsUmF0aW8gPVxyXG4gICAgICAgICAgICBwcmltZXJFbGVtZW50bz8ucmF0aW8gPT09IFwiNDozXCJcclxuICAgICAgICAgICAgICA/IDMgLyA0XHJcbiAgICAgICAgICAgICAgOiBwcmltZXJFbGVtZW50bz8ucmF0aW8gPT09IFwiMTY6OVwiXHJcbiAgICAgICAgICAgICAgICA/IDkgLyAxNlxyXG4gICAgICAgICAgICAgICAgOiAxO1xyXG5cclxuICAgICAgICAgIGNvbnN0IG1pbkdyaWRXaWR0aCA9IGdhcCAqIChjb2xzIC0gMSkgKyBjb2xzO1xyXG4gICAgICAgICAgY29uc3QgbmV4dFdpZHRoID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgIG1heFNpemUsXHJcbiAgICAgICAgICAgIE1hdGgubWF4KG1pblNpemUsIG1pbkdyaWRXaWR0aCwgTWF0aC5hYnMobmV3Qm94LndpZHRoKSlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBjb25zdCBjZWxsVyA9IE1hdGgubWF4KDEsIChuZXh0V2lkdGggLSBnYXAgKiAoY29scyAtIDEpKSAvIGNvbHMpO1xyXG4gICAgICAgICAgY29uc3QgY2VsbEggPSBjZWxsVyAqIGNlbGxSYXRpbztcclxuICAgICAgICAgIGNvbnN0IG5leHRIZWlnaHQgPSByb3dzICogY2VsbEggKyBnYXAgKiAocm93cyAtIDEpO1xyXG5cclxuICAgICAgICAgIHJldHVybiBrZWVwQm94SW5zaWRlU3RhZ2Uob2xkQm94LCB7XHJcbiAgICAgICAgICAgIC4uLm5ld0JveCxcclxuICAgICAgICAgICAgd2lkdGg6IG5leHRXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLm1heChtaW5TaXplLCBuZXh0SGVpZ2h0KSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5ld0JveC53aWR0aCA8IG1pblNpemUgfHwgbmV3Qm94LmhlaWdodCA8IG1pblNpemUpIHtcclxuICAgICAgICAgIHJldHVybiBvbGRCb3g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobG9ja0FzcGVjdENvdW50ZG93bikge1xyXG4gICAgICAgICAgY29uc3QgYmFzZVcgPSBNYXRoLm1heCgxLCBvbGRCb3gud2lkdGgpO1xyXG4gICAgICAgICAgY29uc3QgYmFzZUggPSBNYXRoLm1heCgxLCBvbGRCb3guaGVpZ2h0KTtcclxuICAgICAgICAgIGNvbnN0IHJhdGlvID0gYmFzZVcgLyBiYXNlSDtcclxuXHJcbiAgICAgICAgICBjb25zdCBkdyA9IE1hdGguYWJzKG5ld0JveC53aWR0aCAtIG9sZEJveC53aWR0aCkgLyBiYXNlVztcclxuICAgICAgICAgIGNvbnN0IGRoID0gTWF0aC5hYnMobmV3Qm94LmhlaWdodCAtIG9sZEJveC5oZWlnaHQpIC8gYmFzZUg7XHJcblxyXG4gICAgICAgICAgbGV0IHdpZHRoID0gbmV3Qm94LndpZHRoO1xyXG4gICAgICAgICAgbGV0IGhlaWdodCA9IG5ld0JveC5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgaWYgKGRoID4gZHcpIHtcclxuICAgICAgICAgICAgd2lkdGggPSBoZWlnaHQgKiByYXRpbztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoIC8gcmF0aW87XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGtlZXBCb3hJbnNpZGVTdGFnZShvbGRCb3gsIHtcclxuICAgICAgICAgICAgLi4ubmV3Qm94LFxyXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5taW4oTWF0aC5tYXgod2lkdGgsIG1pblNpemUpLCBtYXhTaXplKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLm1pbihNYXRoLm1heChoZWlnaHQsIG1pblNpemUpLCBtYXhTaXplKSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgcHJpbWVyRWxlbWVudG8/LnRpcG8gPT09IFwiZm9ybWFcIiAmJlxyXG4gICAgICAgICAgcHJpbWVyRWxlbWVudG8/LmZpZ3VyYSA9PT0gXCJjaXJjbGVcIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3Qgc2l6ZSA9IE1hdGgubWF4KG5ld0JveC53aWR0aCwgbmV3Qm94LmhlaWdodCk7XHJcbiAgICAgICAgICBjb25zdCBmaW5hbFNpemUgPSBNYXRoLm1pbihzaXplLCBtYXhTaXplKTtcclxuICAgICAgICAgIHJldHVybiBrZWVwQm94SW5zaWRlU3RhZ2Uob2xkQm94LCB7XHJcbiAgICAgICAgICAgIC4uLm5ld0JveCxcclxuICAgICAgICAgICAgd2lkdGg6IGZpbmFsU2l6ZSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBmaW5hbFNpemUsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlc1RyaWFuZ3Vsbykge1xyXG4gICAgICAgICAgY29uc3Qgc2FmZU9sZFcgPSBNYXRoLm1heCgxLCBNYXRoLmFicyhvbGRCb3gud2lkdGggfHwgbWluU2l6ZSkpO1xyXG4gICAgICAgICAgY29uc3Qgc2FmZU9sZEggPSBNYXRoLm1heCgxLCBNYXRoLmFicyhvbGRCb3guaGVpZ2h0IHx8IG1pblNpemUpKTtcclxuICAgICAgICAgIGNvbnN0IHNjYWxlWCA9IE1hdGguYWJzKG5ld0JveC53aWR0aCkgLyBzYWZlT2xkVztcclxuICAgICAgICAgIGNvbnN0IHNjYWxlWSA9IE1hdGguYWJzKG5ld0JveC5oZWlnaHQpIC8gc2FmZU9sZEg7XHJcbiAgICAgICAgICBjb25zdCB1bmlmb3JtU2NhbGUgPSBNYXRoLm1heCgwLjA1LCBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSkpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5taW4oTWF0aC5tYXgoc2FmZU9sZFcgKiB1bmlmb3JtU2NhbGUsIG1pblNpemUpLCBtYXhTaXplKTtcclxuICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWluKE1hdGgubWF4KHNhZmVPbGRIICogdW5pZm9ybVNjYWxlLCBtaW5TaXplKSwgbWF4U2l6ZSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGtlZXBCb3hJbnNpZGVTdGFnZShvbGRCb3gsIHtcclxuICAgICAgICAgICAgLi4ubmV3Qm94LFxyXG4gICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJpbWFnZW5cIiB8fFxyXG4gICAgICAgICAgcHJpbWVyRWxlbWVudG8/LnRpcG8gPT09IFwiaWNvbm9cIlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgY29uc3Qgc2NhbGVYID0gbmV3Qm94LndpZHRoIC8gb2xkQm94LndpZHRoO1xyXG4gICAgICAgICAgY29uc3Qgc2NhbGVZID0gbmV3Qm94LmhlaWdodCAvIG9sZEJveC5oZWlnaHQ7XHJcbiAgICAgICAgICBjb25zdCB1bmlmb3JtU2NhbGUgPSBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSk7XHJcblxyXG4gICAgICAgICAgY29uc3QgbmV3V2lkdGggPSBvbGRCb3gud2lkdGggKiB1bmlmb3JtU2NhbGU7XHJcbiAgICAgICAgICBjb25zdCBuZXdIZWlnaHQgPSBvbGRCb3guaGVpZ2h0ICogdW5pZm9ybVNjYWxlO1xyXG5cclxuICAgICAgICAgIHJldHVybiBrZWVwQm94SW5zaWRlU3RhZ2Uob2xkQm94LCB7XHJcbiAgICAgICAgICAgIC4uLm5ld0JveCxcclxuICAgICAgICAgICAgd2lkdGg6IE1hdGgubWluKE1hdGgubWF4KG5ld1dpZHRoLCBtaW5TaXplKSwgbWF4U2l6ZSksXHJcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5taW4oTWF0aC5tYXgobmV3SGVpZ2h0LCBtaW5TaXplKSwgbWF4U2l6ZSksXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBrZWVwQm94SW5zaWRlU3RhZ2Uob2xkQm94LCB7XHJcbiAgICAgICAgICAuLi5uZXdCb3gsXHJcbiAgICAgICAgICB3aWR0aDogTWF0aC5taW4obmV3Qm94LndpZHRoLCBtYXhTaXplKSxcclxuICAgICAgICAgIGhlaWdodDogTWF0aC5taW4obmV3Qm94LmhlaWdodCwgbWF4U2l6ZSksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH19XHJcbiAgICAgIG9uVHJhbnNmb3JtU3RhcnQ9eyhlKSA9PiB7XHJcbiAgICAgICAgc3RvcFJlc2l6ZUhpbnRQdWxzZSgpO1xyXG4gICAgICAgIGlzVHJhbnNmb3JtaW5nUmVzaXplUmVmLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgICAgIHdpbmRvdy5fcmVzaXplRGF0YSA9IHsgaXNSZXNpemluZzogdHJ1ZSB9O1xyXG4gICAgICAgIGNvbnN0IHRyID0gdHJhbnNmb3JtZXJSZWYuY3VycmVudDtcclxuICAgICAgICBjb25zdCBhY3RpdmVBbmNob3IgPVxyXG4gICAgICAgICAgdHlwZW9mIHRyPy5nZXRBY3RpdmVBbmNob3IgPT09IFwiZnVuY3Rpb25cIiA/IHRyLmdldEFjdGl2ZUFuY2hvcigpIDogbnVsbDtcclxuICAgICAgICBjb25zdCBpc1JvdGF0ZUdlc3R1cmUgPVxyXG4gICAgICAgICAgdHlwZW9mIGFjdGl2ZUFuY2hvciA9PT0gXCJzdHJpbmdcIiAmJlxyXG4gICAgICAgICAgYWN0aXZlQW5jaG9yLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJyb3RhdFwiKTtcclxuICAgICAgICB0cmFuc2Zvcm1HZXN0dXJlUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICBpc1JvdGF0ZTogaXNSb3RhdGVHZXN0dXJlLFxyXG4gICAgICAgICAgYWN0aXZlQW5jaG9yOiBhY3RpdmVBbmNob3IgPz8gbnVsbCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNldElzUmVzaXplR2VzdHVyZUFjdGl2ZSh0cnVlKTtcclxuICAgICAgICBpZiAoYWN0aXZlQW5jaG9yKSB7XHJcbiAgICAgICAgICBzZXRQcmVzc2VkUmVzaXplQW5jaG9yTmFtZSgoY3VycmVudCkgPT5cclxuICAgICAgICAgICAgY3VycmVudCA9PT0gYWN0aXZlQW5jaG9yID8gY3VycmVudCA6IGFjdGl2ZUFuY2hvclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvblRyYW5zZm9ybUludGVyYWN0aW9uU3RhcnQgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgb25UcmFuc2Zvcm1JbnRlcmFjdGlvblN0YXJ0KHtcclxuICAgICAgICAgICAgaXNSb3RhdGU6IGlzUm90YXRlR2VzdHVyZSxcclxuICAgICAgICAgICAgYWN0aXZlQW5jaG9yOiBhY3RpdmVBbmNob3IgPz8gbnVsbCxcclxuICAgICAgICAgICAgcG9pbnRlclR5cGU6IGU/LmV2dD8ucG9pbnRlclR5cGUgPz8gbnVsbCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3Qgbm9kZXMgPSB0cj8ubm9kZXM/LigpIHx8IFtdO1xyXG4gICAgICAgICAgY2lyY2xlQW5jaG9yUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgdGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG5vZGVzLmxlbmd0aCA9PT0gMSAmJlxyXG4gICAgICAgICAgICBwcmltZXJFbGVtZW50bz8udGlwbyA9PT0gXCJmb3JtYVwiICYmXHJcbiAgICAgICAgICAgIHByaW1lckVsZW1lbnRvPy5maWd1cmEgPT09IFwiY2lyY2xlXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHIwID0gbm9kZXNbMF0uZ2V0Q2xpZW50UmVjdCh7XHJcbiAgICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNraXBTaGFkb3c6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBza2lwU3Ryb2tlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGNpcmNsZUFuY2hvclJlZi5jdXJyZW50ID0geyBsZWZ0OiByMC54LCB0b3A6IHIwLnkgfTtcclxuICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgZXNUZXh0bykge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbMF07XHJcbiAgICAgICAgICAgIGxldCBjZW50ZXJYID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGNlbnRlclkgPSBudWxsO1xyXG4gICAgICAgICAgICBsZXQgYmFzZVdpZHRoID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGJhc2VIZWlnaHQgPSBudWxsO1xyXG4gICAgICAgICAgICBsZXQgYmFzZVZpc3VhbFdpZHRoID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCByZWN0ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShyZWN0Py54KSAmJiBOdW1iZXIuaXNGaW5pdGUocmVjdD8ud2lkdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXJYID0gcmVjdC54ICsgKHJlY3Qud2lkdGggLyAyKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShyZWN0Py55KSAmJiBOdW1iZXIuaXNGaW5pdGUocmVjdD8uaGVpZ2h0KSkge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyWSA9IHJlY3QueSArIChyZWN0LmhlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHJlY3Q/LndpZHRoKSAmJiByZWN0LndpZHRoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVdpZHRoID0gcmVjdC53aWR0aDtcclxuICAgICAgICAgICAgICAgIGJhc2VWaXN1YWxXaWR0aCA9IHJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUocmVjdD8uaGVpZ2h0KSAmJiByZWN0LmhlaWdodCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGJhc2VIZWlnaHQgPSByZWN0LmhlaWdodDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICAgICAgY29uc3Qgc2FmZUJhc2VGb250U2l6ZSA9XHJcbiAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKHByaW1lckVsZW1lbnRvPy5mb250U2l6ZSkgJiYgcHJpbWVyRWxlbWVudG8uZm9udFNpemUgPiAwXHJcbiAgICAgICAgICAgICAgICA/IHByaW1lckVsZW1lbnRvLmZvbnRTaXplXHJcbiAgICAgICAgICAgICAgICA6IDI0O1xyXG4gICAgICAgICAgICB0ZXh0VHJhbnNmb3JtQW5jaG9yUmVmLmN1cnJlbnQgPSB7XHJcbiAgICAgICAgICAgICAgeTogdHlwZW9mIG5vZGU/LnkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUueSgpIDogMCxcclxuICAgICAgICAgICAgICBiYXNlUm90YXRpb246XHJcbiAgICAgICAgICAgICAgICB0eXBlb2Ygbm9kZT8ucm90YXRpb24gPT09IFwiZnVuY3Rpb25cIiA/IChub2RlLnJvdGF0aW9uKCkgfHwgMCkgOiAwLFxyXG4gICAgICAgICAgICAgIGNlbnRlclgsXHJcbiAgICAgICAgICAgICAgY2VudGVyWSxcclxuICAgICAgICAgICAgICBiYXNlV2lkdGgsXHJcbiAgICAgICAgICAgICAgYmFzZUhlaWdodCxcclxuICAgICAgICAgICAgICBiYXNlRm9udFNpemU6IHNhZmVCYXNlRm9udFNpemUsXHJcbiAgICAgICAgICAgICAgbGFzdFByZXZpZXdGb250U2l6ZTogc2FmZUJhc2VGb250U2l6ZSxcclxuICAgICAgICAgICAgICBsYXN0UHJldmlld0NlbnRlclg6IGNlbnRlclgsXHJcbiAgICAgICAgICAgICAgbGFzdFByZXZpZXdDZW50ZXJZOiBjZW50ZXJZLFxyXG4gICAgICAgICAgICAgIGxhc3RQcmV2aWV3VmlzdWFsV2lkdGg6IGJhc2VWaXN1YWxXaWR0aCxcclxuICAgICAgICAgICAgICBwcmV2aWV3VGljazogMCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgVFhUREJHKFwic3RhcnRcIiwge1xyXG4gICAgICAgICAgICAgIGlkOiBwcmltZXJFbGVtZW50bz8uaWQgPz8gbnVsbCxcclxuICAgICAgICAgICAgICBiYXNlRm9udFNpemU6IHNhZmVCYXNlRm9udFNpemUsXHJcbiAgICAgICAgICAgICAgYmFzZVdpZHRoLFxyXG4gICAgICAgICAgICAgIGJhc2VIZWlnaHQsXHJcbiAgICAgICAgICAgICAgY2VudGVyWCxcclxuICAgICAgICAgICAgICBjZW50ZXJZLFxyXG4gICAgICAgICAgICAgIG5vZGVYOiB0eXBlb2Ygbm9kZT8ueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgIG5vZGVZOiB0eXBlb2Ygbm9kZT8ueSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS55KCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgIG5vZGVTY2FsZVg6IHR5cGVvZiBub2RlPy5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVYKCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgIG5vZGVTY2FsZVk6IHR5cGVvZiBub2RlPy5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVZKCkgOiBudWxsLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCB1bmlvbiA9IHJlY3RGcm9tTm9kZXMobm9kZXMpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHBhZCA9IHR5cGVvZiB0cj8ucGFkZGluZyA9PT0gXCJmdW5jdGlvblwiID8gdHIucGFkZGluZygpIDogMDtcclxuICAgICAgICAgIGNvbnN0IGJvcmRlclJlY3QgPSB1bmlvblxyXG4gICAgICAgICAgICA/IHsgeDogdW5pb24ueCAtIHBhZCwgeTogdW5pb24ueSAtIHBhZCwgd2lkdGg6IHVuaW9uLndpZHRoICsgcGFkICogMiwgaGVpZ2h0OiB1bmlvbi5oZWlnaHQgKyBwYWQgKiAyIH1cclxuICAgICAgICAgICAgOiBudWxsO1xyXG5cclxuICAgICAgICAgIGNvbnN0IG4gPSBub2Rlc1swXTtcclxuICAgICAgICAgIGNvbnN0IGlkID0gbiA/ICh0eXBlb2Ygbi5pZCA9PT0gXCJmdW5jdGlvblwiID8gbi5pZCgpIDogbi5hdHRycz8uaWQpIDogXCLiiIVcIjtcclxuICAgICAgICAgIGNvbnN0IHRyUmVjdCA9IHRyPy5nZXRDbGllbnRSZWN0Py4oeyBza2lwVHJhbnNmb3JtOiBmYWxzZSwgc2tpcFNoYWRvdzogdHJ1ZSwgc2tpcFN0cm9rZTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgICBzbG9nKFxyXG4gICAgICAgICAgICBcIltUUl0gc3RhcnRcIixcclxuICAgICAgICAgICAgYGlkPSR7aWR9YCxcclxuICAgICAgICAgICAgYG5vZGVzPSR7bm9kZXMubGVuZ3RofWAsXHJcbiAgICAgICAgICAgIHVuaW9uID8gYHVuaW9uKHc9JHt1bmlvbi53aWR0aC50b0ZpeGVkKDEpfSxoPSR7dW5pb24uaGVpZ2h0LnRvRml4ZWQoMSl9KWAgOiBcInVuaW9uKG51bGwpXCIsXHJcbiAgICAgICAgICAgIGJvcmRlclJlY3QgPyBgYm9yZGVyKHc9JHtib3JkZXJSZWN0LndpZHRoLnRvRml4ZWQoMSl9LGg9JHtib3JkZXJSZWN0LmhlaWdodC50b0ZpeGVkKDEpfSlgIDogXCJib3JkZXIobnVsbClcIixcclxuICAgICAgICAgICAgdHJSZWN0ID8gYHRyUmVjdCh3PSR7dHJSZWN0LndpZHRoLnRvRml4ZWQoMSl9LGg9JHt0clJlY3QuaGVpZ2h0LnRvRml4ZWQoMSl9KWAgOiBcInRyUmVjdChudWxsKVwiLFxyXG4gICAgICAgICAgICBgcGFkPSR7cGFkfWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCB7IH1cclxuICAgICAgfX1cclxuXHJcbiAgICAgIG9uVHJhbnNmb3JtPXsoZSkgPT4ge1xyXG4gICAgICAgIGlmICghb25UcmFuc2Zvcm0gfHwgIXRyYW5zZm9ybWVyUmVmLmN1cnJlbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgdHIgPSB0cmFuc2Zvcm1lclJlZi5jdXJyZW50O1xyXG4gICAgICAgIGNvbnN0IG5vZGVzID0gdHlwZW9mIHRyLm5vZGVzID09PSBcImZ1bmN0aW9uXCIgPyB0ci5ub2RlcygpIHx8IFtdIDogW107XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzWzBdOyAvLyDinIUgbm9kbyByZWFsIChzaW5nbGUgc2VsZWN0KVxyXG4gICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgcG9zZSA9IGdldFRyYW5zZm9ybVBvc2Uobm9kZSk7XHJcbiAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1EYXRhID0ge1xyXG4gICAgICAgICAgICB4OiBwb3NlLngsXHJcbiAgICAgICAgICAgIHk6IHBvc2UueSxcclxuICAgICAgICAgICAgcm90YXRpb246IHBvc2Uucm90YXRpb24sXHJcbiAgICAgICAgICAgIGlzUHJldmlldzogdHJ1ZSxcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgaWYgKGVzVGV4dG8pIHtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxGb250U2l6ZSA9IHByaW1lckVsZW1lbnRvLmZvbnRTaXplIHx8IDI0O1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVggPSB0eXBlb2Ygbm9kZS5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVYKCkgOiAxO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVkgPSB0eXBlb2Ygbm9kZS5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVZKCkgOiAxO1xyXG4gICAgICAgICAgICBjb25zdCBhbmNob3JEYXRhID0gdGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50IHx8IG51bGw7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VGb250U2l6ZSA9XHJcbiAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKGFuY2hvckRhdGE/LmJhc2VGb250U2l6ZSkgJiZcclxuICAgICAgICAgICAgICBhbmNob3JEYXRhLmJhc2VGb250U2l6ZSA+IDBcclxuICAgICAgICAgICAgICAgID8gYW5jaG9yRGF0YS5iYXNlRm9udFNpemVcclxuICAgICAgICAgICAgICAgIDogb3JpZ2luYWxGb250U2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGF2Z1NjYWxlID0gKE1hdGguYWJzKHNjYWxlWCkgKyBNYXRoLmFicyhzY2FsZVkpKSAvIDI7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZUZyb21SZWN0ID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGxpdmVSZWN0V2lkdGggPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Um90YXRpb24gPVxyXG4gICAgICAgICAgICAgIHR5cGVvZiBub2RlLnJvdGF0aW9uID09PSBcImZ1bmN0aW9uXCIgPyAobm9kZS5yb3RhdGlvbigpIHx8IDApIDogMDtcclxuICAgICAgICAgICAgY29uc3QgYmFzZVJvdGF0aW9uID0gTnVtYmVyKGFuY2hvckRhdGE/LmJhc2VSb3RhdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uRGVsdGEgPSBOdW1iZXIuaXNGaW5pdGUoYmFzZVJvdGF0aW9uKVxyXG4gICAgICAgICAgICAgID8gTWF0aC5hYnMoY3VycmVudFJvdGF0aW9uIC0gYmFzZVJvdGF0aW9uKVxyXG4gICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCByZWN0ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShyZWN0Py53aWR0aCkgJiYgcmVjdC53aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxpdmVSZWN0V2lkdGggPSByZWN0LndpZHRoO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBjb25zdCBiYXNlV2lkdGggPSBOdW1iZXIoYW5jaG9yRGF0YT8uYmFzZVdpZHRoKTtcclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoYmFzZVdpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgYmFzZVdpZHRoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKHJlY3Q/LndpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgcmVjdC53aWR0aCA+IDBcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHNjYWxlRnJvbVJlY3QgPSByZWN0LndpZHRoIC8gYmFzZVdpZHRoO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICBjb25zdCBjYW5Vc2VSZWN0U2NhbGUgPSByb3RhdGlvbkRlbHRhIDwgMC4xO1xyXG4gICAgICAgICAgICBjb25zdCBlZmZlY3RpdmVTY2FsZSA9XHJcbiAgICAgICAgICAgICAgY2FuVXNlUmVjdFNjYWxlICYmIE51bWJlci5pc0Zpbml0ZShzY2FsZUZyb21SZWN0KSAmJiBzY2FsZUZyb21SZWN0ID4gMFxyXG4gICAgICAgICAgICAgICAgPyBzY2FsZUZyb21SZWN0XHJcbiAgICAgICAgICAgICAgICA6IGF2Z1NjYWxlO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLmZvbnRTaXplID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgNixcclxuICAgICAgICAgICAgICBOdW1iZXIoKGJhc2VGb250U2l6ZSAqIGVmZmVjdGl2ZVNjYWxlKS50b0ZpeGVkKDMpKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAodGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGljayA9IE51bWJlcih0ZXh0VHJhbnNmb3JtQW5jaG9yUmVmLmN1cnJlbnQucHJldmlld1RpY2sgfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICAgIHRleHRUcmFuc2Zvcm1BbmNob3JSZWYuY3VycmVudC5wcmV2aWV3VGljayA9IHRpY2s7XHJcbiAgICAgICAgICAgICAgdGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50Lmxhc3RQcmV2aWV3Rm9udFNpemUgPSB0cmFuc2Zvcm1EYXRhLmZvbnRTaXplO1xyXG4gICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUobGl2ZVJlY3RXaWR0aCkgJiYgbGl2ZVJlY3RXaWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRleHRUcmFuc2Zvcm1BbmNob3JSZWYuY3VycmVudC5sYXN0UHJldmlld1Zpc3VhbFdpZHRoID0gbGl2ZVJlY3RXaWR0aDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKHRpY2sgPD0gMiB8fCB0aWNrICUgNSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgVFhUREJHKFwicHJldmlld1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgIGlkOiBwcmltZXJFbGVtZW50bz8uaWQgPz8gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgdGljayxcclxuICAgICAgICAgICAgICAgICAgc2NhbGVYLFxyXG4gICAgICAgICAgICAgICAgICBzY2FsZVksXHJcbiAgICAgICAgICAgICAgICAgIGF2Z1NjYWxlLFxyXG4gICAgICAgICAgICAgICAgICBzY2FsZUZyb21SZWN0LFxyXG4gICAgICAgICAgICAgICAgICBlZmZlY3RpdmVTY2FsZSxcclxuICAgICAgICAgICAgICAgICAgYmFzZUZvbnRTaXplLFxyXG4gICAgICAgICAgICAgICAgICBmb250U2l6ZTogdHJhbnNmb3JtRGF0YS5mb250U2l6ZSxcclxuICAgICAgICAgICAgICAgICAgbGl2ZVJlY3RXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgY2VudGVyWFRhcmdldDogdGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50Py5jZW50ZXJYID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgIG5vZGVYOiB0eXBlb2Ygbm9kZT8ueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICBub2RlWTogdHlwZW9mIG5vZGU/LnkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUueSgpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnNjYWxlWCA9IDE7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybURhdGEuc2NhbGVZID0gMTtcclxuICAgICAgICAgICAgaWYgKGNhblVzZVJlY3RTY2FsZSAmJiBOdW1iZXIuaXNGaW5pdGUodGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50Py55KSkge1xyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEueSA9IHRleHRUcmFuc2Zvcm1BbmNob3JSZWYuY3VycmVudC55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUodGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50Py5jZW50ZXJYKSkge1xyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEudGV4dENlbnRlclggPSB0ZXh0VHJhbnNmb3JtQW5jaG9yUmVmLmN1cnJlbnQuY2VudGVyWDtcclxuICAgICAgICAgICAgICBpZiAodGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0VHJhbnNmb3JtQW5jaG9yUmVmLmN1cnJlbnQubGFzdFByZXZpZXdDZW50ZXJYID1cclxuICAgICAgICAgICAgICAgICAgdGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50LmNlbnRlclg7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUodGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50Py5jZW50ZXJZKSkge1xyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEudGV4dENlbnRlclkgPSB0ZXh0VHJhbnNmb3JtQW5jaG9yUmVmLmN1cnJlbnQuY2VudGVyWTtcclxuICAgICAgICAgICAgICBpZiAodGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0VHJhbnNmb3JtQW5jaG9yUmVmLmN1cnJlbnQubGFzdFByZXZpZXdDZW50ZXJZID1cclxuICAgICAgICAgICAgICAgICAgdGV4dFRyYW5zZm9ybUFuY2hvclJlZi5jdXJyZW50LmNlbnRlclk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVggPSB0eXBlb2Ygbm9kZS5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVYKCkgOiAxO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVkgPSB0eXBlb2Ygbm9kZS5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUuc2NhbGVZKCkgOiAxO1xyXG5cclxuICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS5zY2FsZVggPSBzY2FsZVg7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybURhdGEuc2NhbGVZID0gc2NhbGVZO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByaW1lckVsZW1lbnRvPy50aXBvID09PSBcImNvdW50ZG93blwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY291bnRkb3duU2l6ZSA9IGdldENvdW50ZG93blNjYWxlZFNpemUobm9kZSk7XHJcbiAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS53aWR0aCA9IGNvdW50ZG93blNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS5oZWlnaHQgPSBjb3VudGRvd25TaXplLmhlaWdodDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlc1RyaWFuZ3Vsbykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGJhc2VSYWRpdXMgPSBOdW1iZXIuaXNGaW5pdGUocHJpbWVyRWxlbWVudG8/LnJhZGl1cylcclxuICAgICAgICAgICAgICAgID8gcHJpbWVyRWxlbWVudG8ucmFkaXVzXHJcbiAgICAgICAgICAgICAgICA6IDYwO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGF2Z1NjYWxlID0gKE1hdGguYWJzKHNjYWxlWCkgKyBNYXRoLmFicyhzY2FsZVkpKSAvIDI7XHJcbiAgICAgICAgICAgICAgdHJhbnNmb3JtRGF0YS5yYWRpdXMgPSBNYXRoLm1heCgxLCBiYXNlUmFkaXVzICogYXZnU2NhbGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsV2lkdGggPSBwcmltZXJFbGVtZW50by53aWR0aCB8fCAxMDA7XHJcbiAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxIZWlnaHQgPSBwcmltZXJFbGVtZW50by5oZWlnaHQgfHwgMTAwO1xyXG4gICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEud2lkdGggPSBNYXRoLmFicyhvcmlnaW5hbFdpZHRoICogc2NhbGVYKTtcclxuICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLmhlaWdodCA9IE1hdGguYWJzKG9yaWdpbmFsSGVpZ2h0ICogc2NhbGVZKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByaW1lckVsZW1lbnRvPy5maWd1cmEgPT09IFwiY2lyY2xlXCIpIHtcclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGl2ZVJlY3QgPSBub2RlLmdldENsaWVudFJlY3Qoe1xyXG4gICAgICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgc2tpcFN0cm9rZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlhbWV0ZXIgPSBNYXRoLm1heCgxLCBNYXRoLm1heChsaXZlUmVjdC53aWR0aCwgbGl2ZVJlY3QuaGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnJhZGl1cyA9IGRpYW1ldGVyIC8gMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IGNpcmNsZUFuY2hvclJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuY2hvcikge1xyXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnggPSBhbmNob3IubGVmdCArIHRyYW5zZm9ybURhdGEucmFkaXVzO1xyXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnkgPSBhbmNob3IudG9wICsgdHJhbnNmb3JtRGF0YS5yYWRpdXM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1EYXRhLnggPSBsaXZlUmVjdC54ICsgdHJhbnNmb3JtRGF0YS5yYWRpdXM7XHJcbiAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybURhdGEueSA9IGxpdmVSZWN0LnkgKyB0cmFuc2Zvcm1EYXRhLnJhZGl1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBvblRyYW5zZm9ybSh0cmFuc2Zvcm1EYXRhKTtcclxuXHJcbiAgICAgICAgICAvLyAtLS0gTE9HIENPTVBBQ1RPIChvcGNpb25hbCkgLS0tXHJcbiAgICAgICAgICBjb25zdCBpZCA9ICh0eXBlb2Ygbm9kZS5pZCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5pZCgpIDogbm9kZS5hdHRycz8uaWQpIHx8IFwi4oiFXCI7XHJcbiAgICAgICAgICBjb25zdCBzeCA9IG5vZGUuc2NhbGVYPy4oKSA/PyAxO1xyXG4gICAgICAgICAgY29uc3Qgc3kgPSBub2RlLnNjYWxlWT8uKCkgPz8gMTtcclxuICAgICAgICAgIGNvbnN0IHIgPSBub2RlLmdldENsaWVudFJlY3QoeyBza2lwVHJhbnNmb3JtOiBmYWxzZSwgc2tpcFNoYWRvdzogdHJ1ZSwgc2tpcFN0cm9rZTogdHJ1ZSB9KTtcclxuICAgICAgICAgIHNsb2coXHJcbiAgICAgICAgICAgIFwiW1RSXSBsaXZlXCIsXHJcbiAgICAgICAgICAgIGBpZD0ke2lkfWAsXHJcbiAgICAgICAgICAgIGB0aXBvPSR7cHJpbWVyRWxlbWVudG8/LnRpcG8gfHwgXCLiiIVcIn1gLFxyXG4gICAgICAgICAgICBgc3g9JHtzeC50b0ZpeGVkKDMpfWAsXHJcbiAgICAgICAgICAgIGBzeT0ke3N5LnRvRml4ZWQoMyl9YCxcclxuICAgICAgICAgICAgYHg9JHsobm9kZS54Py4oKSA/PyAwKS50b0ZpeGVkKDEpfWAsXHJcbiAgICAgICAgICAgIGB5PSR7KG5vZGUueT8uKCkgPz8gMCkudG9GaXhlZCgxKX1gLFxyXG4gICAgICAgICAgICBgbm9kZVJlY3Qodz0ke3Iud2lkdGgudG9GaXhlZCgxKX0saD0ke3IuaGVpZ2h0LnRvRml4ZWQoMSl9KWAsXHJcbiAgICAgICAgICAgIGB3PSR7dHJhbnNmb3JtRGF0YS53aWR0aCA/PyBcIuKIhVwifWAsXHJcbiAgICAgICAgICAgIGBoPSR7dHJhbnNmb3JtRGF0YS5oZWlnaHQgPz8gXCLiiIVcIn1gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBlbiBvblRyYW5zZm9ybTpcIiwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfX1cclxuICAgICAgb25UcmFuc2Zvcm1FbmQ9eyhlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25TbmFwc2hvdCA9IHtcclxuICAgICAgICAgIGlzUm90YXRlOiBCb29sZWFuKHRyYW5zZm9ybUdlc3R1cmVSZWYuY3VycmVudD8uaXNSb3RhdGUpLFxyXG4gICAgICAgICAgYWN0aXZlQW5jaG9yOiB0cmFuc2Zvcm1HZXN0dXJlUmVmLmN1cnJlbnQ/LmFjdGl2ZUFuY2hvciA/PyBudWxsLFxyXG4gICAgICAgICAgcG9pbnRlclR5cGU6IGU/LmV2dD8ucG9pbnRlclR5cGUgPz8gbnVsbCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IG5vdGlmeVRyYW5zZm9ybUludGVyYWN0aW9uRW5kID0gKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBvblRyYW5zZm9ybUludGVyYWN0aW9uRW5kID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgb25UcmFuc2Zvcm1JbnRlcmFjdGlvbkVuZChpbnRlcmFjdGlvblNuYXBzaG90KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRyYW5zZm9ybUdlc3R1cmVSZWYuY3VycmVudCA9IHtcclxuICAgICAgICAgICAgaXNSb3RhdGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBhY3RpdmVBbmNob3I6IG51bGwsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBpZiAoIXRyYW5zZm9ybWVyUmVmLmN1cnJlbnQgfHwgIW9uVHJhbnNmb3JtKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgY29uc3QgdHIgPSB0cmFuc2Zvcm1lclJlZi5jdXJyZW50O1xyXG4gICAgICAgICAgY29uc3Qgbm9kZXMgPSB0eXBlb2YgdHIubm9kZXMgPT09IFwiZnVuY3Rpb25cIiA/IHRyLm5vZGVzKCkgfHwgW10gOiBbXTtcclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIE1VTFRJLVNFTEVDQ0nDk05cclxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRTY2FsZVggPSB0eXBlb2YgdHIuc2NhbGVYID09PSBcImZ1bmN0aW9uXCIgPyB0ci5zY2FsZVgoKSB8fCAxIDogMTtcclxuICAgICAgICAgICAgY29uc3QgdFNjYWxlWSA9IHR5cGVvZiB0ci5zY2FsZVkgPT09IFwiZnVuY3Rpb25cIiA/IHRyLnNjYWxlWSgpIHx8IDEgOiAxO1xyXG4gICAgICAgICAgICBjb25zdCBhdmcgPSAoTWF0aC5hYnModFNjYWxlWCkgKyBNYXRoLmFicyh0U2NhbGVZKSkgLyAyO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlcyA9IG5vZGVzXHJcbiAgICAgICAgICAgICAgLm1hcCgobikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGlkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIGlkID0gKHR5cGVvZiBuLmlkID09PSBcImZ1bmN0aW9uXCIgPyBuLmlkKCkgOiBuLmF0dHJzPy5pZCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggeyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlkKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvYmogPSAob2JqZXRvcyB8fCBbXSkuZmluZCgobykgPT4gby5pZCA9PT0gaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvYmopIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZCA9IHtcclxuICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgIHg6IHR5cGVvZiBuLnggPT09IFwiZnVuY3Rpb25cIiA/IG4ueCgpIDogb2JqLngsXHJcbiAgICAgICAgICAgICAgICAgIHk6IHR5cGVvZiBuLnkgPT09IFwiZnVuY3Rpb25cIiA/IG4ueSgpIDogb2JqLnksXHJcbiAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB0eXBlb2Ygbi5yb3RhdGlvbiA9PT0gXCJmdW5jdGlvblwiID8gbi5yb3RhdGlvbigpIHx8IDAgOiAob2JqLnJvdGF0aW9uIHx8IDApLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnRpcG8gPT09IFwidGV4dG9cIikge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gb2JqLmZvbnRTaXplIHx8IDI0O1xyXG4gICAgICAgICAgICAgICAgICB1cGQuZm9udFNpemUgPSBNYXRoLm1heCg2LCBNYXRoLnJvdW5kKGJhc2UgKiBhdmcpKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuLnNjYWxlWCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5zY2FsZVgoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbi5zY2FsZVkoMSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob2JqLnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvYmouZmlndXJhID09PSBcImNpcmNsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VSID0gb2JqLnJhZGl1cyB8fCA1MDtcclxuICAgICAgICAgICAgICAgICAgdXBkLnJhZGl1cyA9IGJhc2VSICogYXZnO1xyXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG4uc2NhbGVYID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBuLnNjYWxlWCgxKTtcclxuICAgICAgICAgICAgICAgICAgICBuLnNjYWxlWSgxKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdXBkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iai5maWd1cmEgPT09IFwidHJpYW5nbGVcIikge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBiYXNlUiA9IG9iai5yYWRpdXMgfHwgNjA7XHJcbiAgICAgICAgICAgICAgICAgIHVwZC5yYWRpdXMgPSBNYXRoLm1heCgxLCBiYXNlUiAqIGF2Zyk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygbi5zY2FsZVggPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIG4uc2NhbGVYKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG4uc2NhbGVZKDEpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB1cGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9iai50aXBvID09PSBcImNvdW50ZG93blwiKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ZG93blNpemUgPSBnZXRDb3VudGRvd25TY2FsZWRTaXplKG4pO1xyXG4gICAgICAgICAgICAgICAgICB1cGQud2lkdGggPSBjb3VudGRvd25TaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICB1cGQuaGVpZ2h0ID0gY291bnRkb3duU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB1cGQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZVcgPVxyXG4gICAgICAgICAgICAgICAgICBvYmoud2lkdGggIT0gbnVsbCA/IG9iai53aWR0aCA6ICh0eXBlb2Ygbi53aWR0aCA9PT0gXCJmdW5jdGlvblwiID8gbi53aWR0aCgpIDogMTAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VIID1cclxuICAgICAgICAgICAgICAgICAgb2JqLmhlaWdodCAhPSBudWxsID8gb2JqLmhlaWdodCA6ICh0eXBlb2Ygbi5oZWlnaHQgPT09IFwiZnVuY3Rpb25cIiA/IG4uaGVpZ2h0KCkgOiAxMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHVwZC53aWR0aCA9IE1hdGguYWJzKGJhc2VXICogdFNjYWxlWCk7XHJcbiAgICAgICAgICAgICAgICB1cGQuaGVpZ2h0ID0gTWF0aC5hYnMoYmFzZUggKiB0U2NhbGVZKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG4uc2NhbGVYID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgbi5zY2FsZVgoMSk7XHJcbiAgICAgICAgICAgICAgICAgIG4uc2NhbGVZKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZDtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XHJcblxyXG4gICAgICAgICAgICBvblRyYW5zZm9ybSh7IGlzRmluYWw6IHRydWUsIGJhdGNoOiB1cGRhdGVzIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ci5zY2FsZVggPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgIHRyLnNjYWxlWCgxKTtcclxuICAgICAgICAgICAgICB0ci5zY2FsZVkoMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHIuZ2V0TGF5ZXIoKT8uYmF0Y2hEcmF3KCk7XHJcblxyXG4gICAgICAgICAgICB3aW5kb3cuX3Jlc2l6ZURhdGEgPSB7IGlzUmVzaXppbmc6IGZhbHNlIH07XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5fcmVzaXplRGF0YSA9IG51bGw7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZW4gb25UcmFuc2Zvcm1FbmQgKG11bHRpKTpcIiwgZXJyKTtcclxuICAgICAgICAgICAgd2luZG93Ll9yZXNpemVEYXRhID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIC8vIFNJTkdMRS1TRUxFQ0NJw5NOXHJcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1swXTtcclxuICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgcG9zZSA9IGdldFRyYW5zZm9ybVBvc2Uobm9kZSk7XHJcbiAgICAgICAgY29uc3QgZmluYWxEYXRhID0ge1xyXG4gICAgICAgICAgICB4OiBwb3NlLngsXHJcbiAgICAgICAgICAgIHk6IHBvc2UueSxcclxuICAgICAgICAgICAgcm90YXRpb246IHBvc2Uucm90YXRpb24sXHJcbiAgICAgICAgICAgIGlzRmluYWw6IHRydWUsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgbGV0IHRleHRQcmV2aWV3RW5kU25hcHNob3QgPSBudWxsO1xyXG5cclxuICAgICAgICAgIGlmIChlc1RleHRvKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRm9udFNpemUgPSBwcmltZXJFbGVtZW50by5mb250U2l6ZSB8fCAyNDtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gdHlwZW9mIG5vZGUuc2NhbGVYID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWCgpIDogMTtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVZID0gdHlwZW9mIG5vZGUuc2NhbGVZID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWSgpIDogMTtcclxuICAgICAgICAgICAgY29uc3QgYW5jaG9yRGF0YSA9IHRleHRUcmFuc2Zvcm1BbmNob3JSZWYuY3VycmVudCB8fCBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlRm9udFNpemUgPVxyXG4gICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShhbmNob3JEYXRhPy5iYXNlRm9udFNpemUpICYmXHJcbiAgICAgICAgICAgICAgYW5jaG9yRGF0YS5iYXNlRm9udFNpemUgPiAwXHJcbiAgICAgICAgICAgICAgICA/IGFuY2hvckRhdGEuYmFzZUZvbnRTaXplXHJcbiAgICAgICAgICAgICAgICA6IG9yaWdpbmFsRm9udFNpemU7XHJcbiAgICAgICAgICAgIGNvbnN0IGF2Z1NjYWxlID0gKE1hdGguYWJzKHNjYWxlWCkgKyBNYXRoLmFicyhzY2FsZVkpKSAvIDI7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZUZyb21SZWN0ID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IHZpc3VhbFdpZHRoRnJvbVJlY3QgPSBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Um90YXRpb24gPVxyXG4gICAgICAgICAgICAgIHR5cGVvZiBub2RlLnJvdGF0aW9uID09PSBcImZ1bmN0aW9uXCIgPyAobm9kZS5yb3RhdGlvbigpIHx8IDApIDogMDtcclxuICAgICAgICAgICAgY29uc3QgYmFzZVJvdGF0aW9uID0gTnVtYmVyKGFuY2hvckRhdGE/LmJhc2VSb3RhdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uRGVsdGEgPSBOdW1iZXIuaXNGaW5pdGUoYmFzZVJvdGF0aW9uKVxyXG4gICAgICAgICAgICAgID8gTWF0aC5hYnMoY3VycmVudFJvdGF0aW9uIC0gYmFzZVJvdGF0aW9uKVxyXG4gICAgICAgICAgICAgIDogMDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBjb25zdCByZWN0ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShyZWN0Py53aWR0aCkgJiYgcmVjdC53aWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZpc3VhbFdpZHRoRnJvbVJlY3QgPSByZWN0LndpZHRoO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBjb25zdCBiYXNlV2lkdGggPSBOdW1iZXIoYW5jaG9yRGF0YT8uYmFzZVdpZHRoKTtcclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoYmFzZVdpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgYmFzZVdpZHRoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKHJlY3Q/LndpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgcmVjdC53aWR0aCA+IDBcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHNjYWxlRnJvbVJlY3QgPSByZWN0LndpZHRoIC8gYmFzZVdpZHRoO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICBjb25zdCBjYW5Vc2VSZWN0U2NhbGUgPSByb3RhdGlvbkRlbHRhIDwgMC4xO1xyXG4gICAgICAgICAgICBjb25zdCBlZmZlY3RpdmVTY2FsZSA9XHJcbiAgICAgICAgICAgICAgY2FuVXNlUmVjdFNjYWxlICYmIE51bWJlci5pc0Zpbml0ZShzY2FsZUZyb21SZWN0KSAmJiBzY2FsZUZyb21SZWN0ID4gMFxyXG4gICAgICAgICAgICAgICAgPyBzY2FsZUZyb21SZWN0XHJcbiAgICAgICAgICAgICAgICA6IGF2Z1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29tcHV0ZWRGb250U2l6ZSA9IE1hdGgubWF4KFxyXG4gICAgICAgICAgICAgIDYsXHJcbiAgICAgICAgICAgICAgTnVtYmVyKChiYXNlRm9udFNpemUgKiBlZmZlY3RpdmVTY2FsZSkudG9GaXhlZCgzKSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZmluYWxEYXRhLmZvbnRTaXplID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgNixcclxuICAgICAgICAgICAgICBOdW1iZXIoXHJcbiAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoYW5jaG9yRGF0YT8ubGFzdFByZXZpZXdGb250U2l6ZSkgJiZcclxuICAgICAgICAgICAgICAgICAgYW5jaG9yRGF0YS5sYXN0UHJldmlld0ZvbnRTaXplID4gMFxyXG4gICAgICAgICAgICAgICAgICA/IGFuY2hvckRhdGEubGFzdFByZXZpZXdGb250U2l6ZVxyXG4gICAgICAgICAgICAgICAgICA6IGNvbXB1dGVkRm9udFNpemVcclxuICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGZpbmFsRGF0YS5zY2FsZVggPSAxO1xyXG4gICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVZID0gMTtcclxuICAgICAgICAgICAgaWYgKGNhblVzZVJlY3RTY2FsZSAmJiBOdW1iZXIuaXNGaW5pdGUoYW5jaG9yRGF0YT8ueSkpIHtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEueSA9IGFuY2hvckRhdGEueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGFuY2hvckRhdGE/Lmxhc3RQcmV2aWV3Q2VudGVyWCkpIHtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEudGV4dENlbnRlclggPSBhbmNob3JEYXRhLmxhc3RQcmV2aWV3Q2VudGVyWDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChOdW1iZXIuaXNGaW5pdGUoYW5jaG9yRGF0YT8uY2VudGVyWCkpIHtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEudGV4dENlbnRlclggPSBhbmNob3JEYXRhLmNlbnRlclg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShhbmNob3JEYXRhPy5sYXN0UHJldmlld0NlbnRlclkpKSB7XHJcbiAgICAgICAgICAgICAgZmluYWxEYXRhLnRleHRDZW50ZXJZID0gYW5jaG9yRGF0YS5sYXN0UHJldmlld0NlbnRlclk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoTnVtYmVyLmlzRmluaXRlKGFuY2hvckRhdGE/LmNlbnRlclkpKSB7XHJcbiAgICAgICAgICAgICAgZmluYWxEYXRhLnRleHRDZW50ZXJZID0gYW5jaG9yRGF0YS5jZW50ZXJZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHZpc3VhbFdpZHRoID1cclxuICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoYW5jaG9yRGF0YT8ubGFzdFByZXZpZXdWaXN1YWxXaWR0aCkgJiZcclxuICAgICAgICAgICAgICBhbmNob3JEYXRhLmxhc3RQcmV2aWV3VmlzdWFsV2lkdGggPiAwXHJcbiAgICAgICAgICAgICAgICA/IGFuY2hvckRhdGEubGFzdFByZXZpZXdWaXN1YWxXaWR0aFxyXG4gICAgICAgICAgICAgICAgOiB2aXN1YWxXaWR0aEZyb21SZWN0O1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHZpc3VhbFdpZHRoKSAmJiB2aXN1YWxXaWR0aCA+IDApIHtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEudGV4dFZpc3VhbFdpZHRoID0gdmlzdWFsV2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGV4dFByZXZpZXdFbmRTbmFwc2hvdCA9IHtcclxuICAgICAgICAgICAgICBpZDogcHJpbWVyRWxlbWVudG8/LmlkID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgeDogdHlwZW9mIG5vZGU/LnggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUueCgpIDogbnVsbCxcclxuICAgICAgICAgICAgICB5OiB0eXBlb2Ygbm9kZT8ueSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS55KCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgIHNjYWxlWCxcclxuICAgICAgICAgICAgICBzY2FsZVksXHJcbiAgICAgICAgICAgICAgZm9udFNpemU6IHR5cGVvZiBub2RlPy5mb250U2l6ZSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5mb250U2l6ZSgpIDogbnVsbCxcclxuICAgICAgICAgICAgICByZWN0V2lkdGg6IE51bWJlci5pc0Zpbml0ZSh2aXN1YWxXaWR0aEZyb21SZWN0KSA/IHZpc3VhbFdpZHRoRnJvbVJlY3QgOiBudWxsLFxyXG4gICAgICAgICAgICAgIHJlY3RIZWlnaHQ6IG51bGwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgcmVjdEZvclNuYXBzaG90ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShyZWN0Rm9yU25hcHNob3Q/LmhlaWdodCkpIHtcclxuICAgICAgICAgICAgICAgIHRleHRQcmV2aWV3RW5kU25hcHNob3QucmVjdEhlaWdodCA9IHJlY3RGb3JTbmFwc2hvdC5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgICAgIFRYVERCRyhcImVuZFwiLCB7XHJcbiAgICAgICAgICAgICAgaWQ6IHByaW1lckVsZW1lbnRvPy5pZCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgIHNjYWxlWCxcclxuICAgICAgICAgICAgICBzY2FsZVksXHJcbiAgICAgICAgICAgICAgYXZnU2NhbGUsXHJcbiAgICAgICAgICAgICAgc2NhbGVGcm9tUmVjdCxcclxuICAgICAgICAgICAgICBlZmZlY3RpdmVTY2FsZSxcclxuICAgICAgICAgICAgICBjb21wdXRlZEZvbnRTaXplLFxyXG4gICAgICAgICAgICAgIGZpbmFsRm9udFNpemU6IGZpbmFsRGF0YS5mb250U2l6ZSxcclxuICAgICAgICAgICAgICB0ZXh0Q2VudGVyWDogZmluYWxEYXRhLnRleHRDZW50ZXJYID8/IG51bGwsXHJcbiAgICAgICAgICAgICAgdGV4dENlbnRlclk6IGZpbmFsRGF0YS50ZXh0Q2VudGVyWSA/PyBudWxsLFxyXG4gICAgICAgICAgICAgIHRleHRWaXN1YWxXaWR0aDogZmluYWxEYXRhLnRleHRWaXN1YWxXaWR0aCA/PyBudWxsLFxyXG4gICAgICAgICAgICAgIG5vZGVSZWN0V2lkdGg6IHZpc3VhbFdpZHRoRnJvbVJlY3QsXHJcbiAgICAgICAgICAgICAgbm9kZVg6IHR5cGVvZiBub2RlPy54ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLngoKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgbm9kZVk6IHR5cGVvZiBub2RlPy55ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnkoKSA6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQXBsYW5hciBlc2NhbGEgZGVsIHRleHRvIGVuIGVsIHJlbGVhc2UgcGFyYSBldml0YXIgZG9ibGUgZXNjYWxhZG9cclxuICAgICAgICAgICAgLy8gKGVzY2FsYSBkZWwgbm9kbyArIGZvbnRTaXplIHBlcnNpc3RpZG8pLlxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZS5zY2FsZVggPT09IFwiZnVuY3Rpb25cIikgbm9kZS5zY2FsZVgoMSk7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlLnNjYWxlWSA9PT0gXCJmdW5jdGlvblwiKSBub2RlLnNjYWxlWSgxKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKGZpbmFsRGF0YS5mb250U2l6ZSkgJiZcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBub2RlLmZvbnRTaXplID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuZm9udFNpemUoZmluYWxEYXRhLmZvbnRTaXplKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2VudGVyWCA9IE51bWJlcihmaW5hbERhdGEudGV4dENlbnRlclgpO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldENlbnRlclkgPSBOdW1iZXIoZmluYWxEYXRhLnRleHRDZW50ZXJZKTtcclxuICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAoTnVtYmVyLmlzRmluaXRlKHRhcmdldENlbnRlclgpIHx8IE51bWJlci5pc0Zpbml0ZSh0YXJnZXRDZW50ZXJZKSkgJiZcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBub2RlLnggPT09IFwiZnVuY3Rpb25cIiAmJlxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG5vZGUueSA9PT0gXCJmdW5jdGlvblwiXHJcbiAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBmbGF0dGVuZWRSZWN0ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBmbGF0dGVuZWRDZW50ZXJYID1cclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoZmxhdHRlbmVkUmVjdD8ueCkgJiZcclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoZmxhdHRlbmVkUmVjdD8ud2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IGZsYXR0ZW5lZFJlY3QueCArIChmbGF0dGVuZWRSZWN0LndpZHRoIC8gMilcclxuICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZmxhdHRlbmVkQ2VudGVyWSA9XHJcbiAgICAgICAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKGZsYXR0ZW5lZFJlY3Q/LnkpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKGZsYXR0ZW5lZFJlY3Q/LmhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgID8gZmxhdHRlbmVkUmVjdC55ICsgKGZsYXR0ZW5lZFJlY3QuaGVpZ2h0IC8gMilcclxuICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZmxhdHRlbmVkQ2VudGVyWCkgJiYgTnVtYmVyLmlzRmluaXRlKHRhcmdldENlbnRlclgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS54KG5vZGUueCgpICsgKHRhcmdldENlbnRlclggLSBmbGF0dGVuZWRDZW50ZXJYKSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShmbGF0dGVuZWRDZW50ZXJZKSAmJiBOdW1iZXIuaXNGaW5pdGUodGFyZ2V0Q2VudGVyWSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLnkobm9kZS55KCkgKyAodGFyZ2V0Q2VudGVyWSAtIGZsYXR0ZW5lZENlbnRlclkpKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgbm9kZS5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgYXBsYW5hbmRvIGVzY2FsYSBkZSB0ZXh0byAoc3luYyk6XCIsIGVycik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghY2FuVXNlUmVjdFNjYWxlKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub2RlPy54ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIGZpbmFsRGF0YS54ID0gbm9kZS54KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZT8ueSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5hbERhdGEueSA9IG5vZGUueSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUGFyYSB0ZXh0byBldml0YW1vcyBhcGxhbmFyIGFudGVzIGRlbCBjb21taXQgZW4gUmVhY3QsXHJcbiAgICAgICAgICAgIC8vIGFzw60gbm8gYXBhcmVjZSB1biBmcmFtZSBpbnRlcm1lZGlvIGNvbiB0YW1hw7FvIFwic2FsdGFkb1wiLlxyXG4gICAgICAgICAgICB0ZXh0VHJhbnNmb3JtQW5jaG9yUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gdHlwZW9mIG5vZGUuc2NhbGVYID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWCgpIDogMTtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVZID0gdHlwZW9mIG5vZGUuc2NhbGVZID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWSgpIDogMTtcclxuICAgICAgICAgICAgaWYgKHByaW1lckVsZW1lbnRvPy50aXBvID09PSBcImNvdW50ZG93blwiKSB7XHJcbiAgICAgICAgICAgICAgLy8gQ291bnRkb3duOiBwZXJzaXN0aXIgZXNjYWxhIHJlYWwgcGFyYSBxdWUgZWwgcmVzdWx0YWRvIGZpbmFsXHJcbiAgICAgICAgICAgICAgLy8gc2VhIGV4YWN0YW1lbnRlIGVsIG1pc21vIHF1ZSBzZSB2ZSBhbCBzb2x0YXIuXHJcbiAgICAgICAgICAgICAgZmluYWxEYXRhLnNjYWxlWCA9IHNjYWxlWDtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVZID0gc2NhbGVZO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNvdW50ZG93blNpemUgPSBnZXRDb3VudGRvd25TY2FsZWRTaXplKG5vZGUpO1xyXG4gICAgICAgICAgICAgIGZpbmFsRGF0YS53aWR0aCA9IGNvdW50ZG93blNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgZmluYWxEYXRhLmhlaWdodCA9IGNvdW50ZG93blNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVzVHJpYW5ndWxvKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYmFzZVJhZGl1cyA9IE51bWJlci5pc0Zpbml0ZShwcmltZXJFbGVtZW50bz8ucmFkaXVzKVxyXG4gICAgICAgICAgICAgICAgPyBwcmltZXJFbGVtZW50by5yYWRpdXNcclxuICAgICAgICAgICAgICAgIDogNjA7XHJcbiAgICAgICAgICAgICAgY29uc3QgYXZnU2NhbGUgPSAoTWF0aC5hYnMoc2NhbGVYKSArIE1hdGguYWJzKHNjYWxlWSkpIC8gMjtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVYID0gMTtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEuc2NhbGVZID0gMTtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEucmFkaXVzID0gTWF0aC5tYXgoMSwgYmFzZVJhZGl1cyAqIGF2Z1NjYWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG5vZGUuc2NhbGVYKDEpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5zY2FsZVkoMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5vZGUucmFkaXVzID09PSBcImZ1bmN0aW9uXCIpIG5vZGUucmFkaXVzKGZpbmFsRGF0YS5yYWRpdXMpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGFwbGFuYW5kbyBlc2NhbGEgZGUgdHJpw6FuZ3VsbyAoc3luYyk6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGZpbmFsRGF0YS5zY2FsZVggPSAxO1xyXG4gICAgICAgICAgICAgIGZpbmFsRGF0YS5zY2FsZVkgPSAxO1xyXG4gICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsV2lkdGggPSBwcmltZXJFbGVtZW50by53aWR0aCB8fCAxMDA7XHJcbiAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxIZWlnaHQgPSBwcmltZXJFbGVtZW50by5oZWlnaHQgfHwgMTAwO1xyXG5cclxuICAgICAgICAgICAgICBmaW5hbERhdGEud2lkdGggPSBNYXRoLmFicyhvcmlnaW5hbFdpZHRoICogc2NhbGVYKTtcclxuICAgICAgICAgICAgICBmaW5hbERhdGEuaGVpZ2h0ID0gTWF0aC5hYnMob3JpZ2luYWxIZWlnaHQgKiBzY2FsZVkpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAocHJpbWVyRWxlbWVudG8/LmZpZ3VyYSA9PT0gXCJjaXJjbGVcIikge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbGl2ZVJlY3QgPSBub2RlLmdldENsaWVudFJlY3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraXBTaGFkb3c6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcFN0cm9rZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRpYW1ldGVyID0gTWF0aC5tYXgoMSwgTWF0aC5tYXgobGl2ZVJlY3Qud2lkdGgsIGxpdmVSZWN0LmhlaWdodCkpO1xyXG4gICAgICAgICAgICAgICAgICBmaW5hbERhdGEucmFkaXVzID0gZGlhbWV0ZXIgLyAyO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBjaXJjbGVBbmNob3JSZWYuY3VycmVudDtcclxuICAgICAgICAgICAgICAgICAgaWYgKGFuY2hvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsRGF0YS54ID0gYW5jaG9yLmxlZnQgKyBmaW5hbERhdGEucmFkaXVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsRGF0YS55ID0gYW5jaG9yLnRvcCArIGZpbmFsRGF0YS5yYWRpdXM7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxEYXRhLnggPSBsaXZlUmVjdC54ICsgZmluYWxEYXRhLnJhZGl1cztcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbERhdGEueSA9IGxpdmVSZWN0LnkgKyBmaW5hbERhdGEucmFkaXVzO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAvLyDinIUgQXBsYW5hciBlc2NhbGEgSU5NRURJQVRPXHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZ3ID0gZmluYWxEYXRhLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmggPSBmaW5hbERhdGEuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIG5vZGUuc2NhbGVYKDEpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5zY2FsZVkoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZ3ICE9IG51bGwgJiYgdHlwZW9mIG5vZGUud2lkdGggPT09IFwiZnVuY3Rpb25cIikgbm9kZS53aWR0aChmdyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmggIT0gbnVsbCAmJiB0eXBlb2Ygbm9kZS5oZWlnaHQgPT09IFwiZnVuY3Rpb25cIikgbm9kZS5oZWlnaHQoZmgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgcHJpbWVyRWxlbWVudG8/LmZpZ3VyYSA9PT0gXCJjaXJjbGVcIiAmJlxyXG4gICAgICAgICAgICAgICAgICBmaW5hbERhdGEucmFkaXVzICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgdHlwZW9mIG5vZGUucmFkaXVzID09PSBcImZ1bmN0aW9uXCJcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICBub2RlLnJhZGl1cyhmaW5hbERhdGEucmFkaXVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBub2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgYXBsYW5hbmRvIGVzY2FsYXMgKHN5bmMpOlwiLCBlcnIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG9uVHJhbnNmb3JtKGZpbmFsRGF0YSk7XHJcbiAgICAgICAgICBjaXJjbGVBbmNob3JSZWYuY3VycmVudCA9IG51bGw7XHJcblxyXG5cclxuICAgICAgICAgIC8vIOKchSBSZWF0YWNoYXIgMSB2ZXosIGNvbiByZWYgZnJlc2NvLCBlbiBlbCBwcsOzeGltbyBmcmFtZVxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdHIyID0gdHJhbnNmb3JtZXJSZWYuY3VycmVudDtcclxuICAgICAgICAgICAgaWYgKCF0cjIpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIFRSREJHKFwib25UcmFuc2Zvcm1FbmQgLT4gc2NoZWR1bGUgUkFGIHJlYXR0YWNoXCIsIHtcclxuICAgICAgICAgICAgICBzZWxLZXk6IHNlbGVjdGVkRWxlbWVudHMuam9pbihcIixcIiksXHJcbiAgICAgICAgICAgICAgaWRTZWw6IHNlbGVjdGVkRWxlbWVudHM/LlswXSB8fCBudWxsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBpZFNlbCA9IHNlbGVjdGVkRWxlbWVudHM/LlswXTtcclxuICAgICAgICAgICAgICBjb25zdCBmcmVzaE5vZGUgPSBpZFNlbCA/IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltpZFNlbF0gOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICBUUkRCRyhcIm9uVHJhbnNmb3JtRW5kIFJBRlwiLCB7XHJcbiAgICAgICAgICAgICAgICBpZFNlbCxcclxuICAgICAgICAgICAgICAgIGhhc0ZyZXNoOiAhIWZyZXNoTm9kZSxcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3llZDogISFmcmVzaE5vZGU/Ll9kZXN0cm95ZWQsXHJcbiAgICAgICAgICAgICAgICBoYXNTdGFnZTogISFmcmVzaE5vZGU/LmdldFN0YWdlPy4oKSxcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gU2kgZWwgbm9kbyBubyBlc3TDoSBsaXN0bywgZGVzcGVnYXIgeSBzYWxpclxyXG4gICAgICAgICAgICAgIGlmICghZnJlc2hOb2RlIHx8IGZyZXNoTm9kZS5fZGVzdHJveWVkIHx8ICFmcmVzaE5vZGUuZ2V0U3RhZ2U/LigpKSB7XHJcbiAgICAgICAgICAgICAgICBUUkRCRyhcIm9uVHJhbnNmb3JtRW5kIFJBRiAtPiBERVRBQ0ggbm9kZXMoW10pXCIsIHsgaWRTZWwgfSk7XHJcbiAgICAgICAgICAgICAgICB0cnkgeyB0cjIubm9kZXMoW10pOyB0cjIuZ2V0TGF5ZXI/LigpPy5iYXRjaERyYXcoKTsgfSBjYXRjaCB7IH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBUUkRCRyhcIm9uVHJhbnNmb3JtRW5kIFJBRiAtPiBERVRBQ0ggbm9kZXMoW10pXCIsIHsgaWRTZWwgfSk7XHJcbiAgICAgICAgICAgICAgICB0cjIubm9kZXMoW2ZyZXNoTm9kZV0pO1xyXG4gICAgICAgICAgICAgICAgdHIyLmZvcmNlVXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB0cjIuZ2V0TGF5ZXI/LigpPy5iYXRjaERyYXcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dFByZXZpZXdFbmRTbmFwc2hvdCAmJiBmcmVzaE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3N0UmVjdCA9IGZyZXNoTm9kZS5nZXRDbGllbnRSZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgIHNraXBUcmFuc2Zvcm06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgIHNraXBTdHJva2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgVFhUREJHKFwicG9zdC1jb21taXQ6cmFmMVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZDogaWRTZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwcmU6IHRleHRQcmV2aWV3RW5kU25hcHNob3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICBwb3N0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHR5cGVvZiBmcmVzaE5vZGU/LnggPT09IFwiZnVuY3Rpb25cIiA/IGZyZXNoTm9kZS54KCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB0eXBlb2YgZnJlc2hOb2RlPy55ID09PSBcImZ1bmN0aW9uXCIgPyBmcmVzaE5vZGUueSgpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVYOiB0eXBlb2YgZnJlc2hOb2RlPy5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IGZyZXNoTm9kZS5zY2FsZVgoKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWTogdHlwZW9mIGZyZXNoTm9kZT8uc2NhbGVZID09PSBcImZ1bmN0aW9uXCIgPyBmcmVzaE5vZGUuc2NhbGVZKCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogdHlwZW9mIGZyZXNoTm9kZT8uZm9udFNpemUgPT09IFwiZnVuY3Rpb25cIiA/IGZyZXNoTm9kZS5mb250U2l6ZSgpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdFdpZHRoOiBOdW1iZXIuaXNGaW5pdGUocG9zdFJlY3Q/LndpZHRoKSA/IHBvc3RSZWN0LndpZHRoIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdEhlaWdodDogTnVtYmVyLmlzRmluaXRlKHBvc3RSZWN0Py5oZWlnaHQpID8gcG9zdFJlY3QuaGVpZ2h0IDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBkZWx0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUocG9zdFJlY3Q/LndpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZSh0ZXh0UHJldmlld0VuZFNuYXBzaG90LnJlY3RXaWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHBvc3RSZWN0LndpZHRoIC0gdGV4dFByZXZpZXdFbmRTbmFwc2hvdC5yZWN0V2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUocG9zdFJlY3Q/LmhlaWdodCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUodGV4dFByZXZpZXdFbmRTbmFwc2hvdC5yZWN0SGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAocG9zdFJlY3QuaGVpZ2h0IC0gdGV4dFByZXZpZXdFbmRTbmFwc2hvdC5yZWN0SGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyZXNoTm9kZTIgPSBpZFNlbCA/IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltpZFNlbF0gOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZnJlc2hOb2RlMikgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3N0UmVjdDIgPSBmcmVzaE5vZGUyLmdldENsaWVudFJlY3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwVHJhbnNmb3JtOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFNoYWRvdzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcFN0cm9rZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgVFhUREJHKFwicG9zdC1jb21taXQ6cmFmMlwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZFNlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHR5cGVvZiBmcmVzaE5vZGUyPy54ID09PSBcImZ1bmN0aW9uXCIgPyBmcmVzaE5vZGUyLngoKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeTogdHlwZW9mIGZyZXNoTm9kZTI/LnkgPT09IFwiZnVuY3Rpb25cIiA/IGZyZXNoTm9kZTIueSgpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVg6IHR5cGVvZiBmcmVzaE5vZGUyPy5zY2FsZVggPT09IFwiZnVuY3Rpb25cIiA/IGZyZXNoTm9kZTIuc2NhbGVYKCkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlWTogdHlwZW9mIGZyZXNoTm9kZTI/LnNjYWxlWSA9PT0gXCJmdW5jdGlvblwiID8gZnJlc2hOb2RlMi5zY2FsZVkoKSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IHR5cGVvZiBmcmVzaE5vZGUyPy5mb250U2l6ZSA9PT0gXCJmdW5jdGlvblwiID8gZnJlc2hOb2RlMi5mb250U2l6ZSgpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZWN0V2lkdGg6IE51bWJlci5pc0Zpbml0ZShwb3N0UmVjdDI/LndpZHRoKSA/IHBvc3RSZWN0Mi53aWR0aCA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdEhlaWdodDogTnVtYmVyLmlzRmluaXRlKHBvc3RSZWN0Mj8uaGVpZ2h0KSA/IHBvc3RSZWN0Mi5oZWlnaHQgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YUZyb21QcmU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShwb3N0UmVjdDI/LndpZHRoKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKHRleHRQcmV2aWV3RW5kU25hcHNob3QucmVjdFdpZHRoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChwb3N0UmVjdDIud2lkdGggLSB0ZXh0UHJldmlld0VuZFNuYXBzaG90LnJlY3RXaWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZShwb3N0UmVjdDI/LmhlaWdodCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZSh0ZXh0UHJldmlld0VuZFNuYXBzaG90LnJlY3RIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHBvc3RSZWN0Mi5oZWlnaHQgLSB0ZXh0UHJldmlld0VuZFNuYXBzaG90LnJlY3RIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gge31cclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBjYXRjaCB7IH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGNhdGNoIHsgfVxyXG5cclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGVuIG9uVHJhbnNmb3JtRW5kOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICB3aW5kb3cuX3Jlc2l6ZURhdGEgPSBudWxsO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBpc1RyYW5zZm9ybWluZ1Jlc2l6ZVJlZi5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICBzZXRJc1Jlc2l6ZUdlc3R1cmVBY3RpdmUoZmFsc2UpO1xyXG4gICAgICAgICAgY2xlYXJSZXNpemVBbmNob3JQcmVzc0ZlZWRiYWNrKCk7XHJcbiAgICAgICAgICBub3RpZnlUcmFuc2Zvcm1JbnRlcmFjdGlvbkVuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfX1cclxuXHJcbiAgICAvPlxyXG4gICk7XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIlRyYW5zZm9ybWVyIiwiUmVjdCIsIkRFQlVHX1NFTEVDVElPTl9CT1VORFMiLCJzYkxvZyIsImFyZ3MiLCJjb25zb2xlIiwibG9nIiwic2xvZyIsIlRSREJHIiwid2luZG93IiwiX19EQkdfVFIiLCJUWFREQkciLCJfX0RCR19URVhUX1JFU0laRSIsInJlY3RGcm9tTm9kZXMiLCJub2RlcyIsIm1pblgiLCJJbmZpbml0eSIsIm1pblkiLCJtYXhYIiwibWF4WSIsIm4iLCJnZXRDbGllbnRSZWN0IiwiciIsInNraXBUcmFuc2Zvcm0iLCJza2lwU2hhZG93Iiwic2tpcFN0cm9rZSIsIk1hdGgiLCJtaW4iLCJ4IiwieSIsIm1heCIsIndpZHRoIiwiaGVpZ2h0IiwiZ2V0Q291bnRkb3duU2NhbGVkU2l6ZSIsIm5vZGUiLCJoaXRib3giLCJmaW5kT25lIiwiYmFzZVciLCJOYU4iLCJiYXNlSCIsInN4IiwiYWJzIiwic2NhbGVYIiwic3kiLCJzY2FsZVkiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIkJvdW5kc0luZGljYXRvciIsInNlbGVjdGVkRWxlbWVudHMiLCJlbGVtZW50UmVmcyIsIm9iamV0b3MiLCJmb3JjZVVwZGF0ZSIsInNldEZvcmNlVXBkYXRlIiwiZmlyc3RSZWYiLCJjdXJyZW50Iiwic3RhZ2UiLCJnZXRTdGFnZSIsImhhbmRsZURyYWdNb3ZlIiwicCIsIm9uIiwib2ZmIiwiam9pbiIsImVsZW1lbnRvc0RhdGEiLCJtYXAiLCJpZCIsImZpbmQiLCJvYmoiLCJmaWx0ZXIiLCJCb29sZWFuIiwibGVuZ3RoIiwiZm9yRWFjaCIsInRpcG8iLCJmaWd1cmEiLCJwb2ludHMiLCJjbGVhblBvaW50cyIsInBhcnNlRmxvYXQiLCJyZWFsWCIsInJlYWxZIiwieDEiLCJ5MSIsIngyIiwieTIiLCJsaW5lUGFkZGluZyIsImJveCIsInRvRml4ZWQiLCJnZXRUZXh0SGVpZ2h0IiwidGV4dEhlaWdodCIsImVycm9yIiwiZmFsbGJhY2tYIiwiZmFsbGJhY2tZIiwiZmFsbGJhY2tTaXplIiwicHJpbWVyRWxlbWVudG8iLCJwYWRkaW5nIiwiZmluYWxYIiwiZmluYWxZIiwiZmluYWxXaWR0aCIsImZpbmFsSGVpZ2h0IiwibmFtZSIsImZpbGwiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsImxpc3RlbmluZyIsIm9wYWNpdHkiLCJTZWxlY3Rpb25Cb3VuZHMiLCJvblRyYW5zZm9ybSIsIm9uVHJhbnNmb3JtSW50ZXJhY3Rpb25TdGFydCIsIm9uVHJhbnNmb3JtSW50ZXJhY3Rpb25FbmQiLCJpc0RyYWdnaW5nIiwiaXNNb2JpbGUiLCJ0cmFuc2Zvcm1lclJlZiIsInRyYW5zZm9ybVRpY2siLCJzZXRUcmFuc2Zvcm1UaWNrIiwibGFzdE5vZGVzUmVmIiwiY2lyY2xlQW5jaG9yUmVmIiwidGV4dFRyYW5zZm9ybUFuY2hvclJlZiIsInJlc2l6ZUhpbnRUaW1lcnNSZWYiLCJsYXN0UmVzaXplSGludFNlbGVjdGlvbktleVJlZiIsInRyYW5zZm9ybUdlc3R1cmVSZWYiLCJpc1JvdGF0ZSIsImFjdGl2ZUFuY2hvciIsImlzVHJhbnNmb3JtaW5nUmVzaXplUmVmIiwiaXNSZXNpemVHZXN0dXJlQWN0aXZlIiwic2V0SXNSZXNpemVHZXN0dXJlQWN0aXZlIiwicHJlc3NlZFJlc2l6ZUFuY2hvck5hbWUiLCJzZXRQcmVzc2VkUmVzaXplQW5jaG9yTmFtZSIsInJlc2l6ZUhpbnRQaGFzZSIsInNldFJlc2l6ZUhpbnRQaGFzZSIsImVsZW1lbnRvc1NlbGVjY2lvbmFkb3NEYXRhIiwiZXNUZXh0byIsImVzQ291bnRkb3duIiwiZXNHYWxlcmlhIiwibG9ja0FzcGVjdENvdW50ZG93biIsImxvY2tBc3BlY3RUZXh0IiwidHJhbnNmb3JtZXJBbmNob3JTaXplIiwidHJhbnNmb3JtZXJSb3RhdGVPZmZzZXQiLCJ0cmFuc2Zvcm1lckFuY2hvclJhZGl1cyIsInRyYW5zZm9ybWVyUGFkZGluZyIsInRyYW5zZm9ybWVyQm9yZGVyU3Ryb2tlV2lkdGgiLCJ0cmFuc2Zvcm1lckFuY2hvckZpbGxDb2xvciIsInRyYW5zZm9ybWVyQW5jaG9yU3Ryb2tlV2lkdGgiLCJ0cmFuc2Zvcm1lckFuY2hvclNoYWRvd0JsdXIiLCJ0cmFuc2Zvcm1lckFuY2hvclNoYWRvd09mZnNldFkiLCJ0cmFuc2Zvcm1lckFuY2hvckhpdFN0cm9rZVdpZHRoIiwidHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGl0U3Ryb2tlV2lkdGgiLCJ0cmFuc2Zvcm1lckFuY2hvclN0cm9rZUNvbG9yIiwidHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGFsb1N0cm9rZUNvbG9yIiwidHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkSGFsb1N0cm9rZVdpZHRoIiwidHJhbnNmb3JtZXJBbmNob3JTaGFkb3dDb2xvciIsInRyYW5zZm9ybWVyQW5jaG9yUHJlc3NlZEZpbGxDb2xvciIsInRyYW5zZm9ybWVyQW5jaG9ySGludEZpbGxDb2xvciIsInRyYW5zZm9ybWVyQW5jaG9yUHJlc3NlZFNoYWRvd0NvbG9yIiwidHJhbnNmb3JtZXJBbmNob3JQcmVzc2VkU2hhZG93Qmx1ciIsInRyYW5zZm9ybWVyQW5jaG9yUHJlc3NlZFNoYWRvd09mZnNldFkiLCJ0cmFuc2Zvcm1lckFuY2hvclByZXNzZWRTY2FsZSIsInRyYW5zZm9ybWVyQW5jaG9ySGludFNoYWRvd0NvbG9yIiwidHJhbnNmb3JtZXJBbmNob3JIaW50U3Ryb2tlQ29sb3IiLCJ0cmFuc2Zvcm1lckFuY2hvckhpbnRTdHJvbmdTY2FsZSIsInRyYW5zZm9ybWVyQW5jaG9ySGludFNvZnRTY2FsZSIsInRyYW5zZm9ybWVyQW5jaG9ySGludFN0cm9uZ1NoYWRvd0JsdXIiLCJ0cmFuc2Zvcm1lckFuY2hvckhpbnRTb2Z0U2hhZG93Qmx1ciIsInRyYW5zZm9ybWVyQW5jaG9ySGludEhpdFN0cm9rZVdpZHRoIiwidHJhbnNmb3JtZXJIaW50Qm9yZGVyU3Ryb25nU3Ryb2tlV2lkdGgiLCJ0cmFuc2Zvcm1lckhpbnRCb3JkZXJTb2Z0U3Ryb2tlV2lkdGgiLCJ0cmFuc2Zvcm1lclJvdGF0aW9uU25hcFRvbGVyYW5jZSIsImVzVHJpYW5ndWxvIiwiaGFzR2FsbGVyeSIsInNvbWUiLCJvIiwiaGF5TGluZWFzIiwiZWxlbWVudG9zVHJhbnNmb3JtYWJsZXMiLCJkZWJlcmlhVXNhclRyYW5zZm9ybWVyIiwic2VsZWN0ZWRHZW9tS2V5Iiwicm90YXRpb24iLCJjaGlwV2lkdGgiLCJnYXAiLCJwYWRkaW5nWCIsInBhZGRpbmdZIiwiZ2V0VHJhbnNmb3JtUG9zZSIsImdldFBhcmVudCIsInBhcmVudCIsImNsZWFyUmVzaXplQW5jaG9yUHJlc3NGZWVkYmFjayIsImNsZWFyUmVzaXplSGludFRpbWVycyIsInRpbWVySWQiLCJjbGVhclRpbWVvdXQiLCJzdG9wUmVzaXplSGludFB1bHNlIiwic3RvcE5hdGl2ZVRyYW5zZm9ybWVySWZBY3RpdmUiLCJ0ciIsIm5hdGl2ZVRyYW5zZm9ybWluZyIsImlzVHJhbnNmb3JtaW5nIiwic3RvcFRyYW5zZm9ybSIsImdldExheWVyIiwiYmF0Y2hEcmF3IiwiZ2V0UmVzaXplQW5jaG9yTmFtZUZyb21UYXJnZXQiLCJ0YXJnZXQiLCJpc0FuY2hvclRhcmdldCIsImhhc05hbWUiLCJTdHJpbmciLCJpbmNsdWRlcyIsInJhd05hbWUiLCJhbmNob3JOYW1lIiwic3BsaXQiLCJoYW5kbGVSZXNpemVBbmNob3JQcmVzc1N0YXJ0IiwiZXZlbnQiLCJnZXRBY3RpdmVBbmNob3IiLCJnZXRCb3hPdmVyZmxvd0Ftb3VudCIsInN0YWdlV2lkdGgiLCJzdGFnZUhlaWdodCIsIlBPU0lUSVZFX0lORklOSVRZIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwib3ZlcmZsb3dMZWZ0Iiwib3ZlcmZsb3dUb3AiLCJvdmVyZmxvd1JpZ2h0Iiwib3ZlcmZsb3dCb3R0b20iLCJrZWVwQm94SW5zaWRlU3RhZ2UiLCJvbGRCb3giLCJuZXh0Qm94IiwiYXR0cnMiLCJvbGRPdmVyZmxvdyIsIm5leHRPdmVyZmxvdyIsImVwc2lsb24iLCJzZWxlY3Rpb25LZXkiLCJwdWxzZVN0ZXBzIiwicGhhc2UiLCJkZWxheU1zIiwic2V0VGltZW91dCIsImNsZWFudXBJZCIsIl9yZXNpemVEYXRhIiwiaXNSZXNpemluZyIsInNlbEtleSIsImVsZW1lbnRvc1RyYW5zZm9ybWFibGVzTGVuIiwiZWRpdGluZ0lkIiwiZWRpdGluZyIsIm5vZG9zVHJhbnNmb3JtYWJsZXMiLCJpZFNlbCIsInJlZk5vZGUiLCJnYWxsZXJ5RnJhbWUiLCJ3YW50ZWRJZHMiLCJyZWZzUHJlc2VudCIsIm5vZGVzQ291bnQiLCJub2RlSWRzIiwidHJOb2Rlc0NvdW50IiwiaGFuZGxlciIsImUiLCJkZXRhaWwiLCJpc1NlbGVjdGVkIiwidCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZmlyc3RJZCIsImZpcnN0Tm9kZSIsInJhZklkIiwic3luY1RyYW5zZm9ybWVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJpc1Jlc2l6ZUhpbnRWaXNpYmxlIiwidHJhbnNmb3JtZXJCb3JkZXJTdHJva2UiLCJ0cmFuc2Zvcm1lckJvcmRlclZpc3VhbFdpZHRoIiwicmVmIiwiYm9yZGVyRW5hYmxlZCIsImJvcmRlclN0cm9rZSIsImJvcmRlclN0cm9rZVdpZHRoIiwiZW5hYmxlZEFuY2hvcnMiLCJyb3RhdGVFbmFibGVkIiwib25Nb3VzZURvd24iLCJvblRvdWNoU3RhcnQiLCJvblBvaW50ZXJEb3duIiwib25Nb3VzZVVwIiwib25Ub3VjaEVuZCIsIm9uUG9pbnRlclVwIiwib25Ub3VjaENhbmNlbCIsIm9uUG9pbnRlckNhbmNlbCIsImFuY2hvckZpbGwiLCJhbmNob3JTdHJva2UiLCJhbmNob3JTdHJva2VXaWR0aCIsImFuY2hvclNpemUiLCJhbmNob3JDb3JuZXJSYWRpdXMiLCJhbmNob3JTaGFkb3dDb2xvciIsImFuY2hvclNoYWRvd0JsdXIiLCJhbmNob3JTaGFkb3dPZmZzZXQiLCJhbmNob3JTdHlsZUZ1bmMiLCJhbmNob3IiLCJpc1Jlc2l6ZUFuY2hvck5vZGUiLCJpc1Jlc2l6ZUFjdGl2ZUZhbGxiYWNrIiwiaXNQcmVzc2VkUmVzaXplQW5jaG9yIiwiaXNSZXNpemVIaW50QW5jaG9yIiwiaXNTdHJvbmdSZXNpemVIaW50IiwiYW5jaG9yRmlsbENvbG9yIiwiYW5jaG9yU2hhZG93T3BhY2l0eSIsImFuY2hvclN0cm9rZUNvbG9yIiwiYW5jaG9ySGl0U3Ryb2tlV2lkdGgiLCJhbmNob3JTY2FsZSIsInNoYWRvd0NvbG9yIiwic2hhZG93RW5hYmxlZCIsInNoYWRvd0ZvclN0cm9rZUVuYWJsZWQiLCJzaGFkb3dPcGFjaXR5Iiwic2hhZG93Qmx1ciIsInNoYWRvd09mZnNldCIsImhpdFN0cm9rZVdpZHRoIiwic2NhbGUiLCJrZWVwUmF0aW8iLCJjZW50ZXJlZFNjYWxpbmciLCJmbGlwRW5hYmxlZCIsInJlc2l6ZUVuYWJsZWQiLCJyb3RhdGlvblNuYXBzIiwicm90YXRlQW5jaG9yT2Zmc2V0Iiwicm90YXRpb25TbmFwVG9sZXJhbmNlIiwiYm91bmRCb3hGdW5jIiwibmV3Qm94IiwibWluU2l6ZSIsIm1heFNpemUiLCJyb3dzIiwiY29scyIsImNlbGxSYXRpbyIsInJhdGlvIiwibWluR3JpZFdpZHRoIiwibmV4dFdpZHRoIiwiY2VsbFciLCJjZWxsSCIsIm5leHRIZWlnaHQiLCJkdyIsImRoIiwic2l6ZSIsImZpbmFsU2l6ZSIsInNhZmVPbGRXIiwic2FmZU9sZEgiLCJ1bmlmb3JtU2NhbGUiLCJuZXdXaWR0aCIsIm5ld0hlaWdodCIsIm9uVHJhbnNmb3JtU3RhcnQiLCJpc1JvdGF0ZUdlc3R1cmUiLCJ0b0xvd2VyQ2FzZSIsInBvaW50ZXJUeXBlIiwiZXZ0IiwicjAiLCJjZW50ZXJYIiwiY2VudGVyWSIsImJhc2VXaWR0aCIsImJhc2VIZWlnaHQiLCJiYXNlVmlzdWFsV2lkdGgiLCJyZWN0Iiwic2FmZUJhc2VGb250U2l6ZSIsImZvbnRTaXplIiwiYmFzZVJvdGF0aW9uIiwiYmFzZUZvbnRTaXplIiwibGFzdFByZXZpZXdGb250U2l6ZSIsImxhc3RQcmV2aWV3Q2VudGVyWCIsImxhc3RQcmV2aWV3Q2VudGVyWSIsImxhc3RQcmV2aWV3VmlzdWFsV2lkdGgiLCJwcmV2aWV3VGljayIsIm5vZGVYIiwibm9kZVkiLCJub2RlU2NhbGVYIiwibm9kZVNjYWxlWSIsInVuaW9uIiwicGFkIiwiYm9yZGVyUmVjdCIsInRyUmVjdCIsInBvc2UiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNQcmV2aWV3Iiwib3JpZ2luYWxGb250U2l6ZSIsImFuY2hvckRhdGEiLCJhdmdTY2FsZSIsInNjYWxlRnJvbVJlY3QiLCJsaXZlUmVjdFdpZHRoIiwiY3VycmVudFJvdGF0aW9uIiwicm90YXRpb25EZWx0YSIsImNhblVzZVJlY3RTY2FsZSIsImVmZmVjdGl2ZVNjYWxlIiwidGljayIsImNlbnRlclhUYXJnZXQiLCJ0ZXh0Q2VudGVyWCIsInRleHRDZW50ZXJZIiwiY291bnRkb3duU2l6ZSIsImJhc2VSYWRpdXMiLCJyYWRpdXMiLCJvcmlnaW5hbFdpZHRoIiwib3JpZ2luYWxIZWlnaHQiLCJsaXZlUmVjdCIsImRpYW1ldGVyIiwid2FybiIsIm9uVHJhbnNmb3JtRW5kIiwiaW50ZXJhY3Rpb25TbmFwc2hvdCIsIm5vdGlmeVRyYW5zZm9ybUludGVyYWN0aW9uRW5kIiwidFNjYWxlWCIsInRTY2FsZVkiLCJhdmciLCJ1cGRhdGVzIiwidXBkIiwiYmFzZSIsInJvdW5kIiwiYmFzZVIiLCJpc0ZpbmFsIiwiYmF0Y2giLCJlcnIiLCJmaW5hbERhdGEiLCJ0ZXh0UHJldmlld0VuZFNuYXBzaG90IiwidmlzdWFsV2lkdGhGcm9tUmVjdCIsImNvbXB1dGVkRm9udFNpemUiLCJ2aXN1YWxXaWR0aCIsInRleHRWaXN1YWxXaWR0aCIsInJlY3RXaWR0aCIsInJlY3RIZWlnaHQiLCJyZWN0Rm9yU25hcHNob3QiLCJmaW5hbEZvbnRTaXplIiwibm9kZVJlY3RXaWR0aCIsInRhcmdldENlbnRlclgiLCJ0YXJnZXRDZW50ZXJZIiwiZmxhdHRlbmVkUmVjdCIsImZsYXR0ZW5lZENlbnRlclgiLCJmbGF0dGVuZWRDZW50ZXJZIiwiZnciLCJmaCIsInRyMiIsImZyZXNoTm9kZSIsImhhc0ZyZXNoIiwiZGVzdHJveWVkIiwiX2Rlc3Ryb3llZCIsImhhc1N0YWdlIiwicG9zdFJlY3QiLCJwcmUiLCJwb3N0IiwiZGVsdGEiLCJmcmVzaE5vZGUyIiwicG9zdFJlY3QyIiwiZGVsdGFGcm9tUHJlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/SelectionBounds.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/SelectorColorSeccion.jsx":
/*!*************************************************!*\
  !*** ./src/components/SelectorColorSeccion.jsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SelectorColorSeccion)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_color__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-color */ \"react-color\");\n/* harmony import */ var react_color__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_color__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n\nfunction SelectorColorSeccion({ seccion, onChange, disabled = false }) {\n    const [mostrarPicker, setMostrarPicker] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [color, setColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(seccion?.fondo || \"#ffffff\");\n    const [pickerPosicion, setPickerPosicion] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        top: 0,\n        left: 0,\n        listo: false\n    });\n    const pickerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const botonRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const panelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectorColorSeccion.useEffect\": ()=>{\n            setColor(seccion?.fondo || \"#ffffff\");\n        }\n    }[\"SelectorColorSeccion.useEffect\"], [\n        seccion?.fondo\n    ]);\n    // Cerrar al hacer click fuera del boton y del panel.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"SelectorColorSeccion.useEffect\": ()=>{\n            if (!mostrarPicker) return undefined;\n            const handleClickFuera = {\n                \"SelectorColorSeccion.useEffect.handleClickFuera\": (e)=>{\n                    const clickEnBoton = pickerRef.current?.contains(e.target);\n                    const clickEnPanel = panelRef.current?.contains(e.target);\n                    if (!clickEnBoton && !clickEnPanel) {\n                        setMostrarPicker(false);\n                    }\n                }\n            }[\"SelectorColorSeccion.useEffect.handleClickFuera\"];\n            document.addEventListener(\"mousedown\", handleClickFuera);\n            return ({\n                \"SelectorColorSeccion.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickFuera)\n            })[\"SelectorColorSeccion.useEffect\"];\n        }\n    }[\"SelectorColorSeccion.useEffect\"], [\n        mostrarPicker\n    ]);\n    const actualizarPosicionPicker = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"SelectorColorSeccion.useCallback[actualizarPosicionPicker]\": ()=>{\n            if (!mostrarPicker || \"undefined\" === \"undefined\") return;\n            const boton = botonRef.current;\n            const panel = panelRef.current;\n            if (!boton || !panel) return;\n            const margenViewport = 8;\n            const separacion = 10;\n            const viewportAncho = Math.max(0, window.innerWidth || 0);\n            const viewportAlto = Math.max(0, window.innerHeight || 0);\n            const botonRect = boton.getBoundingClientRect();\n            const panelRect = panel.getBoundingClientRect();\n            const panelAncho = Math.max(200, panelRect.width || 250);\n            const panelAlto = Math.max(120, panelRect.height || 320);\n            let left = botonRect.left;\n            if (left + panelAncho > viewportAncho - margenViewport) {\n                left = viewportAncho - margenViewport - panelAncho;\n            }\n            if (left < margenViewport) {\n                left = margenViewport;\n            }\n            const puedeAbajo = botonRect.bottom + separacion + panelAlto <= viewportAlto - margenViewport;\n            const topAbajo = Math.min(botonRect.bottom + separacion, viewportAlto - margenViewport - panelAlto);\n            const topArriba = Math.max(margenViewport, botonRect.top - separacion - panelAlto);\n            setPickerPosicion({\n                top: Math.round(puedeAbajo ? topAbajo : topArriba),\n                left: Math.round(left),\n                listo: true\n            });\n        }\n    }[\"SelectorColorSeccion.useCallback[actualizarPosicionPicker]\"], [\n        mostrarPicker\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"SelectorColorSeccion.useLayoutEffect\": ()=>{\n            if (!mostrarPicker || \"undefined\" === \"undefined\") {\n                setPickerPosicion({\n                    \"SelectorColorSeccion.useLayoutEffect\": (prev)=>({\n                            ...prev,\n                            listo: false\n                        })\n                }[\"SelectorColorSeccion.useLayoutEffect\"]);\n                return undefined;\n            }\n            const raf = window.requestAnimationFrame({\n                \"SelectorColorSeccion.useLayoutEffect.raf\": ()=>{\n                    actualizarPosicionPicker();\n                }\n            }[\"SelectorColorSeccion.useLayoutEffect.raf\"]);\n            window.addEventListener(\"resize\", actualizarPosicionPicker);\n            window.addEventListener(\"scroll\", actualizarPosicionPicker, true);\n            return ({\n                \"SelectorColorSeccion.useLayoutEffect\": ()=>{\n                    window.cancelAnimationFrame(raf);\n                    window.removeEventListener(\"resize\", actualizarPosicionPicker);\n                    window.removeEventListener(\"scroll\", actualizarPosicionPicker, true);\n                }\n            })[\"SelectorColorSeccion.useLayoutEffect\"];\n        }\n    }[\"SelectorColorSeccion.useLayoutEffect\"], [\n        mostrarPicker,\n        actualizarPosicionPicker\n    ]);\n    const coloresRapidos = [\n        \"#ffffff\",\n        \"#f8f9fa\",\n        \"#e9ecef\",\n        \"#dee2e6\",\n        \"#ff6b6b\",\n        \"#feca57\",\n        \"#48dbfb\",\n        \"#1dd1a1\",\n        \"#5f27cd\",\n        \"#341f97\",\n        \"#495057\",\n        \"#212529\"\n    ];\n    const pickerPanel = /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: panelRef,\n        className: \"fixed z-[120]\",\n        style: {\n            top: `${pickerPosicion.top}px`,\n            left: `${pickerPosicion.left}px`,\n            maxWidth: \"calc(100vw - 16px)\",\n            visibility: pickerPosicion.listo ? \"visible\" : \"hidden\"\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"relative w-[250px] max-w-[calc(100vw-16px)] rounded-lg border border-gray-200 bg-white p-3 shadow-xl\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_color__WEBPACK_IMPORTED_MODULE_3__.ChromePicker, {\n                    color: color,\n                    disableAlpha: false,\n                    styles: {\n                        default: {\n                            picker: {\n                                width: \"100%\",\n                                boxShadow: \"none\"\n                            }\n                        }\n                    },\n                    onChange: (newColor)=>{\n                        const rgba = `rgba(${newColor.rgb.r}, ${newColor.rgb.g}, ${newColor.rgb.b}, ${newColor.rgb.a})`;\n                        setColor(rgba);\n                        onChange(seccion.id, rgba);\n                    }\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectorColorSeccion.jsx\",\n                    lineNumber: 117,\n                    columnNumber: 17\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"grid grid-cols-6 gap-2 pt-3\",\n                    children: [\n                         false && /*#__PURE__*/ 0,\n                        coloresRapidos.map((c)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    setColor(c);\n                                    onChange(seccion.id, c);\n                                },\n                                className: `h-7 w-7 rounded border transition-transform hover:scale-110 ${color === c ? \"ring-2 ring-purple-500\" : \"\"}`,\n                                style: {\n                                    backgroundColor: c\n                                },\n                                title: c\n                            }, c, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectorColorSeccion.jsx\",\n                                lineNumber: 156,\n                                columnNumber: 25\n                            }, this))\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectorColorSeccion.jsx\",\n                    lineNumber: 135,\n                    columnNumber: 17\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectorColorSeccion.jsx\",\n            lineNumber: 116,\n            columnNumber: 13\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectorColorSeccion.jsx\",\n        lineNumber: 106,\n        columnNumber: 9\n    }, this);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative\",\n        ref: pickerRef,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                ref: botonRef,\n                onClick: ()=>setMostrarPicker((prev)=>!prev),\n                disabled: disabled,\n                className: `h-7 w-7 rounded-md border border-gray-300 shadow-sm transition-transform ${disabled ? \"cursor-not-allowed bg-gray-200\" : \"hover:scale-110\"}`,\n                style: {\n                    backgroundColor: color\n                },\n                title: \"Cambiar color de fondo\",\n                type: \"button\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectorColorSeccion.jsx\",\n                lineNumber: 174,\n                columnNumber: 13\n            }, this),\n            mostrarPicker && (typeof document !== \"undefined\" ? /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(pickerPanel, document.body) : pickerPanel)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\SelectorColorSeccion.jsx\",\n        lineNumber: 173,\n        columnNumber: 9\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL1NlbGVjdG9yQ29sb3JTZWNjaW9uLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQWtGO0FBQ3pDO0FBQ0U7QUFDSjtBQUV4QixTQUFTUSxxQkFBcUIsRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFdBQVcsS0FBSyxFQUFFO0lBQ2hGLE1BQU0sQ0FBQ0MsZUFBZUMsaUJBQWlCLEdBQUdULCtDQUFRQSxDQUFDO0lBQ25ELE1BQU0sQ0FBQ1UsT0FBT0MsU0FBUyxHQUFHWCwrQ0FBUUEsQ0FBQ0ssU0FBU08sU0FBUztJQUNyRCxNQUFNLENBQUNDLGdCQUFnQkMsa0JBQWtCLEdBQUdkLCtDQUFRQSxDQUFDO1FBQ2pEZSxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsT0FBTztJQUNYO0lBRUEsTUFBTUMsWUFBWW5CLDZDQUFNQSxDQUFDO0lBQ3pCLE1BQU1vQixXQUFXcEIsNkNBQU1BLENBQUM7SUFDeEIsTUFBTXFCLFdBQVdyQiw2Q0FBTUEsQ0FBQztJQUV4QkYsZ0RBQVNBOzBDQUFDO1lBQ05jLFNBQVNOLFNBQVNPLFNBQVM7UUFDL0I7eUNBQUc7UUFBQ1AsU0FBU087S0FBTTtJQUVuQixxREFBcUQ7SUFDckRmLGdEQUFTQTswQ0FBQztZQUNOLElBQUksQ0FBQ1csZUFBZSxPQUFPYTtZQUUzQixNQUFNQzttRUFBbUIsQ0FBQ0M7b0JBQ3RCLE1BQU1DLGVBQWVOLFVBQVVPLE9BQU8sRUFBRUMsU0FBU0gsRUFBRUksTUFBTTtvQkFDekQsTUFBTUMsZUFBZVIsU0FBU0ssT0FBTyxFQUFFQyxTQUFTSCxFQUFFSSxNQUFNO29CQUN4RCxJQUFJLENBQUNILGdCQUFnQixDQUFDSSxjQUFjO3dCQUNoQ25CLGlCQUFpQjtvQkFDckI7Z0JBQ0o7O1lBRUFvQixTQUFTQyxnQkFBZ0IsQ0FBQyxhQUFhUjtZQUN2QztrREFBTyxJQUFNTyxTQUFTRSxtQkFBbUIsQ0FBQyxhQUFhVDs7UUFDM0Q7eUNBQUc7UUFBQ2Q7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LFNBQVNvRSxJQUFJLElBQ3ZDbkMsV0FBVTs7Ozs7OztBQUdoQyIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxTZWxlY3RvckNvbG9yU2VjY2lvbi5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjcmVhdGVQb3J0YWwgfSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyBDaHJvbWVQaWNrZXIgfSBmcm9tIFwicmVhY3QtY29sb3JcIjtcbmltcG9ydCB7IFBpcGV0dGUgfSBmcm9tIFwibHVjaWRlLXJlYWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNlbGVjdG9yQ29sb3JTZWNjaW9uKHsgc2VjY2lvbiwgb25DaGFuZ2UsIGRpc2FibGVkID0gZmFsc2UgfSkge1xuICAgIGNvbnN0IFttb3N0cmFyUGlja2VyLCBzZXRNb3N0cmFyUGlja2VyXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbY29sb3IsIHNldENvbG9yXSA9IHVzZVN0YXRlKHNlY2Npb24/LmZvbmRvIHx8IFwiI2ZmZmZmZlwiKTtcbiAgICBjb25zdCBbcGlja2VyUG9zaWNpb24sIHNldFBpY2tlclBvc2ljaW9uXSA9IHVzZVN0YXRlKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICBsaXN0bzogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBjb25zdCBwaWNrZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgYm90b25SZWYgPSB1c2VSZWYobnVsbCk7XG4gICAgY29uc3QgcGFuZWxSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBzZXRDb2xvcihzZWNjaW9uPy5mb25kbyB8fCBcIiNmZmZmZmZcIik7XG4gICAgfSwgW3NlY2Npb24/LmZvbmRvXSk7XG5cbiAgICAvLyBDZXJyYXIgYWwgaGFjZXIgY2xpY2sgZnVlcmEgZGVsIGJvdG9uIHkgZGVsIHBhbmVsLlxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghbW9zdHJhclBpY2tlcikgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgICBjb25zdCBoYW5kbGVDbGlja0Z1ZXJhID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWNrRW5Cb3RvbiA9IHBpY2tlclJlZi5jdXJyZW50Py5jb250YWlucyhlLnRhcmdldCk7XG4gICAgICAgICAgICBjb25zdCBjbGlja0VuUGFuZWwgPSBwYW5lbFJlZi5jdXJyZW50Py5jb250YWlucyhlLnRhcmdldCk7XG4gICAgICAgICAgICBpZiAoIWNsaWNrRW5Cb3RvbiAmJiAhY2xpY2tFblBhbmVsKSB7XG4gICAgICAgICAgICAgICAgc2V0TW9zdHJhclBpY2tlcihmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja0Z1ZXJhKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tGdWVyYSk7XG4gICAgfSwgW21vc3RyYXJQaWNrZXJdKTtcblxuICAgIGNvbnN0IGFjdHVhbGl6YXJQb3NpY2lvblBpY2tlciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKCFtb3N0cmFyUGlja2VyIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblxuICAgICAgICBjb25zdCBib3RvbiA9IGJvdG9uUmVmLmN1cnJlbnQ7XG4gICAgICAgIGNvbnN0IHBhbmVsID0gcGFuZWxSZWYuY3VycmVudDtcbiAgICAgICAgaWYgKCFib3RvbiB8fCAhcGFuZWwpIHJldHVybjtcblxuICAgICAgICBjb25zdCBtYXJnZW5WaWV3cG9ydCA9IDg7XG4gICAgICAgIGNvbnN0IHNlcGFyYWNpb24gPSAxMDtcbiAgICAgICAgY29uc3Qgdmlld3BvcnRBbmNobyA9IE1hdGgubWF4KDAsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xuICAgICAgICBjb25zdCB2aWV3cG9ydEFsdG8gPSBNYXRoLm1heCgwLCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCk7XG5cbiAgICAgICAgY29uc3QgYm90b25SZWN0ID0gYm90b24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHBhbmVsUmVjdCA9IHBhbmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBwYW5lbEFuY2hvID0gTWF0aC5tYXgoMjAwLCBwYW5lbFJlY3Qud2lkdGggfHwgMjUwKTtcbiAgICAgICAgY29uc3QgcGFuZWxBbHRvID0gTWF0aC5tYXgoMTIwLCBwYW5lbFJlY3QuaGVpZ2h0IHx8IDMyMCk7XG5cbiAgICAgICAgbGV0IGxlZnQgPSBib3RvblJlY3QubGVmdDtcbiAgICAgICAgaWYgKGxlZnQgKyBwYW5lbEFuY2hvID4gdmlld3BvcnRBbmNobyAtIG1hcmdlblZpZXdwb3J0KSB7XG4gICAgICAgICAgICBsZWZ0ID0gdmlld3BvcnRBbmNobyAtIG1hcmdlblZpZXdwb3J0IC0gcGFuZWxBbmNobztcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVmdCA8IG1hcmdlblZpZXdwb3J0KSB7XG4gICAgICAgICAgICBsZWZ0ID0gbWFyZ2VuVmlld3BvcnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwdWVkZUFiYWpvID1cbiAgICAgICAgICAgIGJvdG9uUmVjdC5ib3R0b20gKyBzZXBhcmFjaW9uICsgcGFuZWxBbHRvIDw9IHZpZXdwb3J0QWx0byAtIG1hcmdlblZpZXdwb3J0O1xuICAgICAgICBjb25zdCB0b3BBYmFqbyA9IE1hdGgubWluKFxuICAgICAgICAgICAgYm90b25SZWN0LmJvdHRvbSArIHNlcGFyYWNpb24sXG4gICAgICAgICAgICB2aWV3cG9ydEFsdG8gLSBtYXJnZW5WaWV3cG9ydCAtIHBhbmVsQWx0b1xuICAgICAgICApO1xuICAgICAgICBjb25zdCB0b3BBcnJpYmEgPSBNYXRoLm1heChtYXJnZW5WaWV3cG9ydCwgYm90b25SZWN0LnRvcCAtIHNlcGFyYWNpb24gLSBwYW5lbEFsdG8pO1xuXG4gICAgICAgIHNldFBpY2tlclBvc2ljaW9uKHtcbiAgICAgICAgICAgIHRvcDogTWF0aC5yb3VuZChwdWVkZUFiYWpvID8gdG9wQWJham8gOiB0b3BBcnJpYmEpLFxuICAgICAgICAgICAgbGVmdDogTWF0aC5yb3VuZChsZWZ0KSxcbiAgICAgICAgICAgIGxpc3RvOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9LCBbbW9zdHJhclBpY2tlcl0pO1xuXG4gICAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFtb3N0cmFyUGlja2VyIHx8IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHNldFBpY2tlclBvc2ljaW9uKChwcmV2KSA9PiAoeyAuLi5wcmV2LCBsaXN0bzogZmFsc2UgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJhZiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgYWN0dWFsaXphclBvc2ljaW9uUGlja2VyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGFjdHVhbGl6YXJQb3NpY2lvblBpY2tlcik7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGFjdHVhbGl6YXJQb3NpY2lvblBpY2tlciwgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShyYWYpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgYWN0dWFsaXphclBvc2ljaW9uUGlja2VyKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGFjdHVhbGl6YXJQb3NpY2lvblBpY2tlciwgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgfSwgW21vc3RyYXJQaWNrZXIsIGFjdHVhbGl6YXJQb3NpY2lvblBpY2tlcl0pO1xuXG4gICAgY29uc3QgY29sb3Jlc1JhcGlkb3MgPSBbXG4gICAgICAgIFwiI2ZmZmZmZlwiLCBcIiNmOGY5ZmFcIiwgXCIjZTllY2VmXCIsIFwiI2RlZTJlNlwiLFxuICAgICAgICBcIiNmZjZiNmJcIiwgXCIjZmVjYTU3XCIsIFwiIzQ4ZGJmYlwiLCBcIiMxZGQxYTFcIixcbiAgICAgICAgXCIjNWYyN2NkXCIsIFwiIzM0MWY5N1wiLCBcIiM0OTUwNTdcIiwgXCIjMjEyNTI5XCIsXG4gICAgXTtcblxuICAgIGNvbnN0IHBpY2tlclBhbmVsID0gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICByZWY9e3BhbmVsUmVmfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei1bMTIwXVwiXG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIHRvcDogYCR7cGlja2VyUG9zaWNpb24udG9wfXB4YCxcbiAgICAgICAgICAgICAgICBsZWZ0OiBgJHtwaWNrZXJQb3NpY2lvbi5sZWZ0fXB4YCxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogXCJjYWxjKDEwMHZ3IC0gMTZweClcIixcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBwaWNrZXJQb3NpY2lvbi5saXN0byA/IFwidmlzaWJsZVwiIDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgdy1bMjUwcHhdIG1heC13LVtjYWxjKDEwMHZ3LTE2cHgpXSByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0yMDAgYmctd2hpdGUgcC0zIHNoYWRvdy14bFwiPlxuICAgICAgICAgICAgICAgIDxDaHJvbWVQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlQWxwaGE9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNrZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3hTaGFkb3c6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KG5ld0NvbG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZ2JhID0gYHJnYmEoJHtuZXdDb2xvci5yZ2Iucn0sICR7bmV3Q29sb3IucmdiLmd9LCAke25ld0NvbG9yLnJnYi5ifSwgJHtuZXdDb2xvci5yZ2IuYX0pYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldENvbG9yKHJnYmEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2Uoc2VjY2lvbi5pZCwgcmdiYSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtNiBnYXAtMiBwdC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIHt0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIFwiRXllRHJvcHBlclwiIGluIHdpbmRvdyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXllRHJvcHBlciA9IG5ldyB3aW5kb3cuRXllRHJvcHBlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXllRHJvcHBlci5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDb2xvcihyZXN1bHQuc1JHQkhleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZShzZWNjaW9uLmlkLCByZXN1bHQuc1JHQkhleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXllRHJvcHBlciBjYW5jZWxhZG8gbyBubyBzb3BvcnRhZG9cIiwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBoLTcgdy03IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkIGJvcmRlciBiZy13aGl0ZSBzaGFkb3ctc20gdHJhbnNpdGlvbi10cmFuc2Zvcm0gaG92ZXI6c2NhbGUtMTEwIGhvdmVyOmJnLWdyYXktMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIlNlbGVjY2lvbmFyIGRlIHBhbnRhbGxhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGlwZXR0ZSBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtZ3JheS03MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgICAgICAgICAge2NvbG9yZXNSYXBpZG9zLm1hcCgoYykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17Y31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldENvbG9yKGMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZShzZWNjaW9uLmlkLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGgtNyB3LTcgcm91bmRlZCBib3JkZXIgdHJhbnNpdGlvbi10cmFuc2Zvcm0gaG92ZXI6c2NhbGUtMTEwICR7Y29sb3IgPT09IGMgPyBcInJpbmctMiByaW5nLXB1cnBsZS01MDBcIiA6IFwiXCJ9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGMgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Y31cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCIgcmVmPXtwaWNrZXJSZWZ9PlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHJlZj17Ym90b25SZWZ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclBpY2tlcigocHJldikgPT4gIXByZXYpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BoLTcgdy03IHJvdW5kZWQtbWQgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBzaGFkb3ctc20gdHJhbnNpdGlvbi10cmFuc2Zvcm0gJHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQgPyBcImN1cnNvci1ub3QtYWxsb3dlZCBiZy1ncmF5LTIwMFwiIDogXCJob3ZlcjpzY2FsZS0xMTBcIlxuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfX1cbiAgICAgICAgICAgICAgICB0aXRsZT1cIkNhbWJpYXIgY29sb3IgZGUgZm9uZG9cIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAge21vc3RyYXJQaWNrZXIgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgICAgID8gY3JlYXRlUG9ydGFsKHBpY2tlclBhbmVsLCBkb2N1bWVudC5ib2R5KVxuICAgICAgICAgICAgICAgICAgICA6IHBpY2tlclBhbmVsKX1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cclxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlTGF5b3V0RWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJjcmVhdGVQb3J0YWwiLCJDaHJvbWVQaWNrZXIiLCJQaXBldHRlIiwiU2VsZWN0b3JDb2xvclNlY2Npb24iLCJzZWNjaW9uIiwib25DaGFuZ2UiLCJkaXNhYmxlZCIsIm1vc3RyYXJQaWNrZXIiLCJzZXRNb3N0cmFyUGlja2VyIiwiY29sb3IiLCJzZXRDb2xvciIsImZvbmRvIiwicGlja2VyUG9zaWNpb24iLCJzZXRQaWNrZXJQb3NpY2lvbiIsInRvcCIsImxlZnQiLCJsaXN0byIsInBpY2tlclJlZiIsImJvdG9uUmVmIiwicGFuZWxSZWYiLCJ1bmRlZmluZWQiLCJoYW5kbGVDbGlja0Z1ZXJhIiwiZSIsImNsaWNrRW5Cb3RvbiIsImN1cnJlbnQiLCJjb250YWlucyIsInRhcmdldCIsImNsaWNrRW5QYW5lbCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhY3R1YWxpemFyUG9zaWNpb25QaWNrZXIiLCJib3RvbiIsInBhbmVsIiwibWFyZ2VuVmlld3BvcnQiLCJzZXBhcmFjaW9uIiwidmlld3BvcnRBbmNobyIsIk1hdGgiLCJtYXgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwidmlld3BvcnRBbHRvIiwiaW5uZXJIZWlnaHQiLCJib3RvblJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwYW5lbFJlY3QiLCJwYW5lbEFuY2hvIiwid2lkdGgiLCJwYW5lbEFsdG8iLCJoZWlnaHQiLCJwdWVkZUFiYWpvIiwiYm90dG9tIiwidG9wQWJham8iLCJtaW4iLCJ0b3BBcnJpYmEiLCJyb3VuZCIsInByZXYiLCJyYWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImNvbG9yZXNSYXBpZG9zIiwicGlja2VyUGFuZWwiLCJkaXYiLCJyZWYiLCJjbGFzc05hbWUiLCJzdHlsZSIsIm1heFdpZHRoIiwidmlzaWJpbGl0eSIsImRpc2FibGVBbHBoYSIsInN0eWxlcyIsImRlZmF1bHQiLCJwaWNrZXIiLCJib3hTaGFkb3ciLCJuZXdDb2xvciIsInJnYmEiLCJyZ2IiLCJyIiwiZyIsImIiLCJhIiwiaWQiLCJidXR0b24iLCJvbkNsaWNrIiwiZXllRHJvcHBlciIsIkV5ZURyb3BwZXIiLCJyZXN1bHQiLCJvcGVuIiwic1JHQkhleCIsImVyciIsImNvbnNvbGUiLCJ3YXJuIiwidGl0bGUiLCJtYXAiLCJjIiwiYmFja2dyb3VuZENvbG9yIiwidHlwZSIsImJvZHkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/SelectorColorSeccion.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/ShapeToolbar.jsx":
/*!*****************************************!*\
  !*** ./src/components/ShapeToolbar.jsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ShapeToolbar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// components/ShapeToolbar.jsx\n\n\nfunction ShapeToolbar({ shapeElement, onUpdateShape, style = {} }) {\n    const [mostrarSelectorColor, setMostrarSelectorColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const colorRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ShapeToolbar.useEffect\": ()=>{\n            const handleClickFuera = {\n                \"ShapeToolbar.useEffect.handleClickFuera\": (e)=>{\n                    if (colorRef.current && !colorRef.current.contains(e.target)) {\n                        setMostrarSelectorColor(false);\n                    }\n                }\n            }[\"ShapeToolbar.useEffect.handleClickFuera\"];\n            document.addEventListener(\"mousedown\", handleClickFuera);\n            return ({\n                \"ShapeToolbar.useEffect\": ()=>document.removeEventListener(\"mousedown\", handleClickFuera)\n            })[\"ShapeToolbar.useEffect\"];\n        }\n    }[\"ShapeToolbar.useEffect\"], []);\n    if (!shapeElement || shapeElement.tipo !== \"forma\" || shapeElement.figura === \"line\") return null;\n    const colorActual = shapeElement.color || \"#000000\";\n    const coloresPredefinidos = [\n        \"#000\",\n        \"#fff\",\n        \"#ff0000\",\n        \"#00ff00\",\n        \"#0000ff\",\n        \"#ff00ff\",\n        \"#00ffff\",\n        \"#ffa500\",\n        \"#808080\"\n    ];\n    const actualizarColor = (nuevoColor)=>{\n        if (onUpdateShape) {\n            onUpdateShape(shapeElement.id, {\n                color: nuevoColor,\n                isFinal: true\n            });\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed z-50 bg-white border rounded shadow p-2 flex gap-2 items-center\",\n        style: {\n            ...style,\n            animation: \"fadeInScale 0.15s ease-out\"\n        },\n        onMouseDown: (e)=>e.stopPropagation(),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative\",\n                ref: colorRef,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>setMostrarSelectorColor(!mostrarSelectorColor),\n                        className: \"flex items-center gap-2 px-3 py-2 rounded border text-sm hover:bg-gray-100\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-5 h-5 rounded-full border border-gray-300\",\n                                style: {\n                                    backgroundColor: colorActual\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 48,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-xs font-medium\",\n                                children: \"Color\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 49,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 44,\n                        columnNumber: 9\n                    }, this),\n                    mostrarSelectorColor && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute top-full mt-2 bg-white border rounded-lg shadow-xl p-3 z-50 min-w-[200px]\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"color\",\n                                value: colorActual,\n                                onChange: (e)=>actualizarColor(e.target.value),\n                                className: \"w-full h-8 mb-3 rounded border\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 54,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-5 gap-2\",\n                                children: coloresPredefinidos.map((color)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-6 h-6 rounded-full border\",\n                                        style: {\n                                            backgroundColor: color\n                                        },\n                                        onClick: ()=>actualizarColor(color)\n                                    }, color, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                        lineNumber: 62,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 60,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 53,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 43,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col items-start\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-gray-600 mb-1\",\n                        children: \"Esquinas\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 78,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"range\",\n                                min: 0,\n                                max: 100,\n                                step: 1,\n                                value: shapeElement.cornerRadius || 0,\n                                onChange: (e)=>{\n                                    const nuevoRadio = parseInt(e.target.value);\n                                    onUpdateShape(shapeElement.id, {\n                                        cornerRadius: nuevoRadio,\n                                        isPreview: true\n                                    });\n                                },\n                                onMouseUp: (e)=>{\n                                    const nuevoRadio = parseInt(e.target.value);\n                                    onUpdateShape(shapeElement.id, {\n                                        cornerRadius: nuevoRadio,\n                                        isFinal: true\n                                    });\n                                },\n                                className: \"w-[120px]\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 81,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"number\",\n                                min: 0,\n                                max: 100,\n                                value: shapeElement.cornerRadius || 0,\n                                onChange: (e)=>{\n                                    const nuevoValor = parseInt(e.target.value);\n                                    if (!isNaN(nuevoValor)) {\n                                        onUpdateShape(shapeElement.id, {\n                                            cornerRadius: nuevoValor,\n                                            isPreview: true\n                                        });\n                                    }\n                                },\n                                onBlur: (e)=>{\n                                    const valorFinal = parseInt(e.target.value);\n                                    if (!isNaN(valorFinal)) {\n                                        onUpdateShape(shapeElement.id, {\n                                            cornerRadius: valorFinal,\n                                            isFinal: true\n                                        });\n                                    }\n                                },\n                                className: \"w-[50px] px-1 py-0.5 border rounded text-sm\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 105,\n                                columnNumber: 5\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 79,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 77,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Tama\\xf1o texto\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 138,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"number\",\n                        min: 8,\n                        max: 200,\n                        value: shapeElement.fontSize || 24,\n                        onChange: (e)=>onActualizar({\n                                fontSize: parseInt(e.target.value),\n                                isFinal: true\n                            }),\n                        className: \"w-20 text-black rounded px-1\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 139,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 137,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Color texto\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 153,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"color\",\n                        value: shapeElement.colorTexto || \"#000000\",\n                        onChange: (e)=>onActualizar({\n                                colorTexto: e.target.value,\n                                isFinal: true\n                            }),\n                        className: \"w-8 h-6 rounded\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 154,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 152,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Fuente\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 166,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: shapeElement.fontFamily || \"sans-serif\",\n                        onChange: (e)=>onActualizar({\n                                fontFamily: e.target.value,\n                                isFinal: true\n                            }),\n                        className: \"text-black rounded px-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"sans-serif\",\n                                children: \"Sans-serif\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 174,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"serif\",\n                                children: \"Serif\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 175,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"monospace\",\n                                children: \"Monospace\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 176,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"Great Vibes\",\n                                children: \"Great Vibes\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 177,\n                                columnNumber: 5\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 167,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 165,\n                columnNumber: 1\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-white w-24\",\n                        children: \"Alineaci\\xf3n\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 183,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: shapeElement.align || \"center\",\n                        onChange: (e)=>onActualizar({\n                                align: e.target.value,\n                                isFinal: true\n                            }),\n                        className: \"text-black rounded px-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"left\",\n                                children: \"Izquierda\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 191,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"center\",\n                                children: \"Centro\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 192,\n                                columnNumber: 5\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"right\",\n                                children: \"Derecha\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                                lineNumber: 193,\n                                columnNumber: 5\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                        lineNumber: 184,\n                        columnNumber: 3\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n                lineNumber: 182,\n                columnNumber: 1\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ShapeToolbar.jsx\",\n        lineNumber: 35,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL1NoYXBlVG9vbGJhci5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSw4QkFBOEI7O0FBQ3NCO0FBRXJDLFNBQVNHLGFBQWEsRUFBRUMsWUFBWSxFQUFFQyxhQUFhLEVBQUVDLFFBQVEsQ0FBQyxDQUFDLEVBQUU7SUFDOUUsTUFBTSxDQUFDQyxzQkFBc0JDLHdCQUF3QixHQUFHUiwrQ0FBUUEsQ0FBQztJQUNqRSxNQUFNUyxXQUFXUCw2Q0FBTUEsQ0FBQztJQUV4QkQsZ0RBQVNBO2tDQUFDO1lBQ1IsTUFBTVM7MkRBQW1CLENBQUNDO29CQUN4QixJQUFJRixTQUFTRyxPQUFPLElBQUksQ0FBQ0gsU0FBU0csT0FBTyxDQUFDQyxRQUFRLENBQUNGLEVBQUVHLE1BQU0sR0FBRzt3QkFDNUROLHdCQUF3QjtvQkFDMUI7Z0JBQ0Y7O1lBRUFPLFNBQVNDLGdCQUFnQixDQUFDLGFBQWFOO1lBQ3ZDOzBDQUFPLElBQU1LLFNBQVNFLG1CQUFtQixDQUFDLGFBQWFQOztRQUN6RDtpQ0FBRyxFQUFFO0lBRUwsSUFBSSxDQUFDTixnQkFBZ0JBLGFBQWFjLElBQUksS0FBSyxXQUFXZCxhQUFhZSxNQUFNLEtBQUssUUFBUSxPQUFPO0lBRTdGLE1BQU1DLGNBQWNoQixhQUFhaUIsS0FBSyxJQUFJO0lBRTFDLE1BQU1DLHNCQUFzQjtRQUFDO1FBQVE7UUFBUTtRQUFXO1FBQVc7UUFBVztRQUFXO1FBQVc7UUFBVztLQUFVO0lBRXpILE1BQU1DLGtCQUFrQixDQUFDQztRQUN2QixJQUFJbkIsZUFBZTtZQUNqQkEsY0FBY0QsYUFBYXFCLEVBQUUsRUFBRTtnQkFDN0JKLE9BQU9HO2dCQUNQRSxTQUFTO1lBQ1g7UUFDRjtJQUNGO0lBRUEscUJBQ0UsOERBQUNDO1FBQ0NDLFdBQVU7UUFDVnRCLE9BQU87WUFDTCxHQUFHQSxLQUFLO1lBQ1J1QixXQUFXO1FBQ2I7UUFDQUMsYUFBYSxDQUFDbkIsSUFBTUEsRUFBRW9CLGVBQWU7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QVMxQiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxTaGFwZVRvb2xiYXIuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvU2hhcGVUb29sYmFyLmpzeFxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNoYXBlVG9vbGJhcih7IHNoYXBlRWxlbWVudCwgb25VcGRhdGVTaGFwZSwgc3R5bGUgPSB7fSB9KSB7XHJcbiAgY29uc3QgW21vc3RyYXJTZWxlY3RvckNvbG9yLCBzZXRNb3N0cmFyU2VsZWN0b3JDb2xvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgY29sb3JSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBoYW5kbGVDbGlja0Z1ZXJhID0gKGUpID0+IHtcclxuICAgICAgaWYgKGNvbG9yUmVmLmN1cnJlbnQgJiYgIWNvbG9yUmVmLmN1cnJlbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlQ2xpY2tGdWVyYSk7XHJcbiAgICByZXR1cm4gKCkgPT4gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja0Z1ZXJhKTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGlmICghc2hhcGVFbGVtZW50IHx8IHNoYXBlRWxlbWVudC50aXBvICE9PSBcImZvcm1hXCIgfHwgc2hhcGVFbGVtZW50LmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHJldHVybiBudWxsO1xyXG5cclxuICBjb25zdCBjb2xvckFjdHVhbCA9IHNoYXBlRWxlbWVudC5jb2xvciB8fCBcIiMwMDAwMDBcIjtcclxuXHJcbiAgY29uc3QgY29sb3Jlc1ByZWRlZmluaWRvcyA9IFtcIiMwMDBcIiwgXCIjZmZmXCIsIFwiI2ZmMDAwMFwiLCBcIiMwMGZmMDBcIiwgXCIjMDAwMGZmXCIsIFwiI2ZmMDBmZlwiLCBcIiMwMGZmZmZcIiwgXCIjZmZhNTAwXCIsIFwiIzgwODA4MFwiXTtcclxuXHJcbiAgY29uc3QgYWN0dWFsaXphckNvbG9yID0gKG51ZXZvQ29sb3IpID0+IHtcclxuICAgIGlmIChvblVwZGF0ZVNoYXBlKSB7XHJcbiAgICAgIG9uVXBkYXRlU2hhcGUoc2hhcGVFbGVtZW50LmlkLCB7XHJcbiAgICAgICAgY29sb3I6IG51ZXZvQ29sb3IsXHJcbiAgICAgICAgaXNGaW5hbDogdHJ1ZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXZcclxuICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgei01MCBiZy13aGl0ZSBib3JkZXIgcm91bmRlZCBzaGFkb3cgcC0yIGZsZXggZ2FwLTIgaXRlbXMtY2VudGVyXCJcclxuICAgICAgc3R5bGU9e3tcclxuICAgICAgICAuLi5zdHlsZSxcclxuICAgICAgICBhbmltYXRpb246IFwiZmFkZUluU2NhbGUgMC4xNXMgZWFzZS1vdXRcIixcclxuICAgICAgfX1cclxuICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxyXG4gICAgPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCIgcmVmPXtjb2xvclJlZn0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yQ29sb3IoIW1vc3RyYXJTZWxlY3RvckNvbG9yKX1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMiByb3VuZGVkIGJvcmRlciB0ZXh0LXNtIGhvdmVyOmJnLWdyYXktMTAwXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNSBoLTUgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItZ3JheS0zMDBcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yQWN0dWFsIH19IC8+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIGZvbnQtbWVkaXVtXCI+Q29sb3I8L3NwYW4+XHJcbiAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgIHttb3N0cmFyU2VsZWN0b3JDb2xvciAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC1mdWxsIG10LTIgYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQtbGcgc2hhZG93LXhsIHAtMyB6LTUwIG1pbi13LVsyMDBweF1cIj5cclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cImNvbG9yXCJcclxuICAgICAgICAgICAgICB2YWx1ZT17Y29sb3JBY3R1YWx9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBhY3R1YWxpemFyQ29sb3IoZS50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLTggbWItMyByb3VuZGVkIGJvcmRlclwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtNSBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgIHtjb2xvcmVzUHJlZGVmaW5pZG9zLm1hcCgoY29sb3IpID0+IChcclxuICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAga2V5PXtjb2xvcn1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy02IGgtNiByb3VuZGVkLWZ1bGwgYm9yZGVyXCJcclxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiBjb2xvciB9fVxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBhY3R1YWxpemFyQ29sb3IoY29sb3IpfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcblxyXG5cclxuey8qIPCfn6ogQ29udHJvbCBkZSBlc3F1aW5hcyByZWRvbmRlYWRhcyAqL31cclxuPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLXN0YXJ0XCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMCBtYi0xXCI+RXNxdWluYXM8L2xhYmVsPlxyXG4gIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICAgIHsvKiBTbGlkZXIgKi99XHJcbiAgICA8aW5wdXRcclxuICAgICAgdHlwZT1cInJhbmdlXCJcclxuICAgICAgbWluPXswfVxyXG4gICAgICBtYXg9ezEwMH1cclxuICAgICAgc3RlcD17MX1cclxuICAgICAgdmFsdWU9e3NoYXBlRWxlbWVudC5jb3JuZXJSYWRpdXMgfHwgMH1cclxuICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9SYWRpbyA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBvblVwZGF0ZVNoYXBlKHNoYXBlRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgY29ybmVyUmFkaXVzOiBudWV2b1JhZGlvLFxyXG4gICAgICAgICAgaXNQcmV2aWV3OiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9fVxyXG4gICAgICBvbk1vdXNlVXA9eyhlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9SYWRpbyA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBvblVwZGF0ZVNoYXBlKHNoYXBlRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgY29ybmVyUmFkaXVzOiBudWV2b1JhZGlvLFxyXG4gICAgICAgICAgaXNGaW5hbDogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgICAgfX1cclxuICAgICAgY2xhc3NOYW1lPVwidy1bMTIwcHhdXCJcclxuICAgIC8+XHJcblxyXG4gICAgey8qIElucHV0IG51bcOpcmljbyAqL31cclxuICAgIDxpbnB1dFxyXG4gICAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgbWluPXswfVxyXG4gICAgICBtYXg9ezEwMH1cclxuICAgICAgdmFsdWU9e3NoYXBlRWxlbWVudC5jb3JuZXJSYWRpdXMgfHwgMH1cclxuICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbnVldm9WYWxvciA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICBpZiAoIWlzTmFOKG51ZXZvVmFsb3IpKSB7XHJcbiAgICAgICAgICBvblVwZGF0ZVNoYXBlKHNoYXBlRWxlbWVudC5pZCwge1xyXG4gICAgICAgICAgICBjb3JuZXJSYWRpdXM6IG51ZXZvVmFsb3IsXHJcbiAgICAgICAgICAgIGlzUHJldmlldzogdHJ1ZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfX1cclxuICAgICAgb25CbHVyPXsoZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbG9yRmluYWwgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKCFpc05hTih2YWxvckZpbmFsKSkge1xyXG4gICAgICAgICAgb25VcGRhdGVTaGFwZShzaGFwZUVsZW1lbnQuaWQsIHtcclxuICAgICAgICAgICAgY29ybmVyUmFkaXVzOiB2YWxvckZpbmFsLFxyXG4gICAgICAgICAgICBpc0ZpbmFsOiB0cnVlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9fVxyXG4gICAgICBjbGFzc05hbWU9XCJ3LVs1MHB4XSBweC0xIHB5LTAuNSBib3JkZXIgcm91bmRlZCB0ZXh0LXNtXCJcclxuICAgIC8+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG5cclxuXHJcblxyXG5cclxuey8qIFRhbWHDsW8gZGUgZnVlbnRlICovfVxyXG48ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSB3LTI0XCI+VGFtYcOxbyB0ZXh0bzwvbGFiZWw+XHJcbiAgPGlucHV0XHJcbiAgICB0eXBlPVwibnVtYmVyXCJcclxuICAgIG1pbj17OH1cclxuICAgIG1heD17MjAwfVxyXG4gICAgdmFsdWU9e3NoYXBlRWxlbWVudC5mb250U2l6ZSB8fCAyNH1cclxuICAgIG9uQ2hhbmdlPXsoZSkgPT5cclxuICAgICAgb25BY3R1YWxpemFyKHsgZm9udFNpemU6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSwgaXNGaW5hbDogdHJ1ZSB9KVxyXG4gICAgfVxyXG4gICAgY2xhc3NOYW1lPVwidy0yMCB0ZXh0LWJsYWNrIHJvdW5kZWQgcHgtMVwiXHJcbiAgLz5cclxuPC9kaXY+XHJcblxyXG57LyogQ29sb3IgZGVsIHRleHRvICovfVxyXG48ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSB3LTI0XCI+Q29sb3IgdGV4dG88L2xhYmVsPlxyXG4gIDxpbnB1dFxyXG4gICAgdHlwZT1cImNvbG9yXCJcclxuICAgIHZhbHVlPXtzaGFwZUVsZW1lbnQuY29sb3JUZXh0byB8fCBcIiMwMDAwMDBcIn1cclxuICAgIG9uQ2hhbmdlPXsoZSkgPT5cclxuICAgICAgb25BY3R1YWxpemFyKHsgY29sb3JUZXh0bzogZS50YXJnZXQudmFsdWUsIGlzRmluYWw6IHRydWUgfSlcclxuICAgIH1cclxuICAgIGNsYXNzTmFtZT1cInctOCBoLTYgcm91bmRlZFwiXHJcbiAgLz5cclxuPC9kaXY+XHJcblxyXG57LyogRnVlbnRlICovfVxyXG48ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC13aGl0ZSB3LTI0XCI+RnVlbnRlPC9sYWJlbD5cclxuICA8c2VsZWN0XHJcbiAgICB2YWx1ZT17c2hhcGVFbGVtZW50LmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCJ9XHJcbiAgICBvbkNoYW5nZT17KGUpID0+XHJcbiAgICAgIG9uQWN0dWFsaXphcih7IGZvbnRGYW1pbHk6IGUudGFyZ2V0LnZhbHVlLCBpc0ZpbmFsOiB0cnVlIH0pXHJcbiAgICB9XHJcbiAgICBjbGFzc05hbWU9XCJ0ZXh0LWJsYWNrIHJvdW5kZWQgcHgtMVwiXHJcbiAgPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cInNhbnMtc2VyaWZcIj5TYW5zLXNlcmlmPC9vcHRpb24+XHJcbiAgICA8b3B0aW9uIHZhbHVlPVwic2VyaWZcIj5TZXJpZjwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cIm1vbm9zcGFjZVwiPk1vbm9zcGFjZTwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cIkdyZWF0IFZpYmVzXCI+R3JlYXQgVmliZXM8L29wdGlvbj5cclxuICA8L3NlbGVjdD5cclxuPC9kaXY+XHJcblxyXG57LyogQWxpbmVhY2nDs24gKi99XHJcbjxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cclxuICA8bGFiZWwgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LXdoaXRlIHctMjRcIj5BbGluZWFjacOzbjwvbGFiZWw+XHJcbiAgPHNlbGVjdFxyXG4gICAgdmFsdWU9e3NoYXBlRWxlbWVudC5hbGlnbiB8fCBcImNlbnRlclwifVxyXG4gICAgb25DaGFuZ2U9eyhlKSA9PlxyXG4gICAgICBvbkFjdHVhbGl6YXIoeyBhbGlnbjogZS50YXJnZXQudmFsdWUsIGlzRmluYWw6IHRydWUgfSlcclxuICAgIH1cclxuICAgIGNsYXNzTmFtZT1cInRleHQtYmxhY2sgcm91bmRlZCBweC0xXCJcclxuICA+XHJcbiAgICA8b3B0aW9uIHZhbHVlPVwibGVmdFwiPkl6cXVpZXJkYTwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cImNlbnRlclwiPkNlbnRybzwvb3B0aW9uPlxyXG4gICAgPG9wdGlvbiB2YWx1ZT1cInJpZ2h0XCI+RGVyZWNoYTwvb3B0aW9uPlxyXG4gIDwvc2VsZWN0PlxyXG48L2Rpdj5cclxuXHJcblxyXG5cclxuXHJcbiAgICA8L2Rpdj4gIFxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiU2hhcGVUb29sYmFyIiwic2hhcGVFbGVtZW50Iiwib25VcGRhdGVTaGFwZSIsInN0eWxlIiwibW9zdHJhclNlbGVjdG9yQ29sb3IiLCJzZXRNb3N0cmFyU2VsZWN0b3JDb2xvciIsImNvbG9yUmVmIiwiaGFuZGxlQ2xpY2tGdWVyYSIsImUiLCJjdXJyZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGlwbyIsImZpZ3VyYSIsImNvbG9yQWN0dWFsIiwiY29sb3IiLCJjb2xvcmVzUHJlZGVmaW5pZG9zIiwiYWN0dWFsaXphckNvbG9yIiwibnVldm9Db2xvciIsImlkIiwiaXNGaW5hbCIsImRpdiIsImNsYXNzTmFtZSIsImFuaW1hdGlvbiIsIm9uTW91c2VEb3duIiwic3RvcFByb3BhZ2F0aW9uIiwicmVmIiwiYnV0dG9uIiwib25DbGljayIsImJhY2tncm91bmRDb2xvciIsInNwYW4iLCJpbnB1dCIsInR5cGUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwibWFwIiwibGFiZWwiLCJtaW4iLCJtYXgiLCJzdGVwIiwiY29ybmVyUmFkaXVzIiwibnVldm9SYWRpbyIsInBhcnNlSW50IiwiaXNQcmV2aWV3Iiwib25Nb3VzZVVwIiwibnVldm9WYWxvciIsImlzTmFOIiwib25CbHVyIiwidmFsb3JGaW5hbCIsImZvbnRTaXplIiwib25BY3R1YWxpemFyIiwiY29sb3JUZXh0byIsInNlbGVjdCIsImZvbnRGYW1pbHkiLCJvcHRpb24iLCJhbGlnbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/ShapeToolbar.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx":
/*!*******************************************************!*\
  !*** ./src/components/canvas/CanvasElementsLayer.jsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CanvasElementsLayer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n// src/components/canvas/CanvasElementsLayer.jsx\n\n\n\nfunction CanvasElementsLayer({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Layer, {\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\CanvasElementsLayer.jsx\",\n        lineNumber: 6,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2NhbnZhcy9DYW52YXNFbGVtZW50c0xheWVyLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsZ0RBQWdEOztBQUN0QjtBQUNVO0FBRXJCLFNBQVNFLG9CQUFvQixFQUFFQyxRQUFRLEVBQUU7SUFDdEQscUJBQU8sOERBQUNGLDhDQUFLQTtrQkFBRUU7Ozs7OztBQUNqQiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxjYW52YXNcXENhbnZhc0VsZW1lbnRzTGF5ZXIuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2NhbnZhcy9DYW52YXNFbGVtZW50c0xheWVyLmpzeFxyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IExheWVyIH0gZnJvbSBcInJlYWN0LWtvbnZhXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDYW52YXNFbGVtZW50c0xheWVyKHsgY2hpbGRyZW4gfSkge1xyXG4gIHJldHVybiA8TGF5ZXI+e2NoaWxkcmVufTwvTGF5ZXI+O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkxheWVyIiwiQ2FudmFzRWxlbWVudHNMYXllciIsImNoaWxkcmVuIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/canvas/DividersOverlayStage.jsx":
/*!********************************************************!*\
  !*** ./src/components/canvas/DividersOverlayStage.jsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ DividersOverlayStage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/canvas/CanvasElementsLayer */ \"(pages-dir-node)/./src/components/canvas/CanvasElementsLayer.jsx\");\n// src/components/canvas/DividersOverlayStage.jsx\n\n\n\n\n/**\r\n * Stage secundario (overlay) que dibuja líneas divisorias laterales\r\n * cuando zoom === 0.8. Mantiene exactamente la lógica original.\r\n */ function DividersOverlayStage({ zoom, altoCanvasDinamico, seccionesOrdenadas }) {\n    if (zoom !== 0.8) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Stage, {\n        width: 1220,\n        height: altoCanvasDinamico,\n        style: {\n            position: \"absolute\",\n            top: 0,\n            left: \"50%\",\n            transform: \"translateX(-50%)\",\n            pointerEvents: \"none\",\n            zIndex: 10\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_CanvasElementsLayer__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n            children: seccionesOrdenadas.slice(0, -1).map((seccion, index)=>{\n                let alturaAcumulada = 0;\n                for(let i = 0; i <= index; i++){\n                    alturaAcumulada += seccionesOrdenadas[i].altura;\n                }\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Line, {\n                            name: \"ui\",\n                            points: [\n                                210,\n                                alturaAcumulada,\n                                10,\n                                alturaAcumulada\n                            ],\n                            stroke: \"#999999\",\n                            strokeWidth: 1,\n                            opacity: 0.6,\n                            dash: [\n                                3,\n                                3\n                            ],\n                            listening: false\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n                            lineNumber: 40,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Line, {\n                            name: \"ui\",\n                            points: [\n                                1010,\n                                alturaAcumulada,\n                                1210,\n                                alturaAcumulada\n                            ],\n                            stroke: \"#999999\",\n                            strokeWidth: 1,\n                            opacity: 0.6,\n                            dash: [\n                                3,\n                                3\n                            ],\n                            listening: false\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n                            lineNumber: 51,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, `dividers-secondary-${seccion.id}`, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n                    lineNumber: 38,\n                    columnNumber: 13\n                }, this);\n            })\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n            lineNumber: 30,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\canvas\\\\DividersOverlayStage.jsx\",\n        lineNumber: 18,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2NhbnZhcy9EaXZpZGVyc092ZXJsYXlTdGFnZS5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxpREFBaUQ7O0FBQ3ZCO0FBQ3VCO0FBQ3lCO0FBRTFFOzs7Q0FHQyxHQUNjLFNBQVNLLHFCQUFxQixFQUMzQ0MsSUFBSSxFQUNKQyxrQkFBa0IsRUFDbEJDLGtCQUFrQixFQUNuQjtJQUNDLElBQUlGLFNBQVMsS0FBSyxPQUFPO0lBRXpCLHFCQUNFLDhEQUFDTCw4Q0FBS0E7UUFDSlEsT0FBTztRQUNQQyxRQUFRSDtRQUNSSSxPQUFPO1lBQ0xDLFVBQVU7WUFDVkMsS0FBSztZQUNMQyxNQUFNO1lBQ05DLFdBQVc7WUFDWEMsZUFBZTtZQUNmQyxRQUFRO1FBQ1Y7a0JBRUEsNEVBQUNiLDhFQUFtQkE7c0JBQ2pCSSxtQkFBbUJVLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDLENBQUNDLFNBQVNDO2dCQUM3QyxJQUFJQyxrQkFBa0I7Z0JBQ3RCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxLQUFLRixPQUFPRSxJQUFLO29CQUMvQkQsbUJBQW1CZCxrQkFBa0IsQ0FBQ2UsRUFBRSxDQUFDQyxNQUFNO2dCQUNqRDtnQkFFQSxxQkFDRSw4REFBQ3RCLDhDQUFLQTs7c0NBRUosOERBQUNDLDZDQUFJQTs0QkFDSHNCLE1BQUs7NEJBQ0xDLFFBQVE7Z0NBQUM7Z0NBQUtKO2dDQUFpQjtnQ0FBSUE7NkJBQWdCOzRCQUNuREssUUFBTzs0QkFDUEMsYUFBYTs0QkFDYkMsU0FBUzs0QkFDVEMsTUFBTTtnQ0FBQztnQ0FBRzs2QkFBRTs0QkFDWkMsV0FBVzs7Ozs7O3NDQUliLDhEQUFDNUIsNkNBQUlBOzRCQUNIc0IsTUFBSzs0QkFDTEMsUUFBUTtnQ0FBQztnQ0FBTUo7Z0NBQWlCO2dDQUFNQTs2QkFBZ0I7NEJBQ3RESyxRQUFPOzRCQUNQQyxhQUFhOzRCQUNiQyxTQUFTOzRCQUNUQyxNQUFNO2dDQUFDO2dDQUFHOzZCQUFFOzRCQUNaQyxXQUFXOzs7Ozs7O21CQXBCSCxDQUFDLG1CQUFtQixFQUFFWCxRQUFRWSxFQUFFLEVBQUU7Ozs7O1lBd0JsRDs7Ozs7Ozs7Ozs7QUFJUiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxjYW52YXNcXERpdmlkZXJzT3ZlcmxheVN0YWdlLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9jYW52YXMvRGl2aWRlcnNPdmVybGF5U3RhZ2UuanN4XHJcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgU3RhZ2UsIEdyb3VwLCBMaW5lIH0gZnJvbSBcInJlYWN0LWtvbnZhXCI7XHJcbmltcG9ydCBDYW52YXNFbGVtZW50c0xheWVyIGZyb20gXCJAL2NvbXBvbmVudHMvY2FudmFzL0NhbnZhc0VsZW1lbnRzTGF5ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBTdGFnZSBzZWN1bmRhcmlvIChvdmVybGF5KSBxdWUgZGlidWphIGzDrW5lYXMgZGl2aXNvcmlhcyBsYXRlcmFsZXNcclxuICogY3VhbmRvIHpvb20gPT09IDAuOC4gTWFudGllbmUgZXhhY3RhbWVudGUgbGEgbMOzZ2ljYSBvcmlnaW5hbC5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERpdmlkZXJzT3ZlcmxheVN0YWdlKHtcclxuICB6b29tLFxyXG4gIGFsdG9DYW52YXNEaW5hbWljbyxcclxuICBzZWNjaW9uZXNPcmRlbmFkYXMsXHJcbn0pIHtcclxuICBpZiAoem9vbSAhPT0gMC44KSByZXR1cm4gbnVsbDtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxTdGFnZVxyXG4gICAgICB3aWR0aD17MTIyMH0gLy8g4pyFIDkyMHB4IGNhbnZhcyArIDE1MHB4IGNhZGEgbGFkb1xyXG4gICAgICBoZWlnaHQ9e2FsdG9DYW52YXNEaW5hbWljb31cclxuICAgICAgc3R5bGU9e3tcclxuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgIHRvcDogMCxcclxuICAgICAgICBsZWZ0OiBcIjUwJVwiLCAvLyBDZW50cmFyIGVsIFN0YWdlIHNlY3VuZGFyaW9cclxuICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgtNTAlKVwiLCAvLyBDZW50cmFyIGV4YWN0YW1lbnRlXHJcbiAgICAgICAgcG9pbnRlckV2ZW50czogXCJub25lXCIsXHJcbiAgICAgICAgekluZGV4OiAxMCxcclxuICAgICAgfX1cclxuICAgID5cclxuICAgICAgPENhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcbiAgICAgICAge3NlY2Npb25lc09yZGVuYWRhcy5zbGljZSgwLCAtMSkubWFwKChzZWNjaW9uLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgbGV0IGFsdHVyYUFjdW11bGFkYSA9IDA7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBpbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFsdHVyYUFjdW11bGFkYSArPSBzZWNjaW9uZXNPcmRlbmFkYXNbaV0uYWx0dXJhO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxHcm91cCBrZXk9e2BkaXZpZGVycy1zZWNvbmRhcnktJHtzZWNjaW9uLmlkfWB9PlxyXG4gICAgICAgICAgICAgIHsvKiBMw61uZWEgaXpxdWllcmRhIC0gUEVHQURBIGFsIGJvcmRlIGl6cXVpZXJkbyBkZWwgY2FudmFzICovfVxyXG4gICAgICAgICAgICAgIDxMaW5lXHJcbiAgICAgICAgICAgICAgICBuYW1lPVwidWlcIlxyXG4gICAgICAgICAgICAgICAgcG9pbnRzPXtbMjEwLCBhbHR1cmFBY3VtdWxhZGEsIDEwLCBhbHR1cmFBY3VtdWxhZGFdfSAvLyDinIUgREVTREUgWD0yMTAgKGJvcmRlIHJlYWwgZGVsIGNhbnZhcykgSEFDSUEgWD0xMFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlPVwiIzk5OTk5OVwiXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD17MX1cclxuICAgICAgICAgICAgICAgIG9wYWNpdHk9ezAuNn1cclxuICAgICAgICAgICAgICAgIGRhc2g9e1szLCAzXX0gLy8g4pyFIFBVTlRPUyBDT1JUT1NcclxuICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgey8qIEzDrW5lYSBkZXJlY2hhIC0gUEVHQURBIGFsIGJvcmRlIGRlcmVjaG8gZGVsIGNhbnZhcyAqL31cclxuICAgICAgICAgICAgICA8TGluZVxyXG4gICAgICAgICAgICAgICAgbmFtZT1cInVpXCJcclxuICAgICAgICAgICAgICAgIHBvaW50cz17WzEwMTAsIGFsdHVyYUFjdW11bGFkYSwgMTIxMCwgYWx0dXJhQWN1bXVsYWRhXX0gLy8g4pyFIERFU0RFIFg9MTAxMCAoYm9yZGUgcmVhbCBkZWwgY2FudmFzKSBIQUNJQSBYPTEyMTBcclxuICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM5OTk5OTlcIlxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5PXswLjZ9XHJcbiAgICAgICAgICAgICAgICBkYXNoPXtbMywgM119IC8vIOKchSBQVU5UT1MgQ09SVE9TXHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvR3JvdXA+XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pfVxyXG4gICAgICA8L0NhbnZhc0VsZW1lbnRzTGF5ZXI+XHJcbiAgICA8L1N0YWdlPlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiU3RhZ2UiLCJHcm91cCIsIkxpbmUiLCJDYW52YXNFbGVtZW50c0xheWVyIiwiRGl2aWRlcnNPdmVybGF5U3RhZ2UiLCJ6b29tIiwiYWx0b0NhbnZhc0RpbmFtaWNvIiwic2VjY2lvbmVzT3JkZW5hZGFzIiwid2lkdGgiLCJoZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInRyYW5zZm9ybSIsInBvaW50ZXJFdmVudHMiLCJ6SW5kZXgiLCJzbGljZSIsIm1hcCIsInNlY2Npb24iLCJpbmRleCIsImFsdHVyYUFjdW11bGFkYSIsImkiLCJhbHR1cmEiLCJuYW1lIiwicG9pbnRzIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJvcGFjaXR5IiwiZGFzaCIsImxpc3RlbmluZyIsImlkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/canvas/DividersOverlayStage.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/FondoSeccion.jsx":
/*!************************************************!*\
  !*** ./src/components/editor/FondoSeccion.jsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FondoSeccion)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! use-image */ \"use-image\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nfunction FondoSeccion({ seccion, offsetY, alturaPx, onSelect, onUpdateFondoOffset, isMobile = false, mobileBackgroundEditEnabled = false, onBackgroundImageStatusChange }) {\n    const [fondoImage, fondoImageStatus] = use_image__WEBPACK_IMPORTED_MODULE_3___default()(seccion.fondoImagen, \"anonymous\");\n    const [modoMoverFondo, setModoMoverFondo] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const imagenRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const allowBackgroundEdit = !isMobile || mobileBackgroundEditEnabled;\n    const transformerAnchorSize = isMobile ? 24 : 14;\n    const transformerPadding = isMobile ? 10 : 4;\n    const transformerBorderStrokeWidth = isMobile ? 1.5 : 1;\n    const transformerAnchorStrokeWidth = isMobile ? 2.5 : 2;\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FondoSeccion.useEffect\": ()=>{\n            if (typeof onBackgroundImageStatusChange !== \"function\") return;\n            const hasBackgroundImage = typeof seccion?.fondoImagen === \"string\" && seccion.fondoImagen.trim().length > 0;\n            const status = !hasBackgroundImage ? \"none\" : fondoImageStatus === \"loaded\" || fondoImage ? \"loaded\" : fondoImageStatus === \"failed\" ? \"failed\" : \"loading\";\n            onBackgroundImageStatusChange({\n                sectionId: seccion.id,\n                imageUrl: hasBackgroundImage ? seccion.fondoImagen : \"\",\n                hasBackgroundImage,\n                status\n            });\n        }\n    }[\"FondoSeccion.useEffect\"], [\n        fondoImage,\n        fondoImageStatus,\n        onBackgroundImageStatusChange,\n        seccion?.fondoImagen,\n        seccion?.id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FondoSeccion.useEffect\": ()=>{\n            if (!modoMoverFondo) return;\n            const handleClickGlobal = {\n                \"FondoSeccion.useEffect.handleClickGlobal\": (e)=>{\n                    const stage = imagenRef.current?.getStage?.();\n                    if (!stage) return;\n                    const container = stage.container();\n                    if (!container.contains(e.target)) {\n                        setModoMoverFondo(false);\n                        document.body.style.cursor = \"default\";\n                    }\n                }\n            }[\"FondoSeccion.useEffect.handleClickGlobal\"];\n            window.addEventListener(\"mousedown\", handleClickGlobal);\n            window.addEventListener(\"touchstart\", handleClickGlobal, {\n                passive: true\n            });\n            return ({\n                \"FondoSeccion.useEffect\": ()=>{\n                    window.removeEventListener(\"mousedown\", handleClickGlobal);\n                    window.removeEventListener(\"touchstart\", handleClickGlobal);\n                }\n            })[\"FondoSeccion.useEffect\"];\n        }\n    }[\"FondoSeccion.useEffect\"], [\n        modoMoverFondo\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FondoSeccion.useEffect\": ()=>{\n            const onActivate = {\n                \"FondoSeccion.useEffect.onActivate\": (e)=>{\n                    if (e?.detail?.sectionId !== seccion.id) return;\n                    setModoMoverFondo(true);\n                    try {\n                        document.body.style.cursor = \"move\";\n                    } catch  {}\n                }\n            }[\"FondoSeccion.useEffect.onActivate\"];\n            const onExit = {\n                \"FondoSeccion.useEffect.onExit\": (e)=>{\n                    const targetSectionId = e?.detail?.sectionId;\n                    if (targetSectionId && targetSectionId !== seccion.id) return;\n                    setModoMoverFondo(false);\n                    try {\n                        document.body.style.cursor = \"default\";\n                    } catch  {}\n                }\n            }[\"FondoSeccion.useEffect.onExit\"];\n            window.addEventListener(\"activar-modo-mover-fondo\", onActivate);\n            window.addEventListener(\"salir-modo-mover-fondo\", onExit);\n            return ({\n                \"FondoSeccion.useEffect\": ()=>{\n                    window.removeEventListener(\"activar-modo-mover-fondo\", onActivate);\n                    window.removeEventListener(\"salir-modo-mover-fondo\", onExit);\n                }\n            })[\"FondoSeccion.useEffect\"];\n        }\n    }[\"FondoSeccion.useEffect\"], [\n        seccion.id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FondoSeccion.useEffect\": ()=>{\n            if (allowBackgroundEdit) return;\n            if (!modoMoverFondo) return;\n            setModoMoverFondo(false);\n        }\n    }[\"FondoSeccion.useEffect\"], [\n        allowBackgroundEdit,\n        modoMoverFondo\n    ]);\n    if (!seccion.fondoImagen || !fondoImage) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n            id: seccion.id,\n            x: 0,\n            y: offsetY,\n            width: 800,\n            height: alturaPx,\n            fill: seccion.fondo || \"#f0f0f0\",\n            listening: true,\n            preventDefault: false,\n            onClick: onSelect,\n            onTap: onSelect\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n            lineNumber: 108,\n            columnNumber: 7\n        }, this);\n    }\n    const canvasWidth = 800;\n    const canvasHeight = alturaPx;\n    const imageWidth = fondoImage.width;\n    const imageHeight = fondoImage.height;\n    const scaleX = canvasWidth / imageWidth;\n    const scaleY = canvasHeight / imageHeight;\n    const scale = Math.max(scaleX, scaleY);\n    const scaledWidth = imageWidth * scale;\n    const scaledHeight = imageHeight * scale;\n    const offsetXCentrado = (canvasWidth - scaledWidth) / 2;\n    const offsetYCentrado = (canvasHeight - scaledHeight) / 2;\n    const offsetXFinal = offsetXCentrado + (seccion.fondoImagenOffsetX || 0);\n    const offsetYFinal = offsetYCentrado + (seccion.fondoImagenOffsetY || 0);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n        id: seccion.id,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                id: seccion.id,\n                x: 0,\n                y: offsetY,\n                width: 800,\n                height: alturaPx,\n                fill: seccion.fondo || \"#f0f0f0\",\n                listening: true,\n                preventDefault: false,\n                onClick: onSelect,\n                onTap: onSelect\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                lineNumber: 143,\n                columnNumber: 7\n            }, this),\n            modoMoverFondo && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                x: -200,\n                y: offsetY - 200,\n                width: 1200,\n                height: alturaPx + 400,\n                fill: \"rgba(0,0,0,0.05)\",\n                listening: false\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                lineNumber: 157,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                clipX: modoMoverFondo ? undefined : 0,\n                clipY: modoMoverFondo ? undefined : offsetY,\n                clipWidth: modoMoverFondo ? undefined : 800,\n                clipHeight: modoMoverFondo ? undefined : alturaPx,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Image, {\n                        ref: imagenRef,\n                        image: fondoImage,\n                        x: offsetXFinal,\n                        y: offsetY + offsetYFinal,\n                        width: scaledWidth,\n                        height: scaledHeight,\n                        draggable: allowBackgroundEdit && modoMoverFondo,\n                        opacity: modoMoverFondo ? 0.9 : 1,\n                        shadowColor: modoMoverFondo ? \"#773dbe\" : \"transparent\",\n                        shadowBlur: modoMoverFondo ? 10 : 0,\n                        listening: true,\n                        preventDefault: allowBackgroundEdit && modoMoverFondo,\n                        onClick: (e)=>{\n                            if (modoMoverFondo) {\n                                e.cancelBubble = true;\n                                return;\n                            }\n                            onSelect?.();\n                        },\n                        onTap: (e)=>{\n                            if (modoMoverFondo) {\n                                e.cancelBubble = true;\n                            }\n                        },\n                        onMouseDown: (e)=>{\n                            if (modoMoverFondo) e.cancelBubble = true;\n                        },\n                        onDblClick: allowBackgroundEdit ? (e)=>{\n                            e.cancelBubble = true;\n                            setModoMoverFondo(true);\n                            document.body.style.cursor = \"move\";\n                        } : undefined,\n                        onDblTap: allowBackgroundEdit ? (e)=>{\n                            e.cancelBubble = true;\n                            setModoMoverFondo(true);\n                            document.body.style.cursor = \"move\";\n                        } : undefined,\n                        onDragMove: (e)=>{\n                            const node = e.target;\n                            const nuevaX = node.x();\n                            const nuevaY = node.y() - offsetY;\n                            const nuevoOffsetX = nuevaX - offsetXCentrado;\n                            const nuevoOffsetY = nuevaY - offsetYCentrado;\n                            onUpdateFondoOffset?.(seccion.id, {\n                                offsetX: nuevoOffsetX,\n                                offsetY: nuevoOffsetY\n                            }, true);\n                        },\n                        onDragEnd: (e)=>{\n                            const node = e.target;\n                            const nuevaX = node.x();\n                            const nuevaY = node.y() - offsetY;\n                            const nuevoOffsetX = nuevaX - offsetXCentrado;\n                            const nuevoOffsetY = nuevaY - offsetYCentrado;\n                            onUpdateFondoOffset?.(seccion.id, {\n                                offsetX: nuevoOffsetX,\n                                offsetY: nuevoOffsetY\n                            }, false);\n                            setModoMoverFondo(false);\n                            document.body.style.cursor = \"default\";\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                        lineNumber: 173,\n                        columnNumber: 9\n                    }, this),\n                    allowBackgroundEdit && modoMoverFondo && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Transformer, {\n                        nodes: [\n                            imagenRef.current\n                        ],\n                        enabledAnchors: [\n                            \"bottom-right\"\n                        ],\n                        borderStroke: \"#773dbe\",\n                        borderStrokeWidth: transformerBorderStrokeWidth,\n                        padding: transformerPadding,\n                        anchorFill: \"#773dbe\",\n                        anchorStroke: \"#ffffff\",\n                        anchorStrokeWidth: transformerAnchorStrokeWidth,\n                        anchorSize: transformerAnchorSize,\n                        anchorCornerRadius: 999,\n                        keepRatio: true,\n                        onTransform: ()=>{\n                            const node = imagenRef.current;\n                            if (!node) return;\n                            const sx = node.scaleX();\n                            const sy = node.scaleY();\n                            node.width(node.width() * sx);\n                            node.height(node.height() * sy);\n                            node.scaleX(1);\n                            node.scaleY(1);\n                        },\n                        onTransformEnd: ()=>{\n                            const node = imagenRef.current;\n                            if (!node) return;\n                            const nuevaX = node.x();\n                            const nuevaY = node.y() - offsetY;\n                            const nuevoOffsetX = nuevaX - offsetXCentrado;\n                            const nuevoOffsetY = nuevaY - offsetYCentrado;\n                            onUpdateFondoOffset?.(seccion.id, {\n                                offsetX: nuevoOffsetX,\n                                offsetY: nuevoOffsetY\n                            }, false);\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                        lineNumber: 233,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n                lineNumber: 167,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\FondoSeccion.jsx\",\n        lineNumber: 142,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9Gb25kb1NlY2Npb24uanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7QUFDd0I7QUFDM0M7QUFFbEIsU0FBU1MsYUFBYSxFQUNuQ0MsT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLFFBQVEsRUFDUkMsUUFBUSxFQUNSQyxtQkFBbUIsRUFDbkJDLFdBQVcsS0FBSyxFQUNoQkMsOEJBQThCLEtBQUssRUFDbkNDLDZCQUE2QixFQUM5QjtJQUNDLE1BQU0sQ0FBQ0MsWUFBWUMsaUJBQWlCLEdBQUdYLGdEQUFRQSxDQUFDRSxRQUFRVSxXQUFXLEVBQUU7SUFDckUsTUFBTSxDQUFDQyxnQkFBZ0JDLGtCQUFrQixHQUFHdEIsK0NBQVFBLENBQUM7SUFDckQsTUFBTXVCLFlBQVl0Qiw2Q0FBTUEsQ0FBQztJQUV6QixNQUFNdUIsc0JBQXNCLENBQUNULFlBQVlDO0lBQ3pDLE1BQU1TLHdCQUF3QlYsV0FBVyxLQUFLO0lBQzlDLE1BQU1XLHFCQUFxQlgsV0FBVyxLQUFLO0lBQzNDLE1BQU1ZLCtCQUErQlosV0FBVyxNQUFNO0lBQ3RELE1BQU1hLCtCQUErQmIsV0FBVyxNQUFNO0lBRXREYixnREFBU0E7a0NBQUM7WUFDUixJQUFJLE9BQU9lLGtDQUFrQyxZQUFZO1lBRXpELE1BQU1ZLHFCQUNKLE9BQU9uQixTQUFTVSxnQkFBZ0IsWUFBWVYsUUFBUVUsV0FBVyxDQUFDVSxJQUFJLEdBQUdDLE1BQU0sR0FBRztZQUVsRixNQUFNQyxTQUFTLENBQUNILHFCQUNaLFNBQ0FWLHFCQUFxQixZQUFZRCxhQUMvQixXQUNBQyxxQkFBcUIsV0FDbkIsV0FDQTtZQUVSRiw4QkFBOEI7Z0JBQzVCZ0IsV0FBV3ZCLFFBQVF3QixFQUFFO2dCQUNyQkMsVUFBVU4scUJBQXFCbkIsUUFBUVUsV0FBVyxHQUFHO2dCQUNyRFM7Z0JBQ0FHO1lBQ0Y7UUFDRjtpQ0FBRztRQUNEZDtRQUNBQztRQUNBRjtRQUNBUCxTQUFT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LEdBQUc7d0JBQ3RGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNWiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxlZGl0b3JcXEZvbmRvU2VjY2lvbi5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBHcm91cCwgUmVjdCwgVHJhbnNmb3JtZXIsIEltYWdlIGFzIEtvbnZhSW1hZ2UgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcbmltcG9ydCB1c2VJbWFnZSBmcm9tIFwidXNlLWltYWdlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZvbmRvU2VjY2lvbih7XG4gIHNlY2Npb24sXG4gIG9mZnNldFksXG4gIGFsdHVyYVB4LFxuICBvblNlbGVjdCxcbiAgb25VcGRhdGVGb25kb09mZnNldCxcbiAgaXNNb2JpbGUgPSBmYWxzZSxcbiAgbW9iaWxlQmFja2dyb3VuZEVkaXRFbmFibGVkID0gZmFsc2UsXG4gIG9uQmFja2dyb3VuZEltYWdlU3RhdHVzQ2hhbmdlLFxufSkge1xuICBjb25zdCBbZm9uZG9JbWFnZSwgZm9uZG9JbWFnZVN0YXR1c10gPSB1c2VJbWFnZShzZWNjaW9uLmZvbmRvSW1hZ2VuLCBcImFub255bW91c1wiKTtcbiAgY29uc3QgW21vZG9Nb3ZlckZvbmRvLCBzZXRNb2RvTW92ZXJGb25kb10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGltYWdlblJlZiA9IHVzZVJlZihudWxsKTtcblxuICBjb25zdCBhbGxvd0JhY2tncm91bmRFZGl0ID0gIWlzTW9iaWxlIHx8IG1vYmlsZUJhY2tncm91bmRFZGl0RW5hYmxlZDtcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JTaXplID0gaXNNb2JpbGUgPyAyNCA6IDE0O1xuICBjb25zdCB0cmFuc2Zvcm1lclBhZGRpbmcgPSBpc01vYmlsZSA/IDEwIDogNDtcbiAgY29uc3QgdHJhbnNmb3JtZXJCb3JkZXJTdHJva2VXaWR0aCA9IGlzTW9iaWxlID8gMS41IDogMTtcbiAgY29uc3QgdHJhbnNmb3JtZXJBbmNob3JTdHJva2VXaWR0aCA9IGlzTW9iaWxlID8gMi41IDogMjtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygb25CYWNrZ3JvdW5kSW1hZ2VTdGF0dXNDaGFuZ2UgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuO1xuXG4gICAgY29uc3QgaGFzQmFja2dyb3VuZEltYWdlID1cbiAgICAgIHR5cGVvZiBzZWNjaW9uPy5mb25kb0ltYWdlbiA9PT0gXCJzdHJpbmdcIiAmJiBzZWNjaW9uLmZvbmRvSW1hZ2VuLnRyaW0oKS5sZW5ndGggPiAwO1xuXG4gICAgY29uc3Qgc3RhdHVzID0gIWhhc0JhY2tncm91bmRJbWFnZVxuICAgICAgPyBcIm5vbmVcIlxuICAgICAgOiBmb25kb0ltYWdlU3RhdHVzID09PSBcImxvYWRlZFwiIHx8IGZvbmRvSW1hZ2VcbiAgICAgICAgPyBcImxvYWRlZFwiXG4gICAgICAgIDogZm9uZG9JbWFnZVN0YXR1cyA9PT0gXCJmYWlsZWRcIlxuICAgICAgICAgID8gXCJmYWlsZWRcIlxuICAgICAgICAgIDogXCJsb2FkaW5nXCI7XG5cbiAgICBvbkJhY2tncm91bmRJbWFnZVN0YXR1c0NoYW5nZSh7XG4gICAgICBzZWN0aW9uSWQ6IHNlY2Npb24uaWQsXG4gICAgICBpbWFnZVVybDogaGFzQmFja2dyb3VuZEltYWdlID8gc2VjY2lvbi5mb25kb0ltYWdlbiA6IFwiXCIsXG4gICAgICBoYXNCYWNrZ3JvdW5kSW1hZ2UsXG4gICAgICBzdGF0dXMsXG4gICAgfSk7XG4gIH0sIFtcbiAgICBmb25kb0ltYWdlLFxuICAgIGZvbmRvSW1hZ2VTdGF0dXMsXG4gICAgb25CYWNrZ3JvdW5kSW1hZ2VTdGF0dXNDaGFuZ2UsXG4gICAgc2VjY2lvbj8uZm9uZG9JbWFnZW4sXG4gICAgc2VjY2lvbj8uaWQsXG4gIF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFtb2RvTW92ZXJGb25kbykgcmV0dXJuO1xuXG4gICAgY29uc3QgaGFuZGxlQ2xpY2tHbG9iYWwgPSAoZSkgPT4ge1xuICAgICAgY29uc3Qgc3RhZ2UgPSBpbWFnZW5SZWYuY3VycmVudD8uZ2V0U3RhZ2U/LigpO1xuICAgICAgaWYgKCFzdGFnZSkgcmV0dXJuO1xuICAgICAgY29uc3QgY29udGFpbmVyID0gc3RhZ2UuY29udGFpbmVyKCk7XG4gICAgICBpZiAoIWNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgc2V0TW9kb01vdmVyRm9uZG8oZmFsc2UpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVDbGlja0dsb2JhbCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZUNsaWNrR2xvYmFsLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZUNsaWNrR2xvYmFsKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBoYW5kbGVDbGlja0dsb2JhbCk7XG4gICAgfTtcbiAgfSwgW21vZG9Nb3ZlckZvbmRvXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBvbkFjdGl2YXRlID0gKGUpID0+IHtcbiAgICAgIGlmIChlPy5kZXRhaWw/LnNlY3Rpb25JZCAhPT0gc2VjY2lvbi5pZCkgcmV0dXJuO1xuICAgICAgc2V0TW9kb01vdmVyRm9uZG8odHJ1ZSk7XG4gICAgICB0cnkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwibW92ZVwiO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH07XG5cbiAgICBjb25zdCBvbkV4aXQgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0U2VjdGlvbklkID0gZT8uZGV0YWlsPy5zZWN0aW9uSWQ7XG4gICAgICBpZiAodGFyZ2V0U2VjdGlvbklkICYmIHRhcmdldFNlY3Rpb25JZCAhPT0gc2VjY2lvbi5pZCkgcmV0dXJuO1xuICAgICAgc2V0TW9kb01vdmVyRm9uZG8oZmFsc2UpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICAgIH0gY2F0Y2gge31cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhY3RpdmFyLW1vZG8tbW92ZXItZm9uZG9cIiwgb25BY3RpdmF0ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzYWxpci1tb2RvLW1vdmVyLWZvbmRvXCIsIG9uRXhpdCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWN0aXZhci1tb2RvLW1vdmVyLWZvbmRvXCIsIG9uQWN0aXZhdGUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzYWxpci1tb2RvLW1vdmVyLWZvbmRvXCIsIG9uRXhpdCk7XG4gICAgfTtcbiAgfSwgW3NlY2Npb24uaWRdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhbGxvd0JhY2tncm91bmRFZGl0KSByZXR1cm47XG4gICAgaWYgKCFtb2RvTW92ZXJGb25kbykgcmV0dXJuO1xuICAgIHNldE1vZG9Nb3ZlckZvbmRvKGZhbHNlKTtcbiAgfSwgW2FsbG93QmFja2dyb3VuZEVkaXQsIG1vZG9Nb3ZlckZvbmRvXSk7XG5cbiAgaWYgKCFzZWNjaW9uLmZvbmRvSW1hZ2VuIHx8ICFmb25kb0ltYWdlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxSZWN0XG4gICAgICAgIGlkPXtzZWNjaW9uLmlkfVxuICAgICAgICB4PXswfVxuICAgICAgICB5PXtvZmZzZXRZfVxuICAgICAgICB3aWR0aD17ODAwfVxuICAgICAgICBoZWlnaHQ9e2FsdHVyYVB4fVxuICAgICAgICBmaWxsPXtzZWNjaW9uLmZvbmRvIHx8IFwiI2YwZjBmMFwifVxuICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgIHByZXZlbnREZWZhdWx0PXtmYWxzZX1cbiAgICAgICAgb25DbGljaz17b25TZWxlY3R9XG4gICAgICAgIG9uVGFwPXtvblNlbGVjdH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGNhbnZhc1dpZHRoID0gODAwO1xuICBjb25zdCBjYW52YXNIZWlnaHQgPSBhbHR1cmFQeDtcbiAgY29uc3QgaW1hZ2VXaWR0aCA9IGZvbmRvSW1hZ2Uud2lkdGg7XG4gIGNvbnN0IGltYWdlSGVpZ2h0ID0gZm9uZG9JbWFnZS5oZWlnaHQ7XG5cbiAgY29uc3Qgc2NhbGVYID0gY2FudmFzV2lkdGggLyBpbWFnZVdpZHRoO1xuICBjb25zdCBzY2FsZVkgPSBjYW52YXNIZWlnaHQgLyBpbWFnZUhlaWdodDtcbiAgY29uc3Qgc2NhbGUgPSBNYXRoLm1heChzY2FsZVgsIHNjYWxlWSk7XG5cbiAgY29uc3Qgc2NhbGVkV2lkdGggPSBpbWFnZVdpZHRoICogc2NhbGU7XG4gIGNvbnN0IHNjYWxlZEhlaWdodCA9IGltYWdlSGVpZ2h0ICogc2NhbGU7XG5cbiAgY29uc3Qgb2Zmc2V0WENlbnRyYWRvID0gKGNhbnZhc1dpZHRoIC0gc2NhbGVkV2lkdGgpIC8gMjtcbiAgY29uc3Qgb2Zmc2V0WUNlbnRyYWRvID0gKGNhbnZhc0hlaWdodCAtIHNjYWxlZEhlaWdodCkgLyAyO1xuXG4gIGNvbnN0IG9mZnNldFhGaW5hbCA9IG9mZnNldFhDZW50cmFkbyArIChzZWNjaW9uLmZvbmRvSW1hZ2VuT2Zmc2V0WCB8fCAwKTtcbiAgY29uc3Qgb2Zmc2V0WUZpbmFsID0gb2Zmc2V0WUNlbnRyYWRvICsgKHNlY2Npb24uZm9uZG9JbWFnZW5PZmZzZXRZIHx8IDApO1xuXG4gIHJldHVybiAoXG4gICAgPEdyb3VwIGlkPXtzZWNjaW9uLmlkfT5cbiAgICAgIDxSZWN0XG4gICAgICAgIGlkPXtzZWNjaW9uLmlkfVxuICAgICAgICB4PXswfVxuICAgICAgICB5PXtvZmZzZXRZfVxuICAgICAgICB3aWR0aD17ODAwfVxuICAgICAgICBoZWlnaHQ9e2FsdHVyYVB4fVxuICAgICAgICBmaWxsPXtzZWNjaW9uLmZvbmRvIHx8IFwiI2YwZjBmMFwifVxuICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgIHByZXZlbnREZWZhdWx0PXtmYWxzZX1cbiAgICAgICAgb25DbGljaz17b25TZWxlY3R9XG4gICAgICAgIG9uVGFwPXtvblNlbGVjdH1cbiAgICAgIC8+XG5cbiAgICAgIHttb2RvTW92ZXJGb25kbyAmJiAoXG4gICAgICAgIDxSZWN0XG4gICAgICAgICAgeD17LTIwMH1cbiAgICAgICAgICB5PXtvZmZzZXRZIC0gMjAwfVxuICAgICAgICAgIHdpZHRoPXsxMjAwfVxuICAgICAgICAgIGhlaWdodD17YWx0dXJhUHggKyA0MDB9XG4gICAgICAgICAgZmlsbD1cInJnYmEoMCwwLDAsMC4wNSlcIlxuICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XG4gICAgICAgIC8+XG4gICAgICApfVxuXG4gICAgICA8R3JvdXBcbiAgICAgICAgY2xpcFg9e21vZG9Nb3ZlckZvbmRvID8gdW5kZWZpbmVkIDogMH1cbiAgICAgICAgY2xpcFk9e21vZG9Nb3ZlckZvbmRvID8gdW5kZWZpbmVkIDogb2Zmc2V0WX1cbiAgICAgICAgY2xpcFdpZHRoPXttb2RvTW92ZXJGb25kbyA/IHVuZGVmaW5lZCA6IDgwMH1cbiAgICAgICAgY2xpcEhlaWdodD17bW9kb01vdmVyRm9uZG8gPyB1bmRlZmluZWQgOiBhbHR1cmFQeH1cbiAgICAgID5cbiAgICAgICAgPEtvbnZhSW1hZ2VcbiAgICAgICAgICByZWY9e2ltYWdlblJlZn1cbiAgICAgICAgICBpbWFnZT17Zm9uZG9JbWFnZX1cbiAgICAgICAgICB4PXtvZmZzZXRYRmluYWx9XG4gICAgICAgICAgeT17b2Zmc2V0WSArIG9mZnNldFlGaW5hbH1cbiAgICAgICAgICB3aWR0aD17c2NhbGVkV2lkdGh9XG4gICAgICAgICAgaGVpZ2h0PXtzY2FsZWRIZWlnaHR9XG4gICAgICAgICAgZHJhZ2dhYmxlPXthbGxvd0JhY2tncm91bmRFZGl0ICYmIG1vZG9Nb3ZlckZvbmRvfVxuICAgICAgICAgIG9wYWNpdHk9e21vZG9Nb3ZlckZvbmRvID8gMC45IDogMX1cbiAgICAgICAgICBzaGFkb3dDb2xvcj17bW9kb01vdmVyRm9uZG8gPyBcIiM3NzNkYmVcIiA6IFwidHJhbnNwYXJlbnRcIn1cbiAgICAgICAgICBzaGFkb3dCbHVyPXttb2RvTW92ZXJGb25kbyA/IDEwIDogMH1cbiAgICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgICAgcHJldmVudERlZmF1bHQ9e2FsbG93QmFja2dyb3VuZEVkaXQgJiYgbW9kb01vdmVyRm9uZG99XG4gICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgIGlmIChtb2RvTW92ZXJGb25kbykge1xuICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uU2VsZWN0Py4oKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uVGFwPXsoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKG1vZG9Nb3ZlckZvbmRvKSB7XG4gICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKG1vZG9Nb3ZlckZvbmRvKSBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBvbkRibENsaWNrPXthbGxvd0JhY2tncm91bmRFZGl0ID8gKGUpID0+IHtcbiAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHNldE1vZG9Nb3ZlckZvbmRvKHRydWUpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcIm1vdmVcIjtcbiAgICAgICAgICB9IDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uRGJsVGFwPXthbGxvd0JhY2tncm91bmRFZGl0ID8gKGUpID0+IHtcbiAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHNldE1vZG9Nb3ZlckZvbmRvKHRydWUpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcIm1vdmVcIjtcbiAgICAgICAgICB9IDogdW5kZWZpbmVkfVxuICAgICAgICAgIG9uRHJhZ01vdmU9eyhlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBudWV2YVggPSBub2RlLngoKTtcbiAgICAgICAgICAgIGNvbnN0IG51ZXZhWSA9IG5vZGUueSgpIC0gb2Zmc2V0WTtcbiAgICAgICAgICAgIGNvbnN0IG51ZXZvT2Zmc2V0WCA9IG51ZXZhWCAtIG9mZnNldFhDZW50cmFkbztcbiAgICAgICAgICAgIGNvbnN0IG51ZXZvT2Zmc2V0WSA9IG51ZXZhWSAtIG9mZnNldFlDZW50cmFkbztcbiAgICAgICAgICAgIG9uVXBkYXRlRm9uZG9PZmZzZXQ/LihzZWNjaW9uLmlkLCB7IG9mZnNldFg6IG51ZXZvT2Zmc2V0WCwgb2Zmc2V0WTogbnVldm9PZmZzZXRZIH0sIHRydWUpO1xuICAgICAgICAgIH19XG4gICAgICAgICAgb25EcmFnRW5kPXsoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgbnVldmFYID0gbm9kZS54KCk7XG4gICAgICAgICAgICBjb25zdCBudWV2YVkgPSBub2RlLnkoKSAtIG9mZnNldFk7XG4gICAgICAgICAgICBjb25zdCBudWV2b09mZnNldFggPSBudWV2YVggLSBvZmZzZXRYQ2VudHJhZG87XG4gICAgICAgICAgICBjb25zdCBudWV2b09mZnNldFkgPSBudWV2YVkgLSBvZmZzZXRZQ2VudHJhZG87XG4gICAgICAgICAgICBvblVwZGF0ZUZvbmRvT2Zmc2V0Py4oc2VjY2lvbi5pZCwgeyBvZmZzZXRYOiBudWV2b09mZnNldFgsIG9mZnNldFk6IG51ZXZvT2Zmc2V0WSB9LCBmYWxzZSk7XG5cbiAgICAgICAgICAgIHNldE1vZG9Nb3ZlckZvbmRvKGZhbHNlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cblxuICAgICAgICB7YWxsb3dCYWNrZ3JvdW5kRWRpdCAmJiBtb2RvTW92ZXJGb25kbyAmJiAoXG4gICAgICAgICAgPFRyYW5zZm9ybWVyXG4gICAgICAgICAgICBub2Rlcz17W2ltYWdlblJlZi5jdXJyZW50XX1cbiAgICAgICAgICAgIGVuYWJsZWRBbmNob3JzPXtbXCJib3R0b20tcmlnaHRcIl19XG4gICAgICAgICAgICBib3JkZXJTdHJva2U9XCIjNzczZGJlXCJcbiAgICAgICAgICAgIGJvcmRlclN0cm9rZVdpZHRoPXt0cmFuc2Zvcm1lckJvcmRlclN0cm9rZVdpZHRofVxuICAgICAgICAgICAgcGFkZGluZz17dHJhbnNmb3JtZXJQYWRkaW5nfVxuICAgICAgICAgICAgYW5jaG9yRmlsbD1cIiM3NzNkYmVcIlxuICAgICAgICAgICAgYW5jaG9yU3Ryb2tlPVwiI2ZmZmZmZlwiXG4gICAgICAgICAgICBhbmNob3JTdHJva2VXaWR0aD17dHJhbnNmb3JtZXJBbmNob3JTdHJva2VXaWR0aH1cbiAgICAgICAgICAgIGFuY2hvclNpemU9e3RyYW5zZm9ybWVyQW5jaG9yU2l6ZX1cbiAgICAgICAgICAgIGFuY2hvckNvcm5lclJhZGl1cz17OTk5fVxuICAgICAgICAgICAga2VlcFJhdGlvPXt0cnVlfVxuICAgICAgICAgICAgb25UcmFuc2Zvcm09eygpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGltYWdlblJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgY29uc3Qgc3ggPSBub2RlLnNjYWxlWCgpO1xuICAgICAgICAgICAgICBjb25zdCBzeSA9IG5vZGUuc2NhbGVZKCk7XG4gICAgICAgICAgICAgIG5vZGUud2lkdGgobm9kZS53aWR0aCgpICogc3gpO1xuICAgICAgICAgICAgICBub2RlLmhlaWdodChub2RlLmhlaWdodCgpICogc3kpO1xuICAgICAgICAgICAgICBub2RlLnNjYWxlWCgxKTtcbiAgICAgICAgICAgICAgbm9kZS5zY2FsZVkoMSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25UcmFuc2Zvcm1FbmQ9eygpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IGltYWdlblJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICBpZiAoIW5vZGUpIHJldHVybjtcbiAgICAgICAgICAgICAgY29uc3QgbnVldmFYID0gbm9kZS54KCk7XG4gICAgICAgICAgICAgIGNvbnN0IG51ZXZhWSA9IG5vZGUueSgpIC0gb2Zmc2V0WTtcbiAgICAgICAgICAgICAgY29uc3QgbnVldm9PZmZzZXRYID0gbnVldmFYIC0gb2Zmc2V0WENlbnRyYWRvO1xuICAgICAgICAgICAgICBjb25zdCBudWV2b09mZnNldFkgPSBudWV2YVkgLSBvZmZzZXRZQ2VudHJhZG87XG4gICAgICAgICAgICAgIG9uVXBkYXRlRm9uZG9PZmZzZXQ/LihzZWNjaW9uLmlkLCB7IG9mZnNldFg6IG51ZXZvT2Zmc2V0WCwgb2Zmc2V0WTogbnVldm9PZmZzZXRZIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvR3JvdXA+XG4gICAgPC9Hcm91cD5cbiAgKTtcbn1cclxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiR3JvdXAiLCJSZWN0IiwiVHJhbnNmb3JtZXIiLCJJbWFnZSIsIktvbnZhSW1hZ2UiLCJ1c2VJbWFnZSIsIkZvbmRvU2VjY2lvbiIsInNlY2Npb24iLCJvZmZzZXRZIiwiYWx0dXJhUHgiLCJvblNlbGVjdCIsIm9uVXBkYXRlRm9uZG9PZmZzZXQiLCJpc01vYmlsZSIsIm1vYmlsZUJhY2tncm91bmRFZGl0RW5hYmxlZCIsIm9uQmFja2dyb3VuZEltYWdlU3RhdHVzQ2hhbmdlIiwiZm9uZG9JbWFnZSIsImZvbmRvSW1hZ2VTdGF0dXMiLCJmb25kb0ltYWdlbiIsIm1vZG9Nb3ZlckZvbmRvIiwic2V0TW9kb01vdmVyRm9uZG8iLCJpbWFnZW5SZWYiLCJhbGxvd0JhY2tncm91bmRFZGl0IiwidHJhbnNmb3JtZXJBbmNob3JTaXplIiwidHJhbnNmb3JtZXJQYWRkaW5nIiwidHJhbnNmb3JtZXJCb3JkZXJTdHJva2VXaWR0aCIsInRyYW5zZm9ybWVyQW5jaG9yU3Ryb2tlV2lkdGgiLCJoYXNCYWNrZ3JvdW5kSW1hZ2UiLCJ0cmltIiwibGVuZ3RoIiwic3RhdHVzIiwic2VjdGlvbklkIiwiaWQiLCJpbWFnZVVybCIsImhhbmRsZUNsaWNrR2xvYmFsIiwiZSIsInN0YWdlIiwiY3VycmVudCIsImdldFN0YWdlIiwiY29udGFpbmVyIiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsImN1cnNvciIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uQWN0aXZhdGUiLCJkZXRhaWwiLCJvbkV4aXQiLCJ0YXJnZXRTZWN0aW9uSWQiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiZmlsbCIsImZvbmRvIiwibGlzdGVuaW5nIiwicHJldmVudERlZmF1bHQiLCJvbkNsaWNrIiwib25UYXAiLCJjYW52YXNXaWR0aCIsImNhbnZhc0hlaWdodCIsImltYWdlV2lkdGgiLCJpbWFnZUhlaWdodCIsInNjYWxlWCIsInNjYWxlWSIsInNjYWxlIiwiTWF0aCIsIm1heCIsInNjYWxlZFdpZHRoIiwic2NhbGVkSGVpZ2h0Iiwib2Zmc2V0WENlbnRyYWRvIiwib2Zmc2V0WUNlbnRyYWRvIiwib2Zmc2V0WEZpbmFsIiwiZm9uZG9JbWFnZW5PZmZzZXRYIiwib2Zmc2V0WUZpbmFsIiwiZm9uZG9JbWFnZW5PZmZzZXRZIiwiY2xpcFgiLCJ1bmRlZmluZWQiLCJjbGlwWSIsImNsaXBXaWR0aCIsImNsaXBIZWlnaHQiLCJyZWYiLCJpbWFnZSIsImRyYWdnYWJsZSIsIm9wYWNpdHkiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJjYW5jZWxCdWJibGUiLCJvbk1vdXNlRG93biIsIm9uRGJsQ2xpY2siLCJvbkRibFRhcCIsIm9uRHJhZ01vdmUiLCJub2RlIiwibnVldmFYIiwibnVldmFZIiwibnVldm9PZmZzZXRYIiwibnVldm9PZmZzZXRZIiwib2Zmc2V0WCIsIm9uRHJhZ0VuZCIsIm5vZGVzIiwiZW5hYmxlZEFuY2hvcnMiLCJib3JkZXJTdHJva2UiLCJib3JkZXJTdHJva2VXaWR0aCIsInBhZGRpbmciLCJhbmNob3JGaWxsIiwiYW5jaG9yU3Ryb2tlIiwiYW5jaG9yU3Ryb2tlV2lkdGgiLCJhbmNob3JTaXplIiwiYW5jaG9yQ29ybmVyUmFkaXVzIiwia2VlcFJhdGlvIiwib25UcmFuc2Zvcm0iLCJzeCIsInN5Iiwib25UcmFuc2Zvcm1FbmQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/FondoSeccion.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/GaleriaKonva.jsx":
/*!************************************************!*\
  !*** ./src/components/editor/GaleriaKonva.jsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GaleriaKonva)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! use-image */ \"use-image\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _utils_calcGrid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/calcGrid */ \"(pages-dir-node)/./src/utils/calcGrid.js\");\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n// src/components/editor/GaleriaKonva.jsx\n//\n// Galeria de imagenes como UN solo objeto en Konva.\n// - Calcula su propio offset Y por seccion (calcularOffsetY).\n// - Renderiza las celdas en base a calcGalleryLayout.\n// - Permite seleccionar la galeria y una celda (onSelect + onPickCell/setCeldaGaleriaActiva).\n// - Arrastre del grupo actualiza seccion/posicion (determinarNuevaSeccion).\n//\n// Dependencias de frontend: utils/layout (NO usar funciones de functions/).\n// ----------------------------------------------------------------------\n\n\n\n\n\n\nconst DRAG_THRESHOLD_PX = 4;\nfunction getClientPoint(evt) {\n    if (!evt) return null;\n    const touch = evt.touches?.[0] || evt.changedTouches?.[0] || null;\n    const x = Number.isFinite(touch?.clientX) ? touch.clientX : evt.clientX;\n    const y = Number.isFinite(touch?.clientY) ? touch.clientY : evt.clientY;\n    if (!Number.isFinite(x) || !Number.isFinite(y)) return null;\n    return {\n        x,\n        y\n    };\n}\nfunction ImagenCelda({ src, fit = \"cover\", w, h }) {\n    const [img] = use_image__WEBPACK_IMPORTED_MODULE_3___default()(src, \"anonymous\");\n    if (!img) return null;\n    const escContain = Math.min(w / img.width, h / img.height);\n    const escCover = Math.max(w / img.width, h / img.height);\n    const esc = fit === \"contain\" ? escContain : escCover;\n    const iw = img.width * esc;\n    const ih = img.height * esc;\n    const ix = (w - iw) / 2;\n    const iy = (h - ih) / 2;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Image, {\n        image: img,\n        x: ix,\n        y: iy,\n        width: iw,\n        height: ih,\n        listening: false\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n        lineNumber: 49,\n        columnNumber: 5\n    }, this);\n}\nfunction GaleriaKonva({ obj, registerRef, onHover, isSelected, onSelect, onChange, onDragStartPersonalizado, onDragMovePersonalizado, onDragEndPersonalizado, celdaGaleriaActiva, onPickCell, setCeldaGaleriaActiva, seccionesOrdenadas = [], altoCanvas = 0 }) {\n    const [hoveredCell, setHoveredCell] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const rootRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cleanupGlobalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const pressRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        active: false,\n        movedEnough: false,\n        startedDrag: false,\n        suppressClick: false,\n        allowDrag: false,\n        startClientX: 0,\n        startClientY: 0,\n        startNodeX: 0,\n        startNodeY: 0\n    });\n    const setRootRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GaleriaKonva.useCallback[setRootRef]\": (node)=>{\n            rootRef.current = node || null;\n            registerRef?.(obj.id, node || null);\n        }\n    }[\"GaleriaKonva.useCallback[setRootRef]\"], [\n        obj.id,\n        registerRef\n    ]);\n    const indexSeccion = seccionesOrdenadas.findIndex((s)=>s.id === obj.seccionId);\n    const offsetY = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_5__.calcularOffsetY)(seccionesOrdenadas, indexSeccion);\n    const toNum = (v, d = 0)=>Number.isFinite(+v) ? +v : d;\n    const radius = Math.max(0, toNum(obj.radius, 0));\n    const gap = Math.max(0, toNum(obj.gap, 0));\n    const rows = Math.max(1, toNum(obj.rows, 1));\n    const cols = Math.max(1, toNum(obj.cols, 1));\n    const width = Math.max(1, toNum(obj.width, 400));\n    const cellRatio = obj.ratio === \"4:3\" ? 3 / 4 : obj.ratio === \"16:9\" ? 9 / 16 : 1;\n    const { rects, totalHeight } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"GaleriaKonva.useMemo\": ()=>{\n            try {\n                return (0,_utils_calcGrid__WEBPACK_IMPORTED_MODULE_4__.calcGalleryLayout)({\n                    width,\n                    rows,\n                    cols,\n                    gap,\n                    cellRatio\n                });\n            } catch  {\n                return {\n                    rects: [],\n                    totalHeight: 0\n                };\n            }\n        }\n    }[\"GaleriaKonva.useMemo\"], [\n        width,\n        rows,\n        cols,\n        gap,\n        cellRatio\n    ]);\n    const safeTotalHeight = Math.max(1, totalHeight);\n    const isRemoveButtonTarget = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GaleriaKonva.useCallback[isRemoveButtonTarget]\": (target)=>{\n            const targetId = typeof target?.id === \"function\" ? target.id() : target?.attrs?.id;\n            return typeof targetId === \"string\" && targetId.startsWith(`btn-${obj.id}-`);\n        }\n    }[\"GaleriaKonva.useCallback[isRemoveButtonTarget]\"], [\n        obj.id\n    ]);\n    const cleanupGlobal = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GaleriaKonva.useCallback[cleanupGlobal]\": ()=>{\n            if (!cleanupGlobalRef.current) return;\n            try {\n                cleanupGlobalRef.current();\n            } finally{\n                cleanupGlobalRef.current = null;\n            }\n        }\n    }[\"GaleriaKonva.useCallback[cleanupGlobal]\"], []);\n    const attachGlobalListeners = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GaleriaKonva.useCallback[attachGlobalListeners]\": ()=>{\n            cleanupGlobal();\n            const onMove = {\n                \"GaleriaKonva.useCallback[attachGlobalListeners].onMove\": (ev)=>{\n                    const press = pressRef.current;\n                    if (!press.active || press.startedDrag || !press.allowDrag) return;\n                    const point = getClientPoint(ev);\n                    if (!point) return;\n                    const dx = point.x - press.startClientX;\n                    const dy = point.y - press.startClientY;\n                    if (Math.hypot(dx, dy) < DRAG_THRESHOLD_PX) return;\n                    press.movedEnough = true;\n                    press.startedDrag = true;\n                    press.suppressClick = true;\n                    const node = rootRef.current;\n                    if (!node) return;\n                    try {\n                        node.position({\n                            x: press.startNodeX,\n                            y: press.startNodeY\n                        });\n                        node.getLayer()?.batchDraw();\n                    } catch  {}\n                    try {\n                        node.draggable(true);\n                        node.startDrag();\n                    } catch  {}\n                }\n            }[\"GaleriaKonva.useCallback[attachGlobalListeners].onMove\"];\n            const onUp = {\n                \"GaleriaKonva.useCallback[attachGlobalListeners].onUp\": ()=>{\n                    const press = pressRef.current;\n                    if (!press.active) {\n                        cleanupGlobal();\n                        return;\n                    }\n                    press.active = false;\n                    const node = rootRef.current;\n                    if (node) {\n                        if (!press.movedEnough) {\n                            try {\n                                node.position({\n                                    x: press.startNodeX,\n                                    y: press.startNodeY\n                                });\n                                node.getLayer()?.batchDraw();\n                            } catch  {}\n                        } else {\n                            try {\n                                if (node.isDragging?.()) node.stopDrag();\n                            } catch  {}\n                        }\n                        try {\n                            node.draggable(false);\n                        } catch  {}\n                    }\n                    press.movedEnough = false;\n                    press.startedDrag = false;\n                    setTimeout({\n                        \"GaleriaKonva.useCallback[attachGlobalListeners].onUp\": ()=>{\n                            pressRef.current.suppressClick = false;\n                        }\n                    }[\"GaleriaKonva.useCallback[attachGlobalListeners].onUp\"], 0);\n                    cleanupGlobal();\n                }\n            }[\"GaleriaKonva.useCallback[attachGlobalListeners].onUp\"];\n            window.addEventListener(\"mousemove\", onMove, true);\n            window.addEventListener(\"touchmove\", onMove, {\n                capture: true,\n                passive: true\n            });\n            window.addEventListener(\"mouseup\", onUp, true);\n            window.addEventListener(\"touchend\", onUp, true);\n            window.addEventListener(\"touchcancel\", onUp, true);\n            window.addEventListener(\"pointercancel\", onUp, true);\n            window.addEventListener(\"blur\", onUp, true);\n            cleanupGlobalRef.current = ({\n                \"GaleriaKonva.useCallback[attachGlobalListeners]\": ()=>{\n                    window.removeEventListener(\"mousemove\", onMove, true);\n                    window.removeEventListener(\"touchmove\", onMove, true);\n                    window.removeEventListener(\"mouseup\", onUp, true);\n                    window.removeEventListener(\"touchend\", onUp, true);\n                    window.removeEventListener(\"touchcancel\", onUp, true);\n                    window.removeEventListener(\"pointercancel\", onUp, true);\n                    window.removeEventListener(\"blur\", onUp, true);\n                }\n            })[\"GaleriaKonva.useCallback[attachGlobalListeners]\"];\n        }\n    }[\"GaleriaKonva.useCallback[attachGlobalListeners]\"], [\n        cleanupGlobal\n    ]);\n    const handlePressStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GaleriaKonva.useCallback[handlePressStart]\": (e)=>{\n            if (e) e.cancelBubble = true;\n            if (e?.evt) e.evt.cancelBubble = true;\n            const node = rootRef.current || e.currentTarget;\n            const point = getClientPoint(e?.evt);\n            if (!node || !point) return;\n            const press = pressRef.current;\n            press.active = true;\n            press.movedEnough = false;\n            press.startedDrag = false;\n            press.suppressClick = false;\n            press.allowDrag = isSelected && !isRemoveButtonTarget(e?.target);\n            press.startClientX = point.x;\n            press.startClientY = point.y;\n            press.startNodeX = node.x();\n            press.startNodeY = node.y();\n            try {\n                node.draggable(false);\n            } catch  {}\n            attachGlobalListeners();\n        }\n    }[\"GaleriaKonva.useCallback[handlePressStart]\"], [\n        attachGlobalListeners,\n        isRemoveButtonTarget,\n        isSelected\n    ]);\n    const handleRootClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"GaleriaKonva.useCallback[handleRootClick]\": (e)=>{\n            if (e && e.evt) e.evt.cancelBubble = true;\n            if (pressRef.current.suppressClick) return;\n            onSelect?.(obj.id, e);\n        }\n    }[\"GaleriaKonva.useCallback[handleRootClick]\"], [\n        obj.id,\n        onSelect\n    ]);\n    const seleccionarCelda = (index, evt)=>{\n        if (pressRef.current.suppressClick) return;\n        if (evt?.target?.id?.() === `btn-${obj.id}-${index}`) return;\n        if (evt) evt.cancelBubble = true;\n        if (evt?.evt) evt.evt.cancelBubble = true;\n        onSelect?.(obj.id, evt);\n        const payload = {\n            objId: obj.id,\n            index\n        };\n        onPickCell?.(payload);\n        setCeldaGaleriaActiva?.(payload);\n    };\n    const limpiarCelda = (index, evt)=>{\n        if (pressRef.current.suppressClick) return;\n        if (evt) evt.cancelBubble = true;\n        if (evt?.evt) evt.evt.cancelBubble = true;\n        const nuevasCells = [\n            ...obj.cells || []\n        ];\n        nuevasCells[index] = {\n            ...nuevasCells[index] || {},\n            mediaUrl: null\n        };\n        onChange?.(obj.id, {\n            cells: nuevasCells\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GaleriaKonva.useEffect\": ()=>({\n                \"GaleriaKonva.useEffect\": ()=>cleanupGlobal()\n            })[\"GaleriaKonva.useEffect\"]\n    }[\"GaleriaKonva.useEffect\"], [\n        cleanupGlobal\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n        x: toNum(obj.x, 0),\n        y: toNum(obj.y, 0) + offsetY,\n        id: obj.id,\n        clipX: 0,\n        clipY: 0,\n        clipWidth: width,\n        clipHeight: safeTotalHeight,\n        draggable: false,\n        ref: setRootRef,\n        onMouseEnter: ()=>{\n            if (!window._isDragging) onHover?.(obj.id);\n        },\n        onMouseLeave: ()=>{\n            setHoveredCell(null);\n            onHover?.(null);\n        },\n        onMouseDown: handlePressStart,\n        onTouchStart: handlePressStart,\n        onClick: handleRootClick,\n        onTap: handleRootClick,\n        onDragStart: (e)=>{\n            if (!isSelected) {\n                e.target.stopDrag();\n                return;\n            }\n            window._isDragging = true;\n            onDragStartPersonalizado?.(obj.id);\n        },\n        onDragMove: (e)=>{\n            onDragMovePersonalizado?.({\n                x: e.target.x(),\n                y: e.target.y()\n            }, obj.id);\n        },\n        onDragEnd: (e)=>{\n            onDragMovePersonalizado?.({\n                x: e.target.x(),\n                y: e.target.y()\n            }, obj.id);\n            const finalX = e.target.x();\n            const finalYAbs = e.target.y();\n            const { nuevaSeccion, coordenadasAjustadas } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_5__.determinarNuevaSeccion)(finalYAbs, obj.seccionId, seccionesOrdenadas);\n            if (nuevaSeccion) {\n                onChange?.(obj.id, {\n                    x: finalX,\n                    seccionId: nuevaSeccion,\n                    ...coordenadasAjustadas\n                });\n            } else {\n                const yRel = finalYAbs - offsetY;\n                onChange?.(obj.id, {\n                    x: finalX,\n                    y: yRel\n                });\n            }\n            window._isDragging = false;\n            onDragEndPersonalizado?.(obj.id);\n            e.target.draggable(false);\n            pressRef.current.active = false;\n            pressRef.current.movedEnough = false;\n            pressRef.current.startedDrag = false;\n            setTimeout(()=>{\n                pressRef.current.suppressClick = false;\n            }, 0);\n            cleanupGlobal();\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                name: \"gallery-transform-frame\",\n                x: 0,\n                y: 0,\n                width: width,\n                height: safeTotalHeight,\n                fill: \"transparent\",\n                strokeEnabled: false,\n                listening: false\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                lineNumber: 355,\n                columnNumber: 7\n            }, this),\n            rects.map((r, i)=>{\n                const cell = obj.cells?.[i] || {};\n                const bg = cell.bg || \"#f3f4f6\";\n                const mediaUrl = cell.mediaUrl || null;\n                const fit = cell.fit || \"cover\";\n                const esActiva = celdaGaleriaActiva?.objId === obj.id && celdaGaleriaActiva?.index === i;\n                const clipFunc = (ctx)=>{\n                    const w = r.width;\n                    const h = r.height;\n                    const rad = Math.min(radius, Math.min(w, h) / 2);\n                    ctx.beginPath();\n                    ctx.moveTo(rad, 0);\n                    ctx.lineTo(w - rad, 0);\n                    ctx.quadraticCurveTo(w, 0, w, rad);\n                    ctx.lineTo(w, h - rad);\n                    ctx.quadraticCurveTo(w, h, w - rad, h);\n                    ctx.lineTo(rad, h);\n                    ctx.quadraticCurveTo(0, h, 0, h - rad);\n                    ctx.lineTo(0, rad);\n                    ctx.quadraticCurveTo(0, 0, rad, 0);\n                    ctx.closePath();\n                };\n                const mostrarBotonQuitar = mediaUrl && (hoveredCell === i || esActiva);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                    x: r.x,\n                    y: r.y,\n                    onMouseEnter: ()=>setHoveredCell(i),\n                    onMouseLeave: ()=>setHoveredCell(null),\n                    onClick: (e)=>seleccionarCelda(i, e),\n                    onTap: (e)=>seleccionarCelda(i, e),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                            x: 0,\n                            y: 0,\n                            width: r.width,\n                            height: r.height,\n                            fill: \"transparent\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                            lineNumber: 405,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                            clipFunc: clipFunc,\n                            listening: true,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                    x: 0,\n                                    y: 0,\n                                    width: r.width,\n                                    height: r.height,\n                                    fill: bg\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                    lineNumber: 408,\n                                    columnNumber: 15\n                                }, this),\n                                mediaUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ImagenCelda, {\n                                    src: mediaUrl,\n                                    fit: fit,\n                                    w: r.width,\n                                    h: r.height\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                    lineNumber: 410,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                    x: 0,\n                                    y: 0,\n                                    width: r.width,\n                                    height: r.height,\n                                    cornerRadius: radius || 0,\n                                    stroke: esActiva ? \"#773dbe\" : \"#ddd\",\n                                    strokeWidth: esActiva ? 2 : 1,\n                                    dash: esActiva ? [\n                                        6,\n                                        4\n                                    ] : [],\n                                    listening: false\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                    lineNumber: 412,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                            lineNumber: 407,\n                            columnNumber: 13\n                        }, this),\n                        mostrarBotonQuitar && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                            id: `btn-${obj.id}-${i}`,\n                            x: r.width - 20,\n                            y: 0,\n                            width: 20,\n                            height: 20,\n                            listening: true,\n                            onMouseEnter: ()=>setHoveredCell(i),\n                            onClick: (e)=>limpiarCelda(i, e),\n                            onTap: (e)=>limpiarCelda(i, e),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                    width: 20,\n                                    height: 20,\n                                    fill: \"rgba(0,0,0,0.6)\",\n                                    cornerRadius: 4\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                    lineNumber: 437,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                    text: \"x\",\n                                    fontSize: 14,\n                                    fill: \"#fff\",\n                                    align: \"center\",\n                                    verticalAlign: \"middle\",\n                                    width: 20,\n                                    height: 20,\n                                    listening: false\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                                    lineNumber: 438,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                            lineNumber: 426,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, `${obj.id}-${i}`, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n                    lineNumber: 396,\n                    columnNumber: 11\n                }, this);\n            })\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\GaleriaKonva.jsx\",\n        lineNumber: 292,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9HYWxlcmlhS29udmEuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEseUNBQXlDO0FBQ3pDLEVBQUU7QUFDRixvREFBb0Q7QUFDcEQsOERBQThEO0FBQzlELHNEQUFzRDtBQUN0RCw4RkFBOEY7QUFDOUYsNEVBQTRFO0FBQzVFLEVBQUU7QUFDRiw0RUFBNEU7QUFDNUUseUVBQXlFOztBQUVRO0FBQ0M7QUFDakQ7QUFDb0I7QUFDb0I7QUFFekUsTUFBTWdCLG9CQUFvQjtBQUUxQixTQUFTQyxlQUFlQyxHQUFHO0lBQ3pCLElBQUksQ0FBQ0EsS0FBSyxPQUFPO0lBRWpCLE1BQU1DLFFBQ0pELElBQUlFLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFDaEJGLElBQUlHLGNBQWMsRUFBRSxDQUFDLEVBQUUsSUFDdkI7SUFFRixNQUFNQyxJQUFJQyxPQUFPQyxRQUFRLENBQUNMLE9BQU9NLFdBQVdOLE1BQU1NLE9BQU8sR0FBR1AsSUFBSU8sT0FBTztJQUN2RSxNQUFNQyxJQUFJSCxPQUFPQyxRQUFRLENBQUNMLE9BQU9RLFdBQVdSLE1BQU1RLE9BQU8sR0FBR1QsSUFBSVMsT0FBTztJQUV2RSxJQUFJLENBQUNKLE9BQU9DLFFBQVEsQ0FBQ0YsTUFBTSxDQUFDQyxPQUFPQyxRQUFRLENBQUNFLElBQUksT0FBTztJQUN2RCxPQUFPO1FBQUVKO1FBQUdJO0lBQUU7QUFDaEI7QUFFQSxTQUFTRSxZQUFZLEVBQUVDLEdBQUcsRUFBRUMsTUFBTSxPQUFPLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFO0lBQy9DLE1BQU0sQ0FBQ0MsSUFBSSxHQUFHckIsZ0RBQVFBLENBQUNpQixLQUFLO0lBQzVCLElBQUksQ0FBQ0ksS0FBSyxPQUFPO0lBRWpCLE1BQU1DLGFBQWFDLEtBQUtDLEdBQUcsQ0FBQ0wsSUFBSUUsSUFBSUksS0FBSyxFQUFFTCxJQUFJQyxJQUFJSyxNQUFNO0lBQ3pELE1BQU1DLFdBQVdKLEtBQUtLLEdBQUcsQ0FBQ1QsSUFBSUUsSUFBSUksS0FBSyxFQUFFTCxJQUFJQyxJQUFJSyxNQUFNO0lBQ3ZELE1BQU1HLE1BQU1YLFFBQVEsWUFBWUksYUFBYUs7SUFFN0MsTUFBTUcsS0FBS1QsSUFBSUksS0FBSyxHQUFHSTtJQUN2QixNQUFNRSxLQUFLVixJQUFJSyxNQUFNLEdBQUdHO0lBQ3hCLE1BQU1HLEtBQUssQ0FBQ2IsSUFBSVcsRUFBQyxJQUFLO0lBQ3RCLE1BQU1HLEtBQUssQ0FBQ2IsSUFBSVcsRUFBQyxJQUFLO0lBRXRCLHFCQUNFLDhEQUFDbEMsOENBQVVBO1FBQ1RxQyxPQUFPYjtRQUNQWCxHQUFHc0I7UUFDSGxCLEdBQUdtQjtRQUNIUixPQUFPSztRQUNQSixRQUFRSztRQUNSSSxXQUFXOzs7Ozs7QUFHakI7QUFFZSxTQUFTQyxhQUFhLEVBQ25DQyxHQUFHLEVBQ0hDLFdBQVcsRUFDWEMsT0FBTyxFQUNQQyxVQUFVLEVBQ1ZDLFFBQVEsRUFDUkMsUUFBUSxFQUNSQyx3QkFBd0IsRUFDeEJDLHVCQUF1QixFQUN2QkMsc0JBQXNCLEVBQ3RCQyxrQkFBa0IsRUFDbEJDLFVBQVUsRUFDVkMscUJBQXFCLEVBQ3JCQyxxQkFBcUIsRUFBRSxFQUN2QkMsYUFBYSxDQUFDLEVBQ2Y7SUFDQyxNQUFNLENBQUNDLGFBQWFDLGVBQWUsR0FBRzNELCtDQUFRQSxDQUFDO0lBQy9DLE1BQU00RCxVQUFVN0QsNkNBQU1BLENBQUM7SUFDdkIsTUFBTThELG1CQUFtQjlELDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU0rRCxXQUFXL0QsNkNBQU1BLENBQUM7UUFDdEJnRSxRQUFRO1FBQ1JDLGFBQWE7UUFDYkMsYUFBYTtRQUNiQyxlQUFlO1FBQ2ZDLFdBQVc7UUFDWEMsY0FBYztRQUNkQyxjQUFjO1FBQ2RDLFlBQVk7UUFDWkMsWUFBWTtJQUNkO0lBRUEsTUFBTUMsYUFBYTVFLGtEQUFXQTtnREFDNUIsQ0FBQzZFO1lBQ0NiLFFBQVFjLE9BQU8sR0FBR0QsUUFBUTtZQUMxQjVCLGNBQWNELElBQUkrQixFQUFFLEVBQUVGLFFBQVE7UUFDaEM7K0NBQ0E7UUFBQzdCLElBQUkrQixFQUFFO1FBQUU5QjtLQUFZO0lBR3ZCLE1BQU0rQixlQUFlcEIsbUJBQW1CcUIsU0FBUyxDQUFDLENBQUNDLElBQU1BLEVBQUVILEVBQUUsS0FBSy9CLElBQUltQyxTQUFTO0lBQy9FLE1BQU1DLFVBQVV2RSw4REFBZUEsQ0FBQytDLG9CQUFvQm9CO0lBRXBELE1BQU1LLFFBQVEsQ0FBQ0MsR0FBR0MsSUFBSSxDQUFDLEdBQU1qRSxPQUFPQyxRQUFRLENBQUMsQ0FBQytELEtBQUssQ0FBQ0EsSUFBSUM7SUFDeEQsTUFBTUMsU0FBU3RELEtBQUtLLEdBQUcsQ0FBQyxHQUFHOEMsTUFBTXJDLElBQUl3QyxNQUFNLEVBQUU7SUFDN0MsTUFBTUMsTUFBTXZELEtBQUtLLEdBQUcsQ0FBQyxHQUFHOEMsTUFBTXJDLElBQUl5QyxHQUFHLEVBQUU7SUFDdkMsTUFBTUMsT0FBT3hELEtBQUtLLEdBQUcsQ0FBQyxHQUFHOEMsTUFBTXJDLElBQUkwQyxJQUFJLEVBQUU7SUFDekMsTUFBTUMsT0FBT3pELEtBQUtLLEdBQUcsQ0FBQyxHQUFHOEMsTUFBTXJDLElBQUkyQyxJQUFJLEVBQUU7SUFDekMsTUFBTXZELFFBQVFGLEtBQUtLLEdBQUcsQ0FBQyxHQUFHOEMsTUFBTXJDLElBQUlaLEtBQUssRUFBRTtJQUUzQyxNQUFNd0QsWUFDSjVDLElBQUk2QyxLQUFLLEtBQUssUUFBUSxJQUFJLElBQ3hCN0MsSUFBSTZDLEtBQUssS0FBSyxTQUFTLElBQUksS0FDekI7SUFFTixNQUFNLEVBQUVDLEtBQUssRUFBRUMsV0FBVyxFQUFFLEdBQUc3Riw4Q0FBT0E7Z0NBQUM7WUFDckMsSUFBSTtnQkFDRixPQUFPVSxrRUFBaUJBLENBQUM7b0JBQUV3QjtvQkFBT3NEO29CQUFNQztvQkFBTUY7b0JBQUtHO2dCQUFVO1lBQy9ELEVBQUUsT0FBTTtnQkFDTixPQUFPO29CQUFFRSxPQUFPLEVBQUU7b0JBQUVDLGFBQWE7Z0JBQUU7WUFDckM7UUFDRjsrQkFBRztRQUFDM0Q7UUFBT3NEO1FBQU1DO1FBQU1GO1FBQUtHO0tBQVU7SUFFdEMsTUFBTUksa0JBQWtCOUQsS0FBS0ssR0FBRyxDQUFDLEdBQUd3RDtJQUVwQyxNQUFNRSx1QkFBdUJqRyxrREFBV0E7MERBQ3RDLENBQUNrRztZQUNDLE1BQU1DLFdBQ0osT0FBT0QsUUFBUW5CLE9BQU8sYUFDbEJtQixPQUFPbkIsRUFBRSxLQUNUbUIsUUFBUUUsT0FBT3JCO1lBQ3JCLE9BQU8sT0FBT29CLGFBQWEsWUFBWUEsU0FBU0UsVUFBVSxDQUFDLENBQUMsSUFBSSxFQUFFckQsSUFBSStCLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0U7eURBQ0E7UUFBQy9CLElBQUkrQixFQUFFO0tBQUM7SUFHVixNQUFNdUIsZ0JBQWdCdEcsa0RBQVdBO21EQUFDO1lBQ2hDLElBQUksQ0FBQ2lFLGlCQUFpQmEsT0FBTyxFQUFFO1lBQy9CLElBQUk7Z0JBQ0ZiLGlCQUFpQmEsT0FBTztZQUMxQixTQUFVO2dCQUNSYixpQkFBaUJhLE9BQU8sR0FBRztZQUM3QjtRQUNGO2tEQUFHLEVBQUU7SUFFTCxNQUFNeUIsd0JBQXdCdkcsa0RBQVdBOzJEQUFDO1lBQ3hDc0c7WUFFQSxNQUFNRTswRUFBUyxDQUFDQztvQkFDZCxNQUFNQyxRQUFReEMsU0FBU1ksT0FBTztvQkFDOUIsSUFBSSxDQUFDNEIsTUFBTXZDLE1BQU0sSUFBSXVDLE1BQU1yQyxXQUFXLElBQUksQ0FBQ3FDLE1BQU1uQyxTQUFTLEVBQUU7b0JBRTVELE1BQU1vQyxRQUFRM0YsZUFBZXlGO29CQUM3QixJQUFJLENBQUNFLE9BQU87b0JBRVosTUFBTUMsS0FBS0QsTUFBTXRGLENBQUMsR0FBR3FGLE1BQU1sQyxZQUFZO29CQUN2QyxNQUFNcUMsS0FBS0YsTUFBTWxGLENBQUMsR0FBR2lGLE1BQU1qQyxZQUFZO29CQUN2QyxJQUFJdkMsS0FBSzRFLEtBQUssQ0FBQ0YsSUFBSUMsTUFBTTlGLG1CQUFtQjtvQkFFNUMyRixNQUFNdEMsV0FBVyxHQUFHO29CQUNwQnNDLE1BQU1yQyxXQUFXLEdBQUc7b0JBQ3BCcUMsTUFBTXBDLGFBQWEsR0FBRztvQkFFdEIsTUFBTU8sT0FBT2IsUUFBUWMsT0FBTztvQkFDNUIsSUFBSSxDQUFDRCxNQUFNO29CQUVYLElBQUk7d0JBQ0ZBLEtBQUtrQyxRQUFRLENBQUM7NEJBQUUxRixHQUFHcUYsTUFBTWhDLFVBQVU7NEJBQUVqRCxHQUFHaUYsTUFBTS9CLFVBQVU7d0JBQUM7d0JBQ3pERSxLQUFLbUMsUUFBUSxJQUFJQztvQkFDbkIsRUFBRSxPQUFNLENBQUM7b0JBRVQsSUFBSTt3QkFDRnBDLEtBQUtxQyxTQUFTLENBQUM7d0JBQ2ZyQyxLQUFLc0MsU0FBUztvQkFDaEIsRUFBRSxPQUFNLENBQUM7Z0JBQ1g7O1lBRUEsTUFBTUM7d0VBQU87b0JBQ1gsTUFBTVYsUUFBUXhDLFNBQVNZLE9BQU87b0JBQzlCLElBQUksQ0FBQzRCLE1BQU12QyxNQUFNLEVBQUU7d0JBQ2pCbUM7d0JBQ0E7b0JBQ0Y7b0JBRUFJLE1BQU12QyxNQUFNLEdBQUc7b0JBRWYsTUFBTVUsT0FBT2IsUUFBUWMsT0FBTztvQkFDNUIsSUFBSUQsTUFBTTt3QkFDUixJQUFJLENBQUM2QixNQUFNdEMsV0FBVyxFQUFFOzRCQUN0QixJQUFJO2dDQUNGUyxLQUFLa0MsUUFBUSxDQUFDO29DQUFFMUYsR0FBR3FGLE1BQU1oQyxVQUFVO29DQUFFakQsR0FBR2lGLE1BQU0vQixVQUFVO2dDQUFDO2dDQUN6REUsS0FBS21DLFFBQVEsSUFBSUM7NEJBQ25CLEVBQUUsT0FBTSxDQUFDO3dCQUNYLE9BQU87NEJBQ0wsSUFBSTtnQ0FDRixJQUFJcEMsS0FBS3dDLFVBQVUsTUFBTXhDLEtBQUt5QyxRQUFROzRCQUN4QyxFQUFFLE9BQU0sQ0FBQzt3QkFDWDt3QkFDQSxJQUFJOzRCQUNGekMsS0FBS3FDLFNBQVMsQ0FBQzt3QkFDakIsRUFBRSxPQUFNLENBQUM7b0JBQ1g7b0JBRUFSLE1BQU10QyxXQUFXLEdBQUc7b0JBQ3BCc0MsTUFBTXJDLFdBQVcsR0FBRztvQkFFcEJrRDtnRkFBVzs0QkFDVHJELFNBQVNZLE9BQU8sQ0FBQ1IsYUFBYSxHQUFHO3dCQUNuQzsrRUFBRztvQkFFSGdDO2dCQUNGOztZQUVBa0IsT0FBT0MsZ0JBQWdCLENBQUMsYUFBYWpCLFFBQVE7WUFDN0NnQixPQUFPQyxnQkFBZ0IsQ0FBQyxhQUFhakIsUUFBUTtnQkFBRWtCLFNBQVM7Z0JBQU1DLFNBQVM7WUFBSztZQUM1RUgsT0FBT0MsZ0JBQWdCLENBQUMsV0FBV0wsTUFBTTtZQUN6Q0ksT0FBT0MsZ0JBQWdCLENBQUMsWUFBWUwsTUFBTTtZQUMxQ0ksT0FBT0MsZ0JBQWdCLENBQUMsZUFBZUwsTUFBTTtZQUM3Q0ksT0FBT0MsZ0JBQWdCLENBQUMsaUJBQWlCTCxNQUFNO1lBQy9DSSxPQUFPQyxnQkFBZ0IsQ0FBQyxRQUFRTCxNQUFNO1lBRXRDbkQsaUJBQWlCYSxPQUFPO21FQUFHO29CQUN6QjBDLE9BQU9JLG1CQUFtQixDQUFDLGFBQWFwQixRQUFRO29CQUNoRGdCLE9BQU9JLG1CQUFtQixDQUFDLGFBQWFwQixRQUFRO29CQUNoRGdCLE9BQU9JLG1CQUFtQixDQUFDLFdBQVdSLE1BQU07b0JBQzVDSSxPQUFPSSxtQkFBbUIsQ0FBQyxZQUFZUixNQUFNO29CQUM3Q0ksT0FBT0ksbUJBQW1CLENBQUMsZUFBZVIsTUFBTTtvQkFDaERJLE9BQU9JLG1CQUFtQixDQUFDLGlCQUFpQlIsTUFBTTtvQkFDbERJLE9BQU9JLG1CQUFtQixDQUFDLFFBQVFSLE1BQU07Z0JBQzNDOztRQUNGOzBEQUFHO1FBQUNkO0tBQWM7SUFFbEIsTUFBTXVCLG1CQUFtQjdILGtEQUFXQTtzREFDbEMsQ0FBQzhIO1lBQ0MsSUFBSUEsR0FBR0EsRUFBRUMsWUFBWSxHQUFHO1lBQ3hCLElBQUlELEdBQUc3RyxLQUFLNkcsRUFBRTdHLEdBQUcsQ0FBQzhHLFlBQVksR0FBRztZQUVqQyxNQUFNbEQsT0FBT2IsUUFBUWMsT0FBTyxJQUFJZ0QsRUFBRUUsYUFBYTtZQUMvQyxNQUFNckIsUUFBUTNGLGVBQWU4RyxHQUFHN0c7WUFDaEMsSUFBSSxDQUFDNEQsUUFBUSxDQUFDOEIsT0FBTztZQUVyQixNQUFNRCxRQUFReEMsU0FBU1ksT0FBTztZQUM5QjRCLE1BQU12QyxNQUFNLEdBQUc7WUFDZnVDLE1BQU10QyxXQUFXLEdBQUc7WUFDcEJzQyxNQUFNckMsV0FBVyxHQUFHO1lBQ3BCcUMsTUFBTXBDLGFBQWEsR0FBRztZQUN0Qm9DLE1BQU1uQyxTQUFTLEdBQUdwQixjQUFjLENBQUM4QyxxQkFBcUI2QixHQUFHNUI7WUFDekRRLE1BQU1sQyxZQUFZLEdBQUdtQyxNQUFNdEYsQ0FBQztZQUM1QnFGLE1BQU1qQyxZQUFZLEdBQUdrQyxNQUFNbEYsQ0FBQztZQUM1QmlGLE1BQU1oQyxVQUFVLEdBQUdHLEtBQUt4RCxDQUFDO1lBQ3pCcUYsTUFBTS9CLFVBQVUsR0FBR0UsS0FBS3BELENBQUM7WUFFekIsSUFBSTtnQkFDRm9ELEtBQUtxQyxTQUFTLENBQUM7WUFDakIsRUFBRSxPQUFNLENBQUM7WUFFVFg7UUFDRjtxREFDQTtRQUFDQTtRQUF1Qk47UUFBc0I5QztLQUFXO0lBRzNELE1BQU04RSxrQkFBa0JqSSxrREFBV0E7cURBQ2pDLENBQUM4SDtZQUNDLElBQUlBLEtBQUtBLEVBQUU3RyxHQUFHLEVBQUU2RyxFQUFFN0csR0FBRyxDQUFDOEcsWUFBWSxHQUFHO1lBQ3JDLElBQUk3RCxTQUFTWSxPQUFPLENBQUNSLGFBQWEsRUFBRTtZQUNwQ2xCLFdBQVdKLElBQUkrQixFQUFFLEVBQUUrQztRQUNyQjtvREFDQTtRQUFDOUUsSUFBSStCLEVBQUU7UUFBRTNCO0tBQVM7SUFHcEIsTUFBTThFLG1CQUFtQixDQUFDQyxPQUFPbEg7UUFDL0IsSUFBSWlELFNBQVNZLE9BQU8sQ0FBQ1IsYUFBYSxFQUFFO1FBQ3BDLElBQUlyRCxLQUFLaUYsUUFBUW5CLFdBQVcsQ0FBQyxJQUFJLEVBQUUvQixJQUFJK0IsRUFBRSxDQUFDLENBQUMsRUFBRW9ELE9BQU8sRUFBRTtRQUN0RCxJQUFJbEgsS0FBS0EsSUFBSThHLFlBQVksR0FBRztRQUM1QixJQUFJOUcsS0FBS0EsS0FBS0EsSUFBSUEsR0FBRyxDQUFDOEcsWUFBWSxHQUFHO1FBQ3JDM0UsV0FBV0osSUFBSStCLEVBQUUsRUFBRTlEO1FBQ25CLE1BQU1tSCxVQUFVO1lBQUVDLE9BQU9yRixJQUFJK0IsRUFBRTtZQUFFb0Q7UUFBTTtRQUN2Q3pFLGFBQWEwRTtRQUNiekUsd0JBQXdCeUU7SUFDMUI7SUFFQSxNQUFNRSxlQUFlLENBQUNILE9BQU9sSDtRQUMzQixJQUFJaUQsU0FBU1ksT0FBTyxDQUFDUixhQUFhLEVBQUU7UUFDcEMsSUFBSXJELEtBQUtBLElBQUk4RyxZQUFZLEdBQUc7UUFDNUIsSUFBSTlHLEtBQUtBLEtBQUtBLElBQUlBLEdBQUcsQ0FBQzhHLFlBQVksR0FBRztRQUNyQyxNQUFNUSxjQUFjO2VBQUt2RixJQUFJd0YsS0FBSyxJQUFJLEVBQUU7U0FBRTtRQUMxQ0QsV0FBVyxDQUFDSixNQUFNLEdBQUc7WUFBRSxHQUFJSSxXQUFXLENBQUNKLE1BQU0sSUFBSSxDQUFDLENBQUM7WUFBR00sVUFBVTtRQUFLO1FBQ3JFcEYsV0FBV0wsSUFBSStCLEVBQUUsRUFBRTtZQUFFeUQsT0FBT0Q7UUFBWTtJQUMxQztJQUVBdEksZ0RBQVNBO2tDQUFDOzBDQUFNLElBQU1xRzs7aUNBQWlCO1FBQUNBO0tBQWM7SUFFdEQscUJBQ0UsOERBQUNqRyw4Q0FBS0E7UUFDSmdCLEdBQUdnRSxNQUFNckMsSUFBSTNCLENBQUMsRUFBRTtRQUNoQkksR0FBRzRELE1BQU1yQyxJQUFJdkIsQ0FBQyxFQUFFLEtBQUsyRDtRQUNyQkwsSUFBSS9CLElBQUkrQixFQUFFO1FBQ1YyRCxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsV0FBV3hHO1FBQ1h5RyxZQUFZN0M7UUFDWmtCLFdBQVc7UUFDWDRCLEtBQUtsRTtRQUNMbUUsY0FBYztZQUNaLElBQUksQ0FBQ3ZCLE9BQU93QixXQUFXLEVBQUU5RixVQUFVRixJQUFJK0IsRUFBRTtRQUMzQztRQUNBa0UsY0FBYztZQUNabEYsZUFBZTtZQUNmYixVQUFVO1FBQ1o7UUFDQWdHLGFBQWFyQjtRQUNic0IsY0FBY3RCO1FBQ2R1QixTQUFTbkI7UUFDVG9CLE9BQU9wQjtRQUNQcUIsYUFBYSxDQUFDeEI7WUFDWixJQUFJLENBQUMzRSxZQUFZO2dCQUNmMkUsRUFBRTVCLE1BQU0sQ0FBQ29CLFFBQVE7Z0JBQ2pCO1lBQ0Y7WUFDQUUsT0FBT3dCLFdBQVcsR0FBRztZQUNyQjFGLDJCQUEyQk4sSUFBSStCLEVBQUU7UUFDbkM7UUFDQXdFLFlBQVksQ0FBQ3pCO1lBQ1h2RSwwQkFBMEI7Z0JBQUVsQyxHQUFHeUcsRUFBRTVCLE1BQU0sQ0FBQzdFLENBQUM7Z0JBQUlJLEdBQUdxRyxFQUFFNUIsTUFBTSxDQUFDekUsQ0FBQztZQUFHLEdBQUd1QixJQUFJK0IsRUFBRTtRQUN4RTtRQUNBeUUsV0FBVyxDQUFDMUI7WUFDVnZFLDBCQUEwQjtnQkFBRWxDLEdBQUd5RyxFQUFFNUIsTUFBTSxDQUFDN0UsQ0FBQztnQkFBSUksR0FBR3FHLEVBQUU1QixNQUFNLENBQUN6RSxDQUFDO1lBQUcsR0FBR3VCLElBQUkrQixFQUFFO1lBRXRFLE1BQU0wRSxTQUFTM0IsRUFBRTVCLE1BQU0sQ0FBQzdFLENBQUM7WUFDekIsTUFBTXFJLFlBQVk1QixFQUFFNUIsTUFBTSxDQUFDekUsQ0FBQztZQUU1QixNQUFNLEVBQUVrSSxZQUFZLEVBQUVDLG9CQUFvQixFQUFFLEdBQUc5SSxxRUFBc0JBLENBQ25FNEksV0FDQTFHLElBQUltQyxTQUFTLEVBQ2J2QjtZQUdGLElBQUkrRixjQUFjO2dCQUNoQnRHLFdBQVdMLElBQUkrQixFQUFFLEVBQUU7b0JBQUUxRCxHQUFHb0k7b0JBQVF0RSxXQUFXd0U7b0JBQWMsR0FBR0Msb0JBQW9CO2dCQUFDO1lBQ25GLE9BQU87Z0JBQ0wsTUFBTUMsT0FBT0gsWUFBWXRFO2dCQUN6Qi9CLFdBQVdMLElBQUkrQixFQUFFLEVBQUU7b0JBQUUxRCxHQUFHb0k7b0JBQVFoSSxHQUFHb0k7Z0JBQUs7WUFDMUM7WUFFQXJDLE9BQU93QixXQUFXLEdBQUc7WUFDckJ4Rix5QkFBeUJSLElBQUkrQixFQUFFO1lBQy9CK0MsRUFBRTVCLE1BQU0sQ0FBQ2dCLFNBQVMsQ0FBQztZQUNuQmhELFNBQVNZLE9BQU8sQ0FBQ1gsTUFBTSxHQUFHO1lBQzFCRCxTQUFTWSxPQUFPLENBQUNWLFdBQVcsR0FBRztZQUMvQkYsU0FBU1ksT0FBTyxDQUFDVCxXQUFXLEdBQUc7WUFDL0JrRCxXQUFXO2dCQUNUckQsU0FBU1ksT0FBTyxDQUFDUixhQUFhLEdBQUc7WUFDbkMsR0FBRztZQUNIZ0M7UUFDRjs7MEJBRUEsOERBQUNoRyw2Q0FBSUE7Z0JBQ0h3SixNQUFLO2dCQUNMekksR0FBRztnQkFDSEksR0FBRztnQkFDSFcsT0FBT0E7Z0JBQ1BDLFFBQVEyRDtnQkFDUitELE1BQUs7Z0JBQ0xDLGVBQWU7Z0JBQ2ZsSCxXQUFXOzs7Ozs7WUFHWmdELE1BQU1tRSxHQUFHLENBQUMsQ0FBQ0MsR0FBR0M7Z0JBQ2IsTUFBTUMsT0FBT3BILElBQUl3RixLQUFLLEVBQUUsQ0FBQzJCLEVBQUUsSUFBSSxDQUFDO2dCQUNoQyxNQUFNRSxLQUFLRCxLQUFLQyxFQUFFLElBQUk7Z0JBQ3RCLE1BQU01QixXQUFXMkIsS0FBSzNCLFFBQVEsSUFBSTtnQkFDbEMsTUFBTTVHLE1BQU11SSxLQUFLdkksR0FBRyxJQUFJO2dCQUV4QixNQUFNeUksV0FDSjdHLG9CQUFvQjRFLFVBQVVyRixJQUFJK0IsRUFBRSxJQUNwQ3RCLG9CQUFvQjBFLFVBQVVnQztnQkFFaEMsTUFBTUksV0FBVyxDQUFDQztvQkFDaEIsTUFBTTFJLElBQUlvSSxFQUFFOUgsS0FBSztvQkFDakIsTUFBTUwsSUFBSW1JLEVBQUU3SCxNQUFNO29CQUNsQixNQUFNb0ksTUFBTXZJLEtBQUtDLEdBQUcsQ0FBQ3FELFFBQVF0RCxLQUFLQyxHQUFHLENBQUNMLEdBQUdDLEtBQUs7b0JBQzlDeUksSUFBSUUsU0FBUztvQkFDYkYsSUFBSUcsTUFBTSxDQUFDRixLQUFLO29CQUNoQkQsSUFBSUksTUFBTSxDQUFDOUksSUFBSTJJLEtBQUs7b0JBQ3BCRCxJQUFJSyxnQkFBZ0IsQ0FBQy9JLEdBQUcsR0FBR0EsR0FBRzJJO29CQUM5QkQsSUFBSUksTUFBTSxDQUFDOUksR0FBR0MsSUFBSTBJO29CQUNsQkQsSUFBSUssZ0JBQWdCLENBQUMvSSxHQUFHQyxHQUFHRCxJQUFJMkksS0FBSzFJO29CQUNwQ3lJLElBQUlJLE1BQU0sQ0FBQ0gsS0FBSzFJO29CQUNoQnlJLElBQUlLLGdCQUFnQixDQUFDLEdBQUc5SSxHQUFHLEdBQUdBLElBQUkwSTtvQkFDbENELElBQUlJLE1BQU0sQ0FBQyxHQUFHSDtvQkFDZEQsSUFBSUssZ0JBQWdCLENBQUMsR0FBRyxHQUFHSixLQUFLO29CQUNoQ0QsSUFBSU0sU0FBUztnQkFDZjtnQkFFQSxNQUFNQyxxQkFBcUJ0QyxZQUFhM0UsQ0FBQUEsZ0JBQWdCcUcsS0FBS0csUUFBTztnQkFFcEUscUJBQ0UsOERBQUNqSyw4Q0FBS0E7b0JBRUpnQixHQUFHNkksRUFBRTdJLENBQUM7b0JBQ05JLEdBQUd5SSxFQUFFekksQ0FBQztvQkFDTnNILGNBQWMsSUFBTWhGLGVBQWVvRztvQkFDbkNsQixjQUFjLElBQU1sRixlQUFlO29CQUNuQ3FGLFNBQVMsQ0FBQ3RCLElBQU1JLGlCQUFpQmlDLEdBQUdyQztvQkFDcEN1QixPQUFPLENBQUN2QixJQUFNSSxpQkFBaUJpQyxHQUFHckM7O3NDQUVsQyw4REFBQ3hILDZDQUFJQTs0QkFBQ2UsR0FBRzs0QkFBR0ksR0FBRzs0QkFBR1csT0FBTzhILEVBQUU5SCxLQUFLOzRCQUFFQyxRQUFRNkgsRUFBRTdILE1BQU07NEJBQUUwSCxNQUFLOzs7Ozs7c0NBRXpELDhEQUFDMUosOENBQUtBOzRCQUFDa0ssVUFBVUE7NEJBQVV6SCxXQUFXOzs4Q0FDcEMsOERBQUN4Qyw2Q0FBSUE7b0NBQUNlLEdBQUc7b0NBQUdJLEdBQUc7b0NBQUdXLE9BQU84SCxFQUFFOUgsS0FBSztvQ0FBRUMsUUFBUTZILEVBQUU3SCxNQUFNO29DQUFFMEgsTUFBTU07Ozs7OztnQ0FDekQ1QiwwQkFDQyw4REFBQzlHO29DQUFZQyxLQUFLNkc7b0NBQVU1RyxLQUFLQTtvQ0FBS0MsR0FBR29JLEVBQUU5SCxLQUFLO29DQUFFTCxHQUFHbUksRUFBRTdILE1BQU07Ozs7Ozs4Q0FFL0QsOERBQUMvQiw2Q0FBSUE7b0NBQ0hlLEdBQUc7b0NBQ0hJLEdBQUc7b0NBQ0hXLE9BQU84SCxFQUFFOUgsS0FBSztvQ0FDZEMsUUFBUTZILEVBQUU3SCxNQUFNO29DQUNoQjJJLGNBQWN4RixVQUFVO29DQUN4QnlGLFFBQVFYLFdBQVcsWUFBWTtvQ0FDL0JZLGFBQWFaLFdBQVcsSUFBSTtvQ0FDNUJhLE1BQU1iLFdBQVc7d0NBQUM7d0NBQUc7cUNBQUUsR0FBRyxFQUFFO29DQUM1QnhILFdBQVc7Ozs7Ozs7Ozs7Ozt3QkFJZGlJLG9DQUNDLDhEQUFDMUssOENBQUtBOzRCQUNKMEUsSUFBSSxDQUFDLElBQUksRUFBRS9CLElBQUkrQixFQUFFLENBQUMsQ0FBQyxFQUFFb0YsR0FBRzs0QkFDeEI5SSxHQUFHNkksRUFBRTlILEtBQUssR0FBRzs0QkFDYlgsR0FBRzs0QkFDSFcsT0FBTzs0QkFDUEMsUUFBUTs0QkFDUlMsV0FBVzs0QkFDWGlHLGNBQWMsSUFBTWhGLGVBQWVvRzs0QkFDbkNmLFNBQVMsQ0FBQ3RCLElBQU1RLGFBQWE2QixHQUFHckM7NEJBQ2hDdUIsT0FBTyxDQUFDdkIsSUFBTVEsYUFBYTZCLEdBQUdyQzs7OENBRTlCLDhEQUFDeEgsNkNBQUlBO29DQUFDOEIsT0FBTztvQ0FBSUMsUUFBUTtvQ0FBSTBILE1BQUs7b0NBQWtCaUIsY0FBYzs7Ozs7OzhDQUNsRSw4REFBQ3RLLDZDQUFTQTtvQ0FDUjBLLE1BQUs7b0NBQ0xDLFVBQVU7b0NBQ1Z0QixNQUFLO29DQUNMdUIsT0FBTTtvQ0FDTkMsZUFBYztvQ0FDZG5KLE9BQU87b0NBQ1BDLFFBQVE7b0NBQ1JTLFdBQVc7Ozs7Ozs7Ozs7Ozs7bUJBakRaLEdBQUdFLElBQUkrQixFQUFFLENBQUMsQ0FBQyxFQUFFb0YsR0FBRzs7Ozs7WUF1RDNCOzs7Ozs7O0FBR04iLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxHYWxlcmlhS29udmEuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2VkaXRvci9HYWxlcmlhS29udmEuanN4XG4vL1xuLy8gR2FsZXJpYSBkZSBpbWFnZW5lcyBjb21vIFVOIHNvbG8gb2JqZXRvIGVuIEtvbnZhLlxuLy8gLSBDYWxjdWxhIHN1IHByb3BpbyBvZmZzZXQgWSBwb3Igc2VjY2lvbiAoY2FsY3VsYXJPZmZzZXRZKS5cbi8vIC0gUmVuZGVyaXphIGxhcyBjZWxkYXMgZW4gYmFzZSBhIGNhbGNHYWxsZXJ5TGF5b3V0LlxuLy8gLSBQZXJtaXRlIHNlbGVjY2lvbmFyIGxhIGdhbGVyaWEgeSB1bmEgY2VsZGEgKG9uU2VsZWN0ICsgb25QaWNrQ2VsbC9zZXRDZWxkYUdhbGVyaWFBY3RpdmEpLlxuLy8gLSBBcnJhc3RyZSBkZWwgZ3J1cG8gYWN0dWFsaXphIHNlY2Npb24vcG9zaWNpb24gKGRldGVybWluYXJOdWV2YVNlY2Npb24pLlxuLy9cbi8vIERlcGVuZGVuY2lhcyBkZSBmcm9udGVuZDogdXRpbHMvbGF5b3V0IChOTyB1c2FyIGZ1bmNpb25lcyBkZSBmdW5jdGlvbnMvKS5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEdyb3VwLCBSZWN0LCBJbWFnZSBhcyBLb252YUltYWdlLCBUZXh0IGFzIEtvbnZhVGV4dCB9IGZyb20gXCJyZWFjdC1rb252YVwiO1xuaW1wb3J0IHVzZUltYWdlIGZyb20gXCJ1c2UtaW1hZ2VcIjtcbmltcG9ydCB7IGNhbGNHYWxsZXJ5TGF5b3V0IH0gZnJvbSBcIkAvdXRpbHMvY2FsY0dyaWRcIjtcbmltcG9ydCB7IGNhbGN1bGFyT2Zmc2V0WSwgZGV0ZXJtaW5hck51ZXZhU2VjY2lvbiB9IGZyb20gXCJAL3V0aWxzL2xheW91dFwiO1xuXG5jb25zdCBEUkFHX1RIUkVTSE9MRF9QWCA9IDQ7XG5cbmZ1bmN0aW9uIGdldENsaWVudFBvaW50KGV2dCkge1xuICBpZiAoIWV2dCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgdG91Y2ggPVxuICAgIGV2dC50b3VjaGVzPy5bMF0gfHxcbiAgICBldnQuY2hhbmdlZFRvdWNoZXM/LlswXSB8fFxuICAgIG51bGw7XG5cbiAgY29uc3QgeCA9IE51bWJlci5pc0Zpbml0ZSh0b3VjaD8uY2xpZW50WCkgPyB0b3VjaC5jbGllbnRYIDogZXZ0LmNsaWVudFg7XG4gIGNvbnN0IHkgPSBOdW1iZXIuaXNGaW5pdGUodG91Y2g/LmNsaWVudFkpID8gdG91Y2guY2xpZW50WSA6IGV2dC5jbGllbnRZO1xuXG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHgpIHx8ICFOdW1iZXIuaXNGaW5pdGUoeSkpIHJldHVybiBudWxsO1xuICByZXR1cm4geyB4LCB5IH07XG59XG5cbmZ1bmN0aW9uIEltYWdlbkNlbGRhKHsgc3JjLCBmaXQgPSBcImNvdmVyXCIsIHcsIGggfSkge1xuICBjb25zdCBbaW1nXSA9IHVzZUltYWdlKHNyYywgXCJhbm9ueW1vdXNcIik7XG4gIGlmICghaW1nKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBlc2NDb250YWluID0gTWF0aC5taW4odyAvIGltZy53aWR0aCwgaCAvIGltZy5oZWlnaHQpO1xuICBjb25zdCBlc2NDb3ZlciA9IE1hdGgubWF4KHcgLyBpbWcud2lkdGgsIGggLyBpbWcuaGVpZ2h0KTtcbiAgY29uc3QgZXNjID0gZml0ID09PSBcImNvbnRhaW5cIiA/IGVzY0NvbnRhaW4gOiBlc2NDb3ZlcjtcblxuICBjb25zdCBpdyA9IGltZy53aWR0aCAqIGVzYztcbiAgY29uc3QgaWggPSBpbWcuaGVpZ2h0ICogZXNjO1xuICBjb25zdCBpeCA9ICh3IC0gaXcpIC8gMjtcbiAgY29uc3QgaXkgPSAoaCAtIGloKSAvIDI7XG5cbiAgcmV0dXJuIChcbiAgICA8S29udmFJbWFnZVxuICAgICAgaW1hZ2U9e2ltZ31cbiAgICAgIHg9e2l4fVxuICAgICAgeT17aXl9XG4gICAgICB3aWR0aD17aXd9XG4gICAgICBoZWlnaHQ9e2lofVxuICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cbiAgICAvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHYWxlcmlhS29udmEoe1xuICBvYmosXG4gIHJlZ2lzdGVyUmVmLFxuICBvbkhvdmVyLFxuICBpc1NlbGVjdGVkLFxuICBvblNlbGVjdCxcbiAgb25DaGFuZ2UsXG4gIG9uRHJhZ1N0YXJ0UGVyc29uYWxpemFkbyxcbiAgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8sXG4gIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8sXG4gIGNlbGRhR2FsZXJpYUFjdGl2YSxcbiAgb25QaWNrQ2VsbCxcbiAgc2V0Q2VsZGFHYWxlcmlhQWN0aXZhLFxuICBzZWNjaW9uZXNPcmRlbmFkYXMgPSBbXSxcbiAgYWx0b0NhbnZhcyA9IDAsXG59KSB7XG4gIGNvbnN0IFtob3ZlcmVkQ2VsbCwgc2V0SG92ZXJlZENlbGxdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IHJvb3RSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNsZWFudXBHbG9iYWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHByZXNzUmVmID0gdXNlUmVmKHtcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIG1vdmVkRW5vdWdoOiBmYWxzZSxcbiAgICBzdGFydGVkRHJhZzogZmFsc2UsXG4gICAgc3VwcHJlc3NDbGljazogZmFsc2UsXG4gICAgYWxsb3dEcmFnOiBmYWxzZSxcbiAgICBzdGFydENsaWVudFg6IDAsXG4gICAgc3RhcnRDbGllbnRZOiAwLFxuICAgIHN0YXJ0Tm9kZVg6IDAsXG4gICAgc3RhcnROb2RlWTogMCxcbiAgfSk7XG5cbiAgY29uc3Qgc2V0Um9vdFJlZiA9IHVzZUNhbGxiYWNrKFxuICAgIChub2RlKSA9PiB7XG4gICAgICByb290UmVmLmN1cnJlbnQgPSBub2RlIHx8IG51bGw7XG4gICAgICByZWdpc3RlclJlZj8uKG9iai5pZCwgbm9kZSB8fCBudWxsKTtcbiAgICB9LFxuICAgIFtvYmouaWQsIHJlZ2lzdGVyUmVmXVxuICApO1xuXG4gIGNvbnN0IGluZGV4U2VjY2lvbiA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgoKHMpID0+IHMuaWQgPT09IG9iai5zZWNjaW9uSWQpO1xuICBjb25zdCBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgaW5kZXhTZWNjaW9uKTtcblxuICBjb25zdCB0b051bSA9ICh2LCBkID0gMCkgPT4gKE51bWJlci5pc0Zpbml0ZSgrdikgPyArdiA6IGQpO1xuICBjb25zdCByYWRpdXMgPSBNYXRoLm1heCgwLCB0b051bShvYmoucmFkaXVzLCAwKSk7XG4gIGNvbnN0IGdhcCA9IE1hdGgubWF4KDAsIHRvTnVtKG9iai5nYXAsIDApKTtcbiAgY29uc3Qgcm93cyA9IE1hdGgubWF4KDEsIHRvTnVtKG9iai5yb3dzLCAxKSk7XG4gIGNvbnN0IGNvbHMgPSBNYXRoLm1heCgxLCB0b051bShvYmouY29scywgMSkpO1xuICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KDEsIHRvTnVtKG9iai53aWR0aCwgNDAwKSk7XG5cbiAgY29uc3QgY2VsbFJhdGlvID1cbiAgICBvYmoucmF0aW8gPT09IFwiNDozXCIgPyAzIC8gNCA6XG4gICAgICBvYmoucmF0aW8gPT09IFwiMTY6OVwiID8gOSAvIDE2IDpcbiAgICAgICAgMTtcblxuICBjb25zdCB7IHJlY3RzLCB0b3RhbEhlaWdodCB9ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBjYWxjR2FsbGVyeUxheW91dCh7IHdpZHRoLCByb3dzLCBjb2xzLCBnYXAsIGNlbGxSYXRpbyB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiB7IHJlY3RzOiBbXSwgdG90YWxIZWlnaHQ6IDAgfTtcbiAgICB9XG4gIH0sIFt3aWR0aCwgcm93cywgY29scywgZ2FwLCBjZWxsUmF0aW9dKTtcblxuICBjb25zdCBzYWZlVG90YWxIZWlnaHQgPSBNYXRoLm1heCgxLCB0b3RhbEhlaWdodCk7XG5cbiAgY29uc3QgaXNSZW1vdmVCdXR0b25UYXJnZXQgPSB1c2VDYWxsYmFjayhcbiAgICAodGFyZ2V0KSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXRJZCA9XG4gICAgICAgIHR5cGVvZiB0YXJnZXQ/LmlkID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHRhcmdldC5pZCgpXG4gICAgICAgICAgOiB0YXJnZXQ/LmF0dHJzPy5pZDtcbiAgICAgIHJldHVybiB0eXBlb2YgdGFyZ2V0SWQgPT09IFwic3RyaW5nXCIgJiYgdGFyZ2V0SWQuc3RhcnRzV2l0aChgYnRuLSR7b2JqLmlkfS1gKTtcbiAgICB9LFxuICAgIFtvYmouaWRdXG4gICk7XG5cbiAgY29uc3QgY2xlYW51cEdsb2JhbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIWNsZWFudXBHbG9iYWxSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICBjbGVhbnVwR2xvYmFsUmVmLmN1cnJlbnQoKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xlYW51cEdsb2JhbFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBhdHRhY2hHbG9iYWxMaXN0ZW5lcnMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY2xlYW51cEdsb2JhbCgpO1xuXG4gICAgY29uc3Qgb25Nb3ZlID0gKGV2KSA9PiB7XG4gICAgICBjb25zdCBwcmVzcyA9IHByZXNzUmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIXByZXNzLmFjdGl2ZSB8fCBwcmVzcy5zdGFydGVkRHJhZyB8fCAhcHJlc3MuYWxsb3dEcmFnKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHBvaW50ID0gZ2V0Q2xpZW50UG9pbnQoZXYpO1xuICAgICAgaWYgKCFwb2ludCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBkeCA9IHBvaW50LnggLSBwcmVzcy5zdGFydENsaWVudFg7XG4gICAgICBjb25zdCBkeSA9IHBvaW50LnkgLSBwcmVzcy5zdGFydENsaWVudFk7XG4gICAgICBpZiAoTWF0aC5oeXBvdChkeCwgZHkpIDwgRFJBR19USFJFU0hPTERfUFgpIHJldHVybjtcblxuICAgICAgcHJlc3MubW92ZWRFbm91Z2ggPSB0cnVlO1xuICAgICAgcHJlc3Muc3RhcnRlZERyYWcgPSB0cnVlO1xuICAgICAgcHJlc3Muc3VwcHJlc3NDbGljayA9IHRydWU7XG5cbiAgICAgIGNvbnN0IG5vZGUgPSByb290UmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIW5vZGUpIHJldHVybjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgbm9kZS5wb3NpdGlvbih7IHg6IHByZXNzLnN0YXJ0Tm9kZVgsIHk6IHByZXNzLnN0YXJ0Tm9kZVkgfSk7XG4gICAgICAgIG5vZGUuZ2V0TGF5ZXIoKT8uYmF0Y2hEcmF3KCk7XG4gICAgICB9IGNhdGNoIHt9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIG5vZGUuZHJhZ2dhYmxlKHRydWUpO1xuICAgICAgICBub2RlLnN0YXJ0RHJhZygpO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH07XG5cbiAgICBjb25zdCBvblVwID0gKCkgPT4ge1xuICAgICAgY29uc3QgcHJlc3MgPSBwcmVzc1JlZi5jdXJyZW50O1xuICAgICAgaWYgKCFwcmVzcy5hY3RpdmUpIHtcbiAgICAgICAgY2xlYW51cEdsb2JhbCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHByZXNzLmFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICBjb25zdCBub2RlID0gcm9vdFJlZi5jdXJyZW50O1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgaWYgKCFwcmVzcy5tb3ZlZEVub3VnaCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBub2RlLnBvc2l0aW9uKHsgeDogcHJlc3Muc3RhcnROb2RlWCwgeTogcHJlc3Muc3RhcnROb2RlWSB9KTtcbiAgICAgICAgICAgIG5vZGUuZ2V0TGF5ZXIoKT8uYmF0Y2hEcmF3KCk7XG4gICAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobm9kZS5pc0RyYWdnaW5nPy4oKSkgbm9kZS5zdG9wRHJhZygpO1xuICAgICAgICAgIH0gY2F0Y2gge31cbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIG5vZGUuZHJhZ2dhYmxlKGZhbHNlKTtcbiAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgfVxuXG4gICAgICBwcmVzcy5tb3ZlZEVub3VnaCA9IGZhbHNlO1xuICAgICAgcHJlc3Muc3RhcnRlZERyYWcgPSBmYWxzZTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3VwcHJlc3NDbGljayA9IGZhbHNlO1xuICAgICAgfSwgMCk7XG5cbiAgICAgIGNsZWFudXBHbG9iYWwoKTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Nb3ZlLCB0cnVlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvbk1vdmUsIHsgY2FwdHVyZTogdHJ1ZSwgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25VcCwgdHJ1ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBvblVwLCB0cnVlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIG9uVXAsIHRydWUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLCBvblVwLCB0cnVlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgb25VcCwgdHJ1ZSk7XG5cbiAgICBjbGVhbnVwR2xvYmFsUmVmLmN1cnJlbnQgPSAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdmUsIHRydWUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgb25Nb3ZlLCB0cnVlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvblVwLCB0cnVlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgb25VcCwgdHJ1ZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIG9uVXAsIHRydWUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIG9uVXAsIHRydWUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIG9uVXAsIHRydWUpO1xuICAgIH07XG4gIH0sIFtjbGVhbnVwR2xvYmFsXSk7XG5cbiAgY29uc3QgaGFuZGxlUHJlc3NTdGFydCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZSkgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgaWYgKGU/LmV2dCkgZS5ldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblxuICAgICAgY29uc3Qgbm9kZSA9IHJvb3RSZWYuY3VycmVudCB8fCBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICBjb25zdCBwb2ludCA9IGdldENsaWVudFBvaW50KGU/LmV2dCk7XG4gICAgICBpZiAoIW5vZGUgfHwgIXBvaW50KSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHByZXNzID0gcHJlc3NSZWYuY3VycmVudDtcbiAgICAgIHByZXNzLmFjdGl2ZSA9IHRydWU7XG4gICAgICBwcmVzcy5tb3ZlZEVub3VnaCA9IGZhbHNlO1xuICAgICAgcHJlc3Muc3RhcnRlZERyYWcgPSBmYWxzZTtcbiAgICAgIHByZXNzLnN1cHByZXNzQ2xpY2sgPSBmYWxzZTtcbiAgICAgIHByZXNzLmFsbG93RHJhZyA9IGlzU2VsZWN0ZWQgJiYgIWlzUmVtb3ZlQnV0dG9uVGFyZ2V0KGU/LnRhcmdldCk7XG4gICAgICBwcmVzcy5zdGFydENsaWVudFggPSBwb2ludC54O1xuICAgICAgcHJlc3Muc3RhcnRDbGllbnRZID0gcG9pbnQueTtcbiAgICAgIHByZXNzLnN0YXJ0Tm9kZVggPSBub2RlLngoKTtcbiAgICAgIHByZXNzLnN0YXJ0Tm9kZVkgPSBub2RlLnkoKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgbm9kZS5kcmFnZ2FibGUoZmFsc2UpO1xuICAgICAgfSBjYXRjaCB7fVxuXG4gICAgICBhdHRhY2hHbG9iYWxMaXN0ZW5lcnMoKTtcbiAgICB9LFxuICAgIFthdHRhY2hHbG9iYWxMaXN0ZW5lcnMsIGlzUmVtb3ZlQnV0dG9uVGFyZ2V0LCBpc1NlbGVjdGVkXVxuICApO1xuXG4gIGNvbnN0IGhhbmRsZVJvb3RDbGljayA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZSAmJiBlLmV2dCkgZS5ldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChwcmVzc1JlZi5jdXJyZW50LnN1cHByZXNzQ2xpY2spIHJldHVybjtcbiAgICAgIG9uU2VsZWN0Py4ob2JqLmlkLCBlKTtcbiAgICB9LFxuICAgIFtvYmouaWQsIG9uU2VsZWN0XVxuICApO1xuXG4gIGNvbnN0IHNlbGVjY2lvbmFyQ2VsZGEgPSAoaW5kZXgsIGV2dCkgPT4ge1xuICAgIGlmIChwcmVzc1JlZi5jdXJyZW50LnN1cHByZXNzQ2xpY2spIHJldHVybjtcbiAgICBpZiAoZXZ0Py50YXJnZXQ/LmlkPy4oKSA9PT0gYGJ0bi0ke29iai5pZH0tJHtpbmRleH1gKSByZXR1cm47XG4gICAgaWYgKGV2dCkgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgaWYgKGV2dD8uZXZ0KSBldnQuZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgb25TZWxlY3Q/LihvYmouaWQsIGV2dCk7XG4gICAgY29uc3QgcGF5bG9hZCA9IHsgb2JqSWQ6IG9iai5pZCwgaW5kZXggfTtcbiAgICBvblBpY2tDZWxsPy4ocGF5bG9hZCk7XG4gICAgc2V0Q2VsZGFHYWxlcmlhQWN0aXZhPy4ocGF5bG9hZCk7XG4gIH07XG5cbiAgY29uc3QgbGltcGlhckNlbGRhID0gKGluZGV4LCBldnQpID0+IHtcbiAgICBpZiAocHJlc3NSZWYuY3VycmVudC5zdXBwcmVzc0NsaWNrKSByZXR1cm47XG4gICAgaWYgKGV2dCkgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgaWYgKGV2dD8uZXZ0KSBldnQuZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgY29uc3QgbnVldmFzQ2VsbHMgPSBbLi4uKG9iai5jZWxscyB8fCBbXSldO1xuICAgIG51ZXZhc0NlbGxzW2luZGV4XSA9IHsgLi4uKG51ZXZhc0NlbGxzW2luZGV4XSB8fCB7fSksIG1lZGlhVXJsOiBudWxsIH07XG4gICAgb25DaGFuZ2U/LihvYmouaWQsIHsgY2VsbHM6IG51ZXZhc0NlbGxzIH0pO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiAoKSA9PiBjbGVhbnVwR2xvYmFsKCksIFtjbGVhbnVwR2xvYmFsXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8R3JvdXBcbiAgICAgIHg9e3RvTnVtKG9iai54LCAwKX1cbiAgICAgIHk9e3RvTnVtKG9iai55LCAwKSArIG9mZnNldFl9XG4gICAgICBpZD17b2JqLmlkfVxuICAgICAgY2xpcFg9ezB9XG4gICAgICBjbGlwWT17MH1cbiAgICAgIGNsaXBXaWR0aD17d2lkdGh9XG4gICAgICBjbGlwSGVpZ2h0PXtzYWZlVG90YWxIZWlnaHR9XG4gICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxuICAgICAgcmVmPXtzZXRSb290UmVmfVxuICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiB7XG4gICAgICAgIGlmICghd2luZG93Ll9pc0RyYWdnaW5nKSBvbkhvdmVyPy4ob2JqLmlkKTtcbiAgICAgIH19XG4gICAgICBvbk1vdXNlTGVhdmU9eygpID0+IHtcbiAgICAgICAgc2V0SG92ZXJlZENlbGwobnVsbCk7XG4gICAgICAgIG9uSG92ZXI/LihudWxsKTtcbiAgICAgIH19XG4gICAgICBvbk1vdXNlRG93bj17aGFuZGxlUHJlc3NTdGFydH1cbiAgICAgIG9uVG91Y2hTdGFydD17aGFuZGxlUHJlc3NTdGFydH1cbiAgICAgIG9uQ2xpY2s9e2hhbmRsZVJvb3RDbGlja31cbiAgICAgIG9uVGFwPXtoYW5kbGVSb290Q2xpY2t9XG4gICAgICBvbkRyYWdTdGFydD17KGUpID0+IHtcbiAgICAgICAgaWYgKCFpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgZS50YXJnZXQuc3RvcERyYWcoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93Ll9pc0RyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgb25EcmFnU3RhcnRQZXJzb25hbGl6YWRvPy4ob2JqLmlkKTtcbiAgICAgIH19XG4gICAgICBvbkRyYWdNb3ZlPXsoZSkgPT4ge1xuICAgICAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbz8uKHsgeDogZS50YXJnZXQueCgpLCB5OiBlLnRhcmdldC55KCkgfSwgb2JqLmlkKTtcbiAgICAgIH19XG4gICAgICBvbkRyYWdFbmQ9eyhlKSA9PiB7XG4gICAgICAgIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvPy4oeyB4OiBlLnRhcmdldC54KCksIHk6IGUudGFyZ2V0LnkoKSB9LCBvYmouaWQpO1xuXG4gICAgICAgIGNvbnN0IGZpbmFsWCA9IGUudGFyZ2V0LngoKTtcbiAgICAgICAgY29uc3QgZmluYWxZQWJzID0gZS50YXJnZXQueSgpO1xuXG4gICAgICAgIGNvbnN0IHsgbnVldmFTZWNjaW9uLCBjb29yZGVuYWRhc0FqdXN0YWRhcyB9ID0gZGV0ZXJtaW5hck51ZXZhU2VjY2lvbihcbiAgICAgICAgICBmaW5hbFlBYnMsXG4gICAgICAgICAgb2JqLnNlY2Npb25JZCxcbiAgICAgICAgICBzZWNjaW9uZXNPcmRlbmFkYXNcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAobnVldmFTZWNjaW9uKSB7XG4gICAgICAgICAgb25DaGFuZ2U/LihvYmouaWQsIHsgeDogZmluYWxYLCBzZWNjaW9uSWQ6IG51ZXZhU2VjY2lvbiwgLi4uY29vcmRlbmFkYXNBanVzdGFkYXMgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgeVJlbCA9IGZpbmFsWUFicyAtIG9mZnNldFk7XG4gICAgICAgICAgb25DaGFuZ2U/LihvYmouaWQsIHsgeDogZmluYWxYLCB5OiB5UmVsIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgd2luZG93Ll9pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8/LihvYmouaWQpO1xuICAgICAgICBlLnRhcmdldC5kcmFnZ2FibGUoZmFsc2UpO1xuICAgICAgICBwcmVzc1JlZi5jdXJyZW50LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBwcmVzc1JlZi5jdXJyZW50Lm1vdmVkRW5vdWdoID0gZmFsc2U7XG4gICAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRlZERyYWcgPSBmYWxzZTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcHJlc3NSZWYuY3VycmVudC5zdXBwcmVzc0NsaWNrID0gZmFsc2U7XG4gICAgICAgIH0sIDApO1xuICAgICAgICBjbGVhbnVwR2xvYmFsKCk7XG4gICAgICB9fVxuICAgID5cbiAgICAgIDxSZWN0XG4gICAgICAgIG5hbWU9XCJnYWxsZXJ5LXRyYW5zZm9ybS1mcmFtZVwiXG4gICAgICAgIHg9ezB9XG4gICAgICAgIHk9ezB9XG4gICAgICAgIHdpZHRoPXt3aWR0aH1cbiAgICAgICAgaGVpZ2h0PXtzYWZlVG90YWxIZWlnaHR9XG4gICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXG4gICAgICAgIHN0cm9rZUVuYWJsZWQ9e2ZhbHNlfVxuICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxuICAgICAgLz5cblxuICAgICAge3JlY3RzLm1hcCgociwgaSkgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gb2JqLmNlbGxzPy5baV0gfHwge307XG4gICAgICAgIGNvbnN0IGJnID0gY2VsbC5iZyB8fCBcIiNmM2Y0ZjZcIjtcbiAgICAgICAgY29uc3QgbWVkaWFVcmwgPSBjZWxsLm1lZGlhVXJsIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IGZpdCA9IGNlbGwuZml0IHx8IFwiY292ZXJcIjtcblxuICAgICAgICBjb25zdCBlc0FjdGl2YSA9XG4gICAgICAgICAgY2VsZGFHYWxlcmlhQWN0aXZhPy5vYmpJZCA9PT0gb2JqLmlkICYmXG4gICAgICAgICAgY2VsZGFHYWxlcmlhQWN0aXZhPy5pbmRleCA9PT0gaTtcblxuICAgICAgICBjb25zdCBjbGlwRnVuYyA9IChjdHgpID0+IHtcbiAgICAgICAgICBjb25zdCB3ID0gci53aWR0aDtcbiAgICAgICAgICBjb25zdCBoID0gci5oZWlnaHQ7XG4gICAgICAgICAgY29uc3QgcmFkID0gTWF0aC5taW4ocmFkaXVzLCBNYXRoLm1pbih3LCBoKSAvIDIpO1xuICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICBjdHgubW92ZVRvKHJhZCwgMCk7XG4gICAgICAgICAgY3R4LmxpbmVUbyh3IC0gcmFkLCAwKTtcbiAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbyh3LCAwLCB3LCByYWQpO1xuICAgICAgICAgIGN0eC5saW5lVG8odywgaCAtIHJhZCk7XG4gICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8odywgaCwgdyAtIHJhZCwgaCk7XG4gICAgICAgICAgY3R4LmxpbmVUbyhyYWQsIGgpO1xuICAgICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKDAsIGgsIDAsIGggLSByYWQpO1xuICAgICAgICAgIGN0eC5saW5lVG8oMCwgcmFkKTtcbiAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbygwLCAwLCByYWQsIDApO1xuICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBtb3N0cmFyQm90b25RdWl0YXIgPSBtZWRpYVVybCAmJiAoaG92ZXJlZENlbGwgPT09IGkgfHwgZXNBY3RpdmEpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPEdyb3VwXG4gICAgICAgICAgICBrZXk9e2Ake29iai5pZH0tJHtpfWB9XG4gICAgICAgICAgICB4PXtyLnh9XG4gICAgICAgICAgICB5PXtyLnl9XG4gICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHNldEhvdmVyZWRDZWxsKGkpfVxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiBzZXRIb3ZlcmVkQ2VsbChudWxsKX1cbiAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBzZWxlY2Npb25hckNlbGRhKGksIGUpfVxuICAgICAgICAgICAgb25UYXA9eyhlKSA9PiBzZWxlY2Npb25hckNlbGRhKGksIGUpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxSZWN0IHg9ezB9IHk9ezB9IHdpZHRoPXtyLndpZHRofSBoZWlnaHQ9e3IuaGVpZ2h0fSBmaWxsPVwidHJhbnNwYXJlbnRcIiAvPlxuXG4gICAgICAgICAgICA8R3JvdXAgY2xpcEZ1bmM9e2NsaXBGdW5jfSBsaXN0ZW5pbmc9e3RydWV9PlxuICAgICAgICAgICAgICA8UmVjdCB4PXswfSB5PXswfSB3aWR0aD17ci53aWR0aH0gaGVpZ2h0PXtyLmhlaWdodH0gZmlsbD17Ymd9IC8+XG4gICAgICAgICAgICAgIHttZWRpYVVybCAmJiAoXG4gICAgICAgICAgICAgICAgPEltYWdlbkNlbGRhIHNyYz17bWVkaWFVcmx9IGZpdD17Zml0fSB3PXtyLndpZHRofSBoPXtyLmhlaWdodH0gLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPFJlY3RcbiAgICAgICAgICAgICAgICB4PXswfVxuICAgICAgICAgICAgICAgIHk9ezB9XG4gICAgICAgICAgICAgICAgd2lkdGg9e3Iud2lkdGh9XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXtyLmhlaWdodH1cbiAgICAgICAgICAgICAgICBjb3JuZXJSYWRpdXM9e3JhZGl1cyB8fCAwfVxuICAgICAgICAgICAgICAgIHN0cm9rZT17ZXNBY3RpdmEgPyBcIiM3NzNkYmVcIiA6IFwiI2RkZFwifVxuICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtlc0FjdGl2YSA/IDIgOiAxfVxuICAgICAgICAgICAgICAgIGRhc2g9e2VzQWN0aXZhID8gWzYsIDRdIDogW119XG4gICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvR3JvdXA+XG5cbiAgICAgICAgICAgIHttb3N0cmFyQm90b25RdWl0YXIgJiYgKFxuICAgICAgICAgICAgICA8R3JvdXBcbiAgICAgICAgICAgICAgICBpZD17YGJ0bi0ke29iai5pZH0tJHtpfWB9XG4gICAgICAgICAgICAgICAgeD17ci53aWR0aCAtIDIwfVxuICAgICAgICAgICAgICAgIHk9ezB9XG4gICAgICAgICAgICAgICAgd2lkdGg9ezIwfVxuICAgICAgICAgICAgICAgIGhlaWdodD17MjB9XG4gICAgICAgICAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxuICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0SG92ZXJlZENlbGwoaSl9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IGxpbXBpYXJDZWxkYShpLCBlKX1cbiAgICAgICAgICAgICAgICBvblRhcD17KGUpID0+IGxpbXBpYXJDZWxkYShpLCBlKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxSZWN0IHdpZHRoPXsyMH0gaGVpZ2h0PXsyMH0gZmlsbD1cInJnYmEoMCwwLDAsMC42KVwiIGNvcm5lclJhZGl1cz17NH0gLz5cbiAgICAgICAgICAgICAgICA8S29udmFUZXh0XG4gICAgICAgICAgICAgICAgICB0ZXh0PVwieFwiXG4gICAgICAgICAgICAgICAgICBmb250U2l6ZT17MTR9XG4gICAgICAgICAgICAgICAgICBmaWxsPVwiI2ZmZlwiXG4gICAgICAgICAgICAgICAgICBhbGlnbj1cImNlbnRlclwiXG4gICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduPVwibWlkZGxlXCJcbiAgICAgICAgICAgICAgICAgIHdpZHRoPXsyMH1cbiAgICAgICAgICAgICAgICAgIGhlaWdodD17MjB9XG4gICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICk7XG4gICAgICB9KX1cbiAgICA8L0dyb3VwPlxuICApO1xufVxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIkdyb3VwIiwiUmVjdCIsIkltYWdlIiwiS29udmFJbWFnZSIsIlRleHQiLCJLb252YVRleHQiLCJ1c2VJbWFnZSIsImNhbGNHYWxsZXJ5TGF5b3V0IiwiY2FsY3VsYXJPZmZzZXRZIiwiZGV0ZXJtaW5hck51ZXZhU2VjY2lvbiIsIkRSQUdfVEhSRVNIT0xEX1BYIiwiZ2V0Q2xpZW50UG9pbnQiLCJldnQiLCJ0b3VjaCIsInRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsIngiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImNsaWVudFgiLCJ5IiwiY2xpZW50WSIsIkltYWdlbkNlbGRhIiwic3JjIiwiZml0IiwidyIsImgiLCJpbWciLCJlc2NDb250YWluIiwiTWF0aCIsIm1pbiIsIndpZHRoIiwiaGVpZ2h0IiwiZXNjQ292ZXIiLCJtYXgiLCJlc2MiLCJpdyIsImloIiwiaXgiLCJpeSIsImltYWdlIiwibGlzdGVuaW5nIiwiR2FsZXJpYUtvbnZhIiwib2JqIiwicmVnaXN0ZXJSZWYiLCJvbkhvdmVyIiwiaXNTZWxlY3RlZCIsIm9uU2VsZWN0Iiwib25DaGFuZ2UiLCJvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8iLCJvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyIsIm9uRHJhZ0VuZFBlcnNvbmFsaXphZG8iLCJjZWxkYUdhbGVyaWFBY3RpdmEiLCJvblBpY2tDZWxsIiwic2V0Q2VsZGFHYWxlcmlhQWN0aXZhIiwic2VjY2lvbmVzT3JkZW5hZGFzIiwiYWx0b0NhbnZhcyIsImhvdmVyZWRDZWxsIiwic2V0SG92ZXJlZENlbGwiLCJyb290UmVmIiwiY2xlYW51cEdsb2JhbFJlZiIsInByZXNzUmVmIiwiYWN0aXZlIiwibW92ZWRFbm91Z2giLCJzdGFydGVkRHJhZyIsInN1cHByZXNzQ2xpY2siLCJhbGxvd0RyYWciLCJzdGFydENsaWVudFgiLCJzdGFydENsaWVudFkiLCJzdGFydE5vZGVYIiwic3RhcnROb2RlWSIsInNldFJvb3RSZWYiLCJub2RlIiwiY3VycmVudCIsImlkIiwiaW5kZXhTZWNjaW9uIiwiZmluZEluZGV4IiwicyIsInNlY2Npb25JZCIsIm9mZnNldFkiLCJ0b051bSIsInYiLCJkIiwicmFkaXVzIiwiZ2FwIiwicm93cyIsImNvbHMiLCJjZWxsUmF0aW8iLCJyYXRpbyIsInJlY3RzIiwidG90YWxIZWlnaHQiLCJzYWZlVG90YWxIZWlnaHQiLCJpc1JlbW92ZUJ1dHRvblRhcmdldCIsInRhcmdldCIsInRhcmdldElkIiwiYXR0cnMiLCJzdGFydHNXaXRoIiwiY2xlYW51cEdsb2JhbCIsImF0dGFjaEdsb2JhbExpc3RlbmVycyIsIm9uTW92ZSIsImV2IiwicHJlc3MiLCJwb2ludCIsImR4IiwiZHkiLCJoeXBvdCIsInBvc2l0aW9uIiwiZ2V0TGF5ZXIiLCJiYXRjaERyYXciLCJkcmFnZ2FibGUiLCJzdGFydERyYWciLCJvblVwIiwiaXNEcmFnZ2luZyIsInN0b3BEcmFnIiwic2V0VGltZW91dCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYXB0dXJlIiwicGFzc2l2ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVQcmVzc1N0YXJ0IiwiZSIsImNhbmNlbEJ1YmJsZSIsImN1cnJlbnRUYXJnZXQiLCJoYW5kbGVSb290Q2xpY2siLCJzZWxlY2Npb25hckNlbGRhIiwiaW5kZXgiLCJwYXlsb2FkIiwib2JqSWQiLCJsaW1waWFyQ2VsZGEiLCJudWV2YXNDZWxscyIsImNlbGxzIiwibWVkaWFVcmwiLCJjbGlwWCIsImNsaXBZIiwiY2xpcFdpZHRoIiwiY2xpcEhlaWdodCIsInJlZiIsIm9uTW91c2VFbnRlciIsIl9pc0RyYWdnaW5nIiwib25Nb3VzZUxlYXZlIiwib25Nb3VzZURvd24iLCJvblRvdWNoU3RhcnQiLCJvbkNsaWNrIiwib25UYXAiLCJvbkRyYWdTdGFydCIsIm9uRHJhZ01vdmUiLCJvbkRyYWdFbmQiLCJmaW5hbFgiLCJmaW5hbFlBYnMiLCJudWV2YVNlY2Npb24iLCJjb29yZGVuYWRhc0FqdXN0YWRhcyIsInlSZWwiLCJuYW1lIiwiZmlsbCIsInN0cm9rZUVuYWJsZWQiLCJtYXAiLCJyIiwiaSIsImNlbGwiLCJiZyIsImVzQWN0aXZhIiwiY2xpcEZ1bmMiLCJjdHgiLCJyYWQiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJxdWFkcmF0aWNDdXJ2ZVRvIiwiY2xvc2VQYXRoIiwibW9zdHJhckJvdG9uUXVpdGFyIiwiY29ybmVyUmFkaXVzIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJkYXNoIiwidGV4dCIsImZvbnRTaXplIiwiYWxpZ24iLCJ2ZXJ0aWNhbEFsaWduIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/GaleriaKonva.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/countdown/CountdownKonva.jsx":
/*!************************************************************!*\
  !*** ./src/components/editor/countdown/CountdownKonva.jsx ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CountdownKonva)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-konva */ \"react-konva\");\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _countdownUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./countdownUtils */ \"(pages-dir-node)/./src/components/editor/countdown/countdownUtils.js\");\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n/* harmony import */ var _drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/drag/dragGrupal */ \"(pages-dir-node)/./src/drag/dragGrupal.js\");\n/* harmony import */ var _drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/drag/dragIndividual */ \"(pages-dir-node)/./src/drag/dragIndividual.js\");\n// src/components/editor/countdown/CountdownKonva.jsx\n\n\n\n\n\n\n\n/**\r\n * ✅ Comportamiento correcto:\r\n * - Click simple: SOLO selecciona (0 movimiento)\r\n * - Drag: SOLO si mantiene apretado + mueve más de THRESHOLD_PX\r\n *\r\n * ✅ Implementación pro:\r\n * - El nodo está draggable=false siempre.\r\n * - En mousedown/touchstart: empezamos un \"press\".\r\n * - En mousemove/touchmove global: si supera umbral => habilitamos draggable y llamamos startDrag()\r\n * - En mouseup/touchend global: si no llegó a umbral => no hubo drag; si hubo => cerramos y deshabilitamos.\r\n */ function CountdownKonva({ obj, registerRef, onHover, seccionesOrdenadas, altoCanvas, onSelect, onChange, onDragStartPersonalizado, onDragMovePersonalizado, onDragEndPersonalizado, dragStartPos, hasDragged }) {\n    const rootRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const dragMoveRafRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const lastDragMovePosRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Tick cada 1s (no re-render si estamos arrastrando)\n    const [tick, setTick] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const draggingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CountdownKonva.useEffect\": ()=>{\n            const t = setInterval({\n                \"CountdownKonva.useEffect.t\": ()=>{\n                    if (!draggingRef.current) setTick({\n                        \"CountdownKonva.useEffect.t\": (n)=>(n + 1) % 60\n                    }[\"CountdownKonva.useEffect.t\"]);\n                }\n            }[\"CountdownKonva.useEffect.t\"], 1000);\n            return ({\n                \"CountdownKonva.useEffect\": ()=>clearInterval(t)\n            })[\"CountdownKonva.useEffect\"];\n        }\n    }[\"CountdownKonva.useEffect\"], []);\n    // Registrar nodo raíz\n    const setRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[setRefs]\": (node)=>{\n            rootRef.current = node;\n            if (typeof registerRef === \"function\") registerRef(obj.id, node || null);\n        }\n    }[\"CountdownKonva.useCallback[setRefs]\"], [\n        obj.id,\n        registerRef\n    ]);\n    // y absoluta = y relativa + offset de sección\n    const yAbs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CountdownKonva.useMemo[yAbs]\": ()=>{\n            const idx = seccionesOrdenadas.findIndex({\n                \"CountdownKonva.useMemo[yAbs].idx\": (s)=>s.id === obj.seccionId\n            }[\"CountdownKonva.useMemo[yAbs].idx\"]);\n            const safe = idx >= 0 ? idx : 0;\n            const off = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_4__.calcularOffsetY)(seccionesOrdenadas, safe, altoCanvas) || 0;\n            return (obj.y ?? 0) + off;\n        }\n    }[\"CountdownKonva.useMemo[yAbs]\"], [\n        obj.y,\n        obj.seccionId,\n        seccionesOrdenadas,\n        altoCanvas\n    ]);\n    // Tiempo restante\n    const state = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CountdownKonva.useMemo[state]\": ()=>(0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.getRemainingParts)(obj.fechaObjetivo)\n    }[\"CountdownKonva.useMemo[state]\"], [\n        obj.fechaObjetivo,\n        tick\n    ]);\n    const parts = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"CountdownKonva.useMemo[parts]\": ()=>[\n                {\n                    key: \"d\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.d, obj.padZero),\n                    label: \"Días\"\n                },\n                {\n                    key: \"h\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.h, obj.padZero),\n                    label: \"Horas\"\n                },\n                {\n                    key: \"m\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.m, obj.padZero),\n                    label: \"Min\"\n                },\n                {\n                    key: \"s\",\n                    value: (0,_countdownUtils__WEBPACK_IMPORTED_MODULE_3__.fmt)(state.s, obj.padZero),\n                    label: \"Seg\"\n                }\n            ]\n    }[\"CountdownKonva.useMemo[parts]\"], [\n        state.d,\n        state.h,\n        state.m,\n        state.s,\n        obj.padZero\n    ]);\n    // Layout\n    const n = parts.length;\n    const gap = obj.gap ?? 8;\n    const paddingY = obj.paddingY ?? 6;\n    const paddingX = obj.paddingX ?? 8;\n    const valueSize = obj.fontSize ?? 16;\n    const labelSize = obj.labelSize ?? 10;\n    const showLabels = !!obj.showLabels;\n    const chipW = (obj.chipWidth ?? 46) + paddingX * 2;\n    const chipH = paddingY * 2 + valueSize + (showLabels ? labelSize : 0);\n    const totalChipsW = n * chipW + gap * (n - 1);\n    const containerW = Math.max(obj.width ?? 0, totalChipsW);\n    const containerH = Math.max(obj.height ?? chipH, chipH);\n    const contentOffsetY = (containerH - chipH) / 2;\n    const startX = 0;\n    // ---------------------------\n    // Drag gating (la clave)\n    // ---------------------------\n    const THRESHOLD_PX = 4; // más responsivo para que el elemento no se sienta \"atrasado\" al iniciar drag.\n    const pressRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        active: false,\n        movedEnough: false,\n        startedDrag: false,\n        startClientX: 0,\n        startClientY: 0,\n        startNodeX: 0,\n        startNodeY: 0,\n        // para ignorar click si se convirtió en drag\n        suppressClick: false\n    });\n    const cleanupGlobalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cleanupGlobal = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[cleanupGlobal]\": ()=>{\n            if (cleanupGlobalRef.current) {\n                try {\n                    cleanupGlobalRef.current();\n                } catch  {}\n                cleanupGlobalRef.current = null;\n            }\n        }\n    }[\"CountdownKonva.useCallback[cleanupGlobal]\"], []);\n    const attachGlobalListeners = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[attachGlobalListeners]\": ()=>{\n            cleanupGlobal();\n            const onMove = {\n                \"CountdownKonva.useCallback[attachGlobalListeners].onMove\": (ev)=>{\n                    if (!pressRef.current.active) return;\n                    if (pressRef.current.startedDrag) return;\n                    const cx = ev.clientX ?? (ev.touches && ev.touches[0]?.clientX) ?? null;\n                    const cy = ev.clientY ?? (ev.touches && ev.touches[0]?.clientY) ?? null;\n                    if (cx == null || cy == null) return;\n                    const dx = cx - pressRef.current.startClientX;\n                    const dy = cy - pressRef.current.startClientY;\n                    const dist = Math.hypot(dx, dy);\n                    if (dist < THRESHOLD_PX) return;\n                    // ✅ Se convirtió en drag intencional\n                    pressRef.current.movedEnough = true;\n                    pressRef.current.startedDrag = true;\n                    pressRef.current.suppressClick = true;\n                    const node = rootRef.current;\n                    if (!node) return;\n                    // Asegurar que empiece desde la posición exacta del press (evita saltitos)\n                    try {\n                        node.position({\n                            x: pressRef.current.startNodeX,\n                            y: pressRef.current.startNodeY\n                        });\n                        node.getLayer()?.batchDraw();\n                    } catch  {}\n                    // Habilitar drag solo ahora\n                    try {\n                        node.draggable(true);\n                    } catch  {}\n                    // Bloquear re-render por tick durante drag\n                    draggingRef.current = true;\n                    window._isDragging = true;\n                    if (hasDragged?.current != null) hasDragged.current = true;\n                    // Necesario para que tu motor individual tenga un startPos coherente incluso si CanvasEditor no lo setea\n                    try {\n                        const stage = node.getStage();\n                        const p = stage?.getPointerPosition?.();\n                        if (dragStartPos && p) dragStartPos.current = {\n                            x: p.x,\n                            y: p.y\n                        };\n                    } catch  {}\n                    // Iniciar drag nativo de Konva (esto dispara dragstart/dragmove/dragend)\n                    try {\n                        node.startDrag();\n                    } catch  {}\n                }\n            }[\"CountdownKonva.useCallback[attachGlobalListeners].onMove\"];\n            const onUp = {\n                \"CountdownKonva.useCallback[attachGlobalListeners].onUp\": ()=>{\n                    // Siempre cerramos el press\n                    pressRef.current.active = false;\n                    const node = rootRef.current;\n                    if (!node) {\n                        cleanupGlobal();\n                        return;\n                    }\n                    // Si NO se convirtió en drag, garantizamos 0 movimiento\n                    if (!pressRef.current.movedEnough) {\n                        try {\n                            node.position({\n                                x: pressRef.current.startNodeX,\n                                y: pressRef.current.startNodeY\n                            });\n                            node.getLayer()?.batchDraw();\n                        } catch  {}\n                    // click permitido\n                    } else {\n                        // Si fue drag, aseguramos que termine\n                        try {\n                            if (node.isDragging?.()) node.stopDrag();\n                        } catch  {}\n                    }\n                    // Reset flags\n                    pressRef.current.movedEnough = false;\n                    pressRef.current.startedDrag = false;\n                    // Volver a modo \"no draggable\" siempre (clave para que el click nunca dispare drag)\n                    try {\n                        node.draggable(false);\n                    } catch  {}\n                    draggingRef.current = false;\n                    window._isDragging = false;\n                    // Permitimos clicks futuros\n                    setTimeout({\n                        \"CountdownKonva.useCallback[attachGlobalListeners].onUp\": ()=>{\n                            pressRef.current.suppressClick = false;\n                            if (hasDragged?.current != null) hasDragged.current = false;\n                        }\n                    }[\"CountdownKonva.useCallback[attachGlobalListeners].onUp\"], 0);\n                    cleanupGlobal();\n                }\n            }[\"CountdownKonva.useCallback[attachGlobalListeners].onUp\"];\n            window.addEventListener(\"mousemove\", onMove, true);\n            window.addEventListener(\"touchmove\", onMove, {\n                capture: true,\n                passive: true\n            });\n            window.addEventListener(\"mouseup\", onUp, true);\n            window.addEventListener(\"touchend\", onUp, true);\n            window.addEventListener(\"pointercancel\", onUp, true);\n            window.addEventListener(\"blur\", onUp, true);\n            cleanupGlobalRef.current = ({\n                \"CountdownKonva.useCallback[attachGlobalListeners]\": ()=>{\n                    window.removeEventListener(\"mousemove\", onMove, true);\n                    window.removeEventListener(\"touchmove\", onMove, true);\n                    window.removeEventListener(\"mouseup\", onUp, true);\n                    window.removeEventListener(\"touchend\", onUp, true);\n                    window.removeEventListener(\"pointercancel\", onUp, true);\n                    window.removeEventListener(\"blur\", onUp, true);\n                }\n            })[\"CountdownKonva.useCallback[attachGlobalListeners]\"];\n        }\n    }[\"CountdownKonva.useCallback[attachGlobalListeners]\"], [\n        THRESHOLD_PX,\n        cleanupGlobal,\n        dragStartPos,\n        hasDragged\n    ]);\n    // ---------------------------\n    // Handlers del nodo\n    // ---------------------------\n    const handleDown = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDown]\": (e)=>{\n            e.cancelBubble = true;\n            const node = e.currentTarget;\n            const ev = e.evt;\n            // Iniciar press\n            pressRef.current.active = true;\n            pressRef.current.movedEnough = false;\n            pressRef.current.startedDrag = false;\n            pressRef.current.suppressClick = false;\n            // Guardar posición inicial del nodo\n            pressRef.current.startNodeX = node.x();\n            pressRef.current.startNodeY = node.y();\n            // Guardar punto inicial del puntero (en px reales)\n            const cx = ev?.clientX ?? (ev?.touches && ev.touches[0]?.clientX) ?? 0;\n            const cy = ev?.clientY ?? (ev?.touches && ev.touches[0]?.clientY) ?? 0;\n            pressRef.current.startClientX = cx;\n            pressRef.current.startClientY = cy;\n            // Por defecto NO draggable en press (clave)\n            try {\n                node.draggable(false);\n            } catch  {}\n            if (hasDragged?.current != null) hasDragged.current = false;\n            attachGlobalListeners();\n        }\n    }[\"CountdownKonva.useCallback[handleDown]\"], [\n        attachGlobalListeners,\n        hasDragged\n    ]);\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleClick]\": (e)=>{\n            e.cancelBubble = true;\n            // Si este click se convirtió en drag, no seleccionar “de vuelta”\n            if (pressRef.current.suppressClick) return;\n            onSelect?.(obj.id, e);\n        }\n    }[\"CountdownKonva.useCallback[handleClick]\"], [\n        obj.id,\n        onSelect\n    ]);\n    const handleMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleMouseEnter]\": ()=>{\n            if (window._isDragging) return;\n            onHover?.(obj.id);\n        }\n    }[\"CountdownKonva.useCallback[handleMouseEnter]\"], [\n        onHover,\n        obj.id\n    ]);\n    const handleMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleMouseLeave]\": ()=>{\n            onHover?.(null);\n        }\n    }[\"CountdownKonva.useCallback[handleMouseLeave]\"], [\n        onHover\n    ]);\n    // Estos handlers solo corren cuando el drag fue habilitado y startDrag() se llamó\n    const handleDragStart = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDragStart]\": (e)=>{\n            if (dragMoveRafRef.current != null) {\n                cancelAnimationFrame(dragMoveRafRef.current);\n                dragMoveRafRef.current = null;\n            }\n            lastDragMovePosRef.current = null;\n            onDragStartPersonalizado?.(obj.id, e);\n            // Arranque de tu lógica grupal/individual\n            const esGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.startDragGrupalLider)(e, obj);\n            if (!esGrupal) (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.startDragIndividual)(e, dragStartPos);\n        }\n    }[\"CountdownKonva.useCallback[handleDragStart]\"], [\n        obj,\n        dragStartPos,\n        onDragStartPersonalizado\n    ]);\n    const handleDragMove = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDragMove]\": (e)=>{\n            if (window._grupoLider) {\n                if (obj.id === window._grupoLider) {\n                    (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.previewDragGrupal)(e, obj, onChange);\n                    if (onDragMovePersonalizado) {\n                        lastDragMovePosRef.current = {\n                            x: e.target.x(),\n                            y: e.target.y()\n                        };\n                        if (dragMoveRafRef.current == null) {\n                            dragMoveRafRef.current = requestAnimationFrame({\n                                \"CountdownKonva.useCallback[handleDragMove]\": ()=>{\n                                    dragMoveRafRef.current = null;\n                                    const latestPos = lastDragMovePosRef.current;\n                                    if (!latestPos) return;\n                                    onDragMovePersonalizado(latestPos, obj.id);\n                                }\n                            }[\"CountdownKonva.useCallback[handleDragMove]\"]);\n                        }\n                    }\n                }\n                return;\n            }\n            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.previewDragIndividual)(e, obj, {\n                \"CountdownKonva.useCallback[handleDragMove]\": (pos)=>{\n                    if (!onDragMovePersonalizado) return;\n                    lastDragMovePosRef.current = pos;\n                    // Evita saturar React/UI en dragmove; máximo 1 actualización por frame.\n                    if (dragMoveRafRef.current != null) return;\n                    dragMoveRafRef.current = requestAnimationFrame({\n                        \"CountdownKonva.useCallback[handleDragMove]\": ()=>{\n                            dragMoveRafRef.current = null;\n                            const latestPos = lastDragMovePosRef.current;\n                            if (!latestPos) return;\n                            onDragMovePersonalizado(latestPos, obj.id);\n                        }\n                    }[\"CountdownKonva.useCallback[handleDragMove]\"]);\n                }\n            }[\"CountdownKonva.useCallback[handleDragMove]\"]);\n        }\n    }[\"CountdownKonva.useCallback[handleDragMove]\"], [\n        obj,\n        onChange,\n        onDragMovePersonalizado\n    ]);\n    const handleDragEnd = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"CountdownKonva.useCallback[handleDragEnd]\": (e)=>{\n            const node = e.currentTarget;\n            if (dragMoveRafRef.current != null) {\n                cancelAnimationFrame(dragMoveRafRef.current);\n                dragMoveRafRef.current = null;\n            }\n            lastDragMovePosRef.current = null;\n            // Commit final\n            const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.endDragGrupal)(e, obj, onChange, hasDragged, {\n                \"CountdownKonva.useCallback[handleDragEnd].fueGrupal\": ()=>{}\n            }[\"CountdownKonva.useCallback[handleDragEnd].fueGrupal\"]);\n            if (fueGrupal) {\n                onDragEndPersonalizado?.();\n            } else {\n                (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.endDragIndividual)(obj, node, onChange, onDragEndPersonalizado, hasDragged);\n            }\n            // Volver a no-draggable (clave)\n            try {\n                node.draggable(false);\n            } catch  {}\n            draggingRef.current = false;\n            window._isDragging = false;\n            // Limpieza del press\n            pressRef.current.active = false;\n            pressRef.current.movedEnough = false;\n            pressRef.current.startedDrag = false;\n            // permitir click futuro\n            setTimeout({\n                \"CountdownKonva.useCallback[handleDragEnd]\": ()=>{\n                    pressRef.current.suppressClick = false;\n                    if (hasDragged?.current != null) hasDragged.current = false;\n                }\n            }[\"CountdownKonva.useCallback[handleDragEnd]\"], 0);\n            cleanupGlobal();\n        }\n    }[\"CountdownKonva.useCallback[handleDragEnd]\"], [\n        obj,\n        onChange,\n        hasDragged,\n        onDragEndPersonalizado,\n        cleanupGlobal\n    ]);\n    // Cleanup global por si el componente se desmonta en pleno press\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CountdownKonva.useEffect\": ()=>{\n            return ({\n                \"CountdownKonva.useEffect\": ()=>{\n                    cleanupGlobal();\n                    if (dragMoveRafRef.current != null) {\n                        cancelAnimationFrame(dragMoveRafRef.current);\n                        dragMoveRafRef.current = null;\n                    }\n                    lastDragMovePosRef.current = null;\n                }\n            })[\"CountdownKonva.useEffect\"];\n        }\n    }[\"CountdownKonva.useEffect\"], [\n        cleanupGlobal\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n        ref: setRefs,\n        id: obj.id,\n        x: obj.x ?? 0,\n        y: yAbs,\n        rotation: obj.rotation || 0,\n        scaleX: obj.scaleX || 1,\n        scaleY: obj.scaleY || 1,\n        // ✅ SIEMPRE false: el drag se habilita imperativamente solo si hubo intención\n        draggable: false,\n        listening: true,\n        onMouseDown: handleDown,\n        onTouchStart: handleDown,\n        onClick: handleClick,\n        onTap: handleClick,\n        onMouseEnter: handleMouseEnter,\n        onMouseLeave: handleMouseLeave,\n        onDragStart: handleDragStart,\n        onDragMove: handleDragMove,\n        onDragEnd: handleDragEnd,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                name: \"countdown-hitbox\",\n                width: containerW,\n                height: containerH,\n                fill: obj.background || \"transparent\",\n                // El borde de selección lo dibuja SelectionBounds (Transformer).\n                // Evita doble recuadro (violeta + celeste punteado) en countdown.\n                stroke: \"transparent\",\n                strokeWidth: 0,\n                cornerRadius: 8,\n                listening: true,\n                perfectDrawEnabled: false\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                lineNumber: 423,\n                columnNumber: 7\n            }, this),\n            !state.invalid && !state.ended && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                listening: false,\n                children: parts.map((it, i)=>{\n                    const x = startX + i * (chipW + gap);\n                    const sepText = obj.separator || \"\";\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Group, {\n                        x: x,\n                        y: contentOffsetY,\n                        listening: false,\n                        children: [\n                            obj.layout !== \"minimal\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Rect, {\n                                width: chipW,\n                                height: chipH,\n                                fill: obj.boxBg || \"#fff\",\n                                stroke: obj.boxBorder || \"#e5e7eb\",\n                                cornerRadius: Math.min(obj.boxRadius ?? 8, chipW / 2, chipH / 2),\n                                shadowBlur: obj.boxShadow ? 8 : 0,\n                                shadowColor: obj.boxShadow ? \"rgba(0,0,0,0.15)\" : \"transparent\",\n                                listening: false,\n                                perfectDrawEnabled: false,\n                                shadowForStrokeEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 446,\n                                columnNumber: 19\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                text: it.value,\n                                fill: obj.color || \"#111827\",\n                                fontFamily: obj.fontFamily,\n                                fontStyle: \"bold\",\n                                fontSize: valueSize,\n                                width: chipW,\n                                align: \"center\",\n                                y: paddingY + valueSize / 2,\n                                offsetY: valueSize / 2,\n                                listening: false,\n                                perfectDrawEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 460,\n                                columnNumber: 17\n                            }, this),\n                            showLabels && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                text: it.label,\n                                fill: obj.labelColor || \"#6b7280\",\n                                fontFamily: obj.fontFamily,\n                                fontSize: labelSize,\n                                width: chipW,\n                                align: \"center\",\n                                y: paddingY + valueSize + labelSize / 2,\n                                offsetY: labelSize / 2,\n                                listening: false,\n                                perfectDrawEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 475,\n                                columnNumber: 19\n                            }, this),\n                            !!sepText && i < parts.length - 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                x: chipW + gap * 0.25,\n                                y: chipH * 0.3,\n                                text: sepText,\n                                fill: obj.color || \"#111827\",\n                                fontFamily: obj.fontFamily,\n                                fontSize: valueSize,\n                                listening: false,\n                                perfectDrawEnabled: false\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                                lineNumber: 490,\n                                columnNumber: 19\n                            }, this)\n                        ]\n                    }, it.key, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                        lineNumber: 444,\n                        columnNumber: 15\n                    }, this);\n                })\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n                lineNumber: 438,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\countdown\\\\CountdownKonva.jsx\",\n        lineNumber: 397,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9jb3VudGRvd24vQ291bnRkb3duS29udmEuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEscURBQXFEOztBQUNxQjtBQUMxQjtBQUNVO0FBQ1Q7QUFFMEM7QUFDVztBQUV0Rzs7Ozs7Ozs7OztDQVVDLEdBQ2MsU0FBU2lCLGVBQWUsRUFDckNDLEdBQUcsRUFDSEMsV0FBVyxFQUNYQyxPQUFPLEVBQ1BDLGtCQUFrQixFQUNsQkMsVUFBVSxFQUNWQyxRQUFRLEVBQ1JDLFFBQVEsRUFDUkMsd0JBQXdCLEVBQ3hCQyx1QkFBdUIsRUFDdkJDLHNCQUFzQixFQUN0QkMsWUFBWSxFQUNaQyxVQUFVLEVBQ1g7SUFDQyxNQUFNQyxVQUFVNUIsNkNBQU1BLENBQUM7SUFDdkIsTUFBTTZCLGlCQUFpQjdCLDZDQUFNQSxDQUFDO0lBQzlCLE1BQU04QixxQkFBcUI5Qiw2Q0FBTUEsQ0FBQztJQUVsQyxxREFBcUQ7SUFDckQsTUFBTSxDQUFDK0IsTUFBTUMsUUFBUSxHQUFHL0IsK0NBQVFBLENBQUM7SUFDakMsTUFBTWdDLGNBQWNqQyw2Q0FBTUEsQ0FBQztJQUUzQkYsZ0RBQVNBO29DQUFDO1lBQ1IsTUFBTW9DLElBQUlDOzhDQUFZO29CQUNwQixJQUFJLENBQUNGLFlBQVlHLE9BQU8sRUFBRUo7c0RBQVEsQ0FBQ0ssSUFBTSxDQUFDQSxJQUFJLEtBQUs7O2dCQUNyRDs2Q0FBRztZQUNIOzRDQUFPLElBQU1DLGNBQWNKOztRQUM3QjttQ0FBRyxFQUFFO0lBRUwsc0JBQXNCO0lBQ3RCLE1BQU1LLFVBQVVyQyxrREFBV0E7K0NBQ3pCLENBQUNzQztZQUNDWixRQUFRUSxPQUFPLEdBQUdJO1lBQ2xCLElBQUksT0FBT3ZCLGdCQUFnQixZQUFZQSxZQUFZRCxJQUFJeUIsRUFBRSxFQUFFRCxRQUFRO1FBQ3JFOzhDQUNBO1FBQUN4QixJQUFJeUIsRUFBRTtRQUFFeEI7S0FBWTtJQUd2Qiw4Q0FBOEM7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LE1BQU07Z0NBQ2pCWixHQUFHcUIsUUFBUTtnQ0FDWDhHLE1BQU1YO2dDQUNOWCxNQUFNOUksSUFBSXFLLEtBQUssSUFBSTtnQ0FDbkJDLFlBQVl0SyxJQUFJc0ssVUFBVTtnQ0FDMUJySCxVQUFVRDtnQ0FDVm1GLFdBQVc7Z0NBQ1hnQixvQkFBb0I7Ozs7Ozs7dUJBdERkSSxHQUFHbEgsR0FBRzs7Ozs7Z0JBMkR0Qjs7Ozs7Ozs7Ozs7O0FBS1YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxjb3VudGRvd25cXENvdW50ZG93bktvbnZhLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3IvY291bnRkb3duL0NvdW50ZG93bktvbnZhLmpzeFxyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IEdyb3VwLCBSZWN0LCBUZXh0IH0gZnJvbSBcInJlYWN0LWtvbnZhXCI7XHJcbmltcG9ydCB7IGdldFJlbWFpbmluZ1BhcnRzLCBmbXQgfSBmcm9tIFwiLi9jb3VudGRvd25VdGlsc1wiO1xyXG5pbXBvcnQgeyBjYWxjdWxhck9mZnNldFkgfSBmcm9tIFwiQC91dGlscy9sYXlvdXRcIjtcclxuXHJcbmltcG9ydCB7IHN0YXJ0RHJhZ0dydXBhbExpZGVyLCBwcmV2aWV3RHJhZ0dydXBhbCwgZW5kRHJhZ0dydXBhbCB9IGZyb20gXCJAL2RyYWcvZHJhZ0dydXBhbFwiO1xyXG5pbXBvcnQgeyBzdGFydERyYWdJbmRpdmlkdWFsLCBwcmV2aWV3RHJhZ0luZGl2aWR1YWwsIGVuZERyYWdJbmRpdmlkdWFsIH0gZnJvbSBcIkAvZHJhZy9kcmFnSW5kaXZpZHVhbFwiO1xyXG5cclxuLyoqXHJcbiAqIOKchSBDb21wb3J0YW1pZW50byBjb3JyZWN0bzpcclxuICogLSBDbGljayBzaW1wbGU6IFNPTE8gc2VsZWNjaW9uYSAoMCBtb3ZpbWllbnRvKVxyXG4gKiAtIERyYWc6IFNPTE8gc2kgbWFudGllbmUgYXByZXRhZG8gKyBtdWV2ZSBtw6FzIGRlIFRIUkVTSE9MRF9QWFxyXG4gKlxyXG4gKiDinIUgSW1wbGVtZW50YWNpw7NuIHBybzpcclxuICogLSBFbCBub2RvIGVzdMOhIGRyYWdnYWJsZT1mYWxzZSBzaWVtcHJlLlxyXG4gKiAtIEVuIG1vdXNlZG93bi90b3VjaHN0YXJ0OiBlbXBlemFtb3MgdW4gXCJwcmVzc1wiLlxyXG4gKiAtIEVuIG1vdXNlbW92ZS90b3VjaG1vdmUgZ2xvYmFsOiBzaSBzdXBlcmEgdW1icmFsID0+IGhhYmlsaXRhbW9zIGRyYWdnYWJsZSB5IGxsYW1hbW9zIHN0YXJ0RHJhZygpXHJcbiAqIC0gRW4gbW91c2V1cC90b3VjaGVuZCBnbG9iYWw6IHNpIG5vIGxsZWfDsyBhIHVtYnJhbCA9PiBubyBodWJvIGRyYWc7IHNpIGh1Ym8gPT4gY2VycmFtb3MgeSBkZXNoYWJpbGl0YW1vcy5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENvdW50ZG93bktvbnZhKHtcbiAgb2JqLFxuICByZWdpc3RlclJlZixcbiAgb25Ib3ZlcixcbiAgc2VjY2lvbmVzT3JkZW5hZGFzLFxuICBhbHRvQ2FudmFzLFxuICBvblNlbGVjdCxcbiAgb25DaGFuZ2UsXG4gIG9uRHJhZ1N0YXJ0UGVyc29uYWxpemFkbyxcbiAgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8sXG4gIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8sXG4gIGRyYWdTdGFydFBvcyxcbiAgaGFzRHJhZ2dlZCxcbn0pIHtcbiAgY29uc3Qgcm9vdFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZHJhZ01vdmVSYWZSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGxhc3REcmFnTW92ZVBvc1JlZiA9IHVzZVJlZihudWxsKTtcblxyXG4gIC8vIFRpY2sgY2FkYSAxcyAobm8gcmUtcmVuZGVyIHNpIGVzdGFtb3MgYXJyYXN0cmFuZG8pXHJcbiAgY29uc3QgW3RpY2ssIHNldFRpY2tdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgZHJhZ2dpbmdSZWYgPSB1c2VSZWYoZmFsc2UpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgdCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgaWYgKCFkcmFnZ2luZ1JlZi5jdXJyZW50KSBzZXRUaWNrKChuKSA9PiAobiArIDEpICUgNjApO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbCh0KTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIFJlZ2lzdHJhciBub2RvIHJhw616XHJcbiAgY29uc3Qgc2V0UmVmcyA9IHVzZUNhbGxiYWNrKFxuICAgIChub2RlKSA9PiB7XG4gICAgICByb290UmVmLmN1cnJlbnQgPSBub2RlO1xuICAgICAgaWYgKHR5cGVvZiByZWdpc3RlclJlZiA9PT0gXCJmdW5jdGlvblwiKSByZWdpc3RlclJlZihvYmouaWQsIG5vZGUgfHwgbnVsbCk7XG4gICAgfSxcbiAgICBbb2JqLmlkLCByZWdpc3RlclJlZl1cbiAgKTtcblxyXG4gIC8vIHkgYWJzb2x1dGEgPSB5IHJlbGF0aXZhICsgb2Zmc2V0IGRlIHNlY2Npw7NuXHJcbiAgY29uc3QgeUFicyA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgY29uc3QgaWR4ID0gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmRJbmRleCgocykgPT4gcy5pZCA9PT0gb2JqLnNlY2Npb25JZCk7XHJcbiAgICBjb25zdCBzYWZlID0gaWR4ID49IDAgPyBpZHggOiAwO1xyXG4gICAgY29uc3Qgb2ZmID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgc2FmZSwgYWx0b0NhbnZhcykgfHwgMDtcclxuICAgIHJldHVybiAob2JqLnkgPz8gMCkgKyBvZmY7XHJcbiAgfSwgW29iai55LCBvYmouc2VjY2lvbklkLCBzZWNjaW9uZXNPcmRlbmFkYXMsIGFsdG9DYW52YXNdKTtcclxuXHJcbiAgLy8gVGllbXBvIHJlc3RhbnRlXHJcbiAgY29uc3Qgc3RhdGUgPSB1c2VNZW1vKCgpID0+IGdldFJlbWFpbmluZ1BhcnRzKG9iai5mZWNoYU9iamV0aXZvKSwgW29iai5mZWNoYU9iamV0aXZvLCB0aWNrXSk7XHJcblxyXG4gIGNvbnN0IHBhcnRzID0gdXNlTWVtbyhcclxuICAgICgpID0+IFtcclxuICAgICAgeyBrZXk6IFwiZFwiLCB2YWx1ZTogZm10KHN0YXRlLmQsIG9iai5wYWRaZXJvKSwgbGFiZWw6IFwiRMOtYXNcIiB9LFxyXG4gICAgICB7IGtleTogXCJoXCIsIHZhbHVlOiBmbXQoc3RhdGUuaCwgb2JqLnBhZFplcm8pLCBsYWJlbDogXCJIb3Jhc1wiIH0sXHJcbiAgICAgIHsga2V5OiBcIm1cIiwgdmFsdWU6IGZtdChzdGF0ZS5tLCBvYmoucGFkWmVybyksIGxhYmVsOiBcIk1pblwiIH0sXHJcbiAgICAgIHsga2V5OiBcInNcIiwgdmFsdWU6IGZtdChzdGF0ZS5zLCBvYmoucGFkWmVybyksIGxhYmVsOiBcIlNlZ1wiIH0sXHJcbiAgICBdLFxyXG4gICAgW3N0YXRlLmQsIHN0YXRlLmgsIHN0YXRlLm0sIHN0YXRlLnMsIG9iai5wYWRaZXJvXVxyXG4gICk7XHJcblxyXG4gIC8vIExheW91dFxyXG4gIGNvbnN0IG4gPSBwYXJ0cy5sZW5ndGg7XHJcbiAgY29uc3QgZ2FwID0gb2JqLmdhcCA/PyA4O1xyXG4gIGNvbnN0IHBhZGRpbmdZID0gb2JqLnBhZGRpbmdZID8/IDY7XHJcbiAgY29uc3QgcGFkZGluZ1ggPSBvYmoucGFkZGluZ1ggPz8gODtcclxuXHJcbiAgY29uc3QgdmFsdWVTaXplID0gb2JqLmZvbnRTaXplID8/IDE2O1xyXG4gIGNvbnN0IGxhYmVsU2l6ZSA9IG9iai5sYWJlbFNpemUgPz8gMTA7XHJcbiAgY29uc3Qgc2hvd0xhYmVscyA9ICEhb2JqLnNob3dMYWJlbHM7XHJcblxyXG4gIGNvbnN0IGNoaXBXID0gKG9iai5jaGlwV2lkdGggPz8gNDYpICsgcGFkZGluZ1ggKiAyO1xyXG4gIGNvbnN0IGNoaXBIID0gcGFkZGluZ1kgKiAyICsgdmFsdWVTaXplICsgKHNob3dMYWJlbHMgPyBsYWJlbFNpemUgOiAwKTtcclxuXHJcbiAgY29uc3QgdG90YWxDaGlwc1cgPSBuICogY2hpcFcgKyBnYXAgKiAobiAtIDEpO1xyXG4gIGNvbnN0IGNvbnRhaW5lclcgPSBNYXRoLm1heChvYmoud2lkdGggPz8gMCwgdG90YWxDaGlwc1cpO1xyXG4gIGNvbnN0IGNvbnRhaW5lckggPSBNYXRoLm1heChvYmouaGVpZ2h0ID8/IGNoaXBILCBjaGlwSCk7XHJcbiAgY29uc3QgY29udGVudE9mZnNldFkgPSAoY29udGFpbmVySCAtIGNoaXBIKSAvIDI7XHJcbiAgY29uc3Qgc3RhcnRYID0gMDtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gRHJhZyBnYXRpbmcgKGxhIGNsYXZlKVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGNvbnN0IFRIUkVTSE9MRF9QWCA9IDQ7IC8vIG3DoXMgcmVzcG9uc2l2byBwYXJhIHF1ZSBlbCBlbGVtZW50byBubyBzZSBzaWVudGEgXCJhdHJhc2Fkb1wiIGFsIGluaWNpYXIgZHJhZy5cblxyXG4gIGNvbnN0IHByZXNzUmVmID0gdXNlUmVmKHtcclxuICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICBtb3ZlZEVub3VnaDogZmFsc2UsXHJcbiAgICBzdGFydGVkRHJhZzogZmFsc2UsXHJcbiAgICBzdGFydENsaWVudFg6IDAsXHJcbiAgICBzdGFydENsaWVudFk6IDAsXHJcbiAgICBzdGFydE5vZGVYOiAwLFxyXG4gICAgc3RhcnROb2RlWTogMCxcclxuICAgIC8vIHBhcmEgaWdub3JhciBjbGljayBzaSBzZSBjb252aXJ0acOzIGVuIGRyYWdcclxuICAgIHN1cHByZXNzQ2xpY2s6IGZhbHNlLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBjbGVhbnVwR2xvYmFsUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICBjb25zdCBjbGVhbnVwR2xvYmFsID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKGNsZWFudXBHbG9iYWxSZWYuY3VycmVudCkge1xyXG4gICAgICB0cnkgeyBjbGVhbnVwR2xvYmFsUmVmLmN1cnJlbnQoKTsgfSBjYXRjaCB7fVxyXG4gICAgICBjbGVhbnVwR2xvYmFsUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgY29uc3QgYXR0YWNoR2xvYmFsTGlzdGVuZXJzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgY2xlYW51cEdsb2JhbCgpO1xyXG5cclxuICAgIGNvbnN0IG9uTW92ZSA9IChldikgPT4ge1xyXG4gICAgICBpZiAoIXByZXNzUmVmLmN1cnJlbnQuYWN0aXZlKSByZXR1cm47XHJcbiAgICAgIGlmIChwcmVzc1JlZi5jdXJyZW50LnN0YXJ0ZWREcmFnKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCBjeCA9IGV2LmNsaWVudFggPz8gKGV2LnRvdWNoZXMgJiYgZXYudG91Y2hlc1swXT8uY2xpZW50WCkgPz8gbnVsbDtcclxuICAgICAgY29uc3QgY3kgPSBldi5jbGllbnRZID8/IChldi50b3VjaGVzICYmIGV2LnRvdWNoZXNbMF0/LmNsaWVudFkpID8/IG51bGw7XHJcbiAgICAgIGlmIChjeCA9PSBudWxsIHx8IGN5ID09IG51bGwpIHJldHVybjtcclxuXHJcbiAgICAgIGNvbnN0IGR4ID0gY3ggLSBwcmVzc1JlZi5jdXJyZW50LnN0YXJ0Q2xpZW50WDtcclxuICAgICAgY29uc3QgZHkgPSBjeSAtIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRDbGllbnRZO1xyXG4gICAgICBjb25zdCBkaXN0ID0gTWF0aC5oeXBvdChkeCwgZHkpO1xyXG5cclxuICAgICAgaWYgKGRpc3QgPCBUSFJFU0hPTERfUFgpIHJldHVybjtcclxuXHJcbiAgICAgIC8vIOKchSBTZSBjb252aXJ0acOzIGVuIGRyYWcgaW50ZW5jaW9uYWxcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5tb3ZlZEVub3VnaCA9IHRydWU7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRlZERyYWcgPSB0cnVlO1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LnN1cHByZXNzQ2xpY2sgPSB0cnVlO1xyXG5cclxuICAgICAgY29uc3Qgbm9kZSA9IHJvb3RSZWYuY3VycmVudDtcclxuICAgICAgaWYgKCFub2RlKSByZXR1cm47XHJcblxyXG4gICAgICAvLyBBc2VndXJhciBxdWUgZW1waWVjZSBkZXNkZSBsYSBwb3NpY2nDs24gZXhhY3RhIGRlbCBwcmVzcyAoZXZpdGEgc2FsdGl0b3MpXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbm9kZS5wb3NpdGlvbih7IHg6IHByZXNzUmVmLmN1cnJlbnQuc3RhcnROb2RlWCwgeTogcHJlc3NSZWYuY3VycmVudC5zdGFydE5vZGVZIH0pO1xyXG4gICAgICAgIG5vZGUuZ2V0TGF5ZXIoKT8uYmF0Y2hEcmF3KCk7XHJcbiAgICAgIH0gY2F0Y2gge31cclxuXHJcbiAgICAgIC8vIEhhYmlsaXRhciBkcmFnIHNvbG8gYWhvcmFcclxuICAgICAgdHJ5IHsgbm9kZS5kcmFnZ2FibGUodHJ1ZSk7IH0gY2F0Y2gge31cclxuXHJcbiAgICAgIC8vIEJsb3F1ZWFyIHJlLXJlbmRlciBwb3IgdGljayBkdXJhbnRlIGRyYWdcclxuICAgICAgZHJhZ2dpbmdSZWYuY3VycmVudCA9IHRydWU7XHJcbiAgICAgIHdpbmRvdy5faXNEcmFnZ2luZyA9IHRydWU7XHJcbiAgICAgIGlmIChoYXNEcmFnZ2VkPy5jdXJyZW50ICE9IG51bGwpIGhhc0RyYWdnZWQuY3VycmVudCA9IHRydWU7XHJcblxyXG4gICAgICAvLyBOZWNlc2FyaW8gcGFyYSBxdWUgdHUgbW90b3IgaW5kaXZpZHVhbCB0ZW5nYSB1biBzdGFydFBvcyBjb2hlcmVudGUgaW5jbHVzbyBzaSBDYW52YXNFZGl0b3Igbm8gbG8gc2V0ZWFcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzdGFnZSA9IG5vZGUuZ2V0U3RhZ2UoKTtcclxuICAgICAgICBjb25zdCBwID0gc3RhZ2U/LmdldFBvaW50ZXJQb3NpdGlvbj8uKCk7XHJcbiAgICAgICAgaWYgKGRyYWdTdGFydFBvcyAmJiBwKSBkcmFnU3RhcnRQb3MuY3VycmVudCA9IHsgeDogcC54LCB5OiBwLnkgfTtcclxuICAgICAgfSBjYXRjaCB7fVxyXG5cclxuICAgICAgLy8gSW5pY2lhciBkcmFnIG5hdGl2byBkZSBLb252YSAoZXN0byBkaXNwYXJhIGRyYWdzdGFydC9kcmFnbW92ZS9kcmFnZW5kKVxyXG4gICAgICB0cnkgeyBub2RlLnN0YXJ0RHJhZygpOyB9IGNhdGNoIHt9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uVXAgPSAoKSA9PiB7XHJcbiAgICAgIC8vIFNpZW1wcmUgY2VycmFtb3MgZWwgcHJlc3NcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5hY3RpdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgIGNvbnN0IG5vZGUgPSByb290UmVmLmN1cnJlbnQ7XHJcbiAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgIGNsZWFudXBHbG9iYWwoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFNpIE5PIHNlIGNvbnZpcnRpw7MgZW4gZHJhZywgZ2FyYW50aXphbW9zIDAgbW92aW1pZW50b1xyXG4gICAgICBpZiAoIXByZXNzUmVmLmN1cnJlbnQubW92ZWRFbm91Z2gpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgbm9kZS5wb3NpdGlvbih7IHg6IHByZXNzUmVmLmN1cnJlbnQuc3RhcnROb2RlWCwgeTogcHJlc3NSZWYuY3VycmVudC5zdGFydE5vZGVZIH0pO1xyXG4gICAgICAgICAgbm9kZS5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcclxuICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgICAgLy8gY2xpY2sgcGVybWl0aWRvXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gU2kgZnVlIGRyYWcsIGFzZWd1cmFtb3MgcXVlIHRlcm1pbmVcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKG5vZGUuaXNEcmFnZ2luZz8uKCkpIG5vZGUuc3RvcERyYWcoKTtcclxuICAgICAgICB9IGNhdGNoIHt9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJlc2V0IGZsYWdzXHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQubW92ZWRFbm91Z2ggPSBmYWxzZTtcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5zdGFydGVkRHJhZyA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8gVm9sdmVyIGEgbW9kbyBcIm5vIGRyYWdnYWJsZVwiIHNpZW1wcmUgKGNsYXZlIHBhcmEgcXVlIGVsIGNsaWNrIG51bmNhIGRpc3BhcmUgZHJhZylcclxuICAgICAgdHJ5IHsgbm9kZS5kcmFnZ2FibGUoZmFsc2UpOyB9IGNhdGNoIHt9XHJcblxyXG4gICAgICBkcmFnZ2luZ1JlZi5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgIHdpbmRvdy5faXNEcmFnZ2luZyA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8gUGVybWl0aW1vcyBjbGlja3MgZnV0dXJvc1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBwcmVzc1JlZi5jdXJyZW50LnN1cHByZXNzQ2xpY2sgPSBmYWxzZTtcclxuICAgICAgICBpZiAoaGFzRHJhZ2dlZD8uY3VycmVudCAhPSBudWxsKSBoYXNEcmFnZ2VkLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgfSwgMCk7XHJcblxyXG4gICAgICBjbGVhbnVwR2xvYmFsKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG9uTW92ZSwgdHJ1ZSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvbk1vdmUsIHsgY2FwdHVyZTogdHJ1ZSwgcGFzc2l2ZTogdHJ1ZSB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBvblVwLCB0cnVlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgb25VcCwgdHJ1ZSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIiwgb25VcCwgdHJ1ZSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgb25VcCwgdHJ1ZSk7XHJcblxyXG4gICAgY2xlYW51cEdsb2JhbFJlZi5jdXJyZW50ID0gKCkgPT4ge1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBvbk1vdmUsIHRydWUpO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvbk1vdmUsIHRydWUpO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25VcCwgdHJ1ZSk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgb25VcCwgdHJ1ZSk7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLCBvblVwLCB0cnVlKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIG9uVXAsIHRydWUpO1xyXG4gICAgfTtcclxuICB9LCBbVEhSRVNIT0xEX1BYLCBjbGVhbnVwR2xvYmFsLCBkcmFnU3RhcnRQb3MsIGhhc0RyYWdnZWRdKTtcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gSGFuZGxlcnMgZGVsIG5vZG9cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBjb25zdCBoYW5kbGVEb3duID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoZSkgPT4ge1xyXG4gICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblxyXG4gICAgICBjb25zdCBub2RlID0gZS5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICBjb25zdCBldiA9IGUuZXZ0O1xyXG5cclxuICAgICAgLy8gSW5pY2lhciBwcmVzc1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQubW92ZWRFbm91Z2ggPSBmYWxzZTtcclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5zdGFydGVkRHJhZyA9IGZhbHNlO1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LnN1cHByZXNzQ2xpY2sgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIEd1YXJkYXIgcG9zaWNpw7NuIGluaWNpYWwgZGVsIG5vZG9cclxuICAgICAgcHJlc3NSZWYuY3VycmVudC5zdGFydE5vZGVYID0gbm9kZS54KCk7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3RhcnROb2RlWSA9IG5vZGUueSgpO1xyXG5cclxuICAgICAgLy8gR3VhcmRhciBwdW50byBpbmljaWFsIGRlbCBwdW50ZXJvIChlbiBweCByZWFsZXMpXHJcbiAgICAgIGNvbnN0IGN4ID0gZXY/LmNsaWVudFggPz8gKGV2Py50b3VjaGVzICYmIGV2LnRvdWNoZXNbMF0/LmNsaWVudFgpID8/IDA7XHJcbiAgICAgIGNvbnN0IGN5ID0gZXY/LmNsaWVudFkgPz8gKGV2Py50b3VjaGVzICYmIGV2LnRvdWNoZXNbMF0/LmNsaWVudFkpID8/IDA7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRDbGllbnRYID0gY3g7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRDbGllbnRZID0gY3k7XHJcblxyXG4gICAgICAvLyBQb3IgZGVmZWN0byBOTyBkcmFnZ2FibGUgZW4gcHJlc3MgKGNsYXZlKVxyXG4gICAgICB0cnkgeyBub2RlLmRyYWdnYWJsZShmYWxzZSk7IH0gY2F0Y2gge31cclxuXHJcbiAgICAgIGlmIChoYXNEcmFnZ2VkPy5jdXJyZW50ICE9IG51bGwpIGhhc0RyYWdnZWQuY3VycmVudCA9IGZhbHNlO1xyXG5cclxuICAgICAgYXR0YWNoR2xvYmFsTGlzdGVuZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgW2F0dGFjaEdsb2JhbExpc3RlbmVycywgaGFzRHJhZ2dlZF1cclxuICApO1xyXG5cclxuICBjb25zdCBoYW5kbGVDbGljayA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XHJcbiAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIFNpIGVzdGUgY2xpY2sgc2UgY29udmlydGnDsyBlbiBkcmFnLCBubyBzZWxlY2Npb25hciDigJxkZSB2dWVsdGHigJ1cclxuICAgICAgaWYgKHByZXNzUmVmLmN1cnJlbnQuc3VwcHJlc3NDbGljaykgcmV0dXJuO1xyXG5cclxuICAgICAgb25TZWxlY3Q/LihvYmouaWQsIGUpO1xyXG4gICAgfSxcclxuICAgIFtvYmouaWQsIG9uU2VsZWN0XVxuICApO1xuXG4gIGNvbnN0IGhhbmRsZU1vdXNlRW50ZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKHdpbmRvdy5faXNEcmFnZ2luZykgcmV0dXJuO1xuICAgIG9uSG92ZXI/LihvYmouaWQpO1xuICB9LCBbb25Ib3Zlciwgb2JqLmlkXSk7XG5cbiAgY29uc3QgaGFuZGxlTW91c2VMZWF2ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBvbkhvdmVyPy4obnVsbCk7XG4gIH0sIFtvbkhvdmVyXSk7XG5cclxuICAvLyBFc3RvcyBoYW5kbGVycyBzb2xvIGNvcnJlbiBjdWFuZG8gZWwgZHJhZyBmdWUgaGFiaWxpdGFkbyB5IHN0YXJ0RHJhZygpIHNlIGxsYW3Ds1xyXG4gIGNvbnN0IGhhbmRsZURyYWdTdGFydCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZHJhZ01vdmVSYWZSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQpO1xuICAgICAgICBkcmFnTW92ZVJhZlJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGxhc3REcmFnTW92ZVBvc1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIG9uRHJhZ1N0YXJ0UGVyc29uYWxpemFkbz8uKG9iai5pZCwgZSk7XG4gICAgICAvLyBBcnJhbnF1ZSBkZSB0dSBsw7NnaWNhIGdydXBhbC9pbmRpdmlkdWFsXG4gICAgICBjb25zdCBlc0dydXBhbCA9IHN0YXJ0RHJhZ0dydXBhbExpZGVyKGUsIG9iaik7XG4gICAgICBpZiAoIWVzR3J1cGFsKSBzdGFydERyYWdJbmRpdmlkdWFsKGUsIGRyYWdTdGFydFBvcyk7XG4gICAgfSxcbiAgICBbb2JqLCBkcmFnU3RhcnRQb3MsIG9uRHJhZ1N0YXJ0UGVyc29uYWxpemFkb11cbiAgKTtcblxyXG4gIGNvbnN0IGhhbmRsZURyYWdNb3ZlID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGlmICh3aW5kb3cuX2dydXBvTGlkZXIpIHtcbiAgICAgICAgaWYgKG9iai5pZCA9PT0gd2luZG93Ll9ncnVwb0xpZGVyKSB7XG4gICAgICAgICAgcHJldmlld0RyYWdHcnVwYWwoZSwgb2JqLCBvbkNoYW5nZSk7XG4gICAgICAgICAgaWYgKG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvKSB7XG4gICAgICAgICAgICBsYXN0RHJhZ01vdmVQb3NSZWYuY3VycmVudCA9IHsgeDogZS50YXJnZXQueCgpLCB5OiBlLnRhcmdldC55KCkgfTtcbiAgICAgICAgICAgIGlmIChkcmFnTW92ZVJhZlJlZi5jdXJyZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgZHJhZ01vdmVSYWZSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZHJhZ01vdmVSYWZSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgbGF0ZXN0UG9zID0gbGFzdERyYWdNb3ZlUG9zUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXRlc3RQb3MpIHJldHVybjtcbiAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyhsYXRlc3RQb3MsIG9iai5pZCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwcmV2aWV3RHJhZ0luZGl2aWR1YWwoZSwgb2JqLCAocG9zKSA9PiB7XG4gICAgICAgIGlmICghb25EcmFnTW92ZVBlcnNvbmFsaXphZG8pIHJldHVybjtcbiAgICAgICAgbGFzdERyYWdNb3ZlUG9zUmVmLmN1cnJlbnQgPSBwb3M7XG5cbiAgICAgICAgLy8gRXZpdGEgc2F0dXJhciBSZWFjdC9VSSBlbiBkcmFnbW92ZTsgbcOheGltbyAxIGFjdHVhbGl6YWNpw7NuIHBvciBmcmFtZS5cbiAgICAgICAgaWYgKGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQgIT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBkcmFnTW92ZVJhZlJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBkcmFnTW92ZVJhZlJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICBjb25zdCBsYXRlc3RQb3MgPSBsYXN0RHJhZ01vdmVQb3NSZWYuY3VycmVudDtcbiAgICAgICAgICBpZiAoIWxhdGVzdFBvcykgcmV0dXJuO1xuICAgICAgICAgIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvKGxhdGVzdFBvcywgb2JqLmlkKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtvYmosIG9uQ2hhbmdlLCBvbkRyYWdNb3ZlUGVyc29uYWxpemFkb11cbiAgKTtcblxyXG4gIGNvbnN0IGhhbmRsZURyYWdFbmQgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgY29uc3Qgbm9kZSA9IGUuY3VycmVudFRhcmdldDtcblxuICAgICAgaWYgKGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShkcmFnTW92ZVJhZlJlZi5jdXJyZW50KTtcbiAgICAgICAgZHJhZ01vdmVSYWZSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBsYXN0RHJhZ01vdmVQb3NSZWYuY3VycmVudCA9IG51bGw7XG5cclxuICAgICAgLy8gQ29tbWl0IGZpbmFsXHJcbiAgICAgIGNvbnN0IGZ1ZUdydXBhbCA9IGVuZERyYWdHcnVwYWwoZSwgb2JqLCBvbkNoYW5nZSwgaGFzRHJhZ2dlZCwgKCkgPT4ge30pO1xyXG4gICAgICBpZiAoZnVlR3J1cGFsKSB7XHJcbiAgICAgICAgb25EcmFnRW5kUGVyc29uYWxpemFkbz8uKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZW5kRHJhZ0luZGl2aWR1YWwob2JqLCBub2RlLCBvbkNoYW5nZSwgb25EcmFnRW5kUGVyc29uYWxpemFkbywgaGFzRHJhZ2dlZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFZvbHZlciBhIG5vLWRyYWdnYWJsZSAoY2xhdmUpXHJcbiAgICAgIHRyeSB7IG5vZGUuZHJhZ2dhYmxlKGZhbHNlKTsgfSBjYXRjaCB7fVxyXG5cclxuICAgICAgZHJhZ2dpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIExpbXBpZXphIGRlbCBwcmVzc1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICBwcmVzc1JlZi5jdXJyZW50Lm1vdmVkRW5vdWdoID0gZmFsc2U7XHJcbiAgICAgIHByZXNzUmVmLmN1cnJlbnQuc3RhcnRlZERyYWcgPSBmYWxzZTtcclxuXHJcbiAgICAgIC8vIHBlcm1pdGlyIGNsaWNrIGZ1dHVyb1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBwcmVzc1JlZi5jdXJyZW50LnN1cHByZXNzQ2xpY2sgPSBmYWxzZTtcclxuICAgICAgICBpZiAoaGFzRHJhZ2dlZD8uY3VycmVudCAhPSBudWxsKSBoYXNEcmFnZ2VkLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgICAgfSwgMCk7XHJcblxyXG4gICAgICBjbGVhbnVwR2xvYmFsKCk7XHJcbiAgICB9LFxyXG4gICAgW29iaiwgb25DaGFuZ2UsIGhhc0RyYWdnZWQsIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8sIGNsZWFudXBHbG9iYWxdXG4gICk7XG5cbiAgLy8gQ2xlYW51cCBnbG9iYWwgcG9yIHNpIGVsIGNvbXBvbmVudGUgc2UgZGVzbW9udGEgZW4gcGxlbm8gcHJlc3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYW51cEdsb2JhbCgpO1xuICAgICAgaWYgKGRyYWdNb3ZlUmFmUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShkcmFnTW92ZVJhZlJlZi5jdXJyZW50KTtcbiAgICAgICAgZHJhZ01vdmVSYWZSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9XG4gICAgICBsYXN0RHJhZ01vdmVQb3NSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfTtcbiAgfSwgW2NsZWFudXBHbG9iYWxdKTtcblxyXG4gIHJldHVybiAoXHJcbiAgICA8R3JvdXBcclxuICAgICAgcmVmPXtzZXRSZWZzfVxyXG4gICAgICBpZD17b2JqLmlkfVxyXG4gICAgICB4PXtvYmoueCA/PyAwfVxyXG4gICAgICB5PXt5QWJzfVxyXG4gICAgICByb3RhdGlvbj17b2JqLnJvdGF0aW9uIHx8IDB9XHJcbiAgICAgIHNjYWxlWD17b2JqLnNjYWxlWCB8fCAxfVxyXG4gICAgICBzY2FsZVk9e29iai5zY2FsZVkgfHwgMX1cclxuXHJcbiAgICAgIC8vIOKchSBTSUVNUFJFIGZhbHNlOiBlbCBkcmFnIHNlIGhhYmlsaXRhIGltcGVyYXRpdmFtZW50ZSBzb2xvIHNpIGh1Ym8gaW50ZW5jacOzblxyXG4gICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxyXG4gICAgICBsaXN0ZW5pbmc9e3RydWV9XHJcblxyXG4gICAgICBvbk1vdXNlRG93bj17aGFuZGxlRG93bn1cclxuICAgICAgb25Ub3VjaFN0YXJ0PXtoYW5kbGVEb3dufVxyXG5cclxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICBvblRhcD17aGFuZGxlQ2xpY2t9XG4gICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XG4gICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XG5cbiAgICAgIG9uRHJhZ1N0YXJ0PXtoYW5kbGVEcmFnU3RhcnR9XG4gICAgICBvbkRyYWdNb3ZlPXtoYW5kbGVEcmFnTW92ZX1cbiAgICAgIG9uRHJhZ0VuZD17aGFuZGxlRHJhZ0VuZH1cclxuICAgID5cclxuICAgICAgey8qIEhpdGJveCAqL31cclxuICAgICAgPFJlY3RcbiAgICAgICAgbmFtZT1cImNvdW50ZG93bi1oaXRib3hcIlxuICAgICAgICB3aWR0aD17Y29udGFpbmVyV31cbiAgICAgICAgaGVpZ2h0PXtjb250YWluZXJIfVxuICAgICAgICBmaWxsPXtvYmouYmFja2dyb3VuZCB8fCBcInRyYW5zcGFyZW50XCJ9XG4gICAgICAgIC8vIEVsIGJvcmRlIGRlIHNlbGVjY2nDs24gbG8gZGlidWphIFNlbGVjdGlvbkJvdW5kcyAoVHJhbnNmb3JtZXIpLlxuICAgICAgICAvLyBFdml0YSBkb2JsZSByZWN1YWRybyAodmlvbGV0YSArIGNlbGVzdGUgcHVudGVhZG8pIGVuIGNvdW50ZG93bi5cbiAgICAgICAgc3Ryb2tlPVwidHJhbnNwYXJlbnRcIlxuICAgICAgICBzdHJva2VXaWR0aD17MH1cbiAgICAgICAgY29ybmVyUmFkaXVzPXs4fVxuICAgICAgICBsaXN0ZW5pbmc9e3RydWV9XG4gICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XG4gICAgICAvPlxuXHJcbiAgICAgIHshc3RhdGUuaW52YWxpZCAmJiAhc3RhdGUuZW5kZWQgJiYgKFxyXG4gICAgICAgIDxHcm91cCBsaXN0ZW5pbmc9e2ZhbHNlfT5cclxuICAgICAgICAgIHtwYXJ0cy5tYXAoKGl0LCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBzdGFydFggKyBpICogKGNoaXBXICsgZ2FwKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VwVGV4dCA9IG9iai5zZXBhcmF0b3IgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgPEdyb3VwIGtleT17aXQua2V5fSB4PXt4fSB5PXtjb250ZW50T2Zmc2V0WX0gbGlzdGVuaW5nPXtmYWxzZX0+XHJcbiAgICAgICAgICAgICAgICB7b2JqLmxheW91dCAhPT0gXCJtaW5pbWFsXCIgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPXtjaGlwV31cclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9e2NoaXBIfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9e29iai5ib3hCZyB8fCBcIiNmZmZcIn1cclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9e29iai5ib3hCb3JkZXIgfHwgXCIjZTVlN2ViXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgY29ybmVyUmFkaXVzPXtNYXRoLm1pbihvYmouYm94UmFkaXVzID8/IDgsIGNoaXBXIC8gMiwgY2hpcEggLyAyKX1cclxuICAgICAgICAgICAgICAgICAgICBzaGFkb3dCbHVyPXtvYmouYm94U2hhZG93ID8gOCA6IDB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93Q29sb3I9e29iai5ib3hTaGFkb3cgPyBcInJnYmEoMCwwLDAsMC4xNSlcIiA6IFwidHJhbnNwYXJlbnRcIn1cclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93Rm9yU3Ryb2tlRW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgIDxUZXh0XHJcbiAgICAgICAgICAgICAgICAgIHRleHQ9e2l0LnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICBmaWxsPXtvYmouY29sb3IgfHwgXCIjMTExODI3XCJ9XHJcbiAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk9e29iai5mb250RmFtaWx5fVxyXG4gICAgICAgICAgICAgICAgICBmb250U3R5bGU9XCJib2xkXCJcclxuICAgICAgICAgICAgICAgICAgZm9udFNpemU9e3ZhbHVlU2l6ZX1cclxuICAgICAgICAgICAgICAgICAgd2lkdGg9e2NoaXBXfVxyXG4gICAgICAgICAgICAgICAgICBhbGlnbj1cImNlbnRlclwiXHJcbiAgICAgICAgICAgICAgICAgIHk9e3BhZGRpbmdZICsgdmFsdWVTaXplIC8gMn1cclxuICAgICAgICAgICAgICAgICAgb2Zmc2V0WT17dmFsdWVTaXplIC8gMn1cclxuICAgICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICAgICAge3Nob3dMYWJlbHMgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ9e2l0LmxhYmVsfVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9e29iai5sYWJlbENvbG9yIHx8IFwiIzZiNzI4MFwifVxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk9e29iai5mb250RmFtaWx5fVxyXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPXtsYWJlbFNpemV9XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9e2NoaXBXfVxyXG4gICAgICAgICAgICAgICAgICAgIGFsaWduPVwiY2VudGVyXCJcclxuICAgICAgICAgICAgICAgICAgICB5PXtwYWRkaW5nWSArIHZhbHVlU2l6ZSArIGxhYmVsU2l6ZSAvIDJ9XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WT17bGFiZWxTaXplIC8gMn1cclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZlY3REcmF3RW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApfVxyXG5cclxuICAgICAgICAgICAgICAgIHshIXNlcFRleHQgJiYgaSA8IHBhcnRzLmxlbmd0aCAtIDEgJiYgKFxyXG4gICAgICAgICAgICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHg9e2NoaXBXICsgZ2FwICogMC4yNX1cclxuICAgICAgICAgICAgICAgICAgICB5PXtjaGlwSCAqIDAuM31cclxuICAgICAgICAgICAgICAgICAgICB0ZXh0PXtzZXBUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9e29iai5jb2xvciB8fCBcIiMxMTE4MjdcIn1cclxuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5PXtvYmouZm9udEZhbWlseX1cclxuICAgICAgICAgICAgICAgICAgICBmb250U2l6ZT17dmFsdWVTaXplfVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgPC9Hcm91cD5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvR3JvdXA+XHJcbiAgICAgICl9XHJcbiAgICA8L0dyb3VwPlxyXG4gICk7XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZU1lbW8iLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiR3JvdXAiLCJSZWN0IiwiVGV4dCIsImdldFJlbWFpbmluZ1BhcnRzIiwiZm10IiwiY2FsY3VsYXJPZmZzZXRZIiwic3RhcnREcmFnR3J1cGFsTGlkZXIiLCJwcmV2aWV3RHJhZ0dydXBhbCIsImVuZERyYWdHcnVwYWwiLCJzdGFydERyYWdJbmRpdmlkdWFsIiwicHJldmlld0RyYWdJbmRpdmlkdWFsIiwiZW5kRHJhZ0luZGl2aWR1YWwiLCJDb3VudGRvd25Lb252YSIsIm9iaiIsInJlZ2lzdGVyUmVmIiwib25Ib3ZlciIsInNlY2Npb25lc09yZGVuYWRhcyIsImFsdG9DYW52YXMiLCJvblNlbGVjdCIsIm9uQ2hhbmdlIiwib25EcmFnU3RhcnRQZXJzb25hbGl6YWRvIiwib25EcmFnTW92ZVBlcnNvbmFsaXphZG8iLCJvbkRyYWdFbmRQZXJzb25hbGl6YWRvIiwiZHJhZ1N0YXJ0UG9zIiwiaGFzRHJhZ2dlZCIsInJvb3RSZWYiLCJkcmFnTW92ZVJhZlJlZiIsImxhc3REcmFnTW92ZVBvc1JlZiIsInRpY2siLCJzZXRUaWNrIiwiZHJhZ2dpbmdSZWYiLCJ0Iiwic2V0SW50ZXJ2YWwiLCJjdXJyZW50IiwibiIsImNsZWFySW50ZXJ2YWwiLCJzZXRSZWZzIiwibm9kZSIsImlkIiwieUFicyIsImlkeCIsImZpbmRJbmRleCIsInMiLCJzZWNjaW9uSWQiLCJzYWZlIiwib2ZmIiwieSIsInN0YXRlIiwiZmVjaGFPYmpldGl2byIsInBhcnRzIiwia2V5IiwidmFsdWUiLCJkIiwicGFkWmVybyIsImxhYmVsIiwiaCIsIm0iLCJsZW5ndGgiLCJnYXAiLCJwYWRkaW5nWSIsInBhZGRpbmdYIiwidmFsdWVTaXplIiwiZm9udFNpemUiLCJsYWJlbFNpemUiLCJzaG93TGFiZWxzIiwiY2hpcFciLCJjaGlwV2lkdGgiLCJjaGlwSCIsInRvdGFsQ2hpcHNXIiwiY29udGFpbmVyVyIsIk1hdGgiLCJtYXgiLCJ3aWR0aCIsImNvbnRhaW5lckgiLCJoZWlnaHQiLCJjb250ZW50T2Zmc2V0WSIsInN0YXJ0WCIsIlRIUkVTSE9MRF9QWCIsInByZXNzUmVmIiwiYWN0aXZlIiwibW92ZWRFbm91Z2giLCJzdGFydGVkRHJhZyIsInN0YXJ0Q2xpZW50WCIsInN0YXJ0Q2xpZW50WSIsInN0YXJ0Tm9kZVgiLCJzdGFydE5vZGVZIiwic3VwcHJlc3NDbGljayIsImNsZWFudXBHbG9iYWxSZWYiLCJjbGVhbnVwR2xvYmFsIiwiYXR0YWNoR2xvYmFsTGlzdGVuZXJzIiwib25Nb3ZlIiwiZXYiLCJjeCIsImNsaWVudFgiLCJ0b3VjaGVzIiwiY3kiLCJjbGllbnRZIiwiZHgiLCJkeSIsImRpc3QiLCJoeXBvdCIsInBvc2l0aW9uIiwieCIsImdldExheWVyIiwiYmF0Y2hEcmF3IiwiZHJhZ2dhYmxlIiwid2luZG93IiwiX2lzRHJhZ2dpbmciLCJzdGFnZSIsImdldFN0YWdlIiwicCIsImdldFBvaW50ZXJQb3NpdGlvbiIsInN0YXJ0RHJhZyIsIm9uVXAiLCJpc0RyYWdnaW5nIiwic3RvcERyYWciLCJzZXRUaW1lb3V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhcHR1cmUiLCJwYXNzaXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZURvd24iLCJlIiwiY2FuY2VsQnViYmxlIiwiY3VycmVudFRhcmdldCIsImV2dCIsImhhbmRsZUNsaWNrIiwiaGFuZGxlTW91c2VFbnRlciIsImhhbmRsZU1vdXNlTGVhdmUiLCJoYW5kbGVEcmFnU3RhcnQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImVzR3J1cGFsIiwiaGFuZGxlRHJhZ01vdmUiLCJfZ3J1cG9MaWRlciIsInRhcmdldCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImxhdGVzdFBvcyIsInBvcyIsImhhbmRsZURyYWdFbmQiLCJmdWVHcnVwYWwiLCJyZWYiLCJyb3RhdGlvbiIsInNjYWxlWCIsInNjYWxlWSIsImxpc3RlbmluZyIsIm9uTW91c2VEb3duIiwib25Ub3VjaFN0YXJ0Iiwib25DbGljayIsIm9uVGFwIiwib25Nb3VzZUVudGVyIiwib25Nb3VzZUxlYXZlIiwib25EcmFnU3RhcnQiLCJvbkRyYWdNb3ZlIiwib25EcmFnRW5kIiwibmFtZSIsImZpbGwiLCJiYWNrZ3JvdW5kIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJjb3JuZXJSYWRpdXMiLCJwZXJmZWN0RHJhd0VuYWJsZWQiLCJpbnZhbGlkIiwiZW5kZWQiLCJtYXAiLCJpdCIsImkiLCJzZXBUZXh0Iiwic2VwYXJhdG9yIiwibGF5b3V0IiwiYm94QmciLCJib3hCb3JkZXIiLCJtaW4iLCJib3hSYWRpdXMiLCJzaGFkb3dCbHVyIiwiYm94U2hhZG93Iiwic2hhZG93Q29sb3IiLCJzaGFkb3dGb3JTdHJva2VFbmFibGVkIiwidGV4dCIsImNvbG9yIiwiZm9udEZhbWlseSIsImZvbnRTdHlsZSIsImFsaWduIiwib2Zmc2V0WSIsImxhYmVsQ29sb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/countdown/CountdownKonva.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/events/computeInsertDefaults.js":
/*!***************************************************************!*\
  !*** ./src/components/editor/events/computeInsertDefaults.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ computeInsertDefaults)\n/* harmony export */ });\n/* harmony import */ var _domain_motionEffects__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/domain/motionEffects */ \"(pages-dir-node)/./src/domain/motionEffects/index.js\");\n\nconst CANVAS_WIDTH = 800;\nfunction clamp(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\nfunction toNumber(value, fallback = null) {\n    const n = Number(value);\n    return Number.isFinite(n) ? n : fallback;\n}\nfunction stripUndefined(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([, value])=>value !== undefined));\n}\nfunction calcCountdownInitialWidth(presetProps = {}) {\n    const n = 4;\n    const gap = toNumber(presetProps.gap, 8);\n    const paddingX = toNumber(presetProps.paddingX, 8);\n    const chipWidth = toNumber(presetProps.chipWidth, 46);\n    const chipW = chipWidth + paddingX * 2;\n    return Math.max(120, Math.round(n * chipW + gap * (n - 1)));\n}\nfunction inferTextVariant(variant = \"texto\", isMobile = false) {\n    if (variant === \"titulo\") {\n        return {\n            texto: \"Titulo\",\n            fontSize: isMobile ? 34 : 36,\n            fontWeight: \"bold\",\n            fontStyle: \"normal\",\n            y: 100\n        };\n    }\n    if (variant === \"subtitulo\") {\n        return {\n            texto: \"Subtitulo\",\n            fontSize: isMobile ? 22 : 24,\n            fontWeight: \"normal\",\n            fontStyle: \"italic\",\n            y: 160\n        };\n    }\n    if (variant === \"parrafo\") {\n        return {\n            texto: \"Texto del parrafo...\",\n            fontSize: isMobile ? 16 : 18,\n            fontWeight: \"normal\",\n            fontStyle: \"normal\",\n            y: 220\n        };\n    }\n    return {\n        texto: \"Texto\",\n        fontSize: isMobile ? 22 : 24,\n        fontWeight: \"normal\",\n        fontStyle: \"normal\",\n        y: 120\n    };\n}\nfunction calcGalleryHeight({ width, rows, cols, gap, ratio }) {\n    const ratioCell = ratio === \"4:3\" ? 3 / 4 : ratio === \"16:9\" ? 9 / 16 : 1;\n    const cellW = Math.max(1, (width - gap * (cols - 1)) / cols);\n    const cellH = cellW * ratioCell;\n    return rows * cellH + gap * (rows - 1);\n}\nfunction computeInsertDefaults({ payload = {}, targetSeccionId, secciones = [], normalizarAltoModo, ALTURA_PANTALLA_EDITOR }) {\n    const isMobile =  false && (0);\n    const tipo = payload.tipo || \"texto\";\n    const id = payload.id || `${tipo}-${Date.now().toString(36)}`;\n    const incomingWidth = toNumber(payload.width);\n    const incomingHeight = toNumber(payload.height);\n    const incomingX = toNumber(payload.x);\n    const incomingY = toNumber(payload.y);\n    let next = {\n        ...payload,\n        id,\n        tipo,\n        seccionId: targetSeccionId,\n        motionEffect: (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_0__.sanitizeMotionEffect)(payload.motionEffect),\n        rotation: toNumber(payload.rotation, 0),\n        scaleX: toNumber(payload.scaleX, 1),\n        scaleY: toNumber(payload.scaleY, 1)\n    };\n    if (tipo === \"texto\") {\n        const variant = inferTextVariant(payload.variant, isMobile);\n        const x = incomingX ?? 100;\n        const y = incomingY ?? variant.y;\n        next = {\n            ...next,\n            texto: payload.texto ?? variant.texto,\n            x,\n            y,\n            fontSize: toNumber(payload.fontSize, variant.fontSize),\n            color: payload.color ?? \"#000000\",\n            fontFamily: payload.fontFamily ?? \"sans-serif\",\n            fontWeight: payload.fontWeight ?? variant.fontWeight,\n            fontStyle: payload.fontStyle ?? variant.fontStyle,\n            textDecoration: payload.textDecoration ?? \"none\",\n            align: payload.align ?? \"left\"\n        };\n    } else if (tipo === \"forma\") {\n        const figura = payload.figura || \"rect\";\n        const size = isMobile ? 120 : 100;\n        const width = incomingWidth ?? size;\n        const height = incomingHeight ?? size;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            figura,\n            color: payload.color ?? \"#000000\",\n            x,\n            y,\n            width,\n            height,\n            texto: payload.texto ?? \"\",\n            fontSize: toNumber(payload.fontSize, 24),\n            fontFamily: payload.fontFamily ?? \"sans-serif\",\n            fontWeight: payload.fontWeight ?? \"normal\",\n            fontStyle: payload.fontStyle ?? \"normal\",\n            colorTexto: payload.colorTexto ?? \"#000000\",\n            align: payload.align ?? \"center\"\n        };\n        if (figura === \"line\") {\n            next.points = Array.isArray(payload.points) ? payload.points : [\n                0,\n                0,\n                100,\n                0\n            ];\n            next.strokeWidth = toNumber(payload.strokeWidth, 2);\n            delete next.width;\n            delete next.height;\n        } else if (figura === \"circle\") {\n            next.radius = toNumber(payload.radius, 50);\n        } else if (figura === \"triangle\") {\n            next.radius = toNumber(payload.radius, 60);\n        }\n    } else if (tipo === \"icono\" || tipo === \"icono-svg\") {\n        const width = incomingWidth ?? (isMobile ? 112 : 128);\n        const height = incomingHeight ?? width;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height\n        };\n    } else if (tipo === \"imagen\") {\n        const sourceWidth = toNumber(payload.ancho, 300);\n        const sourceHeight = toNumber(payload.alto, 300);\n        const width = incomingWidth ?? Math.min(isMobile ? 260 : 320, sourceWidth);\n        const ratio = sourceWidth > 0 ? sourceHeight / sourceWidth : 1;\n        const height = incomingHeight ?? Math.max(40, Math.round(width * ratio));\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height\n        };\n    } else if (tipo === \"galeria\") {\n        const rows = Math.max(1, toNumber(payload.rows, 2));\n        const cols = Math.max(1, toNumber(payload.cols, 2));\n        const gap = Math.max(0, toNumber(payload.gap, 8));\n        const widthPct = clamp(toNumber(payload.widthPct, isMobile ? 92 : 70), 10, 100);\n        const width = incomingWidth ?? CANVAS_WIDTH * widthPct / 100;\n        const height = incomingHeight ?? calcGalleryHeight({\n            width,\n            rows,\n            cols,\n            gap,\n            ratio: payload.ratio\n        });\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 120;\n        next = {\n            ...next,\n            rows,\n            cols,\n            gap,\n            widthPct,\n            x,\n            y,\n            width,\n            height\n        };\n    } else if (tipo === \"countdown\") {\n        const presetProps = payload.presetProps || payload.props || {};\n        const width = incomingWidth ?? calcCountdownInitialWidth(presetProps);\n        const height = incomingHeight ?? 90;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 140;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height,\n            fechaObjetivo: payload.fechaObjetivo || payload.targetISO || payload.fechaISO,\n            ...presetProps\n        };\n    } else if (tipo === \"rsvp-boton\") {\n        const width = incomingWidth ?? 200;\n        const height = incomingHeight ?? 50;\n        const x = incomingX ?? Math.round((CANVAS_WIDTH - width) / 2);\n        const y = incomingY ?? 140;\n        next = {\n            ...next,\n            x,\n            y,\n            width,\n            height\n        };\n    } else {\n        next = {\n            ...next,\n            x: incomingX ?? 100,\n            y: incomingY ?? 120\n        };\n    }\n    if (Number.isFinite(next.width)) {\n        next.x = clamp(toNumber(next.x, 0), 0, Math.max(0, CANVAS_WIDTH - next.width));\n    } else {\n        next.x = clamp(toNumber(next.x, 0), 0, CANVAS_WIDTH);\n    }\n    next.y = Math.max(0, toNumber(next.y, 0));\n    const seccion = secciones.find((s)=>s.id === targetSeccionId);\n    if (normalizarAltoModo?.(seccion?.altoModo) === \"pantalla\") {\n        const yPx = Number.isFinite(next.y) ? next.y : 0;\n        next.yNorm = Math.max(0, Math.min(1, yPx / ALTURA_PANTALLA_EDITOR));\n    }\n    const { variant: _variant, presetProps: _presetProps, targetISO: _targetISO, ...persistable } = next;\n    return stripUndefined(persistable);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9ldmVudHMvY29tcHV0ZUluc2VydERlZmF1bHRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThEO0FBRTlELE1BQU1DLGVBQWU7QUFFckIsU0FBU0MsTUFBTUMsS0FBSyxFQUFFQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUIsT0FBT0MsS0FBS0QsR0FBRyxDQUFDRCxLQUFLRSxLQUFLRixHQUFHLENBQUNDLEtBQUtGO0FBQ3JDO0FBRUEsU0FBU0ksU0FBU0osS0FBSyxFQUFFSyxXQUFXLElBQUk7SUFDdEMsTUFBTUMsSUFBSUMsT0FBT1A7SUFDakIsT0FBT08sT0FBT0MsUUFBUSxDQUFDRixLQUFLQSxJQUFJRDtBQUNsQztBQUVBLFNBQVNJLGVBQWVDLEdBQUc7SUFDekIsT0FBT0MsT0FBT0MsV0FBVyxDQUN2QkQsT0FBT0UsT0FBTyxDQUFDSCxLQUFLSSxNQUFNLENBQUMsQ0FBQyxHQUFHZCxNQUFNLEdBQUtBLFVBQVVlO0FBRXhEO0FBRUEsU0FBU0MsMEJBQTBCQyxjQUFjLENBQUMsQ0FBQztJQUNqRCxNQUFNWCxJQUFJO0lBQ1YsTUFBTVksTUFBTWQsU0FBU2EsWUFBWUMsR0FBRyxFQUFFO0lBQ3RDLE1BQU1DLFdBQVdmLFNBQVNhLFlBQVlFLFFBQVEsRUFBRTtJQUNoRCxNQUFNQyxZQUFZaEIsU0FBU2EsWUFBWUcsU0FBUyxFQUFFO0lBQ2xELE1BQU1DLFFBQVFELFlBQVlELFdBQVc7SUFDckMsT0FBT2hCLEtBQUtELEdBQUcsQ0FBQyxLQUFLQyxLQUFLbUIsS0FBSyxDQUFDaEIsSUFBSWUsUUFBUUgsTUFBT1osQ0FBQUEsSUFBSTtBQUN6RDtBQUVBLFNBQVNpQixpQkFBaUJDLFVBQVUsT0FBTyxFQUFFQyxXQUFXLEtBQUs7SUFDM0QsSUFBSUQsWUFBWSxVQUFVO1FBQ3hCLE9BQU87WUFDTEUsT0FBTztZQUNQQyxVQUFVRixXQUFXLEtBQUs7WUFDMUJHLFlBQVk7WUFDWkMsV0FBVztZQUNY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XFxjb21wb25lbnRzXFxlZGl0b3JcXGV2ZW50c1xcY29tcHV0ZUluc2VydERlZmF1bHRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNhbml0aXplTW90aW9uRWZmZWN0IH0gZnJvbSBcIkAvZG9tYWluL21vdGlvbkVmZmVjdHNcIjtcclxuXHJcbmNvbnN0IENBTlZBU19XSURUSCA9IDgwMDtcblxuZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgdmFsdWUpKTtcbn1cblxuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUsIGZhbGxiYWNrID0gbnVsbCkge1xuICBjb25zdCBuID0gTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShuKSA/IG4gOiBmYWxsYmFjaztcbn1cblxuZnVuY3Rpb24gc3RyaXBVbmRlZmluZWQob2JqKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFssIHZhbHVlXSkgPT4gdmFsdWUgIT09IHVuZGVmaW5lZClcbiAgKTtcbn1cblxuZnVuY3Rpb24gY2FsY0NvdW50ZG93bkluaXRpYWxXaWR0aChwcmVzZXRQcm9wcyA9IHt9KSB7XG4gIGNvbnN0IG4gPSA0O1xuICBjb25zdCBnYXAgPSB0b051bWJlcihwcmVzZXRQcm9wcy5nYXAsIDgpO1xuICBjb25zdCBwYWRkaW5nWCA9IHRvTnVtYmVyKHByZXNldFByb3BzLnBhZGRpbmdYLCA4KTtcbiAgY29uc3QgY2hpcFdpZHRoID0gdG9OdW1iZXIocHJlc2V0UHJvcHMuY2hpcFdpZHRoLCA0Nik7XG4gIGNvbnN0IGNoaXBXID0gY2hpcFdpZHRoICsgcGFkZGluZ1ggKiAyO1xuICByZXR1cm4gTWF0aC5tYXgoMTIwLCBNYXRoLnJvdW5kKG4gKiBjaGlwVyArIGdhcCAqIChuIC0gMSkpKTtcbn1cblxuZnVuY3Rpb24gaW5mZXJUZXh0VmFyaWFudCh2YXJpYW50ID0gXCJ0ZXh0b1wiLCBpc01vYmlsZSA9IGZhbHNlKSB7XG4gIGlmICh2YXJpYW50ID09PSBcInRpdHVsb1wiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHRvOiBcIlRpdHVsb1wiLFxuICAgICAgZm9udFNpemU6IGlzTW9iaWxlID8gMzQgOiAzNixcbiAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxuICAgICAgZm9udFN0eWxlOiBcIm5vcm1hbFwiLFxuICAgICAgeTogMTAwLFxuICAgIH07XG4gIH1cbiAgaWYgKHZhcmlhbnQgPT09IFwic3VidGl0dWxvXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGV4dG86IFwiU3VidGl0dWxvXCIsXG4gICAgICBmb250U2l6ZTogaXNNb2JpbGUgPyAyMiA6IDI0LFxuICAgICAgZm9udFdlaWdodDogXCJub3JtYWxcIixcbiAgICAgIGZvbnRTdHlsZTogXCJpdGFsaWNcIixcbiAgICAgIHk6IDE2MCxcbiAgICB9O1xuICB9XG4gIGlmICh2YXJpYW50ID09PSBcInBhcnJhZm9cIikge1xuICAgIHJldHVybiB7XG4gICAgICB0ZXh0bzogXCJUZXh0byBkZWwgcGFycmFmby4uLlwiLFxuICAgICAgZm9udFNpemU6IGlzTW9iaWxlID8gMTYgOiAxOCxcbiAgICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgICBmb250U3R5bGU6IFwibm9ybWFsXCIsXG4gICAgICB5OiAyMjAsXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHRleHRvOiBcIlRleHRvXCIsXG4gICAgZm9udFNpemU6IGlzTW9iaWxlID8gMjIgOiAyNCxcbiAgICBmb250V2VpZ2h0OiBcIm5vcm1hbFwiLFxuICAgIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgICB5OiAxMjAsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNhbGNHYWxsZXJ5SGVpZ2h0KHsgd2lkdGgsIHJvd3MsIGNvbHMsIGdhcCwgcmF0aW8gfSkge1xuICBjb25zdCByYXRpb0NlbGwgPSByYXRpbyA9PT0gXCI0OjNcIiA/IDMgLyA0IDogcmF0aW8gPT09IFwiMTY6OVwiID8gOSAvIDE2IDogMTtcbiAgY29uc3QgY2VsbFcgPSBNYXRoLm1heCgxLCAod2lkdGggLSBnYXAgKiAoY29scyAtIDEpKSAvIGNvbHMpO1xuICBjb25zdCBjZWxsSCA9IGNlbGxXICogcmF0aW9DZWxsO1xuICByZXR1cm4gcm93cyAqIGNlbGxIICsgZ2FwICogKHJvd3MgLSAxKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcHV0ZUluc2VydERlZmF1bHRzKHtcbiAgcGF5bG9hZCA9IHt9LFxuICB0YXJnZXRTZWNjaW9uSWQsXG4gIHNlY2Npb25lcyA9IFtdLFxuICBub3JtYWxpemFyQWx0b01vZG8sXG4gIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IsXG59KSB7XG4gIGNvbnN0IGlzTW9iaWxlID1cbiAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogMTAyNHB4KVwiKS5tYXRjaGVzIHx8XG4gICAgICB3aW5kb3cubWF0Y2hNZWRpYShcIihwb2ludGVyOiBjb2Fyc2UpXCIpLm1hdGNoZXMpO1xuXG4gIGNvbnN0IHRpcG8gPSBwYXlsb2FkLnRpcG8gfHwgXCJ0ZXh0b1wiO1xuICBjb25zdCBpZCA9IHBheWxvYWQuaWQgfHwgYCR7dGlwb30tJHtEYXRlLm5vdygpLnRvU3RyaW5nKDM2KX1gO1xuXG4gIGNvbnN0IGluY29taW5nV2lkdGggPSB0b051bWJlcihwYXlsb2FkLndpZHRoKTtcbiAgY29uc3QgaW5jb21pbmdIZWlnaHQgPSB0b051bWJlcihwYXlsb2FkLmhlaWdodCk7XG4gIGNvbnN0IGluY29taW5nWCA9IHRvTnVtYmVyKHBheWxvYWQueCk7XG4gIGNvbnN0IGluY29taW5nWSA9IHRvTnVtYmVyKHBheWxvYWQueSk7XG5cbiAgbGV0IG5leHQgPSB7XG4gICAgLi4ucGF5bG9hZCxcbiAgICBpZCxcbiAgICB0aXBvLFxuICAgIHNlY2Npb25JZDogdGFyZ2V0U2VjY2lvbklkLFxyXG4gICAgbW90aW9uRWZmZWN0OiBzYW5pdGl6ZU1vdGlvbkVmZmVjdChwYXlsb2FkLm1vdGlvbkVmZmVjdCksXHJcbiAgICByb3RhdGlvbjogdG9OdW1iZXIocGF5bG9hZC5yb3RhdGlvbiwgMCksXG4gICAgc2NhbGVYOiB0b051bWJlcihwYXlsb2FkLnNjYWxlWCwgMSksXG4gICAgc2NhbGVZOiB0b051bWJlcihwYXlsb2FkLnNjYWxlWSwgMSksXG4gIH07XG5cbiAgaWYgKHRpcG8gPT09IFwidGV4dG9cIikge1xuICAgIGNvbnN0IHZhcmlhbnQgPSBpbmZlclRleHRWYXJpYW50KHBheWxvYWQudmFyaWFudCwgaXNNb2JpbGUpO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gMTAwO1xuICAgIGNvbnN0IHkgPSBpbmNvbWluZ1kgPz8gdmFyaWFudC55O1xuXG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICB0ZXh0bzogcGF5bG9hZC50ZXh0byA/PyB2YXJpYW50LnRleHRvLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICBmb250U2l6ZTogdG9OdW1iZXIocGF5bG9hZC5mb250U2l6ZSwgdmFyaWFudC5mb250U2l6ZSksXG4gICAgICBjb2xvcjogcGF5bG9hZC5jb2xvciA/PyBcIiMwMDAwMDBcIixcbiAgICAgIGZvbnRGYW1pbHk6IHBheWxvYWQuZm9udEZhbWlseSA/PyBcInNhbnMtc2VyaWZcIixcbiAgICAgIGZvbnRXZWlnaHQ6IHBheWxvYWQuZm9udFdlaWdodCA/PyB2YXJpYW50LmZvbnRXZWlnaHQsXG4gICAgICBmb250U3R5bGU6IHBheWxvYWQuZm9udFN0eWxlID8/IHZhcmlhbnQuZm9udFN0eWxlLFxuICAgICAgdGV4dERlY29yYXRpb246IHBheWxvYWQudGV4dERlY29yYXRpb24gPz8gXCJub25lXCIsXG4gICAgICBhbGlnbjogcGF5bG9hZC5hbGlnbiA/PyBcImxlZnRcIixcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiZm9ybWFcIikge1xuICAgIGNvbnN0IGZpZ3VyYSA9IHBheWxvYWQuZmlndXJhIHx8IFwicmVjdFwiO1xuICAgIGNvbnN0IHNpemUgPSBpc01vYmlsZSA/IDEyMCA6IDEwMDtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gc2l6ZTtcbiAgICBjb25zdCBoZWlnaHQgPSBpbmNvbWluZ0hlaWdodCA/PyBzaXplO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gTWF0aC5yb3VuZCgoQ0FOVkFTX1dJRFRIIC0gd2lkdGgpIC8gMik7XG4gICAgY29uc3QgeSA9IGluY29taW5nWSA/PyAxMjA7XG5cbiAgICBuZXh0ID0ge1xuICAgICAgLi4ubmV4dCxcbiAgICAgIGZpZ3VyYSxcbiAgICAgIGNvbG9yOiBwYXlsb2FkLmNvbG9yID8/IFwiIzAwMDAwMFwiLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIHRleHRvOiBwYXlsb2FkLnRleHRvID8/IFwiXCIsXG4gICAgICBmb250U2l6ZTogdG9OdW1iZXIocGF5bG9hZC5mb250U2l6ZSwgMjQpLFxuICAgICAgZm9udEZhbWlseTogcGF5bG9hZC5mb250RmFtaWx5ID8/IFwic2Fucy1zZXJpZlwiLFxuICAgICAgZm9udFdlaWdodDogcGF5bG9hZC5mb250V2VpZ2h0ID8/IFwibm9ybWFsXCIsXG4gICAgICBmb250U3R5bGU6IHBheWxvYWQuZm9udFN0eWxlID8/IFwibm9ybWFsXCIsXG4gICAgICBjb2xvclRleHRvOiBwYXlsb2FkLmNvbG9yVGV4dG8gPz8gXCIjMDAwMDAwXCIsXG4gICAgICBhbGlnbjogcGF5bG9hZC5hbGlnbiA/PyBcImNlbnRlclwiLFxuICAgIH07XG5cbiAgICBpZiAoZmlndXJhID09PSBcImxpbmVcIikge1xuICAgICAgbmV4dC5wb2ludHMgPSBBcnJheS5pc0FycmF5KHBheWxvYWQucG9pbnRzKSA/IHBheWxvYWQucG9pbnRzIDogWzAsIDAsIDEwMCwgMF07XG4gICAgICBuZXh0LnN0cm9rZVdpZHRoID0gdG9OdW1iZXIocGF5bG9hZC5zdHJva2VXaWR0aCwgMik7XG4gICAgICBkZWxldGUgbmV4dC53aWR0aDtcbiAgICAgIGRlbGV0ZSBuZXh0LmhlaWdodDtcbiAgICB9IGVsc2UgaWYgKGZpZ3VyYSA9PT0gXCJjaXJjbGVcIikge1xuICAgICAgbmV4dC5yYWRpdXMgPSB0b051bWJlcihwYXlsb2FkLnJhZGl1cywgNTApO1xuICAgIH0gZWxzZSBpZiAoZmlndXJhID09PSBcInRyaWFuZ2xlXCIpIHtcbiAgICAgIG5leHQucmFkaXVzID0gdG9OdW1iZXIocGF5bG9hZC5yYWRpdXMsIDYwKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodGlwbyA9PT0gXCJpY29ub1wiIHx8IHRpcG8gPT09IFwiaWNvbm8tc3ZnXCIpIHtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gKGlzTW9iaWxlID8gMTEyIDogMTI4KTtcbiAgICBjb25zdCBoZWlnaHQgPSBpbmNvbWluZ0hlaWdodCA/PyB3aWR0aDtcbiAgICBjb25zdCB4ID0gaW5jb21pbmdYID8/IE1hdGgucm91bmQoKENBTlZBU19XSURUSCAtIHdpZHRoKSAvIDIpO1xuICAgIGNvbnN0IHkgPSBpbmNvbWluZ1kgPz8gMTIwO1xuICAgIG5leHQgPSB7XG4gICAgICAuLi5uZXh0LFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiaW1hZ2VuXCIpIHtcbiAgICBjb25zdCBzb3VyY2VXaWR0aCA9IHRvTnVtYmVyKHBheWxvYWQuYW5jaG8sIDMwMCk7XG4gICAgY29uc3Qgc291cmNlSGVpZ2h0ID0gdG9OdW1iZXIocGF5bG9hZC5hbHRvLCAzMDApO1xuICAgIGNvbnN0IHdpZHRoID0gaW5jb21pbmdXaWR0aCA/PyBNYXRoLm1pbihpc01vYmlsZSA/IDI2MCA6IDMyMCwgc291cmNlV2lkdGgpO1xuICAgIGNvbnN0IHJhdGlvID0gc291cmNlV2lkdGggPiAwID8gc291cmNlSGVpZ2h0IC8gc291cmNlV2lkdGggOiAxO1xuICAgIGNvbnN0IGhlaWdodCA9IGluY29taW5nSGVpZ2h0ID8/IE1hdGgubWF4KDQwLCBNYXRoLnJvdW5kKHdpZHRoICogcmF0aW8pKTtcbiAgICBjb25zdCB4ID0gaW5jb21pbmdYID8/IE1hdGgucm91bmQoKENBTlZBU19XSURUSCAtIHdpZHRoKSAvIDIpO1xuICAgIGNvbnN0IHkgPSBpbmNvbWluZ1kgPz8gMTIwO1xuICAgIG5leHQgPSB7XG4gICAgICAuLi5uZXh0LFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiZ2FsZXJpYVwiKSB7XG4gICAgY29uc3Qgcm93cyA9IE1hdGgubWF4KDEsIHRvTnVtYmVyKHBheWxvYWQucm93cywgMikpO1xuICAgIGNvbnN0IGNvbHMgPSBNYXRoLm1heCgxLCB0b051bWJlcihwYXlsb2FkLmNvbHMsIDIpKTtcbiAgICBjb25zdCBnYXAgPSBNYXRoLm1heCgwLCB0b051bWJlcihwYXlsb2FkLmdhcCwgOCkpO1xuICAgIGNvbnN0IHdpZHRoUGN0ID0gY2xhbXAoXG4gICAgICB0b051bWJlcihwYXlsb2FkLndpZHRoUGN0LCBpc01vYmlsZSA/IDkyIDogNzApLFxuICAgICAgMTAsXG4gICAgICAxMDBcbiAgICApO1xuICAgIGNvbnN0IHdpZHRoID0gaW5jb21pbmdXaWR0aCA/PyAoQ0FOVkFTX1dJRFRIICogd2lkdGhQY3QpIC8gMTAwO1xuICAgIGNvbnN0IGhlaWdodCA9XG4gICAgICBpbmNvbWluZ0hlaWdodCA/P1xuICAgICAgY2FsY0dhbGxlcnlIZWlnaHQoe1xuICAgICAgICB3aWR0aCxcbiAgICAgICAgcm93cyxcbiAgICAgICAgY29scyxcbiAgICAgICAgZ2FwLFxuICAgICAgICByYXRpbzogcGF5bG9hZC5yYXRpbyxcbiAgICAgIH0pO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gTWF0aC5yb3VuZCgoQ0FOVkFTX1dJRFRIIC0gd2lkdGgpIC8gMik7XG4gICAgY29uc3QgeSA9IGluY29taW5nWSA/PyAxMjA7XG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICByb3dzLFxuICAgICAgY29scyxcbiAgICAgIGdhcCxcbiAgICAgIHdpZHRoUGN0LFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICB9O1xuICB9IGVsc2UgaWYgKHRpcG8gPT09IFwiY291bnRkb3duXCIpIHtcbiAgICBjb25zdCBwcmVzZXRQcm9wcyA9IHBheWxvYWQucHJlc2V0UHJvcHMgfHwgcGF5bG9hZC5wcm9wcyB8fCB7fTtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gY2FsY0NvdW50ZG93bkluaXRpYWxXaWR0aChwcmVzZXRQcm9wcyk7XG4gICAgY29uc3QgaGVpZ2h0ID0gaW5jb21pbmdIZWlnaHQgPz8gOTA7XG4gICAgY29uc3QgeCA9IGluY29taW5nWCA/PyBNYXRoLnJvdW5kKChDQU5WQVNfV0lEVEggLSB3aWR0aCkgLyAyKTtcbiAgICBjb25zdCB5ID0gaW5jb21pbmdZID8/IDE0MDtcbiAgICBuZXh0ID0ge1xuICAgICAgLi4ubmV4dCxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBmZWNoYU9iamV0aXZvOiBwYXlsb2FkLmZlY2hhT2JqZXRpdm8gfHwgcGF5bG9hZC50YXJnZXRJU08gfHwgcGF5bG9hZC5mZWNoYUlTTyxcbiAgICAgIC4uLnByZXNldFByb3BzLFxuICAgIH07XG4gIH0gZWxzZSBpZiAodGlwbyA9PT0gXCJyc3ZwLWJvdG9uXCIpIHtcbiAgICBjb25zdCB3aWR0aCA9IGluY29taW5nV2lkdGggPz8gMjAwO1xuICAgIGNvbnN0IGhlaWdodCA9IGluY29taW5nSGVpZ2h0ID8/IDUwO1xuICAgIGNvbnN0IHggPSBpbmNvbWluZ1ggPz8gTWF0aC5yb3VuZCgoQ0FOVkFTX1dJRFRIIC0gd2lkdGgpIC8gMik7XG4gICAgY29uc3QgeSA9IGluY29taW5nWSA/PyAxNDA7XG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgbmV4dCA9IHtcbiAgICAgIC4uLm5leHQsXG4gICAgICB4OiBpbmNvbWluZ1ggPz8gMTAwLFxuICAgICAgeTogaW5jb21pbmdZID8/IDEyMCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKE51bWJlci5pc0Zpbml0ZShuZXh0LndpZHRoKSkge1xuICAgIG5leHQueCA9IGNsYW1wKHRvTnVtYmVyKG5leHQueCwgMCksIDAsIE1hdGgubWF4KDAsIENBTlZBU19XSURUSCAtIG5leHQud2lkdGgpKTtcbiAgfSBlbHNlIHtcbiAgICBuZXh0LnggPSBjbGFtcCh0b051bWJlcihuZXh0LngsIDApLCAwLCBDQU5WQVNfV0lEVEgpO1xuICB9XG4gIG5leHQueSA9IE1hdGgubWF4KDAsIHRvTnVtYmVyKG5leHQueSwgMCkpO1xuXG4gIGNvbnN0IHNlY2Npb24gPSBzZWNjaW9uZXMuZmluZCgocykgPT4gcy5pZCA9PT0gdGFyZ2V0U2VjY2lvbklkKTtcbiAgaWYgKG5vcm1hbGl6YXJBbHRvTW9kbz8uKHNlY2Npb24/LmFsdG9Nb2RvKSA9PT0gXCJwYW50YWxsYVwiKSB7XG4gICAgY29uc3QgeVB4ID0gTnVtYmVyLmlzRmluaXRlKG5leHQueSkgPyBuZXh0LnkgOiAwO1xuICAgIG5leHQueU5vcm0gPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB5UHggLyBBTFRVUkFfUEFOVEFMTEFfRURJVE9SKSk7XG4gIH1cblxuICBjb25zdCB7XG4gICAgdmFyaWFudDogX3ZhcmlhbnQsXG4gICAgcHJlc2V0UHJvcHM6IF9wcmVzZXRQcm9wcyxcbiAgICB0YXJnZXRJU086IF90YXJnZXRJU08sXG4gICAgLi4ucGVyc2lzdGFibGVcbiAgfSA9IG5leHQ7XG5cbiAgcmV0dXJuIHN0cmlwVW5kZWZpbmVkKHBlcnNpc3RhYmxlKTtcbn1cblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJzYW5pdGl6ZU1vdGlvbkVmZmVjdCIsIkNBTlZBU19XSURUSCIsImNsYW1wIiwidmFsdWUiLCJtaW4iLCJtYXgiLCJNYXRoIiwidG9OdW1iZXIiLCJmYWxsYmFjayIsIm4iLCJOdW1iZXIiLCJpc0Zpbml0ZSIsInN0cmlwVW5kZWZpbmVkIiwib2JqIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwiZmlsdGVyIiwidW5kZWZpbmVkIiwiY2FsY0NvdW50ZG93bkluaXRpYWxXaWR0aCIsInByZXNldFByb3BzIiwiZ2FwIiwicGFkZGluZ1giLCJjaGlwV2lkdGgiLCJjaGlwVyIsInJvdW5kIiwiaW5mZXJUZXh0VmFyaWFudCIsInZhcmlhbnQiLCJpc01vYmlsZSIsInRleHRvIiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwieSIsImNhbGNHYWxsZXJ5SGVpZ2h0Iiwid2lkdGgiLCJyb3dzIiwiY29scyIsInJhdGlvIiwicmF0aW9DZWxsIiwiY2VsbFciLCJjZWxsSCIsImNvbXB1dGVJbnNlcnREZWZhdWx0cyIsInBheWxvYWQiLCJ0YXJnZXRTZWNjaW9uSWQiLCJzZWNjaW9uZXMiLCJub3JtYWxpemFyQWx0b01vZG8iLCJBTFRVUkFfUEFOVEFMTEFfRURJVE9SIiwid2luZG93IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJ0aXBvIiwiaWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJpbmNvbWluZ1dpZHRoIiwiaW5jb21pbmdIZWlnaHQiLCJoZWlnaHQiLCJpbmNvbWluZ1giLCJ4IiwiaW5jb21pbmdZIiwibmV4dCIsInNlY2Npb25JZCIsIm1vdGlvbkVmZmVjdCIsInJvdGF0aW9uIiwic2NhbGVYIiwic2NhbGVZIiwiY29sb3IiLCJmb250RmFtaWx5IiwidGV4dERlY29yYXRpb24iLCJhbGlnbiIsImZpZ3VyYSIsInNpemUiLCJjb2xvclRleHRvIiwicG9pbnRzIiwiQXJyYXkiLCJpc0FycmF5Iiwic3Ryb2tlV2lkdGgiLCJyYWRpdXMiLCJzb3VyY2VXaWR0aCIsImFuY2hvIiwic291cmNlSGVpZ2h0IiwiYWx0byIsIndpZHRoUGN0IiwicHJvcHMiLCJmZWNoYU9iamV0aXZvIiwidGFyZ2V0SVNPIiwiZmVjaGFJU08iLCJzZWNjaW9uIiwiZmluZCIsInMiLCJhbHRvTW9kbyIsInlQeCIsInlOb3JtIiwiX3ZhcmlhbnQiLCJfcHJlc2V0UHJvcHMiLCJfdGFyZ2V0SVNPIiwicGVyc2lzdGFibGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/events/computeInsertDefaults.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/events/useEditorEvents.js":
/*!*********************************************************!*\
  !*** ./src/components/editor/events/useEditorEvents.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useEditorEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var _computeInsertDefaults__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./computeInsertDefaults */ \"(pages-dir-node)/./src/components/editor/events/computeInsertDefaults.js\");\n/* harmony import */ var _domain_motionEffects__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/domain/motionEffects */ \"(pages-dir-node)/./src/domain/motionEffects/index.js\");\n// src/components/editor/events/useEditorEvents.js\n\n\n\nconst COUNTDOWN_STYLE_KEYS = [\n    \"fontFamily\",\n    \"fontSize\",\n    \"color\",\n    \"labelColor\",\n    \"showLabels\",\n    \"boxBg\",\n    \"boxBorder\",\n    \"boxRadius\",\n    \"boxShadow\",\n    \"separator\",\n    \"gap\",\n    \"paddingX\",\n    \"paddingY\",\n    \"chipWidth\",\n    \"labelSize\",\n    \"padZero\",\n    \"layout\",\n    \"background\"\n];\nfunction pickCountdownStylePatch(source = {}) {\n    return COUNTDOWN_STYLE_KEYS.reduce((acc, key)=>{\n        acc[key] = source[key];\n        return acc;\n    }, {});\n}\n/**\n * Hook que concentra los eventos globales del editor y utilidades expuestas en window:\n * - window.asignarImagenACelda\n * - window.addEventListener(\"insertar-elemento\")\n * - window.addEventListener(\"actualizar-elemento\")\n * - window.addEventListener(\"agregar-cuadro-texto\")\n * - window.addEventListener(\"crear-seccion\")  (NO acá: ya está en useSectionsManager)\n *\n * ⚠️ Importante: no cambia lógica, solo mueve lo que ya existía en CanvasEditor.\n */ function useEditorEvents({ // estado/props necesarios\nceldaGaleriaActiva, setCeldaGaleriaActiva, setObjetos, secciones, seccionActivaId, setElementosSeleccionados, normalizarAltoModo, ALTURA_PANTALLA_EDITOR, // refs existentes\nnuevoTextoRef }) {\n    // ------------------------------------------------------------\n    // 1) Exponer función global: asignar imagen a la celda activa\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            window.asignarImagenACelda = ({\n                \"useEditorEvents.useEffect\": (mediaUrl, fit = \"cover\", bg)=>{\n                    if (!celdaGaleriaActiva) return false; // no hay slot activo\n                    const { objId, index } = celdaGaleriaActiva;\n                    const indexActual = Number(index);\n                    let nextActiveCell = null;\n                    const hayImagenNueva = typeof mediaUrl === \"string\" && mediaUrl.trim().length > 0;\n                    if (hayImagenNueva && Number.isFinite(indexActual)) {\n                        const objetosActuales = Array.isArray(window._objetosActuales) ? window._objetosActuales : [];\n                        const galeriaActual = objetosActuales.find({\n                            \"useEditorEvents.useEffect.galeriaActual\": (o)=>o?.id === objId && o?.tipo === \"galeria\"\n                        }[\"useEditorEvents.useEffect.galeriaActual\"]);\n                        const cellsActuales = Array.isArray(galeriaActual?.cells) ? galeriaActual.cells : [];\n                        if (cellsActuales.length > 1) {\n                            const projectedCells = [\n                                ...cellsActuales\n                            ];\n                            projectedCells[indexActual] = {\n                                ...projectedCells[indexActual] || {},\n                                mediaUrl\n                            };\n                            let siguienteVacia = -1;\n                            for(let step = 1; step < projectedCells.length; step += 1){\n                                const candidate = (indexActual + step) % projectedCells.length;\n                                if (!projectedCells[candidate]?.mediaUrl) {\n                                    siguienteVacia = candidate;\n                                    break;\n                                }\n                            }\n                            if (siguienteVacia === -1) {\n                                siguienteVacia = (indexActual + 1) % projectedCells.length;\n                            }\n                            if (siguienteVacia !== indexActual) {\n                                nextActiveCell = {\n                                    objId,\n                                    index: siguienteVacia\n                                };\n                            }\n                        }\n                    }\n                    setObjetos({\n                        \"useEditorEvents.useEffect\": (prev)=>{\n                            const i = prev.findIndex({\n                                \"useEditorEvents.useEffect.i\": (o)=>o.id === objId\n                            }[\"useEditorEvents.useEffect.i\"]);\n                            if (i === -1) return prev;\n                            const obj = prev[i];\n                            if (obj.tipo !== \"galeria\") return prev;\n                            const next = [\n                                ...prev\n                            ];\n                            const cells = Array.isArray(obj.cells) ? [\n                                ...obj.cells\n                            ] : [];\n                            const prevCell = cells[index] || {};\n                            cells[index] = {\n                                ...prevCell,\n                                mediaUrl,\n                                fit: fit || prevCell.fit || \"cover\",\n                                bg: bg ?? prevCell.bg ?? \"#f3f4f6\"\n                            };\n                            next[i] = {\n                                ...obj,\n                                cells\n                            };\n                            return next;\n                        }\n                    }[\"useEditorEvents.useEffect\"]);\n                    setCeldaGaleriaActiva(nextActiveCell);\n                    return true;\n                }\n            })[\"useEditorEvents.useEffect\"];\n            return ({\n                \"useEditorEvents.useEffect\": ()=>{\n                    if (window.asignarImagenACelda) delete window.asignarImagenACelda;\n                }\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        celdaGaleriaActiva,\n        setObjetos,\n        setCeldaGaleriaActiva\n    ]);\n    // ------------------------------------------------------------\n    // 2) Evento global: insertar-elemento\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            const handler = {\n                \"useEditorEvents.useEffect.handler\": (e)=>{\n                    const nuevo = e.detail || {};\n                    const fallbackId = window._lastSeccionActivaId || Array.isArray(secciones) && secciones[0]?.id || null;\n                    const targetSeccionId = seccionActivaId || fallbackId;\n                    if (!targetSeccionId) {\n                        alert(\"⚠️ No hay secciones aún. Creá una sección para insertar el elemento.\");\n                        return;\n                    }\n                    const nuevoConSeccion = (0,_computeInsertDefaults__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n                        payload: nuevo,\n                        targetSeccionId,\n                        secciones,\n                        normalizarAltoModo,\n                        ALTURA_PANTALLA_EDITOR\n                    });\n                    const existingCountdownId = nuevoConSeccion?.tipo === \"countdown\" ? Array.isArray(window._objetosActuales) ? window._objetosActuales.find({\n                        \"useEditorEvents.useEffect.handler\": (o)=>o?.tipo === \"countdown\"\n                    }[\"useEditorEvents.useEffect.handler\"])?.id : null : null;\n                    setObjetos({\n                        \"useEditorEvents.useEffect.handler\": (prev)=>{\n                            if (nuevoConSeccion?.tipo !== \"countdown\") {\n                                return [\n                                    ...prev,\n                                    nuevoConSeccion\n                                ];\n                            }\n                            const countdownIndexes = [];\n                            for(let i = 0; i < prev.length; i += 1){\n                                if (prev[i]?.tipo === \"countdown\") countdownIndexes.push(i);\n                            }\n                            if (countdownIndexes.length === 0) {\n                                return [\n                                    ...prev,\n                                    nuevoConSeccion\n                                ];\n                            }\n                            const primaryIndex = countdownIndexes[0];\n                            const existingCountdown = prev[primaryIndex];\n                            const stylePatch = pickCountdownStylePatch(nuevoConSeccion);\n                            const nextCountdown = {\n                                ...existingCountdown,\n                                ...stylePatch,\n                                fechaObjetivo: nuevoConSeccion.fechaObjetivo ?? existingCountdown.fechaObjetivo,\n                                presetId: nuevoConSeccion.presetId\n                            };\n                            // Enforce global uniqueness: mantenemos solo un countdown por borrador.\n                            const next = prev.filter({\n                                \"useEditorEvents.useEffect.handler.next\": (obj, index)=>obj?.tipo !== \"countdown\" || index === primaryIndex\n                            }[\"useEditorEvents.useEffect.handler.next\"]);\n                            next[primaryIndex] = nextCountdown;\n                            return next;\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                    setElementosSeleccionados([\n                        existingCountdownId || nuevoConSeccion.id\n                    ]);\n                }\n            }[\"useEditorEvents.useEffect.handler\"];\n            window.addEventListener(\"insertar-elemento\", handler);\n            return ({\n                \"useEditorEvents.useEffect\": ()=>window.removeEventListener(\"insertar-elemento\", handler)\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        seccionActivaId,\n        secciones,\n        setObjetos,\n        setElementosSeleccionados,\n        normalizarAltoModo,\n        ALTURA_PANTALLA_EDITOR\n    ]);\n    // ------------------------------------------------------------\n    // 3) Evento global: actualizar-elemento\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            const handler = {\n                \"useEditorEvents.useEffect.handler\": (e)=>{\n                    const { id, cambios } = e.detail || {};\n                    if (!cambios) return;\n                    const targetId = id || (window._elementosSeleccionados?.[0] ?? null);\n                    if (!targetId) return;\n                    setObjetos({\n                        \"useEditorEvents.useEffect.handler\": (prev)=>{\n                            const i = prev.findIndex({\n                                \"useEditorEvents.useEffect.handler.i\": (o)=>o.id === targetId\n                            }[\"useEditorEvents.useEffect.handler.i\"]);\n                            if (i === -1) return prev;\n                            const next = [\n                                ...prev\n                            ];\n                            next[i] = {\n                                ...next[i],\n                                ...cambios\n                            };\n                            if (next[i]?.tipo === \"countdown\") {\n                                return next.filter({\n                                    \"useEditorEvents.useEffect.handler\": (obj, index)=>obj?.tipo !== \"countdown\" || index === i\n                                }[\"useEditorEvents.useEffect.handler\"]);\n                            }\n                            return next;\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                    // ✅ NUEVO: avisar a SelectionBounds que reattach el transformer\n                    requestAnimationFrame({\n                        \"useEditorEvents.useEffect.handler\": ()=>{\n                            requestAnimationFrame({\n                                \"useEditorEvents.useEffect.handler\": ()=>{\n                                    window.dispatchEvent(new CustomEvent(\"element-ref-registrado\", {\n                                        detail: {\n                                            id: targetId\n                                        }\n                                    }));\n                                }\n                            }[\"useEditorEvents.useEffect.handler\"]);\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                }\n            }[\"useEditorEvents.useEffect.handler\"];\n            window.addEventListener(\"actualizar-elemento\", handler);\n            return ({\n                \"useEditorEvents.useEffect\": ()=>window.removeEventListener(\"actualizar-elemento\", handler)\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        setObjetos\n    ]);\n    // ------------------------------------------------------------\n    // 4) Evento global: aplicar-estilo-efectos\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            const handler = {\n                \"useEditorEvents.useEffect.handler\": (e)=>{\n                    const presetId = e?.detail?.presetId;\n                    const normalizedPresetId = typeof presetId === \"string\" ? presetId : \"\";\n                    const summary = {\n                        presetId: normalizedPresetId,\n                        total: 0,\n                        changed: 0\n                    };\n                    setObjetos({\n                        \"useEditorEvents.useEffect.handler\": (prev)=>{\n                            const current = Array.isArray(prev) ? prev : [];\n                            const next = normalizedPresetId === _domain_motionEffects__WEBPACK_IMPORTED_MODULE_2__.CLEAR_ALL_MOTION_PRESET_ID ? (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_2__.clearAllMotionEffects)(current) : (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_2__.applyGlobalMotionPreset)(current, {\n                                presetId,\n                                secciones\n                            });\n                            summary.total = next.length;\n                            summary.changed = next.reduce({\n                                \"useEditorEvents.useEffect.handler\": (acc, item, index)=>{\n                                    const beforeEffect = (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_2__.sanitizeMotionEffect)(current[index]?.motionEffect);\n                                    return acc + (beforeEffect !== item.motionEffect ? 1 : 0);\n                                }\n                            }[\"useEditorEvents.useEffect.handler\"], 0);\n                            return next;\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                    requestAnimationFrame({\n                        \"useEditorEvents.useEffect.handler\": ()=>{\n                            window.dispatchEvent(new CustomEvent(\"motion-effects-applied\", {\n                                detail: summary\n                            }));\n                        }\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                }\n            }[\"useEditorEvents.useEffect.handler\"];\n            window.addEventListener(\"aplicar-estilo-efectos\", handler);\n            return ({\n                \"useEditorEvents.useEffect\": ()=>window.removeEventListener(\"aplicar-estilo-efectos\", handler)\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        setObjetos,\n        secciones\n    ]);\n    // ------------------------------------------------------------\n    // 5) Evento global: agregar-cuadro-texto\n    // ------------------------------------------------------------\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorEvents.useEffect\": ()=>{\n            const handler = {\n                \"useEditorEvents.useEffect.handler\": ()=>{\n                    if (!seccionActivaId) {\n                        alert(\"Seleccioná una sección antes de agregar un cuadro de texto.\");\n                        return;\n                    }\n                    const nuevo = {\n                        id: `texto-${Date.now()}`,\n                        tipo: \"texto\",\n                        texto: \"Texto\",\n                        x: 100,\n                        y: 100,\n                        motionEffect: (0,_domain_motionEffects__WEBPACK_IMPORTED_MODULE_2__.sanitizeMotionEffect)(\"none\"),\n                        fontSize: 24,\n                        color: \"#000000\",\n                        fontFamily: \"sans-serif\",\n                        fontWeight: \"normal\",\n                        fontStyle: \"normal\",\n                        textDecoration: \"none\",\n                        align: \"left\",\n                        rotation: 0,\n                        scaleX: 1,\n                        scaleY: 1,\n                        seccionId: seccionActivaId\n                    };\n                    // ✅ Si la sección activa es pantalla, inicializamos yNorm\n                    const secActiva = secciones.find({\n                        \"useEditorEvents.useEffect.handler.secActiva\": (s)=>s.id === seccionActivaId\n                    }[\"useEditorEvents.useEffect.handler.secActiva\"]);\n                    if (normalizarAltoModo(secActiva?.altoModo) === \"pantalla\") {\n                        nuevo.yNorm = Math.max(0, Math.min(1, (Number(nuevo.y) || 0) / ALTURA_PANTALLA_EDITOR));\n                    }\n                    // ✅ respeta el comportamiento original\n                    if (nuevoTextoRef?.current != null) {\n                        nuevoTextoRef.current = nuevo.id;\n                    }\n                    setObjetos({\n                        \"useEditorEvents.useEffect.handler\": (prev)=>[\n                                ...prev,\n                                nuevo\n                            ]\n                    }[\"useEditorEvents.useEffect.handler\"]);\n                }\n            }[\"useEditorEvents.useEffect.handler\"];\n            window.addEventListener(\"agregar-cuadro-texto\", handler);\n            return ({\n                \"useEditorEvents.useEffect\": ()=>window.removeEventListener(\"agregar-cuadro-texto\", handler)\n            })[\"useEditorEvents.useEffect\"];\n        }\n    }[\"useEditorEvents.useEffect\"], [\n        seccionActivaId,\n        secciones,\n        setObjetos,\n        normalizarAltoModo,\n        ALTURA_PANTALLA_EDITOR,\n        nuevoTextoRef\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9ldmVudHMvdXNlRWRpdG9yRXZlbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxrREFBa0Q7QUFDaEI7QUFDMEI7QUFNNUI7QUFFaEMsTUFBTU0sdUJBQXVCO0lBQzNCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNEO0FBRUQsU0FBU0Msd0JBQXdCQyxTQUFTLENBQUMsQ0FBQztJQUMxQyxPQUFPRixxQkFBcUJHLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQztRQUN2Q0QsR0FBRyxDQUFDQyxJQUFJLEdBQUdILE1BQU0sQ0FBQ0csSUFBSTtRQUN0QixPQUFPRDtJQUNULEdBQUcsQ0FBQztBQUNOO0FBRUE7Ozs7Ozs7OztDQVNDLEdBQ2MsU0FBU0UsZ0JBQWdCLEVBQ3RDLDBCQUEwQjtBQUMxQkMsa0JBQWtCLEVBQ2xCQyxxQkFBcUIsRUFDckJDLFVBQVUsRUFFVkMsU0FBUyxFQUNUQyxlQUFlLEVBRWZDLHlCQUF5QixFQUV6QkMsa0JBQWtCLEVBQ2xCQyxzQkFBc0IsRUFFdEIsa0JBQWtCO0FBQ2xCQyxhQUFhLEVBR2Q7SUFDQywrREFBK0Q7SUFDL0QsOERBQThEO0lBQzlELCtEQUErRDtJQUMvRHJCLGdEQUFTQTtxQ0FBQztZQUNSc0IsT0FBT0MsbUJBQW1COzZDQUFHLENBQUNDLFVBQVVDLE1BQU0sT0FBTyxFQUFFQztvQkFDckQsSUFBSSxDQUFDYixvQkFBb0IsT0FBTyxPQUFPLHFCQUFxQjtvQkFDNUQsTUFBTSxFQUFFYyxLQUFLLEVBQUVDLEtBQUssRUFBRSxHQUFHZjtvQkFDekIsTUFBTWdCLGNBQWNDLE9BQU9GO29CQUMzQixJQUFJRyxpQkFBaUI7b0JBRXJCLE1BQU1DLGlCQUFpQixPQUFPUixhQUFhLFlBQVlBLFNBQVNTLElBQUksR0FBR0MsTUFBTSxHQUFHO29C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c0MsQ0FBQyxLQUFLLEtBQUs3RTtvQkFFekM7b0JBRUEsdUNBQXVDO29CQUN2QyxJQUFJQyxlQUFlb0UsV0FBVyxNQUFNO3dCQUNsQ3BFLGNBQWNvRSxPQUFPLEdBQUc5QixNQUFNaEIsRUFBRTtvQkFDbEM7b0JBRUE1Qjs2REFBVyxDQUFDb0MsT0FBUzttQ0FBSUE7Z0NBQU1ROzZCQUFNOztnQkFDdkM7O1lBRUFyQyxPQUFPdUQsZ0JBQWdCLENBQUMsd0JBQXdCcEI7WUFDaEQ7NkNBQU8sSUFBTW5DLE9BQU93RCxtQkFBbUIsQ0FBQyx3QkFBd0JyQjs7UUFDbEU7b0NBQUc7UUFDRHhDO1FBQ0FEO1FBQ0FEO1FBQ0FJO1FBQ0FDO1FBQ0FDO0tBQ0Q7QUFDSCIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxlZGl0b3JcXGV2ZW50c1xcdXNlRWRpdG9yRXZlbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2VkaXRvci9ldmVudHMvdXNlRWRpdG9yRXZlbnRzLmpzXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBjb21wdXRlSW5zZXJ0RGVmYXVsdHMgZnJvbSBcIi4vY29tcHV0ZUluc2VydERlZmF1bHRzXCI7XG5pbXBvcnQge1xuICBhcHBseUdsb2JhbE1vdGlvblByZXNldCxcbiAgY2xlYXJBbGxNb3Rpb25FZmZlY3RzLFxuICBDTEVBUl9BTExfTU9USU9OX1BSRVNFVF9JRCxcbiAgc2FuaXRpemVNb3Rpb25FZmZlY3QsXG59IGZyb20gXCJAL2RvbWFpbi9tb3Rpb25FZmZlY3RzXCI7XG5cbmNvbnN0IENPVU5URE9XTl9TVFlMRV9LRVlTID0gW1xuICBcImZvbnRGYW1pbHlcIixcbiAgXCJmb250U2l6ZVwiLFxuICBcImNvbG9yXCIsXG4gIFwibGFiZWxDb2xvclwiLFxuICBcInNob3dMYWJlbHNcIixcbiAgXCJib3hCZ1wiLFxuICBcImJveEJvcmRlclwiLFxuICBcImJveFJhZGl1c1wiLFxuICBcImJveFNoYWRvd1wiLFxuICBcInNlcGFyYXRvclwiLFxuICBcImdhcFwiLFxuICBcInBhZGRpbmdYXCIsXG4gIFwicGFkZGluZ1lcIixcbiAgXCJjaGlwV2lkdGhcIixcbiAgXCJsYWJlbFNpemVcIixcbiAgXCJwYWRaZXJvXCIsXG4gIFwibGF5b3V0XCIsXG4gIFwiYmFja2dyb3VuZFwiLFxuXTtcblxuZnVuY3Rpb24gcGlja0NvdW50ZG93blN0eWxlUGF0Y2goc291cmNlID0ge30pIHtcbiAgcmV0dXJuIENPVU5URE9XTl9TVFlMRV9LRVlTLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICBhY2Nba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cblxuLyoqXG4gKiBIb29rIHF1ZSBjb25jZW50cmEgbG9zIGV2ZW50b3MgZ2xvYmFsZXMgZGVsIGVkaXRvciB5IHV0aWxpZGFkZXMgZXhwdWVzdGFzIGVuIHdpbmRvdzpcbiAqIC0gd2luZG93LmFzaWduYXJJbWFnZW5BQ2VsZGFcbiAqIC0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnNlcnRhci1lbGVtZW50b1wiKVxuICogLSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImFjdHVhbGl6YXItZWxlbWVudG9cIilcbiAqIC0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhZ3JlZ2FyLWN1YWRyby10ZXh0b1wiKVxuICogLSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNyZWFyLXNlY2Npb25cIikgIChOTyBhY8OhOiB5YSBlc3TDoSBlbiB1c2VTZWN0aW9uc01hbmFnZXIpXG4gKlxuICog4pqg77iPIEltcG9ydGFudGU6IG5vIGNhbWJpYSBsw7NnaWNhLCBzb2xvIG11ZXZlIGxvIHF1ZSB5YSBleGlzdMOtYSBlbiBDYW52YXNFZGl0b3IuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUVkaXRvckV2ZW50cyh7XG4gIC8vIGVzdGFkby9wcm9wcyBuZWNlc2FyaW9zXG4gIGNlbGRhR2FsZXJpYUFjdGl2YSxcbiAgc2V0Q2VsZGFHYWxlcmlhQWN0aXZhLFxuICBzZXRPYmpldG9zLFxuXG4gIHNlY2Npb25lcyxcbiAgc2VjY2lvbkFjdGl2YUlkLFxuXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG5cbiAgbm9ybWFsaXphckFsdG9Nb2RvLFxuICBBTFRVUkFfUEFOVEFMTEFfRURJVE9SLFxuXG4gIC8vIHJlZnMgZXhpc3RlbnRlc1xuICBudWV2b1RleHRvUmVmLFxuXG4gIC8vIHNldFNlY2Npb25BY3RpdmFJZCBOTyBsbyB1c2Ftb3MgYWPDoSAoc29sbyBsbyB1c2EgZWwgY2FudmFzIGVuIG90cm9zIGhhbmRsZXJzKVxufSkge1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gMSkgRXhwb25lciBmdW5jacOzbiBnbG9iYWw6IGFzaWduYXIgaW1hZ2VuIGEgbGEgY2VsZGEgYWN0aXZhXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHdpbmRvdy5hc2lnbmFySW1hZ2VuQUNlbGRhID0gKG1lZGlhVXJsLCBmaXQgPSBcImNvdmVyXCIsIGJnKSA9PiB7XG4gICAgICBpZiAoIWNlbGRhR2FsZXJpYUFjdGl2YSkgcmV0dXJuIGZhbHNlOyAvLyBubyBoYXkgc2xvdCBhY3Rpdm9cbiAgICAgIGNvbnN0IHsgb2JqSWQsIGluZGV4IH0gPSBjZWxkYUdhbGVyaWFBY3RpdmE7XG4gICAgICBjb25zdCBpbmRleEFjdHVhbCA9IE51bWJlcihpbmRleCk7XG4gICAgICBsZXQgbmV4dEFjdGl2ZUNlbGwgPSBudWxsO1xuXG4gICAgICBjb25zdCBoYXlJbWFnZW5OdWV2YSA9IHR5cGVvZiBtZWRpYVVybCA9PT0gXCJzdHJpbmdcIiAmJiBtZWRpYVVybC50cmltKCkubGVuZ3RoID4gMDtcbiAgICAgIGlmIChoYXlJbWFnZW5OdWV2YSAmJiBOdW1iZXIuaXNGaW5pdGUoaW5kZXhBY3R1YWwpKSB7XG4gICAgICAgIGNvbnN0IG9iamV0b3NBY3R1YWxlcyA9IEFycmF5LmlzQXJyYXkod2luZG93Ll9vYmpldG9zQWN0dWFsZXMpXG4gICAgICAgICAgPyB3aW5kb3cuX29iamV0b3NBY3R1YWxlc1xuICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IGdhbGVyaWFBY3R1YWwgPSBvYmpldG9zQWN0dWFsZXMuZmluZChcbiAgICAgICAgICAobykgPT4gbz8uaWQgPT09IG9iaklkICYmIG8/LnRpcG8gPT09IFwiZ2FsZXJpYVwiXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNlbGxzQWN0dWFsZXMgPSBBcnJheS5pc0FycmF5KGdhbGVyaWFBY3R1YWw/LmNlbGxzKSA/IGdhbGVyaWFBY3R1YWwuY2VsbHMgOiBbXTtcblxuICAgICAgICBpZiAoY2VsbHNBY3R1YWxlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgY29uc3QgcHJvamVjdGVkQ2VsbHMgPSBbLi4uY2VsbHNBY3R1YWxlc107XG4gICAgICAgICAgcHJvamVjdGVkQ2VsbHNbaW5kZXhBY3R1YWxdID0ge1xuICAgICAgICAgICAgLi4uKHByb2plY3RlZENlbGxzW2luZGV4QWN0dWFsXSB8fCB7fSksXG4gICAgICAgICAgICBtZWRpYVVybCxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgbGV0IHNpZ3VpZW50ZVZhY2lhID0gLTE7XG4gICAgICAgICAgZm9yIChsZXQgc3RlcCA9IDE7IHN0ZXAgPCBwcm9qZWN0ZWRDZWxscy5sZW5ndGg7IHN0ZXAgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gKGluZGV4QWN0dWFsICsgc3RlcCkgJSBwcm9qZWN0ZWRDZWxscy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIXByb2plY3RlZENlbGxzW2NhbmRpZGF0ZV0/Lm1lZGlhVXJsKSB7XG4gICAgICAgICAgICAgIHNpZ3VpZW50ZVZhY2lhID0gY2FuZGlkYXRlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2lndWllbnRlVmFjaWEgPT09IC0xKSB7XG4gICAgICAgICAgICBzaWd1aWVudGVWYWNpYSA9IChpbmRleEFjdHVhbCArIDEpICUgcHJvamVjdGVkQ2VsbHMubGVuZ3RoO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzaWd1aWVudGVWYWNpYSAhPT0gaW5kZXhBY3R1YWwpIHtcbiAgICAgICAgICAgIG5leHRBY3RpdmVDZWxsID0geyBvYmpJZCwgaW5kZXg6IHNpZ3VpZW50ZVZhY2lhIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNldE9iamV0b3MoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IHByZXYuZmluZEluZGV4KChvKSA9PiBvLmlkID09PSBvYmpJZCk7XG4gICAgICAgIGlmIChpID09PSAtMSkgcmV0dXJuIHByZXY7XG5cbiAgICAgICAgY29uc3Qgb2JqID0gcHJldltpXTtcbiAgICAgICAgaWYgKG9iai50aXBvICE9PSBcImdhbGVyaWFcIikgcmV0dXJuIHByZXY7XG5cbiAgICAgICAgY29uc3QgbmV4dCA9IFsuLi5wcmV2XTtcbiAgICAgICAgY29uc3QgY2VsbHMgPSBBcnJheS5pc0FycmF5KG9iai5jZWxscykgPyBbLi4ub2JqLmNlbGxzXSA6IFtdO1xuICAgICAgICBjb25zdCBwcmV2Q2VsbCA9IGNlbGxzW2luZGV4XSB8fCB7fTtcbiAgICAgICAgY2VsbHNbaW5kZXhdID0ge1xuICAgICAgICAgIC4uLnByZXZDZWxsLFxuICAgICAgICAgIG1lZGlhVXJsLFxuICAgICAgICAgIGZpdDogZml0IHx8IHByZXZDZWxsLmZpdCB8fCBcImNvdmVyXCIsXG4gICAgICAgICAgYmc6IGJnID8/IHByZXZDZWxsLmJnID8/IFwiI2YzZjRmNlwiLFxuICAgICAgICB9O1xuXG4gICAgICAgIG5leHRbaV0gPSB7IC4uLm9iaiwgY2VsbHMgfTtcbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICB9KTtcblxuICAgICAgc2V0Q2VsZGFHYWxlcmlhQWN0aXZhKG5leHRBY3RpdmVDZWxsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHdpbmRvdy5hc2lnbmFySW1hZ2VuQUNlbGRhKSBkZWxldGUgd2luZG93LmFzaWduYXJJbWFnZW5BQ2VsZGE7XG4gICAgfTtcbiAgfSwgW2NlbGRhR2FsZXJpYUFjdGl2YSwgc2V0T2JqZXRvcywgc2V0Q2VsZGFHYWxlcmlhQWN0aXZhXSk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDIpIEV2ZW50byBnbG9iYWw6IGluc2VydGFyLWVsZW1lbnRvXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgbnVldm8gPSBlLmRldGFpbCB8fCB7fTtcblxuICAgICAgY29uc3QgZmFsbGJhY2tJZCA9XG4gICAgICAgIHdpbmRvdy5fbGFzdFNlY2Npb25BY3RpdmFJZCB8fFxuICAgICAgICAoQXJyYXkuaXNBcnJheShzZWNjaW9uZXMpICYmIHNlY2Npb25lc1swXT8uaWQpIHx8XG4gICAgICAgIG51bGw7XG5cbiAgICAgIGNvbnN0IHRhcmdldFNlY2Npb25JZCA9IHNlY2Npb25BY3RpdmFJZCB8fCBmYWxsYmFja0lkO1xuXG4gICAgICBpZiAoIXRhcmdldFNlY2Npb25JZCkge1xuICAgICAgICBhbGVydChcIuKaoO+4jyBObyBoYXkgc2VjY2lvbmVzIGHDum4uIENyZcOhIHVuYSBzZWNjacOzbiBwYXJhIGluc2VydGFyIGVsIGVsZW1lbnRvLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBudWV2b0NvblNlY2Npb24gPSBjb21wdXRlSW5zZXJ0RGVmYXVsdHMoe1xuICAgICAgICBwYXlsb2FkOiBudWV2byxcbiAgICAgICAgdGFyZ2V0U2VjY2lvbklkLFxuICAgICAgICBzZWNjaW9uZXMsXG4gICAgICAgIG5vcm1hbGl6YXJBbHRvTW9kbyxcbiAgICAgICAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBleGlzdGluZ0NvdW50ZG93bklkID1cbiAgICAgICAgbnVldm9Db25TZWNjaW9uPy50aXBvID09PSBcImNvdW50ZG93blwiXG4gICAgICAgICAgPyAoQXJyYXkuaXNBcnJheSh3aW5kb3cuX29iamV0b3NBY3R1YWxlcylcbiAgICAgICAgICAgID8gd2luZG93Ll9vYmpldG9zQWN0dWFsZXMuZmluZCgobykgPT4gbz8udGlwbyA9PT0gXCJjb3VudGRvd25cIik/LmlkXG4gICAgICAgICAgICA6IG51bGwpXG4gICAgICAgICAgOiBudWxsO1xuXG4gICAgICBzZXRPYmpldG9zKChwcmV2KSA9PiB7XG4gICAgICAgIGlmIChudWV2b0NvblNlY2Npb24/LnRpcG8gIT09IFwiY291bnRkb3duXCIpIHtcbiAgICAgICAgICByZXR1cm4gWy4uLnByZXYsIG51ZXZvQ29uU2VjY2lvbl07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb3VudGRvd25JbmRleGVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldi5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChwcmV2W2ldPy50aXBvID09PSBcImNvdW50ZG93blwiKSBjb3VudGRvd25JbmRleGVzLnB1c2goaSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY291bnRkb3duSW5kZXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gWy4uLnByZXYsIG51ZXZvQ29uU2VjY2lvbl07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcmltYXJ5SW5kZXggPSBjb3VudGRvd25JbmRleGVzWzBdO1xuICAgICAgICBjb25zdCBleGlzdGluZ0NvdW50ZG93biA9IHByZXZbcHJpbWFyeUluZGV4XTtcbiAgICAgICAgY29uc3Qgc3R5bGVQYXRjaCA9IHBpY2tDb3VudGRvd25TdHlsZVBhdGNoKG51ZXZvQ29uU2VjY2lvbik7XG5cbiAgICAgICAgY29uc3QgbmV4dENvdW50ZG93biA9IHtcbiAgICAgICAgICAuLi5leGlzdGluZ0NvdW50ZG93bixcbiAgICAgICAgICAuLi5zdHlsZVBhdGNoLFxuICAgICAgICAgIGZlY2hhT2JqZXRpdm86IG51ZXZvQ29uU2VjY2lvbi5mZWNoYU9iamV0aXZvID8/IGV4aXN0aW5nQ291bnRkb3duLmZlY2hhT2JqZXRpdm8sXG4gICAgICAgICAgcHJlc2V0SWQ6IG51ZXZvQ29uU2VjY2lvbi5wcmVzZXRJZCxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBFbmZvcmNlIGdsb2JhbCB1bmlxdWVuZXNzOiBtYW50ZW5lbW9zIHNvbG8gdW4gY291bnRkb3duIHBvciBib3JyYWRvci5cbiAgICAgICAgY29uc3QgbmV4dCA9IHByZXYuZmlsdGVyKFxuICAgICAgICAgIChvYmosIGluZGV4KSA9PiBvYmo/LnRpcG8gIT09IFwiY291bnRkb3duXCIgfHwgaW5kZXggPT09IHByaW1hcnlJbmRleFxuICAgICAgICApO1xuICAgICAgICBuZXh0W3ByaW1hcnlJbmRleF0gPSBuZXh0Q291bnRkb3duO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgIH0pO1xuXG4gICAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtleGlzdGluZ0NvdW50ZG93bklkIHx8IG51ZXZvQ29uU2VjY2lvbi5pZF0pO1xuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImluc2VydGFyLWVsZW1lbnRvXCIsIGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImluc2VydGFyLWVsZW1lbnRvXCIsIGhhbmRsZXIpO1xuICB9LCBbXG4gICAgc2VjY2lvbkFjdGl2YUlkLFxuICAgIHNlY2Npb25lcyxcbiAgICBzZXRPYmpldG9zLFxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgbm9ybWFsaXphckFsdG9Nb2RvLFxuICAgIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IsXG4gIF0pO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyAzKSBFdmVudG8gZ2xvYmFsOiBhY3R1YWxpemFyLWVsZW1lbnRvXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgeyBpZCwgY2FtYmlvcyB9ID0gZS5kZXRhaWwgfHwge307XG4gICAgICBpZiAoIWNhbWJpb3MpIHJldHVybjtcblxuICAgICAgY29uc3QgdGFyZ2V0SWQgPSBpZCB8fCAod2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zPy5bMF0gPz8gbnVsbCk7XG4gICAgICBpZiAoIXRhcmdldElkKSByZXR1cm47XG5cbiAgICAgIHNldE9iamV0b3MoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IHByZXYuZmluZEluZGV4KChvKSA9PiBvLmlkID09PSB0YXJnZXRJZCk7XG4gICAgICAgIGlmIChpID09PSAtMSkgcmV0dXJuIHByZXY7XG5cbiAgICAgICAgY29uc3QgbmV4dCA9IFsuLi5wcmV2XTtcbiAgICAgICAgbmV4dFtpXSA9IHsgLi4ubmV4dFtpXSwgLi4uY2FtYmlvcyB9O1xuXG4gICAgICAgIGlmIChuZXh0W2ldPy50aXBvID09PSBcImNvdW50ZG93blwiKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQuZmlsdGVyKChvYmosIGluZGV4KSA9PiBvYmo/LnRpcG8gIT09IFwiY291bnRkb3duXCIgfHwgaW5kZXggPT09IGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICB9KTtcblxuICAgICAgLy8g4pyFIE5VRVZPOiBhdmlzYXIgYSBTZWxlY3Rpb25Cb3VuZHMgcXVlIHJlYXR0YWNoIGVsIHRyYW5zZm9ybWVyXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiZWxlbWVudC1yZWYtcmVnaXN0cmFkb1wiLCB7XG4gICAgICAgICAgICAgIGRldGFpbDogeyBpZDogdGFyZ2V0SWQgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhY3R1YWxpemFyLWVsZW1lbnRvXCIsIGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFjdHVhbGl6YXItZWxlbWVudG9cIiwgaGFuZGxlcik7XG4gIH0sIFtzZXRPYmpldG9zXSk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDQpIEV2ZW50byBnbG9iYWw6IGFwbGljYXItZXN0aWxvLWVmZWN0b3NcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlciA9IChlKSA9PiB7XG4gICAgICBjb25zdCBwcmVzZXRJZCA9IGU/LmRldGFpbD8ucHJlc2V0SWQ7XG4gICAgICBjb25zdCBub3JtYWxpemVkUHJlc2V0SWQgPSB0eXBlb2YgcHJlc2V0SWQgPT09IFwic3RyaW5nXCIgPyBwcmVzZXRJZCA6IFwiXCI7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0ge1xuICAgICAgICBwcmVzZXRJZDogbm9ybWFsaXplZFByZXNldElkLFxuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgY2hhbmdlZDogMCxcbiAgICAgIH07XG5cbiAgICAgIHNldE9iamV0b3MoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IEFycmF5LmlzQXJyYXkocHJldikgPyBwcmV2IDogW107XG4gICAgICAgIGNvbnN0IG5leHQgPVxuICAgICAgICAgIG5vcm1hbGl6ZWRQcmVzZXRJZCA9PT0gQ0xFQVJfQUxMX01PVElPTl9QUkVTRVRfSURcbiAgICAgICAgICAgID8gY2xlYXJBbGxNb3Rpb25FZmZlY3RzKGN1cnJlbnQpXG4gICAgICAgICAgICA6IGFwcGx5R2xvYmFsTW90aW9uUHJlc2V0KGN1cnJlbnQsIHtcbiAgICAgICAgICAgICAgcHJlc2V0SWQsXG4gICAgICAgICAgICAgIHNlY2Npb25lcyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHN1bW1hcnkudG90YWwgPSBuZXh0Lmxlbmd0aDtcbiAgICAgICAgc3VtbWFyeS5jaGFuZ2VkID0gbmV4dC5yZWR1Y2UoKGFjYywgaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBiZWZvcmVFZmZlY3QgPSBzYW5pdGl6ZU1vdGlvbkVmZmVjdChjdXJyZW50W2luZGV4XT8ubW90aW9uRWZmZWN0KTtcbiAgICAgICAgICByZXR1cm4gYWNjICsgKGJlZm9yZUVmZmVjdCAhPT0gaXRlbS5tb3Rpb25FZmZlY3QgPyAxIDogMCk7XG4gICAgICAgIH0sIDApO1xuICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgIH0pO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJtb3Rpb24tZWZmZWN0cy1hcHBsaWVkXCIsIHtcbiAgICAgICAgICAgIGRldGFpbDogc3VtbWFyeSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYXBsaWNhci1lc3RpbG8tZWZlY3Rvc1wiLCBoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhcGxpY2FyLWVzdGlsby1lZmVjdG9zXCIsIGhhbmRsZXIpO1xuICB9LCBbc2V0T2JqZXRvcywgc2VjY2lvbmVzXSk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIDUpIEV2ZW50byBnbG9iYWw6IGFncmVnYXItY3VhZHJvLXRleHRvXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXNlY2Npb25BY3RpdmFJZCkge1xuICAgICAgICBhbGVydChcIlNlbGVjY2lvbsOhIHVuYSBzZWNjacOzbiBhbnRlcyBkZSBhZ3JlZ2FyIHVuIGN1YWRybyBkZSB0ZXh0by5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbnVldm8gPSB7XG4gICAgICAgIGlkOiBgdGV4dG8tJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHRpcG86IFwidGV4dG9cIixcbiAgICAgICAgdGV4dG86IFwiVGV4dG9cIixcbiAgICAgICAgeDogMTAwLFxuICAgICAgICB5OiAxMDAsXG4gICAgICAgIG1vdGlvbkVmZmVjdDogc2FuaXRpemVNb3Rpb25FZmZlY3QoXCJub25lXCIpLFxuICAgICAgICBmb250U2l6ZTogMjQsXG4gICAgICAgIGNvbG9yOiBcIiMwMDAwMDBcIixcbiAgICAgICAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXG4gICAgICAgIGZvbnRXZWlnaHQ6IFwibm9ybWFsXCIsXG4gICAgICAgIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgICAgICAgdGV4dERlY29yYXRpb246IFwibm9uZVwiLFxuICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXG4gICAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgICBzY2FsZVg6IDEsXG4gICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgc2VjY2lvbklkOiBzZWNjaW9uQWN0aXZhSWQsXG4gICAgICB9O1xuXG4gICAgICAvLyDinIUgU2kgbGEgc2VjY2nDs24gYWN0aXZhIGVzIHBhbnRhbGxhLCBpbmljaWFsaXphbW9zIHlOb3JtXG4gICAgICBjb25zdCBzZWNBY3RpdmEgPSBzZWNjaW9uZXMuZmluZCgocykgPT4gcy5pZCA9PT0gc2VjY2lvbkFjdGl2YUlkKTtcbiAgICAgIGlmIChub3JtYWxpemFyQWx0b01vZG8oc2VjQWN0aXZhPy5hbHRvTW9kbykgPT09IFwicGFudGFsbGFcIikge1xuICAgICAgICBudWV2by55Tm9ybSA9IE1hdGgubWF4KFxuICAgICAgICAgIDAsXG4gICAgICAgICAgTWF0aC5taW4oMSwgKE51bWJlcihudWV2by55KSB8fCAwKSAvIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIOKchSByZXNwZXRhIGVsIGNvbXBvcnRhbWllbnRvIG9yaWdpbmFsXG4gICAgICBpZiAobnVldm9UZXh0b1JlZj8uY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgIG51ZXZvVGV4dG9SZWYuY3VycmVudCA9IG51ZXZvLmlkO1xuICAgICAgfVxuXG4gICAgICBzZXRPYmpldG9zKChwcmV2KSA9PiBbLi4ucHJldiwgbnVldm9dKTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJhZ3JlZ2FyLWN1YWRyby10ZXh0b1wiLCBoYW5kbGVyKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhZ3JlZ2FyLWN1YWRyby10ZXh0b1wiLCBoYW5kbGVyKTtcbiAgfSwgW1xuICAgIHNlY2Npb25BY3RpdmFJZCxcbiAgICBzZWNjaW9uZXMsXG4gICAgc2V0T2JqZXRvcyxcbiAgICBub3JtYWxpemFyQWx0b01vZG8sXG4gICAgQUxUVVJBX1BBTlRBTExBX0VESVRPUixcbiAgICBudWV2b1RleHRvUmVmLFxuICBdKTtcbn1cblxyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwiY29tcHV0ZUluc2VydERlZmF1bHRzIiwiYXBwbHlHbG9iYWxNb3Rpb25QcmVzZXQiLCJjbGVhckFsbE1vdGlvbkVmZmVjdHMiLCJDTEVBUl9BTExfTU9USU9OX1BSRVNFVF9JRCIsInNhbml0aXplTW90aW9uRWZmZWN0IiwiQ09VTlRET1dOX1NUWUxFX0tFWVMiLCJwaWNrQ291bnRkb3duU3R5bGVQYXRjaCIsInNvdXJjZSIsInJlZHVjZSIsImFjYyIsImtleSIsInVzZUVkaXRvckV2ZW50cyIsImNlbGRhR2FsZXJpYUFjdGl2YSIsInNldENlbGRhR2FsZXJpYUFjdGl2YSIsInNldE9iamV0b3MiLCJzZWNjaW9uZXMiLCJzZWNjaW9uQWN0aXZhSWQiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwibm9ybWFsaXphckFsdG9Nb2RvIiwiQUxUVVJBX1BBTlRBTExBX0VESVRPUiIsIm51ZXZvVGV4dG9SZWYiLCJ3aW5kb3ciLCJhc2lnbmFySW1hZ2VuQUNlbGRhIiwibWVkaWFVcmwiLCJmaXQiLCJiZyIsIm9iaklkIiwiaW5kZXgiLCJpbmRleEFjdHVhbCIsIk51bWJlciIsIm5leHRBY3RpdmVDZWxsIiwiaGF5SW1hZ2VuTnVldmEiLCJ0cmltIiwibGVuZ3RoIiwiaXNGaW5pdGUiLCJvYmpldG9zQWN0dWFsZXMiLCJBcnJheSIsImlzQXJyYXkiLCJfb2JqZXRvc0FjdHVhbGVzIiwiZ2FsZXJpYUFjdHVhbCIsImZpbmQiLCJvIiwiaWQiLCJ0aXBvIiwiY2VsbHNBY3R1YWxlcyIsImNlbGxzIiwicHJvamVjdGVkQ2VsbHMiLCJzaWd1aWVudGVWYWNpYSIsInN0ZXAiLCJjYW5kaWRhdGUiLCJwcmV2IiwiaSIsImZpbmRJbmRleCIsIm9iaiIsIm5leHQiLCJwcmV2Q2VsbCIsImhhbmRsZXIiLCJlIiwibnVldm8iLCJkZXRhaWwiLCJmYWxsYmFja0lkIiwiX2xhc3RTZWNjaW9uQWN0aXZhSWQiLCJ0YXJnZXRTZWNjaW9uSWQiLCJhbGVydCIsIm51ZXZvQ29uU2VjY2lvbiIsInBheWxvYWQiLCJleGlzdGluZ0NvdW50ZG93bklkIiwiY291bnRkb3duSW5kZXhlcyIsInB1c2giLCJwcmltYXJ5SW5kZXgiLCJleGlzdGluZ0NvdW50ZG93biIsInN0eWxlUGF0Y2giLCJuZXh0Q291bnRkb3duIiwiZmVjaGFPYmpldGl2byIsInByZXNldElkIiwiZmlsdGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjYW1iaW9zIiwidGFyZ2V0SWQiLCJfZWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsIm5vcm1hbGl6ZWRQcmVzZXRJZCIsInN1bW1hcnkiLCJ0b3RhbCIsImNoYW5nZWQiLCJjdXJyZW50IiwiaXRlbSIsImJlZm9yZUVmZmVjdCIsIm1vdGlvbkVmZmVjdCIsIkRhdGUiLCJub3ciLCJ0ZXh0byIsIngiLCJ5IiwiZm9udFNpemUiLCJjb2xvciIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwidGV4dERlY29yYXRpb24iLCJhbGlnbiIsInJvdGF0aW9uIiwic2NhbGVYIiwic2NhbGVZIiwic2VjY2lvbklkIiwic2VjQWN0aXZhIiwicyIsImFsdG9Nb2RvIiwieU5vcm0iLCJNYXRoIiwibWF4IiwibWluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/events/useEditorEvents.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/history/useHistoryManager.js":
/*!************************************************************!*\
  !*** ./src/components/editor/history/useHistoryManager.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useHistoryManager)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/components/editor/history/useHistoryManager.js\n\n/**\r\n * Maneja el historial (undo/redo) del editor:\r\n * - Guarda snapshots (objetos + secciones)\r\n * - Limpia futuros cuando hay cambios nuevos\r\n * - Respeta ignoreNextUpdateRef para que undo/redo no borre futuros\r\n *\r\n * ⚠️ No cambia lógica: es el mismo useEffect movido a un hook.\r\n */ function useHistoryManager({ cargado, objetos, secciones, setHistorial, setFuturos, ignoreNextUpdateRef }) {\n    const lastSnapshotRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(\"\");\n    const isMobileRuntime = ()=>{\n        if (true) return false;\n        if (typeof window.matchMedia === \"function\" && window.matchMedia(\"(pointer: coarse)\").matches) {\n            return true;\n        }\n        const width = Number(window.innerWidth || 0);\n        return width > 0 && width <= 1024;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useHistoryManager.useEffect\": ()=>{\n            if (!cargado) return;\n            if (ignoreNextUpdateRef.current) {\n                requestAnimationFrame({\n                    \"useHistoryManager.useEffect\": ()=>{\n                        ignoreNextUpdateRef.current = Math.max(0, (ignoreNextUpdateRef.current || 0) - 1);\n                    }\n                }[\"useHistoryManager.useEffect\"]);\n                return;\n            }\n            // No guardar historial durante transformaciones o drag activo.\n            if (window._resizeData?.isResizing || window._isDragging || window._grupoLider) return;\n            const estadoComparable = {\n                objetos,\n                secciones\n            };\n            const estadoStringified = JSON.stringify(estadoComparable);\n            if (estadoStringified === lastSnapshotRef.current) return;\n            lastSnapshotRef.current = estadoStringified;\n            const maxHistorial = isMobileRuntime() ? 12 : 20;\n            const estadoCompleto = {\n                ...estadoComparable,\n                timestamp: Date.now()\n            };\n            setHistorial({\n                \"useHistoryManager.useEffect\": (prev)=>{\n                    return [\n                        ...prev.slice(-(maxHistorial - 1)),\n                        estadoCompleto\n                    ];\n                }\n            }[\"useHistoryManager.useEffect\"]);\n            // Limpiar futuros cuando hay nuevos cambios\n            setFuturos([]);\n        }\n    }[\"useHistoryManager.useEffect\"], [\n        objetos,\n        secciones,\n        cargado,\n        setHistorial,\n        setFuturos,\n        ignoreNextUpdateRef\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9oaXN0b3J5L3VzZUhpc3RvcnlNYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEscURBQXFEO0FBQ1g7QUFFMUM7Ozs7Ozs7Q0FPQyxHQUNjLFNBQVNFLGtCQUFrQixFQUN0Q0MsT0FBTyxFQUNQQyxPQUFPLEVBQ1BDLFNBQVMsRUFFVEMsWUFBWSxFQUNaQyxVQUFVLEVBRVZDLG1CQUFtQixFQUN0QjtJQUNHLE1BQU1DLGtCQUFrQlIsNkNBQU1BLENBQUM7SUFFL0IsTUFBTVMsa0JBQWtCO1FBQ3BCLElBQUksSUFBNkIsRUFBRSxPQUFPO1FBQzFDLElBQUksT0FBT0MsT0FBT0MsVUFBVSxLQUFLLGNBQWNELE9BQU9DLFVBQVUsQ0FBQyxxQkFBcUJDLE9BQU8sRUFBRTtZQUMzRixPQUFPO1FBQ1g7UUFDQSxNQUFNQyxRQUFRQyxPQUFPSixPQUFPSyxVQUFVLElBQUk7UUFDMUMsT0FBT0YsUUFBUSxLQUFLQSxTQUFTO0lBQ2pDO0lBRUFkLGdEQUFTQTt1Q0FBQztZQUNOLElBQUksQ0FBQ0csU0FBUztZQUVkLElBQUlLLG9CQUFvQlMsT0FBTyxFQUFFO2dCQUM3QkM7bURBQXNCO3dCQUNsQlYsb0JBQW9CUyxPQUFPLEdBQUdFLEtBQUtDLEdBQUcsQ0FBQyxHQUFHLENBQUNaLG9CQUFvQlMsT0FBTyxJQUFJLEtBQUs7b0JBQ25GOztnQkFDQTtZQUNKO1lBR0EsK0RBQStEO1lBQy9ELElBQUlOLE9BQU9VLFdBQVcsRUFBRUMsY0FBY1gsT0FBT1ksV0FBVyxJQUFJWixPQUFPYSxXQUFXLEVBQUU7WUFFaEYsTUFBTUMsbUJBQW1CO2dCQUFFckI7Z0JBQVNDO1lBQVU7WUFDOUMsTUFBTXFCLG9CQUFvQkMsS0FBS0MsU0FBUyxDQUFDSDtZQUN6QyxJQUFJQyxzQkFBc0JqQixnQkFBZ0JRLE9BQU8sRUFBRTtZQUNuRFIsZ0JBQWdCUSxPQUFPLEdBQUdTO1lBRTFCLE1BQU1HLGVBQWVuQixvQkFBb0IsS0FBSztZQUM5QyxNQUFNb0IsaUJBQWlCO2dCQUNuQixHQUFHTCxnQkFBZ0I7Z0JBQ25CTSxXQUFXQyxLQUFLQyxHQUFHO1lBQ3ZCO1lBQ0EzQjsrQ0FBYSxDQUFDNEI7b0JBQ1YsT0FBTzsyQkFBSUEsS0FBS0MsS0FBSyxDQUFDLENBQUVOLENBQUFBLGVBQWU7d0JBQUtDO3FCQUFlO2dCQUMvRDs7WUFFQSw0Q0FBNEM7WUFDNUN2QixXQUFXLEVBQUU7UUFDakI7c0NBQUc7UUFBQ0g7UUFBU0M7UUFBV0Y7UUFBU0c7UUFBY0M7UUFBWUM7S0FBb0I7QUFDbkYiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxoaXN0b3J5XFx1c2VIaXN0b3J5TWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3IvaGlzdG9yeS91c2VIaXN0b3J5TWFuYWdlci5qc1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcblxyXG4vKipcclxuICogTWFuZWphIGVsIGhpc3RvcmlhbCAodW5kby9yZWRvKSBkZWwgZWRpdG9yOlxyXG4gKiAtIEd1YXJkYSBzbmFwc2hvdHMgKG9iamV0b3MgKyBzZWNjaW9uZXMpXHJcbiAqIC0gTGltcGlhIGZ1dHVyb3MgY3VhbmRvIGhheSBjYW1iaW9zIG51ZXZvc1xyXG4gKiAtIFJlc3BldGEgaWdub3JlTmV4dFVwZGF0ZVJlZiBwYXJhIHF1ZSB1bmRvL3JlZG8gbm8gYm9ycmUgZnV0dXJvc1xyXG4gKlxyXG4gKiDimqDvuI8gTm8gY2FtYmlhIGzDs2dpY2E6IGVzIGVsIG1pc21vIHVzZUVmZmVjdCBtb3ZpZG8gYSB1biBob29rLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlSGlzdG9yeU1hbmFnZXIoe1xuICAgIGNhcmdhZG8sXG4gICAgb2JqZXRvcyxcbiAgICBzZWNjaW9uZXMsXG5cclxuICAgIHNldEhpc3RvcmlhbCxcclxuICAgIHNldEZ1dHVyb3MsXG5cbiAgICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxufSkge1xuICAgIGNvbnN0IGxhc3RTbmFwc2hvdFJlZiA9IHVzZVJlZihcIlwiKTtcblxuICAgIGNvbnN0IGlzTW9iaWxlUnVudGltZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cubWF0Y2hNZWRpYSA9PT0gXCJmdW5jdGlvblwiICYmIHdpbmRvdy5tYXRjaE1lZGlhKFwiKHBvaW50ZXI6IGNvYXJzZSlcIikubWF0Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2lkdGggPSBOdW1iZXIod2luZG93LmlubmVyV2lkdGggfHwgMCk7XG4gICAgICAgIHJldHVybiB3aWR0aCA+IDAgJiYgd2lkdGggPD0gMTAyNDtcbiAgICB9O1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjYXJnYWRvKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGlnbm9yZU5leHRVcGRhdGVSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgPSBNYXRoLm1heCgwLCAoaWdub3JlTmV4dFVwZGF0ZVJlZi5jdXJyZW50IHx8IDApIC0gMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuXG4gICAgICAgIC8vIE5vIGd1YXJkYXIgaGlzdG9yaWFsIGR1cmFudGUgdHJhbnNmb3JtYWNpb25lcyBvIGRyYWcgYWN0aXZvLlxuICAgICAgICBpZiAod2luZG93Ll9yZXNpemVEYXRhPy5pc1Jlc2l6aW5nIHx8IHdpbmRvdy5faXNEcmFnZ2luZyB8fCB3aW5kb3cuX2dydXBvTGlkZXIpIHJldHVybjtcblxuICAgICAgICBjb25zdCBlc3RhZG9Db21wYXJhYmxlID0geyBvYmpldG9zLCBzZWNjaW9uZXMgfTtcbiAgICAgICAgY29uc3QgZXN0YWRvU3RyaW5naWZpZWQgPSBKU09OLnN0cmluZ2lmeShlc3RhZG9Db21wYXJhYmxlKTtcbiAgICAgICAgaWYgKGVzdGFkb1N0cmluZ2lmaWVkID09PSBsYXN0U25hcHNob3RSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgICAgICBsYXN0U25hcHNob3RSZWYuY3VycmVudCA9IGVzdGFkb1N0cmluZ2lmaWVkO1xuXG4gICAgICAgIGNvbnN0IG1heEhpc3RvcmlhbCA9IGlzTW9iaWxlUnVudGltZSgpID8gMTIgOiAyMDtcbiAgICAgICAgY29uc3QgZXN0YWRvQ29tcGxldG8gPSB7XG4gICAgICAgICAgICAuLi5lc3RhZG9Db21wYXJhYmxlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuICAgICAgICBzZXRIaXN0b3JpYWwoKHByZXYpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbLi4ucHJldi5zbGljZSgtKG1heEhpc3RvcmlhbCAtIDEpKSwgZXN0YWRvQ29tcGxldG9dO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBMaW1waWFyIGZ1dHVyb3MgY3VhbmRvIGhheSBudWV2b3MgY2FtYmlvc1xuICAgICAgICBzZXRGdXR1cm9zKFtdKTtcbiAgICB9LCBbb2JqZXRvcywgc2VjY2lvbmVzLCBjYXJnYWRvLCBzZXRIaXN0b3JpYWwsIHNldEZ1dHVyb3MsIGlnbm9yZU5leHRVcGRhdGVSZWZdKTtcclxufVxyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlSGlzdG9yeU1hbmFnZXIiLCJjYXJnYWRvIiwib2JqZXRvcyIsInNlY2Npb25lcyIsInNldEhpc3RvcmlhbCIsInNldEZ1dHVyb3MiLCJpZ25vcmVOZXh0VXBkYXRlUmVmIiwibGFzdFNuYXBzaG90UmVmIiwiaXNNb2JpbGVSdW50aW1lIiwid2luZG93IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJ3aWR0aCIsIk51bWJlciIsImlubmVyV2lkdGgiLCJjdXJyZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiTWF0aCIsIm1heCIsIl9yZXNpemVEYXRhIiwiaXNSZXNpemluZyIsIl9pc0RyYWdnaW5nIiwiX2dydXBvTGlkZXIiLCJlc3RhZG9Db21wYXJhYmxlIiwiZXN0YWRvU3RyaW5naWZpZWQiLCJKU09OIiwic3RyaW5naWZ5IiwibWF4SGlzdG9yaWFsIiwiZXN0YWRvQ29tcGxldG8iLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicHJldiIsInNsaWNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/history/useHistoryManager.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useCanvasInteractionState.js":
/*!*******************************************************************!*\
  !*** ./src/components/editor/mobile/useCanvasInteractionState.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useCanvasInteractionState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nfunction useCanvasInteractionState() {\n    const dragStartPos = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const hasDragged = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const [isDragging, setIsDragging] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    return {\n        dragStartPos,\n        hasDragged,\n        isDragging,\n        setIsDragging\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlQ2FudmFzSW50ZXJhY3Rpb25TdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5QztBQUUxQixTQUFTRTtJQUN0QixNQUFNQyxlQUFlSCw2Q0FBTUEsQ0FBQztJQUM1QixNQUFNSSxhQUFhSiw2Q0FBTUEsQ0FBQztJQUMxQixNQUFNLENBQUNLLFlBQVlDLGNBQWMsR0FBR0wsK0NBQVFBLENBQUM7SUFFN0MsT0FBTztRQUNMRTtRQUNBQztRQUNBQztRQUNBQztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxtb2JpbGVcXHVzZUNhbnZhc0ludGVyYWN0aW9uU3RhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VDYW52YXNJbnRlcmFjdGlvblN0YXRlKCkge1xuICBjb25zdCBkcmFnU3RhcnRQb3MgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGhhc0RyYWdnZWQgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBbaXNEcmFnZ2luZywgc2V0SXNEcmFnZ2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBkcmFnU3RhcnRQb3MsXG4gICAgaGFzRHJhZ2dlZCxcbiAgICBpc0RyYWdnaW5nLFxuICAgIHNldElzRHJhZ2dpbmcsXG4gIH07XG59XG5cclxuIl0sIm5hbWVzIjpbInVzZVJlZiIsInVzZVN0YXRlIiwidXNlQ2FudmFzSW50ZXJhY3Rpb25TdGF0ZSIsImRyYWdTdGFydFBvcyIsImhhc0RyYWdnZWQiLCJpc0RyYWdnaW5nIiwic2V0SXNEcmFnZ2luZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useCanvasInteractionState.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useCanvasScaleLayout.js":
/*!**************************************************************!*\
  !*** ./src/components/editor/mobile/useCanvasScaleLayout.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useCanvasScaleLayout)\n/* harmony export */ });\n/* harmony import */ var _hooks_useViewportScale__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/hooks/useViewportScale */ \"(pages-dir-node)/./src/hooks/useViewportScale.js\");\n\nfunction useCanvasScaleLayout({ contenedorRef, zoom }) {\n    return (0,_hooks_useViewportScale__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        contenedorRef,\n        zoom,\n        baseDesktop: 800,\n        baseMobilePortrait: 1000,\n        wrapperBaseWidthZoom1: 1000,\n        wrapperBaseWidthZoom08: 1220,\n        fitBoost: 1.2,\n        zoomVisualBoost: 1.15,\n        debug: false\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlQ2FudmFzU2NhbGVMYXlvdXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0Q7QUFFekMsU0FBU0MscUJBQXFCLEVBQUVDLGFBQWEsRUFBRUMsSUFBSSxFQUFFO0lBQ2xFLE9BQU9ILG1FQUFnQkEsQ0FBQztRQUN0QkU7UUFDQUM7UUFDQUMsYUFBYTtRQUNiQyxvQkFBb0I7UUFDcEJDLHVCQUF1QjtRQUN2QkMsd0JBQXdCO1FBQ3hCQyxVQUFVO1FBQ1ZDLGlCQUFpQjtRQUNqQkMsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxtb2JpbGVcXHVzZUNhbnZhc1NjYWxlTGF5b3V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1c2VWaWV3cG9ydFNjYWxlIGZyb20gXCJAL2hvb2tzL3VzZVZpZXdwb3J0U2NhbGVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQ2FudmFzU2NhbGVMYXlvdXQoeyBjb250ZW5lZG9yUmVmLCB6b29tIH0pIHtcbiAgcmV0dXJuIHVzZVZpZXdwb3J0U2NhbGUoe1xuICAgIGNvbnRlbmVkb3JSZWYsXG4gICAgem9vbSxcbiAgICBiYXNlRGVza3RvcDogODAwLFxuICAgIGJhc2VNb2JpbGVQb3J0cmFpdDogMTAwMCxcbiAgICB3cmFwcGVyQmFzZVdpZHRoWm9vbTE6IDEwMDAsXG4gICAgd3JhcHBlckJhc2VXaWR0aFpvb20wODogMTIyMCxcbiAgICBmaXRCb29zdDogMS4yLFxuICAgIHpvb21WaXN1YWxCb29zdDogMS4xNSxcbiAgICBkZWJ1ZzogZmFsc2UsXG4gIH0pO1xufVxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VWaWV3cG9ydFNjYWxlIiwidXNlQ2FudmFzU2NhbGVMYXlvdXQiLCJjb250ZW5lZG9yUmVmIiwiem9vbSIsImJhc2VEZXNrdG9wIiwiYmFzZU1vYmlsZVBvcnRyYWl0Iiwid3JhcHBlckJhc2VXaWR0aFpvb20xIiwid3JhcHBlckJhc2VXaWR0aFpvb20wOCIsImZpdEJvb3N0Iiwiem9vbVZpc3VhbEJvb3N0IiwiZGVidWciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useCanvasScaleLayout.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useIsTouchLike.js":
/*!********************************************************!*\
  !*** ./src/components/editor/mobile/useIsTouchLike.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useIsTouchLike)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nfunction useIsTouchLike(forceMobile = false) {\n    const [isTouchLike, setIsTouchLike] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(Boolean(forceMobile));\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useIsTouchLike.useEffect\": ()=>{\n            if (true) return;\n            const mqCoarse = window.matchMedia(\"(pointer: coarse)\");\n            const mqTablet = window.matchMedia(\"(max-width: 1024px)\");\n            const update = {\n                \"useIsTouchLike.useEffect.update\": ()=>{\n                    const hasTouchSupport = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n                    setIsTouchLike(Boolean(forceMobile) || mqCoarse.matches || mqTablet.matches && hasTouchSupport);\n                }\n            }[\"useIsTouchLike.useEffect.update\"];\n            update();\n            mqCoarse.addEventListener?.(\"change\", update);\n            mqTablet.addEventListener?.(\"change\", update);\n            window.addEventListener(\"orientationchange\", update);\n            return ({\n                \"useIsTouchLike.useEffect\": ()=>{\n                    mqCoarse.removeEventListener?.(\"change\", update);\n                    mqTablet.removeEventListener?.(\"change\", update);\n                    window.removeEventListener(\"orientationchange\", update);\n                }\n            })[\"useIsTouchLike.useEffect\"];\n        }\n    }[\"useIsTouchLike.useEffect\"], [\n        forceMobile\n    ]);\n    return isTouchLike;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlSXNUb3VjaExpa2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEM7QUFFN0IsU0FBU0UsZUFBZUMsY0FBYyxLQUFLO0lBQ3hELE1BQU0sQ0FBQ0MsYUFBYUMsZUFBZSxHQUFHSiwrQ0FBUUEsQ0FBQ0ssUUFBUUg7SUFFdkRILGdEQUFTQTtvQ0FBQztZQUNSLElBQUksSUFBNkIsRUFBRTtZQUVuQyxNQUFNTyxXQUFXQyxPQUFPQyxVQUFVLENBQUM7WUFDbkMsTUFBTUMsV0FBV0YsT0FBT0MsVUFBVSxDQUFDO1lBRW5DLE1BQU1FO21EQUFTO29CQUNiLE1BQU1DLGtCQUNKLGtCQUFrQkosVUFBVUssVUFBVUMsY0FBYyxHQUFHO29CQUN6RFQsZUFBZUMsUUFBUUgsZ0JBQWdCSSxTQUFTUSxPQUFPLElBQUtMLFNBQVNLLE9BQU8sSUFBSUg7Z0JBQ2xGOztZQUVBRDtZQUNBSixTQUFTUyxnQkFBZ0IsR0FBRyxVQUFVTDtZQUN0Q0QsU0FBU00sZ0JBQWdCLEdBQUcsVUFBVUw7WUFDdENILE9BQU9RLGdCQUFnQixDQUFDLHFCQUFxQkw7WUFFN0M7NENBQU87b0JBQ0xKLFNBQVNVLG1CQUFtQixHQUFHLFVBQVVOO29CQUN6Q0QsU0FBU08sbUJBQW1CLEdBQUcsVUFBVU47b0JBQ3pDSCxPQUFPUyxtQkFBbUIsQ0FBQyxxQkFBcUJOO2dCQUNsRDs7UUFDRjttQ0FBRztRQUFDUjtLQUFZO0lBRWhCLE9BQU9DO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxtb2JpbGVcXHVzZUlzVG91Y2hMaWtlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlSXNUb3VjaExpa2UoZm9yY2VNb2JpbGUgPSBmYWxzZSkge1xuICBjb25zdCBbaXNUb3VjaExpa2UsIHNldElzVG91Y2hMaWtlXSA9IHVzZVN0YXRlKEJvb2xlYW4oZm9yY2VNb2JpbGUpKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG5cbiAgICBjb25zdCBtcUNvYXJzZSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKHBvaW50ZXI6IGNvYXJzZSlcIik7XG4gICAgY29uc3QgbXFUYWJsZXQgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDEwMjRweClcIik7XG5cbiAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBoYXNUb3VjaFN1cHBvcnQgPVxuICAgICAgICBcIm9udG91Y2hzdGFydFwiIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuICAgICAgc2V0SXNUb3VjaExpa2UoQm9vbGVhbihmb3JjZU1vYmlsZSkgfHwgbXFDb2Fyc2UubWF0Y2hlcyB8fCAobXFUYWJsZXQubWF0Y2hlcyAmJiBoYXNUb3VjaFN1cHBvcnQpKTtcbiAgICB9O1xuXG4gICAgdXBkYXRlKCk7XG4gICAgbXFDb2Fyc2UuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgbXFUYWJsZXQuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCB1cGRhdGUpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG1xQ29hcnNlLnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgICAgbXFUYWJsZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgfTtcbiAgfSwgW2ZvcmNlTW9iaWxlXSk7XG5cbiAgcmV0dXJuIGlzVG91Y2hMaWtlO1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlSXNUb3VjaExpa2UiLCJmb3JjZU1vYmlsZSIsImlzVG91Y2hMaWtlIiwic2V0SXNUb3VjaExpa2UiLCJCb29sZWFuIiwibXFDb2Fyc2UiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibXFUYWJsZXQiLCJ1cGRhdGUiLCJoYXNUb3VjaFN1cHBvcnQiLCJuYXZpZ2F0b3IiLCJtYXhUb3VjaFBvaW50cyIsIm1hdGNoZXMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useIsTouchLike.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/mobile/useStageGestures.js":
/*!**********************************************************!*\
  !*** ./src/components/editor/mobile/useStageGestures.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useStageGestures)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nconst TOUCH_MOVE_PX = 16;\nconst TOUCH_SCROLL_PX = 2;\nfunction getClientPointFromNativeEvent(nativeEvent) {\n    if (!nativeEvent) return null;\n    const touch = nativeEvent.touches?.[0] || nativeEvent.changedTouches?.[0];\n    if (touch && Number.isFinite(touch.clientX) && Number.isFinite(touch.clientY)) {\n        return {\n            x: touch.clientX,\n            y: touch.clientY\n        };\n    }\n    if (Number.isFinite(nativeEvent.clientX) && Number.isFinite(nativeEvent.clientY)) {\n        return {\n            x: nativeEvent.clientX,\n            y: nativeEvent.clientY\n        };\n    }\n    return null;\n}\nfunction findRootHit(target, elementRefs) {\n    if (!target || !elementRefs) return null;\n    const roots = Object.values(elementRefs.current || {});\n    if (!roots.length) return null;\n    return target.findAncestor?.((node)=>roots.includes(node), true) || null;\n}\nfunction useStageGestures({ secciones, objetos, elementRefs, dragStartPos, hasDragged, seleccionActiva, inicioSeleccion, areaSeleccion, detectarInterseccionLinea, setElementosSeleccionados, setElementosPreSeleccionados, setSeleccionActiva, setInicioSeleccion, setAreaSeleccion, onSelectSeccion, cerrarMenusFlotantes }) {\n    const touchGestureRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        startX: 0,\n        startY: 0,\n        startClientX: 0,\n        startClientY: 0,\n        startScrollX: 0,\n        startScrollY: 0,\n        startedAt: 0,\n        moved: false,\n        tappedSectionId: null,\n        clickedOnStage: false,\n        startedOnElement: false\n    });\n    const resolveSectionIdFromTarget = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[resolveSectionIdFromTarget]\": (target)=>{\n            if (!target) return null;\n            let node = target;\n            while(node){\n                const nodeId = node.attrs?.id;\n                if (nodeId && secciones.some({\n                    \"useStageGestures.useCallback[resolveSectionIdFromTarget]\": (s)=>s.id === nodeId\n                }[\"useStageGestures.useCallback[resolveSectionIdFromTarget]\"])) {\n                    return nodeId;\n                }\n                node = node.parent;\n            }\n            return null;\n        }\n    }[\"useStageGestures.useCallback[resolveSectionIdFromTarget]\"], [\n        secciones\n    ]);\n    const clearSelectionUI = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[clearSelectionUI]\": ()=>{\n            setElementosSeleccionados([]);\n            cerrarMenusFlotantes?.();\n        }\n    }[\"useStageGestures.useCallback[clearSelectionUI]\"], [\n        setElementosSeleccionados,\n        cerrarMenusFlotantes\n    ]);\n    const onMouseDown = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onMouseDown]\": (e)=>{\n            const stage = e.target.getStage();\n            if (!stage) return;\n            const rootHit = findRootHit(e.target, elementRefs);\n            if (rootHit) return;\n            const clickedOnStage = e.target === stage;\n            const tappedSectionId = resolveSectionIdFromTarget(e.target);\n            if (!clickedOnStage && e.target.getClassName?.() !== \"Image\") {\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n            }\n            dragStartPos.current = stage.getPointerPosition();\n            hasDragged.current = false;\n            const esTransformer = e.target.getClassName?.() === \"Transformer\" || e.target.parent?.getClassName?.() === \"Transformer\" || e.target.attrs?.name?.includes(\"_anchor\");\n            if (esTransformer) return;\n            const esStage = clickedOnStage;\n            const esSeccion = !!tappedSectionId;\n            const esImagenFondo = e.target.getClassName?.() === \"Image\";\n            if (esStage || esSeccion || esImagenFondo) {\n                clearSelectionUI();\n                if (esStage) {\n                    onSelectSeccion?.(null);\n                } else if (tappedSectionId) {\n                    onSelectSeccion?.(tappedSectionId);\n                }\n                const pos = stage.getPointerPosition();\n                if (!pos) return;\n                setInicioSeleccion({\n                    x: pos.x,\n                    y: pos.y\n                });\n                setAreaSeleccion({\n                    x: pos.x,\n                    y: pos.y,\n                    width: 0,\n                    height: 0\n                });\n                setSeleccionActiva(true);\n            }\n        }\n    }[\"useStageGestures.useCallback[onMouseDown]\"], [\n        elementRefs,\n        resolveSectionIdFromTarget,\n        dragStartPos,\n        hasDragged,\n        clearSelectionUI,\n        onSelectSeccion,\n        setInicioSeleccion,\n        setAreaSeleccion,\n        setSeleccionActiva\n    ]);\n    const onTouchStart = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onTouchStart]\": (e)=>{\n            const stage = e.target.getStage();\n            if (!stage) return;\n            const pos = stage.getPointerPosition();\n            if (!pos) return;\n            const rootHit = findRootHit(e.target, elementRefs);\n            const clickedOnStage = e.target === stage;\n            const tappedSectionId = resolveSectionIdFromTarget(e.target);\n            const esTransformer = e.target.getClassName?.() === \"Transformer\" || e.target.parent?.getClassName?.() === \"Transformer\" || e.target.attrs?.name?.includes(\"_anchor\");\n            const clientPoint = getClientPointFromNativeEvent(e.evt);\n            const startScrollX =  false ? 0 : 0;\n            const startScrollY =  false ? 0 : 0;\n            touchGestureRef.current = {\n                startX: pos.x,\n                startY: pos.y,\n                startClientX: clientPoint?.x ?? pos.x,\n                startClientY: clientPoint?.y ?? pos.y,\n                startScrollX,\n                startScrollY,\n                startedAt: Date.now(),\n                moved: false,\n                tappedSectionId,\n                clickedOnStage,\n                startedOnElement: !!rootHit || esTransformer\n            };\n            if (rootHit || esTransformer) return;\n            if (!clickedOnStage && e.target.getClassName?.() !== \"Image\") {\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n            }\n        }\n    }[\"useStageGestures.useCallback[onTouchStart]\"], [\n        elementRefs,\n        resolveSectionIdFromTarget\n    ]);\n    const onTouchMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onTouchMove]\": (e)=>{\n            const stage = e.target.getStage();\n            if (!stage) return;\n            const pos = stage.getPointerPosition();\n            const clientPoint = getClientPointFromNativeEvent(e.evt);\n            const pointX = clientPoint?.x ?? pos?.x;\n            const pointY = clientPoint?.y ?? pos?.y;\n            if (!Number.isFinite(pointX) || !Number.isFinite(pointY)) return;\n            const dx = Math.abs(pointX - touchGestureRef.current.startClientX);\n            const dy = Math.abs(pointY - touchGestureRef.current.startClientY);\n            if (dx > TOUCH_MOVE_PX || dy > TOUCH_MOVE_PX) {\n                touchGestureRef.current.moved = true;\n            }\n        }\n    }[\"useStageGestures.useCallback[onTouchMove]\"], []);\n    const onTouchEnd = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onTouchEnd]\": (e)=>{\n            const g = touchGestureRef.current;\n            const clientPoint = getClientPointFromNativeEvent(e?.evt);\n            const endClientX = clientPoint?.x ?? g.startClientX;\n            const endClientY = clientPoint?.y ?? g.startClientY;\n            const currentScrollX =  false ? 0 : g.startScrollX;\n            const currentScrollY =  false ? 0 : g.startScrollY;\n            const movedByTouch = Math.abs(endClientX - g.startClientX) > TOUCH_MOVE_PX || Math.abs(endClientY - g.startClientY) > TOUCH_MOVE_PX;\n            const movedByScroll = Math.abs(currentScrollX - g.startScrollX) > TOUCH_SCROLL_PX || Math.abs(currentScrollY - g.startScrollY) > TOUCH_SCROLL_PX;\n            const elapsed = Date.now() - (g.startedAt || Date.now());\n            const longPress = elapsed > 450;\n            if (movedByTouch || movedByScroll) {\n                g.moved = true;\n            }\n            if (g.moved) return;\n            if (longPress) return;\n            if (g.startedOnElement) return;\n            clearSelectionUI();\n            if (g.clickedOnStage) {\n                onSelectSeccion?.(null);\n                window.dispatchEvent(new Event(\"salir-modo-mover-fondo\"));\n                return;\n            }\n            if (g.tappedSectionId) {\n                onSelectSeccion?.(g.tappedSectionId);\n            }\n        }\n    }[\"useStageGestures.useCallback[onTouchEnd]\"], [\n        clearSelectionUI,\n        onSelectSeccion\n    ]);\n    const onMouseMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onMouseMove]\": (e)=>{\n            if (!seleccionActiva || !inicioSeleccion) return;\n            if (window._mouseMoveThrottle) return;\n            window._mouseMoveThrottle = true;\n            requestAnimationFrame({\n                \"useStageGestures.useCallback[onMouseMove]\": ()=>{\n                    window._mouseMoveThrottle = false;\n                    const stage = e.target.getStage();\n                    const pos = stage.getPointerPosition();\n                    if (!pos) return;\n                    const area = {\n                        x: Math.min(inicioSeleccion.x, pos.x),\n                        y: Math.min(inicioSeleccion.y, pos.y),\n                        width: Math.abs(pos.x - inicioSeleccion.x),\n                        height: Math.abs(pos.y - inicioSeleccion.y)\n                    };\n                    setAreaSeleccion(area);\n                    if (Math.abs(area.width) > 5 || Math.abs(area.height) > 5) {\n                        if (window._selectionThrottle) return;\n                        window._selectionThrottle = true;\n                        requestAnimationFrame({\n                            \"useStageGestures.useCallback[onMouseMove]\": ()=>{\n                                const ids = objetos.filter({\n                                    \"useStageGestures.useCallback[onMouseMove].ids\": (obj)=>{\n                                        const node = elementRefs.current[obj.id];\n                                        if (!node) return false;\n                                        if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n                                            return detectarInterseccionLinea(obj, area, stage);\n                                        }\n                                        const box = node.getClientRect({\n                                            relativeTo: stage\n                                        });\n                                        return box.x + box.width >= area.x && box.x <= area.x + area.width && box.y + box.height >= area.y && box.y <= area.y + area.height;\n                                    }\n                                }[\"useStageGestures.useCallback[onMouseMove].ids\"]).map({\n                                    \"useStageGestures.useCallback[onMouseMove].ids\": (obj)=>obj.id\n                                }[\"useStageGestures.useCallback[onMouseMove].ids\"]);\n                                setElementosPreSeleccionados(ids);\n                                window._selectionThrottle = false;\n                            }\n                        }[\"useStageGestures.useCallback[onMouseMove]\"]);\n                    }\n                }\n            }[\"useStageGestures.useCallback[onMouseMove]\"]);\n        }\n    }[\"useStageGestures.useCallback[onMouseMove]\"], [\n        seleccionActiva,\n        inicioSeleccion,\n        setAreaSeleccion,\n        objetos,\n        elementRefs,\n        detectarInterseccionLinea,\n        setElementosPreSeleccionados\n    ]);\n    const onMouseUp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useStageGestures.useCallback[onMouseUp]\": (e)=>{\n            const stage = e.target.getStage();\n            if (window._grupoLider) return;\n            if (!seleccionActiva || !areaSeleccion) return;\n            const nuevaSeleccion = objetos.filter({\n                \"useStageGestures.useCallback[onMouseUp].nuevaSeleccion\": (obj)=>{\n                    const node = elementRefs.current[obj.id];\n                    if (!node) return false;\n                    if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n                        return detectarInterseccionLinea(obj, areaSeleccion, stage);\n                    }\n                    try {\n                        const box = node.getClientRect();\n                        return box.x + box.width >= areaSeleccion.x && box.x <= areaSeleccion.x + areaSeleccion.width && box.y + box.height >= areaSeleccion.y && box.y <= areaSeleccion.y + areaSeleccion.height;\n                    } catch  {\n                        return false;\n                    }\n                }\n            }[\"useStageGestures.useCallback[onMouseUp].nuevaSeleccion\"]);\n            setElementosSeleccionados(nuevaSeleccion.map({\n                \"useStageGestures.useCallback[onMouseUp]\": (obj)=>obj.id\n            }[\"useStageGestures.useCallback[onMouseUp]\"]));\n            setElementosPreSeleccionados([]);\n            setSeleccionActiva(false);\n            setAreaSeleccion(null);\n            if (window._selectionThrottle) window._selectionThrottle = false;\n            if (window._boundsUpdateThrottle) window._boundsUpdateThrottle = false;\n            window._lineIntersectionCache = {};\n        }\n    }[\"useStageGestures.useCallback[onMouseUp]\"], [\n        seleccionActiva,\n        areaSeleccion,\n        objetos,\n        elementRefs,\n        detectarInterseccionLinea,\n        setElementosSeleccionados,\n        setElementosPreSeleccionados,\n        setSeleccionActiva,\n        setAreaSeleccion\n    ]);\n    return {\n        onMouseDown,\n        onTouchStart,\n        onTouchMove,\n        onTouchEnd,\n        onMouseMove,\n        onMouseUp\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9tb2JpbGUvdXNlU3RhZ2VHZXN0dXJlcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUU1QyxNQUFNRSxnQkFBZ0I7QUFDdEIsTUFBTUMsa0JBQWtCO0FBRXhCLFNBQVNDLDhCQUE4QkMsV0FBVztJQUNoRCxJQUFJLENBQUNBLGFBQWEsT0FBTztJQUN6QixNQUFNQyxRQUFRRCxZQUFZRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLElBQUlGLFlBQVlHLGNBQWMsRUFBRSxDQUFDLEVBQUU7SUFDekUsSUFBSUYsU0FBU0csT0FBT0MsUUFBUSxDQUFDSixNQUFNSyxPQUFPLEtBQUtGLE9BQU9DLFFBQVEsQ0FBQ0osTUFBTU0sT0FBTyxHQUFHO1FBQzdFLE9BQU87WUFBRUMsR0FBR1AsTUFBTUssT0FBTztZQUFFRyxHQUFHUixNQUFNTSxPQUFPO1FBQUM7SUFDOUM7SUFDQSxJQUFJSCxPQUFPQyxRQUFRLENBQUNMLFlBQVlNLE9BQU8sS0FBS0YsT0FBT0MsUUFBUSxDQUFDTCxZQUFZTyxPQUFPLEdBQUc7UUFDaEYsT0FBTztZQUFFQyxHQUFHUixZQUFZTSxPQUFPO1lBQUVHLEdBQUdULFlBQVlPLE9BQU87UUFBQztJQUMxRDtJQUNBLE9BQU87QUFDVDtBQUVBLFNBQVNHLFlBQVlDLE1BQU0sRUFBRUMsV0FBVztJQUN0QyxJQUFJLENBQUNELFVBQVUsQ0FBQ0MsYUFBYSxPQUFPO0lBQ3BDLE1BQU1DLFFBQVFDLE9BQU9DLE1BQU0sQ0FBQ0gsWUFBWUksT0FBTyxJQUFJLENBQUM7SUFDcEQsSUFBSSxDQUFDSCxNQUFNSSxNQUFNLEVBQUUsT0FBTztJQUMxQixPQUFPTixPQUFPTyxZQUFZLEdBQUcsQ0FBQ0MsT0FBU04sTUFBTU8sUUFBUSxDQUFDRCxPQUFPLFNBQVM7QUFDeEU7QUFFZSxTQUFTRSxpQkFBaUIsRUFDdkNDLFNBQVMsRUFDVEMsT0FBTyxFQUNQWCxXQUFXLEVBQ1hZLFlBQVksRUFDWkMs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QyxHQUFHb0IsY0FBYzZDLEtBQUssSUFDOUN1QyxJQUFJdkcsQ0FBQyxHQUFHdUcsSUFBSXRDLE1BQU0sSUFBSTlDLGNBQWNuQixDQUFDLElBQ3JDdUcsSUFBSXZHLENBQUMsSUFBSW1CLGNBQWNuQixDQUFDLEdBQUdtQixjQUFjOEMsTUFBTTtvQkFFbkQsRUFBRSxPQUFNO3dCQUNOLE9BQU87b0JBQ1Q7Z0JBQ0Y7O1lBRUE1QywwQkFBMEJ3RixlQUFlSCxHQUFHOzJEQUFDLENBQUNOLE1BQVFBLElBQUl6RCxFQUFFOztZQUM1RHJCLDZCQUE2QixFQUFFO1lBQy9CQyxtQkFBbUI7WUFDbkJFLGlCQUFpQjtZQUVqQixJQUFJNkIsT0FBTzJDLGtCQUFrQixFQUFFM0MsT0FBTzJDLGtCQUFrQixHQUFHO1lBQzNELElBQUkzQyxPQUFPd0QscUJBQXFCLEVBQUV4RCxPQUFPd0QscUJBQXFCLEdBQUc7WUFDakV4RCxPQUFPeUQsc0JBQXNCLEdBQUcsQ0FBQztRQUNuQztrREFDQTtRQUNFOUY7UUFDQUU7UUFDQUw7UUFDQVg7UUFDQWlCO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FFO0tBQ0Q7SUFHSCxPQUFPO1FBQ0x1QjtRQUNBa0I7UUFDQVM7UUFDQU87UUFDQVU7UUFDQWU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcbW9iaWxlXFx1c2VTdGFnZUdlc3R1cmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgVE9VQ0hfTU9WRV9QWCA9IDE2O1xuY29uc3QgVE9VQ0hfU0NST0xMX1BYID0gMjtcblxuZnVuY3Rpb24gZ2V0Q2xpZW50UG9pbnRGcm9tTmF0aXZlRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgaWYgKCFuYXRpdmVFdmVudCkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHRvdWNoID0gbmF0aXZlRXZlbnQudG91Y2hlcz8uWzBdIHx8IG5hdGl2ZUV2ZW50LmNoYW5nZWRUb3VjaGVzPy5bMF07XG4gIGlmICh0b3VjaCAmJiBOdW1iZXIuaXNGaW5pdGUodG91Y2guY2xpZW50WCkgJiYgTnVtYmVyLmlzRmluaXRlKHRvdWNoLmNsaWVudFkpKSB7XG4gICAgcmV0dXJuIHsgeDogdG91Y2guY2xpZW50WCwgeTogdG91Y2guY2xpZW50WSB9O1xuICB9XG4gIGlmIChOdW1iZXIuaXNGaW5pdGUobmF0aXZlRXZlbnQuY2xpZW50WCkgJiYgTnVtYmVyLmlzRmluaXRlKG5hdGl2ZUV2ZW50LmNsaWVudFkpKSB7XG4gICAgcmV0dXJuIHsgeDogbmF0aXZlRXZlbnQuY2xpZW50WCwgeTogbmF0aXZlRXZlbnQuY2xpZW50WSB9O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBmaW5kUm9vdEhpdCh0YXJnZXQsIGVsZW1lbnRSZWZzKSB7XG4gIGlmICghdGFyZ2V0IHx8ICFlbGVtZW50UmVmcykgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHJvb3RzID0gT2JqZWN0LnZhbHVlcyhlbGVtZW50UmVmcy5jdXJyZW50IHx8IHt9KTtcbiAgaWYgKCFyb290cy5sZW5ndGgpIHJldHVybiBudWxsO1xuICByZXR1cm4gdGFyZ2V0LmZpbmRBbmNlc3Rvcj8uKChub2RlKSA9PiByb290cy5pbmNsdWRlcyhub2RlKSwgdHJ1ZSkgfHwgbnVsbDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU3RhZ2VHZXN0dXJlcyh7XG4gIHNlY2Npb25lcyxcbiAgb2JqZXRvcyxcbiAgZWxlbWVudFJlZnMsXG4gIGRyYWdTdGFydFBvcyxcbiAgaGFzRHJhZ2dlZCxcbiAgc2VsZWNjaW9uQWN0aXZhLFxuICBpbmljaW9TZWxlY2Npb24sXG4gIGFyZWFTZWxlY2Npb24sXG4gIGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEsXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gIHNldEVsZW1lbnRvc1ByZVNlbGVjY2lvbmFkb3MsXG4gIHNldFNlbGVjY2lvbkFjdGl2YSxcbiAgc2V0SW5pY2lvU2VsZWNjaW9uLFxuICBzZXRBcmVhU2VsZWNjaW9uLFxuICBvblNlbGVjdFNlY2Npb24sXG4gIGNlcnJhck1lbnVzRmxvdGFudGVzLFxufSkge1xuICBjb25zdCB0b3VjaEdlc3R1cmVSZWYgPSB1c2VSZWYoe1xuICAgIHN0YXJ0WDogMCxcbiAgICBzdGFydFk6IDAsXG4gICAgc3RhcnRDbGllbnRYOiAwLFxuICAgIHN0YXJ0Q2xpZW50WTogMCxcbiAgICBzdGFydFNjcm9sbFg6IDAsXG4gICAgc3RhcnRTY3JvbGxZOiAwLFxuICAgIHN0YXJ0ZWRBdDogMCxcbiAgICBtb3ZlZDogZmFsc2UsXG4gICAgdGFwcGVkU2VjdGlvbklkOiBudWxsLFxuICAgIGNsaWNrZWRPblN0YWdlOiBmYWxzZSxcbiAgICBzdGFydGVkT25FbGVtZW50OiBmYWxzZSxcbiAgfSk7XG5cbiAgY29uc3QgcmVzb2x2ZVNlY3Rpb25JZEZyb21UYXJnZXQgPSB1c2VDYWxsYmFjayhcbiAgICAodGFyZ2V0KSA9PiB7XG4gICAgICBpZiAoIXRhcmdldCkgcmV0dXJuIG51bGw7XG4gICAgICBsZXQgbm9kZSA9IHRhcmdldDtcbiAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGNvbnN0IG5vZGVJZCA9IG5vZGUuYXR0cnM/LmlkO1xuICAgICAgICBpZiAobm9kZUlkICYmIHNlY2Npb25lcy5zb21lKChzKSA9PiBzLmlkID09PSBub2RlSWQpKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGVJZDtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIFtzZWNjaW9uZXNdXG4gICk7XG5cbiAgY29uc3QgY2xlYXJTZWxlY3Rpb25VSSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtdKTtcbiAgICBjZXJyYXJNZW51c0Zsb3RhbnRlcz8uKCk7XG4gIH0sIFtzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLCBjZXJyYXJNZW51c0Zsb3RhbnRlc10pO1xuXG4gIGNvbnN0IG9uTW91c2VEb3duID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcbiAgICAgIGlmICghc3RhZ2UpIHJldHVybjtcblxuICAgICAgY29uc3Qgcm9vdEhpdCA9IGZpbmRSb290SGl0KGUudGFyZ2V0LCBlbGVtZW50UmVmcyk7XG4gICAgICBpZiAocm9vdEhpdCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBjbGlja2VkT25TdGFnZSA9IGUudGFyZ2V0ID09PSBzdGFnZTtcbiAgICAgIGNvbnN0IHRhcHBlZFNlY3Rpb25JZCA9IHJlc29sdmVTZWN0aW9uSWRGcm9tVGFyZ2V0KGUudGFyZ2V0KTtcblxuICAgICAgaWYgKCFjbGlja2VkT25TdGFnZSAmJiBlLnRhcmdldC5nZXRDbGFzc05hbWU/LigpICE9PSBcIkltYWdlXCIpIHtcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwic2FsaXItbW9kby1tb3Zlci1mb25kb1wiKSk7XG4gICAgICB9XG5cbiAgICAgIGRyYWdTdGFydFBvcy5jdXJyZW50ID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICBoYXNEcmFnZ2VkLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgICAgY29uc3QgZXNUcmFuc2Zvcm1lciA9XG4gICAgICAgIGUudGFyZ2V0LmdldENsYXNzTmFtZT8uKCkgPT09IFwiVHJhbnNmb3JtZXJcIiB8fFxuICAgICAgICBlLnRhcmdldC5wYXJlbnQ/LmdldENsYXNzTmFtZT8uKCkgPT09IFwiVHJhbnNmb3JtZXJcIiB8fFxuICAgICAgICBlLnRhcmdldC5hdHRycz8ubmFtZT8uaW5jbHVkZXMoXCJfYW5jaG9yXCIpO1xuICAgICAgaWYgKGVzVHJhbnNmb3JtZXIpIHJldHVybjtcblxuICAgICAgY29uc3QgZXNTdGFnZSA9IGNsaWNrZWRPblN0YWdlO1xuICAgICAgY29uc3QgZXNTZWNjaW9uID0gISF0YXBwZWRTZWN0aW9uSWQ7XG4gICAgICBjb25zdCBlc0ltYWdlbkZvbmRvID0gZS50YXJnZXQuZ2V0Q2xhc3NOYW1lPy4oKSA9PT0gXCJJbWFnZVwiO1xuXG4gICAgICBpZiAoZXNTdGFnZSB8fCBlc1NlY2Npb24gfHwgZXNJbWFnZW5Gb25kbykge1xuICAgICAgICBjbGVhclNlbGVjdGlvblVJKCk7XG5cbiAgICAgICAgaWYgKGVzU3RhZ2UpIHtcbiAgICAgICAgICBvblNlbGVjdFNlY2Npb24/LihudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YXBwZWRTZWN0aW9uSWQpIHtcbiAgICAgICAgICBvblNlbGVjdFNlY2Npb24/Lih0YXBwZWRTZWN0aW9uSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcG9zID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICAgIGlmICghcG9zKSByZXR1cm47XG4gICAgICAgIHNldEluaWNpb1NlbGVjY2lvbih7IHg6IHBvcy54LCB5OiBwb3MueSB9KTtcbiAgICAgICAgc2V0QXJlYVNlbGVjY2lvbih7IHg6IHBvcy54LCB5OiBwb3MueSwgd2lkdGg6IDAsIGhlaWdodDogMCB9KTtcbiAgICAgICAgc2V0U2VsZWNjaW9uQWN0aXZhKHRydWUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW1xuICAgICAgZWxlbWVudFJlZnMsXG4gICAgICByZXNvbHZlU2VjdGlvbklkRnJvbVRhcmdldCxcbiAgICAgIGRyYWdTdGFydFBvcyxcbiAgICAgIGhhc0RyYWdnZWQsXG4gICAgICBjbGVhclNlbGVjdGlvblVJLFxuICAgICAgb25TZWxlY3RTZWNjaW9uLFxuICAgICAgc2V0SW5pY2lvU2VsZWNjaW9uLFxuICAgICAgc2V0QXJlYVNlbGVjY2lvbixcbiAgICAgIHNldFNlbGVjY2lvbkFjdGl2YSxcbiAgICBdXG4gICk7XG5cbiAgY29uc3Qgb25Ub3VjaFN0YXJ0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcbiAgICAgIGlmICghc3RhZ2UpIHJldHVybjtcblxuICAgICAgY29uc3QgcG9zID0gc3RhZ2UuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICBpZiAoIXBvcykgcmV0dXJuO1xuXG4gICAgICBjb25zdCByb290SGl0ID0gZmluZFJvb3RIaXQoZS50YXJnZXQsIGVsZW1lbnRSZWZzKTtcbiAgICAgIGNvbnN0IGNsaWNrZWRPblN0YWdlID0gZS50YXJnZXQgPT09IHN0YWdlO1xuICAgICAgY29uc3QgdGFwcGVkU2VjdGlvbklkID0gcmVzb2x2ZVNlY3Rpb25JZEZyb21UYXJnZXQoZS50YXJnZXQpO1xuICAgICAgY29uc3QgZXNUcmFuc2Zvcm1lciA9XG4gICAgICAgIGUudGFyZ2V0LmdldENsYXNzTmFtZT8uKCkgPT09IFwiVHJhbnNmb3JtZXJcIiB8fFxuICAgICAgICBlLnRhcmdldC5wYXJlbnQ/LmdldENsYXNzTmFtZT8uKCkgPT09IFwiVHJhbnNmb3JtZXJcIiB8fFxuICAgICAgICBlLnRhcmdldC5hdHRycz8ubmFtZT8uaW5jbHVkZXMoXCJfYW5jaG9yXCIpO1xuICAgICAgY29uc3QgY2xpZW50UG9pbnQgPSBnZXRDbGllbnRQb2ludEZyb21OYXRpdmVFdmVudChlLmV2dCk7XG4gICAgICBjb25zdCBzdGFydFNjcm9sbFggPVxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93LnNjcm9sbFggfHwgd2luZG93LnBhZ2VYT2Zmc2V0IHx8IDAgOiAwO1xuICAgICAgY29uc3Qgc3RhcnRTY3JvbGxZID1cbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdy5zY3JvbGxZIHx8IHdpbmRvdy5wYWdlWU9mZnNldCB8fCAwIDogMDtcblxuICAgICAgdG91Y2hHZXN0dXJlUmVmLmN1cnJlbnQgPSB7XG4gICAgICAgIHN0YXJ0WDogcG9zLngsXG4gICAgICAgIHN0YXJ0WTogcG9zLnksXG4gICAgICAgIHN0YXJ0Q2xpZW50WDogY2xpZW50UG9pbnQ/LnggPz8gcG9zLngsXG4gICAgICAgIHN0YXJ0Q2xpZW50WTogY2xpZW50UG9pbnQ/LnkgPz8gcG9zLnksXG4gICAgICAgIHN0YXJ0U2Nyb2xsWCxcbiAgICAgICAgc3RhcnRTY3JvbGxZLFxuICAgICAgICBzdGFydGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIG1vdmVkOiBmYWxzZSxcbiAgICAgICAgdGFwcGVkU2VjdGlvbklkLFxuICAgICAgICBjbGlja2VkT25TdGFnZSxcbiAgICAgICAgc3RhcnRlZE9uRWxlbWVudDogISFyb290SGl0IHx8IGVzVHJhbnNmb3JtZXIsXG4gICAgICB9O1xuXG4gICAgICBpZiAocm9vdEhpdCB8fCBlc1RyYW5zZm9ybWVyKSByZXR1cm47XG5cbiAgICAgIGlmICghY2xpY2tlZE9uU3RhZ2UgJiYgZS50YXJnZXQuZ2V0Q2xhc3NOYW1lPy4oKSAhPT0gXCJJbWFnZVwiKSB7XG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInNhbGlyLW1vZG8tbW92ZXItZm9uZG9cIikpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW2VsZW1lbnRSZWZzLCByZXNvbHZlU2VjdGlvbklkRnJvbVRhcmdldF1cbiAgKTtcblxuICBjb25zdCBvblRvdWNoTW92ZSA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XG4gICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgIGlmICghc3RhZ2UpIHJldHVybjtcblxuICAgIGNvbnN0IHBvcyA9IHN0YWdlLmdldFBvaW50ZXJQb3NpdGlvbigpO1xuICAgIGNvbnN0IGNsaWVudFBvaW50ID0gZ2V0Q2xpZW50UG9pbnRGcm9tTmF0aXZlRXZlbnQoZS5ldnQpO1xuICAgIGNvbnN0IHBvaW50WCA9IGNsaWVudFBvaW50Py54ID8/IHBvcz8ueDtcbiAgICBjb25zdCBwb2ludFkgPSBjbGllbnRQb2ludD8ueSA/PyBwb3M/Lnk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocG9pbnRYKSB8fCAhTnVtYmVyLmlzRmluaXRlKHBvaW50WSkpIHJldHVybjtcblxuICAgIGNvbnN0IGR4ID0gTWF0aC5hYnMocG9pbnRYIC0gdG91Y2hHZXN0dXJlUmVmLmN1cnJlbnQuc3RhcnRDbGllbnRYKTtcbiAgICBjb25zdCBkeSA9IE1hdGguYWJzKHBvaW50WSAtIHRvdWNoR2VzdHVyZVJlZi5jdXJyZW50LnN0YXJ0Q2xpZW50WSk7XG5cbiAgICBpZiAoZHggPiBUT1VDSF9NT1ZFX1BYIHx8IGR5ID4gVE9VQ0hfTU9WRV9QWCkge1xuICAgICAgdG91Y2hHZXN0dXJlUmVmLmN1cnJlbnQubW92ZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IG9uVG91Y2hFbmQgPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIGNvbnN0IGcgPSB0b3VjaEdlc3R1cmVSZWYuY3VycmVudDtcbiAgICBjb25zdCBjbGllbnRQb2ludCA9IGdldENsaWVudFBvaW50RnJvbU5hdGl2ZUV2ZW50KGU/LmV2dCk7XG4gICAgY29uc3QgZW5kQ2xpZW50WCA9IGNsaWVudFBvaW50Py54ID8/IGcuc3RhcnRDbGllbnRYO1xuICAgIGNvbnN0IGVuZENsaWVudFkgPSBjbGllbnRQb2ludD8ueSA/PyBnLnN0YXJ0Q2xpZW50WTtcbiAgICBjb25zdCBjdXJyZW50U2Nyb2xsWCA9XG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93LnNjcm9sbFggfHwgd2luZG93LnBhZ2VYT2Zmc2V0IHx8IDAgOiBnLnN0YXJ0U2Nyb2xsWDtcbiAgICBjb25zdCBjdXJyZW50U2Nyb2xsWSA9XG4gICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0IHx8IDAgOiBnLnN0YXJ0U2Nyb2xsWTtcblxuICAgIGNvbnN0IG1vdmVkQnlUb3VjaCA9XG4gICAgICBNYXRoLmFicyhlbmRDbGllbnRYIC0gZy5zdGFydENsaWVudFgpID4gVE9VQ0hfTU9WRV9QWCB8fFxuICAgICAgTWF0aC5hYnMoZW5kQ2xpZW50WSAtIGcuc3RhcnRDbGllbnRZKSA+IFRPVUNIX01PVkVfUFg7XG4gICAgY29uc3QgbW92ZWRCeVNjcm9sbCA9XG4gICAgICBNYXRoLmFicyhjdXJyZW50U2Nyb2xsWCAtIGcuc3RhcnRTY3JvbGxYKSA+IFRPVUNIX1NDUk9MTF9QWCB8fFxuICAgICAgTWF0aC5hYnMoY3VycmVudFNjcm9sbFkgLSBnLnN0YXJ0U2Nyb2xsWSkgPiBUT1VDSF9TQ1JPTExfUFg7XG4gICAgY29uc3QgZWxhcHNlZCA9IERhdGUubm93KCkgLSAoZy5zdGFydGVkQXQgfHwgRGF0ZS5ub3coKSk7XG4gICAgY29uc3QgbG9uZ1ByZXNzID0gZWxhcHNlZCA+IDQ1MDtcblxuICAgIGlmIChtb3ZlZEJ5VG91Y2ggfHwgbW92ZWRCeVNjcm9sbCkge1xuICAgICAgZy5tb3ZlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGcubW92ZWQpIHJldHVybjtcbiAgICBpZiAobG9uZ1ByZXNzKSByZXR1cm47XG4gICAgaWYgKGcuc3RhcnRlZE9uRWxlbWVudCkgcmV0dXJuO1xuXG4gICAgY2xlYXJTZWxlY3Rpb25VSSgpO1xuXG4gICAgaWYgKGcuY2xpY2tlZE9uU3RhZ2UpIHtcbiAgICAgIG9uU2VsZWN0U2VjY2lvbj8uKG51bGwpO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwic2FsaXItbW9kby1tb3Zlci1mb25kb1wiKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGcudGFwcGVkU2VjdGlvbklkKSB7XG4gICAgICBvblNlbGVjdFNlY2Npb24/LihnLnRhcHBlZFNlY3Rpb25JZCk7XG4gICAgfVxuICB9LCBbY2xlYXJTZWxlY3Rpb25VSSwgb25TZWxlY3RTZWNjaW9uXSk7XG5cbiAgY29uc3Qgb25Nb3VzZU1vdmUgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgaWYgKCFzZWxlY2Npb25BY3RpdmEgfHwgIWluaWNpb1NlbGVjY2lvbikgcmV0dXJuO1xuICAgICAgaWYgKHdpbmRvdy5fbW91c2VNb3ZlVGhyb3R0bGUpIHJldHVybjtcbiAgICAgIHdpbmRvdy5fbW91c2VNb3ZlVGhyb3R0bGUgPSB0cnVlO1xuXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICB3aW5kb3cuX21vdXNlTW92ZVRocm90dGxlID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgICBjb25zdCBwb3MgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcbiAgICAgICAgaWYgKCFwb3MpIHJldHVybjtcblxuICAgICAgICBjb25zdCBhcmVhID0ge1xuICAgICAgICAgIHg6IE1hdGgubWluKGluaWNpb1NlbGVjY2lvbi54LCBwb3MueCksXG4gICAgICAgICAgeTogTWF0aC5taW4oaW5pY2lvU2VsZWNjaW9uLnksIHBvcy55KSxcbiAgICAgICAgICB3aWR0aDogTWF0aC5hYnMocG9zLnggLSBpbmljaW9TZWxlY2Npb24ueCksXG4gICAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyhwb3MueSAtIGluaWNpb1NlbGVjY2lvbi55KSxcbiAgICAgICAgfTtcblxuICAgICAgICBzZXRBcmVhU2VsZWNjaW9uKGFyZWEpO1xuXG4gICAgICAgIGlmIChNYXRoLmFicyhhcmVhLndpZHRoKSA+IDUgfHwgTWF0aC5hYnMoYXJlYS5oZWlnaHQpID4gNSkge1xuICAgICAgICAgIGlmICh3aW5kb3cuX3NlbGVjdGlvblRocm90dGxlKSByZXR1cm47XG4gICAgICAgICAgd2luZG93Ll9zZWxlY3Rpb25UaHJvdHRsZSA9IHRydWU7XG5cbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWRzID0gb2JqZXRvc1xuICAgICAgICAgICAgICAuZmlsdGVyKChvYmopID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gZWxlbWVudFJlZnMuY3VycmVudFtvYmouaWRdO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkZXRlY3RhckludGVyc2VjY2lvbkxpbmVhKG9iaiwgYXJlYSwgc3RhZ2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCh7IHJlbGF0aXZlVG86IHN0YWdlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICBib3gueCArIGJveC53aWR0aCA+PSBhcmVhLnggJiZcbiAgICAgICAgICAgICAgICAgIGJveC54IDw9IGFyZWEueCArIGFyZWEud2lkdGggJiZcbiAgICAgICAgICAgICAgICAgIGJveC55ICsgYm94LmhlaWdodCA+PSBhcmVhLnkgJiZcbiAgICAgICAgICAgICAgICAgIGJveC55IDw9IGFyZWEueSArIGFyZWEuaGVpZ2h0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLm1hcCgob2JqKSA9PiBvYmouaWQpO1xuXG4gICAgICAgICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zKGlkcyk7XG4gICAgICAgICAgICB3aW5kb3cuX3NlbGVjdGlvblRocm90dGxlID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW1xuICAgICAgc2VsZWNjaW9uQWN0aXZhLFxuICAgICAgaW5pY2lvU2VsZWNjaW9uLFxuICAgICAgc2V0QXJlYVNlbGVjY2lvbixcbiAgICAgIG9iamV0b3MsXG4gICAgICBlbGVtZW50UmVmcyxcbiAgICAgIGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEsXG4gICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zLFxuICAgIF1cbiAgKTtcblxuICBjb25zdCBvbk1vdXNlVXAgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgICAgaWYgKHdpbmRvdy5fZ3J1cG9MaWRlcikgcmV0dXJuO1xuICAgICAgaWYgKCFzZWxlY2Npb25BY3RpdmEgfHwgIWFyZWFTZWxlY2Npb24pIHJldHVybjtcblxuICAgICAgY29uc3QgbnVldmFTZWxlY2Npb24gPSBvYmpldG9zLmZpbHRlcigob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBlbGVtZW50UmVmcy5jdXJyZW50W29iai5pZF07XG4gICAgICAgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGlmIChvYmoudGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iai5maWd1cmEgPT09IFwibGluZVwiKSB7XG4gICAgICAgICAgcmV0dXJuIGRldGVjdGFySW50ZXJzZWNjaW9uTGluZWEob2JqLCBhcmVhU2VsZWNjaW9uLCBzdGFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGJveCA9IG5vZGUuZ2V0Q2xpZW50UmVjdCgpO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBib3gueCArIGJveC53aWR0aCA+PSBhcmVhU2VsZWNjaW9uLnggJiZcbiAgICAgICAgICAgIGJveC54IDw9IGFyZWFTZWxlY2Npb24ueCArIGFyZWFTZWxlY2Npb24ud2lkdGggJiZcbiAgICAgICAgICAgIGJveC55ICsgYm94LmhlaWdodCA+PSBhcmVhU2VsZWNjaW9uLnkgJiZcbiAgICAgICAgICAgIGJveC55IDw9IGFyZWFTZWxlY2Npb24ueSArIGFyZWFTZWxlY2Npb24uaGVpZ2h0XG4gICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyhudWV2YVNlbGVjY2lvbi5tYXAoKG9iaikgPT4gb2JqLmlkKSk7XG4gICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zKFtdKTtcbiAgICAgIHNldFNlbGVjY2lvbkFjdGl2YShmYWxzZSk7XG4gICAgICBzZXRBcmVhU2VsZWNjaW9uKG51bGwpO1xuXG4gICAgICBpZiAod2luZG93Ll9zZWxlY3Rpb25UaHJvdHRsZSkgd2luZG93Ll9zZWxlY3Rpb25UaHJvdHRsZSA9IGZhbHNlO1xuICAgICAgaWYgKHdpbmRvdy5fYm91bmRzVXBkYXRlVGhyb3R0bGUpIHdpbmRvdy5fYm91bmRzVXBkYXRlVGhyb3R0bGUgPSBmYWxzZTtcbiAgICAgIHdpbmRvdy5fbGluZUludGVyc2VjdGlvbkNhY2hlID0ge307XG4gICAgfSxcbiAgICBbXG4gICAgICBzZWxlY2Npb25BY3RpdmEsXG4gICAgICBhcmVhU2VsZWNjaW9uLFxuICAgICAgb2JqZXRvcyxcbiAgICAgIGVsZW1lbnRSZWZzLFxuICAgICAgZGV0ZWN0YXJJbnRlcnNlY2Npb25MaW5lYSxcbiAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgICBzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zLFxuICAgICAgc2V0U2VsZWNjaW9uQWN0aXZhLFxuICAgICAgc2V0QXJlYVNlbGVjY2lvbixcbiAgICBdXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBvbk1vdXNlRG93bixcbiAgICBvblRvdWNoU3RhcnQsXG4gICAgb25Ub3VjaE1vdmUsXG4gICAgb25Ub3VjaEVuZCxcbiAgICBvbk1vdXNlTW92ZSxcbiAgICBvbk1vdXNlVXAsXG4gIH07XG59XG5cclxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUmVmIiwiVE9VQ0hfTU9WRV9QWCIsIlRPVUNIX1NDUk9MTF9QWCIsImdldENsaWVudFBvaW50RnJvbU5hdGl2ZUV2ZW50IiwibmF0aXZlRXZlbnQiLCJ0b3VjaCIsInRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsIk51bWJlciIsImlzRmluaXRlIiwiY2xpZW50WCIsImNsaWVudFkiLCJ4IiwieSIsImZpbmRSb290SGl0IiwidGFyZ2V0IiwiZWxlbWVudFJlZnMiLCJyb290cyIsIk9iamVjdCIsInZhbHVlcyIsImN1cnJlbnQiLCJsZW5ndGgiLCJmaW5kQW5jZXN0b3IiLCJub2RlIiwiaW5jbHVkZXMiLCJ1c2VTdGFnZUdlc3R1cmVzIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsImRyYWdTdGFydFBvcyIsImhhc0RyYWdnZWQiLCJzZWxlY2Npb25BY3RpdmEiLCJpbmljaW9TZWxlY2Npb24iLCJhcmVhU2VsZWNjaW9uIiwiZGV0ZWN0YXJJbnRlcnNlY2Npb25MaW5lYSIsInNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJzZXRFbGVtZW50b3NQcmVTZWxlY2Npb25hZG9zIiwic2V0U2VsZWNjaW9uQWN0aXZhIiwic2V0SW5pY2lvU2VsZWNjaW9uIiwic2V0QXJlYVNlbGVjY2lvbiIsIm9uU2VsZWN0U2VjY2lvbiIsImNlcnJhck1lbnVzRmxvdGFudGVzIiwidG91Y2hHZXN0dXJlUmVmIiwic3RhcnRYIiwic3RhcnRZIiwic3RhcnRDbGllbnRYIiwic3RhcnRDbGllbnRZIiwic3RhcnRTY3JvbGxYIiwic3RhcnRTY3JvbGxZIiwic3RhcnRlZEF0IiwibW92ZWQiLCJ0YXBwZWRTZWN0aW9uSWQiLCJjbGlja2VkT25TdGFnZSIsInN0YXJ0ZWRPbkVsZW1lbnQiLCJyZXNvbHZlU2VjdGlvbklkRnJvbVRhcmdldCIsIm5vZGVJZCIsImF0dHJzIiwiaWQiLCJzb21lIiwicyIsInBhcmVudCIsImNsZWFyU2VsZWN0aW9uVUkiLCJvbk1vdXNlRG93biIsImUiLCJzdGFnZSIsImdldFN0YWdlIiwicm9vdEhpdCIsImdldENsYXNzTmFtZSIsIndpbmRvdyIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsImdldFBvaW50ZXJQb3NpdGlvbiIsImVzVHJhbnNmb3JtZXIiLCJuYW1lIiwiZXNTdGFnZSIsImVzU2VjY2lvbiIsImVzSW1hZ2VuRm9uZG8iLCJwb3MiLCJ3aWR0aCIsImhlaWdodCIsIm9uVG91Y2hTdGFydCIsImNsaWVudFBvaW50IiwiZXZ0Iiwic2Nyb2xsWCIsInBhZ2VYT2Zmc2V0Iiwic2Nyb2xsWSIsInBhZ2VZT2Zmc2V0IiwiRGF0ZSIsIm5vdyIsIm9uVG91Y2hNb3ZlIiwicG9pbnRYIiwicG9pbnRZIiwiZHgiLCJNYXRoIiwiYWJzIiwiZHkiLCJvblRvdWNoRW5kIiwiZyIsImVuZENsaWVudFgiLCJlbmRDbGllbnRZIiwiY3VycmVudFNjcm9sbFgiLCJjdXJyZW50U2Nyb2xsWSIsIm1vdmVkQnlUb3VjaCIsIm1vdmVkQnlTY3JvbGwiLCJlbGFwc2VkIiwibG9uZ1ByZXNzIiwib25Nb3VzZU1vdmUiLCJfbW91c2VNb3ZlVGhyb3R0bGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhcmVhIiwibWluIiwiX3NlbGVjdGlvblRocm90dGxlIiwiaWRzIiwiZmlsdGVyIiwib2JqIiwidGlwbyIsImZpZ3VyYSIsImJveCIsImdldENsaWVudFJlY3QiLCJyZWxhdGl2ZVRvIiwibWFwIiwib25Nb3VzZVVwIiwiX2dydXBvTGlkZXIiLCJudWV2YVNlbGVjY2lvbiIsIl9ib3VuZHNVcGRhdGVUaHJvdHRsZSIsIl9saW5lSW50ZXJzZWN0aW9uQ2FjaGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/mobile/useStageGestures.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/overlays/useOptionButtonPosition.js":
/*!*******************************************************************!*\
  !*** ./src/components/editor/overlays/useOptionButtonPosition.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useOptionButtonPosition)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nconst FALLBACK_BUTTON_SIZE_DESKTOP = 28;\nconst FALLBACK_BUTTON_SIZE_MOBILE = 24;\nconst BUTTON_VERTEX_OVERLAP_RATIO = 0.5;\nconst BUTTON_VERTEX_NUDGE_X_DESKTOP = 20;\nconst BUTTON_VERTEX_NUDGE_Y_DESKTOP = 20;\nconst BUTTON_VERTEX_NUDGE_X_MOBILE = 20;\nconst BUTTON_VERTEX_NUDGE_Y_MOBILE = 20;\nconst LOG_THROTTLE_MS = 120;\nconst POSITION_SETTLE_MS_DESKTOP = 120;\nconst POSITION_SETTLE_MS_MOBILE = 320;\nfunction isOptionButtonDebugEnabled() {\n    return  false && 0;\n}\nfunction resolveScale(escalaVisual, escalaActiva) {\n    if (Number.isFinite(escalaVisual) && escalaVisual > 0) return escalaVisual;\n    if (Number.isFinite(escalaActiva) && escalaActiva > 0) return escalaActiva;\n    return 1;\n}\nfunction clamp(value, min, max) {\n    return Math.min(max, Math.max(min, value));\n}\nfunction describeEventTarget(target) {\n    if (target === window) return \"window\";\n    if (target === document) return \"document\";\n    if (!(target instanceof Element)) return \"unknown\";\n    const tag = String(target.tagName || \"\").toLowerCase();\n    const id = target.id ? `#${target.id}` : \"\";\n    const classes = target.classList?.length ? `.${Array.from(target.classList).slice(0, 2).join(\".\")}` : \"\";\n    return `${tag}${id}${classes}` || \"element\";\n}\nfunction resolveRenderedScale(stage, stageRect, escalaVisual, escalaActiva) {\n    const stageWidth = typeof stage?.width === \"function\" ? Number(stage.width()) : Number(stage?.attrs?.width);\n    const stageHeight = typeof stage?.height === \"function\" ? Number(stage.height()) : Number(stage?.attrs?.height);\n    const fallback = resolveScale(escalaVisual, escalaActiva);\n    const scaleX = Number.isFinite(stageWidth) && stageWidth > 0 ? stageRect.width / stageWidth : fallback;\n    const scaleY = Number.isFinite(stageHeight) && stageHeight > 0 ? stageRect.height / stageHeight : fallback;\n    return {\n        x: Number.isFinite(scaleX) && scaleX > 0 ? scaleX : fallback,\n        y: Number.isFinite(scaleY) && scaleY > 0 ? scaleY : fallback\n    };\n}\nfunction getScrollableAncestors(startNode) {\n    if (true) return [];\n    if (!(startNode instanceof Element)) return [\n        window\n    ];\n    const targets = [];\n    let current = startNode.parentElement;\n    while(current && current !== document.body){\n        const style = window.getComputedStyle(current);\n        const overflowY = String(style.overflowY || \"\").toLowerCase();\n        const overflow = String(style.overflow || \"\").toLowerCase();\n        const isScrollable = overflowY === \"auto\" || overflowY === \"scroll\" || overflowY === \"overlay\" || overflow === \"auto\" || overflow === \"scroll\" || overflow === \"overlay\";\n        if (isScrollable) {\n            targets.push(current);\n        }\n        current = current.parentElement;\n    }\n    if (document.scrollingElement) {\n        targets.push(document.scrollingElement);\n    }\n    targets.push(window);\n    return Array.from(new Set(targets));\n}\nfunction useOptionButtonPosition({ botonOpcionesRef, layoutRootRef = null, elementRefs, elementosSeleccionados, stageRef, escalaVisual, escalaActiva, isMobile = false, buttonSize = FALLBACK_BUTTON_SIZE_DESKTOP }) {\n    const lastLogByEventRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\n    const debugLog = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useOptionButtonPosition.useCallback[debugLog]\": (eventName, payload = {}, force = false)=>{\n            if (!isOptionButtonDebugEnabled()) return;\n            const now = Date.now();\n            const previous = Number(lastLogByEventRef.current[eventName] || 0);\n            if (!force && now - previous < LOG_THROTTLE_MS) return;\n            lastLogByEventRef.current[eventName] = now;\n            console.log(`[OPTION-BUTTON] ${eventName}`, {\n                ts: new Date(now).toISOString(),\n                ...payload\n            });\n            if (eventName === \"position\") {\n                const boxY = payload?.boxStage?.y ?? null;\n                const absY = payload?.nodeAbsolute?.y ?? null;\n                const anchorY = payload?.anchorStageY ?? null;\n                const finalY = payload?.final?.y ?? null;\n                const elementY = payload?.elementScreen?.y ?? null;\n                const stageTop = payload?.stageRect?.top ?? null;\n                const source = payload?.source ?? \"unknown\";\n                const target = payload?.eventTarget?.label ?? payload?.scrollTarget?.label ?? \"unknown\";\n                console.log(`[OPTION-BUTTON][SUMMARY] src=${source} target=${target} boxY=${boxY} absY=${absY} anchorY=${anchorY} elementY=${elementY} finalY=${finalY} stageTop=${stageTop}`);\n            }\n        }\n    }[\"useOptionButtonPosition.useCallback[debugLog]\"], []);\n    const ocultarBotonOpciones = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useOptionButtonPosition.useCallback[ocultarBotonOpciones]\": (reason = \"unknown\", extra = null)=>{\n            if (!botonOpcionesRef.current) return;\n            botonOpcionesRef.current.style.display = \"none\";\n            debugLog(\"hide\", {\n                reason,\n                selectedId: elementosSeleccionados?.[0] ?? null,\n                isMobile,\n                extra\n            }, false);\n        }\n    }[\"useOptionButtonPosition.useCallback[ocultarBotonOpciones]\"], [\n        botonOpcionesRef,\n        debugLog,\n        elementosSeleccionados,\n        isMobile\n    ]);\n    const actualizarPosicionBotonOpciones = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useOptionButtonPosition.useCallback[actualizarPosicionBotonOpciones]\": (source = \"manual\", nativeEvent = null, eventTargetLabel = null)=>{\n            if (true) return;\n            if (!botonOpcionesRef.current) return;\n            if (elementosSeleccionados.length !== 1) {\n                ocultarBotonOpciones(\"selection-count\", {\n                    source,\n                    count: elementosSeleccionados.length\n                });\n                return;\n            }\n            const nodeRef = elementRefs.current[elementosSeleccionados[0]];\n            const stage = stageRef.current;\n            if (!nodeRef || !stage) {\n                ocultarBotonOpciones(\"missing-node-or-stage\", {\n                    source,\n                    hasNode: Boolean(nodeRef),\n                    hasStage: Boolean(stage)\n                });\n                return;\n            }\n            try {\n                const box = nodeRef.getClientRect({\n                    relativeTo: stage,\n                    skipShadow: true\n                });\n                const nodeAbsolutePosition = typeof nodeRef.getAbsolutePosition === \"function\" ? nodeRef.getAbsolutePosition() : {\n                    x: typeof nodeRef.x === \"function\" ? nodeRef.x() : null,\n                    y: typeof nodeRef.y === \"function\" ? nodeRef.y() : null\n                };\n                const stageContainer = typeof stage.container === \"function\" ? stage.container() : stage.getStage?.()?.container?.();\n                if (!stageContainer) {\n                    ocultarBotonOpciones(\"missing-stage-container\", {\n                        source\n                    });\n                    return;\n                }\n                const stageRect = stageContainer.getBoundingClientRect();\n                const renderedScale = resolveRenderedScale(stage, stageRect, escalaVisual, escalaActiva);\n                const targetButtonSize = Number.isFinite(buttonSize) && buttonSize > 0 ? buttonSize : isMobile ? FALLBACK_BUTTON_SIZE_MOBILE : FALLBACK_BUTTON_SIZE_DESKTOP;\n                const overlapPx = targetButtonSize * BUTTON_VERTEX_OVERLAP_RATIO;\n                const nudgeX = isMobile ? BUTTON_VERTEX_NUDGE_X_MOBILE : BUTTON_VERTEX_NUDGE_X_DESKTOP;\n                const nudgeY = isMobile ? BUTTON_VERTEX_NUDGE_Y_MOBILE : BUTTON_VERTEX_NUDGE_Y_DESKTOP;\n                const anchorStageY = Number.isFinite(nodeAbsolutePosition?.y) ? Math.min(box.y, nodeAbsolutePosition.y) : box.y;\n                const elementoX = stageRect.left + box.x * renderedScale.x;\n                const elementoY = stageRect.top + anchorStageY * renderedScale.y;\n                const anchoElemento = Math.max(0, box.width * renderedScale.x);\n                const altoElemento = Math.max(0, box.height * renderedScale.y);\n                const elementoRight = elementoX + anchoElemento;\n                const viewportWidth = window.innerWidth;\n                const viewportHeight = window.innerHeight;\n                const viewportPadding = isMobile ? 8 : 4;\n                const elementoVisible = elementoX + anchoElemento >= 0 && elementoX <= viewportWidth && elementoY + altoElemento >= 0 && elementoY <= viewportHeight;\n                if (!elementoVisible) {\n                    ocultarBotonOpciones(\"element-outside-viewport\", {\n                        source,\n                        elementRect: {\n                            left: Math.round(elementoX),\n                            top: Math.round(elementoY),\n                            width: Math.round(anchoElemento),\n                            height: Math.round(altoElemento)\n                        },\n                        viewport: {\n                            width: viewportWidth,\n                            height: viewportHeight\n                        }\n                    });\n                    return;\n                }\n                // Ancla visual: centro del botón exactamente en el vértice superior derecho.\n                const preferredX = elementoRight - overlapPx + nudgeX;\n                const preferredY = elementoY - overlapPx - nudgeY;\n                const minX = viewportPadding;\n                const maxX = Math.max(minX, viewportWidth - targetButtonSize - viewportPadding);\n                const minY = viewportPadding;\n                const maxY = Math.max(minY, viewportHeight - targetButtonSize - viewportPadding);\n                const fallbackNearVertexX = elementoRight - targetButtonSize - 1;\n                const useFallbackNearVertexX = preferredX + targetButtonSize > viewportWidth - viewportPadding && fallbackNearVertexX >= minX;\n                const fallbackNearVertexY = elementoY + 1;\n                const useFallbackNearVertexY = preferredY < minY && fallbackNearVertexY <= maxY;\n                const placementModeX = useFallbackNearVertexX ? \"fallback-left-of-vertex\" : \"vertex\";\n                const placementModeY = useFallbackNearVertexY ? \"fallback-below-vertex\" : \"vertex\";\n                let botonX = useFallbackNearVertexX ? fallbackNearVertexX : preferredX;\n                let botonY = useFallbackNearVertexY ? fallbackNearVertexY : preferredY;\n                botonX = clamp(botonX, minX, maxX);\n                botonY = clamp(botonY, minY, maxY);\n                const hasRelativeRoot = Boolean(layoutRootRef?.current);\n                let renderX = botonX;\n                let renderY = botonY;\n                if (hasRelativeRoot) {\n                    const rootRect = layoutRootRef.current.getBoundingClientRect();\n                    renderX = botonX - rootRect.left;\n                    renderY = botonY - rootRect.top;\n                }\n                botonOpcionesRef.current.style.left = `${Math.round(renderX)}px`;\n                botonOpcionesRef.current.style.top = `${Math.round(renderY)}px`;\n                botonOpcionesRef.current.style.display = \"flex\";\n                if (isOptionButtonDebugEnabled()) {\n                    const debugScrollTarget = getScrollableAncestors(stageContainer)[0] || window;\n                    const stageWidth = typeof stage?.width === \"function\" ? Number(stage.width()) : Number(stage?.attrs?.width);\n                    const stageHeight = typeof stage?.height === \"function\" ? Number(stage.height()) : Number(stage?.attrs?.height);\n                    debugLog(\"position\", {\n                        source,\n                        selectedId: elementosSeleccionados[0],\n                        isMobile,\n                        pointerType: nativeEvent?.pointerType ?? null,\n                        nativeEventType: nativeEvent?.type ?? null,\n                        eventTarget: {\n                            label: eventTargetLabel || describeEventTarget(nativeEvent?.target)\n                        },\n                        stageSize: {\n                            width: Number.isFinite(stageWidth) ? stageWidth : null,\n                            height: Number.isFinite(stageHeight) ? stageHeight : null\n                        },\n                        stageRect: {\n                            left: Math.round(stageRect.left),\n                            top: Math.round(stageRect.top),\n                            width: Math.round(stageRect.width),\n                            height: Math.round(stageRect.height)\n                        },\n                        renderedScale: {\n                            x: Number(renderedScale.x.toFixed(4)),\n                            y: Number(renderedScale.y.toFixed(4))\n                        },\n                        boxStage: {\n                            x: Number(box.x.toFixed(2)),\n                            y: Number(box.y.toFixed(2)),\n                            width: Number(box.width.toFixed(2)),\n                            height: Number(box.height.toFixed(2))\n                        },\n                        nodeAbsolute: {\n                            x: Number.isFinite(nodeAbsolutePosition?.x) ? Number(nodeAbsolutePosition.x.toFixed(2)) : null,\n                            y: Number.isFinite(nodeAbsolutePosition?.y) ? Number(nodeAbsolutePosition.y.toFixed(2)) : null\n                        },\n                        anchorStageY: Number(anchorStageY.toFixed(2)),\n                        elementScreen: {\n                            x: Number(elementoX.toFixed(2)),\n                            y: Number(elementoY.toFixed(2)),\n                            right: Number(elementoRight.toFixed(2)),\n                            width: Number(anchoElemento.toFixed(2)),\n                            height: Number(altoElemento.toFixed(2))\n                        },\n                        preferred: {\n                            x: Number(preferredX.toFixed(2)),\n                            y: Number(preferredY.toFixed(2)),\n                            targetButtonSize,\n                            overlapPx: Number(overlapPx.toFixed(2)),\n                            nudgeX,\n                            nudgeY,\n                            fallbackNearVertexX: Number(fallbackNearVertexX.toFixed(2)),\n                            fallbackNearVertexY: Number(fallbackNearVertexY.toFixed(2)),\n                            placementModeX,\n                            placementModeY\n                        },\n                        final: {\n                            x: Number(botonX.toFixed(2)),\n                            y: Number(botonY.toFixed(2)),\n                            renderX: Number(renderX.toFixed(2)),\n                            renderY: Number(renderY.toFixed(2)),\n                            positionMode: hasRelativeRoot ? \"absolute\" : \"fixed\",\n                            minX,\n                            maxX,\n                            minY,\n                            maxY\n                        },\n                        viewport: {\n                            width: viewportWidth,\n                            height: viewportHeight,\n                            scrollX: Number(window.scrollX || window.pageXOffset || 0),\n                            scrollY: Number(window.scrollY || window.pageYOffset || 0),\n                            visualViewport: window.visualViewport ? {\n                                offsetTop: Number(window.visualViewport.offsetTop || 0),\n                                offsetLeft: Number(window.visualViewport.offsetLeft || 0),\n                                width: Number(window.visualViewport.width || 0),\n                                height: Number(window.visualViewport.height || 0),\n                                scale: Number(window.visualViewport.scale || 1)\n                            } : null\n                        },\n                        scrollTarget: {\n                            label: describeEventTarget(debugScrollTarget),\n                            scrollTop: debugScrollTarget && \"scrollTop\" in debugScrollTarget ? Number(debugScrollTarget.scrollTop || 0) : null\n                        }\n                    });\n                }\n            } catch (error) {\n                const message = error instanceof Error ? error.message : String(error || \"unknown-error\");\n                debugLog(\"position-error\", {\n                    source,\n                    selectedId: elementosSeleccionados?.[0] ?? null,\n                    error: message\n                }, true);\n                ocultarBotonOpciones(\"exception\", {\n                    source,\n                    error: message\n                });\n            }\n        }\n    }[\"useOptionButtonPosition.useCallback[actualizarPosicionBotonOpciones]\"], [\n        botonOpcionesRef,\n        elementosSeleccionados,\n        elementRefs,\n        stageRef,\n        escalaVisual,\n        escalaActiva,\n        debugLog,\n        ocultarBotonOpciones,\n        layoutRootRef,\n        isMobile,\n        buttonSize\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useOptionButtonPosition.useEffect\": ()=>{\n            if (elementosSeleccionados.length !== 1) {\n                ocultarBotonOpciones();\n                return undefined;\n            }\n            let rafA = 0;\n            let rafB = 0;\n            let settleRaf = 0;\n            let cancelled = false;\n            const settleDurationMs = isMobile ? POSITION_SETTLE_MS_MOBILE : POSITION_SETTLE_MS_DESKTOP;\n            const settleStartTs = typeof performance !== \"undefined\" && typeof performance.now === \"function\" ? performance.now() : Date.now();\n            const settleTick = {\n                \"useOptionButtonPosition.useEffect.settleTick\": ()=>{\n                    if (cancelled) return;\n                    const now = typeof performance !== \"undefined\" && typeof performance.now === \"function\" ? performance.now() : Date.now();\n                    actualizarPosicionBotonOpciones(\"settle-loop\");\n                    if (now - settleStartTs < settleDurationMs) {\n                        settleRaf = window.requestAnimationFrame(settleTick);\n                    }\n                }\n            }[\"useOptionButtonPosition.useEffect.settleTick\"];\n            rafA = window.requestAnimationFrame({\n                \"useOptionButtonPosition.useEffect\": ()=>{\n                    rafB = window.requestAnimationFrame({\n                        \"useOptionButtonPosition.useEffect\": ()=>{\n                            actualizarPosicionBotonOpciones(\"raf-init\", null, \"raf\");\n                            settleRaf = window.requestAnimationFrame(settleTick);\n                        }\n                    }[\"useOptionButtonPosition.useEffect\"]);\n                }\n            }[\"useOptionButtonPosition.useEffect\"]);\n            return ({\n                \"useOptionButtonPosition.useEffect\": ()=>{\n                    cancelled = true;\n                    if (rafA) window.cancelAnimationFrame(rafA);\n                    if (rafB) window.cancelAnimationFrame(rafB);\n                    if (settleRaf) window.cancelAnimationFrame(settleRaf);\n                }\n            })[\"useOptionButtonPosition.useEffect\"];\n        }\n    }[\"useOptionButtonPosition.useEffect\"], [\n        elementosSeleccionados,\n        actualizarPosicionBotonOpciones,\n        ocultarBotonOpciones,\n        isMobile\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useOptionButtonPosition.useEffect\": ()=>{\n            if (true) return undefined;\n            const stage = stageRef.current?.getStage?.() || stageRef.current;\n            const stageContainer = typeof stage?.container === \"function\" ? stage.container() : null;\n            const hasRelativeRoot = Boolean(layoutRootRef?.current);\n            const syncPosition = {\n                \"useOptionButtonPosition.useEffect.syncPosition\": (source = \"sync\", nativeEvent = null)=>{\n                    if (elementosSeleccionados.length === 1) {\n                        actualizarPosicionBotonOpciones(source, nativeEvent, describeEventTarget(nativeEvent?.target));\n                    } else {\n                        ocultarBotonOpciones(\"sync-no-selection\", {\n                            source\n                        });\n                    }\n                }\n            }[\"useOptionButtonPosition.useEffect.syncPosition\"];\n            const scrollTargets = hasRelativeRoot ? [] : stageContainer ? getScrollableAncestors(stageContainer) : [\n                window\n            ];\n            const detach = [];\n            scrollTargets.forEach({\n                \"useOptionButtonPosition.useEffect\": (target)=>{\n                    if (!target?.addEventListener || !target?.removeEventListener) return;\n                    const onScroll = {\n                        \"useOptionButtonPosition.useEffect.onScroll\": (event)=>{\n                            syncPosition(`scroll:${describeEventTarget(event.target)}`, event);\n                        }\n                    }[\"useOptionButtonPosition.useEffect.onScroll\"];\n                    target.addEventListener(\"scroll\", onScroll, {\n                        passive: true\n                    });\n                    detach.push({\n                        \"useOptionButtonPosition.useEffect\": ()=>target.removeEventListener(\"scroll\", onScroll)\n                    }[\"useOptionButtonPosition.useEffect\"]);\n                }\n            }[\"useOptionButtonPosition.useEffect\"]);\n            if (!hasRelativeRoot && window.visualViewport) {\n                const onVisualViewportScroll = {\n                    \"useOptionButtonPosition.useEffect.onVisualViewportScroll\": (event)=>{\n                        syncPosition(\"visual-viewport-scroll\", event);\n                    }\n                }[\"useOptionButtonPosition.useEffect.onVisualViewportScroll\"];\n                const onVisualViewportResize = {\n                    \"useOptionButtonPosition.useEffect.onVisualViewportResize\": (event)=>{\n                        syncPosition(\"visual-viewport-resize\", event);\n                    }\n                }[\"useOptionButtonPosition.useEffect.onVisualViewportResize\"];\n                window.visualViewport.addEventListener(\"scroll\", onVisualViewportScroll);\n                window.visualViewport.addEventListener(\"resize\", onVisualViewportResize);\n                detach.push({\n                    \"useOptionButtonPosition.useEffect\": ()=>{\n                        window.visualViewport.removeEventListener(\"scroll\", onVisualViewportScroll);\n                        window.visualViewport.removeEventListener(\"resize\", onVisualViewportResize);\n                    }\n                }[\"useOptionButtonPosition.useEffect\"]);\n            }\n            const onResize = {\n                \"useOptionButtonPosition.useEffect.onResize\": (event)=>{\n                    syncPosition(\"window-resize\", event);\n                }\n            }[\"useOptionButtonPosition.useEffect.onResize\"];\n            const onOrientationChange = {\n                \"useOptionButtonPosition.useEffect.onOrientationChange\": (event)=>{\n                    syncPosition(\"window-orientationchange\", event);\n                }\n            }[\"useOptionButtonPosition.useEffect.onOrientationChange\"];\n            window.addEventListener(\"resize\", onResize);\n            window.addEventListener(\"orientationchange\", onOrientationChange);\n            detach.push({\n                \"useOptionButtonPosition.useEffect\": ()=>window.removeEventListener(\"resize\", onResize)\n            }[\"useOptionButtonPosition.useEffect\"]);\n            detach.push({\n                \"useOptionButtonPosition.useEffect\": ()=>window.removeEventListener(\"orientationchange\", onOrientationChange)\n            }[\"useOptionButtonPosition.useEffect\"]);\n            if (stage?.on && stage?.off) {\n                const onStageDragMove = {\n                    \"useOptionButtonPosition.useEffect.onStageDragMove\": (event)=>syncPosition(\"stage-dragmove\", event?.evt || null)\n                }[\"useOptionButtonPosition.useEffect.onStageDragMove\"];\n                const onStageDragEnd = {\n                    \"useOptionButtonPosition.useEffect.onStageDragEnd\": (event)=>syncPosition(\"stage-dragend\", event?.evt || null)\n                }[\"useOptionButtonPosition.useEffect.onStageDragEnd\"];\n                const onStageTransform = {\n                    \"useOptionButtonPosition.useEffect.onStageTransform\": (event)=>syncPosition(\"stage-transform\", event?.evt || null)\n                }[\"useOptionButtonPosition.useEffect.onStageTransform\"];\n                const onStageTransformEnd = {\n                    \"useOptionButtonPosition.useEffect.onStageTransformEnd\": (event)=>syncPosition(\"stage-transformend\", event?.evt || null)\n                }[\"useOptionButtonPosition.useEffect.onStageTransformEnd\"];\n                stage.on(\"dragmove.option-button\", onStageDragMove);\n                stage.on(\"dragend.option-button\", onStageDragEnd);\n                stage.on(\"transform.option-button\", onStageTransform);\n                stage.on(\"transformend.option-button\", onStageTransformEnd);\n                detach.push({\n                    \"useOptionButtonPosition.useEffect\": ()=>{\n                        stage.off(\"dragmove.option-button\", onStageDragMove);\n                        stage.off(\"dragend.option-button\", onStageDragEnd);\n                        stage.off(\"transform.option-button\", onStageTransform);\n                        stage.off(\"transformend.option-button\", onStageTransformEnd);\n                    }\n                }[\"useOptionButtonPosition.useEffect\"]);\n            }\n            // Primer sync inmediato por si hay cambio de scroll entre renders.\n            syncPosition(\"initial-sync\");\n            return ({\n                \"useOptionButtonPosition.useEffect\": ()=>{\n                    detach.forEach({\n                        \"useOptionButtonPosition.useEffect\": (fn)=>{\n                            try {\n                                fn();\n                            } catch  {\n                            // no-op cleanup guard\n                            }\n                        }\n                    }[\"useOptionButtonPosition.useEffect\"]);\n                }\n            })[\"useOptionButtonPosition.useEffect\"];\n        }\n    }[\"useOptionButtonPosition.useEffect\"], [\n        stageRef,\n        layoutRootRef,\n        elementosSeleccionados.length,\n        actualizarPosicionBotonOpciones,\n        ocultarBotonOpciones\n    ]);\n    return {\n        actualizarPosicionBotonOpciones\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9vdmVybGF5cy91c2VPcHRpb25CdXR0b25Qb3NpdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1RDtBQUV2RCxNQUFNRywrQkFBK0I7QUFDckMsTUFBTUMsOEJBQThCO0FBQ3BDLE1BQU1DLDhCQUE4QjtBQUNwQyxNQUFNQyxnQ0FBZ0M7QUFDdEMsTUFBTUMsZ0NBQWdDO0FBQ3RDLE1BQU1DLCtCQUErQjtBQUNyQyxNQUFNQywrQkFBK0I7QUFDckMsTUFBTUMsa0JBQWtCO0FBQ3hCLE1BQU1DLDZCQUE2QjtBQUNuQyxNQUFNQyw0QkFBNEI7QUFFbEMsU0FBU0M7SUFDUCxPQUFPLE1BQTZCLElBQUlDLENBQW1DO0FBQzdFO0FBRUEsU0FBU0UsYUFBYUMsWUFBWSxFQUFFQyxZQUFZO0lBQzlDLElBQUlDLE9BQU9DLFFBQVEsQ0FBQ0gsaUJBQWlCQSxlQUFlLEdBQUcsT0FBT0E7SUFDOUQsSUFBSUUsT0FBT0MsUUFBUSxDQUFDRixpQkFBaUJBLGVBQWUsR0FBRyxPQUFPQTtJQUM5RCxPQUFPO0FBQ1Q7QUFFQSxTQUFTRyxNQUFNQyxLQUFLLEVBQUVDLEdBQUcsRUFBRUMsR0FBRztJQUM1QixPQUFPQyxLQUFLRixHQUFHLENBQUNDLEtBQUtDLEtBQUtELEdBQUcsQ0FBQ0QsS0FBS0Q7QUFDckM7QUFFQSxTQUFTSSxvQkFBb0JDLE1BQU07SUFDakMsSUFBSUEsV0FBV2IsUUFBUSxPQUFPO0lBQzlCLElBQUlhLFdBQVdDLFVBQVUsT0FBTztJQUNoQyxJQUFJLENBQUVELENBQUFBLGtCQUFrQkUsT0FBTSxHQUFJLE9BQU87SUFFekMsTUFBTUMsTUFBTUMsT0FBT0osT0FBT0ssT0FBTyxJQUFJLElBQUlDLFdBQVc7SUFDcEQsTUFBTUMsS0FBS1AsT0FBT08sRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFUCxPQUFPTyxFQUFFLEVBQUUsR0FBRztJQUN6QyxNQUFNQyxVQUFVUixPQUFPUyxTQUFTLEVB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Q25FbkIsYUFBYTtZQUViO3FEQUFPO29CQUNMRSxPQUFPQyxPQUFPOzZEQUFDLENBQUNpQjs0QkFDZCxJQUFJO2dDQUNGQTs0QkFDRixFQUFFLE9BQU07NEJBQ04sc0JBQXNCOzRCQUN4Qjt3QkFDRjs7Z0JBQ0Y7O1FBQ0Y7NENBQUc7UUFDRGhKO1FBQ0FIO1FBQ0FFLHVCQUF1QnBDLE1BQU07UUFDN0J5RTtRQUNBTDtLQUNEO0lBRUQsT0FBTztRQUNMSztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxvdmVybGF5c1xcdXNlT3B0aW9uQnV0dG9uUG9zaXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5cbmNvbnN0IEZBTExCQUNLX0JVVFRPTl9TSVpFX0RFU0tUT1AgPSAyODtcbmNvbnN0IEZBTExCQUNLX0JVVFRPTl9TSVpFX01PQklMRSA9IDI0O1xuY29uc3QgQlVUVE9OX1ZFUlRFWF9PVkVSTEFQX1JBVElPID0gMC41O1xuY29uc3QgQlVUVE9OX1ZFUlRFWF9OVURHRV9YX0RFU0tUT1AgPSAyMDtcbmNvbnN0IEJVVFRPTl9WRVJURVhfTlVER0VfWV9ERVNLVE9QID0gMjA7XG5jb25zdCBCVVRUT05fVkVSVEVYX05VREdFX1hfTU9CSUxFID0gMjA7XG5jb25zdCBCVVRUT05fVkVSVEVYX05VREdFX1lfTU9CSUxFID0gMjA7XG5jb25zdCBMT0dfVEhST1RUTEVfTVMgPSAxMjA7XG5jb25zdCBQT1NJVElPTl9TRVRUTEVfTVNfREVTS1RPUCA9IDEyMDtcbmNvbnN0IFBPU0lUSU9OX1NFVFRMRV9NU19NT0JJTEUgPSAzMjA7XG5cbmZ1bmN0aW9uIGlzT3B0aW9uQnV0dG9uRGVidWdFbmFibGVkKCkge1xuICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuX19EQkdfT1BUSU9OX0JVVFRPTiA9PT0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVNjYWxlKGVzY2FsYVZpc3VhbCwgZXNjYWxhQWN0aXZhKSB7XG4gIGlmIChOdW1iZXIuaXNGaW5pdGUoZXNjYWxhVmlzdWFsKSAmJiBlc2NhbGFWaXN1YWwgPiAwKSByZXR1cm4gZXNjYWxhVmlzdWFsO1xuICBpZiAoTnVtYmVyLmlzRmluaXRlKGVzY2FsYUFjdGl2YSkgJiYgZXNjYWxhQWN0aXZhID4gMCkgcmV0dXJuIGVzY2FsYUFjdGl2YTtcbiAgcmV0dXJuIDE7XG59XG5cbmZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZhbHVlKSk7XG59XG5cbmZ1bmN0aW9uIGRlc2NyaWJlRXZlbnRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQgPT09IHdpbmRvdykgcmV0dXJuIFwid2luZG93XCI7XG4gIGlmICh0YXJnZXQgPT09IGRvY3VtZW50KSByZXR1cm4gXCJkb2N1bWVudFwiO1xuICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIFwidW5rbm93blwiO1xuXG4gIGNvbnN0IHRhZyA9IFN0cmluZyh0YXJnZXQudGFnTmFtZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBpZCA9IHRhcmdldC5pZCA/IGAjJHt0YXJnZXQuaWR9YCA6IFwiXCI7XG4gIGNvbnN0IGNsYXNzZXMgPSB0YXJnZXQuY2xhc3NMaXN0Py5sZW5ndGhcbiAgICA/IGAuJHtBcnJheS5mcm9tKHRhcmdldC5jbGFzc0xpc3QpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpfWBcbiAgICA6IFwiXCI7XG4gIHJldHVybiBgJHt0YWd9JHtpZH0ke2NsYXNzZXN9YCB8fCBcImVsZW1lbnRcIjtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVJlbmRlcmVkU2NhbGUoc3RhZ2UsIHN0YWdlUmVjdCwgZXNjYWxhVmlzdWFsLCBlc2NhbGFBY3RpdmEpIHtcbiAgY29uc3Qgc3RhZ2VXaWR0aCA9XG4gICAgdHlwZW9mIHN0YWdlPy53aWR0aCA9PT0gXCJmdW5jdGlvblwiID8gTnVtYmVyKHN0YWdlLndpZHRoKCkpIDogTnVtYmVyKHN0YWdlPy5hdHRycz8ud2lkdGgpO1xuICBjb25zdCBzdGFnZUhlaWdodCA9XG4gICAgdHlwZW9mIHN0YWdlPy5oZWlnaHQgPT09IFwiZnVuY3Rpb25cIiA/IE51bWJlcihzdGFnZS5oZWlnaHQoKSkgOiBOdW1iZXIoc3RhZ2U/LmF0dHJzPy5oZWlnaHQpO1xuXG4gIGNvbnN0IGZhbGxiYWNrID0gcmVzb2x2ZVNjYWxlKGVzY2FsYVZpc3VhbCwgZXNjYWxhQWN0aXZhKTtcbiAgY29uc3Qgc2NhbGVYID0gTnVtYmVyLmlzRmluaXRlKHN0YWdlV2lkdGgpICYmIHN0YWdlV2lkdGggPiAwXG4gICAgPyBzdGFnZVJlY3Qud2lkdGggLyBzdGFnZVdpZHRoXG4gICAgOiBmYWxsYmFjaztcbiAgY29uc3Qgc2NhbGVZID0gTnVtYmVyLmlzRmluaXRlKHN0YWdlSGVpZ2h0KSAmJiBzdGFnZUhlaWdodCA+IDBcbiAgICA/IHN0YWdlUmVjdC5oZWlnaHQgLyBzdGFnZUhlaWdodFxuICAgIDogZmFsbGJhY2s7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBOdW1iZXIuaXNGaW5pdGUoc2NhbGVYKSAmJiBzY2FsZVggPiAwID8gc2NhbGVYIDogZmFsbGJhY2ssXG4gICAgeTogTnVtYmVyLmlzRmluaXRlKHNjYWxlWSkgJiYgc2NhbGVZID4gMCA/IHNjYWxlWSA6IGZhbGxiYWNrLFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxhYmxlQW5jZXN0b3JzKHN0YXJ0Tm9kZSkge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIFtdO1xuICBpZiAoIShzdGFydE5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIFt3aW5kb3ddO1xuXG4gIGNvbnN0IHRhcmdldHMgPSBbXTtcbiAgbGV0IGN1cnJlbnQgPSBzdGFydE5vZGUucGFyZW50RWxlbWVudDtcblxuICB3aGlsZSAoY3VycmVudCAmJiBjdXJyZW50ICE9PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50KTtcbiAgICBjb25zdCBvdmVyZmxvd1kgPSBTdHJpbmcoc3R5bGUub3ZlcmZsb3dZIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBTdHJpbmcoc3R5bGUub3ZlcmZsb3cgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBpc1Njcm9sbGFibGUgPVxuICAgICAgb3ZlcmZsb3dZID09PSBcImF1dG9cIiB8fFxuICAgICAgb3ZlcmZsb3dZID09PSBcInNjcm9sbFwiIHx8XG4gICAgICBvdmVyZmxvd1kgPT09IFwib3ZlcmxheVwiIHx8XG4gICAgICBvdmVyZmxvdyA9PT0gXCJhdXRvXCIgfHxcbiAgICAgIG92ZXJmbG93ID09PSBcInNjcm9sbFwiIHx8XG4gICAgICBvdmVyZmxvdyA9PT0gXCJvdmVybGF5XCI7XG5cbiAgICBpZiAoaXNTY3JvbGxhYmxlKSB7XG4gICAgICB0YXJnZXRzLnB1c2goY3VycmVudCk7XG4gICAgfVxuXG4gICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgfVxuXG4gIGlmIChkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50KSB7XG4gICAgdGFyZ2V0cy5wdXNoKGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQpO1xuICB9XG4gIHRhcmdldHMucHVzaCh3aW5kb3cpO1xuXG4gIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodGFyZ2V0cykpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VPcHRpb25CdXR0b25Qb3NpdGlvbih7XG4gIGJvdG9uT3BjaW9uZXNSZWYsXG4gIGxheW91dFJvb3RSZWYgPSBudWxsLFxuICBlbGVtZW50UmVmcyxcbiAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcbiAgc3RhZ2VSZWYsXG4gIGVzY2FsYVZpc3VhbCxcbiAgZXNjYWxhQWN0aXZhLFxuICBpc01vYmlsZSA9IGZhbHNlLFxuICBidXR0b25TaXplID0gRkFMTEJBQ0tfQlVUVE9OX1NJWkVfREVTS1RPUCxcbn0pIHtcbiAgY29uc3QgbGFzdExvZ0J5RXZlbnRSZWYgPSB1c2VSZWYoe30pO1xuXG4gIGNvbnN0IGRlYnVnTG9nID0gdXNlQ2FsbGJhY2soKGV2ZW50TmFtZSwgcGF5bG9hZCA9IHt9LCBmb3JjZSA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKCFpc09wdGlvbkJ1dHRvbkRlYnVnRW5hYmxlZCgpKSByZXR1cm47XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHByZXZpb3VzID0gTnVtYmVyKGxhc3RMb2dCeUV2ZW50UmVmLmN1cnJlbnRbZXZlbnROYW1lXSB8fCAwKTtcbiAgICBpZiAoIWZvcmNlICYmIG5vdyAtIHByZXZpb3VzIDwgTE9HX1RIUk9UVExFX01TKSByZXR1cm47XG4gICAgbGFzdExvZ0J5RXZlbnRSZWYuY3VycmVudFtldmVudE5hbWVdID0gbm93O1xuXG4gICAgY29uc29sZS5sb2coYFtPUFRJT04tQlVUVE9OXSAke2V2ZW50TmFtZX1gLCB7XG4gICAgICB0czogbmV3IERhdGUobm93KS50b0lTT1N0cmluZygpLFxuICAgICAgLi4ucGF5bG9hZCxcbiAgICB9KTtcblxuICAgIGlmIChldmVudE5hbWUgPT09IFwicG9zaXRpb25cIikge1xuICAgICAgY29uc3QgYm94WSA9IHBheWxvYWQ/LmJveFN0YWdlPy55ID8/IG51bGw7XG4gICAgICBjb25zdCBhYnNZID0gcGF5bG9hZD8ubm9kZUFic29sdXRlPy55ID8/IG51bGw7XG4gICAgICBjb25zdCBhbmNob3JZID0gcGF5bG9hZD8uYW5jaG9yU3RhZ2VZID8/IG51bGw7XG4gICAgICBjb25zdCBmaW5hbFkgPSBwYXlsb2FkPy5maW5hbD8ueSA/PyBudWxsO1xuICAgICAgY29uc3QgZWxlbWVudFkgPSBwYXlsb2FkPy5lbGVtZW50U2NyZWVuPy55ID8/IG51bGw7XG4gICAgICBjb25zdCBzdGFnZVRvcCA9IHBheWxvYWQ/LnN0YWdlUmVjdD8udG9wID8/IG51bGw7XG4gICAgICBjb25zdCBzb3VyY2UgPSBwYXlsb2FkPy5zb3VyY2UgPz8gXCJ1bmtub3duXCI7XG4gICAgICBjb25zdCB0YXJnZXQgPSBwYXlsb2FkPy5ldmVudFRhcmdldD8ubGFiZWwgPz8gcGF5bG9hZD8uc2Nyb2xsVGFyZ2V0Py5sYWJlbCA/PyBcInVua25vd25cIjtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgW09QVElPTi1CVVRUT05dW1NVTU1BUlldIHNyYz0ke3NvdXJjZX0gdGFyZ2V0PSR7dGFyZ2V0fSBib3hZPSR7Ym94WX0gYWJzWT0ke2Fic1l9IGFuY2hvclk9JHthbmNob3JZfSBlbGVtZW50WT0ke2VsZW1lbnRZfSBmaW5hbFk9JHtmaW5hbFl9IHN0YWdlVG9wPSR7c3RhZ2VUb3B9YFxuICAgICAgKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBvY3VsdGFyQm90b25PcGNpb25lcyA9IHVzZUNhbGxiYWNrKChyZWFzb24gPSBcInVua25vd25cIiwgZXh0cmEgPSBudWxsKSA9PiB7XG4gICAgaWYgKCFib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGRlYnVnTG9nKFxuICAgICAgXCJoaWRlXCIsXG4gICAgICB7XG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgc2VsZWN0ZWRJZDogZWxlbWVudG9zU2VsZWNjaW9uYWRvcz8uWzBdID8/IG51bGwsXG4gICAgICAgIGlzTW9iaWxlLFxuICAgICAgICBleHRyYSxcbiAgICAgIH0sXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH0sIFtib3Rvbk9wY2lvbmVzUmVmLCBkZWJ1Z0xvZywgZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgaXNNb2JpbGVdKTtcblxuICBjb25zdCBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzID0gdXNlQ2FsbGJhY2soKFxuICAgIHNvdXJjZSA9IFwibWFudWFsXCIsXG4gICAgbmF0aXZlRXZlbnQgPSBudWxsLFxuICAgIGV2ZW50VGFyZ2V0TGFiZWwgPSBudWxsXG4gICkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgaWYgKCFib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCAhPT0gMSkge1xuICAgICAgb2N1bHRhckJvdG9uT3BjaW9uZXMoXCJzZWxlY3Rpb24tY291bnRcIiwge1xuICAgICAgICBzb3VyY2UsXG4gICAgICAgIGNvdW50OiBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGVSZWYgPSBlbGVtZW50UmVmcy5jdXJyZW50W2VsZW1lbnRvc1NlbGVjY2lvbmFkb3NbMF1dO1xuICAgIGNvbnN0IHN0YWdlID0gc3RhZ2VSZWYuY3VycmVudDtcbiAgICBpZiAoIW5vZGVSZWYgfHwgIXN0YWdlKSB7XG4gICAgICBvY3VsdGFyQm90b25PcGNpb25lcyhcIm1pc3Npbmctbm9kZS1vci1zdGFnZVwiLCB7XG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgaGFzTm9kZTogQm9vbGVhbihub2RlUmVmKSxcbiAgICAgICAgaGFzU3RhZ2U6IEJvb2xlYW4oc3RhZ2UpLFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJveCA9IG5vZGVSZWYuZ2V0Q2xpZW50UmVjdCh7XG4gICAgICAgIHJlbGF0aXZlVG86IHN0YWdlLFxuICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBub2RlQWJzb2x1dGVQb3NpdGlvbiA9XG4gICAgICAgIHR5cGVvZiBub2RlUmVmLmdldEFic29sdXRlUG9zaXRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gbm9kZVJlZi5nZXRBYnNvbHV0ZVBvc2l0aW9uKClcbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgIHg6IHR5cGVvZiBub2RlUmVmLnggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGVSZWYueCgpIDogbnVsbCxcbiAgICAgICAgICAgIHk6IHR5cGVvZiBub2RlUmVmLnkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGVSZWYueSgpIDogbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgY29uc3Qgc3RhZ2VDb250YWluZXIgPVxuICAgICAgICB0eXBlb2Ygc3RhZ2UuY29udGFpbmVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHN0YWdlLmNvbnRhaW5lcigpXG4gICAgICAgICAgOiBzdGFnZS5nZXRTdGFnZT8uKCk/LmNvbnRhaW5lcj8uKCk7XG4gICAgICBpZiAoIXN0YWdlQ29udGFpbmVyKSB7XG4gICAgICAgIG9jdWx0YXJCb3Rvbk9wY2lvbmVzKFwibWlzc2luZy1zdGFnZS1jb250YWluZXJcIiwgeyBzb3VyY2UgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhZ2VSZWN0ID0gc3RhZ2VDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCByZW5kZXJlZFNjYWxlID0gcmVzb2x2ZVJlbmRlcmVkU2NhbGUoc3RhZ2UsIHN0YWdlUmVjdCwgZXNjYWxhVmlzdWFsLCBlc2NhbGFBY3RpdmEpO1xuICAgICAgY29uc3QgdGFyZ2V0QnV0dG9uU2l6ZSA9XG4gICAgICAgIE51bWJlci5pc0Zpbml0ZShidXR0b25TaXplKSAmJiBidXR0b25TaXplID4gMFxuICAgICAgICAgID8gYnV0dG9uU2l6ZVxuICAgICAgICAgIDogaXNNb2JpbGVcbiAgICAgICAgICAgID8gRkFMTEJBQ0tfQlVUVE9OX1NJWkVfTU9CSUxFXG4gICAgICAgICAgICA6IEZBTExCQUNLX0JVVFRPTl9TSVpFX0RFU0tUT1A7XG4gICAgICBjb25zdCBvdmVybGFwUHggPSB0YXJnZXRCdXR0b25TaXplICogQlVUVE9OX1ZFUlRFWF9PVkVSTEFQX1JBVElPO1xuICAgICAgY29uc3QgbnVkZ2VYID0gaXNNb2JpbGUgPyBCVVRUT05fVkVSVEVYX05VREdFX1hfTU9CSUxFIDogQlVUVE9OX1ZFUlRFWF9OVURHRV9YX0RFU0tUT1A7XG4gICAgICBjb25zdCBudWRnZVkgPSBpc01vYmlsZSA/IEJVVFRPTl9WRVJURVhfTlVER0VfWV9NT0JJTEUgOiBCVVRUT05fVkVSVEVYX05VREdFX1lfREVTS1RPUDtcblxuICAgICAgY29uc3QgYW5jaG9yU3RhZ2VZID1cbiAgICAgICAgTnVtYmVyLmlzRmluaXRlKG5vZGVBYnNvbHV0ZVBvc2l0aW9uPy55KVxuICAgICAgICAgID8gTWF0aC5taW4oYm94LnksIG5vZGVBYnNvbHV0ZVBvc2l0aW9uLnkpXG4gICAgICAgICAgOiBib3gueTtcblxuICAgICAgY29uc3QgZWxlbWVudG9YID0gc3RhZ2VSZWN0LmxlZnQgKyBib3gueCAqIHJlbmRlcmVkU2NhbGUueDtcbiAgICAgIGNvbnN0IGVsZW1lbnRvWSA9IHN0YWdlUmVjdC50b3AgKyBhbmNob3JTdGFnZVkgKiByZW5kZXJlZFNjYWxlLnk7XG4gICAgICBjb25zdCBhbmNob0VsZW1lbnRvID0gTWF0aC5tYXgoMCwgYm94LndpZHRoICogcmVuZGVyZWRTY2FsZS54KTtcbiAgICAgIGNvbnN0IGFsdG9FbGVtZW50byA9IE1hdGgubWF4KDAsIGJveC5oZWlnaHQgKiByZW5kZXJlZFNjYWxlLnkpO1xuICAgICAgY29uc3QgZWxlbWVudG9SaWdodCA9IGVsZW1lbnRvWCArIGFuY2hvRWxlbWVudG87XG5cbiAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgY29uc3Qgdmlld3BvcnRQYWRkaW5nID0gaXNNb2JpbGUgPyA4IDogNDtcblxuICAgICAgY29uc3QgZWxlbWVudG9WaXNpYmxlID1cbiAgICAgICAgZWxlbWVudG9YICsgYW5jaG9FbGVtZW50byA+PSAwICYmXG4gICAgICAgIGVsZW1lbnRvWCA8PSB2aWV3cG9ydFdpZHRoICYmXG4gICAgICAgIGVsZW1lbnRvWSArIGFsdG9FbGVtZW50byA+PSAwICYmXG4gICAgICAgIGVsZW1lbnRvWSA8PSB2aWV3cG9ydEhlaWdodDtcblxuICAgICAgaWYgKCFlbGVtZW50b1Zpc2libGUpIHtcbiAgICAgICAgb2N1bHRhckJvdG9uT3BjaW9uZXMoXCJlbGVtZW50LW91dHNpZGUtdmlld3BvcnRcIiwge1xuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBlbGVtZW50UmVjdDoge1xuICAgICAgICAgICAgbGVmdDogTWF0aC5yb3VuZChlbGVtZW50b1gpLFxuICAgICAgICAgICAgdG9wOiBNYXRoLnJvdW5kKGVsZW1lbnRvWSksXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChhbmNob0VsZW1lbnRvKSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChhbHRvRWxlbWVudG8pLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmlld3BvcnQ6IHsgd2lkdGg6IHZpZXdwb3J0V2lkdGgsIGhlaWdodDogdmlld3BvcnRIZWlnaHQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQW5jbGEgdmlzdWFsOiBjZW50cm8gZGVsIGJvdMOzbiBleGFjdGFtZW50ZSBlbiBlbCB2w6lydGljZSBzdXBlcmlvciBkZXJlY2hvLlxuICAgICAgY29uc3QgcHJlZmVycmVkWCA9IGVsZW1lbnRvUmlnaHQgLSBvdmVybGFwUHggKyBudWRnZVg7XG4gICAgICBjb25zdCBwcmVmZXJyZWRZID0gZWxlbWVudG9ZIC0gb3ZlcmxhcFB4IC0gbnVkZ2VZO1xuXG4gICAgICBjb25zdCBtaW5YID0gdmlld3BvcnRQYWRkaW5nO1xuICAgICAgY29uc3QgbWF4WCA9IE1hdGgubWF4KG1pblgsIHZpZXdwb3J0V2lkdGggLSB0YXJnZXRCdXR0b25TaXplIC0gdmlld3BvcnRQYWRkaW5nKTtcbiAgICAgIGNvbnN0IG1pblkgPSB2aWV3cG9ydFBhZGRpbmc7XG4gICAgICBjb25zdCBtYXhZID0gTWF0aC5tYXgobWluWSwgdmlld3BvcnRIZWlnaHQgLSB0YXJnZXRCdXR0b25TaXplIC0gdmlld3BvcnRQYWRkaW5nKTtcblxuICAgICAgY29uc3QgZmFsbGJhY2tOZWFyVmVydGV4WCA9IGVsZW1lbnRvUmlnaHQgLSB0YXJnZXRCdXR0b25TaXplIC0gMTtcbiAgICAgIGNvbnN0IHVzZUZhbGxiYWNrTmVhclZlcnRleFggPVxuICAgICAgICBwcmVmZXJyZWRYICsgdGFyZ2V0QnV0dG9uU2l6ZSA+IHZpZXdwb3J0V2lkdGggLSB2aWV3cG9ydFBhZGRpbmcgJiZcbiAgICAgICAgZmFsbGJhY2tOZWFyVmVydGV4WCA+PSBtaW5YO1xuICAgICAgY29uc3QgZmFsbGJhY2tOZWFyVmVydGV4WSA9IGVsZW1lbnRvWSArIDE7XG4gICAgICBjb25zdCB1c2VGYWxsYmFja05lYXJWZXJ0ZXhZID0gcHJlZmVycmVkWSA8IG1pblkgJiYgZmFsbGJhY2tOZWFyVmVydGV4WSA8PSBtYXhZO1xuXG4gICAgICBjb25zdCBwbGFjZW1lbnRNb2RlWCA9IHVzZUZhbGxiYWNrTmVhclZlcnRleFggPyBcImZhbGxiYWNrLWxlZnQtb2YtdmVydGV4XCIgOiBcInZlcnRleFwiO1xuICAgICAgY29uc3QgcGxhY2VtZW50TW9kZVkgPSB1c2VGYWxsYmFja05lYXJWZXJ0ZXhZID8gXCJmYWxsYmFjay1iZWxvdy12ZXJ0ZXhcIiA6IFwidmVydGV4XCI7XG4gICAgICBsZXQgYm90b25YID0gdXNlRmFsbGJhY2tOZWFyVmVydGV4WCA/IGZhbGxiYWNrTmVhclZlcnRleFggOiBwcmVmZXJyZWRYO1xuICAgICAgbGV0IGJvdG9uWSA9IHVzZUZhbGxiYWNrTmVhclZlcnRleFkgPyBmYWxsYmFja05lYXJWZXJ0ZXhZIDogcHJlZmVycmVkWTtcblxuXG4gICAgICBib3RvblggPSBjbGFtcChib3RvblgsIG1pblgsIG1heFgpO1xuICAgICAgYm90b25ZID0gY2xhbXAoYm90b25ZLCBtaW5ZLCBtYXhZKTtcblxuICAgICAgY29uc3QgaGFzUmVsYXRpdmVSb290ID0gQm9vbGVhbihsYXlvdXRSb290UmVmPy5jdXJyZW50KTtcbiAgICAgIGxldCByZW5kZXJYID0gYm90b25YO1xuICAgICAgbGV0IHJlbmRlclkgPSBib3Rvblk7XG4gICAgICBpZiAoaGFzUmVsYXRpdmVSb290KSB7XG4gICAgICAgIGNvbnN0IHJvb3RSZWN0ID0gbGF5b3V0Um9vdFJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZW5kZXJYID0gYm90b25YIC0gcm9vdFJlY3QubGVmdDtcbiAgICAgICAgcmVuZGVyWSA9IGJvdG9uWSAtIHJvb3RSZWN0LnRvcDtcbiAgICAgIH1cblxuICAgICAgYm90b25PcGNpb25lc1JlZi5jdXJyZW50LnN0eWxlLmxlZnQgPSBgJHtNYXRoLnJvdW5kKHJlbmRlclgpfXB4YDtcbiAgICAgIGJvdG9uT3BjaW9uZXNSZWYuY3VycmVudC5zdHlsZS50b3AgPSBgJHtNYXRoLnJvdW5kKHJlbmRlclkpfXB4YDtcbiAgICAgIGJvdG9uT3BjaW9uZXNSZWYuY3VycmVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgICAgIGlmIChpc09wdGlvbkJ1dHRvbkRlYnVnRW5hYmxlZCgpKSB7XG4gICAgICAgIGNvbnN0IGRlYnVnU2Nyb2xsVGFyZ2V0ID0gZ2V0U2Nyb2xsYWJsZUFuY2VzdG9ycyhzdGFnZUNvbnRhaW5lcilbMF0gfHwgd2luZG93O1xuICAgICAgICBjb25zdCBzdGFnZVdpZHRoID1cbiAgICAgICAgICB0eXBlb2Ygc3RhZ2U/LndpZHRoID09PSBcImZ1bmN0aW9uXCIgPyBOdW1iZXIoc3RhZ2Uud2lkdGgoKSkgOiBOdW1iZXIoc3RhZ2U/LmF0dHJzPy53aWR0aCk7XG4gICAgICAgIGNvbnN0IHN0YWdlSGVpZ2h0ID1cbiAgICAgICAgICB0eXBlb2Ygc3RhZ2U/LmhlaWdodCA9PT0gXCJmdW5jdGlvblwiID8gTnVtYmVyKHN0YWdlLmhlaWdodCgpKSA6IE51bWJlcihzdGFnZT8uYXR0cnM/LmhlaWdodCk7XG4gICAgICAgIGRlYnVnTG9nKFwicG9zaXRpb25cIiwge1xuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBzZWxlY3RlZElkOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdLFxuICAgICAgICAgIGlzTW9iaWxlLFxuICAgICAgICAgIHBvaW50ZXJUeXBlOiBuYXRpdmVFdmVudD8ucG9pbnRlclR5cGUgPz8gbnVsbCxcbiAgICAgICAgICBuYXRpdmVFdmVudFR5cGU6IG5hdGl2ZUV2ZW50Py50eXBlID8/IG51bGwsXG4gICAgICAgICAgZXZlbnRUYXJnZXQ6IHtcbiAgICAgICAgICAgIGxhYmVsOiBldmVudFRhcmdldExhYmVsIHx8IGRlc2NyaWJlRXZlbnRUYXJnZXQobmF0aXZlRXZlbnQ/LnRhcmdldCksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdGFnZVNpemU6IHtcbiAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIuaXNGaW5pdGUoc3RhZ2VXaWR0aCkgPyBzdGFnZVdpZHRoIDogbnVsbCxcbiAgICAgICAgICAgIGhlaWdodDogTnVtYmVyLmlzRmluaXRlKHN0YWdlSGVpZ2h0KSA/IHN0YWdlSGVpZ2h0IDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0YWdlUmVjdDoge1xuICAgICAgICAgICAgbGVmdDogTWF0aC5yb3VuZChzdGFnZVJlY3QubGVmdCksXG4gICAgICAgICAgICB0b3A6IE1hdGgucm91bmQoc3RhZ2VSZWN0LnRvcCksXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChzdGFnZVJlY3Qud2lkdGgpLFxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKHN0YWdlUmVjdC5oZWlnaHQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVuZGVyZWRTY2FsZToge1xuICAgICAgICAgICAgeDogTnVtYmVyKHJlbmRlcmVkU2NhbGUueC50b0ZpeGVkKDQpKSxcbiAgICAgICAgICAgIHk6IE51bWJlcihyZW5kZXJlZFNjYWxlLnkudG9GaXhlZCg0KSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib3hTdGFnZToge1xuICAgICAgICAgICAgeDogTnVtYmVyKGJveC54LnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgeTogTnVtYmVyKGJveC55LnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgd2lkdGg6IE51bWJlcihib3gud2lkdGgudG9GaXhlZCgyKSksXG4gICAgICAgICAgICBoZWlnaHQ6IE51bWJlcihib3guaGVpZ2h0LnRvRml4ZWQoMikpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbm9kZUFic29sdXRlOiB7XG4gICAgICAgICAgICB4OiBOdW1iZXIuaXNGaW5pdGUobm9kZUFic29sdXRlUG9zaXRpb24/LngpXG4gICAgICAgICAgICAgID8gTnVtYmVyKG5vZGVBYnNvbHV0ZVBvc2l0aW9uLngudG9GaXhlZCgyKSlcbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgeTogTnVtYmVyLmlzRmluaXRlKG5vZGVBYnNvbHV0ZVBvc2l0aW9uPy55KVxuICAgICAgICAgICAgICA/IE51bWJlcihub2RlQWJzb2x1dGVQb3NpdGlvbi55LnRvRml4ZWQoMikpXG4gICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuY2hvclN0YWdlWTogTnVtYmVyKGFuY2hvclN0YWdlWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICBlbGVtZW50U2NyZWVuOiB7XG4gICAgICAgICAgICB4OiBOdW1iZXIoZWxlbWVudG9YLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgeTogTnVtYmVyKGVsZW1lbnRvWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHJpZ2h0OiBOdW1iZXIoZWxlbWVudG9SaWdodC50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIoYW5jaG9FbGVtZW50by50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIGhlaWdodDogTnVtYmVyKGFsdG9FbGVtZW50by50b0ZpeGVkKDIpKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByZWZlcnJlZDoge1xuICAgICAgICAgICAgeDogTnVtYmVyKHByZWZlcnJlZFgudG9GaXhlZCgyKSksXG4gICAgICAgICAgICB5OiBOdW1iZXIocHJlZmVycmVkWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHRhcmdldEJ1dHRvblNpemUsXG4gICAgICAgICAgICBvdmVybGFwUHg6IE51bWJlcihvdmVybGFwUHgudG9GaXhlZCgyKSksXG4gICAgICAgICAgICBudWRnZVgsXG4gICAgICAgICAgICBudWRnZVksXG4gICAgICAgICAgICBmYWxsYmFja05lYXJWZXJ0ZXhYOiBOdW1iZXIoZmFsbGJhY2tOZWFyVmVydGV4WC50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIGZhbGxiYWNrTmVhclZlcnRleFk6IE51bWJlcihmYWxsYmFja05lYXJWZXJ0ZXhZLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgcGxhY2VtZW50TW9kZVgsXG4gICAgICAgICAgICBwbGFjZW1lbnRNb2RlWSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZpbmFsOiB7XG4gICAgICAgICAgICB4OiBOdW1iZXIoYm90b25YLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgeTogTnVtYmVyKGJvdG9uWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHJlbmRlclg6IE51bWJlcihyZW5kZXJYLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgcmVuZGVyWTogTnVtYmVyKHJlbmRlclkudG9GaXhlZCgyKSksXG4gICAgICAgICAgICBwb3NpdGlvbk1vZGU6IGhhc1JlbGF0aXZlUm9vdCA/IFwiYWJzb2x1dGVcIiA6IFwiZml4ZWRcIixcbiAgICAgICAgICAgIG1pblgsXG4gICAgICAgICAgICBtYXhYLFxuICAgICAgICAgICAgbWluWSxcbiAgICAgICAgICAgIG1heFksXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aWV3cG9ydDoge1xuICAgICAgICAgICAgd2lkdGg6IHZpZXdwb3J0V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHZpZXdwb3J0SGVpZ2h0LFxuICAgICAgICAgICAgc2Nyb2xsWDogTnVtYmVyKHdpbmRvdy5zY3JvbGxYIHx8IHdpbmRvdy5wYWdlWE9mZnNldCB8fCAwKSxcbiAgICAgICAgICAgIHNjcm9sbFk6IE51bWJlcih3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQgfHwgMCksXG4gICAgICAgICAgICB2aXN1YWxWaWV3cG9ydDogd2luZG93LnZpc3VhbFZpZXdwb3J0XG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIG9mZnNldFRvcDogTnVtYmVyKHdpbmRvdy52aXN1YWxWaWV3cG9ydC5vZmZzZXRUb3AgfHwgMCksXG4gICAgICAgICAgICAgICAgb2Zmc2V0TGVmdDogTnVtYmVyKHdpbmRvdy52aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0IHx8IDApLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIod2luZG93LnZpc3VhbFZpZXdwb3J0LndpZHRoIHx8IDApLFxuICAgICAgICAgICAgICAgIGhlaWdodDogTnVtYmVyKHdpbmRvdy52aXN1YWxWaWV3cG9ydC5oZWlnaHQgfHwgMCksXG4gICAgICAgICAgICAgICAgc2NhbGU6IE51bWJlcih3aW5kb3cudmlzdWFsVmlld3BvcnQuc2NhbGUgfHwgMSksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2Nyb2xsVGFyZ2V0OiB7XG4gICAgICAgICAgICBsYWJlbDogZGVzY3JpYmVFdmVudFRhcmdldChkZWJ1Z1Njcm9sbFRhcmdldCksXG4gICAgICAgICAgICBzY3JvbGxUb3A6XG4gICAgICAgICAgICAgIGRlYnVnU2Nyb2xsVGFyZ2V0ICYmIFwic2Nyb2xsVG9wXCIgaW4gZGVidWdTY3JvbGxUYXJnZXRcbiAgICAgICAgICAgICAgICA/IE51bWJlcihkZWJ1Z1Njcm9sbFRhcmdldC5zY3JvbGxUb3AgfHwgMClcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciB8fCBcInVua25vd24tZXJyb3JcIik7XG4gICAgICBkZWJ1Z0xvZyhcInBvc2l0aW9uLWVycm9yXCIsIHtcbiAgICAgICAgc291cmNlLFxuICAgICAgICBzZWxlY3RlZElkOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zPy5bMF0gPz8gbnVsbCxcbiAgICAgICAgZXJyb3I6IG1lc3NhZ2UsXG4gICAgICB9LCB0cnVlKTtcbiAgICAgIG9jdWx0YXJCb3Rvbk9wY2lvbmVzKFwiZXhjZXB0aW9uXCIsIHsgc291cmNlLCBlcnJvcjogbWVzc2FnZSB9KTtcbiAgICB9XG4gIH0sIFtcbiAgICBib3Rvbk9wY2lvbmVzUmVmLFxuICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgZWxlbWVudFJlZnMsXG4gICAgc3RhZ2VSZWYsXG4gICAgZXNjYWxhVmlzdWFsLFxuICAgIGVzY2FsYUFjdGl2YSxcbiAgICBkZWJ1Z0xvZyxcbiAgICBvY3VsdGFyQm90b25PcGNpb25lcyxcbiAgICBsYXlvdXRSb290UmVmLFxuICAgIGlzTW9iaWxlLFxuICAgIGJ1dHRvblNpemUsXG4gIF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoICE9PSAxKSB7XG4gICAgICBvY3VsdGFyQm90b25PcGNpb25lcygpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBsZXQgcmFmQSA9IDA7XG4gICAgbGV0IHJhZkIgPSAwO1xuICAgIGxldCBzZXR0bGVSYWYgPSAwO1xuICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICBjb25zdCBzZXR0bGVEdXJhdGlvbk1zID0gaXNNb2JpbGUgPyBQT1NJVElPTl9TRVRUTEVfTVNfTU9CSUxFIDogUE9TSVRJT05fU0VUVExFX01TX0RFU0tUT1A7XG4gICAgY29uc3Qgc2V0dGxlU3RhcnRUcyA9XG4gICAgICB0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgICAgOiBEYXRlLm5vdygpO1xuXG4gICAgY29uc3Qgc2V0dGxlVGljayA9ICgpID0+IHtcbiAgICAgIGlmIChjYW5jZWxsZWQpIHJldHVybjtcbiAgICAgIGNvbnN0IG5vdyA9XG4gICAgICAgIHR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgcGVyZm9ybWFuY2Uubm93ID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICAgICAgOiBEYXRlLm5vdygpO1xuXG4gICAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzKFwic2V0dGxlLWxvb3BcIik7XG4gICAgICBpZiAobm93IC0gc2V0dGxlU3RhcnRUcyA8IHNldHRsZUR1cmF0aW9uTXMpIHtcbiAgICAgICAgc2V0dGxlUmFmID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzZXR0bGVUaWNrKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmFmQSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgcmFmQiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzKFwicmFmLWluaXRcIiwgbnVsbCwgXCJyYWZcIik7XG4gICAgICAgIHNldHRsZVJhZiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2V0dGxlVGljayk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgaWYgKHJhZkEpIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShyYWZBKTtcbiAgICAgIGlmIChyYWZCKSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmQik7XG4gICAgICBpZiAoc2V0dGxlUmFmKSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoc2V0dGxlUmFmKTtcbiAgICB9O1xuICB9LCBbZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcywgb2N1bHRhckJvdG9uT3BjaW9uZXMsIGlzTW9iaWxlXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IHN0YWdlID0gc3RhZ2VSZWYuY3VycmVudD8uZ2V0U3RhZ2U/LigpIHx8IHN0YWdlUmVmLmN1cnJlbnQ7XG4gICAgY29uc3Qgc3RhZ2VDb250YWluZXIgPVxuICAgICAgdHlwZW9mIHN0YWdlPy5jb250YWluZXIgPT09IFwiZnVuY3Rpb25cIiA/IHN0YWdlLmNvbnRhaW5lcigpIDogbnVsbDtcbiAgICBjb25zdCBoYXNSZWxhdGl2ZVJvb3QgPSBCb29sZWFuKGxheW91dFJvb3RSZWY/LmN1cnJlbnQpO1xuXG4gICAgY29uc3Qgc3luY1Bvc2l0aW9uID0gKHNvdXJjZSA9IFwic3luY1wiLCBuYXRpdmVFdmVudCA9IG51bGwpID0+IHtcbiAgICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzKFxuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBuYXRpdmVFdmVudCxcbiAgICAgICAgICBkZXNjcmliZUV2ZW50VGFyZ2V0KG5hdGl2ZUV2ZW50Py50YXJnZXQpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvY3VsdGFyQm90b25PcGNpb25lcyhcInN5bmMtbm8tc2VsZWN0aW9uXCIsIHsgc291cmNlIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBzY3JvbGxUYXJnZXRzID0gaGFzUmVsYXRpdmVSb290XG4gICAgICA/IFtdXG4gICAgICA6IChzdGFnZUNvbnRhaW5lciA/IGdldFNjcm9sbGFibGVBbmNlc3RvcnMoc3RhZ2VDb250YWluZXIpIDogW3dpbmRvd10pO1xuICAgIGNvbnN0IGRldGFjaCA9IFtdO1xuXG4gICAgc2Nyb2xsVGFyZ2V0cy5mb3JFYWNoKCh0YXJnZXQpID0+IHtcbiAgICAgIGlmICghdGFyZ2V0Py5hZGRFdmVudExpc3RlbmVyIHx8ICF0YXJnZXQ/LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHJldHVybjtcbiAgICAgIGNvbnN0IG9uU2Nyb2xsID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN5bmNQb3NpdGlvbihgc2Nyb2xsOiR7ZGVzY3JpYmVFdmVudFRhcmdldChldmVudC50YXJnZXQpfWAsIGV2ZW50KTtcbiAgICAgIH07XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBvblNjcm9sbCwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgZGV0YWNoLnB1c2goKCkgPT4gdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgb25TY3JvbGwpKTtcbiAgICB9KTtcblxuICAgIGlmICghaGFzUmVsYXRpdmVSb290ICYmIHdpbmRvdy52aXN1YWxWaWV3cG9ydCkge1xuICAgICAgY29uc3Qgb25WaXN1YWxWaWV3cG9ydFNjcm9sbCA9IChldmVudCkgPT4ge1xuICAgICAgICBzeW5jUG9zaXRpb24oXCJ2aXN1YWwtdmlld3BvcnQtc2Nyb2xsXCIsIGV2ZW50KTtcbiAgICAgIH07XG4gICAgICBjb25zdCBvblZpc3VhbFZpZXdwb3J0UmVzaXplID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN5bmNQb3NpdGlvbihcInZpc3VhbC12aWV3cG9ydC1yZXNpemVcIiwgZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uVmlzdWFsVmlld3BvcnRTY3JvbGwpO1xuICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgb25WaXN1YWxWaWV3cG9ydFJlc2l6ZSk7XG4gICAgICBkZXRhY2gucHVzaCgoKSA9PiB7XG4gICAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uVmlzdWFsVmlld3BvcnRTY3JvbGwpO1xuICAgICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblZpc3VhbFZpZXdwb3J0UmVzaXplKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG9uUmVzaXplID0gKGV2ZW50KSA9PiB7XG4gICAgICBzeW5jUG9zaXRpb24oXCJ3aW5kb3ctcmVzaXplXCIsIGV2ZW50KTtcbiAgICB9O1xuICAgIGNvbnN0IG9uT3JpZW50YXRpb25DaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHN5bmNQb3NpdGlvbihcIndpbmRvdy1vcmllbnRhdGlvbmNoYW5nZVwiLCBldmVudCk7XG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBvbk9yaWVudGF0aW9uQ2hhbmdlKTtcbiAgICBkZXRhY2gucHVzaCgoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblJlc2l6ZSkpO1xuICAgIGRldGFjaC5wdXNoKCgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgb25PcmllbnRhdGlvbkNoYW5nZSkpO1xuXG4gICAgaWYgKHN0YWdlPy5vbiAmJiBzdGFnZT8ub2ZmKSB7XG4gICAgICBjb25zdCBvblN0YWdlRHJhZ01vdmUgPSAoZXZlbnQpID0+IHN5bmNQb3NpdGlvbihcInN0YWdlLWRyYWdtb3ZlXCIsIGV2ZW50Py5ldnQgfHwgbnVsbCk7XG4gICAgICBjb25zdCBvblN0YWdlRHJhZ0VuZCA9IChldmVudCkgPT4gc3luY1Bvc2l0aW9uKFwic3RhZ2UtZHJhZ2VuZFwiLCBldmVudD8uZXZ0IHx8IG51bGwpO1xuICAgICAgY29uc3Qgb25TdGFnZVRyYW5zZm9ybSA9IChldmVudCkgPT4gc3luY1Bvc2l0aW9uKFwic3RhZ2UtdHJhbnNmb3JtXCIsIGV2ZW50Py5ldnQgfHwgbnVsbCk7XG4gICAgICBjb25zdCBvblN0YWdlVHJhbnNmb3JtRW5kID0gKGV2ZW50KSA9PlxuICAgICAgICBzeW5jUG9zaXRpb24oXCJzdGFnZS10cmFuc2Zvcm1lbmRcIiwgZXZlbnQ/LmV2dCB8fCBudWxsKTtcblxuICAgICAgc3RhZ2Uub24oXCJkcmFnbW92ZS5vcHRpb24tYnV0dG9uXCIsIG9uU3RhZ2VEcmFnTW92ZSk7XG4gICAgICBzdGFnZS5vbihcImRyYWdlbmQub3B0aW9uLWJ1dHRvblwiLCBvblN0YWdlRHJhZ0VuZCk7XG4gICAgICBzdGFnZS5vbihcInRyYW5zZm9ybS5vcHRpb24tYnV0dG9uXCIsIG9uU3RhZ2VUcmFuc2Zvcm0pO1xuICAgICAgc3RhZ2Uub24oXCJ0cmFuc2Zvcm1lbmQub3B0aW9uLWJ1dHRvblwiLCBvblN0YWdlVHJhbnNmb3JtRW5kKTtcbiAgICAgIGRldGFjaC5wdXNoKCgpID0+IHtcbiAgICAgICAgc3RhZ2Uub2ZmKFwiZHJhZ21vdmUub3B0aW9uLWJ1dHRvblwiLCBvblN0YWdlRHJhZ01vdmUpO1xuICAgICAgICBzdGFnZS5vZmYoXCJkcmFnZW5kLm9wdGlvbi1idXR0b25cIiwgb25TdGFnZURyYWdFbmQpO1xuICAgICAgICBzdGFnZS5vZmYoXCJ0cmFuc2Zvcm0ub3B0aW9uLWJ1dHRvblwiLCBvblN0YWdlVHJhbnNmb3JtKTtcbiAgICAgICAgc3RhZ2Uub2ZmKFwidHJhbnNmb3JtZW5kLm9wdGlvbi1idXR0b25cIiwgb25TdGFnZVRyYW5zZm9ybUVuZCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQcmltZXIgc3luYyBpbm1lZGlhdG8gcG9yIHNpIGhheSBjYW1iaW8gZGUgc2Nyb2xsIGVudHJlIHJlbmRlcnMuXG4gICAgc3luY1Bvc2l0aW9uKFwiaW5pdGlhbC1zeW5jXCIpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRldGFjaC5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZuKCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIG5vLW9wIGNsZWFudXAgZ3VhcmRcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW1xuICAgIHN0YWdlUmVmLFxuICAgIGxheW91dFJvb3RSZWYsXG4gICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGgsXG4gICAgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcyxcbiAgICBvY3VsdGFyQm90b25PcGNpb25lcyxcbiAgXSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiRkFMTEJBQ0tfQlVUVE9OX1NJWkVfREVTS1RPUCIsIkZBTExCQUNLX0JVVFRPTl9TSVpFX01PQklMRSIsIkJVVFRPTl9WRVJURVhfT1ZFUkxBUF9SQVRJTyIsIkJVVFRPTl9WRVJURVhfTlVER0VfWF9ERVNLVE9QIiwiQlVUVE9OX1ZFUlRFWF9OVURHRV9ZX0RFU0tUT1AiLCJCVVRUT05fVkVSVEVYX05VREdFX1hfTU9CSUxFIiwiQlVUVE9OX1ZFUlRFWF9OVURHRV9ZX01PQklMRSIsIkxPR19USFJPVFRMRV9NUyIsIlBPU0lUSU9OX1NFVFRMRV9NU19ERVNLVE9QIiwiUE9TSVRJT05fU0VUVExFX01TX01PQklMRSIsImlzT3B0aW9uQnV0dG9uRGVidWdFbmFibGVkIiwid2luZG93IiwiX19EQkdfT1BUSU9OX0JVVFRPTiIsInJlc29sdmVTY2FsZSIsImVzY2FsYVZpc3VhbCIsImVzY2FsYUFjdGl2YSIsIk51bWJlciIsImlzRmluaXRlIiwiY2xhbXAiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsIk1hdGgiLCJkZXNjcmliZUV2ZW50VGFyZ2V0IiwidGFyZ2V0IiwiZG9jdW1lbnQiLCJFbGVtZW50IiwidGFnIiwiU3RyaW5nIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiaWQiLCJjbGFzc2VzIiwiY2xhc3NMaXN0IiwibGVuZ3RoIiwiQXJyYXkiLCJmcm9tIiwic2xpY2UiLCJqb2luIiwicmVzb2x2ZVJlbmRlcmVkU2NhbGUiLCJzdGFnZSIsInN0YWdlUmVjdCIsInN0YWdlV2lkdGgiLCJ3aWR0aCIsImF0dHJzIiwic3RhZ2VIZWlnaHQiLCJoZWlnaHQiLCJmYWxsYmFjayIsInNjYWxlWCIsInNjYWxlWSIsIngiLCJ5IiwiZ2V0U2Nyb2xsYWJsZUFuY2VzdG9ycyIsInN0YXJ0Tm9kZSIsInRhcmdldHMiLCJjdXJyZW50IiwicGFyZW50RWxlbWVudCIsImJvZHkiLCJzdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJvdmVyZmxvd1kiLCJvdmVyZmxvdyIsImlzU2Nyb2xsYWJsZSIsInB1c2giLCJzY3JvbGxpbmdFbGVtZW50IiwiU2V0IiwidXNlT3B0aW9uQnV0dG9uUG9zaXRpb24iLCJib3Rvbk9wY2lvbmVzUmVmIiwibGF5b3V0Um9vdFJlZiIsImVsZW1lbnRSZWZzIiwiZWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsInN0YWdlUmVmIiwiaXNNb2JpbGUiLCJidXR0b25TaXplIiwibGFzdExvZ0J5RXZlbnRSZWYiLCJkZWJ1Z0xvZyIsImV2ZW50TmFtZSIsInBheWxvYWQiLCJmb3JjZSIsIm5vdyIsIkRhdGUiLCJwcmV2aW91cyIsImNvbnNvbGUiLCJsb2ciLCJ0cyIsInRvSVNPU3RyaW5nIiwiYm94WSIsImJveFN0YWdlIiwiYWJzWSIsIm5vZGVBYnNvbHV0ZSIsImFuY2hvclkiLCJhbmNob3JTdGFnZVkiLCJmaW5hbFkiLCJmaW5hbCIsImVsZW1lbnRZIiwiZWxlbWVudFNjcmVlbiIsInN0YWdlVG9wIiwidG9wIiwic291cmNlIiwiZXZlbnRUYXJnZXQiLCJsYWJlbCIsInNjcm9sbFRhcmdldCIsIm9jdWx0YXJCb3Rvbk9wY2lvbmVzIiwicmVhc29uIiwiZXh0cmEiLCJkaXNwbGF5Iiwic2VsZWN0ZWRJZCIsImFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMiLCJuYXRpdmVFdmVudCIsImV2ZW50VGFyZ2V0TGFiZWwiLCJjb3VudCIsIm5vZGVSZWYiLCJoYXNOb2RlIiwiQm9vbGVhbiIsImhhc1N0YWdlIiwiYm94IiwiZ2V0Q2xpZW50UmVjdCIsInJlbGF0aXZlVG8iLCJza2lwU2hhZG93Iiwibm9kZUFic29sdXRlUG9zaXRpb24iLCJnZXRBYnNvbHV0ZVBvc2l0aW9uIiwic3RhZ2VDb250YWluZXIiLCJjb250YWluZXIiLCJnZXRTdGFnZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInJlbmRlcmVkU2NhbGUiLCJ0YXJnZXRCdXR0b25TaXplIiwib3ZlcmxhcFB4IiwibnVkZ2VYIiwibnVkZ2VZIiwiZWxlbWVudG9YIiwibGVmdCIsImVsZW1lbnRvWSIsImFuY2hvRWxlbWVudG8iLCJhbHRvRWxlbWVudG8iLCJlbGVtZW50b1JpZ2h0Iiwidmlld3BvcnRXaWR0aCIsImlubmVyV2lkdGgiLCJ2aWV3cG9ydEhlaWdodCIsImlubmVySGVpZ2h0Iiwidmlld3BvcnRQYWRkaW5nIiwiZWxlbWVudG9WaXNpYmxlIiwiZWxlbWVudFJlY3QiLCJyb3VuZCIsInZpZXdwb3J0IiwicHJlZmVycmVkWCIsInByZWZlcnJlZFkiLCJtaW5YIiwibWF4WCIsIm1pblkiLCJtYXhZIiwiZmFsbGJhY2tOZWFyVmVydGV4WCIsInVzZUZhbGxiYWNrTmVhclZlcnRleFgiLCJmYWxsYmFja05lYXJWZXJ0ZXhZIiwidXNlRmFsbGJhY2tOZWFyVmVydGV4WSIsInBsYWNlbWVudE1vZGVYIiwicGxhY2VtZW50TW9kZVkiLCJib3RvblgiLCJib3RvblkiLCJoYXNSZWxhdGl2ZVJvb3QiLCJyZW5kZXJYIiwicmVuZGVyWSIsInJvb3RSZWN0IiwiZGVidWdTY3JvbGxUYXJnZXQiLCJwb2ludGVyVHlwZSIsIm5hdGl2ZUV2ZW50VHlwZSIsInR5cGUiLCJzdGFnZVNpemUiLCJ0b0ZpeGVkIiwicmlnaHQiLCJwcmVmZXJyZWQiLCJwb3NpdGlvbk1vZGUiLCJzY3JvbGxYIiwicGFnZVhPZmZzZXQiLCJzY3JvbGxZIiwicGFnZVlPZmZzZXQiLCJ2aXN1YWxWaWV3cG9ydCIsIm9mZnNldFRvcCIsIm9mZnNldExlZnQiLCJzY2FsZSIsInNjcm9sbFRvcCIsImVycm9yIiwibWVzc2FnZSIsIkVycm9yIiwidW5kZWZpbmVkIiwicmFmQSIsInJhZkIiLCJzZXR0bGVSYWYiLCJjYW5jZWxsZWQiLCJzZXR0bGVEdXJhdGlvbk1zIiwic2V0dGxlU3RhcnRUcyIsInBlcmZvcm1hbmNlIiwic2V0dGxlVGljayIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwic3luY1Bvc2l0aW9uIiwic2Nyb2xsVGFyZ2V0cyIsImRldGFjaCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uU2Nyb2xsIiwiZXZlbnQiLCJwYXNzaXZlIiwib25WaXN1YWxWaWV3cG9ydFNjcm9sbCIsIm9uVmlzdWFsVmlld3BvcnRSZXNpemUiLCJvblJlc2l6ZSIsIm9uT3JpZW50YXRpb25DaGFuZ2UiLCJvbiIsIm9mZiIsIm9uU3RhZ2VEcmFnTW92ZSIsImV2dCIsIm9uU3RhZ2VEcmFnRW5kIiwib25TdGFnZVRyYW5zZm9ybSIsIm9uU3RhZ2VUcmFuc2Zvcm1FbmQiLCJmbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/overlays/useOptionButtonPosition.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/persistence/useBorradorSync.js":
/*!**************************************************************!*\
  !*** ./src/components/editor/persistence/useBorradorSync.js ***!
  \**************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useBorradorSync)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/firebase */ \"(pages-dir-node)/./src/firebase.js\");\n/* harmony import */ var _lib_monitoring_editorIssueReporter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/monitoring/editorIssueReporter */ \"(pages-dir-node)/./src/lib/monitoring/editorIssueReporter.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, firebase_storage__WEBPACK_IMPORTED_MODULE_2__, _firebase__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, firebase_storage__WEBPACK_IMPORTED_MODULE_2__, _firebase__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/components/editor/persistence/useBorradorSync.js\n\n\n\n\n\nfunction parseStorageLocationFromUrl(value) {\n    if (typeof value !== \"string\" || !/^https?:\\/\\//i.test(value)) return null;\n    try {\n        const url = new URL(value);\n        if (url.hostname === \"firebasestorage.googleapis.com\" || url.hostname.endsWith(\".firebasestorage.app\")) {\n            const match = url.pathname.match(/^\\/v0\\/b\\/([^/]+)\\/o\\/(.+)$/i);\n            if (!match) return null;\n            const bucketName = decodeURIComponent(match[1] || \"\");\n            const path = decodeURIComponent(match[2] || \"\");\n            if (!bucketName || !path) return null;\n            return {\n                bucketName,\n                path\n            };\n        }\n        if (url.hostname === \"storage.googleapis.com\") {\n            const segments = url.pathname.split(\"/\").filter(Boolean);\n            if (segments.length < 2) return null;\n            const bucketName = decodeURIComponent(segments[0] || \"\");\n            const path = decodeURIComponent(segments.slice(1).join(\"/\"));\n            if (!bucketName || !path) return null;\n            return {\n                bucketName,\n                path\n            };\n        }\n        return null;\n    } catch  {\n        return null;\n    }\n}\nasync function refreshStorageUrl(value, cache) {\n    const location = parseStorageLocationFromUrl(value);\n    if (!location) return value;\n    const cacheKey = `${location.bucketName}/${location.path}`;\n    if (cache.has(cacheKey)) {\n        return cache.get(cacheKey);\n    }\n    const hasTokenInUrl = typeof value === \"string\" && /[?&]token=/.test(value);\n    const isUserPrivatePath = /^usuarios\\//i.test(location.path || \"\");\n    // Evita ruido 404 al intentar \"refrescar\" URLs ya tokenizadas de uploads privados.\n    // Si el token sigue vigente, la URL funciona; si vencio, fallara al renderizar sin romper la carga.\n    if (isUserPrivatePath && hasTokenInUrl) {\n        cache.set(cacheKey, value);\n        return value;\n    }\n    try {\n        const gsUrl = `gs://${location.bucketName}/${location.path}`;\n        const freshUrl = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.getDownloadURL)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_2__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_3__.storage, gsUrl));\n        cache.set(cacheKey, freshUrl);\n        return freshUrl;\n    } catch (error) {\n        (0,_lib_monitoring_editorIssueReporter__WEBPACK_IMPORTED_MODULE_4__.pushEditorBreadcrumb)(\"storage-url-refresh-failed\", {\n            code: error?.code || null,\n            bucketName: location.bucketName,\n            path: location.path\n        });\n        // Mantener la URL original evita \"romper\" plantillas compartidas\n        // cuando el SDK no puede refrescar el token por reglas/bucket.\n        cache.set(cacheKey, value);\n        return value;\n    }\n}\nasync function refreshUrlsDeep(value, cache) {\n    if (typeof value === \"string\") {\n        return refreshStorageUrl(value, cache);\n    }\n    if (Array.isArray(value)) {\n        return Promise.all(value.map((item)=>refreshUrlsDeep(item, cache)));\n    }\n    if (value && typeof value === \"object\") {\n        const pairs = await Promise.all(Object.entries(value).map(async ([key, nested])=>{\n            const refreshed = await refreshUrlsDeep(nested, cache);\n            return [\n                key,\n                refreshed\n            ];\n        }));\n        return Object.fromEntries(pairs);\n    }\n    return value;\n}\nfunction isMobileRuntime() {\n    if (true) return false;\n    if (typeof window.matchMedia === \"function\" && window.matchMedia(\"(pointer: coarse)\").matches) {\n        return true;\n    }\n    const w = Number(window.innerWidth || 0);\n    const h = Number(window.innerHeight || 0);\n    const minSide = Math.min(w, h);\n    return minSide > 0 && minSide <= 1024;\n}\n/**\n * Hook de sincronizacion Firestore para el borrador (carga + guardado con debounce).\n * Mantiene la logica original de CanvasEditor.\n */ function useBorradorSync({ slug, userId, // estado actual\nobjetos, secciones, cargado, // setters\nsetObjetos, setSecciones, setCargado, setSeccionActivaId, // refs / helpers que ya existen en CanvasEditor\nignoreNextUpdateRef, stageRef, // helpers de tu layout actual\nnormalizarAltoModo, validarPuntosLinea, // constantes\nALTURA_PANTALLA_EDITOR }) {\n    const skipNextPersistRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    // helper: limpiar undefined recursivo\n    const limpiarUndefined = (obj)=>{\n        if (Array.isArray(obj)) return obj.map(limpiarUndefined);\n        if (obj !== null && typeof obj === \"object\") {\n            const objLimpio = {};\n            Object.keys(obj).forEach((key)=>{\n                const valor = obj[key];\n                if (valor !== undefined) objLimpio[key] = limpiarUndefined(valor);\n            });\n            return objLimpio;\n        }\n        return obj;\n    };\n    // 1) Cargar borrador desde Firestore\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useBorradorSync.useEffect\": ()=>{\n            if (!slug) return;\n            // Al cambiar de borrador, evitamos persistir inmediatamente tras hidratar estado.\n            skipNextPersistRef.current = true;\n            const cargar = {\n                \"useBorradorSync.useEffect.cargar\": async ()=>{\n                    (0,_lib_monitoring_editorIssueReporter__WEBPACK_IMPORTED_MODULE_4__.pushEditorBreadcrumb)(\"borrador-load-start\", {\n                        slug\n                    });\n                    try {\n                        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"borradores\", slug);\n                        const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(ref);\n                        if (snap.exists()) {\n                            const data = snap.data();\n                            const seccionesData = data.secciones || [];\n                            const objetosData = data.objetos || [];\n                            // Refresca URLs de Firebase Storage por si hay tokens vencidos/revocados.\n                            const refreshCache = new Map();\n                            const [seccionesRefrescadas, objetosRefrescados] = await Promise.all([\n                                refreshUrlsDeep(seccionesData, refreshCache),\n                                refreshUrlsDeep(objetosData, refreshCache)\n                            ]);\n                            // Mantengo tu migracion de yNorm para secciones pantalla\n                            const objsMigrados = objetosRefrescados.map({\n                                \"useBorradorSync.useEffect.cargar.objsMigrados\": (o)=>{\n                                    if (!o?.seccionId) return o;\n                                    const sec = seccionesRefrescadas.find({\n                                        \"useBorradorSync.useEffect.cargar.objsMigrados.sec\": (s)=>s.id === o.seccionId\n                                    }[\"useBorradorSync.useEffect.cargar.objsMigrados.sec\"]);\n                                    const modo = normalizarAltoModo(sec?.altoModo);\n                                    if (modo === \"pantalla\") {\n                                        if (!Number.isFinite(o.yNorm)) {\n                                            const yPx = Number.isFinite(o.y) ? o.y : 0;\n                                            const yNorm = Math.max(0, Math.min(1, yPx / ALTURA_PANTALLA_EDITOR));\n                                            return {\n                                                ...o,\n                                                yNorm\n                                            };\n                                        }\n                                    }\n                                    return o;\n                                }\n                            }[\"useBorradorSync.useEffect.cargar.objsMigrados\"]);\n                            setObjetos(objsMigrados);\n                            setSecciones(seccionesRefrescadas);\n                            (0,_lib_monitoring_editorIssueReporter__WEBPACK_IMPORTED_MODULE_4__.pushEditorBreadcrumb)(\"borrador-load-success\", {\n                                slug,\n                                objetos: objsMigrados.length,\n                                secciones: seccionesRefrescadas.length\n                            });\n                            // Setear primera seccion activa si no hay\n                            if (typeof setSeccionActivaId === \"function\" && seccionesRefrescadas.length > 0) {\n                                setSeccionActivaId({\n                                    \"useBorradorSync.useEffect.cargar\": (prev)=>prev || seccionesRefrescadas[0].id\n                                }[\"useBorradorSync.useEffect.cargar\"]);\n                            }\n                        } else {\n                            (0,_lib_monitoring_editorIssueReporter__WEBPACK_IMPORTED_MODULE_4__.pushEditorBreadcrumb)(\"borrador-load-missing\", {\n                                slug\n                            });\n                        }\n                    } catch (error) {\n                        (0,_lib_monitoring_editorIssueReporter__WEBPACK_IMPORTED_MODULE_4__.captureEditorIssue)({\n                            source: \"useBorradorSync.load\",\n                            error,\n                            detail: {\n                                slug\n                            },\n                            severity: \"fatal\"\n                        });\n                    }\n                    setCargado(true);\n                }\n            }[\"useBorradorSync.useEffect.cargar\"];\n            cargar();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"useBorradorSync.useEffect\"], [\n        slug\n    ]);\n    // 2) Guardar en Firestore con debounce cuando cambian objetos/secciones\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useBorradorSync.useEffect\": ()=>{\n            if (!cargado) return;\n            if (!slug) return;\n            // Evita write + thumbnail justo al terminar la carga inicial (causa inestabilidad móvil en borradores pesados).\n            if (skipNextPersistRef.current) {\n                skipNextPersistRef.current = false;\n                return;\n            }\n            if (ignoreNextUpdateRef?.current) {\n                requestAnimationFrame({\n                    \"useBorradorSync.useEffect\": ()=>{\n                        ignoreNextUpdateRef.current = Math.max(0, (ignoreNextUpdateRef.current || 0) - 1);\n                    }\n                }[\"useBorradorSync.useEffect\"]);\n                return;\n            }\n            // No guardar durante resize (logica actual)\n            if (window._resizeData?.isResizing) return;\n            const timeoutId = setTimeout({\n                \"useBorradorSync.useEffect.timeoutId\": async ()=>{\n                    try {\n                        // Validacion: lineas + normalizacion de textos\n                        const objetosValidados = (objetos || []).map({\n                            \"useBorradorSync.useEffect.timeoutId.objetosValidados\": (obj)=>{\n                                if (obj?.tipo === \"forma\" && obj?.figura === \"line\") {\n                                    return validarPuntosLinea(obj);\n                                }\n                                if (obj?.tipo === \"texto\") {\n                                    return {\n                                        ...obj,\n                                        color: obj.colorTexto || obj.color || obj.fill || \"#000000\",\n                                        stroke: obj.stroke || null,\n                                        strokeWidth: obj.strokeWidth || 0,\n                                        shadowColor: obj.shadowColor || null,\n                                        shadowBlur: obj.shadowBlur || 0,\n                                        shadowOffsetX: obj.shadowOffsetX || 0,\n                                        shadowOffsetY: obj.shadowOffsetY || 0\n                                    };\n                                }\n                                return obj;\n                            }\n                        }[\"useBorradorSync.useEffect.timeoutId.objetosValidados\"]);\n                        const seccionesLimpias = limpiarUndefined(secciones);\n                        const objetosLimpios = limpiarUndefined(objetosValidados);\n                        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"borradores\", slug);\n                        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                            objetos: objetosLimpios,\n                            secciones: seccionesLimpias,\n                            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n                        });\n                        // Thumbnail (mantengo tu logica con import dinamico)\n                        if (stageRef?.current && userId && slug) {\n                            // En mobile pesado, generar thumbnail al vuelo puede tumbar la pestaña.\n                            if (isMobileRuntime()) return;\n                            const { guardarThumbnailDesdeStage } = await __webpack_require__.e(/*! import() */ \"_pages-dir-node_src_utils_guardarThumbnail_js\").then(__webpack_require__.bind(__webpack_require__, /*! @/utils/guardarThumbnail */ \"(pages-dir-node)/./src/utils/guardarThumbnail.js\"));\n                            await guardarThumbnailDesdeStage({\n                                stageRef,\n                                uid: userId,\n                                slug\n                            });\n                        }\n                    } catch (error) {\n                        console.error(\"Error guardando en Firebase:\", error);\n                        (0,_lib_monitoring_editorIssueReporter__WEBPACK_IMPORTED_MODULE_4__.captureEditorIssue)({\n                            source: \"useBorradorSync.save\",\n                            error,\n                            detail: {\n                                slug,\n                                objetos: Array.isArray(objetos) ? objetos.length : null,\n                                secciones: Array.isArray(secciones) ? secciones.length : null\n                            },\n                            severity: \"error\"\n                        });\n                    }\n                }\n            }[\"useBorradorSync.useEffect.timeoutId\"], 500);\n            return ({\n                \"useBorradorSync.useEffect\": ()=>clearTimeout(timeoutId)\n            })[\"useBorradorSync.useEffect\"];\n        }\n    }[\"useBorradorSync.useEffect\"], [\n        objetos,\n        secciones,\n        cargado,\n        slug,\n        userId,\n        ignoreNextUpdateRef,\n        stageRef,\n        validarPuntosLinea\n    ]);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9wZXJzaXN0ZW5jZS91c2VCb3JyYWRvclN5bmMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsdURBQXVEO0FBQ2I7QUFDbUM7QUFDUjtBQUM1QjtBQUlLO0FBRTlDLFNBQVNhLDRCQUE0QkMsS0FBSztJQUN4QyxJQUFJLE9BQU9BLFVBQVUsWUFBWSxDQUFDLGdCQUFnQkMsSUFBSSxDQUFDRCxRQUFRLE9BQU87SUFFdEUsSUFBSTtRQUNGLE1BQU1FLE1BQU0sSUFBSUMsSUFBSUg7UUFFcEIsSUFDRUUsSUFBSUUsUUFBUSxLQUFLLG9DQUNqQkYsSUFBSUUsUUFBUSxDQUFDQyxRQUFRLENBQUMseUJBQ3RCO1lBQ0EsTUFBTUMsUUFBUUosSUFBSUssUUFBUSxDQUFDRCxLQUFLLENBQUM7WUFDakMsSUFBSSxDQUFDQSxPQUFPLE9BQU87WUFFbkIsTUFBTUUsYUFBYUMsbUJBQW1CSCxLQUFLLENBQUMsRUFBRSxJQUFJO1lBQ2xELE1BQU1JLE9BQU9ELG1CQUFtQkgsS0FBSyxDQUFDLEVBQUUsSUFBSTtZQUM1QyxJQUFJLENBQUNFLGNBQWMsQ0FBQ0UsTUFBTSxPQUFPO1lBQ2pDLE9BQU87Z0JBQUVGO2dCQUFZRTtZQUFLO1FBQzVCO1FBRUEsSUFBSVIsSUFBSUUsUUFBUSxLQUFLLDBCQUEwQjtZQUM3QyxNQUFNTyxXQUFXVCxJQUFJSyxRQUFRLENBQUNLLEtBQUssQ0FBQyxLQUFLQyxNQUFNLENBQUNDO1lBQ2hELElBQUlILFNBQVNJLE1BQU0sR0FBRyxHQUFHLE9BQU87WUFFaEMsTUFBTVAsYUFBYUMsbUJBQW1CRSxRQUFRLENBQUMsRUFBRSxJQUFJO1lBQ3JELE1BQU1ELE9BQU9ELG1CQUFtQkUsU0FBU0ssS0FBSyxDQUFDLEdBQUdDLElBQUksQ0FBQztZQUN2RCxJQUFJLENBQUNULGNBQWMsQ0FBQ0UsTUFBTSxPQUFPO1lBQ2pDLE9BQU87Z0JBQUVGO2dCQUFZRTtZQUFLO1FBQzVCO1FBRUEsT0FBTztJQUNULEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRUEsZUFBZVEsa0JBQWtCbEIsS0FBSyxFQUFFbUIsS0FBSztJQUMzQyxNQUFNQyxXQUFXckIsNEJBQTRCQztJQUM3QyxJQUFJLENBQUNvQixVQUFVLE9BQU9wQjtJQUV0QixNQUFNcUIsV0FBVyxHQUFHRCxTQUFTWixVQUFVLENBQUMsQ0FBQyxFQUFFWSxTQUFTVixJQUFJLEVBQUU7SUFFMUQsSUFBSVMsTUFBTUcsR0FBRyxDQUFDRCxXQUFXO1FBQ3ZCLE9BQU9GLE1BQU1JLEdBQUcsQ0FBQ0Y7SUFDbkI7SUFFQSxNQUFNRyxnQkFDSixPQUFPeEIsVUFBVSxZQUNqQixhQUFhQyxJQUFJLENBQUNEO0lBQ3BCLE1BQU15QixvQkFBb0IsZUFBZXhCLElBQUksQ0FBQ21CLFNBQVNWLElBQUksSUFBSTtJQUUvRCxtRkFBbUY7SUFDbkYsb0dBQW9HO0lBQ3BHLElBQUllLHFCQUFxQkQsZUFBZTtRQUN0Q0wsTUFBTU8sR0FBRyxDQUFDTCxVQUFVckI7UUFDcEIsT0FBT0E7SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNMkIsUUFBUSxDQUFDLEtBQUssRUFBRVAsU0FBU1osVUFBVSxDQUFDLENBQUMsRUFBRVksU0FBU1YsSUFBSSxFQUFFO1FBQzVELE1BQU1rQixXQUFXLE1BQU1wQyxnRUFBY0EsQ0FBQ0UscURBQVVBLENBQUNFLDhDQUFPQSxFQUFFK0I7UUFDMURSLE1BQU1PLEdBQUcsQ0FBQ0wsVUFBVU87UUFDcEIsT0FBT0E7SUFDVCxFQUFFLE9BQU9DLE9BQU87UUFDZC9CLHlGQUFvQkEsQ0FBQyw4QkFBOEI7WUFDakRnQyxNQUFNRCxPQUFPQyxRQUFRO1lBQ3JCdEIsWUFBWVksU0FBU1osVUFBVTtZQUMvQkUsTUFBTVUsU0FBU1YsSUFBSTtRQUNyQjtRQUNBLGlFQUFpRTtRQUNqRSwrREFBK0Q7UUFDL0RTLE1BQU1PLEdBQUcsQ0FBQ0wsVUFBVXJCO1FBQ3BCLE9BQU9BO0lBQ1Q7QUFDRjtBQUVBLGVBQWUrQixnQkFBZ0IvQixLQUFLLEVBQUVtQixLQUFLO0lBQ3pDLElBQUksT0FBT25CLFVBQVUsVUFBVTtRQUM3QixPQUFPa0Isa0JBQWtCbEIsT0FBT21CO0lBQ2xDO0lBRUEsSUFBSWEsTUFBTUMsT0FBTyxDQUFDakMsUUFBUTtRQUN4QixPQUFPa0MsUUFBUUMsR0FBRyxDQUFDbkMsTUFBTW9DLEdBQUcsQ0FBQyxDQUFDQyxPQUFTTixnQkFBZ0JNLE1BQU1sQjtJQUMvRDtJQUVBLElBQUluQixTQUFTLE9BQU9BLFVBQVUsVUFBVTtRQUN0QyxNQUFNc0MsUUFBUSxNQUFNSixRQUFRQyxHQUFHLENBQzdCSSxPQUFPQyxPQUFPLENBQUN4QyxPQUFPb0MsR0FBRyxDQUFDLE9BQU8sQ0FBQ0ssS0FBS0MsT0FBTztZQUM1QyxNQUFNQyxZQUFZLE1BQU1aLGdCQUFnQlcsUUFBUXZCO1lBQ2hELE9BQU87Z0JBQUNzQjtnQkFBS0U7YUFBVTtRQUN6QjtRQUVGLE9BQU9KLE9BQU9LLFdBQVcsQ0FBQ047SUFDNUI7SUFFQSxPQUFPdEM7QUFDVDtBQUVBLFNBQVM2QztJQUNQLElBQUksSUFBNkIsRUFBRSxPQUFPO0lBQzFDLElBQUksT0FBT0MsT0FBT0MsVUFBVSxLQUFLLGNBQWNELE9BQU9DLFVBQVUsQ0FBQyxxQkFBcUJDLE9BQU8sRUFBRTtRQUM3RixPQUFPO0lBQ1Q7SUFDQSxNQUFNQyxJQUFJQyxPQUFPSixPQUFPSyxVQUFVLElBQUk7SUFDdEMsTUFBTUMsSUFBSUYsT0FBT0osT0FBT08sV0FBVyxJQUFJO0lBQ3ZDLE1BQU1DLFVBQVVDLEtBQUtDLEdBQUcsQ0FBQ1AsR0FBR0c7SUFDNUIsT0FBT0UsVUFBVSxLQUFLQSxXQUFXO0FBQ25DO0FBRUE7OztDQUdDLEdBQ2MsU0FBU0csZ0JBQWdCLEVBQ3RDQyxJQUFJLEVBQ0pDLE1BQU0sRUFFTixnQkFBZ0I7QUFDaEJDLE9BQU8sRUFDUEMsU0FBUyxFQUNUQyxPQUFPLEVBRVAsVUFBVTtBQUNWQyxVQUFVLEVBQ1ZDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyxrQkFBa0IsRUFFbEIsZ0RBQWdEO0FBQ2hEQyxtQkFBbUIsRUFDbkJDLFFBQVEsRUFFUiw4QkFBOEI7QUFDOUJDLGtCQUFrQixFQUNsQkMsa0JBQWtCLEVBRWxCLGFBQWE7QUFDYkMsc0JBQXNCLEVBQ3ZCO0lBQ0MsTUFBTUMscUJBQXFCckYsNkNBQU1BLENBQUM7SUFFbEMsc0NBQXNDO0lBQ3RDLE1BQU1zRixtQkFBbUIsQ0FBQ0M7UUFDeEIsSUFBSTFDLE1BQU1DLE9BQU8sQ0FBQ3lDLE1BQU0sT0FBT0EsSUFBSXRDLEdBQUcsQ0FBQ3FDO1FBRXZDLElBQUlDLFFBQVEsUUFBUSxPQUFPQSxRQUFRLFVBQVU7WUFDM0MsTUFBTUMsWUFBWSxDQUFDO1lBQ25CcEMsT0FBT3FDLElBQUksQ0FBQ0YsS0FBS0csT0FBTyxDQUFDLENBQUNwQztnQkFDeEIsTUFBTXFDLFFBQVFKLEdBQUcsQ0FBQ2pDLElBQUk7Z0JBQ3RCLElBQUlxQyxVQUFVQyxXQUFXSixTQUFTLENBQUNsQyxJQUFJLEdBQUdnQyxpQkFBaUJLO1lBQzdEO1lBQ0EsT0FBT0g7UUFDVDtRQUVBLE9BQU9EO0lBQ1Q7SUFFQSxxQ0FBcUM7SUFDckN4RixnREFBU0E7cUNBQUM7WUFDUixJQUFJLENBQUN3RSxNQUFNO1lBRVgsa0ZBQWtGO1lBQ2xGYyxtQkFBbUJRLE9BQU8sR0FBRztZQUU3QixNQUFNQztvREFBUztvQkFDYm5GLHlGQUFvQkEsQ0FBQyx1QkFBdUI7d0JBQUU0RDtvQkFBSztvQkFFbkQsSUFBSTt3QkFDRixNQUFNakUsTUFBTUwsdURBQUdBLENBQUNPLHlDQUFFQSxFQUFFLGNBQWMrRDt3QkFDbEMsTUFBTXdCLE9BQU8sTUFBTTdGLDBEQUFNQSxDQUFDSTt3QkFFMUIsSUFBSXlGLEtBQUtDLE1BQU0sSUFBSTs0QkFDakIsTUFBTUMsT0FBT0YsS0FBS0UsSUFBSTs0QkFDdEIsTUFBTUMsZ0JBQWdCRCxLQUFLdkIsU0FBUyxJQUFJLEVBQUU7NEJBQzFDLE1BQU15QixjQUFjRixLQUFLeEIsT0FBTyxJQUFJLEVBQUU7NEJBRXRDLDBFQUEwRTs0QkFDMUUsTUFBTTJCLGVBQWUsSUFBSUM7NEJBQ3pCLE1BQU0sQ0FBQ0Msc0JBQXNCQyxtQkFBbUIsR0FBRyxNQUFNeEQsUUFBUUMsR0FBRyxDQUFDO2dDQUNuRUosZ0JBQWdCc0QsZUFBZUU7Z0NBQy9CeEQsZ0JBQWdCdUQsYUFBYUM7NkJBQzlCOzRCQUVELHlEQUF5RDs0QkFDekQsTUFBTUksZUFBZUQsbUJBQW1CdEQsR0FBRztpRkFBQyxDQUFDd0Q7b0NBQzNDLElBQUksQ0FBQ0EsR0FBR0MsV0FBVyxPQUFPRDtvQ0FFMUIsTUFBTUUsTUFBTUwscUJBQXFCTSxJQUFJOzZGQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS0wsRUFBRUMsU0FBUzs7b0NBQ2pFLE1BQU1LLE9BQU83QixtQkFBbUJ5QixLQUFLSztvQ0FFckMsSUFBSUQsU0FBUyxZQUFZO3dDQUN2QixJQUFJLENBQUNoRCxPQUFPa0QsUUFBUSxDQUFDUixFQUFFUyxLQUFLLEdBQUc7NENBQzdCLE1BQU1DLE1BQU1wRCxPQUFPa0QsUUFBUSxDQUFDUixFQUFFVyxDQUFDLElBQUlYLEVBQUVXLENBQUMsR0FBRzs0Q0FDekMsTUFBTUYsUUFBUTlDLEtBQUtpRCxHQUFHLENBQUMsR0FBR2pELEtBQUtDLEdBQUcsQ0FBQyxHQUFHOEMsTUFBTS9COzRDQUM1QyxPQUFPO2dEQUFFLEdBQUdxQixDQUFDO2dEQUFFUzs0Q0FBTTt3Q0FDdkI7b0NBQ0Y7b0NBRUEsT0FBT1Q7Z0NBQ1Q7OzRCQUVBN0IsV0FBVzRCOzRCQUNYM0IsYUFBYXlCOzRCQUViM0YseUZBQW9CQSxDQUFDLHlCQUF5QjtnQ0FDNUM0RDtnQ0FDQUUsU0FBUytCLGFBQWE1RSxNQUFNO2dDQUM1QjhDLFdBQVc0QixxQkFBcUIxRSxNQUFNOzRCQUN4Qzs0QkFFQSwwQ0FBMEM7NEJBQzFDLElBQUksT0FBT21ELHVCQUF1QixjQUFjdUIscUJBQXFCMUUsTUFBTSxHQUFHLEdBQUc7Z0NBQy9FbUQ7d0VBQW1CLENBQUN1QyxPQUFTQSxRQUFRaEIsb0JBQW9CLENBQUMsRUFBRSxDQUFDUSxFQUFFOzs0QkFDakU7d0JBQ0YsT0FBTzs0QkFDTG5HLHlGQUFvQkEsQ0FBQyx5QkFBeUI7Z0NBQUU0RDs0QkFBSzt3QkFDdkQ7b0JBQ0YsRUFBRSxPQUFPN0IsT0FBTzt3QkFDZGhDLHVGQUFrQkEsQ0FBQzs0QkFDakI2RyxRQUFROzRCQUNSN0U7NEJBQ0E4RSxRQUFRO2dDQUFFakQ7NEJBQUs7NEJBQ2ZrRCxVQUFVO3dCQUNaO29CQUNGO29CQUVBM0MsV0FBVztnQkFDYjs7WUFFQWdCO1FBQ0EsdURBQXVEO1FBQ3pEO29DQUFHO1FBQUN2QjtLQUFLO0lBRVQsd0VBQXdFO0lBQ3hFeEUsZ0RBQVNBO3FDQUFDO1lBQ1IsSUFBSSxDQUFDNEUsU0FBUztZQUNkLElBQUksQ0FBQ0osTUFBTTtZQUVYLGdIQUFnSDtZQUNoSCxJQUFJYyxtQkFBbUJRLE9BQU8sRUFBRTtnQkFDOUJSLG1CQUFtQlEsT0FBTyxHQUFHO2dCQUM3QjtZQUNGO1lBRUEsSUFBSWIscUJBQXFCYSxTQUFTO2dCQUNoQzZCO2lEQUFzQjt3QkFDcEIxQyxvQkFBb0JhLE9BQU8sR0FBR3pCLEtBQUtpRCxHQUFHLENBQUMsR0FBRyxDQUFDckMsb0JBQW9CYSxPQUFPLElBQUksS0FBSztvQkFDakY7O2dCQUNBO1lBQ0Y7WUFFQSw0Q0FBNEM7WUFDNUMsSUFBSWxDLE9BQU9nRSxXQUFXLEVBQUVDLFlBQVk7WUFFcEMsTUFBTUMsWUFBWUM7dURBQVc7b0JBQzNCLElBQUk7d0JBQ0YsK0NBQStDO3dCQUMvQyxNQUFNQyxtQkFBbUIsQ0FBQ3RELFdBQVcsRUFBRSxFQUFFeEIsR0FBRztvRkFBQyxDQUFDc0M7Z0NBQzVDLElBQUlBLEtBQUt5QyxTQUFTLFdBQVd6QyxLQUFLMEMsV0FBVyxRQUFRO29DQUNuRCxPQUFPOUMsbUJBQW1CSTtnQ0FDNUI7Z0NBRUEsSUFBSUEsS0FBS3lDLFNBQVMsU0FBUztvQ0FDekIsT0FBTzt3Q0FDTCxHQUFHekMsR0FBRzt3Q0FDTjJDLE9BQU8zQyxJQUFJNEMsVUFBVSxJQUFJNUMsSUFBSTJDLEtBQUssSUFBSTNDLElBQUk2QyxJQUFJLElBQUk7d0NBQ2xEQyxRQUFROUMsSUFBSThDLE1BQU0sSUFBSTt3Q0FDdEJDLGFBQWEvQyxJQUFJK0MsV0FBVyxJQUFJO3dDQUNoQ0MsYUFBYWhELElBQUlnRCxXQUFXLElBQUk7d0NBQ2hDQyxZQUFZakQsSUFBSWlELFVBQVUsSUFBSTt3Q0FDOUJDLGVBQWVsRCxJQUFJa0QsYUFBYSxJQUFJO3dDQUNwQ0MsZUFBZW5ELElBQUltRCxhQUFhLElBQUk7b0NBQ3RDO2dDQUNGO2dDQUVBLE9BQU9uRDs0QkFDVDs7d0JBRUEsTUFBTW9ELG1CQUFtQnJELGlCQUFpQlo7d0JBQzFDLE1BQU1rRSxpQkFBaUJ0RCxpQkFBaUJ5Qzt3QkFFeEMsTUFBTXpILE1BQU1MLHVEQUFHQSxDQUFDTyx5Q0FBRUEsRUFBRSxjQUFjK0Q7d0JBQ2xDLE1BQU1wRSw2REFBU0EsQ0FBQ0csS0FBSzs0QkFDbkJtRSxTQUFTbUU7NEJBQ1RsRSxXQUFXaUU7NEJBQ1hFLGVBQWV6SSxtRUFBZUE7d0JBQ2hDO3dCQUVBLHFEQUFxRDt3QkFDckQsSUFBSTZFLFVBQVVZLFdBQVdyQixVQUFVRCxNQUFNOzRCQUN2Qyx3RUFBd0U7NEJBQ3hFLElBQUliLG1CQUFtQjs0QkFDdkIsTUFBTSxFQUFFb0YsMEJBQTBCLEVBQUUsR0FBRyxNQUFNLDhOQUFrQzs0QkFDL0UsTUFBTUEsMkJBQTJCO2dDQUFFN0Q7Z0NBQVU4RCxLQUFLdkU7Z0NBQVFEOzRCQUFLO3dCQUNqRTtvQkFDRixFQUFFLE9BQU83QixPQUFPO3dCQUNkc0csUUFBUXRHLEtBQUssQ0FBQyxnQ0FBZ0NBO3dCQUM5Q2hDLHVGQUFrQkEsQ0FBQzs0QkFDakI2RyxRQUFROzRCQUNSN0U7NEJBQ0E4RSxRQUFRO2dDQUNOakQ7Z0NBQ0FFLFNBQVM1QixNQUFNQyxPQUFPLENBQUMyQixXQUFXQSxRQUFRN0MsTUFBTSxHQUFHO2dDQUNuRDhDLFdBQVc3QixNQUFNQyxPQUFPLENBQUM0QixhQUFhQSxVQUFVOUMsTUFBTSxHQUFHOzRCQUMzRDs0QkFDQTZGLFVBQVU7d0JBQ1o7b0JBQ0Y7Z0JBQ0Y7c0RBQUc7WUFFSDs2Q0FBTyxJQUFNd0IsYUFBYXBCOztRQUM1QjtvQ0FBRztRQUFDcEQ7UUFBU0M7UUFBV0M7UUFBU0o7UUFBTUM7UUFBUVE7UUFBcUJDO1FBQVVFO0tBQW1CO0FBQ25HIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxccGVyc2lzdGVuY2VcXHVzZUJvcnJhZG9yU3luYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9lZGl0b3IvcGVyc2lzdGVuY2UvdXNlQm9ycmFkb3JTeW5jLmpzXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgZG9jLCBnZXREb2MsIHVwZGF0ZURvYywgc2VydmVyVGltZXN0YW1wIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgZ2V0RG93bmxvYWRVUkwsIHJlZiBhcyBzdG9yYWdlUmVmIH0gZnJvbSBcImZpcmViYXNlL3N0b3JhZ2VcIjtcbmltcG9ydCB7IGRiLCBzdG9yYWdlIH0gZnJvbSBcIkAvZmlyZWJhc2VcIjtcbmltcG9ydCB7XG4gIGNhcHR1cmVFZGl0b3JJc3N1ZSxcbiAgcHVzaEVkaXRvckJyZWFkY3J1bWIsXG59IGZyb20gXCJAL2xpYi9tb25pdG9yaW5nL2VkaXRvcklzc3VlUmVwb3J0ZXJcIjtcblxuZnVuY3Rpb24gcGFyc2VTdG9yYWdlTG9jYXRpb25Gcm9tVXJsKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIgfHwgIS9eaHR0cHM/OlxcL1xcLy9pLnRlc3QodmFsdWUpKSByZXR1cm4gbnVsbDtcblxuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodmFsdWUpO1xuXG4gICAgaWYgKFxuICAgICAgdXJsLmhvc3RuYW1lID09PSBcImZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbVwiIHx8XG4gICAgICB1cmwuaG9zdG5hbWUuZW5kc1dpdGgoXCIuZmlyZWJhc2VzdG9yYWdlLmFwcFwiKVxuICAgICkge1xuICAgICAgY29uc3QgbWF0Y2ggPSB1cmwucGF0aG5hbWUubWF0Y2goL15cXC92MFxcL2JcXC8oW14vXSspXFwvb1xcLyguKykkL2kpO1xuICAgICAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IGJ1Y2tldE5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0gfHwgXCJcIik7XG4gICAgICBjb25zdCBwYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzJdIHx8IFwiXCIpO1xuICAgICAgaWYgKCFidWNrZXROYW1lIHx8ICFwYXRoKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB7IGJ1Y2tldE5hbWUsIHBhdGggfTtcbiAgICB9XG5cbiAgICBpZiAodXJsLmhvc3RuYW1lID09PSBcInN0b3JhZ2UuZ29vZ2xlYXBpcy5jb21cIikge1xuICAgICAgY29uc3Qgc2VnbWVudHMgPSB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIGlmIChzZWdtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3QgYnVja2V0TmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudChzZWdtZW50c1swXSB8fCBcIlwiKTtcbiAgICAgIGNvbnN0IHBhdGggPSBkZWNvZGVVUklDb21wb25lbnQoc2VnbWVudHMuc2xpY2UoMSkuam9pbihcIi9cIikpO1xuICAgICAgaWYgKCFidWNrZXROYW1lIHx8ICFwYXRoKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB7IGJ1Y2tldE5hbWUsIHBhdGggfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaFN0b3JhZ2VVcmwodmFsdWUsIGNhY2hlKSB7XG4gIGNvbnN0IGxvY2F0aW9uID0gcGFyc2VTdG9yYWdlTG9jYXRpb25Gcm9tVXJsKHZhbHVlKTtcbiAgaWYgKCFsb2NhdGlvbikgcmV0dXJuIHZhbHVlO1xuXG4gIGNvbnN0IGNhY2hlS2V5ID0gYCR7bG9jYXRpb24uYnVja2V0TmFtZX0vJHtsb2NhdGlvbi5wYXRofWA7XG5cbiAgaWYgKGNhY2hlLmhhcyhjYWNoZUtleSkpIHtcbiAgICByZXR1cm4gY2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgfVxuXG4gIGNvbnN0IGhhc1Rva2VuSW5VcmwgPVxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgIC9bPyZddG9rZW49Ly50ZXN0KHZhbHVlKTtcbiAgY29uc3QgaXNVc2VyUHJpdmF0ZVBhdGggPSAvXnVzdWFyaW9zXFwvL2kudGVzdChsb2NhdGlvbi5wYXRoIHx8IFwiXCIpO1xuXG4gIC8vIEV2aXRhIHJ1aWRvIDQwNCBhbCBpbnRlbnRhciBcInJlZnJlc2NhclwiIFVSTHMgeWEgdG9rZW5pemFkYXMgZGUgdXBsb2FkcyBwcml2YWRvcy5cbiAgLy8gU2kgZWwgdG9rZW4gc2lndWUgdmlnZW50ZSwgbGEgVVJMIGZ1bmNpb25hOyBzaSB2ZW5jaW8sIGZhbGxhcmEgYWwgcmVuZGVyaXphciBzaW4gcm9tcGVyIGxhIGNhcmdhLlxuICBpZiAoaXNVc2VyUHJpdmF0ZVBhdGggJiYgaGFzVG9rZW5JblVybCkge1xuICAgIGNhY2hlLnNldChjYWNoZUtleSwgdmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZ3NVcmwgPSBgZ3M6Ly8ke2xvY2F0aW9uLmJ1Y2tldE5hbWV9LyR7bG9jYXRpb24ucGF0aH1gO1xuICAgIGNvbnN0IGZyZXNoVXJsID0gYXdhaXQgZ2V0RG93bmxvYWRVUkwoc3RvcmFnZVJlZihzdG9yYWdlLCBnc1VybCkpO1xuICAgIGNhY2hlLnNldChjYWNoZUtleSwgZnJlc2hVcmwpO1xuICAgIHJldHVybiBmcmVzaFVybDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBwdXNoRWRpdG9yQnJlYWRjcnVtYihcInN0b3JhZ2UtdXJsLXJlZnJlc2gtZmFpbGVkXCIsIHtcbiAgICAgIGNvZGU6IGVycm9yPy5jb2RlIHx8IG51bGwsXG4gICAgICBidWNrZXROYW1lOiBsb2NhdGlvbi5idWNrZXROYW1lLFxuICAgICAgcGF0aDogbG9jYXRpb24ucGF0aCxcbiAgICB9KTtcbiAgICAvLyBNYW50ZW5lciBsYSBVUkwgb3JpZ2luYWwgZXZpdGEgXCJyb21wZXJcIiBwbGFudGlsbGFzIGNvbXBhcnRpZGFzXG4gICAgLy8gY3VhbmRvIGVsIFNESyBubyBwdWVkZSByZWZyZXNjYXIgZWwgdG9rZW4gcG9yIHJlZ2xhcy9idWNrZXQuXG4gICAgY2FjaGUuc2V0KGNhY2hlS2V5LCB2YWx1ZSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hVcmxzRGVlcCh2YWx1ZSwgY2FjaGUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiByZWZyZXNoU3RvcmFnZVVybCh2YWx1ZSwgY2FjaGUpO1xuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHZhbHVlLm1hcCgoaXRlbSkgPT4gcmVmcmVzaFVybHNEZWVwKGl0ZW0sIGNhY2hlKSkpO1xuICB9XG5cbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IHBhaXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKGFzeW5jIChba2V5LCBuZXN0ZWRdKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hlZCA9IGF3YWl0IHJlZnJlc2hVcmxzRGVlcChuZXN0ZWQsIGNhY2hlKTtcbiAgICAgICAgcmV0dXJuIFtrZXksIHJlZnJlc2hlZF07XG4gICAgICB9KVxuICAgICk7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhwYWlycyk7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGlzTW9iaWxlUnVudGltZSgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cubWF0Y2hNZWRpYSA9PT0gXCJmdW5jdGlvblwiICYmIHdpbmRvdy5tYXRjaE1lZGlhKFwiKHBvaW50ZXI6IGNvYXJzZSlcIikubWF0Y2hlcykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IHcgPSBOdW1iZXIod2luZG93LmlubmVyV2lkdGggfHwgMCk7XG4gIGNvbnN0IGggPSBOdW1iZXIod2luZG93LmlubmVySGVpZ2h0IHx8IDApO1xuICBjb25zdCBtaW5TaWRlID0gTWF0aC5taW4odywgaCk7XG4gIHJldHVybiBtaW5TaWRlID4gMCAmJiBtaW5TaWRlIDw9IDEwMjQ7XG59XG5cbi8qKlxuICogSG9vayBkZSBzaW5jcm9uaXphY2lvbiBGaXJlc3RvcmUgcGFyYSBlbCBib3JyYWRvciAoY2FyZ2EgKyBndWFyZGFkbyBjb24gZGVib3VuY2UpLlxuICogTWFudGllbmUgbGEgbG9naWNhIG9yaWdpbmFsIGRlIENhbnZhc0VkaXRvci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQm9ycmFkb3JTeW5jKHtcbiAgc2x1ZyxcbiAgdXNlcklkLFxuXG4gIC8vIGVzdGFkbyBhY3R1YWxcbiAgb2JqZXRvcyxcbiAgc2VjY2lvbmVzLFxuICBjYXJnYWRvLFxuXG4gIC8vIHNldHRlcnNcbiAgc2V0T2JqZXRvcyxcbiAgc2V0U2VjY2lvbmVzLFxuICBzZXRDYXJnYWRvLFxuICBzZXRTZWNjaW9uQWN0aXZhSWQsXG5cbiAgLy8gcmVmcyAvIGhlbHBlcnMgcXVlIHlhIGV4aXN0ZW4gZW4gQ2FudmFzRWRpdG9yXG4gIGlnbm9yZU5leHRVcGRhdGVSZWYsXG4gIHN0YWdlUmVmLFxuXG4gIC8vIGhlbHBlcnMgZGUgdHUgbGF5b3V0IGFjdHVhbFxuICBub3JtYWxpemFyQWx0b01vZG8sXG4gIHZhbGlkYXJQdW50b3NMaW5lYSxcblxuICAvLyBjb25zdGFudGVzXG4gIEFMVFVSQV9QQU5UQUxMQV9FRElUT1IsXG59KSB7XG4gIGNvbnN0IHNraXBOZXh0UGVyc2lzdFJlZiA9IHVzZVJlZih0cnVlKTtcblxuICAvLyBoZWxwZXI6IGxpbXBpYXIgdW5kZWZpbmVkIHJlY3Vyc2l2b1xuICBjb25zdCBsaW1waWFyVW5kZWZpbmVkID0gKG9iaikgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHJldHVybiBvYmoubWFwKGxpbXBpYXJVbmRlZmluZWQpO1xuXG4gICAgaWYgKG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBjb25zdCBvYmpMaW1waW8gPSB7fTtcbiAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbG9yID0gb2JqW2tleV07XG4gICAgICAgIGlmICh2YWxvciAhPT0gdW5kZWZpbmVkKSBvYmpMaW1waW9ba2V5XSA9IGxpbXBpYXJVbmRlZmluZWQodmFsb3IpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gb2JqTGltcGlvO1xuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gMSkgQ2FyZ2FyIGJvcnJhZG9yIGRlc2RlIEZpcmVzdG9yZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2x1ZykgcmV0dXJuO1xuXG4gICAgLy8gQWwgY2FtYmlhciBkZSBib3JyYWRvciwgZXZpdGFtb3MgcGVyc2lzdGlyIGlubWVkaWF0YW1lbnRlIHRyYXMgaGlkcmF0YXIgZXN0YWRvLlxuICAgIHNraXBOZXh0UGVyc2lzdFJlZi5jdXJyZW50ID0gdHJ1ZTtcblxuICAgIGNvbnN0IGNhcmdhciA9IGFzeW5jICgpID0+IHtcbiAgICAgIHB1c2hFZGl0b3JCcmVhZGNydW1iKFwiYm9ycmFkb3ItbG9hZC1zdGFydFwiLCB7IHNsdWcgfSk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJib3JyYWRvcmVzXCIsIHNsdWcpO1xuICAgICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jKHJlZik7XG5cbiAgICAgICAgaWYgKHNuYXAuZXhpc3RzKCkpIHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gc25hcC5kYXRhKCk7XG4gICAgICAgICAgY29uc3Qgc2VjY2lvbmVzRGF0YSA9IGRhdGEuc2VjY2lvbmVzIHx8IFtdO1xuICAgICAgICAgIGNvbnN0IG9iamV0b3NEYXRhID0gZGF0YS5vYmpldG9zIHx8IFtdO1xuXG4gICAgICAgICAgLy8gUmVmcmVzY2EgVVJMcyBkZSBGaXJlYmFzZSBTdG9yYWdlIHBvciBzaSBoYXkgdG9rZW5zIHZlbmNpZG9zL3Jldm9jYWRvcy5cbiAgICAgICAgICBjb25zdCByZWZyZXNoQ2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgY29uc3QgW3NlY2Npb25lc1JlZnJlc2NhZGFzLCBvYmpldG9zUmVmcmVzY2Fkb3NdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgcmVmcmVzaFVybHNEZWVwKHNlY2Npb25lc0RhdGEsIHJlZnJlc2hDYWNoZSksXG4gICAgICAgICAgICByZWZyZXNoVXJsc0RlZXAob2JqZXRvc0RhdGEsIHJlZnJlc2hDYWNoZSksXG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICAvLyBNYW50ZW5nbyB0dSBtaWdyYWNpb24gZGUgeU5vcm0gcGFyYSBzZWNjaW9uZXMgcGFudGFsbGFcbiAgICAgICAgICBjb25zdCBvYmpzTWlncmFkb3MgPSBvYmpldG9zUmVmcmVzY2Fkb3MubWFwKChvKSA9PiB7XG4gICAgICAgICAgICBpZiAoIW8/LnNlY2Npb25JZCkgcmV0dXJuIG87XG5cbiAgICAgICAgICAgIGNvbnN0IHNlYyA9IHNlY2Npb25lc1JlZnJlc2NhZGFzLmZpbmQoKHMpID0+IHMuaWQgPT09IG8uc2VjY2lvbklkKTtcbiAgICAgICAgICAgIGNvbnN0IG1vZG8gPSBub3JtYWxpemFyQWx0b01vZG8oc2VjPy5hbHRvTW9kbyk7XG5cbiAgICAgICAgICAgIGlmIChtb2RvID09PSBcInBhbnRhbGxhXCIpIHtcbiAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoby55Tm9ybSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB5UHggPSBOdW1iZXIuaXNGaW5pdGUoby55KSA/IG8ueSA6IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgeU5vcm0gPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB5UHggLyBBTFRVUkFfUEFOVEFMTEFfRURJVE9SKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubywgeU5vcm0gfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNldE9iamV0b3Mob2Jqc01pZ3JhZG9zKTtcbiAgICAgICAgICBzZXRTZWNjaW9uZXMoc2VjY2lvbmVzUmVmcmVzY2FkYXMpO1xuXG4gICAgICAgICAgcHVzaEVkaXRvckJyZWFkY3J1bWIoXCJib3JyYWRvci1sb2FkLXN1Y2Nlc3NcIiwge1xuICAgICAgICAgICAgc2x1ZyxcbiAgICAgICAgICAgIG9iamV0b3M6IG9ianNNaWdyYWRvcy5sZW5ndGgsXG4gICAgICAgICAgICBzZWNjaW9uZXM6IHNlY2Npb25lc1JlZnJlc2NhZGFzLmxlbmd0aCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFNldGVhciBwcmltZXJhIHNlY2Npb24gYWN0aXZhIHNpIG5vIGhheVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0U2VjY2lvbkFjdGl2YUlkID09PSBcImZ1bmN0aW9uXCIgJiYgc2VjY2lvbmVzUmVmcmVzY2FkYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2V0U2VjY2lvbkFjdGl2YUlkKChwcmV2KSA9PiBwcmV2IHx8IHNlY2Npb25lc1JlZnJlc2NhZGFzWzBdLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHVzaEVkaXRvckJyZWFkY3J1bWIoXCJib3JyYWRvci1sb2FkLW1pc3NpbmdcIiwgeyBzbHVnIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjYXB0dXJlRWRpdG9ySXNzdWUoe1xuICAgICAgICAgIHNvdXJjZTogXCJ1c2VCb3JyYWRvclN5bmMubG9hZFwiLFxuICAgICAgICAgIGVycm9yLFxuICAgICAgICAgIGRldGFpbDogeyBzbHVnIH0sXG4gICAgICAgICAgc2V2ZXJpdHk6IFwiZmF0YWxcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHNldENhcmdhZG8odHJ1ZSk7XG4gICAgfTtcblxuICAgIGNhcmdhcigpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3NsdWddKTtcblxuICAvLyAyKSBHdWFyZGFyIGVuIEZpcmVzdG9yZSBjb24gZGVib3VuY2UgY3VhbmRvIGNhbWJpYW4gb2JqZXRvcy9zZWNjaW9uZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWNhcmdhZG8pIHJldHVybjtcbiAgICBpZiAoIXNsdWcpIHJldHVybjtcblxuICAgIC8vIEV2aXRhIHdyaXRlICsgdGh1bWJuYWlsIGp1c3RvIGFsIHRlcm1pbmFyIGxhIGNhcmdhIGluaWNpYWwgKGNhdXNhIGluZXN0YWJpbGlkYWQgbcOzdmlsIGVuIGJvcnJhZG9yZXMgcGVzYWRvcykuXG4gICAgaWYgKHNraXBOZXh0UGVyc2lzdFJlZi5jdXJyZW50KSB7XG4gICAgICBza2lwTmV4dFBlcnNpc3RSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpZ25vcmVOZXh0VXBkYXRlUmVmPy5jdXJyZW50KSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgPSBNYXRoLm1heCgwLCAoaWdub3JlTmV4dFVwZGF0ZVJlZi5jdXJyZW50IHx8IDApIC0gMSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBObyBndWFyZGFyIGR1cmFudGUgcmVzaXplIChsb2dpY2EgYWN0dWFsKVxuICAgIGlmICh3aW5kb3cuX3Jlc2l6ZURhdGE/LmlzUmVzaXppbmcpIHJldHVybjtcblxuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVmFsaWRhY2lvbjogbGluZWFzICsgbm9ybWFsaXphY2lvbiBkZSB0ZXh0b3NcbiAgICAgICAgY29uc3Qgb2JqZXRvc1ZhbGlkYWRvcyA9IChvYmpldG9zIHx8IFtdKS5tYXAoKG9iaikgPT4ge1xuICAgICAgICAgIGlmIChvYmo/LnRpcG8gPT09IFwiZm9ybWFcIiAmJiBvYmo/LmZpZ3VyYSA9PT0gXCJsaW5lXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGFyUHVudG9zTGluZWEob2JqKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob2JqPy50aXBvID09PSBcInRleHRvXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLm9iaixcbiAgICAgICAgICAgICAgY29sb3I6IG9iai5jb2xvclRleHRvIHx8IG9iai5jb2xvciB8fCBvYmouZmlsbCB8fCBcIiMwMDAwMDBcIixcbiAgICAgICAgICAgICAgc3Ryb2tlOiBvYmouc3Ryb2tlIHx8IG51bGwsXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiBvYmouc3Ryb2tlV2lkdGggfHwgMCxcbiAgICAgICAgICAgICAgc2hhZG93Q29sb3I6IG9iai5zaGFkb3dDb2xvciB8fCBudWxsLFxuICAgICAgICAgICAgICBzaGFkb3dCbHVyOiBvYmouc2hhZG93Qmx1ciB8fCAwLFxuICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRYOiBvYmouc2hhZG93T2Zmc2V0WCB8fCAwLFxuICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRZOiBvYmouc2hhZG93T2Zmc2V0WSB8fCAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZWNjaW9uZXNMaW1waWFzID0gbGltcGlhclVuZGVmaW5lZChzZWNjaW9uZXMpO1xuICAgICAgICBjb25zdCBvYmpldG9zTGltcGlvcyA9IGxpbXBpYXJVbmRlZmluZWQob2JqZXRvc1ZhbGlkYWRvcyk7XG5cbiAgICAgICAgY29uc3QgcmVmID0gZG9jKGRiLCBcImJvcnJhZG9yZXNcIiwgc2x1Zyk7XG4gICAgICAgIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcbiAgICAgICAgICBvYmpldG9zOiBvYmpldG9zTGltcGlvcyxcbiAgICAgICAgICBzZWNjaW9uZXM6IHNlY2Npb25lc0xpbXBpYXMsXG4gICAgICAgICAgdWx0aW1hRWRpY2lvbjogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRodW1ibmFpbCAobWFudGVuZ28gdHUgbG9naWNhIGNvbiBpbXBvcnQgZGluYW1pY28pXG4gICAgICAgIGlmIChzdGFnZVJlZj8uY3VycmVudCAmJiB1c2VySWQgJiYgc2x1Zykge1xuICAgICAgICAgIC8vIEVuIG1vYmlsZSBwZXNhZG8sIGdlbmVyYXIgdGh1bWJuYWlsIGFsIHZ1ZWxvIHB1ZWRlIHR1bWJhciBsYSBwZXN0YcOxYS5cbiAgICAgICAgICBpZiAoaXNNb2JpbGVSdW50aW1lKCkpIHJldHVybjtcbiAgICAgICAgICBjb25zdCB7IGd1YXJkYXJUaHVtYm5haWxEZXNkZVN0YWdlIH0gPSBhd2FpdCBpbXBvcnQoXCJAL3V0aWxzL2d1YXJkYXJUaHVtYm5haWxcIik7XG4gICAgICAgICAgYXdhaXQgZ3VhcmRhclRodW1ibmFpbERlc2RlU3RhZ2UoeyBzdGFnZVJlZiwgdWlkOiB1c2VySWQsIHNsdWcgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBndWFyZGFuZG8gZW4gRmlyZWJhc2U6XCIsIGVycm9yKTtcbiAgICAgICAgY2FwdHVyZUVkaXRvcklzc3VlKHtcbiAgICAgICAgICBzb3VyY2U6IFwidXNlQm9ycmFkb3JTeW5jLnNhdmVcIixcbiAgICAgICAgICBlcnJvcixcbiAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgIHNsdWcsXG4gICAgICAgICAgICBvYmpldG9zOiBBcnJheS5pc0FycmF5KG9iamV0b3MpID8gb2JqZXRvcy5sZW5ndGggOiBudWxsLFxuICAgICAgICAgICAgc2VjY2lvbmVzOiBBcnJheS5pc0FycmF5KHNlY2Npb25lcykgPyBzZWNjaW9uZXMubGVuZ3RoIDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldmVyaXR5OiBcImVycm9yXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIDUwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gIH0sIFtvYmpldG9zLCBzZWNjaW9uZXMsIGNhcmdhZG8sIHNsdWcsIHVzZXJJZCwgaWdub3JlTmV4dFVwZGF0ZVJlZiwgc3RhZ2VSZWYsIHZhbGlkYXJQdW50b3NMaW5lYV0pO1xufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsImRvYyIsImdldERvYyIsInVwZGF0ZURvYyIsInNlcnZlclRpbWVzdGFtcCIsImdldERvd25sb2FkVVJMIiwicmVmIiwic3RvcmFnZVJlZiIsImRiIiwic3RvcmFnZSIsImNhcHR1cmVFZGl0b3JJc3N1ZSIsInB1c2hFZGl0b3JCcmVhZGNydW1iIiwicGFyc2VTdG9yYWdlTG9jYXRpb25Gcm9tVXJsIiwidmFsdWUiLCJ0ZXN0IiwidXJsIiwiVVJMIiwiaG9zdG5hbWUiLCJlbmRzV2l0aCIsIm1hdGNoIiwicGF0aG5hbWUiLCJidWNrZXROYW1lIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGF0aCIsInNlZ21lbnRzIiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwibGVuZ3RoIiwic2xpY2UiLCJqb2luIiwicmVmcmVzaFN0b3JhZ2VVcmwiLCJjYWNoZSIsImxvY2F0aW9uIiwiY2FjaGVLZXkiLCJoYXMiLCJnZXQiLCJoYXNUb2tlbkluVXJsIiwiaXNVc2VyUHJpdmF0ZVBhdGgiLCJzZXQiLCJnc1VybCIsImZyZXNoVXJsIiwiZXJyb3IiLCJjb2RlIiwicmVmcmVzaFVybHNEZWVwIiwiQXJyYXkiLCJpc0FycmF5IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsIml0ZW0iLCJwYWlycyIsIk9iamVjdCIsImVudHJpZXMiLCJrZXkiLCJuZXN0ZWQiLCJyZWZyZXNoZWQiLCJmcm9tRW50cmllcyIsImlzTW9iaWxlUnVudGltZSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwidyIsIk51bWJlciIsImlubmVyV2lkdGgiLCJoIiwiaW5uZXJIZWlnaHQiLCJtaW5TaWRlIiwiTWF0aCIsIm1pbiIsInVzZUJvcnJhZG9yU3luYyIsInNsdWciLCJ1c2VySWQiLCJvYmpldG9zIiwic2VjY2lvbmVzIiwiY2FyZ2FkbyIsInNldE9iamV0b3MiLCJzZXRTZWNjaW9uZXMiLCJzZXRDYXJnYWRvIiwic2V0U2VjY2lvbkFjdGl2YUlkIiwiaWdub3JlTmV4dFVwZGF0ZVJlZiIsInN0YWdlUmVmIiwibm9ybWFsaXphckFsdG9Nb2RvIiwidmFsaWRhclB1bnRvc0xpbmVhIiwiQUxUVVJBX1BBTlRBTExBX0VESVRPUiIsInNraXBOZXh0UGVyc2lzdFJlZiIsImxpbXBpYXJVbmRlZmluZWQiLCJvYmoiLCJvYmpMaW1waW8iLCJrZXlzIiwiZm9yRWFjaCIsInZhbG9yIiwidW5kZWZpbmVkIiwiY3VycmVudCIsImNhcmdhciIsInNuYXAiLCJleGlzdHMiLCJkYXRhIiwic2VjY2lvbmVzRGF0YSIsIm9iamV0b3NEYXRhIiwicmVmcmVzaENhY2hlIiwiTWFwIiwic2VjY2lvbmVzUmVmcmVzY2FkYXMiLCJvYmpldG9zUmVmcmVzY2Fkb3MiLCJvYmpzTWlncmFkb3MiLCJvIiwic2VjY2lvbklkIiwic2VjIiwiZmluZCIsInMiLCJpZCIsIm1vZG8iLCJhbHRvTW9kbyIsImlzRmluaXRlIiwieU5vcm0iLCJ5UHgiLCJ5IiwibWF4IiwicHJldiIsInNvdXJjZSIsImRldGFpbCIsInNldmVyaXR5IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiX3Jlc2l6ZURhdGEiLCJpc1Jlc2l6aW5nIiwidGltZW91dElkIiwic2V0VGltZW91dCIsIm9iamV0b3NWYWxpZGFkb3MiLCJ0aXBvIiwiZmlndXJhIiwiY29sb3IiLCJjb2xvclRleHRvIiwiZmlsbCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwic2hhZG93Q29sb3IiLCJzaGFkb3dCbHVyIiwic2hhZG93T2Zmc2V0WCIsInNoYWRvd09mZnNldFkiLCJzZWNjaW9uZXNMaW1waWFzIiwib2JqZXRvc0xpbXBpb3MiLCJ1bHRpbWFFZGljaW9uIiwiZ3VhcmRhclRodW1ibmFpbERlc2RlU3RhZ2UiLCJ1aWQiLCJjb25zb2xlIiwiY2xlYXJUaW1lb3V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/persistence/useBorradorSync.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/sections/ConfirmDeleteSectionModal.jsx":
/*!**********************************************************************!*\
  !*** ./src/components/editor/sections/ConfirmDeleteSectionModal.jsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ConfirmDeleteSectionModal)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_AlertTriangle_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=AlertTriangle,Trash2!=!lucide-react */ \"(pages-dir-node)/__barrel_optimize__?names=AlertTriangle,Trash2!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n\n\n\nfunction ConfirmDeleteSectionModal({ isOpen, sectionName, itemCount = 0, isDeleting = false, onCancel, onConfirm }) {\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ConfirmDeleteSectionModal.useEffect\": ()=>{\n            if (!isOpen) return undefined;\n            const previousOverflow = document.body.style.overflow;\n            const onKeyDown = {\n                \"ConfirmDeleteSectionModal.useEffect.onKeyDown\": (event)=>{\n                    if (event.key === \"Escape\" && !isDeleting) {\n                        onCancel?.();\n                    }\n                }\n            }[\"ConfirmDeleteSectionModal.useEffect.onKeyDown\"];\n            document.addEventListener(\"keydown\", onKeyDown);\n            document.body.style.overflow = \"hidden\";\n            return ({\n                \"ConfirmDeleteSectionModal.useEffect\": ()=>{\n                    document.removeEventListener(\"keydown\", onKeyDown);\n                    document.body.style.overflow = previousOverflow;\n                }\n            })[\"ConfirmDeleteSectionModal.useEffect\"];\n        }\n    }[\"ConfirmDeleteSectionModal.useEffect\"], [\n        isOpen,\n        isDeleting,\n        onCancel\n    ]);\n    const safeSectionName = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ConfirmDeleteSectionModal.useMemo[safeSectionName]\": ()=>{\n            const normalized = String(sectionName || \"\").trim();\n            return normalized || \"sin nombre\";\n        }\n    }[\"ConfirmDeleteSectionModal.useMemo[safeSectionName]\"], [\n        sectionName\n    ]);\n    const elementosTexto = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"ConfirmDeleteSectionModal.useMemo[elementosTexto]\": ()=>{\n            const count = Number.isFinite(itemCount) ? Math.max(0, itemCount) : 0;\n            return count === 1 ? \"1 elemento\" : `${count} elementos`;\n        }\n    }[\"ConfirmDeleteSectionModal.useMemo[elementosTexto]\"], [\n        itemCount\n    ]);\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 z-[9999] bg-slate-900/60 backdrop-blur-[2px] flex items-center justify-center p-4\",\n        onMouseDown: (event)=>{\n            if (event.target === event.currentTarget && !isDeleting) {\n                onCancel?.();\n            }\n        },\n        role: \"presentation\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            role: \"dialog\",\n            \"aria-modal\": \"true\",\n            \"aria-labelledby\": \"delete-section-title\",\n            \"aria-describedby\": \"delete-section-description\",\n            className: \"w-full max-w-md rounded-2xl border border-slate-200 bg-white shadow-2xl overflow-hidden\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-5 pt-5 pb-4 border-b border-slate-100\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-start gap-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-10 h-10 rounded-xl bg-red-100 text-red-600 flex items-center justify-center shrink-0\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertTriangle_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__.AlertTriangle, {\n                                    className: \"w-5 h-5\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                    lineNumber: 63,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                lineNumber: 62,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                        id: \"delete-section-title\",\n                                        className: \"text-base font-semibold text-slate-900\",\n                                        children: \"Borrar seccion\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 66,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        id: \"delete-section-description\",\n                                        className: \"mt-1 text-sm text-slate-600\",\n                                        children: [\n                                            \"Vas a borrar la seccion \",\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-medium text-slate-800\",\n                                                children: [\n                                                    '\"',\n                                                    safeSectionName,\n                                                    '\"'\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                                lineNumber: 70,\n                                                columnNumber: 41\n                                            }, this),\n                                            \".\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 69,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                lineNumber: 65,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                        lineNumber: 61,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                    lineNumber: 60,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-5 py-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"rounded-xl border border-amber-200 bg-amber-50 px-3 py-3 text-sm text-amber-900\",\n                            children: [\n                                \"Se van a borrar \",\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"font-semibold\",\n                                    children: elementosTexto\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                    lineNumber: 78,\n                                    columnNumber: 29\n                                }, this),\n                                \" que pertenecen a esta seccion.\"\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 77,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"mt-3 text-sm text-slate-600\",\n                            children: \"Esta accion no se puede deshacer.\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 80,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                    lineNumber: 76,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"px-5 pb-5 flex items-center justify-end gap-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: onCancel,\n                            disabled: isDeleting,\n                            className: \"px-4 py-2 rounded-lg border border-slate-300 text-slate-700 text-sm font-medium hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                            children: \"Cancelar\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 86,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: onConfirm,\n                            disabled: isDeleting,\n                            className: \"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white text-sm font-semibold hover:bg-red-700 transition-colors disabled:opacity-80 disabled:cursor-not-allowed\",\n                            children: isDeleting ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"w-4 h-4 rounded-full border-2 border-white/80 border-t-transparent animate-spin\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 102,\n                                        columnNumber: 17\n                                    }, this),\n                                    \"Borrando...\"\n                                ]\n                            }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_AlertTriangle_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_2__.Trash2, {\n                                        className: \"w-4 h-4\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                                        lineNumber: 107,\n                                        columnNumber: 17\n                                    }, this),\n                                    \"Eliminar seccion\"\n                                ]\n                            }, void 0, true)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                            lineNumber: 94,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n                    lineNumber: 85,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n            lineNumber: 53,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\sections\\\\ConfirmDeleteSectionModal.jsx\",\n        lineNumber: 44,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9zZWN0aW9ucy9Db25maXJtRGVsZXRlU2VjdGlvbk1vZGFsLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJDO0FBQ1U7QUFFdEMsU0FBU0ksMEJBQTBCLEVBQ2hEQyxNQUFNLEVBQ05DLFdBQVcsRUFDWEMsWUFBWSxDQUFDLEVBQ2JDLGFBQWEsS0FBSyxFQUNsQkMsUUFBUSxFQUNSQyxTQUFTLEVBQ1Y7SUFDQ1YsZ0RBQVNBOytDQUFDO1lBQ1IsSUFBSSxDQUFDSyxRQUFRLE9BQU9NO1lBRXBCLE1BQU1DLG1CQUFtQkMsU0FBU0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLFFBQVE7WUFDckQsTUFBTUM7aUVBQVksQ0FBQ0M7b0JBQ2pCLElBQUlBLE1BQU1DLEdBQUcsS0FBSyxZQUFZLENBQUNYLFlBQVk7d0JBQ3pDQztvQkFDRjtnQkFDRjs7WUFFQUksU0FBU08sZ0JBQWdCLENBQUMsV0FBV0g7WUFDckNKLFNBQVNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLEdBQUc7WUFFL0I7dURBQU87b0JBQ0xILFNBQVNRLG1CQUFtQixDQUFDLFdBQVdKO29CQUN4Q0osU0FBU0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLFFBQVEsR0FBR0o7Z0JBQ2pDOztRQUNGOzhDQUFHO1FBQUNQO1FBQVFHO1FBQVlDO0tBQVM7SUFFakMsTUFBTWEsa0JBQWtCckIsOENBQU9BOzhEQUFDO1lBQzlCLE1BQU1zQixhQUFhQyxPQUFPbEIsZUFBZSxJQUFJbUIsSUFBSTtZQUNqRCxPQUFPRixjQUFjO1FBQ3ZCOzZEQUFHO1FBQUNqQjtLQUFZO0lBRWhCLE1BQU1vQixpQkFBaUJ6Qiw4Q0FBT0E7NkRBQUM7WUFDN0IsTUFBTTBCLFFBQVFDLE9BQU9DLFFBQVEsQ0FBQ3RCLGFBQWF1QixLQUFLQyxHQUFHLENBQUMsR0FBR3hCLGFBQWE7WUFDcEUsT0FBT29CLFVBQVUsSUFBSSxlQUFlLEdBQUdBLE1BQU0sVUFBVSxDQUFDO1FBQzFEOzREQUFHO1FBQUNwQjtLQUFVO0lBRWQsSUFBSSxDQUFDRixRQUFRLE9BQU87SUFFcEIscUJBQ0UsOERBQUMyQjtRQUNDQyxXQUFVO1FBQ1ZDLGFBQWEsQ0FBQ2hCO1lBQ1osSUFBSUEsTUFBTWlCLE1BQU0sS0FBS2pCLE1BQU1rQixhQUFhLElBQUksQ0FBQzVCLFlBQVk7Z0JBQ3ZEQztZQUNGO1FBQ0Y7UUFDQTRCLE1BQUs7a0JBRUwsNEVBQUNMO1lBQ0NLLE1BQUs7WUFDTEMsY0FBVztZQUNYQyxtQkFBZ0I7WUFDaEJDLG9CQUFpQjtZQUNqQlAsV0FBVTs7OEJBRVYsOERBQUNEO29CQUFJQyxXQUFVOzhCQUNiLDRFQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNEO2dDQUFJQyxXQUFVOzBDQUNiLDRFQUFDL0IsbUdBQWFBO29DQUFDK0IsV0FBVTs7Ozs7Ozs7Ozs7MENBRTNCLDhEQUFDRDs7a0RBQ0MsOERBQUNTO3dDQUFHQyxJQUFHO3dDQUF1QlQsV0FBVTtrREFBeUM7Ozs7OztrREFHakYsOERBQUNVO3dDQUFFRCxJQUFHO3dDQUE2QlQsV0FBVTs7NENBQThCOzBEQUNqRCw4REFBQ1c7Z0RBQUtYLFdBQVU7O29EQUE2QjtvREFBRVg7b0RBQWdCOzs7Ozs7OzRDQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBTXZHLDhEQUFDVTtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzRCQUFJQyxXQUFVOztnQ0FBa0Y7OENBQy9FLDhEQUFDVztvQ0FBS1gsV0FBVTs4Q0FBaUJQOzs7Ozs7Z0NBQXNCOzs7Ozs7O3NDQUV6RSw4REFBQ2lCOzRCQUFFVixXQUFVO3NDQUE4Qjs7Ozs7Ozs7Ozs7OzhCQUs3Qyw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDWTs0QkFDQ0MsTUFBSzs0QkFDTEMsU0FBU3RDOzRCQUNUdUMsVUFBVXhDOzRCQUNWeUIsV0FBVTtzQ0FDWDs7Ozs7O3NDQUdELDhEQUFDWTs0QkFDQ0MsTUFBSzs0QkFDTEMsU0FBU3JDOzRCQUNUc0MsVUFBVXhDOzRCQUNWeUIsV0FBVTtzQ0FFVHpCLDJCQUNDOztrREFDRSw4REFBQ29DO3dDQUFLWCxXQUFVOzs7Ozs7b0NBQW9GOzs2REFJdEc7O2tEQUNFLDhEQUFDOUIsNEZBQU1BO3dDQUFDOEIsV0FBVTs7Ozs7O29DQUFZOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUzlDIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcc2VjdGlvbnNcXENvbmZpcm1EZWxldGVTZWN0aW9uTW9kYWwuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQWxlcnRUcmlhbmdsZSwgVHJhc2gyIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb25maXJtRGVsZXRlU2VjdGlvbk1vZGFsKHtcbiAgaXNPcGVuLFxuICBzZWN0aW9uTmFtZSxcbiAgaXRlbUNvdW50ID0gMCxcbiAgaXNEZWxldGluZyA9IGZhbHNlLFxuICBvbkNhbmNlbCxcbiAgb25Db25maXJtLFxufSkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNPcGVuKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgcHJldmlvdXNPdmVyZmxvdyA9IGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3c7XG4gICAgY29uc3Qgb25LZXlEb3duID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiICYmICFpc0RlbGV0aW5nKSB7XG4gICAgICAgIG9uQ2FuY2VsPy4oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IHByZXZpb3VzT3ZlcmZsb3c7XG4gICAgfTtcbiAgfSwgW2lzT3BlbiwgaXNEZWxldGluZywgb25DYW5jZWxdKTtcblxuICBjb25zdCBzYWZlU2VjdGlvbk5hbWUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHNlY3Rpb25OYW1lIHx8IFwiXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gbm9ybWFsaXplZCB8fCBcInNpbiBub21icmVcIjtcbiAgfSwgW3NlY3Rpb25OYW1lXSk7XG5cbiAgY29uc3QgZWxlbWVudG9zVGV4dG8gPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBjb3VudCA9IE51bWJlci5pc0Zpbml0ZShpdGVtQ291bnQpID8gTWF0aC5tYXgoMCwgaXRlbUNvdW50KSA6IDA7XG4gICAgcmV0dXJuIGNvdW50ID09PSAxID8gXCIxIGVsZW1lbnRvXCIgOiBgJHtjb3VudH0gZWxlbWVudG9zYDtcbiAgfSwgW2l0ZW1Db3VudF0pO1xuXG4gIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei1bOTk5OV0gYmctc2xhdGUtOTAwLzYwIGJhY2tkcm9wLWJsdXItWzJweF0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCJcbiAgICAgIG9uTW91c2VEb3duPXsoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCAmJiAhaXNEZWxldGluZykge1xuICAgICAgICAgIG9uQ2FuY2VsPy4oKTtcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIHJvbGU9XCJwcmVzZW50YXRpb25cIlxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgcm9sZT1cImRpYWxvZ1wiXG4gICAgICAgIGFyaWEtbW9kYWw9XCJ0cnVlXCJcbiAgICAgICAgYXJpYS1sYWJlbGxlZGJ5PVwiZGVsZXRlLXNlY3Rpb24tdGl0bGVcIlxuICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PVwiZGVsZXRlLXNlY3Rpb24tZGVzY3JpcHRpb25cIlxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctbWQgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgYmctd2hpdGUgc2hhZG93LTJ4bCBvdmVyZmxvdy1oaWRkZW5cIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTUgcHQtNSBwYi00IGJvcmRlci1iIGJvcmRlci1zbGF0ZS0xMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xMCBoLTEwIHJvdW5kZWQteGwgYmctcmVkLTEwMCB0ZXh0LXJlZC02MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc2hyaW5rLTBcIj5cbiAgICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxoMiBpZD1cImRlbGV0ZS1zZWN0aW9uLXRpdGxlXCIgY2xhc3NOYW1lPVwidGV4dC1iYXNlIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5cbiAgICAgICAgICAgICAgICBCb3JyYXIgc2VjY2lvblxuICAgICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgICA8cCBpZD1cImRlbGV0ZS1zZWN0aW9uLWRlc2NyaXB0aW9uXCIgY2xhc3NOYW1lPVwibXQtMSB0ZXh0LXNtIHRleHQtc2xhdGUtNjAwXCI+XG4gICAgICAgICAgICAgICAgVmFzIGEgYm9ycmFyIGxhIHNlY2Npb24gPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS04MDBcIj5cIntzYWZlU2VjdGlvbk5hbWV9XCI8L3NwYW4+LlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC01IHB5LTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1hbWJlci0yMDAgYmctYW1iZXItNTAgcHgtMyBweS0zIHRleHQtc20gdGV4dC1hbWJlci05MDBcIj5cbiAgICAgICAgICAgIFNlIHZhbiBhIGJvcnJhciA8c3BhbiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkXCI+e2VsZW1lbnRvc1RleHRvfTwvc3Bhbj4gcXVlIHBlcnRlbmVjZW4gYSBlc3RhIHNlY2Npb24uXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtMyB0ZXh0LXNtIHRleHQtc2xhdGUtNjAwXCI+XG4gICAgICAgICAgICBFc3RhIGFjY2lvbiBubyBzZSBwdWVkZSBkZXNoYWNlci5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHgtNSBwYi01IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktZW5kIGdhcC0yXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNhbmNlbH1cbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0RlbGV0aW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgdGV4dC1zbGF0ZS03MDAgdGV4dC1zbSBmb250LW1lZGl1bSBob3ZlcjpiZy1zbGF0ZS01MCB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgQ2FuY2VsYXJcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ29uZmlybX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0RlbGV0aW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTQgcHktMiByb3VuZGVkLWxnIGJnLXJlZC02MDAgdGV4dC13aGl0ZSB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgaG92ZXI6YmctcmVkLTcwMCB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTgwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAge2lzRGVsZXRpbmcgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidy00IGgtNCByb3VuZGVkLWZ1bGwgYm9yZGVyLTIgYm9yZGVyLXdoaXRlLzgwIGJvcmRlci10LXRyYW5zcGFyZW50IGFuaW1hdGUtc3BpblwiIC8+XG4gICAgICAgICAgICAgICAgQm9ycmFuZG8uLi5cbiAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxUcmFzaDIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICAgICAgRWxpbWluYXIgc2VjY2lvblxuICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsIkFsZXJ0VHJpYW5nbGUiLCJUcmFzaDIiLCJDb25maXJtRGVsZXRlU2VjdGlvbk1vZGFsIiwiaXNPcGVuIiwic2VjdGlvbk5hbWUiLCJpdGVtQ291bnQiLCJpc0RlbGV0aW5nIiwib25DYW5jZWwiLCJvbkNvbmZpcm0iLCJ1bmRlZmluZWQiLCJwcmV2aW91c092ZXJmbG93IiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsIm9uS2V5RG93biIsImV2ZW50Iiwia2V5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzYWZlU2VjdGlvbk5hbWUiLCJub3JtYWxpemVkIiwiU3RyaW5nIiwidHJpbSIsImVsZW1lbnRvc1RleHRvIiwiY291bnQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIk1hdGgiLCJtYXgiLCJkaXYiLCJjbGFzc05hbWUiLCJvbk1vdXNlRG93biIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJyb2xlIiwiYXJpYS1tb2RhbCIsImFyaWEtbGFiZWxsZWRieSIsImFyaWEtZGVzY3JpYmVkYnkiLCJoMiIsImlkIiwicCIsInNwYW4iLCJidXR0b24iLCJ0eXBlIiwib25DbGljayIsImRpc2FibGVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/sections/ConfirmDeleteSectionModal.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/sections/useSectionsManager.js":
/*!**************************************************************!*\
  !*** ./src/components/editor/sections/useSectionsManager.js ***!
  \**************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useSectionsManager)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../firebase */ \"(pages-dir-node)/./src/firebase.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, _firebase__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, _firebase__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/components/editor/sections/useSectionsManager.js\n\n\n // ✅ ajustado a tu estructura real\n/**\n * Maneja todo lo relacionado a secciones:\n * - resize de altura (drag)\n * - toggle Pantalla ON/OFF\n * - crear sección (y persistir)\n */ function useSectionsManager({ slug, secciones, setSecciones, objetos, setObjetos, seccionActivaId, setSeccionActivaId, stageRef, setGlobalCursor, clearGlobalCursor, crearSeccion, normalizarAltoModo, limpiarObjetoUndefined, ALTURA_REFERENCIA_PANTALLA }) {\n    const getClientYFromEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[getClientYFromEvent]\": (event)=>{\n            if (!event) return null;\n            if (Number.isFinite(event.clientY)) return event.clientY;\n            if (event.touches?.[0] && Number.isFinite(event.touches[0].clientY)) {\n                return event.touches[0].clientY;\n            }\n            if (event.changedTouches?.[0] && Number.isFinite(event.changedTouches[0].clientY)) {\n                return event.changedTouches[0].clientY;\n            }\n            return null;\n        }\n    }[\"useSectionsManager.useCallback[getClientYFromEvent]\"], []);\n    // ------------------------------------------\n    // A) Resize altura de sección\n    // ------------------------------------------\n    const [controlandoAltura, setControlandoAltura] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const seccionesRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(secciones);\n    const resizeSessionRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        isResizing: false,\n        seccionId: null,\n        alturaInicial: 0,\n        posicionInicialMouse: 0,\n        posicionActualMouse: 0,\n        ultimaAlturaAplicada: null,\n        rafId: null,\n        pointerId: null,\n        targetConCapture: null\n    });\n    const lastStartRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        type: \"\",\n        at: 0\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSectionsManager.useEffect\": ()=>{\n            seccionesRef.current = secciones;\n        }\n    }[\"useSectionsManager.useEffect\"], [\n        secciones\n    ]);\n    const aplicarResizeAltura = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[aplicarResizeAltura]\": ()=>{\n            const session = resizeSessionRef.current;\n            if (!session.isResizing || !session.seccionId) return;\n            const deltaY = session.posicionActualMouse - session.posicionInicialMouse;\n            const nuevaAltura = Math.max(50, Math.round(session.alturaInicial + deltaY));\n            if (session.ultimaAlturaAplicada === nuevaAltura) return;\n            session.ultimaAlturaAplicada = nuevaAltura;\n            setSecciones({\n                \"useSectionsManager.useCallback[aplicarResizeAltura]\": (prev)=>{\n                    const next = prev.map({\n                        \"useSectionsManager.useCallback[aplicarResizeAltura].next\": (s)=>s.id === session.seccionId ? {\n                                ...s,\n                                altura: nuevaAltura\n                            } : s\n                    }[\"useSectionsManager.useCallback[aplicarResizeAltura].next\"]);\n                    seccionesRef.current = next;\n                    return next;\n                }\n            }[\"useSectionsManager.useCallback[aplicarResizeAltura]\"]);\n        }\n    }[\"useSectionsManager.useCallback[aplicarResizeAltura]\"], [\n        setSecciones\n    ]);\n    const scheduleResizeFrame = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[scheduleResizeFrame]\": ()=>{\n            const session = resizeSessionRef.current;\n            if (session.rafId != null) return;\n            session.rafId = requestAnimationFrame({\n                \"useSectionsManager.useCallback[scheduleResizeFrame]\": ()=>{\n                    resizeSessionRef.current.rafId = null;\n                    aplicarResizeAltura();\n                }\n            }[\"useSectionsManager.useCallback[scheduleResizeFrame]\"]);\n        }\n    }[\"useSectionsManager.useCallback[scheduleResizeFrame]\"], [\n        aplicarResizeAltura\n    ]);\n    const iniciarControlAltura = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[iniciarControlAltura]\": (e, seccionId)=>{\n            const evt = e?.evt;\n            if (!evt) return;\n            const now = typeof performance !== \"undefined\" ? performance.now() : Date.now();\n            const tipo = evt.type || \"\";\n            const last = lastStartRef.current;\n            const esFallbackDuplicado = (tipo === \"mousedown\" || tipo === \"touchstart\") && last.type === \"pointerdown\" && now - last.at < 120;\n            if (esFallbackDuplicado) return;\n            lastStartRef.current = {\n                type: tipo,\n                at: now\n            };\n            const session = resizeSessionRef.current;\n            if (session.isResizing) return;\n            const seccion = seccionesRef.current.find({\n                \"useSectionsManager.useCallback[iniciarControlAltura].seccion\": (s)=>s.id === seccionId\n            }[\"useSectionsManager.useCallback[iniciarControlAltura].seccion\"]);\n            if (!seccion) return;\n            const pointerY = getClientYFromEvent(evt);\n            if (!Number.isFinite(pointerY)) return;\n            setGlobalCursor?.(\"ns-resize\", stageRef);\n            evt.stopPropagation();\n            if (evt.cancelable) evt.preventDefault();\n            setControlandoAltura(seccionId);\n            session.isResizing = true;\n            session.seccionId = seccionId;\n            session.alturaInicial = seccion.altura;\n            session.posicionInicialMouse = pointerY;\n            session.posicionActualMouse = pointerY;\n            session.ultimaAlturaAplicada = seccion.altura;\n            session.pointerId = Number.isFinite(evt.pointerId) ? evt.pointerId : null;\n            session.rafId = null;\n            try {\n                document.body.style.userSelect = \"none\";\n            } catch  {}\n            try {\n                document.body.style.touchAction = \"none\";\n            } catch  {}\n            const target = e.target?.getStage?.()?.content || e.target?.getStage?.()?.container?.();\n            session.targetConCapture = target || null;\n            if (target && target.setPointerCapture && session.pointerId != null) {\n                try {\n                    target.setPointerCapture(session.pointerId);\n                } catch  {}\n            }\n        }\n    }[\"useSectionsManager.useCallback[iniciarControlAltura]\"], [\n        setGlobalCursor,\n        stageRef,\n        getClientYFromEvent\n    ]);\n    const manejarControlAltura = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[manejarControlAltura]\": (e)=>{\n            const session = resizeSessionRef.current;\n            if (!session.isResizing) return;\n            if (e?.cancelable) e.preventDefault();\n            const posicionActualMouse = getClientYFromEvent(e);\n            if (!Number.isFinite(posicionActualMouse)) return;\n            session.posicionActualMouse = posicionActualMouse;\n            scheduleResizeFrame();\n        }\n    }[\"useSectionsManager.useCallback[manejarControlAltura]\"], [\n        getClientYFromEvent,\n        scheduleResizeFrame\n    ]);\n    const finalizarControlAltura = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[finalizarControlAltura]\": async ()=>{\n            const session = resizeSessionRef.current;\n            if (!session.isResizing) return;\n            if (session.rafId != null) {\n                cancelAnimationFrame(session.rafId);\n                session.rafId = null;\n            }\n            aplicarResizeAltura();\n            clearGlobalCursor?.(stageRef);\n            try {\n                document.body.style.userSelect = \"\";\n            } catch  {}\n            try {\n                document.body.style.touchAction = \"\";\n            } catch  {}\n            if (session.targetConCapture?.releasePointerCapture && session.pointerId != null) {\n                try {\n                    session.targetConCapture.releasePointerCapture(session.pointerId);\n                } catch  {}\n            }\n            const seccionId = session.seccionId;\n            session.isResizing = false;\n            session.seccionId = null;\n            session.alturaInicial = 0;\n            session.posicionInicialMouse = 0;\n            session.posicionActualMouse = 0;\n            session.ultimaAlturaAplicada = null;\n            session.pointerId = null;\n            session.targetConCapture = null;\n            setControlandoAltura(false);\n            if (window._saveAlturaTimeout) clearTimeout(window._saveAlturaTimeout);\n            window._saveAlturaTimeout = setTimeout({\n                \"useSectionsManager.useCallback[finalizarControlAltura]\": async ()=>{\n                    try {\n                        if (!slug) return;\n                        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"borradores\", slug);\n                        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                            secciones: seccionesRef.current,\n                            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n                        });\n                        clearGlobalCursor?.(stageRef);\n                        console.log(\"✅ Altura guardada:\", seccionId);\n                    } catch (error) {\n                        console.error(\"❌ Error guardando altura:\", error);\n                    }\n                }\n            }[\"useSectionsManager.useCallback[finalizarControlAltura]\"], 220);\n        }\n    }[\"useSectionsManager.useCallback[finalizarControlAltura]\"], [\n        aplicarResizeAltura,\n        slug,\n        clearGlobalCursor,\n        stageRef\n    ]);\n    // listeners globales (mouse/touch/pointer)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSectionsManager.useEffect\": ()=>{\n            if (!controlandoAltura) return;\n            const hasPointerEvents =  false && 0;\n            if (hasPointerEvents) {\n                window.addEventListener(\"pointermove\", manejarControlAltura, {\n                    passive: false\n                });\n                window.addEventListener(\"pointerup\", finalizarControlAltura, {\n                    passive: true\n                });\n                window.addEventListener(\"pointercancel\", finalizarControlAltura, {\n                    passive: true\n                });\n            } else {\n                document.addEventListener(\"mousemove\", manejarControlAltura, {\n                    passive: false\n                });\n                document.addEventListener(\"touchmove\", manejarControlAltura, {\n                    passive: false\n                });\n                document.addEventListener(\"mouseup\", finalizarControlAltura);\n                document.addEventListener(\"touchend\", finalizarControlAltura, {\n                    passive: true\n                });\n                document.addEventListener(\"touchcancel\", finalizarControlAltura, {\n                    passive: true\n                });\n            }\n            return ({\n                \"useSectionsManager.useEffect\": ()=>{\n                    window.removeEventListener(\"pointerup\", finalizarControlAltura);\n                    window.removeEventListener(\"pointercancel\", finalizarControlAltura);\n                    window.removeEventListener(\"pointermove\", manejarControlAltura);\n                    document.removeEventListener(\"mouseup\", finalizarControlAltura);\n                    document.removeEventListener(\"mousemove\", manejarControlAltura);\n                    document.removeEventListener(\"touchmove\", manejarControlAltura);\n                    document.removeEventListener(\"touchend\", finalizarControlAltura);\n                    document.removeEventListener(\"touchcancel\", finalizarControlAltura);\n                }\n            })[\"useSectionsManager.useEffect\"];\n        }\n    }[\"useSectionsManager.useEffect\"], [\n        controlandoAltura,\n        manejarControlAltura,\n        finalizarControlAltura\n    ]);\n    // failsafes (pointerup, blur, visibility, esc...)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSectionsManager.useEffect\": ()=>{\n            if (!controlandoAltura) return;\n            const end = {\n                \"useSectionsManager.useEffect.end\": ()=>finalizarControlAltura()\n            }[\"useSectionsManager.useEffect.end\"];\n            const handlePointerUp = end;\n            const handlePointerCancel = end;\n            const handleMouseLeave = {\n                \"useSectionsManager.useEffect.handleMouseLeave\": (ev)=>{\n                    if (ev.relatedTarget === null) end();\n                }\n            }[\"useSectionsManager.useEffect.handleMouseLeave\"];\n            const handleBlur = end;\n            const handleVisibility = {\n                \"useSectionsManager.useEffect.handleVisibility\": ()=>{\n                    if (document.visibilityState !== \"visible\") end();\n                }\n            }[\"useSectionsManager.useEffect.handleVisibility\"];\n            const handleKeyDown = {\n                \"useSectionsManager.useEffect.handleKeyDown\": (e)=>{\n                    if (e.key === \"Escape\") end();\n                }\n            }[\"useSectionsManager.useEffect.handleKeyDown\"];\n            window.addEventListener(\"pointerup\", handlePointerUp, {\n                capture: true\n            });\n            window.addEventListener(\"pointercancel\", handlePointerCancel, {\n                capture: true\n            });\n            window.addEventListener(\"mouseleave\", handleMouseLeave, {\n                capture: true\n            });\n            window.addEventListener(\"blur\", handleBlur, {\n                capture: true\n            });\n            document.addEventListener(\"visibilitychange\", handleVisibility, {\n                capture: true\n            });\n            document.addEventListener(\"keydown\", handleKeyDown, {\n                capture: true\n            });\n            return ({\n                \"useSectionsManager.useEffect\": ()=>{\n                    window.removeEventListener(\"pointerup\", handlePointerUp, {\n                        capture: true\n                    });\n                    window.removeEventListener(\"pointercancel\", handlePointerCancel, {\n                        capture: true\n                    });\n                    window.removeEventListener(\"mouseleave\", handleMouseLeave, {\n                        capture: true\n                    });\n                    window.removeEventListener(\"blur\", handleBlur, {\n                        capture: true\n                    });\n                    document.removeEventListener(\"visibilitychange\", handleVisibility, {\n                        capture: true\n                    });\n                    document.removeEventListener(\"keydown\", handleKeyDown, {\n                        capture: true\n                    });\n                }\n            })[\"useSectionsManager.useEffect\"];\n        }\n    }[\"useSectionsManager.useEffect\"], [\n        controlandoAltura,\n        finalizarControlAltura\n    ]);\n    // ------------------------------------------\n    // B) Toggle Pantalla ON/OFF\n    // ------------------------------------------\n    const togglePantallaCompletaSeccion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\": async (seccionId)=>{\n            if (!seccionId) return;\n            // 1) Actualizar estado local\n            setSecciones({\n                \"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\": (prev)=>{\n                    const next = prev.map({\n                        \"useSectionsManager.useCallback[togglePantallaCompletaSeccion].next\": (s)=>{\n                            if (s.id !== seccionId) return s;\n                            const modoActual = normalizarAltoModo(s.altoModo);\n                            const modoNuevo = modoActual === \"pantalla\" ? \"fijo\" : \"pantalla\";\n                            if (modoNuevo === \"pantalla\") {\n                                return {\n                                    ...s,\n                                    altoModo: \"pantalla\",\n                                    alturaFijoBackup: Number.isFinite(s.altura) ? s.altura : 600,\n                                    altura: ALTURA_REFERENCIA_PANTALLA\n                                };\n                            }\n                            const backup = Number.isFinite(s.alturaFijoBackup) ? s.alturaFijoBackup : s.altura;\n                            const { alturaFijoBackup, ...rest } = s;\n                            return {\n                                ...rest,\n                                altoModo: \"fijo\",\n                                altura: Number.isFinite(backup) ? backup : 600\n                            };\n                        }\n                    }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion].next\"]);\n                    return next;\n                }\n            }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\"]);\n            // 2) Persistir en Firestore usando el snapshot actual\n            try {\n                if (!slug) return;\n                const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"borradores\", slug);\n                const seccionesNext = secciones.map({\n                    \"useSectionsManager.useCallback[togglePantallaCompletaSeccion].seccionesNext\": (s)=>{\n                        if (s.id !== seccionId) return s;\n                        const modoActual = normalizarAltoModo(s.altoModo);\n                        const modoNuevo = modoActual === \"pantalla\" ? \"fijo\" : \"pantalla\";\n                        if (modoNuevo === \"pantalla\") {\n                            return {\n                                ...s,\n                                altoModo: \"pantalla\",\n                                alturaFijoBackup: Number.isFinite(s.altura) ? s.altura : 600,\n                                altura: ALTURA_REFERENCIA_PANTALLA\n                            };\n                        }\n                        const backup = Number.isFinite(s.alturaFijoBackup) ? s.alturaFijoBackup : s.altura;\n                        const { alturaFijoBackup, ...rest } = s;\n                        return {\n                            ...rest,\n                            altoModo: \"fijo\",\n                            altura: Number.isFinite(backup) ? backup : 600\n                        };\n                    }\n                }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion].seccionesNext\"]);\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                    secciones: seccionesNext,\n                    ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.serverTimestamp)()\n                });\n                console.log(\"✅ altoModo actualizado:\", seccionId);\n            } catch (e) {\n                console.error(\"❌ Error guardando altoModo:\", e);\n            }\n        }\n    }[\"useSectionsManager.useCallback[togglePantallaCompletaSeccion]\"], [\n        slug,\n        secciones,\n        setSecciones,\n        normalizarAltoModo,\n        ALTURA_REFERENCIA_PANTALLA\n    ]);\n    // ------------------------------------------\n    // C) Crear sección (y persistir)\n    // ------------------------------------------\n    const handleCrearSeccion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSectionsManager.useCallback[handleCrearSeccion]\": async (datos)=>{\n            if (!slug) return;\n            const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"borradores\", slug);\n            setSecciones({\n                \"useSectionsManager.useCallback[handleCrearSeccion]\": (prevSecciones)=>{\n                    const nueva = crearSeccion(datos, prevSecciones);\n                    let objetosDesdePlantilla = [];\n                    if (datos?.desdePlantilla && Array.isArray(datos.objetos)) {\n                        objetosDesdePlantilla = datos.objetos.map({\n                            \"useSectionsManager.useCallback[handleCrearSeccion]\": (obj)=>({\n                                    ...obj,\n                                    id: \"obj-\" + Date.now() + Math.random().toString(36).substring(2, 6),\n                                    seccionId: nueva.id\n                                })\n                        }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n                    }\n                    const nuevasSecciones = [\n                        ...prevSecciones,\n                        nueva\n                    ];\n                    setObjetos({\n                        \"useSectionsManager.useCallback[handleCrearSeccion]\": (prevObjetos)=>{\n                            const nuevosObjetos = [\n                                ...prevObjetos,\n                                ...objetosDesdePlantilla\n                            ];\n                            // limpiar antes de guardar (tu helper existente)\n                            const seccionesLimpias = limpiarObjetoUndefined(nuevasSecciones);\n                            const objetosLimpios = limpiarObjetoUndefined(nuevosObjetos);\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(ref, {\n                                secciones: seccionesLimpias,\n                                objetos: objetosLimpios\n                            }).then({\n                                \"useSectionsManager.useCallback[handleCrearSeccion]\": ()=>console.log(\"✅ Sección agregada:\", nueva)\n                            }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]).catch({\n                                \"useSectionsManager.useCallback[handleCrearSeccion]\": (error)=>console.error(\"❌ Error al guardar sección\", error)\n                            }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n                            return nuevosObjetos;\n                        }\n                    }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n                    return nuevasSecciones;\n                }\n            }[\"useSectionsManager.useCallback[handleCrearSeccion]\"]);\n        }\n    }[\"useSectionsManager.useCallback[handleCrearSeccion]\"], [\n        slug,\n        setSecciones,\n        setObjetos,\n        crearSeccion,\n        limpiarObjetoUndefined\n    ]);\n    // Listener global: \"crear-seccion\"\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSectionsManager.useEffect\": ()=>{\n            const handler = {\n                \"useSectionsManager.useEffect.handler\": (e)=>{\n                    handleCrearSeccion(e.detail);\n                }\n            }[\"useSectionsManager.useEffect.handler\"];\n            window.addEventListener(\"crear-seccion\", handler);\n            return ({\n                \"useSectionsManager.useEffect\": ()=>window.removeEventListener(\"crear-seccion\", handler)\n            })[\"useSectionsManager.useEffect\"];\n        }\n    }[\"useSectionsManager.useEffect\"], [\n        handleCrearSeccion\n    ]);\n    return {\n        // resize altura\n        controlandoAltura,\n        iniciarControlAltura,\n        finalizarControlAltura,\n        // toggle pantalla\n        togglePantallaCompletaSeccion,\n        // crear sección\n        handleCrearSeccion\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9zZWN0aW9ucy91c2VTZWN0aW9uc01hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLHVEQUF1RDtBQUNVO0FBQ0k7QUFDOUIsQ0FBQyxrQ0FBa0M7QUFFMUU7Ozs7O0NBS0MsR0FDYyxTQUFTUSxtQkFBbUIsRUFDdkNDLElBQUksRUFDSkMsU0FBUyxFQUNUQyxZQUFZLEVBQ1pDLE9BQU8sRUFDUEMsVUFBVSxFQUNWQyxlQUFlLEVBQ2ZDLGtCQUFrQixFQUVsQkMsUUFBUSxFQUNSQyxlQUFlLEVBQ2ZDLGlCQUFpQixFQUVqQkMsWUFBWSxFQUNaQyxrQkFBa0IsRUFDbEJDLHNCQUFzQixFQUV0QkMsMEJBQTBCLEVBQzdCO0lBQ0csTUFBTUMsc0JBQXNCdkIsa0RBQVdBOytEQUFDLENBQUN3QjtZQUNyQyxJQUFJLENBQUNBLE9BQU8sT0FBTztZQUNuQixJQUFJQyxPQUFPQyxRQUFRLENBQUNGLE1BQU1HLE9BQU8sR0FBRyxPQUFPSCxNQUFNRyxPQUFPO1lBQ3hELElBQUlILE1BQU1JLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSUgsT0FBT0MsUUFBUSxDQUFDRixNQUFNSSxPQUFPLENBQUMsRUFBRSxDQUFDRCxPQUFPLEdBQUc7Z0JBQ2pFLE9BQU9ILE1BQU1JLE9BQU8sQ0FBQyxFQUFFLENBQUNELE9BQU87WUFDbkM7WUFDQSxJQUFJSCxNQUFNSyxjQUFjLEVBQUUsQ0FBQyxFQUFFLElBQUlKLE9BQU9DLFFBQVEsQ0FBQ0YsTUFBTUssY0FBYyxDQUFDLEVBQUUsQ0FBQ0YsT0FBTyxHQUFHO2dCQUMvRSxPQUFPSCxNQUFNSyxjQUFjLENBQUMsRUFBRSxDQUFDRixPQUFPO1lBQzFDO1lBQ0EsT0FBTztRQUNYOzhEQUFHLEVBQUU7SUFFTCw2Q0FBNkM7SUFDN0MsOEJBQThCO0lBQzlCLDZDQUE2QztJQUM3QyxNQUFNLENBQUNHLG1CQUFtQkMscUJBQXFCLEdBQUc1QiwrQ0FBUUEs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QU1DLGdCQUFnQjttQ0FBSUQ7bUNBQWdCVDs2QkFBc0I7NEJBRWhFLGlEQUFpRDs0QkFDakQsTUFBTVcsbUJBQW1CdkgsdUJBQXVCb0g7NEJBQ2hELE1BQU1JLGlCQUFpQnhILHVCQUF1QnNIOzRCQUU5Q3RJLDZEQUFTQSxDQUFDMEYsS0FBSztnQ0FDWHJGLFdBQVdrSTtnQ0FDWGhJLFNBQVNpSTs0QkFDYixHQUNLQyxJQUFJO3NGQUFDLElBQU03QyxRQUFRQyxHQUFHLENBQUMsdUJBQXVCOEI7cUZBQzlDZSxLQUFLO3NGQUFDLENBQUM1QyxRQUFVRixRQUFRRSxLQUFLLENBQUMsOEJBQThCQTs7NEJBRWxFLE9BQU93Qzt3QkFDWDs7b0JBRUEsT0FBT0Y7Z0JBQ1g7O1FBQ0o7NkRBQ0E7UUFBQ2hJO1FBQU1FO1FBQWNFO1FBQVlNO1FBQWNFO0tBQXVCO0lBRzFFLG1DQUFtQztJQUNuQ3BCLGdEQUFTQTt3Q0FBQztZQUNOLE1BQU0rSTt3REFBVSxDQUFDakY7b0JBQ2I4RCxtQkFBbUI5RCxFQUFFa0YsTUFBTTtnQkFDL0I7O1lBQ0F0RCxPQUFPVyxnQkFBZ0IsQ0FBQyxpQkFBaUIwQztZQUN6QztnREFBTyxJQUFNckQsT0FBT2EsbUJBQW1CLENBQUMsaUJBQWlCd0M7O1FBQzdEO3VDQUFHO1FBQUNuQjtLQUFtQjtJQUV2QixPQUFPO1FBQ0gsZ0JBQWdCO1FBQ2hCL0Y7UUFDQWdDO1FBQ0EwQjtRQUVBLGtCQUFrQjtRQUNsQjZCO1FBRUEsZ0JBQWdCO1FBQ2hCUTtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcZWRpdG9yXFxzZWN0aW9uc1xcdXNlU2VjdGlvbnNNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2VkaXRvci9zZWN0aW9ucy91c2VTZWN0aW9uc01hbmFnZXIuanNcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGRvYywgdXBkYXRlRG9jLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi8uLi9maXJlYmFzZVwiOyAvLyDinIUgYWp1c3RhZG8gYSB0dSBlc3RydWN0dXJhIHJlYWxcblxuLyoqXG4gKiBNYW5lamEgdG9kbyBsbyByZWxhY2lvbmFkbyBhIHNlY2Npb25lczpcbiAqIC0gcmVzaXplIGRlIGFsdHVyYSAoZHJhZylcbiAqIC0gdG9nZ2xlIFBhbnRhbGxhIE9OL09GRlxuICogLSBjcmVhciBzZWNjacOzbiAoeSBwZXJzaXN0aXIpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVNlY3Rpb25zTWFuYWdlcih7XG4gICAgc2x1ZyxcbiAgICBzZWNjaW9uZXMsXG4gICAgc2V0U2VjY2lvbmVzLFxuICAgIG9iamV0b3MsXG4gICAgc2V0T2JqZXRvcyxcbiAgICBzZWNjaW9uQWN0aXZhSWQsXG4gICAgc2V0U2VjY2lvbkFjdGl2YUlkLFxuXG4gICAgc3RhZ2VSZWYsXG4gICAgc2V0R2xvYmFsQ3Vyc29yLFxuICAgIGNsZWFyR2xvYmFsQ3Vyc29yLFxuXG4gICAgY3JlYXJTZWNjaW9uLFxuICAgIG5vcm1hbGl6YXJBbHRvTW9kbyxcbiAgICBsaW1waWFyT2JqZXRvVW5kZWZpbmVkLFxuXG4gICAgQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEEsXG59KSB7XG4gICAgY29uc3QgZ2V0Q2xpZW50WUZyb21FdmVudCA9IHVzZUNhbGxiYWNrKChldmVudCkgPT4ge1xuICAgICAgICBpZiAoIWV2ZW50KSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShldmVudC5jbGllbnRZKSkgcmV0dXJuIGV2ZW50LmNsaWVudFk7XG4gICAgICAgIGlmIChldmVudC50b3VjaGVzPy5bMF0gJiYgTnVtYmVyLmlzRmluaXRlKGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSkpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudC50b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmNoYW5nZWRUb3VjaGVzPy5bMF0gJiYgTnVtYmVyLmlzRmluaXRlKGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LCBbXSk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBBKSBSZXNpemUgYWx0dXJhIGRlIHNlY2Npw7NuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgY29uc3QgW2NvbnRyb2xhbmRvQWx0dXJhLCBzZXRDb250cm9sYW5kb0FsdHVyYV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3Qgc2VjY2lvbmVzUmVmID0gdXNlUmVmKHNlY2Npb25lcyk7XG4gICAgY29uc3QgcmVzaXplU2Vzc2lvblJlZiA9IHVzZVJlZih7XG4gICAgICAgIGlzUmVzaXppbmc6IGZhbHNlLFxuICAgICAgICBzZWNjaW9uSWQ6IG51bGwsXG4gICAgICAgIGFsdHVyYUluaWNpYWw6IDAsXG4gICAgICAgIHBvc2ljaW9uSW5pY2lhbE1vdXNlOiAwLFxuICAgICAgICBwb3NpY2lvbkFjdHVhbE1vdXNlOiAwLFxuICAgICAgICB1bHRpbWFBbHR1cmFBcGxpY2FkYTogbnVsbCxcbiAgICAgICAgcmFmSWQ6IG51bGwsXG4gICAgICAgIHBvaW50ZXJJZDogbnVsbCxcbiAgICAgICAgdGFyZ2V0Q29uQ2FwdHVyZTogbnVsbCxcbiAgICB9KTtcbiAgICBjb25zdCBsYXN0U3RhcnRSZWYgPSB1c2VSZWYoeyB0eXBlOiBcIlwiLCBhdDogMCB9KTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNlY2Npb25lc1JlZi5jdXJyZW50ID0gc2VjY2lvbmVzO1xuICAgIH0sIFtzZWNjaW9uZXNdKTtcblxuICAgIGNvbnN0IGFwbGljYXJSZXNpemVBbHR1cmEgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSByZXNpemVTZXNzaW9uUmVmLmN1cnJlbnQ7XG4gICAgICAgIGlmICghc2Vzc2lvbi5pc1Jlc2l6aW5nIHx8ICFzZXNzaW9uLnNlY2Npb25JZCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IHNlc3Npb24ucG9zaWNpb25BY3R1YWxNb3VzZSAtIHNlc3Npb24ucG9zaWNpb25JbmljaWFsTW91c2U7XG4gICAgICAgIGNvbnN0IG51ZXZhQWx0dXJhID0gTWF0aC5tYXgoNTAsIE1hdGgucm91bmQoc2Vzc2lvbi5hbHR1cmFJbmljaWFsICsgZGVsdGFZKSk7XG4gICAgICAgIGlmIChzZXNzaW9uLnVsdGltYUFsdHVyYUFwbGljYWRhID09PSBudWV2YUFsdHVyYSkgcmV0dXJuO1xuXG4gICAgICAgIHNlc3Npb24udWx0aW1hQWx0dXJhQXBsaWNhZGEgPSBudWV2YUFsdHVyYTtcblxuICAgICAgICBzZXRTZWNjaW9uZXMoKHByZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBwcmV2Lm1hcCgocykgPT5cbiAgICAgICAgICAgICAgICBzLmlkID09PSBzZXNzaW9uLnNlY2Npb25JZCA/IHsgLi4ucywgYWx0dXJhOiBudWV2YUFsdHVyYSB9IDogc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHNlY2Npb25lc1JlZi5jdXJyZW50ID0gbmV4dDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9KTtcbiAgICB9LCBbc2V0U2VjY2lvbmVzXSk7XG5cbiAgICBjb25zdCBzY2hlZHVsZVJlc2l6ZUZyYW1lID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gcmVzaXplU2Vzc2lvblJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoc2Vzc2lvbi5yYWZJZCAhPSBudWxsKSByZXR1cm47XG5cbiAgICAgICAgc2Vzc2lvbi5yYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICByZXNpemVTZXNzaW9uUmVmLmN1cnJlbnQucmFmSWQgPSBudWxsO1xuICAgICAgICAgICAgYXBsaWNhclJlc2l6ZUFsdHVyYSgpO1xuICAgICAgICB9KTtcbiAgICB9LCBbYXBsaWNhclJlc2l6ZUFsdHVyYV0pO1xuXG4gICAgY29uc3QgaW5pY2lhckNvbnRyb2xBbHR1cmEgPSB1c2VDYWxsYmFjayhcbiAgICAgICAgKGUsIHNlY2Npb25JZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXZ0ID0gZT8uZXZ0O1xuICAgICAgICAgICAgaWYgKCFldnQpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3Qgbm93ID0gdHlwZW9mIHBlcmZvcm1hbmNlICE9PSBcInVuZGVmaW5lZFwiID8gcGVyZm9ybWFuY2Uubm93KCkgOiBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgdGlwbyA9IGV2dC50eXBlIHx8IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBsYXN0ID0gbGFzdFN0YXJ0UmVmLmN1cnJlbnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IGVzRmFsbGJhY2tEdXBsaWNhZG8gPVxuICAgICAgICAgICAgICAgICh0aXBvID09PSBcIm1vdXNlZG93blwiIHx8IHRpcG8gPT09IFwidG91Y2hzdGFydFwiKSAmJlxuICAgICAgICAgICAgICAgIGxhc3QudHlwZSA9PT0gXCJwb2ludGVyZG93blwiICYmXG4gICAgICAgICAgICAgICAgbm93IC0gbGFzdC5hdCA8IDEyMDtcbiAgICAgICAgICAgIGlmIChlc0ZhbGxiYWNrRHVwbGljYWRvKSByZXR1cm47XG5cbiAgICAgICAgICAgIGxhc3RTdGFydFJlZi5jdXJyZW50ID0geyB0eXBlOiB0aXBvLCBhdDogbm93IH07XG5cbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSByZXNpemVTZXNzaW9uUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbi5pc1Jlc2l6aW5nKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IHNlY2Npb24gPSBzZWNjaW9uZXNSZWYuY3VycmVudC5maW5kKChzKSA9PiBzLmlkID09PSBzZWNjaW9uSWQpO1xuICAgICAgICAgICAgaWYgKCFzZWNjaW9uKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IHBvaW50ZXJZID0gZ2V0Q2xpZW50WUZyb21FdmVudChldnQpO1xuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocG9pbnRlclkpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHNldEdsb2JhbEN1cnNvcj8uKFwibnMtcmVzaXplXCIsIHN0YWdlUmVmKTtcbiAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGlmIChldnQuY2FuY2VsYWJsZSkgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHNldENvbnRyb2xhbmRvQWx0dXJhKHNlY2Npb25JZCk7XG5cbiAgICAgICAgICAgIHNlc3Npb24uaXNSZXNpemluZyA9IHRydWU7XG4gICAgICAgICAgICBzZXNzaW9uLnNlY2Npb25JZCA9IHNlY2Npb25JZDtcbiAgICAgICAgICAgIHNlc3Npb24uYWx0dXJhSW5pY2lhbCA9IHNlY2Npb24uYWx0dXJhO1xuICAgICAgICAgICAgc2Vzc2lvbi5wb3NpY2lvbkluaWNpYWxNb3VzZSA9IHBvaW50ZXJZO1xuICAgICAgICAgICAgc2Vzc2lvbi5wb3NpY2lvbkFjdHVhbE1vdXNlID0gcG9pbnRlclk7XG4gICAgICAgICAgICBzZXNzaW9uLnVsdGltYUFsdHVyYUFwbGljYWRhID0gc2VjY2lvbi5hbHR1cmE7XG4gICAgICAgICAgICBzZXNzaW9uLnBvaW50ZXJJZCA9IE51bWJlci5pc0Zpbml0ZShldnQucG9pbnRlcklkKSA/IGV2dC5wb2ludGVySWQgOiBudWxsO1xuICAgICAgICAgICAgc2Vzc2lvbi5yYWZJZCA9IG51bGw7XG5cbiAgICAgICAgICAgIHRyeSB7IGRvY3VtZW50LmJvZHkuc3R5bGUudXNlclNlbGVjdCA9IFwibm9uZVwiOyB9IGNhdGNoIHsgfVxuICAgICAgICAgICAgdHJ5IHsgZG9jdW1lbnQuYm9keS5zdHlsZS50b3VjaEFjdGlvbiA9IFwibm9uZVwiOyB9IGNhdGNoIHsgfVxuXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPVxuICAgICAgICAgICAgICAgIGUudGFyZ2V0Py5nZXRTdGFnZT8uKCk/LmNvbnRlbnQgfHwgZS50YXJnZXQ/LmdldFN0YWdlPy4oKT8uY29udGFpbmVyPy4oKTtcbiAgICAgICAgICAgIHNlc3Npb24udGFyZ2V0Q29uQ2FwdHVyZSA9IHRhcmdldCB8fCBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5zZXRQb2ludGVyQ2FwdHVyZSAmJiBzZXNzaW9uLnBvaW50ZXJJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHsgdGFyZ2V0LnNldFBvaW50ZXJDYXB0dXJlKHNlc3Npb24ucG9pbnRlcklkKTsgfSBjYXRjaCB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW3NldEdsb2JhbEN1cnNvciwgc3RhZ2VSZWYsIGdldENsaWVudFlGcm9tRXZlbnRdXG4gICAgKTtcblxuXG4gICAgY29uc3QgbWFuZWphckNvbnRyb2xBbHR1cmEgPSB1c2VDYWxsYmFjayhcbiAgICAgICAgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSByZXNpemVTZXNzaW9uUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoIXNlc3Npb24uaXNSZXNpemluZykgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGU/LmNhbmNlbGFibGUpIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgcG9zaWNpb25BY3R1YWxNb3VzZSA9IGdldENsaWVudFlGcm9tRXZlbnQoZSk7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShwb3NpY2lvbkFjdHVhbE1vdXNlKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBzZXNzaW9uLnBvc2ljaW9uQWN0dWFsTW91c2UgPSBwb3NpY2lvbkFjdHVhbE1vdXNlO1xuICAgICAgICAgICAgc2NoZWR1bGVSZXNpemVGcmFtZSgpO1xuICAgICAgICB9LFxuICAgICAgICBbZ2V0Q2xpZW50WUZyb21FdmVudCwgc2NoZWR1bGVSZXNpemVGcmFtZV1cbiAgICApO1xuXG4gICAgY29uc3QgZmluYWxpemFyQ29udHJvbEFsdHVyYSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHJlc2l6ZVNlc3Npb25SZWYuY3VycmVudDtcbiAgICAgICAgaWYgKCFzZXNzaW9uLmlzUmVzaXppbmcpIHJldHVybjtcblxuICAgICAgICBpZiAoc2Vzc2lvbi5yYWZJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShzZXNzaW9uLnJhZklkKTtcbiAgICAgICAgICAgIHNlc3Npb24ucmFmSWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGFwbGljYXJSZXNpemVBbHR1cmEoKTtcblxuICAgICAgICBjbGVhckdsb2JhbEN1cnNvcj8uKHN0YWdlUmVmKTtcblxuICAgICAgICB0cnkgeyBkb2N1bWVudC5ib2R5LnN0eWxlLnVzZXJTZWxlY3QgPSBcIlwiOyB9IGNhdGNoIHsgfVxuICAgICAgICB0cnkgeyBkb2N1bWVudC5ib2R5LnN0eWxlLnRvdWNoQWN0aW9uID0gXCJcIjsgfSBjYXRjaCB7IH1cblxuICAgICAgICBpZiAoc2Vzc2lvbi50YXJnZXRDb25DYXB0dXJlPy5yZWxlYXNlUG9pbnRlckNhcHR1cmUgJiYgc2Vzc2lvbi5wb2ludGVySWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdHJ5IHsgc2Vzc2lvbi50YXJnZXRDb25DYXB0dXJlLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShzZXNzaW9uLnBvaW50ZXJJZCk7IH0gY2F0Y2ggeyB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZWNjaW9uSWQgPSBzZXNzaW9uLnNlY2Npb25JZDtcbiAgICAgICAgc2Vzc2lvbi5pc1Jlc2l6aW5nID0gZmFsc2U7XG4gICAgICAgIHNlc3Npb24uc2VjY2lvbklkID0gbnVsbDtcbiAgICAgICAgc2Vzc2lvbi5hbHR1cmFJbmljaWFsID0gMDtcbiAgICAgICAgc2Vzc2lvbi5wb3NpY2lvbkluaWNpYWxNb3VzZSA9IDA7XG4gICAgICAgIHNlc3Npb24ucG9zaWNpb25BY3R1YWxNb3VzZSA9IDA7XG4gICAgICAgIHNlc3Npb24udWx0aW1hQWx0dXJhQXBsaWNhZGEgPSBudWxsO1xuICAgICAgICBzZXNzaW9uLnBvaW50ZXJJZCA9IG51bGw7XG4gICAgICAgIHNlc3Npb24udGFyZ2V0Q29uQ2FwdHVyZSA9IG51bGw7XG5cbiAgICAgICAgc2V0Q29udHJvbGFuZG9BbHR1cmEoZmFsc2UpO1xuXG4gICAgICAgIGlmICh3aW5kb3cuX3NhdmVBbHR1cmFUaW1lb3V0KSBjbGVhclRpbWVvdXQod2luZG93Ll9zYXZlQWx0dXJhVGltZW91dCk7XG4gICAgICAgIHdpbmRvdy5fc2F2ZUFsdHVyYVRpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzbHVnKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWYgPSBkb2MoZGIsIFwiYm9ycmFkb3Jlc1wiLCBzbHVnKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVEb2MocmVmLCB7XG4gICAgICAgICAgICAgICAgICAgIHNlY2Npb25lczogc2VjY2lvbmVzUmVmLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgIHVsdGltYUVkaWNpb246IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY2xlYXJHbG9iYWxDdXJzb3I/LihzdGFnZVJlZik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLinIUgQWx0dXJhIGd1YXJkYWRhOlwiLCBzZWNjaW9uSWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGd1YXJkYW5kbyBhbHR1cmE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMjIwKTtcbiAgICB9LCBbYXBsaWNhclJlc2l6ZUFsdHVyYSwgc2x1ZywgY2xlYXJHbG9iYWxDdXJzb3IsIHN0YWdlUmVmXSk7XG5cblxuICAgIC8vIGxpc3RlbmVycyBnbG9iYWxlcyAobW91c2UvdG91Y2gvcG9pbnRlcilcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNvbnRyb2xhbmRvQWx0dXJhKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaGFzUG9pbnRlckV2ZW50cyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5Qb2ludGVyRXZlbnQgIT09IFwidW5kZWZpbmVkXCI7XG4gICAgICAgIGlmIChoYXNQb2ludGVyRXZlbnRzKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIG1hbmVqYXJDb250cm9sQWx0dXJhLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIGZpbmFsaXphckNvbnRyb2xBbHR1cmEsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbWFuZWphckNvbnRyb2xBbHR1cmEsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG1hbmVqYXJDb250cm9sQWx0dXJhLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIGZpbmFsaXphckNvbnRyb2xBbHR1cmEsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBmaW5hbGl6YXJDb250cm9sQWx0dXJhKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmNhbmNlbFwiLCBmaW5hbGl6YXJDb250cm9sQWx0dXJhKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgbWFuZWphckNvbnRyb2xBbHR1cmEpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmluYWxpemFyQ29udHJvbEFsdHVyYSk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1hbmVqYXJDb250cm9sQWx0dXJhKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgbWFuZWphckNvbnRyb2xBbHR1cmEpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIGZpbmFsaXphckNvbnRyb2xBbHR1cmEpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsIGZpbmFsaXphckNvbnRyb2xBbHR1cmEpO1xuICAgICAgICB9O1xuICAgIH0sIFtjb250cm9sYW5kb0FsdHVyYSwgbWFuZWphckNvbnRyb2xBbHR1cmEsIGZpbmFsaXphckNvbnRyb2xBbHR1cmFdKTtcblxuICAgIC8vIGZhaWxzYWZlcyAocG9pbnRlcnVwLCBibHVyLCB2aXNpYmlsaXR5LCBlc2MuLi4pXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFjb250cm9sYW5kb0FsdHVyYSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGVuZCA9ICgpID0+IGZpbmFsaXphckNvbnRyb2xBbHR1cmEoKTtcbiAgICAgICAgY29uc3QgaGFuZGxlUG9pbnRlclVwID0gZW5kO1xuICAgICAgICBjb25zdCBoYW5kbGVQb2ludGVyQ2FuY2VsID0gZW5kO1xuICAgICAgICBjb25zdCBoYW5kbGVNb3VzZUxlYXZlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXYucmVsYXRlZFRhcmdldCA9PT0gbnVsbCkgZW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZUJsdXIgPSBlbmQ7XG4gICAgICAgIGNvbnN0IGhhbmRsZVZpc2liaWxpdHkgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlICE9PSBcInZpc2libGVcIikgZW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSBlbmQoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCBoYW5kbGVQb2ludGVyVXAsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIGhhbmRsZVBvaW50ZXJDYW5jZWwsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGhhbmRsZU1vdXNlTGVhdmUsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZUJsdXIsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgaGFuZGxlVmlzaWJpbGl0eSwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duLCB7IGNhcHR1cmU6IHRydWUgfSk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIGhhbmRsZVBvaW50ZXJVcCwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIGhhbmRsZVBvaW50ZXJDYW5jZWwsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBoYW5kbGVNb3VzZUxlYXZlLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlQmx1ciwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgaGFuZGxlVmlzaWJpbGl0eSwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5RG93biwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICB9O1xuICAgIH0sIFtjb250cm9sYW5kb0FsdHVyYSwgZmluYWxpemFyQ29udHJvbEFsdHVyYV0pO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQikgVG9nZ2xlIFBhbnRhbGxhIE9OL09GRlxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGNvbnN0IHRvZ2dsZVBhbnRhbGxhQ29tcGxldGFTZWNjaW9uID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChzZWNjaW9uSWQpID0+IHtcbiAgICAgICAgICAgIGlmICghc2VjY2lvbklkKSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIDEpIEFjdHVhbGl6YXIgZXN0YWRvIGxvY2FsXG4gICAgICAgICAgICBzZXRTZWNjaW9uZXMoKHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gcHJldi5tYXAoKHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuaWQgIT09IHNlY2Npb25JZCkgcmV0dXJuIHM7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb0FjdHVhbCA9IG5vcm1hbGl6YXJBbHRvTW9kbyhzLmFsdG9Nb2RvKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb051ZXZvID0gbW9kb0FjdHVhbCA9PT0gXCJwYW50YWxsYVwiID8gXCJmaWpvXCIgOiBcInBhbnRhbGxhXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZG9OdWV2byA9PT0gXCJwYW50YWxsYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0b01vZG86IFwicGFudGFsbGFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHR1cmFGaWpvQmFja3VwOiBOdW1iZXIuaXNGaW5pdGUocy5hbHR1cmEpID8gcy5hbHR1cmEgOiA2MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0dXJhOiBBTFRVUkFfUkVGRVJFTkNJQV9QQU5UQUxMQSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrdXAgPSBOdW1iZXIuaXNGaW5pdGUocy5hbHR1cmFGaWpvQmFja3VwKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzLmFsdHVyYUZpam9CYWNrdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcy5hbHR1cmE7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhbHR1cmFGaWpvQmFja3VwLCAuLi5yZXN0IH0gPSBzO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0b01vZG86IFwiZmlqb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0dXJhOiBOdW1iZXIuaXNGaW5pdGUoYmFja3VwKSA/IGJhY2t1cCA6IDYwMCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIDIpIFBlcnNpc3RpciBlbiBGaXJlc3RvcmUgdXNhbmRvIGVsIHNuYXBzaG90IGFjdHVhbFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXNsdWcpIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJib3JyYWRvcmVzXCIsIHNsdWcpO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjY2lvbmVzTmV4dCA9IHNlY2Npb25lcy5tYXAoKHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuaWQgIT09IHNlY2Npb25JZCkgcmV0dXJuIHM7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb0FjdHVhbCA9IG5vcm1hbGl6YXJBbHRvTW9kbyhzLmFsdG9Nb2RvKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kb051ZXZvID0gbW9kb0FjdHVhbCA9PT0gXCJwYW50YWxsYVwiID8gXCJmaWpvXCIgOiBcInBhbnRhbGxhXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZG9OdWV2byA9PT0gXCJwYW50YWxsYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0b01vZG86IFwicGFudGFsbGFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHR1cmFGaWpvQmFja3VwOiBOdW1iZXIuaXNGaW5pdGUocy5hbHR1cmEpID8gcy5hbHR1cmEgOiA2MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0dXJhOiBBTFRVUkFfUkVGRVJFTkNJQV9QQU5UQUxMQSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrdXAgPSBOdW1iZXIuaXNGaW5pdGUocy5hbHR1cmFGaWpvQmFja3VwKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzLmFsdHVyYUZpam9CYWNrdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcy5hbHR1cmE7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhbHR1cmFGaWpvQmFja3VwLCAuLi5yZXN0IH0gPSBzO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0b01vZG86IFwiZmlqb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0dXJhOiBOdW1iZXIuaXNGaW5pdGUoYmFja3VwKSA/IGJhY2t1cCA6IDYwMCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgc2VjY2lvbmVzOiBzZWNjaW9uZXNOZXh0LFxuICAgICAgICAgICAgICAgICAgICB1bHRpbWFFZGljaW9uOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIGFsdG9Nb2RvIGFjdHVhbGl6YWRvOlwiLCBzZWNjaW9uSWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZ3VhcmRhbmRvIGFsdG9Nb2RvOlwiLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW3NsdWcsIHNlY2Npb25lcywgc2V0U2VjY2lvbmVzLCBub3JtYWxpemFyQWx0b01vZG8sIEFMVFVSQV9SRUZFUkVOQ0lBX1BBTlRBTExBXVxuICAgICk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBDKSBDcmVhciBzZWNjacOzbiAoeSBwZXJzaXN0aXIpXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgY29uc3QgaGFuZGxlQ3JlYXJTZWNjaW9uID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChkYXRvcykgPT4ge1xuICAgICAgICAgICAgaWYgKCFzbHVnKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCByZWYgPSBkb2MoZGIsIFwiYm9ycmFkb3Jlc1wiLCBzbHVnKTtcblxuICAgICAgICAgICAgc2V0U2VjY2lvbmVzKChwcmV2U2VjY2lvbmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVldmEgPSBjcmVhclNlY2Npb24oZGF0b3MsIHByZXZTZWNjaW9uZXMpO1xuXG4gICAgICAgICAgICAgICAgbGV0IG9iamV0b3NEZXNkZVBsYW50aWxsYSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRhdG9zPy5kZXNkZVBsYW50aWxsYSAmJiBBcnJheS5pc0FycmF5KGRhdG9zLm9iamV0b3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamV0b3NEZXNkZVBsYW50aWxsYSA9IGRhdG9zLm9iamV0b3MubWFwKChvYmopID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5vYmosXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJvYmotXCIgKyBEYXRlLm5vdygpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDYpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjY2lvbklkOiBudWV2YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZhc1NlY2Npb25lcyA9IFsuLi5wcmV2U2VjY2lvbmVzLCBudWV2YV07XG5cbiAgICAgICAgICAgICAgICBzZXRPYmpldG9zKChwcmV2T2JqZXRvcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBudWV2b3NPYmpldG9zID0gWy4uLnByZXZPYmpldG9zLCAuLi5vYmpldG9zRGVzZGVQbGFudGlsbGFdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbXBpYXIgYW50ZXMgZGUgZ3VhcmRhciAodHUgaGVscGVyIGV4aXN0ZW50ZSlcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VjY2lvbmVzTGltcGlhcyA9IGxpbXBpYXJPYmpldG9VbmRlZmluZWQobnVldmFzU2VjY2lvbmVzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZXRvc0xpbXBpb3MgPSBsaW1waWFyT2JqZXRvVW5kZWZpbmVkKG51ZXZvc09iamV0b3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZURvYyhyZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY2Npb25lczogc2VjY2lvbmVzTGltcGlhcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamV0b3M6IG9iamV0b3NMaW1waW9zLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coXCLinIUgU2VjY2nDs24gYWdyZWdhZGE6XCIsIG51ZXZhKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgYWwgZ3VhcmRhciBzZWNjacOzblwiLCBlcnJvcikpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWV2b3NPYmpldG9zO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51ZXZhc1NlY2Npb25lcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbc2x1Zywgc2V0U2VjY2lvbmVzLCBzZXRPYmpldG9zLCBjcmVhclNlY2Npb24sIGxpbXBpYXJPYmpldG9VbmRlZmluZWRdXG4gICAgKTtcblxuICAgIC8vIExpc3RlbmVyIGdsb2JhbDogXCJjcmVhci1zZWNjaW9uXCJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZUNyZWFyU2VjY2lvbihlLmRldGFpbCk7XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY3JlYXItc2VjY2lvblwiLCBoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY3JlYXItc2VjY2lvblwiLCBoYW5kbGVyKTtcbiAgICB9LCBbaGFuZGxlQ3JlYXJTZWNjaW9uXSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICAvLyByZXNpemUgYWx0dXJhXG4gICAgICAgIGNvbnRyb2xhbmRvQWx0dXJhLFxuICAgICAgICBpbmljaWFyQ29udHJvbEFsdHVyYSxcbiAgICAgICAgZmluYWxpemFyQ29udHJvbEFsdHVyYSxcblxuICAgICAgICAvLyB0b2dnbGUgcGFudGFsbGFcbiAgICAgICAgdG9nZ2xlUGFudGFsbGFDb21wbGV0YVNlY2Npb24sXG5cbiAgICAgICAgLy8gY3JlYXIgc2VjY2nDs25cbiAgICAgICAgaGFuZGxlQ3JlYXJTZWNjaW9uLFxuICAgIH07XG59XG5cblxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJkb2MiLCJ1cGRhdGVEb2MiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJkYiIsInVzZVNlY3Rpb25zTWFuYWdlciIsInNsdWciLCJzZWNjaW9uZXMiLCJzZXRTZWNjaW9uZXMiLCJvYmpldG9zIiwic2V0T2JqZXRvcyIsInNlY2Npb25BY3RpdmFJZCIsInNldFNlY2Npb25BY3RpdmFJZCIsInN0YWdlUmVmIiwic2V0R2xvYmFsQ3Vyc29yIiwiY2xlYXJHbG9iYWxDdXJzb3IiLCJjcmVhclNlY2Npb24iLCJub3JtYWxpemFyQWx0b01vZG8iLCJsaW1waWFyT2JqZXRvVW5kZWZpbmVkIiwiQUxUVVJBX1JFRkVSRU5DSUFfUEFOVEFMTEEiLCJnZXRDbGllbnRZRnJvbUV2ZW50IiwiZXZlbnQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImNsaWVudFkiLCJ0b3VjaGVzIiwiY2hhbmdlZFRvdWNoZXMiLCJjb250cm9sYW5kb0FsdHVyYSIsInNldENvbnRyb2xhbmRvQWx0dXJhIiwic2VjY2lvbmVzUmVmIiwicmVzaXplU2Vzc2lvblJlZiIsImlzUmVzaXppbmciLCJzZWNjaW9uSWQiLCJhbHR1cmFJbmljaWFsIiwicG9zaWNpb25JbmljaWFsTW91c2UiLCJwb3NpY2lvbkFjdHVhbE1vdXNlIiwidWx0aW1hQWx0dXJhQXBsaWNhZGEiLCJyYWZJZCIsInBvaW50ZXJJZCIsInRhcmdldENvbkNhcHR1cmUiLCJsYXN0U3RhcnRSZWYiLCJ0eXBlIiwiYXQiLCJjdXJyZW50IiwiYXBsaWNhclJlc2l6ZUFsdHVyYSIsInNlc3Npb24iLCJkZWx0YVkiLCJudWV2YUFsdHVyYSIsIk1hdGgiLCJtYXgiLCJyb3VuZCIsInByZXYiLCJuZXh0IiwibWFwIiwicyIsImlkIiwiYWx0dXJhIiwic2NoZWR1bGVSZXNpemVGcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImluaWNpYXJDb250cm9sQWx0dXJhIiwiZSIsImV2dCIsIm5vdyIsInBlcmZvcm1hbmNlIiwiRGF0ZSIsInRpcG8iLCJsYXN0IiwiZXNGYWxsYmFja0R1cGxpY2FkbyIsInNlY2Npb24iLCJmaW5kIiwicG9pbnRlclkiLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxhYmxlIiwicHJldmVudERlZmF1bHQiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsInVzZXJTZWxlY3QiLCJ0b3VjaEFjdGlvbiIsInRhcmdldCIsImdldFN0YWdlIiwiY29udGVudCIsImNvbnRhaW5lciIsInNldFBvaW50ZXJDYXB0dXJlIiwibWFuZWphckNvbnRyb2xBbHR1cmEiLCJmaW5hbGl6YXJDb250cm9sQWx0dXJhIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZWxlYXNlUG9pbnRlckNhcHR1cmUiLCJ3aW5kb3ciLCJfc2F2ZUFsdHVyYVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwicmVmIiwidWx0aW1hRWRpY2lvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImhhc1BvaW50ZXJFdmVudHMiLCJQb2ludGVyRXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicGFzc2l2ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlbmQiLCJoYW5kbGVQb2ludGVyVXAiLCJoYW5kbGVQb2ludGVyQ2FuY2VsIiwiaGFuZGxlTW91c2VMZWF2ZSIsImV2IiwicmVsYXRlZFRhcmdldCIsImhhbmRsZUJsdXIiLCJoYW5kbGVWaXNpYmlsaXR5IiwidmlzaWJpbGl0eVN0YXRlIiwiaGFuZGxlS2V5RG93biIsImtleSIsImNhcHR1cmUiLCJ0b2dnbGVQYW50YWxsYUNvbXBsZXRhU2VjY2lvbiIsIm1vZG9BY3R1YWwiLCJhbHRvTW9kbyIsIm1vZG9OdWV2byIsImFsdHVyYUZpam9CYWNrdXAiLCJiYWNrdXAiLCJyZXN0Iiwic2VjY2lvbmVzTmV4dCIsImhhbmRsZUNyZWFyU2VjY2lvbiIsImRhdG9zIiwicHJldlNlY2Npb25lcyIsIm51ZXZhIiwib2JqZXRvc0Rlc2RlUGxhbnRpbGxhIiwiZGVzZGVQbGFudGlsbGEiLCJBcnJheSIsImlzQXJyYXkiLCJvYmoiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsIm51ZXZhc1NlY2Npb25lcyIsInByZXZPYmpldG9zIiwibnVldm9zT2JqZXRvcyIsInNlY2Npb25lc0xpbXBpYXMiLCJvYmpldG9zTGltcGlvcyIsInRoZW4iLCJjYXRjaCIsImhhbmRsZXIiLCJkZXRhaWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/sections/useSectionsManager.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/selection/selectionUtils.js":
/*!***********************************************************!*\
  !*** ./src/components/editor/selection/selectionUtils.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   detectarInterseccionLinea: () => (/* binding */ detectarInterseccionLinea),\n/* harmony export */   validarPuntosLinea: () => (/* binding */ validarPuntosLinea)\n/* harmony export */ });\n// src/components/editor/selection/selectionUtils.js\n/**\r\n * 🎯 Normaliza puntos de línea: asegura 4 valores numéricos.\r\n * Si falta alguno, usa 0 para inicio y 100 para x2 como fallback.\r\n */ function validarPuntosLinea(obj) {\n    const puntosActuales = obj.points || [];\n    const puntosValidos = [];\n    for(let i = 0; i < 4; i++){\n        const valor = parseFloat(puntosActuales[i]);\n        puntosValidos.push(isNaN(valor) ? i === 2 ? 100 : 0 : valor);\n    }\n    return {\n        ...obj,\n        points: puntosValidos\n    };\n}\n/**\r\n * 🔍 Detecta intersección de una línea con un área rectangular.\r\n * Usa helpers de colisión línea-rect y línea-línea.\r\n */ function detectarInterseccionLinea(lineObj, area, stage) {\n    const node = stage.findOne(`#${lineObj.id}`);\n    if (!node) return false;\n    const nodePos = node.position();\n    const points = lineObj.points || [\n        0,\n        0,\n        100,\n        0\n    ];\n    const cleanPoints = [\n        parseFloat(points[0]) || 0,\n        parseFloat(points[1]) || 0,\n        parseFloat(points[2]) || 100,\n        parseFloat(points[3]) || 0\n    ];\n    const startX = nodePos.x + cleanPoints[0];\n    const startY = nodePos.y + cleanPoints[1];\n    const endX = nodePos.x + cleanPoints[2];\n    const endY = nodePos.y + cleanPoints[3];\n    // ¿alguno de los puntos extremos dentro del área?\n    const startDentro = startX >= area.x && startX <= area.x + area.width && startY >= area.y && startY <= area.y + area.height;\n    const endDentro = endX >= area.x && endX <= area.x + area.width && endY >= area.y && endY <= area.y + area.height;\n    // chequeo por bounding box de la línea contra el área\n    const lineMinX = Math.min(startX, endX);\n    const lineMaxX = Math.max(startX, endX);\n    const lineMinY = Math.min(startY, endY);\n    const lineMaxY = Math.max(startY, endY);\n    const areaIntersectaLinea = !(area.x > lineMaxX || area.x + area.width < lineMinX || area.y > lineMaxY || area.y + area.height < lineMinY);\n    return startDentro || endDentro || areaIntersectaLinea;\n}\n/**\r\n * Helper: intersección línea con rectángulo (usado internamente).\r\n */ function lineIntersectsRect(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectBottom) {\n    return lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectRight, rectTop) || lineIntersectsLine(x1, y1, x2, y2, rectRight, rectTop, rectRight, rectBottom) || lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectBottom, rectRight, rectBottom) || lineIntersectsLine(x1, y1, x2, y2, rectLeft, rectTop, rectLeft, rectBottom);\n}\n/**\r\n * Helper: intersección entre dos segmentos de línea.\r\n */ function lineIntersectsLine(x1, y1, x2, y2, x3, y3, x4, y4) {\n    const denom = (y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1);\n    if (denom === 0) return false;\n    const ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denom;\n    const ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denom;\n    return ua >= 0 && ua <= 1 && ub >= 0 && ub <= 1;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9zZWxlY3Rpb24vc2VsZWN0aW9uVXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBb0Q7QUFFcEQ7OztDQUdDLEdBQ00sU0FBU0EsbUJBQW1CQyxHQUFHO0lBQ3BDLE1BQU1DLGlCQUFpQkQsSUFBSUUsTUFBTSxJQUFJLEVBQUU7SUFDdkMsTUFBTUMsZ0JBQWdCLEVBQUU7SUFFeEIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUksR0FBR0EsSUFBSztRQUMxQixNQUFNQyxRQUFRQyxXQUFXTCxjQUFjLENBQUNHLEVBQUU7UUFDMUNELGNBQWNJLElBQUksQ0FBQ0MsTUFBTUgsU0FBVUQsTUFBTSxJQUFJLE1BQU0sSUFBS0M7SUFDMUQ7SUFFQSxPQUFPO1FBQ0wsR0FBR0wsR0FBRztRQUNORSxRQUFRQztJQUNWO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTTSwwQkFBMEJDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxLQUFLO0lBQzVELE1BQU1DLE9BQU9ELE1BQU1FLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRUosUUFBUUssRUFBRSxFQUFFO0lBQzNDLElBQUksQ0FBQ0YsTUFBTSxPQUFPO0lBRWxCLE1BQU1HLFVBQVVILEtBQUtJLFFBQVE7SUFDN0IsTUFBTWYsU0FBU1EsUUFBUVIsTUFBTSxJQUFJO1FBQUM7UUFBRztRQUFHO1FBQUs7S0FBRTtJQUUvQyxNQUFNZ0IsY0FBYztRQUNsQlosV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztRQUN6QkksV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztRQUN6QkksV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztRQUN6QkksV0FBV0osTUFBTSxDQUFDLEVBQUUsS0FBSztLQUMxQjtJQUVELE1BQU1pQixTQUFTSCxRQUFRSSxDQUFDLEdBQUdGLFdBQVcsQ0FBQyxFQUFFO0lBQ3pDLE1BQU1HLFNBQVNMLFFBQVFNLENBQUMsR0FBR0osV0FBVyxDQUFDLEVBQUU7SUFDekMsTUFBTUssT0FBT1AsUUFBUUksQ0FBQyxHQUFHRixXQUFXLENBQUMsRUFBRTtJQUN2QyxNQUFNTSxPQUFPUixRQUFRTSxDQUFDLEdBQUdKLFdBQVcsQ0FBQyxFQUFFO0lBRXZDLGtEQUFrRDtJQUNsRCxNQUFNTyxjQUNKTixVQUFVUixLQUFLUyxDQUFDLElBQ2hCRCxVQUFVUixLQUFLUyxDQUFDLEdBQUdULEtBQUtlLEtBQUssSUFDN0JMLFVBQVVWLEtBQUtXLENBQUMsSUFDaEJELFVBQVVWLEtBQUtXLENBQUMsR0FBR1gsS0FBS2dCLE1BQU07SUFFaEMsTUFBTUMsWUFDSkwsUUFBUVosS0FBS1MsQ0FBQyxJQUNkRyxRQUFRWixLQUFLUyxDQUFDLEdBQUdULEtBQUtlLEtBQUssSUFDM0JGLFFBQVFiLEtBQUtXLENBQUMsSUFDZEUsUUFBUWIsS0FBS1csQ0FBQyxHQUFHWCxLQUFLZ0IsTUFBTTtJQUU5QixzREFBc0Q7SUFDdEQsTUFBTUUsV0FBV0MsS0FBS0MsR0FBRyxDQUFDWixRQUFRSTtJQUNsQyxNQUFNUyxXQUFXRixLQUFLRyxHQUFHLENBQUNkLFFBQVFJO0lBQ2xDLE1BQU1XLFdBQVdKLEtBQUtDLEdBQUcsQ0FBQ1YsUUFBUUc7SUFDbEMsTUFBTVcsV0FBV0wsS0FBS0csR0FBRyxDQUFDWixRQUFRRztJQUVsQyxNQUFNWSxzQkFBc0IsQ0FDMUJ6QixDQUFBQSxLQUFLUyxDQUFDLEdBQUdZLFlBQ1RyQixLQUFLUyxDQUFDLEdBQUdULEtBQUtlLEtBQUssR0FBR0csWUFDdEJsQixLQUFLVyxDQUFDLEdBQUdhLFlBQ1R4QixLQUFLVyxDQUFDLEdBQUdYLEtBQUtnQixNQUFNLEdBQUdPLFFBQU87SUFHaEMsT0FBT1QsZUFBZUcsYUFBYVE7QUFDckM7QUFFQTs7Q0FFQyxHQUNELFNBQVNDLG1CQUFtQkMsRUFBRSxFQUFFQyxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sRUFBRUMsU0FBUyxFQUFFQyxVQUFVO0lBQ2xGLE9BQ0VDLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsVUFBVUMsU0FBU0MsV0FBV0QsWUFDakVHLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUcsV0FBV0QsU0FBU0MsV0FBV0MsZUFDbEVDLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsVUFBVUcsWUFBWUQsV0FBV0MsZUFDcEVDLG1CQUFtQlIsSUFBSUMsSUFBSUMsSUFBSUMsSUFBSUMsVUFBVUMsU0FBU0QsVUFBVUc7QUFFcEU7QUFFQTs7Q0FFQyxHQUNELFNBQVNDLG1CQUFtQlIsRUFBRSxFQUFFQyxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFFTSxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxFQUFFO0lBQ3hELE1BQU1DLFFBQVEsQ0FBQ0QsS0FBS0YsRUFBQyxJQUFNUixDQUFBQSxLQUFLRixFQUFDLElBQUssQ0FBQ1csS0FBS0YsRUFBQyxJQUFNTixDQUFBQSxLQUFLRixFQUFDO0lBQ3pELElBQUlZLFVBQVUsR0FBRyxPQUFPO0lBRXhCLE1BQU1DLEtBQUssQ0FBQyxDQUFDSCxLQUFLRixFQUFDLElBQU1SLENBQUFBLEtBQUtTLEVBQUMsSUFBSyxDQUFDRSxLQUFLRixFQUFDLElBQU1WLENBQUFBLEtBQUtTLEVBQUMsQ0FBQyxJQUFLSTtJQUM3RCxNQUFNRSxLQUFLLENBQUMsQ0FBQ2IsS0FBS0YsRUFBQyxJQUFNQyxDQUFBQSxLQUFLUyxFQUFDLElBQUssQ0FBQ1AsS0FBS0YsRUFBQyxJQUFNRCxDQUFBQSxLQUFLUyxFQUFDLENBQUMsSUFBS0k7SUFFN0QsT0FBT0MsTUFBTSxLQUFLQSxNQUFNLEtBQUtDLE1BQU0sS0FBS0EsTUFBTTtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxlZGl0b3JcXHNlbGVjdGlvblxcc2VsZWN0aW9uVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvZWRpdG9yL3NlbGVjdGlvbi9zZWxlY3Rpb25VdGlscy5qc1xyXG5cclxuLyoqXHJcbiAqIPCfjq8gTm9ybWFsaXphIHB1bnRvcyBkZSBsw61uZWE6IGFzZWd1cmEgNCB2YWxvcmVzIG51bcOpcmljb3MuXHJcbiAqIFNpIGZhbHRhIGFsZ3VubywgdXNhIDAgcGFyYSBpbmljaW8geSAxMDAgcGFyYSB4MiBjb21vIGZhbGxiYWNrLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXJQdW50b3NMaW5lYShvYmopIHtcclxuICBjb25zdCBwdW50b3NBY3R1YWxlcyA9IG9iai5wb2ludHMgfHwgW107XHJcbiAgY29uc3QgcHVudG9zVmFsaWRvcyA9IFtdO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgY29uc3QgdmFsb3IgPSBwYXJzZUZsb2F0KHB1bnRvc0FjdHVhbGVzW2ldKTtcclxuICAgIHB1bnRvc1ZhbGlkb3MucHVzaChpc05hTih2YWxvcikgPyAoaSA9PT0gMiA/IDEwMCA6IDApIDogdmFsb3IpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLm9iaixcclxuICAgIHBvaW50czogcHVudG9zVmFsaWRvcyxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICog8J+UjSBEZXRlY3RhIGludGVyc2VjY2nDs24gZGUgdW5hIGzDrW5lYSBjb24gdW4gw6FyZWEgcmVjdGFuZ3VsYXIuXHJcbiAqIFVzYSBoZWxwZXJzIGRlIGNvbGlzacOzbiBsw61uZWEtcmVjdCB5IGzDrW5lYS1sw61uZWEuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0YXJJbnRlcnNlY2Npb25MaW5lYShsaW5lT2JqLCBhcmVhLCBzdGFnZSkge1xyXG4gIGNvbnN0IG5vZGUgPSBzdGFnZS5maW5kT25lKGAjJHtsaW5lT2JqLmlkfWApO1xyXG4gIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICBjb25zdCBub2RlUG9zID0gbm9kZS5wb3NpdGlvbigpO1xyXG4gIGNvbnN0IHBvaW50cyA9IGxpbmVPYmoucG9pbnRzIHx8IFswLCAwLCAxMDAsIDBdO1xyXG5cclxuICBjb25zdCBjbGVhblBvaW50cyA9IFtcclxuICAgIHBhcnNlRmxvYXQocG9pbnRzWzBdKSB8fCAwLFxyXG4gICAgcGFyc2VGbG9hdChwb2ludHNbMV0pIHx8IDAsXHJcbiAgICBwYXJzZUZsb2F0KHBvaW50c1syXSkgfHwgMTAwLFxyXG4gICAgcGFyc2VGbG9hdChwb2ludHNbM10pIHx8IDAsXHJcbiAgXTtcclxuXHJcbiAgY29uc3Qgc3RhcnRYID0gbm9kZVBvcy54ICsgY2xlYW5Qb2ludHNbMF07XHJcbiAgY29uc3Qgc3RhcnRZID0gbm9kZVBvcy55ICsgY2xlYW5Qb2ludHNbMV07XHJcbiAgY29uc3QgZW5kWCA9IG5vZGVQb3MueCArIGNsZWFuUG9pbnRzWzJdO1xyXG4gIGNvbnN0IGVuZFkgPSBub2RlUG9zLnkgKyBjbGVhblBvaW50c1szXTtcclxuXHJcbiAgLy8gwr9hbGd1bm8gZGUgbG9zIHB1bnRvcyBleHRyZW1vcyBkZW50cm8gZGVsIMOhcmVhP1xyXG4gIGNvbnN0IHN0YXJ0RGVudHJvID1cclxuICAgIHN0YXJ0WCA+PSBhcmVhLnggJiZcclxuICAgIHN0YXJ0WCA8PSBhcmVhLnggKyBhcmVhLndpZHRoICYmXHJcbiAgICBzdGFydFkgPj0gYXJlYS55ICYmXHJcbiAgICBzdGFydFkgPD0gYXJlYS55ICsgYXJlYS5oZWlnaHQ7XHJcblxyXG4gIGNvbnN0IGVuZERlbnRybyA9XHJcbiAgICBlbmRYID49IGFyZWEueCAmJlxyXG4gICAgZW5kWCA8PSBhcmVhLnggKyBhcmVhLndpZHRoICYmXHJcbiAgICBlbmRZID49IGFyZWEueSAmJlxyXG4gICAgZW5kWSA8PSBhcmVhLnkgKyBhcmVhLmhlaWdodDtcclxuXHJcbiAgLy8gY2hlcXVlbyBwb3IgYm91bmRpbmcgYm94IGRlIGxhIGzDrW5lYSBjb250cmEgZWwgw6FyZWFcclxuICBjb25zdCBsaW5lTWluWCA9IE1hdGgubWluKHN0YXJ0WCwgZW5kWCk7XHJcbiAgY29uc3QgbGluZU1heFggPSBNYXRoLm1heChzdGFydFgsIGVuZFgpO1xyXG4gIGNvbnN0IGxpbmVNaW5ZID0gTWF0aC5taW4oc3RhcnRZLCBlbmRZKTtcclxuICBjb25zdCBsaW5lTWF4WSA9IE1hdGgubWF4KHN0YXJ0WSwgZW5kWSk7XHJcblxyXG4gIGNvbnN0IGFyZWFJbnRlcnNlY3RhTGluZWEgPSAhKFxyXG4gICAgYXJlYS54ID4gbGluZU1heFggfHxcclxuICAgIGFyZWEueCArIGFyZWEud2lkdGggPCBsaW5lTWluWCB8fFxyXG4gICAgYXJlYS55ID4gbGluZU1heFkgfHxcclxuICAgIGFyZWEueSArIGFyZWEuaGVpZ2h0IDwgbGluZU1pbllcclxuICApO1xyXG5cclxuICByZXR1cm4gc3RhcnREZW50cm8gfHwgZW5kRGVudHJvIHx8IGFyZWFJbnRlcnNlY3RhTGluZWE7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXI6IGludGVyc2VjY2nDs24gbMOtbmVhIGNvbiByZWN0w6FuZ3VsbyAodXNhZG8gaW50ZXJuYW1lbnRlKS5cclxuICovXHJcbmZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzUmVjdCh4MSwgeTEsIHgyLCB5MiwgcmVjdExlZnQsIHJlY3RUb3AsIHJlY3RSaWdodCwgcmVjdEJvdHRvbSkge1xyXG4gIHJldHVybiAoXHJcbiAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RMZWZ0LCByZWN0VG9wLCByZWN0UmlnaHQsIHJlY3RUb3ApIHx8XHJcbiAgICBsaW5lSW50ZXJzZWN0c0xpbmUoeDEsIHkxLCB4MiwgeTIsIHJlY3RSaWdodCwgcmVjdFRvcCwgcmVjdFJpZ2h0LCByZWN0Qm90dG9tKSB8fFxyXG4gICAgbGluZUludGVyc2VjdHNMaW5lKHgxLCB5MSwgeDIsIHkyLCByZWN0TGVmdCwgcmVjdEJvdHRvbSwgcmVjdFJpZ2h0LCByZWN0Qm90dG9tKSB8fFxyXG4gICAgbGluZUludGVyc2VjdHNMaW5lKHgxLCB5MSwgeDIsIHkyLCByZWN0TGVmdCwgcmVjdFRvcCwgcmVjdExlZnQsIHJlY3RCb3R0b20pXHJcbiAgKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhlbHBlcjogaW50ZXJzZWNjacOzbiBlbnRyZSBkb3Mgc2VnbWVudG9zIGRlIGzDrW5lYS5cclxuICovXHJcbmZ1bmN0aW9uIGxpbmVJbnRlcnNlY3RzTGluZSh4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQpIHtcclxuICBjb25zdCBkZW5vbSA9ICh5NCAtIHkzKSAqICh4MiAtIHgxKSAtICh4NCAtIHgzKSAqICh5MiAtIHkxKTtcclxuICBpZiAoZGVub20gPT09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgY29uc3QgdWEgPSAoKHg0IC0geDMpICogKHkxIC0geTMpIC0gKHk0IC0geTMpICogKHgxIC0geDMpKSAvIGRlbm9tO1xyXG4gIGNvbnN0IHViID0gKCh4MiAtIHgxKSAqICh5MSAtIHkzKSAtICh5MiAtIHkxKSAqICh4MSAtIHgzKSkgLyBkZW5vbTtcclxuXHJcbiAgcmV0dXJuIHVhID49IDAgJiYgdWEgPD0gMSAmJiB1YiA+PSAwICYmIHViIDw9IDE7XHJcbn1cclxuIl0sIm5hbWVzIjpbInZhbGlkYXJQdW50b3NMaW5lYSIsIm9iaiIsInB1bnRvc0FjdHVhbGVzIiwicG9pbnRzIiwicHVudG9zVmFsaWRvcyIsImkiLCJ2YWxvciIsInBhcnNlRmxvYXQiLCJwdXNoIiwiaXNOYU4iLCJkZXRlY3RhckludGVyc2VjY2lvbkxpbmVhIiwibGluZU9iaiIsImFyZWEiLCJzdGFnZSIsIm5vZGUiLCJmaW5kT25lIiwiaWQiLCJub2RlUG9zIiwicG9zaXRpb24iLCJjbGVhblBvaW50cyIsInN0YXJ0WCIsIngiLCJzdGFydFkiLCJ5IiwiZW5kWCIsImVuZFkiLCJzdGFydERlbnRybyIsIndpZHRoIiwiaGVpZ2h0IiwiZW5kRGVudHJvIiwibGluZU1pblgiLCJNYXRoIiwibWluIiwibGluZU1heFgiLCJtYXgiLCJsaW5lTWluWSIsImxpbmVNYXhZIiwiYXJlYUludGVyc2VjdGFMaW5lYSIsImxpbmVJbnRlcnNlY3RzUmVjdCIsIngxIiwieTEiLCJ4MiIsInkyIiwicmVjdExlZnQiLCJyZWN0VG9wIiwicmVjdFJpZ2h0IiwicmVjdEJvdHRvbSIsImxpbmVJbnRlcnNlY3RzTGluZSIsIngzIiwieTMiLCJ4NCIsInk0IiwiZGVub20iLCJ1YSIsInViIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/selection/selectionUtils.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/toolbar/FloatingTextToolbar.jsx":
/*!***************************************************************!*\
  !*** ./src/components/editor/toolbar/FloatingTextToolbar.jsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ FloatingTextToolbar)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ \"react-dom\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_FontSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/FontSelector */ \"(pages-dir-node)/./src/components/FontSelector.jsx\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! konva */ \"konva\");\n/* harmony import */ var konva__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(konva__WEBPACK_IMPORTED_MODULE_4__);\n// src/components/editor/toolbar/FloatingTextToolbar.jsx\n\n\n\n\n\nconst FONT_SELECTOR_GAP = 12;\nconst FONT_SELECTOR_PADDING = 8;\nconst FONT_SELECTOR_FIXED_WIDTH = 300;\nconst FONT_SELECTOR_SIDEBAR_GAP = 4;\nconst MOBILE_FONT_STRIP_GAP = 6;\nconst MOBILE_FONT_WARM_COUNT = 12;\nconst CANVAS_WIDTH = 800;\nconst SECTION_CENTER_X = CANVAS_WIDTH / 2;\nconst SECTION_CENTER_EPSILON = 2;\nconst TOOLBAR_TOP_OFFSET = \"calc(var(--dashboard-header-height, 52px) + 8px)\";\nconst clamp = (value, min, max)=>{\n    const safeMin = Number.isFinite(min) ? min : 0;\n    const safeMax = Number.isFinite(max) ? max : safeMin;\n    return Math.min(Math.max(value, safeMin), Math.max(safeMin, safeMax));\n};\nconst isBoldFontWeight = (weight)=>{\n    const normalized = String(weight || \"normal\").toLowerCase();\n    return normalized === \"bold\" || normalized === \"bolder\" || [\n        \"500\",\n        \"600\",\n        \"700\",\n        \"800\",\n        \"900\"\n    ].includes(normalized);\n};\nconst resolveKonvaFontStyle = (fontStyle, fontWeight)=>{\n    const style = String(fontStyle || \"normal\").toLowerCase();\n    const isItalic = style.includes(\"italic\") || style.includes(\"oblique\");\n    const isBold = style.includes(\"bold\") || isBoldFontWeight(fontWeight);\n    if (isBold && isItalic) return \"bold italic\";\n    if (isBold) return \"bold\";\n    if (isItalic) return \"italic\";\n    return \"normal\";\n};\nfunction FloatingTextToolbar({ objetoSeleccionado, setObjetos, elementosSeleccionados, mostrarSelectorFuente, setMostrarSelectorFuente, mostrarSelectorTamano, setMostrarSelectorTamano, fontManager, ALL_FONTS = [], tamaniosDisponibles = [], onCambiarAlineacion }) {\n    const [isMobile, setIsMobile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [fontSelectorStyle, setFontSelectorStyle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [mobileFontStripTop, setMobileFontStripTop] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const toolbarRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const botonFuenteRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const latestFontChangeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const latestFontSizeChangeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const lastTypographyTargetsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingTextToolbar.useEffect\": ()=>{\n            if (true) return;\n            const mq = window.matchMedia(\"(max-width: 768px)\");\n            const update = {\n                \"FloatingTextToolbar.useEffect.update\": ()=>setIsMobile(mq.matches)\n            }[\"FloatingTextToolbar.useEffect.update\"];\n            update();\n            mq.addEventListener?.(\"change\", update);\n            return ({\n                \"FloatingTextToolbar.useEffect\": ()=>mq.removeEventListener?.(\"change\", update)\n            })[\"FloatingTextToolbar.useEffect\"];\n        }\n    }[\"FloatingTextToolbar.useEffect\"], []);\n    const normalizarFontSize = (value, fallback = 24)=>{\n        const next = Number(value);\n        return Number.isFinite(next) && next > 0 ? next : fallback;\n    };\n    const normalizarFontSizeEntero = (value, fallback = 24)=>Math.max(6, Math.round(normalizarFontSize(value, fallback)));\n    const normalizarEscalaX = (value)=>{\n        const next = Number(value);\n        return Number.isFinite(next) && Math.abs(next) > 0 ? next : 1;\n    };\n    const medirAnchoTexto = (obj, overrides = {})=>{\n        if (!obj || obj.tipo !== \"texto\") return null;\n        const options = typeof overrides === \"string\" ? {\n            fontFamilyOverride: overrides\n        } : overrides || {};\n        const { fontFamilyOverride, fontSizeOverride } = options;\n        const fontSize = normalizarFontSize(fontSizeOverride ?? obj.fontSize, 24);\n        const fontWeight = obj.fontWeight || \"normal\";\n        const fontStyle = obj.fontStyle || \"normal\";\n        const fontFamily = String(fontFamilyOverride || obj.fontFamily || \"sans-serif\");\n        const baseLineHeight = Number.isFinite(obj.lineHeight) && obj.lineHeight > 0 ? obj.lineHeight : 1.2;\n        const rawText = String(obj.texto ?? \"\");\n        const safeText = rawText.replace(/[ \\t]+$/gm, \"\");\n        try {\n            const probe = new (konva__WEBPACK_IMPORTED_MODULE_4___default().Text)({\n                text: safeText,\n                fontSize,\n                fontFamily,\n                fontWeight,\n                fontStyle: resolveKonvaFontStyle(fontStyle, fontWeight),\n                lineHeight: baseLineHeight * 0.92,\n                padding: 0,\n                wrap: \"none\"\n            });\n            const width = Number(probe.getTextWidth?.() || 0);\n            probe.destroy();\n            if (Number.isFinite(width) && width > 0) return width;\n        } catch  {\n        // fallback a canvas\n        }\n        if (typeof document === \"undefined\") return null;\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) return null;\n        const fontForCanvas = fontFamily.includes(\",\") ? fontFamily : /\\s/.test(fontFamily) ? `\"${fontFamily}\"` : fontFamily;\n        ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontForCanvas}`;\n        const lines = safeText.split(/\\r?\\n/);\n        const maxLineWidth = Math.max(...lines.map((line)=>ctx.measureText(line).width), 20);\n        return Number.isFinite(maxLineWidth) ? maxLineWidth : null;\n    };\n    const obtenerCentroVisualXDesdeNodo = (id)=>{\n        if (true) return null;\n        const refs = window._elementRefs || null;\n        const node = refs?.[id];\n        if (!node || typeof node.getClientRect !== \"function\") return null;\n        try {\n            const rect = node.getClientRect({\n                skipTransform: false,\n                skipShadow: true,\n                skipStroke: true\n            });\n            if (!rect || !Number.isFinite(rect.x) || !Number.isFinite(rect.width)) {\n                return null;\n            }\n            return rect.x + rect.width / 2;\n        } catch  {\n            return null;\n        }\n    };\n    const obtenerCentroFallbackDesdeObjeto = (obj, fontFamilyOverride)=>{\n        if (!obj || obj.tipo !== \"texto\") return null;\n        const width = medirAnchoTexto(obj, fontFamilyOverride);\n        if (!Number.isFinite(width) || width <= 0) return null;\n        const currentX = Number.isFinite(obj.x) ? obj.x : 0;\n        const scaleX = normalizarEscalaX(obj.scaleX);\n        return currentX + width * scaleX / 2;\n    };\n    const resolverCentroObjetivoCambioFuente = (obj)=>{\n        if (!obj || obj.tipo !== \"texto\") return null;\n        const centerDesdeNodo = obtenerCentroVisualXDesdeNodo(obj.id);\n        const centerFallback = obtenerCentroFallbackDesdeObjeto(obj, obj.fontFamily);\n        const centerActual = Number.isFinite(centerDesdeNodo) ? centerDesdeNodo : centerFallback;\n        if (!Number.isFinite(centerActual)) return null;\n        // Si ya está centrado en la sección, anclamos al centro exacto de sección.\n        if (Math.abs(centerActual - SECTION_CENTER_X) <= SECTION_CENTER_EPSILON) {\n            return SECTION_CENTER_X;\n        }\n        return centerActual;\n    };\n    const debeMantenerCentroEnCambioDeFuente = (obj)=>obj?.tipo === \"texto\" && !obj?.__groupAlign;\n    const debeAjustarCentroPredictivo = (obj)=>obj?.tipo === \"texto\" && !obj?.__groupAlign && !Number.isFinite(obj?.width) && obj?.__autoWidth !== false;\n    const debeAnclarCentroTexto = (obj)=>obj?.tipo === \"texto\" && !obj?.__groupAlign;\n    const esObjetivoTipografia = (item)=>{\n        if (!item) return false;\n        if (item.tipo === \"texto\") return true;\n        if (item.tipo === \"forma\" && item.figura === \"rect\" && typeof item.texto === \"string\") {\n            return true;\n        }\n        return false;\n    };\n    const actualizarSeleccionados = (updater, { soloTipografia = false } = {})=>{\n        setObjetos((prev)=>prev.map((o)=>{\n                if (!elementosSeleccionados.includes(o.id)) return o;\n                if (soloTipografia && !esObjetivoTipografia(o)) return o;\n                return updater(o);\n            }));\n    };\n    const toolbarContainerClass = `fixed z-50 bg-white border rounded shadow p-2 flex ${isMobile ? \"flex-nowrap items-center justify-start gap-1\" : \"gap-2 items-center\"}`;\n    const toolbarContainerStyle = {\n        top: TOOLBAR_TOP_OFFSET,\n        left: \"50%\",\n        transform: \"translateX(-50%)\",\n        width: isMobile ? \"calc(100vw - 8px)\" : \"auto\",\n        maxWidth: isMobile ? \"calc(100vw - 8px)\" : \"800px\",\n        overflowX: isMobile ? \"auto\" : \"visible\",\n        overflowY: \"hidden\",\n        WebkitOverflowScrolling: isMobile ? \"touch\" : \"auto\",\n        whiteSpace: isMobile ? \"nowrap\" : \"normal\"\n    };\n    const esTexto = objetoSeleccionado?.tipo === \"texto\";\n    const esFormaConTexto = objetoSeleccionado?.tipo === \"forma\" && objetoSeleccionado?.figura === \"rect\" && typeof objetoSeleccionado?.texto === \"string\";\n    const esRect = objetoSeleccionado?.figura === \"rect\";\n    const mostrarControlesTipografia = esTexto || esFormaConTexto;\n    const mobileFontStripVisible = isMobile && mostrarControlesTipografia && mostrarSelectorFuente;\n    const mobileSizeStripVisible = isMobile && mostrarControlesTipografia && mostrarSelectorTamano;\n    const mobileBottomStripVisible = mobileFontStripVisible || mobileSizeStripVisible;\n    const fontSizeActual = normalizarFontSizeEntero(objetoSeleccionado?.fontSize, 24);\n    const fontWeightActual = String(objetoSeleccionado?.fontWeight || \"normal\").toLowerCase();\n    const fontStyleActual = String(objetoSeleccionado?.fontStyle || \"normal\").toLowerCase();\n    const textDecorationActual = String(objetoSeleccionado?.textDecoration || \"none\").toLowerCase();\n    const negritaActiva = fontWeightActual === \"bold\" || fontWeightActual === \"bolder\" || [\n        \"500\",\n        \"600\",\n        \"700\",\n        \"800\",\n        \"900\"\n    ].includes(fontWeightActual);\n    const cursivaActiva = fontStyleActual.includes(\"italic\") || fontStyleActual.includes(\"oblique\");\n    const subrayadoActivo = textDecorationActual.includes(\"underline\");\n    const fuentesDisponiblesMobile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"FloatingTextToolbar.useMemo[fuentesDisponiblesMobile]\": ()=>{\n            if (!Array.isArray(ALL_FONTS)) return [];\n            const seen = new Set();\n            const normalized = [];\n            for (const fuente of ALL_FONTS){\n                if (!fuente || typeof fuente !== \"object\") continue;\n                const valor = typeof fuente.valor === \"string\" ? fuente.valor.trim() : \"\";\n                if (!valor || seen.has(valor)) continue;\n                seen.add(valor);\n                normalized.push({\n                    valor,\n                    nombre: typeof fuente.nombre === \"string\" && fuente.nombre.trim() ? fuente.nombre.trim() : valor\n                });\n            }\n            return normalized;\n        }\n    }[\"FloatingTextToolbar.useMemo[fuentesDisponiblesMobile]\"], [\n        ALL_FONTS\n    ]);\n    const fuentesWarmupMobile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"FloatingTextToolbar.useMemo[fuentesWarmupMobile]\": ()=>{\n            if (!mobileFontStripVisible) return [];\n            const fuentes = [];\n            const fuenteActual = typeof objetoSeleccionado?.fontFamily === \"string\" ? objetoSeleccionado.fontFamily.trim() : \"\";\n            if (fuenteActual) {\n                fuentes.push(fuenteActual);\n            }\n            for (const fuente of fuentesDisponiblesMobile){\n                const valor = typeof fuente?.valor === \"string\" ? fuente.valor.trim() : \"\";\n                if (!valor || fuentes.includes(valor)) continue;\n                fuentes.push(valor);\n                if (fuentes.length >= MOBILE_FONT_WARM_COUNT) break;\n            }\n            return fuentes;\n        }\n    }[\"FloatingTextToolbar.useMemo[fuentesWarmupMobile]\"], [\n        fuentesDisponiblesMobile,\n        mobileFontStripVisible,\n        objetoSeleccionado?.fontFamily\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingTextToolbar.useEffect\": ()=>{\n            const idsFromSelection = Array.isArray(elementosSeleccionados) ? elementosSeleccionados.filter({\n                \"FloatingTextToolbar.useEffect\": (id)=>id !== null && typeof id !== \"undefined\"\n            }[\"FloatingTextToolbar.useEffect\"]) : [];\n            const nextIds = idsFromSelection.length ? idsFromSelection : objetoSeleccionado?.id ? [\n                objetoSeleccionado.id\n            ] : [];\n            if (!nextIds.length) return;\n            lastTypographyTargetsRef.current = nextIds;\n        }\n    }[\"FloatingTextToolbar.useEffect\"], [\n        elementosSeleccionados,\n        objetoSeleccionado?.id\n    ]);\n    const calcularEstiloSelectorFuente = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FloatingTextToolbar.useCallback[calcularEstiloSelectorFuente]\": ()=>{\n            if (true) return null;\n            const botonFuente = botonFuenteRef.current;\n            if (!botonFuente) return null;\n            const viewportWidth = Math.max(320, window.innerWidth || 0);\n            const viewportHeight = Math.max(320, window.innerHeight || 0);\n            const triggerRect = botonFuente.getBoundingClientRect();\n            const isDesktop = viewportWidth >= 768;\n            if (!isDesktop) return null;\n            const panelWidth = Math.min(FONT_SELECTOR_FIXED_WIDTH, viewportWidth - FONT_SELECTOR_PADDING * 2);\n            const top = clamp(triggerRect.bottom + FONT_SELECTOR_GAP, FONT_SELECTOR_PADDING, viewportHeight - 160);\n            const sidebar = document.querySelector(\"aside\");\n            const sidebarRect = sidebar?.getBoundingClientRect?.() || null;\n            const sidebarPanel = document.getElementById(\"sidebar-panel\");\n            const sidebarPanelRect = sidebarPanel?.getBoundingClientRect?.() || null;\n            let anchorRight = FONT_SELECTOR_PADDING;\n            if (sidebarRect && sidebarRect.width > 0 && sidebarRect.height > 0) {\n                anchorRight = sidebarRect.right;\n            } else if (sidebarPanelRect && sidebarPanelRect.width > 0 && sidebarPanelRect.height > 0) {\n                anchorRight = sidebarPanelRect.right;\n            }\n            const maxLeft = viewportWidth - panelWidth - FONT_SELECTOR_PADDING;\n            const left = clamp(anchorRight + FONT_SELECTOR_SIDEBAR_GAP, FONT_SELECTOR_PADDING, maxLeft);\n            const availableHeight = viewportHeight - top - FONT_SELECTOR_PADDING;\n            return {\n                position: \"fixed\",\n                left: `${Math.round(left)}px`,\n                top: `${Math.round(top)}px`,\n                width: `${Math.round(panelWidth)}px`,\n                maxHeight: `${Math.round(Math.max(140, availableHeight))}px`,\n                marginTop: \"0px\"\n            };\n        }\n    }[\"FloatingTextToolbar.useCallback[calcularEstiloSelectorFuente]\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingTextToolbar.useEffect\": ()=>{\n            if (!mostrarSelectorFuente) {\n                setFontSelectorStyle(null);\n                return;\n            }\n            const updateStyle = {\n                \"FloatingTextToolbar.useEffect.updateStyle\": ()=>{\n                    setFontSelectorStyle(calcularEstiloSelectorFuente());\n                }\n            }[\"FloatingTextToolbar.useEffect.updateStyle\"];\n            updateStyle();\n            window.addEventListener(\"resize\", updateStyle);\n            window.addEventListener(\"scroll\", updateStyle, true);\n            return ({\n                \"FloatingTextToolbar.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", updateStyle);\n                    window.removeEventListener(\"scroll\", updateStyle, true);\n                }\n            })[\"FloatingTextToolbar.useEffect\"];\n        }\n    }[\"FloatingTextToolbar.useEffect\"], [\n        mostrarSelectorFuente,\n        calcularEstiloSelectorFuente\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingTextToolbar.useEffect\": ()=>{\n            if (!mobileBottomStripVisible) {\n                setMobileFontStripTop(null);\n                return;\n            }\n            const updatePosition = {\n                \"FloatingTextToolbar.useEffect.updatePosition\": ()=>{\n                    const toolbarEl = toolbarRef.current;\n                    if (!toolbarEl) return;\n                    const rect = toolbarEl.getBoundingClientRect();\n                    if (!Number.isFinite(rect.bottom)) return;\n                    setMobileFontStripTop(Math.round(rect.bottom + MOBILE_FONT_STRIP_GAP));\n                }\n            }[\"FloatingTextToolbar.useEffect.updatePosition\"];\n            updatePosition();\n            window.addEventListener(\"resize\", updatePosition);\n            window.addEventListener(\"scroll\", updatePosition, true);\n            return ({\n                \"FloatingTextToolbar.useEffect\": ()=>{\n                    window.removeEventListener(\"resize\", updatePosition);\n                    window.removeEventListener(\"scroll\", updatePosition, true);\n                }\n            })[\"FloatingTextToolbar.useEffect\"];\n        }\n    }[\"FloatingTextToolbar.useEffect\"], [\n        mobileBottomStripVisible\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingTextToolbar.useEffect\": ()=>{\n            if (!fuentesWarmupMobile.length) return;\n            void fontManager.loadFonts(fuentesWarmupMobile);\n        }\n    }[\"FloatingTextToolbar.useEffect\"], [\n        fontManager,\n        fuentesWarmupMobile\n    ]);\n    const aplicarTamanoFuenteSeleccionado = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (resolverTamano)=>{\n            const requestId = latestFontSizeChangeRef.current + 1;\n            latestFontSizeChangeRef.current = requestId;\n            const idsSeleccionados = Array.isArray(elementosSeleccionados) && elementosSeleccionados.length ? elementosSeleccionados : lastTypographyTargetsRef.current;\n            const targetIds = new Set((idsSeleccionados || []).filter({\n                \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (id)=>id !== null && typeof id !== \"undefined\"\n            }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"]));\n            if (!targetIds.size && objetoSeleccionado?.id) {\n                targetIds.add(objetoSeleccionado.id);\n            }\n            if (!targetIds.size) return;\n            const getObjById =  false ? 0 : null;\n            const centerTargetById = new Map();\n            targetIds.forEach({\n                \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (id)=>{\n                    const targetObj = getObjById?.(id) || (objetoSeleccionado?.id === id ? objetoSeleccionado : null);\n                    if (!targetObj) return;\n                    if (!debeAnclarCentroTexto(targetObj)) return;\n                    const centerObjetivo = resolverCentroObjetivoCambioFuente(targetObj);\n                    if (Number.isFinite(centerObjetivo)) {\n                        centerTargetById.set(id, centerObjetivo);\n                    }\n                }\n            }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"]);\n            const expectedFontSizeById = new Map();\n            setObjetos({\n                \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (prev)=>prev.map({\n                        \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (o)=>{\n                            if (!targetIds.has(o.id)) return o;\n                            if (!esObjetivoTipografia(o)) return o;\n                            const currentSize = normalizarFontSizeEntero(o.fontSize, 24);\n                            const nextSizeRaw = typeof resolverTamano === \"function\" ? resolverTamano(o, currentSize) : resolverTamano;\n                            const nextSize = normalizarFontSizeEntero(nextSizeRaw, currentSize);\n                            if (!Number.isFinite(nextSize)) return o;\n                            if (Math.abs(nextSize - currentSize) <= 0) return o;\n                            expectedFontSizeById.set(o.id, nextSize);\n                            const patch = {\n                                fontSize: nextSize\n                            };\n                            if (debeAnclarCentroTexto(o)) {\n                                const centerObjetivo = centerTargetById.get(o.id);\n                                const debeAjustarPredictivo = !Number.isFinite(o.width) && o.__autoWidth !== false;\n                                if (Number.isFinite(centerObjetivo) && debeAjustarPredictivo) {\n                                    const nextWidth = medirAnchoTexto(o, {\n                                        fontSizeOverride: nextSize\n                                    });\n                                    const scaleX = normalizarEscalaX(o.scaleX);\n                                    if (Number.isFinite(nextWidth) && nextWidth > 0) {\n                                        const currentX = Number.isFinite(o.x) ? o.x : 0;\n                                        const nextX = centerObjetivo - nextWidth * scaleX / 2;\n                                        if (Number.isFinite(nextX) && Math.abs(nextX - currentX) > 0.25) {\n                                            patch.x = nextX;\n                                        }\n                                    }\n                                }\n                            }\n                            return {\n                                ...o,\n                                ...patch\n                            };\n                        }\n                    }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"])\n            }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"]);\n            if (!centerTargetById.size) return;\n            requestAnimationFrame({\n                \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": ()=>{\n                    requestAnimationFrame({\n                        \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": ()=>{\n                            if (latestFontSizeChangeRef.current !== requestId) return;\n                            const deltaById = new Map();\n                            centerTargetById.forEach({\n                                \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (centerObjetivo, id)=>{\n                                    if (!expectedFontSizeById.has(id)) return;\n                                    const centerActual = obtenerCentroVisualXDesdeNodo(id);\n                                    if (!Number.isFinite(centerActual)) return;\n                                    const delta = centerObjetivo - centerActual;\n                                    if (Number.isFinite(delta) && Math.abs(delta) > 0.25) {\n                                        deltaById.set(id, delta);\n                                    }\n                                }\n                            }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"]);\n                            if (!deltaById.size) return;\n                            setObjetos({\n                                \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (prev)=>prev.map({\n                                        \"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\": (o)=>{\n                                            const delta = deltaById.get(o.id);\n                                            if (!Number.isFinite(delta)) return o;\n                                            if (!esObjetivoTipografia(o)) return o;\n                                            const expectedSize = expectedFontSizeById.get(o.id);\n                                            const currentSize = normalizarFontSizeEntero(o.fontSize, 24);\n                                            if (Number.isFinite(expectedSize) && Math.abs(currentSize - expectedSize) > 0.01) {\n                                                return o;\n                                            }\n                                            const currentX = Number.isFinite(o.x) ? o.x : 0;\n                                            const nextX = currentX + delta;\n                                            if (!Number.isFinite(nextX) || Math.abs(nextX - currentX) <= 0.25) {\n                                                return o;\n                                            }\n                                            return {\n                                                ...o,\n                                                x: nextX\n                                            };\n                                        }\n                                    }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"])\n                            }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"]);\n                        }\n                    }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"]);\n                }\n            }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"]);\n        }\n    }[\"FloatingTextToolbar.useCallback[aplicarTamanoFuenteSeleccionado]\"], [\n        elementosSeleccionados,\n        objetoSeleccionado?.id,\n        objetoSeleccionado,\n        setObjetos,\n        esObjetivoTipografia,\n        debeMantenerCentroEnCambioDeFuente,\n        debeAnclarCentroTexto,\n        resolverCentroObjetivoCambioFuente,\n        medirAnchoTexto,\n        normalizarEscalaX,\n        obtenerCentroVisualXDesdeNodo,\n        normalizarFontSizeEntero\n    ]);\n    const aplicarFuenteSeleccionada = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\": (nuevaFuente)=>{\n            const fuenteObjetivo = typeof nuevaFuente === \"string\" ? nuevaFuente.trim() : \"\";\n            if (!fuenteObjetivo) return;\n            const requestId = latestFontChangeRef.current + 1;\n            latestFontChangeRef.current = requestId;\n            const idsSeleccionados = Array.isArray(elementosSeleccionados) && elementosSeleccionados.length ? elementosSeleccionados : lastTypographyTargetsRef.current;\n            const targetIds = new Set((idsSeleccionados || []).filter({\n                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\": (id)=>id !== null && typeof id !== \"undefined\"\n            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\"]));\n            if (!targetIds.size && objetoSeleccionado?.id) {\n                targetIds.add(objetoSeleccionado.id);\n            }\n            if (!targetIds.size) return;\n            const centerTargetById = new Map();\n            const getObjById =  false ? 0 : null;\n            targetIds.forEach({\n                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\": (id)=>{\n                    const targetObj = getObjById?.(id) || (objetoSeleccionado?.id === id ? objetoSeleccionado : null);\n                    if (!targetObj) return;\n                    if (!debeMantenerCentroEnCambioDeFuente(targetObj)) return;\n                    const centerObjetivo = resolverCentroObjetivoCambioFuente(targetObj);\n                    if (Number.isFinite(centerObjetivo)) {\n                        centerTargetById.set(id, centerObjetivo);\n                    }\n                }\n            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\"]);\n            const fuenteYaDisponible = typeof fontManager?.isFontAvailable === \"function\" ? fontManager.isFontAvailable(fuenteObjetivo) : false;\n            const aplicarFuenteConCentro = {\n                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarFuenteConCentro\": ()=>{\n                    setObjetos({\n                        \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarFuenteConCentro\": (prev)=>prev.map({\n                                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarFuenteConCentro\": (o)=>{\n                                    if (!targetIds.has(o.id)) return o;\n                                    if (!esObjetivoTipografia(o)) return o;\n                                    const patch = {\n                                        fontFamily: fuenteObjetivo\n                                    };\n                                    if (debeAjustarCentroPredictivo(o)) {\n                                        const centerObjetivo = centerTargetById.get(o.id);\n                                        if (Number.isFinite(centerObjetivo)) {\n                                            const nextWidth = medirAnchoTexto(o, fuenteObjetivo);\n                                            const scaleX = normalizarEscalaX(o.scaleX);\n                                            if (Number.isFinite(nextWidth) && nextWidth > 0) {\n                                                const currentX = Number.isFinite(o.x) ? o.x : 0;\n                                                const nextX = centerObjetivo - nextWidth * scaleX / 2;\n                                                if (Number.isFinite(nextX) && Math.abs(nextX - currentX) > 0.25) {\n                                                    patch.x = nextX;\n                                                }\n                                            }\n                                        }\n                                    }\n                                    return {\n                                        ...o,\n                                        ...patch\n                                    };\n                                }\n                            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarFuenteConCentro\"])\n                    }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarFuenteConCentro\"]);\n                }\n            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarFuenteConCentro\"];\n            const aplicarCorreccionCentro = {\n                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\": ()=>{\n                    if (!centerTargetById.size) return;\n                    const deltaById = new Map();\n                    centerTargetById.forEach({\n                        \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\": (centerObjetivo, id)=>{\n                            if (!Number.isFinite(centerObjetivo)) return;\n                            const centerActual = obtenerCentroVisualXDesdeNodo(id);\n                            if (!Number.isFinite(centerActual)) return;\n                            const delta = centerObjetivo - centerActual;\n                            if (Number.isFinite(delta) && Math.abs(delta) > 1) {\n                                deltaById.set(id, delta);\n                            }\n                        }\n                    }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\"]);\n                    if (!deltaById.size) return;\n                    setObjetos({\n                        \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\": (prev)=>prev.map({\n                                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\": (o)=>{\n                                    const delta = deltaById.get(o.id);\n                                    if (!Number.isFinite(delta)) return o;\n                                    if (!esObjetivoTipografia(o)) return o;\n                                    if (String(o.fontFamily || \"\").trim() !== fuenteObjetivo) return o;\n                                    const currentX = Number.isFinite(o.x) ? o.x : 0;\n                                    const nextX = currentX + delta;\n                                    if (!Number.isFinite(nextX) || Math.abs(nextX - currentX) <= 1) {\n                                        return o;\n                                    }\n                                    return {\n                                        ...o,\n                                        x: nextX\n                                    };\n                                }\n                            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\"])\n                    }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\"]);\n                }\n            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].aplicarCorreccionCentro\"];\n            const programarCorreccionCentro = {\n                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].programarCorreccionCentro\": ()=>{\n                    if (true) return;\n                    requestAnimationFrame({\n                        \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].programarCorreccionCentro\": ()=>{\n                            requestAnimationFrame({\n                                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].programarCorreccionCentro\": ()=>{\n                                    if (latestFontChangeRef.current !== requestId) return;\n                                    aplicarCorreccionCentro();\n                                }\n                            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].programarCorreccionCentro\"]);\n                        }\n                    }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].programarCorreccionCentro\"]);\n                }\n            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada].programarCorreccionCentro\"];\n            if (fuenteYaDisponible) {\n                aplicarFuenteConCentro();\n                return;\n            }\n            void Promise.resolve(fontManager.loadFonts([\n                fuenteObjetivo\n            ])).catch({\n                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\": ()=>null\n            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\"]).finally({\n                \"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\": ()=>{\n                    if (latestFontChangeRef.current !== requestId) return;\n                    aplicarFuenteConCentro();\n                    programarCorreccionCentro();\n                }\n            }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\"]);\n        }\n    }[\"FloatingTextToolbar.useCallback[aplicarFuenteSeleccionada]\"], [\n        elementosSeleccionados,\n        objetoSeleccionado?.id,\n        objetoSeleccionado,\n        fontManager,\n        setObjetos,\n        esObjetivoTipografia,\n        debeMantenerCentroEnCambioDeFuente,\n        debeAjustarCentroPredictivo,\n        resolverCentroObjetivoCambioFuente,\n        normalizarEscalaX,\n        obtenerCentroVisualXDesdeNodo,\n        medirAnchoTexto\n    ]);\n    if (!(objetoSeleccionado?.tipo === \"texto\" || objetoSeleccionado?.tipo === \"forma\" || objetoSeleccionado?.tipo === \"icono\")) {\n        return null;\n    }\n    const portalTarget = typeof document !== \"undefined\" ? document.body : null;\n    if (!portalTarget) return null;\n    if (objetoSeleccionado?.tipo === \"icono\") {\n        return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            ref: toolbarRef,\n            className: toolbarContainerClass,\n            style: {\n                ...toolbarContainerStyle,\n                maxWidth: isMobile ? toolbarContainerStyle.maxWidth : \"220px\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        className: \"text-xs text-gray-600\",\n                        children: \"Color\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 720,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"color\",\n                        value: objetoSeleccionado.color || \"#000000\",\n                        onChange: (e)=>{\n                            const nuevoColor = e.target.value;\n                            actualizarSeleccionados((o)=>({\n                                    ...o,\n                                    color: nuevoColor\n                                }));\n                        },\n                        className: \"w-8 h-6 rounded cursor-pointer\",\n                        title: \"Color del icono\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 721,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 719,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n            lineNumber: 714,\n            columnNumber: 7\n        }, this), portalTarget);\n    }\n    return /*#__PURE__*/ (0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: toolbarRef,\n                className: toolbarContainerClass,\n                style: toolbarContainerStyle,\n                children: [\n                    objetoSeleccionado?.tipo === \"forma\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                className: \"text-xs text-gray-600\",\n                                children: \"Fondo\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 742,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"color\",\n                                value: objetoSeleccionado.color || \"#ffffff\",\n                                onChange: (e)=>{\n                                    const nextColor = e.target.value;\n                                    actualizarSeleccionados((o)=>({\n                                            ...o,\n                                            color: nextColor\n                                        }));\n                                },\n                                className: \"w-8 h-6 rounded\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 743,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 741,\n                        columnNumber: 11\n                    }, this),\n                    objetoSeleccionado?.tipo === \"forma\" && esRect && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                className: \"text-xs text-gray-600\",\n                                children: \"Esquinas\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 757,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"range\",\n                                min: 0,\n                                max: 100,\n                                value: objetoSeleccionado.cornerRadius || 0,\n                                onChange: (e)=>{\n                                    const nextRadius = parseInt(e.target.value, 10) || 0;\n                                    actualizarSeleccionados((o)=>({\n                                            ...o,\n                                            cornerRadius: nextRadius\n                                        }));\n                                }\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 758,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"text-xs text-gray-700\",\n                                children: objetoSeleccionado.cornerRadius || 0\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 768,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 756,\n                        columnNumber: 11\n                    }, this),\n                    mostrarControlesTipografia && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                ref: botonFuenteRef,\n                                className: `relative cursor-pointer rounded border transition-all truncate ${isMobile ? \"px-2 py-1 text-[11px]\" : \"px-3 py-1 text-sm\"} ${mostrarSelectorFuente ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                                style: {\n                                    fontFamily: objetoSeleccionado?.fontFamily || \"sans-serif\",\n                                    width: isMobile ? \"102px\" : \"180px\",\n                                    textAlign: \"left\"\n                                },\n                                title: objetoSeleccionado?.fontFamily || \"sans-serif\",\n                                onClick: ()=>{\n                                    const nextOpen = !mostrarSelectorFuente;\n                                    setMostrarSelectorFuente(nextOpen);\n                                    if (nextOpen && isMobile) {\n                                        setMostrarSelectorTamano(false);\n                                    }\n                                },\n                                children: objetoSeleccionado?.fontFamily || \"sans-serif\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 774,\n                                columnNumber: 13\n                            }, this),\n                            !isMobile && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_FontSelector__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                currentFont: objetoSeleccionado?.fontFamily || \"sans-serif\",\n                                onFontChange: aplicarFuenteSeleccionada,\n                                isOpen: mostrarSelectorFuente,\n                                panelStyle: fontSelectorStyle,\n                                onClose: ()=>setMostrarSelectorFuente(false)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 797,\n                                columnNumber: 15\n                            }, this),\n                            isMobile ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                type: \"button\",\n                                className: `rounded border transition ${isMobile ? \"h-7 px-2 text-[11px]\" : \"px-2 py-1 text-sm\"} ${mostrarSelectorTamano ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                                onClick: ()=>{\n                                    const nextOpen = !mostrarSelectorTamano;\n                                    setMostrarSelectorTamano(nextOpen);\n                                    if (nextOpen) {\n                                        setMostrarSelectorFuente(false);\n                                    }\n                                },\n                                children: [\n                                    \"Tamano \",\n                                    fontSizeActual\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 807,\n                                columnNumber: 15\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative flex items-center bg-white border rounded-lg\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: `hover:bg-gray-100 transition ${isMobile ? \"h-7 min-w-7 px-1.5 text-xs\" : \"px-2 py-1\"}`,\n                                        onClick: (e)=>{\n                                            e.stopPropagation();\n                                            aplicarTamanoFuenteSeleccionado((o, actual)=>Math.max(6, actual - 2));\n                                        },\n                                        children: \"-\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                        lineNumber: 824,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: `cursor-pointer transition-all ${isMobile ? \"h-7 px-1.5 text-[11px] flex items-center\" : \"px-2 py-1 text-sm\"} ${mostrarSelectorTamano ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                                        onClick: ()=>setMostrarSelectorTamano(!mostrarSelectorTamano),\n                                        children: [\n                                            fontSizeActual,\n                                            mostrarSelectorTamano && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"absolute popup-fuente z-50 bg-white border rounded-2xl shadow-md p-2 w-24 max-h-[300px] overflow-auto\",\n                                                style: {\n                                                    top: \"40px\",\n                                                    left: \"-10px\"\n                                                },\n                                                children: tamaniosDisponibles.map((tam)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"px-2 py-1 text-sm hover:bg-gray-100 rounded cursor-pointer text-center\",\n                                                        onClick: (e)=>{\n                                                            e.stopPropagation();\n                                                            const nextSize = normalizarFontSizeEntero(tam, 24);\n                                                            aplicarTamanoFuenteSeleccionado(nextSize);\n                                                            setMostrarSelectorTamano(false);\n                                                        },\n                                                        children: tam\n                                                    }, tam, false, {\n                                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                                        lineNumber: 849,\n                                                        columnNumber: 25\n                                                    }, this))\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                                lineNumber: 844,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                        lineNumber: 836,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: `hover:bg-gray-100 transition ${isMobile ? \"h-7 min-w-7 px-1.5 text-xs\" : \"px-2 py-1\"}`,\n                                        onClick: (e)=>{\n                                            e.stopPropagation();\n                                            aplicarTamanoFuenteSeleccionado((o, actual)=>Math.min(260, actual + 2));\n                                        },\n                                        children: \"+\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                        lineNumber: 866,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 823,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"color\",\n                                value: objetoSeleccionado?.colorTexto || \"#000000\",\n                                onChange: (e)=>{\n                                    const nextColor = e.target.value;\n                                    actualizarSeleccionados((o)=>({\n                                            ...o,\n                                            colorTexto: nextColor\n                                        }), {\n                                        soloTipografia: true\n                                    });\n                                },\n                                className: isMobile ? \"h-7 w-7 rounded border border-gray-300 p-0.5\" : undefined\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 880,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: `rounded border font-bold transition ${isMobile ? \"h-7 min-w-7 px-1.5 text-[11px]\" : \"px-2 py-1 text-sm\"} ${negritaActiva ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                                onClick: ()=>actualizarSeleccionados((o)=>{\n                                        const currentWeight = String(o.fontWeight || \"normal\").toLowerCase();\n                                        const isBoldNow = currentWeight === \"bold\" || currentWeight === \"bolder\" || [\n                                            \"500\",\n                                            \"600\",\n                                            \"700\",\n                                            \"800\",\n                                            \"900\"\n                                        ].includes(currentWeight);\n                                        return {\n                                            ...o,\n                                            fontWeight: isBoldNow ? \"normal\" : \"bold\"\n                                        };\n                                    }, {\n                                        soloTipografia: true\n                                    }),\n                                children: \"B\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 893,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: `rounded border italic transition ${isMobile ? \"h-7 min-w-7 px-1.5 text-[11px]\" : \"px-2 py-1 text-sm\"} ${cursivaActiva ? \"bg-gray-200\" : \"hover:bg-gray-100\"}`,\n                                onClick: ()=>actualizarSeleccionados((o)=>{\n                                        const currentStyle = String(o.fontStyle || \"normal\").toLowerCase();\n                                        const isItalicNow = currentStyle.includes(\"italic\") || currentStyle.includes(\"oblique\");\n                                        return {\n                                            ...o,\n                                            fontStyle: isItalicNow ? \"normal\" : \"italic\"\n                                        };\n                                    }, {\n                                        soloTipografia: true\n                                    }),\n                                children: \"I\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 914,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: `rounded border transition ${isMobile ? \"h-7 min-w-7 px-1.5 text-[11px]\" : \"px-2 py-1 text-sm\"} ${subrayadoActivo ? \"bg-gray-200 underline\" : \"hover:bg-gray-100\"}`,\n                                onClick: ()=>actualizarSeleccionados((o)=>{\n                                        const currentDecoration = String(o.textDecoration || \"none\").toLowerCase().trim();\n                                        const hasUnderline = currentDecoration.includes(\"underline\");\n                                        if (hasUnderline) {\n                                            const withoutUnderline = currentDecoration.split(/\\s+/).filter((token)=>token && token !== \"underline\").join(\" \");\n                                            return {\n                                                ...o,\n                                                textDecoration: withoutUnderline || \"none\"\n                                            };\n                                        }\n                                        const nextDecoration = currentDecoration === \"none\" || currentDecoration === \"\" ? \"underline\" : `${currentDecoration} underline`;\n                                        return {\n                                            ...o,\n                                            textDecoration: nextDecoration.trim()\n                                        };\n                                    }, {\n                                        soloTipografia: true\n                                    }),\n                                children: \"S\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 933,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: `rounded border transition hover:bg-gray-100 flex items-center justify-center ${isMobile ? \"h-7 min-w-7 px-1.5 text-[11px]\" : \"px-2 py-1 text-sm\"}`,\n                                onClick: onCambiarAlineacion,\n                                title: `Alineacion: ${objetoSeleccionado?.align || \"izquierda\"}`,\n                                children: (()=>{\n                                    const align = objetoSeleccionado?.align || \"left\";\n                                    switch(align){\n                                        case \"left\":\n                                            return \"<-\";\n                                        case \"center\":\n                                            return \"<->\";\n                                        case \"right\":\n                                            return \"->\";\n                                        case \"justify\":\n                                            return \"||\";\n                                        default:\n                                            return \"<-\";\n                                    }\n                                })()\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                                lineNumber: 966,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 739,\n                columnNumber: 7\n            }, this),\n            mobileFontStripVisible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"popup-fuente fixed z-50 bg-white border rounded shadow px-1.5 py-1 flex items-center gap-1 overflow-x-auto\",\n                style: {\n                    top: `${mobileFontStripTop ?? 106}px`,\n                    left: \"50%\",\n                    transform: \"translateX(-50%)\",\n                    width: \"calc(100vw - 8px)\",\n                    maxWidth: \"calc(100vw - 8px)\",\n                    WebkitOverflowScrolling: \"touch\",\n                    whiteSpace: \"nowrap\"\n                },\n                onMouseDown: (e)=>e.stopPropagation(),\n                onTouchStart: (e)=>e.stopPropagation(),\n                children: fuentesDisponiblesMobile.map((fuente)=>{\n                    const isActive = (objetoSeleccionado?.fontFamily || \"sans-serif\") === fuente.valor;\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        className: `h-7 px-2 rounded border text-[11px] leading-none shrink-0 ${isActive ? \"bg-gray-200 border-gray-400 text-gray-900\" : \"bg-white border-gray-300 text-gray-700\"}`,\n                        style: {\n                            fontFamily: fuente.valor\n                        },\n                        title: fuente.valor,\n                        onClick: ()=>{\n                            void aplicarFuenteSeleccionada(fuente.valor);\n                        },\n                        children: fuente.nombre\n                    }, fuente.valor, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 1011,\n                        columnNumber: 15\n                    }, this);\n                })\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 994,\n                columnNumber: 9\n            }, this),\n            mobileSizeStripVisible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"popup-fuente fixed z-50 bg-white border rounded shadow px-2 py-1.5 flex items-center gap-2\",\n                style: {\n                    top: `${mobileFontStripTop ?? 106}px`,\n                    left: \"50%\",\n                    transform: \"translateX(-50%)\",\n                    width: \"calc(100vw - 8px)\",\n                    maxWidth: \"calc(100vw - 8px)\",\n                    WebkitOverflowScrolling: \"touch\",\n                    whiteSpace: \"nowrap\"\n                },\n                onMouseDown: (e)=>e.stopPropagation(),\n                onTouchStart: (e)=>e.stopPropagation(),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        className: \"h-7 min-w-7 px-1.5 text-xs rounded border hover:bg-gray-100\",\n                        onClick: (e)=>{\n                            e.stopPropagation();\n                            aplicarTamanoFuenteSeleccionado((o, actual)=>Math.max(6, actual - 2));\n                        },\n                        children: \"-\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 1047,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"h-7 min-w-10 px-2 text-xs rounded border bg-gray-100 flex items-center justify-center\",\n                        children: fontSizeActual\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 1058,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        className: \"h-7 min-w-7 px-1.5 text-xs rounded border hover:bg-gray-100\",\n                        onClick: (e)=>{\n                            e.stopPropagation();\n                            aplicarTamanoFuenteSeleccionado((o, actual)=>Math.min(260, actual + 2));\n                        },\n                        children: \"+\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 1062,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"range\",\n                        min: 6,\n                        max: 260,\n                        step: 1,\n                        value: fontSizeActual,\n                        className: \"flex-1 min-w-0 accent-gray-700\",\n                        onChange: (e)=>{\n                            const nextSize = normalizarFontSizeEntero(e.target.value, fontSizeActual);\n                            aplicarTamanoFuenteSeleccionado(nextSize);\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                        lineNumber: 1073,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\editor\\\\toolbar\\\\FloatingTextToolbar.jsx\",\n                lineNumber: 1033,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true), portalTarget);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci90b29sYmFyL0Zsb2F0aW5nVGV4dFRvb2xiYXIuanN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSx3REFBd0Q7O0FBQ2tCO0FBQ2pDO0FBQ1k7QUFDM0I7QUFFMUIsTUFBTVEsb0JBQW9CO0FBQzFCLE1BQU1DLHdCQUF3QjtBQUM5QixNQUFNQyw0QkFBNEI7QUFDbEMsTUFBTUMsNEJBQTRCO0FBQ2xDLE1BQU1DLHdCQUF3QjtBQUM5QixNQUFNQyx5QkFBeUI7QUFDL0IsTUFBTUMsZUFBZTtBQUNyQixNQUFNQyxtQkFBbUJELGVBQWU7QUFDeEMsTUFBTUUseUJBQXlCO0FBQy9CLE1BQU1DLHFCQUFxQjtBQUUzQixNQUFNQyxRQUFRLENBQUNDLE9BQU9DLEtBQUtDO0lBQ3pCLE1BQU1DLFVBQVVDLE9BQU9DLFFBQVEsQ0FBQ0osT0FBT0EsTUFBTTtJQUM3QyxNQUFNSyxVQUFVRixPQUFPQyxRQUFRLENBQUNILE9BQU9BLE1BQU1DO0lBQzdDLE9BQU9JLEtBQUtOLEdBQUcsQ0FBQ00sS0FBS0wsR0FBRyxDQUFDRixPQUFPRyxVQUFVSSxLQUFLTCxHQUFHLENBQUNDLFNBQVNHO0FBQzlEO0FBRUEsTUFBTUUsbUJBQW1CLENBQUNDO0lBQ3hCLE1BQU1DLGFBQWFDLE9BQU9GLFVBQVUsVUFBVUcsV0FBVztJQUN6RCxPQUNFRixlQUFlLFVBQ2ZBLGVBQWUsWUFDZjtRQUFDO1FBQU87UUFBTztRQUFPO1FBQU87S0FBTSxDQUFDRyxRQUFRLENBQUNIO0FBRWpEO0FBRUEsTUFBTUksd0JBQXdCLENBQUNDLFdBQVdDO0lBQ3hDLE1BQU1DLFFBQVFOLE9BQU9JLGFBQWEsVUFBVUgsV0FBVztJQUN2RCxNQUFNTSxXQUFXRCxNQUFNSixRQUFRLENBQUMsYUFBYUksTUFBTUosUUFBUSxDQUFDO0lBQzVELE1BQU1NLFNBQVNGLE1BQU1KLFFBQVEsQ0FBQyxXQUFXTCxpQkFBaUJRO0lBRTFELElBQUlH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QkFDTDhHLEtBQUssR0FBRzNGLHNCQUFzQixJQUFJLEVBQUUsQ0FBQztvQkFDckM0RixNQUFNO29CQUNOQyxXQUFXO29CQUNYcEQsT0FBTztvQkFDUHFELFVBQVU7b0JBQ1ZHLHlCQUF5QjtvQkFDekJDLFlBQVk7Z0JBQ2Q7Z0JBQ0FvSixhQUFhLENBQUNsQyxJQUFNQSxFQUFFa0IsZUFBZTtnQkFDckNpQixjQUFjLENBQUNuQyxJQUFNQSxFQUFFa0IsZUFBZTs7a0NBRXRDLDhEQUFDRDt3QkFDQ3BCLE1BQUs7d0JBQ0xILFdBQVU7d0JBQ1ZnQixTQUFTLENBQUNWOzRCQUNSQSxFQUFFa0IsZUFBZTs0QkFDakJuRSxnQ0FBZ0MsQ0FBQzNFLEdBQUcrSSxTQUFXcFEsS0FBS0wsR0FBRyxDQUFDLEdBQUd5USxTQUFTO3dCQUN0RTtrQ0FDRDs7Ozs7O2tDQUlELDhEQUFDM0I7d0JBQUlFLFdBQVU7a0NBQ1pwRzs7Ozs7O2tDQUdILDhEQUFDMkg7d0JBQ0NwQixNQUFLO3dCQUNMSCxXQUFVO3dCQUNWZ0IsU0FBUyxDQUFDVjs0QkFDUkEsRUFBRWtCLGVBQWU7NEJBQ2pCbkUsZ0NBQWdDLENBQUMzRSxHQUFHK0ksU0FBV3BRLEtBQUtOLEdBQUcsQ0FBQyxLQUFLMFEsU0FBUzt3QkFDeEU7a0NBQ0Q7Ozs7OztrQ0FJRCw4REFBQ3ZCO3dCQUNDQyxNQUFLO3dCQUNMcFAsS0FBSzt3QkFDTEMsS0FBSzt3QkFDTDJSLE1BQU07d0JBQ043UixPQUFPOEk7d0JBQ1BvRyxXQUFVO3dCQUNWSyxVQUFVLENBQUNDOzRCQUNULE1BQU1oQyxXQUFXbksseUJBQXlCbU0sRUFBRUUsTUFBTSxDQUFDMVAsS0FBSyxFQUFFOEk7NEJBQzFEeUQsZ0NBQWdDaUI7d0JBQ2xDOzs7Ozs7Ozs7Ozs7O3NCQUtSc0I7QUFFSiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxlZGl0b3JcXHRvb2xiYXJcXEZsb2F0aW5nVGV4dFRvb2xiYXIuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb21wb25lbnRzL2VkaXRvci90b29sYmFyL0Zsb2F0aW5nVGV4dFRvb2xiYXIuanN4XG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjcmVhdGVQb3J0YWwgfSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgRm9udFNlbGVjdG9yIGZyb20gXCJAL2NvbXBvbmVudHMvRm9udFNlbGVjdG9yXCI7XG5pbXBvcnQgS29udmEgZnJvbSBcImtvbnZhXCI7XG5cbmNvbnN0IEZPTlRfU0VMRUNUT1JfR0FQID0gMTI7XG5jb25zdCBGT05UX1NFTEVDVE9SX1BBRERJTkcgPSA4O1xuY29uc3QgRk9OVF9TRUxFQ1RPUl9GSVhFRF9XSURUSCA9IDMwMDtcbmNvbnN0IEZPTlRfU0VMRUNUT1JfU0lERUJBUl9HQVAgPSA0O1xuY29uc3QgTU9CSUxFX0ZPTlRfU1RSSVBfR0FQID0gNjtcbmNvbnN0IE1PQklMRV9GT05UX1dBUk1fQ09VTlQgPSAxMjtcbmNvbnN0IENBTlZBU19XSURUSCA9IDgwMDtcbmNvbnN0IFNFQ1RJT05fQ0VOVEVSX1ggPSBDQU5WQVNfV0lEVEggLyAyO1xuY29uc3QgU0VDVElPTl9DRU5URVJfRVBTSUxPTiA9IDI7XG5jb25zdCBUT09MQkFSX1RPUF9PRkZTRVQgPSBcImNhbGModmFyKC0tZGFzaGJvYXJkLWhlYWRlci1oZWlnaHQsIDUycHgpICsgOHB4KVwiO1xuXG5jb25zdCBjbGFtcCA9ICh2YWx1ZSwgbWluLCBtYXgpID0+IHtcbiAgY29uc3Qgc2FmZU1pbiA9IE51bWJlci5pc0Zpbml0ZShtaW4pID8gbWluIDogMDtcbiAgY29uc3Qgc2FmZU1heCA9IE51bWJlci5pc0Zpbml0ZShtYXgpID8gbWF4IDogc2FmZU1pbjtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBzYWZlTWluKSwgTWF0aC5tYXgoc2FmZU1pbiwgc2FmZU1heCkpO1xufTtcblxuY29uc3QgaXNCb2xkRm9udFdlaWdodCA9ICh3ZWlnaHQpID0+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IFN0cmluZyh3ZWlnaHQgfHwgXCJub3JtYWxcIikudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIChcbiAgICBub3JtYWxpemVkID09PSBcImJvbGRcIiB8fFxuICAgIG5vcm1hbGl6ZWQgPT09IFwiYm9sZGVyXCIgfHxcbiAgICBbXCI1MDBcIiwgXCI2MDBcIiwgXCI3MDBcIiwgXCI4MDBcIiwgXCI5MDBcIl0uaW5jbHVkZXMobm9ybWFsaXplZClcbiAgKTtcbn07XG5cbmNvbnN0IHJlc29sdmVLb252YUZvbnRTdHlsZSA9IChmb250U3R5bGUsIGZvbnRXZWlnaHQpID0+IHtcbiAgY29uc3Qgc3R5bGUgPSBTdHJpbmcoZm9udFN0eWxlIHx8IFwibm9ybWFsXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGlzSXRhbGljID0gc3R5bGUuaW5jbHVkZXMoXCJpdGFsaWNcIikgfHwgc3R5bGUuaW5jbHVkZXMoXCJvYmxpcXVlXCIpO1xuICBjb25zdCBpc0JvbGQgPSBzdHlsZS5pbmNsdWRlcyhcImJvbGRcIikgfHwgaXNCb2xkRm9udFdlaWdodChmb250V2VpZ2h0KTtcblxuICBpZiAoaXNCb2xkICYmIGlzSXRhbGljKSByZXR1cm4gXCJib2xkIGl0YWxpY1wiO1xuICBpZiAoaXNCb2xkKSByZXR1cm4gXCJib2xkXCI7XG4gIGlmIChpc0l0YWxpYykgcmV0dXJuIFwiaXRhbGljXCI7XG4gIHJldHVybiBcIm5vcm1hbFwiO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRmxvYXRpbmdUZXh0VG9vbGJhcih7XG4gIG9iamV0b1NlbGVjY2lvbmFkbyxcbiAgc2V0T2JqZXRvcyxcbiAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcbiAgbW9zdHJhclNlbGVjdG9yRnVlbnRlLFxuICBzZXRNb3N0cmFyU2VsZWN0b3JGdWVudGUsXG4gIG1vc3RyYXJTZWxlY3RvclRhbWFubyxcbiAgc2V0TW9zdHJhclNlbGVjdG9yVGFtYW5vLFxuICBmb250TWFuYWdlcixcbiAgQUxMX0ZPTlRTID0gW10sXG4gIHRhbWFuaW9zRGlzcG9uaWJsZXMgPSBbXSxcbiAgb25DYW1iaWFyQWxpbmVhY2lvbixcbn0pIHtcbiAgY29uc3QgW2lzTW9iaWxlLCBzZXRJc01vYmlsZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtmb250U2VsZWN0b3JTdHlsZSwgc2V0Rm9udFNlbGVjdG9yU3R5bGVdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFttb2JpbGVGb250U3RyaXBUb3AsIHNldE1vYmlsZUZvbnRTdHJpcFRvcF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgdG9vbGJhclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYm90b25GdWVudGVSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGxhdGVzdEZvbnRDaGFuZ2VSZWYgPSB1c2VSZWYoMCk7XG4gIGNvbnN0IGxhdGVzdEZvbnRTaXplQ2hhbmdlUmVmID0gdXNlUmVmKDApO1xuICBjb25zdCBsYXN0VHlwb2dyYXBoeVRhcmdldHNSZWYgPSB1c2VSZWYoW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcbiAgICBjb25zdCBtcSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNzY4cHgpXCIpO1xuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHNldElzTW9iaWxlKG1xLm1hdGNoZXMpO1xuICAgIHVwZGF0ZSgpO1xuICAgIG1xLmFkZEV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgIHJldHVybiAoKSA9PiBtcS5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgfSwgW10pO1xuXG4gIGNvbnN0IG5vcm1hbGl6YXJGb250U2l6ZSA9ICh2YWx1ZSwgZmFsbGJhY2sgPSAyNCkgPT4ge1xuICAgIGNvbnN0IG5leHQgPSBOdW1iZXIodmFsdWUpO1xuICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobmV4dCkgJiYgbmV4dCA+IDAgPyBuZXh0IDogZmFsbGJhY2s7XG4gIH07XG4gIGNvbnN0IG5vcm1hbGl6YXJGb250U2l6ZUVudGVybyA9ICh2YWx1ZSwgZmFsbGJhY2sgPSAyNCkgPT5cbiAgICBNYXRoLm1heCg2LCBNYXRoLnJvdW5kKG5vcm1hbGl6YXJGb250U2l6ZSh2YWx1ZSwgZmFsbGJhY2spKSk7XG5cbiAgY29uc3Qgbm9ybWFsaXphckVzY2FsYVggPSAodmFsdWUpID0+IHtcbiAgICBjb25zdCBuZXh0ID0gTnVtYmVyKHZhbHVlKTtcbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG5leHQpICYmIE1hdGguYWJzKG5leHQpID4gMCA/IG5leHQgOiAxO1xuICB9O1xuXG4gIGNvbnN0IG1lZGlyQW5jaG9UZXh0byA9IChvYmosIG92ZXJyaWRlcyA9IHt9KSA9PiB7XG4gICAgaWYgKCFvYmogfHwgb2JqLnRpcG8gIT09IFwidGV4dG9cIikgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBvcHRpb25zID1cbiAgICAgIHR5cGVvZiBvdmVycmlkZXMgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyB7IGZvbnRGYW1pbHlPdmVycmlkZTogb3ZlcnJpZGVzIH1cbiAgICAgICAgOiAob3ZlcnJpZGVzIHx8IHt9KTtcbiAgICBjb25zdCB7IGZvbnRGYW1pbHlPdmVycmlkZSwgZm9udFNpemVPdmVycmlkZSB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGZvbnRTaXplID0gbm9ybWFsaXphckZvbnRTaXplKGZvbnRTaXplT3ZlcnJpZGUgPz8gb2JqLmZvbnRTaXplLCAyNCk7XG4gICAgY29uc3QgZm9udFdlaWdodCA9IG9iai5mb250V2VpZ2h0IHx8IFwibm9ybWFsXCI7XG4gICAgY29uc3QgZm9udFN0eWxlID0gb2JqLmZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiO1xuICAgIGNvbnN0IGZvbnRGYW1pbHkgPSBTdHJpbmcoZm9udEZhbWlseU92ZXJyaWRlIHx8IG9iai5mb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwiKTtcbiAgICBjb25zdCBiYXNlTGluZUhlaWdodCA9XG4gICAgICBOdW1iZXIuaXNGaW5pdGUob2JqLmxpbmVIZWlnaHQpICYmIG9iai5saW5lSGVpZ2h0ID4gMFxuICAgICAgICA/IG9iai5saW5lSGVpZ2h0XG4gICAgICAgIDogMS4yO1xuICAgIGNvbnN0IHJhd1RleHQgPSBTdHJpbmcob2JqLnRleHRvID8/IFwiXCIpO1xuICAgIGNvbnN0IHNhZmVUZXh0ID0gcmF3VGV4dC5yZXBsYWNlKC9bIFxcdF0rJC9nbSwgXCJcIik7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJvYmUgPSBuZXcgS29udmEuVGV4dCh7XG4gICAgICAgIHRleHQ6IHNhZmVUZXh0LFxuICAgICAgICBmb250U2l6ZSxcbiAgICAgICAgZm9udEZhbWlseSxcbiAgICAgICAgZm9udFdlaWdodCxcbiAgICAgICAgZm9udFN0eWxlOiByZXNvbHZlS29udmFGb250U3R5bGUoZm9udFN0eWxlLCBmb250V2VpZ2h0KSxcbiAgICAgICAgbGluZUhlaWdodDogYmFzZUxpbmVIZWlnaHQgKiAwLjkyLFxuICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICB3cmFwOiBcIm5vbmVcIixcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgd2lkdGggPSBOdW1iZXIocHJvYmUuZ2V0VGV4dFdpZHRoPy4oKSB8fCAwKTtcbiAgICAgIHByb2JlLmRlc3Ryb3koKTtcbiAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUod2lkdGgpICYmIHdpZHRoID4gMCkgcmV0dXJuIHdpZHRoO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gZmFsbGJhY2sgYSBjYW52YXNcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgaWYgKCFjdHgpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGZvbnRGb3JDYW52YXMgPSBmb250RmFtaWx5LmluY2x1ZGVzKFwiLFwiKVxuICAgICAgPyBmb250RmFtaWx5XG4gICAgICA6ICgvXFxzLy50ZXN0KGZvbnRGYW1pbHkpID8gYFwiJHtmb250RmFtaWx5fVwiYCA6IGZvbnRGYW1pbHkpO1xuICAgIGN0eC5mb250ID0gYCR7Zm9udFN0eWxlfSAke2ZvbnRXZWlnaHR9ICR7Zm9udFNpemV9cHggJHtmb250Rm9yQ2FudmFzfWA7XG4gICAgY29uc3QgbGluZXMgPSBzYWZlVGV4dC5zcGxpdCgvXFxyP1xcbi8pO1xuICAgIGNvbnN0IG1heExpbmVXaWR0aCA9IE1hdGgubWF4KC4uLmxpbmVzLm1hcCgobGluZSkgPT4gY3R4Lm1lYXN1cmVUZXh0KGxpbmUpLndpZHRoKSwgMjApO1xuICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWF4TGluZVdpZHRoKSA/IG1heExpbmVXaWR0aCA6IG51bGw7XG4gIH07XG5cbiAgY29uc3Qgb2J0ZW5lckNlbnRyb1Zpc3VhbFhEZXNkZU5vZG8gPSAoaWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcmVmcyA9IHdpbmRvdy5fZWxlbWVudFJlZnMgfHwgbnVsbDtcbiAgICBjb25zdCBub2RlID0gcmVmcz8uW2lkXTtcbiAgICBpZiAoIW5vZGUgfHwgdHlwZW9mIG5vZGUuZ2V0Q2xpZW50UmVjdCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZWN0ID0gbm9kZS5nZXRDbGllbnRSZWN0KHtcbiAgICAgICAgc2tpcFRyYW5zZm9ybTogZmFsc2UsXG4gICAgICAgIHNraXBTaGFkb3c6IHRydWUsXG4gICAgICAgIHNraXBTdHJva2U6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVjdCB8fCAhTnVtYmVyLmlzRmluaXRlKHJlY3QueCkgfHwgIU51bWJlci5pc0Zpbml0ZShyZWN0LndpZHRoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZWN0LnggKyByZWN0LndpZHRoIC8gMjtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBvYnRlbmVyQ2VudHJvRmFsbGJhY2tEZXNkZU9iamV0byA9IChvYmosIGZvbnRGYW1pbHlPdmVycmlkZSkgPT4ge1xuICAgIGlmICghb2JqIHx8IG9iai50aXBvICE9PSBcInRleHRvXCIpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHdpZHRoID0gbWVkaXJBbmNob1RleHRvKG9iaiwgZm9udEZhbWlseU92ZXJyaWRlKTtcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZSh3aWR0aCkgfHwgd2lkdGggPD0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBjdXJyZW50WCA9IE51bWJlci5pc0Zpbml0ZShvYmoueCkgPyBvYmoueCA6IDA7XG4gICAgY29uc3Qgc2NhbGVYID0gbm9ybWFsaXphckVzY2FsYVgob2JqLnNjYWxlWCk7XG4gICAgcmV0dXJuIGN1cnJlbnRYICsgKHdpZHRoICogc2NhbGVYKSAvIDI7XG4gIH07XG5cbiAgY29uc3QgcmVzb2x2ZXJDZW50cm9PYmpldGl2b0NhbWJpb0Z1ZW50ZSA9IChvYmopID0+IHtcbiAgICBpZiAoIW9iaiB8fCBvYmoudGlwbyAhPT0gXCJ0ZXh0b1wiKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGNlbnRlckRlc2RlTm9kbyA9IG9idGVuZXJDZW50cm9WaXN1YWxYRGVzZGVOb2RvKG9iai5pZCk7XG4gICAgY29uc3QgY2VudGVyRmFsbGJhY2sgPSBvYnRlbmVyQ2VudHJvRmFsbGJhY2tEZXNkZU9iamV0byhvYmosIG9iai5mb250RmFtaWx5KTtcbiAgICBjb25zdCBjZW50ZXJBY3R1YWwgPSBOdW1iZXIuaXNGaW5pdGUoY2VudGVyRGVzZGVOb2RvKVxuICAgICAgPyBjZW50ZXJEZXNkZU5vZG9cbiAgICAgIDogY2VudGVyRmFsbGJhY2s7XG5cbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShjZW50ZXJBY3R1YWwpKSByZXR1cm4gbnVsbDtcblxuICAgIC8vIFNpIHlhIGVzdMOhIGNlbnRyYWRvIGVuIGxhIHNlY2Npw7NuLCBhbmNsYW1vcyBhbCBjZW50cm8gZXhhY3RvIGRlIHNlY2Npw7NuLlxuICAgIGlmIChNYXRoLmFicyhjZW50ZXJBY3R1YWwgLSBTRUNUSU9OX0NFTlRFUl9YKSA8PSBTRUNUSU9OX0NFTlRFUl9FUFNJTE9OKSB7XG4gICAgICByZXR1cm4gU0VDVElPTl9DRU5URVJfWDtcbiAgICB9XG5cbiAgICByZXR1cm4gY2VudGVyQWN0dWFsO1xuICB9O1xuXG4gIGNvbnN0IGRlYmVNYW50ZW5lckNlbnRyb0VuQ2FtYmlvRGVGdWVudGUgPSAob2JqKSA9PlxuICAgIG9iaj8udGlwbyA9PT0gXCJ0ZXh0b1wiICYmXG4gICAgIW9iaj8uX19ncm91cEFsaWduO1xuICBjb25zdCBkZWJlQWp1c3RhckNlbnRyb1ByZWRpY3Rpdm8gPSAob2JqKSA9PlxuICAgIG9iaj8udGlwbyA9PT0gXCJ0ZXh0b1wiICYmXG4gICAgIW9iaj8uX19ncm91cEFsaWduICYmXG4gICAgIU51bWJlci5pc0Zpbml0ZShvYmo/LndpZHRoKSAmJlxuICAgIG9iaj8uX19hdXRvV2lkdGggIT09IGZhbHNlO1xuICBjb25zdCBkZWJlQW5jbGFyQ2VudHJvVGV4dG8gPSAob2JqKSA9PlxuICAgIG9iaj8udGlwbyA9PT0gXCJ0ZXh0b1wiICYmXG4gICAgIW9iaj8uX19ncm91cEFsaWduO1xuXG4gIGNvbnN0IGVzT2JqZXRpdm9UaXBvZ3JhZmlhID0gKGl0ZW0pID0+IHtcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBmYWxzZTtcbiAgICBpZiAoaXRlbS50aXBvID09PSBcInRleHRvXCIpIHJldHVybiB0cnVlO1xuICAgIGlmIChpdGVtLnRpcG8gPT09IFwiZm9ybWFcIiAmJiBpdGVtLmZpZ3VyYSA9PT0gXCJyZWN0XCIgJiYgdHlwZW9mIGl0ZW0udGV4dG8gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgYWN0dWFsaXphclNlbGVjY2lvbmFkb3MgPSAodXBkYXRlciwgeyBzb2xvVGlwb2dyYWZpYSA9IGZhbHNlIH0gPSB7fSkgPT4ge1xuICAgIHNldE9iamV0b3MoKHByZXYpID0+XG4gICAgICBwcmV2Lm1hcCgobykgPT4ge1xuICAgICAgICBpZiAoIWVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMoby5pZCkpIHJldHVybiBvO1xuICAgICAgICBpZiAoc29sb1RpcG9ncmFmaWEgJiYgIWVzT2JqZXRpdm9UaXBvZ3JhZmlhKG8pKSByZXR1cm4gbztcbiAgICAgICAgcmV0dXJuIHVwZGF0ZXIobyk7XG4gICAgICB9KVxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgdG9vbGJhckNvbnRhaW5lckNsYXNzID0gYGZpeGVkIHotNTAgYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQgc2hhZG93IHAtMiBmbGV4ICR7XG4gICAgaXNNb2JpbGVcbiAgICAgID8gXCJmbGV4LW5vd3JhcCBpdGVtcy1jZW50ZXIganVzdGlmeS1zdGFydCBnYXAtMVwiXG4gICAgICA6IFwiZ2FwLTIgaXRlbXMtY2VudGVyXCJcbiAgfWA7XG5cbiAgY29uc3QgdG9vbGJhckNvbnRhaW5lclN0eWxlID0ge1xuICAgIHRvcDogVE9PTEJBUl9UT1BfT0ZGU0VULFxuICAgIGxlZnQ6IFwiNTAlXCIsXG4gICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVgoLTUwJSlcIixcbiAgICB3aWR0aDogaXNNb2JpbGUgPyBcImNhbGMoMTAwdncgLSA4cHgpXCIgOiBcImF1dG9cIixcbiAgICBtYXhXaWR0aDogaXNNb2JpbGUgPyBcImNhbGMoMTAwdncgLSA4cHgpXCIgOiBcIjgwMHB4XCIsXG4gICAgb3ZlcmZsb3dYOiBpc01vYmlsZSA/IFwiYXV0b1wiIDogXCJ2aXNpYmxlXCIsXG4gICAgb3ZlcmZsb3dZOiBcImhpZGRlblwiLFxuICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiBpc01vYmlsZSA/IFwidG91Y2hcIiA6IFwiYXV0b1wiLFxuICAgIHdoaXRlU3BhY2U6IGlzTW9iaWxlID8gXCJub3dyYXBcIiA6IFwibm9ybWFsXCIsXG4gIH07XG5cbiAgY29uc3QgZXNUZXh0byA9IG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJ0ZXh0b1wiO1xuICBjb25zdCBlc0Zvcm1hQ29uVGV4dG8gPVxuICAgIG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJmb3JtYVwiICYmXG4gICAgb2JqZXRvU2VsZWNjaW9uYWRvPy5maWd1cmEgPT09IFwicmVjdFwiICYmXG4gICAgdHlwZW9mIG9iamV0b1NlbGVjY2lvbmFkbz8udGV4dG8gPT09IFwic3RyaW5nXCI7XG4gIGNvbnN0IGVzUmVjdCA9IG9iamV0b1NlbGVjY2lvbmFkbz8uZmlndXJhID09PSBcInJlY3RcIjtcbiAgY29uc3QgbW9zdHJhckNvbnRyb2xlc1RpcG9ncmFmaWEgPSBlc1RleHRvIHx8IGVzRm9ybWFDb25UZXh0bztcbiAgY29uc3QgbW9iaWxlRm9udFN0cmlwVmlzaWJsZSA9XG4gICAgaXNNb2JpbGUgJiYgbW9zdHJhckNvbnRyb2xlc1RpcG9ncmFmaWEgJiYgbW9zdHJhclNlbGVjdG9yRnVlbnRlO1xuICBjb25zdCBtb2JpbGVTaXplU3RyaXBWaXNpYmxlID1cbiAgICBpc01vYmlsZSAmJiBtb3N0cmFyQ29udHJvbGVzVGlwb2dyYWZpYSAmJiBtb3N0cmFyU2VsZWN0b3JUYW1hbm87XG4gIGNvbnN0IG1vYmlsZUJvdHRvbVN0cmlwVmlzaWJsZSA9IG1vYmlsZUZvbnRTdHJpcFZpc2libGUgfHwgbW9iaWxlU2l6ZVN0cmlwVmlzaWJsZTtcblxuICBjb25zdCBmb250U2l6ZUFjdHVhbCA9IG5vcm1hbGl6YXJGb250U2l6ZUVudGVybyhvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRTaXplLCAyNCk7XG4gIGNvbnN0IGZvbnRXZWlnaHRBY3R1YWwgPSBTdHJpbmcob2JqZXRvU2VsZWNjaW9uYWRvPy5mb250V2VpZ2h0IHx8IFwibm9ybWFsXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGZvbnRTdHlsZUFjdHVhbCA9IFN0cmluZyhvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiKS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCB0ZXh0RGVjb3JhdGlvbkFjdHVhbCA9IFN0cmluZyhvYmpldG9TZWxlY2Npb25hZG8/LnRleHREZWNvcmF0aW9uIHx8IFwibm9uZVwiKS50b0xvd2VyQ2FzZSgpO1xuXG4gIGNvbnN0IG5lZ3JpdGFBY3RpdmEgPVxuICAgIGZvbnRXZWlnaHRBY3R1YWwgPT09IFwiYm9sZFwiIHx8XG4gICAgZm9udFdlaWdodEFjdHVhbCA9PT0gXCJib2xkZXJcIiB8fFxuICAgIFtcIjUwMFwiLCBcIjYwMFwiLCBcIjcwMFwiLCBcIjgwMFwiLCBcIjkwMFwiXS5pbmNsdWRlcyhmb250V2VpZ2h0QWN0dWFsKTtcbiAgY29uc3QgY3Vyc2l2YUFjdGl2YSA9IGZvbnRTdHlsZUFjdHVhbC5pbmNsdWRlcyhcIml0YWxpY1wiKSB8fCBmb250U3R5bGVBY3R1YWwuaW5jbHVkZXMoXCJvYmxpcXVlXCIpO1xuICBjb25zdCBzdWJyYXlhZG9BY3Rpdm8gPSB0ZXh0RGVjb3JhdGlvbkFjdHVhbC5pbmNsdWRlcyhcInVuZGVybGluZVwiKTtcbiAgY29uc3QgZnVlbnRlc0Rpc3BvbmlibGVzTW9iaWxlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KEFMTF9GT05UUykpIHJldHVybiBbXTtcblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0KCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IFtdO1xuICAgIGZvciAoY29uc3QgZnVlbnRlIG9mIEFMTF9GT05UUykge1xuICAgICAgaWYgKCFmdWVudGUgfHwgdHlwZW9mIGZ1ZW50ZSAhPT0gXCJvYmplY3RcIikgY29udGludWU7XG4gICAgICBjb25zdCB2YWxvciA9IHR5cGVvZiBmdWVudGUudmFsb3IgPT09IFwic3RyaW5nXCIgPyBmdWVudGUudmFsb3IudHJpbSgpIDogXCJcIjtcbiAgICAgIGlmICghdmFsb3IgfHwgc2Vlbi5oYXModmFsb3IpKSBjb250aW51ZTtcbiAgICAgIHNlZW4uYWRkKHZhbG9yKTtcbiAgICAgIG5vcm1hbGl6ZWQucHVzaCh7XG4gICAgICAgIHZhbG9yLFxuICAgICAgICBub21icmU6XG4gICAgICAgICAgdHlwZW9mIGZ1ZW50ZS5ub21icmUgPT09IFwic3RyaW5nXCIgJiYgZnVlbnRlLm5vbWJyZS50cmltKClcbiAgICAgICAgICAgID8gZnVlbnRlLm5vbWJyZS50cmltKClcbiAgICAgICAgICAgIDogdmFsb3IsXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG4gIH0sIFtBTExfRk9OVFNdKTtcblxuICBjb25zdCBmdWVudGVzV2FybXVwTW9iaWxlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFtb2JpbGVGb250U3RyaXBWaXNpYmxlKSByZXR1cm4gW107XG5cbiAgICBjb25zdCBmdWVudGVzID0gW107XG4gICAgY29uc3QgZnVlbnRlQWN0dWFsID1cbiAgICAgIHR5cGVvZiBvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRGYW1pbHkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBvYmpldG9TZWxlY2Npb25hZG8uZm9udEZhbWlseS50cmltKClcbiAgICAgICAgOiBcIlwiO1xuXG4gICAgaWYgKGZ1ZW50ZUFjdHVhbCkge1xuICAgICAgZnVlbnRlcy5wdXNoKGZ1ZW50ZUFjdHVhbCk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBmdWVudGUgb2YgZnVlbnRlc0Rpc3BvbmlibGVzTW9iaWxlKSB7XG4gICAgICBjb25zdCB2YWxvciA9IHR5cGVvZiBmdWVudGU/LnZhbG9yID09PSBcInN0cmluZ1wiID8gZnVlbnRlLnZhbG9yLnRyaW0oKSA6IFwiXCI7XG4gICAgICBpZiAoIXZhbG9yIHx8IGZ1ZW50ZXMuaW5jbHVkZXModmFsb3IpKSBjb250aW51ZTtcbiAgICAgIGZ1ZW50ZXMucHVzaCh2YWxvcik7XG4gICAgICBpZiAoZnVlbnRlcy5sZW5ndGggPj0gTU9CSUxFX0ZPTlRfV0FSTV9DT1VOVCkgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1ZW50ZXM7XG4gIH0sIFtmdWVudGVzRGlzcG9uaWJsZXNNb2JpbGUsIG1vYmlsZUZvbnRTdHJpcFZpc2libGUsIG9iamV0b1NlbGVjY2lvbmFkbz8uZm9udEZhbWlseV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaWRzRnJvbVNlbGVjdGlvbiA9IEFycmF5LmlzQXJyYXkoZWxlbWVudG9zU2VsZWNjaW9uYWRvcylcbiAgICAgID8gZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gbnVsbCAmJiB0eXBlb2YgaWQgIT09IFwidW5kZWZpbmVkXCIpXG4gICAgICA6IFtdO1xuXG4gICAgY29uc3QgbmV4dElkcyA9IGlkc0Zyb21TZWxlY3Rpb24ubGVuZ3RoXG4gICAgICA/IGlkc0Zyb21TZWxlY3Rpb25cbiAgICAgIDogKG9iamV0b1NlbGVjY2lvbmFkbz8uaWQgPyBbb2JqZXRvU2VsZWNjaW9uYWRvLmlkXSA6IFtdKTtcblxuICAgIGlmICghbmV4dElkcy5sZW5ndGgpIHJldHVybjtcbiAgICBsYXN0VHlwb2dyYXBoeVRhcmdldHNSZWYuY3VycmVudCA9IG5leHRJZHM7XG4gIH0sIFtlbGVtZW50b3NTZWxlY2Npb25hZG9zLCBvYmpldG9TZWxlY2Npb25hZG8/LmlkXSk7XG5cbiAgY29uc3QgY2FsY3VsYXJFc3RpbG9TZWxlY3RvckZ1ZW50ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYm90b25GdWVudGUgPSBib3RvbkZ1ZW50ZVJlZi5jdXJyZW50O1xuICAgIGlmICghYm90b25GdWVudGUpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3Qgdmlld3BvcnRXaWR0aCA9IE1hdGgubWF4KDMyMCwgd2luZG93LmlubmVyV2lkdGggfHwgMCk7XG4gICAgY29uc3Qgdmlld3BvcnRIZWlnaHQgPSBNYXRoLm1heCgzMjAsIHdpbmRvdy5pbm5lckhlaWdodCB8fCAwKTtcbiAgICBjb25zdCB0cmlnZ2VyUmVjdCA9IGJvdG9uRnVlbnRlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGlzRGVza3RvcCA9IHZpZXdwb3J0V2lkdGggPj0gNzY4O1xuICAgIGlmICghaXNEZXNrdG9wKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHBhbmVsV2lkdGggPSBNYXRoLm1pbihcbiAgICAgIEZPTlRfU0VMRUNUT1JfRklYRURfV0lEVEgsXG4gICAgICB2aWV3cG9ydFdpZHRoIC0gRk9OVF9TRUxFQ1RPUl9QQURESU5HICogMlxuICAgICk7XG4gICAgY29uc3QgdG9wID0gY2xhbXAoXG4gICAgICB0cmlnZ2VyUmVjdC5ib3R0b20gKyBGT05UX1NFTEVDVE9SX0dBUCxcbiAgICAgIEZPTlRfU0VMRUNUT1JfUEFERElORyxcbiAgICAgIHZpZXdwb3J0SGVpZ2h0IC0gMTYwXG4gICAgKTtcblxuICAgIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYXNpZGVcIik7XG4gICAgY29uc3Qgc2lkZWJhclJlY3QgPSBzaWRlYmFyPy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/LigpIHx8IG51bGw7XG4gICAgY29uc3Qgc2lkZWJhclBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlYmFyLXBhbmVsXCIpO1xuICAgIGNvbnN0IHNpZGViYXJQYW5lbFJlY3QgPSBzaWRlYmFyUGFuZWw/LmdldEJvdW5kaW5nQ2xpZW50UmVjdD8uKCkgfHwgbnVsbDtcblxuICAgIGxldCBhbmNob3JSaWdodCA9IEZPTlRfU0VMRUNUT1JfUEFERElORztcbiAgICBpZiAoc2lkZWJhclJlY3QgJiYgc2lkZWJhclJlY3Qud2lkdGggPiAwICYmIHNpZGViYXJSZWN0LmhlaWdodCA+IDApIHtcbiAgICAgIGFuY2hvclJpZ2h0ID0gc2lkZWJhclJlY3QucmlnaHQ7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHNpZGViYXJQYW5lbFJlY3QgJiZcbiAgICAgIHNpZGViYXJQYW5lbFJlY3Qud2lkdGggPiAwICYmXG4gICAgICBzaWRlYmFyUGFuZWxSZWN0LmhlaWdodCA+IDBcbiAgICApIHtcbiAgICAgIGFuY2hvclJpZ2h0ID0gc2lkZWJhclBhbmVsUmVjdC5yaWdodDtcbiAgICB9XG5cbiAgICBjb25zdCBtYXhMZWZ0ID0gdmlld3BvcnRXaWR0aCAtIHBhbmVsV2lkdGggLSBGT05UX1NFTEVDVE9SX1BBRERJTkc7XG4gICAgY29uc3QgbGVmdCA9IGNsYW1wKFxuICAgICAgYW5jaG9yUmlnaHQgKyBGT05UX1NFTEVDVE9SX1NJREVCQVJfR0FQLFxuICAgICAgRk9OVF9TRUxFQ1RPUl9QQURESU5HLFxuICAgICAgbWF4TGVmdFxuICAgICk7XG4gICAgY29uc3QgYXZhaWxhYmxlSGVpZ2h0ID0gdmlld3BvcnRIZWlnaHQgLSB0b3AgLSBGT05UX1NFTEVDVE9SX1BBRERJTkc7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICAgIGxlZnQ6IGAke01hdGgucm91bmQobGVmdCl9cHhgLFxuICAgICAgdG9wOiBgJHtNYXRoLnJvdW5kKHRvcCl9cHhgLFxuICAgICAgd2lkdGg6IGAke01hdGgucm91bmQocGFuZWxXaWR0aCl9cHhgLFxuICAgICAgbWF4SGVpZ2h0OiBgJHtNYXRoLnJvdW5kKE1hdGgubWF4KDE0MCwgYXZhaWxhYmxlSGVpZ2h0KSl9cHhgLFxuICAgICAgbWFyZ2luVG9wOiBcIjBweFwiLFxuICAgIH07XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbW9zdHJhclNlbGVjdG9yRnVlbnRlKSB7XG4gICAgICBzZXRGb250U2VsZWN0b3JTdHlsZShudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVTdHlsZSA9ICgpID0+IHtcbiAgICAgIHNldEZvbnRTZWxlY3RvclN0eWxlKGNhbGN1bGFyRXN0aWxvU2VsZWN0b3JGdWVudGUoKSk7XG4gICAgfTtcblxuICAgIHVwZGF0ZVN0eWxlKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlU3R5bGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHVwZGF0ZVN0eWxlLCB0cnVlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlU3R5bGUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdXBkYXRlU3R5bGUsIHRydWUpO1xuICAgIH07XG4gIH0sIFttb3N0cmFyU2VsZWN0b3JGdWVudGUsIGNhbGN1bGFyRXN0aWxvU2VsZWN0b3JGdWVudGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbW9iaWxlQm90dG9tU3RyaXBWaXNpYmxlKSB7XG4gICAgICBzZXRNb2JpbGVGb250U3RyaXBUb3AobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlUG9zaXRpb24gPSAoKSA9PiB7XG4gICAgICBjb25zdCB0b29sYmFyRWwgPSB0b29sYmFyUmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIXRvb2xiYXJFbCkgcmV0dXJuO1xuICAgICAgY29uc3QgcmVjdCA9IHRvb2xiYXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHJlY3QuYm90dG9tKSkgcmV0dXJuO1xuICAgICAgc2V0TW9iaWxlRm9udFN0cmlwVG9wKE1hdGgucm91bmQocmVjdC5ib3R0b20gKyBNT0JJTEVfRk9OVF9TVFJJUF9HQVApKTtcbiAgICB9O1xuXG4gICAgdXBkYXRlUG9zaXRpb24oKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVQb3NpdGlvbik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdXBkYXRlUG9zaXRpb24sIHRydWUpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGVQb3NpdGlvbik7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB1cGRhdGVQb3NpdGlvbiwgdHJ1ZSk7XG4gICAgfTtcbiAgfSwgW21vYmlsZUJvdHRvbVN0cmlwVmlzaWJsZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFmdWVudGVzV2FybXVwTW9iaWxlLmxlbmd0aCkgcmV0dXJuO1xuICAgIHZvaWQgZm9udE1hbmFnZXIubG9hZEZvbnRzKGZ1ZW50ZXNXYXJtdXBNb2JpbGUpO1xuICB9LCBbZm9udE1hbmFnZXIsIGZ1ZW50ZXNXYXJtdXBNb2JpbGVdKTtcblxuICBjb25zdCBhcGxpY2FyVGFtYW5vRnVlbnRlU2VsZWNjaW9uYWRvID0gdXNlQ2FsbGJhY2soXG4gICAgKHJlc29sdmVyVGFtYW5vKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0SWQgPSBsYXRlc3RGb250U2l6ZUNoYW5nZVJlZi5jdXJyZW50ICsgMTtcbiAgICAgIGxhdGVzdEZvbnRTaXplQ2hhbmdlUmVmLmN1cnJlbnQgPSByZXF1ZXN0SWQ7XG5cbiAgICAgIGNvbnN0IGlkc1NlbGVjY2lvbmFkb3MgPVxuICAgICAgICBBcnJheS5pc0FycmF5KGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MpICYmIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoXG4gICAgICAgICAgPyBlbGVtZW50b3NTZWxlY2Npb25hZG9zXG4gICAgICAgICAgOiBsYXN0VHlwb2dyYXBoeVRhcmdldHNSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IHRhcmdldElkcyA9IG5ldyBTZXQoXG4gICAgICAgIChpZHNTZWxlY2Npb25hZG9zIHx8IFtdKS5maWx0ZXIoXG4gICAgICAgICAgKGlkKSA9PiBpZCAhPT0gbnVsbCAmJiB0eXBlb2YgaWQgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgaWYgKCF0YXJnZXRJZHMuc2l6ZSAmJiBvYmpldG9TZWxlY2Npb25hZG8/LmlkKSB7XG4gICAgICAgIHRhcmdldElkcy5hZGQob2JqZXRvU2VsZWNjaW9uYWRvLmlkKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGFyZ2V0SWRzLnNpemUpIHJldHVybjtcblxuICAgICAgY29uc3QgZ2V0T2JqQnlJZCA9XG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5fX2dldE9iakJ5SWQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gd2luZG93Ll9fZ2V0T2JqQnlJZFxuICAgICAgICAgIDogbnVsbDtcbiAgICAgIGNvbnN0IGNlbnRlclRhcmdldEJ5SWQgPSBuZXcgTWFwKCk7XG5cbiAgICAgIHRhcmdldElkcy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXRPYmogPVxuICAgICAgICAgIGdldE9iakJ5SWQ/LihpZCkgfHwgKG9iamV0b1NlbGVjY2lvbmFkbz8uaWQgPT09IGlkID8gb2JqZXRvU2VsZWNjaW9uYWRvIDogbnVsbCk7XG4gICAgICAgIGlmICghdGFyZ2V0T2JqKSByZXR1cm47XG4gICAgICAgIGlmICghZGViZUFuY2xhckNlbnRyb1RleHRvKHRhcmdldE9iaikpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjZW50ZXJPYmpldGl2byA9IHJlc29sdmVyQ2VudHJvT2JqZXRpdm9DYW1iaW9GdWVudGUodGFyZ2V0T2JqKTtcbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShjZW50ZXJPYmpldGl2bykpIHtcbiAgICAgICAgICBjZW50ZXJUYXJnZXRCeUlkLnNldChpZCwgY2VudGVyT2JqZXRpdm8pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRGb250U2l6ZUJ5SWQgPSBuZXcgTWFwKCk7XG4gICAgICBzZXRPYmpldG9zKChwcmV2KSA9PlxuICAgICAgICBwcmV2Lm1hcCgobykgPT4ge1xuICAgICAgICAgIGlmICghdGFyZ2V0SWRzLmhhcyhvLmlkKSkgcmV0dXJuIG87XG4gICAgICAgICAgaWYgKCFlc09iamV0aXZvVGlwb2dyYWZpYShvKSkgcmV0dXJuIG87XG5cbiAgICAgICAgICBjb25zdCBjdXJyZW50U2l6ZSA9IG5vcm1hbGl6YXJGb250U2l6ZUVudGVybyhvLmZvbnRTaXplLCAyNCk7XG4gICAgICAgICAgY29uc3QgbmV4dFNpemVSYXcgPVxuICAgICAgICAgICAgdHlwZW9mIHJlc29sdmVyVGFtYW5vID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgPyByZXNvbHZlclRhbWFubyhvLCBjdXJyZW50U2l6ZSlcbiAgICAgICAgICAgICAgOiByZXNvbHZlclRhbWFubztcbiAgICAgICAgICBjb25zdCBuZXh0U2l6ZSA9IG5vcm1hbGl6YXJGb250U2l6ZUVudGVybyhuZXh0U2l6ZVJhdywgY3VycmVudFNpemUpO1xuICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG5leHRTaXplKSkgcmV0dXJuIG87XG4gICAgICAgICAgaWYgKE1hdGguYWJzKG5leHRTaXplIC0gY3VycmVudFNpemUpIDw9IDApIHJldHVybiBvO1xuXG4gICAgICAgICAgZXhwZWN0ZWRGb250U2l6ZUJ5SWQuc2V0KG8uaWQsIG5leHRTaXplKTtcbiAgICAgICAgICBjb25zdCBwYXRjaCA9IHsgZm9udFNpemU6IG5leHRTaXplIH07XG5cbiAgICAgICAgICBpZiAoZGViZUFuY2xhckNlbnRyb1RleHRvKG8pKSB7XG4gICAgICAgICAgICBjb25zdCBjZW50ZXJPYmpldGl2byA9IGNlbnRlclRhcmdldEJ5SWQuZ2V0KG8uaWQpO1xuICAgICAgICAgICAgY29uc3QgZGViZUFqdXN0YXJQcmVkaWN0aXZvID1cbiAgICAgICAgICAgICAgIU51bWJlci5pc0Zpbml0ZShvLndpZHRoKSAmJlxuICAgICAgICAgICAgICBvLl9fYXV0b1dpZHRoICE9PSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoY2VudGVyT2JqZXRpdm8pICYmIGRlYmVBanVzdGFyUHJlZGljdGl2bykge1xuICAgICAgICAgICAgICBjb25zdCBuZXh0V2lkdGggPSBtZWRpckFuY2hvVGV4dG8obywgeyBmb250U2l6ZU92ZXJyaWRlOiBuZXh0U2l6ZSB9KTtcbiAgICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gbm9ybWFsaXphckVzY2FsYVgoby5zY2FsZVgpO1xuICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKG5leHRXaWR0aCkgJiYgbmV4dFdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRYID0gTnVtYmVyLmlzRmluaXRlKG8ueCkgPyBvLnggOiAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRYID0gY2VudGVyT2JqZXRpdm8gLSAobmV4dFdpZHRoICogc2NhbGVYKSAvIDI7XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShuZXh0WCkgJiYgTWF0aC5hYnMobmV4dFggLSBjdXJyZW50WCkgPiAwLjI1KSB7XG4gICAgICAgICAgICAgICAgICBwYXRjaC54ID0gbmV4dFg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHsgLi4ubywgLi4ucGF0Y2ggfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGlmICghY2VudGVyVGFyZ2V0QnlJZC5zaXplKSByZXR1cm47XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGlmIChsYXRlc3RGb250U2l6ZUNoYW5nZVJlZi5jdXJyZW50ICE9PSByZXF1ZXN0SWQpIHJldHVybjtcblxuICAgICAgICAgIGNvbnN0IGRlbHRhQnlJZCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICBjZW50ZXJUYXJnZXRCeUlkLmZvckVhY2goKGNlbnRlck9iamV0aXZvLCBpZCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFleHBlY3RlZEZvbnRTaXplQnlJZC5oYXMoaWQpKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBjZW50ZXJBY3R1YWwgPSBvYnRlbmVyQ2VudHJvVmlzdWFsWERlc2RlTm9kbyhpZCk7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShjZW50ZXJBY3R1YWwpKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gY2VudGVyT2JqZXRpdm8gLSBjZW50ZXJBY3R1YWw7XG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGRlbHRhKSAmJiBNYXRoLmFicyhkZWx0YSkgPiAwLjI1KSB7XG4gICAgICAgICAgICAgIGRlbHRhQnlJZC5zZXQoaWQsIGRlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghZGVsdGFCeUlkLnNpemUpIHJldHVybjtcblxuICAgICAgICAgIHNldE9iamV0b3MoKHByZXYpID0+XG4gICAgICAgICAgICBwcmV2Lm1hcCgobykgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGRlbHRhQnlJZC5nZXQoby5pZCk7XG4gICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGRlbHRhKSkgcmV0dXJuIG87XG4gICAgICAgICAgICAgIGlmICghZXNPYmpldGl2b1RpcG9ncmFmaWEobykpIHJldHVybiBvO1xuXG4gICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkU2l6ZSA9IGV4cGVjdGVkRm9udFNpemVCeUlkLmdldChvLmlkKTtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNpemUgPSBub3JtYWxpemFyRm9udFNpemVFbnRlcm8oby5mb250U2l6ZSwgMjQpO1xuICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGV4cGVjdGVkU2l6ZSkgJiYgTWF0aC5hYnMoY3VycmVudFNpemUgLSBleHBlY3RlZFNpemUpID4gMC4wMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFggPSBOdW1iZXIuaXNGaW5pdGUoby54KSA/IG8ueCA6IDA7XG4gICAgICAgICAgICAgIGNvbnN0IG5leHRYID0gY3VycmVudFggKyBkZWx0YTtcbiAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobmV4dFgpIHx8IE1hdGguYWJzKG5leHRYIC0gY3VycmVudFgpIDw9IDAuMjUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiB7IC4uLm8sIHg6IG5leHRYIH07XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbXG4gICAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLFxuICAgICAgb2JqZXRvU2VsZWNjaW9uYWRvPy5pZCxcbiAgICAgIG9iamV0b1NlbGVjY2lvbmFkbyxcbiAgICAgIHNldE9iamV0b3MsXG4gICAgICBlc09iamV0aXZvVGlwb2dyYWZpYSxcbiAgICAgIGRlYmVNYW50ZW5lckNlbnRyb0VuQ2FtYmlvRGVGdWVudGUsXG4gICAgICBkZWJlQW5jbGFyQ2VudHJvVGV4dG8sXG4gICAgICByZXNvbHZlckNlbnRyb09iamV0aXZvQ2FtYmlvRnVlbnRlLFxuICAgICAgbWVkaXJBbmNob1RleHRvLFxuICAgICAgbm9ybWFsaXphckVzY2FsYVgsXG4gICAgICBvYnRlbmVyQ2VudHJvVmlzdWFsWERlc2RlTm9kbyxcbiAgICAgIG5vcm1hbGl6YXJGb250U2l6ZUVudGVybyxcbiAgICBdXG4gICk7XG5cbiAgY29uc3QgYXBsaWNhckZ1ZW50ZVNlbGVjY2lvbmFkYSA9IHVzZUNhbGxiYWNrKFxuICAgIChudWV2YUZ1ZW50ZSkgPT4ge1xuICAgICAgY29uc3QgZnVlbnRlT2JqZXRpdm8gPVxuICAgICAgICB0eXBlb2YgbnVldmFGdWVudGUgPT09IFwic3RyaW5nXCIgPyBudWV2YUZ1ZW50ZS50cmltKCkgOiBcIlwiO1xuICAgICAgaWYgKCFmdWVudGVPYmpldGl2bykgcmV0dXJuO1xuXG4gICAgICBjb25zdCByZXF1ZXN0SWQgPSBsYXRlc3RGb250Q2hhbmdlUmVmLmN1cnJlbnQgKyAxO1xuICAgICAgbGF0ZXN0Rm9udENoYW5nZVJlZi5jdXJyZW50ID0gcmVxdWVzdElkO1xuICAgICAgY29uc3QgaWRzU2VsZWNjaW9uYWRvcyA9XG4gICAgICAgIEFycmF5LmlzQXJyYXkoZWxlbWVudG9zU2VsZWNjaW9uYWRvcykgJiYgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGhcbiAgICAgICAgICA/IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3NcbiAgICAgICAgICA6IGxhc3RUeXBvZ3JhcGh5VGFyZ2V0c1JlZi5jdXJyZW50O1xuICAgICAgY29uc3QgdGFyZ2V0SWRzID0gbmV3IFNldChcbiAgICAgICAgKGlkc1NlbGVjY2lvbmFkb3MgfHwgW10pLmZpbHRlcihcbiAgICAgICAgICAoaWQpID0+IGlkICE9PSBudWxsICYmIHR5cGVvZiBpZCAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICApXG4gICAgICApO1xuICAgICAgaWYgKCF0YXJnZXRJZHMuc2l6ZSAmJiBvYmpldG9TZWxlY2Npb25hZG8/LmlkKSB7XG4gICAgICAgIHRhcmdldElkcy5hZGQob2JqZXRvU2VsZWNjaW9uYWRvLmlkKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGFyZ2V0SWRzLnNpemUpIHJldHVybjtcblxuICAgICAgY29uc3QgY2VudGVyVGFyZ2V0QnlJZCA9IG5ldyBNYXAoKTtcbiAgICAgIGNvbnN0IGdldE9iakJ5SWQgPVxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aW5kb3cuX19nZXRPYmpCeUlkID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHdpbmRvdy5fX2dldE9iakJ5SWRcbiAgICAgICAgICA6IG51bGw7XG5cbiAgICAgIHRhcmdldElkcy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXRPYmogPVxuICAgICAgICAgIGdldE9iakJ5SWQ/LihpZCkgfHwgKG9iamV0b1NlbGVjY2lvbmFkbz8uaWQgPT09IGlkID8gb2JqZXRvU2VsZWNjaW9uYWRvIDogbnVsbCk7XG4gICAgICAgIGlmICghdGFyZ2V0T2JqKSByZXR1cm47XG4gICAgICAgIGlmICghZGViZU1hbnRlbmVyQ2VudHJvRW5DYW1iaW9EZUZ1ZW50ZSh0YXJnZXRPYmopKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2VudGVyT2JqZXRpdm8gPSByZXNvbHZlckNlbnRyb09iamV0aXZvQ2FtYmlvRnVlbnRlKHRhcmdldE9iaik7XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoY2VudGVyT2JqZXRpdm8pKSB7XG4gICAgICAgICAgY2VudGVyVGFyZ2V0QnlJZC5zZXQoaWQsIGNlbnRlck9iamV0aXZvKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGZ1ZW50ZVlhRGlzcG9uaWJsZSA9XG4gICAgICAgIHR5cGVvZiBmb250TWFuYWdlcj8uaXNGb250QXZhaWxhYmxlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IGZvbnRNYW5hZ2VyLmlzRm9udEF2YWlsYWJsZShmdWVudGVPYmpldGl2bylcbiAgICAgICAgICA6IGZhbHNlO1xuXG4gICAgICBjb25zdCBhcGxpY2FyRnVlbnRlQ29uQ2VudHJvID0gKCkgPT4ge1xuICAgICAgICBzZXRPYmpldG9zKChwcmV2KSA9PlxuICAgICAgICAgIHByZXYubWFwKChvKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRhcmdldElkcy5oYXMoby5pZCkpIHJldHVybiBvO1xuICAgICAgICAgICAgaWYgKCFlc09iamV0aXZvVGlwb2dyYWZpYShvKSkgcmV0dXJuIG87XG5cbiAgICAgICAgICAgIGNvbnN0IHBhdGNoID0geyBmb250RmFtaWx5OiBmdWVudGVPYmpldGl2byB9O1xuXG4gICAgICAgICAgICBpZiAoZGViZUFqdXN0YXJDZW50cm9QcmVkaWN0aXZvKG8pKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbnRlck9iamV0aXZvID0gY2VudGVyVGFyZ2V0QnlJZC5nZXQoby5pZCk7XG4gICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoY2VudGVyT2JqZXRpdm8pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFdpZHRoID0gbWVkaXJBbmNob1RleHRvKG8sIGZ1ZW50ZU9iamV0aXZvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZVggPSBub3JtYWxpemFyRXNjYWxhWChvLnNjYWxlWCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKG5leHRXaWR0aCkgJiYgbmV4dFdpZHRoID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFggPSBOdW1iZXIuaXNGaW5pdGUoby54KSA/IG8ueCA6IDA7XG4gICAgICAgICAgICAgICAgICBjb25zdCBuZXh0WCA9IGNlbnRlck9iamV0aXZvIC0gKG5leHRXaWR0aCAqIHNjYWxlWCkgLyAyO1xuICAgICAgICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShuZXh0WCkgJiYgTWF0aC5hYnMobmV4dFggLSBjdXJyZW50WCkgPiAwLjI1KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoLnggPSBuZXh0WDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgLi4ubywgLi4ucGF0Y2ggfTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgYXBsaWNhckNvcnJlY2Npb25DZW50cm8gPSAoKSA9PiB7XG4gICAgICAgIGlmICghY2VudGVyVGFyZ2V0QnlJZC5zaXplKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgZGVsdGFCeUlkID0gbmV3IE1hcCgpO1xuICAgICAgICBjZW50ZXJUYXJnZXRCeUlkLmZvckVhY2goKGNlbnRlck9iamV0aXZvLCBpZCkgPT4ge1xuICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGNlbnRlck9iamV0aXZvKSkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IGNlbnRlckFjdHVhbCA9IG9idGVuZXJDZW50cm9WaXN1YWxYRGVzZGVOb2RvKGlkKTtcbiAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShjZW50ZXJBY3R1YWwpKSByZXR1cm47XG5cbiAgICAgICAgICBjb25zdCBkZWx0YSA9IGNlbnRlck9iamV0aXZvIC0gY2VudGVyQWN0dWFsO1xuICAgICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoZGVsdGEpICYmIE1hdGguYWJzKGRlbHRhKSA+IDEpIHtcbiAgICAgICAgICAgIGRlbHRhQnlJZC5zZXQoaWQsIGRlbHRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghZGVsdGFCeUlkLnNpemUpIHJldHVybjtcblxuICAgICAgICBzZXRPYmpldG9zKChwcmV2KSA9PlxuICAgICAgICAgIHByZXYubWFwKChvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IGRlbHRhQnlJZC5nZXQoby5pZCk7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShkZWx0YSkpIHJldHVybiBvO1xuICAgICAgICAgICAgaWYgKCFlc09iamV0aXZvVGlwb2dyYWZpYShvKSkgcmV0dXJuIG87XG4gICAgICAgICAgICBpZiAoU3RyaW5nKG8uZm9udEZhbWlseSB8fCBcIlwiKS50cmltKCkgIT09IGZ1ZW50ZU9iamV0aXZvKSByZXR1cm4gbztcblxuICAgICAgICAgICAgY29uc3QgY3VycmVudFggPSBOdW1iZXIuaXNGaW5pdGUoby54KSA/IG8ueCA6IDA7XG4gICAgICAgICAgICBjb25zdCBuZXh0WCA9IGN1cnJlbnRYICsgZGVsdGE7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShuZXh0WCkgfHwgTWF0aC5hYnMobmV4dFggLSBjdXJyZW50WCkgPD0gMSkge1xuICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHsgLi4ubywgeDogbmV4dFggfTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcHJvZ3JhbWFyQ29ycmVjY2lvbkNlbnRybyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGxhdGVzdEZvbnRDaGFuZ2VSZWYuY3VycmVudCAhPT0gcmVxdWVzdElkKSByZXR1cm47XG4gICAgICAgICAgICBhcGxpY2FyQ29ycmVjY2lvbkNlbnRybygpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChmdWVudGVZYURpc3BvbmlibGUpIHtcbiAgICAgICAgYXBsaWNhckZ1ZW50ZUNvbkNlbnRybygpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZvaWQgUHJvbWlzZS5yZXNvbHZlKGZvbnRNYW5hZ2VyLmxvYWRGb250cyhbZnVlbnRlT2JqZXRpdm9dKSlcbiAgICAgICAgLmNhdGNoKCgpID0+IG51bGwpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICBpZiAobGF0ZXN0Rm9udENoYW5nZVJlZi5jdXJyZW50ICE9PSByZXF1ZXN0SWQpIHJldHVybjtcbiAgICAgICAgICBhcGxpY2FyRnVlbnRlQ29uQ2VudHJvKCk7XG4gICAgICAgICAgcHJvZ3JhbWFyQ29ycmVjY2lvbkNlbnRybygpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIFtcbiAgICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgICBvYmpldG9TZWxlY2Npb25hZG8/LmlkLFxuICAgICAgb2JqZXRvU2VsZWNjaW9uYWRvLFxuICAgICAgZm9udE1hbmFnZXIsXG4gICAgICBzZXRPYmpldG9zLFxuICAgICAgZXNPYmpldGl2b1RpcG9ncmFmaWEsXG4gICAgICBkZWJlTWFudGVuZXJDZW50cm9FbkNhbWJpb0RlRnVlbnRlLFxuICAgICAgZGViZUFqdXN0YXJDZW50cm9QcmVkaWN0aXZvLFxuICAgICAgcmVzb2x2ZXJDZW50cm9PYmpldGl2b0NhbWJpb0Z1ZW50ZSxcbiAgICAgIG5vcm1hbGl6YXJFc2NhbGFYLFxuICAgICAgb2J0ZW5lckNlbnRyb1Zpc3VhbFhEZXNkZU5vZG8sXG4gICAgICBtZWRpckFuY2hvVGV4dG8sXG4gICAgXVxuICApO1xuXG4gIGlmICghKG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJ0ZXh0b1wiIHx8IG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJmb3JtYVwiIHx8IG9iamV0b1NlbGVjY2lvbmFkbz8udGlwbyA9PT0gXCJpY29ub1wiKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcG9ydGFsVGFyZ2V0ID0gdHlwZW9mIGRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiID8gZG9jdW1lbnQuYm9keSA6IG51bGw7XG4gIGlmICghcG9ydGFsVGFyZ2V0KSByZXR1cm4gbnVsbDtcblxuICBpZiAob2JqZXRvU2VsZWNjaW9uYWRvPy50aXBvID09PSBcImljb25vXCIpIHtcbiAgICByZXR1cm4gY3JlYXRlUG9ydGFsKFxuICAgICAgPGRpdlxuICAgICAgICByZWY9e3Rvb2xiYXJSZWZ9XG4gICAgICAgIGNsYXNzTmFtZT17dG9vbGJhckNvbnRhaW5lckNsYXNzfVxuICAgICAgICBzdHlsZT17eyAuLi50b29sYmFyQ29udGFpbmVyU3R5bGUsIG1heFdpZHRoOiBpc01vYmlsZSA/IHRvb2xiYXJDb250YWluZXJTdHlsZS5tYXhXaWR0aCA6IFwiMjIwcHhcIiB9fVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPkNvbG9yPC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJjb2xvclwiXG4gICAgICAgICAgICB2YWx1ZT17b2JqZXRvU2VsZWNjaW9uYWRvLmNvbG9yIHx8IFwiIzAwMDAwMFwifVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG51ZXZvQ29sb3IgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgYWN0dWFsaXphclNlbGVjY2lvbmFkb3MoKG8pID0+ICh7IC4uLm8sIGNvbG9yOiBudWV2b0NvbG9yIH0pKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTggaC02IHJvdW5kZWQgY3Vyc29yLXBvaW50ZXJcIlxuICAgICAgICAgICAgdGl0bGU9XCJDb2xvciBkZWwgaWNvbm9cIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+LFxuICAgICAgcG9ydGFsVGFyZ2V0XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVQb3J0YWwoXG4gICAgPD5cbiAgICAgIDxkaXYgcmVmPXt0b29sYmFyUmVmfSBjbGFzc05hbWU9e3Rvb2xiYXJDb250YWluZXJDbGFzc30gc3R5bGU9e3Rvb2xiYXJDb250YWluZXJTdHlsZX0+XG4gICAgICAgIHtvYmpldG9TZWxlY2Npb25hZG8/LnRpcG8gPT09IFwiZm9ybWFcIiAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTYwMFwiPkZvbmRvPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwiY29sb3JcIlxuICAgICAgICAgICAgICB2YWx1ZT17b2JqZXRvU2VsZWNjaW9uYWRvLmNvbG9yIHx8IFwiI2ZmZmZmZlwifVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q29sb3IgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBhY3R1YWxpemFyU2VsZWNjaW9uYWRvcygobykgPT4gKHsgLi4ubywgY29sb3I6IG5leHRDb2xvciB9KSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctOCBoLTYgcm91bmRlZFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHtvYmpldG9TZWxlY2Npb25hZG8/LnRpcG8gPT09IFwiZm9ybWFcIiAmJiBlc1JlY3QgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDBcIj5Fc3F1aW5hczwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcbiAgICAgICAgICAgICAgbWluPXswfVxuICAgICAgICAgICAgICBtYXg9ezEwMH1cbiAgICAgICAgICAgICAgdmFsdWU9e29iamV0b1NlbGVjY2lvbmFkby5jb3JuZXJSYWRpdXMgfHwgMH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFJhZGl1cyA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCkgfHwgMDtcbiAgICAgICAgICAgICAgICBhY3R1YWxpemFyU2VsZWNjaW9uYWRvcygobykgPT4gKHsgLi4ubywgY29ybmVyUmFkaXVzOiBuZXh0UmFkaXVzIH0pKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS03MDBcIj57b2JqZXRvU2VsZWNjaW9uYWRvLmNvcm5lclJhZGl1cyB8fCAwfTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7bW9zdHJhckNvbnRyb2xlc1RpcG9ncmFmaWEgJiYgKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHJlZj17Ym90b25GdWVudGVSZWZ9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHJlbGF0aXZlIGN1cnNvci1wb2ludGVyIHJvdW5kZWQgYm9yZGVyIHRyYW5zaXRpb24tYWxsIHRydW5jYXRlICR7XG4gICAgICAgICAgICAgICAgaXNNb2JpbGUgPyBcInB4LTIgcHktMSB0ZXh0LVsxMXB4XVwiIDogXCJweC0zIHB5LTEgdGV4dC1zbVwiXG4gICAgICAgICAgICAgIH0gJHttb3N0cmFyU2VsZWN0b3JGdWVudGUgPyBcImJnLWdyYXktMjAwXCIgOiBcImhvdmVyOmJnLWdyYXktMTAwXCJ9YH1cbiAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCIsXG4gICAgICAgICAgICAgICAgd2lkdGg6IGlzTW9iaWxlID8gXCIxMDJweFwiIDogXCIxODBweFwiLFxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJsZWZ0XCIsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIHRpdGxlPXtvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCJ9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0T3BlbiA9ICFtb3N0cmFyU2VsZWN0b3JGdWVudGU7XG4gICAgICAgICAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKG5leHRPcGVuKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dE9wZW4gJiYgaXNNb2JpbGUpIHtcbiAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTZWxlY3RvclRhbWFubyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7b2JqZXRvU2VsZWNjaW9uYWRvPy5mb250RmFtaWx5IHx8IFwic2Fucy1zZXJpZlwifVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHshaXNNb2JpbGUgJiYgKFxuICAgICAgICAgICAgICA8Rm9udFNlbGVjdG9yXG4gICAgICAgICAgICAgICAgY3VycmVudEZvbnQ9e29iamV0b1NlbGVjY2lvbmFkbz8uZm9udEZhbWlseSB8fCBcInNhbnMtc2VyaWZcIn1cbiAgICAgICAgICAgICAgICBvbkZvbnRDaGFuZ2U9e2FwbGljYXJGdWVudGVTZWxlY2Npb25hZGF9XG4gICAgICAgICAgICAgICAgaXNPcGVuPXttb3N0cmFyU2VsZWN0b3JGdWVudGV9XG4gICAgICAgICAgICAgICAgcGFuZWxTdHlsZT17Zm9udFNlbGVjdG9yU3R5bGV9XG4gICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKGZhbHNlKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHtpc01vYmlsZSA/IChcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHJvdW5kZWQgYm9yZGVyIHRyYW5zaXRpb24gJHtcbiAgICAgICAgICAgICAgICAgIGlzTW9iaWxlID8gXCJoLTcgcHgtMiB0ZXh0LVsxMXB4XVwiIDogXCJweC0yIHB5LTEgdGV4dC1zbVwiXG4gICAgICAgICAgICAgICAgfSAke21vc3RyYXJTZWxlY3RvclRhbWFubyA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIn1gfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRPcGVuID0gIW1vc3RyYXJTZWxlY3RvclRhbWFubztcbiAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTZWxlY3RvclRhbWFubyhuZXh0T3Blbik7XG4gICAgICAgICAgICAgICAgICBpZiAobmV4dE9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0TW9zdHJhclNlbGVjdG9yRnVlbnRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgVGFtYW5vIHtmb250U2l6ZUFjdHVhbH1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXggaXRlbXMtY2VudGVyIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbiAke1xuICAgICAgICAgICAgICAgICAgICBpc01vYmlsZSA/IFwiaC03IG1pbi13LTcgcHgtMS41IHRleHQteHNcIiA6IFwicHgtMiBweS0xXCJcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYXBsaWNhclRhbWFub0Z1ZW50ZVNlbGVjY2lvbmFkbygobywgYWN0dWFsKSA9PiBNYXRoLm1heCg2LCBhY3R1YWwgLSAyKSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIC1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tYWxsICR7XG4gICAgICAgICAgICAgICAgICAgIGlzTW9iaWxlID8gXCJoLTcgcHgtMS41IHRleHQtWzExcHhdIGZsZXggaXRlbXMtY2VudGVyXCIgOiBcInB4LTIgcHktMSB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgICAgIH0gJHttb3N0cmFyU2VsZWN0b3JUYW1hbm8gPyBcImJnLWdyYXktMjAwXCIgOiBcImhvdmVyOmJnLWdyYXktMTAwXCJ9YH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldE1vc3RyYXJTZWxlY3RvclRhbWFubyghbW9zdHJhclNlbGVjdG9yVGFtYW5vKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7Zm9udFNpemVBY3R1YWx9XG4gICAgICAgICAgICAgICAgICB7bW9zdHJhclNlbGVjdG9yVGFtYW5vICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHBvcHVwLWZ1ZW50ZSB6LTUwIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkLTJ4bCBzaGFkb3ctbWQgcC0yIHctMjQgbWF4LWgtWzMwMHB4XSBvdmVyZmxvdy1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB0b3A6IFwiNDBweFwiLCBsZWZ0OiBcIi0xMHB4XCIgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIHt0YW1hbmlvc0Rpc3BvbmlibGVzLm1hcCgodGFtKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dGFtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0yIHB5LTEgdGV4dC1zbSBob3ZlcjpiZy1ncmF5LTEwMCByb3VuZGVkIGN1cnNvci1wb2ludGVyIHRleHQtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTaXplID0gbm9ybWFsaXphckZvbnRTaXplRW50ZXJvKHRhbSwgMjQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwbGljYXJUYW1hbm9GdWVudGVTZWxlY2Npb25hZG8obmV4dFNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vc3RyYXJTZWxlY3RvclRhbWFubyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt0YW19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbiAke1xuICAgICAgICAgICAgICAgICAgICBpc01vYmlsZSA/IFwiaC03IG1pbi13LTcgcHgtMS41IHRleHQteHNcIiA6IFwicHgtMiBweS0xXCJcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYXBsaWNhclRhbWFub0Z1ZW50ZVNlbGVjY2lvbmFkbygobywgYWN0dWFsKSA9PiBNYXRoLm1pbigyNjAsIGFjdHVhbCArIDIpKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgK1xuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwiY29sb3JcIlxuICAgICAgICAgICAgICB2YWx1ZT17b2JqZXRvU2VsZWNjaW9uYWRvPy5jb2xvclRleHRvIHx8IFwiIzAwMDAwMFwifVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q29sb3IgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICBhY3R1YWxpemFyU2VsZWNjaW9uYWRvcyhcbiAgICAgICAgICAgICAgICAgIChvKSA9PiAoeyAuLi5vLCBjb2xvclRleHRvOiBuZXh0Q29sb3IgfSksXG4gICAgICAgICAgICAgICAgICB7IHNvbG9UaXBvZ3JhZmlhOiB0cnVlIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2lzTW9iaWxlID8gXCJoLTcgdy03IHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBwLTAuNVwiIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Byb3VuZGVkIGJvcmRlciBmb250LWJvbGQgdHJhbnNpdGlvbiAke1xuICAgICAgICAgICAgICAgIGlzTW9iaWxlID8gXCJoLTcgbWluLXctNyBweC0xLjUgdGV4dC1bMTFweF1cIiA6IFwicHgtMiBweS0xIHRleHQtc21cIlxuICAgICAgICAgICAgICB9ICR7bmVncml0YUFjdGl2YSA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIn1gfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgIGFjdHVhbGl6YXJTZWxlY2Npb25hZG9zKFxuICAgICAgICAgICAgICAgICAgKG8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFdlaWdodCA9IFN0cmluZyhvLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNCb2xkTm93ID1cbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2VpZ2h0ID09PSBcImJvbGRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXZWlnaHQgPT09IFwiYm9sZGVyXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgICBbXCI1MDBcIiwgXCI2MDBcIiwgXCI3MDBcIiwgXCI4MDBcIiwgXCI5MDBcIl0uaW5jbHVkZXMoY3VycmVudFdlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm8sIGZvbnRXZWlnaHQ6IGlzQm9sZE5vdyA/IFwibm9ybWFsXCIgOiBcImJvbGRcIiB9O1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHsgc29sb1RpcG9ncmFmaWE6IHRydWUgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBCXG4gICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Byb3VuZGVkIGJvcmRlciBpdGFsaWMgdHJhbnNpdGlvbiAke1xuICAgICAgICAgICAgICAgIGlzTW9iaWxlID8gXCJoLTcgbWluLXctNyBweC0xLjUgdGV4dC1bMTFweF1cIiA6IFwicHgtMiBweS0xIHRleHQtc21cIlxuICAgICAgICAgICAgICB9ICR7Y3Vyc2l2YUFjdGl2YSA/IFwiYmctZ3JheS0yMDBcIiA6IFwiaG92ZXI6YmctZ3JheS0xMDBcIn1gfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgIGFjdHVhbGl6YXJTZWxlY2Npb25hZG9zKFxuICAgICAgICAgICAgICAgICAgKG8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFN0eWxlID0gU3RyaW5nKG8uZm9udFN0eWxlIHx8IFwibm9ybWFsXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzSXRhbGljTm93ID1cbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3R5bGUuaW5jbHVkZXMoXCJpdGFsaWNcIikgfHwgY3VycmVudFN0eWxlLmluY2x1ZGVzKFwib2JsaXF1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ubywgZm9udFN0eWxlOiBpc0l0YWxpY05vdyA/IFwibm9ybWFsXCIgOiBcIml0YWxpY1wiIH07XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgeyBzb2xvVGlwb2dyYWZpYTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIElcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHJvdW5kZWQgYm9yZGVyIHRyYW5zaXRpb24gJHtcbiAgICAgICAgICAgICAgICBpc01vYmlsZSA/IFwiaC03IG1pbi13LTcgcHgtMS41IHRleHQtWzExcHhdXCIgOiBcInB4LTIgcHktMSB0ZXh0LXNtXCJcbiAgICAgICAgICAgICAgfSAke3N1YnJheWFkb0FjdGl2byA/IFwiYmctZ3JheS0yMDAgdW5kZXJsaW5lXCIgOiBcImhvdmVyOmJnLWdyYXktMTAwXCJ9YH1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cbiAgICAgICAgICAgICAgICBhY3R1YWxpemFyU2VsZWNjaW9uYWRvcyhcbiAgICAgICAgICAgICAgICAgIChvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREZWNvcmF0aW9uID0gU3RyaW5nKG8udGV4dERlY29yYXRpb24gfHwgXCJub25lXCIpXG4gICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNVbmRlcmxpbmUgPSBjdXJyZW50RGVjb3JhdGlvbi5pbmNsdWRlcyhcInVuZGVybGluZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzVW5kZXJsaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2l0aG91dFVuZGVybGluZSA9IGN1cnJlbnREZWNvcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoL1xccysvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigodG9rZW4pID0+IHRva2VuICYmIHRva2VuICE9PSBcInVuZGVybGluZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm8sIHRleHREZWNvcmF0aW9uOiB3aXRob3V0VW5kZXJsaW5lIHx8IFwibm9uZVwiIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0RGVjb3JhdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudERlY29yYXRpb24gPT09IFwibm9uZVwiIHx8IGN1cnJlbnREZWNvcmF0aW9uID09PSBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwidW5kZXJsaW5lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYCR7Y3VycmVudERlY29yYXRpb259IHVuZGVybGluZWA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLm8sIHRleHREZWNvcmF0aW9uOiBuZXh0RGVjb3JhdGlvbi50cmltKCkgfTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB7IHNvbG9UaXBvZ3JhZmlhOiB0cnVlIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgU1xuICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcm91bmRlZCBib3JkZXIgdHJhbnNpdGlvbiBob3ZlcjpiZy1ncmF5LTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciAke1xuICAgICAgICAgICAgICAgIGlzTW9iaWxlID8gXCJoLTcgbWluLXctNyBweC0xLjUgdGV4dC1bMTFweF1cIiA6IFwicHgtMiBweS0xIHRleHQtc21cIlxuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgb25DbGljaz17b25DYW1iaWFyQWxpbmVhY2lvbn1cbiAgICAgICAgICAgICAgdGl0bGU9e2BBbGluZWFjaW9uOiAke29iamV0b1NlbGVjY2lvbmFkbz8uYWxpZ24gfHwgXCJpenF1aWVyZGFcIn1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGlnbiA9IG9iamV0b1NlbGVjY2lvbmFkbz8uYWxpZ24gfHwgXCJsZWZ0XCI7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhbGlnbikge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiPC1cIjtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJjZW50ZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiPC0+XCI7XG4gICAgICAgICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiLT5cIjtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJqdXN0aWZ5XCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInx8XCI7XG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCI8LVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSkoKX1cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHttb2JpbGVGb250U3RyaXBWaXNpYmxlICYmIChcbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzTmFtZT1cInBvcHVwLWZ1ZW50ZSBmaXhlZCB6LTUwIGJnLXdoaXRlIGJvcmRlciByb3VuZGVkIHNoYWRvdyBweC0xLjUgcHktMSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBvdmVyZmxvdy14LWF1dG9cIlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICB0b3A6IGAke21vYmlsZUZvbnRTdHJpcFRvcCA/PyAxMDZ9cHhgLFxuICAgICAgICAgICAgbGVmdDogXCI1MCVcIixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVYKC01MCUpXCIsXG4gICAgICAgICAgICB3aWR0aDogXCJjYWxjKDEwMHZ3IC0gOHB4KVwiLFxuICAgICAgICAgICAgbWF4V2lkdGg6IFwiY2FsYygxMDB2dyAtIDhweClcIixcbiAgICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiBcInRvdWNoXCIsXG4gICAgICAgICAgICB3aGl0ZVNwYWNlOiBcIm5vd3JhcFwiLFxuICAgICAgICAgIH19XG4gICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgIG9uVG91Y2hTdGFydD17KGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCl9XG4gICAgICAgID5cbiAgICAgICAgICB7ZnVlbnRlc0Rpc3BvbmlibGVzTW9iaWxlLm1hcCgoZnVlbnRlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IChvYmpldG9TZWxlY2Npb25hZG8/LmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCIpID09PSBmdWVudGUudmFsb3I7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAga2V5PXtmdWVudGUudmFsb3J9XG4gICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgaC03IHB4LTIgcm91bmRlZCBib3JkZXIgdGV4dC1bMTFweF0gbGVhZGluZy1ub25lIHNocmluay0wICR7XG4gICAgICAgICAgICAgICAgICBpc0FjdGl2ZVxuICAgICAgICAgICAgICAgICAgICA/IFwiYmctZ3JheS0yMDAgYm9yZGVyLWdyYXktNDAwIHRleHQtZ3JheS05MDBcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiYmctd2hpdGUgYm9yZGVyLWdyYXktMzAwIHRleHQtZ3JheS03MDBcIlxuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRGYW1pbHk6IGZ1ZW50ZS52YWxvciB9fVxuICAgICAgICAgICAgICAgIHRpdGxlPXtmdWVudGUudmFsb3J9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdm9pZCBhcGxpY2FyRnVlbnRlU2VsZWNjaW9uYWRhKGZ1ZW50ZS52YWxvcik7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtmdWVudGUubm9tYnJlfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAge21vYmlsZVNpemVTdHJpcFZpc2libGUgJiYgKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPVwicG9wdXAtZnVlbnRlIGZpeGVkIHotNTAgYmctd2hpdGUgYm9yZGVyIHJvdW5kZWQgc2hhZG93IHB4LTIgcHktMS41IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCJcbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgdG9wOiBgJHttb2JpbGVGb250U3RyaXBUb3AgPz8gMTA2fXB4YCxcbiAgICAgICAgICAgIGxlZnQ6IFwiNTAlXCIsXG4gICAgICAgICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgtNTAlKVwiLFxuICAgICAgICAgICAgd2lkdGg6IFwiY2FsYygxMDB2dyAtIDhweClcIixcbiAgICAgICAgICAgIG1heFdpZHRoOiBcImNhbGMoMTAwdncgLSA4cHgpXCIsXG4gICAgICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogXCJ0b3VjaFwiLFxuICAgICAgICAgICAgd2hpdGVTcGFjZTogXCJub3dyYXBcIixcbiAgICAgICAgICB9fVxuICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICBvblRvdWNoU3RhcnQ9eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICA+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJoLTcgbWluLXctNyBweC0xLjUgdGV4dC14cyByb3VuZGVkIGJvcmRlciBob3ZlcjpiZy1ncmF5LTEwMFwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICBhcGxpY2FyVGFtYW5vRnVlbnRlU2VsZWNjaW9uYWRvKChvLCBhY3R1YWwpID0+IE1hdGgubWF4KDYsIGFjdHVhbCAtIDIpKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgLVxuICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTcgbWluLXctMTAgcHgtMiB0ZXh0LXhzIHJvdW5kZWQgYm9yZGVyIGJnLWdyYXktMTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICB7Zm9udFNpemVBY3R1YWx9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtNyBtaW4tdy03IHB4LTEuNSB0ZXh0LXhzIHJvdW5kZWQgYm9yZGVyIGhvdmVyOmJnLWdyYXktMTAwXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgIGFwbGljYXJUYW1hbm9GdWVudGVTZWxlY2Npb25hZG8oKG8sIGFjdHVhbCkgPT4gTWF0aC5taW4oMjYwLCBhY3R1YWwgKyAyKSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgICtcbiAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcbiAgICAgICAgICAgIG1pbj17Nn1cbiAgICAgICAgICAgIG1heD17MjYwfVxuICAgICAgICAgICAgc3RlcD17MX1cbiAgICAgICAgICAgIHZhbHVlPXtmb250U2l6ZUFjdHVhbH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wIGFjY2VudC1ncmF5LTcwMFwiXG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbmV4dFNpemUgPSBub3JtYWxpemFyRm9udFNpemVFbnRlcm8oZS50YXJnZXQudmFsdWUsIGZvbnRTaXplQWN0dWFsKTtcbiAgICAgICAgICAgICAgYXBsaWNhclRhbWFub0Z1ZW50ZVNlbGVjY2lvbmFkbyhuZXh0U2l6ZSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8Lz4sXG4gICAgcG9ydGFsVGFyZ2V0XG4gICk7XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJjcmVhdGVQb3J0YWwiLCJGb250U2VsZWN0b3IiLCJLb252YSIsIkZPTlRfU0VMRUNUT1JfR0FQIiwiRk9OVF9TRUxFQ1RPUl9QQURESU5HIiwiRk9OVF9TRUxFQ1RPUl9GSVhFRF9XSURUSCIsIkZPTlRfU0VMRUNUT1JfU0lERUJBUl9HQVAiLCJNT0JJTEVfRk9OVF9TVFJJUF9HQVAiLCJNT0JJTEVfRk9OVF9XQVJNX0NPVU5UIiwiQ0FOVkFTX1dJRFRIIiwiU0VDVElPTl9DRU5URVJfWCIsIlNFQ1RJT05fQ0VOVEVSX0VQU0lMT04iLCJUT09MQkFSX1RPUF9PRkZTRVQiLCJjbGFtcCIsInZhbHVlIiwibWluIiwibWF4Iiwic2FmZU1pbiIsIk51bWJlciIsImlzRmluaXRlIiwic2FmZU1heCIsIk1hdGgiLCJpc0JvbGRGb250V2VpZ2h0Iiwid2VpZ2h0Iiwibm9ybWFsaXplZCIsIlN0cmluZyIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJyZXNvbHZlS29udmFGb250U3R5bGUiLCJmb250U3R5bGUiLCJmb250V2VpZ2h0Iiwic3R5bGUiLCJpc0l0YWxpYyIsImlzQm9sZCIsIkZsb2F0aW5nVGV4dFRvb2xiYXIiLCJvYmpldG9TZWxlY2Npb25hZG8iLCJzZXRPYmpldG9zIiwiZWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsIm1vc3RyYXJTZWxlY3RvckZ1ZW50ZSIsInNldE1vc3RyYXJTZWxlY3RvckZ1ZW50ZSIsIm1vc3RyYXJTZWxlY3RvclRhbWFubyIsInNldE1vc3RyYXJTZWxlY3RvclRhbWFubyIsImZvbnRNYW5hZ2VyIiwiQUxMX0ZPTlRTIiwidGFtYW5pb3NEaXNwb25pYmxlcyIsIm9uQ2FtYmlhckFsaW5lYWNpb24iLCJpc01vYmlsZSIsInNldElzTW9iaWxlIiwiZm9udFNlbGVjdG9yU3R5bGUiLCJzZXRGb250U2VsZWN0b3JTdHlsZSIsIm1vYmlsZUZvbnRTdHJpcFRvcCIsInNldE1vYmlsZUZvbnRTdHJpcFRvcCIsInRvb2xiYXJSZWYiLCJib3RvbkZ1ZW50ZVJlZiIsImxhdGVzdEZvbnRDaGFuZ2VSZWYiLCJsYXRlc3RGb250U2l6ZUNoYW5nZVJlZiIsImxhc3RUeXBvZ3JhcGh5VGFyZ2V0c1JlZiIsIm1xIiwid2luZG93IiwibWF0Y2hNZWRpYSIsInVwZGF0ZSIsIm1hdGNoZXMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm5vcm1hbGl6YXJGb250U2l6ZSIsImZhbGxiYWNrIiwibmV4dCIsIm5vcm1hbGl6YXJGb250U2l6ZUVudGVybyIsInJvdW5kIiwibm9ybWFsaXphckVzY2FsYVgiLCJhYnMiLCJtZWRpckFuY2hvVGV4dG8iLCJvYmoiLCJvdmVycmlkZXMiLCJ0aXBvIiwib3B0aW9ucyIsImZvbnRGYW1pbHlPdmVycmlkZSIsImZvbnRTaXplT3ZlcnJpZGUiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJiYXNlTGluZUhlaWdodCIsImxpbmVIZWlnaHQiLCJyYXdUZXh0IiwidGV4dG8iLCJzYWZlVGV4dCIsInJlcGxhY2UiLCJwcm9iZSIsIlRleHQiLCJ0ZXh0IiwicGFkZGluZyIsIndyYXAiLCJ3aWR0aCIsImdldFRleHRXaWR0aCIsImRlc3Ryb3kiLCJkb2N1bWVudCIsImNhbnZhcyIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZm9udEZvckNhbnZhcyIsInRlc3QiLCJmb250IiwibGluZXMiLCJzcGxpdCIsIm1heExpbmVXaWR0aCIsIm1hcCIsImxpbmUiLCJtZWFzdXJlVGV4dCIsIm9idGVuZXJDZW50cm9WaXN1YWxYRGVzZGVOb2RvIiwiaWQiLCJyZWZzIiwiX2VsZW1lbnRSZWZzIiwibm9kZSIsImdldENsaWVudFJlY3QiLCJyZWN0Iiwic2tpcFRyYW5zZm9ybSIsInNraXBTaGFkb3ciLCJza2lwU3Ryb2tlIiwieCIsIm9idGVuZXJDZW50cm9GYWxsYmFja0Rlc2RlT2JqZXRvIiwiY3VycmVudFgiLCJzY2FsZVgiLCJyZXNvbHZlckNlbnRyb09iamV0aXZvQ2FtYmlvRnVlbnRlIiwiY2VudGVyRGVzZGVOb2RvIiwiY2VudGVyRmFsbGJhY2siLCJjZW50ZXJBY3R1YWwiLCJkZWJlTWFudGVuZXJDZW50cm9FbkNhbWJpb0RlRnVlbnRlIiwiX19ncm91cEFsaWduIiwiZGViZUFqdXN0YXJDZW50cm9QcmVkaWN0aXZvIiwiX19hdXRvV2lkdGgiLCJkZWJlQW5jbGFyQ2VudHJvVGV4dG8iLCJlc09iamV0aXZvVGlwb2dyYWZpYSIsIml0ZW0iLCJmaWd1cmEiLCJhY3R1YWxpemFyU2VsZWNjaW9uYWRvcyIsInVwZGF0ZXIiLCJzb2xvVGlwb2dyYWZpYSIsInByZXYiLCJvIiwidG9vbGJhckNvbnRhaW5lckNsYXNzIiwidG9vbGJhckNvbnRhaW5lclN0eWxlIiwidG9wIiwibGVmdCIsInRyYW5zZm9ybSIsIm1heFdpZHRoIiwib3ZlcmZsb3dYIiwib3ZlcmZsb3dZIiwiV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmciLCJ3aGl0ZVNwYWNlIiwiZXNUZXh0byIsImVzRm9ybWFDb25UZXh0byIsImVzUmVjdCIsIm1vc3RyYXJDb250cm9sZXNUaXBvZ3JhZmlhIiwibW9iaWxlRm9udFN0cmlwVmlzaWJsZSIsIm1vYmlsZVNpemVTdHJpcFZpc2libGUiLCJtb2JpbGVCb3R0b21TdHJpcFZpc2libGUiLCJmb250U2l6ZUFjdHVhbCIsImZvbnRXZWlnaHRBY3R1YWwiLCJmb250U3R5bGVBY3R1YWwiLCJ0ZXh0RGVjb3JhdGlvbkFjdHVhbCIsInRleHREZWNvcmF0aW9uIiwibmVncml0YUFjdGl2YSIsImN1cnNpdmFBY3RpdmEiLCJzdWJyYXlhZG9BY3Rpdm8iLCJmdWVudGVzRGlzcG9uaWJsZXNNb2JpbGUiLCJBcnJheSIsImlzQXJyYXkiLCJzZWVuIiwiU2V0IiwiZnVlbnRlIiwidmFsb3IiLCJ0cmltIiwiaGFzIiwiYWRkIiwicHVzaCIsIm5vbWJyZSIsImZ1ZW50ZXNXYXJtdXBNb2JpbGUiLCJmdWVudGVzIiwiZnVlbnRlQWN0dWFsIiwibGVuZ3RoIiwiaWRzRnJvbVNlbGVjdGlvbiIsImZpbHRlciIsIm5leHRJZHMiLCJjdXJyZW50IiwiY2FsY3VsYXJFc3RpbG9TZWxlY3RvckZ1ZW50ZSIsImJvdG9uRnVlbnRlIiwidmlld3BvcnRXaWR0aCIsImlubmVyV2lkdGgiLCJ2aWV3cG9ydEhlaWdodCIsImlubmVySGVpZ2h0IiwidHJpZ2dlclJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpc0Rlc2t0b3AiLCJwYW5lbFdpZHRoIiwiYm90dG9tIiwic2lkZWJhciIsInF1ZXJ5U2VsZWN0b3IiLCJzaWRlYmFyUmVjdCIsInNpZGViYXJQYW5lbCIsImdldEVsZW1lbnRCeUlkIiwic2lkZWJhclBhbmVsUmVjdCIsImFuY2hvclJpZ2h0IiwiaGVpZ2h0IiwicmlnaHQiLCJtYXhMZWZ0IiwiYXZhaWxhYmxlSGVpZ2h0IiwicG9zaXRpb24iLCJtYXhIZWlnaHQiLCJtYXJnaW5Ub3AiLCJ1cGRhdGVTdHlsZSIsInVwZGF0ZVBvc2l0aW9uIiwidG9vbGJhckVsIiwibG9hZEZvbnRzIiwiYXBsaWNhclRhbWFub0Z1ZW50ZVNlbGVjY2lvbmFkbyIsInJlc29sdmVyVGFtYW5vIiwicmVxdWVzdElkIiwiaWRzU2VsZWNjaW9uYWRvcyIsInRhcmdldElkcyIsInNpemUiLCJnZXRPYmpCeUlkIiwiX19nZXRPYmpCeUlkIiwiY2VudGVyVGFyZ2V0QnlJZCIsIk1hcCIsImZvckVhY2giLCJ0YXJnZXRPYmoiLCJjZW50ZXJPYmpldGl2byIsInNldCIsImV4cGVjdGVkRm9udFNpemVCeUlkIiwiY3VycmVudFNpemUiLCJuZXh0U2l6ZVJhdyIsIm5leHRTaXplIiwicGF0Y2giLCJnZXQiLCJkZWJlQWp1c3RhclByZWRpY3Rpdm8iLCJuZXh0V2lkdGgiLCJuZXh0WCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRlbHRhQnlJZCIsImRlbHRhIiwiZXhwZWN0ZWRTaXplIiwiYXBsaWNhckZ1ZW50ZVNlbGVjY2lvbmFkYSIsIm51ZXZhRnVlbnRlIiwiZnVlbnRlT2JqZXRpdm8iLCJmdWVudGVZYURpc3BvbmlibGUiLCJpc0ZvbnRBdmFpbGFibGUiLCJhcGxpY2FyRnVlbnRlQ29uQ2VudHJvIiwiYXBsaWNhckNvcnJlY2Npb25DZW50cm8iLCJwcm9ncmFtYXJDb3JyZWNjaW9uQ2VudHJvIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjYXRjaCIsImZpbmFsbHkiLCJwb3J0YWxUYXJnZXQiLCJib2R5IiwiZGl2IiwicmVmIiwiY2xhc3NOYW1lIiwibGFiZWwiLCJpbnB1dCIsInR5cGUiLCJjb2xvciIsIm9uQ2hhbmdlIiwiZSIsIm51ZXZvQ29sb3IiLCJ0YXJnZXQiLCJ0aXRsZSIsIm5leHRDb2xvciIsImNvcm5lclJhZGl1cyIsIm5leHRSYWRpdXMiLCJwYXJzZUludCIsInNwYW4iLCJ0ZXh0QWxpZ24iLCJvbkNsaWNrIiwibmV4dE9wZW4iLCJjdXJyZW50Rm9udCIsIm9uRm9udENoYW5nZSIsImlzT3BlbiIsInBhbmVsU3R5bGUiLCJvbkNsb3NlIiwiYnV0dG9uIiwic3RvcFByb3BhZ2F0aW9uIiwiYWN0dWFsIiwidGFtIiwiY29sb3JUZXh0byIsInVuZGVmaW5lZCIsImN1cnJlbnRXZWlnaHQiLCJpc0JvbGROb3ciLCJjdXJyZW50U3R5bGUiLCJpc0l0YWxpY05vdyIsImN1cnJlbnREZWNvcmF0aW9uIiwiaGFzVW5kZXJsaW5lIiwid2l0aG91dFVuZGVybGluZSIsInRva2VuIiwiam9pbiIsIm5leHREZWNvcmF0aW9uIiwiYWxpZ24iLCJvbk1vdXNlRG93biIsIm9uVG91Y2hTdGFydCIsImlzQWN0aXZlIiwic3RlcCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/toolbar/FloatingTextToolbar.jsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/components/editor/window/useEditorWindowBridge.js":
/*!***************************************************************!*\
  !*** ./src/components/editor/window/useEditorWindowBridge.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useEditorWindowBridge)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/components/editor/window/useEditorWindowBridge.js\n\n/**\n * Puente con window:\n * - window.canvasEditor\n * - window.__getSeccionInfo\n * - window.__getObjById\n */ function useEditorWindowBridge({ seccionesOrdenadas, secciones, seccionActivaId, objetos, altoCanvas, calcularOffsetY, cambiarColorFondoSeccion, onDeshacer, onRehacer, historialLength, futurosLength, stageRef }) {\n    const mergeCanvasEditor = (patch = {})=>{\n        if (true) return;\n        window.canvasEditor = {\n            ...window.canvasEditor || {},\n            ...patch\n        };\n    };\n    const clearCanvasEditorKeys = (keys = [])=>{\n        if (true) return;\n        if (!window.canvasEditor || typeof window.canvasEditor !== \"object\") return;\n        keys.forEach((key)=>{\n            if (key in window.canvasEditor) delete window.canvasEditor[key];\n        });\n        if (Object.keys(window.canvasEditor).length === 0) {\n            delete window.canvasEditor;\n        }\n    };\n    if (false) {}\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            mergeCanvasEditor({\n                cambiarColorFondoSeccion,\n                seccionActivaId,\n                secciones,\n                deshacer: onDeshacer,\n                rehacer: onRehacer,\n                stageRef: stageRef.current,\n                getHistorial: {\n                    \"useEditorWindowBridge.useEffect\": ()=>({\n                            historial: historialLength,\n                            futuros: futurosLength\n                        })\n                }[\"useEditorWindowBridge.useEffect\"]\n            });\n        }\n    }[\"useEditorWindowBridge.useEffect\"], [\n        cambiarColorFondoSeccion,\n        seccionActivaId,\n        secciones,\n        onDeshacer,\n        onRehacer,\n        historialLength,\n        futurosLength,\n        stageRef\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            window.__getSeccionInfo = ({\n                \"useEditorWindowBridge.useEffect\": (id)=>{\n                    try {\n                        const idx = seccionesOrdenadas.findIndex({\n                            \"useEditorWindowBridge.useEffect.idx\": (s)=>s.id === id\n                        }[\"useEditorWindowBridge.useEffect.idx\"]);\n                        if (idx === -1) return null;\n                        const height = Number(seccionesOrdenadas[idx]?.altura ?? seccionesOrdenadas[idx]?.height ?? 400);\n                        const top = calcularOffsetY(seccionesOrdenadas, idx);\n                        return {\n                            idx,\n                            top,\n                            height\n                        };\n                    } catch  {\n                        return null;\n                    }\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n            return ({\n                \"useEditorWindowBridge.useEffect\": ()=>{\n                    delete window.__getSeccionInfo;\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n        }\n    }[\"useEditorWindowBridge.useEffect\"], [\n        seccionesOrdenadas,\n        calcularOffsetY\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            window.__getObjById = ({\n                \"useEditorWindowBridge.useEffect\": (id)=>(objetos || []).find({\n                        \"useEditorWindowBridge.useEffect\": (o)=>o.id === id\n                    }[\"useEditorWindowBridge.useEffect\"]) || null\n            })[\"useEditorWindowBridge.useEffect\"];\n            return ({\n                \"useEditorWindowBridge.useEffect\": ()=>{\n                    delete window.__getObjById;\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n        }\n    }[\"useEditorWindowBridge.useEffect\"], [\n        objetos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useEditorWindowBridge.useEffect\": ()=>{\n            return ({\n                \"useEditorWindowBridge.useEffect\": ()=>{\n                    clearCanvasEditorKeys([\n                        \"cambiarColorFondoSeccion\",\n                        \"seccionActivaId\",\n                        \"secciones\",\n                        \"deshacer\",\n                        \"rehacer\",\n                        \"stageRef\",\n                        \"getHistorial\"\n                    ]);\n                }\n            })[\"useEditorWindowBridge.useEffect\"];\n        }\n    }[\"useEditorWindowBridge.useEffect\"], []);\n    // altoCanvas queda disponible para futuras extensiones del bridge.\n    void altoCanvas;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci93aW5kb3cvdXNlRWRpdG9yV2luZG93QnJpZGdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsd0RBQXdEO0FBQ3RCO0FBRWxDOzs7OztDQUtDLEdBQ2MsU0FBU0Msc0JBQXNCLEVBQzVDQyxrQkFBa0IsRUFDbEJDLFNBQVMsRUFDVEMsZUFBZSxFQUNmQyxPQUFPLEVBQ1BDLFVBQVUsRUFDVkMsZUFBZSxFQUNmQyx3QkFBd0IsRUFDeEJDLFVBQVUsRUFDVkMsU0FBUyxFQUNUQyxlQUFlLEVBQ2ZDLGFBQWEsRUFDYkMsUUFBUSxFQUNUO0lBQ0MsTUFBTUMsb0JBQW9CLENBQUNDLFFBQVEsQ0FBQyxDQUFDO1FBQ25DLElBQUksSUFBNkIsRUFBRTtRQUNuQ0MsT0FBT0MsWUFBWSxHQUFHO1lBQ3BCLEdBQUlELE9BQU9DLFlBQVksSUFBSSxDQUFDLENBQUM7WUFDN0IsR0FBR0YsS0FBSztRQUNWO0lBQ0Y7SUFFQSxNQUFNRyx3QkFBd0IsQ0FBQ0MsT0FBTyxFQUFFO1FBQ3RDLElBQUksSUFBNkIsRUFBRTtRQUNuQyxJQUFJLENBQUNILE9BQU9DLFlBQVksSUFBSSxPQUFPRCxPQUFPQyxZQUFZLEtBQUssVUFBVTtRQUNyRUUsS0FBS0MsT0FBTyxDQUFDLENBQUNDO1lBQ1osSUFBSUEsT0FBT0wsT0FBT0MsWUFBWSxFQUFFLE9BQU9ELE9BQU9DLFlBQVksQ0FBQ0ksSUFBSTtRQUNqRTtRQUNBLElBQUlDLE9BQU9ILElBQUksQ0FBQ0gsT0FBT0MsWUFBWSxFQUFFTSxNQUFNLEtBQUssR0FBRztZQUNqRCxPQUFPUCxPQUFPQyxZQUFZO1FBQzVCO0lBQ0Y7SUFFQSxJQUFJLEtBQTZCLEVBQUUsRUFJbEM7SUFFRGpCLGdEQUFTQTsyQ0FBQztZQUNSYyxrQkFBa0I7Z0JBQ2hCTjtnQkFDQUo7Z0JBQ0FEO2dCQUNBcUIsVUFBVWY7Z0JBQ1ZnQixTQUFTZjtnQkFDVEcsVUFBVUEsU0FBU2EsT0FBTztnQkFDMUJDLFlBQVk7dURBQUUsSUFBTzs0QkFBRUMsV0FBV2pCOzRCQUFpQmtCLFNBQVNqQjt3QkFBYzs7WUFDNUU7UUFDRjswQ0FBRztRQUNESjtRQUNBSjtRQUNBRDtRQUNBTTtRQUNBQztRQUNBQztRQUNBQztRQUNBQztLQUNEO0lBRURiLGdEQUFTQTsyQ0FBQztZQUNSZ0IsT0FBT2MsZ0JBQWdCO21EQUFHLENBQUNDO29CQUN6QixJQUFJO3dCQUNGLE1BQU1DLE1BQU05QixtQkFBbUIrQixTQUFTO21FQUFDLENBQUNDLElBQU1BLEVBQUVILEVBQUUsS0FBS0E7O3dCQUN6RCxJQUFJQyxRQUFRLENBQUMsR0FBRyxPQUFPO3dCQUV2QixNQUFNRyxTQUFTQyxPQUNibEMsa0JBQWtCLENBQUM4QixJQUFJLEVBQUVLLFVBQVVuQyxrQkFBa0IsQ0FBQzhCLElBQUksRUFBRUcsVUFBVTt3QkFHeEUsTUFBTUcsTUFBTS9CLGdCQUFnQkwsb0JBQW9COEI7d0JBQ2hELE9BQU87NEJBQUVBOzRCQUFLTTs0QkFBS0g7d0JBQU87b0JBQzVCLEVBQUUsT0FBTTt3QkFDTixPQUFPO29CQUNUO2dCQUNGOztZQUVBO21EQUFPO29CQUNMLE9BQU9uQixPQUFPYyxnQkFBZ0I7Z0JBQ2hDOztRQUNGOzBDQUFHO1FBQUM1QjtRQUFvQks7S0FBZ0I7SUFFeENQLGdEQUFTQTsyQ0FBQztZQUNSZ0IsT0FBT3VCLFlBQVk7bURBQUcsQ0FBQ1IsS0FBTyxDQUFDMUIsV0FBVyxFQUFFLEVBQUVtQyxJQUFJOzJEQUFDLENBQUNDLElBQU1BLEVBQUVWLEVBQUUsS0FBS0E7NkRBQU87O1lBQzFFO21EQUFPO29CQUNMLE9BQU9mLE9BQU91QixZQUFZO2dCQUM1Qjs7UUFDRjswQ0FBRztRQUFDbEM7S0FBUTtJQUVaTCxnREFBU0E7MkNBQUM7WUFDUjttREFBTztvQkFDTGtCLHNCQUFzQjt3QkFDcEI7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7d0JBQ0E7cUJBQ0Q7Z0JBQ0g7O1FBQ0Y7MENBQUcsRUFBRTtJQUVMLG1FQUFtRTtJQUNuRSxLQUFLWjtBQUNQIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGNvbXBvbmVudHNcXGVkaXRvclxcd2luZG93XFx1c2VFZGl0b3JXaW5kb3dCcmlkZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvZWRpdG9yL3dpbmRvdy91c2VFZGl0b3JXaW5kb3dCcmlkZ2UuanNcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vKipcbiAqIFB1ZW50ZSBjb24gd2luZG93OlxuICogLSB3aW5kb3cuY2FudmFzRWRpdG9yXG4gKiAtIHdpbmRvdy5fX2dldFNlY2Npb25JbmZvXG4gKiAtIHdpbmRvdy5fX2dldE9iakJ5SWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlRWRpdG9yV2luZG93QnJpZGdlKHtcbiAgc2VjY2lvbmVzT3JkZW5hZGFzLFxuICBzZWNjaW9uZXMsXG4gIHNlY2Npb25BY3RpdmFJZCxcbiAgb2JqZXRvcyxcbiAgYWx0b0NhbnZhcyxcbiAgY2FsY3VsYXJPZmZzZXRZLFxuICBjYW1iaWFyQ29sb3JGb25kb1NlY2Npb24sXG4gIG9uRGVzaGFjZXIsXG4gIG9uUmVoYWNlcixcbiAgaGlzdG9yaWFsTGVuZ3RoLFxuICBmdXR1cm9zTGVuZ3RoLFxuICBzdGFnZVJlZixcbn0pIHtcbiAgY29uc3QgbWVyZ2VDYW52YXNFZGl0b3IgPSAocGF0Y2ggPSB7fSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgd2luZG93LmNhbnZhc0VkaXRvciA9IHtcbiAgICAgIC4uLih3aW5kb3cuY2FudmFzRWRpdG9yIHx8IHt9KSxcbiAgICAgIC4uLnBhdGNoLFxuICAgIH07XG4gIH07XG5cbiAgY29uc3QgY2xlYXJDYW52YXNFZGl0b3JLZXlzID0gKGtleXMgPSBbXSkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgaWYgKCF3aW5kb3cuY2FudmFzRWRpdG9yIHx8IHR5cGVvZiB3aW5kb3cuY2FudmFzRWRpdG9yICE9PSBcIm9iamVjdFwiKSByZXR1cm47XG4gICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmIChrZXkgaW4gd2luZG93LmNhbnZhc0VkaXRvcikgZGVsZXRlIHdpbmRvdy5jYW52YXNFZGl0b3Jba2V5XTtcbiAgICB9KTtcbiAgICBpZiAoT2JqZWN0LmtleXMod2luZG93LmNhbnZhc0VkaXRvcikubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWxldGUgd2luZG93LmNhbnZhc0VkaXRvcjtcbiAgICB9XG4gIH07XG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtZXJnZUNhbnZhc0VkaXRvcih7XG4gICAgICBjYW1iaWFyQ29sb3JGb25kb1NlY2Npb24sXG4gICAgfSk7XG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIG1lcmdlQ2FudmFzRWRpdG9yKHtcbiAgICAgIGNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbixcbiAgICAgIHNlY2Npb25BY3RpdmFJZCxcbiAgICAgIHNlY2Npb25lcyxcbiAgICAgIGRlc2hhY2VyOiBvbkRlc2hhY2VyLFxuICAgICAgcmVoYWNlcjogb25SZWhhY2VyLFxuICAgICAgc3RhZ2VSZWY6IHN0YWdlUmVmLmN1cnJlbnQsXG4gICAgICBnZXRIaXN0b3JpYWw6ICgpID0+ICh7IGhpc3RvcmlhbDogaGlzdG9yaWFsTGVuZ3RoLCBmdXR1cm9zOiBmdXR1cm9zTGVuZ3RoIH0pLFxuICAgIH0pO1xuICB9LCBbXG4gICAgY2FtYmlhckNvbG9yRm9uZG9TZWNjaW9uLFxuICAgIHNlY2Npb25BY3RpdmFJZCxcbiAgICBzZWNjaW9uZXMsXG4gICAgb25EZXNoYWNlcixcbiAgICBvblJlaGFjZXIsXG4gICAgaGlzdG9yaWFsTGVuZ3RoLFxuICAgIGZ1dHVyb3NMZW5ndGgsXG4gICAgc3RhZ2VSZWYsXG4gIF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgd2luZG93Ll9fZ2V0U2VjY2lvbkluZm8gPSAoaWQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgoKHMpID0+IHMuaWQgPT09IGlkKTtcbiAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBudWxsO1xuXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE51bWJlcihcbiAgICAgICAgICBzZWNjaW9uZXNPcmRlbmFkYXNbaWR4XT8uYWx0dXJhID8/IHNlY2Npb25lc09yZGVuYWRhc1tpZHhdPy5oZWlnaHQgPz8gNDAwXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdG9wID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lc09yZGVuYWRhcywgaWR4KTtcbiAgICAgICAgcmV0dXJuIHsgaWR4LCB0b3AsIGhlaWdodCB9O1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGVsZXRlIHdpbmRvdy5fX2dldFNlY2Npb25JbmZvO1xuICAgIH07XG4gIH0sIFtzZWNjaW9uZXNPcmRlbmFkYXMsIGNhbGN1bGFyT2Zmc2V0WV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgd2luZG93Ll9fZ2V0T2JqQnlJZCA9IChpZCkgPT4gKG9iamV0b3MgfHwgW10pLmZpbmQoKG8pID0+IG8uaWQgPT09IGlkKSB8fCBudWxsO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkZWxldGUgd2luZG93Ll9fZ2V0T2JqQnlJZDtcbiAgICB9O1xuICB9LCBbb2JqZXRvc10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFyQ2FudmFzRWRpdG9yS2V5cyhbXG4gICAgICAgIFwiY2FtYmlhckNvbG9yRm9uZG9TZWNjaW9uXCIsXG4gICAgICAgIFwic2VjY2lvbkFjdGl2YUlkXCIsXG4gICAgICAgIFwic2VjY2lvbmVzXCIsXG4gICAgICAgIFwiZGVzaGFjZXJcIixcbiAgICAgICAgXCJyZWhhY2VyXCIsXG4gICAgICAgIFwic3RhZ2VSZWZcIixcbiAgICAgICAgXCJnZXRIaXN0b3JpYWxcIixcbiAgICAgIF0pO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBhbHRvQ2FudmFzIHF1ZWRhIGRpc3BvbmlibGUgcGFyYSBmdXR1cmFzIGV4dGVuc2lvbmVzIGRlbCBicmlkZ2UuXG4gIHZvaWQgYWx0b0NhbnZhcztcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VFZGl0b3JXaW5kb3dCcmlkZ2UiLCJzZWNjaW9uZXNPcmRlbmFkYXMiLCJzZWNjaW9uZXMiLCJzZWNjaW9uQWN0aXZhSWQiLCJvYmpldG9zIiwiYWx0b0NhbnZhcyIsImNhbGN1bGFyT2Zmc2V0WSIsImNhbWJpYXJDb2xvckZvbmRvU2VjY2lvbiIsIm9uRGVzaGFjZXIiLCJvblJlaGFjZXIiLCJoaXN0b3JpYWxMZW5ndGgiLCJmdXR1cm9zTGVuZ3RoIiwic3RhZ2VSZWYiLCJtZXJnZUNhbnZhc0VkaXRvciIsInBhdGNoIiwid2luZG93IiwiY2FudmFzRWRpdG9yIiwiY2xlYXJDYW52YXNFZGl0b3JLZXlzIiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJPYmplY3QiLCJsZW5ndGgiLCJkZXNoYWNlciIsInJlaGFjZXIiLCJjdXJyZW50IiwiZ2V0SGlzdG9yaWFsIiwiaGlzdG9yaWFsIiwiZnV0dXJvcyIsIl9fZ2V0U2VjY2lvbkluZm8iLCJpZCIsImlkeCIsImZpbmRJbmRleCIsInMiLCJoZWlnaHQiLCJOdW1iZXIiLCJhbHR1cmEiLCJ0b3AiLCJfX2dldE9iakJ5SWQiLCJmaW5kIiwibyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/components/editor/window/useEditorWindowBridge.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/drag/dragGrupal.js":
/*!********************************!*\
  !*** ./src/drag/dragGrupal.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   endDragGrupal: () => (/* binding */ endDragGrupal),\n/* harmony export */   previewDragGrupal: () => (/* binding */ previewDragGrupal),\n/* harmony export */   startDragGrupalLider: () => (/* binding */ startDragGrupalLider)\n/* harmony export */ });\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/layout */ \"(pages-dir-node)/./src/utils/layout.ts\");\n// C:\\Reservaeldia\\src\\drag\\dragGrupal.js\n\nconst isDragGrupalDebugEnabled = ()=> false && 0;\nconst dlog = (...args)=>{\n    if (!isDragGrupalDebugEnabled()) return;\n    console.log(...args);\n};\nconst dwarn = (...args)=>{\n    if (!isDragGrupalDebugEnabled()) return;\n    console.warn(...args);\n};\nfunction getGrupoElementos() {\n    if (Array.isArray(window._grupoElementos) && window._grupoElementos.length > 0) {\n        return window._grupoElementos;\n    }\n    return window._elementosSeleccionados || [];\n}\nfunction calcularDeltaGrupal(stage) {\n    const leaderId = window._grupoLider;\n    const dragInicial = window._dragInicial || null;\n    const posInicialLider = leaderId && dragInicial ? dragInicial[leaderId] : null;\n    const leaderNode = leaderId ? window._elementRefs?.[leaderId] : null;\n    if (leaderNode && posInicialLider && typeof leaderNode.x === \"function\" && typeof leaderNode.y === \"function\") {\n        return {\n            deltaX: leaderNode.x() - posInicialLider.x,\n            deltaY: leaderNode.y() - posInicialLider.y,\n            source: \"leader-node\"\n        };\n    }\n    const currentPos = stage?.getPointerPosition?.();\n    const startPos = window._dragStartPos;\n    if (currentPos && startPos) {\n        return {\n            deltaX: currentPos.x - startPos.x,\n            deltaY: currentPos.y - startPos.y,\n            source: \"pointer\"\n        };\n    }\n    return null;\n}\nfunction applyPreviewDragGrupal(stage, leaderId, deltaX, deltaY) {\n    if (!stage || !window._dragInicial) return;\n    const last = window._groupPreviewLastDelta;\n    if (last && Math.abs(last.deltaX - deltaX) < 0.01 && Math.abs(last.deltaY - deltaY) < 0.01) {\n        return;\n    }\n    window._groupPreviewLastDelta = {\n        deltaX,\n        deltaY\n    };\n    const seguidores = Array.isArray(window._grupoSeguidores) ? window._grupoSeguidores : getGrupoElementos().filter((id)=>id !== leaderId);\n    const syncAttachedTextNode = (elementId, x, y)=>{\n        const textNode = window._elementRefs?.[`${elementId}-text`];\n        if (!textNode || typeof textNode.position !== \"function\") return;\n        textNode.position({\n            x,\n            y\n        });\n    };\n    seguidores.forEach((elementId)=>{\n        const node = window._elementRefs?.[elementId];\n        const posInicial = window._dragInicial[elementId];\n        if (!node || !posInicial) return;\n        const nextX = posInicial.x + deltaX;\n        const nextY = posInicial.y + deltaY;\n        node.position({\n            x: nextX,\n            y: nextY\n        });\n        syncAttachedTextNode(elementId, nextX, nextY);\n    });\n    if (!window._groupPreviewRaf) {\n        window._groupPreviewRaf = requestAnimationFrame(()=>{\n            window._groupPreviewRaf = null;\n            stage.batchDraw();\n        });\n    }\n}\nfunction startDragGrupalLider(e, obj) {\n    dlog(\"🚀 [DRAG GRUPAL] Iniciando drag grupal - Objeto:\", {\n        id: obj.id,\n        tipo: obj.tipo,\n        figura: obj.figura\n    });\n    const seleccion = window._elementosSeleccionados || [];\n    dlog(\"📋 [DRAG GRUPAL] Selección actual:\", seleccion);\n    if (seleccion.length > 1 && seleccion.includes(obj.id)) {\n        dlog(\"✅ [DRAG GRUPAL] Condiciones cumplidas para drag grupal\");\n        const stage = e?.target?.getStage?.();\n        const hoverCountBeforeStart = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n        dlog(\"🧪 [HOVER][GROUP-CANDIDATE]\", {\n            leaderCandidate: obj.id,\n            seleccionSize: seleccion.length,\n            hoverCountBeforeStart,\n            windowIsDragging: window._isDragging,\n            grupoLider: window._grupoLider || null\n        });\n        // 🔥 DETECTAR LÍNEAS EN LA SELECCIÓN\n        const elementosDetallados = seleccion.map((id)=>{\n            const objeto = window._objetosActuales?.find((o)=>o.id === id);\n            const node = window._elementRefs?.[id];\n            return {\n                id,\n                objeto: objeto ? {\n                    tipo: objeto.tipo,\n                    figura: objeto.figura\n                } : null,\n                nodeExists: !!node,\n                nodeDraggable: node ? node.draggable() : null\n            };\n        });\n        dlog(\"📊 [DRAG GRUPAL] Análisis detallado de elementos:\", elementosDetallados);\n        const hayLineas = seleccion.some((id)=>{\n            const objeto = window._objetosActuales?.find((o)=>o.id === id);\n            return objeto?.tipo === 'forma' && objeto?.figura === 'line';\n        });\n        dlog(\"📏 [DRAG GRUPAL] ¿Hay líneas en la selección?\", hayLineas);\n        if (hayLineas) {\n            dlog(\"🔧 [DRAG GRUPAL] Preparando líneas para drag grupal...\");\n            seleccion.forEach((id)=>{\n                const objeto = window._objetosActuales?.find((o)=>o.id === id);\n                if (objeto?.tipo === 'forma' && objeto?.figura === 'line') {\n                    const node = window._elementRefs?.[id];\n                    dlog(`📏 [DRAG GRUPAL] Línea ${id}:`, {\n                        nodeExists: !!node,\n                        draggableBefore: node ? node.draggable() : null\n                    });\n                    if (node && node.draggable) {\n                        node.draggable(true);\n                        dlog(`✅ [DRAG GRUPAL] Línea ${id} habilitada para drag`);\n                    }\n                }\n            });\n        }\n        if (!window._grupoLider) {\n            dlog(\"👑 [DRAG GRUPAL] Estableciendo líder:\", obj.id);\n            if (window._groupPreviewRaf) {\n                cancelAnimationFrame(window._groupPreviewRaf);\n                window._groupPreviewRaf = null;\n            }\n            window._groupPreviewLastDelta = null;\n            window._grupoLider = obj.id;\n            window._grupoElementos = [\n                ...seleccion\n            ];\n            window._grupoSeguidores = seleccion.filter((id)=>id !== obj.id);\n            window._dragStartPos = e.target.getStage().getPointerPosition();\n            window._dragInicial = {};\n            window._skipIndividualEnd = new Set(seleccion);\n            window._skipUntil = 0;\n            window._isDragging = true;\n            try {\n                document.body.style.cursor = \"grabbing\";\n            } catch  {}\n            window.dispatchEvent(new Event(\"dragging-start\"));\n            const hoverCountAfterGlobalStart = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n            dlog(\"🧪 [HOVER][GROUP-START-DISPATCH]\", {\n                leader: obj.id,\n                hoverCountAfterGlobalStart,\n                windowIsDragging: window._isDragging,\n                grupoLider: window._grupoLider || null\n            });\n            if (typeof requestAnimationFrame === \"function\") {\n                requestAnimationFrame(()=>{\n                    const hoverCountRaf = stage?.find?.(\".ui-hover-indicator\")?.length ?? 0;\n                    dlog(\"🧪 [HOVER][GROUP-START-DISPATCH][RAF]\", {\n                        leader: obj.id,\n                        hoverCountRaf,\n                        windowIsDragging: window._isDragging,\n                        grupoLider: window._grupoLider || null\n                    });\n                });\n            }\n            // Bloqueo de drag individual en seguidores + snapshot inicial\n            seleccion.forEach((id)=>{\n                const objeto = window._objetosActuales?.find((o)=>o.id === id);\n                const node = window._elementRefs?.[id];\n                dlog(`🔄 [DRAG GRUPAL] Procesando elemento ${id}:`, {\n                    esLider: id === obj.id,\n                    nodeExists: !!node,\n                    objetoType: objeto?.tipo\n                });\n                if (node && id !== obj.id) {\n                    const draggableBefore = node.draggable();\n                    try {\n                        node.draggable(false);\n                        dlog(`🚫 [DRAG GRUPAL] Deshabilitado drag para seguidor ${id} (era: ${draggableBefore})`);\n                    } catch (err) {\n                        console.error(`❌ [DRAG GRUPAL] Error deshabilitando ${id}:`, err);\n                    }\n                }\n                if (objeto) {\n                    const yAbsIni = (()=>{\n                        if (node && node.y) return node.y();\n                        const idx = (window._seccionesOrdenadas || []).findIndex((s)=>s.id === objeto.seccionId);\n                        const offsetY = idx >= 0 ? (window._seccionesOrdenadas || []).slice(0, idx).reduce((sum, s)=>sum + (s.altura || 0), 0) : 0;\n                        return (objeto.y || 0) + offsetY;\n                    })();\n                    window._dragInicial[id] = {\n                        x: node?.x ? node.x() : objeto.x || 0,\n                        y: yAbsIni\n                    };\n                    dlog(`📍 [DRAG GRUPAL] Posición inicial guardada para ${id}:`, window._dragInicial[id]);\n                }\n            });\n            dlog(\"🎯 [DRAG GRUPAL] Drag grupal iniciado correctamente\");\n        } else {\n            dlog(\"⚠️ [DRAG GRUPAL] Ya hay un líder activo:\", window._grupoLider);\n        }\n        return true;\n    }\n    // 🔍 DEBUG CLAVE: si NO se inicia drag grupal, NO deberíamos tocar estado global\n    dlog(\"🧪 [DRAG GRUPAL] NO-START snapshot\", {\n        objId: obj.id,\n        seleccion,\n        grupoLider: window._grupoLider,\n        isDragging: window._isDragging,\n        skipIndividualEndSize: window._skipIndividualEnd ? window._skipIndividualEnd.size : null,\n        skipUntil: window._skipUntil,\n        dragStartPos: window._dragStartPos\n    });\n    dlog(\"❌ [DRAG GRUPAL] Condiciones no cumplidas para drag grupal\");\n    return false;\n}\nfunction previewDragGrupal(e, obj, onChange) {\n    // Solo el líder debe mover visualmente al resto durante el preview.\n    if (!window._grupoLider || obj?.id !== window._grupoLider) return;\n    const stage = e?.target?.getStage?.();\n    if (!stage || !window._dragInicial) return;\n    const deltaData = calcularDeltaGrupal(stage);\n    if (!deltaData) return;\n    const { deltaX, deltaY } = deltaData;\n    applyPreviewDragGrupal(stage, obj.id, deltaX, deltaY);\n}\nfunction endDragGrupal(e, obj, onChange, hasDragged, setIsDragging) {\n    dlog(\"🏁 [DRAG GRUPAL] endDragGrupal llamado:\", {\n        objId: obj.id,\n        esLider: obj.id === window._grupoLider,\n        grupoLider: window._grupoLider,\n        isDragging: window._isDragging,\n        skipIndividualEndSize: window._skipIndividualEnd ? window._skipIndividualEnd.size : null,\n        skipUntil: window._skipUntil\n    });\n    // Solo procesa el líder\n    if (window._grupoLider && obj.id === window._grupoLider) {\n        dlog(\"👑 [DRAG GRUPAL] Procesando como líder...\");\n        const stage = e.target.getStage();\n        const deltaData = window._dragInicial ? calcularDeltaGrupal(stage) : null;\n        if (deltaData && window._dragInicial) {\n            if (window._groupPreviewRaf) {\n                cancelAnimationFrame(window._groupPreviewRaf);\n                window._groupPreviewRaf = null;\n            }\n            window._groupPreviewLastDelta = null;\n            const { deltaX, deltaY, source } = deltaData;\n            dlog(\"📏 [DRAG GRUPAL] Delta calculado:\", {\n                deltaX,\n                deltaY,\n                source\n            });\n            const elementosGrupo = getGrupoElementos();\n            // 🔥 APLICAR EL DELTA A CADA ELEMENTO (incluyendo al líder)\n            elementosGrupo.forEach((elementId)=>{\n                const objeto = window._objetosActuales?.find((o)=>o.id === elementId);\n                if (!objeto) return;\n                const posInicial = window._dragInicial[elementId];\n                if (!posInicial) return;\n                const nuevaX = posInicial.x + deltaX;\n                const nuevaY = posInicial.y + deltaY;\n                dlog(`👥 [DRAG GRUPAL] Elemento ${elementId}:`, {\n                    posInicial,\n                    delta: {\n                        deltaX,\n                        deltaY\n                    },\n                    nuevaPos: {\n                        x: nuevaX,\n                        y: nuevaY\n                    }\n                });\n                const node = window._elementRefs?.[elementId];\n                const { nuevaSeccion } = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_0__.determinarNuevaSeccion)(nuevaY, objeto.seccionId, window._seccionesOrdenadas || []);\n                try {\n                    node?.setAttr && node.setAttr(\"_muteNextEnd\", true);\n                } catch  {}\n                const cambios = {\n                    x: nuevaX,\n                    y: nuevaY,\n                    ...nuevaSeccion ? {\n                        seccionId: nuevaSeccion\n                    } : {},\n                    finalizoDrag: true,\n                    causa: \"drag-grupal\"\n                };\n                onChange(elementId, cambios);\n            });\n        } else {\n            dwarn(\"⚠️ [DRAG GRUPAL] No se pudo calcular delta final del grupo\");\n        }\n        // Cleanup\n        window._skipUntil = performance.now() + 400;\n        const seleccion = getGrupoElementos();\n        seleccion.forEach((id)=>{\n            const elNode = window._elementRefs?.[id];\n            if (!elNode) return;\n            setTimeout(()=>{\n                try {\n                    const before = elNode.draggable();\n                    elNode.draggable(true);\n                    const after = elNode.draggable();\n                    dlog(\"🧩 [DRAG GRUPAL] restore draggable\", {\n                        id,\n                        before,\n                        after\n                    });\n                } catch (err) {\n                    dwarn(\"❌ [DRAG GRUPAL] restore draggable error\", {\n                        id,\n                        err\n                    });\n                }\n            }, 24);\n        });\n        window._grupoLider = null;\n        window._grupoElementos = null;\n        window._grupoSeguidores = null;\n        window._dragStartPos = null;\n        window._dragInicial = null;\n        // 🔥 RESETEAR CURSOR AL FINALIZAR DRAG GRUPAL\n        try {\n            document.body.style.cursor = \"default\";\n        } catch  {}\n        setTimeout(()=>{\n            window._skipIndividualEnd = null;\n            window._skipUntil = 0;\n        }, 450);\n        setTimeout(()=>{\n            hasDragged.current = false;\n        }, 40);\n        return true;\n    }\n    // Seguidores\n    if (window._grupoLider) {\n        const seleccion = window._elementosSeleccionados || [];\n        if (seleccion.includes(obj.id)) {\n            setTimeout(()=>{\n                hasDragged.current = false;\n            }, 40);\n            return true;\n        }\n    }\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVdrQixPQUFPLEdBQUc7UUFBTyxHQUFHO1FBQ2xELE9BQU87SUFDVDtJQUVBLGFBQWE7SUFDYixJQUFJeEksT0FBT2lCLFdBQVcsRUFBRTtRQUN0QixNQUFNeUMsWUFBWTFELE9BQU9hLHVCQUF1QixJQUFJLEVBQUU7UUFDdEQsSUFBSTZDLFVBQVVDLFFBQVEsQ0FBQ0osSUFBSWYsRUFBRSxHQUFHO1lBQzlCNkYsV0FBVztnQkFBUWYsV0FBV2tCLE9BQU8sR0FBRztZQUFPLEdBQUc7WUFDbEQsT0FBTztRQUNUO0lBQ0Y7SUFFQSxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcZHJhZ1xcZHJhZ0dydXBhbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGRyYWdcXGRyYWdHcnVwYWwuanNcbmltcG9ydCB7IGRldGVybWluYXJOdWV2YVNlY2Npb24gfSBmcm9tIFwiQC91dGlscy9sYXlvdXRcIjtcblxuY29uc3QgaXNEcmFnR3J1cGFsRGVidWdFbmFibGVkID0gKCkgPT5cbiAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuX19EQkdfRFJBR19HUlVQQUwgPT09IHRydWU7XG5cbmNvbnN0IGRsb2cgPSAoLi4uYXJncykgPT4ge1xuICBpZiAoIWlzRHJhZ0dydXBhbERlYnVnRW5hYmxlZCgpKSByZXR1cm47XG4gIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xufTtcblxuY29uc3QgZHdhcm4gPSAoLi4uYXJncykgPT4ge1xuICBpZiAoIWlzRHJhZ0dydXBhbERlYnVnRW5hYmxlZCgpKSByZXR1cm47XG4gIGNvbnNvbGUud2FybiguLi5hcmdzKTtcbn07XG5cbmZ1bmN0aW9uIGdldEdydXBvRWxlbWVudG9zKCkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh3aW5kb3cuX2dydXBvRWxlbWVudG9zKSAmJiB3aW5kb3cuX2dydXBvRWxlbWVudG9zLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gd2luZG93Ll9ncnVwb0VsZW1lbnRvcztcbiAgfVxuICByZXR1cm4gd2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zIHx8IFtdO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhckRlbHRhR3J1cGFsKHN0YWdlKSB7XG4gIGNvbnN0IGxlYWRlcklkID0gd2luZG93Ll9ncnVwb0xpZGVyO1xuICBjb25zdCBkcmFnSW5pY2lhbCA9IHdpbmRvdy5fZHJhZ0luaWNpYWwgfHwgbnVsbDtcbiAgY29uc3QgcG9zSW5pY2lhbExpZGVyID0gbGVhZGVySWQgJiYgZHJhZ0luaWNpYWwgPyBkcmFnSW5pY2lhbFtsZWFkZXJJZF0gOiBudWxsO1xuICBjb25zdCBsZWFkZXJOb2RlID0gbGVhZGVySWQgPyB3aW5kb3cuX2VsZW1lbnRSZWZzPy5bbGVhZGVySWRdIDogbnVsbDtcblxuICBpZiAoXG4gICAgbGVhZGVyTm9kZSAmJlxuICAgIHBvc0luaWNpYWxMaWRlciAmJlxuICAgIHR5cGVvZiBsZWFkZXJOb2RlLnggPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgIHR5cGVvZiBsZWFkZXJOb2RlLnkgPT09IFwiZnVuY3Rpb25cIlxuICApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGVsdGFYOiBsZWFkZXJOb2RlLngoKSAtIHBvc0luaWNpYWxMaWRlci54LFxuICAgICAgZGVsdGFZOiBsZWFkZXJOb2RlLnkoKSAtIHBvc0luaWNpYWxMaWRlci55LFxuICAgICAgc291cmNlOiBcImxlYWRlci1ub2RlXCJcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgY3VycmVudFBvcyA9IHN0YWdlPy5nZXRQb2ludGVyUG9zaXRpb24/LigpO1xuICBjb25zdCBzdGFydFBvcyA9IHdpbmRvdy5fZHJhZ1N0YXJ0UG9zO1xuICBpZiAoY3VycmVudFBvcyAmJiBzdGFydFBvcykge1xuICAgIHJldHVybiB7XG4gICAgICBkZWx0YVg6IGN1cnJlbnRQb3MueCAtIHN0YXJ0UG9zLngsXG4gICAgICBkZWx0YVk6IGN1cnJlbnRQb3MueSAtIHN0YXJ0UG9zLnksXG4gICAgICBzb3VyY2U6IFwicG9pbnRlclwiXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBhcHBseVByZXZpZXdEcmFnR3J1cGFsKHN0YWdlLCBsZWFkZXJJZCwgZGVsdGFYLCBkZWx0YVkpIHtcbiAgaWYgKCFzdGFnZSB8fCAhd2luZG93Ll9kcmFnSW5pY2lhbCkgcmV0dXJuO1xuXG4gIGNvbnN0IGxhc3QgPSB3aW5kb3cuX2dyb3VwUHJldmlld0xhc3REZWx0YTtcbiAgaWYgKFxuICAgIGxhc3QgJiZcbiAgICBNYXRoLmFicyhsYXN0LmRlbHRhWCAtIGRlbHRhWCkgPCAwLjAxICYmXG4gICAgTWF0aC5hYnMobGFzdC5kZWx0YVkgLSBkZWx0YVkpIDwgMC4wMVxuICApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93Ll9ncm91cFByZXZpZXdMYXN0RGVsdGEgPSB7IGRlbHRhWCwgZGVsdGFZIH07XG5cbiAgY29uc3Qgc2VndWlkb3JlcyA9IEFycmF5LmlzQXJyYXkod2luZG93Ll9ncnVwb1NlZ3VpZG9yZXMpXG4gICAgPyB3aW5kb3cuX2dydXBvU2VndWlkb3Jlc1xuICAgIDogZ2V0R3J1cG9FbGVtZW50b3MoKS5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gbGVhZGVySWQpO1xuXG4gIGNvbnN0IHN5bmNBdHRhY2hlZFRleHROb2RlID0gKGVsZW1lbnRJZCwgeCwgeSkgPT4ge1xuICAgIGNvbnN0IHRleHROb2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2Ake2VsZW1lbnRJZH0tdGV4dGBdO1xuICAgIGlmICghdGV4dE5vZGUgfHwgdHlwZW9mIHRleHROb2RlLnBvc2l0aW9uICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybjtcbiAgICB0ZXh0Tm9kZS5wb3NpdGlvbih7IHgsIHkgfSk7XG4gIH07XG5cbiAgc2VndWlkb3Jlcy5mb3JFYWNoKChlbGVtZW50SWQpID0+IHtcbiAgICBjb25zdCBub2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2VsZW1lbnRJZF07XG4gICAgY29uc3QgcG9zSW5pY2lhbCA9IHdpbmRvdy5fZHJhZ0luaWNpYWxbZWxlbWVudElkXTtcbiAgICBpZiAoIW5vZGUgfHwgIXBvc0luaWNpYWwpIHJldHVybjtcbiAgICBjb25zdCBuZXh0WCA9IHBvc0luaWNpYWwueCArIGRlbHRhWDtcbiAgICBjb25zdCBuZXh0WSA9IHBvc0luaWNpYWwueSArIGRlbHRhWTtcbiAgICBub2RlLnBvc2l0aW9uKHtcbiAgICAgIHg6IG5leHRYLFxuICAgICAgeTogbmV4dFlcbiAgICB9KTtcbiAgICBzeW5jQXR0YWNoZWRUZXh0Tm9kZShlbGVtZW50SWQsIG5leHRYLCBuZXh0WSk7XG4gIH0pO1xuXG4gIGlmICghd2luZG93Ll9ncm91cFByZXZpZXdSYWYpIHtcbiAgICB3aW5kb3cuX2dyb3VwUHJldmlld1JhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB3aW5kb3cuX2dyb3VwUHJldmlld1JhZiA9IG51bGw7XG4gICAgICBzdGFnZS5iYXRjaERyYXcoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RhcnREcmFnR3J1cGFsTGlkZXIoZSwgb2JqKSB7XG4gIGRsb2coXCLwn5qAIFtEUkFHIEdSVVBBTF0gSW5pY2lhbmRvIGRyYWcgZ3J1cGFsIC0gT2JqZXRvOlwiLCB7XG4gICAgaWQ6IG9iai5pZCxcbiAgICB0aXBvOiBvYmoudGlwbyxcbiAgICBmaWd1cmE6IG9iai5maWd1cmFcbiAgfSk7XG5cbiAgY29uc3Qgc2VsZWNjaW9uID0gd2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zIHx8IFtdO1xuICBkbG9nKFwi8J+TiyBbRFJBRyBHUlVQQUxdIFNlbGVjY2nDs24gYWN0dWFsOlwiLCBzZWxlY2Npb24pO1xuXG4gIGlmIChzZWxlY2Npb24ubGVuZ3RoID4gMSAmJiBzZWxlY2Npb24uaW5jbHVkZXMob2JqLmlkKSkge1xuICAgIGRsb2coXCLinIUgW0RSQUcgR1JVUEFMXSBDb25kaWNpb25lcyBjdW1wbGlkYXMgcGFyYSBkcmFnIGdydXBhbFwiKTtcbiAgICBjb25zdCBzdGFnZSA9IGU/LnRhcmdldD8uZ2V0U3RhZ2U/LigpO1xuICAgIGNvbnN0IGhvdmVyQ291bnRCZWZvcmVTdGFydCA9IHN0YWdlPy5maW5kPy4oXCIudWktaG92ZXItaW5kaWNhdG9yXCIpPy5sZW5ndGggPz8gMDtcbiAgICBkbG9nKFwi8J+nqiBbSE9WRVJdW0dST1VQLUNBTkRJREFURV1cIiwge1xuICAgICAgbGVhZGVyQ2FuZGlkYXRlOiBvYmouaWQsXG4gICAgICBzZWxlY2Npb25TaXplOiBzZWxlY2Npb24ubGVuZ3RoLFxuICAgICAgaG92ZXJDb3VudEJlZm9yZVN0YXJ0LFxuICAgICAgd2luZG93SXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxuICAgICAgZ3J1cG9MaWRlcjogd2luZG93Ll9ncnVwb0xpZGVyIHx8IG51bGwsXG4gICAgfSk7XG5cbiAgICAvLyDwn5SlIERFVEVDVEFSIEzDjU5FQVMgRU4gTEEgU0VMRUNDScOTTlxuICAgIGNvbnN0IGVsZW1lbnRvc0RldGFsbGFkb3MgPSBzZWxlY2Npb24ubWFwKGlkID0+IHtcbiAgICAgIGNvbnN0IG9iamV0byA9IHdpbmRvdy5fb2JqZXRvc0FjdHVhbGVzPy5maW5kKG8gPT4gby5pZCA9PT0gaWQpO1xuICAgICAgY29uc3Qgbm9kZSA9IHdpbmRvdy5fZWxlbWVudFJlZnM/LltpZF07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZCxcbiAgICAgICAgb2JqZXRvOiBvYmpldG8gPyB7XG4gICAgICAgICAgdGlwbzogb2JqZXRvLnRpcG8sXG4gICAgICAgICAgZmlndXJhOiBvYmpldG8uZmlndXJhXG4gICAgICAgIH0gOiBudWxsLFxuICAgICAgICBub2RlRXhpc3RzOiAhIW5vZGUsXG4gICAgICAgIG5vZGVEcmFnZ2FibGU6IG5vZGUgPyBub2RlLmRyYWdnYWJsZSgpIDogbnVsbFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGRsb2coXCLwn5OKIFtEUkFHIEdSVVBBTF0gQW7DoWxpc2lzIGRldGFsbGFkbyBkZSBlbGVtZW50b3M6XCIsIGVsZW1lbnRvc0RldGFsbGFkb3MpO1xuXG4gICAgY29uc3QgaGF5TGluZWFzID0gc2VsZWNjaW9uLnNvbWUoaWQgPT4ge1xuICAgICAgY29uc3Qgb2JqZXRvID0gd2luZG93Ll9vYmpldG9zQWN0dWFsZXM/LmZpbmQobyA9PiBvLmlkID09PSBpZCk7XG4gICAgICByZXR1cm4gb2JqZXRvPy50aXBvID09PSAnZm9ybWEnICYmIG9iamV0bz8uZmlndXJhID09PSAnbGluZSc7XG4gICAgfSk7XG5cbiAgICBkbG9nKFwi8J+TjyBbRFJBRyBHUlVQQUxdIMK/SGF5IGzDrW5lYXMgZW4gbGEgc2VsZWNjacOzbj9cIiwgaGF5TGluZWFzKTtcblxuICAgIGlmIChoYXlMaW5lYXMpIHtcbiAgICAgIGRsb2coXCLwn5SnIFtEUkFHIEdSVVBBTF0gUHJlcGFyYW5kbyBsw61uZWFzIHBhcmEgZHJhZyBncnVwYWwuLi5cIik7XG4gICAgICBzZWxlY2Npb24uZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIGNvbnN0IG9iamV0byA9IHdpbmRvdy5fb2JqZXRvc0FjdHVhbGVzPy5maW5kKG8gPT4gby5pZCA9PT0gaWQpO1xuICAgICAgICBpZiAob2JqZXRvPy50aXBvID09PSAnZm9ybWEnICYmIG9iamV0bz8uZmlndXJhID09PSAnbGluZScpIHtcbiAgICAgICAgICBjb25zdCBub2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2lkXTtcbiAgICAgICAgICBkbG9nKGDwn5OPIFtEUkFHIEdSVVBBTF0gTMOtbmVhICR7aWR9OmAsIHtcbiAgICAgICAgICAgIG5vZGVFeGlzdHM6ICEhbm9kZSxcbiAgICAgICAgICAgIGRyYWdnYWJsZUJlZm9yZTogbm9kZSA/IG5vZGUuZHJhZ2dhYmxlKCkgOiBudWxsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAobm9kZSAmJiBub2RlLmRyYWdnYWJsZSkge1xuICAgICAgICAgICAgbm9kZS5kcmFnZ2FibGUodHJ1ZSk7XG4gICAgICAgICAgICBkbG9nKGDinIUgW0RSQUcgR1JVUEFMXSBMw61uZWEgJHtpZH0gaGFiaWxpdGFkYSBwYXJhIGRyYWdgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghd2luZG93Ll9ncnVwb0xpZGVyKSB7XG4gICAgICBkbG9nKFwi8J+RkSBbRFJBRyBHUlVQQUxdIEVzdGFibGVjaWVuZG8gbMOtZGVyOlwiLCBvYmouaWQpO1xuICAgICAgaWYgKHdpbmRvdy5fZ3JvdXBQcmV2aWV3UmFmKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHdpbmRvdy5fZ3JvdXBQcmV2aWV3UmFmKTtcbiAgICAgICAgd2luZG93Ll9ncm91cFByZXZpZXdSYWYgPSBudWxsO1xuICAgICAgfVxuICAgICAgd2luZG93Ll9ncm91cFByZXZpZXdMYXN0RGVsdGEgPSBudWxsO1xuICAgICAgd2luZG93Ll9ncnVwb0xpZGVyID0gb2JqLmlkO1xuICAgICAgd2luZG93Ll9ncnVwb0VsZW1lbnRvcyA9IFsuLi5zZWxlY2Npb25dO1xuICAgICAgd2luZG93Ll9ncnVwb1NlZ3VpZG9yZXMgPSBzZWxlY2Npb24uZmlsdGVyKChpZCkgPT4gaWQgIT09IG9iai5pZCk7XG4gICAgICB3aW5kb3cuX2RyYWdTdGFydFBvcyA9IGUudGFyZ2V0LmdldFN0YWdlKCkuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XG4gICAgICB3aW5kb3cuX2RyYWdJbmljaWFsID0ge307XG4gICAgICB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kID0gbmV3IFNldChzZWxlY2Npb24pO1xuICAgICAgd2luZG93Ll9za2lwVW50aWwgPSAwO1xuXG4gICAgICB3aW5kb3cuX2lzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImdyYWJiaW5nXCI7XG4gICAgICB9IGNhdGNoIHsgfVxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiZHJhZ2dpbmctc3RhcnRcIikpO1xuICAgICAgY29uc3QgaG92ZXJDb3VudEFmdGVyR2xvYmFsU3RhcnQgPSBzdGFnZT8uZmluZD8uKFwiLnVpLWhvdmVyLWluZGljYXRvclwiKT8ubGVuZ3RoID8/IDA7XG4gICAgICBkbG9nKFwi8J+nqiBbSE9WRVJdW0dST1VQLVNUQVJULURJU1BBVENIXVwiLCB7XG4gICAgICAgIGxlYWRlcjogb2JqLmlkLFxuICAgICAgICBob3ZlckNvdW50QWZ0ZXJHbG9iYWxTdGFydCxcbiAgICAgICAgd2luZG93SXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxuICAgICAgICBncnVwb0xpZGVyOiB3aW5kb3cuX2dydXBvTGlkZXIgfHwgbnVsbCxcbiAgICAgIH0pO1xuICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGhvdmVyQ291bnRSYWYgPSBzdGFnZT8uZmluZD8uKFwiLnVpLWhvdmVyLWluZGljYXRvclwiKT8ubGVuZ3RoID8/IDA7XG4gICAgICAgICAgZGxvZyhcIvCfp6ogW0hPVkVSXVtHUk9VUC1TVEFSVC1ESVNQQVRDSF1bUkFGXVwiLCB7XG4gICAgICAgICAgICBsZWFkZXI6IG9iai5pZCxcbiAgICAgICAgICAgIGhvdmVyQ291bnRSYWYsXG4gICAgICAgICAgICB3aW5kb3dJc0RyYWdnaW5nOiB3aW5kb3cuX2lzRHJhZ2dpbmcsXG4gICAgICAgICAgICBncnVwb0xpZGVyOiB3aW5kb3cuX2dydXBvTGlkZXIgfHwgbnVsbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEJsb3F1ZW8gZGUgZHJhZyBpbmRpdmlkdWFsIGVuIHNlZ3VpZG9yZXMgKyBzbmFwc2hvdCBpbmljaWFsXG4gICAgICBzZWxlY2Npb24uZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqZXRvID0gd2luZG93Ll9vYmpldG9zQWN0dWFsZXM/LmZpbmQobyA9PiBvLmlkID09PSBpZCk7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB3aW5kb3cuX2VsZW1lbnRSZWZzPy5baWRdO1xuXG4gICAgICAgIGRsb2coYPCflIQgW0RSQUcgR1JVUEFMXSBQcm9jZXNhbmRvIGVsZW1lbnRvICR7aWR9OmAsIHtcbiAgICAgICAgICBlc0xpZGVyOiBpZCA9PT0gb2JqLmlkLFxuICAgICAgICAgIG5vZGVFeGlzdHM6ICEhbm9kZSxcbiAgICAgICAgICBvYmpldG9UeXBlOiBvYmpldG8/LnRpcG9cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG5vZGUgJiYgaWQgIT09IG9iai5pZCkge1xuICAgICAgICAgIGNvbnN0IGRyYWdnYWJsZUJlZm9yZSA9IG5vZGUuZHJhZ2dhYmxlKCk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5vZGUuZHJhZ2dhYmxlKGZhbHNlKTtcbiAgICAgICAgICAgIGRsb2coYPCfmqsgW0RSQUcgR1JVUEFMXSBEZXNoYWJpbGl0YWRvIGRyYWcgcGFyYSBzZWd1aWRvciAke2lkfSAoZXJhOiAke2RyYWdnYWJsZUJlZm9yZX0pYCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgW0RSQUcgR1JVUEFMXSBFcnJvciBkZXNoYWJpbGl0YW5kbyAke2lkfTpgLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvYmpldG8pIHtcbiAgICAgICAgICBjb25zdCB5QWJzSW5pID0gKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUueSkgcmV0dXJuIG5vZGUueSgpO1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gKHdpbmRvdy5fc2VjY2lvbmVzT3JkZW5hZGFzIHx8IFtdKS5maW5kSW5kZXgocyA9PiBzLmlkID09PSBvYmpldG8uc2VjY2lvbklkKTtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSBpZHggPj0gMCA/ICh3aW5kb3cuX3NlY2Npb25lc09yZGVuYWRhcyB8fCBbXSlcbiAgICAgICAgICAgICAgLnNsaWNlKDAsIGlkeClcbiAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyAocy5hbHR1cmEgfHwgMCksIDApIDogMDtcbiAgICAgICAgICAgIHJldHVybiAob2JqZXRvLnkgfHwgMCkgKyBvZmZzZXRZO1xuICAgICAgICAgIH0pKCk7XG5cbiAgICAgICAgICB3aW5kb3cuX2RyYWdJbmljaWFsW2lkXSA9IHtcbiAgICAgICAgICAgIHg6IG5vZGU/LnggPyBub2RlLngoKSA6IChvYmpldG8ueCB8fCAwKSxcbiAgICAgICAgICAgIHk6IHlBYnNJbmlcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZGxvZyhg8J+TjSBbRFJBRyBHUlVQQUxdIFBvc2ljacOzbiBpbmljaWFsIGd1YXJkYWRhIHBhcmEgJHtpZH06YCwgd2luZG93Ll9kcmFnSW5pY2lhbFtpZF0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZGxvZyhcIvCfjq8gW0RSQUcgR1JVUEFMXSBEcmFnIGdydXBhbCBpbmljaWFkbyBjb3JyZWN0YW1lbnRlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkbG9nKFwi4pqg77iPIFtEUkFHIEdSVVBBTF0gWWEgaGF5IHVuIGzDrWRlciBhY3Rpdm86XCIsIHdpbmRvdy5fZ3J1cG9MaWRlcik7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIPCflI0gREVCVUcgQ0xBVkU6IHNpIE5PIHNlIGluaWNpYSBkcmFnIGdydXBhbCwgTk8gZGViZXLDrWFtb3MgdG9jYXIgZXN0YWRvIGdsb2JhbFxuICBkbG9nKFwi8J+nqiBbRFJBRyBHUlVQQUxdIE5PLVNUQVJUIHNuYXBzaG90XCIsIHtcbiAgICBvYmpJZDogb2JqLmlkLFxuICAgIHNlbGVjY2lvbixcbiAgICBncnVwb0xpZGVyOiB3aW5kb3cuX2dydXBvTGlkZXIsXG4gICAgaXNEcmFnZ2luZzogd2luZG93Ll9pc0RyYWdnaW5nLFxuICAgIHNraXBJbmRpdmlkdWFsRW5kU2l6ZTogd2luZG93Ll9za2lwSW5kaXZpZHVhbEVuZCA/IHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQuc2l6ZSA6IG51bGwsXG4gICAgc2tpcFVudGlsOiB3aW5kb3cuX3NraXBVbnRpbCxcbiAgICBkcmFnU3RhcnRQb3M6IHdpbmRvdy5fZHJhZ1N0YXJ0UG9zLFxuICB9KTtcblxuICBkbG9nKFwi4p2MIFtEUkFHIEdSVVBBTF0gQ29uZGljaW9uZXMgbm8gY3VtcGxpZGFzIHBhcmEgZHJhZyBncnVwYWxcIik7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2aWV3RHJhZ0dydXBhbChlLCBvYmosIG9uQ2hhbmdlKSB7XG4gIC8vIFNvbG8gZWwgbMOtZGVyIGRlYmUgbW92ZXIgdmlzdWFsbWVudGUgYWwgcmVzdG8gZHVyYW50ZSBlbCBwcmV2aWV3LlxuICBpZiAoIXdpbmRvdy5fZ3J1cG9MaWRlciB8fCBvYmo/LmlkICE9PSB3aW5kb3cuX2dydXBvTGlkZXIpIHJldHVybjtcblxuICBjb25zdCBzdGFnZSA9IGU/LnRhcmdldD8uZ2V0U3RhZ2U/LigpO1xuICBpZiAoIXN0YWdlIHx8ICF3aW5kb3cuX2RyYWdJbmljaWFsKSByZXR1cm47XG5cbiAgY29uc3QgZGVsdGFEYXRhID0gY2FsY3VsYXJEZWx0YUdydXBhbChzdGFnZSk7XG4gIGlmICghZGVsdGFEYXRhKSByZXR1cm47XG5cbiAgY29uc3QgeyBkZWx0YVgsIGRlbHRhWSB9ID0gZGVsdGFEYXRhO1xuICBhcHBseVByZXZpZXdEcmFnR3J1cGFsKHN0YWdlLCBvYmouaWQsIGRlbHRhWCwgZGVsdGFZKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuZERyYWdHcnVwYWwoZSwgb2JqLCBvbkNoYW5nZSwgaGFzRHJhZ2dlZCwgc2V0SXNEcmFnZ2luZykge1xuICBkbG9nKFwi8J+PgSBbRFJBRyBHUlVQQUxdIGVuZERyYWdHcnVwYWwgbGxhbWFkbzpcIiwge1xuICAgIG9iaklkOiBvYmouaWQsXG4gICAgZXNMaWRlcjogb2JqLmlkID09PSB3aW5kb3cuX2dydXBvTGlkZXIsXG4gICAgZ3J1cG9MaWRlcjogd2luZG93Ll9ncnVwb0xpZGVyLFxuICAgIGlzRHJhZ2dpbmc6IHdpbmRvdy5faXNEcmFnZ2luZyxcbiAgICBza2lwSW5kaXZpZHVhbEVuZFNpemU6IHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQgPyB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kLnNpemUgOiBudWxsLFxuICAgIHNraXBVbnRpbDogd2luZG93Ll9za2lwVW50aWwsXG4gIH0pO1xuXG5cbiAgLy8gU29sbyBwcm9jZXNhIGVsIGzDrWRlclxuICBpZiAod2luZG93Ll9ncnVwb0xpZGVyICYmIG9iai5pZCA9PT0gd2luZG93Ll9ncnVwb0xpZGVyKSB7XG4gICAgZGxvZyhcIvCfkZEgW0RSQUcgR1JVUEFMXSBQcm9jZXNhbmRvIGNvbW8gbMOtZGVyLi4uXCIpO1xuXG4gICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xuICAgIGNvbnN0IGRlbHRhRGF0YSA9IHdpbmRvdy5fZHJhZ0luaWNpYWwgPyBjYWxjdWxhckRlbHRhR3J1cGFsKHN0YWdlKSA6IG51bGw7XG5cbiAgICBpZiAoZGVsdGFEYXRhICYmIHdpbmRvdy5fZHJhZ0luaWNpYWwpIHtcbiAgICAgIGlmICh3aW5kb3cuX2dyb3VwUHJldmlld1JhZikge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh3aW5kb3cuX2dyb3VwUHJldmlld1JhZik7XG4gICAgICAgIHdpbmRvdy5fZ3JvdXBQcmV2aWV3UmFmID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHdpbmRvdy5fZ3JvdXBQcmV2aWV3TGFzdERlbHRhID0gbnVsbDtcblxuICAgICAgY29uc3QgeyBkZWx0YVgsIGRlbHRhWSwgc291cmNlIH0gPSBkZWx0YURhdGE7XG4gICAgICBkbG9nKFwi8J+TjyBbRFJBRyBHUlVQQUxdIERlbHRhIGNhbGN1bGFkbzpcIiwgeyBkZWx0YVgsIGRlbHRhWSwgc291cmNlIH0pO1xuXG4gICAgICBjb25zdCBlbGVtZW50b3NHcnVwbyA9IGdldEdydXBvRWxlbWVudG9zKCk7XG5cbiAgICAgIC8vIPCflKUgQVBMSUNBUiBFTCBERUxUQSBBIENBREEgRUxFTUVOVE8gKGluY2x1eWVuZG8gYWwgbMOtZGVyKVxuICAgICAgZWxlbWVudG9zR3J1cG8uZm9yRWFjaCgoZWxlbWVudElkKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iamV0byA9IHdpbmRvdy5fb2JqZXRvc0FjdHVhbGVzPy5maW5kKG8gPT4gby5pZCA9PT0gZWxlbWVudElkKTtcbiAgICAgICAgaWYgKCFvYmpldG8pIHJldHVybjtcblxuICAgICAgICBjb25zdCBwb3NJbmljaWFsID0gd2luZG93Ll9kcmFnSW5pY2lhbFtlbGVtZW50SWRdO1xuICAgICAgICBpZiAoIXBvc0luaWNpYWwpIHJldHVybjtcblxuICAgICAgICBjb25zdCBudWV2YVggPSBwb3NJbmljaWFsLnggKyBkZWx0YVg7XG4gICAgICAgIGNvbnN0IG51ZXZhWSA9IHBvc0luaWNpYWwueSArIGRlbHRhWTtcblxuICAgICAgICBkbG9nKGDwn5GlIFtEUkFHIEdSVVBBTF0gRWxlbWVudG8gJHtlbGVtZW50SWR9OmAsIHtcbiAgICAgICAgICBwb3NJbmljaWFsLFxuICAgICAgICAgIGRlbHRhOiB7IGRlbHRhWCwgZGVsdGFZIH0sXG4gICAgICAgICAgbnVldmFQb3M6IHsgeDogbnVldmFYLCB5OiBudWV2YVkgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBub2RlID0gd2luZG93Ll9lbGVtZW50UmVmcz8uW2VsZW1lbnRJZF07XG4gICAgICAgIGNvbnN0IHsgbnVldmFTZWNjaW9uIH0gPSBkZXRlcm1pbmFyTnVldmFTZWNjaW9uKFxuICAgICAgICAgIG51ZXZhWSxcbiAgICAgICAgICBvYmpldG8uc2VjY2lvbklkLFxuICAgICAgICAgIHdpbmRvdy5fc2VjY2lvbmVzT3JkZW5hZGFzIHx8IFtdXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBub2RlPy5zZXRBdHRyICYmIG5vZGUuc2V0QXR0cihcIl9tdXRlTmV4dEVuZFwiLCB0cnVlKTtcbiAgICAgICAgfSBjYXRjaCB7IH1cblxuICAgICAgICBjb25zdCBjYW1iaW9zID0ge1xuICAgICAgICAgIHg6IG51ZXZhWCxcbiAgICAgICAgICB5OiBudWV2YVksXG4gICAgICAgICAgLi4uKG51ZXZhU2VjY2lvbiA/IHsgc2VjY2lvbklkOiBudWV2YVNlY2Npb24gfSA6IHt9KSxcbiAgICAgICAgICBmaW5hbGl6b0RyYWc6IHRydWUsXG4gICAgICAgICAgY2F1c2E6IFwiZHJhZy1ncnVwYWxcIlxuICAgICAgICB9O1xuXG4gICAgICAgIG9uQ2hhbmdlKGVsZW1lbnRJZCwgY2FtYmlvcyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHdhcm4oXCLimqDvuI8gW0RSQUcgR1JVUEFMXSBObyBzZSBwdWRvIGNhbGN1bGFyIGRlbHRhIGZpbmFsIGRlbCBncnVwb1wiKTtcbiAgICB9XG5cbiAgICAvLyBDbGVhbnVwXG4gICAgd2luZG93Ll9za2lwVW50aWwgPSBwZXJmb3JtYW5jZS5ub3coKSArIDQwMDtcblxuICAgIGNvbnN0IHNlbGVjY2lvbiA9IGdldEdydXBvRWxlbWVudG9zKCk7XG4gICAgc2VsZWNjaW9uLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICBjb25zdCBlbE5vZGUgPSB3aW5kb3cuX2VsZW1lbnRSZWZzPy5baWRdO1xuICAgICAgaWYgKCFlbE5vZGUpIHJldHVybjtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgYmVmb3JlID0gZWxOb2RlLmRyYWdnYWJsZSgpO1xuICAgICAgICAgIGVsTm9kZS5kcmFnZ2FibGUodHJ1ZSk7XG4gICAgICAgICAgY29uc3QgYWZ0ZXIgPSBlbE5vZGUuZHJhZ2dhYmxlKCk7XG4gICAgICAgICAgZGxvZyhcIvCfp6kgW0RSQUcgR1JVUEFMXSByZXN0b3JlIGRyYWdnYWJsZVwiLCB7IGlkLCBiZWZvcmUsIGFmdGVyIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBkd2FybihcIuKdjCBbRFJBRyBHUlVQQUxdIHJlc3RvcmUgZHJhZ2dhYmxlIGVycm9yXCIsIHsgaWQsIGVyciB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgMjQpO1xuICAgIH0pO1xuXG5cbiAgICB3aW5kb3cuX2dydXBvTGlkZXIgPSBudWxsO1xuICAgIHdpbmRvdy5fZ3J1cG9FbGVtZW50b3MgPSBudWxsO1xuICAgIHdpbmRvdy5fZ3J1cG9TZWd1aWRvcmVzID0gbnVsbDtcbiAgICB3aW5kb3cuX2RyYWdTdGFydFBvcyA9IG51bGw7XG4gICAgd2luZG93Ll9kcmFnSW5pY2lhbCA9IG51bGw7XG5cbiAgICAvLyDwn5SlIFJFU0VURUFSIENVUlNPUiBBTCBGSU5BTElaQVIgRFJBRyBHUlVQQUxcbiAgICB0cnkge1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICB9IGNhdGNoIHsgfVxuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kID0gbnVsbDtcbiAgICAgIHdpbmRvdy5fc2tpcFVudGlsID0gMDtcbiAgICB9LCA0NTApO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGhhc0RyYWdnZWQuY3VycmVudCA9IGZhbHNlOyB9LCA0MCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBTZWd1aWRvcmVzXG4gIGlmICh3aW5kb3cuX2dydXBvTGlkZXIpIHtcbiAgICBjb25zdCBzZWxlY2Npb24gPSB3aW5kb3cuX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MgfHwgW107XG4gICAgaWYgKHNlbGVjY2lvbi5pbmNsdWRlcyhvYmouaWQpKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHsgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7IH0sIDQwKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG5cbiJdLCJuYW1lcyI6WyJkZXRlcm1pbmFyTnVldmFTZWNjaW9uIiwiaXNEcmFnR3J1cGFsRGVidWdFbmFibGVkIiwid2luZG93IiwiX19EQkdfRFJBR19HUlVQQUwiLCJkbG9nIiwiYXJncyIsImNvbnNvbGUiLCJsb2ciLCJkd2FybiIsIndhcm4iLCJnZXRHcnVwb0VsZW1lbnRvcyIsIkFycmF5IiwiaXNBcnJheSIsIl9ncnVwb0VsZW1lbnRvcyIsImxlbmd0aCIsIl9lbGVtZW50b3NTZWxlY2Npb25hZG9zIiwiY2FsY3VsYXJEZWx0YUdydXBhbCIsInN0YWdlIiwibGVhZGVySWQiLCJfZ3J1cG9MaWRlciIsImRyYWdJbmljaWFsIiwiX2RyYWdJbmljaWFsIiwicG9zSW5pY2lhbExpZGVyIiwibGVhZGVyTm9kZSIsIl9lbGVtZW50UmVmcyIsIngiLCJ5IiwiZGVsdGFYIiwiZGVsdGFZIiwic291cmNlIiwiY3VycmVudFBvcyIsImdldFBvaW50ZXJQb3NpdGlvbiIsInN0YXJ0UG9zIiwiX2RyYWdTdGFydFBvcyIsImFwcGx5UHJldmlld0RyYWdHcnVwYWwiLCJsYXN0IiwiX2dyb3VwUHJldmlld0xhc3REZWx0YSIsIk1hdGgiLCJhYnMiLCJzZWd1aWRvcmVzIiwiX2dydXBvU2VndWlkb3JlcyIsImZpbHRlciIsImlkIiwic3luY0F0dGFjaGVkVGV4dE5vZGUiLCJlbGVtZW50SWQiLCJ0ZXh0Tm9kZSIsInBvc2l0aW9uIiwiZm9yRWFjaCIsIm5vZGUiLCJwb3NJbmljaWFsIiwibmV4dFgiLCJuZXh0WSIsIl9ncm91cFByZXZpZXdSYWYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiYXRjaERyYXciLCJzdGFydERyYWdHcnVwYWxMaWRlciIsImUiLCJvYmoiLCJ0aXBvIiwiZmlndXJhIiwic2VsZWNjaW9uIiwiaW5jbHVkZXMiLCJ0YXJnZXQiLCJnZXRTdGFnZSIsImhvdmVyQ291bnRCZWZvcmVTdGFydCIsImZpbmQiLCJsZWFkZXJDYW5kaWRhdGUiLCJzZWxlY2Npb25TaXplIiwid2luZG93SXNEcmFnZ2luZyIsIl9pc0RyYWdnaW5nIiwiZ3J1cG9MaWRlciIsImVsZW1lbnRvc0RldGFsbGFkb3MiLCJtYXAiLCJvYmpldG8iLCJfb2JqZXRvc0FjdHVhbGVzIiwibyIsIm5vZGVFeGlzdHMiLCJub2RlRHJhZ2dhYmxlIiwiZHJhZ2dhYmxlIiwiaGF5TGluZWFzIiwic29tZSIsImRyYWdnYWJsZUJlZm9yZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiX3NraXBJbmRpdmlkdWFsRW5kIiwiU2V0IiwiX3NraXBVbnRpbCIsImRvY3VtZW50IiwiYm9keSIsInN0eWxlIiwiY3Vyc29yIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiaG92ZXJDb3VudEFmdGVyR2xvYmFsU3RhcnQiLCJsZWFkZXIiLCJob3ZlckNvdW50UmFmIiwiZXNMaWRlciIsIm9iamV0b1R5cGUiLCJlcnIiLCJlcnJvciIsInlBYnNJbmkiLCJpZHgiLCJfc2VjY2lvbmVzT3JkZW5hZGFzIiwiZmluZEluZGV4IiwicyIsInNlY2Npb25JZCIsIm9mZnNldFkiLCJzbGljZSIsInJlZHVjZSIsInN1bSIsImFsdHVyYSIsIm9iaklkIiwiaXNEcmFnZ2luZyIsInNraXBJbmRpdmlkdWFsRW5kU2l6ZSIsInNpemUiLCJza2lwVW50aWwiLCJkcmFnU3RhcnRQb3MiLCJwcmV2aWV3RHJhZ0dydXBhbCIsIm9uQ2hhbmdlIiwiZGVsdGFEYXRhIiwiZW5kRHJhZ0dydXBhbCIsImhhc0RyYWdnZWQiLCJzZXRJc0RyYWdnaW5nIiwiZWxlbWVudG9zR3J1cG8iLCJudWV2YVgiLCJudWV2YVkiLCJkZWx0YSIsIm51ZXZhUG9zIiwibnVldmFTZWNjaW9uIiwic2V0QXR0ciIsImNhbWJpb3MiLCJmaW5hbGl6b0RyYWciLCJjYXVzYSIsInBlcmZvcm1hbmNlIiwibm93IiwiZWxOb2RlIiwic2V0VGltZW91dCIsImJlZm9yZSIsImFmdGVyIiwiY3VycmVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/drag/dragGrupal.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/drag/dragIndividual.js":
/*!************************************!*\
  !*** ./src/drag/dragIndividual.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   endDragIndividual: () => (/* binding */ endDragIndividual),\n/* harmony export */   previewDragIndividual: () => (/* binding */ previewDragIndividual),\n/* harmony export */   startDragIndividual: () => (/* binding */ startDragIndividual)\n/* harmony export */ });\n// C:\\Reservaeldia\\src\\drag\\dragIndividual.js\nif (!window.__DEBUG_DRAG) window.__DEBUG_DRAG = false; // poné true en consola cuando quieras\nfunction startDragIndividual(e, dragStartPos) {\n    dragStartPos.current = e.target.getStage().getPointerPosition();\n    if (window.__DEBUG_DRAG) {\n        const t = e.target;\n        console.log('[DIAG] startDrag', {\n            class: t?.getClassName?.(),\n            id: t?.id?.(),\n            x: t?.x?.(),\n            y: t?.y?.()\n        });\n    }\n    try {\n        document.body.style.cursor = \"grabbing\";\n    } catch  {}\n}\nfunction previewDragIndividual(e, obj, onDragMovePersonalizado) {\n    const node = e.currentTarget || e.target; // ✅ priorizar contenedor\n    if (node?.position) {\n        const nuevaPos = node.position();\n        if (window.__DEBUG_DRAG) {\n            console.log('[DIAG] dragMove', {\n                id: obj?.id,\n                class: node.getClassName?.(),\n                local: {\n                    x: nuevaPos.x,\n                    y: nuevaPos.y\n                },\n                abs: node.absolutePosition?.()\n            });\n        }\n        if (onDragMovePersonalizado) onDragMovePersonalizado(nuevaPos, obj.id);\n    }\n}\nfunction endDragIndividual(obj, node, onChange, onDragEndPersonalizado, hasDragged) {\n    try {\n        document.body.style.cursor = \"default\";\n    } catch  {}\n    if (node?.getAttr && node.getAttr(\"_muteNextEnd\")) {\n        try {\n            node.setAttr(\"_muteNextEnd\", false);\n        } catch  {}\n        if (onDragEndPersonalizado) onDragEndPersonalizado();\n        setTimeout(()=>{\n            hasDragged.current = false;\n        }, 30);\n        return;\n    }\n    const ahora = typeof performance !== \"undefined\" && performance.now ? performance.now() : Date.now();\n    if (window._skipIndividualEnd && window._skipIndividualEnd.has(obj.id) && (!window._skipUntil || ahora <= window._skipUntil)) {\n        try {\n            window._skipIndividualEnd.delete(obj.id);\n        } catch  {}\n        if (onDragEndPersonalizado) onDragEndPersonalizado();\n        setTimeout(()=>{\n            hasDragged.current = false;\n        }, 30);\n        return;\n    }\n    if (window.__DEBUG_DRAG) {\n        console.log('[DIAG] endDrag -> onChange', {\n            id: obj?.id,\n            class: node?.getClassName?.(),\n            finalPosLocal: {\n                x: node?.x?.(),\n                y: node?.y?.()\n            },\n            finalAbs: node?.absolutePosition?.()\n        });\n    }\n    onChange(obj.id, {\n        x: node.x(),\n        y: node.y(),\n        finalizoDrag: true,\n        causa: \"drag-individual\"\n    });\n    if (onDragEndPersonalizado) onDragEndPersonalizado();\n    setTimeout(()=>{\n        hasDragged.current = false;\n    }, 30);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9kcmFnL2RyYWdJbmRpdmlkdWFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDZDQUE2QztBQUc3QyxJQUFJLENBQUNBLE9BQU9DLFlBQVksRUFBRUQsT0FBT0MsWUFBWSxHQUFHLE9BQU8sc0NBQXNDO0FBR3RGLFNBQVNDLG9CQUFvQkMsQ0FBQyxFQUFFQyxZQUFZO0lBQ2pEQSxhQUFhQyxPQUFPLEdBQUdGLEVBQUVHLE1BQU0sQ0FBQ0MsUUFBUSxHQUFHQyxrQkFBa0I7SUFDN0QsSUFBSVIsT0FBT0MsWUFBWSxFQUFFO1FBQ3ZCLE1BQU1RLElBQUlOLEVBQUVHLE1BQU07UUFDbEJJLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0I7WUFDOUJDLE9BQU9ILEdBQUdJO1lBQ1ZDLElBQUlMLEdBQUdLO1lBQ1BDLEdBQUdOLEdBQUdNO1lBQ05DLEdBQUdQLEdBQUdPO1FBQ1I7SUFDRjtJQUNBLElBQUk7UUFBRUMsU0FBU0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE1BQU0sR0FBRztJQUFZLEVBQUUsT0FBTSxDQUFDO0FBQzFEO0FBRU8sU0FBU0Msc0JBQXNCbEIsQ0FBQyxFQUFFbUIsR0FBRyxFQUFFQyx1QkFBdUI7SUFDbkUsTUFBTUMsT0FBT3JCLEVBQUVzQixhQUFhLElBQUl0QixFQUFFRyxNQUFNLEVBQUUseUJBQXlCO0lBQ25FLElBQUlrQixNQUFNRSxVQUFVO1FBQ2xCLE1BQU1DLFdBQVdILEtBQUtFLFFBQVE7UUFDOUIsSUFBSTFCLE9BQU9DLFlBQVksRUFBRTtZQUN2QlMsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQjtnQkFDN0JHLElBQUlRLEtBQUtSO2dCQUFJRixPQUFPWSxLQUFLWCxZQUFZO2dCQUNyQ2UsT0FBTztvQkFBRWIsR0FBR1ksU0FBU1osQ0FBQztvQkFBRUMsR0FBR1csU0FBU1gsQ0FBQztnQkFBQztnQkFDdENhLEtBQUtMLEtBQUtNLGdCQUFnQjtZQUM1QjtRQUNGO1FBQ0EsSUFBSVAseUJBQXlCQSx3QkFBd0JJLFVBQVVMLElBQUlSLEVBQUU7SUFDdkU7QUFDRjtBQUVPLFNBQVNpQixrQkFBa0JULEdBQUcsRUFBRUUsSUFBSSxFQUFFUSxRQUFRLEVBQUVDLHNCQUFzQixFQUFFQyxVQUFVO0lBQ3ZGLElBQUk7UUFBRWpCLFNBQVNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxNQUFNLEdBQUc7SUFBVyxFQUFFLE9BQU0sQ0FBQztJQUN2RCxJQUFJSSxNQUFNVyxXQUFXWCxLQUFLVyxPQUFPLENBQUMsaUJBQWlCO1FBQ2pELElBQUk7WUFBRVgsS0FBS1ksT0FBTyxDQUFDLGdCQUFnQjtRQUFRLEVBQUUsT0FBTSxDQUFDO1FBQ3BELElBQUlILHdCQUF3QkE7UUFDNUJJLFdBQVc7WUFBUUgsV0FBVzdCLE9BQU8sR0FBRztRQUFPLEdBQUc7UUFDbEQ7SUFDRjtJQUNBLE1BQU1pQyxRQUFRLE9BQU9DLGdCQUFnQixlQUFlQSxZQUFZQyxHQUFHLEdBQUdELFlBQVlDLEdBQUcsS0FBS0MsS0FBS0QsR0FBRztJQUNsRyxJQUNFeEMsT0FBTzBDLGtCQUFrQixJQUN6QjFDLE9BQU8wQyxrQkFBa0IsQ0FBQ0MsR0FBRyxDQUFDckIsSUFBSVIsRUFBRSxLQUNuQyxFQUFDZCxPQUFPNEMsVUFBVSxJQUFJTixTQUFTdEMsT0FBTzRDLFVBQVUsR0FDakQ7UUFDQSxJQUFJO1lBQUU1QyxPQUFPMEMsa0JBQWtCLENBQUNHLE1BQU0sQ0FBQ3ZCLElBQUlSLEVBQUU7UUFBRyxFQUFFLE9BQU0sQ0FBQztRQUN6RCxJQUFJbUIsd0JBQXdCQTtRQUM1QkksV0FBVztZQUFRSCxXQUFXN0IsT0FBTyxHQUFHO1FBQU8sR0FBRztRQUNsRDtJQUNGO0lBRUEsSUFBSUwsT0FBT0MsWUFBWSxFQUFFO1FBQ3ZCUyxRQUFRQyxHQUFHLENBQUMsOEJBQThCO1lBQ3hDRyxJQUFJUSxLQUFLUjtZQUFJRixPQUFPWSxNQUFNWDtZQUMxQmlDLGVBQWU7Z0JBQUUvQixHQUFHUyxNQUFNVDtnQkFBT0MsR0FBR1EsTUFBTVI7WUFBTTtZQUNoRCtCLFVBQVV2QixNQUFNTTtRQUNsQjtJQUNGO0lBQ0FFLFNBQVNWLElBQUlSLEVBQUUsRUFBRTtRQUNmQyxHQUFHUyxLQUFLVCxDQUFDO1FBQ1RDLEdBQUdRLEtBQUtSLENBQUM7UUFDVGdDLGNBQWM7UUFDZEMsT0FBTztJQUNUO0lBQ0EsSUFBSWhCLHdCQUF3QkE7SUFDNUJJLFdBQVc7UUFBUUgsV0FBVzdCLE9BQU8sR0FBRztJQUFPLEdBQUc7QUFDcEQiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcZHJhZ1xcZHJhZ0luZGl2aWR1YWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxkcmFnXFxkcmFnSW5kaXZpZHVhbC5qc1xyXG5cclxuXHJcbmlmICghd2luZG93Ll9fREVCVUdfRFJBRykgd2luZG93Ll9fREVCVUdfRFJBRyA9IGZhbHNlOyAvLyBwb27DqSB0cnVlIGVuIGNvbnNvbGEgY3VhbmRvIHF1aWVyYXNcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RhcnREcmFnSW5kaXZpZHVhbChlLCBkcmFnU3RhcnRQb3MpIHtcclxuICBkcmFnU3RhcnRQb3MuY3VycmVudCA9IGUudGFyZ2V0LmdldFN0YWdlKCkuZ2V0UG9pbnRlclBvc2l0aW9uKCk7XHJcbiAgaWYgKHdpbmRvdy5fX0RFQlVHX0RSQUcpIHtcclxuICAgIGNvbnN0IHQgPSBlLnRhcmdldDtcclxuICAgIGNvbnNvbGUubG9nKCdbRElBR10gc3RhcnREcmFnJywge1xyXG4gICAgICBjbGFzczogdD8uZ2V0Q2xhc3NOYW1lPy4oKSxcclxuICAgICAgaWQ6IHQ/LmlkPy4oKSxcclxuICAgICAgeDogdD8ueD8uKCksXHJcbiAgICAgIHk6IHQ/Lnk/LigpXHJcbiAgICB9KTtcclxuICB9XHJcbiAgdHJ5IHsgZG9jdW1lbnQuYm9keS5zdHlsZS5jdXJzb3IgPSBcImdyYWJiaW5nXCI7IH0gY2F0Y2gge31cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXZpZXdEcmFnSW5kaXZpZHVhbChlLCBvYmosIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvKSB7XHJcbiAgY29uc3Qgbm9kZSA9IGUuY3VycmVudFRhcmdldCB8fCBlLnRhcmdldDsgLy8g4pyFIHByaW9yaXphciBjb250ZW5lZG9yXHJcbiAgaWYgKG5vZGU/LnBvc2l0aW9uKSB7XHJcbiAgICBjb25zdCBudWV2YVBvcyA9IG5vZGUucG9zaXRpb24oKTtcclxuICAgIGlmICh3aW5kb3cuX19ERUJVR19EUkFHKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbRElBR10gZHJhZ01vdmUnLCB7XHJcbiAgICAgICAgaWQ6IG9iaj8uaWQsIGNsYXNzOiBub2RlLmdldENsYXNzTmFtZT8uKCksXHJcbiAgICAgICAgbG9jYWw6IHsgeDogbnVldmFQb3MueCwgeTogbnVldmFQb3MueSB9LFxyXG4gICAgICAgIGFiczogbm9kZS5hYnNvbHV0ZVBvc2l0aW9uPy4oKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChvbkRyYWdNb3ZlUGVyc29uYWxpemFkbykgb25EcmFnTW92ZVBlcnNvbmFsaXphZG8obnVldmFQb3MsIG9iai5pZCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5kRHJhZ0luZGl2aWR1YWwob2JqLCBub2RlLCBvbkNoYW5nZSwgb25EcmFnRW5kUGVyc29uYWxpemFkbywgaGFzRHJhZ2dlZCkge1xyXG4gIHRyeSB7IGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7IH0gY2F0Y2gge31cclxuICBpZiAobm9kZT8uZ2V0QXR0ciAmJiBub2RlLmdldEF0dHIoXCJfbXV0ZU5leHRFbmRcIikpIHtcclxuICAgIHRyeSB7IG5vZGUuc2V0QXR0cihcIl9tdXRlTmV4dEVuZFwiLCBmYWxzZSk7IH0gY2F0Y2gge31cclxuICAgIGlmIChvbkRyYWdFbmRQZXJzb25hbGl6YWRvKSBvbkRyYWdFbmRQZXJzb25hbGl6YWRvKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7IH0sIDMwKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc3QgYWhvcmEgPSB0eXBlb2YgcGVyZm9ybWFuY2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcGVyZm9ybWFuY2Uubm93ID8gcGVyZm9ybWFuY2Uubm93KCkgOiBEYXRlLm5vdygpO1xyXG4gIGlmIChcclxuICAgIHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQgJiZcclxuICAgIHdpbmRvdy5fc2tpcEluZGl2aWR1YWxFbmQuaGFzKG9iai5pZCkgJiZcclxuICAgICghd2luZG93Ll9za2lwVW50aWwgfHwgYWhvcmEgPD0gd2luZG93Ll9za2lwVW50aWwpXHJcbiAgKSB7XHJcbiAgICB0cnkgeyB3aW5kb3cuX3NraXBJbmRpdmlkdWFsRW5kLmRlbGV0ZShvYmouaWQpOyB9IGNhdGNoIHt9XHJcbiAgICBpZiAob25EcmFnRW5kUGVyc29uYWxpemFkbykgb25EcmFnRW5kUGVyc29uYWxpemFkbygpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGhhc0RyYWdnZWQuY3VycmVudCA9IGZhbHNlOyB9LCAzMCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAod2luZG93Ll9fREVCVUdfRFJBRykge1xyXG4gICAgY29uc29sZS5sb2coJ1tESUFHXSBlbmREcmFnIC0+IG9uQ2hhbmdlJywge1xyXG4gICAgICBpZDogb2JqPy5pZCwgY2xhc3M6IG5vZGU/LmdldENsYXNzTmFtZT8uKCksXHJcbiAgICAgIGZpbmFsUG9zTG9jYWw6IHsgeDogbm9kZT8ueD8uKCksIHk6IG5vZGU/Lnk/LigpIH0sXHJcbiAgICAgIGZpbmFsQWJzOiBub2RlPy5hYnNvbHV0ZVBvc2l0aW9uPy4oKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIG9uQ2hhbmdlKG9iai5pZCwge1xyXG4gICAgeDogbm9kZS54KCksXHJcbiAgICB5OiBub2RlLnkoKSxcclxuICAgIGZpbmFsaXpvRHJhZzogdHJ1ZSxcclxuICAgIGNhdXNhOiBcImRyYWctaW5kaXZpZHVhbFwiXHJcbiAgfSk7XHJcbiAgaWYgKG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8pIG9uRHJhZ0VuZFBlcnNvbmFsaXphZG8oKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHsgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7IH0sIDMwKTtcclxufSJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJfX0RFQlVHX0RSQUciLCJzdGFydERyYWdJbmRpdmlkdWFsIiwiZSIsImRyYWdTdGFydFBvcyIsImN1cnJlbnQiLCJ0YXJnZXQiLCJnZXRTdGFnZSIsImdldFBvaW50ZXJQb3NpdGlvbiIsInQiLCJjb25zb2xlIiwibG9nIiwiY2xhc3MiLCJnZXRDbGFzc05hbWUiLCJpZCIsIngiLCJ5IiwiZG9jdW1lbnQiLCJib2R5Iiwic3R5bGUiLCJjdXJzb3IiLCJwcmV2aWV3RHJhZ0luZGl2aWR1YWwiLCJvYmoiLCJvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyIsIm5vZGUiLCJjdXJyZW50VGFyZ2V0IiwicG9zaXRpb24iLCJudWV2YVBvcyIsImxvY2FsIiwiYWJzIiwiYWJzb2x1dGVQb3NpdGlvbiIsImVuZERyYWdJbmRpdmlkdWFsIiwib25DaGFuZ2UiLCJvbkRyYWdFbmRQZXJzb25hbGl6YWRvIiwiaGFzRHJhZ2dlZCIsImdldEF0dHIiLCJzZXRBdHRyIiwic2V0VGltZW91dCIsImFob3JhIiwicGVyZm9ybWFuY2UiLCJub3ciLCJEYXRlIiwiX3NraXBJbmRpdmlkdWFsRW5kIiwiaGFzIiwiX3NraXBVbnRpbCIsImRlbGV0ZSIsImZpbmFsUG9zTG9jYWwiLCJmaW5hbEFicyIsImZpbmFsaXpvRHJhZyIsImNhdXNhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/drag/dragIndividual.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useEditorHandlers.js":
/*!****************************************!*\
  !*** ./src/hooks/useEditorHandlers.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useEditorHandlers)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var _utils_editorActions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/editorActions */ \"(pages-dir-node)/./src/utils/editorActions.js\");\n\n\nfunction useEditorHandlers({ objetos, setObjetos, elementosSeleccionados, setElementosSeleccionados, historial, setHistorial, futuros, setFuturos, setSecciones, ignoreNextUpdateRef, setMostrarPanelZ }) {\n    const onDeshacer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onDeshacer]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.ejecutarDeshacer)({\n                historial,\n                setHistorial,\n                setObjetos,\n                setSecciones,\n                setFuturos,\n                ignoreNextUpdateRef,\n                setElementosSeleccionados,\n                setMostrarPanelZ\n            })\n    }[\"useEditorHandlers.useCallback[onDeshacer]\"], [\n        historial,\n        futuros\n    ]);\n    const onRehacer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onRehacer]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.ejecutarRehacer)({\n                futuros,\n                setFuturos,\n                setHistorial,\n                setObjetos,\n                setSecciones,\n                ignoreNextUpdateRef,\n                setElementosSeleccionados,\n                setMostrarPanelZ\n            })\n    }[\"useEditorHandlers.useCallback[onRehacer]\"], [\n        futuros\n    ]);\n    const onDuplicar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onDuplicar]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.duplicarElemento)({\n                objetos,\n                elementosSeleccionados,\n                setObjetos,\n                setElementosSeleccionados\n            })\n    }[\"useEditorHandlers.useCallback[onDuplicar]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    const onEliminar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onEliminar]\": ()=>{\n            // 🔹 Limpiar hover inmediato\n            if (false) {}\n            // 🔹 Limpiar referencias si existen en window\n            if (window._elementRefs && elementosSeleccionados.length > 0) {\n                elementosSeleccionados.forEach({\n                    \"useEditorHandlers.useCallback[onEliminar]\": (id)=>{\n                        delete window._elementRefs[id];\n                    }\n                }[\"useEditorHandlers.useCallback[onEliminar]\"]);\n            }\n            // 🔹 Ejecutar la eliminación real\n            (0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.eliminarElemento)({\n                objetos,\n                elementosSeleccionados,\n                setObjetos,\n                setElementosSeleccionados,\n                setMostrarPanelZ\n            });\n        }\n    }[\"useEditorHandlers.useCallback[onEliminar]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    const onCopiar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onCopiar]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.copiarElemento)({\n                objetos,\n                elementosSeleccionados\n            })\n    }[\"useEditorHandlers.useCallback[onCopiar]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    const onPegar = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onPegar]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.pegarElemento)({\n                objetos,\n                setObjetos,\n                setElementosSeleccionados\n            })\n    }[\"useEditorHandlers.useCallback[onPegar]\"], [\n        objetos,\n        setObjetos,\n        setElementosSeleccionados\n    ]);\n    const onCambiarAlineacion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useEditorHandlers.useCallback[onCambiarAlineacion]\": ()=>(0,_utils_editorActions__WEBPACK_IMPORTED_MODULE_1__.cambiarAlineacionTexto)({\n                objetos,\n                elementosSeleccionados,\n                setObjetos\n            })\n    }[\"useEditorHandlers.useCallback[onCambiarAlineacion]\"], [\n        objetos,\n        elementosSeleccionados\n    ]);\n    return {\n        onDeshacer,\n        onRehacer,\n        onDuplicar,\n        onEliminar,\n        onCopiar,\n        onPegar,\n        onCambiarAlineacion\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VFZGl0b3JIYW5kbGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0M7QUFTTDtBQUVoQixTQUFTUSxrQkFBa0IsRUFDeENDLE9BQU8sRUFDUEMsVUFBVSxFQUNWQyxzQkFBc0IsRUFDdEJDLHlCQUF5QixFQUN6QkMsU0FBUyxFQUNUQyxZQUFZLEVBQ1pDLE9BQU8sRUFDUEMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLG1CQUFtQixFQUNuQkMsZ0JBQWdCLEVBQ2pCO0lBQ0MsTUFBTUMsYUFBYXBCLGtEQUFXQTtxREFBQyxJQUFNQyxzRUFBZ0JBLENBQUM7Z0JBQ3BEWTtnQkFDQUM7Z0JBQ0FKO2dCQUNBTztnQkFDQUQ7Z0JBQ0FFO2dCQUNBTjtnQkFDQU87WUFDRjtvREFBSTtRQUFDTjtRQUFXRTtLQUFRO0lBRXhCLE1BQU1NLFlBQVlyQixrREFBV0E7b0RBQUMsSUFBTUUscUVBQWVBLENBQUM7Z0JBQ2xEYTtnQkFDQUM7Z0JBQ0FGO2dCQUNBSjtnQkFDQU87Z0JBQ0FDO2dCQUNBTjtnQkFDQU87WUFDRjttREFBSTtRQUFDSjtLQUFRO0lBRWIsTUFBTU8sYUFBYXRCLGtEQUFXQTtxREFBQyxJQUFNRyxzRUFBZ0JBLENBQUM7Z0JBQ3BETTtnQkFDQUU7Z0JBQ0FEO2dCQUNBRTtZQUNGO29EQUFJO1FBQUNIO1FBQVNFO0tBQXVCO0lBRXZDLE1BQU1ZLGFBQWF2QixrREFBV0E7cURBQUM7WUFDN0IsNkJBQTZCO1lBQzdCLElBQUksS0FBd0QsRUFBRSxFQUU3RDtZQUVELDhDQUE4QztZQUM5QyxJQUFJd0IsT0FBT0UsWUFBWSxJQUFJZix1QkFBdUJnQixNQUFNLEdBQUcsR0FBRztnQkFDNURoQix1QkFBdUJpQixPQUFPO2lFQUFDQyxDQUFBQTt3QkFDN0IsT0FBT0wsT0FBT0UsWUFBWSxDQUFDRyxHQUFHO29CQUNoQzs7WUFDRjtZQUVBLGtDQUFrQztZQUNsQ3pCLHNFQUFnQkEsQ0FBQztnQkFDZks7Z0JBQ0FFO2dCQUNBRDtnQkFDQUU7Z0JBQ0FPO1lBQ0Y7UUFDRjtvREFBRztRQUFDVjtRQUFTRTtLQUF1QjtJQUdsQyxNQUFNbUIsV0FBVzlCLGtEQUFXQTttREFBQyxJQUFNSyxvRUFBY0EsQ0FBQztnQkFDaERJO2dCQUNBRTtZQUNGO2tEQUFJO1FBQUNGO1FBQVNFO0tBQXVCO0lBRXJDLE1BQU1vQixVQUFVL0Isa0RBQVdBO2tEQUFDLElBQU1NLG1FQUFhQSxDQUFDO2dCQUM5Q0c7Z0JBQ0FDO2dCQUNBRTtZQUNGO2lEQUFJO1FBQUNIO1FBQVNDO1FBQVlFO0tBQTBCO0lBRXBELE1BQU1vQixzQkFBc0JoQyxrREFBV0E7OERBQUMsSUFBTU8sNEVBQXNCQSxDQUFDO2dCQUNuRUU7Z0JBQ0FFO2dCQUNBRDtZQUNGOzZEQUFJO1FBQUNEO1FBQVNFO0tBQXVCO0lBRXJDLE9BQU87UUFDTFM7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQU87UUFDQUM7UUFDQUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGhvb2tzXFx1c2VFZGl0b3JIYW5kbGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtcclxuICBlamVjdXRhckRlc2hhY2VyLFxyXG4gIGVqZWN1dGFyUmVoYWNlcixcclxuICBkdXBsaWNhckVsZW1lbnRvLFxyXG4gIGVsaW1pbmFyRWxlbWVudG8sXHJcbiAgY29waWFyRWxlbWVudG8sXHJcbiAgcGVnYXJFbGVtZW50byxcclxuICBjYW1iaWFyQWxpbmVhY2lvblRleHRvXHJcbn0gZnJvbSAnQC91dGlscy9lZGl0b3JBY3Rpb25zJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUVkaXRvckhhbmRsZXJzKHtcclxuICBvYmpldG9zLFxyXG4gIHNldE9iamV0b3MsXHJcbiAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gIGhpc3RvcmlhbCxcclxuICBzZXRIaXN0b3JpYWwsXHJcbiAgZnV0dXJvcyxcclxuICBzZXRGdXR1cm9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxyXG4gIHNldE1vc3RyYXJQYW5lbFpcclxufSkge1xyXG4gIGNvbnN0IG9uRGVzaGFjZXIgPSB1c2VDYWxsYmFjaygoKSA9PiBlamVjdXRhckRlc2hhY2VyKHtcclxuICAgIGhpc3RvcmlhbCxcclxuICAgIHNldEhpc3RvcmlhbCxcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZXRTZWNjaW9uZXMsXHJcbiAgICBzZXRGdXR1cm9zLFxyXG4gICAgaWdub3JlTmV4dFVwZGF0ZVJlZixcclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaXHJcbiAgfSksIFtoaXN0b3JpYWwsIGZ1dHVyb3NdKTtcclxuXHJcbiAgY29uc3Qgb25SZWhhY2VyID0gdXNlQ2FsbGJhY2soKCkgPT4gZWplY3V0YXJSZWhhY2VyKHtcclxuICAgIGZ1dHVyb3MsXHJcbiAgICBzZXRGdXR1cm9zLFxyXG4gICAgc2V0SGlzdG9yaWFsLFxyXG4gICAgc2V0T2JqZXRvcyxcclxuICAgIHNldFNlY2Npb25lcyxcclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYsXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgc2V0TW9zdHJhclBhbmVsWlxyXG4gIH0pLCBbZnV0dXJvc10pO1xyXG5cclxuICBjb25zdCBvbkR1cGxpY2FyID0gdXNlQ2FsbGJhY2soKCkgPT4gZHVwbGljYXJFbGVtZW50byh7XHJcbiAgICBvYmpldG9zLFxyXG4gICAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcclxuICAgIHNldE9iamV0b3MsXHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zXHJcbiAgfSksIFtvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zXSk7XHJcblxyXG5jb25zdCBvbkVsaW1pbmFyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gIC8vIPCflLkgTGltcGlhciBob3ZlciBpbm1lZGlhdG9cclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnNldEhvdmVySWRHbG9iYWwpIHtcclxuICAgIHdpbmRvdy5zZXRIb3ZlcklkR2xvYmFsKG51bGwpO1xyXG4gIH1cclxuXHJcbiAgLy8g8J+UuSBMaW1waWFyIHJlZmVyZW5jaWFzIHNpIGV4aXN0ZW4gZW4gd2luZG93XHJcbiAgaWYgKHdpbmRvdy5fZWxlbWVudFJlZnMgJiYgZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5sZW5ndGggPiAwKSB7XHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICBkZWxldGUgd2luZG93Ll9lbGVtZW50UmVmc1tpZF07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIPCflLkgRWplY3V0YXIgbGEgZWxpbWluYWNpw7NuIHJlYWxcclxuICBlbGltaW5hckVsZW1lbnRvKHtcclxuICAgIG9iamV0b3MsXHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgc2V0T2JqZXRvcyxcclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaXHJcbiAgfSk7XHJcbn0sIFtvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zXSk7XHJcblxyXG5cclxuICBjb25zdCBvbkNvcGlhciA9IHVzZUNhbGxiYWNrKCgpID0+IGNvcGlhckVsZW1lbnRvKHtcclxuICAgIG9iamV0b3MsXHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zXHJcbiAgfSksIFtvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zXSk7XHJcblxyXG4gIGNvbnN0IG9uUGVnYXIgPSB1c2VDYWxsYmFjaygoKSA9PiBwZWdhckVsZW1lbnRvKHtcbiAgICBvYmpldG9zLFxuICAgIHNldE9iamV0b3MsXG4gICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvc1xuICB9KSwgW29iamV0b3MsIHNldE9iamV0b3MsIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3NdKTtcblxyXG4gIGNvbnN0IG9uQ2FtYmlhckFsaW5lYWNpb24gPSB1c2VDYWxsYmFjaygoKSA9PiBjYW1iaWFyQWxpbmVhY2lvblRleHRvKHtcclxuICAgIG9iamV0b3MsXHJcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLFxyXG4gICAgc2V0T2JqZXRvc1xyXG4gIH0pLCBbb2JqZXRvcywgZWxlbWVudG9zU2VsZWNjaW9uYWRvc10pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgb25EZXNoYWNlcixcclxuICAgIG9uUmVoYWNlcixcclxuICAgIG9uRHVwbGljYXIsXHJcbiAgICBvbkVsaW1pbmFyLFxyXG4gICAgb25Db3BpYXIsXHJcbiAgICBvblBlZ2FyLFxyXG4gICAgb25DYW1iaWFyQWxpbmVhY2lvblxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwiZWplY3V0YXJEZXNoYWNlciIsImVqZWN1dGFyUmVoYWNlciIsImR1cGxpY2FyRWxlbWVudG8iLCJlbGltaW5hckVsZW1lbnRvIiwiY29waWFyRWxlbWVudG8iLCJwZWdhckVsZW1lbnRvIiwiY2FtYmlhckFsaW5lYWNpb25UZXh0byIsInVzZUVkaXRvckhhbmRsZXJzIiwib2JqZXRvcyIsInNldE9iamV0b3MiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyIsImhpc3RvcmlhbCIsInNldEhpc3RvcmlhbCIsImZ1dHVyb3MiLCJzZXRGdXR1cm9zIiwic2V0U2VjY2lvbmVzIiwiaWdub3JlTmV4dFVwZGF0ZVJlZiIsInNldE1vc3RyYXJQYW5lbFoiLCJvbkRlc2hhY2VyIiwib25SZWhhY2VyIiwib25EdXBsaWNhciIsIm9uRWxpbWluYXIiLCJ3aW5kb3ciLCJzZXRIb3ZlcklkR2xvYmFsIiwiX2VsZW1lbnRSZWZzIiwibGVuZ3RoIiwiZm9yRWFjaCIsImlkIiwib25Db3BpYXIiLCJvblBlZ2FyIiwib25DYW1iaWFyQWxpbmVhY2lvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useEditorHandlers.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useGuiasCentrado.js":
/*!***************************************!*\
  !*** ./src/hooks/useGuiasCentrado.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useGuiasCentrado)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// hooks/useGuiasCentrado.js\n\n/**\n * Guías con:\n * - Sección: muestra CX/CY solo cuando el elemento quedó centrado.\n * - Elementos: SOLO misma sección, líneas punteadas tipo \"reach\" hasta el otro elemento.\n * - Nada de otras secciones.\n */ function useGuiasCentrado({ anchoCanvas = 800, altoCanvas = 800, magnetRadius = 16, elementMagnetRadius = null, sectionMagnetRadius = null, sectionShowRadius = 18, sectionPriorityBias = 4, snapStrength = 1, sectionSnapStrength = null, elementSnapStrength = null, sectionLineTolerance = 0.75, seccionesOrdenadas = [] }) {\n    const [guiaLineas, setGuiaLineas] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const effElementMagnetRadius = elementMagnetRadius ?? magnetRadius;\n    const effSectionMagnetRadius = sectionMagnetRadius ?? magnetRadius;\n    const effSectionSnapStrength = sectionSnapStrength ?? snapStrength;\n    const effElementSnapStrength = elementSnapStrength ?? snapStrength;\n    // ---- Utilidades de secciones ----\n    const calcularOffsetSeccion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[calcularOffsetSeccion]\": (seccionId)=>{\n            let offsetY = 0;\n            for (const s of seccionesOrdenadas){\n                if (s.id === seccionId) break;\n                offsetY += s.altura;\n            }\n            return offsetY;\n        }\n    }[\"useGuiasCentrado.useCallback[calcularOffsetSeccion]\"], [\n        seccionesOrdenadas\n    ]);\n    const obtenerSeccionElemento = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[obtenerSeccionElemento]\": (objId, objetos)=>{\n            const obj = objetos.find({\n                \"useGuiasCentrado.useCallback[obtenerSeccionElemento].obj\": (o)=>o.id === objId\n            }[\"useGuiasCentrado.useCallback[obtenerSeccionElemento].obj\"]);\n            if (!obj?.seccionId) return null;\n            return seccionesOrdenadas.find({\n                \"useGuiasCentrado.useCallback[obtenerSeccionElemento]\": (s)=>s.id === obj.seccionId\n            }[\"useGuiasCentrado.useCallback[obtenerSeccionElemento]\"]) || null;\n        }\n    }[\"useGuiasCentrado.useCallback[obtenerSeccionElemento]\"], [\n        seccionesOrdenadas\n    ]);\n    // ---- Segmentos \"reach\" entre cajas (va hasta el otro elemento) ----\n    const reachVertical = (x, selfBox, otherBox, gap = 6)=>{\n        const selfCy = selfBox.y + selfBox.height / 2;\n        const otherCy = otherBox.y + otherBox.height / 2;\n        let y1, y2;\n        if (otherCy <= selfCy) {\n            y1 = otherBox.y + otherBox.height + gap; // desde borde inferior del otro\n            y2 = selfBox.y - gap; // hasta borde superior del self\n        } else {\n            y1 = selfBox.y + selfBox.height + gap;\n            y2 = otherBox.y - gap;\n        }\n        return [\n            x,\n            y1,\n            x,\n            y2\n        ];\n    };\n    const reachHorizontal = (y, selfBox, otherBox, gap = 6)=>{\n        const selfCx = selfBox.x + selfBox.width / 2;\n        const otherCx = otherBox.x + otherBox.width / 2;\n        let x1, x2;\n        if (otherCx <= selfCx) {\n            x1 = otherBox.x + otherBox.width + gap; // desde borde derecho del otro\n            x2 = selfBox.x - gap; // hasta borde izquierdo del self\n        } else {\n            x1 = selfBox.x + selfBox.width + gap;\n            x2 = otherBox.x - gap;\n        }\n        return [\n            x1,\n            y,\n            x2,\n            y\n        ];\n    };\n    // ---- Delta para alinear a la guía más cercana ----\n    const deltaForGuide = (axis, guideValue, box)=>{\n        if (axis === \"x\") {\n            const center = box.x + box.width / 2;\n            const left = box.x;\n            const right = box.x + box.width;\n            const opts = [\n                {\n                    dist: Math.abs(center - guideValue),\n                    delta: guideValue - center\n                },\n                {\n                    dist: Math.abs(left - guideValue),\n                    delta: guideValue - left\n                },\n                {\n                    dist: Math.abs(right - guideValue),\n                    delta: guideValue - right\n                }\n            ].sort((a, b)=>a.dist - b.dist)[0];\n            return opts.delta;\n        } else {\n            const center = box.y + box.height / 2;\n            const top = box.y;\n            const bottom = box.y + box.height;\n            const opts = [\n                {\n                    dist: Math.abs(center - guideValue),\n                    delta: guideValue - center\n                },\n                {\n                    dist: Math.abs(top - guideValue),\n                    delta: guideValue - top\n                },\n                {\n                    dist: Math.abs(bottom - guideValue),\n                    delta: guideValue - bottom\n                }\n            ].sort((a, b)=>a.dist - b.dist)[0];\n            return opts.delta;\n        }\n    };\n    // Misma heurística que deltaForGuide, pero devuelve distancia mínima\n    const distForGuide = (axis, guideValue, box)=>{\n        if (axis === \"x\") {\n            const center = box.x + box.width / 2;\n            const left = box.x;\n            const right = box.x + box.width;\n            return Math.min(Math.abs(center - guideValue), Math.abs(left - guideValue), Math.abs(right - guideValue));\n        }\n        const center = box.y + box.height / 2;\n        const top = box.y;\n        const bottom = box.y + box.height;\n        return Math.min(Math.abs(center - guideValue), Math.abs(top - guideValue), Math.abs(bottom - guideValue));\n    };\n    // ---- Candidatos de la MISMA sección (centros + bordes) ----\n    const getNodeBox = (node, stage, obj = null)=>{\n        if (!node || !stage || typeof node.getClientRect !== \"function\") return null;\n        const rectOpts = {\n            relativeTo: stage\n        };\n        if (obj?.tipo === \"galeria\" && Number.isFinite(Number(obj?.width)) && Number.isFinite(Number(obj?.height))) {\n            const xFromNode = typeof node.x === \"function\" ? node.x() : null;\n            const yFromNode = typeof node.y === \"function\" ? node.y() : null;\n            const absPos = typeof node.getAbsolutePosition === \"function\" ? node.getAbsolutePosition(stage) : null;\n            const x = Number.isFinite(xFromNode) ? xFromNode : Number.isFinite(absPos?.x) ? absPos.x : typeof node.x === \"function\" ? node.x() : 0;\n            const y = Number.isFinite(yFromNode) ? yFromNode : Number.isFinite(absPos?.y) ? absPos.y : typeof node.y === \"function\" ? node.y() : 0;\n            return {\n                x,\n                y,\n                width: Number(obj.width),\n                height: Number(obj.height)\n            };\n        }\n        // La galeria usa overlays por celda; medir su frame base evita offsets falsos.\n        if (obj?.tipo === \"galeria\" && typeof node.findOne === \"function\") {\n            const galleryFrame = node.findOne(\".gallery-transform-frame\");\n            if (galleryFrame && typeof galleryFrame.getClientRect === \"function\") {\n                try {\n                    return galleryFrame.getClientRect({\n                        relativeTo: stage,\n                        skipShadow: true,\n                        skipStroke: true\n                    });\n                } catch  {\n                // fallback al rect completo\n                }\n            }\n        }\n        try {\n            return node.getClientRect(rectOpts);\n        } catch  {\n            return null;\n        }\n    };\n    const buildSameSectionGuides = (node, stage, objetos, elementRefs, idSelf, seccionId, objById)=>{\n        const selfObj = objById.get(idSelf) || null;\n        const selfBox = getNodeBox(node, stage, selfObj);\n        if (!selfBox) return [];\n        const candidates = objetos.filter((o)=>o.id !== idSelf && o.seccionId === seccionId) // 🔒 MISMA SECCIÓN\n        .map((o)=>{\n            const n = elementRefs.current?.[o.id];\n            if (!n) return null;\n            try {\n                const b = getNodeBox(n, stage, objById.get(o.id) || null);\n                if (!b) return null;\n                const d = Math.abs(selfBox.x + selfBox.width / 2 - (b.x + b.width / 2)) + Math.abs(selfBox.y + selfBox.height / 2 - (b.y + b.height / 2));\n                return {\n                    box: b,\n                    d\n                };\n            } catch  {\n                return null;\n            }\n        }).filter(Boolean).sort((a, b)=>a.d - b.d).slice(0, 3); // pocos vecinos → menos ruido\n        const g = [];\n        for (const { box } of candidates){\n            const cx = box.x + box.width / 2;\n            const cy = box.y + box.height / 2;\n            const left = box.x;\n            const right = box.x + box.width;\n            const top = box.y;\n            const bottom = box.y + box.height;\n            // Centros\n            g.push({\n                axis: \"x\",\n                value: cx,\n                type: \"el-cx\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"y\",\n                value: cy,\n                type: \"el-cy\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            // Bordes\n            g.push({\n                axis: \"x\",\n                value: left,\n                type: \"el-left\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"x\",\n                value: right,\n                type: \"el-right\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"y\",\n                value: top,\n                type: \"el-top\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n            g.push({\n                axis: \"y\",\n                value: bottom,\n                type: \"el-bottom\",\n                targetBox: box,\n                priority: \"elemento\",\n                style: \"dashed\"\n            });\n        }\n        return g;\n    };\n    const getUnionBox = (ids, stage, elementRefs, objById)=>{\n        if (!Array.isArray(ids) || ids.length === 0) return null;\n        let minX = Number.POSITIVE_INFINITY;\n        let minY = Number.POSITIVE_INFINITY;\n        let maxX = Number.NEGATIVE_INFINITY;\n        let maxY = Number.NEGATIVE_INFINITY;\n        ids.forEach((id)=>{\n            const n = elementRefs.current?.[id];\n            if (!n) return;\n            const b = getNodeBox(n, stage, objById.get(id) || null);\n            if (!b) return;\n            minX = Math.min(minX, b.x);\n            minY = Math.min(minY, b.y);\n            maxX = Math.max(maxX, b.x + b.width);\n            maxY = Math.max(maxY, b.y + b.height);\n        });\n        if (!Number.isFinite(minX) || !Number.isFinite(minY) || !Number.isFinite(maxX) || !Number.isFinite(maxY)) {\n            return null;\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: Math.max(0, maxX - minX),\n            height: Math.max(0, maxY - minY)\n        };\n    };\n    const shiftNodes = (ids, axis, delta, elementRefs)=>{\n        if (!Array.isArray(ids) || ids.length === 0 || !Number.isFinite(delta)) return;\n        if (Math.abs(delta) < 0.0001) return;\n        const shiftSingle = (node)=>{\n            if (!node) return;\n            try {\n                if (axis === \"x\") {\n                    node.x(node.x() + delta);\n                } else {\n                    node.y(node.y() + delta);\n                }\n            } catch  {\n            // silencioso para no cortar drag\n            }\n        };\n        ids.forEach((id)=>{\n            const n = elementRefs.current?.[id];\n            shiftSingle(n);\n            // Algunas formas (rect/rsvp) renderizan el texto como nodo separado.\n            shiftSingle(elementRefs.current?.[`${id}-text`]);\n        });\n    };\n    // ---- Mostrar guías durante el drag ----\n    const mostrarGuias = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[mostrarGuias]\": (pos, idActual, objetos, elementRefs)=>{\n            const node = elementRefs.current?.[idActual];\n            if (!node) return;\n            const stage = node.getStage?.();\n            if (!stage) return;\n            try {\n                const objById = new Map(objetos.map({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (o)=>[\n                            o.id,\n                            o\n                        ]\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]));\n                const objActual = objById.get(idActual) || null;\n                const isGroupLeader = window._grupoLider && idActual === window._grupoLider;\n                const rawGroupIds = Array.isArray(window._grupoElementos) && window._grupoElementos.length > 1 ? window._grupoElementos : Array.isArray(window._elementosSeleccionados) ? window._elementosSeleccionados : [];\n                const groupIds = isGroupLeader ? [\n                    ...new Set(rawGroupIds.filter(Boolean))\n                ] : [];\n                const isGroupDrag = isGroupLeader && groupIds.length > 1;\n                const selfBoxBefore = isGroupDrag ? getUnionBox(groupIds, stage, elementRefs, objById) : getNodeBox(node, stage, objActual);\n                if (!selfBoxBefore) return;\n                const selfCx = selfBoxBefore.x + selfBoxBefore.width / 2;\n                const selfCy = selfBoxBefore.y + selfBoxBefore.height / 2;\n                const seccion = obtenerSeccionElemento(idActual, objetos);\n                if (!seccion) {\n                    setGuiaLineas([]);\n                    return;\n                }\n                const offY = calcularOffsetSeccion(seccion.id);\n                const secCx = anchoCanvas / 2;\n                const secCy = offY + seccion.altura / 2;\n                const lines = [];\n                // 1) SECCIÓN: el snap evalúa el centro de la sección.\n                const distSecX = Math.abs(selfCx - secCx);\n                const distSecY = Math.abs(selfCy - secCy);\n                // 2) ELEMENTOS (MISMA SECCIÓN): elegir mejor candidato por eje\n                const elementGuides = isGroupDrag ? [] : buildSameSectionGuides(node, stage, objetos, elementRefs, idActual, seccion.id, objById);\n                const bestElX = isGroupDrag ? null : elementGuides.filter({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>g.axis === \"x\"\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).map({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>({\n                            g,\n                            dist: distForGuide(\"x\", g.value, selfBoxBefore)\n                        })\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).sort({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (a, b)=>a.dist - b.dist\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"])[0];\n                const bestElY = isGroupDrag ? null : elementGuides.filter({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>g.axis === \"y\"\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).map({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (g)=>({\n                            g,\n                            dist: distForGuide(\"y\", g.value, selfBoxBefore)\n                        })\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"]).sort({\n                    \"useGuiasCentrado.useCallback[mostrarGuias]\": (a, b)=>a.dist - b.dist\n                }[\"useGuiasCentrado.useCallback[mostrarGuias]\"])[0];\n                // Decidir qué guía “gana” por eje (sección vs elemento)\n                const decidirSnap = {\n                    \"useGuiasCentrado.useCallback[mostrarGuias].decidirSnap\": (secDistCenter, bestEl)=>{\n                        const secOk = secDistCenter <= effSectionMagnetRadius;\n                        const elOk = !!bestEl && bestEl.dist <= effElementMagnetRadius;\n                        if (!secOk && !elOk) return null;\n                        if (secOk && !elOk) return {\n                            source: \"seccion\"\n                        };\n                        if (!secOk && elOk) return {\n                            source: \"elemento\",\n                            near: bestEl\n                        };\n                        // ambos aplican: la sección tiene ventaja (bias)\n                        const elBeatsSection = bestEl.dist + sectionPriorityBias < secDistCenter;\n                        return elBeatsSection ? {\n                            source: \"elemento\",\n                            near: bestEl\n                        } : {\n                            source: \"seccion\"\n                        };\n                    }\n                }[\"useGuiasCentrado.useCallback[mostrarGuias].decidirSnap\"];\n                const decisionX = decidirSnap(distSecX, bestElX);\n                const decisionY = decidirSnap(distSecY, bestElY);\n                const applySnap = {\n                    \"useGuiasCentrado.useCallback[mostrarGuias].applySnap\": (axis, decision)=>{\n                        if (!decision) return {\n                            snapped: false\n                        };\n                        const fresh = isGroupDrag ? getUnionBox(groupIds, stage, elementRefs, objById) : getNodeBox(node, stage, objActual);\n                        if (!fresh) return {\n                            snapped: false\n                        };\n                        if (decision.source === \"seccion\") {\n                            const nextCenter = axis === \"x\" ? fresh.x + fresh.width / 2 : fresh.y + fresh.height / 2;\n                            const targetCenter = axis === \"x\" ? secCx : secCy;\n                            const delta = (targetCenter - nextCenter) * effSectionSnapStrength;\n                            if (axis === \"x\") {\n                                if (isGroupDrag) shiftNodes(groupIds, \"x\", delta, elementRefs);\n                                else node.x(node.x() + delta);\n                            } else {\n                                if (isGroupDrag) shiftNodes(groupIds, \"y\", delta, elementRefs);\n                                else node.y(node.y() + delta);\n                            }\n                            return {\n                                snapped: true,\n                                source: \"seccion\"\n                            };\n                        }\n                        if (isGroupDrag) return {\n                            snapped: false\n                        };\n                        const delta = deltaForGuide(axis, decision.near.g.value, fresh);\n                        if (axis === \"x\") node.x(node.x() + delta * effElementSnapStrength);\n                        else node.y(node.y() + delta * effElementSnapStrength);\n                        return {\n                            snapped: true,\n                            source: \"elemento\",\n                            near: decision.near\n                        };\n                    }\n                }[\"useGuiasCentrado.useCallback[mostrarGuias].applySnap\"];\n                const snapResX = applySnap(\"x\", decisionX);\n                const snapResY = applySnap(\"y\", decisionY);\n                // Recalcular box luego del snap para dibujar reach exacta\n                const selfBoxAfter = isGroupDrag ? getUnionBox(groupIds, stage, elementRefs, objById) : getNodeBox(node, stage, objActual);\n                if (!selfBoxAfter) return;\n                const selfCxAfter = selfBoxAfter.x + selfBoxAfter.width / 2;\n                const selfCyAfter = selfBoxAfter.y + selfBoxAfter.height / 2;\n                // 2) SECCIÓN: mostrar guía SOLO cuando quedó efectivamente alineado.\n                if (snapResX.snapped && snapResX.source === \"seccion\" && Math.abs(selfCxAfter - secCx) <= sectionLineTolerance) {\n                    lines.push({\n                        type: \"seccion-cx\",\n                        priority: \"seccion\",\n                        style: \"solid\",\n                        points: [\n                            secCx,\n                            offY,\n                            secCx,\n                            offY + seccion.altura\n                        ]\n                    });\n                }\n                if (snapResY.snapped && snapResY.source === \"seccion\" && Math.abs(selfCyAfter - secCy) <= sectionLineTolerance) {\n                    lines.push({\n                        type: \"seccion-cy\",\n                        priority: \"seccion\",\n                        style: \"solid\",\n                        points: [\n                            0,\n                            secCy,\n                            anchoCanvas,\n                            secCy\n                        ]\n                    });\n                }\n                if (!isGroupDrag && snapResX.snapped && snapResX.source === \"elemento\" && snapResX.near?.g?.targetBox) {\n                    lines.push({\n                        type: \"reach-x\",\n                        priority: \"elemento\",\n                        style: \"dashed\",\n                        points: reachVertical(snapResX.near.g.value, selfBoxAfter, snapResX.near.g.targetBox)\n                    });\n                }\n                if (!isGroupDrag && snapResY.snapped && snapResY.source === \"elemento\" && snapResY.near?.g?.targetBox) {\n                    lines.push({\n                        type: \"reach-y\",\n                        priority: \"elemento\",\n                        style: \"dashed\",\n                        points: reachHorizontal(snapResY.near.g.value, selfBoxAfter, snapResY.near.g.targetBox)\n                    });\n                }\n                setGuiaLineas(lines);\n            } catch (e) {\n            // silencioso para no cortar el drag\n            }\n        }\n    }[\"useGuiasCentrado.useCallback[mostrarGuias]\"], [\n        anchoCanvas,\n        altoCanvas,\n        magnetRadius,\n        sectionShowRadius,\n        snapStrength,\n        seccionesOrdenadas,\n        obtenerSeccionElemento,\n        calcularOffsetSeccion,\n        elementMagnetRadius,\n        sectionMagnetRadius,\n        sectionPriorityBias,\n        sectionSnapStrength,\n        elementSnapStrength,\n        sectionLineTolerance\n    ]);\n    const limpiarGuias = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[limpiarGuias]\": ()=>setGuiaLineas([])\n    }[\"useGuiasCentrado.useCallback[limpiarGuias]\"], []);\n    const configurarDragEnd = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGuiasCentrado.useCallback[configurarDragEnd]\": ()=>setGuiaLineas([])\n    }[\"useGuiasCentrado.useCallback[configurarDragEnd]\"], []);\n    return {\n        guiaLineas,\n        mostrarGuias,\n        limpiarGuias,\n        configurarDragEnd\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VHdWlhc0NlbnRyYWRvLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNEJBQTRCO0FBQ2tCO0FBRTlDOzs7OztDQUtDLEdBQ2MsU0FBU0UsaUJBQWlCLEVBQ3JDQyxjQUFjLEdBQUcsRUFDakJDLGFBQWEsR0FBRyxFQUNoQkMsZUFBZSxFQUFFLEVBQ2pCQyxzQkFBc0IsSUFBSSxFQUMxQkMsc0JBQXNCLElBQUksRUFDMUJDLG9CQUFvQixFQUFFLEVBQ3RCQyxzQkFBc0IsQ0FBQyxFQUN2QkMsZUFBZSxDQUFDLEVBQ2hCQyxzQkFBc0IsSUFBSSxFQUMxQkMsc0JBQXNCLElBQUksRUFDMUJDLHVCQUF1QixJQUFJLEVBQzNCQyxxQkFBcUIsRUFBRSxFQUMxQjtJQUNHLE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHaEIsK0NBQVFBLENBQUMsRUFBRTtJQUcvQyxNQUFNaUIseUJBQXlCWCx1QkFBdUJEO0lBQ3RELE1BQU1hLHlCQUF5QlgsdUJBQXVCRjtJQUN0RCxNQUFNYyx5QkFBeUJSLHVCQUF1QkQ7SUFDdEQsTUFBTVUseUJBQXlCUix1QkFBdUJGO0lBR3RELG9DQUFvQztJQUNwQyxNQUFNVyx3QkFBd0JwQixrREFBV0E7K0RBQUMsQ0FBQ3FCO1lBQ3ZDLElBQUlDLFVBQVU7WUFDZCxLQUFLLE1BQU1DLEtBQUtWLG1CQUFvQjtnQkFDaEMsSUFBSVUsRUFBRUMsRUFBRSxLQUFLSCxXQUFXO2dCQUN4QkMsV0FBV0MsRUFBRUUsTUFBTTtZQUN2QjtZQUNBLE9BQU9IO1FBQ1g7OERBQUc7UUFBQ1Q7S0FBbUI7SUFFdkIsTUFBTWEseUJBQXlCMUIsa0RBQVdBO2dFQUFDLENBQUMyQixPQUFPQztZQUMvQyxNQUFNQyxNQUFNRCxRQUFRRSxJQUFJOzRFQUFDQyxDQUFBQSxJQUFLQSxFQUFFUCxFQUFFLEtBQUtHOztZQUN2QyxJQUFJLENBQUNFLEtBQUtSLFdBQVcsT0FBTztZQUM1QixPQUFPUixtQkFBbUJpQixJQUFJ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QUFHTSxXQUFXO29CQUNuR3NDLE1BQU16QyxJQUFJLENBQUM7d0JBQ1BFLE1BQU07d0JBQ05FLFVBQVU7d0JBQ1ZDLE9BQU87d0JBQ1ArRCxRQUFRL0gsZ0JBQWdCMkgsU0FBU1gsSUFBSSxDQUFDeEQsQ0FBQyxDQUFDSSxLQUFLLEVBQUVnRSxjQUFjRCxTQUFTWCxJQUFJLENBQUN4RCxDQUFDLENBQUNNLFNBQVM7b0JBQzFGO2dCQUNKO2dCQUdBMUYsY0FBY2dJO1lBQ2xCLEVBQUUsT0FBTzRCLEdBQUc7WUFDUixvQ0FBb0M7WUFDeEM7UUFDSjtxREFBRztRQUNDeks7UUFBYUM7UUFDYkM7UUFBY0c7UUFBbUJFO1FBQ2pDSTtRQUNBYTtRQUF3Qk47UUFDeEJmO1FBQXFCQztRQUFxQkU7UUFDMUNFO1FBQXFCQztRQUFxQkM7S0FDN0M7SUFFRCxNQUFNZ0ssZUFBZTVLLGtEQUFXQTtzREFBQyxJQUFNZSxjQUFjLEVBQUU7cURBQUcsRUFBRTtJQUM1RCxNQUFNOEosb0JBQW9CN0ssa0RBQVdBOzJEQUFDLElBQU1lLGNBQWMsRUFBRTswREFBRyxFQUFFO0lBRWpFLE9BQU87UUFDSEQ7UUFDQTZHO1FBQ0FpRDtRQUNBQztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcaG9va3NcXHVzZUd1aWFzQ2VudHJhZG8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaG9va3MvdXNlR3VpYXNDZW50cmFkby5qc1xyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcblxyXG4vKipcbiAqIEd1w61hcyBjb246XG4gKiAtIFNlY2Npw7NuOiBtdWVzdHJhIENYL0NZIHNvbG8gY3VhbmRvIGVsIGVsZW1lbnRvIHF1ZWTDsyBjZW50cmFkby5cbiAqIC0gRWxlbWVudG9zOiBTT0xPIG1pc21hIHNlY2Npw7NuLCBsw61uZWFzIHB1bnRlYWRhcyB0aXBvIFwicmVhY2hcIiBoYXN0YSBlbCBvdHJvIGVsZW1lbnRvLlxuICogLSBOYWRhIGRlIG90cmFzIHNlY2Npb25lcy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlR3VpYXNDZW50cmFkbyh7XG4gICAgYW5jaG9DYW52YXMgPSA4MDAsXG4gICAgYWx0b0NhbnZhcyA9IDgwMCxcbiAgICBtYWduZXRSYWRpdXMgPSAxNiwgICAgICAgLy8gZGlzdGFuY2lhIHBhcmEgYWN0aXZhciBlbCBzbmFwXG4gICAgZWxlbWVudE1hZ25ldFJhZGl1cyA9IG51bGwsICAgLy8gbnVsbCA9PiBtYWduZXRSYWRpdXNcbiAgICBzZWN0aW9uTWFnbmV0UmFkaXVzID0gbnVsbCwgICAvLyBudWxsID0+IG1hZ25ldFJhZGl1c1xuICAgIHNlY3Rpb25TaG93UmFkaXVzID0gMTgsICAvLyBsZWdhZG8gKG5vIHVzYWRvIHBhcmEgbW9zdHJhciBsw61uZWFzIGRlIHNlY2Npw7NuKVxuICAgIHNlY3Rpb25Qcmlvcml0eUJpYXMgPSA0LCAgICAgIC8vIHZlbnRhamEgZXh0cmEgcGFyYSBxdWUgZ2FuZSBzZWNjacOzbiB2cyBlbGVtZW50b3NcbiAgICBzbmFwU3RyZW5ndGggPSAxLCAgICAgICAgLy8gMSA9IHBlZ2FkbyBleGFjdG87IDAuNC0wLjYgPSB0cmFjY2nDs24gc3VhdmVcbiAgICBzZWN0aW9uU25hcFN0cmVuZ3RoID0gbnVsbCwgICAvLyBudWxsID0+IHNuYXBTdHJlbmd0aFxuICAgIGVsZW1lbnRTbmFwU3RyZW5ndGggPSBudWxsLCAgIC8vIG51bGwgPT4gc25hcFN0cmVuZ3RoXG4gICAgc2VjdGlvbkxpbmVUb2xlcmFuY2UgPSAwLjc1LCAgLy8gc29sbyBtb3N0cmFyIGd1w61hIGRlIHNlY2Npw7NuIGN1YW5kbyBlc3TDoSByZWFsbWVudGUgY2VudHJhZG9cbiAgICBzZWNjaW9uZXNPcmRlbmFkYXMgPSBbXVxufSkge1xuICAgIGNvbnN0IFtndWlhTGluZWFzLCBzZXRHdWlhTGluZWFzXSA9IHVzZVN0YXRlKFtdKTtcblxyXG5cclxuICAgIGNvbnN0IGVmZkVsZW1lbnRNYWduZXRSYWRpdXMgPSBlbGVtZW50TWFnbmV0UmFkaXVzID8/IG1hZ25ldFJhZGl1cztcbiAgICBjb25zdCBlZmZTZWN0aW9uTWFnbmV0UmFkaXVzID0gc2VjdGlvbk1hZ25ldFJhZGl1cyA/PyBtYWduZXRSYWRpdXM7XG4gICAgY29uc3QgZWZmU2VjdGlvblNuYXBTdHJlbmd0aCA9IHNlY3Rpb25TbmFwU3RyZW5ndGggPz8gc25hcFN0cmVuZ3RoO1xuICAgIGNvbnN0IGVmZkVsZW1lbnRTbmFwU3RyZW5ndGggPSBlbGVtZW50U25hcFN0cmVuZ3RoID8/IHNuYXBTdHJlbmd0aDtcblxyXG5cclxuICAgIC8vIC0tLS0gVXRpbGlkYWRlcyBkZSBzZWNjaW9uZXMgLS0tLVxyXG4gICAgY29uc3QgY2FsY3VsYXJPZmZzZXRTZWNjaW9uID0gdXNlQ2FsbGJhY2soKHNlY2Npb25JZCkgPT4ge1xyXG4gICAgICAgIGxldCBvZmZzZXRZID0gMDtcclxuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc2VjY2lvbmVzT3JkZW5hZGFzKSB7XHJcbiAgICAgICAgICAgIGlmIChzLmlkID09PSBzZWNjaW9uSWQpIGJyZWFrO1xyXG4gICAgICAgICAgICBvZmZzZXRZICs9IHMuYWx0dXJhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2Zmc2V0WTtcclxuICAgIH0sIFtzZWNjaW9uZXNPcmRlbmFkYXNdKTtcclxuXHJcbiAgICBjb25zdCBvYnRlbmVyU2VjY2lvbkVsZW1lbnRvID0gdXNlQ2FsbGJhY2soKG9iaklkLCBvYmpldG9zKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gb2JqZXRvcy5maW5kKG8gPT4gby5pZCA9PT0gb2JqSWQpO1xyXG4gICAgICAgIGlmICghb2JqPy5zZWNjaW9uSWQpIHJldHVybiBudWxsO1xyXG4gICAgICAgIHJldHVybiBzZWNjaW9uZXNPcmRlbmFkYXMuZmluZChzID0+IHMuaWQgPT09IG9iai5zZWNjaW9uSWQpIHx8IG51bGw7XHJcbiAgICB9LCBbc2VjY2lvbmVzT3JkZW5hZGFzXSk7XHJcblxyXG4gICAgLy8gLS0tLSBTZWdtZW50b3MgXCJyZWFjaFwiIGVudHJlIGNhamFzICh2YSBoYXN0YSBlbCBvdHJvIGVsZW1lbnRvKSAtLS0tXHJcbiAgICBjb25zdCByZWFjaFZlcnRpY2FsID0gKHgsIHNlbGZCb3gsIG90aGVyQm94LCBnYXAgPSA2KSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VsZkN5ID0gc2VsZkJveC55ICsgc2VsZkJveC5oZWlnaHQgLyAyO1xyXG4gICAgICAgIGNvbnN0IG90aGVyQ3kgPSBvdGhlckJveC55ICsgb3RoZXJCb3guaGVpZ2h0IC8gMjtcclxuICAgICAgICBsZXQgeTEsIHkyO1xyXG4gICAgICAgIGlmIChvdGhlckN5IDw9IHNlbGZDeSkge1xyXG4gICAgICAgICAgICB5MSA9IG90aGVyQm94LnkgKyBvdGhlckJveC5oZWlnaHQgKyBnYXA7IC8vIGRlc2RlIGJvcmRlIGluZmVyaW9yIGRlbCBvdHJvXHJcbiAgICAgICAgICAgIHkyID0gc2VsZkJveC55IC0gZ2FwOyAgICAgICAgICAgICAgICAgICAgIC8vIGhhc3RhIGJvcmRlIHN1cGVyaW9yIGRlbCBzZWxmXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeTEgPSBzZWxmQm94LnkgKyBzZWxmQm94LmhlaWdodCArIGdhcDtcclxuICAgICAgICAgICAgeTIgPSBvdGhlckJveC55IC0gZ2FwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3gsIHkxLCB4LCB5Ml07XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlYWNoSG9yaXpvbnRhbCA9ICh5LCBzZWxmQm94LCBvdGhlckJveCwgZ2FwID0gNikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNlbGZDeCA9IHNlbGZCb3gueCArIHNlbGZCb3gud2lkdGggLyAyO1xyXG4gICAgICAgIGNvbnN0IG90aGVyQ3ggPSBvdGhlckJveC54ICsgb3RoZXJCb3gud2lkdGggLyAyO1xyXG4gICAgICAgIGxldCB4MSwgeDI7XHJcbiAgICAgICAgaWYgKG90aGVyQ3ggPD0gc2VsZkN4KSB7XHJcbiAgICAgICAgICAgIHgxID0gb3RoZXJCb3gueCArIG90aGVyQm94LndpZHRoICsgZ2FwOyAvLyBkZXNkZSBib3JkZSBkZXJlY2hvIGRlbCBvdHJvXHJcbiAgICAgICAgICAgIHgyID0gc2VsZkJveC54IC0gZ2FwOyAgICAgICAgICAgICAgICAgICAgLy8gaGFzdGEgYm9yZGUgaXpxdWllcmRvIGRlbCBzZWxmXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgeDEgPSBzZWxmQm94LnggKyBzZWxmQm94LndpZHRoICsgZ2FwO1xyXG4gICAgICAgICAgICB4MiA9IG90aGVyQm94LnggLSBnYXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbeDEsIHksIHgyLCB5XTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLSBEZWx0YSBwYXJhIGFsaW5lYXIgYSBsYSBndcOtYSBtw6FzIGNlcmNhbmEgLS0tLVxyXG4gICAgY29uc3QgZGVsdGFGb3JHdWlkZSA9IChheGlzLCBndWlkZVZhbHVlLCBib3gpID0+IHtcclxuICAgICAgICBpZiAoYXhpcyA9PT0gXCJ4XCIpIHtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gYm94LnggKyBib3gud2lkdGggLyAyO1xyXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gYm94Lng7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYm94LnggKyBib3gud2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdHMgPSBbXHJcbiAgICAgICAgICAgICAgICB7IGRpc3Q6IE1hdGguYWJzKGNlbnRlciAtIGd1aWRlVmFsdWUpLCBkZWx0YTogZ3VpZGVWYWx1ZSAtIGNlbnRlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBkaXN0OiBNYXRoLmFicyhsZWZ0IC0gZ3VpZGVWYWx1ZSksIGRlbHRhOiBndWlkZVZhbHVlIC0gbGVmdCB9LFxyXG4gICAgICAgICAgICAgICAgeyBkaXN0OiBNYXRoLmFicyhyaWdodCAtIGd1aWRlVmFsdWUpLCBkZWx0YTogZ3VpZGVWYWx1ZSAtIHJpZ2h0IH0sXHJcbiAgICAgICAgICAgIF0uc29ydCgoYSwgYikgPT4gYS5kaXN0IC0gYi5kaXN0KVswXTtcclxuICAgICAgICAgICAgcmV0dXJuIG9wdHMuZGVsdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gYm94LnkgKyBib3guaGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgY29uc3QgdG9wID0gYm94Lnk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvdHRvbSA9IGJveC55ICsgYm94LmhlaWdodDtcclxuICAgICAgICAgICAgY29uc3Qgb3B0cyA9IFtcclxuICAgICAgICAgICAgICAgIHsgZGlzdDogTWF0aC5hYnMoY2VudGVyIC0gZ3VpZGVWYWx1ZSksIGRlbHRhOiBndWlkZVZhbHVlIC0gY2VudGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IGRpc3Q6IE1hdGguYWJzKHRvcCAtIGd1aWRlVmFsdWUpLCBkZWx0YTogZ3VpZGVWYWx1ZSAtIHRvcCB9LFxyXG4gICAgICAgICAgICAgICAgeyBkaXN0OiBNYXRoLmFicyhib3R0b20gLSBndWlkZVZhbHVlKSwgZGVsdGE6IGd1aWRlVmFsdWUgLSBib3R0b20gfSxcclxuICAgICAgICAgICAgXS5zb3J0KChhLCBiKSA9PiBhLmRpc3QgLSBiLmRpc3QpWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gb3B0cy5kZWx0YTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIE1pc21hIGhldXLDrXN0aWNhIHF1ZSBkZWx0YUZvckd1aWRlLCBwZXJvIGRldnVlbHZlIGRpc3RhbmNpYSBtw61uaW1hXHJcbiAgICBjb25zdCBkaXN0Rm9yR3VpZGUgPSAoYXhpcywgZ3VpZGVWYWx1ZSwgYm94KSA9PiB7XHJcbiAgICAgICAgaWYgKGF4aXMgPT09IFwieFwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC54ICsgYm94LndpZHRoIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgbGVmdCA9IGJveC54O1xyXG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGJveC54ICsgYm94LndpZHRoO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyhjZW50ZXIgLSBndWlkZVZhbHVlKSxcclxuICAgICAgICAgICAgICAgIE1hdGguYWJzKGxlZnQgLSBndWlkZVZhbHVlKSxcclxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHJpZ2h0IC0gZ3VpZGVWYWx1ZSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gYm94LnkgKyBib3guaGVpZ2h0IC8gMjtcclxuICAgICAgICBjb25zdCB0b3AgPSBib3gueTtcclxuICAgICAgICBjb25zdCBib3R0b20gPSBib3gueSArIGJveC5oZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKFxyXG4gICAgICAgICAgICBNYXRoLmFicyhjZW50ZXIgLSBndWlkZVZhbHVlKSxcclxuICAgICAgICAgICAgTWF0aC5hYnModG9wIC0gZ3VpZGVWYWx1ZSksXHJcbiAgICAgICAgICAgIE1hdGguYWJzKGJvdHRvbSAtIGd1aWRlVmFsdWUpXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLSBDYW5kaWRhdG9zIGRlIGxhIE1JU01BIHNlY2Npw7NuIChjZW50cm9zICsgYm9yZGVzKSAtLS0tXHJcbiAgICBjb25zdCBnZXROb2RlQm94ID0gKG5vZGUsIHN0YWdlLCBvYmogPSBudWxsKSA9PiB7XG4gICAgICAgIGlmICghbm9kZSB8fCAhc3RhZ2UgfHwgdHlwZW9mIG5vZGUuZ2V0Q2xpZW50UmVjdCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBjb25zdCByZWN0T3B0cyA9IHsgcmVsYXRpdmVUbzogc3RhZ2UgfTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBvYmo/LnRpcG8gPT09IFwiZ2FsZXJpYVwiICYmXG4gICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoTnVtYmVyKG9iaj8ud2lkdGgpKSAmJlxuICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKE51bWJlcihvYmo/LmhlaWdodCkpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgeEZyb21Ob2RlID0gdHlwZW9mIG5vZGUueCA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS54KCkgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgeUZyb21Ob2RlID0gdHlwZW9mIG5vZGUueSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS55KCkgOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgYWJzUG9zID1cbiAgICAgICAgICAgICAgICB0eXBlb2Ygbm9kZS5nZXRBYnNvbHV0ZVBvc2l0aW9uID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgPyBub2RlLmdldEFic29sdXRlUG9zaXRpb24oc3RhZ2UpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHggPVxuICAgICAgICAgICAgICAgIE51bWJlci5pc0Zpbml0ZSh4RnJvbU5vZGUpXG4gICAgICAgICAgICAgICAgICAgID8geEZyb21Ob2RlXG4gICAgICAgICAgICAgICAgICAgIDogTnVtYmVyLmlzRmluaXRlKGFic1Bvcz8ueClcbiAgICAgICAgICAgICAgICAgICAgPyBhYnNQb3MueFxuICAgICAgICAgICAgICAgICAgICA6ICh0eXBlb2Ygbm9kZS54ID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLngoKSA6IDApO1xuICAgICAgICAgICAgY29uc3QgeSA9XG4gICAgICAgICAgICAgICAgTnVtYmVyLmlzRmluaXRlKHlGcm9tTm9kZSlcbiAgICAgICAgICAgICAgICAgICAgPyB5RnJvbU5vZGVcbiAgICAgICAgICAgICAgICAgICAgOiBOdW1iZXIuaXNGaW5pdGUoYWJzUG9zPy55KVxuICAgICAgICAgICAgICAgICAgICA/IGFic1Bvcy55XG4gICAgICAgICAgICAgICAgICAgIDogKHR5cGVvZiBub2RlLnkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGUueSgpIDogMCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICB5LFxuICAgICAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIob2JqLndpZHRoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IE51bWJlcihvYmouaGVpZ2h0KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMYSBnYWxlcmlhIHVzYSBvdmVybGF5cyBwb3IgY2VsZGE7IG1lZGlyIHN1IGZyYW1lIGJhc2UgZXZpdGEgb2Zmc2V0cyBmYWxzb3MuXG4gICAgICAgIGlmIChvYmo/LnRpcG8gPT09IFwiZ2FsZXJpYVwiICYmIHR5cGVvZiBub2RlLmZpbmRPbmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY29uc3QgZ2FsbGVyeUZyYW1lID0gbm9kZS5maW5kT25lKFwiLmdhbGxlcnktdHJhbnNmb3JtLWZyYW1lXCIpO1xuICAgICAgICAgICAgaWYgKGdhbGxlcnlGcmFtZSAmJiB0eXBlb2YgZ2FsbGVyeUZyYW1lLmdldENsaWVudFJlY3QgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnYWxsZXJ5RnJhbWUuZ2V0Q2xpZW50UmVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZVRvOiBzdGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBTaGFkb3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwU3Ryb2tlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFsbGJhY2sgYWwgcmVjdCBjb21wbGV0b1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5nZXRDbGllbnRSZWN0KHJlY3RPcHRzKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBidWlsZFNhbWVTZWN0aW9uR3VpZGVzID0gKG5vZGUsIHN0YWdlLCBvYmpldG9zLCBlbGVtZW50UmVmcywgaWRTZWxmLCBzZWNjaW9uSWQsIG9iakJ5SWQpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZk9iaiA9IG9iakJ5SWQuZ2V0KGlkU2VsZikgfHwgbnVsbDtcbiAgICAgICAgY29uc3Qgc2VsZkJveCA9IGdldE5vZGVCb3gobm9kZSwgc3RhZ2UsIHNlbGZPYmopO1xuICAgICAgICBpZiAoIXNlbGZCb3gpIHJldHVybiBbXTtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IG9iamV0b3NcclxuICAgICAgICAgICAgLmZpbHRlcihvID0+IG8uaWQgIT09IGlkU2VsZiAmJiBvLnNlY2Npb25JZCA9PT0gc2VjY2lvbklkKSAvLyDwn5SSIE1JU01BIFNFQ0NJw5NOXHJcbiAgICAgICAgICAgIC5tYXAobyA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZWxlbWVudFJlZnMuY3VycmVudD8uW28uaWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IGdldE5vZGVCb3gobiwgc3RhZ2UsIG9iakJ5SWQuZ2V0KG8uaWQpIHx8IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWIpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkID0gTWF0aC5hYnMoKHNlbGZCb3gueCArIHNlbGZCb3gud2lkdGggLyAyKSAtIChiLnggKyBiLndpZHRoIC8gMikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgTWF0aC5hYnMoKHNlbGZCb3gueSArIHNlbGZCb3guaGVpZ2h0IC8gMikgLSAoYi55ICsgYi5oZWlnaHQgLyAyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYm94OiBiLCBkIH07XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHsgcmV0dXJuIG51bGw7IH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kIC0gYi5kKVxyXG4gICAgICAgICAgICAuc2xpY2UoMCwgMyk7IC8vIHBvY29zIHZlY2lub3Mg4oaSIG1lbm9zIHJ1aWRvXHJcblxyXG4gICAgICAgIGNvbnN0IGcgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHsgYm94IH0gb2YgY2FuZGlkYXRlcykge1xyXG4gICAgICAgICAgICBjb25zdCBjeCA9IGJveC54ICsgYm94LndpZHRoIC8gMjtcclxuICAgICAgICAgICAgY29uc3QgY3kgPSBib3gueSArIGJveC5oZWlnaHQgLyAyO1xyXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gYm94Lng7XHJcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYm94LnggKyBib3gud2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IGJveC55O1xyXG4gICAgICAgICAgICBjb25zdCBib3R0b20gPSBib3gueSArIGJveC5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAvLyBDZW50cm9zXHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieFwiLCB2YWx1ZTogY3gsIHR5cGU6IFwiZWwtY3hcIiwgdGFyZ2V0Qm94OiBib3gsIHByaW9yaXR5OiBcImVsZW1lbnRvXCIsIHN0eWxlOiBcImRhc2hlZFwiIH0pO1xyXG4gICAgICAgICAgICBnLnB1c2goeyBheGlzOiBcInlcIiwgdmFsdWU6IGN5LCB0eXBlOiBcImVsLWN5XCIsIHRhcmdldEJveDogYm94LCBwcmlvcml0eTogXCJlbGVtZW50b1wiLCBzdHlsZTogXCJkYXNoZWRcIiB9KTtcclxuICAgICAgICAgICAgLy8gQm9yZGVzXHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieFwiLCB2YWx1ZTogbGVmdCwgdHlwZTogXCJlbC1sZWZ0XCIsIHRhcmdldEJveDogYm94LCBwcmlvcml0eTogXCJlbGVtZW50b1wiLCBzdHlsZTogXCJkYXNoZWRcIiB9KTtcclxuICAgICAgICAgICAgZy5wdXNoKHsgYXhpczogXCJ4XCIsIHZhbHVlOiByaWdodCwgdHlwZTogXCJlbC1yaWdodFwiLCB0YXJnZXRCb3g6IGJveCwgcHJpb3JpdHk6IFwiZWxlbWVudG9cIiwgc3R5bGU6IFwiZGFzaGVkXCIgfSk7XHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieVwiLCB2YWx1ZTogdG9wLCB0eXBlOiBcImVsLXRvcFwiLCB0YXJnZXRCb3g6IGJveCwgcHJpb3JpdHk6IFwiZWxlbWVudG9cIiwgc3R5bGU6IFwiZGFzaGVkXCIgfSk7XHJcbiAgICAgICAgICAgIGcucHVzaCh7IGF4aXM6IFwieVwiLCB2YWx1ZTogYm90dG9tLCB0eXBlOiBcImVsLWJvdHRvbVwiLCB0YXJnZXRCb3g6IGJveCwgcHJpb3JpdHk6IFwiZWxlbWVudG9cIiwgc3R5bGU6IFwiZGFzaGVkXCIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRVbmlvbkJveCA9IChpZHMsIHN0YWdlLCBlbGVtZW50UmVmcywgb2JqQnlJZCkgPT4ge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaWRzKSB8fCBpZHMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBsZXQgbWluWCA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgbGV0IG1pblkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIGxldCBtYXhYID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xuICAgICAgICBsZXQgbWF4WSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcblxuICAgICAgICBpZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlbGVtZW50UmVmcy5jdXJyZW50Py5baWRdO1xuICAgICAgICAgICAgaWYgKCFuKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBiID0gZ2V0Tm9kZUJveChuLCBzdGFnZSwgb2JqQnlJZC5nZXQoaWQpIHx8IG51bGwpO1xuICAgICAgICAgICAgaWYgKCFiKSByZXR1cm47XG4gICAgICAgICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgYi54KTtcbiAgICAgICAgICAgIG1pblkgPSBNYXRoLm1pbihtaW5ZLCBiLnkpO1xuICAgICAgICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIGIueCArIGIud2lkdGgpO1xuICAgICAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIGIueSArIGIuaGVpZ2h0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIU51bWJlci5pc0Zpbml0ZShtaW5YKSB8fFxuICAgICAgICAgICAgIU51bWJlci5pc0Zpbml0ZShtaW5ZKSB8fFxuICAgICAgICAgICAgIU51bWJlci5pc0Zpbml0ZShtYXhYKSB8fFxuICAgICAgICAgICAgIU51bWJlci5pc0Zpbml0ZShtYXhZKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IG1pblgsXG4gICAgICAgICAgICB5OiBtaW5ZLFxuICAgICAgICAgICAgd2lkdGg6IE1hdGgubWF4KDAsIG1heFggLSBtaW5YKSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5tYXgoMCwgbWF4WSAtIG1pblkpLFxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBjb25zdCBzaGlmdE5vZGVzID0gKGlkcywgYXhpcywgZGVsdGEsIGVsZW1lbnRSZWZzKSA9PiB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpZHMpIHx8IGlkcy5sZW5ndGggPT09IDAgfHwgIU51bWJlci5pc0Zpbml0ZShkZWx0YSkpIHJldHVybjtcbiAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhKSA8IDAuMDAwMSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHNoaWZ0U2luZ2xlID0gKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoYXhpcyA9PT0gXCJ4XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS54KG5vZGUueCgpICsgZGVsdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUueShub2RlLnkoKSArIGRlbHRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAvLyBzaWxlbmNpb3NvIHBhcmEgbm8gY29ydGFyIGRyYWdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlbGVtZW50UmVmcy5jdXJyZW50Py5baWRdO1xuICAgICAgICAgICAgc2hpZnRTaW5nbGUobik7XG4gICAgICAgICAgICAvLyBBbGd1bmFzIGZvcm1hcyAocmVjdC9yc3ZwKSByZW5kZXJpemFuIGVsIHRleHRvIGNvbW8gbm9kbyBzZXBhcmFkby5cbiAgICAgICAgICAgIHNoaWZ0U2luZ2xlKGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltgJHtpZH0tdGV4dGBdKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIC0tLS0gTW9zdHJhciBndcOtYXMgZHVyYW50ZSBlbCBkcmFnIC0tLS1cbiAgICBjb25zdCBtb3N0cmFyR3VpYXMgPSB1c2VDYWxsYmFjaygocG9zLCBpZEFjdHVhbCwgb2JqZXRvcywgZWxlbWVudFJlZnMpID0+IHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGVsZW1lbnRSZWZzLmN1cnJlbnQ/LltpZEFjdHVhbF07XG4gICAgICAgIGlmICghbm9kZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzdGFnZSA9IG5vZGUuZ2V0U3RhZ2U/LigpO1xuICAgICAgICBpZiAoIXN0YWdlKSByZXR1cm47XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9iakJ5SWQgPSBuZXcgTWFwKG9iamV0b3MubWFwKChvKSA9PiBbby5pZCwgb10pKTtcbiAgICAgICAgICAgIGNvbnN0IG9iakFjdHVhbCA9IG9iakJ5SWQuZ2V0KGlkQWN0dWFsKSB8fCBudWxsO1xuICAgICAgICAgICAgY29uc3QgaXNHcm91cExlYWRlciA9IHdpbmRvdy5fZ3J1cG9MaWRlciAmJiBpZEFjdHVhbCA9PT0gd2luZG93Ll9ncnVwb0xpZGVyO1xuICAgICAgICAgICAgY29uc3QgcmF3R3JvdXBJZHMgPSBBcnJheS5pc0FycmF5KHdpbmRvdy5fZ3J1cG9FbGVtZW50b3MpICYmIHdpbmRvdy5fZ3J1cG9FbGVtZW50b3MubGVuZ3RoID4gMVxuICAgICAgICAgICAgICAgID8gd2luZG93Ll9ncnVwb0VsZW1lbnRvc1xuICAgICAgICAgICAgICAgIDogKEFycmF5LmlzQXJyYXkod2luZG93Ll9lbGVtZW50b3NTZWxlY2Npb25hZG9zKSA/IHdpbmRvdy5fZWxlbWVudG9zU2VsZWNjaW9uYWRvcyA6IFtdKTtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwSWRzID0gaXNHcm91cExlYWRlclxuICAgICAgICAgICAgICAgID8gWy4uLm5ldyBTZXQocmF3R3JvdXBJZHMuZmlsdGVyKEJvb2xlYW4pKV1cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgY29uc3QgaXNHcm91cERyYWcgPSBpc0dyb3VwTGVhZGVyICYmIGdyb3VwSWRzLmxlbmd0aCA+IDE7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGZCb3hCZWZvcmUgPSBpc0dyb3VwRHJhZ1xuICAgICAgICAgICAgICAgID8gZ2V0VW5pb25Cb3goZ3JvdXBJZHMsIHN0YWdlLCBlbGVtZW50UmVmcywgb2JqQnlJZClcbiAgICAgICAgICAgICAgICA6IGdldE5vZGVCb3gobm9kZSwgc3RhZ2UsIG9iakFjdHVhbCk7XG4gICAgICAgICAgICBpZiAoIXNlbGZCb3hCZWZvcmUpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHNlbGZDeCA9IHNlbGZCb3hCZWZvcmUueCArIHNlbGZCb3hCZWZvcmUud2lkdGggLyAyO1xuICAgICAgICAgICAgY29uc3Qgc2VsZkN5ID0gc2VsZkJveEJlZm9yZS55ICsgc2VsZkJveEJlZm9yZS5oZWlnaHQgLyAyO1xuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY2Npb24gPSBvYnRlbmVyU2VjY2lvbkVsZW1lbnRvKGlkQWN0dWFsLCBvYmpldG9zKTtcclxuICAgICAgICAgICAgaWYgKCFzZWNjaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRHdWlhTGluZWFzKFtdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvZmZZID0gY2FsY3VsYXJPZmZzZXRTZWNjaW9uKHNlY2Npb24uaWQpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWNDeCA9IGFuY2hvQ2FudmFzIC8gMjtcclxuICAgICAgICAgICAgY29uc3Qgc2VjQ3kgPSBvZmZZICsgc2VjY2lvbi5hbHR1cmEgLyAyO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBbXTtcblxyXG4gICAgICAgICAgICAvLyAxKSBTRUNDScOTTjogZWwgc25hcCBldmFsw7phIGVsIGNlbnRybyBkZSBsYSBzZWNjacOzbi5cbiAgICAgICAgICAgIGNvbnN0IGRpc3RTZWNYID0gTWF0aC5hYnMoc2VsZkN4IC0gc2VjQ3gpO1xuICAgICAgICAgICAgY29uc3QgZGlzdFNlY1kgPSBNYXRoLmFicyhzZWxmQ3kgLSBzZWNDeSk7XG5cclxuICAgICAgICAgICAgLy8gMikgRUxFTUVOVE9TIChNSVNNQSBTRUNDScOTTik6IGVsZWdpciBtZWpvciBjYW5kaWRhdG8gcG9yIGVqZVxyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50R3VpZGVzID0gaXNHcm91cERyYWdcbiAgICAgICAgICAgICAgICA/IFtdXG4gICAgICAgICAgICAgICAgOiBidWlsZFNhbWVTZWN0aW9uR3VpZGVzKFxuICAgICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAgICBzdGFnZSxcbiAgICAgICAgICAgICAgICAgICAgb2JqZXRvcyxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFJlZnMsXG4gICAgICAgICAgICAgICAgICAgIGlkQWN0dWFsLFxuICAgICAgICAgICAgICAgICAgICBzZWNjaW9uLmlkLFxuICAgICAgICAgICAgICAgICAgICBvYmpCeUlkXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgYmVzdEVsWCA9IGlzR3JvdXBEcmFnXG4gICAgICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICAgICAgOiBlbGVtZW50R3VpZGVzXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZyA9PiBnLmF4aXMgPT09IFwieFwiKVxuICAgICAgICAgICAgICAgICAgICAubWFwKGcgPT4gKHsgZywgZGlzdDogZGlzdEZvckd1aWRlKFwieFwiLCBnLnZhbHVlLCBzZWxmQm94QmVmb3JlKSB9KSlcbiAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGlzdCAtIGIuZGlzdClbMF07XG5cbiAgICAgICAgICAgIGNvbnN0IGJlc3RFbFkgPSBpc0dyb3VwRHJhZ1xuICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgIDogZWxlbWVudEd1aWRlc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGcgPT4gZy5heGlzID09PSBcInlcIilcbiAgICAgICAgICAgICAgICAgICAgLm1hcChnID0+ICh7IGcsIGRpc3Q6IGRpc3RGb3JHdWlkZShcInlcIiwgZy52YWx1ZSwgc2VsZkJveEJlZm9yZSkgfSkpXG4gICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRpc3QgLSBiLmRpc3QpWzBdO1xuXHJcbiAgICAgICAgICAgIC8vIERlY2lkaXIgcXXDqSBndcOtYSDigJxnYW5h4oCdIHBvciBlamUgKHNlY2Npw7NuIHZzIGVsZW1lbnRvKVxyXG4gICAgICAgICAgICBjb25zdCBkZWNpZGlyU25hcCA9IChzZWNEaXN0Q2VudGVyLCBiZXN0RWwpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY09rID0gc2VjRGlzdENlbnRlciA8PSBlZmZTZWN0aW9uTWFnbmV0UmFkaXVzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxPayA9ICEhYmVzdEVsICYmIGJlc3RFbC5kaXN0IDw9IGVmZkVsZW1lbnRNYWduZXRSYWRpdXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlY09rICYmICFlbE9rKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWNPayAmJiAhZWxPaykgcmV0dXJuIHsgc291cmNlOiBcInNlY2Npb25cIiB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWNPayAmJiBlbE9rKSByZXR1cm4geyBzb3VyY2U6IFwiZWxlbWVudG9cIiwgbmVhcjogYmVzdEVsIH07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYW1ib3MgYXBsaWNhbjogbGEgc2VjY2nDs24gdGllbmUgdmVudGFqYSAoYmlhcylcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsQmVhdHNTZWN0aW9uID0gKGJlc3RFbC5kaXN0ICsgc2VjdGlvblByaW9yaXR5QmlhcykgPCBzZWNEaXN0Q2VudGVyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsQmVhdHNTZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgPyB7IHNvdXJjZTogXCJlbGVtZW50b1wiLCBuZWFyOiBiZXN0RWwgfVxyXG4gICAgICAgICAgICAgICAgICAgIDogeyBzb3VyY2U6IFwic2VjY2lvblwiIH07XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZWNpc2lvblggPSBkZWNpZGlyU25hcChkaXN0U2VjWCwgYmVzdEVsWCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY2lzaW9uWSA9IGRlY2lkaXJTbmFwKGRpc3RTZWNZLCBiZXN0RWxZKTtcclxuXHJcblxyXG4gICAgICAgICAgICBjb25zdCBhcHBseVNuYXAgPSAoYXhpcywgZGVjaXNpb24pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWRlY2lzaW9uKSByZXR1cm4geyBzbmFwcGVkOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyZXNoID0gaXNHcm91cERyYWdcbiAgICAgICAgICAgICAgICAgICAgPyBnZXRVbmlvbkJveChncm91cElkcywgc3RhZ2UsIGVsZW1lbnRSZWZzLCBvYmpCeUlkKVxuICAgICAgICAgICAgICAgICAgICA6IGdldE5vZGVCb3gobm9kZSwgc3RhZ2UsIG9iakFjdHVhbCk7XG4gICAgICAgICAgICAgICAgaWYgKCFmcmVzaCkgcmV0dXJuIHsgc25hcHBlZDogZmFsc2UgfTtcblxuICAgICAgICAgICAgICAgIGlmIChkZWNpc2lvbi5zb3VyY2UgPT09IFwic2VjY2lvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDZW50ZXIgPSBheGlzID09PSBcInhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBmcmVzaC54ICsgZnJlc2gud2lkdGggLyAyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGZyZXNoLnkgKyBmcmVzaC5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDZW50ZXIgPSBheGlzID09PSBcInhcIiA/IHNlY0N4IDogc2VjQ3k7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gKHRhcmdldENlbnRlciAtIG5leHRDZW50ZXIpICogZWZmU2VjdGlvblNuYXBTdHJlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXhpcyA9PT0gXCJ4XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0dyb3VwRHJhZykgc2hpZnROb2Rlcyhncm91cElkcywgXCJ4XCIsIGRlbHRhLCBlbGVtZW50UmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIG5vZGUueChub2RlLngoKSArIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0dyb3VwRHJhZykgc2hpZnROb2Rlcyhncm91cElkcywgXCJ5XCIsIGRlbHRhLCBlbGVtZW50UmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIG5vZGUueShub2RlLnkoKSArIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzbmFwcGVkOiB0cnVlLCBzb3VyY2U6IFwic2VjY2lvblwiIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzR3JvdXBEcmFnKSByZXR1cm4geyBzbmFwcGVkOiBmYWxzZSB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBkZWx0YUZvckd1aWRlKGF4aXMsIGRlY2lzaW9uLm5lYXIuZy52YWx1ZSwgZnJlc2gpO1xuICAgICAgICAgICAgICAgIGlmIChheGlzID09PSBcInhcIikgbm9kZS54KG5vZGUueCgpICsgZGVsdGEgKiBlZmZFbGVtZW50U25hcFN0cmVuZ3RoKTtcbiAgICAgICAgICAgICAgICBlbHNlIG5vZGUueShub2RlLnkoKSArIGRlbHRhICogZWZmRWxlbWVudFNuYXBTdHJlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc25hcHBlZDogdHJ1ZSwgc291cmNlOiBcImVsZW1lbnRvXCIsIG5lYXI6IGRlY2lzaW9uLm5lYXIgfTtcbiAgICAgICAgICAgIH07XG5cclxuICAgICAgICAgICAgY29uc3Qgc25hcFJlc1ggPSBhcHBseVNuYXAoXCJ4XCIsIGRlY2lzaW9uWCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNuYXBSZXNZID0gYXBwbHlTbmFwKFwieVwiLCBkZWNpc2lvblkpO1xuXG4gICAgICAgICAgICAvLyBSZWNhbGN1bGFyIGJveCBsdWVnbyBkZWwgc25hcCBwYXJhIGRpYnVqYXIgcmVhY2ggZXhhY3RhXG4gICAgICAgICAgICBjb25zdCBzZWxmQm94QWZ0ZXIgPSBpc0dyb3VwRHJhZ1xuICAgICAgICAgICAgICAgID8gZ2V0VW5pb25Cb3goZ3JvdXBJZHMsIHN0YWdlLCBlbGVtZW50UmVmcywgb2JqQnlJZClcbiAgICAgICAgICAgICAgICA6IGdldE5vZGVCb3gobm9kZSwgc3RhZ2UsIG9iakFjdHVhbCk7XG4gICAgICAgICAgICBpZiAoIXNlbGZCb3hBZnRlcikgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3Qgc2VsZkN4QWZ0ZXIgPSBzZWxmQm94QWZ0ZXIueCArIHNlbGZCb3hBZnRlci53aWR0aCAvIDI7XG4gICAgICAgICAgICBjb25zdCBzZWxmQ3lBZnRlciA9IHNlbGZCb3hBZnRlci55ICsgc2VsZkJveEFmdGVyLmhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgIC8vIDIpIFNFQ0NJw5NOOiBtb3N0cmFyIGd1w61hIFNPTE8gY3VhbmRvIHF1ZWTDsyBlZmVjdGl2YW1lbnRlIGFsaW5lYWRvLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHNuYXBSZXNYLnNuYXBwZWQgJiZcbiAgICAgICAgICAgICAgICBzbmFwUmVzWC5zb3VyY2UgPT09IFwic2VjY2lvblwiICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoc2VsZkN4QWZ0ZXIgLSBzZWNDeCkgPD0gc2VjdGlvbkxpbmVUb2xlcmFuY2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNlY2Npb24tY3hcIixcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IFwic2VjY2lvblwiLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJzb2xpZFwiLFxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IFtzZWNDeCwgb2ZmWSwgc2VjQ3gsIG9mZlkgKyBzZWNjaW9uLmFsdHVyYV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzbmFwUmVzWS5zbmFwcGVkICYmXG4gICAgICAgICAgICAgICAgc25hcFJlc1kuc291cmNlID09PSBcInNlY2Npb25cIiAmJlxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHNlbGZDeUFmdGVyIC0gc2VjQ3kpIDw9IHNlY3Rpb25MaW5lVG9sZXJhbmNlXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzZWNjaW9uLWN5XCIsXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiBcInNlY2Npb25cIixcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwic29saWRcIixcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBbMCwgc2VjQ3ksIGFuY2hvQ2FudmFzLCBzZWNDeV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc0dyb3VwRHJhZyAmJiBzbmFwUmVzWC5zbmFwcGVkICYmIHNuYXBSZXNYLnNvdXJjZSA9PT0gXCJlbGVtZW50b1wiICYmIHNuYXBSZXNYLm5lYXI/Lmc/LnRhcmdldEJveCkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYWNoLXhcIixcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6IFwiZWxlbWVudG9cIixcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwiZGFzaGVkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogcmVhY2hWZXJ0aWNhbChzbmFwUmVzWC5uZWFyLmcudmFsdWUsIHNlbGZCb3hBZnRlciwgc25hcFJlc1gubmVhci5nLnRhcmdldEJveClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNHcm91cERyYWcgJiYgc25hcFJlc1kuc25hcHBlZCAmJiBzbmFwUmVzWS5zb3VyY2UgPT09IFwiZWxlbWVudG9cIiAmJiBzbmFwUmVzWS5uZWFyPy5nPy50YXJnZXRCb3gpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFjaC15XCIsXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiBcImVsZW1lbnRvXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcImRhc2hlZFwiLFxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IHJlYWNoSG9yaXpvbnRhbChzbmFwUmVzWS5uZWFyLmcudmFsdWUsIHNlbGZCb3hBZnRlciwgc25hcFJlc1kubmVhci5nLnRhcmdldEJveClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxyXG5cclxuICAgICAgICAgICAgc2V0R3VpYUxpbmVhcyhsaW5lcyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBzaWxlbmNpb3NvIHBhcmEgbm8gY29ydGFyIGVsIGRyYWdcclxuICAgICAgICB9XHJcbiAgICB9LCBbXG4gICAgICAgIGFuY2hvQ2FudmFzLCBhbHRvQ2FudmFzLFxuICAgICAgICBtYWduZXRSYWRpdXMsIHNlY3Rpb25TaG93UmFkaXVzLCBzbmFwU3RyZW5ndGgsXG4gICAgICAgIHNlY2Npb25lc09yZGVuYWRhcyxcbiAgICAgICAgb2J0ZW5lclNlY2Npb25FbGVtZW50bywgY2FsY3VsYXJPZmZzZXRTZWNjaW9uLFxuICAgICAgICBlbGVtZW50TWFnbmV0UmFkaXVzLCBzZWN0aW9uTWFnbmV0UmFkaXVzLCBzZWN0aW9uUHJpb3JpdHlCaWFzLFxuICAgICAgICBzZWN0aW9uU25hcFN0cmVuZ3RoLCBlbGVtZW50U25hcFN0cmVuZ3RoLCBzZWN0aW9uTGluZVRvbGVyYW5jZVxuICAgIF0pO1xuXHJcbiAgICBjb25zdCBsaW1waWFyR3VpYXMgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRHdWlhTGluZWFzKFtdKSwgW10pO1xyXG4gICAgY29uc3QgY29uZmlndXJhckRyYWdFbmQgPSB1c2VDYWxsYmFjaygoKSA9PiBzZXRHdWlhTGluZWFzKFtdKSwgW10pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3VpYUxpbmVhcyxcclxuICAgICAgICBtb3N0cmFyR3VpYXMsXHJcbiAgICAgICAgbGltcGlhckd1aWFzLFxyXG4gICAgICAgIGNvbmZpZ3VyYXJEcmFnRW5kXHJcbiAgICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlR3VpYXNDZW50cmFkbyIsImFuY2hvQ2FudmFzIiwiYWx0b0NhbnZhcyIsIm1hZ25ldFJhZGl1cyIsImVsZW1lbnRNYWduZXRSYWRpdXMiLCJzZWN0aW9uTWFnbmV0UmFkaXVzIiwic2VjdGlvblNob3dSYWRpdXMiLCJzZWN0aW9uUHJpb3JpdHlCaWFzIiwic25hcFN0cmVuZ3RoIiwic2VjdGlvblNuYXBTdHJlbmd0aCIsImVsZW1lbnRTbmFwU3RyZW5ndGgiLCJzZWN0aW9uTGluZVRvbGVyYW5jZSIsInNlY2Npb25lc09yZGVuYWRhcyIsImd1aWFMaW5lYXMiLCJzZXRHdWlhTGluZWFzIiwiZWZmRWxlbWVudE1hZ25ldFJhZGl1cyIsImVmZlNlY3Rpb25NYWduZXRSYWRpdXMiLCJlZmZTZWN0aW9uU25hcFN0cmVuZ3RoIiwiZWZmRWxlbWVudFNuYXBTdHJlbmd0aCIsImNhbGN1bGFyT2Zmc2V0U2VjY2lvbiIsInNlY2Npb25JZCIsIm9mZnNldFkiLCJzIiwiaWQiLCJhbHR1cmEiLCJvYnRlbmVyU2VjY2lvbkVsZW1lbnRvIiwib2JqSWQiLCJvYmpldG9zIiwib2JqIiwiZmluZCIsIm8iLCJyZWFjaFZlcnRpY2FsIiwieCIsInNlbGZCb3giLCJvdGhlckJveCIsImdhcCIsInNlbGZDeSIsInkiLCJoZWlnaHQiLCJvdGhlckN5IiwieTEiLCJ5MiIsInJlYWNoSG9yaXpvbnRhbCIsInNlbGZDeCIsIndpZHRoIiwib3RoZXJDeCIsIngxIiwieDIiLCJkZWx0YUZvckd1aWRlIiwiYXhpcyIsImd1aWRlVmFsdWUiLCJib3giLCJjZW50ZXIiLCJsZWZ0IiwicmlnaHQiLCJvcHRzIiwiZGlzdCIsIk1hdGgiLCJhYnMiLCJkZWx0YSIsInNvcnQiLCJhIiwiYiIsInRvcCIsImJvdHRvbSIsImRpc3RGb3JHdWlkZSIsIm1pbiIsImdldE5vZGVCb3giLCJub2RlIiwic3RhZ2UiLCJnZXRDbGllbnRSZWN0IiwicmVjdE9wdHMiLCJyZWxhdGl2ZVRvIiwidGlwbyIsIk51bWJlciIsImlzRmluaXRlIiwieEZyb21Ob2RlIiwieUZyb21Ob2RlIiwiYWJzUG9zIiwiZ2V0QWJzb2x1dGVQb3NpdGlvbiIsImZpbmRPbmUiLCJnYWxsZXJ5RnJhbWUiLCJza2lwU2hhZG93Iiwic2tpcFN0cm9rZSIsImJ1aWxkU2FtZVNlY3Rpb25HdWlkZXMiLCJlbGVtZW50UmVmcyIsImlkU2VsZiIsIm9iakJ5SWQiLCJzZWxmT2JqIiwiZ2V0IiwiY2FuZGlkYXRlcyIsImZpbHRlciIsIm1hcCIsIm4iLCJjdXJyZW50IiwiZCIsIkJvb2xlYW4iLCJzbGljZSIsImciLCJjeCIsImN5IiwicHVzaCIsInZhbHVlIiwidHlwZSIsInRhcmdldEJveCIsInByaW9yaXR5Iiwic3R5bGUiLCJnZXRVbmlvbkJveCIsImlkcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIm1pblgiLCJQT1NJVElWRV9JTkZJTklUWSIsIm1pblkiLCJtYXhYIiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJtYXhZIiwiZm9yRWFjaCIsIm1heCIsInNoaWZ0Tm9kZXMiLCJzaGlmdFNpbmdsZSIsIm1vc3RyYXJHdWlhcyIsInBvcyIsImlkQWN0dWFsIiwiZ2V0U3RhZ2UiLCJNYXAiLCJvYmpBY3R1YWwiLCJpc0dyb3VwTGVhZGVyIiwid2luZG93IiwiX2dydXBvTGlkZXIiLCJyYXdHcm91cElkcyIsIl9ncnVwb0VsZW1lbnRvcyIsIl9lbGVtZW50b3NTZWxlY2Npb25hZG9zIiwiZ3JvdXBJZHMiLCJTZXQiLCJpc0dyb3VwRHJhZyIsInNlbGZCb3hCZWZvcmUiLCJzZWNjaW9uIiwib2ZmWSIsInNlY0N4Iiwic2VjQ3kiLCJsaW5lcyIsImRpc3RTZWNYIiwiZGlzdFNlY1kiLCJlbGVtZW50R3VpZGVzIiwiYmVzdEVsWCIsImJlc3RFbFkiLCJkZWNpZGlyU25hcCIsInNlY0Rpc3RDZW50ZXIiLCJiZXN0RWwiLCJzZWNPayIsImVsT2siLCJzb3VyY2UiLCJuZWFyIiwiZWxCZWF0c1NlY3Rpb24iLCJkZWNpc2lvblgiLCJkZWNpc2lvblkiLCJhcHBseVNuYXAiLCJkZWNpc2lvbiIsInNuYXBwZWQiLCJmcmVzaCIsIm5leHRDZW50ZXIiLCJ0YXJnZXRDZW50ZXIiLCJzbmFwUmVzWCIsInNuYXBSZXNZIiwic2VsZkJveEFmdGVyIiwic2VsZkN4QWZ0ZXIiLCJzZWxmQ3lBZnRlciIsInBvaW50cyIsImUiLCJsaW1waWFyR3VpYXMiLCJjb25maWd1cmFyRHJhZ0VuZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useGuiasCentrado.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useImperativeObjects.js":
/*!*******************************************!*\
  !*** ./src/hooks/useImperativeObjects.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   useImperativeObjects: () => (/* binding */ useImperativeObjects)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/hooks/useImperativeObjects.js\n\nfunction useImperativeObjects() {\n    const objectRefsMap = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    const pendingUpdates = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    const batchUpdateTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // 📝 Registrar un objeto con su ref - SIN LOGS\n    const registerObject = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useImperativeObjects.useCallback[registerObject]\": (id, nodeRef)=>{\n            if (nodeRef) {\n                objectRefsMap.current.set(id, nodeRef);\n            } else {\n                objectRefsMap.current.delete(id);\n            }\n        }\n    }[\"useImperativeObjects.useCallback[registerObject]\"], []);\n    // ⚡ Actualizar objeto imperativamente - SIN LOGS\n    const updateObjectImperative = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useImperativeObjects.useCallback[updateObjectImperative]\": (id, newAttrs)=>{\n            const nodeRef = objectRefsMap.current.get(id);\n            if (!nodeRef) return false;\n            try {\n                Object.entries(newAttrs).forEach({\n                    \"useImperativeObjects.useCallback[updateObjectImperative]\": ([key, value])=>{\n                        if (typeof nodeRef[key] === 'function') {\n                            nodeRef[key](value);\n                        } else if (nodeRef.attrs) {\n                            nodeRef.attrs[key] = value;\n                        }\n                    }\n                }[\"useImperativeObjects.useCallback[updateObjectImperative]\"]);\n                const layer = nodeRef.getLayer();\n                if (layer) {\n                    layer.batchDraw();\n                }\n                return true;\n            } catch (error) {\n                return false;\n            }\n        }\n    }[\"useImperativeObjects.useCallback[updateObjectImperative]\"], []);\n    // 🧹 Limpiar - SIN LOGS\n    const cleanup = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useImperativeObjects.useCallback[cleanup]\": ()=>{\n            if (batchUpdateTimeoutRef.current) {\n                clearTimeout(batchUpdateTimeoutRef.current);\n            }\n            pendingUpdates.current.clear();\n            objectRefsMap.current.clear();\n        }\n    }[\"useImperativeObjects.useCallback[cleanup]\"], []);\n    // 🎯 Retornar objeto memoizado\n    return (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useImperativeObjects.useMemo\": ()=>({\n                registerObject,\n                updateObjectImperative,\n                cleanup,\n                getObjectRef: ({\n                    \"useImperativeObjects.useMemo\": (id)=>objectRefsMap.current.get(id)\n                })[\"useImperativeObjects.useMemo\"]\n            })\n    }[\"useImperativeObjects.useMemo\"], [\n        registerObject,\n        updateObjectImperative,\n        cleanup\n    ]);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useImperativeObjects);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VJbXBlcmF0aXZlT2JqZWN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxvQ0FBb0M7QUFDaUI7QUFFOUMsU0FBU0c7SUFDZCxNQUFNQyxnQkFBZ0JKLDZDQUFNQSxDQUFDLElBQUlLO0lBQ2pDLE1BQU1DLGlCQUFpQk4sNkNBQU1BLENBQUMsSUFBSUs7SUFDbEMsTUFBTUUsd0JBQXdCUCw2Q0FBTUEsQ0FBQztJQUVyQywrQ0FBK0M7SUFDL0MsTUFBTVEsaUJBQWlCUCxrREFBV0E7NERBQUMsQ0FBQ1EsSUFBSUM7WUFDdEMsSUFBSUEsU0FBUztnQkFDWE4sY0FBY08sT0FBTyxDQUFDQyxHQUFHLENBQUNILElBQUlDO1lBQ2hDLE9BQU87Z0JBQ0xOLGNBQWNPLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDSjtZQUMvQjtRQUNGOzJEQUFHLEVBQUU7SUFFTCxpREFBaUQ7SUFDakQsTUFBTUsseUJBQXlCYixrREFBV0E7b0VBQUMsQ0FBQ1EsSUFBSU07WUFDOUMsTUFBTUwsVUFBVU4sY0FBY08sT0FBTyxDQUFDSyxHQUFHLENBQUNQO1lBQzFDLElBQUksQ0FBQ0MsU0FBUyxPQUFPO1lBRXJCLElBQUk7Z0JBQ0ZPLE9BQU9DLE9BQU8sQ0FBQ0gsVUFBVUksT0FBTztnRkFBQyxDQUFDLENBQUNDLEtBQUtDLE1BQU07d0JBQzVDLElBQUksT0FBT1gsT0FBTyxDQUFDVSxJQUFJLEtBQUssWUFBWTs0QkFDdENWLE9BQU8sQ0FBQ1UsSUFBSSxDQUFDQzt3QkFDZixPQUFPLElBQUlYLFFBQVFZLEtBQUssRUFBRTs0QkFDeEJaLFFBQVFZLEtBQUssQ0FBQ0YsSUFBSSxHQUFHQzt3QkFDdkI7b0JBQ0Y7O2dCQUVBLE1BQU1FLFFBQVFiLFFBQVFjLFFBQVE7Z0JBQzlCLElBQUlELE9BQU87b0JBQ1RBLE1BQU1FLFNBQVM7Z0JBQ2pCO2dCQUVBLE9BQU87WUFDVCxFQUFFLE9BQU9DLE9BQU87Z0JBQ2QsT0FBTztZQUNUO1FBQ0Y7bUVBQUcsRUFBRTtJQUVMLHdCQUF3QjtJQUN4QixNQUFNQyxVQUFVMUIsa0RBQVdBO3FEQUFDO1lBQzFCLElBQUlNLHNCQUFzQkksT0FBTyxFQUFFO2dCQUNqQ2lCLGFBQWFyQixzQkFBc0JJLE9BQU87WUFDNUM7WUFDQUwsZUFBZUssT0FBTyxDQUFDa0IsS0FBSztZQUM1QnpCLGNBQWNPLE9BQU8sQ0FBQ2tCLEtBQUs7UUFDN0I7b0RBQUcsRUFBRTtJQUVMLCtCQUErQjtJQUMvQixPQUFPM0IsOENBQU9BO3dDQUFDLElBQU87Z0JBQ3BCTTtnQkFDQU07Z0JBQ0FhO2dCQUNBRyxZQUFZO29EQUFFLENBQUNyQixLQUFPTCxjQUFjTyxPQUFPLENBQUNLLEdBQUcsQ0FBQ1A7O1lBQ2xEO3VDQUFJO1FBQUNEO1FBQWdCTTtRQUF3QmE7S0FBUTtBQUN2RDtBQUVBLGlFQUFleEIsb0JBQW9CQSxFQUFDIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGhvb2tzXFx1c2VJbXBlcmF0aXZlT2JqZWN0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaG9va3MvdXNlSW1wZXJhdGl2ZU9iamVjdHMuanNcclxuaW1wb3J0IHsgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VJbXBlcmF0aXZlT2JqZWN0cygpIHtcclxuICBjb25zdCBvYmplY3RSZWZzTWFwID0gdXNlUmVmKG5ldyBNYXAoKSk7XHJcbiAgY29uc3QgcGVuZGluZ1VwZGF0ZXMgPSB1c2VSZWYobmV3IE1hcCgpKTtcclxuICBjb25zdCBiYXRjaFVwZGF0ZVRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcblxyXG4gIC8vIPCfk50gUmVnaXN0cmFyIHVuIG9iamV0byBjb24gc3UgcmVmIC0gU0lOIExPR1NcclxuICBjb25zdCByZWdpc3Rlck9iamVjdCA9IHVzZUNhbGxiYWNrKChpZCwgbm9kZVJlZikgPT4ge1xyXG4gICAgaWYgKG5vZGVSZWYpIHtcclxuICAgICAgb2JqZWN0UmVmc01hcC5jdXJyZW50LnNldChpZCwgbm9kZVJlZik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvYmplY3RSZWZzTWFwLmN1cnJlbnQuZGVsZXRlKGlkKTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIOKaoSBBY3R1YWxpemFyIG9iamV0byBpbXBlcmF0aXZhbWVudGUgLSBTSU4gTE9HU1xyXG4gIGNvbnN0IHVwZGF0ZU9iamVjdEltcGVyYXRpdmUgPSB1c2VDYWxsYmFjaygoaWQsIG5ld0F0dHJzKSA9PiB7XHJcbiAgICBjb25zdCBub2RlUmVmID0gb2JqZWN0UmVmc01hcC5jdXJyZW50LmdldChpZCk7XHJcbiAgICBpZiAoIW5vZGVSZWYpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBPYmplY3QuZW50cmllcyhuZXdBdHRycykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBub2RlUmVmW2tleV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIG5vZGVSZWZba2V5XSh2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChub2RlUmVmLmF0dHJzKSB7XHJcbiAgICAgICAgICBub2RlUmVmLmF0dHJzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgbGF5ZXIgPSBub2RlUmVmLmdldExheWVyKCk7XHJcbiAgICAgIGlmIChsYXllcikge1xyXG4gICAgICAgIGxheWVyLmJhdGNoRHJhdygpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIPCfp7kgTGltcGlhciAtIFNJTiBMT0dTXHJcbiAgY29uc3QgY2xlYW51cCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmIChiYXRjaFVwZGF0ZVRpbWVvdXRSZWYuY3VycmVudCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQoYmF0Y2hVcGRhdGVUaW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgfVxyXG4gICAgcGVuZGluZ1VwZGF0ZXMuY3VycmVudC5jbGVhcigpO1xyXG4gICAgb2JqZWN0UmVmc01hcC5jdXJyZW50LmNsZWFyKCk7XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyDwn46vIFJldG9ybmFyIG9iamV0byBtZW1vaXphZG9cclxuICByZXR1cm4gdXNlTWVtbygoKSA9PiAoe1xyXG4gICAgcmVnaXN0ZXJPYmplY3QsXHJcbiAgICB1cGRhdGVPYmplY3RJbXBlcmF0aXZlLFxyXG4gICAgY2xlYW51cCxcclxuICAgIGdldE9iamVjdFJlZjogKGlkKSA9PiBvYmplY3RSZWZzTWFwLmN1cnJlbnQuZ2V0KGlkKVxyXG4gIH0pLCBbcmVnaXN0ZXJPYmplY3QsIHVwZGF0ZU9iamVjdEltcGVyYXRpdmUsIGNsZWFudXBdKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgdXNlSW1wZXJhdGl2ZU9iamVjdHM7Il0sIm5hbWVzIjpbInVzZVJlZiIsInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZUltcGVyYXRpdmVPYmplY3RzIiwib2JqZWN0UmVmc01hcCIsIk1hcCIsInBlbmRpbmdVcGRhdGVzIiwiYmF0Y2hVcGRhdGVUaW1lb3V0UmVmIiwicmVnaXN0ZXJPYmplY3QiLCJpZCIsIm5vZGVSZWYiLCJjdXJyZW50Iiwic2V0IiwiZGVsZXRlIiwidXBkYXRlT2JqZWN0SW1wZXJhdGl2ZSIsIm5ld0F0dHJzIiwiZ2V0IiwiT2JqZWN0IiwiZW50cmllcyIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsImF0dHJzIiwibGF5ZXIiLCJnZXRMYXllciIsImJhdGNoRHJhdyIsImVycm9yIiwiY2xlYW51cCIsImNsZWFyVGltZW91dCIsImNsZWFyIiwiZ2V0T2JqZWN0UmVmIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useImperativeObjects.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useInlineEditor.js":
/*!**************************************!*\
  !*** ./src/hooks/useInlineEditor.js ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useInlineEditor)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n\nfunction useInlineEditor() {\n    const [editing, setEditing] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        id: null,\n        value: \"\"\n    });\n    const startEdit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInlineEditor.useCallback[startEdit]\": (id, val)=>setEditing({\n                id,\n                value: val\n            })\n    }[\"useInlineEditor.useCallback[startEdit]\"], []);\n    const updateEdit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInlineEditor.useCallback[updateEdit]\": (val)=>setEditing({\n                \"useInlineEditor.useCallback[updateEdit]\": (e)=>({\n                        ...e,\n                        value: val\n                    })\n            }[\"useInlineEditor.useCallback[updateEdit]\"])\n    }[\"useInlineEditor.useCallback[updateEdit]\"], []);\n    const finishEdit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useInlineEditor.useCallback[finishEdit]\": ()=>setEditing({\n                id: null,\n                value: \"\"\n            })\n    }[\"useInlineEditor.useCallback[finishEdit]\"], []);\n    return {\n        editing,\n        startEdit,\n        updateEdit,\n        finishEdit\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VJbmxpbmVFZGl0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBOEM7QUFFL0IsU0FBU0U7SUFDdEIsTUFBTSxDQUFDQyxTQUFTQyxXQUFXLEdBQUdKLCtDQUFRQSxDQUFDO1FBQUVLLElBQUk7UUFBTUMsT0FBTztJQUFHO0lBRTdELE1BQU1DLFlBQWFOLGtEQUFXQTtrREFBQyxDQUFDSSxJQUFJRyxNQUFRSixXQUFXO2dCQUFFQztnQkFBSUMsT0FBT0U7WUFBSTtpREFBSSxFQUFFO0lBQzlFLE1BQU1DLGFBQWFSLGtEQUFXQTttREFBQyxDQUFDTyxNQUFhSjsyREFBV00sQ0FBQUEsSUFBTTt3QkFBRSxHQUFHQSxDQUFDO3dCQUFFSixPQUFPRTtvQkFBSTs7a0RBQUssRUFBRTtJQUN4RixNQUFNRyxhQUFhVixrREFBV0E7bURBQUMsSUFBY0csV0FBVztnQkFBRUMsSUFBSTtnQkFBTUMsT0FBTztZQUFHO2tEQUFJLEVBQUU7SUFFcEYsT0FBTztRQUFFSDtRQUFTSTtRQUFXRTtRQUFZRTtJQUFXO0FBQ3REIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXGhvb2tzXFx1c2VJbmxpbmVFZGl0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VJbmxpbmVFZGl0b3IoKSB7XHJcbiAgY29uc3QgW2VkaXRpbmcsIHNldEVkaXRpbmddID0gdXNlU3RhdGUoeyBpZDogbnVsbCwgdmFsdWU6IFwiXCIgfSk7XHJcblxyXG4gIGNvbnN0IHN0YXJ0RWRpdCAgPSB1c2VDYWxsYmFjaygoaWQsIHZhbCkgPT4gc2V0RWRpdGluZyh7IGlkLCB2YWx1ZTogdmFsIH0pLCBbXSk7XHJcbiAgY29uc3QgdXBkYXRlRWRpdCA9IHVzZUNhbGxiYWNrKCh2YWwpICAgICAgPT4gc2V0RWRpdGluZyhlID0+ICh7IC4uLmUsIHZhbHVlOiB2YWwgfSkpLCBbXSk7XHJcbiAgY29uc3QgZmluaXNoRWRpdCA9IHVzZUNhbGxiYWNrKCgpICAgICAgICAgPT4gc2V0RWRpdGluZyh7IGlkOiBudWxsLCB2YWx1ZTogXCJcIiB9KSwgW10pO1xyXG5cclxuICByZXR1cm4geyBlZGl0aW5nLCBzdGFydEVkaXQsIHVwZGF0ZUVkaXQsIGZpbmlzaEVkaXQgfTtcclxufVxyXG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZUlubGluZUVkaXRvciIsImVkaXRpbmciLCJzZXRFZGl0aW5nIiwiaWQiLCJ2YWx1ZSIsInN0YXJ0RWRpdCIsInZhbCIsInVwZGF0ZUVkaXQiLCJlIiwiZmluaXNoRWRpdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useInlineEditor.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useKeyboardShortcuts.js":
/*!*******************************************!*\
  !*** ./src/hooks/useKeyboardShortcuts.js ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useKeyboardShortcuts)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/hooks/useKeyboardShortcuts.js\n\nfunction useKeyboardShortcuts({ onDeshacer, onRehacer, onDuplicar, onEliminar, onDeseleccionar, onCopiar, onPegar, onCambiarAlineacion, isEditing, tieneSeleccion }) {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useKeyboardShortcuts.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"useKeyboardShortcuts.useEffect.handleKeyDown\": (e)=>{\n                    const key = typeof e?.key === \"string\" ? e.key.toLowerCase() : \"\";\n                    if (!key) return;\n                    // 🔒 No ejecutar atajos si se está escribiendo en un input, textarea o contenteditable\n                    const tag = document.activeElement?.tagName?.toLowerCase();\n                    const isTyping = tag === 'input' || tag === 'textarea' || document.activeElement?.isContentEditable;\n                    if (isTyping) return;\n                    // ⌨️ Atajos con Ctrl o Cmd\n                    if ((e.ctrlKey || e.metaKey) && key === \"z\" && !e.shiftKey) {\n                        e.preventDefault();\n                        onDeshacer?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && (key === \"y\" || key === \"z\" && e.shiftKey)) {\n                        e.preventDefault();\n                        onRehacer?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && key === \"d\") {\n                        if (!tieneSeleccion) return;\n                        e.preventDefault();\n                        onDuplicar?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && key === \"c\") {\n                        if (!tieneSeleccion) return;\n                        e.preventDefault();\n                        onCopiar?.();\n                    }\n                    if ((e.ctrlKey || e.metaKey) && key === \"v\") {\n                        e.preventDefault();\n                        onPegar?.();\n                    }\n                    // 🔤 Alineación: tecla L\n                    if (key === \"l\") {\n                        e.preventDefault();\n                        onCambiarAlineacion?.();\n                    }\n                    // 🗑️ Eliminar\n                    if ((key === \"delete\" || key === \"backspace\") && tieneSeleccion && !isEditing) {\n                        e.preventDefault();\n                        onEliminar?.();\n                    }\n                    // ❌ Deseleccionar\n                    if (key === \"escape\") {\n                        e.preventDefault();\n                        onDeseleccionar?.();\n                    }\n                }\n            }[\"useKeyboardShortcuts.useEffect.handleKeyDown\"];\n            document.addEventListener(\"keydown\", handleKeyDown);\n            return ({\n                \"useKeyboardShortcuts.useEffect\": ()=>document.removeEventListener(\"keydown\", handleKeyDown)\n            })[\"useKeyboardShortcuts.useEffect\"];\n        }\n    }[\"useKeyboardShortcuts.useEffect\"], [\n        onDeshacer,\n        onRehacer,\n        onDuplicar,\n        onEliminar,\n        onDeseleccionar,\n        onCopiar,\n        onPegar,\n        onCambiarAlineacion,\n        isEditing,\n        tieneSeleccion\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VLZXlib2FyZFNob3J0Y3V0cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9DQUFvQztBQUNGO0FBRW5CLFNBQVNDLHFCQUFxQixFQUMzQ0MsVUFBVSxFQUNWQyxTQUFTLEVBQ1RDLFVBQVUsRUFDVkMsVUFBVSxFQUNWQyxlQUFlLEVBQ2ZDLFFBQVEsRUFDUkMsT0FBTyxFQUNQQyxtQkFBbUIsRUFDbkJDLFNBQVMsRUFDVEMsY0FBYyxFQUNmO0lBQ0NYLGdEQUFTQTswQ0FBQztZQUNSLE1BQU1ZO2dFQUFnQixDQUFDQztvQkFDckIsTUFBTUMsTUFBTSxPQUFPRCxHQUFHQyxRQUFRLFdBQVdELEVBQUVDLEdBQUcsQ0FBQ0MsV0FBVyxLQUFLO29CQUMvRCxJQUFJLENBQUNELEtBQUs7b0JBRVYsdUZBQXVGO29CQUN2RixNQUFNRSxNQUFNQyxTQUFTQyxhQUFhLEVBQUVDLFNBQVNKO29CQUM3QyxNQUFNSyxXQUNKSixRQUFRLFdBQ1JBLFFBQVEsY0FDUkMsU0FBU0MsYUFBYSxFQUFFRztvQkFFMUIsSUFBSUQsVUFBVTtvQkFFZCwyQkFBMkI7b0JBQzNCLElBQUksQ0FBQ1AsRUFBRVMsT0FBTyxJQUFJVCxFQUFFVSxPQUFPLEtBQUtULFFBQVEsT0FBTyxDQUFDRCxFQUFFVyxRQUFRLEVBQUU7d0JBQzFEWCxFQUFFWSxjQUFjO3dCQUNoQnZCO29CQUNGO29CQUVBLElBQUksQ0FBQ1csRUFBRVMsT0FBTyxJQUFJVCxFQUFFVSxPQUFPLEtBQU1ULENBQUFBLFFBQVEsT0FBUUEsUUFBUSxPQUFPRCxFQUFFVyxRQUFRLEdBQUk7d0JBQzVFWCxFQUFFWSxjQUFjO3dCQUNoQnRCO29CQUNGO29CQUVBLElBQUksQ0FBQ1UsRUFBRVMsT0FBTyxJQUFJVCxFQUFFVSxPQUFPLEtBQUtULFFBQVEsS0FBSzt3QkFDM0MsSUFBSSxDQUFDSCxnQkFBZ0I7d0JBQ3JCRSxFQUFFWSxjQUFjO3dCQUNoQnJCO29CQUNGO29CQUdBLElBQUksQ0FBQ1MsRUFBRVMsT0FBTyxJQUFJVCxFQUFFVSxPQUFPLEtBQUtULFFBQVEsS0FBSzt3QkFDM0MsSUFBSSxDQUFDSCxnQkFBZ0I7d0JBQ3JCRSxFQUFFWSxjQUFjO3dCQUNoQmxCO29CQUNGO29CQUVBLElBQUksQ0FBQ00sRUFBRVMsT0FBTyxJQUFJVCxFQUFFVSxPQUFPLEtBQUtULFFBQVEsS0FBSzt3QkFDM0NELEVBQUVZLGNBQWM7d0JBQ2hCakI7b0JBQ0Y7b0JBRUEseUJBQXlCO29CQUN6QixJQUFJTSxRQUFRLEtBQUs7d0JBQ2ZELEVBQUVZLGNBQWM7d0JBQ2hCaEI7b0JBQ0Y7b0JBRUEsZUFBZTtvQkFDZixJQUFJLENBQUNLLFFBQVEsWUFBWUEsUUFBUSxXQUFVLEtBQU1ILGtCQUFrQixDQUFDRCxXQUFXO3dCQUM3RUcsRUFBRVksY0FBYzt3QkFDaEJwQjtvQkFDRjtvQkFFQSxrQkFBa0I7b0JBQ2xCLElBQUlTLFFBQVEsVUFBVTt3QkFDcEJELEVBQUVZLGNBQWM7d0JBQ2hCbkI7b0JBQ0Y7Z0JBQ0Y7O1lBRUFXLFNBQVNTLGdCQUFnQixDQUFDLFdBQVdkO1lBQ3JDO2tEQUFPLElBQU1LLFNBQVNVLG1CQUFtQixDQUFDLFdBQVdmOztRQUN2RDt5Q0FBRztRQUNEVjtRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztRQUNBQztLQUNEO0FBQ0giLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcaG9va3NcXHVzZUtleWJvYXJkU2hvcnRjdXRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9ob29rcy91c2VLZXlib2FyZFNob3J0Y3V0cy5qc1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VLZXlib2FyZFNob3J0Y3V0cyh7XHJcbiAgb25EZXNoYWNlcixcclxuICBvblJlaGFjZXIsXHJcbiAgb25EdXBsaWNhcixcclxuICBvbkVsaW1pbmFyLFxyXG4gIG9uRGVzZWxlY2Npb25hcixcclxuICBvbkNvcGlhcixcclxuICBvblBlZ2FyLFxyXG4gIG9uQ2FtYmlhckFsaW5lYWNpb24sXHJcbiAgaXNFZGl0aW5nLFxyXG4gIHRpZW5lU2VsZWNjaW9uXHJcbn0pIHtcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSB0eXBlb2YgZT8ua2V5ID09PSBcInN0cmluZ1wiID8gZS5rZXkudG9Mb3dlckNhc2UoKSA6IFwiXCI7XG4gICAgICBpZiAoIWtleSkgcmV0dXJuO1xuXHJcbiAgICAgIC8vIPCflJIgTm8gZWplY3V0YXIgYXRham9zIHNpIHNlIGVzdMOhIGVzY3JpYmllbmRvIGVuIHVuIGlucHV0LCB0ZXh0YXJlYSBvIGNvbnRlbnRlZGl0YWJsZVxyXG4gICAgICBjb25zdCB0YWcgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50Py50YWdOYW1lPy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBjb25zdCBpc1R5cGluZyA9XHJcbiAgICAgICAgdGFnID09PSAnaW5wdXQnIHx8XHJcbiAgICAgICAgdGFnID09PSAndGV4dGFyZWEnIHx8XHJcbiAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudD8uaXNDb250ZW50RWRpdGFibGU7XHJcblxyXG4gICAgICBpZiAoaXNUeXBpbmcpIHJldHVybjtcclxuXHJcbiAgICAgIC8vIOKMqO+4jyBBdGFqb3MgY29uIEN0cmwgbyBDbWRcclxuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBrZXkgPT09IFwielwiICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIG9uRGVzaGFjZXI/LigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIChrZXkgPT09IFwieVwiIHx8IChrZXkgPT09IFwielwiICYmIGUuc2hpZnRLZXkpKSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvblJlaGFjZXI/LigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIGtleSA9PT0gXCJkXCIpIHtcclxuICAgICAgICBpZiAoIXRpZW5lU2VsZWNjaW9uKSByZXR1cm47XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIG9uRHVwbGljYXI/LigpO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiBrZXkgPT09IFwiY1wiKSB7XHJcbiAgICAgICAgaWYgKCF0aWVuZVNlbGVjY2lvbikgcmV0dXJuO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvbkNvcGlhcj8uKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYga2V5ID09PSBcInZcIikge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvblBlZ2FyPy4oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g8J+UpCBBbGluZWFjacOzbjogdGVjbGEgTFxyXG4gICAgICBpZiAoa2V5ID09PSBcImxcIikge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBvbkNhbWJpYXJBbGluZWFjaW9uPy4oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g8J+Xke+4jyBFbGltaW5hclxyXG4gICAgICBpZiAoKGtleSA9PT0gXCJkZWxldGVcIiB8fCBrZXkgPT09IFwiYmFja3NwYWNlXCIpICYmIHRpZW5lU2VsZWNjaW9uICYmICFpc0VkaXRpbmcpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgb25FbGltaW5hcj8uKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOKdjCBEZXNlbGVjY2lvbmFyXHJcbiAgICAgIGlmIChrZXkgPT09IFwiZXNjYXBlXCIpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgb25EZXNlbGVjY2lvbmFyPy4oKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcclxuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlEb3duKTtcclxuICB9LCBbXHJcbiAgICBvbkRlc2hhY2VyLFxyXG4gICAgb25SZWhhY2VyLFxyXG4gICAgb25EdXBsaWNhcixcclxuICAgIG9uRWxpbWluYXIsXHJcbiAgICBvbkRlc2VsZWNjaW9uYXIsXHJcbiAgICBvbkNvcGlhcixcclxuICAgIG9uUGVnYXIsXHJcbiAgICBvbkNhbWJpYXJBbGluZWFjaW9uLFxyXG4gICAgaXNFZGl0aW5nLFxyXG4gICAgdGllbmVTZWxlY2Npb25cclxuICBdKTtcclxufVxyXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlS2V5Ym9hcmRTaG9ydGN1dHMiLCJvbkRlc2hhY2VyIiwib25SZWhhY2VyIiwib25EdXBsaWNhciIsIm9uRWxpbWluYXIiLCJvbkRlc2VsZWNjaW9uYXIiLCJvbkNvcGlhciIsIm9uUGVnYXIiLCJvbkNhbWJpYXJBbGluZWFjaW9uIiwiaXNFZGl0aW5nIiwidGllbmVTZWxlY2Npb24iLCJoYW5kbGVLZXlEb3duIiwiZSIsImtleSIsInRvTG93ZXJDYXNlIiwidGFnIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwidGFnTmFtZSIsImlzVHlwaW5nIiwiaXNDb250ZW50RWRpdGFibGUiLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5IiwicHJldmVudERlZmF1bHQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useKeyboardShortcuts.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/hooks/useViewportScale.js":
/*!***************************************!*\
  !*** ./src/hooks/useViewportScale.js ***!
  \***************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useViewportScale)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n// src/hooks/useViewportScale.js\n\n/**\n * Centraliza toda la logica de:\n * - isMobile / isMobilePortrait\n * - ResizeObserver del contenedor\n * - calculo de scale, anchoContenedor\n * - escalaActiva / escalaVisual / wrapperBaseWidth / fit mobile portrait\n */ function useViewportScale({ contenedorRef, zoom, // base widths (tu logica actual)\nbaseDesktop = 800, baseMobilePortrait = 1000, // wrapper real que escalas visualmente (tu logica actual)\nwrapperBaseWidthZoom1 = 1000, wrapperBaseWidthZoom08 = 1220, // boosts (tu logica actual)\nfitBoost = 1.2, zoomVisualBoost = 1.15, // debug\ndebug = false } = {}) {\n    const [isMobile, setIsMobile] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isMobilePortrait, setIsMobilePortrait] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [scale, setScale] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(1);\n    const [anchoContenedor, setAnchoContenedor] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    // isMobile + isMobilePortrait reactivo con coarse pointer\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useViewportScale.useEffect\": ()=>{\n            if (true) return;\n            const mqMobile = window.matchMedia(\"(max-width: 640px)\");\n            const mqTablet = window.matchMedia(\"(max-width: 1024px)\");\n            const mqPortrait = window.matchMedia(\"(max-width: 1024px) and (orientation: portrait)\");\n            const mqCoarse = window.matchMedia(\"(pointer: coarse)\");\n            const update = {\n                \"useViewportScale.useEffect.update\": ()=>{\n                    const compactWidth = mqMobile.matches;\n                    const tabletWidth = mqTablet.matches;\n                    const coarsePointer = mqCoarse.matches;\n                    const nextIsMobile = compactWidth || coarsePointer && tabletWidth;\n                    setIsMobile(nextIsMobile);\n                    setIsMobilePortrait(mqPortrait.matches && (compactWidth || coarsePointer));\n                }\n            }[\"useViewportScale.useEffect.update\"];\n            update();\n            mqMobile.addEventListener?.(\"change\", update);\n            mqTablet.addEventListener?.(\"change\", update);\n            mqPortrait.addEventListener?.(\"change\", update);\n            mqCoarse.addEventListener?.(\"change\", update);\n            window.addEventListener(\"resize\", update);\n            window.addEventListener(\"orientationchange\", update);\n            return ({\n                \"useViewportScale.useEffect\": ()=>{\n                    mqMobile.removeEventListener?.(\"change\", update);\n                    mqTablet.removeEventListener?.(\"change\", update);\n                    mqPortrait.removeEventListener?.(\"change\", update);\n                    mqCoarse.removeEventListener?.(\"change\", update);\n                    window.removeEventListener(\"resize\", update);\n                    window.removeEventListener(\"orientationchange\", update);\n                }\n            })[\"useViewportScale.useEffect\"];\n        }\n    }[\"useViewportScale.useEffect\"], []);\n    // scale: solo cuando zoom === 1 (igual que hoy)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useViewportScale.useEffect\": ()=>{\n            if (!contenedorRef?.current || zoom !== 1) return;\n            let raf = null;\n            const actualizarEscala = {\n                \"useViewportScale.useEffect.actualizarEscala\": ()=>{\n                    if (!contenedorRef.current) return;\n                    if (raf) cancelAnimationFrame(raf);\n                    raf = requestAnimationFrame({\n                        \"useViewportScale.useEffect.actualizarEscala\": ()=>{\n                            const ancho = contenedorRef.current?.offsetWidth || 0;\n                            const base = isMobilePortrait ? baseMobilePortrait : baseDesktop;\n                            const nextScale = base > 0 ? ancho / base : 1;\n                            setScale(nextScale);\n                            if (debug) {\n                                console.log(\"[useViewportScale] anchoContenedor=\", ancho, \"base=\", base, \"scale=\", nextScale.toFixed(3));\n                            }\n                        }\n                    }[\"useViewportScale.useEffect.actualizarEscala\"]);\n                }\n            }[\"useViewportScale.useEffect.actualizarEscala\"];\n            actualizarEscala();\n            const observer = new ResizeObserver(actualizarEscala);\n            observer.observe(contenedorRef.current);\n            return ({\n                \"useViewportScale.useEffect\": ()=>{\n                    if (raf) cancelAnimationFrame(raf);\n                    observer.disconnect();\n                }\n            })[\"useViewportScale.useEffect\"];\n        }\n    }[\"useViewportScale.useEffect\"], [\n        contenedorRef,\n        zoom,\n        isMobilePortrait,\n        baseDesktop,\n        baseMobilePortrait,\n        debug\n    ]);\n    // anchoContenedor: siempre (igual que hoy)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useViewportScale.useEffect\": ()=>{\n            const el = contenedorRef?.current;\n            if (!el) return;\n            const actualizar = {\n                \"useViewportScale.useEffect.actualizar\": ()=>{\n                    if (!contenedorRef.current) return;\n                    setAnchoContenedor(contenedorRef.current.offsetWidth || 0);\n                }\n            }[\"useViewportScale.useEffect.actualizar\"];\n            requestAnimationFrame(actualizar);\n            const observer = new ResizeObserver(actualizar);\n            observer.observe(el);\n            return ({\n                \"useViewportScale.useEffect\": ()=>observer.disconnect()\n            })[\"useViewportScale.useEffect\"];\n        }\n    }[\"useViewportScale.useEffect\"], [\n        contenedorRef\n    ]);\n    // Derivados (identicos a tu logica actual)\n    const escalaActiva = zoom === 1 ? scale : zoom;\n    const wrapperBaseWidth = zoom === 0.8 ? wrapperBaseWidthZoom08 : wrapperBaseWidthZoom1;\n    const escalaFitMobilePortrait = anchoContenedor > 0 ? anchoContenedor / wrapperBaseWidth * fitBoost : 1;\n    const escalaVisual = isMobilePortrait ? escalaFitMobilePortrait : zoom === 1 ? scale : zoom * zoomVisualBoost;\n    return {\n        isMobile,\n        isMobilePortrait,\n        scale,\n        anchoContenedor,\n        escalaActiva,\n        escalaVisual,\n        wrapperBaseWidth,\n        escalaFitMobilePortrait\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9ob29rcy91c2VWaWV3cG9ydFNjYWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsZ0NBQWdDO0FBQ1k7QUFFNUM7Ozs7OztDQU1DLEdBQ2MsU0FBU0UsaUJBQWlCLEVBQ3ZDQyxhQUFhLEVBQ2JDLElBQUksRUFDSixpQ0FBaUM7QUFDakNDLGNBQWMsR0FBRyxFQUNqQkMscUJBQXFCLElBQUksRUFFekIsMERBQTBEO0FBQzFEQyx3QkFBd0IsSUFBSSxFQUM1QkMseUJBQXlCLElBQUksRUFFN0IsNEJBQTRCO0FBQzVCQyxXQUFXLEdBQUcsRUFDZEMsa0JBQWtCLElBQUksRUFFdEIsUUFBUTtBQUNSQyxRQUFRLEtBQUssRUFDZCxHQUFHLENBQUMsQ0FBQztJQUNKLE1BQU0sQ0FBQ0MsVUFBVUMsWUFBWSxHQUFHWiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUNhLGtCQUFrQkMsb0JBQW9CLEdBQUdkLCtDQUFRQSxDQUFDO0lBQ3pELE1BQU0sQ0FBQ2UsT0FBT0MsU0FBUyxHQUFHaEIsK0NBQVFBLENBQUM7SUFDbkMsTUFBTSxDQUFDaUIsaUJBQWlCQyxtQkFBbUIsR0FBR2xCLCtDQUFRQSxDQUFDO0lBRXZELDBEQUEwRDtJQUMxREQsZ0RBQVNBO3NDQUFDO1lBQ1IsSUFBSSxJQUE2QixFQUFFO1lBRW5DLE1BQU1vQixXQUFXQyxPQUFPQyxVQUFVLENBQUM7WUFDbkMsTUFBTUMsV0FBV0YsT0FBT0MsVUFBVSxDQUFDO1lBQ25DLE1BQU1FLGFBQWFILE9BQU9DLFVBQVUsQ0FBQztZQUNyQyxNQUFNRyxXQUFXSixPQUFPQyxVQUFVLENBQUM7WUFFbkMsTUFBTUk7cURBQVM7b0JBQ2IsTUFBTUMsZUFBZVAsU0FBU1EsT0FBTztvQkFDckMsTUFBTUMsY0FBY04sU0FBU0ssT0FBTztvQkFDcEMsTUFBTUUsZ0JBQWdCTCxTQUFTRyxPQUFPO29CQUN0QyxNQUFNRyxlQUFlSixnQkFBaUJHLGlCQUFpQkQ7b0JBQ3ZEaEIsWUFBWWtCO29CQUNaaEIsb0JBQW9CUyxXQUFXSSxPQUFPLElBQUtELENBQUFBLGdCQUFnQkcsYUFBWTtnQkFDekU7O1lBRUFKO1lBRUFOLFNBQVNZLGdCQUFnQixHQUFHLFVBQVVOO1lBQ3RDSCxTQUFTUyxnQkFBZ0IsR0FBRyxVQUFVTjtZQUN0Q0YsV0FBV1EsZ0JBQWdCLEdBQUcsVUFBVU47WUFDeENELFNBQVNPLGdCQUFnQixHQUFHLFVBQVVOO1lBQ3RDTCxPQUFPVyxnQkFBZ0IsQ0FBQyxVQUFVTjtZQUNsQ0wsT0FBT1csZ0JBQWdCLENBQUMscUJBQXFCTjtZQUU3Qzs4Q0FBTztvQkFDTE4sU0FBU2EsbUJBQW1CLEdBQUcsVUFBVVA7b0JBQ3pDSCxTQUFTVSxtQkFBbUIsR0FBRyxVQUFVUDtvQkFDekNGLFdBQVdTLG1CQUFtQixHQUFHLFVBQVVQO29CQUMzQ0QsU0FBU1EsbUJBQW1CLEdBQUcsVUFBVVA7b0JBQ3pDTCxPQUFPWSxtQkFBbUIsQ0FBQyxVQUFVUDtvQkFDckNMLE9BQU9ZLG1CQUFtQixDQUFDLHFCQUFxQlA7Z0JBQ2xEOztRQUNGO3FDQUFHLEVBQUU7SUFFTCxnREFBZ0Q7SUFDaEQxQixnREFBU0E7c0NBQUM7WUFDUixJQUFJLENBQUNHLGVBQWUrQixXQUFXOUIsU0FBUyxHQUFHO1lBRTNDLElBQUkrQixNQUFNO1lBRVYsTUFBTUM7K0RBQW1CO29CQUN2QixJQUFJLENBQUNqQyxjQUFjK0IsT0FBTyxFQUFFO29CQUU1QixJQUFJQyxLQUFLRSxxQkFBcUJGO29CQUM5QkEsTUFBTUc7dUVBQXNCOzRCQUMxQixNQUFNQyxRQUFRcEMsY0FBYytCLE9BQU8sRUFBRU0sZUFBZTs0QkFDcEQsTUFBTUMsT0FBTzNCLG1CQUFtQlIscUJBQXFCRDs0QkFDckQsTUFBTXFDLFlBQVlELE9BQU8sSUFBSUYsUUFBUUUsT0FBTzs0QkFFNUN4QixTQUFTeUI7NEJBRVQsSUFBSS9CLE9BQU87Z0NBQ1RnQyxRQUFRQyxHQUFHLENBQ1QsdUNBQ0FMLE9BQ0EsU0FDQUUsTUFDQSxVQUNBQyxVQUFVRyxPQUFPLENBQUM7NEJBRXRCO3dCQUNGOztnQkFDRjs7WUFFQVQ7WUFFQSxNQUFNVSxXQUFXLElBQUlDLGVBQWVYO1lBQ3BDVSxTQUFTRSxPQUFPLENBQUM3QyxjQUFjK0IsT0FBTztZQUV0Qzs4Q0FBTztvQkFDTCxJQUFJQyxLQUFLRSxxQkFBcUJGO29CQUM5QlcsU0FBU0csVUFBVTtnQkFDckI7O1FBQ0Y7cUNBQUc7UUFBQzlDO1FBQWVDO1FBQU1VO1FBQWtCVDtRQUFhQztRQUFvQks7S0FBTTtJQUVsRiwyQ0FBMkM7SUFDM0NYLGdEQUFTQTtzQ0FBQztZQUNSLE1BQU1rRCxLQUFLL0MsZUFBZStCO1lBQzFCLElBQUksQ0FBQ2dCLElBQUk7WUFFVCxNQUFNQzt5REFBYTtvQkFDakIsSUFBSSxDQUFDaEQsY0FBYytCLE9BQU8sRUFBRTtvQkFDNUJmLG1CQUFtQmhCLGNBQWMrQixPQUFPLENBQUNNLFdBQVcsSUFBSTtnQkFDMUQ7O1lBRUFGLHNCQUFzQmE7WUFFdEIsTUFBTUwsV0FBVyxJQUFJQyxlQUFlSTtZQUNwQ0wsU0FBU0UsT0FBTyxDQUFDRTtZQUVqQjs4Q0FBTyxJQUFNSixTQUFTRyxVQUFVOztRQUNsQztxQ0FBRztRQUFDOUM7S0FBYztJQUVsQiwyQ0FBMkM7SUFDM0MsTUFBTWlELGVBQWVoRCxTQUFTLElBQUlZLFFBQVFaO0lBRTFDLE1BQU1pRCxtQkFBbUJqRCxTQUFTLE1BQU1JLHlCQUF5QkQ7SUFFakUsTUFBTStDLDBCQUNKcEMsa0JBQWtCLElBQUksa0JBQW1CbUMsbUJBQW9CNUMsV0FBVztJQUUxRSxNQUFNOEMsZUFBZXpDLG1CQUNqQndDLDBCQUNBbEQsU0FBUyxJQUNQWSxRQUNBWixPQUFPTTtJQUViLE9BQU87UUFDTEU7UUFDQUU7UUFFQUU7UUFDQUU7UUFFQWtDO1FBQ0FHO1FBRUFGO1FBQ0FDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxob29rc1xcdXNlVmlld3BvcnRTY2FsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaG9va3MvdXNlVmlld3BvcnRTY2FsZS5qc1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG4vKipcbiAqIENlbnRyYWxpemEgdG9kYSBsYSBsb2dpY2EgZGU6XG4gKiAtIGlzTW9iaWxlIC8gaXNNb2JpbGVQb3J0cmFpdFxuICogLSBSZXNpemVPYnNlcnZlciBkZWwgY29udGVuZWRvclxuICogLSBjYWxjdWxvIGRlIHNjYWxlLCBhbmNob0NvbnRlbmVkb3JcbiAqIC0gZXNjYWxhQWN0aXZhIC8gZXNjYWxhVmlzdWFsIC8gd3JhcHBlckJhc2VXaWR0aCAvIGZpdCBtb2JpbGUgcG9ydHJhaXRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVmlld3BvcnRTY2FsZSh7XG4gIGNvbnRlbmVkb3JSZWYsXG4gIHpvb20sXG4gIC8vIGJhc2Ugd2lkdGhzICh0dSBsb2dpY2EgYWN0dWFsKVxuICBiYXNlRGVza3RvcCA9IDgwMCxcbiAgYmFzZU1vYmlsZVBvcnRyYWl0ID0gMTAwMCxcblxuICAvLyB3cmFwcGVyIHJlYWwgcXVlIGVzY2FsYXMgdmlzdWFsbWVudGUgKHR1IGxvZ2ljYSBhY3R1YWwpXG4gIHdyYXBwZXJCYXNlV2lkdGhab29tMSA9IDEwMDAsXG4gIHdyYXBwZXJCYXNlV2lkdGhab29tMDggPSAxMjIwLFxuXG4gIC8vIGJvb3N0cyAodHUgbG9naWNhIGFjdHVhbClcbiAgZml0Qm9vc3QgPSAxLjIsXG4gIHpvb21WaXN1YWxCb29zdCA9IDEuMTUsXG5cbiAgLy8gZGVidWdcbiAgZGVidWcgPSBmYWxzZSxcbn0gPSB7fSkge1xuICBjb25zdCBbaXNNb2JpbGUsIHNldElzTW9iaWxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzTW9iaWxlUG9ydHJhaXQsIHNldElzTW9iaWxlUG9ydHJhaXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2NhbGUsIHNldFNjYWxlXSA9IHVzZVN0YXRlKDEpO1xuICBjb25zdCBbYW5jaG9Db250ZW5lZG9yLCBzZXRBbmNob0NvbnRlbmVkb3JdID0gdXNlU3RhdGUoMCk7XG5cbiAgLy8gaXNNb2JpbGUgKyBpc01vYmlsZVBvcnRyYWl0IHJlYWN0aXZvIGNvbiBjb2Fyc2UgcG9pbnRlclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG5cbiAgICBjb25zdCBtcU1vYmlsZSA9IHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogNjQwcHgpXCIpO1xuICAgIGNvbnN0IG1xVGFibGV0ID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiAxMDI0cHgpXCIpO1xuICAgIGNvbnN0IG1xUG9ydHJhaXQgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDEwMjRweCkgYW5kIChvcmllbnRhdGlvbjogcG9ydHJhaXQpXCIpO1xuICAgIGNvbnN0IG1xQ29hcnNlID0gd2luZG93Lm1hdGNoTWVkaWEoXCIocG9pbnRlcjogY29hcnNlKVwiKTtcblxuICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBhY3RXaWR0aCA9IG1xTW9iaWxlLm1hdGNoZXM7XG4gICAgICBjb25zdCB0YWJsZXRXaWR0aCA9IG1xVGFibGV0Lm1hdGNoZXM7XG4gICAgICBjb25zdCBjb2Fyc2VQb2ludGVyID0gbXFDb2Fyc2UubWF0Y2hlcztcbiAgICAgIGNvbnN0IG5leHRJc01vYmlsZSA9IGNvbXBhY3RXaWR0aCB8fCAoY29hcnNlUG9pbnRlciAmJiB0YWJsZXRXaWR0aCk7XG4gICAgICBzZXRJc01vYmlsZShuZXh0SXNNb2JpbGUpO1xuICAgICAgc2V0SXNNb2JpbGVQb3J0cmFpdChtcVBvcnRyYWl0Lm1hdGNoZXMgJiYgKGNvbXBhY3RXaWR0aCB8fCBjb2Fyc2VQb2ludGVyKSk7XG4gICAgfTtcblxuICAgIHVwZGF0ZSgpO1xuXG4gICAgbXFNb2JpbGUuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgbXFUYWJsZXQuYWRkRXZlbnRMaXN0ZW5lcj8uKFwiY2hhbmdlXCIsIHVwZGF0ZSk7XG4gICAgbXFQb3J0cmFpdC5hZGRFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICBtcUNvYXJzZS5hZGRFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB1cGRhdGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtcU1vYmlsZS5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICAgIG1xVGFibGV0LnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgICAgbXFQb3J0cmFpdC5yZW1vdmVFdmVudExpc3RlbmVyPy4oXCJjaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICAgIG1xQ29hcnNlLnJlbW92ZUV2ZW50TGlzdGVuZXI/LihcImNoYW5nZVwiLCB1cGRhdGUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdXBkYXRlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwgdXBkYXRlKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gc2NhbGU6IHNvbG8gY3VhbmRvIHpvb20gPT09IDEgKGlndWFsIHF1ZSBob3kpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjb250ZW5lZG9yUmVmPy5jdXJyZW50IHx8IHpvb20gIT09IDEpIHJldHVybjtcblxuICAgIGxldCByYWYgPSBudWxsO1xuXG4gICAgY29uc3QgYWN0dWFsaXphckVzY2FsYSA9ICgpID0+IHtcbiAgICAgIGlmICghY29udGVuZWRvclJlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGlmIChyYWYpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZik7XG4gICAgICByYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjb25zdCBhbmNobyA9IGNvbnRlbmVkb3JSZWYuY3VycmVudD8ub2Zmc2V0V2lkdGggfHwgMDtcbiAgICAgICAgY29uc3QgYmFzZSA9IGlzTW9iaWxlUG9ydHJhaXQgPyBiYXNlTW9iaWxlUG9ydHJhaXQgOiBiYXNlRGVza3RvcDtcbiAgICAgICAgY29uc3QgbmV4dFNjYWxlID0gYmFzZSA+IDAgPyBhbmNobyAvIGJhc2UgOiAxO1xuXG4gICAgICAgIHNldFNjYWxlKG5leHRTY2FsZSk7XG5cbiAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBcIlt1c2VWaWV3cG9ydFNjYWxlXSBhbmNob0NvbnRlbmVkb3I9XCIsXG4gICAgICAgICAgICBhbmNobyxcbiAgICAgICAgICAgIFwiYmFzZT1cIixcbiAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICBcInNjYWxlPVwiLFxuICAgICAgICAgICAgbmV4dFNjYWxlLnRvRml4ZWQoMylcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgYWN0dWFsaXphckVzY2FsYSgpO1xuXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoYWN0dWFsaXphckVzY2FsYSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShjb250ZW5lZG9yUmVmLmN1cnJlbnQpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChyYWYpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZik7XG4gICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgfSwgW2NvbnRlbmVkb3JSZWYsIHpvb20sIGlzTW9iaWxlUG9ydHJhaXQsIGJhc2VEZXNrdG9wLCBiYXNlTW9iaWxlUG9ydHJhaXQsIGRlYnVnXSk7XG5cbiAgLy8gYW5jaG9Db250ZW5lZG9yOiBzaWVtcHJlIChpZ3VhbCBxdWUgaG95KVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGVsID0gY29udGVuZWRvclJlZj8uY3VycmVudDtcbiAgICBpZiAoIWVsKSByZXR1cm47XG5cbiAgICBjb25zdCBhY3R1YWxpemFyID0gKCkgPT4ge1xuICAgICAgaWYgKCFjb250ZW5lZG9yUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgIHNldEFuY2hvQ29udGVuZWRvcihjb250ZW5lZG9yUmVmLmN1cnJlbnQub2Zmc2V0V2lkdGggfHwgMCk7XG4gICAgfTtcblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhY3R1YWxpemFyKTtcblxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGFjdHVhbGl6YXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUoZWwpO1xuXG4gICAgcmV0dXJuICgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgfSwgW2NvbnRlbmVkb3JSZWZdKTtcblxuICAvLyBEZXJpdmFkb3MgKGlkZW50aWNvcyBhIHR1IGxvZ2ljYSBhY3R1YWwpXG4gIGNvbnN0IGVzY2FsYUFjdGl2YSA9IHpvb20gPT09IDEgPyBzY2FsZSA6IHpvb207XG5cbiAgY29uc3Qgd3JhcHBlckJhc2VXaWR0aCA9IHpvb20gPT09IDAuOCA/IHdyYXBwZXJCYXNlV2lkdGhab29tMDggOiB3cmFwcGVyQmFzZVdpZHRoWm9vbTE7XG5cbiAgY29uc3QgZXNjYWxhRml0TW9iaWxlUG9ydHJhaXQgPVxuICAgIGFuY2hvQ29udGVuZWRvciA+IDAgPyAoYW5jaG9Db250ZW5lZG9yIC8gd3JhcHBlckJhc2VXaWR0aCkgKiBmaXRCb29zdCA6IDE7XG5cbiAgY29uc3QgZXNjYWxhVmlzdWFsID0gaXNNb2JpbGVQb3J0cmFpdFxuICAgID8gZXNjYWxhRml0TW9iaWxlUG9ydHJhaXRcbiAgICA6IHpvb20gPT09IDFcbiAgICAgID8gc2NhbGVcbiAgICAgIDogem9vbSAqIHpvb21WaXN1YWxCb29zdDtcblxuICByZXR1cm4ge1xuICAgIGlzTW9iaWxlLFxuICAgIGlzTW9iaWxlUG9ydHJhaXQsXG5cbiAgICBzY2FsZSxcbiAgICBhbmNob0NvbnRlbmVkb3IsXG5cbiAgICBlc2NhbGFBY3RpdmEsXG4gICAgZXNjYWxhVmlzdWFsLFxuXG4gICAgd3JhcHBlckJhc2VXaWR0aCxcbiAgICBlc2NhbGFGaXRNb2JpbGVQb3J0cmFpdCxcbiAgfTtcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVZpZXdwb3J0U2NhbGUiLCJjb250ZW5lZG9yUmVmIiwiem9vbSIsImJhc2VEZXNrdG9wIiwiYmFzZU1vYmlsZVBvcnRyYWl0Iiwid3JhcHBlckJhc2VXaWR0aFpvb20xIiwid3JhcHBlckJhc2VXaWR0aFpvb20wOCIsImZpdEJvb3N0Iiwiem9vbVZpc3VhbEJvb3N0IiwiZGVidWciLCJpc01vYmlsZSIsInNldElzTW9iaWxlIiwiaXNNb2JpbGVQb3J0cmFpdCIsInNldElzTW9iaWxlUG9ydHJhaXQiLCJzY2FsZSIsInNldFNjYWxlIiwiYW5jaG9Db250ZW5lZG9yIiwic2V0QW5jaG9Db250ZW5lZG9yIiwibXFNb2JpbGUiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibXFUYWJsZXQiLCJtcVBvcnRyYWl0IiwibXFDb2Fyc2UiLCJ1cGRhdGUiLCJjb21wYWN0V2lkdGgiLCJtYXRjaGVzIiwidGFibGV0V2lkdGgiLCJjb2Fyc2VQb2ludGVyIiwibmV4dElzTW9iaWxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjdXJyZW50IiwicmFmIiwiYWN0dWFsaXphckVzY2FsYSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5jaG8iLCJvZmZzZXRXaWR0aCIsImJhc2UiLCJuZXh0U2NhbGUiLCJjb25zb2xlIiwibG9nIiwidG9GaXhlZCIsIm9ic2VydmVyIiwiUmVzaXplT2JzZXJ2ZXIiLCJvYnNlcnZlIiwiZGlzY29ubmVjdCIsImVsIiwiYWN0dWFsaXphciIsImVzY2FsYUFjdGl2YSIsIndyYXBwZXJCYXNlV2lkdGgiLCJlc2NhbGFGaXRNb2JpbGVQb3J0cmFpdCIsImVzY2FsYVZpc3VhbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/hooks/useViewportScale.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/models/estructuraInicial.js":
/*!*****************************************!*\
  !*** ./src/models/estructuraInicial.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   crearObjetoTexto: () => (/* binding */ crearObjetoTexto),\n/* harmony export */   crearSeccion: () => (/* binding */ crearSeccion)\n/* harmony export */ });\n// ✅ Paso 1.1 – Modelo de datos para secciones y objetos (en Firestore)\n// Este archivo puede ir en src/models/estructuraInicial.js\nconst crearSeccion = ({ tipo = \"custom\", altura = 300, fondo = \"#ffffff\" }, seccionesExistentes = [])=>{\n    const maxOrden = Math.max(-1, ...seccionesExistentes.map((s)=>s.orden ?? 0));\n    return {\n        id: `seccion-${Date.now()}`,\n        tipo,\n        altura,\n        fondo,\n        orden: maxOrden + 1\n    };\n};\nconst crearObjetoTexto = ({ texto = \"Texto\", x = 100, y = 100, seccionId })=>{\n    return {\n        id: `obj-${Date.now()}`,\n        tipo: \"texto\",\n        texto,\n        x,\n        y,\n        fontSize: 24,\n        color: \"#000000\",\n        fontFamily: \"sans-serif\",\n        fontWeight: \"normal\",\n        fontStyle: \"normal\",\n        textDecoration: \"none\",\n        rotation: 0,\n        scaleX: 1,\n        scaleY: 1,\n        seccionId\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9tb2RlbHMvZXN0cnVjdHVyYUluaWNpYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSx1RUFBdUU7QUFFdkUsMkRBQTJEO0FBRXBELE1BQU1BLGVBQWUsQ0FBQyxFQUFFQyxPQUFPLFFBQVEsRUFBRUMsU0FBUyxHQUFHLEVBQUVDLFFBQVEsU0FBUyxFQUFFLEVBQUVDLHNCQUFzQixFQUFFO0lBQ3pHLE1BQU1DLFdBQVdDLEtBQUtDLEdBQUcsQ0FBQyxDQUFDLE1BQU1ILG9CQUFvQkksR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxLQUFLLElBQUk7SUFFekUsT0FBTztRQUNMQyxJQUFJLENBQUMsUUFBUSxFQUFFQyxLQUFLQyxHQUFHLElBQUk7UUFDM0JaO1FBQ0FDO1FBQ0FDO1FBQ0FPLE9BQU9MLFdBQVc7SUFDcEI7QUFDRixFQUFFO0FBSUssTUFBTVMsbUJBQW1CLENBQUMsRUFBRUMsUUFBUSxPQUFPLEVBQUVDLElBQUksR0FBRyxFQUFFQyxJQUFJLEdBQUcsRUFBRUMsU0FBUyxFQUFFO0lBQy9FLE9BQU87UUFDTFAsSUFBSSxDQUFDLElBQUksRUFBRUMsS0FBS0MsR0FBRyxJQUFJO1FBQ3ZCWixNQUFNO1FBQ05jO1FBQ0FDO1FBQ0FDO1FBQ0FFLFVBQVU7UUFDVkMsT0FBTztRQUNQQyxZQUFZO1FBQ1pDLFlBQVk7UUFDWkMsV0FBVztRQUNYQyxnQkFBZ0I7UUFDaEJDLFVBQVU7UUFDVkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JUO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXG1vZGVsc1xcZXN0cnVjdHVyYUluaWNpYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g4pyFIFBhc28gMS4xIOKAkyBNb2RlbG8gZGUgZGF0b3MgcGFyYSBzZWNjaW9uZXMgeSBvYmpldG9zIChlbiBGaXJlc3RvcmUpXHJcblxyXG4vLyBFc3RlIGFyY2hpdm8gcHVlZGUgaXIgZW4gc3JjL21vZGVscy9lc3RydWN0dXJhSW5pY2lhbC5qc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWFyU2VjY2lvbiA9ICh7IHRpcG8gPSBcImN1c3RvbVwiLCBhbHR1cmEgPSAzMDAsIGZvbmRvID0gXCIjZmZmZmZmXCIgfSwgc2VjY2lvbmVzRXhpc3RlbnRlcyA9IFtdKSA9PiB7XHJcbiAgY29uc3QgbWF4T3JkZW4gPSBNYXRoLm1heCgtMSwgLi4uc2VjY2lvbmVzRXhpc3RlbnRlcy5tYXAocyA9PiBzLm9yZGVuID8/IDApKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlkOiBgc2VjY2lvbi0ke0RhdGUubm93KCl9YCxcclxuICAgIHRpcG8sXHJcbiAgICBhbHR1cmEsXHJcbiAgICBmb25kbyxcclxuICAgIG9yZGVuOiBtYXhPcmRlbiArIDEsIC8vIOKchSBTaWVtcHJlIGNvbnNlY3V0aXZvXHJcbiAgfTtcclxufTtcclxuXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWFyT2JqZXRvVGV4dG8gPSAoeyB0ZXh0byA9IFwiVGV4dG9cIiwgeCA9IDEwMCwgeSA9IDEwMCwgc2VjY2lvbklkIH0pID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IGBvYmotJHtEYXRlLm5vdygpfWAsXHJcbiAgICB0aXBvOiBcInRleHRvXCIsXHJcbiAgICB0ZXh0byxcclxuICAgIHgsXHJcbiAgICB5LFxyXG4gICAgZm9udFNpemU6IDI0LFxyXG4gICAgY29sb3I6IFwiIzAwMDAwMFwiLFxyXG4gICAgZm9udEZhbWlseTogXCJzYW5zLXNlcmlmXCIsXHJcbiAgICBmb250V2VpZ2h0OiBcIm5vcm1hbFwiLFxyXG4gICAgZm9udFN0eWxlOiBcIm5vcm1hbFwiLFxyXG4gICAgdGV4dERlY29yYXRpb246IFwibm9uZVwiLFxyXG4gICAgcm90YXRpb246IDAsXHJcbiAgICBzY2FsZVg6IDEsXHJcbiAgICBzY2FsZVk6IDEsXHJcbiAgICBzZWNjaW9uSWQsXHJcbiAgfTtcclxufTsiXSwibmFtZXMiOlsiY3JlYXJTZWNjaW9uIiwidGlwbyIsImFsdHVyYSIsImZvbmRvIiwic2VjY2lvbmVzRXhpc3RlbnRlcyIsIm1heE9yZGVuIiwiTWF0aCIsIm1heCIsIm1hcCIsInMiLCJvcmRlbiIsImlkIiwiRGF0ZSIsIm5vdyIsImNyZWFyT2JqZXRvVGV4dG8iLCJ0ZXh0byIsIngiLCJ5Iiwic2VjY2lvbklkIiwiZm9udFNpemUiLCJjb2xvciIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwidGV4dERlY29yYXRpb24iLCJyb3RhdGlvbiIsInNjYWxlWCIsInNjYWxlWSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/models/estructuraInicial.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/models/lineConstants.js":
/*!*************************************!*\
  !*** ./src/models/lineConstants.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LINE_CONSTANTS: () => (/* binding */ LINE_CONSTANTS)\n/* harmony export */ });\n// src/models/lineConstants.js\n// Constantes para líneas - mantener consistencia entre Canvas y HTML\nconst LINE_CONSTANTS = {\n    STROKE_WIDTH: 2,\n    HIT_STROKE_WIDTH: 15,\n    DEFAULT_LENGTH: 100,\n    DEFAULT_COLOR: \"#000000\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9tb2RlbHMvbGluZUNvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsOEJBQThCO0FBQzlCLHFFQUFxRTtBQUM5RCxNQUFNQSxpQkFBaUI7SUFDNUJDLGNBQWM7SUFDZEMsa0JBQWtCO0lBQ2xCQyxnQkFBZ0I7SUFDaEJDLGVBQWU7QUFDakIsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxtb2RlbHNcXGxpbmVDb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL21vZGVscy9saW5lQ29uc3RhbnRzLmpzXHJcbi8vIENvbnN0YW50ZXMgcGFyYSBsw61uZWFzIC0gbWFudGVuZXIgY29uc2lzdGVuY2lhIGVudHJlIENhbnZhcyB5IEhUTUxcclxuZXhwb3J0IGNvbnN0IExJTkVfQ09OU1RBTlRTID0ge1xyXG4gIFNUUk9LRV9XSURUSDogMiwgICAgICAgIC8vIEdyb3NvciB2aXN1YWwgZGUgbGEgbMOtbmVhIGVuIHDDrXhlbGVzXHJcbiAgSElUX1NUUk9LRV9XSURUSDogMTUsICAgLy8gw4FyZWEgZGUgY2xpY2sgbcOhcyBncmFuZGUgcGFyYSBtZWpvciBVWFxyXG4gIERFRkFVTFRfTEVOR1RIOiAxMDAsICAgIC8vIExvbmdpdHVkIHBvciBkZWZlY3RvIGRlIHVuYSBsw61uZWFcclxuICBERUZBVUxUX0NPTE9SOiBcIiMwMDAwMDBcIlxyXG59OyJdLCJuYW1lcyI6WyJMSU5FX0NPTlNUQU5UUyIsIlNUUk9LRV9XSURUSCIsIkhJVF9TVFJPS0VfV0lEVEgiLCJERUZBVUxUX0xFTkdUSCIsIkRFRkFVTFRfQ09MT1IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/models/lineConstants.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/accionesFondo.js":
/*!************************************!*\
  !*** ./src/utils/accionesFondo.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   desanclarImagenDeFondo: () => (/* binding */ desanclarImagenDeFondo),\n/* harmony export */   reemplazarFondoSeccion: () => (/* binding */ reemplazarFondoSeccion)\n/* harmony export */ });\n// src/utils/accionesFondo.js\n/**\r\n * 🎨 Reemplazar imagen seleccionada como fondo de sección\r\n */ const reemplazarFondoSeccion = ({ elementoImagen, secciones, objetos, setSecciones, setObjetos, setElementosSeleccionados, setMostrarPanelZ })=>{\n    if (!elementoImagen || elementoImagen.tipo !== \"imagen\") {\n        console.warn(\"❌ El elemento no es una imagen válida\");\n        return;\n    }\n    if (!elementoImagen.seccionId) {\n        console.warn(\"❌ La imagen no tiene sección asignada\");\n        return;\n    }\n    try {\n        console.log(\"🎨 Convirtiendo imagen a fondo de sección:\", elementoImagen.id);\n        const seccionesActualizadas = secciones.map((seccion)=>seccion.id === elementoImagen.seccionId ? {\n                ...seccion,\n                fondo: \"#ffffff\",\n                fondoTipo: \"imagen\",\n                fondoImagen: elementoImagen.src,\n                fondoImagenOffsetX: 0,\n                fondoImagenOffsetY: 0,\n                fondoImagenDraggable: true\n            } : seccion);\n        const objetosFiltrados = objetos.filter((obj)=>obj.id !== elementoImagen.id);\n        setSecciones(seccionesActualizadas);\n        setObjetos(objetosFiltrados);\n        setElementosSeleccionados([]);\n        setMostrarPanelZ(false);\n        console.log(\"✅ Fondo de sección actualizado con imagen\");\n    } catch (error) {\n        console.error(\"❌ Error al reemplazar fondo de sección:\", error);\n        alert(\"Ocurrió un error al cambiar el fondo. Inténtalo de nuevo.\");\n    }\n};\n/**\r\n * 🔄 Desanclar imagen de fondo y convertirla en objeto editable\r\n */ const desanclarImagenDeFondo = ({ seccionId, secciones, objetos, setSecciones, setObjetos, setElementosSeleccionados })=>{\n    const seccion = secciones.find((s)=>s.id === seccionId);\n    if (!seccion || seccion.fondoTipo !== \"imagen\") {\n        console.warn(\"❌ La sección no tiene imagen de fondo para desanclar\");\n        return;\n    }\n    try {\n        const img = new Image();\n        img.crossOrigin = \"anonymous\";\n        img.src = seccion.fondoImagen;\n        img.onload = ()=>{\n            const originalWidth = img.naturalWidth || img.width;\n            const originalHeight = img.naturalHeight || img.height;\n            const maxWidth = 450;\n            const scale = Math.min(1, maxWidth / originalWidth);\n            const finalWidth = originalWidth * scale;\n            const finalHeight = originalHeight * scale;\n            const nuevoElementoImagen = {\n                id: `img-fondo-${Date.now()}`,\n                tipo: \"imagen\",\n                src: seccion.fondoImagen,\n                x: Math.max(0, (800 - finalWidth) / 2),\n                y: 50,\n                width: finalWidth,\n                height: finalHeight,\n                rotation: 0,\n                scaleX: 1,\n                scaleY: 1,\n                seccionId\n            };\n            const seccionesActualizadas = limpiarFondoImagen(secciones, seccionId);\n            const objetosActualizados = [\n                ...objetos,\n                nuevoElementoImagen\n            ];\n            setSecciones(seccionesActualizadas);\n            setObjetos(objetosActualizados);\n            setElementosSeleccionados([\n                nuevoElementoImagen.id\n            ]);\n            console.log(\"✅ Imagen desanclada con tamaño ajustado\");\n        };\n        img.onerror = ()=>{\n            console.warn(\"⚠️ No se pudo cargar la imagen, usando tamaño por defecto\");\n            const nuevoElementoImagen = {\n                id: `img-fondo-${Date.now()}`,\n                tipo: \"imagen\",\n                src: seccion.fondoImagen,\n                x: 100,\n                y: 50,\n                width: 600,\n                height: 400,\n                rotation: 0,\n                scaleX: 1,\n                scaleY: 1,\n                seccionId\n            };\n            const seccionesActualizadas = limpiarFondoImagen(secciones, seccionId);\n            const objetosActualizados = [\n                ...objetos,\n                nuevoElementoImagen\n            ];\n            setSecciones(seccionesActualizadas);\n            setObjetos(objetosActualizados);\n            setElementosSeleccionados([\n                nuevoElementoImagen.id\n            ]);\n            console.log(\"✅ Imagen desanclada con tamaño por defecto\");\n        };\n    } catch (error) {\n        console.error(\"❌ Error al desanclar imagen:\", error);\n        alert(\"Ocurrió un error al desanclar la imagen.\");\n    }\n};\n// 🧼 Helper para limpiar campos de imagen de fondo de una sección\nfunction limpiarFondoImagen(secciones, seccionId) {\n    return secciones.map((s)=>{\n        if (s.id !== seccionId) return s;\n        const limpio = {\n            ...s,\n            fondo: \"#ffffff\"\n        };\n        delete limpio.fondoTipo;\n        delete limpio.fondoImagen;\n        delete limpio.fondoImagenOffsetX;\n        delete limpio.fondoImagenOffsetY;\n        delete limpio.fondoImagenDraggable;\n        return limpio;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9hY2Npb25lc0ZvbmRvLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNkJBQTZCO0FBRTdCOztDQUVDLEdBQ00sTUFBTUEseUJBQXlCLENBQUMsRUFDckNDLGNBQWMsRUFDZEMsU0FBUyxFQUNUQyxPQUFPLEVBQ1BDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyx5QkFBeUIsRUFDekJDLGdCQUFnQixFQUNqQjtJQUNDLElBQUksQ0FBQ04sa0JBQWtCQSxlQUFlTyxJQUFJLEtBQUssVUFBVTtRQUN2REMsUUFBUUMsSUFBSSxDQUFDO1FBQ2I7SUFDRjtJQUVBLElBQUksQ0FBQ1QsZUFBZVUsU0FBUyxFQUFFO1FBQzdCRixRQUFRQyxJQUFJLENBQUM7UUFDYjtJQUNGO0lBRUEsSUFBSTtRQUNGRCxRQUFRRyxHQUFHLENBQUMsOENBQThDWCxlQUFlWSxFQUFFO1FBRTNFLE1BQU1DLHdCQUF3QlosVUFBVWEsR0FBRyxDQUFDLENBQUNDLFVBQzNDQSxRQUFRSCxFQUFFLEtBQUtaLGVBQWVVLFNBQVMsR0FDbkM7Z0JBQ0UsR0FBR0ssT0FBTztnQkFDVkMsT0FBTztnQkFDUEMsV0FBVztnQkFDWEMsYUFBYWxCLGVBQWVtQixHQUFHO2dCQUMvQkMsb0JBQW9CO2dCQUNwQkMsb0JBQW9CO2dCQUNwQkMsc0JBQXNCO1lBQ3hCLElBQ0FQO1FBR04sTUFBTVEsbUJBQW1CckIsUUFBUXNCLE1BQU0sQ0FBQyxDQUFDQyxNQUFRQSxJQUFJYixFQUFFLEtBQUtaLGVBQWVZLEVBQUU7UUFFN0VULGFBQWFVO1FBQ2JULFdBQVdtQjtRQUNYbEIsMEJBQTBCLEVBQUU7UUFDNUJDLGlCQUFpQjtRQUVqQkUsUUFBUUcsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPZSxPQUFPO1FBQ2RsQixRQUFRa0IsS0FBSyxDQUFDLDJDQUEyQ0E7UUFDekRDLE1BQU07SUFDUjtBQUNGLEVBQUU7QUFHRjs7Q0FFQyxHQUNNLE1BQU1DLHlCQUF5QixDQUFDLEVBQ3JD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cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXHV0aWxzXFxhY2Npb25lc0ZvbmRvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9hY2Npb25lc0ZvbmRvLmpzXHJcblxyXG4vKipcclxuICog8J+OqCBSZWVtcGxhemFyIGltYWdlbiBzZWxlY2Npb25hZGEgY29tbyBmb25kbyBkZSBzZWNjacOzblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJlZW1wbGF6YXJGb25kb1NlY2Npb24gPSAoe1xyXG4gIGVsZW1lbnRvSW1hZ2VuLFxyXG4gIHNlY2Npb25lcyxcclxuICBvYmpldG9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBzZXRPYmpldG9zLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgc2V0TW9zdHJhclBhbmVsWixcclxufSkgPT4ge1xyXG4gIGlmICghZWxlbWVudG9JbWFnZW4gfHwgZWxlbWVudG9JbWFnZW4udGlwbyAhPT0gXCJpbWFnZW5cIikge1xyXG4gICAgY29uc29sZS53YXJuKFwi4p2MIEVsIGVsZW1lbnRvIG5vIGVzIHVuYSBpbWFnZW4gdsOhbGlkYVwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmICghZWxlbWVudG9JbWFnZW4uc2VjY2lvbklkKSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCLinYwgTGEgaW1hZ2VuIG5vIHRpZW5lIHNlY2Npw7NuIGFzaWduYWRhXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+OqCBDb252aXJ0aWVuZG8gaW1hZ2VuIGEgZm9uZG8gZGUgc2VjY2nDs246XCIsIGVsZW1lbnRvSW1hZ2VuLmlkKTtcclxuXHJcbiAgICBjb25zdCBzZWNjaW9uZXNBY3R1YWxpemFkYXMgPSBzZWNjaW9uZXMubWFwKChzZWNjaW9uKSA9PlxyXG4gICAgICBzZWNjaW9uLmlkID09PSBlbGVtZW50b0ltYWdlbi5zZWNjaW9uSWRcclxuICAgICAgICA/IHtcclxuICAgICAgICAgICAgLi4uc2VjY2lvbixcclxuICAgICAgICAgICAgZm9uZG86IFwiI2ZmZmZmZlwiLFxyXG4gICAgICAgICAgICBmb25kb1RpcG86IFwiaW1hZ2VuXCIsXHJcbiAgICAgICAgICAgIGZvbmRvSW1hZ2VuOiBlbGVtZW50b0ltYWdlbi5zcmMsXHJcbiAgICAgICAgICAgIGZvbmRvSW1hZ2VuT2Zmc2V0WDogMCxcclxuICAgICAgICAgICAgZm9uZG9JbWFnZW5PZmZzZXRZOiAwLFxyXG4gICAgICAgICAgICBmb25kb0ltYWdlbkRyYWdnYWJsZTogdHJ1ZSxcclxuICAgICAgICAgIH1cclxuICAgICAgICA6IHNlY2Npb25cclxuICAgICk7XHJcblxyXG4gICAgY29uc3Qgb2JqZXRvc0ZpbHRyYWRvcyA9IG9iamV0b3MuZmlsdGVyKChvYmopID0+IG9iai5pZCAhPT0gZWxlbWVudG9JbWFnZW4uaWQpO1xyXG5cclxuICAgIHNldFNlY2Npb25lcyhzZWNjaW9uZXNBY3R1YWxpemFkYXMpO1xyXG4gICAgc2V0T2JqZXRvcyhvYmpldG9zRmlsdHJhZG9zKTtcclxuICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW10pO1xyXG4gICAgc2V0TW9zdHJhclBhbmVsWihmYWxzZSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLinIUgRm9uZG8gZGUgc2VjY2nDs24gYWN0dWFsaXphZG8gY29uIGltYWdlblwiKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBhbCByZWVtcGxhemFyIGZvbmRvIGRlIHNlY2Npw7NuOlwiLCBlcnJvcik7XHJcbiAgICBhbGVydChcIk9jdXJyacOzIHVuIGVycm9yIGFsIGNhbWJpYXIgZWwgZm9uZG8uIEludMOpbnRhbG8gZGUgbnVldm8uXCIpO1xyXG4gIH1cclxufTtcclxuXHJcblxyXG4vKipcclxuICog8J+UhCBEZXNhbmNsYXIgaW1hZ2VuIGRlIGZvbmRvIHkgY29udmVydGlybGEgZW4gb2JqZXRvIGVkaXRhYmxlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZGVzYW5jbGFySW1hZ2VuRGVGb25kbyA9ICh7XHJcbiAgc2VjY2lvbklkLFxyXG4gIHNlY2Npb25lcyxcclxuICBvYmpldG9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBzZXRPYmpldG9zLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbn0pID0+IHtcclxuICBjb25zdCBzZWNjaW9uID0gc2VjY2lvbmVzLmZpbmQocyA9PiBzLmlkID09PSBzZWNjaW9uSWQpO1xyXG4gIGlmICghc2VjY2lvbiB8fCBzZWNjaW9uLmZvbmRvVGlwbyAhPT0gXCJpbWFnZW5cIikge1xyXG4gICAgY29uc29sZS53YXJuKFwi4p2MIExhIHNlY2Npw7NuIG5vIHRpZW5lIGltYWdlbiBkZSBmb25kbyBwYXJhIGRlc2FuY2xhclwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIGltZy5jcm9zc09yaWdpbiA9IFwiYW5vbnltb3VzXCI7XHJcbiAgICBpbWcuc3JjID0gc2VjY2lvbi5mb25kb0ltYWdlbjtcclxuXHJcbiAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gIGNvbnN0IG9yaWdpbmFsV2lkdGggPSBpbWcubmF0dXJhbFdpZHRoIHx8IGltZy53aWR0aDtcclxuICBjb25zdCBvcmlnaW5hbEhlaWdodCA9IGltZy5uYXR1cmFsSGVpZ2h0IHx8IGltZy5oZWlnaHQ7XHJcblxyXG4gIGNvbnN0IG1heFdpZHRoID0gNDUwO1xyXG4gIGNvbnN0IHNjYWxlID0gTWF0aC5taW4oMSwgbWF4V2lkdGggLyBvcmlnaW5hbFdpZHRoKTtcclxuXHJcbiAgY29uc3QgZmluYWxXaWR0aCA9IG9yaWdpbmFsV2lkdGggKiBzY2FsZTtcclxuICBjb25zdCBmaW5hbEhlaWdodCA9IG9yaWdpbmFsSGVpZ2h0ICogc2NhbGU7XHJcblxyXG4gIGNvbnN0IG51ZXZvRWxlbWVudG9JbWFnZW4gPSB7XHJcbiAgICBpZDogYGltZy1mb25kby0ke0RhdGUubm93KCl9YCxcclxuICAgIHRpcG86IFwiaW1hZ2VuXCIsXHJcbiAgICBzcmM6IHNlY2Npb24uZm9uZG9JbWFnZW4sXHJcbiAgICB4OiBNYXRoLm1heCgwLCAoODAwIC0gZmluYWxXaWR0aCkgLyAyKSxcclxuICAgIHk6IDUwLFxyXG4gICAgd2lkdGg6IGZpbmFsV2lkdGgsXHJcbiAgICBoZWlnaHQ6IGZpbmFsSGVpZ2h0LFxyXG4gICAgcm90YXRpb246IDAsXHJcbiAgICBzY2FsZVg6IDEsXHJcbiAgICBzY2FsZVk6IDEsXHJcbiAgICBzZWNjaW9uSWQsXHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2VjY2lvbmVzQWN0dWFsaXphZGFzID0gbGltcGlhckZvbmRvSW1hZ2VuKHNlY2Npb25lcywgc2VjY2lvbklkKTtcclxuICBjb25zdCBvYmpldG9zQWN0dWFsaXphZG9zID0gWy4uLm9iamV0b3MsIG51ZXZvRWxlbWVudG9JbWFnZW5dO1xyXG5cclxuICBzZXRTZWNjaW9uZXMoc2VjY2lvbmVzQWN0dWFsaXphZGFzKTtcclxuICBzZXRPYmpldG9zKG9iamV0b3NBY3R1YWxpemFkb3MpO1xyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW251ZXZvRWxlbWVudG9JbWFnZW4uaWRdKTtcclxuXHJcbiAgY29uc29sZS5sb2coXCLinIUgSW1hZ2VuIGRlc2FuY2xhZGEgY29uIHRhbWHDsW8gYWp1c3RhZG9cIik7XHJcbn07XHJcblxyXG5cclxuICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gTm8gc2UgcHVkbyBjYXJnYXIgbGEgaW1hZ2VuLCB1c2FuZG8gdGFtYcOxbyBwb3IgZGVmZWN0b1wiKTtcclxuXHJcbiAgICAgIGNvbnN0IG51ZXZvRWxlbWVudG9JbWFnZW4gPSB7XHJcbiAgICAgICAgaWQ6IGBpbWctZm9uZG8tJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgICAgdGlwbzogXCJpbWFnZW5cIixcclxuICAgICAgICBzcmM6IHNlY2Npb24uZm9uZG9JbWFnZW4sXHJcbiAgICAgICAgeDogMTAwLFxyXG4gICAgICAgIHk6IDUwLFxyXG4gICAgICAgIHdpZHRoOiA2MDAsXHJcbiAgICAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgICAgICAgcm90YXRpb246IDAsXHJcbiAgICAgICAgc2NhbGVYOiAxLFxyXG4gICAgICAgIHNjYWxlWTogMSxcclxuICAgICAgICBzZWNjaW9uSWQsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBzZWNjaW9uZXNBY3R1YWxpemFkYXMgPSBsaW1waWFyRm9uZG9JbWFnZW4oc2VjY2lvbmVzLCBzZWNjaW9uSWQpO1xyXG4gICAgICBjb25zdCBvYmpldG9zQWN0dWFsaXphZG9zID0gWy4uLm9iamV0b3MsIG51ZXZvRWxlbWVudG9JbWFnZW5dO1xyXG5cclxuICAgICAgc2V0U2VjY2lvbmVzKHNlY2Npb25lc0FjdHVhbGl6YWRhcyk7XHJcbiAgICAgIHNldE9iamV0b3Mob2JqZXRvc0FjdHVhbGl6YWRvcyk7XHJcbiAgICAgIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MoW251ZXZvRWxlbWVudG9JbWFnZW4uaWRdKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIEltYWdlbiBkZXNhbmNsYWRhIGNvbiB0YW1hw7FvIHBvciBkZWZlY3RvXCIpO1xyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBhbCBkZXNhbmNsYXIgaW1hZ2VuOlwiLCBlcnJvcik7XHJcbiAgICBhbGVydChcIk9jdXJyacOzIHVuIGVycm9yIGFsIGRlc2FuY2xhciBsYSBpbWFnZW4uXCIpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIPCfp7wgSGVscGVyIHBhcmEgbGltcGlhciBjYW1wb3MgZGUgaW1hZ2VuIGRlIGZvbmRvIGRlIHVuYSBzZWNjacOzblxyXG5mdW5jdGlvbiBsaW1waWFyRm9uZG9JbWFnZW4oc2VjY2lvbmVzLCBzZWNjaW9uSWQpIHtcclxuICByZXR1cm4gc2VjY2lvbmVzLm1hcChzID0+IHtcclxuICAgIGlmIChzLmlkICE9PSBzZWNjaW9uSWQpIHJldHVybiBzO1xyXG5cclxuICAgIGNvbnN0IGxpbXBpbyA9IHsgLi4ucywgZm9uZG86IFwiI2ZmZmZmZlwiIH07XHJcbiAgICBkZWxldGUgbGltcGlvLmZvbmRvVGlwbztcclxuICAgIGRlbGV0ZSBsaW1waW8uZm9uZG9JbWFnZW47XHJcbiAgICBkZWxldGUgbGltcGlvLmZvbmRvSW1hZ2VuT2Zmc2V0WDtcclxuICAgIGRlbGV0ZSBsaW1waW8uZm9uZG9JbWFnZW5PZmZzZXRZO1xyXG4gICAgZGVsZXRlIGxpbXBpby5mb25kb0ltYWdlbkRyYWdnYWJsZTtcclxuICAgIHJldHVybiBsaW1waW87XHJcbiAgfSk7XHJcbn0iXSwibmFtZXMiOlsicmVlbXBsYXphckZvbmRvU2VjY2lvbiIsImVsZW1lbnRvSW1hZ2VuIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsInNldFNlY2Npb25lcyIsInNldE9iamV0b3MiLCJzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic2V0TW9zdHJhclBhbmVsWiIsInRpcG8iLCJjb25zb2xlIiwid2FybiIsInNlY2Npb25JZCIsImxvZyIsImlkIiwic2VjY2lvbmVzQWN0dWFsaXphZGFzIiwibWFwIiwic2VjY2lvbiIsImZvbmRvIiwiZm9uZG9UaXBvIiwiZm9uZG9JbWFnZW4iLCJzcmMiLCJmb25kb0ltYWdlbk9mZnNldFgiLCJmb25kb0ltYWdlbk9mZnNldFkiLCJmb25kb0ltYWdlbkRyYWdnYWJsZSIsIm9iamV0b3NGaWx0cmFkb3MiLCJmaWx0ZXIiLCJvYmoiLCJlcnJvciIsImFsZXJ0IiwiZGVzYW5jbGFySW1hZ2VuRGVGb25kbyIsImZpbmQiLCJzIiwiaW1nIiwiSW1hZ2UiLCJjcm9zc09yaWdpbiIsIm9ubG9hZCIsIm9yaWdpbmFsV2lkdGgiLCJuYXR1cmFsV2lkdGgiLCJ3aWR0aCIsIm9yaWdpbmFsSGVpZ2h0IiwibmF0dXJhbEhlaWdodCIsImhlaWdodCIsIm1heFdpZHRoIiwic2NhbGUiLCJNYXRoIiwibWluIiwiZmluYWxXaWR0aCIsImZpbmFsSGVpZ2h0IiwibnVldm9FbGVtZW50b0ltYWdlbiIsIkRhdGUiLCJub3ciLCJ4IiwibWF4IiwieSIsInJvdGF0aW9uIiwic2NhbGVYIiwic2NhbGVZIiwibGltcGlhckZvbmRvSW1hZ2VuIiwib2JqZXRvc0FjdHVhbGl6YWRvcyIsIm9uZXJyb3IiLCJsaW1waW8iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/accionesFondo.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/calcGrid.js":
/*!*******************************!*\
  !*** ./src/utils/calcGrid.js ***!
  \*******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcGalleryLayout: () => (/* binding */ calcGalleryLayout)\n/* harmony export */ });\n// src/utils/calcGrid.js\n/**\r\n * cellRatio = ALTO/ANCHO por celda (1 -> 1:1, 3/4 -> 4:3, 9/16 -> 16:9)\r\n * width = ancho del grupo (frame)\r\n * Devuelve rects (x,y,width,height) y el alto total necesario del grupo.\r\n */ function calcGalleryLayout({ width, rows, cols, gap, cellRatio }) {\n    const totalGapX = gap * (cols - 1);\n    const totalGapY = gap * (rows - 1);\n    // Ancho de cada celda\n    const cellW = (width - totalGapX) / cols;\n    const cellH = cellW * cellRatio;\n    // Alto total del grupo para que las celdas respeten la proporción\n    const totalHeight = rows * cellH + totalGapY;\n    const rects = [];\n    for(let r = 0; r < rows; r++){\n        for(let c = 0; c < cols; c++){\n            rects.push({\n                x: c * (cellW + gap),\n                y: r * (cellH + gap),\n                width: cellW,\n                height: cellH\n            });\n        }\n    }\n    return {\n        rects,\n        totalHeight\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9jYWxjR3JpZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsd0JBQXdCO0FBRXhCOzs7O0NBSUMsR0FDTSxTQUFTQSxrQkFBa0IsRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMsR0FBRyxFQUFFQyxTQUFTLEVBQUU7SUFDckUsTUFBTUMsWUFBWUYsTUFBT0QsQ0FBQUEsT0FBTztJQUNoQyxNQUFNSSxZQUFZSCxNQUFPRixDQUFBQSxPQUFPO0lBRWhDLHNCQUFzQjtJQUN0QixNQUFNTSxRQUFRLENBQUNQLFFBQVFLLFNBQVEsSUFBS0g7SUFDcEMsTUFBTU0sUUFBUUQsUUFBUUg7SUFFdEIsa0VBQWtFO0lBQ2xFLE1BQU1LLGNBQWNSLE9BQU9PLFFBQVFGO0lBRW5DLE1BQU1JLFFBQVEsRUFBRTtJQUNoQixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVYsTUFBTVUsSUFBSztRQUM3QixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSVYsTUFBTVUsSUFBSztZQUM3QkYsTUFBTUcsSUFBSSxDQUFDO2dCQUNUQyxHQUFHRixJQUFLTCxDQUFBQSxRQUFRSixHQUFFO2dCQUNsQlksR0FBR0osSUFBS0gsQ0FBQUEsUUFBUUwsR0FBRTtnQkFDbEJILE9BQU9PO2dCQUNQUyxRQUFRUjtZQUNWO1FBQ0Y7SUFDRjtJQUVBLE9BQU87UUFBRUU7UUFBT0Q7SUFBWTtBQUM5QiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcY2FsY0dyaWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2NhbGNHcmlkLmpzXHJcblxyXG4vKipcclxuICogY2VsbFJhdGlvID0gQUxUTy9BTkNITyBwb3IgY2VsZGEgKDEgLT4gMToxLCAzLzQgLT4gNDozLCA5LzE2IC0+IDE2OjkpXHJcbiAqIHdpZHRoID0gYW5jaG8gZGVsIGdydXBvIChmcmFtZSlcclxuICogRGV2dWVsdmUgcmVjdHMgKHgseSx3aWR0aCxoZWlnaHQpIHkgZWwgYWx0byB0b3RhbCBuZWNlc2FyaW8gZGVsIGdydXBvLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNHYWxsZXJ5TGF5b3V0KHsgd2lkdGgsIHJvd3MsIGNvbHMsIGdhcCwgY2VsbFJhdGlvIH0pIHtcclxuICBjb25zdCB0b3RhbEdhcFggPSBnYXAgKiAoY29scyAtIDEpO1xyXG4gIGNvbnN0IHRvdGFsR2FwWSA9IGdhcCAqIChyb3dzIC0gMSk7XHJcblxyXG4gIC8vIEFuY2hvIGRlIGNhZGEgY2VsZGFcclxuICBjb25zdCBjZWxsVyA9ICh3aWR0aCAtIHRvdGFsR2FwWCkgLyBjb2xzO1xyXG4gIGNvbnN0IGNlbGxIID0gY2VsbFcgKiBjZWxsUmF0aW87XHJcblxyXG4gIC8vIEFsdG8gdG90YWwgZGVsIGdydXBvIHBhcmEgcXVlIGxhcyBjZWxkYXMgcmVzcGV0ZW4gbGEgcHJvcG9yY2nDs25cclxuICBjb25zdCB0b3RhbEhlaWdodCA9IHJvd3MgKiBjZWxsSCArIHRvdGFsR2FwWTtcclxuXHJcbiAgY29uc3QgcmVjdHMgPSBbXTtcclxuICBmb3IgKGxldCByID0gMDsgciA8IHJvd3M7IHIrKykge1xyXG4gICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjb2xzOyBjKyspIHtcclxuICAgICAgcmVjdHMucHVzaCh7XHJcbiAgICAgICAgeDogYyAqIChjZWxsVyArIGdhcCksXHJcbiAgICAgICAgeTogciAqIChjZWxsSCArIGdhcCksXHJcbiAgICAgICAgd2lkdGg6IGNlbGxXLFxyXG4gICAgICAgIGhlaWdodDogY2VsbEgsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgcmVjdHMsIHRvdGFsSGVpZ2h0IH07XHJcbn1cclxuIl0sIm5hbWVzIjpbImNhbGNHYWxsZXJ5TGF5b3V0Iiwid2lkdGgiLCJyb3dzIiwiY29scyIsImdhcCIsImNlbGxSYXRpbyIsInRvdGFsR2FwWCIsInRvdGFsR2FwWSIsImNlbGxXIiwiY2VsbEgiLCJ0b3RhbEhlaWdodCIsInJlY3RzIiwiciIsImMiLCJwdXNoIiwieCIsInkiLCJoZWlnaHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/calcGrid.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/editorActions.js":
/*!************************************!*\
  !*** ./src/utils/editorActions.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cambiarAlineacionTexto: () => (/* binding */ cambiarAlineacionTexto),\n/* harmony export */   copiarElemento: () => (/* binding */ copiarElemento),\n/* harmony export */   duplicarElemento: () => (/* binding */ duplicarElemento),\n/* harmony export */   ejecutarDeshacer: () => (/* binding */ ejecutarDeshacer),\n/* harmony export */   ejecutarRehacer: () => (/* binding */ ejecutarRehacer),\n/* harmony export */   eliminarElemento: () => (/* binding */ eliminarElemento),\n/* harmony export */   pegarElemento: () => (/* binding */ pegarElemento)\n/* harmony export */ });\n// src/utils/editorActions.js\nfunction ejecutarDeshacer({ historial, setHistorial, setObjetos, setSecciones, setFuturos, ignoreNextUpdateRef, setElementosSeleccionados, setMostrarPanelZ }) {\n    if (historial.length > 1) {\n        setElementosSeleccionados([]);\n        setMostrarPanelZ(false);\n        ignoreNextUpdateRef.current = (ignoreNextUpdateRef.current || 0) + 1;\n        setHistorial((prev)=>{\n            const nuevoHistorial = [\n                ...prev\n            ];\n            const estadoActual = nuevoHistorial.pop();\n            const estadoAnterior = nuevoHistorial[nuevoHistorial.length - 1];\n            // Aplicar estado anterior\n            setObjetos(estadoAnterior.objetos || []);\n            setSecciones(estadoAnterior.secciones || []);\n            // Guardar para rehacer (push al frente, igual que tu lógica actual)\n            setFuturos((f)=>[\n                    estadoActual,\n                    ...f.slice(0, 19)\n                ]);\n            return nuevoHistorial;\n        });\n    }\n}\nfunction ejecutarRehacer({ futuros, setFuturos, setHistorial, setObjetos, setSecciones, ignoreNextUpdateRef, setElementosSeleccionados, setMostrarPanelZ }) {\n    if (futuros.length > 0) {\n        setElementosSeleccionados([]);\n        setMostrarPanelZ(false);\n        const siguienteEstado = futuros[0];\n        ignoreNextUpdateRef.current = (ignoreNextUpdateRef.current || 0) + 1;\n        setObjetos(siguienteEstado.objetos || []);\n        setSecciones(siguienteEstado.secciones || []);\n        setFuturos((f)=>f.slice(1));\n        setHistorial((h)=>[\n                ...h,\n                siguienteEstado\n            ]);\n    }\n}\nfunction duplicarElemento({ objetos, elementosSeleccionados, setObjetos, setElementosSeleccionados }) {\n    const seleccionados = objetos.filter((o)=>elementosSeleccionados.includes(o.id));\n    const duplicables = seleccionados.filter((o)=>o?.tipo !== \"countdown\");\n    if (duplicables.length === 0) return;\n    const duplicados = duplicables.map((original, i)=>({\n            ...original,\n            id: `obj-${Date.now()}-${i}`,\n            x: original.x + 20,\n            y: original.y + 20\n        }));\n    setObjetos((prev)=>[\n            ...prev,\n            ...duplicados\n        ]);\n    setElementosSeleccionados(duplicados.map((d)=>d.id));\n}\nfunction eliminarElemento({ objetos, elementosSeleccionados, setObjetos, setElementosSeleccionados, setMostrarPanelZ }) {\n    if (elementosSeleccionados.length === 0) return;\n    const idsAEliminar = [\n        ...elementosSeleccionados\n    ];\n    setElementosSeleccionados([]);\n    setMostrarPanelZ(false);\n    setTimeout(()=>{\n        setObjetos((prev)=>prev.filter((o)=>!idsAEliminar.includes(o.id)));\n    }, 10);\n}\nfunction copiarElemento({ objetos, elementosSeleccionados }) {\n    const seleccionados = objetos.filter((o)=>elementosSeleccionados.includes(o.id));\n    if (seleccionados.length > 0) {\n        window._objetosCopiados = seleccionados.map((o)=>({\n                ...o,\n                id: undefined\n            }));\n    }\n}\nfunction pegarElemento({ objetos, setObjetos, setElementosSeleccionados }) {\n    const copiados = window._objetosCopiados || [];\n    if (!window._objetosCopiados || window._objetosCopiados.length === 0) return;\n    const offset = 30 + Math.random() * 20;\n    const alreadyHasCountdown = Array.isArray(objetos) ? objetos.some((o)=>o?.tipo === \"countdown\") : false;\n    let pastedCountdown = false;\n    const nuevos = [];\n    copiados.forEach((c, i)=>{\n        if (c?.tipo === \"countdown\") {\n            if (alreadyHasCountdown || pastedCountdown) return;\n            pastedCountdown = true;\n        }\n        nuevos.push({\n            ...c,\n            id: `obj-${Date.now()}-${i}`,\n            x: (c.x || 100) + offset,\n            y: (c.y || 100) + offset\n        });\n    });\n    if (nuevos.length === 0) return;\n    setObjetos((prev)=>[\n            ...prev,\n            ...nuevos\n        ]);\n    setElementosSeleccionados(nuevos.map((n)=>n.id));\n}\nfunction cambiarAlineacionTexto({ objetos, elementosSeleccionados, setObjetos }) {\n    const alineaciones = [\n        'left',\n        'center',\n        'right',\n        'justify'\n    ];\n    setObjetos((prev)=>prev.map((o)=>{\n            const esTexto = o.tipo === 'texto';\n            const esRectConTexto = o.tipo === 'forma' && o.figura === 'rect' && typeof o.texto === 'string';\n            if (!elementosSeleccionados.includes(o.id) || !esTexto && !esRectConTexto) {\n                return o;\n            }\n            const currentIndex = alineaciones.indexOf(o.align || 'left');\n            const nextIndex = (currentIndex + 1) % alineaciones.length;\n            const nuevaAlineacion = alineaciones[nextIndex];\n            return {\n                ...o,\n                align: nuevaAlineacion\n            };\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9lZGl0b3JBY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSw2QkFBNkI7QUFFdEIsU0FBU0EsaUJBQWlCLEVBQy9CQyxTQUFTLEVBQ1RDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pDLFVBQVUsRUFDVkMsbUJBQW1CLEVBQ25CQyx5QkFBeUIsRUFDekJDLGdCQUFnQixFQUNqQjtJQUNDLElBQUlQLFVBQVVRLE1BQU0sR0FBRyxHQUFHO1FBQ3hCRiwwQkFBMEIsRUFBRTtRQUM1QkMsaUJBQWlCO1FBRWpCRixvQkFBb0JJLE9BQU8sR0FBRyxDQUFDSixvQkFBb0JJLE9BQU8sSUFBSSxLQUFLO1FBR25FUixhQUFhLENBQUNTO1lBQ1osTUFBTUMsaUJBQWlCO21CQUFJRDthQUFLO1lBQ2hDLE1BQU1FLGVBQWVELGVBQWVFLEdBQUc7WUFDdkMsTUFBTUMsaUJBQWlCSCxjQUFjLENBQUNBLGVBQWVILE1BQU0sR0FBRyxFQUFFO1lBRWhFLDBCQUEwQjtZQUMxQk4sV0FBV1ksZUFBZUMsT0FBTyxJQUFJLEVBQUU7WUFDdkNaLGFBQWFXLGVBQWVFLFNBQVMsSUFBSSxFQUFFO1lBRTNDLG9FQUFvRTtZQUNwRVosV0FBVyxDQUFDYSxJQUFNO29CQUFDTDt1QkFBaUJLLEVBQUVDLEtBQUssQ0FBQyxHQUFHO2lCQUFJO1lBRW5ELE9BQU9QO1FBQ1Q7SUFDRjtBQUNGO0FBRU8sU0FBU1EsZ0JBQWdCLEVBQzlCQyxPQUFPLEVBQ1BoQixVQUFVLEVBQ1ZILFlBQVksRUFDWkMsVUFBVSxFQUNWQyxZQUFZLEVBQ1pFLG1CQUFtQixFQUNuQkMseUJBQXlCLEVBQ3pCQyxnQkFBZ0IsRUFDakI7SUFDQyxJQUFJYSxRQUFRWixNQUFNLEdBQUcsR0FBRztRQUN0QkYsMEJBQTBCLEVBQUU7UUFDNUJDLGlCQUFpQjtRQUVqQixNQUFNYyxrQkFBa0JELE9BQU8sQ0FBQyxFQUFFO1FBRWxDZixvQkFBb0JJLE9BQU8s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YVxcc3JjXFx1dGlsc1xcZWRpdG9yQWN0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZWRpdG9yQWN0aW9ucy5qc1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVqZWN1dGFyRGVzaGFjZXIoe1xyXG4gIGhpc3RvcmlhbCxcclxuICBzZXRIaXN0b3JpYWwsXHJcbiAgc2V0T2JqZXRvcyxcclxuICBzZXRTZWNjaW9uZXMsXHJcbiAgc2V0RnV0dXJvcyxcclxuICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgc2V0TW9zdHJhclBhbmVsWlxyXG59KSB7XHJcbiAgaWYgKGhpc3RvcmlhbC5sZW5ndGggPiAxKSB7XHJcbiAgICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtdKTtcclxuICAgIHNldE1vc3RyYXJQYW5lbFooZmFsc2UpO1xyXG5cclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYuY3VycmVudCA9IChpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgfHwgMCkgKyAxO1xyXG5cclxuXHJcbiAgICBzZXRIaXN0b3JpYWwoKHByZXYpID0+IHtcclxuICAgICAgY29uc3QgbnVldm9IaXN0b3JpYWwgPSBbLi4ucHJldl07XHJcbiAgICAgIGNvbnN0IGVzdGFkb0FjdHVhbCA9IG51ZXZvSGlzdG9yaWFsLnBvcCgpO1xyXG4gICAgICBjb25zdCBlc3RhZG9BbnRlcmlvciA9IG51ZXZvSGlzdG9yaWFsW251ZXZvSGlzdG9yaWFsLmxlbmd0aCAtIDFdO1xyXG5cclxuICAgICAgLy8gQXBsaWNhciBlc3RhZG8gYW50ZXJpb3JcclxuICAgICAgc2V0T2JqZXRvcyhlc3RhZG9BbnRlcmlvci5vYmpldG9zIHx8IFtdKTtcclxuICAgICAgc2V0U2VjY2lvbmVzKGVzdGFkb0FudGVyaW9yLnNlY2Npb25lcyB8fCBbXSk7XHJcblxyXG4gICAgICAvLyBHdWFyZGFyIHBhcmEgcmVoYWNlciAocHVzaCBhbCBmcmVudGUsIGlndWFsIHF1ZSB0dSBsw7NnaWNhIGFjdHVhbClcclxuICAgICAgc2V0RnV0dXJvcygoZikgPT4gW2VzdGFkb0FjdHVhbCwgLi4uZi5zbGljZSgwLCAxOSldKTtcclxuXHJcbiAgICAgIHJldHVybiBudWV2b0hpc3RvcmlhbDtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVqZWN1dGFyUmVoYWNlcih7XHJcbiAgZnV0dXJvcyxcclxuICBzZXRGdXR1cm9zLFxyXG4gIHNldEhpc3RvcmlhbCxcclxuICBzZXRPYmpldG9zLFxyXG4gIHNldFNlY2Npb25lcyxcclxuICBpZ25vcmVOZXh0VXBkYXRlUmVmLFxyXG4gIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXHJcbiAgc2V0TW9zdHJhclBhbmVsWlxyXG59KSB7XHJcbiAgaWYgKGZ1dHVyb3MubGVuZ3RoID4gMCkge1xyXG4gICAgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcyhbXSk7XHJcbiAgICBzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKTtcclxuXHJcbiAgICBjb25zdCBzaWd1aWVudGVFc3RhZG8gPSBmdXR1cm9zWzBdO1xyXG5cclxuICAgIGlnbm9yZU5leHRVcGRhdGVSZWYuY3VycmVudCA9IChpZ25vcmVOZXh0VXBkYXRlUmVmLmN1cnJlbnQgfHwgMCkgKyAxO1xyXG5cclxuICAgIHNldE9iamV0b3Moc2lndWllbnRlRXN0YWRvLm9iamV0b3MgfHwgW10pO1xyXG4gICAgc2V0U2VjY2lvbmVzKHNpZ3VpZW50ZUVzdGFkby5zZWNjaW9uZXMgfHwgW10pO1xyXG5cclxuICAgIHNldEZ1dHVyb3MoKGYpID0+IGYuc2xpY2UoMSkpO1xyXG4gICAgc2V0SGlzdG9yaWFsKChoKSA9PiBbLi4uaCwgc2lndWllbnRlRXN0YWRvXSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGR1cGxpY2FyRWxlbWVudG8oeyBvYmpldG9zLCBlbGVtZW50b3NTZWxlY2Npb25hZG9zLCBzZXRPYmpldG9zLCBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zIH0pIHtcbiAgY29uc3Qgc2VsZWNjaW9uYWRvcyA9IG9iamV0b3MuZmlsdGVyKChvKSA9PiBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmluY2x1ZGVzKG8uaWQpKTtcbiAgY29uc3QgZHVwbGljYWJsZXMgPSBzZWxlY2Npb25hZG9zLmZpbHRlcigobykgPT4gbz8udGlwbyAhPT0gXCJjb3VudGRvd25cIik7XG5cbiAgaWYgKGR1cGxpY2FibGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gIGNvbnN0IGR1cGxpY2Fkb3MgPSBkdXBsaWNhYmxlcy5tYXAoKG9yaWdpbmFsLCBpKSA9PiAoe1xuICAgIC4uLm9yaWdpbmFsLFxuICAgIGlkOiBgb2JqLSR7RGF0ZS5ub3coKX0tJHtpfWAsXG4gICAgeDogb3JpZ2luYWwueCArIDIwLFxuICAgIHk6IG9yaWdpbmFsLnkgKyAyMCxcbiAgfSkpO1xuXHJcbiAgc2V0T2JqZXRvcygocHJldikgPT4gWy4uLnByZXYsIC4uLmR1cGxpY2Fkb3NdKTtcclxuICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKGR1cGxpY2Fkb3MubWFwKChkKSA9PiBkLmlkKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbGltaW5hckVsZW1lbnRvKHsgb2JqZXRvcywgZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgc2V0T2JqZXRvcywgc2V0RWxlbWVudG9zU2VsZWNjaW9uYWRvcywgc2V0TW9zdHJhclBhbmVsWiB9KSB7XHJcbiAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgY29uc3QgaWRzQUVsaW1pbmFyID0gWy4uLmVsZW1lbnRvc1NlbGVjY2lvbmFkb3NdO1xyXG5cclxuICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKFtdKTtcclxuICBzZXRNb3N0cmFyUGFuZWxaKGZhbHNlKTtcclxuXHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBzZXRPYmpldG9zKChwcmV2KSA9PiBwcmV2LmZpbHRlcigobykgPT4gIWlkc0FFbGltaW5hci5pbmNsdWRlcyhvLmlkKSkpO1xyXG4gIH0sIDEwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvcGlhckVsZW1lbnRvKHsgb2JqZXRvcywgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyB9KSB7XG4gIGNvbnN0IHNlbGVjY2lvbmFkb3MgPSBvYmpldG9zLmZpbHRlcigobykgPT4gZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvLmlkKSk7XG4gIGlmIChzZWxlY2Npb25hZG9zLmxlbmd0aCA+IDApIHtcbiAgICB3aW5kb3cuX29iamV0b3NDb3BpYWRvcyA9IHNlbGVjY2lvbmFkb3MubWFwKChvKSA9PiAoeyAuLi5vLCBpZDogdW5kZWZpbmVkIH0pKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGVnYXJFbGVtZW50byh7IG9iamV0b3MsIHNldE9iamV0b3MsIHNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MgfSkge1xuICBjb25zdCBjb3BpYWRvcyA9IHdpbmRvdy5fb2JqZXRvc0NvcGlhZG9zIHx8IFtdO1xuICBpZiAoIXdpbmRvdy5fb2JqZXRvc0NvcGlhZG9zIHx8IHdpbmRvdy5fb2JqZXRvc0NvcGlhZG9zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICBjb25zdCBvZmZzZXQgPSAzMCArIE1hdGgucmFuZG9tKCkgKiAyMDtcbiAgY29uc3QgYWxyZWFkeUhhc0NvdW50ZG93biA9IEFycmF5LmlzQXJyYXkob2JqZXRvcylcbiAgICA/IG9iamV0b3Muc29tZSgobykgPT4gbz8udGlwbyA9PT0gXCJjb3VudGRvd25cIilcbiAgICA6IGZhbHNlO1xuXG4gIGxldCBwYXN0ZWRDb3VudGRvd24gPSBmYWxzZTtcbiAgY29uc3QgbnVldm9zID0gW107XG5cbiAgY29waWFkb3MuZm9yRWFjaCgoYywgaSkgPT4ge1xuICAgIGlmIChjPy50aXBvID09PSBcImNvdW50ZG93blwiKSB7XG4gICAgICBpZiAoYWxyZWFkeUhhc0NvdW50ZG93biB8fCBwYXN0ZWRDb3VudGRvd24pIHJldHVybjtcbiAgICAgIHBhc3RlZENvdW50ZG93biA9IHRydWU7XG4gICAgfVxuXG4gICAgbnVldm9zLnB1c2goe1xuICAgICAgLi4uYyxcbiAgICAgIGlkOiBgb2JqLSR7RGF0ZS5ub3coKX0tJHtpfWAsXG4gICAgICB4OiAoYy54IHx8IDEwMCkgKyBvZmZzZXQsXG4gICAgICB5OiAoYy55IHx8IDEwMCkgKyBvZmZzZXQsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGlmIChudWV2b3MubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgc2V0T2JqZXRvcygocHJldikgPT4gWy4uLnByZXYsIC4uLm51ZXZvc10pO1xuICBzZXRFbGVtZW50b3NTZWxlY2Npb25hZG9zKG51ZXZvcy5tYXAoKG4pID0+IG4uaWQpKTtcbn1cblxyXG5leHBvcnQgZnVuY3Rpb24gY2FtYmlhckFsaW5lYWNpb25UZXh0byh7IG9iamV0b3MsIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsIHNldE9iamV0b3MgfSkge1xuICBjb25zdCBhbGluZWFjaW9uZXMgPSBbJ2xlZnQnLCAnY2VudGVyJywgJ3JpZ2h0JywgJ2p1c3RpZnknXTtcblxuICBzZXRPYmpldG9zKChwcmV2KSA9PlxuICAgIHByZXYubWFwKChvKSA9PiB7XG4gICAgICBjb25zdCBlc1RleHRvID0gby50aXBvID09PSAndGV4dG8nO1xuICAgICAgY29uc3QgZXNSZWN0Q29uVGV4dG8gPVxuICAgICAgICBvLnRpcG8gPT09ICdmb3JtYScgJiZcbiAgICAgICAgby5maWd1cmEgPT09ICdyZWN0JyAmJlxuICAgICAgICB0eXBlb2Ygby50ZXh0byA9PT0gJ3N0cmluZyc7XG5cbiAgICAgIGlmICghZWxlbWVudG9zU2VsZWNjaW9uYWRvcy5pbmNsdWRlcyhvLmlkKSB8fCAoIWVzVGV4dG8gJiYgIWVzUmVjdENvblRleHRvKSkge1xuICAgICAgICByZXR1cm4gbztcbiAgICAgIH1cblxuICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gYWxpbmVhY2lvbmVzLmluZGV4T2Yoby5hbGlnbiB8fCAnbGVmdCcpO1xuICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgYWxpbmVhY2lvbmVzLmxlbmd0aDtcbiAgICAgIGNvbnN0IG51ZXZhQWxpbmVhY2lvbiA9IGFsaW5lYWNpb25lc1tuZXh0SW5kZXhdO1xuXHJcbiAgICAgIHJldHVybiB7IC4uLm8sIGFsaWduOiBudWV2YUFsaW5lYWNpb24gfTtcclxuICAgIH0pXHJcbiAgKTtcclxufVxyXG4iXSwibmFtZXMiOlsiZWplY3V0YXJEZXNoYWNlciIsImhpc3RvcmlhbCIsInNldEhpc3RvcmlhbCIsInNldE9iamV0b3MiLCJzZXRTZWNjaW9uZXMiLCJzZXRGdXR1cm9zIiwiaWdub3JlTmV4dFVwZGF0ZVJlZiIsInNldEVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJzZXRNb3N0cmFyUGFuZWxaIiwibGVuZ3RoIiwiY3VycmVudCIsInByZXYiLCJudWV2b0hpc3RvcmlhbCIsImVzdGFkb0FjdHVhbCIsInBvcCIsImVzdGFkb0FudGVyaW9yIiwib2JqZXRvcyIsInNlY2Npb25lcyIsImYiLCJzbGljZSIsImVqZWN1dGFyUmVoYWNlciIsImZ1dHVyb3MiLCJzaWd1aWVudGVFc3RhZG8iLCJoIiwiZHVwbGljYXJFbGVtZW50byIsImVsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJzZWxlY2Npb25hZG9zIiwiZmlsdGVyIiwibyIsImluY2x1ZGVzIiwiaWQiLCJkdXBsaWNhYmxlcyIsInRpcG8iLCJkdXBsaWNhZG9zIiwibWFwIiwib3JpZ2luYWwiLCJpIiwiRGF0ZSIsIm5vdyIsIngiLCJ5IiwiZCIsImVsaW1pbmFyRWxlbWVudG8iLCJpZHNBRWxpbWluYXIiLCJzZXRUaW1lb3V0IiwiY29waWFyRWxlbWVudG8iLCJ3aW5kb3ciLCJfb2JqZXRvc0NvcGlhZG9zIiwidW5kZWZpbmVkIiwicGVnYXJFbGVtZW50byIsImNvcGlhZG9zIiwib2Zmc2V0IiwiTWF0aCIsInJhbmRvbSIsImFscmVhZHlIYXNDb3VudGRvd24iLCJBcnJheSIsImlzQXJyYXkiLCJzb21lIiwicGFzdGVkQ291bnRkb3duIiwibnVldm9zIiwiZm9yRWFjaCIsImMiLCJwdXNoIiwibiIsImNhbWJpYXJBbGluZWFjaW9uVGV4dG8iLCJhbGluZWFjaW9uZXMiLCJlc1RleHRvIiwiZXNSZWN0Q29uVGV4dG8iLCJmaWd1cmEiLCJ0ZXh0byIsImN1cnJlbnRJbmRleCIsImluZGV4T2YiLCJhbGlnbiIsIm5leHRJbmRleCIsIm51ZXZhQWxpbmVhY2lvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/editorActions.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/editorSecciones.js":
/*!**************************************!*\
  !*** ./src/utils/editorSecciones.js ***!
  \**************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   borrarSeccion: () => (/* binding */ borrarSeccion),\n/* harmony export */   moverSeccion: () => (/* binding */ moverSeccion)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/firebase */ \"(pages-dir-node)/./src/firebase.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/utils/editorSecciones.js\n\n\n/**\n * Borrar una seccion y sus objetos asociados.\n * La confirmacion de UX se resuelve en la capa de UI.\n */ const borrarSeccion = async ({ seccionId, secciones, objetos, slug, seccionActivaId, setSecciones, setObjetos, setSeccionActivaId })=>{\n    const seccion = secciones.find((s)=>s.id === seccionId);\n    if (!seccion) return;\n    try {\n        const objetosFiltrados = objetos.filter((obj)=>obj.seccionId !== seccionId);\n        const seccionesFiltradas = secciones.filter((s)=>s.id !== seccionId);\n        setObjetos(objetosFiltrados);\n        setSecciones(seccionesFiltradas);\n        if (seccionId === seccionActivaId) {\n            setSeccionActivaId(null);\n        }\n        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"borradores\", slug);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n            objetos: objetosFiltrados,\n            secciones: seccionesFiltradas,\n            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n        console.log(\"Seccion borrada correctamente:\", seccionId);\n    } catch (error) {\n        console.error(\"Error al borrar seccion:\", error);\n        alert(\"Ocurrio un error al borrar la seccion. Intentalo de nuevo.\");\n    }\n};\n/**\n * Mover una seccion hacia arriba o abajo en el orden.\n */ const moverSeccion = async ({ seccionId, direccion, secciones, slug, setSecciones, setSeccionesAnimando })=>{\n    const seccionesOrdenadas = [\n        ...secciones\n    ].sort((a, b)=>a.orden - b.orden);\n    const indiceActual = seccionesOrdenadas.findIndex((s)=>s.id === seccionId);\n    if (direccion === \"subir\" && indiceActual === 0) {\n        console.warn(\"Ya es la primera seccion\");\n        return;\n    }\n    if (direccion === \"bajar\" && indiceActual === seccionesOrdenadas.length - 1) {\n        console.warn(\"Ya es la ultima seccion\");\n        return;\n    }\n    const indiceDestino = direccion === \"subir\" ? indiceActual - 1 : indiceActual + 1;\n    const seccionActual = seccionesOrdenadas[indiceActual];\n    const seccionDestino = seccionesOrdenadas[indiceDestino];\n    // Animar\n    setSeccionesAnimando([\n        seccionActual.id,\n        seccionDestino.id\n    ]);\n    // Intercambiar el campo `orden`\n    const nuevasSecciones = secciones.map((s)=>{\n        if (s.id === seccionActual.id) return {\n            ...s,\n            orden: seccionDestino.orden\n        };\n        if (s.id === seccionDestino.id) return {\n            ...s,\n            orden: seccionActual.orden\n        };\n        return s;\n    });\n    setSecciones(nuevasSecciones);\n    // Fin de la animacion\n    setTimeout(()=>{\n        setSeccionesAnimando([]);\n    }, 500);\n    // Guardar en Firestore\n    try {\n        const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"borradores\", slug);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(ref, {\n            secciones: nuevasSecciones,\n            ultimaEdicion: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)()\n        });\n    } catch (error) {\n        console.error(\"Error guardando orden de secciones:\", error);\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9lZGl0b3JTZWNjaW9uZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLCtCQUErQjtBQUVzQztBQUNyQztBQUVoQzs7O0NBR0MsR0FDTSxNQUFNSSxnQkFBZ0IsT0FBTyxFQUNsQ0MsU0FBUyxFQUNUQyxTQUFTLEVBQ1RDLE9BQU8sRUFDUEMsSUFBSSxFQUNKQyxlQUFlLEVBQ2ZDLFlBQVksRUFDWkMsVUFBVSxFQUNWQyxrQkFBa0IsRUFDbkI7SUFDQyxNQUFNQyxVQUFVUCxVQUFVUSxJQUFJLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsRUFBRSxLQUFLWDtJQUMvQyxJQUFJLENBQUNRLFNBQVM7SUFFZCxJQUFJO1FBQ0YsTUFBTUksbUJBQW1CVixRQUFRVyxNQUFNLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSWQsU0FBUyxLQUFLQTtRQUNuRSxNQUFNZSxxQkFBcUJkLFVBQVVZLE1BQU0sQ0FBQyxDQUFDSCxJQUFNQSxFQUFFQyxFQUFFLEtBQUtYO1FBRTVETSxXQUFXTTtRQUNYUCxhQUFhVTtRQUViLElBQUlmLGNBQWNJLGlCQUFpQjtZQUNqQ0csbUJBQW1CO1FBQ3JCO1FBRUEsTUFBTVMsTUFBTXJCLHVEQUFHQSxDQUFDRyx5Q0FBRUEsRUFBRSxjQUFjSztRQUNsQyxNQUFNUCw2REFBU0EsQ0FBQ29CLEtBQUs7WUFDbkJkLFNBQVNVO1lBQ1RYLFdBQVdjO1lBQ1hFLGVBQWVwQixtRUFBZUE7UUFDaEM7UUFFQXFCLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NuQjtJQUNoRCxFQUFFLE9BQU9vQixPQUFPO1FBQ2RGLFFBQVFFLEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDQyxNQUFNO0lBQ1I7QUFDRixFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNQyxlQUFlLE9BQU8sRUFDakN0QixTQUFTLEVBQ1R1QixTQUFTLEVBQ1R0QixTQUFTLEVBQ1RFLElBQUksRUFDSkUsWUFBWSxFQUNabUIsb0JBQW9CLEVBQ3JCO0lBQ0MsTUFBTUMscUJBQXFCO1dBQUl4QjtLQUFVLENBQUN5QixJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsRUFBRUUsS0FBSyxHQUFHRCxFQUFFQyxLQUFLO0lBQzFFLE1BQU1DLGVBQWVMLG1CQUFtQk0sU0FBUyxDQUFDLENBQUNyQixJQUFNQSxFQUFFQyxFQUFFLEtBQUtYO0lBRWxFLElBQUl1QixjQUFjLFdBQVdPLGlCQUFpQixHQUFHO1FBQy9DWixRQUFRYyxJQUFJLENBQUM7UUFDYjtJQUNGO0lBRUEsSUFBSVQsY0FBYyxXQUFXTyxpQkFBaUJMLG1CQUFtQlEsTUFBTSxHQUFHLEdBQUc7UUFDM0VmLFFBQVFjLElBQUksQ0FBQztRQUNiO0lBQ0Y7SUFFQSxNQUFNRSxnQkFBZ0JYLGNBQWMsVUFBVU8sZUFBZSxJQUFJQSxlQUFlO0lBQ2hGLE1BQU1LLGdCQUFnQlYsa0JBQWtCLENBQUNLLGFBQWE7SUFDdEQsTUFBTU0saUJBQWlCWCxrQkFBa0IsQ0FBQ1MsY0FBYztJQUV4RCxTQUFTO0lBQ1RWLHFCQUFxQjtRQUFDVyxjQUFjeEIsRUFBRTtRQUFFeUIsZUFBZXpCLEVBQUU7S0FBQztJQUUxRCxnQ0FBZ0M7SUFDaEMsTUFBTTBCLGtCQUFrQnBDLFVBQVVxQyxHQUFHLENBQUMsQ0FBQzVCO1FBQ3JDLElBQUlBLEVBQUVDLEVBQUUsS0FBS3dCLGNBQWN4QixFQUFFLEVBQUUsT0FBTztZQUFFLEdBQUdELENBQUM7WUFBRW1CLE9BQU9PLGVBQWVQLEtBQUs7UUFBQztRQUMxRSxJQUFJbkIsRUFBRUMsRUFBRSxLQUFLeUIsZUFBZXpCLEVBQUUsRUFBRSxPQUFPO1lBQUUsR0FBR0QsQ0FBQztZQUFFbUIsT0FBT00sY0FBY04sS0FBSztRQUFDO1FBQzFFLE9BQU9uQjtJQUNUO0lBRUFMLGFBQWFnQztJQUViLHNCQUFzQjtJQUN0QkUsV0FBVztRQUNUZixxQkFBcUIsRUFBRTtJQUN6QixHQUFHO0lBRUgsdUJBQXVCO0lBQ3ZCLElBQUk7UUFDRixNQUFNUixNQUFNckIsdURBQUdBLENBQUNHLHlDQUFFQSxFQUFFLGNBQWNLO1FBQ2xDLE1BQU1QLDZEQUFTQSxDQUFDb0IsS0FBSztZQUNuQmYsV0FBV29DO1lBQ1hwQixlQUFlcEIsbUVBQWVBO1FBQ2hDO0lBQ0YsRUFBRSxPQUFPdUIsT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsdUNBQXVDQTtJQUN2RDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcdXRpbHNcXGVkaXRvclNlY2Npb25lcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZWRpdG9yU2VjY2lvbmVzLmpzXG5cbmltcG9ydCB7IGRvYywgdXBkYXRlRG9jLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCJAL2ZpcmViYXNlXCI7XG5cbi8qKlxuICogQm9ycmFyIHVuYSBzZWNjaW9uIHkgc3VzIG9iamV0b3MgYXNvY2lhZG9zLlxuICogTGEgY29uZmlybWFjaW9uIGRlIFVYIHNlIHJlc3VlbHZlIGVuIGxhIGNhcGEgZGUgVUkuXG4gKi9cbmV4cG9ydCBjb25zdCBib3JyYXJTZWNjaW9uID0gYXN5bmMgKHtcbiAgc2VjY2lvbklkLFxuICBzZWNjaW9uZXMsXG4gIG9iamV0b3MsXG4gIHNsdWcsXG4gIHNlY2Npb25BY3RpdmFJZCxcbiAgc2V0U2VjY2lvbmVzLFxuICBzZXRPYmpldG9zLFxuICBzZXRTZWNjaW9uQWN0aXZhSWQsXG59KSA9PiB7XG4gIGNvbnN0IHNlY2Npb24gPSBzZWNjaW9uZXMuZmluZCgocykgPT4gcy5pZCA9PT0gc2VjY2lvbklkKTtcbiAgaWYgKCFzZWNjaW9uKSByZXR1cm47XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBvYmpldG9zRmlsdHJhZG9zID0gb2JqZXRvcy5maWx0ZXIoKG9iaikgPT4gb2JqLnNlY2Npb25JZCAhPT0gc2VjY2lvbklkKTtcbiAgICBjb25zdCBzZWNjaW9uZXNGaWx0cmFkYXMgPSBzZWNjaW9uZXMuZmlsdGVyKChzKSA9PiBzLmlkICE9PSBzZWNjaW9uSWQpO1xuXG4gICAgc2V0T2JqZXRvcyhvYmpldG9zRmlsdHJhZG9zKTtcbiAgICBzZXRTZWNjaW9uZXMoc2VjY2lvbmVzRmlsdHJhZGFzKTtcblxuICAgIGlmIChzZWNjaW9uSWQgPT09IHNlY2Npb25BY3RpdmFJZCkge1xuICAgICAgc2V0U2VjY2lvbkFjdGl2YUlkKG51bGwpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZiA9IGRvYyhkYiwgXCJib3JyYWRvcmVzXCIsIHNsdWcpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyhyZWYsIHtcbiAgICAgIG9iamV0b3M6IG9iamV0b3NGaWx0cmFkb3MsXG4gICAgICBzZWNjaW9uZXM6IHNlY2Npb25lc0ZpbHRyYWRhcyxcbiAgICAgIHVsdGltYUVkaWNpb246IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJTZWNjaW9uIGJvcnJhZGEgY29ycmVjdGFtZW50ZTpcIiwgc2VjY2lvbklkKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYm9ycmFyIHNlY2Npb246XCIsIGVycm9yKTtcbiAgICBhbGVydChcIk9jdXJyaW8gdW4gZXJyb3IgYWwgYm9ycmFyIGxhIHNlY2Npb24uIEludGVudGFsbyBkZSBudWV2by5cIik7XG4gIH1cbn07XG5cbi8qKlxuICogTW92ZXIgdW5hIHNlY2Npb24gaGFjaWEgYXJyaWJhIG8gYWJham8gZW4gZWwgb3JkZW4uXG4gKi9cbmV4cG9ydCBjb25zdCBtb3ZlclNlY2Npb24gPSBhc3luYyAoe1xuICBzZWNjaW9uSWQsXG4gIGRpcmVjY2lvbiwgLy8gJ3N1YmlyJyBvICdiYWphcidcbiAgc2VjY2lvbmVzLFxuICBzbHVnLFxuICBzZXRTZWNjaW9uZXMsXG4gIHNldFNlY2Npb25lc0FuaW1hbmRvLFxufSkgPT4ge1xuICBjb25zdCBzZWNjaW9uZXNPcmRlbmFkYXMgPSBbLi4uc2VjY2lvbmVzXS5zb3J0KChhLCBiKSA9PiBhLm9yZGVuIC0gYi5vcmRlbik7XG4gIGNvbnN0IGluZGljZUFjdHVhbCA9IHNlY2Npb25lc09yZGVuYWRhcy5maW5kSW5kZXgoKHMpID0+IHMuaWQgPT09IHNlY2Npb25JZCk7XG5cbiAgaWYgKGRpcmVjY2lvbiA9PT0gXCJzdWJpclwiICYmIGluZGljZUFjdHVhbCA9PT0gMCkge1xuICAgIGNvbnNvbGUud2FybihcIllhIGVzIGxhIHByaW1lcmEgc2VjY2lvblwiKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZGlyZWNjaW9uID09PSBcImJhamFyXCIgJiYgaW5kaWNlQWN0dWFsID09PSBzZWNjaW9uZXNPcmRlbmFkYXMubGVuZ3RoIC0gMSkge1xuICAgIGNvbnNvbGUud2FybihcIllhIGVzIGxhIHVsdGltYSBzZWNjaW9uXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGluZGljZURlc3Rpbm8gPSBkaXJlY2Npb24gPT09IFwic3ViaXJcIiA/IGluZGljZUFjdHVhbCAtIDEgOiBpbmRpY2VBY3R1YWwgKyAxO1xuICBjb25zdCBzZWNjaW9uQWN0dWFsID0gc2VjY2lvbmVzT3JkZW5hZGFzW2luZGljZUFjdHVhbF07XG4gIGNvbnN0IHNlY2Npb25EZXN0aW5vID0gc2VjY2lvbmVzT3JkZW5hZGFzW2luZGljZURlc3Rpbm9dO1xuXG4gIC8vIEFuaW1hclxuICBzZXRTZWNjaW9uZXNBbmltYW5kbyhbc2VjY2lvbkFjdHVhbC5pZCwgc2VjY2lvbkRlc3Rpbm8uaWRdKTtcblxuICAvLyBJbnRlcmNhbWJpYXIgZWwgY2FtcG8gYG9yZGVuYFxuICBjb25zdCBudWV2YXNTZWNjaW9uZXMgPSBzZWNjaW9uZXMubWFwKChzKSA9PiB7XG4gICAgaWYgKHMuaWQgPT09IHNlY2Npb25BY3R1YWwuaWQpIHJldHVybiB7IC4uLnMsIG9yZGVuOiBzZWNjaW9uRGVzdGluby5vcmRlbiB9O1xuICAgIGlmIChzLmlkID09PSBzZWNjaW9uRGVzdGluby5pZCkgcmV0dXJuIHsgLi4ucywgb3JkZW46IHNlY2Npb25BY3R1YWwub3JkZW4gfTtcbiAgICByZXR1cm4gcztcbiAgfSk7XG5cbiAgc2V0U2VjY2lvbmVzKG51ZXZhc1NlY2Npb25lcyk7XG5cbiAgLy8gRmluIGRlIGxhIGFuaW1hY2lvblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBzZXRTZWNjaW9uZXNBbmltYW5kbyhbXSk7XG4gIH0sIDUwMCk7XG5cbiAgLy8gR3VhcmRhciBlbiBGaXJlc3RvcmVcbiAgdHJ5IHtcbiAgICBjb25zdCByZWYgPSBkb2MoZGIsIFwiYm9ycmFkb3Jlc1wiLCBzbHVnKTtcbiAgICBhd2FpdCB1cGRhdGVEb2MocmVmLCB7XG4gICAgICBzZWNjaW9uZXM6IG51ZXZhc1NlY2Npb25lcyxcbiAgICAgIHVsdGltYUVkaWNpb246IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBndWFyZGFuZG8gb3JkZW4gZGUgc2VjY2lvbmVzOlwiLCBlcnJvcik7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsiZG9jIiwidXBkYXRlRG9jIiwic2VydmVyVGltZXN0YW1wIiwiZGIiLCJib3JyYXJTZWNjaW9uIiwic2VjY2lvbklkIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsInNsdWciLCJzZWNjaW9uQWN0aXZhSWQiLCJzZXRTZWNjaW9uZXMiLCJzZXRPYmpldG9zIiwic2V0U2VjY2lvbkFjdGl2YUlkIiwic2VjY2lvbiIsImZpbmQiLCJzIiwiaWQiLCJvYmpldG9zRmlsdHJhZG9zIiwiZmlsdGVyIiwib2JqIiwic2VjY2lvbmVzRmlsdHJhZGFzIiwicmVmIiwidWx0aW1hRWRpY2lvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImFsZXJ0IiwibW92ZXJTZWNjaW9uIiwiZGlyZWNjaW9uIiwic2V0U2VjY2lvbmVzQW5pbWFuZG8iLCJzZWNjaW9uZXNPcmRlbmFkYXMiLCJzb3J0IiwiYSIsImIiLCJvcmRlbiIsImluZGljZUFjdHVhbCIsImZpbmRJbmRleCIsIndhcm4iLCJsZW5ndGgiLCJpbmRpY2VEZXN0aW5vIiwic2VjY2lvbkFjdHVhbCIsInNlY2Npb25EZXN0aW5vIiwibnVldmFzU2VjY2lvbmVzIiwibWFwIiwic2V0VGltZW91dCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/editorSecciones.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/fontManager.js":
/*!**********************************!*\
  !*** ./src/utils/fontManager.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fontManager: () => (/* binding */ fontManager)\n/* harmony export */ });\n/* harmony import */ var webfontloader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webfontloader */ \"webfontloader\");\n/* harmony import */ var _config_fonts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/config/fonts */ \"(pages-dir-node)/./src/config/fonts.js\");\n\n\nconst SYSTEM_FONTS = new Set([\n    'arial',\n    'helvetica',\n    'verdana',\n    'tahoma',\n    'trebuchet ms',\n    'georgia',\n    'times new roman',\n    'courier new',\n    'lucida console',\n    'comic sans ms',\n    'impact',\n    'sans-serif',\n    'serif',\n    'monospace'\n]);\nconst DEFAULT_TIMEOUT_MS = 12000;\nclass FontManager {\n    constructor(){\n        this.loadedFonts = new Set();\n        this.fontCache = new Map();\n        this.loadingPromises = new Map();\n        this.failedFonts = new Set();\n        this.googleFontSet = new Set([\n            ...(_config_fonts__WEBPACK_IMPORTED_MODULE_1__.GOOGLE_FONTS || []).map((font)=>this.normalizeFontName(font?.nombre)),\n            ...(_config_fonts__WEBPACK_IMPORTED_MODULE_1__.LEGACY_GOOGLE_FONT_NAMES || []).map((name)=>this.normalizeFontName(name))\n        ].filter(Boolean));\n    }\n    normalizeFontName(fontFamily) {\n        if (!fontFamily) return '';\n        return String(fontFamily).replace(/['\"]/g, '').split(',')[0].trim();\n    }\n    categorizeFont(fontFamily) {\n        const fontName = this.normalizeFontName(fontFamily);\n        if (!fontName) {\n            return {\n                type: 'system',\n                name: 'sans-serif'\n            };\n        }\n        if (SYSTEM_FONTS.has(fontName.toLowerCase())) {\n            return {\n                type: 'system',\n                name: fontName\n            };\n        }\n        if (this.googleFontSet.has(fontName)) {\n            return {\n                type: 'google',\n                name: fontName\n            };\n        }\n        return {\n            type: 'custom',\n            name: fontName\n        };\n    }\n    isGoogleFontLoadedInDocument(fontName) {\n        if (typeof document === 'undefined' || !document.fonts) return false;\n        try {\n            for (const face of document.fonts.values()){\n                const family = this.normalizeFontName(face?.family);\n                if (family === fontName && face?.status === 'loaded') {\n                    return true;\n                }\n            }\n        } catch  {\n            return false;\n        }\n        return false;\n    }\n    waitForDocumentFont(fontName, timeoutMs = DEFAULT_TIMEOUT_MS) {\n        if (typeof document === 'undefined' || !document.fonts?.load) {\n            return Promise.resolve();\n        }\n        const loadPromise = document.fonts.load(`16px \"${fontName}\"`);\n        if (!Number.isFinite(timeoutMs) || timeoutMs <= 0) {\n            return loadPromise.then(()=>undefined);\n        }\n        const timeoutPromise = new Promise((resolve)=>{\n            setTimeout(resolve, timeoutMs);\n        });\n        return Promise.race([\n            loadPromise,\n            timeoutPromise\n        ]).then(()=>undefined);\n    }\n    async loadGoogleFont(fontName, options = {}) {\n        const normalizedName = this.normalizeFontName(fontName);\n        const timeoutMs = Number.isFinite(options.timeoutMs) && options.timeoutMs > 0 ? options.timeoutMs : DEFAULT_TIMEOUT_MS;\n        if (!normalizedName) return Promise.resolve();\n        if (this.isFontAvailable(normalizedName)) {\n            this.loadedFonts.add(normalizedName);\n            this.failedFonts.delete(normalizedName);\n            return Promise.resolve();\n        }\n        if (this.loadedFonts.has(normalizedName)) {\n            this.loadedFonts.add(normalizedName);\n            this.failedFonts.delete(normalizedName);\n            return Promise.resolve();\n        }\n        if (this.loadingPromises.has(normalizedName)) {\n            return this.loadingPromises.get(normalizedName);\n        }\n        const loadPromise = new Promise((resolve, reject)=>{\n            webfontloader__WEBPACK_IMPORTED_MODULE_0__.load({\n                google: {\n                    families: [\n                        `${normalizedName}:400,700`\n                    ]\n                },\n                active: ()=>{\n                    this.waitForDocumentFont(normalizedName, timeoutMs).finally(()=>{\n                        this.loadedFonts.add(normalizedName);\n                        this.failedFonts.delete(normalizedName);\n                        this.loadingPromises.delete(normalizedName);\n                        this.forceCanvasRedraw();\n                        resolve();\n                    });\n                },\n                inactive: ()=>{\n                    this.loadingPromises.delete(normalizedName);\n                    this.failedFonts.add(normalizedName);\n                    reject(new Error(`No se pudo cargar la fuente: ${normalizedName}`));\n                },\n                timeout: timeoutMs\n            });\n        });\n        this.loadingPromises.set(normalizedName, loadPromise);\n        return loadPromise;\n    }\n    async loadFonts(fontFamilies = [], options = {}) {\n        const loaded = [];\n        const failed = [];\n        const uniqueFonts = [\n            ...new Set(fontFamilies.map((font)=>String(font || '').trim()))\n        ].filter(Boolean);\n        if (!uniqueFonts.length) {\n            return {\n                loaded,\n                failed\n            };\n        }\n        const pendingNames = [];\n        const pendingPromises = [];\n        uniqueFonts.forEach((fontFamily)=>{\n            const { type, name } = this.categorizeFont(fontFamily);\n            if (!name) return;\n            if (type === 'system') {\n                this.loadedFonts.add(name);\n                this.failedFonts.delete(name);\n                loaded.push(name);\n                return;\n            }\n            if (this.loadedFonts.has(name)) {\n                this.loadedFonts.add(name);\n                this.failedFonts.delete(name);\n                loaded.push(name);\n                return;\n            }\n            if (type !== 'google') {\n                this.failedFonts.add(name);\n                failed.push(name);\n                return;\n            }\n            pendingNames.push(name);\n            pendingPromises.push(this.loadGoogleFont(name, options));\n        });\n        if (!pendingPromises.length) {\n            return {\n                loaded: [\n                    ...new Set(loaded)\n                ],\n                failed: [\n                    ...new Set(failed)\n                ]\n            };\n        }\n        const settled = await Promise.allSettled(pendingPromises);\n        settled.forEach((result, index)=>{\n            const fontName = pendingNames[index];\n            const ready = this.isFontAvailable(fontName);\n            if (result.status === 'fulfilled' || ready) {\n                this.loadedFonts.add(fontName);\n                this.failedFonts.delete(fontName);\n                loaded.push(fontName);\n            } else {\n                this.failedFonts.add(fontName);\n                failed.push(fontName);\n            }\n        });\n        return {\n            loaded: [\n                ...new Set(loaded)\n            ],\n            failed: [\n                ...new Set(failed)\n            ]\n        };\n    }\n    async preloadPopularFonts() {\n        const popularFonts = [\n            'Poppins',\n            'Roboto',\n            'Open Sans',\n            'Montserrat',\n            'Raleway',\n            'Lato',\n            'Playfair Display',\n            'Oswald',\n            'Libre Bodoni',\n            'Bodoni Moda'\n        ];\n        return this.loadFonts(popularFonts);\n    }\n    forceCanvasRedraw() {\n        if (true) return;\n        window.dispatchEvent(new CustomEvent('fonts-loaded'));\n    }\n    isFontAvailable(fontFamily) {\n        const { type, name } = this.categorizeFont(fontFamily);\n        if (type === 'system') return true;\n        if (!name) return false;\n        if (this.loadedFonts.has(name)) return true;\n        if (type === 'google') {\n            const loadedInDocument = this.isGoogleFontLoadedInDocument(name);\n            if (loadedInDocument) {\n                this.loadedFonts.add(name);\n                this.failedFonts.delete(name);\n                return true;\n            }\n            return false;\n        }\n        if (typeof document !== 'undefined' && document.fonts?.check) {\n            try {\n                const available = document.fonts.check(`16px \"${name}\"`);\n                if (available) {\n                    this.loadedFonts.add(name);\n                    this.failedFonts.delete(name);\n                    return true;\n                }\n            } catch  {\n                return false;\n            }\n        }\n        return false;\n    }\n    getGoogleFontsLink(fontFamilies = []) {\n        const families = fontFamilies.map((font)=>this.normalizeFontName(font)).filter((name)=>this.googleFontSet.has(name)).map((name)=>`family=${encodeURIComponent(`${name}:wght@400;700`.replace(/ /g, '+'))}`).join('&');\n        if (!families) return '';\n        const url = `https://fonts.googleapis.com/css2?${families}&display=swap`;\n        return `\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"${url}\" rel=\"stylesheet\">`.trim();\n    }\n    getLoadedFontsCSS() {\n        const googleFonts = Array.from(this.loadedFonts);\n        if (googleFonts.length === 0) return '';\n        const families = googleFonts.map((font)=>`family=${encodeURIComponent(`${font}:wght@300;400;500;600;700`.replace(/ /g, '+'))}`).join('&');\n        return `https://fonts.googleapis.com/css2?${families}&display=swap`;\n    }\n}\nconst fontManager = new FontManager();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9mb250TWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0M7QUFDb0M7QUFFeEUsTUFBTUcsZUFBZSxJQUFJQyxJQUFJO0lBQzNCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVELE1BQU1DLHFCQUFxQjtBQUUzQixNQUFNQztJQUNKQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSUo7UUFDdkIsSUFBSSxDQUFDSyxTQUFTLEdBQUcsSUFBSUM7UUFDckIsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSUQ7UUFDM0IsSUFBSSxDQUFDRSxXQUFXLEdBQUcsSUFBSVI7UUFDdkIsSUFBSSxDQUFDUyxhQUFhLEdBQUcsSUFBSVQsSUFDdkI7ZUFDSyxDQUFDSCx1REFBWUEsSUFBSSxFQUFFLEVBQUVhLEdBQUcsQ0FBQyxDQUFDQyxPQUFTLElBQUksQ0FBQ0MsaUJBQWlCLENBQUNELE1BQU1FO2VBQ2hFLENBQUNmLG1FQUF3QkEsSUFBSSxFQUFFLEVBQUVZLEdBQUcsQ0FBQyxDQUFDSSxPQUFTLElBQUksQ0FBQ0YsaUJBQWlCLENBQUNFO1NBQzFFLENBQUNDLE1BQU0sQ0FBQ0M7SUFFYjtJQUVBSixrQkFBa0JLLFVBQVUsRUFBRTtRQUM1QixJQUFJLENBQUNBLFlBQVksT0FBTztRQUN4QixPQUFPQyxPQUFPRCxZQUNYRSxPQUFPLENBQUMsU0FBUyxJQUNqQkMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQ2JDLElBQUk7SUFDVDtJQUVBQyxlQUFlTCxVQUFVLEVBQUU7UUFDekIsTUFBTU0sV0FBVyxJQUFJLENBQUNYLGlCQUFpQixDQUFDSztRQUV4QyxJQUFJLENBQUNNLFVBQVU7WUFDYixPQUFPO2dCQUFFQyxNQUFNO2dCQUFVVixNQUFNO1lBQWE7UUFDOUM7UUFFQSxJQUFJZixhQUFhMEIsR0FBRyxDQUFD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QUFFTyxNQUFNdUMsY0FBYyxJQUFJN0YsY0FBYyIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcZm9udE1hbmFnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdlYkZvbnQgZnJvbSAnd2ViZm9udGxvYWRlcic7XG5pbXBvcnQgeyBHT09HTEVfRk9OVFMsIExFR0FDWV9HT09HTEVfRk9OVF9OQU1FUyB9IGZyb20gJ0AvY29uZmlnL2ZvbnRzJztcblxuY29uc3QgU1lTVEVNX0ZPTlRTID0gbmV3IFNldChbXG4gICdhcmlhbCcsXG4gICdoZWx2ZXRpY2EnLFxuICAndmVyZGFuYScsXG4gICd0YWhvbWEnLFxuICAndHJlYnVjaGV0IG1zJyxcbiAgJ2dlb3JnaWEnLFxuICAndGltZXMgbmV3IHJvbWFuJyxcbiAgJ2NvdXJpZXIgbmV3JyxcbiAgJ2x1Y2lkYSBjb25zb2xlJyxcbiAgJ2NvbWljIHNhbnMgbXMnLFxuICAnaW1wYWN0JyxcbiAgJ3NhbnMtc2VyaWYnLFxuICAnc2VyaWYnLFxuICAnbW9ub3NwYWNlJyxcbl0pO1xuXG5jb25zdCBERUZBVUxUX1RJTUVPVVRfTVMgPSAxMjAwMDtcblxuY2xhc3MgRm9udE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxvYWRlZEZvbnRzID0gbmV3IFNldCgpO1xuICAgIHRoaXMuZm9udENhY2hlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMubG9hZGluZ1Byb21pc2VzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZmFpbGVkRm9udHMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5nb29nbGVGb250U2V0ID0gbmV3IFNldChcbiAgICAgIFtcbiAgICAgICAgLi4uKEdPT0dMRV9GT05UUyB8fCBbXSkubWFwKChmb250KSA9PiB0aGlzLm5vcm1hbGl6ZUZvbnROYW1lKGZvbnQ/Lm5vbWJyZSkpLFxuICAgICAgICAuLi4oTEVHQUNZX0dPT0dMRV9GT05UX05BTUVTIHx8IFtdKS5tYXAoKG5hbWUpID0+IHRoaXMubm9ybWFsaXplRm9udE5hbWUobmFtZSkpLFxuICAgICAgXS5maWx0ZXIoQm9vbGVhbilcbiAgICApO1xuICB9XG5cbiAgbm9ybWFsaXplRm9udE5hbWUoZm9udEZhbWlseSkge1xuICAgIGlmICghZm9udEZhbWlseSkgcmV0dXJuICcnO1xuICAgIHJldHVybiBTdHJpbmcoZm9udEZhbWlseSlcbiAgICAgIC5yZXBsYWNlKC9bJ1wiXS9nLCAnJylcbiAgICAgIC5zcGxpdCgnLCcpWzBdXG4gICAgICAudHJpbSgpO1xuICB9XG5cbiAgY2F0ZWdvcml6ZUZvbnQoZm9udEZhbWlseSkge1xuICAgIGNvbnN0IGZvbnROYW1lID0gdGhpcy5ub3JtYWxpemVGb250TmFtZShmb250RmFtaWx5KTtcblxuICAgIGlmICghZm9udE5hbWUpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICdzeXN0ZW0nLCBuYW1lOiAnc2Fucy1zZXJpZicgfTtcbiAgICB9XG5cbiAgICBpZiAoU1lTVEVNX0ZPTlRTLmhhcyhmb250TmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3N5c3RlbScsIG5hbWU6IGZvbnROYW1lIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ29vZ2xlRm9udFNldC5oYXMoZm9udE5hbWUpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAnZ29vZ2xlJywgbmFtZTogZm9udE5hbWUgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0eXBlOiAnY3VzdG9tJywgbmFtZTogZm9udE5hbWUgfTtcbiAgfVxuXG4gIGlzR29vZ2xlRm9udExvYWRlZEluRG9jdW1lbnQoZm9udE5hbWUpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhZG9jdW1lbnQuZm9udHMpIHJldHVybiBmYWxzZTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGZhY2Ugb2YgZG9jdW1lbnQuZm9udHMudmFsdWVzKCkpIHtcbiAgICAgICAgY29uc3QgZmFtaWx5ID0gdGhpcy5ub3JtYWxpemVGb250TmFtZShmYWNlPy5mYW1pbHkpO1xuICAgICAgICBpZiAoZmFtaWx5ID09PSBmb250TmFtZSAmJiBmYWNlPy5zdGF0dXMgPT09ICdsb2FkZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB3YWl0Rm9yRG9jdW1lbnRGb250KGZvbnROYW1lLCB0aW1lb3V0TXMgPSBERUZBVUxUX1RJTUVPVVRfTVMpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhZG9jdW1lbnQuZm9udHM/LmxvYWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2FkUHJvbWlzZSA9IGRvY3VtZW50LmZvbnRzLmxvYWQoYDE2cHggXCIke2ZvbnROYW1lfVwiYCk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGltZW91dE1zKSB8fCB0aW1lb3V0TXMgPD0gMCkge1xuICAgICAgcmV0dXJuIGxvYWRQcm9taXNlLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXRNcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtsb2FkUHJvbWlzZSwgdGltZW91dFByb21pc2VdKS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG4gIH1cblxuICBhc3luYyBsb2FkR29vZ2xlRm9udChmb250TmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSB0aGlzLm5vcm1hbGl6ZUZvbnROYW1lKGZvbnROYW1lKTtcbiAgICBjb25zdCB0aW1lb3V0TXMgPVxuICAgICAgTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMudGltZW91dE1zKSAmJiBvcHRpb25zLnRpbWVvdXRNcyA+IDBcbiAgICAgICAgPyBvcHRpb25zLnRpbWVvdXRNc1xuICAgICAgICA6IERFRkFVTFRfVElNRU9VVF9NUztcblxuICAgIGlmICghbm9ybWFsaXplZE5hbWUpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIGlmICh0aGlzLmlzRm9udEF2YWlsYWJsZShub3JtYWxpemVkTmFtZSkpIHtcbiAgICAgIHRoaXMubG9hZGVkRm9udHMuYWRkKG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2FkZWRGb250cy5oYXMobm9ybWFsaXplZE5hbWUpKSB7XG4gICAgICB0aGlzLmxvYWRlZEZvbnRzLmFkZChub3JtYWxpemVkTmFtZSk7XG4gICAgICB0aGlzLmZhaWxlZEZvbnRzLmRlbGV0ZShub3JtYWxpemVkTmFtZSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubG9hZGluZ1Byb21pc2VzLmhhcyhub3JtYWxpemVkTmFtZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxvYWRpbmdQcm9taXNlcy5nZXQobm9ybWFsaXplZE5hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvYWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgV2ViRm9udC5sb2FkKHtcbiAgICAgICAgZ29vZ2xlOiB7XG4gICAgICAgICAgZmFtaWxpZXM6IFtgJHtub3JtYWxpemVkTmFtZX06NDAwLDcwMGBdLFxuICAgICAgICB9LFxuICAgICAgICBhY3RpdmU6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLndhaXRGb3JEb2N1bWVudEZvbnQobm9ybWFsaXplZE5hbWUsIHRpbWVvdXRNcylcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2FkZWRGb250cy5hZGQobm9ybWFsaXplZE5hbWUpO1xuICAgICAgICAgICAgICB0aGlzLmZhaWxlZEZvbnRzLmRlbGV0ZShub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgICAgIHRoaXMubG9hZGluZ1Byb21pc2VzLmRlbGV0ZShub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgICAgIHRoaXMuZm9yY2VDYW52YXNSZWRyYXcoKTtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGluYWN0aXZlOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2FkaW5nUHJvbWlzZXMuZGVsZXRlKG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgICAgICB0aGlzLmZhaWxlZEZvbnRzLmFkZChub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgTm8gc2UgcHVkbyBjYXJnYXIgbGEgZnVlbnRlOiAke25vcm1hbGl6ZWROYW1lfWApKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dDogdGltZW91dE1zLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmxvYWRpbmdQcm9taXNlcy5zZXQobm9ybWFsaXplZE5hbWUsIGxvYWRQcm9taXNlKTtcbiAgICByZXR1cm4gbG9hZFByb21pc2U7XG4gIH1cblxuICBhc3luYyBsb2FkRm9udHMoZm9udEZhbWlsaWVzID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGxvYWRlZCA9IFtdO1xuICAgIGNvbnN0IGZhaWxlZCA9IFtdO1xuICAgIGNvbnN0IHVuaXF1ZUZvbnRzID0gWy4uLm5ldyBTZXQoZm9udEZhbWlsaWVzLm1hcCgoZm9udCkgPT4gU3RyaW5nKGZvbnQgfHwgJycpLnRyaW0oKSkpXS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBpZiAoIXVuaXF1ZUZvbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHsgbG9hZGVkLCBmYWlsZWQgfTtcbiAgICB9XG5cbiAgICBjb25zdCBwZW5kaW5nTmFtZXMgPSBbXTtcbiAgICBjb25zdCBwZW5kaW5nUHJvbWlzZXMgPSBbXTtcblxuICAgIHVuaXF1ZUZvbnRzLmZvckVhY2goKGZvbnRGYW1pbHkpID0+IHtcbiAgICAgIGNvbnN0IHsgdHlwZSwgbmFtZSB9ID0gdGhpcy5jYXRlZ29yaXplRm9udChmb250RmFtaWx5KTtcbiAgICAgIGlmICghbmFtZSkgcmV0dXJuO1xuXG4gICAgICBpZiAodHlwZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgdGhpcy5sb2FkZWRGb250cy5hZGQobmFtZSk7XG4gICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5hbWUpO1xuICAgICAgICBsb2FkZWQucHVzaChuYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5sb2FkZWRGb250cy5oYXMobmFtZSkpIHtcbiAgICAgICAgdGhpcy5sb2FkZWRGb250cy5hZGQobmFtZSk7XG4gICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5hbWUpO1xuICAgICAgICBsb2FkZWQucHVzaChuYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZSAhPT0gJ2dvb2dsZScpIHtcbiAgICAgICAgdGhpcy5mYWlsZWRGb250cy5hZGQobmFtZSk7XG4gICAgICAgIGZhaWxlZC5wdXNoKG5hbWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHBlbmRpbmdOYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgcGVuZGluZ1Byb21pc2VzLnB1c2godGhpcy5sb2FkR29vZ2xlRm9udChuYW1lLCBvcHRpb25zKSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXBlbmRpbmdQcm9taXNlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxvYWRlZDogWy4uLm5ldyBTZXQobG9hZGVkKV0sXG4gICAgICAgIGZhaWxlZDogWy4uLm5ldyBTZXQoZmFpbGVkKV0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHNldHRsZWQgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQocGVuZGluZ1Byb21pc2VzKTtcblxuICAgIHNldHRsZWQuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgZm9udE5hbWUgPSBwZW5kaW5nTmFtZXNbaW5kZXhdO1xuICAgICAgY29uc3QgcmVhZHkgPSB0aGlzLmlzRm9udEF2YWlsYWJsZShmb250TmFtZSk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZnVsZmlsbGVkJyB8fCByZWFkeSkge1xuICAgICAgICB0aGlzLmxvYWRlZEZvbnRzLmFkZChmb250TmFtZSk7XG4gICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKGZvbnROYW1lKTtcbiAgICAgICAgbG9hZGVkLnB1c2goZm9udE5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mYWlsZWRGb250cy5hZGQoZm9udE5hbWUpO1xuICAgICAgICBmYWlsZWQucHVzaChmb250TmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbG9hZGVkOiBbLi4ubmV3IFNldChsb2FkZWQpXSxcbiAgICAgIGZhaWxlZDogWy4uLm5ldyBTZXQoZmFpbGVkKV0sXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHByZWxvYWRQb3B1bGFyRm9udHMoKSB7XG4gICAgY29uc3QgcG9wdWxhckZvbnRzID0gW1xuICAgICAgJ1BvcHBpbnMnLFxuICAgICAgJ1JvYm90bycsXG4gICAgICAnT3BlbiBTYW5zJyxcbiAgICAgICdNb250c2VycmF0JyxcbiAgICAgICdSYWxld2F5JyxcbiAgICAgICdMYXRvJyxcbiAgICAgICdQbGF5ZmFpciBEaXNwbGF5JyxcbiAgICAgICdPc3dhbGQnLFxuICAgICAgJ0xpYnJlIEJvZG9uaScsXG4gICAgICAnQm9kb25pIE1vZGEnLFxuICAgIF07XG5cbiAgICByZXR1cm4gdGhpcy5sb2FkRm9udHMocG9wdWxhckZvbnRzKTtcbiAgfVxuXG4gIGZvcmNlQ2FudmFzUmVkcmF3KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZm9udHMtbG9hZGVkJykpO1xuICB9XG5cbiAgaXNGb250QXZhaWxhYmxlKGZvbnRGYW1pbHkpIHtcbiAgICBjb25zdCB7IHR5cGUsIG5hbWUgfSA9IHRoaXMuY2F0ZWdvcml6ZUZvbnQoZm9udEZhbWlseSk7XG5cbiAgICBpZiAodHlwZSA9PT0gJ3N5c3RlbScpIHJldHVybiB0cnVlO1xuICAgIGlmICghbmFtZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0aGlzLmxvYWRlZEZvbnRzLmhhcyhuYW1lKSkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAodHlwZSA9PT0gJ2dvb2dsZScpIHtcbiAgICAgIGNvbnN0IGxvYWRlZEluRG9jdW1lbnQgPSB0aGlzLmlzR29vZ2xlRm9udExvYWRlZEluRG9jdW1lbnQobmFtZSk7XG4gICAgICBpZiAobG9hZGVkSW5Eb2N1bWVudCkge1xuICAgICAgICB0aGlzLmxvYWRlZEZvbnRzLmFkZChuYW1lKTtcbiAgICAgICAgdGhpcy5mYWlsZWRGb250cy5kZWxldGUobmFtZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmZvbnRzPy5jaGVjaykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlID0gZG9jdW1lbnQuZm9udHMuY2hlY2soYDE2cHggXCIke25hbWV9XCJgKTtcbiAgICAgICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgICAgIHRoaXMubG9hZGVkRm9udHMuYWRkKG5hbWUpO1xuICAgICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5hbWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRHb29nbGVGb250c0xpbmsoZm9udEZhbWlsaWVzID0gW10pIHtcbiAgICBjb25zdCBmYW1pbGllcyA9IGZvbnRGYW1pbGllc1xuICAgICAgLm1hcCgoZm9udCkgPT4gdGhpcy5ub3JtYWxpemVGb250TmFtZShmb250KSlcbiAgICAgIC5maWx0ZXIoKG5hbWUpID0+IHRoaXMuZ29vZ2xlRm9udFNldC5oYXMobmFtZSkpXG4gICAgICAubWFwKChuYW1lKSA9PiBgZmFtaWx5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGAke25hbWV9OndnaHRANDAwOzcwMGAucmVwbGFjZSgvIC9nLCAnKycpKX1gKVxuICAgICAgLmpvaW4oJyYnKTtcblxuICAgIGlmICghZmFtaWxpZXMpIHJldHVybiAnJztcblxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/JHtmYW1pbGllc30mZGlzcGxheT1zd2FwYDtcbiAgICByZXR1cm4gYFxuPGxpbmsgcmVsPVwicHJlY29ubmVjdFwiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tXCIgY3Jvc3NvcmlnaW4+XG48bGluayBocmVmPVwiJHt1cmx9XCIgcmVsPVwic3R5bGVzaGVldFwiPmAudHJpbSgpO1xuICB9XG5cbiAgZ2V0TG9hZGVkRm9udHNDU1MoKSB7XG4gICAgY29uc3QgZ29vZ2xlRm9udHMgPSBBcnJheS5mcm9tKHRoaXMubG9hZGVkRm9udHMpO1xuICAgIGlmIChnb29nbGVGb250cy5sZW5ndGggPT09IDApIHJldHVybiAnJztcblxuICAgIGNvbnN0IGZhbWlsaWVzID0gZ29vZ2xlRm9udHNcbiAgICAgIC5tYXAoKGZvbnQpID0+IGBmYW1pbHk9JHtlbmNvZGVVUklDb21wb25lbnQoYCR7Zm9udH06d2dodEAzMDA7NDAwOzUwMDs2MDA7NzAwYC5yZXBsYWNlKC8gL2csICcrJykpfWApXG4gICAgICAuam9pbignJicpO1xuXG4gICAgcmV0dXJuIGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/JHtmYW1pbGllc30mZGlzcGxheT1zd2FwYDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZm9udE1hbmFnZXIgPSBuZXcgRm9udE1hbmFnZXIoKTtcclxuIl0sIm5hbWVzIjpbIldlYkZvbnQiLCJHT09HTEVfRk9OVFMiLCJMRUdBQ1lfR09PR0xFX0ZPTlRfTkFNRVMiLCJTWVNURU1fRk9OVFMiLCJTZXQiLCJERUZBVUxUX1RJTUVPVVRfTVMiLCJGb250TWFuYWdlciIsImNvbnN0cnVjdG9yIiwibG9hZGVkRm9udHMiLCJmb250Q2FjaGUiLCJNYXAiLCJsb2FkaW5nUHJvbWlzZXMiLCJmYWlsZWRGb250cyIsImdvb2dsZUZvbnRTZXQiLCJtYXAiLCJmb250Iiwibm9ybWFsaXplRm9udE5hbWUiLCJub21icmUiLCJuYW1lIiwiZmlsdGVyIiwiQm9vbGVhbiIsImZvbnRGYW1pbHkiLCJTdHJpbmciLCJyZXBsYWNlIiwic3BsaXQiLCJ0cmltIiwiY2F0ZWdvcml6ZUZvbnQiLCJmb250TmFtZSIsInR5cGUiLCJoYXMiLCJ0b0xvd2VyQ2FzZSIsImlzR29vZ2xlRm9udExvYWRlZEluRG9jdW1lbnQiLCJkb2N1bWVudCIsImZvbnRzIiwiZmFjZSIsInZhbHVlcyIsImZhbWlseSIsInN0YXR1cyIsIndhaXRGb3JEb2N1bWVudEZvbnQiLCJ0aW1lb3V0TXMiLCJsb2FkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJsb2FkUHJvbWlzZSIsIk51bWJlciIsImlzRmluaXRlIiwidGhlbiIsInVuZGVmaW5lZCIsInRpbWVvdXRQcm9taXNlIiwic2V0VGltZW91dCIsInJhY2UiLCJsb2FkR29vZ2xlRm9udCIsIm9wdGlvbnMiLCJub3JtYWxpemVkTmFtZSIsImlzRm9udEF2YWlsYWJsZSIsImFkZCIsImRlbGV0ZSIsImdldCIsInJlamVjdCIsImdvb2dsZSIsImZhbWlsaWVzIiwiYWN0aXZlIiwiZmluYWxseSIsImZvcmNlQ2FudmFzUmVkcmF3IiwiaW5hY3RpdmUiLCJFcnJvciIsInRpbWVvdXQiLCJzZXQiLCJsb2FkRm9udHMiLCJmb250RmFtaWxpZXMiLCJsb2FkZWQiLCJmYWlsZWQiLCJ1bmlxdWVGb250cyIsImxlbmd0aCIsInBlbmRpbmdOYW1lcyIsInBlbmRpbmdQcm9taXNlcyIsImZvckVhY2giLCJwdXNoIiwic2V0dGxlZCIsImFsbFNldHRsZWQiLCJyZXN1bHQiLCJpbmRleCIsInJlYWR5IiwicHJlbG9hZFBvcHVsYXJGb250cyIsInBvcHVsYXJGb250cyIsIndpbmRvdyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImxvYWRlZEluRG9jdW1lbnQiLCJjaGVjayIsImF2YWlsYWJsZSIsImdldEdvb2dsZUZvbnRzTGluayIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJ1cmwiLCJnZXRMb2FkZWRGb250c0NTUyIsImdvb2dsZUZvbnRzIiwiQXJyYXkiLCJmcm9tIiwiZm9udE1hbmFnZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/fontManager.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/getTextMetrics.js":
/*!*************************************!*\
  !*** ./src/utils/getTextMetrics.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCenteredTextPosition: () => (/* binding */ getCenteredTextPosition),\n/* harmony export */   getNormalizedTextMetrics: () => (/* binding */ getNormalizedTextMetrics),\n/* harmony export */   getTextMetrics: () => (/* binding */ getTextMetrics)\n/* harmony export */ });\nlet canvasCache = null;\n/**\r\n * Obtiene el contexto canvas cacheado\r\n */ function getCanvasContext() {\n    if (!canvasCache) {\n        canvasCache = document.createElement(\"canvas\");\n    }\n    return canvasCache.getContext(\"2d\");\n}\n/**\r\n * Mide métricas reales de una fuente usando Canvas.\r\n * SIEMPRE usa el mismo canvas para garantizar consistencia.\r\n */ function getTextMetrics({ text = \"Hg\", fontSize, fontFamily, fontWeight = \"normal\", fontStyle = \"normal\" }) {\n    const ctx = getCanvasContext();\n    ctx.font = `${fontWeight} ${fontStyle} ${fontSize}px ${fontFamily}`;\n    const metrics = ctx.measureText(text);\n    return {\n        width: metrics.width,\n        ascent: metrics.actualBoundingBoxAscent ?? fontSize * 0.8,\n        descent: metrics.actualBoundingBoxDescent ?? fontSize * 0.2,\n        actualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\n        actualBoundingBoxDescent: metrics.actualBoundingBoxDescent\n    };\n}\n/**\r\n * Calcula métricas normalizadas para un texto.\r\n * Esta es la ÚNICA fuente de verdad para posicionamiento.\r\n */ function getNormalizedTextMetrics({ fontSize, fontFamily, fontWeight = \"normal\", fontStyle = \"normal\" }) {\n    const metrics = getTextMetrics({\n        text: \"Hg\",\n        fontSize,\n        fontFamily,\n        fontWeight,\n        fontStyle\n    });\n    const visualHeight = metrics.ascent + metrics.descent;\n    return {\n        ascent: metrics.ascent,\n        descent: metrics.descent,\n        visualHeight,\n        // Distancia desde el baseline al centro visual\n        baselineToCenter: metrics.ascent - visualHeight / 2\n    };\n}\n/**\r\n * Calcula la posición Y del baseline para centrar texto en un rectángulo.\r\n * Retorna también el top absoluto del texto (baseline - ascent).\r\n */ function getCenteredTextPosition({ rectY, rectHeight, fontSize, fontFamily, fontWeight = \"normal\", fontStyle = \"normal\" }) {\n    const normalized = getNormalizedTextMetrics({\n        fontSize,\n        fontFamily,\n        fontWeight,\n        fontStyle\n    });\n    const rectCenter = rectY + rectHeight / 2;\n    // Baseline centrado: centro del rect + offset desde baseline al centro visual\n    const baselineY = rectCenter + normalized.baselineToCenter;\n    // Top del texto: baseline - ascent\n    const textTop = baselineY - normalized.ascent;\n    return {\n        baseline: baselineY,\n        textTop,\n        ascent: normalized.ascent,\n        descent: normalized.descent,\n        visualHeight: normalized.visualHeight,\n        rectCenter\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9nZXRUZXh0TWV0cmljcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFJQSxjQUFjO0FBRWxCOztDQUVDLEdBQ0QsU0FBU0M7SUFDUCxJQUFJLENBQUNELGFBQWE7UUFDaEJBLGNBQWNFLFNBQVNDLGFBQWEsQ0FBQztJQUN2QztJQUNBLE9BQU9ILFlBQVlJLFVBQVUsQ0FBQztBQUNoQztBQUVBOzs7Q0FHQyxHQUNNLFNBQVNDLGVBQWUsRUFBRUMsT0FBTyxJQUFJLEVBQUVDLFFBQVEsRUFBRUMsVUFBVSxFQUFFQyxhQUFhLFFBQVEsRUFBRUMsWUFBWSxRQUFRLEVBQUU7SUFDL0csTUFBTUMsTUFBTVY7SUFDWlUsSUFBSUMsSUFBSSxHQUFHLEdBQUdILFdBQVcsQ0FBQyxFQUFFQyxVQUFVLENBQUMsRUFBRUgsU0FBUyxHQUFHLEVBQUVDLFlBQVk7SUFDbkUsTUFBTUssVUFBVUYsSUFBSUcsV0FBVyxDQUFDUjtJQUVoQyxPQUFPO1FBQ0xTLE9BQU9GLFFBQVFFLEtBQUs7UUFDcEJDLFFBQVFILFFBQVFJLHVCQUF1QixJQUFJVixXQUFXO1FBQ3REVyxTQUFTTCxRQUFRTSx3QkFBd0IsSUFBSVosV0FBVztRQUN4RFUseUJBQXlCSixRQUFRSSx1QkFBdUI7UUFDeERFLDBCQUEwQk4sUUFBUU0sd0JBQXdCO0lBQzVEO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQyx5QkFBeUIsRUFBRWIsUUFBUSxFQUFFQyxVQUFVLEVBQUVDLGFBQWEsUUFBUSxFQUFFQyxZQUFZLFFBQVEsRUFBRTtJQUM1RyxNQUFNRyxVQUFVUixlQUFlO1FBQzdCQyxNQUFNO1FBQ05DO1FBQ0FDO1FBQ0FDO1FBQ0FDO0lBQ0Y7SUFFQSxNQUFNVyxlQUFlUixRQUFRRyxNQUFNLEdBQUdILFFBQVFLLE9BQU87SUFFckQsT0FBTztRQUNMRixRQUFRSCxRQUFRRyxNQUFNO1FBQ3RCRSxTQUFTTCxRQUFRSyxPQUFPO1FBQ3hCRztRQUNBLCtDQUErQztRQUMvQ0Msa0JBQWtCVCxRQUFRRyxNQUFNLEdBQUlLLGVBQWU7SUFDckQ7QUFDRjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNFLHdCQUF3QixFQUN0Q0MsS0FBSyxFQUNMQyxVQUFVLEVBQ1ZsQixRQUFRLEVBQ1JDLFVBQVUsRUFDVkMsYUFBYSxRQUFRLEVBQ3JCQyxZQUFZLFFBQVEsRUFDckI7SUFDQyxNQUFNZ0IsYUFBYU4seUJBQXlCO1FBQUViO1FBQVVDO1FBQVlDO1FBQVlDO0lBQVU7SUFFMUYsTUFBTWlCLGFBQWFILFFBQVFDLGFBQWE7SUFFeEMsOEVBQThFO0lBQzlFLE1BQU1HLFlBQVlELGFBQWFELFdBQVdKLGdCQUFnQjtJQUUxRCxtQ0FBbUM7SUFDbkMsTUFBTU8sVUFBVUQsWUFBWUYsV0FBV1YsTUFBTTtJQUU3QyxPQUFPO1FBQ0xjLFVBQVVGO1FBQ1ZDO1FBQ0FiLFFBQVFVLFdBQVdWLE1BQU07UUFDekJFLFNBQVNRLFdBQVdSLE9BQU87UUFDM0JHLGNBQWNLLFdBQVdMLFlBQVk7UUFDckNNO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcZ2V0VGV4dE1ldHJpY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IGNhbnZhc0NhY2hlID0gbnVsbDtcclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIGVsIGNvbnRleHRvIGNhbnZhcyBjYWNoZWFkb1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Q2FudmFzQ29udGV4dCgpIHtcclxuICBpZiAoIWNhbnZhc0NhY2hlKSB7XHJcbiAgICBjYW52YXNDYWNoZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgfVxyXG4gIHJldHVybiBjYW52YXNDYWNoZS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNaWRlIG3DqXRyaWNhcyByZWFsZXMgZGUgdW5hIGZ1ZW50ZSB1c2FuZG8gQ2FudmFzLlxyXG4gKiBTSUVNUFJFIHVzYSBlbCBtaXNtbyBjYW52YXMgcGFyYSBnYXJhbnRpemFyIGNvbnNpc3RlbmNpYS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0TWV0cmljcyh7IHRleHQgPSBcIkhnXCIsIGZvbnRTaXplLCBmb250RmFtaWx5LCBmb250V2VpZ2h0ID0gXCJub3JtYWxcIiwgZm9udFN0eWxlID0gXCJub3JtYWxcIiB9KSB7XHJcbiAgY29uc3QgY3R4ID0gZ2V0Q2FudmFzQ29udGV4dCgpO1xyXG4gIGN0eC5mb250ID0gYCR7Zm9udFdlaWdodH0gJHtmb250U3R5bGV9ICR7Zm9udFNpemV9cHggJHtmb250RmFtaWx5fWA7XHJcbiAgY29uc3QgbWV0cmljcyA9IGN0eC5tZWFzdXJlVGV4dCh0ZXh0KTtcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgd2lkdGg6IG1ldHJpY3Mud2lkdGgsXHJcbiAgICBhc2NlbnQ6IG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQgPz8gZm9udFNpemUgKiAwLjgsXHJcbiAgICBkZXNjZW50OiBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCA/PyBmb250U2l6ZSAqIDAuMixcclxuICAgIGFjdHVhbEJvdW5kaW5nQm94QXNjZW50OiBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50LFxyXG4gICAgYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50OiBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYSBtw6l0cmljYXMgbm9ybWFsaXphZGFzIHBhcmEgdW4gdGV4dG8uXHJcbiAqIEVzdGEgZXMgbGEgw5pOSUNBIGZ1ZW50ZSBkZSB2ZXJkYWQgcGFyYSBwb3NpY2lvbmFtaWVudG8uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9ybWFsaXplZFRleHRNZXRyaWNzKHsgZm9udFNpemUsIGZvbnRGYW1pbHksIGZvbnRXZWlnaHQgPSBcIm5vcm1hbFwiLCBmb250U3R5bGUgPSBcIm5vcm1hbFwiIH0pIHtcclxuICBjb25zdCBtZXRyaWNzID0gZ2V0VGV4dE1ldHJpY3Moe1xyXG4gICAgdGV4dDogXCJIZ1wiLFxyXG4gICAgZm9udFNpemUsXHJcbiAgICBmb250RmFtaWx5LFxyXG4gICAgZm9udFdlaWdodCxcclxuICAgIGZvbnRTdHlsZSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgdmlzdWFsSGVpZ2h0ID0gbWV0cmljcy5hc2NlbnQgKyBtZXRyaWNzLmRlc2NlbnQ7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBhc2NlbnQ6IG1ldHJpY3MuYXNjZW50LFxyXG4gICAgZGVzY2VudDogbWV0cmljcy5kZXNjZW50LFxyXG4gICAgdmlzdWFsSGVpZ2h0LFxyXG4gICAgLy8gRGlzdGFuY2lhIGRlc2RlIGVsIGJhc2VsaW5lIGFsIGNlbnRybyB2aXN1YWxcclxuICAgIGJhc2VsaW5lVG9DZW50ZXI6IG1ldHJpY3MuYXNjZW50IC0gKHZpc3VhbEhlaWdodCAvIDIpLFxyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhIGxhIHBvc2ljacOzbiBZIGRlbCBiYXNlbGluZSBwYXJhIGNlbnRyYXIgdGV4dG8gZW4gdW4gcmVjdMOhbmd1bG8uXHJcbiAqIFJldG9ybmEgdGFtYmnDqW4gZWwgdG9wIGFic29sdXRvIGRlbCB0ZXh0byAoYmFzZWxpbmUgLSBhc2NlbnQpLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcmVkVGV4dFBvc2l0aW9uKHtcclxuICByZWN0WSxcclxuICByZWN0SGVpZ2h0LFxyXG4gIGZvbnRTaXplLFxyXG4gIGZvbnRGYW1pbHksXHJcbiAgZm9udFdlaWdodCA9IFwibm9ybWFsXCIsXHJcbiAgZm9udFN0eWxlID0gXCJub3JtYWxcIixcclxufSkge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBnZXROb3JtYWxpemVkVGV4dE1ldHJpY3MoeyBmb250U2l6ZSwgZm9udEZhbWlseSwgZm9udFdlaWdodCwgZm9udFN0eWxlIH0pO1xyXG4gIFxyXG4gIGNvbnN0IHJlY3RDZW50ZXIgPSByZWN0WSArIHJlY3RIZWlnaHQgLyAyO1xyXG4gIFxyXG4gIC8vIEJhc2VsaW5lIGNlbnRyYWRvOiBjZW50cm8gZGVsIHJlY3QgKyBvZmZzZXQgZGVzZGUgYmFzZWxpbmUgYWwgY2VudHJvIHZpc3VhbFxyXG4gIGNvbnN0IGJhc2VsaW5lWSA9IHJlY3RDZW50ZXIgKyBub3JtYWxpemVkLmJhc2VsaW5lVG9DZW50ZXI7XHJcbiAgXHJcbiAgLy8gVG9wIGRlbCB0ZXh0bzogYmFzZWxpbmUgLSBhc2NlbnRcclxuICBjb25zdCB0ZXh0VG9wID0gYmFzZWxpbmVZIC0gbm9ybWFsaXplZC5hc2NlbnQ7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGJhc2VsaW5lOiBiYXNlbGluZVksICAgICAgICAvLyDihpAgUG9zaWNpw7NuIFkgZGVsIGJhc2VsaW5lXHJcbiAgICB0ZXh0VG9wLCAgICAgICAgICAgICAgICAgICAgIC8vIOKGkCBQb3NpY2nDs24gWSBkZWwgdG9wIHZpc3VhbCBkZWwgdGV4dG9cclxuICAgIGFzY2VudDogbm9ybWFsaXplZC5hc2NlbnQsXHJcbiAgICBkZXNjZW50OiBub3JtYWxpemVkLmRlc2NlbnQsXHJcbiAgICB2aXN1YWxIZWlnaHQ6IG5vcm1hbGl6ZWQudmlzdWFsSGVpZ2h0LFxyXG4gICAgcmVjdENlbnRlcixcclxuICB9O1xyXG59Il0sIm5hbWVzIjpbImNhbnZhc0NhY2hlIiwiZ2V0Q2FudmFzQ29udGV4dCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImdldENvbnRleHQiLCJnZXRUZXh0TWV0cmljcyIsInRleHQiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFN0eWxlIiwiY3R4IiwiZm9udCIsIm1ldHJpY3MiLCJtZWFzdXJlVGV4dCIsIndpZHRoIiwiYXNjZW50IiwiYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQiLCJkZXNjZW50IiwiYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50IiwiZ2V0Tm9ybWFsaXplZFRleHRNZXRyaWNzIiwidmlzdWFsSGVpZ2h0IiwiYmFzZWxpbmVUb0NlbnRlciIsImdldENlbnRlcmVkVGV4dFBvc2l0aW9uIiwicmVjdFkiLCJyZWN0SGVpZ2h0Iiwibm9ybWFsaXplZCIsInJlY3RDZW50ZXIiLCJiYXNlbGluZVkiLCJ0ZXh0VG9wIiwiYmFzZWxpbmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/getTextMetrics.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/layout.ts":
/*!*****************************!*\
  !*** ./src/utils/layout.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calcularOffsetY: () => (/* binding */ calcularOffsetY),\n/* harmony export */   convertirAbsARel: () => (/* binding */ convertirAbsARel),\n/* harmony export */   determinarNuevaSeccion: () => (/* binding */ determinarNuevaSeccion)\n/* harmony export */ });\n// src/utils/layout.ts\n// ✅ calcularOffsetY\nfunction calcularOffsetY(secciones, index) {\n    const anteriores = secciones.slice(0, index);\n    return anteriores.reduce((acc, s)=>acc + s.altura, 0);\n}\n// ✅ convertirAbsARel\nfunction convertirAbsARel(yAbs, seccionId, secciones) {\n    const seccionIndex = secciones.findIndex((s)=>s.id === seccionId);\n    if (seccionIndex < 0) return yAbs;\n    const offsetY = calcularOffsetY(secciones, seccionIndex);\n    return yAbs - offsetY;\n}\n// ✅ determinarNuevaSeccion\nconst determinarNuevaSeccion = (yRelativaConOffset, seccionActualId, seccionesOrdenadas)=>{\n    const seccionActual = seccionesOrdenadas.find((s)=>s.id === seccionActualId);\n    if (!seccionActual) return {\n        nuevaSeccion: null,\n        coordenadasAjustadas: {}\n    };\n    const yAbsolutaReal = yRelativaConOffset;\n    let acumulado = 0;\n    for (const seccion of seccionesOrdenadas){\n        if (yAbsolutaReal >= acumulado && yAbsolutaReal < acumulado + seccion.altura) {\n            if (seccion.id === seccionActualId) {\n                return {\n                    nuevaSeccion: null,\n                    coordenadasAjustadas: {}\n                };\n            }\n            const nuevaY = yAbsolutaReal - acumulado;\n            return {\n                nuevaSeccion: seccion.id,\n                coordenadasAjustadas: {\n                    y: nuevaY\n                }\n            };\n        }\n        acumulado += seccion.altura;\n    }\n    if (yAbsolutaReal < 0) {\n        return {\n            nuevaSeccion: seccionesOrdenadas[0].id,\n            coordenadasAjustadas: {\n                y: 0\n            }\n        };\n    } else {\n        const ultimaSeccion = seccionesOrdenadas[seccionesOrdenadas.length - 1];\n        return {\n            nuevaSeccion: ultimaSeccion.id,\n            coordenadasAjustadas: {\n                y: ultimaSeccion.altura - 50\n            }\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9sYXlvdXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsc0JBQXNCO0FBRXRCLG9CQUFvQjtBQUNiLFNBQVNBLGdCQUFnQkMsU0FBK0IsRUFBRUMsS0FBYTtJQUM1RSxNQUFNQyxhQUFhRixVQUFVRyxLQUFLLENBQUMsR0FBR0Y7SUFDdEMsT0FBT0MsV0FBV0UsTUFBTSxDQUFDLENBQUNDLEtBQUtDLElBQU1ELE1BQU1DLEVBQUVDLE1BQU0sRUFBRTtBQUN2RDtBQUVBLHFCQUFxQjtBQUNkLFNBQVNDLGlCQUNkQyxJQUFZLEVBQ1pDLFNBQWlCLEVBQ2pCVixTQUEyQztJQUUzQyxNQUFNVyxlQUFlWCxVQUFVWSxTQUFTLENBQUNOLENBQUFBLElBQUtBLEVBQUVPLEVBQUUsS0FBS0g7SUFDdkQsSUFBSUMsZUFBZSxHQUFHLE9BQU9GO0lBQzdCLE1BQU1LLFVBQVVmLGdCQUFnQkMsV0FBV1c7SUFDM0MsT0FBT0YsT0FBT0s7QUFDaEI7QUFFQSwyQkFBMkI7QUFDcEIsTUFBTUMseUJBQXlCLENBQ3BDQyxvQkFDQUMsaUJBQ0FDO0lBRUEsTUFBTUMsZ0JBQWdCRCxtQkFBbUJFLElBQUksQ0FBQ2QsQ0FBQUEsSUFBS0EsRUFBRU8sRUFBRSxLQUFLSTtJQUM1RCxJQUFJLENBQUNFLGVBQWUsT0FBTztRQUFFRSxjQUFjO1FBQU1DLHNCQUFzQixDQUFDO0lBQUU7SUFFMUUsTUFBTUMsZ0JBQWdCUDtJQUV0QixJQUFJUSxZQUFZO0lBQ2hCLEtBQUssTUFBTUMsV0FBV1AsbUJBQW9CO1FBQ3hDLElBQUlLLGlCQUFpQkMsYUFBYUQsZ0JBQWdCQyxZQUFZQyxRQUFRbEIsTUFBTSxFQUFFO1lBQzVFLElBQUlrQixRQUFRWixFQUFFLEtBQUtJLGlCQUFpQjtnQkFDbEMsT0FBTztvQkFBRUksY0FBYztvQkFBTUMsc0JBQXNCLENBQUM7Z0JBQUU7WUFDeEQ7WUFDQSxNQUFNSSxTQUFTSCxnQkFBZ0JDO1lBQy9CLE9BQU87Z0JBQ0xILGNBQWNJLFFBQVFaLEVBQUU7Z0JBQ3hCUyxzQkFBc0I7b0JBQUVLLEdBQUdEO2dCQUFPO1lBQ3BDO1FBQ0Y7UUFDQUYsYUFBYUMsUUFBUWxCLE1BQU07SUFDN0I7SUFFQSxJQUFJZ0IsZ0JBQWdCLEdBQUc7UUFDckIsT0FBTztZQUNMRixjQUFjSCxrQkFBa0IsQ0FBQyxFQUFFLENBQUNMLEVBQUU7WUFDdENTLHNCQUFzQjtnQkFBRUssR0FBRztZQUFFO1FBQy9CO0lBQ0YsT0FBTztRQUNMLE1BQU1DLGdCQUFnQlYsa0JBQWtCLENBQUNBLG1CQUFtQlcsTUFBTSxHQUFHLEVBQUU7UUFDdkUsT0FBTztZQUNMUixjQUFjTyxjQUFjZixFQUFFO1lBQzlCUyxzQkFBc0I7Z0JBQUVLLEdBQUdDLGNBQWNyQixNQUFNLEdBQUc7WUFBRztRQUN2RDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcbGF5b3V0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9sYXlvdXQudHNcclxuXHJcbi8vIOKchSBjYWxjdWxhck9mZnNldFlcclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGFyT2Zmc2V0WShzZWNjaW9uZXM6IHsgYWx0dXJhOiBudW1iZXIgfVtdLCBpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcclxuICBjb25zdCBhbnRlcmlvcmVzID0gc2VjY2lvbmVzLnNsaWNlKDAsIGluZGV4KTtcclxuICByZXR1cm4gYW50ZXJpb3Jlcy5yZWR1Y2UoKGFjYywgcykgPT4gYWNjICsgcy5hbHR1cmEsIDApO1xyXG59XHJcblxyXG4vLyDinIUgY29udmVydGlyQWJzQVJlbFxyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydGlyQWJzQVJlbChcclxuICB5QWJzOiBudW1iZXIsXHJcbiAgc2VjY2lvbklkOiBzdHJpbmcsXHJcbiAgc2VjY2lvbmVzOiB7IGlkOiBzdHJpbmc7IGFsdHVyYTogbnVtYmVyIH1bXVxyXG4pOiBudW1iZXIge1xyXG4gIGNvbnN0IHNlY2Npb25JbmRleCA9IHNlY2Npb25lcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSBzZWNjaW9uSWQpO1xyXG4gIGlmIChzZWNjaW9uSW5kZXggPCAwKSByZXR1cm4geUFicztcclxuICBjb25zdCBvZmZzZXRZID0gY2FsY3VsYXJPZmZzZXRZKHNlY2Npb25lcywgc2VjY2lvbkluZGV4KTtcclxuICByZXR1cm4geUFicyAtIG9mZnNldFk7XHJcbn1cclxuXHJcbi8vIOKchSBkZXRlcm1pbmFyTnVldmFTZWNjaW9uXHJcbmV4cG9ydCBjb25zdCBkZXRlcm1pbmFyTnVldmFTZWNjaW9uID0gKFxyXG4gIHlSZWxhdGl2YUNvbk9mZnNldDogbnVtYmVyLFxyXG4gIHNlY2Npb25BY3R1YWxJZDogc3RyaW5nLFxyXG4gIHNlY2Npb25lc09yZGVuYWRhczogeyBpZDogc3RyaW5nOyBhbHR1cmE6IG51bWJlciB9W11cclxuKTogeyBudWV2YVNlY2Npb246IHN0cmluZyB8IG51bGw7IGNvb3JkZW5hZGFzQWp1c3RhZGFzOiB7IHk/OiBudW1iZXIgfSB9ID0+IHtcclxuICBjb25zdCBzZWNjaW9uQWN0dWFsID0gc2VjY2lvbmVzT3JkZW5hZGFzLmZpbmQocyA9PiBzLmlkID09PSBzZWNjaW9uQWN0dWFsSWQpO1xyXG4gIGlmICghc2VjY2lvbkFjdHVhbCkgcmV0dXJuIHsgbnVldmFTZWNjaW9uOiBudWxsLCBjb29yZGVuYWRhc0FqdXN0YWRhczoge30gfTtcclxuXHJcbiAgY29uc3QgeUFic29sdXRhUmVhbCA9IHlSZWxhdGl2YUNvbk9mZnNldDtcclxuXHJcbiAgbGV0IGFjdW11bGFkbyA9IDA7XHJcbiAgZm9yIChjb25zdCBzZWNjaW9uIG9mIHNlY2Npb25lc09yZGVuYWRhcykge1xyXG4gICAgaWYgKHlBYnNvbHV0YVJlYWwgPj0gYWN1bXVsYWRvICYmIHlBYnNvbHV0YVJlYWwgPCBhY3VtdWxhZG8gKyBzZWNjaW9uLmFsdHVyYSkge1xyXG4gICAgICBpZiAoc2VjY2lvbi5pZCA9PT0gc2VjY2lvbkFjdHVhbElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgbnVldmFTZWNjaW9uOiBudWxsLCBjb29yZGVuYWRhc0FqdXN0YWRhczoge30gfTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBudWV2YVkgPSB5QWJzb2x1dGFSZWFsIC0gYWN1bXVsYWRvO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG51ZXZhU2VjY2lvbjogc2VjY2lvbi5pZCxcclxuICAgICAgICBjb29yZGVuYWRhc0FqdXN0YWRhczogeyB5OiBudWV2YVkgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIGFjdW11bGFkbyArPSBzZWNjaW9uLmFsdHVyYTtcclxuICB9XHJcblxyXG4gIGlmICh5QWJzb2x1dGFSZWFsIDwgMCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbnVldmFTZWNjaW9uOiBzZWNjaW9uZXNPcmRlbmFkYXNbMF0uaWQsXHJcbiAgICAgIGNvb3JkZW5hZGFzQWp1c3RhZGFzOiB7IHk6IDAgfSxcclxuICAgIH07XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IHVsdGltYVNlY2Npb24gPSBzZWNjaW9uZXNPcmRlbmFkYXNbc2VjY2lvbmVzT3JkZW5hZGFzLmxlbmd0aCAtIDFdO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbnVldmFTZWNjaW9uOiB1bHRpbWFTZWNjaW9uLmlkLFxyXG4gICAgICBjb29yZGVuYWRhc0FqdXN0YWRhczogeyB5OiB1bHRpbWFTZWNjaW9uLmFsdHVyYSAtIDUwIH0sXHJcbiAgICB9O1xyXG4gIH1cclxufTtcclxuIl0sIm5hbWVzIjpbImNhbGN1bGFyT2Zmc2V0WSIsInNlY2Npb25lcyIsImluZGV4IiwiYW50ZXJpb3JlcyIsInNsaWNlIiwicmVkdWNlIiwiYWNjIiwicyIsImFsdHVyYSIsImNvbnZlcnRpckFic0FSZWwiLCJ5QWJzIiwic2VjY2lvbklkIiwic2VjY2lvbkluZGV4IiwiZmluZEluZGV4IiwiaWQiLCJvZmZzZXRZIiwiZGV0ZXJtaW5hck51ZXZhU2VjY2lvbiIsInlSZWxhdGl2YUNvbk9mZnNldCIsInNlY2Npb25BY3R1YWxJZCIsInNlY2Npb25lc09yZGVuYWRhcyIsInNlY2Npb25BY3R1YWwiLCJmaW5kIiwibnVldmFTZWNjaW9uIiwiY29vcmRlbmFkYXNBanVzdGFkYXMiLCJ5QWJzb2x1dGFSZWFsIiwiYWN1bXVsYWRvIiwic2VjY2lvbiIsIm51ZXZhWSIsInkiLCJ1bHRpbWFTZWNjaW9uIiwibGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/layout.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/plantillas.js":
/*!*********************************!*\
  !*** ./src/utils/plantillas.js ***!
  \*********************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   guardarSeccionComoPlantilla: () => (/* binding */ guardarSeccionComoPlantilla)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/firebase */ \"(pages-dir-node)/./src/firebase.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var _utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/subirImagenPublica */ \"(pages-dir-node)/./src/utils/subirImagenPublica.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__, firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _firebase__WEBPACK_IMPORTED_MODULE_1__, firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/utils/plantillas.js\n\n\n\n\n/**\r\n * 💾 Guarda una sección como plantilla en Firestore\r\n */ const guardarSeccionComoPlantilla = async ({ seccionId, secciones, objetos, refrescarPlantillasDeSeccion })=>{\n    const seccion = secciones.find((s)=>s.id === seccionId);\n    if (!seccion) {\n        alert(\"No se encontró la sección.\");\n        return;\n    }\n    const objetosDeEsaSeccion = objetos.filter((obj)=>obj.seccionId === seccionId);\n    const user = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)().currentUser;\n    if (!user) {\n        alert(\"⚠️ No estás logueado. No se puede guardar la plantilla.\");\n        return;\n    }\n    const objetosFinales = await Promise.all(objetosDeEsaSeccion.map(async (obj)=>{\n        if (obj.tipo === \"imagen\" && obj.src?.startsWith(\"user_uploads/\")) {\n            const nuevaUrl = await (0,_utils_subirImagenPublica__WEBPACK_IMPORTED_MODULE_3__.subirImagenPublica)(obj.src);\n            return {\n                ...obj,\n                src: nuevaUrl\n            };\n        }\n        return obj;\n    }));\n    const nombre = prompt(\"Nombre de la plantilla:\");\n    if (!nombre) return;\n    const plantilla = {\n        nombre,\n        altura: seccion.altura,\n        fondo: seccion.fondo,\n        tipo: seccion.tipo,\n        objetos: objetosFinales\n    };\n    const ref = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"plantillas_secciones\");\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)(ref, plantilla);\n    if (refrescarPlantillasDeSeccion) {\n        await refrescarPlantillasDeSeccion();\n    }\n    alert(\"✅ Plantilla guardada correctamente\");\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9wbGFudGlsbGFzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsMEJBQTBCO0FBQzhCO0FBQ3hCO0FBQ1E7QUFDd0I7QUFFaEU7O0NBRUMsR0FDTSxNQUFNSyw4QkFBOEIsT0FBTyxFQUNoREMsU0FBUyxFQUNUQyxTQUFTLEVBQ1RDLE9BQU8sRUFDUEMsNEJBQTRCLEVBQzdCO0lBQ0MsTUFBTUMsVUFBVUgsVUFBVUksSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS1A7SUFDL0MsSUFBSSxDQUFDSSxTQUFTO1FBQ1pJLE1BQU07UUFDTjtJQUNGO0lBRUEsTUFBTUMsc0JBQXNCUCxRQUFRUSxNQUFNLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSVgsU0FBUyxLQUFLQTtJQUV0RSxNQUFNWSxPQUFPZixzREFBT0EsR0FBR2dCLFdBQVc7SUFDbEMsSUFBSSxDQUFDRCxNQUFNO1FBQ1RKLE1BQU07UUFDTjtJQUNGO0lBRUEsTUFBTU0saUJBQWlCLE1BQU1DLFFBQVFDLEdBQUcsQ0FDdENQLG9CQUFvQlEsR0FBRyxDQUFDLE9BQU9OO1FBQzdCLElBQUlBLElBQUlPLElBQUksS0FBSyxZQUFZUCxJQUFJUSxHQUFHLEVBQUVDLFdBQVcsa0JBQWtCO1lBQ2pFLE1BQU1DLFdBQVcsTUFBTXZCLDZFQUFrQkEsQ0FBQ2EsSUFBSVEsR0FBRztZQUNqRCxPQUFPO2dCQUFFLEdBQUdSLEdBQUc7Z0JBQUVRLEtBQUtFO1lBQVM7UUFDakM7UUFDQSxPQUFPVjtJQUNUO0lBR0YsTUFBTVcsU0FBU0MsT0FBTztJQUN0QixJQUFJLENBQUNELFFBQVE7SUFFYixNQUFNRSxZQUFZO1FBQ2hCRjtRQUNBRyxRQUFRckIsUUFBUXFCLE1BQU07UUFDdEJDLE9BQU90QixRQUFRc0IsS0FBSztRQUNwQlIsTUFBTWQsUUFBUWMsSUFBSTtRQUNsQmhCLFNBQVNZO0lBQ1g7SUFFQSxNQUFNYSxNQUFNakMsOERBQVVBLENBQUNFLHlDQUFFQSxFQUFFO0lBQzNCLE1BQU1ELDBEQUFNQSxDQUFDZ0MsS0FBS0g7SUFFbEIsSUFBSXJCLDhCQUE4QjtRQUNoQyxNQUFNQTtJQUNSO0lBRUFLLE1BQU07QUFDUixFQUFFIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXHV0aWxzXFxwbGFudGlsbGFzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9wbGFudGlsbGFzLmpzXHJcbmltcG9ydCB7IGNvbGxlY3Rpb24sIGFkZERvYyB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcclxuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9maXJlYmFzZVwiO1xyXG5pbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcclxuaW1wb3J0IHsgc3ViaXJJbWFnZW5QdWJsaWNhIH0gZnJvbSBcIkAvdXRpbHMvc3ViaXJJbWFnZW5QdWJsaWNhXCI7XHJcblxyXG4vKipcclxuICog8J+SviBHdWFyZGEgdW5hIHNlY2Npw7NuIGNvbW8gcGxhbnRpbGxhIGVuIEZpcmVzdG9yZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGd1YXJkYXJTZWNjaW9uQ29tb1BsYW50aWxsYSA9IGFzeW5jICh7XHJcbiAgc2VjY2lvbklkLFxyXG4gIHNlY2Npb25lcyxcclxuICBvYmpldG9zLFxyXG4gIHJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24sXHJcbn0pID0+IHtcclxuICBjb25zdCBzZWNjaW9uID0gc2VjY2lvbmVzLmZpbmQoKHMpID0+IHMuaWQgPT09IHNlY2Npb25JZCk7XHJcbiAgaWYgKCFzZWNjaW9uKSB7XHJcbiAgICBhbGVydChcIk5vIHNlIGVuY29udHLDsyBsYSBzZWNjacOzbi5cIik7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCBvYmpldG9zRGVFc2FTZWNjaW9uID0gb2JqZXRvcy5maWx0ZXIoKG9iaikgPT4gb2JqLnNlY2Npb25JZCA9PT0gc2VjY2lvbklkKTtcclxuXHJcbiAgY29uc3QgdXNlciA9IGdldEF1dGgoKS5jdXJyZW50VXNlcjtcclxuICBpZiAoIXVzZXIpIHtcclxuICAgIGFsZXJ0KFwi4pqg77iPIE5vIGVzdMOhcyBsb2d1ZWFkby4gTm8gc2UgcHVlZGUgZ3VhcmRhciBsYSBwbGFudGlsbGEuXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb2JqZXRvc0ZpbmFsZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgIG9iamV0b3NEZUVzYVNlY2Npb24ubWFwKGFzeW5jIChvYmopID0+IHtcclxuICAgICAgaWYgKG9iai50aXBvID09PSBcImltYWdlblwiICYmIG9iai5zcmM/LnN0YXJ0c1dpdGgoXCJ1c2VyX3VwbG9hZHMvXCIpKSB7XHJcbiAgICAgICAgY29uc3QgbnVldmFVcmwgPSBhd2FpdCBzdWJpckltYWdlblB1YmxpY2Eob2JqLnNyYyk7XHJcbiAgICAgICAgcmV0dXJuIHsgLi4ub2JqLCBzcmM6IG51ZXZhVXJsIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH0pXHJcbiAgKTtcclxuXHJcbiAgY29uc3Qgbm9tYnJlID0gcHJvbXB0KFwiTm9tYnJlIGRlIGxhIHBsYW50aWxsYTpcIik7XHJcbiAgaWYgKCFub21icmUpIHJldHVybjtcclxuXHJcbiAgY29uc3QgcGxhbnRpbGxhID0ge1xyXG4gICAgbm9tYnJlLFxyXG4gICAgYWx0dXJhOiBzZWNjaW9uLmFsdHVyYSxcclxuICAgIGZvbmRvOiBzZWNjaW9uLmZvbmRvLFxyXG4gICAgdGlwbzogc2VjY2lvbi50aXBvLFxyXG4gICAgb2JqZXRvczogb2JqZXRvc0ZpbmFsZXMsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVmID0gY29sbGVjdGlvbihkYiwgXCJwbGFudGlsbGFzX3NlY2Npb25lc1wiKTtcclxuICBhd2FpdCBhZGREb2MocmVmLCBwbGFudGlsbGEpO1xyXG5cclxuICBpZiAocmVmcmVzY2FyUGxhbnRpbGxhc0RlU2VjY2lvbikge1xyXG4gICAgYXdhaXQgcmVmcmVzY2FyUGxhbnRpbGxhc0RlU2VjY2lvbigpO1xyXG4gIH1cclxuXHJcbiAgYWxlcnQoXCLinIUgUGxhbnRpbGxhIGd1YXJkYWRhIGNvcnJlY3RhbWVudGVcIik7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiYWRkRG9jIiwiZGIiLCJnZXRBdXRoIiwic3ViaXJJbWFnZW5QdWJsaWNhIiwiZ3VhcmRhclNlY2Npb25Db21vUGxhbnRpbGxhIiwic2VjY2lvbklkIiwic2VjY2lvbmVzIiwib2JqZXRvcyIsInJlZnJlc2NhclBsYW50aWxsYXNEZVNlY2Npb24iLCJzZWNjaW9uIiwiZmluZCIsInMiLCJpZCIsImFsZXJ0Iiwib2JqZXRvc0RlRXNhU2VjY2lvbiIsImZpbHRlciIsIm9iaiIsInVzZXIiLCJjdXJyZW50VXNlciIsIm9iamV0b3NGaW5hbGVzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInRpcG8iLCJzcmMiLCJzdGFydHNXaXRoIiwibnVldmFVcmwiLCJub21icmUiLCJwcm9tcHQiLCJwbGFudGlsbGEiLCJhbHR1cmEiLCJmb25kbyIsInJlZiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/plantillas.js\n");

/***/ }),

/***/ "(pages-dir-node)/./src/utils/subirImagenPublica.js":
/*!*****************************************!*\
  !*** ./src/utils/subirImagenPublica.js ***!
  \*****************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   subirImagenPublica: () => (/* binding */ subirImagenPublica)\n/* harmony export */ });\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_storage__WEBPACK_IMPORTED_MODULE_0__]);\nfirebase_storage__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n/**\r\n * 🖼️ Sube una imagen al bucket público (sin token) y devuelve la URL\r\n */ const subirImagenPublica = async (rutaInternaStorage)=>{\n    if (!rutaInternaStorage) throw new Error(\"No se recibió ruta de imagen\");\n    const storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getStorage)();\n    const archivoRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)(storage, rutaInternaStorage);\n    // 🔥 Descargar el archivo original\n    const urlOriginal = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(archivoRef);\n    const response = await fetch(urlOriginal, {\n        mode: \"cors\"\n    });\n    const blob = await response.blob();\n    const extension = blob.type.split(\"/\")[1] || \"jpg\";\n    const nombreNuevo = `public/${Date.now()}.${extension}`;\n    const refNuevo = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)(storage, nombreNuevo);\n    await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytes)(refNuevo, blob, {\n        customMetadata: {\n            firebaseStorageDownloadTokens: null\n        }\n    });\n    return await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(refNuevo);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9zdWJpckltYWdlblB1YmxpY2EuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0Y7QUFFaEY7O0NBRUMsR0FDTSxNQUFNSSxxQkFBcUIsT0FBT0M7SUFDdkMsSUFBSSxDQUFDQSxvQkFBb0IsTUFBTSxJQUFJQyxNQUFNO0lBRXpDLE1BQU1DLFVBQVVQLDREQUFVQTtJQUMxQixNQUFNUSxhQUFhUCxxREFBR0EsQ0FBQ00sU0FBU0Y7SUFFaEMsbUNBQW1DO0lBQ25DLE1BQU1JLGNBQWMsTUFBTU4sZ0VBQWNBLENBQUNLO0lBQ3pDLE1BQU1FLFdBQVcsTUFBTUMsTUFBTUYsYUFBYTtRQUFFRyxNQUFNO0lBQU87SUFDekQsTUFBTUMsT0FBTyxNQUFNSCxTQUFTRyxJQUFJO0lBRWhDLE1BQU1DLFlBQVlELEtBQUtFLElBQUksQ0FBQ0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUk7SUFDN0MsTUFBTUMsY0FBYyxDQUFDLE9BQU8sRUFBRUMsS0FBS0MsR0FBRyxHQUFHLENBQUMsRUFBRUwsV0FBVztJQUN2RCxNQUFNTSxXQUFXbkIscURBQUdBLENBQUNNLFNBQVNVO0lBRTlCLE1BQU1mLDZEQUFXQSxDQUFDa0IsVUFBVVAsTUFBTTtRQUNoQ1EsZ0JBQWdCO1lBQUVDLCtCQUErQjtRQUFLO0lBQ3hEO0lBRUEsT0FBTyxNQUFNbkIsZ0VBQWNBLENBQUNpQjtBQUM5QixFQUFFIiwic291cmNlcyI6WyJDOlxcUmVzZXJ2YWVsZGlhXFxzcmNcXHV0aWxzXFxzdWJpckltYWdlblB1YmxpY2EuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U3RvcmFnZSwgcmVmLCB1cGxvYWRCeXRlcywgZ2V0RG93bmxvYWRVUkwgfSBmcm9tIFwiZmlyZWJhc2Uvc3RvcmFnZVwiO1xyXG5cclxuLyoqXHJcbiAqIPCflrzvuI8gU3ViZSB1bmEgaW1hZ2VuIGFsIGJ1Y2tldCBww7pibGljbyAoc2luIHRva2VuKSB5IGRldnVlbHZlIGxhIFVSTFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHN1YmlySW1hZ2VuUHVibGljYSA9IGFzeW5jIChydXRhSW50ZXJuYVN0b3JhZ2UpID0+IHtcclxuICBpZiAoIXJ1dGFJbnRlcm5hU3RvcmFnZSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcmVjaWJpw7MgcnV0YSBkZSBpbWFnZW5cIik7XHJcblxyXG4gIGNvbnN0IHN0b3JhZ2UgPSBnZXRTdG9yYWdlKCk7XHJcbiAgY29uc3QgYXJjaGl2b1JlZiA9IHJlZihzdG9yYWdlLCBydXRhSW50ZXJuYVN0b3JhZ2UpO1xyXG5cclxuICAvLyDwn5SlIERlc2NhcmdhciBlbCBhcmNoaXZvIG9yaWdpbmFsXHJcbiAgY29uc3QgdXJsT3JpZ2luYWwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChhcmNoaXZvUmVmKTtcclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybE9yaWdpbmFsLCB7IG1vZGU6IFwiY29yc1wiIH0pO1xyXG4gIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XHJcblxyXG4gIGNvbnN0IGV4dGVuc2lvbiA9IGJsb2IudHlwZS5zcGxpdChcIi9cIilbMV0gfHwgXCJqcGdcIjtcclxuICBjb25zdCBub21icmVOdWV2byA9IGBwdWJsaWMvJHtEYXRlLm5vdygpfS4ke2V4dGVuc2lvbn1gO1xyXG4gIGNvbnN0IHJlZk51ZXZvID0gcmVmKHN0b3JhZ2UsIG5vbWJyZU51ZXZvKTtcclxuXHJcbiAgYXdhaXQgdXBsb2FkQnl0ZXMocmVmTnVldm8sIGJsb2IsIHtcclxuICAgIGN1c3RvbU1ldGFkYXRhOiB7IGZpcmViYXNlU3RvcmFnZURvd25sb2FkVG9rZW5zOiBudWxsIH0sXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBhd2FpdCBnZXREb3dubG9hZFVSTChyZWZOdWV2byk7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJnZXRTdG9yYWdlIiwicmVmIiwidXBsb2FkQnl0ZXMiLCJnZXREb3dubG9hZFVSTCIsInN1YmlySW1hZ2VuUHVibGljYSIsInJ1dGFJbnRlcm5hU3RvcmFnZSIsIkVycm9yIiwic3RvcmFnZSIsImFyY2hpdm9SZWYiLCJ1cmxPcmlnaW5hbCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwiYmxvYiIsImV4dGVuc2lvbiIsInR5cGUiLCJzcGxpdCIsIm5vbWJyZU51ZXZvIiwiRGF0ZSIsIm5vdyIsInJlZk51ZXZvIiwiY3VzdG9tTWV0YWRhdGEiLCJmaXJlYmFzZVN0b3JhZ2VEb3dubG9hZFRva2VucyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/subirImagenPublica.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!*******************************************************************************************************************************************************************************!*\
  !*** __barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \*******************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArrowDown: () => (/* reexport safe */ _icons_arrow_down_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   ArrowUp: () => (/* reexport safe */ _icons_arrow_up_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   ClipboardPaste: () => (/* reexport safe */ _icons_clipboard_paste_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   Copy: () => (/* reexport safe */ _icons_copy_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   Layers: () => (/* reexport safe */ _icons_layers_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n/* harmony export */   Link2: () => (/* reexport safe */ _icons_link_2_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]),\n/* harmony export */   MoveDown: () => (/* reexport safe */ _icons_move_down_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]),\n/* harmony export */   MoveUp: () => (/* reexport safe */ _icons_move_up_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]),\n/* harmony export */   PlusCircle: () => (/* reexport safe */ _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]),\n/* harmony export */   Trash2: () => (/* reexport safe */ _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]),\n/* harmony export */   X: () => (/* reexport safe */ _icons_x_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_arrow_down_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/arrow-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/arrow-down.js\");\n/* harmony import */ var _icons_arrow_up_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/arrow-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js\");\n/* harmony import */ var _icons_clipboard_paste_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/clipboard-paste.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/clipboard-paste.js\");\n/* harmony import */ var _icons_copy_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/copy.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/copy.js\");\n/* harmony import */ var _icons_layers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/layers.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/layers.js\");\n/* harmony import */ var _icons_link_2_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/link-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/link-2.js\");\n/* harmony import */ var _icons_move_down_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./icons/move-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-down.js\");\n/* harmony import */ var _icons_move_up_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./icons/move-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-up.js\");\n/* harmony import */ var _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./icons/circle-plus.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/circle-plus.js\");\n/* harmony import */ var _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icons/trash-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _icons_x_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./icons/x.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPUFycm93RG93bixBcnJvd1VwLENsaXBib2FyZFBhc3RlLENvcHksTGF5ZXJzLExpbmsyLE1vdmVEb3duLE1vdmVVcCxQbHVzQ2lyY2xlLFRyYXNoMixYIT0hLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2x1Y2lkZS1yZWFjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUM0RDtBQUNKO0FBQ2M7QUFDckI7QUFDSTtBQUNEO0FBQ007QUFDSjtBQUNRO0FBQ1IiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXG5vZGVfbW9kdWxlc1xcbHVjaWRlLXJlYWN0XFxkaXN0XFxlc21cXGx1Y2lkZS1yZWFjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQXJyb3dEb3duIH0gZnJvbSBcIi4vaWNvbnMvYXJyb3ctZG93bi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIEFycm93VXAgfSBmcm9tIFwiLi9pY29ucy9hcnJvdy11cC5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIENsaXBib2FyZFBhc3RlIH0gZnJvbSBcIi4vaWNvbnMvY2xpcGJvYXJkLXBhc3RlLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQ29weSB9IGZyb20gXCIuL2ljb25zL2NvcHkuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBMYXllcnMgfSBmcm9tIFwiLi9pY29ucy9sYXllcnMuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBMaW5rMiB9IGZyb20gXCIuL2ljb25zL2xpbmstMi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdmVEb3duIH0gZnJvbSBcIi4vaWNvbnMvbW92ZS1kb3duLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW92ZVVwIH0gZnJvbSBcIi4vaWNvbnMvbW92ZS11cC5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFBsdXNDaXJjbGUgfSBmcm9tIFwiLi9pY29ucy9jaXJjbGUtcGx1cy5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFRyYXNoMiB9IGZyb20gXCIuL2ljb25zL3RyYXNoLTIuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBYIH0gZnJvbSBcIi4vaWNvbnMveC5qc1wiIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/__barrel_optimize__?names=ArrowDown,ArrowUp,ClipboardPaste,Copy,Layers,Link2,MoveDown,MoveUp,PlusCircle,Trash2,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=Check!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!**********************************************************************************************!*\
  !*** __barrel_optimize__?names=Check!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Check: () => (/* reexport safe */ _icons_check_js__WEBPACK_IMPORTED_MODULE_0__["default"])
/* harmony export */ });
/* harmony import */ var _icons_check_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/check.js */ "(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/check.js");



/***/ }),

/***/ "(pages-dir-node)/__barrel_optimize__?names=ChevronDown,ChevronUp,Layers,Monitor,MoveDown,MoveUp,PlusCircle,Settings,Trash2,Unlink2!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!********************************************************************************************************************************************************************************!*\
  !*** __barrel_optimize__?names=ChevronDown,ChevronUp,Layers,Monitor,MoveDown,MoveUp,PlusCircle,Settings,Trash2,Unlink2!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \********************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChevronDown: () => (/* reexport safe */ _icons_chevron_down_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   ChevronUp: () => (/* reexport safe */ _icons_chevron_up_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   Layers: () => (/* reexport safe */ _icons_layers_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   Monitor: () => (/* reexport safe */ _icons_monitor_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   MoveDown: () => (/* reexport safe */ _icons_move_down_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n/* harmony export */   MoveUp: () => (/* reexport safe */ _icons_move_up_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]),\n/* harmony export */   PlusCircle: () => (/* reexport safe */ _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]),\n/* harmony export */   Settings: () => (/* reexport safe */ _icons_settings_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]),\n/* harmony export */   Trash2: () => (/* reexport safe */ _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]),\n/* harmony export */   Unlink2: () => (/* reexport safe */ _icons_unlink_2_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_chevron_down_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/chevron-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var _icons_chevron_up_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/chevron-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/chevron-up.js\");\n/* harmony import */ var _icons_layers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/layers.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/layers.js\");\n/* harmony import */ var _icons_monitor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/monitor.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/monitor.js\");\n/* harmony import */ var _icons_move_down_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/move-down.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-down.js\");\n/* harmony import */ var _icons_move_up_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/move-up.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/move-up.js\");\n/* harmony import */ var _icons_circle_plus_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./icons/circle-plus.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/circle-plus.js\");\n/* harmony import */ var _icons_settings_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./icons/settings.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/settings.js\");\n/* harmony import */ var _icons_trash_2_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./icons/trash-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/trash-2.js\");\n/* harmony import */ var _icons_unlink_2_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icons/unlink-2.js */ \"(pages-dir-node)/./node_modules/lucide-react/dist/esm/icons/unlink-2.js\");\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS9fX2JhcnJlbF9vcHRpbWl6ZV9fP25hbWVzPUNoZXZyb25Eb3duLENoZXZyb25VcCxMYXllcnMsTW9uaXRvcixNb3ZlRG93bixNb3ZlVXAsUGx1c0NpcmNsZSxTZXR0aW5ncyxUcmFzaDIsVW5saW5rMiE9IS4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9sdWNpZGUtcmVhY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ2dFO0FBQ0o7QUFDUDtBQUNFO0FBQ0c7QUFDSjtBQUNRO0FBQ0w7QUFDSCIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcbm9kZV9tb2R1bGVzXFxsdWNpZGUtcmVhY3RcXGRpc3RcXGVzbVxcbHVjaWRlLXJlYWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBDaGV2cm9uRG93biB9IGZyb20gXCIuL2ljb25zL2NoZXZyb24tZG93bi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIENoZXZyb25VcCB9IGZyb20gXCIuL2ljb25zL2NoZXZyb24tdXAuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBMYXllcnMgfSBmcm9tIFwiLi9pY29ucy9sYXllcnMuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb25pdG9yIH0gZnJvbSBcIi4vaWNvbnMvbW9uaXRvci5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdmVEb3duIH0gZnJvbSBcIi4vaWNvbnMvbW92ZS1kb3duLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW92ZVVwIH0gZnJvbSBcIi4vaWNvbnMvbW92ZS11cC5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFBsdXNDaXJjbGUgfSBmcm9tIFwiLi9pY29ucy9jaXJjbGUtcGx1cy5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFNldHRpbmdzIH0gZnJvbSBcIi4vaWNvbnMvc2V0dGluZ3MuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBUcmFzaDIgfSBmcm9tIFwiLi9pY29ucy90cmFzaC0yLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgVW5saW5rMiB9IGZyb20gXCIuL2ljb25zL3VubGluay0yLmpzXCIiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/__barrel_optimize__?names=ChevronDown,ChevronUp,Layers,Monitor,MoveDown,MoveUp,PlusCircle,Settings,Trash2,Unlink2!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ })

};
;