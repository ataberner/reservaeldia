"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_src_utils_fontManager_js";
exports.ids = ["_pages-dir-node_src_utils_fontManager_js"];
exports.modules = {

/***/ "(pages-dir-node)/./src/utils/fontManager.js":
/*!**********************************!*\
  !*** ./src/utils/fontManager.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fontManager: () => (/* binding */ fontManager)\n/* harmony export */ });\n/* harmony import */ var webfontloader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! webfontloader */ \"webfontloader\");\n/* harmony import */ var _config_fonts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/config/fonts */ \"(pages-dir-node)/./src/config/fonts.js\");\n\n\nconst SYSTEM_FONTS = new Set([\n    'arial',\n    'helvetica',\n    'verdana',\n    'tahoma',\n    'trebuchet ms',\n    'georgia',\n    'times new roman',\n    'courier new',\n    'lucida console',\n    'comic sans ms',\n    'impact',\n    'sans-serif',\n    'serif',\n    'monospace'\n]);\nconst DEFAULT_TIMEOUT_MS = 12000;\nclass FontManager {\n    constructor(){\n        this.loadedFonts = new Set();\n        this.fontCache = new Map();\n        this.loadingPromises = new Map();\n        this.failedFonts = new Set();\n        this.googleFontSet = new Set([\n            ...(_config_fonts__WEBPACK_IMPORTED_MODULE_1__.GOOGLE_FONTS || []).map((font)=>this.normalizeFontName(font?.nombre)),\n            ...(_config_fonts__WEBPACK_IMPORTED_MODULE_1__.LEGACY_GOOGLE_FONT_NAMES || []).map((name)=>this.normalizeFontName(name))\n        ].filter(Boolean));\n    }\n    normalizeFontName(fontFamily) {\n        if (!fontFamily) return '';\n        return String(fontFamily).replace(/['\"]/g, '').split(',')[0].trim();\n    }\n    categorizeFont(fontFamily) {\n        const fontName = this.normalizeFontName(fontFamily);\n        if (!fontName) {\n            return {\n                type: 'system',\n                name: 'sans-serif'\n            };\n        }\n        if (SYSTEM_FONTS.has(fontName.toLowerCase())) {\n            return {\n                type: 'system',\n                name: fontName\n            };\n        }\n        if (this.googleFontSet.has(fontName)) {\n            return {\n                type: 'google',\n                name: fontName\n            };\n        }\n        return {\n            type: 'custom',\n            name: fontName\n        };\n    }\n    isGoogleFontLoadedInDocument(fontName) {\n        if (typeof document === 'undefined' || !document.fonts) return false;\n        try {\n            for (const face of document.fonts.values()){\n                const family = this.normalizeFontName(face?.family);\n                if (family === fontName && face?.status === 'loaded') {\n                    return true;\n                }\n            }\n        } catch  {\n            return false;\n        }\n        return false;\n    }\n    waitForDocumentFont(fontName, timeoutMs = DEFAULT_TIMEOUT_MS) {\n        if (typeof document === 'undefined' || !document.fonts?.load) {\n            return Promise.resolve();\n        }\n        const loadPromise = document.fonts.load(`16px \"${fontName}\"`);\n        if (!Number.isFinite(timeoutMs) || timeoutMs <= 0) {\n            return loadPromise.then(()=>undefined);\n        }\n        const timeoutPromise = new Promise((resolve)=>{\n            setTimeout(resolve, timeoutMs);\n        });\n        return Promise.race([\n            loadPromise,\n            timeoutPromise\n        ]).then(()=>undefined);\n    }\n    async loadGoogleFont(fontName, options = {}) {\n        const normalizedName = this.normalizeFontName(fontName);\n        const timeoutMs = Number.isFinite(options.timeoutMs) && options.timeoutMs > 0 ? options.timeoutMs : DEFAULT_TIMEOUT_MS;\n        if (!normalizedName) return Promise.resolve();\n        if (this.isFontAvailable(normalizedName)) {\n            this.loadedFonts.add(normalizedName);\n            this.failedFonts.delete(normalizedName);\n            return Promise.resolve();\n        }\n        if (this.loadedFonts.has(normalizedName)) {\n            this.loadedFonts.add(normalizedName);\n            this.failedFonts.delete(normalizedName);\n            return Promise.resolve();\n        }\n        if (this.loadingPromises.has(normalizedName)) {\n            return this.loadingPromises.get(normalizedName);\n        }\n        const loadPromise = new Promise((resolve, reject)=>{\n            webfontloader__WEBPACK_IMPORTED_MODULE_0__.load({\n                google: {\n                    families: [\n                        `${normalizedName}:400,700`\n                    ]\n                },\n                active: ()=>{\n                    this.waitForDocumentFont(normalizedName, timeoutMs).finally(()=>{\n                        this.loadedFonts.add(normalizedName);\n                        this.failedFonts.delete(normalizedName);\n                        this.loadingPromises.delete(normalizedName);\n                        this.forceCanvasRedraw();\n                        resolve();\n                    });\n                },\n                inactive: ()=>{\n                    this.loadingPromises.delete(normalizedName);\n                    this.failedFonts.add(normalizedName);\n                    reject(new Error(`No se pudo cargar la fuente: ${normalizedName}`));\n                },\n                timeout: timeoutMs\n            });\n        });\n        this.loadingPromises.set(normalizedName, loadPromise);\n        return loadPromise;\n    }\n    async loadFonts(fontFamilies = [], options = {}) {\n        const loaded = [];\n        const failed = [];\n        const uniqueFonts = [\n            ...new Set(fontFamilies.map((font)=>String(font || '').trim()))\n        ].filter(Boolean);\n        if (!uniqueFonts.length) {\n            return {\n                loaded,\n                failed\n            };\n        }\n        const pendingNames = [];\n        const pendingPromises = [];\n        uniqueFonts.forEach((fontFamily)=>{\n            const { type, name } = this.categorizeFont(fontFamily);\n            if (!name) return;\n            if (type === 'system') {\n                this.loadedFonts.add(name);\n                this.failedFonts.delete(name);\n                loaded.push(name);\n                return;\n            }\n            if (this.loadedFonts.has(name)) {\n                this.loadedFonts.add(name);\n                this.failedFonts.delete(name);\n                loaded.push(name);\n                return;\n            }\n            if (type !== 'google') {\n                this.failedFonts.add(name);\n                failed.push(name);\n                return;\n            }\n            pendingNames.push(name);\n            pendingPromises.push(this.loadGoogleFont(name, options));\n        });\n        if (!pendingPromises.length) {\n            return {\n                loaded: [\n                    ...new Set(loaded)\n                ],\n                failed: [\n                    ...new Set(failed)\n                ]\n            };\n        }\n        const settled = await Promise.allSettled(pendingPromises);\n        settled.forEach((result, index)=>{\n            const fontName = pendingNames[index];\n            const ready = this.isFontAvailable(fontName);\n            if (result.status === 'fulfilled' || ready) {\n                this.loadedFonts.add(fontName);\n                this.failedFonts.delete(fontName);\n                loaded.push(fontName);\n            } else {\n                this.failedFonts.add(fontName);\n                failed.push(fontName);\n            }\n        });\n        return {\n            loaded: [\n                ...new Set(loaded)\n            ],\n            failed: [\n                ...new Set(failed)\n            ]\n        };\n    }\n    async preloadPopularFonts() {\n        const popularFonts = [\n            'Poppins',\n            'Roboto',\n            'Open Sans',\n            'Montserrat',\n            'Raleway',\n            'Lato',\n            'Playfair Display',\n            'Oswald',\n            'Libre Bodoni',\n            'Bodoni Moda'\n        ];\n        return this.loadFonts(popularFonts);\n    }\n    forceCanvasRedraw() {\n        if (true) return;\n        window.dispatchEvent(new CustomEvent('fonts-loaded'));\n    }\n    isFontAvailable(fontFamily) {\n        const { type, name } = this.categorizeFont(fontFamily);\n        if (type === 'system') return true;\n        if (!name) return false;\n        if (this.loadedFonts.has(name)) return true;\n        if (type === 'google') {\n            const loadedInDocument = this.isGoogleFontLoadedInDocument(name);\n            if (loadedInDocument) {\n                this.loadedFonts.add(name);\n                this.failedFonts.delete(name);\n                return true;\n            }\n            return false;\n        }\n        if (typeof document !== 'undefined' && document.fonts?.check) {\n            try {\n                const available = document.fonts.check(`16px \"${name}\"`);\n                if (available) {\n                    this.loadedFonts.add(name);\n                    this.failedFonts.delete(name);\n                    return true;\n                }\n            } catch  {\n                return false;\n            }\n        }\n        return false;\n    }\n    getGoogleFontsLink(fontFamilies = []) {\n        const families = fontFamilies.map((font)=>this.normalizeFontName(font)).filter((name)=>this.googleFontSet.has(name)).map((name)=>`family=${encodeURIComponent(`${name}:wght@400;700`.replace(/ /g, '+'))}`).join('&');\n        if (!families) return '';\n        const url = `https://fonts.googleapis.com/css2?${families}&display=swap`;\n        return `\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"${url}\" rel=\"stylesheet\">`.trim();\n    }\n    getLoadedFontsCSS() {\n        const googleFonts = Array.from(this.loadedFonts);\n        if (googleFonts.length === 0) return '';\n        const families = googleFonts.map((font)=>`family=${encodeURIComponent(`${font}:wght@300;400;500;600;700`.replace(/ /g, '+'))}`).join('&');\n        return `https://fonts.googleapis.com/css2?${families}&display=swap`;\n    }\n}\nconst fontManager = new FontManager();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy91dGlscy9mb250TWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0M7QUFDb0M7QUFFeEUsTUFBTUcsZUFBZSxJQUFJQyxJQUFJO0lBQzNCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVELE1BQU1DLHFCQUFxQjtBQUUzQixNQUFNQztJQUNKQyxhQUFjO1FBQ1osSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSUo7UUFDdkIsSUFBSSxDQUFDSyxTQUFTLEdBQUcsSUFBSUM7UUFDckIsSUFBSSxDQUFDQyxlQUFlLEdBQUcsSUFBSUQ7UUFDM0IsSUFBSSxDQUFDRSxXQUFXLEdBQUcsSUFBSVI7UUFDdkIsSUFBSSxDQUFDUyxhQUFhLEdBQUcsSUFBSVQsSUFDdkI7ZUFDSyxDQUFDSCx1REFBWUEsSUFBSSxFQUFFLEVBQUVhLEdBQUcsQ0FBQyxDQUFDQyxPQUFTLElBQUksQ0FBQ0MsaUJBQWlCLENBQUNELE1BQU1FO2VBQ2hFLENBQUNmLG1FQUF3QkEsSUFBSSxFQUFFLEVBQUVZLEdBQUcsQ0FBQyxDQUFDSSxPQUFTLElBQUksQ0FBQ0YsaUJBQWlCLENBQUNFO1NBQzFFLENBQUNDLE1BQU0sQ0FBQ0M7SUFFYjtJQUVBSixrQkFBa0JLLFVBQVUsRUFBRTtRQUM1QixJQUFJLENBQUNBLFlBQVksT0FBTztRQUN4QixPQUFPQyxPQUFPRCxZQUNYRSxPQUFPLENBQUMsU0FBUyxJQUNqQkMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQ2JDLElBQUk7SUFDVDtJQUVBQyxlQUFlTCxVQUFVLEVBQUU7UUFDekIsTUFBTU0sV0FBVyxJQUFJLENBQUNYLGlCQUFpQixDQUFDSztRQUV4QyxJQUFJLENBQUNNLFVBQVU7WUFDYixPQUFPO2dCQUFFQyxNQUFNO2dCQUFVVixNQUFNO1lBQWE7UUFDOUM7UUFFQSxJQUFJZixhQUFhMEIsR0FBRyxDQUFD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QUFFTyxNQUFNdUMsY0FBYyxJQUFJN0YsY0FBYyIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFx1dGlsc1xcZm9udE1hbmFnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdlYkZvbnQgZnJvbSAnd2ViZm9udGxvYWRlcic7XG5pbXBvcnQgeyBHT09HTEVfRk9OVFMsIExFR0FDWV9HT09HTEVfRk9OVF9OQU1FUyB9IGZyb20gJ0AvY29uZmlnL2ZvbnRzJztcblxuY29uc3QgU1lTVEVNX0ZPTlRTID0gbmV3IFNldChbXG4gICdhcmlhbCcsXG4gICdoZWx2ZXRpY2EnLFxuICAndmVyZGFuYScsXG4gICd0YWhvbWEnLFxuICAndHJlYnVjaGV0IG1zJyxcbiAgJ2dlb3JnaWEnLFxuICAndGltZXMgbmV3IHJvbWFuJyxcbiAgJ2NvdXJpZXIgbmV3JyxcbiAgJ2x1Y2lkYSBjb25zb2xlJyxcbiAgJ2NvbWljIHNhbnMgbXMnLFxuICAnaW1wYWN0JyxcbiAgJ3NhbnMtc2VyaWYnLFxuICAnc2VyaWYnLFxuICAnbW9ub3NwYWNlJyxcbl0pO1xuXG5jb25zdCBERUZBVUxUX1RJTUVPVVRfTVMgPSAxMjAwMDtcblxuY2xhc3MgRm9udE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxvYWRlZEZvbnRzID0gbmV3IFNldCgpO1xuICAgIHRoaXMuZm9udENhY2hlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMubG9hZGluZ1Byb21pc2VzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuZmFpbGVkRm9udHMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5nb29nbGVGb250U2V0ID0gbmV3IFNldChcbiAgICAgIFtcbiAgICAgICAgLi4uKEdPT0dMRV9GT05UUyB8fCBbXSkubWFwKChmb250KSA9PiB0aGlzLm5vcm1hbGl6ZUZvbnROYW1lKGZvbnQ/Lm5vbWJyZSkpLFxuICAgICAgICAuLi4oTEVHQUNZX0dPT0dMRV9GT05UX05BTUVTIHx8IFtdKS5tYXAoKG5hbWUpID0+IHRoaXMubm9ybWFsaXplRm9udE5hbWUobmFtZSkpLFxuICAgICAgXS5maWx0ZXIoQm9vbGVhbilcbiAgICApO1xuICB9XG5cbiAgbm9ybWFsaXplRm9udE5hbWUoZm9udEZhbWlseSkge1xuICAgIGlmICghZm9udEZhbWlseSkgcmV0dXJuICcnO1xuICAgIHJldHVybiBTdHJpbmcoZm9udEZhbWlseSlcbiAgICAgIC5yZXBsYWNlKC9bJ1wiXS9nLCAnJylcbiAgICAgIC5zcGxpdCgnLCcpWzBdXG4gICAgICAudHJpbSgpO1xuICB9XG5cbiAgY2F0ZWdvcml6ZUZvbnQoZm9udEZhbWlseSkge1xuICAgIGNvbnN0IGZvbnROYW1lID0gdGhpcy5ub3JtYWxpemVGb250TmFtZShmb250RmFtaWx5KTtcblxuICAgIGlmICghZm9udE5hbWUpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6ICdzeXN0ZW0nLCBuYW1lOiAnc2Fucy1zZXJpZicgfTtcbiAgICB9XG5cbiAgICBpZiAoU1lTVEVNX0ZPTlRTLmhhcyhmb250TmFtZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3N5c3RlbScsIG5hbWU6IGZvbnROYW1lIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ29vZ2xlRm9udFNldC5oYXMoZm9udE5hbWUpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAnZ29vZ2xlJywgbmFtZTogZm9udE5hbWUgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0eXBlOiAnY3VzdG9tJywgbmFtZTogZm9udE5hbWUgfTtcbiAgfVxuXG4gIGlzR29vZ2xlRm9udExvYWRlZEluRG9jdW1lbnQoZm9udE5hbWUpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhZG9jdW1lbnQuZm9udHMpIHJldHVybiBmYWxzZTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGZhY2Ugb2YgZG9jdW1lbnQuZm9udHMudmFsdWVzKCkpIHtcbiAgICAgICAgY29uc3QgZmFtaWx5ID0gdGhpcy5ub3JtYWxpemVGb250TmFtZShmYWNlPy5mYW1pbHkpO1xuICAgICAgICBpZiAoZmFtaWx5ID09PSBmb250TmFtZSAmJiBmYWNlPy5zdGF0dXMgPT09ICdsb2FkZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB3YWl0Rm9yRG9jdW1lbnRGb250KGZvbnROYW1lLCB0aW1lb3V0TXMgPSBERUZBVUxUX1RJTUVPVVRfTVMpIHtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhZG9jdW1lbnQuZm9udHM/LmxvYWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2FkUHJvbWlzZSA9IGRvY3VtZW50LmZvbnRzLmxvYWQoYDE2cHggXCIke2ZvbnROYW1lfVwiYCk7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGltZW91dE1zKSB8fCB0aW1lb3V0TXMgPD0gMCkge1xuICAgICAgcmV0dXJuIGxvYWRQcm9taXNlLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWVvdXRNcyk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtsb2FkUHJvbWlzZSwgdGltZW91dFByb21pc2VdKS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG4gIH1cblxuICBhc3luYyBsb2FkR29vZ2xlRm9udChmb250TmFtZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSB0aGlzLm5vcm1hbGl6ZUZvbnROYW1lKGZvbnROYW1lKTtcbiAgICBjb25zdCB0aW1lb3V0TXMgPVxuICAgICAgTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMudGltZW91dE1zKSAmJiBvcHRpb25zLnRpbWVvdXRNcyA+IDBcbiAgICAgICAgPyBvcHRpb25zLnRpbWVvdXRNc1xuICAgICAgICA6IERFRkFVTFRfVElNRU9VVF9NUztcblxuICAgIGlmICghbm9ybWFsaXplZE5hbWUpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIGlmICh0aGlzLmlzRm9udEF2YWlsYWJsZShub3JtYWxpemVkTmFtZSkpIHtcbiAgICAgIHRoaXMubG9hZGVkRm9udHMuYWRkKG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2FkZWRGb250cy5oYXMobm9ybWFsaXplZE5hbWUpKSB7XG4gICAgICB0aGlzLmxvYWRlZEZvbnRzLmFkZChub3JtYWxpemVkTmFtZSk7XG4gICAgICB0aGlzLmZhaWxlZEZvbnRzLmRlbGV0ZShub3JtYWxpemVkTmFtZSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubG9hZGluZ1Byb21pc2VzLmhhcyhub3JtYWxpemVkTmFtZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxvYWRpbmdQcm9taXNlcy5nZXQobm9ybWFsaXplZE5hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvYWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgV2ViRm9udC5sb2FkKHtcbiAgICAgICAgZ29vZ2xlOiB7XG4gICAgICAgICAgZmFtaWxpZXM6IFtgJHtub3JtYWxpemVkTmFtZX06NDAwLDcwMGBdLFxuICAgICAgICB9LFxuICAgICAgICBhY3RpdmU6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLndhaXRGb3JEb2N1bWVudEZvbnQobm9ybWFsaXplZE5hbWUsIHRpbWVvdXRNcylcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5sb2FkZWRGb250cy5hZGQobm9ybWFsaXplZE5hbWUpO1xuICAgICAgICAgICAgICB0aGlzLmZhaWxlZEZvbnRzLmRlbGV0ZShub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgICAgIHRoaXMubG9hZGluZ1Byb21pc2VzLmRlbGV0ZShub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgICAgIHRoaXMuZm9yY2VDYW52YXNSZWRyYXcoKTtcbiAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGluYWN0aXZlOiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2FkaW5nUHJvbWlzZXMuZGVsZXRlKG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgICAgICB0aGlzLmZhaWxlZEZvbnRzLmFkZChub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgTm8gc2UgcHVkbyBjYXJnYXIgbGEgZnVlbnRlOiAke25vcm1hbGl6ZWROYW1lfWApKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGltZW91dDogdGltZW91dE1zLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmxvYWRpbmdQcm9taXNlcy5zZXQobm9ybWFsaXplZE5hbWUsIGxvYWRQcm9taXNlKTtcbiAgICByZXR1cm4gbG9hZFByb21pc2U7XG4gIH1cblxuICBhc3luYyBsb2FkRm9udHMoZm9udEZhbWlsaWVzID0gW10sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGxvYWRlZCA9IFtdO1xuICAgIGNvbnN0IGZhaWxlZCA9IFtdO1xuICAgIGNvbnN0IHVuaXF1ZUZvbnRzID0gWy4uLm5ldyBTZXQoZm9udEZhbWlsaWVzLm1hcCgoZm9udCkgPT4gU3RyaW5nKGZvbnQgfHwgJycpLnRyaW0oKSkpXS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBpZiAoIXVuaXF1ZUZvbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHsgbG9hZGVkLCBmYWlsZWQgfTtcbiAgICB9XG5cbiAgICBjb25zdCBwZW5kaW5nTmFtZXMgPSBbXTtcbiAgICBjb25zdCBwZW5kaW5nUHJvbWlzZXMgPSBbXTtcblxuICAgIHVuaXF1ZUZvbnRzLmZvckVhY2goKGZvbnRGYW1pbHkpID0+IHtcbiAgICAgIGNvbnN0IHsgdHlwZSwgbmFtZSB9ID0gdGhpcy5jYXRlZ29yaXplRm9udChmb250RmFtaWx5KTtcbiAgICAgIGlmICghbmFtZSkgcmV0dXJuO1xuXG4gICAgICBpZiAodHlwZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgdGhpcy5sb2FkZWRGb250cy5hZGQobmFtZSk7XG4gICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5hbWUpO1xuICAgICAgICBsb2FkZWQucHVzaChuYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5sb2FkZWRGb250cy5oYXMobmFtZSkpIHtcbiAgICAgICAgdGhpcy5sb2FkZWRGb250cy5hZGQobmFtZSk7XG4gICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5hbWUpO1xuICAgICAgICBsb2FkZWQucHVzaChuYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZSAhPT0gJ2dvb2dsZScpIHtcbiAgICAgICAgdGhpcy5mYWlsZWRGb250cy5hZGQobmFtZSk7XG4gICAgICAgIGZhaWxlZC5wdXNoKG5hbWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHBlbmRpbmdOYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgcGVuZGluZ1Byb21pc2VzLnB1c2godGhpcy5sb2FkR29vZ2xlRm9udChuYW1lLCBvcHRpb25zKSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXBlbmRpbmdQcm9taXNlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxvYWRlZDogWy4uLm5ldyBTZXQobG9hZGVkKV0sXG4gICAgICAgIGZhaWxlZDogWy4uLm5ldyBTZXQoZmFpbGVkKV0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHNldHRsZWQgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQocGVuZGluZ1Byb21pc2VzKTtcblxuICAgIHNldHRsZWQuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgZm9udE5hbWUgPSBwZW5kaW5nTmFtZXNbaW5kZXhdO1xuICAgICAgY29uc3QgcmVhZHkgPSB0aGlzLmlzRm9udEF2YWlsYWJsZShmb250TmFtZSk7XG5cbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZnVsZmlsbGVkJyB8fCByZWFkeSkge1xuICAgICAgICB0aGlzLmxvYWRlZEZvbnRzLmFkZChmb250TmFtZSk7XG4gICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKGZvbnROYW1lKTtcbiAgICAgICAgbG9hZGVkLnB1c2goZm9udE5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mYWlsZWRGb250cy5hZGQoZm9udE5hbWUpO1xuICAgICAgICBmYWlsZWQucHVzaChmb250TmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbG9hZGVkOiBbLi4ubmV3IFNldChsb2FkZWQpXSxcbiAgICAgIGZhaWxlZDogWy4uLm5ldyBTZXQoZmFpbGVkKV0sXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHByZWxvYWRQb3B1bGFyRm9udHMoKSB7XG4gICAgY29uc3QgcG9wdWxhckZvbnRzID0gW1xuICAgICAgJ1BvcHBpbnMnLFxuICAgICAgJ1JvYm90bycsXG4gICAgICAnT3BlbiBTYW5zJyxcbiAgICAgICdNb250c2VycmF0JyxcbiAgICAgICdSYWxld2F5JyxcbiAgICAgICdMYXRvJyxcbiAgICAgICdQbGF5ZmFpciBEaXNwbGF5JyxcbiAgICAgICdPc3dhbGQnLFxuICAgICAgJ0xpYnJlIEJvZG9uaScsXG4gICAgICAnQm9kb25pIE1vZGEnLFxuICAgIF07XG5cbiAgICByZXR1cm4gdGhpcy5sb2FkRm9udHMocG9wdWxhckZvbnRzKTtcbiAgfVxuXG4gIGZvcmNlQ2FudmFzUmVkcmF3KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZm9udHMtbG9hZGVkJykpO1xuICB9XG5cbiAgaXNGb250QXZhaWxhYmxlKGZvbnRGYW1pbHkpIHtcbiAgICBjb25zdCB7IHR5cGUsIG5hbWUgfSA9IHRoaXMuY2F0ZWdvcml6ZUZvbnQoZm9udEZhbWlseSk7XG5cbiAgICBpZiAodHlwZSA9PT0gJ3N5c3RlbScpIHJldHVybiB0cnVlO1xuICAgIGlmICghbmFtZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0aGlzLmxvYWRlZEZvbnRzLmhhcyhuYW1lKSkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAodHlwZSA9PT0gJ2dvb2dsZScpIHtcbiAgICAgIGNvbnN0IGxvYWRlZEluRG9jdW1lbnQgPSB0aGlzLmlzR29vZ2xlRm9udExvYWRlZEluRG9jdW1lbnQobmFtZSk7XG4gICAgICBpZiAobG9hZGVkSW5Eb2N1bWVudCkge1xuICAgICAgICB0aGlzLmxvYWRlZEZvbnRzLmFkZChuYW1lKTtcbiAgICAgICAgdGhpcy5mYWlsZWRGb250cy5kZWxldGUobmFtZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmZvbnRzPy5jaGVjaykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlID0gZG9jdW1lbnQuZm9udHMuY2hlY2soYDE2cHggXCIke25hbWV9XCJgKTtcbiAgICAgICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgICAgIHRoaXMubG9hZGVkRm9udHMuYWRkKG5hbWUpO1xuICAgICAgICAgIHRoaXMuZmFpbGVkRm9udHMuZGVsZXRlKG5hbWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBnZXRHb29nbGVGb250c0xpbmsoZm9udEZhbWlsaWVzID0gW10pIHtcbiAgICBjb25zdCBmYW1pbGllcyA9IGZvbnRGYW1pbGllc1xuICAgICAgLm1hcCgoZm9udCkgPT4gdGhpcy5ub3JtYWxpemVGb250TmFtZShmb250KSlcbiAgICAgIC5maWx0ZXIoKG5hbWUpID0+IHRoaXMuZ29vZ2xlRm9udFNldC5oYXMobmFtZSkpXG4gICAgICAubWFwKChuYW1lKSA9PiBgZmFtaWx5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGAke25hbWV9OndnaHRANDAwOzcwMGAucmVwbGFjZSgvIC9nLCAnKycpKX1gKVxuICAgICAgLmpvaW4oJyYnKTtcblxuICAgIGlmICghZmFtaWxpZXMpIHJldHVybiAnJztcblxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/JHtmYW1pbGllc30mZGlzcGxheT1zd2FwYDtcbiAgICByZXR1cm4gYFxuPGxpbmsgcmVsPVwicHJlY29ubmVjdFwiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tXCIgY3Jvc3NvcmlnaW4+XG48bGluayBocmVmPVwiJHt1cmx9XCIgcmVsPVwic3R5bGVzaGVldFwiPmAudHJpbSgpO1xuICB9XG5cbiAgZ2V0TG9hZGVkRm9udHNDU1MoKSB7XG4gICAgY29uc3QgZ29vZ2xlRm9udHMgPSBBcnJheS5mcm9tKHRoaXMubG9hZGVkRm9udHMpO1xuICAgIGlmIChnb29nbGVGb250cy5sZW5ndGggPT09IDApIHJldHVybiAnJztcblxuICAgIGNvbnN0IGZhbWlsaWVzID0gZ29vZ2xlRm9udHNcbiAgICAgIC5tYXAoKGZvbnQpID0+IGBmYW1pbHk9JHtlbmNvZGVVUklDb21wb25lbnQoYCR7Zm9udH06d2dodEAzMDA7NDAwOzUwMDs2MDA7NzAwYC5yZXBsYWNlKC8gL2csICcrJykpfWApXG4gICAgICAuam9pbignJicpO1xuXG4gICAgcmV0dXJuIGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/JHtmYW1pbGllc30mZGlzcGxheT1zd2FwYDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZm9udE1hbmFnZXIgPSBuZXcgRm9udE1hbmFnZXIoKTtcclxuIl0sIm5hbWVzIjpbIldlYkZvbnQiLCJHT09HTEVfRk9OVFMiLCJMRUdBQ1lfR09PR0xFX0ZPTlRfTkFNRVMiLCJTWVNURU1fRk9OVFMiLCJTZXQiLCJERUZBVUxUX1RJTUVPVVRfTVMiLCJGb250TWFuYWdlciIsImNvbnN0cnVjdG9yIiwibG9hZGVkRm9udHMiLCJmb250Q2FjaGUiLCJNYXAiLCJsb2FkaW5nUHJvbWlzZXMiLCJmYWlsZWRGb250cyIsImdvb2dsZUZvbnRTZXQiLCJtYXAiLCJmb250Iiwibm9ybWFsaXplRm9udE5hbWUiLCJub21icmUiLCJuYW1lIiwiZmlsdGVyIiwiQm9vbGVhbiIsImZvbnRGYW1pbHkiLCJTdHJpbmciLCJyZXBsYWNlIiwic3BsaXQiLCJ0cmltIiwiY2F0ZWdvcml6ZUZvbnQiLCJmb250TmFtZSIsInR5cGUiLCJoYXMiLCJ0b0xvd2VyQ2FzZSIsImlzR29vZ2xlRm9udExvYWRlZEluRG9jdW1lbnQiLCJkb2N1bWVudCIsImZvbnRzIiwiZmFjZSIsInZhbHVlcyIsImZhbWlseSIsInN0YXR1cyIsIndhaXRGb3JEb2N1bWVudEZvbnQiLCJ0aW1lb3V0TXMiLCJsb2FkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJsb2FkUHJvbWlzZSIsIk51bWJlciIsImlzRmluaXRlIiwidGhlbiIsInVuZGVmaW5lZCIsInRpbWVvdXRQcm9taXNlIiwic2V0VGltZW91dCIsInJhY2UiLCJsb2FkR29vZ2xlRm9udCIsIm9wdGlvbnMiLCJub3JtYWxpemVkTmFtZSIsImlzRm9udEF2YWlsYWJsZSIsImFkZCIsImRlbGV0ZSIsImdldCIsInJlamVjdCIsImdvb2dsZSIsImZhbWlsaWVzIiwiYWN0aXZlIiwiZmluYWxseSIsImZvcmNlQ2FudmFzUmVkcmF3IiwiaW5hY3RpdmUiLCJFcnJvciIsInRpbWVvdXQiLCJzZXQiLCJsb2FkRm9udHMiLCJmb250RmFtaWxpZXMiLCJsb2FkZWQiLCJmYWlsZWQiLCJ1bmlxdWVGb250cyIsImxlbmd0aCIsInBlbmRpbmdOYW1lcyIsInBlbmRpbmdQcm9taXNlcyIsImZvckVhY2giLCJwdXNoIiwic2V0dGxlZCIsImFsbFNldHRsZWQiLCJyZXN1bHQiLCJpbmRleCIsInJlYWR5IiwicHJlbG9hZFBvcHVsYXJGb250cyIsInBvcHVsYXJGb250cyIsIndpbmRvdyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImxvYWRlZEluRG9jdW1lbnQiLCJjaGVjayIsImF2YWlsYWJsZSIsImdldEdvb2dsZUZvbnRzTGluayIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJ1cmwiLCJnZXRMb2FkZWRGb250c0NTUyIsImdvb2dsZUZvbnRzIiwiQXJyYXkiLCJmcm9tIiwiZm9udE1hbmFnZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/utils/fontManager.js\n");

/***/ })

};
;