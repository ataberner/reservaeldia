"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_pages-dir-browser_src_components_CanvasEditor_jsx",{

/***/ "(pages-dir-browser)/./src/components/ElementoCanvas.jsx":
/*!*******************************************!*\
  !*** ./src/components/ElementoCanvas.jsx ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ElementoCanvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-konva */ \"(pages-dir-browser)/./node_modules/react-konva/es/ReactKonva.js\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! use-image */ \"(pages-dir-browser)/./node_modules/use-image/index.js\");\n/* harmony import */ var use_image__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(use_image__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/models/lineConstants */ \"(pages-dir-browser)/./src/models/lineConstants.js\");\n/* harmony import */ var _drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/drag/dragGrupal */ \"(pages-dir-browser)/./src/drag/dragGrupal.js\");\n/* harmony import */ var _drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/drag/dragIndividual */ \"(pages-dir-browser)/./src/drag/dragIndividual.js\");\n/* harmony import */ var _utils_getTextMetrics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/utils/getTextMetrics */ \"(pages-dir-browser)/./src/utils/getTextMetrics.js\");\n// ElementoCanvas.jsx - REEMPLAZAR TODO EL ARCHIVO\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nfunction normalizeFontSize(value) {\n    let fallback = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 24;\n    const parsed = Number(value);\n    return Number.isFinite(parsed) && parsed > 0 ? parsed : fallback;\n}\nfunction isBoldFontWeight(weight) {\n    const normalized = String(weight || \"normal\").toLowerCase();\n    return normalized === \"bold\" || normalized === \"bolder\" || [\n        \"500\",\n        \"600\",\n        \"700\",\n        \"800\",\n        \"900\"\n    ].includes(normalized);\n}\nfunction resolveKonvaFontStyle(fontStyle, fontWeight) {\n    const style = String(fontStyle || \"normal\").toLowerCase();\n    const isItalic = style.includes(\"italic\") || style.includes(\"oblique\");\n    const isBold = style.includes(\"bold\") || isBoldFontWeight(fontWeight);\n    if (isBold && isItalic) return \"bold italic\";\n    if (isBold) return \"bold\";\n    if (isItalic) return \"italic\";\n    return \"normal\";\n}\nfunction ElementoCanvas(param) {\n    let { obj, isSelected, isInEditMode, onSelect, onChange, editingId, registerRef, onHover, preSeleccionado, onDragMovePersonalizado, onDragStartPersonalizado, onDragEndPersonalizado, dragStartPos, hasDragged, onStartTextEdit, editingMode = false, inlineOverlayMountedId = null, inlineVisibilityMode = \"reactive\" } = param;\n    _s();\n    const [img] = use_image__WEBPACK_IMPORTED_MODULE_2___default()(obj.src || null, \"anonymous\");\n    const [measuredTextWidth, setMeasuredTextWidth] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(null);\n    const textNodeRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    const baseTextLayoutRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null); // guarda el centro/baseline inicial\n    // üî• PREVENIR onChange RECURSIVO PARA AUTOFIX\n    const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleChange]\": (id, newData)=>{\n            if (newData.fromAutoFix || !onChange) return;\n            onChange(id, newData);\n        }\n    }[\"ElementoCanvas.useCallback[handleChange]\"], [\n        onChange\n    ]);\n    const handleRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleRef]\": (node)=>{\n            if (registerRef) {\n                registerRef(obj.id, node || null);\n            // ‚ùå NO despachar \"element-ref-registrado\" ac√°\n            // CanvasEditor.registerRef ya lo hace.\n            }\n        }\n    }[\"ElementoCanvas.useCallback[handleRef]\"], [\n        obj.id,\n        registerRef\n    ]);\n    // ‚úÖ Click con estado fresco (evita stale closures del useMemo)\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleClick]\": (e)=>{\n            e.cancelBubble = true;\n            if (!hasDragged.current) {\n                // üß† Texto normal\n                if (obj.tipo === \"texto\") {\n                    if (isSelected) {\n                        onStartTextEdit === null || onStartTextEdit === void 0 ? void 0 : onStartTextEdit(obj.id, obj.texto);\n                    } else {\n                        onSelect(obj.id, obj, e);\n                    }\n                } else if (obj.tipo === \"forma\" && obj.figura === \"rect\") {\n                    if (isSelected) {\n                        onStartTextEdit === null || onStartTextEdit === void 0 ? void 0 : onStartTextEdit(obj.id, obj.texto || \"\");\n                    } else {\n                        onSelect(obj.id, obj, e);\n                    }\n                } else {\n                    onSelect(obj.id, obj, e);\n                }\n            }\n        }\n    }[\"ElementoCanvas.useCallback[handleClick]\"], [\n        obj,\n        isSelected,\n        onSelect,\n        onStartTextEdit\n    ]);\n    // üî• MEMOIZAR PROPIEDADES COMUNES\n    const commonProps = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)({\n        \"ElementoCanvas.useMemo[commonProps]\": ()=>{\n            var _obj_x, _obj_y;\n            return {\n                x: (_obj_x = obj.x) !== null && _obj_x !== void 0 ? _obj_x : 0,\n                y: (_obj_y = obj.y) !== null && _obj_y !== void 0 ? _obj_y : 0,\n                rotation: obj.rotation || 0,\n                scaleX: obj.scaleX || 1,\n                scaleY: obj.scaleY || 1,\n                draggable: !editingMode,\n                listening: !isInEditMode,\n                onMouseDown: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        var _e_currentTarget;\n                        e.cancelBubble = true;\n                        hasDragged.current = false;\n                        (_e_currentTarget = e.currentTarget) === null || _e_currentTarget === void 0 ? void 0 : _e_currentTarget.draggable(true);\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onMouseUp: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        var _e_currentTarget;\n                        if (((_e_currentTarget = e.currentTarget) === null || _e_currentTarget === void 0 ? void 0 : _e_currentTarget.draggable) && !hasDragged.current) {\n                            e.currentTarget.draggable(false);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onClick: handleClick,\n                onTap: handleClick,\n                onDragStart: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        onDragStartPersonalizado === null || onDragStartPersonalizado === void 0 ? void 0 : onDragStartPersonalizado(obj.id, e);\n                        window._dragCount = 0;\n                        window._lastMouse = null;\n                        window._lastElement = null;\n                        hasDragged.current = true;\n                        window._isDragging = true;\n                        // üî• Intentar drag grupal\n                        const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.startDragGrupalLider)(e, obj);\n                        if (!fueGrupal) {\n                            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.startDragIndividual)(e, dragStartPos);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onDragMove: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        hasDragged.current = true;\n                        const stage = e.target.getStage();\n                        const mousePos = stage.getPointerPosition();\n                        const elementPos = {\n                            x: e.target.x(),\n                            y: e.target.y()\n                        };\n                        window._lastMouse = mousePos;\n                        window._lastElement = elementPos;\n                        // üî• DRAG GRUPAL - SOLO EL L√çDER PROCESA\n                        if (window._grupoLider && obj.id === window._grupoLider) {\n                            (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.previewDragGrupal)(e, obj, onChange);\n                            onDragMovePersonalizado === null || onDragMovePersonalizado === void 0 ? void 0 : onDragMovePersonalizado({\n                                x: e.target.x(),\n                                y: e.target.y()\n                            }, obj.id);\n                            return;\n                        }\n                        // üî• SI ES SEGUIDOR DEL GRUPO, NO PROCESAR\n                        if (window._grupoLider) {\n                            const elementosSeleccionados = window._elementosSeleccionados || [];\n                            if (elementosSeleccionados.includes(obj.id) && obj.id !== window._grupoLider) {\n                                return;\n                            }\n                        }\n                        // üîÑ DRAG INDIVIDUAL - Solo si no hay drag grupal activo\n                        if (!window._grupoLider) {\n                            (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.previewDragIndividual)(e, obj, onDragMovePersonalizado);\n                        }\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"],\n                onDragEnd: ({\n                    \"ElementoCanvas.useMemo[commonProps]\": (e)=>{\n                        window._isDragging = false;\n                        const node = e.currentTarget;\n                        // üî• Intentar drag grupal\n                        const fueGrupal = (0,_drag_dragGrupal__WEBPACK_IMPORTED_MODULE_5__.endDragGrupal)(e, obj, onChange, hasDragged);\n                        if (fueGrupal) {\n                            onDragEndPersonalizado === null || onDragEndPersonalizado === void 0 ? void 0 : onDragEndPersonalizado();\n                            return;\n                        }\n                        // üîÑ DRAG INDIVIDUAL (no cambi√≥)\n                        (0,_drag_dragIndividual__WEBPACK_IMPORTED_MODULE_6__.endDragIndividual)(obj, node, onChange, onDragEndPersonalizado, hasDragged);\n                    }\n                })[\"ElementoCanvas.useMemo[commonProps]\"]\n            };\n        }\n    }[\"ElementoCanvas.useMemo[commonProps]\"], [\n        obj,\n        editingMode,\n        isInEditMode,\n        handleClick,\n        onDragMovePersonalizado,\n        onDragStartPersonalizado,\n        onDragEndPersonalizado,\n        dragStartPos,\n        hasDragged,\n        onChange\n    ]);\n    // üî• MEMOIZAR HANDLERS HOVER\n    const handleMouseEnter = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleMouseEnter]\": ()=>{\n            if (!onHover || window._isDragging || isInEditMode) return;\n            onHover(obj.id);\n        }\n    }[\"ElementoCanvas.useCallback[handleMouseEnter]\"], [\n        onHover,\n        obj.id,\n        isInEditMode\n    ]);\n    const handleMouseLeave = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[handleMouseLeave]\": ()=>{\n            if (!onHover || isInEditMode) return;\n            onHover(null);\n        }\n    }[\"ElementoCanvas.useCallback[handleMouseLeave]\"], [\n        onHover,\n        isInEditMode\n    ]);\n    const recalcGroupAlign = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)({\n        \"ElementoCanvas.useCallback[recalcGroupAlign]\": ()=>{\n            if (obj.tipo !== \"texto\") return;\n            if (!obj.__groupAlign || !obj.__groupId) return;\n            if ( false || typeof onChange !== \"function\") return;\n            const refs = window._elementRefs || {};\n            const getObj = window.__getObjById || ({\n                \"ElementoCanvas.useCallback[recalcGroupAlign]\": ()=>null\n            })[\"ElementoCanvas.useCallback[recalcGroupAlign]\"];\n            let maxW = 0;\n            let thisW = 0;\n            for (const [id, node] of Object.entries(refs)){\n                const o = getObj(id);\n                if (!o || o.tipo !== \"texto\" || o.__groupId !== obj.__groupId) continue;\n                const w = (node === null || node === void 0 ? void 0 : node.getTextWidth) ? Math.ceil(node.getTextWidth()) : 0;\n                if (id === obj.id) thisW = w;\n                if (w > maxW) maxW = w;\n            }\n            if (!maxW || !thisW) return;\n            const baseX = Number.isFinite(obj.__groupOriginX) ? obj.__groupOriginX : obj.x || 0;\n            let targetX = baseX;\n            if (obj.__groupAlign === \"center\") {\n                targetX = baseX + (maxW - thisW) / 2;\n            } else if (obj.__groupAlign === \"right\") {\n                targetX = baseX + (maxW - thisW);\n            }\n            if (Math.abs((obj.x || 0) - targetX) > 0.5) {\n                onChange(obj.id, {\n                    x: targetX\n                });\n            }\n        }\n    }[\"ElementoCanvas.useCallback[recalcGroupAlign]\"], [\n        obj.id,\n        obj.x,\n        obj.tipo,\n        obj.__groupAlign,\n        obj.__groupId,\n        obj.__groupOriginX,\n        onChange\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            // Recalcular cuando este texto cambia y tras montar sus vecinos\n            let r1, r2;\n            r1 = requestAnimationFrame({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    r2 = requestAnimationFrame({\n                        \"ElementoCanvas.useEffect\": ()=>{\n                            recalcGroupAlign();\n                        }\n                    }[\"ElementoCanvas.useEffect\"]);\n                }\n            }[\"ElementoCanvas.useEffect\"]);\n            return ({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    if (r1) cancelAnimationFrame(r1);\n                    if (r2) cancelAnimationFrame(r2);\n                }\n            })[\"ElementoCanvas.useEffect\"];\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        recalcGroupAlign,\n        obj.texto,\n        obj.fontFamily,\n        obj.fontSize,\n        obj.fontStyle,\n        obj.fontWeight\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            if (!obj || obj.tipo !== \"texto\") return;\n            if (obj.__groupAlign) return;\n            const isAutoWidth = !obj.width && obj.__autoWidth !== false;\n            if (!isAutoWidth) return;\n            let raf1 = null;\n            let raf2 = null;\n            raf1 = requestAnimationFrame({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    raf2 = requestAnimationFrame({\n                        \"ElementoCanvas.useEffect\": ()=>{\n                            const node = textNodeRef.current;\n                            if (!node || typeof node.getTextWidth !== \"function\") return;\n                            const wReal = Math.ceil(node.getTextWidth() || 0);\n                            if (wReal > 0) setMeasuredTextWidth(wReal);\n                        }\n                    }[\"ElementoCanvas.useEffect\"]);\n                }\n            }[\"ElementoCanvas.useEffect\"]);\n            return ({\n                \"ElementoCanvas.useEffect\": ()=>{\n                    if (raf1) cancelAnimationFrame(raf1);\n                    if (raf2) cancelAnimationFrame(raf2);\n                }\n            })[\"ElementoCanvas.useEffect\"];\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj === null || obj === void 0 ? void 0 : obj.id,\n        obj === null || obj === void 0 ? void 0 : obj.texto,\n        obj === null || obj === void 0 ? void 0 : obj.fontFamily,\n        obj === null || obj === void 0 ? void 0 : obj.fontSize,\n        obj === null || obj === void 0 ? void 0 : obj.fontStyle,\n        obj === null || obj === void 0 ? void 0 : obj.fontWeight,\n        obj === null || obj === void 0 ? void 0 : obj.lineHeight,\n        obj === null || obj === void 0 ? void 0 : obj.width,\n        obj === null || obj === void 0 ? void 0 : obj.__autoWidth,\n        obj === null || obj === void 0 ? void 0 : obj.__groupAlign\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            setMeasuredTextWidth(null);\n            // tambi√©n conviene resetear el layout base cuando cambia de texto\n            if ((obj === null || obj === void 0 ? void 0 : obj.tipo) === \"texto\") baseTextLayoutRef.current = null;\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj === null || obj === void 0 ? void 0 : obj.id\n    ]);\n    const groupRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)({\n        \"ElementoCanvas.useEffect\": ()=>{\n            // Cachear cuando cambie el color\n            if (groupRef.current && obj.tipo === \"icono\" && obj.color && obj.color !== \"#000000\") {\n                var _groupRef_current_getLayer;\n                groupRef.current.cache();\n                (_groupRef_current_getLayer = groupRef.current.getLayer()) === null || _groupRef_current_getLayer === void 0 ? void 0 : _groupRef_current_getLayer.batchDraw();\n            }\n        }\n    }[\"ElementoCanvas.useEffect\"], [\n        obj.color,\n        obj.id\n    ]);\n    // Convierte \"minX minY width height\" -> n√∫meros\n    function parseViewBox(vb) {\n        if (!vb || typeof vb !== \"string\") return null;\n        const parts = vb.trim().split(/\\s+/).map(Number);\n        if (parts.length !== 4 || parts.some((n)=>Number.isNaN(n))) return null;\n        const [minX, minY, vbWidth, vbHeight] = parts;\n        return {\n            minX,\n            minY,\n            vbWidth,\n            vbHeight\n        };\n    }\n    if (obj.tipo === \"forma\" && obj.figura === \"line\") {\n        let linePoints = obj.points;\n        let pointsFixed = false;\n        if (!linePoints || !Array.isArray(linePoints) || linePoints.length < 4) {\n            linePoints = [\n                0,\n                0,\n                _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.DEFAULT_LENGTH,\n                0\n            ]; // Usar constante\n            pointsFixed = true;\n        } else {\n            const puntosValidados = [];\n            for(let i = 0; i < 4; i++){\n                const punto = parseFloat(linePoints[i]);\n                puntosValidados.push(isNaN(punto) ? 0 : punto);\n            }\n            if (JSON.stringify(puntosValidados) !== JSON.stringify(linePoints.slice(0, 4))) {\n                linePoints = puntosValidados;\n                pointsFixed = true;\n            } else {\n                linePoints = linePoints.slice(0, 4);\n            }\n        }\n        if (pointsFixed && handleChange) {\n            setTimeout(()=>{\n                handleChange(obj.id, {\n                    points: linePoints,\n                    fromAutoFix: true\n                });\n            }, 0);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Line, {\n            ...commonProps,\n            ref: handleRef,\n            points: linePoints,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            stroke: obj.color || _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.DEFAULT_COLOR,\n            strokeWidth: obj.strokeWidth || _models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.STROKE_WIDTH,\n            tension: 0,\n            lineCap: \"round\",\n            lineJoin: \"round\",\n            perfectDrawEnabled: false,\n            hitStrokeWidth: Math.max(_models_lineConstants__WEBPACK_IMPORTED_MODULE_4__.LINE_CONSTANTS.HIT_STROKE_WIDTH, obj.strokeWidth || 2),\n            shadowForStrokeEnabled: false,\n            opacity: isSelected ? 1 : 0.95,\n            shadowColor: isSelected ? \"rgba(119, 61, 190, 0.3)\" : \"transparent\",\n            shadowBlur: isSelected ? 8 : 0,\n            shadowOffset: {\n                x: 0,\n                y: 2\n            }\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 398,\n            columnNumber: 7\n        }, this);\n    }\n    if (obj.tipo === \"texto\") {\n        const visibilityMode = inlineVisibilityMode === \"window\" ? \"window\" : \"reactive\";\n        const isEditingByWindow = window._currentEditingId === obj.id;\n        const isEditingByReactive = editingId === obj.id;\n        const overlayDomPresentLoose = (()=>{\n            if (typeof document === \"undefined\") return false;\n            const safeId = String(obj.id).replace(/\"/g, '\\\\\"');\n            return Boolean(document.querySelector('[data-inline-editor-id=\"'.concat(safeId, '\"]')));\n        })();\n        const overlayDomPresent = inlineOverlayMountedId === obj.id && overlayDomPresentLoose;\n        const isEditingByOverlay = overlayDomPresent;\n        const isEditing = visibilityMode === \"reactive\" ? isEditingByReactive || isEditingByOverlay : isEditingByWindow || isEditingByReactive || isEditingByOverlay;\n        const fontFamily = obj.fontFamily || \"sans-serif\";\n        const align = (obj.align || \"left\").toLowerCase();\n        var _obj_colorTexto, _ref, _ref1;\n        const fillColor = (_ref1 = (_ref = (_obj_colorTexto = obj.colorTexto) !== null && _obj_colorTexto !== void 0 ? _obj_colorTexto : obj.fill) !== null && _ref !== void 0 ? _ref : obj.color) !== null && _ref1 !== void 0 ? _ref1 : \"#000\";\n        const baseLineHeight = typeof obj.lineHeight === \"number\" && obj.lineHeight > 0 ? obj.lineHeight : 1.2;\n        const lineHeight = baseLineHeight * 0.92;\n        var _obj_texto;\n        // ‚úÖ Evita bbox sobrado a la derecha por espacios/tabs invisibles al final de l√≠nea\n        const rawText = String((_obj_texto = obj.texto) !== null && _obj_texto !== void 0 ? _obj_texto : \"\");\n        const safeText = rawText.replace(/[ \\t]+$/gm, \"\");\n        // ‚úÖ VALIDACI√ìN: Asegurar valores num√©ricos v√°lidos\n        const validX = typeof obj.x === \"number\" && !isNaN(obj.x) ? obj.x : 0;\n        const validY = typeof obj.y === \"number\" && !isNaN(obj.y) ? obj.y : 0;\n        const validFontSize = normalizeFontSize(obj.fontSize, 24);\n        const textDecoration = typeof obj.textDecoration === \"string\" && obj.textDecoration.trim().length > 0 ? obj.textDecoration : \"none\";\n        // üîπ PASO 1: Calcular dimensiones del texto PRIMERO\n        const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n        const style = obj.fontStyle || \"normal\";\n        const weight = obj.fontWeight || \"normal\";\n        const konvaFontStyle = resolveKonvaFontStyle(style, weight);\n        // ‚úÖ si la fuente tiene espacios, envolverla en comillas para que canvas no caiga a fallback\n        const fontForCanvas = fontFamily.includes(\",\") ? fontFamily : /\\s/.test(fontFamily) ? '\"'.concat(fontFamily, '\"') : fontFamily;\n        // ‚úÖ orden correcto: style -> weight -> size -> family\n        ctx.font = \"\".concat(style, \" \").concat(weight, \" \").concat(validFontSize, \"px \").concat(fontForCanvas);\n        const lines = safeText.split(/\\r?\\n/);\n        const maxLineWidth = Math.max(...lines.map((line)=>ctx.measureText(line).width), 20);\n        const numLines = lines.length;\n        const textWidth = Math.ceil(maxLineWidth);\n        const textHeight = validFontSize * lineHeight * numLines;\n        // üîπ PASO 2: Calcular posici√≥n solo una vez y congelar el centro\n        let positionRaw = (0,_utils_getTextMetrics__WEBPACK_IMPORTED_MODULE_7__.getCenteredTextPosition)({\n            rectY: validY,\n            rectHeight: textHeight,\n            fontSize: validFontSize,\n            fontFamily,\n            fontWeight: obj.fontWeight || \"normal\",\n            fontStyle: obj.fontStyle || \"normal\"\n        });\n        // Inicializar layout base solo la PRIMERA vez\n        if (!baseTextLayoutRef.current) {\n            baseTextLayoutRef.current = {\n                // centro vertical \"ideal\" que queremos conservar\n                rectCenter: positionRaw.rectCenter,\n                // offset desde el centro al baseline (depende solo de la fuente/tama√±o)\n                baselineToCenter: positionRaw.baseline - positionRaw.rectCenter,\n                ascent: positionRaw.ascent,\n                descent: positionRaw.descent\n            };\n        }\n        const base = baseTextLayoutRef.current;\n        const rectCenterFixed = base.rectCenter;\n        const baselineY = rectCenterFixed + base.baselineToCenter;\n        const textTopFixed = baselineY - base.ascent;\n        const position = {\n            baseline: baselineY,\n            textTop: textTopFixed,\n            ascent: base.ascent,\n            descent: base.descent,\n            rectCenter: rectCenterFixed\n        };\n        // üîç Debug: informaci√≥n completa de posici√≥n y centrado\n        // ‚ö†Ô∏è Warning si hay valores inv√°lidos\n        if (obj.x !== validX || obj.y !== validY || obj.fontSize !== validFontSize) {\n            console.warn(\"‚ö†Ô∏è Objeto de texto tiene valores inv√°lidos:\", {\n                id: obj.id,\n                x: obj.x,\n                y: obj.y,\n                fontSize: obj.fontSize\n            });\n        }\n        const ANCHO_CANVAS = 800;\n        const availableWidth = Math.max(1, ANCHO_CANVAS - validX);\n        // ancho real del texto (m√°xima l√≠nea, seg√∫n tu c√°lculo actual)\n        const realTextWidth = Math.max(1, textWidth);\n        // ‚úÖ Si entra, NO usamos width (bounds ajustado)\n        // ‚úÖ Si no entra, usamos width=available y wrap por caracteres para cortar en el borde\n        const shouldWrapToCanvasEdge = realTextWidth > availableWidth;\n        const wrapToUse = shouldWrapToCanvasEdge ? \"char\" : \"none\";\n        const widthToUse = shouldWrapToCanvasEdge ? availableWidth : undefined;\n        const inlineCaretOnlyMode = true;\n        const appliedOpacity = isEditing && !inlineCaretOnlyMode ? 0 : 1;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                ...commonProps,\n                ref: (node)=>{\n                    textNodeRef.current = node;\n                    handleRef(node); // registra + dispara \"element-ref-registrado\"\n                },\n                onMouseEnter: handleMouseEnter,\n                onMouseLeave: handleMouseLeave,\n                text: safeText,\n                x: validX,\n                y: obj.y,\n                wrap: wrapToUse,\n                width: widthToUse,\n                align: align,\n                fontSize: validFontSize,\n                fontFamily: fontFamily,\n                fontWeight: obj.fontWeight || \"normal\",\n                fontStyle: konvaFontStyle,\n                textDecoration: textDecoration,\n                lineHeight: lineHeight,\n                fill: fillColor,\n                opacity: appliedOpacity,\n                verticalAlign: \"top\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                lineNumber: 546,\n                columnNumber: 9\n            }, this)\n        }, void 0, false);\n    }\n    if (obj.tipo === \"rsvp-boton\") {\n        const fontFamily = obj.fontFamily || \"sans-serif\";\n        const width = obj.ancho || 200;\n        const height = obj.alto || 50;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    ...commonProps,\n                    width: width,\n                    height: height,\n                    cornerRadius: 8,\n                    fill: obj.color || \"#773dbe\",\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 2 : 0,\n                    onClick: (e)=>{\n                        e.cancelBubble = true;\n                        onSelect === null || onSelect === void 0 ? void 0 : onSelect(obj.id, obj, e);\n                    },\n                    onDragMove: (e)=>{\n                        var _window__elementRefs;\n                        const nuevaPos = e.target.position();\n                        const textoNode = (_window__elementRefs = window._elementRefs) === null || _window__elementRefs === void 0 ? void 0 : _window__elementRefs[\"\".concat(obj.id, \"-text\")];\n                        if (textoNode) {\n                            var _textoNode_getLayer;\n                            textoNode.x(nuevaPos.x);\n                            textoNode.y(nuevaPos.y);\n                            (_textoNode_getLayer = textoNode.getLayer()) === null || _textoNode_getLayer === void 0 ? void 0 : _textoNode_getLayer.batchDraw();\n                        }\n                    }\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 585,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                    ref: (node)=>{\n                        if (registerRef) {\n                            registerRef(\"\".concat(obj.id, \"-text\"), node || null); // si quer√©s manipular el texto aparte\n                        }\n                    },\n                    x: obj.x,\n                    y: obj.y,\n                    width: width,\n                    height: height,\n                    text: obj.texto || \"Confirmar asistencia\",\n                    fontSize: normalizeFontSize(obj.fontSize, 18),\n                    fontFamily: fontFamily,\n                    fontStyle: resolveKonvaFontStyle(obj.fontStyle || \"normal\", obj.fontWeight || \"bold\"),\n                    fontWeight: obj.fontWeight || \"bold\",\n                    textDecoration: obj.textDecoration || \"none\",\n                    fill: obj.colorTexto || \"#ffffff\",\n                    align: obj.align || \"center\",\n                    verticalAlign: \"middle\",\n                    listening: false,\n                    opacity: isInEditMode ? 0 : 1\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 609,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    if (obj.tipo === \"imagen\" && img) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Image, {\n            ...commonProps,\n            ref: handleRef,\n            id: obj.id,\n            image: img,\n            crossOrigin: \"anonymous\",\n            width: obj.width || img.width,\n            height: obj.height || img.height,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n            strokeWidth: isSelected || preSeleccionado ? 1 : 0\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 640,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- ICONO SVG (tipo:\"icono\", formato:\"svg\") ‚Äî CON HITBOX FUNCIONAL ---------------- */ if (obj.tipo === \"icono\" && obj.formato === \"svg\") {\n        const color = obj.color || \"#000000\";\n        const paths = Array.isArray(obj.paths) ? obj.paths : [];\n        const W = Number(obj.width) || 128;\n        const H = Number(obj.height) || 128;\n        const vb = parseViewBox(obj.viewBox) || {\n            minX: 0,\n            minY: 0,\n            vbWidth: 100,\n            vbHeight: 100\n        };\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n            ...commonProps,\n            ref: handleRef,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            width: W,\n            height: H,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    fill: \"rgba(0,0,0,0.001)\" // Casi transparente pero clickeable\n                    ,\n                    stroke: \"transparent\" // Sin borde\n                    ,\n                    listening: true,\n                    draggable: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 675,\n                    columnNumber: 9\n                }, this),\n                paths.map((p, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Path, {\n                        data: p.d,\n                        fill: color,\n                        scaleX: W / vb.vbWidth,\n                        scaleY: H / vb.vbHeight,\n                        x: -vb.minX * (W / vb.vbWidth),\n                        y: -vb.minY * (H / vb.vbHeight),\n                        listening: false,\n                        perfectDrawEnabled: false\n                    }, i, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                        lineNumber: 688,\n                        columnNumber: 11\n                    }, this)),\n                (isSelected || preSeleccionado) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    stroke: \"#773dbe\",\n                    strokeWidth: 1,\n                    fill: \"transparent\",\n                    listening: false\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 703,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 666,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- ICONO RASTER (PNG/JPG/WEBP) ‚Äì sin recolor ---------------- */ if (obj.tipo === \"icono\" && (obj.formato === \"png\" || obj.formato === \"jpg\" || obj.formato === \"webp\")) {\n        const [img] = use_image__WEBPACK_IMPORTED_MODULE_2___default()(obj.url, \"anonymous\");\n        var _img_width, _img_height;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Image, {\n            ...commonProps,\n            ref: handleRef,\n            image: img,\n            crossOrigin: \"anonymous\",\n            width: obj.width || ((_img_width = img === null || img === void 0 ? void 0 : img.width) !== null && _img_width !== void 0 ? _img_width : 120),\n            height: obj.height || ((_img_height = img === null || img === void 0 ? void 0 : img.height) !== null && _img_height !== void 0 ? _img_height : 120),\n            listening: true,\n            // UX cursor (sin romper tu hover)\n            onMouseEnter: (e)=>{\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"grab\";\n                handleMouseEnter === null || handleMouseEnter === void 0 ? void 0 : handleMouseEnter(e);\n            },\n            onMouseLeave: (e)=>{\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"default\";\n                handleMouseLeave === null || handleMouseLeave === void 0 ? void 0 : handleMouseLeave(e);\n            },\n            // ‚úÖ CLAVE: NO pisar el onClick/onTap ni el onDragEnd \"real\" del sistema\n            // Si quer√©s mantener un comportamiento extra en click, hacelo sin cambiar la firma:\n            onClick: (e)=>{\n                var // delega al commonProps.onClick (selecci√≥n consistente)\n                _commonProps_onClick;\n                (_commonProps_onClick = commonProps.onClick) === null || _commonProps_onClick === void 0 ? void 0 : _commonProps_onClick.call(commonProps, e);\n            },\n            onTap: (e)=>{\n                var // en Konva, tap suele mapear a click; si quer√©s, delegalo igual\n                _commonProps_onClick;\n                (_commonProps_onClick = commonProps.onClick) === null || _commonProps_onClick === void 0 ? void 0 : _commonProps_onClick.call(commonProps, e);\n            },\n            // ‚úÖ CLAVE: delegar a commonProps.onDragEnd para que:\n            // - se limpien gu√≠as (onDragEndPersonalizado)\n            // - se haga finalizoDrag + ABS‚ÜíREL\n            onDragEnd: (e)=>{\n                var _commonProps_onDragEnd;\n                (_commonProps_onDragEnd = commonProps.onDragEnd) === null || _commonProps_onDragEnd === void 0 ? void 0 : _commonProps_onDragEnd.call(commonProps, e);\n                // limpieza de cursor (extra)\n                const stage = e.currentTarget.getStage();\n                if (stage) stage.container().style.cursor = \"default\";\n            }\n        }, void 0, false, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 724,\n            columnNumber: 7\n        }, this);\n    }\n    /* ---------------- LEGACY: ICONO SVG (tipo: \"icono-svg\" con obj.d) ---------------- */ if (obj.tipo === \"icono-svg\") {\n        const W = Number(obj.width) || 128;\n        const H = Number(obj.height) || 128;\n        const vb = parseViewBox(obj.viewBox) || {\n            minX: 0,\n            minY: 0,\n            vbWidth: 100,\n            vbHeight: 100\n        };\n        const scaleX = vb.vbWidth ? W / vb.vbWidth : 1;\n        const scaleY = vb.vbHeight ? H / vb.vbHeight : 1;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n            ...commonProps,\n            ref: handleRef,\n            draggable: true,\n            onMouseEnter: handleMouseEnter,\n            onMouseLeave: handleMouseLeave,\n            onClick: (e)=>{\n                var _commonProps_onClick;\n                return (_commonProps_onClick = commonProps.onClick) === null || _commonProps_onClick === void 0 ? void 0 : _commonProps_onClick.call(commonProps, e);\n            },\n            onTap: (e)=>{\n                var _commonProps_onTap;\n                return (_commonProps_onTap = commonProps.onTap) === null || _commonProps_onTap === void 0 ? void 0 : _commonProps_onTap.call(commonProps, e);\n            },\n            onDragEnd: (e)=>{\n                var _commonProps_onDragEnd;\n                (_commonProps_onDragEnd = commonProps.onDragEnd) === null || _commonProps_onDragEnd === void 0 ? void 0 : _commonProps_onDragEnd.call(commonProps, e);\n            },\n            onTransformEnd: (e)=>{\n                const node = e.target;\n                var _node_scaleX;\n                const scaleXNode = typeof node.scaleX === \"function\" ? node.scaleX() : (_node_scaleX = node.scaleX) !== null && _node_scaleX !== void 0 ? _node_scaleX : 1;\n                var _node_scaleY;\n                const scaleYNode = typeof node.scaleY === \"function\" ? node.scaleY() : (_node_scaleY = node.scaleY) !== null && _node_scaleY !== void 0 ? _node_scaleY : 1;\n                const patch = {\n                    x: node.x(),\n                    y: node.y(),\n                    rotation: node.rotation() || 0,\n                    width: Math.max(1, W * Math.abs(scaleXNode || 1)),\n                    height: Math.max(1, H * Math.abs(scaleYNode || 1)),\n                    scaleX: 1,\n                    scaleY: 1,\n                    isFinal: true\n                };\n                onChange === null || onChange === void 0 ? void 0 : onChange(obj.id, patch);\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                    x: 0,\n                    y: 0,\n                    width: W,\n                    height: H,\n                    fill: \"rgba(0,0,0,0.001)\",\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0,\n                    listening: true\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 813,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n                    x: 0,\n                    y: 0,\n                    scaleX: scaleX,\n                    scaleY: scaleY,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Group, {\n                        x: -vb.minX,\n                        y: -vb.minY,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Path, {\n                            data: obj.d,\n                            fill: obj.color || \"#000\",\n                            stroke: obj.color || \"#000\",\n                            strokeWidth: 1,\n                            perfectDrawEnabled: true,\n                            listening: false\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 825,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                        lineNumber: 824,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 823,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n            lineNumber: 783,\n            columnNumber: 7\n        }, this);\n    }\n    if (obj.tipo === \"forma\") {\n        const propsForma = {\n            ...commonProps,\n            fill: obj.color || \"#000000\"\n        };\n        switch(obj.figura){\n            case \"rect\":\n                // Opcional: normalizamos width/height para usar en ambos nodos\n                const width = Math.abs(obj.width || 100);\n                const height = Math.abs(obj.height || 100);\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Rect, {\n                            ...propsForma,\n                            ref: handleRef,\n                            onMouseEnter: handleMouseEnter,\n                            onMouseLeave: handleMouseLeave,\n                            width: width,\n                            height: height,\n                            cornerRadius: obj.cornerRadius || 0,\n                            stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                            strokeWidth: isSelected || preSeleccionado ? 1 : 0,\n                            // üñ±Ô∏è Doble click para entrar en edici√≥n inline\n                            onDblClick: (e)=>{\n                                e.cancelBubble = true;\n                                if (onStartTextEdit) {\n                                    onStartTextEdit(obj.id, obj.texto || \"\");\n                                }\n                            },\n                            onDblTap: (e)=>{\n                                e.cancelBubble = true;\n                                if (onStartTextEdit) {\n                                    onStartTextEdit(obj.id, obj.texto || \"\");\n                                }\n                            },\n                            // üöö Sincronizar el texto mientras se arrastra la forma\n                            onDragMove: (e)=>{\n                                // Mantener cualquier l√≥gica de drag original que venga de commonProps\n                                if (typeof propsForma.onDragMove === \"function\") {\n                                    propsForma.onDragMove(e);\n                                }\n                                const { x, y } = e.target.position();\n                                const stage = e.target.getStage();\n                                const textoNode = stage === null || stage === void 0 ? void 0 : stage.findOne(\"#\".concat(obj.id, \"-text\"));\n                                if (textoNode) {\n                                    var _textoNode_getLayer;\n                                    textoNode.x(x);\n                                    textoNode.y(y);\n                                    (_textoNode_getLayer = textoNode.getLayer()) === null || _textoNode_getLayer === void 0 ? void 0 : _textoNode_getLayer.batchDraw();\n                                }\n                            },\n                            onDragEnd: (e)=>{\n                                // Mantener l√≥gica original de dragEnd (guardar posici√≥n, drag grupal, etc.)\n                                if (typeof propsForma.onDragEnd === \"function\") {\n                                    propsForma.onDragEnd(e);\n                                }\n                                const { x, y } = e.target.position();\n                                const stage = e.target.getStage();\n                                const textoNode = stage === null || stage === void 0 ? void 0 : stage.findOne(\"#\".concat(obj.id, \"-text\"));\n                                if (textoNode) {\n                                    var _textoNode_getLayer;\n                                    textoNode.x(x);\n                                    textoNode.y(y);\n                                    (_textoNode_getLayer = textoNode.getLayer()) === null || _textoNode_getLayer === void 0 ? void 0 : _textoNode_getLayer.batchDraw();\n                                }\n                            }\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 858,\n                            columnNumber: 13\n                        }, this),\n                        obj.texto && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Text, {\n                            id: \"\".concat(obj.id, \"-text\"),\n                            ref: (node)=>{\n                                if (registerRef) {\n                                    registerRef(\"\".concat(obj.id, \"-text\"), node || null); // segu√≠s usando tu sistema de refs\n                                }\n                            },\n                            x: obj.x,\n                            y: obj.y,\n                            width: width,\n                            height: height,\n                            text: obj.texto,\n                            fontSize: normalizeFontSize(obj.fontSize, 24),\n                            fontFamily: obj.fontFamily || \"sans-serif\",\n                            fontWeight: obj.fontWeight || \"normal\",\n                            fontStyle: resolveKonvaFontStyle(obj.fontStyle || \"normal\", obj.fontWeight || \"normal\"),\n                            textDecoration: obj.textDecoration || \"none\",\n                            fill: obj.colorTexto || \"#000000\",\n                            align: obj.align || \"center\",\n                            verticalAlign: \"middle\",\n                            listening: false,\n                            opacity: isInEditMode ? 0 : 1\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                            lineNumber: 918,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true);\n            case \"circle\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.Circle, {\n                    ...propsForma,\n                    ref: handleRef,\n                    radius: obj.radius || 50,\n                    onMouseEnter: handleMouseEnter,\n                    onMouseLeave: handleMouseLeave,\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 948,\n                    columnNumber: 11\n                }, this);\n            case \"triangle\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_konva__WEBPACK_IMPORTED_MODULE_1__.RegularPolygon, {\n                    ...propsForma,\n                    ref: handleRef,\n                    sides: 3,\n                    radius: obj.radius || 60,\n                    onMouseEnter: handleMouseEnter,\n                    onMouseLeave: handleMouseLeave,\n                    stroke: isSelected || preSeleccionado ? \"#773dbe\" : undefined,\n                    strokeWidth: isSelected || preSeleccionado ? 1 : 0\n                }, void 0, false, {\n                    fileName: \"C:\\\\Reservaeldia\\\\src\\\\components\\\\ElementoCanvas.jsx\",\n                    lineNumber: 961,\n                    columnNumber: 11\n                }, this);\n            default:\n                return null;\n        }\n    }\n    return null;\n}\n_s(ElementoCanvas, \"bn+J8i4beBPnZ2CQYnH2pi72UBE=\", false, function() {\n    return [\n        (use_image__WEBPACK_IMPORTED_MODULE_2___default())\n    ];\n});\n_c = ElementoCanvas;\nvar _c;\n$RefreshReg$(_c, \"ElementoCanvas\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0VsZW1lbnRvQ2FudmFzLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxrREFBa0Q7OztBQUN1RDtBQUN4RTtBQUN5QztBQUNsQjtBQUNtQztBQUNXO0FBQ3JDO0FBRWpFLFNBQVN1QixrQkFBa0JDLEtBQUs7UUFBRUMsV0FBQUEsaUVBQVc7SUFDM0MsTUFBTUMsU0FBU0MsT0FBT0g7SUFDdEIsT0FBT0csT0FBT0MsUUFBUSxDQUFDRixXQUFXQSxTQUFTLElBQUlBLFNBQVNEO0FBQzFEO0FBRUEsU0FBU0ksaUJBQWlCQyxNQUFNO0lBQzlCLE1BQU1DLGFBQWFDLE9BQU9GLFVBQVUsVUFBVUcsV0FBVztJQUN6RCxPQUNFRixlQUFlLFVBQ2ZBLGVBQWUsWUFDZjtRQUFDO1FBQU87UUFBTztRQUFPO1FBQU87S0FBTSxDQUFDRyxRQUFRLENBQUNIO0FBRWpEO0FBRUEsU0FBU0ksc0JBQXNCQyxTQUFTLEVBQUVDLFVBQVU7SUFDbEQsTUFBTUMsUUFBUU4sT0FBT0ksYUFBYSxVQUFVSCxXQUFXO0lBQ3ZELE1BQU1NLFdBQVdELE1BQU1KLFFBQVEsQ0FBQyxhQUFhSSxNQUFNSixRQUFRLENBQUM7SUFDNUQsTUFBTU0sU0FBU0YsTUFBTUosUUFBUSxDQUFDLFdBQVdMLGlCQUFpQlE7SUFFMUQsSUFBSUcsVUFBVUQsVUFBVSxPQUFPO0lBQy9CLElBQUlDLFFBQVEsT0FBTztJQUNuQixJQUFJRCxVQUFVLE9BQU87SUFDckIsT0FBTztBQUNUO0FBTWUsU0FBU0UsZUFBZSxLQW1CdEM7UUFuQnNDLEVBQ3JDQyxHQUFHLEVBQ0hDLFVBQVUsRUFDVkMsWUFBWSxFQUNaQyxRQUFRLEVBQ1JDLFFBQVEsRUFDUkMsU0FBUyxFQUNUQyxXQUFXLEVBQ1hDLE9BQU8sRUFDUEMsZUFBZSxFQUNmQyx1QkFBdUIsRUFDdkJDLHdCQUF3QixFQUN4QkMsc0JBQXNCLEVBQ3RCQyxZQUFZLEVBQ1pDLFVBQVUsRUFD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MkssVUFBVSxJQUFJOzRCQUN4QkYsT0FBT3pLLElBQUl5SyxLQUFLLElBQUk7NEJBQ3BCb0QsZUFBYzs0QkFDZGpMLFdBQVc7NEJBQ1g0RyxTQUFTdEosZUFBZSxJQUFJOzs7Ozs7OztZQU90QyxLQUFLO2dCQUNILHFCQUNFLDhEQUFDeEMsK0NBQU1BO29CQUNKLEdBQUc0UixVQUFVO29CQUNkN0csS0FBSzdHO29CQUNMOE4sUUFBUTFQLElBQUkwUCxNQUFNLElBQUk7b0JBQ3RCaEgsY0FBY3RFO29CQUNkdUUsY0FBY3RFO29CQUNkdUUsUUFBUTNJLGNBQWNPLGtCQUFrQixZQUFZZ047b0JBQ3BEMUUsYUFBYTdJLGNBQWNPLGtCQUFrQixJQUFJOzs7Ozs7WUFJdkQsS0FBSztnQkFDSCxxQkFDRSw4REFBQzVDLHVEQUFjQTtvQkFDWixHQUFHMFIsVUFBVTtvQkFDZDdHLEtBQUs3RztvQkFDTCtOLE9BQU87b0JBQ1BELFFBQVExUCxJQUFJMFAsTUFBTSxJQUFJO29CQUN0QmhILGNBQWN0RTtvQkFDZHVFLGNBQWN0RTtvQkFDZHVFLFFBQVEzSSxjQUFjTyxrQkFBa0IsWUFBWWdOO29CQUNwRDFFLGFBQWE3SSxjQUFjTyxrQkFBa0IsSUFBSTs7Ozs7O1lBS3ZEO2dCQUNFLE9BQU87UUFDWDtJQUNGO0lBRUEsT0FBTztBQUNUO0dBNzZCd0JUOztRQW9CUmhDLGtEQUFRQTs7O0tBcEJBZ0MiLCJzb3VyY2VzIjpbIkM6XFxSZXNlcnZhZWxkaWFcXHNyY1xcY29tcG9uZW50c1xcRWxlbWVudG9DYW52YXMuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEVsZW1lbnRvQ2FudmFzLmpzeCAtIFJFRU1QTEFaQVIgVE9ETyBFTCBBUkNISVZPXHJcbmltcG9ydCB7IFRleHQsIEltYWdlIGFzIEtvbnZhSW1hZ2UsIFJlY3QsIENpcmNsZSwgTGluZSwgUmVndWxhclBvbHlnb24sIFBhdGgsIEdyb3VwIH0gZnJvbSBcInJlYWN0LWtvbnZhXCI7XHJcbmltcG9ydCB1c2VJbWFnZSBmcm9tIFwidXNlLWltYWdlXCI7XHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZU1lbW8sIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgTElORV9DT05TVEFOVFMgfSBmcm9tICdAL21vZGVscy9saW5lQ29uc3RhbnRzJztcclxuaW1wb3J0IHsgcHJldmlld0RyYWdHcnVwYWwsIHN0YXJ0RHJhZ0dydXBhbExpZGVyLCBlbmREcmFnR3J1cGFsIH0gZnJvbSBcIkAvZHJhZy9kcmFnR3J1cGFsXCI7XHJcbmltcG9ydCB7IHN0YXJ0RHJhZ0luZGl2aWR1YWwsIHByZXZpZXdEcmFnSW5kaXZpZHVhbCwgZW5kRHJhZ0luZGl2aWR1YWwgfSBmcm9tIFwiQC9kcmFnL2RyYWdJbmRpdmlkdWFsXCI7XHJcbmltcG9ydCB7IGdldENlbnRlcmVkVGV4dFBvc2l0aW9uIH0gZnJvbSBcIkAvdXRpbHMvZ2V0VGV4dE1ldHJpY3NcIjtcclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUZvbnRTaXplKHZhbHVlLCBmYWxsYmFjayA9IDI0KSB7XHJcbiAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcclxuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHBhcnNlZCkgJiYgcGFyc2VkID4gMCA/IHBhcnNlZCA6IGZhbGxiYWNrO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0JvbGRGb250V2VpZ2h0KHdlaWdodCkge1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBTdHJpbmcod2VpZ2h0IHx8IFwibm9ybWFsXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgcmV0dXJuIChcclxuICAgIG5vcm1hbGl6ZWQgPT09IFwiYm9sZFwiIHx8XHJcbiAgICBub3JtYWxpemVkID09PSBcImJvbGRlclwiIHx8XHJcbiAgICBbXCI1MDBcIiwgXCI2MDBcIiwgXCI3MDBcIiwgXCI4MDBcIiwgXCI5MDBcIl0uaW5jbHVkZXMobm9ybWFsaXplZClcclxuICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNvbHZlS29udmFGb250U3R5bGUoZm9udFN0eWxlLCBmb250V2VpZ2h0KSB7XHJcbiAgY29uc3Qgc3R5bGUgPSBTdHJpbmcoZm9udFN0eWxlIHx8IFwibm9ybWFsXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgY29uc3QgaXNJdGFsaWMgPSBzdHlsZS5pbmNsdWRlcyhcIml0YWxpY1wiKSB8fCBzdHlsZS5pbmNsdWRlcyhcIm9ibGlxdWVcIik7XHJcbiAgY29uc3QgaXNCb2xkID0gc3R5bGUuaW5jbHVkZXMoXCJib2xkXCIpIHx8IGlzQm9sZEZvbnRXZWlnaHQoZm9udFdlaWdodCk7XHJcblxyXG4gIGlmIChpc0JvbGQgJiYgaXNJdGFsaWMpIHJldHVybiBcImJvbGQgaXRhbGljXCI7XHJcbiAgaWYgKGlzQm9sZCkgcmV0dXJuIFwiYm9sZFwiO1xyXG4gIGlmIChpc0l0YWxpYykgcmV0dXJuIFwiaXRhbGljXCI7XHJcbiAgcmV0dXJuIFwibm9ybWFsXCI7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBFbGVtZW50b0NhbnZhcyh7XHJcbiAgb2JqLFxyXG4gIGlzU2VsZWN0ZWQsXHJcbiAgaXNJbkVkaXRNb2RlLFxyXG4gIG9uU2VsZWN0LFxyXG4gIG9uQ2hhbmdlLFxyXG4gIGVkaXRpbmdJZCxcclxuICByZWdpc3RlclJlZixcclxuICBvbkhvdmVyLFxyXG4gIHByZVNlbGVjY2lvbmFkbyxcclxuICBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyxcclxuICBvbkRyYWdTdGFydFBlcnNvbmFsaXphZG8sXHJcbiAgb25EcmFnRW5kUGVyc29uYWxpemFkbyxcclxuICBkcmFnU3RhcnRQb3MsXHJcbiAgaGFzRHJhZ2dlZCxcclxuICBvblN0YXJ0VGV4dEVkaXQsXHJcbiAgZWRpdGluZ01vZGUgPSBmYWxzZSxcclxuICBpbmxpbmVPdmVybGF5TW91bnRlZElkID0gbnVsbCxcclxuICBpbmxpbmVWaXNpYmlsaXR5TW9kZSA9IFwicmVhY3RpdmVcIlxyXG59KSB7XHJcbiAgY29uc3QgW2ltZ10gPSB1c2VJbWFnZShvYmouc3JjIHx8IG51bGwsIFwiYW5vbnltb3VzXCIpO1xyXG4gIGNvbnN0IFttZWFzdXJlZFRleHRXaWR0aCwgc2V0TWVhc3VyZWRUZXh0V2lkdGhdID0gdXNlU3RhdGUobnVsbCk7XHJcblxyXG4gIGNvbnN0IHRleHROb2RlUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IGJhc2VUZXh0TGF5b3V0UmVmID0gdXNlUmVmKG51bGwpOyAvLyBndWFyZGEgZWwgY2VudHJvL2Jhc2VsaW5lIGluaWNpYWxcclxuXHJcblxyXG4gIC8vIPCflKUgUFJFVkVOSVIgb25DaGFuZ2UgUkVDVVJTSVZPIFBBUkEgQVVUT0ZJWFxyXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IHVzZUNhbGxiYWNrKChpZCwgbmV3RGF0YSkgPT4ge1xyXG4gICAgaWYgKG5ld0RhdGEuZnJvbUF1dG9GaXggfHwgIW9uQ2hhbmdlKSByZXR1cm47XHJcbiAgICBvbkNoYW5nZShpZCwgbmV3RGF0YSk7XHJcbiAgfSwgW29uQ2hhbmdlXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZVJlZiA9IHVzZUNhbGxiYWNrKChub2RlKSA9PiB7XHJcbiAgICBpZiAocmVnaXN0ZXJSZWYpIHtcclxuICAgICAgcmVnaXN0ZXJSZWYob2JqLmlkLCBub2RlIHx8IG51bGwpO1xyXG4gICAgICAvLyDinYwgTk8gZGVzcGFjaGFyIFwiZWxlbWVudC1yZWYtcmVnaXN0cmFkb1wiIGFjw6FcclxuICAgICAgLy8gQ2FudmFzRWRpdG9yLnJlZ2lzdGVyUmVmIHlhIGxvIGhhY2UuXHJcbiAgICB9XHJcbiAgfSwgW29iai5pZCwgcmVnaXN0ZXJSZWZdKTtcclxuXHJcblxyXG5cclxuICAvLyDinIUgQ2xpY2sgY29uIGVzdGFkbyBmcmVzY28gKGV2aXRhIHN0YWxlIGNsb3N1cmVzIGRlbCB1c2VNZW1vKVxyXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soXHJcbiAgICAoZSkgPT4ge1xyXG4gICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblxyXG4gICAgICBpZiAoIWhhc0RyYWdnZWQuY3VycmVudCkge1xyXG4gICAgICAgIC8vIPCfp6AgVGV4dG8gbm9ybWFsXHJcbiAgICAgICAgaWYgKG9iai50aXBvID09PSBcInRleHRvXCIpIHtcclxuICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIG9uU3RhcnRUZXh0RWRpdD8uKG9iai5pZCwgb2JqLnRleHRvKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9uU2VsZWN0KG9iai5pZCwgb2JqLCBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIPCfhpUgRm9ybWEgY29uIHRleHRvIChyZWN0KVxyXG4gICAgICAgIGVsc2UgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIgJiYgb2JqLmZpZ3VyYSA9PT0gXCJyZWN0XCIpIHtcclxuICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgIG9uU3RhcnRUZXh0RWRpdD8uKG9iai5pZCwgb2JqLnRleHRvIHx8IFwiXCIpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb25TZWxlY3Qob2JqLmlkLCBvYmosIGUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g8J+nsSBQYXJhIHRvZG8gbG8gZGVtw6FzXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBvblNlbGVjdChvYmouaWQsIG9iaiwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgW29iaiwgaXNTZWxlY3RlZCwgb25TZWxlY3QsIG9uU3RhcnRUZXh0RWRpdF1cclxuICApO1xyXG5cclxuXHJcblxyXG4gIC8vIPCflKUgTUVNT0laQVIgUFJPUElFREFERVMgQ09NVU5FU1xyXG4gIGNvbnN0IGNvbW1vblByb3BzID0gdXNlTWVtbygoKSA9PiAoe1xyXG4gICAgeDogb2JqLnggPz8gMCxcclxuICAgIHk6IG9iai55ID8/IDAsXHJcbiAgICByb3RhdGlvbjogb2JqLnJvdGF0aW9uIHx8IDAsXHJcbiAgICBzY2FsZVg6IG9iai5zY2FsZVggfHwgMSxcclxuICAgIHNjYWxlWTogb2JqLnNjYWxlWSB8fCAxLFxyXG4gICAgZHJhZ2dhYmxlOiAhZWRpdGluZ01vZGUsXHJcbiAgICBsaXN0ZW5pbmc6ICFpc0luRWRpdE1vZGUsXHJcblxyXG4gICAgb25Nb3VzZURvd246IChlKSA9PiB7XHJcbiAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgaGFzRHJhZ2dlZC5jdXJyZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICBlLmN1cnJlbnRUYXJnZXQ/LmRyYWdnYWJsZSh0cnVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25Nb3VzZVVwOiAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS5jdXJyZW50VGFyZ2V0Py5kcmFnZ2FibGUgJiYgIWhhc0RyYWdnZWQuY3VycmVudCkge1xyXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5kcmFnZ2FibGUoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLFxyXG4gICAgb25UYXA6IGhhbmRsZUNsaWNrLFxyXG5cclxuICAgIG9uRHJhZ1N0YXJ0OiAoZSkgPT4ge1xyXG5cclxuICAgICAgb25EcmFnU3RhcnRQZXJzb25hbGl6YWRvPy4ob2JqLmlkLCBlKTtcclxuXHJcbiAgICAgIHdpbmRvdy5fZHJhZ0NvdW50ID0gMDtcclxuICAgICAgd2luZG93Ll9sYXN0TW91c2UgPSBudWxsO1xyXG4gICAgICB3aW5kb3cuX2xhc3RFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgIGhhc0RyYWdnZWQuY3VycmVudCA9IHRydWU7XHJcbiAgICAgIHdpbmRvdy5faXNEcmFnZ2luZyA9IHRydWU7XHJcblxyXG5cclxuICAgICAgLy8g8J+UpSBJbnRlbnRhciBkcmFnIGdydXBhbFxyXG4gICAgICBjb25zdCBmdWVHcnVwYWwgPSBzdGFydERyYWdHcnVwYWxMaWRlcihlLCBvYmopO1xyXG4gICAgICBpZiAoIWZ1ZUdydXBhbCkge1xyXG4gICAgICAgIHN0YXJ0RHJhZ0luZGl2aWR1YWwoZSwgZHJhZ1N0YXJ0UG9zKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgb25EcmFnTW92ZTogKGUpID0+IHtcclxuICAgICAgaGFzRHJhZ2dlZC5jdXJyZW50ID0gdHJ1ZTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcclxuICAgICAgY29uc3QgbW91c2VQb3MgPSBzdGFnZS5nZXRQb2ludGVyUG9zaXRpb24oKTtcclxuICAgICAgY29uc3QgZWxlbWVudFBvcyA9IHsgeDogZS50YXJnZXQueCgpLCB5OiBlLnRhcmdldC55KCkgfTtcclxuXHJcbiAgICAgIHdpbmRvdy5fbGFzdE1vdXNlID0gbW91c2VQb3M7XHJcbiAgICAgIHdpbmRvdy5fbGFzdEVsZW1lbnQgPSBlbGVtZW50UG9zO1xyXG5cclxuICAgICAgLy8g8J+UpSBEUkFHIEdSVVBBTCAtIFNPTE8gRUwgTMONREVSIFBST0NFU0FcbiAgICAgIGlmICh3aW5kb3cuX2dydXBvTGlkZXIgJiYgb2JqLmlkID09PSB3aW5kb3cuX2dydXBvTGlkZXIpIHtcbiAgICAgICAgcHJldmlld0RyYWdHcnVwYWwoZSwgb2JqLCBvbkNoYW5nZSk7XG4gICAgICAgIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvPy4oeyB4OiBlLnRhcmdldC54KCksIHk6IGUudGFyZ2V0LnkoKSB9LCBvYmouaWQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxyXG4gICAgICAvLyDwn5SlIFNJIEVTIFNFR1VJRE9SIERFTCBHUlVQTywgTk8gUFJPQ0VTQVJcclxuICAgICAgaWYgKHdpbmRvdy5fZ3J1cG9MaWRlcikge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MgPSB3aW5kb3cuX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MgfHwgW107XHJcbiAgICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MuaW5jbHVkZXMob2JqLmlkKSAmJiBvYmouaWQgIT09IHdpbmRvdy5fZ3J1cG9MaWRlcikge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g8J+UhCBEUkFHIElORElWSURVQUwgLSBTb2xvIHNpIG5vIGhheSBkcmFnIGdydXBhbCBhY3Rpdm9cclxuICAgICAgaWYgKCF3aW5kb3cuX2dydXBvTGlkZXIpIHtcclxuICAgICAgICBwcmV2aWV3RHJhZ0luZGl2aWR1YWwoZSwgb2JqLCBvbkRyYWdNb3ZlUGVyc29uYWxpemFkbyk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG5cclxuXHJcblxyXG4gICAgb25EcmFnRW5kOiAoZSkgPT4ge1xyXG5cclxuICAgICAgd2luZG93Ll9pc0RyYWdnaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICBjb25zdCBub2RlID0gZS5jdXJyZW50VGFyZ2V0O1xyXG5cclxuICAgICAgLy8g8J+UpSBJbnRlbnRhciBkcmFnIGdydXBhbFxuICAgICAgY29uc3QgZnVlR3J1cGFsID0gZW5kRHJhZ0dydXBhbChlLCBvYmosIG9uQ2hhbmdlLCBoYXNEcmFnZ2VkKTtcbiAgICAgIGlmIChmdWVHcnVwYWwpIHtcbiAgICAgICAgb25EcmFnRW5kUGVyc29uYWxpemFkbz8uKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxyXG4gICAgICAvLyDwn5SEIERSQUcgSU5ESVZJRFVBTCAobm8gY2FtYmnDsylcclxuICAgICAgZW5kRHJhZ0luZGl2aWR1YWwob2JqLCBub2RlLCBvbkNoYW5nZSwgb25EcmFnRW5kUGVyc29uYWxpemFkbywgaGFzRHJhZ2dlZCk7XHJcblxyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICB9KSwgW1xyXG4gICAgb2JqLFxyXG4gICAgZWRpdGluZ01vZGUsXHJcbiAgICBpc0luRWRpdE1vZGUsXHJcbiAgICBoYW5kbGVDbGljayxcclxuICAgIG9uRHJhZ01vdmVQZXJzb25hbGl6YWRvLFxyXG4gICAgb25EcmFnU3RhcnRQZXJzb25hbGl6YWRvLFxyXG4gICAgb25EcmFnRW5kUGVyc29uYWxpemFkbyxcclxuICAgIGRyYWdTdGFydFBvcyxcclxuICAgIGhhc0RyYWdnZWQsXHJcbiAgICBvbkNoYW5nZSxcclxuICBdKTtcclxuXHJcbiAgLy8g8J+UpSBNRU1PSVpBUiBIQU5ETEVSUyBIT1ZFUlxyXG4gIGNvbnN0IGhhbmRsZU1vdXNlRW50ZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBpZiAoIW9uSG92ZXIgfHwgd2luZG93Ll9pc0RyYWdnaW5nIHx8IGlzSW5FZGl0TW9kZSkgcmV0dXJuO1xyXG4gICAgb25Ib3ZlcihvYmouaWQpO1xyXG4gIH0sIFtvbkhvdmVyLCBvYmouaWQsIGlzSW5FZGl0TW9kZV0pO1xyXG5cclxuXHJcbiAgY29uc3QgaGFuZGxlTW91c2VMZWF2ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmICghb25Ib3ZlciB8fCBpc0luRWRpdE1vZGUpIHJldHVybjtcclxuICAgIG9uSG92ZXIobnVsbCk7XHJcbiAgfSwgW29uSG92ZXIsIGlzSW5FZGl0TW9kZV0pO1xyXG5cclxuICBjb25zdCByZWNhbGNHcm91cEFsaWduID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKG9iai50aXBvICE9PSBcInRleHRvXCIpIHJldHVybjtcclxuICAgIGlmICghb2JqLl9fZ3JvdXBBbGlnbiB8fCAhb2JqLl9fZ3JvdXBJZCkgcmV0dXJuO1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIG9uQ2hhbmdlICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCByZWZzID0gd2luZG93Ll9lbGVtZW50UmVmcyB8fCB7fTtcclxuICAgIGNvbnN0IGdldE9iaiA9IHdpbmRvdy5fX2dldE9iakJ5SWQgfHwgKCgpID0+IG51bGwpO1xyXG5cclxuICAgIGxldCBtYXhXID0gMDtcclxuICAgIGxldCB0aGlzVyA9IDA7XHJcblxyXG4gICAgZm9yIChjb25zdCBbaWQsIG5vZGVdIG9mIE9iamVjdC5lbnRyaWVzKHJlZnMpKSB7XHJcbiAgICAgIGNvbnN0IG8gPSBnZXRPYmooaWQpO1xyXG4gICAgICBpZiAoIW8gfHwgby50aXBvICE9PSBcInRleHRvXCIgfHwgby5fX2dyb3VwSWQgIT09IG9iai5fX2dyb3VwSWQpIGNvbnRpbnVlO1xyXG4gICAgICBjb25zdCB3ID0gbm9kZT8uZ2V0VGV4dFdpZHRoID8gTWF0aC5jZWlsKG5vZGUuZ2V0VGV4dFdpZHRoKCkpIDogMDtcclxuICAgICAgaWYgKGlkID09PSBvYmouaWQpIHRoaXNXID0gdztcclxuICAgICAgaWYgKHcgPiBtYXhXKSBtYXhXID0gdztcclxuICAgIH1cclxuICAgIGlmICghbWF4VyB8fCAhdGhpc1cpIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBiYXNlWCA9IE51bWJlci5pc0Zpbml0ZShvYmouX19ncm91cE9yaWdpblgpID8gb2JqLl9fZ3JvdXBPcmlnaW5YIDogKG9iai54IHx8IDApO1xyXG4gICAgbGV0IHRhcmdldFggPSBiYXNlWDtcclxuICAgIGlmIChvYmouX19ncm91cEFsaWduID09PSBcImNlbnRlclwiKSB7XHJcbiAgICAgIHRhcmdldFggPSBiYXNlWCArIChtYXhXIC0gdGhpc1cpIC8gMjtcclxuICAgIH0gZWxzZSBpZiAob2JqLl9fZ3JvdXBBbGlnbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgIHRhcmdldFggPSBiYXNlWCArIChtYXhXIC0gdGhpc1cpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChNYXRoLmFicygob2JqLnggfHwgMCkgLSB0YXJnZXRYKSA+IDAuNSkge1xyXG4gICAgICBvbkNoYW5nZShvYmouaWQsIHsgeDogdGFyZ2V0WCB9KTtcclxuICAgIH1cclxuICB9LCBbb2JqLmlkLCBvYmoueCwgb2JqLnRpcG8sIG9iai5fX2dyb3VwQWxpZ24sIG9iai5fX2dyb3VwSWQsIG9iai5fX2dyb3VwT3JpZ2luWCwgb25DaGFuZ2VdKTtcclxuXHJcblxyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIFJlY2FsY3VsYXIgY3VhbmRvIGVzdGUgdGV4dG8gY2FtYmlhIHkgdHJhcyBtb250YXIgc3VzIHZlY2lub3NcclxuICAgIGxldCByMSwgcjI7XHJcbiAgICByMSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgIHIyID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICByZWNhbGNHcm91cEFsaWduKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAocjEpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHIxKTtcclxuICAgICAgaWYgKHIyKSBjYW5jZWxBbmltYXRpb25GcmFtZShyMik7XHJcbiAgICB9O1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xyXG4gIH0sIFtyZWNhbGNHcm91cEFsaWduLCBvYmoudGV4dG8sIG9iai5mb250RmFtaWx5LCBvYmouZm9udFNpemUsIG9iai5mb250U3R5bGUsIG9iai5mb250V2VpZ2h0XSk7XHJcblxyXG5cclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIW9iaiB8fCBvYmoudGlwbyAhPT0gXCJ0ZXh0b1wiKSByZXR1cm47XHJcbiAgICBpZiAob2JqLl9fZ3JvdXBBbGlnbikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGlzQXV0b1dpZHRoID0gIW9iai53aWR0aCAmJiBvYmouX19hdXRvV2lkdGggIT09IGZhbHNlO1xyXG4gICAgaWYgKCFpc0F1dG9XaWR0aCkgcmV0dXJuO1xyXG5cclxuICAgIGxldCByYWYxID0gbnVsbDtcclxuICAgIGxldCByYWYyID0gbnVsbDtcclxuXHJcbiAgICByYWYxID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgcmFmMiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRleHROb2RlUmVmLmN1cnJlbnQ7XHJcbiAgICAgICAgaWYgKCFub2RlIHx8IHR5cGVvZiBub2RlLmdldFRleHRXaWR0aCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IHdSZWFsID0gTWF0aC5jZWlsKG5vZGUuZ2V0VGV4dFdpZHRoKCkgfHwgMCk7XHJcbiAgICAgICAgaWYgKHdSZWFsID4gMCkgc2V0TWVhc3VyZWRUZXh0V2lkdGgod1JlYWwpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmIChyYWYxKSBjYW5jZWxBbmltYXRpb25GcmFtZShyYWYxKTtcclxuICAgICAgaWYgKHJhZjIpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZjIpO1xyXG4gICAgfTtcclxuICB9LCBbXHJcbiAgICBvYmo/LmlkLFxyXG4gICAgb2JqPy50ZXh0byxcclxuICAgIG9iaj8uZm9udEZhbWlseSxcclxuICAgIG9iaj8uZm9udFNpemUsXHJcbiAgICBvYmo/LmZvbnRTdHlsZSxcclxuICAgIG9iaj8uZm9udFdlaWdodCxcclxuICAgIG9iaj8ubGluZUhlaWdodCxcclxuICAgIG9iaj8ud2lkdGgsXHJcbiAgICBvYmo/Ll9fYXV0b1dpZHRoLFxyXG4gICAgb2JqPy5fX2dyb3VwQWxpZ24sXHJcbiAgXSk7XHJcblxyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNldE1lYXN1cmVkVGV4dFdpZHRoKG51bGwpO1xyXG4gICAgLy8gdGFtYmnDqW4gY29udmllbmUgcmVzZXRlYXIgZWwgbGF5b3V0IGJhc2UgY3VhbmRvIGNhbWJpYSBkZSB0ZXh0b1xyXG4gICAgaWYgKG9iaj8udGlwbyA9PT0gXCJ0ZXh0b1wiKSBiYXNlVGV4dExheW91dFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICB9LCBbb2JqPy5pZF0pO1xyXG5cclxuXHJcblxyXG4gIGNvbnN0IGdyb3VwUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gQ2FjaGVhciBjdWFuZG8gY2FtYmllIGVsIGNvbG9yXHJcbiAgICBpZiAoZ3JvdXBSZWYuY3VycmVudCAmJiBvYmoudGlwbyA9PT0gXCJpY29ub1wiICYmIG9iai5jb2xvciAmJiBvYmouY29sb3IgIT09IFwiIzAwMDAwMFwiKSB7XHJcbiAgICAgIGdyb3VwUmVmLmN1cnJlbnQuY2FjaGUoKTtcclxuICAgICAgZ3JvdXBSZWYuY3VycmVudC5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcclxuICAgIH1cclxuICB9LCBbb2JqLmNvbG9yLCBvYmouaWRdKTtcclxuXHJcblxyXG4gIC8vIENvbnZpZXJ0ZSBcIm1pblggbWluWSB3aWR0aCBoZWlnaHRcIiAtPiBuw7ptZXJvc1xyXG4gIGZ1bmN0aW9uIHBhcnNlVmlld0JveCh2Yikge1xyXG4gICAgaWYgKCF2YiB8fCB0eXBlb2YgdmIgIT09IFwic3RyaW5nXCIpIHJldHVybiBudWxsO1xyXG4gICAgY29uc3QgcGFydHMgPSB2Yi50cmltKCkuc3BsaXQoL1xccysvKS5tYXAoTnVtYmVyKTtcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDQgfHwgcGFydHMuc29tZSgobikgPT4gTnVtYmVyLmlzTmFOKG4pKSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBbbWluWCwgbWluWSwgdmJXaWR0aCwgdmJIZWlnaHRdID0gcGFydHM7XHJcbiAgICByZXR1cm4geyBtaW5YLCBtaW5ZLCB2YldpZHRoLCB2YkhlaWdodCB9O1xyXG4gIH1cclxuXHJcblxyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJmb3JtYVwiICYmIG9iai5maWd1cmEgPT09IFwibGluZVwiKSB7XHJcbiAgICBsZXQgbGluZVBvaW50cyA9IG9iai5wb2ludHM7XHJcbiAgICBsZXQgcG9pbnRzRml4ZWQgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoIWxpbmVQb2ludHMgfHwgIUFycmF5LmlzQXJyYXkobGluZVBvaW50cykgfHwgbGluZVBvaW50cy5sZW5ndGggPCA0KSB7XHJcbiAgICAgIGxpbmVQb2ludHMgPSBbMCwgMCwgTElORV9DT05TVEFOVFMuREVGQVVMVF9MRU5HVEgsIDBdOyAvLyBVc2FyIGNvbnN0YW50ZVxyXG4gICAgICBwb2ludHNGaXhlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBwdW50b3NWYWxpZGFkb3MgPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICBjb25zdCBwdW50byA9IHBhcnNlRmxvYXQobGluZVBvaW50c1tpXSk7XHJcbiAgICAgICAgcHVudG9zVmFsaWRhZG9zLnB1c2goaXNOYU4ocHVudG8pID8gMCA6IHB1bnRvKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHB1bnRvc1ZhbGlkYWRvcykgIT09IEpTT04uc3RyaW5naWZ5KGxpbmVQb2ludHMuc2xpY2UoMCwgNCkpKSB7XHJcbiAgICAgICAgbGluZVBvaW50cyA9IHB1bnRvc1ZhbGlkYWRvcztcclxuICAgICAgICBwb2ludHNGaXhlZCA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGluZVBvaW50cyA9IGxpbmVQb2ludHMuc2xpY2UoMCwgNCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocG9pbnRzRml4ZWQgJiYgaGFuZGxlQ2hhbmdlKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGhhbmRsZUNoYW5nZShvYmouaWQsIHtcclxuICAgICAgICAgIHBvaW50czogbGluZVBvaW50cyxcclxuICAgICAgICAgIGZyb21BdXRvRml4OiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sIDApO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8TGluZVxyXG4gICAgICAgIHsuLi5jb21tb25Qcm9wc31cclxuICAgICAgICByZWY9e2hhbmRsZVJlZn1cclxuICAgICAgICBwb2ludHM9e2xpbmVQb2ludHN9XHJcbiAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxyXG4gICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VMZWF2ZX1cclxuICAgICAgICBzdHJva2U9e29iai5jb2xvciB8fCBMSU5FX0NPTlNUQU5UUy5ERUZBVUxUX0NPTE9SfVxyXG4gICAgICAgIHN0cm9rZVdpZHRoPXtvYmouc3Ryb2tlV2lkdGggfHwgTElORV9DT05TVEFOVFMuU1RST0tFX1dJRFRIfVxyXG4gICAgICAgIHRlbnNpb249ezB9XHJcbiAgICAgICAgbGluZUNhcD1cInJvdW5kXCJcclxuICAgICAgICBsaW5lSm9pbj1cInJvdW5kXCJcclxuICAgICAgICBwZXJmZWN0RHJhd0VuYWJsZWQ9e2ZhbHNlfVxyXG4gICAgICAgIGhpdFN0cm9rZVdpZHRoPXtNYXRoLm1heChMSU5FX0NPTlNUQU5UUy5ISVRfU1RST0tFX1dJRFRILCBvYmouc3Ryb2tlV2lkdGggfHwgMil9XHJcbiAgICAgICAgc2hhZG93Rm9yU3Ryb2tlRW5hYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgb3BhY2l0eT17aXNTZWxlY3RlZCA/IDEgOiAwLjk1fVxyXG4gICAgICAgIHNoYWRvd0NvbG9yPXtpc1NlbGVjdGVkID8gXCJyZ2JhKDExOSwgNjEsIDE5MCwgMC4zKVwiIDogXCJ0cmFuc3BhcmVudFwifVxyXG4gICAgICAgIHNoYWRvd0JsdXI9e2lzU2VsZWN0ZWQgPyA4IDogMH1cclxuICAgICAgICBzaGFkb3dPZmZzZXQ9e3sgeDogMCwgeTogMiB9fVxyXG4gICAgICAvPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG5cclxuICBpZiAob2JqLnRpcG8gPT09IFwidGV4dG9cIikge1xyXG4gICAgY29uc3QgdmlzaWJpbGl0eU1vZGUgPVxyXG4gICAgICBpbmxpbmVWaXNpYmlsaXR5TW9kZSA9PT0gXCJ3aW5kb3dcIiA/IFwid2luZG93XCIgOiBcInJlYWN0aXZlXCI7XHJcbiAgICBjb25zdCBpc0VkaXRpbmdCeVdpbmRvdyA9IHdpbmRvdy5fY3VycmVudEVkaXRpbmdJZCA9PT0gb2JqLmlkO1xyXG4gICAgY29uc3QgaXNFZGl0aW5nQnlSZWFjdGl2ZSA9IGVkaXRpbmdJZCA9PT0gb2JqLmlkO1xyXG4gICAgY29uc3Qgb3ZlcmxheURvbVByZXNlbnRMb29zZSA9ICgoKSA9PiB7XHJcbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcclxuICAgICAgY29uc3Qgc2FmZUlkID0gU3RyaW5nKG9iai5pZCkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xyXG4gICAgICByZXR1cm4gQm9vbGVhbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmxpbmUtZWRpdG9yLWlkPVwiJHtzYWZlSWR9XCJdYCkpO1xyXG4gICAgfSkoKTtcclxuICAgIGNvbnN0IG92ZXJsYXlEb21QcmVzZW50ID1cclxuICAgICAgaW5saW5lT3ZlcmxheU1vdW50ZWRJZCA9PT0gb2JqLmlkICYmIG92ZXJsYXlEb21QcmVzZW50TG9vc2U7XHJcbiAgICBjb25zdCBpc0VkaXRpbmdCeU92ZXJsYXkgPSBvdmVybGF5RG9tUHJlc2VudDtcclxuICAgIGNvbnN0IGlzRWRpdGluZyA9XHJcbiAgICAgIHZpc2liaWxpdHlNb2RlID09PSBcInJlYWN0aXZlXCJcclxuICAgICAgICA/IChpc0VkaXRpbmdCeVJlYWN0aXZlIHx8IGlzRWRpdGluZ0J5T3ZlcmxheSlcclxuICAgICAgICA6IChpc0VkaXRpbmdCeVdpbmRvdyB8fCBpc0VkaXRpbmdCeVJlYWN0aXZlIHx8IGlzRWRpdGluZ0J5T3ZlcmxheSk7XHJcbiAgICBjb25zdCBmb250RmFtaWx5ID0gb2JqLmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCI7XHJcbiAgICBjb25zdCBhbGlnbiA9IChvYmouYWxpZ24gfHwgXCJsZWZ0XCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBmaWxsQ29sb3IgPSBvYmouY29sb3JUZXh0byA/PyBvYmouZmlsbCA/PyBvYmouY29sb3IgPz8gXCIjMDAwXCI7XHJcbiAgICBjb25zdCBiYXNlTGluZUhlaWdodCA9XHJcbiAgICAgIHR5cGVvZiBvYmoubGluZUhlaWdodCA9PT0gXCJudW1iZXJcIiAmJiBvYmoubGluZUhlaWdodCA+IDAgPyBvYmoubGluZUhlaWdodCA6IDEuMjtcclxuICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBiYXNlTGluZUhlaWdodCAqIDAuOTI7XHJcblxyXG5cclxuICAgIC8vIOKchSBFdml0YSBiYm94IHNvYnJhZG8gYSBsYSBkZXJlY2hhIHBvciBlc3BhY2lvcy90YWJzIGludmlzaWJsZXMgYWwgZmluYWwgZGUgbMOtbmVhXHJcbiAgICBjb25zdCByYXdUZXh0ID0gU3RyaW5nKG9iai50ZXh0byA/PyBcIlwiKTtcclxuICAgIGNvbnN0IHNhZmVUZXh0ID0gcmF3VGV4dC5yZXBsYWNlKC9bIFxcdF0rJC9nbSwgXCJcIik7XHJcblxyXG5cclxuICAgIC8vIOKchSBWQUxJREFDScOTTjogQXNlZ3VyYXIgdmFsb3JlcyBudW3DqXJpY29zIHbDoWxpZG9zXHJcbiAgICBjb25zdCB2YWxpZFggPSB0eXBlb2Ygb2JqLnggPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKG9iai54KSA/IG9iai54IDogMDtcclxuICAgIGNvbnN0IHZhbGlkWSA9IHR5cGVvZiBvYmoueSA9PT0gXCJudW1iZXJcIiAmJiAhaXNOYU4ob2JqLnkpID8gb2JqLnkgOiAwO1xyXG4gICAgY29uc3QgdmFsaWRGb250U2l6ZSA9IG5vcm1hbGl6ZUZvbnRTaXplKG9iai5mb250U2l6ZSwgMjQpO1xyXG4gICAgY29uc3QgdGV4dERlY29yYXRpb24gPVxyXG4gICAgICB0eXBlb2Ygb2JqLnRleHREZWNvcmF0aW9uID09PSBcInN0cmluZ1wiICYmIG9iai50ZXh0RGVjb3JhdGlvbi50cmltKCkubGVuZ3RoID4gMFxyXG4gICAgICAgID8gb2JqLnRleHREZWNvcmF0aW9uXHJcbiAgICAgICAgOiBcIm5vbmVcIjtcclxuXHJcbiAgICAvLyDwn5S5IFBBU08gMTogQ2FsY3VsYXIgZGltZW5zaW9uZXMgZGVsIHRleHRvIFBSSU1FUk9cclxuICAgIGNvbnN0IGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgY29uc3Qgc3R5bGUgPSBvYmouZm9udFN0eWxlIHx8IFwibm9ybWFsXCI7XHJcbiAgICBjb25zdCB3ZWlnaHQgPSBvYmouZm9udFdlaWdodCB8fCBcIm5vcm1hbFwiO1xyXG4gICAgY29uc3Qga29udmFGb250U3R5bGUgPSByZXNvbHZlS29udmFGb250U3R5bGUoc3R5bGUsIHdlaWdodCk7XHJcblxyXG4gICAgLy8g4pyFIHNpIGxhIGZ1ZW50ZSB0aWVuZSBlc3BhY2lvcywgZW52b2x2ZXJsYSBlbiBjb21pbGxhcyBwYXJhIHF1ZSBjYW52YXMgbm8gY2FpZ2EgYSBmYWxsYmFja1xyXG4gICAgY29uc3QgZm9udEZvckNhbnZhcyA9IGZvbnRGYW1pbHkuaW5jbHVkZXMoXCIsXCIpXHJcbiAgICAgID8gZm9udEZhbWlseVxyXG4gICAgICA6ICgvXFxzLy50ZXN0KGZvbnRGYW1pbHkpID8gYFwiJHtmb250RmFtaWx5fVwiYCA6IGZvbnRGYW1pbHkpO1xyXG5cclxuICAgIC8vIOKchSBvcmRlbiBjb3JyZWN0bzogc3R5bGUgLT4gd2VpZ2h0IC0+IHNpemUgLT4gZmFtaWx5XHJcbiAgICBjdHguZm9udCA9IGAke3N0eWxlfSAke3dlaWdodH0gJHt2YWxpZEZvbnRTaXplfXB4ICR7Zm9udEZvckNhbnZhc31gO1xyXG5cclxuICAgIGNvbnN0IGxpbmVzID0gc2FmZVRleHQuc3BsaXQoL1xccj9cXG4vKTtcclxuICAgIGNvbnN0IG1heExpbmVXaWR0aCA9IE1hdGgubWF4KC4uLmxpbmVzLm1hcChsaW5lID0+IGN0eC5tZWFzdXJlVGV4dChsaW5lKS53aWR0aCksIDIwKTtcclxuICAgIGNvbnN0IG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xyXG4gICAgY29uc3QgdGV4dFdpZHRoID0gTWF0aC5jZWlsKG1heExpbmVXaWR0aCk7XHJcbiAgICBjb25zdCB0ZXh0SGVpZ2h0ID0gdmFsaWRGb250U2l6ZSAqIGxpbmVIZWlnaHQgKiBudW1MaW5lcztcclxuXHJcbiAgICAvLyDwn5S5IFBBU08gMjogQ2FsY3VsYXIgcG9zaWNpw7NuIHNvbG8gdW5hIHZleiB5IGNvbmdlbGFyIGVsIGNlbnRyb1xyXG4gICAgbGV0IHBvc2l0aW9uUmF3ID0gZ2V0Q2VudGVyZWRUZXh0UG9zaXRpb24oe1xyXG4gICAgICByZWN0WTogdmFsaWRZLFxyXG4gICAgICByZWN0SGVpZ2h0OiB0ZXh0SGVpZ2h0LFxyXG4gICAgICBmb250U2l6ZTogdmFsaWRGb250U2l6ZSxcclxuICAgICAgZm9udEZhbWlseSxcclxuICAgICAgZm9udFdlaWdodDogb2JqLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIixcclxuICAgICAgZm9udFN0eWxlOiBvYmouZm9udFN0eWxlIHx8IFwibm9ybWFsXCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBJbmljaWFsaXphciBsYXlvdXQgYmFzZSBzb2xvIGxhIFBSSU1FUkEgdmV6XHJcbiAgICBpZiAoIWJhc2VUZXh0TGF5b3V0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgYmFzZVRleHRMYXlvdXRSZWYuY3VycmVudCA9IHtcclxuICAgICAgICAvLyBjZW50cm8gdmVydGljYWwgXCJpZGVhbFwiIHF1ZSBxdWVyZW1vcyBjb25zZXJ2YXJcclxuICAgICAgICByZWN0Q2VudGVyOiBwb3NpdGlvblJhdy5yZWN0Q2VudGVyLFxyXG4gICAgICAgIC8vIG9mZnNldCBkZXNkZSBlbCBjZW50cm8gYWwgYmFzZWxpbmUgKGRlcGVuZGUgc29sbyBkZSBsYSBmdWVudGUvdGFtYcOxbylcclxuICAgICAgICBiYXNlbGluZVRvQ2VudGVyOiBwb3NpdGlvblJhdy5iYXNlbGluZSAtIHBvc2l0aW9uUmF3LnJlY3RDZW50ZXIsXHJcbiAgICAgICAgYXNjZW50OiBwb3NpdGlvblJhdy5hc2NlbnQsXHJcbiAgICAgICAgZGVzY2VudDogcG9zaXRpb25SYXcuZGVzY2VudCxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBiYXNlID0gYmFzZVRleHRMYXlvdXRSZWYuY3VycmVudDtcclxuICAgIGNvbnN0IHJlY3RDZW50ZXJGaXhlZCA9IGJhc2UucmVjdENlbnRlcjtcclxuICAgIGNvbnN0IGJhc2VsaW5lWSA9IHJlY3RDZW50ZXJGaXhlZCArIGJhc2UuYmFzZWxpbmVUb0NlbnRlcjtcclxuICAgIGNvbnN0IHRleHRUb3BGaXhlZCA9IGJhc2VsaW5lWSAtIGJhc2UuYXNjZW50O1xyXG5cclxuICAgIGNvbnN0IHBvc2l0aW9uID0ge1xyXG4gICAgICBiYXNlbGluZTogYmFzZWxpbmVZLFxyXG4gICAgICB0ZXh0VG9wOiB0ZXh0VG9wRml4ZWQsXHJcbiAgICAgIGFzY2VudDogYmFzZS5hc2NlbnQsXHJcbiAgICAgIGRlc2NlbnQ6IGJhc2UuZGVzY2VudCxcclxuICAgICAgcmVjdENlbnRlcjogcmVjdENlbnRlckZpeGVkLFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDwn5SNIERlYnVnOiBpbmZvcm1hY2nDs24gY29tcGxldGEgZGUgcG9zaWNpw7NuIHkgY2VudHJhZG9cclxuXHJcblxyXG4gICAgLy8g4pqg77iPIFdhcm5pbmcgc2kgaGF5IHZhbG9yZXMgaW52w6FsaWRvc1xyXG4gICAgaWYgKG9iai54ICE9PSB2YWxpZFggfHwgb2JqLnkgIT09IHZhbGlkWSB8fCBvYmouZm9udFNpemUgIT09IHZhbGlkRm9udFNpemUpIHtcclxuICAgICAgY29uc29sZS53YXJuKFwi4pqg77iPIE9iamV0byBkZSB0ZXh0byB0aWVuZSB2YWxvcmVzIGludsOhbGlkb3M6XCIsIHtcclxuICAgICAgICBpZDogb2JqLmlkLFxyXG4gICAgICAgIHg6IG9iai54LFxyXG4gICAgICAgIHk6IG9iai55LFxyXG4gICAgICAgIGZvbnRTaXplOiBvYmouZm9udFNpemUsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICAgICBjb25zdCBBTkNIT19DQU5WQVMgPSA4MDA7XHJcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IE1hdGgubWF4KDEsIEFOQ0hPX0NBTlZBUyAtIHZhbGlkWCk7XHJcblxyXG4gICAgLy8gYW5jaG8gcmVhbCBkZWwgdGV4dG8gKG3DoXhpbWEgbMOtbmVhLCBzZWfDum4gdHUgY8OhbGN1bG8gYWN0dWFsKVxyXG4gICAgY29uc3QgcmVhbFRleHRXaWR0aCA9IE1hdGgubWF4KDEsIHRleHRXaWR0aCk7XHJcblxyXG4gICAgLy8g4pyFIFNpIGVudHJhLCBOTyB1c2Ftb3Mgd2lkdGggKGJvdW5kcyBhanVzdGFkbylcclxuICAgIC8vIOKchSBTaSBubyBlbnRyYSwgdXNhbW9zIHdpZHRoPWF2YWlsYWJsZSB5IHdyYXAgcG9yIGNhcmFjdGVyZXMgcGFyYSBjb3J0YXIgZW4gZWwgYm9yZGVcclxuICAgIGNvbnN0IHNob3VsZFdyYXBUb0NhbnZhc0VkZ2UgPSByZWFsVGV4dFdpZHRoID4gYXZhaWxhYmxlV2lkdGg7XHJcblxyXG4gICAgY29uc3Qgd3JhcFRvVXNlID0gc2hvdWxkV3JhcFRvQ2FudmFzRWRnZSA/IFwiY2hhclwiIDogXCJub25lXCI7XHJcbiAgICBjb25zdCB3aWR0aFRvVXNlID0gc2hvdWxkV3JhcFRvQ2FudmFzRWRnZSA/IGF2YWlsYWJsZVdpZHRoIDogdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgaW5saW5lQ2FyZXRPbmx5TW9kZSA9IHRydWU7XHJcbiAgICBjb25zdCBhcHBsaWVkT3BhY2l0eSA9XHJcbiAgICAgIGlzRWRpdGluZyAmJiAhaW5saW5lQ2FyZXRPbmx5TW9kZSA/IDAgOiAxO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDw+XHJcbiAgICAgICAgPFRleHRcclxuICAgICAgICAgIHsuLi5jb21tb25Qcm9wc31cclxuICAgICAgICAgIHJlZj17KG5vZGUpID0+IHtcclxuICAgICAgICAgICAgdGV4dE5vZGVSZWYuY3VycmVudCA9IG5vZGU7XHJcbiAgICAgICAgICAgIGhhbmRsZVJlZihub2RlKTsgLy8gcmVnaXN0cmEgKyBkaXNwYXJhIFwiZWxlbWVudC1yZWYtcmVnaXN0cmFkb1wiXHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxyXG4gICAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxyXG4gICAgICAgICAgdGV4dD17c2FmZVRleHR9XHJcbiAgICAgICAgICB4PXt2YWxpZFh9XHJcbiAgICAgICAgICB5PXtvYmoueX1cclxuICAgICAgICAgIHdyYXA9e3dyYXBUb1VzZX1cclxuICAgICAgICAgIHdpZHRoPXt3aWR0aFRvVXNlfVxyXG4gICAgICAgICAgYWxpZ249e2FsaWdufVxyXG4gICAgICAgICAgZm9udFNpemU9e3ZhbGlkRm9udFNpemV9XHJcbiAgICAgICAgICBmb250RmFtaWx5PXtmb250RmFtaWx5fVxyXG4gICAgICAgICAgZm9udFdlaWdodD17b2JqLmZvbnRXZWlnaHQgfHwgXCJub3JtYWxcIn1cclxuICAgICAgICAgIGZvbnRTdHlsZT17a29udmFGb250U3R5bGV9XHJcbiAgICAgICAgICB0ZXh0RGVjb3JhdGlvbj17dGV4dERlY29yYXRpb259XHJcbiAgICAgICAgICBsaW5lSGVpZ2h0PXtsaW5lSGVpZ2h0fVxyXG4gICAgICAgICAgZmlsbD17ZmlsbENvbG9yfVxyXG4gICAgICAgICAgb3BhY2l0eT17YXBwbGllZE9wYWNpdHl9XHJcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduPVwidG9wXCJcclxuICAgICAgICAvPlxyXG5cclxuXHJcbiAgICAgIDwvPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJyc3ZwLWJvdG9uXCIpIHtcclxuICAgIGNvbnN0IGZvbnRGYW1pbHkgPSBvYmouZm9udEZhbWlseSB8fCBcInNhbnMtc2VyaWZcIjtcclxuXHJcbiAgICBjb25zdCB3aWR0aCA9IG9iai5hbmNobyB8fCAyMDA7XHJcbiAgICBjb25zdCBoZWlnaHQgPSBvYmouYWx0byB8fCA1MDtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8PlxyXG4gICAgICAgIHsvKiDwn5+jIEJvdMOzbiAoZm9uZG8pICovfVxyXG4gICAgICAgIDxSZWN0XHJcbiAgICAgICAgICB7Li4uY29tbW9uUHJvcHN9XHJcbiAgICAgICAgICB3aWR0aD17d2lkdGh9XHJcbiAgICAgICAgICBoZWlnaHQ9e2hlaWdodH1cclxuICAgICAgICAgIGNvcm5lclJhZGl1cz17OH1cclxuICAgICAgICAgIGZpbGw9e29iai5jb2xvciB8fCBcIiM3NzNkYmVcIn1cclxuICAgICAgICAgIHN0cm9rZT17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyBcIiM3NzNkYmVcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDIgOiAwfVxyXG4gICAgICAgICAgb25DbGljaz17KGUpID0+IHtcclxuICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBvblNlbGVjdD8uKG9iai5pZCwgb2JqLCBlKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvbkRyYWdNb3ZlPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBudWV2YVBvcyA9IGUudGFyZ2V0LnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHRvTm9kZSA9IHdpbmRvdy5fZWxlbWVudFJlZnM/LltgJHtvYmouaWR9LXRleHRgXTtcclxuICAgICAgICAgICAgaWYgKHRleHRvTm9kZSkge1xyXG4gICAgICAgICAgICAgIHRleHRvTm9kZS54KG51ZXZhUG9zLngpO1xyXG4gICAgICAgICAgICAgIHRleHRvTm9kZS55KG51ZXZhUG9zLnkpO1xyXG4gICAgICAgICAgICAgIHRleHRvTm9kZS5nZXRMYXllcigpPy5iYXRjaERyYXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAvPlxyXG5cclxuICAgICAgICB7Lyog8J+UpCBUZXh0byBlbmNpbWEgZGVsIGJvdMOzbiAqL31cclxuICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgcmVmPXsobm9kZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVnaXN0ZXJSZWYpIHtcclxuICAgICAgICAgICAgICByZWdpc3RlclJlZihgJHtvYmouaWR9LXRleHRgLCBub2RlIHx8IG51bGwpOyAvLyBzaSBxdWVyw6lzIG1hbmlwdWxhciBlbCB0ZXh0byBhcGFydGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIHg9e29iai54fVxyXG4gICAgICAgICAgeT17b2JqLnl9XHJcbiAgICAgICAgICB3aWR0aD17d2lkdGh9XHJcbiAgICAgICAgICBoZWlnaHQ9e2hlaWdodH1cclxuICAgICAgICAgIHRleHQ9e29iai50ZXh0byB8fCBcIkNvbmZpcm1hciBhc2lzdGVuY2lhXCJ9XHJcbiAgICAgICAgICBmb250U2l6ZT17bm9ybWFsaXplRm9udFNpemUob2JqLmZvbnRTaXplLCAxOCl9XHJcbiAgICAgICAgICBmb250RmFtaWx5PXtmb250RmFtaWx5fVxyXG4gICAgICAgICAgZm9udFN0eWxlPXtyZXNvbHZlS29udmFGb250U3R5bGUob2JqLmZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiLCBvYmouZm9udFdlaWdodCB8fCBcImJvbGRcIil9XHJcbiAgICAgICAgICBmb250V2VpZ2h0PXtvYmouZm9udFdlaWdodCB8fCBcImJvbGRcIn1cclxuICAgICAgICAgIHRleHREZWNvcmF0aW9uPXtvYmoudGV4dERlY29yYXRpb24gfHwgXCJub25lXCJ9XHJcbiAgICAgICAgICBmaWxsPXtvYmouY29sb3JUZXh0byB8fCBcIiNmZmZmZmZcIn1cclxuICAgICAgICAgIGFsaWduPXtvYmouYWxpZ24gfHwgXCJjZW50ZXJcIn1cclxuICAgICAgICAgIHZlcnRpY2FsQWxpZ249XCJtaWRkbGVcIlxyXG4gICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgIG9wYWNpdHk9e2lzSW5FZGl0TW9kZSA/IDAgOiAxfVxyXG4gICAgICAgIC8+XHJcblxyXG4gICAgICA8Lz5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJpbWFnZW5cIiAmJiBpbWcpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxLb252YUltYWdlXHJcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxyXG4gICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgIGlkPXtvYmouaWR9XHJcbiAgICAgICAgaW1hZ2U9e2ltZ31cclxuICAgICAgICBjcm9zc09yaWdpbj1cImFub255bW91c1wiXHJcbiAgICAgICAgd2lkdGg9e29iai53aWR0aCB8fCBpbWcud2lkdGh9XHJcbiAgICAgICAgaGVpZ2h0PXtvYmouaGVpZ2h0IHx8IGltZy5oZWlnaHR9XHJcbiAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxyXG4gICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VMZWF2ZX1cclxuICAgICAgICBzdHJva2U9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gXCIjNzczZGJlXCIgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgc3Ryb2tlV2lkdGg9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gMSA6IDB9XHJcbiAgICAgIC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0gSUNPTk8gU1ZHICh0aXBvOlwiaWNvbm9cIiwgZm9ybWF0bzpcInN2Z1wiKSDigJQgQ09OIEhJVEJPWCBGVU5DSU9OQUwgLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJpY29ub1wiICYmIG9iai5mb3JtYXRvID09PSBcInN2Z1wiKSB7XHJcbiAgICBjb25zdCBjb2xvciA9IG9iai5jb2xvciB8fCBcIiMwMDAwMDBcIjtcclxuICAgIGNvbnN0IHBhdGhzID0gQXJyYXkuaXNBcnJheShvYmoucGF0aHMpID8gb2JqLnBhdGhzIDogW107XHJcbiAgICBjb25zdCBXID0gTnVtYmVyKG9iai53aWR0aCkgfHwgMTI4O1xyXG4gICAgY29uc3QgSCA9IE51bWJlcihvYmouaGVpZ2h0KSB8fCAxMjg7XHJcbiAgICBjb25zdCB2YiA9IHBhcnNlVmlld0JveChvYmoudmlld0JveCkgfHwgeyBtaW5YOiAwLCBtaW5ZOiAwLCB2YldpZHRoOiAxMDAsIHZiSGVpZ2h0OiAxMDAgfTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8R3JvdXBcclxuICAgICAgICB7Li4uY29tbW9uUHJvcHN9XHJcbiAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XHJcbiAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxyXG4gICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VMZWF2ZX1cclxuICAgICAgICB3aWR0aD17V31cclxuICAgICAgICBoZWlnaHQ9e0h9XHJcbiAgICAgID5cclxuICAgICAgICB7Lyog8J+UpSBISVRCT1ggSU5WSVNJQkxFIC0gU09MTyBwYXJhIGV2ZW50b3MgZGUgZHJhZy9jbGljayAqL31cclxuICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgeD17MH1cclxuICAgICAgICAgIHk9ezB9XHJcbiAgICAgICAgICB3aWR0aD17V31cclxuICAgICAgICAgIGhlaWdodD17SH1cclxuICAgICAgICAgIGZpbGw9XCJyZ2JhKDAsMCwwLDAuMDAxKVwiICAvLyBDYXNpIHRyYW5zcGFyZW50ZSBwZXJvIGNsaWNrZWFibGVcclxuICAgICAgICAgIHN0cm9rZT1cInRyYW5zcGFyZW50XCIgICAgICAvLyBTaW4gYm9yZGVcclxuICAgICAgICAgIGxpc3RlbmluZz17dHJ1ZX0gICAgICAgICAgLy8gREVCRSByZWNpYmlyIGV2ZW50b3NcclxuICAgICAgICAgIGRyYWdnYWJsZT17ZmFsc2V9XHJcbiAgICAgICAgLz5cclxuXHJcbiAgICAgICAgey8qIENvbnRlbmlkbyBTVkcgdmlzdWFsIC0gTk8gbWFuZWphIGV2ZW50b3MgKi99XHJcbiAgICAgICAge3BhdGhzLm1hcCgocCwgaSkgPT4gKFxyXG4gICAgICAgICAgPFBhdGhcclxuICAgICAgICAgICAga2V5PXtpfVxyXG4gICAgICAgICAgICBkYXRhPXtwLmR9XHJcbiAgICAgICAgICAgIGZpbGw9e2NvbG9yfVxyXG4gICAgICAgICAgICBzY2FsZVg9e1cgLyB2Yi52YldpZHRofVxyXG4gICAgICAgICAgICBzY2FsZVk9e0ggLyB2Yi52YkhlaWdodH1cclxuICAgICAgICAgICAgeD17LXZiLm1pblggKiAoVyAvIHZiLnZiV2lkdGgpfVxyXG4gICAgICAgICAgICB5PXstdmIubWluWSAqIChIIC8gdmIudmJIZWlnaHQpfVxyXG4gICAgICAgICAgICBsaXN0ZW5pbmc9e2ZhbHNlfSAgICAgICAgLy8gTk8gbWFuZWphIGV2ZW50b3NcclxuICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkPXtmYWxzZX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgKSl9XHJcblxyXG4gICAgICAgIHsvKiBNYXJjbyBkZSBzZWxlY2Npw7NuIHZpc3VhbCAqL31cclxuICAgICAgICB7KGlzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvKSAmJiAoXHJcbiAgICAgICAgICA8UmVjdFxyXG4gICAgICAgICAgICB4PXswfVxyXG4gICAgICAgICAgICB5PXswfVxyXG4gICAgICAgICAgICB3aWR0aD17V31cclxuICAgICAgICAgICAgaGVpZ2h0PXtIfVxyXG4gICAgICAgICAgICBzdHJva2U9XCIjNzczZGJlXCJcclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgICAgICAgIGZpbGw9XCJ0cmFuc3BhcmVudFwiXHJcbiAgICAgICAgICAgIGxpc3RlbmluZz17ZmFsc2V9ICAgICAgICAvLyBTb2xvIHZpc3VhbFxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApfVxyXG4gICAgICA8L0dyb3VwPlxyXG4gICAgKTtcclxuICB9XHJcblxyXG5cclxuICAvKiAtLS0tLS0tLS0tLS0tLS0tIElDT05PIFJBU1RFUiAoUE5HL0pQRy9XRUJQKSDigJMgc2luIHJlY29sb3IgLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4gIGlmIChvYmoudGlwbyA9PT0gXCJpY29ub1wiICYmIChvYmouZm9ybWF0byA9PT0gXCJwbmdcIiB8fCBvYmouZm9ybWF0byA9PT0gXCJqcGdcIiB8fCBvYmouZm9ybWF0byA9PT0gXCJ3ZWJwXCIpKSB7XHJcbiAgICBjb25zdCBbaW1nXSA9IHVzZUltYWdlKG9iai51cmwsIFwiYW5vbnltb3VzXCIpO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxLb252YUltYWdlXHJcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxyXG4gICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgIGltYWdlPXtpbWd9XHJcbiAgICAgICAgY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIlxyXG4gICAgICAgIHdpZHRoPXtvYmoud2lkdGggfHwgKGltZz8ud2lkdGggPz8gMTIwKX1cclxuICAgICAgICBoZWlnaHQ9e29iai5oZWlnaHQgfHwgKGltZz8uaGVpZ2h0ID8/IDEyMCl9XHJcbiAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxyXG5cclxuICAgICAgICAvLyBVWCBjdXJzb3IgKHNpbiByb21wZXIgdHUgaG92ZXIpXHJcbiAgICAgICAgb25Nb3VzZUVudGVyPXsoZSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0U3RhZ2UoKTtcclxuICAgICAgICAgIGlmIChzdGFnZSkgc3RhZ2UuY29udGFpbmVyKCkuc3R5bGUuY3Vyc29yID0gXCJncmFiXCI7XHJcbiAgICAgICAgICBoYW5kbGVNb3VzZUVudGVyPy4oZSk7XHJcbiAgICAgICAgfX1cclxuICAgICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzdGFnZSA9IGUuY3VycmVudFRhcmdldC5nZXRTdGFnZSgpO1xyXG4gICAgICAgICAgaWYgKHN0YWdlKSBzdGFnZS5jb250YWluZXIoKS5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcclxuICAgICAgICAgIGhhbmRsZU1vdXNlTGVhdmU/LihlKTtcclxuICAgICAgICB9fVxyXG5cclxuICAgICAgICAvLyDinIUgQ0xBVkU6IE5PIHBpc2FyIGVsIG9uQ2xpY2svb25UYXAgbmkgZWwgb25EcmFnRW5kIFwicmVhbFwiIGRlbCBzaXN0ZW1hXHJcbiAgICAgICAgLy8gU2kgcXVlcsOpcyBtYW50ZW5lciB1biBjb21wb3J0YW1pZW50byBleHRyYSBlbiBjbGljaywgaGFjZWxvIHNpbiBjYW1iaWFyIGxhIGZpcm1hOlxyXG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XHJcbiAgICAgICAgICAvLyBkZWxlZ2EgYWwgY29tbW9uUHJvcHMub25DbGljayAoc2VsZWNjacOzbiBjb25zaXN0ZW50ZSlcclxuICAgICAgICAgIGNvbW1vblByb3BzLm9uQ2xpY2s/LihlKTtcclxuICAgICAgICB9fVxyXG4gICAgICAgIG9uVGFwPXsoZSkgPT4ge1xyXG4gICAgICAgICAgLy8gZW4gS29udmEsIHRhcCBzdWVsZSBtYXBlYXIgYSBjbGljazsgc2kgcXVlcsOpcywgZGVsZWdhbG8gaWd1YWxcclxuICAgICAgICAgIGNvbW1vblByb3BzLm9uQ2xpY2s/LihlKTtcclxuICAgICAgICB9fVxyXG5cclxuICAgICAgICAvLyDinIUgQ0xBVkU6IGRlbGVnYXIgYSBjb21tb25Qcm9wcy5vbkRyYWdFbmQgcGFyYSBxdWU6XHJcbiAgICAgICAgLy8gLSBzZSBsaW1waWVuIGd1w61hcyAob25EcmFnRW5kUGVyc29uYWxpemFkbylcclxuICAgICAgICAvLyAtIHNlIGhhZ2EgZmluYWxpem9EcmFnICsgQUJT4oaSUkVMXHJcbiAgICAgICAgb25EcmFnRW5kPXsoZSkgPT4ge1xyXG4gICAgICAgICAgY29tbW9uUHJvcHMub25EcmFnRW5kPy4oZSk7XHJcblxyXG4gICAgICAgICAgLy8gbGltcGllemEgZGUgY3Vyc29yIChleHRyYSlcclxuICAgICAgICAgIGNvbnN0IHN0YWdlID0gZS5jdXJyZW50VGFyZ2V0LmdldFN0YWdlKCk7XHJcbiAgICAgICAgICBpZiAoc3RhZ2UpIHN0YWdlLmNvbnRhaW5lcigpLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgIH19XHJcbiAgICAgIC8+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcbiAgLyogLS0tLS0tLS0tLS0tLS0tLSBMRUdBQ1k6IElDT05PIFNWRyAodGlwbzogXCJpY29uby1zdmdcIiBjb24gb2JqLmQpIC0tLS0tLS0tLS0tLS0tLS0gKi9cclxuICBpZiAob2JqLnRpcG8gPT09IFwiaWNvbm8tc3ZnXCIpIHtcclxuICAgIGNvbnN0IFcgPSBOdW1iZXIob2JqLndpZHRoKSB8fCAxMjg7XHJcbiAgICBjb25zdCBIID0gTnVtYmVyKG9iai5oZWlnaHQpIHx8IDEyODtcclxuXHJcbiAgICBjb25zdCB2YiA9IHBhcnNlVmlld0JveChvYmoudmlld0JveCkgfHwgeyBtaW5YOiAwLCBtaW5ZOiAwLCB2YldpZHRoOiAxMDAsIHZiSGVpZ2h0OiAxMDAgfTtcclxuICAgIGNvbnN0IHNjYWxlWCA9IHZiLnZiV2lkdGggPyBXIC8gdmIudmJXaWR0aCA6IDE7XHJcbiAgICBjb25zdCBzY2FsZVkgPSB2Yi52YkhlaWdodCA/IEggLyB2Yi52YkhlaWdodCA6IDE7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEdyb3VwXHJcbiAgICAgICAgey4uLmNvbW1vblByb3BzfVxyXG4gICAgICAgIHJlZj17aGFuZGxlUmVmfVxyXG4gICAgICAgIGRyYWdnYWJsZT17dHJ1ZX1cclxuICAgICAgICBvbk1vdXNlRW50ZXI9e2hhbmRsZU1vdXNlRW50ZXJ9XHJcbiAgICAgICAgb25Nb3VzZUxlYXZlPXtoYW5kbGVNb3VzZUxlYXZlfVxyXG4gICAgICAgIG9uQ2xpY2s9eyhlKSA9PiBjb21tb25Qcm9wcy5vbkNsaWNrPy4oZSl9XHJcbiAgICAgICAgb25UYXA9eyhlKSA9PiBjb21tb25Qcm9wcy5vblRhcD8uKGUpfVxyXG4gICAgICAgIG9uRHJhZ0VuZD17KGUpID0+IHtcclxuICAgICAgICAgIGNvbW1vblByb3BzLm9uRHJhZ0VuZD8uKGUpO1xyXG4gICAgICAgIH19XHJcbiAgICAgICAgb25UcmFuc2Zvcm1FbmQ9eyhlKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBub2RlID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICBjb25zdCBzY2FsZVhOb2RlID1cclxuICAgICAgICAgICAgdHlwZW9mIG5vZGUuc2NhbGVYID09PSBcImZ1bmN0aW9uXCIgPyBub2RlLnNjYWxlWCgpIDogKG5vZGUuc2NhbGVYID8/IDEpO1xyXG4gICAgICAgICAgY29uc3Qgc2NhbGVZTm9kZSA9XHJcbiAgICAgICAgICAgIHR5cGVvZiBub2RlLnNjYWxlWSA9PT0gXCJmdW5jdGlvblwiID8gbm9kZS5zY2FsZVkoKSA6IChub2RlLnNjYWxlWSA/PyAxKTtcclxuICAgICAgICAgIGNvbnN0IHBhdGNoID0ge1xyXG4gICAgICAgICAgICB4OiBub2RlLngoKSxcclxuICAgICAgICAgICAgeTogbm9kZS55KCksXHJcbiAgICAgICAgICAgIHJvdGF0aW9uOiBub2RlLnJvdGF0aW9uKCkgfHwgMCxcclxuICAgICAgICAgICAgd2lkdGg6IE1hdGgubWF4KDEsIFcgKiBNYXRoLmFicyhzY2FsZVhOb2RlIHx8IDEpKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLm1heCgxLCBIICogTWF0aC5hYnMoc2NhbGVZTm9kZSB8fCAxKSksXHJcbiAgICAgICAgICAgIHNjYWxlWDogMSxcclxuICAgICAgICAgICAgc2NhbGVZOiAxLFxyXG4gICAgICAgICAgICBpc0ZpbmFsOiB0cnVlLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIG9uQ2hhbmdlPy4ob2JqLmlkLCBwYXRjaCk7XHJcbiAgICAgICAgfX1cclxuICAgICAgPlxyXG4gICAgICAgIDxSZWN0XHJcbiAgICAgICAgICB4PXswfVxyXG4gICAgICAgICAgeT17MH1cclxuICAgICAgICAgIHdpZHRoPXtXfVxyXG4gICAgICAgICAgaGVpZ2h0PXtIfVxyXG4gICAgICAgICAgZmlsbD1cInJnYmEoMCwwLDAsMC4wMDEpXCJcclxuICAgICAgICAgIHN0cm9rZT17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyBcIiM3NzNkYmVcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDEgOiAwfVxyXG4gICAgICAgICAgbGlzdGVuaW5nPXt0cnVlfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPEdyb3VwIHg9ezB9IHk9ezB9IHNjYWxlWD17c2NhbGVYfSBzY2FsZVk9e3NjYWxlWX0+XHJcbiAgICAgICAgICA8R3JvdXAgeD17LXZiLm1pblh9IHk9ey12Yi5taW5ZfT5cclxuICAgICAgICAgICAgPFBhdGhcclxuICAgICAgICAgICAgICBkYXRhPXtvYmouZH1cclxuICAgICAgICAgICAgICBmaWxsPXtvYmouY29sb3IgfHwgXCIjMDAwXCJ9XHJcbiAgICAgICAgICAgICAgc3Ryb2tlPXtvYmouY29sb3IgfHwgXCIjMDAwXCJ9XHJcbiAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezF9XHJcbiAgICAgICAgICAgICAgcGVyZmVjdERyYXdFbmFibGVkXHJcbiAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvR3JvdXA+XHJcbiAgICAgICAgPC9Hcm91cD5cclxuICAgICAgPC9Hcm91cD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgaWYgKG9iai50aXBvID09PSBcImZvcm1hXCIpIHtcclxuICAgIGNvbnN0IHByb3BzRm9ybWEgPSB7XHJcbiAgICAgIC4uLmNvbW1vblByb3BzLFxyXG4gICAgICBmaWxsOiBvYmouY29sb3IgfHwgXCIjMDAwMDAwXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIHN3aXRjaCAob2JqLmZpZ3VyYSkge1xyXG4gICAgICBjYXNlIFwicmVjdFwiOlxyXG4gICAgICAgIC8vIE9wY2lvbmFsOiBub3JtYWxpemFtb3Mgd2lkdGgvaGVpZ2h0IHBhcmEgdXNhciBlbiBhbWJvcyBub2Rvc1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5hYnMob2JqLndpZHRoIHx8IDEwMCk7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5hYnMob2JqLmhlaWdodCB8fCAxMDApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPD5cclxuICAgICAgICAgICAgey8qIPCfn6ogRm9ybWEgKi99XHJcbiAgICAgICAgICAgIDxSZWN0XHJcbiAgICAgICAgICAgICAgey4uLnByb3BzRm9ybWF9XHJcbiAgICAgICAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XHJcbiAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxyXG4gICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17aGFuZGxlTW91c2VMZWF2ZX1cclxuICAgICAgICAgICAgICB3aWR0aD17d2lkdGh9XHJcbiAgICAgICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XHJcbiAgICAgICAgICAgICAgY29ybmVyUmFkaXVzPXtvYmouY29ybmVyUmFkaXVzIHx8IDB9XHJcbiAgICAgICAgICAgICAgc3Ryb2tlPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IFwiIzc3M2RiZVwiIDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgIHN0cm9rZVdpZHRoPXtpc1NlbGVjdGVkIHx8IHByZVNlbGVjY2lvbmFkbyA/IDEgOiAwfVxyXG4gICAgICAgICAgICAgIC8vIPCflrHvuI8gRG9ibGUgY2xpY2sgcGFyYSBlbnRyYXIgZW4gZWRpY2nDs24gaW5saW5lXHJcbiAgICAgICAgICAgICAgb25EYmxDbGljaz17KGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChvblN0YXJ0VGV4dEVkaXQpIHtcclxuICAgICAgICAgICAgICAgICAgb25TdGFydFRleHRFZGl0KG9iai5pZCwgb2JqLnRleHRvIHx8IFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgb25EYmxUYXA9eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAob25TdGFydFRleHRFZGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgIG9uU3RhcnRUZXh0RWRpdChvYmouaWQsIG9iai50ZXh0byB8fCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIC8vIPCfmpogU2luY3Jvbml6YXIgZWwgdGV4dG8gbWllbnRyYXMgc2UgYXJyYXN0cmEgbGEgZm9ybWFcclxuICAgICAgICAgICAgICBvbkRyYWdNb3ZlPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFudGVuZXIgY3VhbHF1aWVyIGzDs2dpY2EgZGUgZHJhZyBvcmlnaW5hbCBxdWUgdmVuZ2EgZGUgY29tbW9uUHJvcHNcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcHNGb3JtYS5vbkRyYWdNb3ZlID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgcHJvcHNGb3JtYS5vbkRyYWdNb3ZlKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgeCwgeSB9ID0gZS50YXJnZXQucG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWdlID0gZS50YXJnZXQuZ2V0U3RhZ2UoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTm9kZSA9IHN0YWdlPy5maW5kT25lKGAjJHtvYmouaWR9LXRleHRgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dG9Ob2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRleHRvTm9kZS54KHgpO1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0b05vZGUueSh5KTtcclxuICAgICAgICAgICAgICAgICAgdGV4dG9Ob2RlLmdldExheWVyKCk/LmJhdGNoRHJhdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgb25EcmFnRW5kPXsoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFudGVuZXIgbMOzZ2ljYSBvcmlnaW5hbCBkZSBkcmFnRW5kIChndWFyZGFyIHBvc2ljacOzbiwgZHJhZyBncnVwYWwsIGV0Yy4pXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3BzRm9ybWEub25EcmFnRW5kID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgcHJvcHNGb3JtYS5vbkRyYWdFbmQoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB4LCB5IH0gPSBlLnRhcmdldC5wb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhZ2UgPSBlLnRhcmdldC5nZXRTdGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dG9Ob2RlID0gc3RhZ2U/LmZpbmRPbmUoYCMke29iai5pZH0tdGV4dGApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0b05vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgdGV4dG9Ob2RlLngoeCk7XHJcbiAgICAgICAgICAgICAgICAgIHRleHRvTm9kZS55KHkpO1xyXG4gICAgICAgICAgICAgICAgICB0ZXh0b05vZGUuZ2V0TGF5ZXIoKT8uYmF0Y2hEcmF3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgIHsvKiDinI/vuI8gVGV4dG8gZW5jaW1hIGRlIGxhIGZvcm1hICovfVxyXG4gICAgICAgICAgICB7b2JqLnRleHRvICYmIChcclxuICAgICAgICAgICAgICA8VGV4dFxyXG4gICAgICAgICAgICAgICAgaWQ9e2Ake29iai5pZH0tdGV4dGB9ICAgICAgICAgIC8vIPCfkYggaWQgcGFyYSBwb2RlciBlbmNvbnRyYXJsbyBkZXNkZSBlbCBSZWN0XHJcbiAgICAgICAgICAgICAgICByZWY9eyhub2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChyZWdpc3RlclJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyUmVmKGAke29iai5pZH0tdGV4dGAsIG5vZGUgfHwgbnVsbCk7IC8vIHNlZ3XDrXMgdXNhbmRvIHR1IHNpc3RlbWEgZGUgcmVmc1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgeD17b2JqLnh9XHJcbiAgICAgICAgICAgICAgICB5PXtvYmoueX1cclxuICAgICAgICAgICAgICAgIHdpZHRoPXt3aWR0aH1cclxuICAgICAgICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxyXG4gICAgICAgICAgICAgICAgdGV4dD17b2JqLnRleHRvfVxyXG4gICAgICAgICAgICAgICAgZm9udFNpemU9e25vcm1hbGl6ZUZvbnRTaXplKG9iai5mb250U2l6ZSwgMjQpfVxyXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseT17b2JqLmZvbnRGYW1pbHkgfHwgXCJzYW5zLXNlcmlmXCJ9XHJcbiAgICAgICAgICAgICAgICBmb250V2VpZ2h0PXtvYmouZm9udFdlaWdodCB8fCBcIm5vcm1hbFwifVxyXG4gICAgICAgICAgICAgICAgZm9udFN0eWxlPXtyZXNvbHZlS29udmFGb250U3R5bGUob2JqLmZvbnRTdHlsZSB8fCBcIm5vcm1hbFwiLCBvYmouZm9udFdlaWdodCB8fCBcIm5vcm1hbFwiKX1cclxuICAgICAgICAgICAgICAgIHRleHREZWNvcmF0aW9uPXtvYmoudGV4dERlY29yYXRpb24gfHwgXCJub25lXCJ9XHJcbiAgICAgICAgICAgICAgICBmaWxsPXtvYmouY29sb3JUZXh0byB8fCBcIiMwMDAwMDBcIn1cclxuICAgICAgICAgICAgICAgIGFsaWduPXtvYmouYWxpZ24gfHwgXCJjZW50ZXJcIn1cclxuICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ249XCJtaWRkbGVcIlxyXG4gICAgICAgICAgICAgICAgbGlzdGVuaW5nPXtmYWxzZX0gICAgICAgICAgICAgIC8vIPCfkYggZWwgdGV4dG8gbm8gcm9iYSBldmVudG9zLCBsb3MgcmVjaWJlIGVsIFJlY3RcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk9e2lzSW5FZGl0TW9kZSA/IDAgOiAxfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA8Lz5cclxuICAgICAgICApO1xyXG5cclxuXHJcbiAgICAgIGNhc2UgXCJjaXJjbGVcIjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPENpcmNsZVxyXG4gICAgICAgICAgICB7Li4ucHJvcHNGb3JtYX1cclxuICAgICAgICAgICAgcmVmPXtoYW5kbGVSZWZ9XHJcbiAgICAgICAgICAgIHJhZGl1cz17b2JqLnJhZGl1cyB8fCA1MH1cclxuICAgICAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxyXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XHJcbiAgICAgICAgICAgIHN0cm9rZT17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyBcIiM3NzNkYmVcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gMSA6IDB9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICBjYXNlIFwidHJpYW5nbGVcIjpcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgPFJlZ3VsYXJQb2x5Z29uXHJcbiAgICAgICAgICAgIHsuLi5wcm9wc0Zvcm1hfVxyXG4gICAgICAgICAgICByZWY9e2hhbmRsZVJlZn1cclxuICAgICAgICAgICAgc2lkZXM9ezN9XHJcbiAgICAgICAgICAgIHJhZGl1cz17b2JqLnJhZGl1cyB8fCA2MH1cclxuICAgICAgICAgICAgb25Nb3VzZUVudGVyPXtoYW5kbGVNb3VzZUVudGVyfVxyXG4gICAgICAgICAgICBvbk1vdXNlTGVhdmU9e2hhbmRsZU1vdXNlTGVhdmV9XHJcbiAgICAgICAgICAgIHN0cm9rZT17aXNTZWxlY3RlZCB8fCBwcmVTZWxlY2Npb25hZG8gPyBcIiM3NzNkYmVcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg9e2lzU2VsZWN0ZWQgfHwgcHJlU2VsZWNjaW9uYWRvID8gMSA6IDB9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcblxyXG5cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJUZXh0IiwiSW1hZ2UiLCJLb252YUltYWdlIiwiUmVjdCIsIkNpcmNsZSIsIkxpbmUiLCJSZWd1bGFyUG9seWdvbiIsIlBhdGgiLCJHcm91cCIsInVzZUltYWdlIiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VNZW1vIiwidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJMSU5FX0NPTlNUQU5UUyIsInByZXZpZXdEcmFnR3J1cGFsIiwic3RhcnREcmFnR3J1cGFsTGlkZXIiLCJlbmREcmFnR3J1cGFsIiwic3RhcnREcmFnSW5kaXZpZHVhbCIsInByZXZpZXdEcmFnSW5kaXZpZHVhbCIsImVuZERyYWdJbmRpdmlkdWFsIiwiZ2V0Q2VudGVyZWRUZXh0UG9zaXRpb24iLCJub3JtYWxpemVGb250U2l6ZSIsInZhbHVlIiwiZmFsbGJhY2siLCJwYXJzZWQiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImlzQm9sZEZvbnRXZWlnaHQiLCJ3ZWlnaHQiLCJub3JtYWxpemVkIiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInJlc29sdmVLb252YUZvbnRTdHlsZSIsImZvbnRTdHlsZSIsImZvbnRXZWlnaHQiLCJzdHlsZSIsImlzSXRhbGljIiwiaXNCb2xkIiwiRWxlbWVudG9DYW52YXMiLCJvYmoiLCJpc1NlbGVjdGVkIiwiaXNJbkVkaXRNb2RlIiwib25TZWxlY3QiLCJvbkNoYW5nZSIsImVkaXRpbmdJZCIsInJlZ2lzdGVyUmVmIiwib25Ib3ZlciIsInByZVNlbGVjY2lvbmFkbyIsIm9uRHJhZ01vdmVQZXJzb25hbGl6YWRvIiwib25EcmFnU3RhcnRQZXJzb25hbGl6YWRvIiwib25EcmFnRW5kUGVyc29uYWxpemFkbyIsImRyYWdTdGFydFBvcyIsImhhc0RyYWdnZWQiLCJvblN0YXJ0VGV4dEVkaXQiLCJlZGl0aW5nTW9kZSIsImlubGluZU92ZXJsYXlNb3VudGVkSWQiLCJpbmxpbmVWaXNpYmlsaXR5TW9kZSIsImltZyIsInNyYyIsIm1lYXN1cmVkVGV4dFdpZHRoIiwic2V0TWVhc3VyZWRUZXh0V2lkdGgiLCJ0ZXh0Tm9kZVJlZiIsImJhc2VUZXh0TGF5b3V0UmVmIiwiaGFuZGxlQ2hhbmdlIiwiaWQiLCJuZXdEYXRhIiwiZnJvbUF1dG9GaXgiLCJoYW5kbGVSZWYiLCJub2RlIiwiaGFuZGxlQ2xpY2siLCJlIiwiY2FuY2VsQnViYmxlIiwiY3VycmVudCIsInRpcG8iLCJ0ZXh0byIsImZpZ3VyYSIsImNvbW1vblByb3BzIiwieCIsInkiLCJyb3RhdGlvbiIsInNjYWxlWCIsInNjYWxlWSIsImRyYWdnYWJsZSIsImxpc3RlbmluZyIsIm9uTW91c2VEb3duIiwiY3VycmVudFRhcmdldCIsIm9uTW91c2VVcCIsIm9uQ2xpY2siLCJvblRhcCIsIm9uRHJhZ1N0YXJ0Iiwid2luZG93IiwiX2RyYWdDb3VudCIsIl9sYXN0TW91c2UiLCJfbGFzdEVsZW1lbnQiLCJfaXNEcmFnZ2luZyIsImZ1ZUdydXBhbCIsIm9uRHJhZ01vdmUiLCJzdGFnZSIsInRhcmdldCIsImdldFN0YWdlIiwibW91c2VQb3MiLCJnZXRQb2ludGVyUG9zaXRpb24iLCJlbGVtZW50UG9zIiwiX2dydXBvTGlkZXIiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwiX2VsZW1lbnRvc1NlbGVjY2lvbmFkb3MiLCJvbkRyYWdFbmQiLCJoYW5kbGVNb3VzZUVudGVyIiwiaGFuZGxlTW91c2VMZWF2ZSIsInJlY2FsY0dyb3VwQWxpZ24iLCJfX2dyb3VwQWxpZ24iLCJfX2dyb3VwSWQiLCJyZWZzIiwiX2VsZW1lbnRSZWZzIiwiZ2V0T2JqIiwiX19nZXRPYmpCeUlkIiwibWF4VyIsInRoaXNXIiwiT2JqZWN0IiwiZW50cmllcyIsIm8iLCJ3IiwiZ2V0VGV4dFdpZHRoIiwiTWF0aCIsImNlaWwiLCJiYXNlWCIsIl9fZ3JvdXBPcmlnaW5YIiwidGFyZ2V0WCIsImFicyIsInIxIiwicjIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImlzQXV0b1dpZHRoIiwid2lkdGgiLCJfX2F1dG9XaWR0aCIsInJhZjEiLCJyYWYyIiwid1JlYWwiLCJsaW5lSGVpZ2h0IiwiZ3JvdXBSZWYiLCJjb2xvciIsImNhY2hlIiwiZ2V0TGF5ZXIiLCJiYXRjaERyYXciLCJwYXJzZVZpZXdCb3giLCJ2YiIsInBhcnRzIiwidHJpbSIsInNwbGl0IiwibWFwIiwibGVuZ3RoIiwic29tZSIsIm4iLCJpc05hTiIsIm1pblgiLCJtaW5ZIiwidmJXaWR0aCIsInZiSGVpZ2h0IiwibGluZVBvaW50cyIsInBvaW50cyIsInBvaW50c0ZpeGVkIiwiQXJyYXkiLCJpc0FycmF5IiwiREVGQVVMVF9MRU5HVEgiLCJwdW50b3NWYWxpZGFkb3MiLCJpIiwicHVudG8iLCJwYXJzZUZsb2F0IiwicHVzaCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzbGljZSIsInNldFRpbWVvdXQiLCJyZWYiLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlTGVhdmUiLCJzdHJva2UiLCJERUZBVUxUX0NPTE9SIiwic3Ryb2tlV2lkdGgiLCJTVFJPS0VfV0lEVEgiLCJ0ZW5zaW9uIiwibGluZUNhcCIsImxpbmVKb2luIiwicGVyZmVjdERyYXdFbmFibGVkIiwiaGl0U3Ryb2tlV2lkdGgiLCJtYXgiLCJISVRfU1RST0tFX1dJRFRIIiwic2hhZG93Rm9yU3Ryb2tlRW5hYmxlZCIsIm9wYWNpdHkiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXQiLCJ2aXNpYmlsaXR5TW9kZSIsImlzRWRpdGluZ0J5V2luZG93IiwiX2N1cnJlbnRFZGl0aW5nSWQiLCJpc0VkaXRpbmdCeVJlYWN0aXZlIiwib3ZlcmxheURvbVByZXNlbnRMb29zZSIsImRvY3VtZW50Iiwic2FmZUlkIiwicmVwbGFjZSIsIkJvb2xlYW4iLCJxdWVyeVNlbGVjdG9yIiwib3ZlcmxheURvbVByZXNlbnQiLCJpc0VkaXRpbmdCeU92ZXJsYXkiLCJpc0VkaXRpbmciLCJhbGlnbiIsImZpbGxDb2xvciIsImNvbG9yVGV4dG8iLCJmaWxsIiwiYmFzZUxpbmVIZWlnaHQiLCJyYXdUZXh0Iiwic2FmZVRleHQiLCJ2YWxpZFgiLCJ2YWxpZFkiLCJ2YWxpZEZvbnRTaXplIiwidGV4dERlY29yYXRpb24iLCJjdHgiLCJjcmVhdGVFbGVtZW50IiwiZ2V0Q29udGV4dCIsImtvbnZhRm9udFN0eWxlIiwiZm9udEZvckNhbnZhcyIsInRlc3QiLCJmb250IiwibGluZXMiLCJtYXhMaW5lV2lkdGgiLCJsaW5lIiwibWVhc3VyZVRleHQiLCJudW1MaW5lcyIsInRleHRXaWR0aCIsInRleHRIZWlnaHQiLCJwb3NpdGlvblJhdyIsInJlY3RZIiwicmVjdEhlaWdodCIsInJlY3RDZW50ZXIiLCJiYXNlbGluZVRvQ2VudGVyIiwiYmFzZWxpbmUiLCJhc2NlbnQiLCJkZXNjZW50IiwiYmFzZSIsInJlY3RDZW50ZXJGaXhlZCIsImJhc2VsaW5lWSIsInRleHRUb3BGaXhlZCIsInBvc2l0aW9uIiwidGV4dFRvcCIsImNvbnNvbGUiLCJ3YXJuIiwiQU5DSE9fQ0FOVkFTIiwiYXZhaWxhYmxlV2lkdGgiLCJyZWFsVGV4dFdpZHRoIiwic2hvdWxkV3JhcFRvQ2FudmFzRWRnZSIsIndyYXBUb1VzZSIsIndpZHRoVG9Vc2UiLCJ1bmRlZmluZWQiLCJpbmxpbmVDYXJldE9ubHlNb2RlIiwiYXBwbGllZE9wYWNpdHkiLCJ0ZXh0Iiwid3JhcCIsInZlcnRpY2FsQWxpZ24iLCJhbmNobyIsImhlaWdodCIsImFsdG8iLCJjb3JuZXJSYWRpdXMiLCJudWV2YVBvcyIsInRleHRvTm9kZSIsImltYWdlIiwiY3Jvc3NPcmlnaW4iLCJmb3JtYXRvIiwicGF0aHMiLCJXIiwiSCIsInZpZXdCb3giLCJwIiwiZGF0YSIsImQiLCJ1cmwiLCJjb250YWluZXIiLCJjdXJzb3IiLCJvblRyYW5zZm9ybUVuZCIsInNjYWxlWE5vZGUiLCJzY2FsZVlOb2RlIiwicGF0Y2giLCJpc0ZpbmFsIiwicHJvcHNGb3JtYSIsIm9uRGJsQ2xpY2siLCJvbkRibFRhcCIsImZpbmRPbmUiLCJyYWRpdXMiLCJzaWRlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./src/components/ElementoCanvas.jsx\n"));

/***/ })

});