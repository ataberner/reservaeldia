"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_pages-dir-browser_src_components_CanvasEditor_jsx",{

/***/ "(pages-dir-browser)/./src/components/editor/overlays/useOptionButtonPosition.js":
/*!*******************************************************************!*\
  !*** ./src/components/editor/overlays/useOptionButtonPosition.js ***!
  \*******************************************************************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ useOptionButtonPosition)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\nvar _s = $RefreshSig$();\n\nconst FALLBACK_BUTTON_SIZE_DESKTOP = 24;\nconst FALLBACK_BUTTON_SIZE_MOBILE = 38;\nconst BUTTON_VERTEX_OVERLAP_RATIO = 0.5;\nconst BUTTON_VERTEX_NUDGE_X_DESKTOP = 20;\nconst BUTTON_VERTEX_NUDGE_Y_DESKTOP = 20;\nconst BUTTON_VERTEX_NUDGE_X_MOBILE = 4;\nconst BUTTON_VERTEX_NUDGE_Y_MOBILE = 4;\nconst LOG_THROTTLE_MS = 120;\nfunction isOptionButtonDebugEnabled() {\n    return  true && window.__DBG_OPTION_BUTTON === true;\n}\nfunction resolveScale(escalaVisual, escalaActiva) {\n    if (Number.isFinite(escalaVisual) && escalaVisual > 0) return escalaVisual;\n    if (Number.isFinite(escalaActiva) && escalaActiva > 0) return escalaActiva;\n    return 1;\n}\nfunction clamp(value, min, max) {\n    return Math.min(max, Math.max(min, value));\n}\nfunction describeEventTarget(target) {\n    var _target_classList;\n    if (target === window) return \"window\";\n    if (target === document) return \"document\";\n    if (!(target instanceof Element)) return \"unknown\";\n    const tag = String(target.tagName || \"\").toLowerCase();\n    const id = target.id ? \"#\".concat(target.id) : \"\";\n    const classes = ((_target_classList = target.classList) === null || _target_classList === void 0 ? void 0 : _target_classList.length) ? \".\".concat(Array.from(target.classList).slice(0, 2).join(\".\")) : \"\";\n    return \"\".concat(tag).concat(id).concat(classes) || \"element\";\n}\nfunction resolveRenderedScale(stage, stageRect, escalaVisual, escalaActiva) {\n    var _stage_attrs, _stage_attrs1;\n    const stageWidth = typeof (stage === null || stage === void 0 ? void 0 : stage.width) === \"function\" ? Number(stage.width()) : Number(stage === null || stage === void 0 ? void 0 : (_stage_attrs = stage.attrs) === null || _stage_attrs === void 0 ? void 0 : _stage_attrs.width);\n    const stageHeight = typeof (stage === null || stage === void 0 ? void 0 : stage.height) === \"function\" ? Number(stage.height()) : Number(stage === null || stage === void 0 ? void 0 : (_stage_attrs1 = stage.attrs) === null || _stage_attrs1 === void 0 ? void 0 : _stage_attrs1.height);\n    const fallback = resolveScale(escalaVisual, escalaActiva);\n    const scaleX = Number.isFinite(stageWidth) && stageWidth > 0 ? stageRect.width / stageWidth : fallback;\n    const scaleY = Number.isFinite(stageHeight) && stageHeight > 0 ? stageRect.height / stageHeight : fallback;\n    return {\n        x: Number.isFinite(scaleX) && scaleX > 0 ? scaleX : fallback,\n        y: Number.isFinite(scaleY) && scaleY > 0 ? scaleY : fallback\n    };\n}\nfunction getScrollableAncestors(startNode) {\n    if (false) {}\n    if (!(startNode instanceof Element)) return [\n        window\n    ];\n    const targets = [];\n    let current = startNode.parentElement;\n    while(current && current !== document.body){\n        const style = window.getComputedStyle(current);\n        const overflowY = String(style.overflowY || \"\").toLowerCase();\n        const overflow = String(style.overflow || \"\").toLowerCase();\n        const isScrollable = overflowY === \"auto\" || overflowY === \"scroll\" || overflowY === \"overlay\" || overflow === \"auto\" || overflow === \"scroll\" || overflow === \"overlay\";\n        if (isScrollable) {\n            targets.push(current);\n        }\n        current = current.parentElement;\n    }\n    if (document.scrollingElement) {\n        targets.push(document.scrollingElement);\n    }\n    targets.push(window);\n    return Array.from(new Set(targets));\n}\nfunction useOptionButtonPosition(param) {\n    let { botonOpcionesRef, layoutRootRef = null, elementRefs, elementosSeleccionados, stageRef, escalaVisual, escalaActiva, isMobile = false, buttonSize = FALLBACK_BUTTON_SIZE_DESKTOP } = param;\n    _s();\n    const lastLogByEventRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\n    const debugLog = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useOptionButtonPosition.useCallback[debugLog]\": function(eventName) {\n            let payload = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, force = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;\n            if (!isOptionButtonDebugEnabled()) return;\n            const now = Date.now();\n            const previous = Number(lastLogByEventRef.current[eventName] || 0);\n            if (!force && now - previous < LOG_THROTTLE_MS) return;\n            lastLogByEventRef.current[eventName] = now;\n            console.log(\"[OPTION-BUTTON] \".concat(eventName), {\n                ts: new Date(now).toISOString(),\n                ...payload\n            });\n            if (eventName === \"position\") {\n                var _payload_boxStage, _payload_nodeAbsolute, _payload_final, _payload_elementScreen, _payload_stageRect, _payload_eventTarget, _payload_scrollTarget;\n                var _payload_boxStage_y;\n                const boxY = (_payload_boxStage_y = payload === null || payload === void 0 ? void 0 : (_payload_boxStage = payload.boxStage) === null || _payload_boxStage === void 0 ? void 0 : _payload_boxStage.y) !== null && _payload_boxStage_y !== void 0 ? _payload_boxStage_y : null;\n                var _payload_nodeAbsolute_y;\n                const absY = (_payload_nodeAbsolute_y = payload === null || payload === void 0 ? void 0 : (_payload_nodeAbsolute = payload.nodeAbsolute) === null || _payload_nodeAbsolute === void 0 ? void 0 : _payload_nodeAbsolute.y) !== null && _payload_nodeAbsolute_y !== void 0 ? _payload_nodeAbsolute_y : null;\n                var _payload_anchorStageY;\n                const anchorY = (_payload_anchorStageY = payload === null || payload === void 0 ? void 0 : payload.anchorStageY) !== null && _payload_anchorStageY !== void 0 ? _payload_anchorStageY : null;\n                var _payload_final_y;\n                const finalY = (_payload_final_y = payload === null || payload === void 0 ? void 0 : (_payload_final = payload.final) === null || _payload_final === void 0 ? void 0 : _payload_final.y) !== null && _payload_final_y !== void 0 ? _payload_final_y : null;\n                var _payload_elementScreen_y;\n                const elementY = (_payload_elementScreen_y = payload === null || payload === void 0 ? void 0 : (_payload_elementScreen = payload.elementScreen) === null || _payload_elementScreen === void 0 ? void 0 : _payload_elementScreen.y) !== null && _payload_elementScreen_y !== void 0 ? _payload_elementScreen_y : null;\n                var _payload_stageRect_top;\n                const stageTop = (_payload_stageRect_top = payload === null || payload === void 0 ? void 0 : (_payload_stageRect = payload.stageRect) === null || _payload_stageRect === void 0 ? void 0 : _payload_stageRect.top) !== null && _payload_stageRect_top !== void 0 ? _payload_stageRect_top : null;\n                var _payload_source;\n                const source = (_payload_source = payload === null || payload === void 0 ? void 0 : payload.source) !== null && _payload_source !== void 0 ? _payload_source : \"unknown\";\n                var _payload_eventTarget_label, _ref;\n                const target = (_ref = (_payload_eventTarget_label = payload === null || payload === void 0 ? void 0 : (_payload_eventTarget = payload.eventTarget) === null || _payload_eventTarget === void 0 ? void 0 : _payload_eventTarget.label) !== null && _payload_eventTarget_label !== void 0 ? _payload_eventTarget_label : payload === null || payload === void 0 ? void 0 : (_payload_scrollTarget = payload.scrollTarget) === null || _payload_scrollTarget === void 0 ? void 0 : _payload_scrollTarget.label) !== null && _ref !== void 0 ? _ref : \"unknown\";\n                console.log(\"[OPTION-BUTTON][SUMMARY] src=\".concat(source, \" target=\").concat(target, \" boxY=\").concat(boxY, \" absY=\").concat(absY, \" anchorY=\").concat(anchorY, \" elementY=\").concat(elementY, \" finalY=\").concat(finalY, \" stageTop=\").concat(stageTop));\n            }\n        }\n    }[\"useOptionButtonPosition.useCallback[debugLog]\"], []);\n    const ocultarBotonOpciones = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useOptionButtonPosition.useCallback[ocultarBotonOpciones]\": function() {\n            let reason = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"unknown\", extra = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;\n            if (!botonOpcionesRef.current) return;\n            botonOpcionesRef.current.style.display = \"none\";\n            var _elementosSeleccionados_;\n            debugLog(\"hide\", {\n                reason,\n                selectedId: (_elementosSeleccionados_ = elementosSeleccionados === null || elementosSeleccionados === void 0 ? void 0 : elementosSeleccionados[0]) !== null && _elementosSeleccionados_ !== void 0 ? _elementosSeleccionados_ : null,\n                isMobile,\n                extra\n            }, false);\n        }\n    }[\"useOptionButtonPosition.useCallback[ocultarBotonOpciones]\"], [\n        botonOpcionesRef,\n        debugLog,\n        elementosSeleccionados,\n        isMobile\n    ]);\n    const actualizarPosicionBotonOpciones = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useOptionButtonPosition.useCallback[actualizarPosicionBotonOpciones]\": function() {\n            let source = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"manual\", nativeEvent = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null, eventTargetLabel = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : null;\n            if (false) {}\n            if (!botonOpcionesRef.current) return;\n            if (elementosSeleccionados.length !== 1) {\n                ocultarBotonOpciones(\"selection-count\", {\n                    source,\n                    count: elementosSeleccionados.length\n                });\n                return;\n            }\n            const nodeRef = elementRefs.current[elementosSeleccionados[0]];\n            const stage = stageRef.current;\n            if (!nodeRef || !stage) {\n                ocultarBotonOpciones(\"missing-node-or-stage\", {\n                    source,\n                    hasNode: Boolean(nodeRef),\n                    hasStage: Boolean(stage)\n                });\n                return;\n            }\n            try {\n                var _stage_getStage_container, _stage_getStage, _stage_getStage1;\n                const box = nodeRef.getClientRect({\n                    relativeTo: stage,\n                    skipShadow: true\n                });\n                const nodeAbsolutePosition = typeof nodeRef.getAbsolutePosition === \"function\" ? nodeRef.getAbsolutePosition() : {\n                    x: typeof nodeRef.x === \"function\" ? nodeRef.x() : null,\n                    y: typeof nodeRef.y === \"function\" ? nodeRef.y() : null\n                };\n                const stageContainer = typeof stage.container === \"function\" ? stage.container() : (_stage_getStage1 = stage.getStage) === null || _stage_getStage1 === void 0 ? void 0 : (_stage_getStage = _stage_getStage1.call(stage)) === null || _stage_getStage === void 0 ? void 0 : (_stage_getStage_container = _stage_getStage.container) === null || _stage_getStage_container === void 0 ? void 0 : _stage_getStage_container.call(_stage_getStage);\n                if (!stageContainer) {\n                    ocultarBotonOpciones(\"missing-stage-container\", {\n                        source\n                    });\n                    return;\n                }\n                const stageRect = stageContainer.getBoundingClientRect();\n                const renderedScale = resolveRenderedScale(stage, stageRect, escalaVisual, escalaActiva);\n                const targetButtonSize = Number.isFinite(buttonSize) && buttonSize > 0 ? buttonSize : isMobile ? FALLBACK_BUTTON_SIZE_MOBILE : FALLBACK_BUTTON_SIZE_DESKTOP;\n                const overlapPx = targetButtonSize * BUTTON_VERTEX_OVERLAP_RATIO;\n                const nudgeX = isMobile ? BUTTON_VERTEX_NUDGE_X_MOBILE : BUTTON_VERTEX_NUDGE_X_DESKTOP;\n                const nudgeY = isMobile ? BUTTON_VERTEX_NUDGE_Y_MOBILE : BUTTON_VERTEX_NUDGE_Y_DESKTOP;\n                const anchorStageY = Number.isFinite(nodeAbsolutePosition === null || nodeAbsolutePosition === void 0 ? void 0 : nodeAbsolutePosition.y) ? Math.min(box.y, nodeAbsolutePosition.y) : box.y;\n                const elementoX = stageRect.left + box.x * renderedScale.x;\n                const elementoY = stageRect.top + anchorStageY * renderedScale.y;\n                const anchoElemento = Math.max(0, box.width * renderedScale.x);\n                const altoElemento = Math.max(0, box.height * renderedScale.y);\n                const elementoRight = elementoX + anchoElemento;\n                const viewportWidth = window.innerWidth;\n                const viewportHeight = window.innerHeight;\n                const viewportPadding = isMobile ? 8 : 4;\n                const elementoVisible = elementoX + anchoElemento >= 0 && elementoX <= viewportWidth && elementoY + altoElemento >= 0 && elementoY <= viewportHeight;\n                if (!elementoVisible) {\n                    ocultarBotonOpciones(\"element-outside-viewport\", {\n                        source,\n                        elementRect: {\n                            left: Math.round(elementoX),\n                            top: Math.round(elementoY),\n                            width: Math.round(anchoElemento),\n                            height: Math.round(altoElemento)\n                        },\n                        viewport: {\n                            width: viewportWidth,\n                            height: viewportHeight\n                        }\n                    });\n                    return;\n                }\n                // Ancla visual: centro del botón exactamente en el vértice superior derecho.\n                const preferredX = elementoRight - overlapPx + nudgeX;\n                const preferredY = elementoY - overlapPx - nudgeY;\n                const minX = viewportPadding;\n                const maxX = Math.max(minX, viewportWidth - targetButtonSize - viewportPadding);\n                const minY = viewportPadding;\n                const maxY = Math.max(minY, viewportHeight - targetButtonSize - viewportPadding);\n                const fallbackNearVertexX = elementoRight - targetButtonSize - 1;\n                const useFallbackNearVertexX = preferredX + targetButtonSize > viewportWidth - viewportPadding && fallbackNearVertexX >= minX;\n                const fallbackNearVertexY = elementoY + 1;\n                const useFallbackNearVertexY = preferredY < minY && fallbackNearVertexY <= maxY;\n                const placementModeX = useFallbackNearVertexX ? \"fallback-left-of-vertex\" : \"vertex\";\n                const placementModeY = useFallbackNearVertexY ? \"fallback-below-vertex\" : \"vertex\";\n                let botonX = useFallbackNearVertexX ? fallbackNearVertexX : preferredX;\n                let botonY = useFallbackNearVertexY ? fallbackNearVertexY : preferredY;\n                botonX = clamp(botonX, minX, maxX);\n                botonY = clamp(botonY, minY, maxY);\n                const hasRelativeRoot = Boolean(layoutRootRef === null || layoutRootRef === void 0 ? void 0 : layoutRootRef.current);\n                let renderX = botonX;\n                let renderY = botonY;\n                if (hasRelativeRoot) {\n                    const rootRect = layoutRootRef.current.getBoundingClientRect();\n                    renderX = botonX - rootRect.left;\n                    renderY = botonY - rootRect.top;\n                }\n                botonOpcionesRef.current.style.left = \"\".concat(Math.round(renderX), \"px\");\n                botonOpcionesRef.current.style.top = \"\".concat(Math.round(renderY), \"px\");\n                botonOpcionesRef.current.style.display = \"flex\";\n                if (isOptionButtonDebugEnabled()) {\n                    var _stage_attrs, _stage_attrs1;\n                    const debugScrollTarget = getScrollableAncestors(stageContainer)[0] || window;\n                    const stageWidth = typeof (stage === null || stage === void 0 ? void 0 : stage.width) === \"function\" ? Number(stage.width()) : Number(stage === null || stage === void 0 ? void 0 : (_stage_attrs = stage.attrs) === null || _stage_attrs === void 0 ? void 0 : _stage_attrs.width);\n                    const stageHeight = typeof (stage === null || stage === void 0 ? void 0 : stage.height) === \"function\" ? Number(stage.height()) : Number(stage === null || stage === void 0 ? void 0 : (_stage_attrs1 = stage.attrs) === null || _stage_attrs1 === void 0 ? void 0 : _stage_attrs1.height);\n                    var _nativeEvent_pointerType, _nativeEvent_type;\n                    debugLog(\"position\", {\n                        source,\n                        selectedId: elementosSeleccionados[0],\n                        isMobile,\n                        pointerType: (_nativeEvent_pointerType = nativeEvent === null || nativeEvent === void 0 ? void 0 : nativeEvent.pointerType) !== null && _nativeEvent_pointerType !== void 0 ? _nativeEvent_pointerType : null,\n                        nativeEventType: (_nativeEvent_type = nativeEvent === null || nativeEvent === void 0 ? void 0 : nativeEvent.type) !== null && _nativeEvent_type !== void 0 ? _nativeEvent_type : null,\n                        eventTarget: {\n                            label: eventTargetLabel || describeEventTarget(nativeEvent === null || nativeEvent === void 0 ? void 0 : nativeEvent.target)\n                        },\n                        stageSize: {\n                            width: Number.isFinite(stageWidth) ? stageWidth : null,\n                            height: Number.isFinite(stageHeight) ? stageHeight : null\n                        },\n                        stageRect: {\n                            left: Math.round(stageRect.left),\n                            top: Math.round(stageRect.top),\n                            width: Math.round(stageRect.width),\n                            height: Math.round(stageRect.height)\n                        },\n                        renderedScale: {\n                            x: Number(renderedScale.x.toFixed(4)),\n                            y: Number(renderedScale.y.toFixed(4))\n                        },\n                        boxStage: {\n                            x: Number(box.x.toFixed(2)),\n                            y: Number(box.y.toFixed(2)),\n                            width: Number(box.width.toFixed(2)),\n                            height: Number(box.height.toFixed(2))\n                        },\n                        nodeAbsolute: {\n                            x: Number.isFinite(nodeAbsolutePosition === null || nodeAbsolutePosition === void 0 ? void 0 : nodeAbsolutePosition.x) ? Number(nodeAbsolutePosition.x.toFixed(2)) : null,\n                            y: Number.isFinite(nodeAbsolutePosition === null || nodeAbsolutePosition === void 0 ? void 0 : nodeAbsolutePosition.y) ? Number(nodeAbsolutePosition.y.toFixed(2)) : null\n                        },\n                        anchorStageY: Number(anchorStageY.toFixed(2)),\n                        elementScreen: {\n                            x: Number(elementoX.toFixed(2)),\n                            y: Number(elementoY.toFixed(2)),\n                            right: Number(elementoRight.toFixed(2)),\n                            width: Number(anchoElemento.toFixed(2)),\n                            height: Number(altoElemento.toFixed(2))\n                        },\n                        preferred: {\n                            x: Number(preferredX.toFixed(2)),\n                            y: Number(preferredY.toFixed(2)),\n                            targetButtonSize,\n                            overlapPx: Number(overlapPx.toFixed(2)),\n                            nudgeX,\n                            nudgeY,\n                            fallbackNearVertexX: Number(fallbackNearVertexX.toFixed(2)),\n                            fallbackNearVertexY: Number(fallbackNearVertexY.toFixed(2)),\n                            placementModeX,\n                            placementModeY\n                        },\n                        final: {\n                            x: Number(botonX.toFixed(2)),\n                            y: Number(botonY.toFixed(2)),\n                            renderX: Number(renderX.toFixed(2)),\n                            renderY: Number(renderY.toFixed(2)),\n                            positionMode: hasRelativeRoot ? \"absolute\" : \"fixed\",\n                            minX,\n                            maxX,\n                            minY,\n                            maxY\n                        },\n                        viewport: {\n                            width: viewportWidth,\n                            height: viewportHeight,\n                            scrollX: Number(window.scrollX || window.pageXOffset || 0),\n                            scrollY: Number(window.scrollY || window.pageYOffset || 0),\n                            visualViewport: window.visualViewport ? {\n                                offsetTop: Number(window.visualViewport.offsetTop || 0),\n                                offsetLeft: Number(window.visualViewport.offsetLeft || 0),\n                                width: Number(window.visualViewport.width || 0),\n                                height: Number(window.visualViewport.height || 0),\n                                scale: Number(window.visualViewport.scale || 1)\n                            } : null\n                        },\n                        scrollTarget: {\n                            label: describeEventTarget(debugScrollTarget),\n                            scrollTop: debugScrollTarget && \"scrollTop\" in debugScrollTarget ? Number(debugScrollTarget.scrollTop || 0) : null\n                        }\n                    });\n                }\n            } catch (error) {\n                const message = error instanceof Error ? error.message : String(error || \"unknown-error\");\n                var _elementosSeleccionados_;\n                debugLog(\"position-error\", {\n                    source,\n                    selectedId: (_elementosSeleccionados_ = elementosSeleccionados === null || elementosSeleccionados === void 0 ? void 0 : elementosSeleccionados[0]) !== null && _elementosSeleccionados_ !== void 0 ? _elementosSeleccionados_ : null,\n                    error: message\n                }, true);\n                ocultarBotonOpciones(\"exception\", {\n                    source,\n                    error: message\n                });\n            }\n        }\n    }[\"useOptionButtonPosition.useCallback[actualizarPosicionBotonOpciones]\"], [\n        botonOpcionesRef,\n        elementosSeleccionados,\n        elementRefs,\n        stageRef,\n        escalaVisual,\n        escalaActiva,\n        debugLog,\n        ocultarBotonOpciones,\n        layoutRootRef,\n        isMobile,\n        buttonSize\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useOptionButtonPosition.useEffect\": ()=>{\n            if (elementosSeleccionados.length !== 1) {\n                ocultarBotonOpciones();\n                return undefined;\n            }\n            let rafA = 0;\n            let rafB = 0;\n            rafA = window.requestAnimationFrame({\n                \"useOptionButtonPosition.useEffect\": ()=>{\n                    rafB = window.requestAnimationFrame({\n                        \"useOptionButtonPosition.useEffect\": ()=>{\n                            actualizarPosicionBotonOpciones(\"raf-init\", null, \"raf\");\n                        }\n                    }[\"useOptionButtonPosition.useEffect\"]);\n                }\n            }[\"useOptionButtonPosition.useEffect\"]);\n            return ({\n                \"useOptionButtonPosition.useEffect\": ()=>{\n                    if (rafA) window.cancelAnimationFrame(rafA);\n                    if (rafB) window.cancelAnimationFrame(rafB);\n                }\n            })[\"useOptionButtonPosition.useEffect\"];\n        }\n    }[\"useOptionButtonPosition.useEffect\"], [\n        elementosSeleccionados,\n        actualizarPosicionBotonOpciones,\n        ocultarBotonOpciones\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useOptionButtonPosition.useEffect\": ()=>{\n            var _stageRef_current_getStage, _stageRef_current;\n            if (false) {}\n            const stage = ((_stageRef_current = stageRef.current) === null || _stageRef_current === void 0 ? void 0 : (_stageRef_current_getStage = _stageRef_current.getStage) === null || _stageRef_current_getStage === void 0 ? void 0 : _stageRef_current_getStage.call(_stageRef_current)) || stageRef.current;\n            const stageContainer = typeof (stage === null || stage === void 0 ? void 0 : stage.container) === \"function\" ? stage.container() : null;\n            const hasRelativeRoot = Boolean(layoutRootRef === null || layoutRootRef === void 0 ? void 0 : layoutRootRef.current);\n            const syncPosition = {\n                \"useOptionButtonPosition.useEffect.syncPosition\": function() {\n                    let source = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"sync\", nativeEvent = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;\n                    if (elementosSeleccionados.length === 1) {\n                        actualizarPosicionBotonOpciones(source, nativeEvent, describeEventTarget(nativeEvent === null || nativeEvent === void 0 ? void 0 : nativeEvent.target));\n                    } else {\n                        ocultarBotonOpciones(\"sync-no-selection\", {\n                            source\n                        });\n                    }\n                }\n            }[\"useOptionButtonPosition.useEffect.syncPosition\"];\n            const scrollTargets = hasRelativeRoot ? [] : stageContainer ? getScrollableAncestors(stageContainer) : [\n                window\n            ];\n            const detach = [];\n            scrollTargets.forEach({\n                \"useOptionButtonPosition.useEffect\": (target)=>{\n                    if (!(target === null || target === void 0 ? void 0 : target.addEventListener) || !(target === null || target === void 0 ? void 0 : target.removeEventListener)) return;\n                    const onScroll = {\n                        \"useOptionButtonPosition.useEffect.onScroll\": (event)=>{\n                            syncPosition(\"scroll:\".concat(describeEventTarget(event.target)), event);\n                        }\n                    }[\"useOptionButtonPosition.useEffect.onScroll\"];\n                    target.addEventListener(\"scroll\", onScroll, {\n                        passive: true\n                    });\n                    detach.push({\n                        \"useOptionButtonPosition.useEffect\": ()=>target.removeEventListener(\"scroll\", onScroll)\n                    }[\"useOptionButtonPosition.useEffect\"]);\n                }\n            }[\"useOptionButtonPosition.useEffect\"]);\n            if (!hasRelativeRoot && window.visualViewport) {\n                const onVisualViewportScroll = {\n                    \"useOptionButtonPosition.useEffect.onVisualViewportScroll\": (event)=>{\n                        syncPosition(\"visual-viewport-scroll\", event);\n                    }\n                }[\"useOptionButtonPosition.useEffect.onVisualViewportScroll\"];\n                const onVisualViewportResize = {\n                    \"useOptionButtonPosition.useEffect.onVisualViewportResize\": (event)=>{\n                        syncPosition(\"visual-viewport-resize\", event);\n                    }\n                }[\"useOptionButtonPosition.useEffect.onVisualViewportResize\"];\n                window.visualViewport.addEventListener(\"scroll\", onVisualViewportScroll);\n                window.visualViewport.addEventListener(\"resize\", onVisualViewportResize);\n                detach.push({\n                    \"useOptionButtonPosition.useEffect\": ()=>{\n                        window.visualViewport.removeEventListener(\"scroll\", onVisualViewportScroll);\n                        window.visualViewport.removeEventListener(\"resize\", onVisualViewportResize);\n                    }\n                }[\"useOptionButtonPosition.useEffect\"]);\n            }\n            const onResize = {\n                \"useOptionButtonPosition.useEffect.onResize\": (event)=>{\n                    syncPosition(\"window-resize\", event);\n                }\n            }[\"useOptionButtonPosition.useEffect.onResize\"];\n            const onOrientationChange = {\n                \"useOptionButtonPosition.useEffect.onOrientationChange\": (event)=>{\n                    syncPosition(\"window-orientationchange\", event);\n                }\n            }[\"useOptionButtonPosition.useEffect.onOrientationChange\"];\n            window.addEventListener(\"resize\", onResize);\n            window.addEventListener(\"orientationchange\", onOrientationChange);\n            detach.push({\n                \"useOptionButtonPosition.useEffect\": ()=>window.removeEventListener(\"resize\", onResize)\n            }[\"useOptionButtonPosition.useEffect\"]);\n            detach.push({\n                \"useOptionButtonPosition.useEffect\": ()=>window.removeEventListener(\"orientationchange\", onOrientationChange)\n            }[\"useOptionButtonPosition.useEffect\"]);\n            if ((stage === null || stage === void 0 ? void 0 : stage.on) && (stage === null || stage === void 0 ? void 0 : stage.off)) {\n                const onStageDragMove = {\n                    \"useOptionButtonPosition.useEffect.onStageDragMove\": (event)=>syncPosition(\"stage-dragmove\", (event === null || event === void 0 ? void 0 : event.evt) || null)\n                }[\"useOptionButtonPosition.useEffect.onStageDragMove\"];\n                const onStageDragEnd = {\n                    \"useOptionButtonPosition.useEffect.onStageDragEnd\": (event)=>syncPosition(\"stage-dragend\", (event === null || event === void 0 ? void 0 : event.evt) || null)\n                }[\"useOptionButtonPosition.useEffect.onStageDragEnd\"];\n                const onStageTransform = {\n                    \"useOptionButtonPosition.useEffect.onStageTransform\": (event)=>syncPosition(\"stage-transform\", (event === null || event === void 0 ? void 0 : event.evt) || null)\n                }[\"useOptionButtonPosition.useEffect.onStageTransform\"];\n                const onStageTransformEnd = {\n                    \"useOptionButtonPosition.useEffect.onStageTransformEnd\": (event)=>syncPosition(\"stage-transformend\", (event === null || event === void 0 ? void 0 : event.evt) || null)\n                }[\"useOptionButtonPosition.useEffect.onStageTransformEnd\"];\n                stage.on(\"dragmove.option-button\", onStageDragMove);\n                stage.on(\"dragend.option-button\", onStageDragEnd);\n                stage.on(\"transform.option-button\", onStageTransform);\n                stage.on(\"transformend.option-button\", onStageTransformEnd);\n                detach.push({\n                    \"useOptionButtonPosition.useEffect\": ()=>{\n                        stage.off(\"dragmove.option-button\", onStageDragMove);\n                        stage.off(\"dragend.option-button\", onStageDragEnd);\n                        stage.off(\"transform.option-button\", onStageTransform);\n                        stage.off(\"transformend.option-button\", onStageTransformEnd);\n                    }\n                }[\"useOptionButtonPosition.useEffect\"]);\n            }\n            // Primer sync inmediato por si hay cambio de scroll entre renders.\n            syncPosition(\"initial-sync\");\n            return ({\n                \"useOptionButtonPosition.useEffect\": ()=>{\n                    detach.forEach({\n                        \"useOptionButtonPosition.useEffect\": (fn)=>{\n                            try {\n                                fn();\n                            } catch (e) {\n                            // no-op cleanup guard\n                            }\n                        }\n                    }[\"useOptionButtonPosition.useEffect\"]);\n                }\n            })[\"useOptionButtonPosition.useEffect\"];\n        }\n    }[\"useOptionButtonPosition.useEffect\"], [\n        stageRef,\n        layoutRootRef,\n        elementosSeleccionados.length,\n        actualizarPosicionBotonOpciones,\n        ocultarBotonOpciones\n    ]);\n    return {\n        actualizarPosicionBotonOpciones\n    };\n}\n_s(useOptionButtonPosition, \"v+ENYjZOVvZm8w/O7K1fozfoPMg=\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = __webpack_module__.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = __webpack_module__.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, __webpack_module__.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                __webpack_module__.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                __webpack_module__.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        __webpack_module__.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    __webpack_module__.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL2VkaXRvci9vdmVybGF5cy91c2VPcHRpb25CdXR0b25Qb3NpdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUQ7QUFFdkQsTUFBTUcsK0JBQStCO0FBQ3JDLE1BQU1DLDhCQUE4QjtBQUNwQyxNQUFNQyw4QkFBOEI7QUFDcEMsTUFBTUMsZ0NBQWdDO0FBQ3RDLE1BQU1DLGdDQUFnQztBQUN0QyxNQUFNQywrQkFBK0I7QUFDckMsTUFBTUMsK0JBQStCO0FBQ3JDLE1BQU1DLGtCQUFrQjtBQUV4QixTQUFTQztJQUNQLE9BQU8sS0FBNkIsSUFBSUMsT0FBT0MsbUJBQW1CLEtBQUs7QUFDekU7QUFFQSxTQUFTQyxhQUFhQyxZQUFZLEVBQUVDLFlBQVk7SUFDOUMsSUFBSUMsT0FBT0MsUUFBUSxDQUFDSCxpQkFBaUJBLGVBQWUsR0FBRyxPQUFPQTtJQUM5RCxJQUFJRSxPQUFPQyxRQUFRLENBQUNGLGlCQUFpQkEsZUFBZSxHQUFHLE9BQU9BO0lBQzlELE9BQU87QUFDVDtBQUVBLFNBQVNHLE1BQU1DLEtBQUssRUFBRUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVCLE9BQU9DLEtBQUtGLEdBQUcsQ0FBQ0MsS0FBS0MsS0FBS0QsR0FBRyxDQUFDRCxLQUFLRDtBQUNyQztBQUVBLFNBQVNJLG9CQUFvQkMsTUFBTTtRQU9qQkE7SUFOaEIsSUFBSUEsV0FBV2IsUUFBUSxPQUFPO0lBQzlCLElBQUlhLFdBQVdDLFVBQVUsT0FBTztJQUNoQyxJQUFJLENBQUVELENBQUFBLGtCQUFrQkUsT0FBTSxHQUFJLE9BQU87SUFFekMsTUFBTUMsTUFBTUMsT0FBT0osT0FBT0ssT0FBTyxJQUFJLElBQUlDLFdBQVc7SUFDcEQsTUFBTUMsS0FBS1AsT0FBT08sRUFBRSxHQUFHLElBQWMsT0FBVlAsT0FBT08sRUFBRSxJQUFLO0lBQ3pDLE1BQU1DLFVBQVVSLEVBQUFBLG9CQUFBQSxPQUFPUyxTQUFTLGNBQWhCVCx3Q0FBQUEs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QUFBLDRCQUFBQSxNQUFPUyxHQUFHLEtBQUk7O2dCQUVuRHJLLE1BQU1rSyxFQUFFLENBQUMsMEJBQTBCRTtnQkFDbkNwSyxNQUFNa0ssRUFBRSxDQUFDLHlCQUF5Qkk7Z0JBQ2xDdEssTUFBTWtLLEVBQUUsQ0FBQywyQkFBMkJLO2dCQUNwQ3ZLLE1BQU1rSyxFQUFFLENBQUMsOEJBQThCTTtnQkFDdkNqQixPQUFPaEksSUFBSTt5REFBQzt3QkFDVnZCLE1BQU1tSyxHQUFHLENBQUMsMEJBQTBCQzt3QkFDcENwSyxNQUFNbUssR0FBRyxDQUFDLHlCQUF5Qkc7d0JBQ25DdEssTUFBTW1LLEdBQUcsQ0FBQywyQkFBMkJJO3dCQUNyQ3ZLLE1BQU1tSyxHQUFHLENBQUMsOEJBQThCSztvQkFDMUM7O1lBQ0Y7WUFFQSxtRUFBbUU7WUFDbkVuQixhQUFhO1lBRWI7cURBQU87b0JBQ0xFLE9BQU9DLE9BQU87NkRBQUMsQ0FBQ2lCOzRCQUNkLElBQUk7Z0NBQ0ZBOzRCQUNGLEVBQUUsVUFBTTs0QkFDTixzQkFBc0I7NEJBQ3hCO3dCQUNGOztnQkFDRjs7UUFDRjs0Q0FBRztRQUNEMUk7UUFDQUg7UUFDQUUsdUJBQXVCcEMsTUFBTTtRQUM3QnlFO1FBQ0FMO0tBQ0Q7SUFFRCxPQUFPO1FBQ0xLO0lBQ0Y7QUFDRjtHQWxid0J6QyIsInNvdXJjZXMiOlsiQzpcXFJlc2VydmFlbGRpYVxcc3JjXFxjb21wb25lbnRzXFxlZGl0b3JcXG92ZXJsYXlzXFx1c2VPcHRpb25CdXR0b25Qb3NpdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcblxuY29uc3QgRkFMTEJBQ0tfQlVUVE9OX1NJWkVfREVTS1RPUCA9IDI0O1xuY29uc3QgRkFMTEJBQ0tfQlVUVE9OX1NJWkVfTU9CSUxFID0gMzg7XG5jb25zdCBCVVRUT05fVkVSVEVYX09WRVJMQVBfUkFUSU8gPSAwLjU7XG5jb25zdCBCVVRUT05fVkVSVEVYX05VREdFX1hfREVTS1RPUCA9IDIwO1xuY29uc3QgQlVUVE9OX1ZFUlRFWF9OVURHRV9ZX0RFU0tUT1AgPSAyMDtcbmNvbnN0IEJVVFRPTl9WRVJURVhfTlVER0VfWF9NT0JJTEUgPSA0O1xuY29uc3QgQlVUVE9OX1ZFUlRFWF9OVURHRV9ZX01PQklMRSA9IDQ7XG5jb25zdCBMT0dfVEhST1RUTEVfTVMgPSAxMjA7XG5cbmZ1bmN0aW9uIGlzT3B0aW9uQnV0dG9uRGVidWdFbmFibGVkKCkge1xuICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuX19EQkdfT1BUSU9OX0JVVFRPTiA9PT0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVNjYWxlKGVzY2FsYVZpc3VhbCwgZXNjYWxhQWN0aXZhKSB7XG4gIGlmIChOdW1iZXIuaXNGaW5pdGUoZXNjYWxhVmlzdWFsKSAmJiBlc2NhbGFWaXN1YWwgPiAwKSByZXR1cm4gZXNjYWxhVmlzdWFsO1xuICBpZiAoTnVtYmVyLmlzRmluaXRlKGVzY2FsYUFjdGl2YSkgJiYgZXNjYWxhQWN0aXZhID4gMCkgcmV0dXJuIGVzY2FsYUFjdGl2YTtcbiAgcmV0dXJuIDE7XG59XG5cbmZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZhbHVlKSk7XG59XG5cbmZ1bmN0aW9uIGRlc2NyaWJlRXZlbnRUYXJnZXQodGFyZ2V0KSB7XG4gIGlmICh0YXJnZXQgPT09IHdpbmRvdykgcmV0dXJuIFwid2luZG93XCI7XG4gIGlmICh0YXJnZXQgPT09IGRvY3VtZW50KSByZXR1cm4gXCJkb2N1bWVudFwiO1xuICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIFwidW5rbm93blwiO1xuXG4gIGNvbnN0IHRhZyA9IFN0cmluZyh0YXJnZXQudGFnTmFtZSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBpZCA9IHRhcmdldC5pZCA/IGAjJHt0YXJnZXQuaWR9YCA6IFwiXCI7XG4gIGNvbnN0IGNsYXNzZXMgPSB0YXJnZXQuY2xhc3NMaXN0Py5sZW5ndGhcbiAgICA/IGAuJHtBcnJheS5mcm9tKHRhcmdldC5jbGFzc0xpc3QpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpfWBcbiAgICA6IFwiXCI7XG4gIHJldHVybiBgJHt0YWd9JHtpZH0ke2NsYXNzZXN9YCB8fCBcImVsZW1lbnRcIjtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVJlbmRlcmVkU2NhbGUoc3RhZ2UsIHN0YWdlUmVjdCwgZXNjYWxhVmlzdWFsLCBlc2NhbGFBY3RpdmEpIHtcbiAgY29uc3Qgc3RhZ2VXaWR0aCA9XG4gICAgdHlwZW9mIHN0YWdlPy53aWR0aCA9PT0gXCJmdW5jdGlvblwiID8gTnVtYmVyKHN0YWdlLndpZHRoKCkpIDogTnVtYmVyKHN0YWdlPy5hdHRycz8ud2lkdGgpO1xuICBjb25zdCBzdGFnZUhlaWdodCA9XG4gICAgdHlwZW9mIHN0YWdlPy5oZWlnaHQgPT09IFwiZnVuY3Rpb25cIiA/IE51bWJlcihzdGFnZS5oZWlnaHQoKSkgOiBOdW1iZXIoc3RhZ2U/LmF0dHJzPy5oZWlnaHQpO1xuXG4gIGNvbnN0IGZhbGxiYWNrID0gcmVzb2x2ZVNjYWxlKGVzY2FsYVZpc3VhbCwgZXNjYWxhQWN0aXZhKTtcbiAgY29uc3Qgc2NhbGVYID0gTnVtYmVyLmlzRmluaXRlKHN0YWdlV2lkdGgpICYmIHN0YWdlV2lkdGggPiAwXG4gICAgPyBzdGFnZVJlY3Qud2lkdGggLyBzdGFnZVdpZHRoXG4gICAgOiBmYWxsYmFjaztcbiAgY29uc3Qgc2NhbGVZID0gTnVtYmVyLmlzRmluaXRlKHN0YWdlSGVpZ2h0KSAmJiBzdGFnZUhlaWdodCA+IDBcbiAgICA/IHN0YWdlUmVjdC5oZWlnaHQgLyBzdGFnZUhlaWdodFxuICAgIDogZmFsbGJhY2s7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBOdW1iZXIuaXNGaW5pdGUoc2NhbGVYKSAmJiBzY2FsZVggPiAwID8gc2NhbGVYIDogZmFsbGJhY2ssXG4gICAgeTogTnVtYmVyLmlzRmluaXRlKHNjYWxlWSkgJiYgc2NhbGVZID4gMCA/IHNjYWxlWSA6IGZhbGxiYWNrLFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxhYmxlQW5jZXN0b3JzKHN0YXJ0Tm9kZSkge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIFtdO1xuICBpZiAoIShzdGFydE5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuIFt3aW5kb3ddO1xuXG4gIGNvbnN0IHRhcmdldHMgPSBbXTtcbiAgbGV0IGN1cnJlbnQgPSBzdGFydE5vZGUucGFyZW50RWxlbWVudDtcblxuICB3aGlsZSAoY3VycmVudCAmJiBjdXJyZW50ICE9PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgY29uc3Qgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50KTtcbiAgICBjb25zdCBvdmVyZmxvd1kgPSBTdHJpbmcoc3R5bGUub3ZlcmZsb3dZIHx8IFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBTdHJpbmcoc3R5bGUub3ZlcmZsb3cgfHwgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBpc1Njcm9sbGFibGUgPVxuICAgICAgb3ZlcmZsb3dZID09PSBcImF1dG9cIiB8fFxuICAgICAgb3ZlcmZsb3dZID09PSBcInNjcm9sbFwiIHx8XG4gICAgICBvdmVyZmxvd1kgPT09IFwib3ZlcmxheVwiIHx8XG4gICAgICBvdmVyZmxvdyA9PT0gXCJhdXRvXCIgfHxcbiAgICAgIG92ZXJmbG93ID09PSBcInNjcm9sbFwiIHx8XG4gICAgICBvdmVyZmxvdyA9PT0gXCJvdmVybGF5XCI7XG5cbiAgICBpZiAoaXNTY3JvbGxhYmxlKSB7XG4gICAgICB0YXJnZXRzLnB1c2goY3VycmVudCk7XG4gICAgfVxuXG4gICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgfVxuXG4gIGlmIChkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50KSB7XG4gICAgdGFyZ2V0cy5wdXNoKGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQpO1xuICB9XG4gIHRhcmdldHMucHVzaCh3aW5kb3cpO1xuXG4gIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodGFyZ2V0cykpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VPcHRpb25CdXR0b25Qb3NpdGlvbih7XG4gIGJvdG9uT3BjaW9uZXNSZWYsXG4gIGxheW91dFJvb3RSZWYgPSBudWxsLFxuICBlbGVtZW50UmVmcyxcbiAgZWxlbWVudG9zU2VsZWNjaW9uYWRvcyxcbiAgc3RhZ2VSZWYsXG4gIGVzY2FsYVZpc3VhbCxcbiAgZXNjYWxhQWN0aXZhLFxuICBpc01vYmlsZSA9IGZhbHNlLFxuICBidXR0b25TaXplID0gRkFMTEJBQ0tfQlVUVE9OX1NJWkVfREVTS1RPUCxcbn0pIHtcbiAgY29uc3QgbGFzdExvZ0J5RXZlbnRSZWYgPSB1c2VSZWYoe30pO1xuXG4gIGNvbnN0IGRlYnVnTG9nID0gdXNlQ2FsbGJhY2soKGV2ZW50TmFtZSwgcGF5bG9hZCA9IHt9LCBmb3JjZSA9IGZhbHNlKSA9PiB7XG4gICAgaWYgKCFpc09wdGlvbkJ1dHRvbkRlYnVnRW5hYmxlZCgpKSByZXR1cm47XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHByZXZpb3VzID0gTnVtYmVyKGxhc3RMb2dCeUV2ZW50UmVmLmN1cnJlbnRbZXZlbnROYW1lXSB8fCAwKTtcbiAgICBpZiAoIWZvcmNlICYmIG5vdyAtIHByZXZpb3VzIDwgTE9HX1RIUk9UVExFX01TKSByZXR1cm47XG4gICAgbGFzdExvZ0J5RXZlbnRSZWYuY3VycmVudFtldmVudE5hbWVdID0gbm93O1xuXG4gICAgY29uc29sZS5sb2coYFtPUFRJT04tQlVUVE9OXSAke2V2ZW50TmFtZX1gLCB7XG4gICAgICB0czogbmV3IERhdGUobm93KS50b0lTT1N0cmluZygpLFxuICAgICAgLi4ucGF5bG9hZCxcbiAgICB9KTtcblxuICAgIGlmIChldmVudE5hbWUgPT09IFwicG9zaXRpb25cIikge1xuICAgICAgY29uc3QgYm94WSA9IHBheWxvYWQ/LmJveFN0YWdlPy55ID8/IG51bGw7XG4gICAgICBjb25zdCBhYnNZID0gcGF5bG9hZD8ubm9kZUFic29sdXRlPy55ID8/IG51bGw7XG4gICAgICBjb25zdCBhbmNob3JZID0gcGF5bG9hZD8uYW5jaG9yU3RhZ2VZID8/IG51bGw7XG4gICAgICBjb25zdCBmaW5hbFkgPSBwYXlsb2FkPy5maW5hbD8ueSA/PyBudWxsO1xuICAgICAgY29uc3QgZWxlbWVudFkgPSBwYXlsb2FkPy5lbGVtZW50U2NyZWVuPy55ID8/IG51bGw7XG4gICAgICBjb25zdCBzdGFnZVRvcCA9IHBheWxvYWQ/LnN0YWdlUmVjdD8udG9wID8/IG51bGw7XG4gICAgICBjb25zdCBzb3VyY2UgPSBwYXlsb2FkPy5zb3VyY2UgPz8gXCJ1bmtub3duXCI7XG4gICAgICBjb25zdCB0YXJnZXQgPSBwYXlsb2FkPy5ldmVudFRhcmdldD8ubGFiZWwgPz8gcGF5bG9hZD8uc2Nyb2xsVGFyZ2V0Py5sYWJlbCA/PyBcInVua25vd25cIjtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgW09QVElPTi1CVVRUT05dW1NVTU1BUlldIHNyYz0ke3NvdXJjZX0gdGFyZ2V0PSR7dGFyZ2V0fSBib3hZPSR7Ym94WX0gYWJzWT0ke2Fic1l9IGFuY2hvclk9JHthbmNob3JZfSBlbGVtZW50WT0ke2VsZW1lbnRZfSBmaW5hbFk9JHtmaW5hbFl9IHN0YWdlVG9wPSR7c3RhZ2VUb3B9YFxuICAgICAgKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICBjb25zdCBvY3VsdGFyQm90b25PcGNpb25lcyA9IHVzZUNhbGxiYWNrKChyZWFzb24gPSBcInVua25vd25cIiwgZXh0cmEgPSBudWxsKSA9PiB7XG4gICAgaWYgKCFib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGRlYnVnTG9nKFxuICAgICAgXCJoaWRlXCIsXG4gICAgICB7XG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgc2VsZWN0ZWRJZDogZWxlbWVudG9zU2VsZWNjaW9uYWRvcz8uWzBdID8/IG51bGwsXG4gICAgICAgIGlzTW9iaWxlLFxuICAgICAgICBleHRyYSxcbiAgICAgIH0sXG4gICAgICBmYWxzZVxuICAgICk7XG4gIH0sIFtib3Rvbk9wY2lvbmVzUmVmLCBkZWJ1Z0xvZywgZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgaXNNb2JpbGVdKTtcblxuICBjb25zdCBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzID0gdXNlQ2FsbGJhY2soKFxuICAgIHNvdXJjZSA9IFwibWFudWFsXCIsXG4gICAgbmF0aXZlRXZlbnQgPSBudWxsLFxuICAgIGV2ZW50VGFyZ2V0TGFiZWwgPSBudWxsXG4gICkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgaWYgKCFib3Rvbk9wY2lvbmVzUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGlmIChlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCAhPT0gMSkge1xuICAgICAgb2N1bHRhckJvdG9uT3BjaW9uZXMoXCJzZWxlY3Rpb24tY291bnRcIiwge1xuICAgICAgICBzb3VyY2UsXG4gICAgICAgIGNvdW50OiBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGVSZWYgPSBlbGVtZW50UmVmcy5jdXJyZW50W2VsZW1lbnRvc1NlbGVjY2lvbmFkb3NbMF1dO1xuICAgIGNvbnN0IHN0YWdlID0gc3RhZ2VSZWYuY3VycmVudDtcbiAgICBpZiAoIW5vZGVSZWYgfHwgIXN0YWdlKSB7XG4gICAgICBvY3VsdGFyQm90b25PcGNpb25lcyhcIm1pc3Npbmctbm9kZS1vci1zdGFnZVwiLCB7XG4gICAgICAgIHNvdXJjZSxcbiAgICAgICAgaGFzTm9kZTogQm9vbGVhbihub2RlUmVmKSxcbiAgICAgICAgaGFzU3RhZ2U6IEJvb2xlYW4oc3RhZ2UpLFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJveCA9IG5vZGVSZWYuZ2V0Q2xpZW50UmVjdCh7XG4gICAgICAgIHJlbGF0aXZlVG86IHN0YWdlLFxuICAgICAgICBza2lwU2hhZG93OiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBub2RlQWJzb2x1dGVQb3NpdGlvbiA9XG4gICAgICAgIHR5cGVvZiBub2RlUmVmLmdldEFic29sdXRlUG9zaXRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gbm9kZVJlZi5nZXRBYnNvbHV0ZVBvc2l0aW9uKClcbiAgICAgICAgICA6IHtcbiAgICAgICAgICAgIHg6IHR5cGVvZiBub2RlUmVmLnggPT09IFwiZnVuY3Rpb25cIiA/IG5vZGVSZWYueCgpIDogbnVsbCxcbiAgICAgICAgICAgIHk6IHR5cGVvZiBub2RlUmVmLnkgPT09IFwiZnVuY3Rpb25cIiA/IG5vZGVSZWYueSgpIDogbnVsbCxcbiAgICAgICAgICB9O1xuICAgICAgY29uc3Qgc3RhZ2VDb250YWluZXIgPVxuICAgICAgICB0eXBlb2Ygc3RhZ2UuY29udGFpbmVyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICA/IHN0YWdlLmNvbnRhaW5lcigpXG4gICAgICAgICAgOiBzdGFnZS5nZXRTdGFnZT8uKCk/LmNvbnRhaW5lcj8uKCk7XG4gICAgICBpZiAoIXN0YWdlQ29udGFpbmVyKSB7XG4gICAgICAgIG9jdWx0YXJCb3Rvbk9wY2lvbmVzKFwibWlzc2luZy1zdGFnZS1jb250YWluZXJcIiwgeyBzb3VyY2UgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhZ2VSZWN0ID0gc3RhZ2VDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCByZW5kZXJlZFNjYWxlID0gcmVzb2x2ZVJlbmRlcmVkU2NhbGUoc3RhZ2UsIHN0YWdlUmVjdCwgZXNjYWxhVmlzdWFsLCBlc2NhbGFBY3RpdmEpO1xuICAgICAgY29uc3QgdGFyZ2V0QnV0dG9uU2l6ZSA9XG4gICAgICAgIE51bWJlci5pc0Zpbml0ZShidXR0b25TaXplKSAmJiBidXR0b25TaXplID4gMFxuICAgICAgICAgID8gYnV0dG9uU2l6ZVxuICAgICAgICAgIDogaXNNb2JpbGVcbiAgICAgICAgICAgID8gRkFMTEJBQ0tfQlVUVE9OX1NJWkVfTU9CSUxFXG4gICAgICAgICAgICA6IEZBTExCQUNLX0JVVFRPTl9TSVpFX0RFU0tUT1A7XG4gICAgICBjb25zdCBvdmVybGFwUHggPSB0YXJnZXRCdXR0b25TaXplICogQlVUVE9OX1ZFUlRFWF9PVkVSTEFQX1JBVElPO1xuICAgICAgY29uc3QgbnVkZ2VYID0gaXNNb2JpbGUgPyBCVVRUT05fVkVSVEVYX05VREdFX1hfTU9CSUxFIDogQlVUVE9OX1ZFUlRFWF9OVURHRV9YX0RFU0tUT1A7XG4gICAgICBjb25zdCBudWRnZVkgPSBpc01vYmlsZSA/IEJVVFRPTl9WRVJURVhfTlVER0VfWV9NT0JJTEUgOiBCVVRUT05fVkVSVEVYX05VREdFX1lfREVTS1RPUDtcblxuICAgICAgY29uc3QgYW5jaG9yU3RhZ2VZID1cbiAgICAgICAgTnVtYmVyLmlzRmluaXRlKG5vZGVBYnNvbHV0ZVBvc2l0aW9uPy55KVxuICAgICAgICAgID8gTWF0aC5taW4oYm94LnksIG5vZGVBYnNvbHV0ZVBvc2l0aW9uLnkpXG4gICAgICAgICAgOiBib3gueTtcblxuICAgICAgY29uc3QgZWxlbWVudG9YID0gc3RhZ2VSZWN0LmxlZnQgKyBib3gueCAqIHJlbmRlcmVkU2NhbGUueDtcbiAgICAgIGNvbnN0IGVsZW1lbnRvWSA9IHN0YWdlUmVjdC50b3AgKyBhbmNob3JTdGFnZVkgKiByZW5kZXJlZFNjYWxlLnk7XG4gICAgICBjb25zdCBhbmNob0VsZW1lbnRvID0gTWF0aC5tYXgoMCwgYm94LndpZHRoICogcmVuZGVyZWRTY2FsZS54KTtcbiAgICAgIGNvbnN0IGFsdG9FbGVtZW50byA9IE1hdGgubWF4KDAsIGJveC5oZWlnaHQgKiByZW5kZXJlZFNjYWxlLnkpO1xuICAgICAgY29uc3QgZWxlbWVudG9SaWdodCA9IGVsZW1lbnRvWCArIGFuY2hvRWxlbWVudG87XG5cbiAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGNvbnN0IHZpZXdwb3J0SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgY29uc3Qgdmlld3BvcnRQYWRkaW5nID0gaXNNb2JpbGUgPyA4IDogNDtcblxuICAgICAgY29uc3QgZWxlbWVudG9WaXNpYmxlID1cbiAgICAgICAgZWxlbWVudG9YICsgYW5jaG9FbGVtZW50byA+PSAwICYmXG4gICAgICAgIGVsZW1lbnRvWCA8PSB2aWV3cG9ydFdpZHRoICYmXG4gICAgICAgIGVsZW1lbnRvWSArIGFsdG9FbGVtZW50byA+PSAwICYmXG4gICAgICAgIGVsZW1lbnRvWSA8PSB2aWV3cG9ydEhlaWdodDtcblxuICAgICAgaWYgKCFlbGVtZW50b1Zpc2libGUpIHtcbiAgICAgICAgb2N1bHRhckJvdG9uT3BjaW9uZXMoXCJlbGVtZW50LW91dHNpZGUtdmlld3BvcnRcIiwge1xuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBlbGVtZW50UmVjdDoge1xuICAgICAgICAgICAgbGVmdDogTWF0aC5yb3VuZChlbGVtZW50b1gpLFxuICAgICAgICAgICAgdG9wOiBNYXRoLnJvdW5kKGVsZW1lbnRvWSksXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChhbmNob0VsZW1lbnRvKSxcbiAgICAgICAgICAgIGhlaWdodDogTWF0aC5yb3VuZChhbHRvRWxlbWVudG8pLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdmlld3BvcnQ6IHsgd2lkdGg6IHZpZXdwb3J0V2lkdGgsIGhlaWdodDogdmlld3BvcnRIZWlnaHQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQW5jbGEgdmlzdWFsOiBjZW50cm8gZGVsIGJvdMOzbiBleGFjdGFtZW50ZSBlbiBlbCB2w6lydGljZSBzdXBlcmlvciBkZXJlY2hvLlxuICAgICAgY29uc3QgcHJlZmVycmVkWCA9IGVsZW1lbnRvUmlnaHQgLSBvdmVybGFwUHggKyBudWRnZVg7XG4gICAgICBjb25zdCBwcmVmZXJyZWRZID0gZWxlbWVudG9ZIC0gb3ZlcmxhcFB4IC0gbnVkZ2VZO1xuXG4gICAgICBjb25zdCBtaW5YID0gdmlld3BvcnRQYWRkaW5nO1xuICAgICAgY29uc3QgbWF4WCA9IE1hdGgubWF4KG1pblgsIHZpZXdwb3J0V2lkdGggLSB0YXJnZXRCdXR0b25TaXplIC0gdmlld3BvcnRQYWRkaW5nKTtcbiAgICAgIGNvbnN0IG1pblkgPSB2aWV3cG9ydFBhZGRpbmc7XG4gICAgICBjb25zdCBtYXhZID0gTWF0aC5tYXgobWluWSwgdmlld3BvcnRIZWlnaHQgLSB0YXJnZXRCdXR0b25TaXplIC0gdmlld3BvcnRQYWRkaW5nKTtcblxuICAgICAgY29uc3QgZmFsbGJhY2tOZWFyVmVydGV4WCA9IGVsZW1lbnRvUmlnaHQgLSB0YXJnZXRCdXR0b25TaXplIC0gMTtcbiAgICAgIGNvbnN0IHVzZUZhbGxiYWNrTmVhclZlcnRleFggPVxuICAgICAgICBwcmVmZXJyZWRYICsgdGFyZ2V0QnV0dG9uU2l6ZSA+IHZpZXdwb3J0V2lkdGggLSB2aWV3cG9ydFBhZGRpbmcgJiZcbiAgICAgICAgZmFsbGJhY2tOZWFyVmVydGV4WCA+PSBtaW5YO1xuICAgICAgY29uc3QgZmFsbGJhY2tOZWFyVmVydGV4WSA9IGVsZW1lbnRvWSArIDE7XG4gICAgICBjb25zdCB1c2VGYWxsYmFja05lYXJWZXJ0ZXhZID0gcHJlZmVycmVkWSA8IG1pblkgJiYgZmFsbGJhY2tOZWFyVmVydGV4WSA8PSBtYXhZO1xuXG4gICAgICBjb25zdCBwbGFjZW1lbnRNb2RlWCA9IHVzZUZhbGxiYWNrTmVhclZlcnRleFggPyBcImZhbGxiYWNrLWxlZnQtb2YtdmVydGV4XCIgOiBcInZlcnRleFwiO1xuICAgICAgY29uc3QgcGxhY2VtZW50TW9kZVkgPSB1c2VGYWxsYmFja05lYXJWZXJ0ZXhZID8gXCJmYWxsYmFjay1iZWxvdy12ZXJ0ZXhcIiA6IFwidmVydGV4XCI7XG4gICAgICBsZXQgYm90b25YID0gdXNlRmFsbGJhY2tOZWFyVmVydGV4WCA/IGZhbGxiYWNrTmVhclZlcnRleFggOiBwcmVmZXJyZWRYO1xuICAgICAgbGV0IGJvdG9uWSA9IHVzZUZhbGxiYWNrTmVhclZlcnRleFkgPyBmYWxsYmFja05lYXJWZXJ0ZXhZIDogcHJlZmVycmVkWTtcblxuXG4gICAgICBib3RvblggPSBjbGFtcChib3RvblgsIG1pblgsIG1heFgpO1xuICAgICAgYm90b25ZID0gY2xhbXAoYm90b25ZLCBtaW5ZLCBtYXhZKTtcblxuICAgICAgY29uc3QgaGFzUmVsYXRpdmVSb290ID0gQm9vbGVhbihsYXlvdXRSb290UmVmPy5jdXJyZW50KTtcbiAgICAgIGxldCByZW5kZXJYID0gYm90b25YO1xuICAgICAgbGV0IHJlbmRlclkgPSBib3Rvblk7XG4gICAgICBpZiAoaGFzUmVsYXRpdmVSb290KSB7XG4gICAgICAgIGNvbnN0IHJvb3RSZWN0ID0gbGF5b3V0Um9vdFJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZW5kZXJYID0gYm90b25YIC0gcm9vdFJlY3QubGVmdDtcbiAgICAgICAgcmVuZGVyWSA9IGJvdG9uWSAtIHJvb3RSZWN0LnRvcDtcbiAgICAgIH1cblxuICAgICAgYm90b25PcGNpb25lc1JlZi5jdXJyZW50LnN0eWxlLmxlZnQgPSBgJHtNYXRoLnJvdW5kKHJlbmRlclgpfXB4YDtcbiAgICAgIGJvdG9uT3BjaW9uZXNSZWYuY3VycmVudC5zdHlsZS50b3AgPSBgJHtNYXRoLnJvdW5kKHJlbmRlclkpfXB4YDtcbiAgICAgIGJvdG9uT3BjaW9uZXNSZWYuY3VycmVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cbiAgICAgIGlmIChpc09wdGlvbkJ1dHRvbkRlYnVnRW5hYmxlZCgpKSB7XG4gICAgICAgIGNvbnN0IGRlYnVnU2Nyb2xsVGFyZ2V0ID0gZ2V0U2Nyb2xsYWJsZUFuY2VzdG9ycyhzdGFnZUNvbnRhaW5lcilbMF0gfHwgd2luZG93O1xuICAgICAgICBjb25zdCBzdGFnZVdpZHRoID1cbiAgICAgICAgICB0eXBlb2Ygc3RhZ2U/LndpZHRoID09PSBcImZ1bmN0aW9uXCIgPyBOdW1iZXIoc3RhZ2Uud2lkdGgoKSkgOiBOdW1iZXIoc3RhZ2U/LmF0dHJzPy53aWR0aCk7XG4gICAgICAgIGNvbnN0IHN0YWdlSGVpZ2h0ID1cbiAgICAgICAgICB0eXBlb2Ygc3RhZ2U/LmhlaWdodCA9PT0gXCJmdW5jdGlvblwiID8gTnVtYmVyKHN0YWdlLmhlaWdodCgpKSA6IE51bWJlcihzdGFnZT8uYXR0cnM/LmhlaWdodCk7XG4gICAgICAgIGRlYnVnTG9nKFwicG9zaXRpb25cIiwge1xuICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICBzZWxlY3RlZElkOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zWzBdLFxuICAgICAgICAgIGlzTW9iaWxlLFxuICAgICAgICAgIHBvaW50ZXJUeXBlOiBuYXRpdmVFdmVudD8ucG9pbnRlclR5cGUgPz8gbnVsbCxcbiAgICAgICAgICBuYXRpdmVFdmVudFR5cGU6IG5hdGl2ZUV2ZW50Py50eXBlID8/IG51bGwsXG4gICAgICAgICAgZXZlbnRUYXJnZXQ6IHtcbiAgICAgICAgICAgIGxhYmVsOiBldmVudFRhcmdldExhYmVsIHx8IGRlc2NyaWJlRXZlbnRUYXJnZXQobmF0aXZlRXZlbnQ/LnRhcmdldCksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdGFnZVNpemU6IHtcbiAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIuaXNGaW5pdGUoc3RhZ2VXaWR0aCkgPyBzdGFnZVdpZHRoIDogbnVsbCxcbiAgICAgICAgICAgIGhlaWdodDogTnVtYmVyLmlzRmluaXRlKHN0YWdlSGVpZ2h0KSA/IHN0YWdlSGVpZ2h0IDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0YWdlUmVjdDoge1xuICAgICAgICAgICAgbGVmdDogTWF0aC5yb3VuZChzdGFnZVJlY3QubGVmdCksXG4gICAgICAgICAgICB0b3A6IE1hdGgucm91bmQoc3RhZ2VSZWN0LnRvcCksXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5yb3VuZChzdGFnZVJlY3Qud2lkdGgpLFxuICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKHN0YWdlUmVjdC5oZWlnaHQpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVuZGVyZWRTY2FsZToge1xuICAgICAgICAgICAgeDogTnVtYmVyKHJlbmRlcmVkU2NhbGUueC50b0ZpeGVkKDQpKSxcbiAgICAgICAgICAgIHk6IE51bWJlcihyZW5kZXJlZFNjYWxlLnkudG9GaXhlZCg0KSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib3hTdGFnZToge1xuICAgICAgICAgICAgeDogTnVtYmVyKGJveC54LnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgeTogTnVtYmVyKGJveC55LnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgd2lkdGg6IE51bWJlcihib3gud2lkdGgudG9GaXhlZCgyKSksXG4gICAgICAgICAgICBoZWlnaHQ6IE51bWJlcihib3guaGVpZ2h0LnRvRml4ZWQoMikpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbm9kZUFic29sdXRlOiB7XG4gICAgICAgICAgICB4OiBOdW1iZXIuaXNGaW5pdGUobm9kZUFic29sdXRlUG9zaXRpb24/LngpXG4gICAgICAgICAgICAgID8gTnVtYmVyKG5vZGVBYnNvbHV0ZVBvc2l0aW9uLngudG9GaXhlZCgyKSlcbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgeTogTnVtYmVyLmlzRmluaXRlKG5vZGVBYnNvbHV0ZVBvc2l0aW9uPy55KVxuICAgICAgICAgICAgICA/IE51bWJlcihub2RlQWJzb2x1dGVQb3NpdGlvbi55LnRvRml4ZWQoMikpXG4gICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFuY2hvclN0YWdlWTogTnVtYmVyKGFuY2hvclN0YWdlWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICBlbGVtZW50U2NyZWVuOiB7XG4gICAgICAgICAgICB4OiBOdW1iZXIoZWxlbWVudG9YLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgeTogTnVtYmVyKGVsZW1lbnRvWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHJpZ2h0OiBOdW1iZXIoZWxlbWVudG9SaWdodC50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIoYW5jaG9FbGVtZW50by50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIGhlaWdodDogTnVtYmVyKGFsdG9FbGVtZW50by50b0ZpeGVkKDIpKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByZWZlcnJlZDoge1xuICAgICAgICAgICAgeDogTnVtYmVyKHByZWZlcnJlZFgudG9GaXhlZCgyKSksXG4gICAgICAgICAgICB5OiBOdW1iZXIocHJlZmVycmVkWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHRhcmdldEJ1dHRvblNpemUsXG4gICAgICAgICAgICBvdmVybGFwUHg6IE51bWJlcihvdmVybGFwUHgudG9GaXhlZCgyKSksXG4gICAgICAgICAgICBudWRnZVgsXG4gICAgICAgICAgICBudWRnZVksXG4gICAgICAgICAgICBmYWxsYmFja05lYXJWZXJ0ZXhYOiBOdW1iZXIoZmFsbGJhY2tOZWFyVmVydGV4WC50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIGZhbGxiYWNrTmVhclZlcnRleFk6IE51bWJlcihmYWxsYmFja05lYXJWZXJ0ZXhZLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgcGxhY2VtZW50TW9kZVgsXG4gICAgICAgICAgICBwbGFjZW1lbnRNb2RlWSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZpbmFsOiB7XG4gICAgICAgICAgICB4OiBOdW1iZXIoYm90b25YLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgeTogTnVtYmVyKGJvdG9uWS50b0ZpeGVkKDIpKSxcbiAgICAgICAgICAgIHJlbmRlclg6IE51bWJlcihyZW5kZXJYLnRvRml4ZWQoMikpLFxuICAgICAgICAgICAgcmVuZGVyWTogTnVtYmVyKHJlbmRlclkudG9GaXhlZCgyKSksXG4gICAgICAgICAgICBwb3NpdGlvbk1vZGU6IGhhc1JlbGF0aXZlUm9vdCA/IFwiYWJzb2x1dGVcIiA6IFwiZml4ZWRcIixcbiAgICAgICAgICAgIG1pblgsXG4gICAgICAgICAgICBtYXhYLFxuICAgICAgICAgICAgbWluWSxcbiAgICAgICAgICAgIG1heFksXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2aWV3cG9ydDoge1xuICAgICAgICAgICAgd2lkdGg6IHZpZXdwb3J0V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHZpZXdwb3J0SGVpZ2h0LFxuICAgICAgICAgICAgc2Nyb2xsWDogTnVtYmVyKHdpbmRvdy5zY3JvbGxYIHx8IHdpbmRvdy5wYWdlWE9mZnNldCB8fCAwKSxcbiAgICAgICAgICAgIHNjcm9sbFk6IE51bWJlcih3aW5kb3cuc2Nyb2xsWSB8fCB3aW5kb3cucGFnZVlPZmZzZXQgfHwgMCksXG4gICAgICAgICAgICB2aXN1YWxWaWV3cG9ydDogd2luZG93LnZpc3VhbFZpZXdwb3J0XG4gICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIG9mZnNldFRvcDogTnVtYmVyKHdpbmRvdy52aXN1YWxWaWV3cG9ydC5vZmZzZXRUb3AgfHwgMCksXG4gICAgICAgICAgICAgICAgb2Zmc2V0TGVmdDogTnVtYmVyKHdpbmRvdy52aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0IHx8IDApLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBOdW1iZXIod2luZG93LnZpc3VhbFZpZXdwb3J0LndpZHRoIHx8IDApLFxuICAgICAgICAgICAgICAgIGhlaWdodDogTnVtYmVyKHdpbmRvdy52aXN1YWxWaWV3cG9ydC5oZWlnaHQgfHwgMCksXG4gICAgICAgICAgICAgICAgc2NhbGU6IE51bWJlcih3aW5kb3cudmlzdWFsVmlld3BvcnQuc2NhbGUgfHwgMSksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2Nyb2xsVGFyZ2V0OiB7XG4gICAgICAgICAgICBsYWJlbDogZGVzY3JpYmVFdmVudFRhcmdldChkZWJ1Z1Njcm9sbFRhcmdldCksXG4gICAgICAgICAgICBzY3JvbGxUb3A6XG4gICAgICAgICAgICAgIGRlYnVnU2Nyb2xsVGFyZ2V0ICYmIFwic2Nyb2xsVG9wXCIgaW4gZGVidWdTY3JvbGxUYXJnZXRcbiAgICAgICAgICAgICAgICA/IE51bWJlcihkZWJ1Z1Njcm9sbFRhcmdldC5zY3JvbGxUb3AgfHwgMClcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciB8fCBcInVua25vd24tZXJyb3JcIik7XG4gICAgICBkZWJ1Z0xvZyhcInBvc2l0aW9uLWVycm9yXCIsIHtcbiAgICAgICAgc291cmNlLFxuICAgICAgICBzZWxlY3RlZElkOiBlbGVtZW50b3NTZWxlY2Npb25hZG9zPy5bMF0gPz8gbnVsbCxcbiAgICAgICAgZXJyb3I6IG1lc3NhZ2UsXG4gICAgICB9LCB0cnVlKTtcbiAgICAgIG9jdWx0YXJCb3Rvbk9wY2lvbmVzKFwiZXhjZXB0aW9uXCIsIHsgc291cmNlLCBlcnJvcjogbWVzc2FnZSB9KTtcbiAgICB9XG4gIH0sIFtcbiAgICBib3Rvbk9wY2lvbmVzUmVmLFxuICAgIGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MsXG4gICAgZWxlbWVudFJlZnMsXG4gICAgc3RhZ2VSZWYsXG4gICAgZXNjYWxhVmlzdWFsLFxuICAgIGVzY2FsYUFjdGl2YSxcbiAgICBkZWJ1Z0xvZyxcbiAgICBvY3VsdGFyQm90b25PcGNpb25lcyxcbiAgICBsYXlvdXRSb290UmVmLFxuICAgIGlzTW9iaWxlLFxuICAgIGJ1dHRvblNpemUsXG4gIF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoICE9PSAxKSB7XG4gICAgICBvY3VsdGFyQm90b25PcGNpb25lcygpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBsZXQgcmFmQSA9IDA7XG4gICAgbGV0IHJhZkIgPSAwO1xuXG4gICAgcmFmQSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgcmFmQiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzKFwicmFmLWluaXRcIiwgbnVsbCwgXCJyYWZcIik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocmFmQSkgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZkEpO1xuICAgICAgaWYgKHJhZkIpIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShyYWZCKTtcbiAgICB9O1xuICB9LCBbZWxlbWVudG9zU2VsZWNjaW9uYWRvcywgYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcywgb2N1bHRhckJvdG9uT3BjaW9uZXNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgY29uc3Qgc3RhZ2UgPSBzdGFnZVJlZi5jdXJyZW50Py5nZXRTdGFnZT8uKCkgfHwgc3RhZ2VSZWYuY3VycmVudDtcbiAgICBjb25zdCBzdGFnZUNvbnRhaW5lciA9XG4gICAgICB0eXBlb2Ygc3RhZ2U/LmNvbnRhaW5lciA9PT0gXCJmdW5jdGlvblwiID8gc3RhZ2UuY29udGFpbmVyKCkgOiBudWxsO1xuICAgIGNvbnN0IGhhc1JlbGF0aXZlUm9vdCA9IEJvb2xlYW4obGF5b3V0Um9vdFJlZj8uY3VycmVudCk7XG5cbiAgICBjb25zdCBzeW5jUG9zaXRpb24gPSAoc291cmNlID0gXCJzeW5jXCIsIG5hdGl2ZUV2ZW50ID0gbnVsbCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnRvc1NlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMoXG4gICAgICAgICAgc291cmNlLFxuICAgICAgICAgIG5hdGl2ZUV2ZW50LFxuICAgICAgICAgIGRlc2NyaWJlRXZlbnRUYXJnZXQobmF0aXZlRXZlbnQ/LnRhcmdldClcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9jdWx0YXJCb3Rvbk9wY2lvbmVzKFwic3luYy1uby1zZWxlY3Rpb25cIiwgeyBzb3VyY2UgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHNjcm9sbFRhcmdldHMgPSBoYXNSZWxhdGl2ZVJvb3RcbiAgICAgID8gW11cbiAgICAgIDogKHN0YWdlQ29udGFpbmVyID8gZ2V0U2Nyb2xsYWJsZUFuY2VzdG9ycyhzdGFnZUNvbnRhaW5lcikgOiBbd2luZG93XSk7XG4gICAgY29uc3QgZGV0YWNoID0gW107XG5cbiAgICBzY3JvbGxUYXJnZXRzLmZvckVhY2goKHRhcmdldCkgPT4ge1xuICAgICAgaWYgKCF0YXJnZXQ/LmFkZEV2ZW50TGlzdGVuZXIgfHwgIXRhcmdldD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcikgcmV0dXJuO1xuICAgICAgY29uc3Qgb25TY3JvbGwgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgc3luY1Bvc2l0aW9uKGBzY3JvbGw6JHtkZXNjcmliZUV2ZW50VGFyZ2V0KGV2ZW50LnRhcmdldCl9YCwgZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG9uU2Nyb2xsLCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICBkZXRhY2gucHVzaCgoKSA9PiB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBvblNjcm9sbCkpO1xuICAgIH0pO1xuXG4gICAgaWYgKCFoYXNSZWxhdGl2ZVJvb3QgJiYgd2luZG93LnZpc3VhbFZpZXdwb3J0KSB7XG4gICAgICBjb25zdCBvblZpc3VhbFZpZXdwb3J0U2Nyb2xsID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHN5bmNQb3NpdGlvbihcInZpc3VhbC12aWV3cG9ydC1zY3JvbGxcIiwgZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIGNvbnN0IG9uVmlzdWFsVmlld3BvcnRSZXNpemUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgc3luY1Bvc2l0aW9uKFwidmlzdWFsLXZpZXdwb3J0LXJlc2l6ZVwiLCBldmVudCk7XG4gICAgICB9O1xuICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgb25WaXN1YWxWaWV3cG9ydFNjcm9sbCk7XG4gICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBvblZpc3VhbFZpZXdwb3J0UmVzaXplKTtcbiAgICAgIGRldGFjaC5wdXNoKCgpID0+IHtcbiAgICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgb25WaXN1YWxWaWV3cG9ydFNjcm9sbCk7XG4gICAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uVmlzdWFsVmlld3BvcnRSZXNpemUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgb25SZXNpemUgPSAoZXZlbnQpID0+IHtcbiAgICAgIHN5bmNQb3NpdGlvbihcIndpbmRvdy1yZXNpemVcIiwgZXZlbnQpO1xuICAgIH07XG4gICAgY29uc3Qgb25PcmllbnRhdGlvbkNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgc3luY1Bvc2l0aW9uKFwid2luZG93LW9yaWVudGF0aW9uY2hhbmdlXCIsIGV2ZW50KTtcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uUmVzaXplKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIG9uT3JpZW50YXRpb25DaGFuZ2UpO1xuICAgIGRldGFjaC5wdXNoKCgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG9uUmVzaXplKSk7XG4gICAgZGV0YWNoLnB1c2goKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLCBvbk9yaWVudGF0aW9uQ2hhbmdlKSk7XG5cbiAgICBpZiAoc3RhZ2U/Lm9uICYmIHN0YWdlPy5vZmYpIHtcbiAgICAgIGNvbnN0IG9uU3RhZ2VEcmFnTW92ZSA9IChldmVudCkgPT4gc3luY1Bvc2l0aW9uKFwic3RhZ2UtZHJhZ21vdmVcIiwgZXZlbnQ/LmV2dCB8fCBudWxsKTtcbiAgICAgIGNvbnN0IG9uU3RhZ2VEcmFnRW5kID0gKGV2ZW50KSA9PiBzeW5jUG9zaXRpb24oXCJzdGFnZS1kcmFnZW5kXCIsIGV2ZW50Py5ldnQgfHwgbnVsbCk7XG4gICAgICBjb25zdCBvblN0YWdlVHJhbnNmb3JtID0gKGV2ZW50KSA9PiBzeW5jUG9zaXRpb24oXCJzdGFnZS10cmFuc2Zvcm1cIiwgZXZlbnQ/LmV2dCB8fCBudWxsKTtcbiAgICAgIGNvbnN0IG9uU3RhZ2VUcmFuc2Zvcm1FbmQgPSAoZXZlbnQpID0+XG4gICAgICAgIHN5bmNQb3NpdGlvbihcInN0YWdlLXRyYW5zZm9ybWVuZFwiLCBldmVudD8uZXZ0IHx8IG51bGwpO1xuXG4gICAgICBzdGFnZS5vbihcImRyYWdtb3ZlLm9wdGlvbi1idXR0b25cIiwgb25TdGFnZURyYWdNb3ZlKTtcbiAgICAgIHN0YWdlLm9uKFwiZHJhZ2VuZC5vcHRpb24tYnV0dG9uXCIsIG9uU3RhZ2VEcmFnRW5kKTtcbiAgICAgIHN0YWdlLm9uKFwidHJhbnNmb3JtLm9wdGlvbi1idXR0b25cIiwgb25TdGFnZVRyYW5zZm9ybSk7XG4gICAgICBzdGFnZS5vbihcInRyYW5zZm9ybWVuZC5vcHRpb24tYnV0dG9uXCIsIG9uU3RhZ2VUcmFuc2Zvcm1FbmQpO1xuICAgICAgZGV0YWNoLnB1c2goKCkgPT4ge1xuICAgICAgICBzdGFnZS5vZmYoXCJkcmFnbW92ZS5vcHRpb24tYnV0dG9uXCIsIG9uU3RhZ2VEcmFnTW92ZSk7XG4gICAgICAgIHN0YWdlLm9mZihcImRyYWdlbmQub3B0aW9uLWJ1dHRvblwiLCBvblN0YWdlRHJhZ0VuZCk7XG4gICAgICAgIHN0YWdlLm9mZihcInRyYW5zZm9ybS5vcHRpb24tYnV0dG9uXCIsIG9uU3RhZ2VUcmFuc2Zvcm0pO1xuICAgICAgICBzdGFnZS5vZmYoXCJ0cmFuc2Zvcm1lbmQub3B0aW9uLWJ1dHRvblwiLCBvblN0YWdlVHJhbnNmb3JtRW5kKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFByaW1lciBzeW5jIGlubWVkaWF0byBwb3Igc2kgaGF5IGNhbWJpbyBkZSBzY3JvbGwgZW50cmUgcmVuZGVycy5cbiAgICBzeW5jUG9zaXRpb24oXCJpbml0aWFsLXN5bmNcIik7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGV0YWNoLmZvckVhY2goKGZuKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm4oKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgLy8gbm8tb3AgY2xlYW51cCBndWFyZFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9LCBbXG4gICAgc3RhZ2VSZWYsXG4gICAgbGF5b3V0Um9vdFJlZixcbiAgICBlbGVtZW50b3NTZWxlY2Npb25hZG9zLmxlbmd0aCxcbiAgICBhY3R1YWxpemFyUG9zaWNpb25Cb3Rvbk9wY2lvbmVzLFxuICAgIG9jdWx0YXJCb3Rvbk9wY2lvbmVzLFxuICBdKTtcblxuICByZXR1cm4ge1xuICAgIGFjdHVhbGl6YXJQb3NpY2lvbkJvdG9uT3BjaW9uZXMsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJGQUxMQkFDS19CVVRUT05fU0laRV9ERVNLVE9QIiwiRkFMTEJBQ0tfQlVUVE9OX1NJWkVfTU9CSUxFIiwiQlVUVE9OX1ZFUlRFWF9PVkVSTEFQX1JBVElPIiwiQlVUVE9OX1ZFUlRFWF9OVURHRV9YX0RFU0tUT1AiLCJCVVRUT05fVkVSVEVYX05VREdFX1lfREVTS1RPUCIsIkJVVFRPTl9WRVJURVhfTlVER0VfWF9NT0JJTEUiLCJCVVRUT05fVkVSVEVYX05VREdFX1lfTU9CSUxFIiwiTE9HX1RIUk9UVExFX01TIiwiaXNPcHRpb25CdXR0b25EZWJ1Z0VuYWJsZWQiLCJ3aW5kb3ciLCJfX0RCR19PUFRJT05fQlVUVE9OIiwicmVzb2x2ZVNjYWxlIiwiZXNjYWxhVmlzdWFsIiwiZXNjYWxhQWN0aXZhIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJjbGFtcCIsInZhbHVlIiwibWluIiwibWF4IiwiTWF0aCIsImRlc2NyaWJlRXZlbnRUYXJnZXQiLCJ0YXJnZXQiLCJkb2N1bWVudCIsIkVsZW1lbnQiLCJ0YWciLCJTdHJpbmciLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJpZCIsImNsYXNzZXMiLCJjbGFzc0xpc3QiLCJsZW5ndGgiLCJBcnJheSIsImZyb20iLCJzbGljZSIsImpvaW4iLCJyZXNvbHZlUmVuZGVyZWRTY2FsZSIsInN0YWdlIiwic3RhZ2VSZWN0Iiwic3RhZ2VXaWR0aCIsIndpZHRoIiwiYXR0cnMiLCJzdGFnZUhlaWdodCIsImhlaWdodCIsImZhbGxiYWNrIiwic2NhbGVYIiwic2NhbGVZIiwieCIsInkiLCJnZXRTY3JvbGxhYmxlQW5jZXN0b3JzIiwic3RhcnROb2RlIiwidGFyZ2V0cyIsImN1cnJlbnQiLCJwYXJlbnRFbGVtZW50IiwiYm9keSIsInN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm92ZXJmbG93WSIsIm92ZXJmbG93IiwiaXNTY3JvbGxhYmxlIiwicHVzaCIsInNjcm9sbGluZ0VsZW1lbnQiLCJTZXQiLCJ1c2VPcHRpb25CdXR0b25Qb3NpdGlvbiIsImJvdG9uT3BjaW9uZXNSZWYiLCJsYXlvdXRSb290UmVmIiwiZWxlbWVudFJlZnMiLCJlbGVtZW50b3NTZWxlY2Npb25hZG9zIiwic3RhZ2VSZWYiLCJpc01vYmlsZSIsImJ1dHRvblNpemUiLCJsYXN0TG9nQnlFdmVudFJlZiIsImRlYnVnTG9nIiwiZXZlbnROYW1lIiwicGF5bG9hZCIsImZvcmNlIiwibm93IiwiRGF0ZSIsInByZXZpb3VzIiwiY29uc29sZSIsImxvZyIsInRzIiwidG9JU09TdHJpbmciLCJib3hZIiwiYm94U3RhZ2UiLCJhYnNZIiwibm9kZUFic29sdXRlIiwiYW5jaG9yWSIsImFuY2hvclN0YWdlWSIsImZpbmFsWSIsImZpbmFsIiwiZWxlbWVudFkiLCJlbGVtZW50U2NyZWVuIiwic3RhZ2VUb3AiLCJ0b3AiLCJzb3VyY2UiLCJldmVudFRhcmdldCIsImxhYmVsIiwic2Nyb2xsVGFyZ2V0Iiwib2N1bHRhckJvdG9uT3BjaW9uZXMiLCJyZWFzb24iLCJleHRyYSIsImRpc3BsYXkiLCJzZWxlY3RlZElkIiwiYWN0dWFsaXphclBvc2ljaW9uQm90b25PcGNpb25lcyIsIm5hdGl2ZUV2ZW50IiwiZXZlbnRUYXJnZXRMYWJlbCIsImNvdW50Iiwibm9kZVJlZiIsImhhc05vZGUiLCJCb29sZWFuIiwiaGFzU3RhZ2UiLCJib3giLCJnZXRDbGllbnRSZWN0IiwicmVsYXRpdmVUbyIsInNraXBTaGFkb3ciLCJub2RlQWJzb2x1dGVQb3NpdGlvbiIsImdldEFic29sdXRlUG9zaXRpb24iLCJzdGFnZUNvbnRhaW5lciIsImNvbnRhaW5lciIsImdldFN0YWdlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVuZGVyZWRTY2FsZSIsInRhcmdldEJ1dHRvblNpemUiLCJvdmVybGFwUHgiLCJudWRnZVgiLCJudWRnZVkiLCJlbGVtZW50b1giLCJsZWZ0IiwiZWxlbWVudG9ZIiwiYW5jaG9FbGVtZW50byIsImFsdG9FbGVtZW50byIsImVsZW1lbnRvUmlnaHQiLCJ2aWV3cG9ydFdpZHRoIiwiaW5uZXJXaWR0aCIsInZpZXdwb3J0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJ2aWV3cG9ydFBhZGRpbmciLCJlbGVtZW50b1Zpc2libGUiLCJlbGVtZW50UmVjdCIsInJvdW5kIiwidmlld3BvcnQiLCJwcmVmZXJyZWRYIiwicHJlZmVycmVkWSIsIm1pblgiLCJtYXhYIiwibWluWSIsIm1heFkiLCJmYWxsYmFja05lYXJWZXJ0ZXhYIiwidXNlRmFsbGJhY2tOZWFyVmVydGV4WCIsImZhbGxiYWNrTmVhclZlcnRleFkiLCJ1c2VGYWxsYmFja05lYXJWZXJ0ZXhZIiwicGxhY2VtZW50TW9kZVgiLCJwbGFjZW1lbnRNb2RlWSIsImJvdG9uWCIsImJvdG9uWSIsImhhc1JlbGF0aXZlUm9vdCIsInJlbmRlclgiLCJyZW5kZXJZIiwicm9vdFJlY3QiLCJkZWJ1Z1Njcm9sbFRhcmdldCIsInBvaW50ZXJUeXBlIiwibmF0aXZlRXZlbnRUeXBlIiwidHlwZSIsInN0YWdlU2l6ZSIsInRvRml4ZWQiLCJyaWdodCIsInByZWZlcnJlZCIsInBvc2l0aW9uTW9kZSIsInNjcm9sbFgiLCJwYWdlWE9mZnNldCIsInNjcm9sbFkiLCJwYWdlWU9mZnNldCIsInZpc3VhbFZpZXdwb3J0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsInNjYWxlIiwic2Nyb2xsVG9wIiwiZXJyb3IiLCJtZXNzYWdlIiwiRXJyb3IiLCJ1bmRlZmluZWQiLCJyYWZBIiwicmFmQiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwic3luY1Bvc2l0aW9uIiwic2Nyb2xsVGFyZ2V0cyIsImRldGFjaCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uU2Nyb2xsIiwiZXZlbnQiLCJwYXNzaXZlIiwib25WaXN1YWxWaWV3cG9ydFNjcm9sbCIsIm9uVmlzdWFsVmlld3BvcnRSZXNpemUiLCJvblJlc2l6ZSIsIm9uT3JpZW50YXRpb25DaGFuZ2UiLCJvbiIsIm9mZiIsIm9uU3RhZ2VEcmFnTW92ZSIsImV2dCIsIm9uU3RhZ2VEcmFnRW5kIiwib25TdGFnZVRyYW5zZm9ybSIsIm9uU3RhZ2VUcmFuc2Zvcm1FbmQiLCJmbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./src/components/editor/overlays/useOptionButtonPosition.js\n"));

/***/ })

});